/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./engine/src/Application.js":
/*!***********************************!*\
  !*** ./engine/src/Application.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Application": () => (/* binding */ Application),
/* harmony export */   "application": () => (/* binding */ application),
/* harmony export */   "stage": () => (/* binding */ stage)
/* harmony export */ });
/* harmony import */ var _Asset__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Asset */ "./engine/src/Asset.js");
/* harmony import */ var _EventDispatcher__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EventDispatcher */ "./engine/src/EventDispatcher.js");
/* harmony import */ var _Sprite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Sprite */ "./engine/src/Sprite.js");
/* harmony import */ var _Stage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Stage */ "./engine/src/Stage.js");
/* harmony import */ var _Types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Types */ "./engine/src/Types.js");
/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Utils */ "./engine/src/Utils.js");
/* harmony import */ var _Event__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Event */ "./engine/src/Event.js");








const MAX_UPDATE_PER_LOGIC_TICK = 5;


/**
 * 
 *
 * @export
 * @class Application
 */
class Application extends _EventDispatcher__WEBPACK_IMPORTED_MODULE_1__.EventDispatcher {
    constructor() {
        super();
        console.log( "🎮 Application start." );
        this.stage = new _Stage__WEBPACK_IMPORTED_MODULE_3__.Stage();
        this.lastUpdate = performance.now();
        onmessage = this.onRenderMessage.bind( this );
        this.paused = false;
        this.inputEnabled = true;
        this.physicsReady = false;
        this.physicsWorker = new Worker( "physics.js" );
        this.physicsWorker.onmessage = this.onPhysicsMessage.bind( this );
        this.physicsWorker.postMessage( { msg: "setStageBound",args: [640,480,true,true,true,true] } );

        this.touchEnabled = self._deviceInfo.touchEnabled;
        /** 
         * 논리적인 뷰포트를 얻는다
         * position은 renderViewport로부터의 위치
         * size는 논리 뷰포트 크기 
         */
        this.logicalViewport = new _Types__WEBPACK_IMPORTED_MODULE_4__.Rect( 0,0,0,0 );
        /** 
         * 렌더 뷰포트의 좌상단 지점에서 로지컬 뷰포트의 원점까지의 로지컬 좌표계로 거리 
         */
        this.logicalViewportOffset = new _Types__WEBPACK_IMPORTED_MODULE_4__.Point( self._deviceInfo.logicalViewportOffset );
        /**
         * 렌더 뷰포트 크기:로직 뷰포트 크기
         * 로직이 렌더보다 크면 1 미만
         * 렌더가 로직보다 크면 1 초과 
         */
        this.logicalViewportScale = new _Types__WEBPACK_IMPORTED_MODULE_4__.Point( self._deviceInfo.logicalViewportScale );
        /**
         * 디바이스상의 해상도를 얻는다
         * position은 html콘텍스트 상에서의 좌표
         * size 디바이스 뷰포트 크기
         */
        this.deviceViewport = new _Types__WEBPACK_IMPORTED_MODULE_4__.Rect( self._deviceInfo.deviceViewport );
        

        this.init( 640,480,60,Application.ScaleModes.LETTERBOX );
    }

    init( width,height,fps = 60,scaleMode = Application.ScaleModes.LETTERBOX ) {
        this.logicalViewport = new _Types__WEBPACK_IMPORTED_MODULE_4__.Rect( 0,0,width,height );
        this.setUpdateFPS( fps );
        this.postMessageToRender( { msg: "addCommand",class: "Application",method: "setLogicalViewport",args: [this.logicalViewport.xywh,scaleMode] } );
    }

    onPhysicsMessage( msg ) {
        const data = msg.data;

        if ( data.msg == "ready" ) {
            console.log( "👍 Physics ready." );       
            this.physicsReady = true;
        } else if ( data.msg == "deviceInfo" ) {
            self._deviceInfo = msg.data.info;
            this.dispatchEvent( _Event__WEBPACK_IMPORTED_MODULE_6__.Event.RESIZE );
        }
    }

    onRenderMessage( msg ) {
        const data = msg.data;

        if ( data.msg == "render" ) {
            this.renderTick();
        } else if ( data.msg == "deviceInfo" ) {
            this.deviceViewport = new _Types__WEBPACK_IMPORTED_MODULE_4__.Rect( data.info.deviceViewport );
            this.logicalViewportOffset = new _Types__WEBPACK_IMPORTED_MODULE_4__.Point( data.info.logicalViewportOffset );
            this.logicalViewportScale = new _Types__WEBPACK_IMPORTED_MODULE_4__.Point( data.info.logicalViewportScale );
            this.dispatchEvent( _Event__WEBPACK_IMPORTED_MODULE_6__.Event.RESIZE );
        } else if ( data.msg == "Asset_loadCompleted" ) {
            _Asset__WEBPACK_IMPORTED_MODULE_0__.Asset.dispatchLoadedEvent( data.id );
        } else if ( data.msg == "input" && this.enableInput ) {
            this.onInputMessage( data.inputType,data.secondlyInputType,data.inputData );
        } else {
            console.log( "onRenderMessage",msg );
        }
    }

    /** 
     * 로직 뷰포트에서의 렌더 뷰포트의 범위
     * 이 범위로 박스를 생성하면 화면을 모두 가릴 수 있다 
     */
    get logicalRenderBounds() {
        return new _Types__WEBPACK_IMPORTED_MODULE_4__.Rect( -this.logicalViewportOffset.x,-this.logicalViewportOffset.y,this.logicalViewport.width + this.logicalViewportOffset.x * 2,this.logicalViewport.height + this.logicalViewportOffset.y * 2 );
    }

    onInputMessage( inputType, secondlyInputType, inputData ) {
        const e = new _Event__WEBPACK_IMPORTED_MODULE_6__.Event( inputType );

        Object.assign( e,inputData );
        this.stage.dispatchEventWithChildren( e );
        if ( !e.stopped && secondlyInputType ) {
            e.name = secondlyInputType;
            this.stage.dispatchEventWithChildren( e );
        }
    }

    renderTick() {
        const now = performance.now();
        const delta =  ( now - this.lastUpdate ) / ( 1000 / this.updateFPS );
        // 프레임 경계에서 안맞을까봐 round처리 해봄
        const numOfUpdate = Math.round( delta );

        if ( !this.paused ) {
            for ( let i = 0; i < Math.min( MAX_UPDATE_PER_LOGIC_TICK,numOfUpdate ); i++ ) {
                this.update();
            }
        }
        this.lastUpdate += ( 1000 / this.updateFPS ) * numOfUpdate;
    }

    /**
     * stage에 update메시지를 발송하고
     * sprite 상태를 main thread로 보낸다
     *
     * @memberof Application
     */
    update() {
        this.dispatchEvent( _Event__WEBPACK_IMPORTED_MODULE_6__.Event.BEFORE_UPDATE );
        _EventDispatcher__WEBPACK_IMPORTED_MODULE_1__.EventDispatcher.doEnterFrame();
        let [buf,transferList] = this.stage.encodeRenderingInfoWithChildren();

        // console.log( buf,extraBuf,strings );
        if ( this.physicsReady ) {
            this.physicsWorker.postMessage( { msg: "update" } );
        } 
        //@ts-ignore
        this.postMessageToRender( { msg: "update",renderingInfo: buf }, transferList );
        this.dispatchEvent( _Event__WEBPACK_IMPORTED_MODULE_6__.Event.AFTER_UPDATE );
    }

    setUpdateFPS( FPS ) {
        this.updateFPS = FPS;
        this.postMessageToRender( { msg: "addCommand", class: "Application",method: "setUpdateFPS",args: [this.updateFPS] } );
    }


    /**
     * 엔진을 완전히 정지시키거나 다시 켠다.
     * ENTER_FRAME과 입력 이벤트를 멈추는 것
     *
     * @param {*} v
     * @memberof Application
     */
    setPaused( v ) {
        this.paused = v;
        this.enableInput( !v );
    }

    enableInput( v ) {
        this.inputEnabled = v;
    }

    setBackgroundColor( c ) {
        this.postMessageToRender( { msg: "addCommand", class: "Application", method: "setBackgroundColor",args: [_Utils__WEBPACK_IMPORTED_MODULE_5__.Utils.hex2rgba( c )] } );
    }

    postMessageToRender( msg,transfer ) {
        postMessage( msg,transfer );
    }

    preload( assetFilenames,progressCallback ) {
        return _Asset__WEBPACK_IMPORTED_MODULE_0__.Asset.preload( assetFilenames,progressCallback );
    }
}

Application.ScaleModes = {
    NO_SCALE:   "NO_SCALE",
    CENTER:     "CENTER",
    CROP:       "CROP",
    LETTERBOX:  "LETTERBOX",
    STRETCH:    "STRETCH",
    FIT_WIDTH:  "FIT_WIDTH",
    FIT_HEIGHT: "FIT_HEIGHT",
};


//@ts-ignore
if ( self.application == null ) {
    //@ts-ignore
    self.application = new Application();
} 

/** @type {Application} */
//@ts-ignore
const application = self.application;
/** @type {Stage} */
//@ts-ignore
const stage = self.application.stage;

console.assert( _Utils__WEBPACK_IMPORTED_MODULE_5__.Utils.isWebWorker(),`Application을 메인쓰레드에 만들려고 하고 있음` );


/***/ }),

/***/ "./engine/src/Asset.js":
/*!*****************************!*\
  !*** ./engine/src/Asset.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Asset": () => (/* binding */ Asset)
/* harmony export */ });
/* harmony import */ var _Application__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Application */ "./engine/src/Application.js");
/* harmony import */ var _EventDispatcher__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EventDispatcher */ "./engine/src/EventDispatcher.js");
/* harmony import */ var _Event__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Event */ "./engine/src/Event.js");
/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Utils */ "./engine/src/Utils.js");





const fontInfoCache = {};


class Asset extends _EventDispatcher__WEBPACK_IMPORTED_MODULE_1__.EventDispatcher {
    /**
     * Creates an instance of AssetProxy.
     * @param {string=} name 관리되는 이름. 이름이 같으면 같은 어셋으로 간주된다.
     * @param {string=} assetType 어셋의 종류
     * @memberof AssetProxy
     */
    constructor( name, assetType ) {
        super();
        this.id = Asset.lastId++;
        if ( name != null && name.indexOf( "*" ) >= 0 ) {
            this.name = name.replace( "*",this.id.toString() );
        } else {
            this.name = name == null ? "" : name;
        }
        this.type = assetType == null ? Asset.guessType( this.name ) : assetType;

        Asset.finalizationRegistry.register( this,{ thisObjId: this.id, thisType: this.type } );

        this.loaded = undefined;
        this.onLoadedHandler = this.onLoaded.bind( this, [this.id] );

        if ( this.type == Asset.AssetTypes.TrueTypeFont
            || this.type == Asset.AssetTypes.BitmapFont
            || this.type == Asset.AssetTypes.Sound
            || this.type == Asset.AssetTypes.Texture ) {
            //LOADED 이벤트를 받아야 하는 타입만 걸어준다
            Asset.loadedEventDispatcher.addEventListener( _Event__WEBPACK_IMPORTED_MODULE_2__.Event.LOADED,this.onLoadedHandler );
        }
        this.loadFontInfo( name );
    }

    /**
     * 폰트를 로딩하는 경우 폰트 정보가 따로 필요하다
     *
     * @param {*} name
     * @memberof Asset
     */
    loadFontInfo( name ) {
        if ( this.type == Asset.AssetTypes.TrueTypeFont ) {
            if ( fontInfoCache[name] ) {
                // 캐시에 있는 경우
                this.fontInfo = fontInfoCache[name];
                console.log( `폰트 ${this.name} 로드 완료.(캐시)` );
                this.loaded = true;
                this.dispatchEvent( _Event__WEBPACK_IMPORTED_MODULE_2__.Event.LOADED );
            } else {
                fetch( `asset/${name}.json` )
                    .then( response => {
                        console.assert( response.ok,`asset/${name}.json 로드하지 못했음.` );
                        return response.json();
                    } )
                    .then( data => {
                        this.fontInfo = data;
                        if ( this.fontLoaded ) {
                            fontInfoCache[this.name] = this.fontInfo;
                            console.log( `폰트 ${this.name} 로드 완료.(json을 늦게 로딩)` );
                            this.loaded = true;
                            this.dispatchEvent( _Event__WEBPACK_IMPORTED_MODULE_2__.Event.LOADED );
                        }
                    } );
            }
        } else if ( this.type == Asset.AssetTypes.BitmapFont || this.type == Asset.AssetTypes.MsdfFont ) {
            // 비트맵도 json을 따로 로딩하는 처리 필요
            const json = _Utils__WEBPACK_IMPORTED_MODULE_3__.Utils.getEmbeddedFile( name + ".json" );

            this.fontInfo = JSON.parse( json );
            this.loaded = true;
        }
    }


    /**
     *
     *
     * @param {string} eventName
     * @param {function} func
     * @param {any=} context
     * @param {boolean} [isOnce=false]
     * @returns {Asset}
     * @memberof Asset
     */
    addEventListener( eventName, func, context = null, isOnce = false ) {
        //@ts-ignore
        return super.addEventListener( eventName, func, context, isOnce );
    }

    release() {
        _Application__WEBPACK_IMPORTED_MODULE_0__.application.postMessageToRender( { msg: "addCommand", class: "Asset", method: "release",args: [this.id] } );
    }

    load( extraData ) {
        // asset.extraData = extraData;
        _Application__WEBPACK_IMPORTED_MODULE_0__.application.postMessageToRender( { 
            msg:    "executeCommand",
            class:  "Asset",
            method: "load",
            args:   [
                { 
                    id:        this.id,
                    type:      this.type,
                    name:      this.name,
                    extraData: extraData,
                }
            ] } );
    }

    update( extraData ) {
        // asset.extraData = extraData;
        _Application__WEBPACK_IMPORTED_MODULE_0__.application.postMessageToRender( { 
            msg:    "addCommand",
            class:  "Asset",
            method: "load",
            args:   [
                { 
                    id:        this.id,
                    type:      this.type,
                    name:      this.name,
                    extraData: extraData,
                }
            ] } );
    }

    onLoaded( id, event ) {
        if ( id == event.id ) {
            // 내 것과 같은 id인 경우에만 이벤트를 부른다
            Asset.loadedEventDispatcher.removeEventListener( _Event__WEBPACK_IMPORTED_MODULE_2__.Event.LOADED,this.onLoadedHandler );
            // console.log( Asset.loadedEventDispatcher.eventEmitter );
            if ( this.type == Asset.AssetTypes.TrueTypeFont ) {
                this.fontLoaded = true;
                if ( this.fontInfo ) {
                    fontInfoCache[this.name] = this.fontInfo;
                    console.log( `폰트 ${this.name} 로드 완료.(ttf늦게 로딩)` );
                    this.loaded = true;
                    this.dispatchEvent( _Event__WEBPACK_IMPORTED_MODULE_2__.Event.LOADED );
                }
            } else {
                this.loaded = true;
                this.dispatchEvent( _Event__WEBPACK_IMPORTED_MODULE_2__.Event.LOADED );
            }
        }
    }

    static finalizeHandler( obj ) {
        // GC에 의해 수거되었으면 릴리즈를 보낸다.
        // console.log( `GC ${obj.thisObjId}` );
        _Application__WEBPACK_IMPORTED_MODULE_0__.application.postMessageToRender( { msg: "addCommand", class: "Asset", method: "release",args: [obj.thisObjId] } );
    }

    static dispatchLoadedEvent( id ) {
        Asset.loadedEventDispatcher.dispatchEvent( _Event__WEBPACK_IMPORTED_MODULE_2__.Event.LOADED,{ id } );
    }

    static guessType( name ) {
        const extMatch = /\.[^.]+$/.exec( name );
        const ext = extMatch != null ? extMatch[0].toLowerCase() : "";


        if ( ext == ".png" || ext == ".jpg" ) {
            return Asset.AssetTypes.Texture;
        } else if ( ext == ".wav" || ext == ".mp3" ) {
            return Asset.AssetTypes.Sound;
        } else if ( ext == ".ttf" ) {
            return Asset.AssetTypes.TrueTypeFont;
        // } else if ( ext == ".fnt") {
        //     return Asset.AssetTypes.BitmapFont;
        // } else if ( ext == ".msdf") {
        //     return Asset.AssetTypes.MsdfFont;
        } return null;
    }

    static findPreloadedAsset( name ) {
        for ( let asset of Asset.preloadAssets ) {
            if ( asset.name == name ) return asset;
        } 
        return null;
    }

    static preload( assetFilenames,progressCallback ) {
        return new Promise( ( resolve,reject )=>{
            for ( let name of assetFilenames ) {
                const asset = new Asset( name );

                asset.load();
                Asset.preloadAssets.push( asset );
                Asset.preloadAssetPromises.push( asset.eventToPromise( _Event__WEBPACK_IMPORTED_MODULE_2__.Event.LOADED ) );
            }
            Promise.all( Asset.preloadAssetPromises ).then( resolve );
        } );
    }
}
Asset.AssetTypes = {
    Texture:           "Texture",
    RenderTarget:      "RenderTarget",
    Sound:             "Sound",
    Shader:            "Shader",
    TrueTypeFont:      "TrueTypeFont",
    MsdfFont:          "MsdfFont",
    BitmapFont:        "BitmapFont",
    PostProcessFilter: "PostProcessFilter",
};
Asset.lastId = 1;
Asset.finalizationRegistry = new FinalizationRegistry( Asset.finalizeHandler );
Asset.loadedEventDispatcher = new _EventDispatcher__WEBPACK_IMPORTED_MODULE_1__.EventDispatcher();

Asset.preloadAssets = [];
Asset.preloadAssetPromises = [];


/***/ }),

/***/ "./engine/src/Bitmap.js":
/*!******************************!*\
  !*** ./engine/src/Bitmap.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Bitmap": () => (/* binding */ Bitmap)
/* harmony export */ });
/* harmony import */ var _Sprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Sprite */ "./engine/src/Sprite.js");
/* harmony import */ var _TextureBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TextureBase */ "./engine/src/TextureBase.js");



class Bitmap extends _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite {
    /**
     * Creates an instance of Bitmap.
     * @param {TextureBase} texture
     * @memberof Bitmap
     */
    constructor( texture ) {
        super();
        this._$$spriteType = _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite.SpriteTypes.BITMAP;
        this._$$updateCode = _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite.UpdateCodes.UPDATE_EXTRA;
        this.texture = texture;
        this._$$localBounds.x = 0;
        this._$$localBounds.y = 0;
        this._$$localBounds.width = texture.width;
        this._$$localBounds.height = texture.height;
    }

    encodeExtraRenderingInfo() {
        let encodedBuffer = new Float32Array( 9 );

        encodedBuffer[0] = this.texture.asset.id;
        encodedBuffer.set( this.texture.uvRect.getCornerPoints(),1 );
        return [encodedBuffer];
    }

    /**
     * 비트맵의 텍스쳐를 교체한다.
     * 텍스쳐만 바뀌고 비트맵의 크기는 변하지 않는다.
     *
     * @param {TextureBase} texture
     * @memberof Bitmap
     */
    setTexture( texture ) {
        this.texture = texture;
        this._$$updateCode |= _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite.UpdateCodes.UPDATE_EXTRA;
    }
}


/***/ }),

/***/ "./engine/src/BitmapFont.js":
/*!**********************************!*\
  !*** ./engine/src/BitmapFont.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BitmapFont": () => (/* binding */ BitmapFont)
/* harmony export */ });
/* harmony import */ var _Asset__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Asset */ "./engine/src/Asset.js");
/* harmony import */ var _FontBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FontBase */ "./engine/src/FontBase.js");
/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Utils */ "./engine/src/Utils.js");




class BitmapFont extends _FontBase__WEBPACK_IMPORTED_MODULE_1__.FontBase {
    constructor( bitmapFontName,referenceSize, styles, filter ) {
        super( bitmapFontName, referenceSize, styles );
        // Bitmap
        this.asset = new _Asset__WEBPACK_IMPORTED_MODULE_0__.Asset( bitmapFontName,_Asset__WEBPACK_IMPORTED_MODULE_0__.Asset.AssetTypes.BitmapFont );
        // 페이지가 여러개 있는 폰트는 아직 처리 못함
        const page = this.asset.fontInfo.pages[0];
        const pngSize = _Utils__WEBPACK_IMPORTED_MODULE_2__.Utils.getImageSize( page.file );

        this.asset.load( { 
            bitmap:        page.file, 
            width:         pngSize.width,
            height:        pngSize.height,
            referenceSize: this.referenceSize,
            styles:        this.styles,
            fontInfo:      this.asset.fontInfo,
            filter:        filter
        } );
        this.fontLoaded = false;
    }    

    measureTextWidth( str,size ) {
        super.measureTextWidth( str,size );

        const fontInfo = this.asset.fontInfo;
        const scale = size ? size / fontInfo.info.size : 1;

        let width = 0;

        for ( let i = 0; i < str.length; i++ ) {
            const char = str.charCodeAt( i );
            const charInfo = fontInfo.chars[char];

            width += charInfo.xadvance * scale;
        }
        return width;        
    }
}




/***/ }),

/***/ "./engine/src/Component.js":
/*!*********************************!*\
  !*** ./engine/src/Component.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Component": () => (/* binding */ Component)
/* harmony export */ });
/* harmony import */ var _Event__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Event */ "./engine/src/Event.js");
/* harmony import */ var _EventDispatcher__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EventDispatcher */ "./engine/src/EventDispatcher.js");
/* harmony import */ var _ComponentHolder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ComponentHolder */ "./engine/src/ComponentHolder.js");






/**
 * 이 클래스를 상속해서 기능을 구현한다.
 * 컴포넌트는 ComponentHolder에 자유롭게 add, remove할 수 있다.
 * add 될 때는 onAdd( holder )가 remove 될 때는 onRemove( holder )가 호출된다.
 * 
 * @class Component
 * 
 */
class Component {
    constructor() {
        // /** 
        //  * 컴포넌트가 holder에 추가될 때 호출된다.
        //  * @callback
        //  * @param {ComponentHolder=} holder
        //  * @memberof Component
        //  */
        // this.onAdded = undefined;
        // /** 
        //  * 컴포넌트가 holder에서 분리될 때 호출된다.
        //  * @callback
        //  * @param {ComponentHolder=} holder
        //  * @memberof Component
        //  */
        // this.onRemoved = undefined;

        /** 
         * 이 컴포넌트가 붙은 ComponentHolder 개체.
         * 이 개체는 addEventListener를 후킹해서 저장해두고 있으므로
         * 명시적으로 분리하지 않아도 자동으로 처리된다.
         * 
         * @readonly
         * @type {ComponentHolder}
         * 
         */
        this.holder = undefined;

        /** @type {Object.<string,[]>} */
        this.__savedHandlers = undefined;

        this.__name = this.constructor.name;
    }
   
    /**
     * 이 개체에 트리거를 추가할 수 있도록 Triggerable Proxy를 반환한다
     * 
     * @returns {Component} - EventDispatcher의 Proxy를 리턴한다
     * @memberof Component
     */
    triggerable() {
        // EventDispatcher의 triggerable을 빌려서 쓴다.
        // dispatchEvent를 구현했기 때문에 빌려써도 괜찮다.
        return _EventDispatcher__WEBPACK_IMPORTED_MODULE_1__.EventDispatcher.prototype.triggerable.call( this );
    }

    /**
     * 이 개체의 holder가 소유한 이벤트를 생성한다.
     * 
     * @param {object=} extenedValues 
     * @param {string=} eventName 
     * @returns {Event}
     * @memberof Component
     */
    newEvent( extenedValues,eventName ) {
        return _EventDispatcher__WEBPACK_IMPORTED_MODULE_1__.EventDispatcher.prototype.newEvent.call( this.holder, extenedValues, eventName );
    }

    /**
     * 
     * 이 개체의 holder가 소유한 트리거를 생성한다.
     * 트리거는 이 개체의 특정 프로퍼티값이 바뀔 때 자동으로 이벤트가 발생되도록 할 수 있다.
     * 
     * @param {object} props - 트리거를 걸 프로퍼티의 목록. { a:true, b:false } 로 하면 a에는 걸고 b에는 지운다.
     * @param {function=} filterFunction - true를 리턴한 경우에만 이벤트가 실행된다
     * @param {string=} eventName - 생략하면 자동으로 이벤트 이름이 부여된다
     * @returns {Event}
     * @memberof Component
     */
    newTrigger( props, filterFunction, eventName ) {
        return _EventDispatcher__WEBPACK_IMPORTED_MODULE_1__.EventDispatcher.prototype.newTrigger.call( this, props, filterFunction, eventName );
    }

    /**
     * 컴포넌트의 이름을 돌려준다
     * 
     * @returns {string}
     * @memberof Component
     */
    getName() {
        return this.__name;
    }

    /**
     * 컴포넌트의 이름을 설정한다. 기본 값은 클래스 이름이다.
     * 이 값을 바꿔서 같은 타입의 컴포넌트를 여러개 붙일 수 있다.
     * 만약 이름이 같다면 원래 있던 컴포넌트는 분리된다.
     * 
     * @param {string} v
     * @memberof Component
     */
    setName( v ) {
        this.__name = v;
    }

    /**
     *
     *
     * @param {Event|string} eventOrName
     * @param {object=} extendedValues
     * @returns {boolean}
     * @memberof Component
     */
    dispatchEvent( eventOrName, extendedValues ) {
        console.assert( this.holder, `컴포넌트 홀더가 없는데 이벤트를 발생시키려고 한다` );
        let event;

        if ( typeof eventOrName == "string" ) {
            event = new _Event__WEBPACK_IMPORTED_MODULE_0__.Event( eventOrName );
        } else {
            event = eventOrName;
        }

        event.target = this.holder;
        event.component = this;
        Object.assign( event,extendedValues );

        return this.holder.dispatchEvent( event );
    }


    isAdded() {
        return this.holder != null;
    }

    removeFromHolder() {
        console.assert( this.holder, `컴포넌트 홀더가 없는데 제거하려고 한다` );
        this.holder.removeComponent( this );
    }
}



/***/ }),

/***/ "./engine/src/ComponentHolder.js":
/*!***************************************!*\
  !*** ./engine/src/ComponentHolder.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ComponentHolder": () => (/* binding */ ComponentHolder)
/* harmony export */ });
/* harmony import */ var _EventDispatcher__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EventDispatcher */ "./engine/src/EventDispatcher.js");
/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Utils */ "./engine/src/Utils.js");



const searchMap = new WeakMap();


class ComponentHolder extends _EventDispatcher__WEBPACK_IMPORTED_MODULE_0__.EventDispatcher {
    constructor() {
        super();
        this.__components = {};
    }

    addComponent( com ) {
        const comName = com.getName();

        if ( com.holder != null ) {
            // 붙이려는 컴포넌트가 다른데 붙어있었던 경우 제거
            com.removeFromHolder();
        }
        if ( this.__components[comName] != null ) {
            // 같은 이름의 컴포넌트가 붙어있던 경우 이전 컴포넌트를 제거
            this.__components[comName].removeFromHolder();
        }
        this.__components[comName] = com;
        const arr = searchMap.get( com.constructor ) || [];

        if ( !arr.includes( com ) ) {
            arr.push( com );
            searchMap.set( com.constructor,arr );
        }
        com.holder = new Proxy( this, {
            get: ( t,k ) => {
                if ( k == "addEventListener" ) {
                    return function( eventName, func, context, isOnce ) {
                        // console.log( `${comName}의 ${eventName}이벤트 핸들러를 후킹해서 저장한다` );
                        com.__savedHandlers = com.__savedHandlers || {};
                        com.__savedHandlers[eventName] = com.__savedHandlers[eventName] || [];
                        com.__savedHandlers[eventName].push( [func,context] );
                        //원본을 실행해준다
                        //@ts-ignore
                        t.addEventListener( ...arguments );
                    };
                } else return t[k];
            }
        } );
        if ( com.onAdded ) {
            com.onAdded.call( com, com.holder );
        } else if ( Object.getPrototypeOf( com ).onAdded ) {
            Object.getPrototypeOf( com ).onAdded.call( com, com.holder );
        }

        return com;
    }

    createComponent( classType,obj ) {
        const newCom = new classType();

        this.addComponent( Object.assign( newCom,obj ) );

        return newCom;
    }


    removeComponent( com ) {
        if ( typeof com == "function" && com.prototype != null ) {
            // ClassType으로 삭제를 시도하는 경우
            // 해당 타입의 컴포넌트를 모두 삭제한다
            for ( const key in this.__components ) {
                if ( com.getName() == key ) {
                    this.removeComponent( this.__components[key] );
                }
            }

            return;
        }
        const comName = com.getName();

        if ( com.onRemoved ) {
            com.onRemoved.call( com, com.holder );
        } else if ( Object.getPrototypeOf( com ).onRemoved ) {
            Object.getPrototypeOf( com ).onRemoved.call( com, com.holder );
        }
        delete this.__components[comName];

        if ( com.__savedHandlers ) {
            console.log( `${comName}의 이벤트 핸들러를 정리한다` );
            for ( const eventName in com.__savedHandlers ) {
                for ( const [func,context] of com.__savedHandlers[eventName] ) {
                    console.log( `${eventName} 이벤트 핸들러 삭제` );
                    this.removeEventListener( eventName,func,context );
                }
            }
        }

        const arr = searchMap.get( com.constructor );

        console.assert( Array.isArray( arr ) );
        const i = arr.indexOf( com );

        if ( i >= 0 ) {
            arr.splice( i,1 );
            if ( arr.length > 0 ) {
                searchMap.set( com.constructor,arr );
            } else {
                searchMap.delete( com.constructor );
            }
        }
    }

    hasComponent( comType ) {
        return this.__components[comType.name] != null;
    }

    get components() {
        return this.__components;
    }

    getComponent( comType ) {
        return this.__components[typeof comType == "string" ? comType : comType.name];
    }

    getCompatibleComponents( comType ) {
        const r = [];

        for ( const comName in this.__components ) {
            const com = this.__components[comName];

            if ( com instanceof comType ) {
                r.push( com );
            }
        }

        return r;
    }

    static getAllComponents( comType ) {
        return searchMap.get( comType );
    }

    static getAllComponentHolders( ...comTypes ) {
        let arr;

        arr = this.getAllComponents( comTypes[0] );
        for ( let i = 1; i < comTypes.length; i++ ) {
            const arr2 = this.getAllComponents( comTypes[i] );

            arr = arr2.filter( ( v,i,a ) => arr.includes( v ) );
        }
 
        const r = [];

        for ( const n of arr ) {
            r.push( n.holder );
        }

        return r;
    }

    hasAllComponents( ...comTypes ) {
        for ( const comType of comTypes ) {
            if ( !this.hasComponent( comType ) ) return false;
        }

        return true;
    }
}
ComponentHolder.registeredHolders = {};



/***/ }),

/***/ "./engine/src/Event.js":
/*!*****************************!*\
  !*** ./engine/src/Event.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Event": () => (/* binding */ Event)
/* harmony export */ });

/** @typedef {import("./Component").Component} Component */
/** @typedef {import("./Sprite").Sprite} Sprite */
/** @typedef {import("./EventDispatcher").EventDispatcher} EventDispatcher */

/**
 * 
 * @class Event
  */
class Event {
    /**
     *Creates an instance of Event.
     * @param {string=} name
     * @param {object=} extendedValues
     * @param {EventDispatcher=} owner
     * @memberof Event
     */
    constructor( name = "@EVENT" + ( ++Event.nextId ), extendedValues,owner ) {
        this.name = name;
        this.stopped = false;
        /** @type {EventDispatcher} */
        this.target = undefined;
        /** @type {Component} */
        this.component = undefined;
        /** @type {EventDispatcher} */
        this.owner = owner;
        this.forwarded = false;

        if ( extendedValues ) {
            Object.assign( this, extendedValues );
        }
    }

    /**
     *
     *
     * @param {function} func
     * @param {object=} context
     * @returns {Event}
     * @memberof Event
     */
    on( func, context ) {
        if ( this.owner == null ) this.owner = new Event.EventDispatcher();
        this.owner.on( this.name, func, context );

        return this;
    }

    /**
     *
     *
     * @param {function} func
     * @param {object=} context
     * @returns {Event}
     * @memberof Event
     */
    once( func, context ) {
        if ( this.owner == null ) this.owner = new Event.EventDispatcher();
        this.owner.once( this.name, func, context );

        return this;
    }

    /**
     *
     *
     * @param {function} func
     * @param {object=} context
     * @param {Sprite=} refSprite
     * @returns {Event}
     * @memberof Event
     */
    onStage( func, context,refSprite ) {
        //@ts-ignore
        console.assert( this.owner && this.owner.addChild, "Sprite가 아니면 onStage를 할 수 없습니다." );
        this.owner.onStage( this.name, func, context, refSprite );

        return this;
    }

    /**
     *
     *
     * @param {function} func
     * @param {object=} context
     * @returns {Event}
     * @memberof Event
     */
    remove( func, context ) {
        if ( this.owner == null ) this.owner = new Event.EventDispatcher();
        this.owner.removeEventListener( this.name, func, context );

        return this;
    }

    /**
     *
     *
     * @param {object=} extendedValues
     * @returns {Event}
     * @memberof Event
     */
    dispatch( extendedValues ) {
        if ( this.owner == null ) this.owner = new Event.EventDispatcher();
        Object.assign( this, extendedValues );
        this.owner.dispatchEvent( this );

        return this;
    }
    

    stopPropagation() {
        this.stopped = true;
    }

    getTarget() {
        return this.target;
    }

    static isInputEvent( eventName ) {
        const att = Event.eventAttribs[eventName];

        if ( att != null ) {
            return att.isInput == true;
        }
    }
}

Event.STAGE_VISIBLE = "stageVisible";
Event.STAGE_FOCUS = "stageFocus";
Event.ENTER_FRAME = "enterFrame";
Event.RENDER = "render";
Event.ADDED_TO_STAGE = "addedToStage";
Event.REMOVED_FROM_STAGE = "removedFromStage";
Event.POINTER_DOWN = "pointerDown";
Event.POINTER_UP = "pointerUp";
Event.POINTER_MOVE = "pointerMove";
Event.MOUSE_DOWN = "mouseDown";
Event.MOUSE_UP = "mouseUp";
Event.MOUSE_MOVE = "mouseMove";
Event.MOUSE_WHEEL = "mouseWheel";
Event.TOUCHES_BEGIN = "touchesBegin";
Event.TOUCHES_MOVE = "touchesMove";
Event.TOUCHES_END = "touchesEnd";
Event.TOUCHES_CANCEL = "touchesCancel";
Event.KEY_UP = "keyUp";
Event.KEY_DOWN = "keyDown";
Event.TIMER = "timer";
Event.TEXTURE_UPDATE = "textureUpdate";
Event.RESIZE = "resize";
Event.READY = "ready";
Event.COMPLETE = "complete";
Event.ERROR = "error";
Event.BEFORE_UPDATE = "beforeUpdate";
Event.AFTER_UPDATE = "afterUpdate";
Event.LOADED = "loaded";
Event.ALL = "*";
Event.APPLICATION_INIT = "APPLICATION_INIT";
Event.APPLICATION_START = "APPLICATION_START";

Event.eventAttribs = {
    [Event.POINTER_DOWN]:   { isInput: true },
    [Event.POINTER_UP]:     { isInput: true },
    [Event.POINTER_MOVE]:   { isInput: true },
    [Event.MOUSE_DOWN]:     { isInput: true, device: "mouse" },
    [Event.MOUSE_UP]:       { isInput: true, device: "mouse" },
    [Event.MOUSE_MOVE]:     { isInput: true, device: "mouse" },
    [Event.MOUSE_WHEEL]:    { isInput: true, device: "mouse" },
    [Event.TOUCHES_BEGIN]:  { isInput: true, device: "touch" },
    [Event.TOUCHES_END]:    { isInput: true, device: "touch" },
    [Event.TOUCHES_MOVE]:   { isInput: true, device: "touch" },
    [Event.TOUCHES_CANCEL]: { isInput: true, device: "touch" },
    [Event.KEY_UP]:         { isInput: true, device: "keyboard" },
    [Event.KEY_DOWN]:       { isInput: true, device: "keyboard" },
};

Event.EventDispatcher = undefined;
Event.nextId = 0;




/***/ }),

/***/ "./engine/src/EventDispatcher.js":
/*!***************************************!*\
  !*** ./engine/src/EventDispatcher.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EventDispatcher": () => (/* binding */ EventDispatcher)
/* harmony export */ });
/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! eventemitter3 */ "./node_modules/eventemitter3/index.js");
/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(eventemitter3__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Event */ "./engine/src/Event.js");



// eventemitter3에서 _events 폴더에 이벤트를 보관한다고 가정하고 쓰여진 코드임


class EventDispatcher {
    constructor() {
        this.eventEmitter = new (eventemitter3__WEBPACK_IMPORTED_MODULE_0___default())();
    }

    /**
     * 이 개체에 트리거를 추가할 수 있도록 Triggerable Proxy를 반환한다
     * 
     * @returns {EventDispatcher} - EventDispatcher의 Proxy를 리턴한다
     * @memberof EventDispatcher
     */
    triggerable() {
        this.__triggers = {};

        return new Proxy( this, {
            set( target, key, value, receiver ) {
                const r = Reflect.set( target, key, value, receiver );
                const triggers = target.__triggers[key];

                if ( triggers ) {
                    for ( const [eventName, func] of triggers ) {
                        if ( func == null || func( target, key ) ) target.dispatchEvent( eventName, { key } );
                    }
                }

                return r;
            }
        } );
    }

    /**
     * 이 개체가 소유한 이벤트를 생성한다.
     * 
     * @param {object=} extenedValues 
     * @param {string=} eventName 
     * @returns {Event}
     */
    newEvent( extenedValues,eventName ) {
        return new _Event__WEBPACK_IMPORTED_MODULE_1__.Event( eventName, extenedValues, this );
    }

    
    /**
     * 
     * 이 개체가 소유한 트리거를 생성한다.
     * 트리거는 이 개체의 특정 프로퍼티값이 바뀔 때 자동으로 이벤트가 발생되도록 할 수 있다.
     * 
     * @param {object} props - 트리거를 걸 프로퍼티의 목록. { a:true, b:false } 로 하면 a에는 걸고 b에는 지운다.
     * @param {function=} filterFunction - true를 리턴한 경우에만 이벤트가 실행된다
     * @param {string=} eventName - 생략하면 자동으로 이벤트 이름이 부여된다
     * @returns {Event}
     */
    newTrigger( props, filterFunction, eventName ) {
        console.assert( this.__triggers != null, "이 개체는 triggerable이 아닙니다." );
        const e = new _Event__WEBPACK_IMPORTED_MODULE_1__.Event( eventName );

        for ( const prop in props ) {
            if ( props[prop] ) {
                this.__triggers[prop] = this.__triggers[prop] != null ? this.__triggers[prop] : [];
                this.__triggers[prop].push( [e.name, filterFunction] );
            } else {
                delete this.__triggers[prop];
            }
        }

        return e;
    }

    hasEventListener( eventName ) {
        return this.eventEmitter.listeners( eventName ).length > 0;
    }

    /**
     *
     *
     * @param {string} eventName
     * @param {function} func
     * @param {any=} context
     * @param {boolean} [isOnce=false]
     * @returns {EventDispatcher}
     * @memberof EventDispatcher
     */
    addEventListener( eventName, func, context = null, isOnce = false ) {
        if ( isOnce ) {
            //@ts-ignore
            this.eventEmitter.once( eventName, func, context || this );
        } else {
            //@ts-ignore
            this.eventEmitter.on( eventName, func, context || this );
        }

        if ( eventName == _Event__WEBPACK_IMPORTED_MODULE_1__.Event.ENTER_FRAME || eventName == _Event__WEBPACK_IMPORTED_MODULE_1__.Event.RENDER ) {
            this.addEventListener( _Event__WEBPACK_IMPORTED_MODULE_1__.Event.ADDED_TO_STAGE, () => {
                //@ts-ignore
                EventDispatcher.enterFrameList.set( this,this.eventEmitter._events[eventName] != null ? this.eventEmitter._events[eventName].length : 1 );
            } );
            this.addEventListener( _Event__WEBPACK_IMPORTED_MODULE_1__.Event.REMOVED_FROM_STAGE, () => {
                EventDispatcher.enterFrameList.delete( this );
            } );

            // @ts-ignore   this가 sprite로 가정
            if ( this.isOnStage() ) {
                //@ts-ignore
                EventDispatcher.enterFrameList.set( this,this.eventEmitter._events[eventName] != null ? this.eventEmitter._events[eventName].length : 1 );
            }
        } else {
            if ( _Event__WEBPACK_IMPORTED_MODULE_1__.Event.isInputEvent( eventName ) ) {
                this.hasInputEvents = true;
            }
        }

        return this;
    }

    /**
     *
     *
     * @param {string} eventName
     * @param {function} func
     * @param {any=} context
     * @param {boolean} [isOnce=false]
     * @returns {EventDispatcher}
     * @memberof EventDispatcher
     */
    addUniqueEventListener( eventName, func, context, isOnce = false ) {
        this.removeEventListener( eventName, func, context );
        this.addEventListener( eventName, func, context, isOnce );

        return this;
    }
    
    /**
     *
     *
     * @param {Event|string} eventOrName
     * @param {object=} extendedValues
     * @returns {boolean} - 이벤트 핸들러가 있으면 true
     * @memberof EventDispatcher
     */
    dispatchEvent( eventOrName,extendedValues ) {
        let event;

        if ( typeof eventOrName == "string" ) {
            event = new _Event__WEBPACK_IMPORTED_MODULE_1__.Event( eventOrName );
        } else {
            event = eventOrName;
        }

        event.target = this;
        Object.assign( event,extendedValues );

        if ( !event.forwarded ) this.eventEmitter.emit( "*",event );

        return this.eventEmitter.emit( event.name, event );
    }

    /**
     *
     *
     * @param {string} eventName
     * @param {function} func
     * @param {any=} context
     * @memberof EventDispatcher
     */
    removeEventListener( eventName, func, context ) {
        //@ts-ignore
        this.eventEmitter.removeListener( eventName, func, context || this );

        //@ts-ignore
        if ( ( eventName == _Event__WEBPACK_IMPORTED_MODULE_1__.Event.ENTER_FRAME || eventName == _Event__WEBPACK_IMPORTED_MODULE_1__.Event.RENDER ) && ( this.eventEmitter._events[eventName] == null || this.eventEmitter._events[eventName].length == 0 ) ) {
            EventDispatcher.enterFrameList.delete( this );
        }

        if ( _Event__WEBPACK_IMPORTED_MODULE_1__.Event.isInputEvent( eventName ) ) {
            //@ts-ignore
            for ( const i in this.eventEmitter._events ) {
                if ( _Event__WEBPACK_IMPORTED_MODULE_1__.Event.isInputEvent( i ) ) {
                    this.hasInputEvents = true;
                    break;
                }
            }
        }
    }

    /**
     *
     *
     * @param {string=} eventName
     * @memberof EventDispatcher
     */
    removeAllEventListeners( eventName ) {
        this.eventEmitter.removeAllListeners( eventName );

        //@ts-ignore
        if ( ( eventName == _Event__WEBPACK_IMPORTED_MODULE_1__.Event.ENTER_FRAME || eventName == _Event__WEBPACK_IMPORTED_MODULE_1__.Event.RENDER ) && ( eventName && this.eventEmitter._events[eventName] == null || this.eventEmitter._events[eventName].length == 0 ) ) {
            EventDispatcher.enterFrameList.delete( this );
        }

        if ( eventName && _Event__WEBPACK_IMPORTED_MODULE_1__.Event.isInputEvent( eventName ) ) {
            //@ts-ignore
            for ( const i in this.eventEmitter._events ) {
                if ( _Event__WEBPACK_IMPORTED_MODULE_1__.Event.isInputEvent( i ) ) {
                    this.hasInputEvents = true;
                    break;
                }
            }
        }
    }


    /**
     *
     *
     * @param {string} event
     * @param {function} func
     * @param {any=} context
     * @param {EventDispatcher} [refSprite=this]
     * @param {boolean} [isOnce=false]
     * @returns {EventDispatcher}
     * @memberof EventDispatcher
     */
    addEventListenerOnStage( event, func, context, refSprite = this, isOnce = false ) {
        const self = this;

        const onAdded = () => {
            self.addEventListener( event, func, context, isOnce );
        };

        const onRemoved = () => {
            self.removeEventListener( event, func, context );
        };

        refSprite.addEventListener( _Event__WEBPACK_IMPORTED_MODULE_1__.Event.ADDED_TO_STAGE, onAdded, this );
        refSprite.addEventListener( _Event__WEBPACK_IMPORTED_MODULE_1__.Event.REMOVED_FROM_STAGE, onRemoved, this );

        return this;
    }

    /**
     *
     *
     * @param {string} eventName
     * @param {function} func
     * @param {any=} context
     * @returns {EventDispatcher}
     * @memberof EventDispatcher
     */
    on( eventName, func, context ) {
        return this.addEventListener( eventName, func, context );
    }

    /**
     *
     *
     * @param {string} eventName
     * @param {function} func
     * @param {any=} context
     * @returns {EventDispatcher}
     * @memberof EventDispatcher
     */
    once( eventName, func, context ) {
        return this.addEventListener( eventName, func, context, true );
    }

    /**
     *
     *
     * @param {string} event
     * @param {function} func
     * @param {any=} context
     * @param {EventDispatcher} [refSprite=this]
     * @returns {EventDispatcher}
     * @memberof EventDispatcher
     */
    onStage( event, func, context, refSprite = this ) {
        return this.addEventListenerOnStage( event, func, context, refSprite );
    }

    beforeRender( func, context, isUnique = true ) {
        if ( isUnique ) {
            this.removeEventListener( _Event__WEBPACK_IMPORTED_MODULE_1__.Event.RENDER, func, context );
        }

        this.addEventListener( _Event__WEBPACK_IMPORTED_MODULE_1__.Event.RENDER, func, context, true );
    }

    startForwardEvents( eventList,dstEventDispatcher ) {
        for ( let i = 0; i < eventList.length; i++ ) {
            const event = eventList[i];

            this.addEventListener( event,dstEventDispatcher.dispatchEvent.bind( dstEventDispatcher,[event] ) );
        }
    }

    stopForwardEvents( eventList,dstEventDispatcher ) {
        for ( let i = 0; i < eventList.length; i++ ) {
            const event = eventList[i];

            this.removeEventListener( event,dstEventDispatcher.dispatchEvent.bind( dstEventDispatcher,[event] ) );
        }
    }


    /**
     * 이벤트를 모두 기다려서 딱한번 func를 실행한다.
     * 이벤트 목록은 <이벤트이름> 혹은 [이벤트이름, 대상 EventDispatcher]
     *
     * @param {any[]} events
     * @param {function} func
     * @param {any=} context
     * @memberof EventDispatcher
     */
    waitEvents( events, func, context ) {
        const counts = [];
        let waitHandler;

        const removeAll = () => {
            let count = 0;

            for ( const i in events ) {
                let eventName;
                let target = this;

                if ( Array.isArray( events[i] ) ) {
                    [eventName, target] = events[i];
                } else eventName = events[i];
                target.removeEventListener( eventName, waitHandler, count );
                count++;
            }
        };

        waitHandler = function() {
            // this로 받았음
            // @ts-ignore
            counts[this - 1]++;

            for ( let j = 0; j < counts.length; j++ ) {
                if ( counts[j] == 0 ) return;
            }

            removeAll();
            func.call( context );
        };

        for ( const i in events ) {
            let eventName;
            let target = this;

            if ( Array.isArray( events[i] ) ) {
                [eventName, target] = events[i];
            } else eventName = events[i];
            // 0이면 EventEmitter3 내부에서 || 로 걸러지기 때문에 +1 해준다
            const countIndex = counts.length + 1;

            target.addEventListener( eventName, waitHandler, countIndex );
            counts.push( 0 );
        }
    }

    /**
     *
     *
     * @param {string} eventName
     * @param {any[]} events
     * @returns {EventDispatcher}
     * @memberof EventDispatcher
     */
    addCombinedEvents( eventName, events ) {
        this.waitEvents( events, () => {
            this.dispatchEvent( eventName );
        } );

        return this;
    }


    eventToPromise( eventName ) {
        return new Promise( ( resolve, reject ) => {
            this.addEventListener( eventName, resolve );
        } );
    }

    static doEnterFrame() {
        if ( EventDispatcher.enterFramePaused ) return 0;
        let totalEventCount = 0;

        for ( const [spr, count] of EventDispatcher.enterFrameList.entries() ) {
            // if (spr.isVisibleDeeply()) {
            spr.dispatchEvent( _Event__WEBPACK_IMPORTED_MODULE_1__.Event.ENTER_FRAME );
            spr.dispatchEvent( _Event__WEBPACK_IMPORTED_MODULE_1__.Event.RENDER );
            totalEventCount += count;
            // }
        }

        return totalEventCount;
    }
}


/**
 * @callback tween
 * @param {number} duration
 * @param {object} values
 * @param {string|function|import("./tween.js").Prop=} props
 * @returns {import("./tween.js").prototype}
 * @memberof EventDispatcher
 * @type {tween}
 */

EventDispatcher.prototype.tween = undefined;

/**
 * @callback move
 * @param {number} x
 * @param {number} y
 * @param {number} [duration=0]
 * @param {string|function|import("./tween.js").Prop=} props
 * @returns {Tween}
 * @memberof EventDispatcher
 * @type {move}
 */

EventDispatcher.prototype.move = undefined;

/**
 * @callback wait
 * @param {number} [duration=0]
 * @param {function=} func
 * @param {object=} context
 * @returns {import("./tween.js").prototype}
 * @memberof EventDispatcher
 * @type {wait}
 */

EventDispatcher.prototype.wait = undefined;


/** 
 * @callback getTweens
 * @param {boolean=} playingOnly
 * @returns {import("./tween.js").prototype[]}
 * @memberof EventDispatcher
 * 
 */

EventDispatcher.prototype.getTweens = undefined;

/**
 * @callback stopAllTweens
 * @memberof EventDispatcher
 */
EventDispatcher.prototype.stopAllTweens = undefined;

EventDispatcher.enterFramePaused = false;


_Event__WEBPACK_IMPORTED_MODULE_1__.Event.EventDispatcher = EventDispatcher;
EventDispatcher.enterFrameList = new Map();




/***/ }),

/***/ "./engine/src/FontBase.js":
/*!********************************!*\
  !*** ./engine/src/FontBase.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FontBase": () => (/* binding */ FontBase)
/* harmony export */ });
/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Utils */ "./engine/src/Utils.js");
/* harmony import */ var _Texture__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Texture */ "./engine/src/Texture.js");
/* harmony import */ var _Event__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Event */ "./engine/src/Event.js");
/* harmony import */ var _EventDispatcher__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./EventDispatcher */ "./engine/src/EventDispatcher.js");
/* harmony import */ var _Asset__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Asset */ "./engine/src/Asset.js");








class FontBase extends _EventDispatcher__WEBPACK_IMPORTED_MODULE_3__.EventDispatcher {
    constructor( name, referenceSize, styles ) {
        super();
        this.name = name;
        this.referenceSize = referenceSize || 1;
        this.styles = styles;
        /** @type {Asset} */
        this.asset;
    }

    /**
     *
     *
     * @param {string} eventName
     * @param {function} func
     * @param {any=} context
     * @param {boolean} [isOnce=false]
     * @returns {FontBase}
     * @memberof FontBase
     */
    addEventListener( eventName, func, context = null, isOnce = false ) {
        if ( eventName == _Event__WEBPACK_IMPORTED_MODULE_2__.Event.LOADED ) {
            this.asset.addEventListener( eventName, this.dispatchEvent.bind( this,_Event__WEBPACK_IMPORTED_MODULE_2__.Event.LOADED ), null, isOnce );
        } 
        //@ts-ignore
        return super.addEventListener( eventName, func, context, isOnce );
    }

    getAscender( size ) {
        if ( !this.asset.loaded ) {
            console.log( `로딩이 안된 상태로 사이즈를 구하려고 한다. ${this.asset.name}` );
            return 0;
        }
        const fontInfo = this.asset.fontInfo;

        return fontInfo.ascender / fontInfo.unitsPerEm * ( size || this.referenceSize ); 
    }


    measureTextWidth( str,size ) {
        if ( !this.asset.loaded ) {
            console.log( `로딩이 안된 상태로 사이즈를 구하려고 한다. ${this.asset.name}` );
            return 0;
        }
        // 상속 받은 클래스에서 구현
    }
}



/***/ }),

/***/ "./engine/src/KeyCode.js":
/*!*******************************!*\
  !*** ./engine/src/KeyCode.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "KeyCode": () => (/* binding */ KeyCode)
/* harmony export */ });

const KeyCode = {
    ESC:    "Escape",
    ENTER:  "Enter",
    SPACE:  "Space",
    LEFT:   "ArrowLeft",
    RIGHT:  "ArrowRight",
    UP:     "ArrowUp",
    DOWN:   "ArrowDown",
    CTRL:   "ControlLeft",
    A:      "KeyA",
    B:      "KeyB",
    C:      "KeyC",
    D:      "KeyD",
    E:      "KeyE",
    F:      "KeyF",
    G:      "KeyG",
    H:      "KeyH",
    I:      "KeyI",
    J:      "KeyJ",
    K:      "KeyK",
    L:      "KeyL",
    M:      "KeyM",
    N:      "KeyN",
    O:      "KeyO",
    P:      "KeyP",
    Q:      "KeyQ",
    R:      "KeyR",
    S:      "KeyS",
    T:      "KeyT",
    U:      "KeyU",
    V:      "KeyV",
    W:      "KeyW",
    X:      "KeyX",
    Y:      "KeyY",
    Z:      "KeyZ",
    Digit0: "Digit0",
    Digit1: "Digit1",
    Digit2: "Digit2",
    Digit3: "Digit3",
    Digit4: "Digit4",
    Digit5: "Digit5",
    Digit6: "Digit6",
    Digit7: "Digit7",
    Digit8: "Digit8",
    Digit9: "Digit9",
};





/***/ }),

/***/ "./engine/src/Layout.js":
/*!******************************!*\
  !*** ./engine/src/Layout.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Layout": () => (/* binding */ Layout)
/* harmony export */ });
/* harmony import */ var _Sprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Sprite */ "./engine/src/Sprite.js");
/* harmony import */ var _Event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Event */ "./engine/src/Event.js");
/* harmony import */ var _Types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Types */ "./engine/src/Types.js");
/* harmony import */ var _Application__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Application */ "./engine/src/Application.js");









class Layout extends _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite {
    constructor( x = 0,y = 0,w = 0,h = 0 ) {
        super();
        this.__locations = {};
        this.__width = w;
        this.__height = h;
        this.x = x;
        this.y = y;
    }

    resize( w, h ) {
        this.__width = w;
        this.__height = h;
        this._onResizeEvent();
    }

    setRect( x, y, w, h ) {
        this.x = x;
        this.y = y;
        this.resize( w, h );
    }

    _onResizeEvent() {
        for ( const key in this.__locations ) {
            const locSpr = this.__locations[key];

            if ( key == "origin" ) {
                locSpr.x = -this.x;
                locSpr.y = -this.y;
            } else {
                const [x, y] = key.split( "," );

                locSpr.x = this.__width * parseFloat( x );
                locSpr.y = this.__height * parseFloat( y );
            }
        }

        this.dispatchEvent( new _Event__WEBPACK_IMPORTED_MODULE_1__.Event( _Event__WEBPACK_IMPORTED_MODULE_1__.Event.RESIZE, { width: this.__width, height: this.__height } ) );
    }

    get origin() {
        return this.location( "origin" );
    }

    get topLeft() {
        return this.location( 0, 0 );
    }

    get topMiddle() {
        return this.location( 0.5, 0 );
    }

    get topRight() {
        return this.location( 1, 0 );
    }

    get bottomLeft() {
        return this.location( 0, 1 );
    }

    get bottomMiddle() {
        return this.location( 0.5, 1 );
    }

    get bottomRight() {
        return this.location( 1, 1 );
    }

    get leftMiddle() {
        return this.location( 0, 0.5 );
    }

    get rightMiddle() {
        return this.location( 1, 0.5 );
    }

    get center() {
        return this.location( 0.5, 0.5 );
    }


    /**
     *
     *
     * @param {string|number} x
     * @param {number} [y=null]
     * @returns {Layout}
     * @memberof Layout
     */
    location( x, y = null ) {
        const id = y != null ? x + "," + y : x;
        let locSpr = this.__locations[id];

        if ( locSpr != null ) return locSpr;
        locSpr = ( this.__locations[id] = new Layout() );

        if ( y == null ) {
            if ( id == "origin" ) {
                locSpr.x = -this.x;
                locSpr.y = -this.y;
            }
        } else {
            // @ts-ignore
            locSpr.x = this.__width * x;
            locSpr.y = this.__height * y;
        }

        this.addChild( locSpr );

        return locSpr;
    }

    get width() {
        return this.__width;
    }

    set width( v ) {
        this.__width = v;
        this._onResizeEvent();
    }

    get height() {
        return this.__height;
    }

    set height( v ) {
        this.__height = v;
        this._onResizeEvent();
    }

    /**
     * 
     * @returns {Point}
     * @memberof Layout
     */
    get size() {
        return new _Types__WEBPACK_IMPORTED_MODULE_2__.Point( this.__width, this.__height );
    }

    /**
     * @param {Point} v
     *
     * @memberof Layout
     */
    set size( v ) {
        this.__width = v.x;
        this.__height = v.y;
        this._onResizeEvent();
    }


    static fromRenderViewport() {
        const layout = new Layout( _Application__WEBPACK_IMPORTED_MODULE_3__.application.logicalRenderBounds.x, _Application__WEBPACK_IMPORTED_MODULE_3__.application.logicalRenderBounds.y,_Application__WEBPACK_IMPORTED_MODULE_3__.application.logicalRenderBounds.width, _Application__WEBPACK_IMPORTED_MODULE_3__.application.logicalRenderBounds.height );

        _Application__WEBPACK_IMPORTED_MODULE_3__.application.addEventListener( _Event__WEBPACK_IMPORTED_MODULE_1__.Event.RESIZE, () => {
            layout.x = _Application__WEBPACK_IMPORTED_MODULE_3__.application.logicalRenderBounds.x;
            layout.y = _Application__WEBPACK_IMPORTED_MODULE_3__.application.logicalRenderBounds.y;
            layout.resize( _Application__WEBPACK_IMPORTED_MODULE_3__.application.logicalRenderBounds.width, _Application__WEBPACK_IMPORTED_MODULE_3__.application.logicalRenderBounds.height );
        } );

        return layout;
    }

    static fromLogicalViewpoer() {
        const layout = new Layout( 0,0,_Application__WEBPACK_IMPORTED_MODULE_3__.application.logicalViewport.width, _Application__WEBPACK_IMPORTED_MODULE_3__.application.logicalViewport.height );

        _Application__WEBPACK_IMPORTED_MODULE_3__.application.addEventListener( _Event__WEBPACK_IMPORTED_MODULE_1__.Event.RESIZE, () => {
            layout.resize( _Application__WEBPACK_IMPORTED_MODULE_3__.application.logicalViewport.width, _Application__WEBPACK_IMPORTED_MODULE_3__.application.logicalViewport.height );
        } );

        return layout;
    }
}




/***/ }),

/***/ "./engine/src/Matrix.js":
/*!******************************!*\
  !*** ./engine/src/Matrix.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Matrix": () => (/* binding */ Matrix)
/* harmony export */ });



class Matrix {
    constructor( m11 = 1, m12 = 0, m21 = 0, m22 = 1, tx = 0, ty = 0 ) {
        this.__pixi = new PIXI.Matrix( m11, m12, m21, m22, tx, ty );
    }
}


/***/ }),

/***/ "./engine/src/Mesh.js":
/*!****************************!*\
  !*** ./engine/src/Mesh.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Mesh": () => (/* binding */ Mesh)
/* harmony export */ });
/* harmony import */ var _Sprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Sprite */ "./engine/src/Sprite.js");
/* harmony import */ var _Texture__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Texture */ "./engine/src/Texture.js");
/* harmony import */ var _Types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Types */ "./engine/src/Types.js");
/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Utils */ "./engine/src/Utils.js");





class Mesh extends _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite {
    /**
     * Creates an instance of Mesh.
     * @memberof Mesh
     */
    constructor() {
        super();
        this._$$spriteType = _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite.SpriteTypes.MESH;
        this._$$updateCode = _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite.UpdateCodes.UPDATE_NOTHING;
        this.dirty = {
            positionOffset: 0,
            positionLength: 0,
            texCoordOffset: 0,
            texCoordLength: 0,
            colorOffset:    0,
            colorLength:    0,
            indexOffset:    0,
            indexLength:    0,
            textureReset:   false,
            positionReset:  false,
            texCoordReset:  false,
            colorReset:     false,
            indexReset:     false,
        };
        this.a_position = undefined;
        this.a_texCoord = undefined;
        this.a_color = undefined;
        this.indices = undefined;
        this.a_genericArray = undefined;
    }

    setTexture( texture ) {
        this.texture = texture;
        this._$$updateCode |= _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite.UpdateCodes.UPDATE_EXTRA;
        this.dirty.textureReset = true;
    }

    setTextureCoordinateArray( arr ) {
        this.dirty.texCoordReset = !( this.a_texCoord && this.a_texCoord.length >= arr.length );
        this.a_texCoord = new Float32Array( arr );
        this._$$updateCode |= _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite.UpdateCodes.UPDATE_EXTRA;
        this.dirty.texCoordOffset = 0;
        this.dirty.texCoordLength = this.a_texCoord.length;
    }

    /**
     * @param {...number} args
     * @memberof Mesh
     */
    setTextureCoordinates( ...args ) {
        let minIndex = Infinity;
        let maxIndex = -Infinity;

        for ( let i = 0; i < args.length; i += 3 ) {
            const index = args[i];
            const x = args[i + 1];
            const y = args[i + 2];

            this.a_texCoord[index * 2] = x;
            this.a_texCoord[index * 2 + 1] = y;
            minIndex = Math.min( minIndex,index );
            maxIndex = Math.max( maxIndex,index );
        }
        this._$$updateCode |= _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite.UpdateCodes.UPDATE_EXTRA;
        this.dirty.texCoordOffset = Math.min( this.dirty.texCoordOffset / 2,minIndex ) * 2;
        this.dirty.texCoordLength = Math.max( ( this.dirty.texCoordOffset + this.dirty.texCoordLength ) / 2 ,maxIndex ) * 2;
    }

    setTextureCoordinate( i,x,y ) {
        this.a_texCoord[i * 2] = x;
        this.a_texCoord[i * 2 + 1] = y;
    }

    getTextureCoordinate( i ) {
        return new _Types__WEBPACK_IMPORTED_MODULE_2__.Point( this.a_texCoord[i * 2],this.a_texCoord[i * 2 + 1] );
    }

    _calculateLocalBounds( startIndex = 0,endIndex = this.a_position.length / 2 ) {
        let minX = Infinity,maxX = -Infinity,minY = Infinity ,maxY = -Infinity;

        for ( let i = startIndex; i < endIndex * 2; i += 2 ) {
            const x = this.a_position[i];
            const y = this.a_position[i + 1];

            minX = Math.min( x,minX );
            maxX = Math.max( x,maxX );
            minY = Math.min( y,minY );
            maxY = Math.max( y,maxY );
        }
        this._$$localBounds.x = minX;
        this._$$localBounds.y = minY;
        this._$$localBounds.width = maxX - minX;
        this._$$localBounds.height = maxY - minY;
    }

    setVertexArray( arr ) {
        this.dirty.positionReset = !( this.a_position && this.a_position.length >= arr.length );
        this.a_position = new Float32Array( arr );
        this._$$updateCode |= _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite.UpdateCodes.UPDATE_EXTRA;
        if ( !this.useCustomLocalBounds ) this._calculateLocalBounds();
        this.dirty.positionOffset = 0;
        this.dirty.positionLength = this.a_position.length;
    }

    /**
     * @param {...number} args
     * @memberof Mesh
     */
    setVertices( ...args ) {
        let minIndex = Infinity;
        let maxIndex = -Infinity;

        let minX = this._$$localBounds.left;
        let maxX = this._$$localBounds.right;
        let minY = this._$$localBounds.top;
        let maxY = this._$$localBounds.bottom;

        for ( let i = 0; i < args.length; i += 3 ) {
            const index = args[i];
            const x = args[i + 1];
            const y = args[i + 2];

            this.a_position[index * 2] = x;
            this.a_position[index * 2 + 1] = y;
            minX = Math.min( x,minX );
            maxX = Math.max( x,maxX );
            minY = Math.min( y,minY );
            maxY = Math.min( y,maxY );
            minIndex = Math.min( minIndex,index );
            maxIndex = Math.max( maxIndex,index );
        }
        this._$$updateCode |= _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite.UpdateCodes.UPDATE_EXTRA;

        if ( !this.useCustomLocalBounds ) {
            this._$$localBounds.x = minX;
            this._$$localBounds.y = minY;
            this._$$localBounds.width = maxX - minX;
            this._$$localBounds.height = maxY - minY;
        }

        this.dirty.positionOffset = Math.min( this.dirty.positionOffset / 2,minIndex ) * 2;
        this.dirty.positionLength = Math.max( ( this.dirty.positionOffset + this.dirty.positionLength ) / 2,maxIndex ) * 2;
    }

    setVertex( i,x,y ) {
        this.a_position[i * 2] = x;
        this.a_position[i * 2 + 1] = y;
    }

    getVertex( i ) {
        return new _Types__WEBPACK_IMPORTED_MODULE_2__.Point( this.a_position[i * 2],this.a_position[i * 2 + 1] );
    }


    setColorArray( arr ) {
        this.dirty.colorReset = !( this.a_color && this.a_color.length >= arr.length * 2 );
        this.a_color = new Uint8Array( arr.length * 2 );
        for ( let i = 0; i < arr.length; i += 2 ) {
            this.a_color[i * 2 + 0] = ( arr[i] >> 16 ) & 0xff;
            this.a_color[i * 2 + 1] = ( arr[i] >> 8 ) & 0xff;
            this.a_color[i * 2 + 2] = ( arr[i] ) & 0xff;
            this.a_color[i * 2 + 3] =  arr[i + 1] * 255;
        }
        this._$$updateCode |= _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite.UpdateCodes.UPDATE_EXTRA;
        this.dirty.colorOffset = 0;
        this.dirty.colorLength = this.a_color.length;
    }

    /**
     * @param {...number} args
     * @memberof Mesh
     */
    setColors( ...args ) {
        let minIndex = Infinity;
        let maxIndex = -Infinity;

        for ( let i = 0; i < args.length; i += 3 ) {
            const index = args[i];
            const c = args[i + 1];
            const a = args[i + 2];

            this.a_color[index * 4] = ( c >> 16 ) & 0xff;
            this.a_color[index * 4 + 1] = ( c >> 8 ) & 0xff;
            this.a_color[index * 4 + 2] = c & 0xff;
            this.a_color[index * 4 + 3] = a * 255;
            minIndex = Math.min( minIndex,index );
            maxIndex = Math.max( maxIndex,index );
        }
        this._$$updateCode |= _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite.UpdateCodes.UPDATE_EXTRA;
        this.dirty.colorOffset = Math.min( this.dirty.colorOffset / 4,minIndex ) * 4;
        this.dirty.colorLength = Math.max( ( this.dirty.colorOffset + this.dirty.colorLength ) / 4,maxIndex ) * 4;
    }


    getColorArraySize() {
        // Utils.legacy();
        return this.a_color.length / 4;
    }

    setRgbaColorArray( arr ) {
        this.dirty.colorReset = !( this.a_color && this.a_color.length >= arr.length );
        this.a_color = new Uint8Array( arr.map( v=>v * 255 ) );
        this._$$updateCode |= _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite.UpdateCodes.UPDATE_EXTRA;
        this.dirty.colorOffset = 0;
        this.dirty.colorLength = this.a_color.length;
    }

    setColor( i,c,a ) {
        const arr = _Utils__WEBPACK_IMPORTED_MODULE_3__.Utils.hex2rgba( c,a );

        this.a_color[i * 4] = arr[0];
        this.a_color[i * 4 + 1] = arr[1];
        this.a_color[i * 4 + 2] = arr[2];
        this.a_color[i * 4 + 3] = arr[3];
    }

    getColor( i ) {
        const c = _Utils__WEBPACK_IMPORTED_MODULE_3__.Utils.rgba2hex( this.a_color,i * 4 );

        return { color: c & 0xffffff,alpha: this.a_color[i * 4 + 3] };
    }


    setIndexArray( arr ) {
        this.dirty.indexReset = true;
        this.indices = new Uint16Array( Math.ceil( arr.length / 2 ) * 2 ); // float32로 바꿔야 하기 때문에 정렬
        this.indices.set( arr );
        this._$$updateCode |= _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite.UpdateCodes.UPDATE_EXTRA;
        this.dirty.indexOffset = 0;
        this.dirty.indexLength = this.indices.length;
    }

    /**
     * @param {...number} args
     * @memberof Mesh
     */
    setIndices( ...args ) {
        let minIndex = Infinity;
        let maxIndex = -Infinity;

        for ( let i = 0; i < args.length; i += 2 ) {
            const index = args[i];
            const vi = args[i + 1];

            this.indices[index] = vi;
            minIndex = Math.min( minIndex,index );
            maxIndex = Math.max( maxIndex,index );
        }
        this._$$updateCode |= _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite.UpdateCodes.UPDATE_EXTRA;
        this.dirty.indexOffset = Math.min( this.dirty.indexOffset,minIndex );
        this.dirty.indexLength = Math.max( this.dirty.indexOffset + this.dirty.indexLength,maxIndex );
    }

    getIndex( i ) {
        return this.indices[i];
    }

    setIndex( i,v ) {
        this.indices[i] = v;
    }

    /**
     *
     *
     * @param {string} attribName
     * @param {number[]} arr
     * @param {Mesh.ArrayTypes} arrayType
     * @param {number} [size=1]
     * @param {boolean} [normalize = false]
     * @memberof Mesh
     */
    setGenericArray( attribName, arr, arrayType = Mesh.ArrayTypes.FLOAT32, size = 1, normalize = false ) {
        this.a_genericArray = this.a_genericArray || {};
        this.a_genericArray[attribName] = { 
            data:          new arrayType( arr ),
            numComponents: size,
            normalize:     normalize 
        };
        this._$$updateCode |= _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite.UpdateCodes.UPDATE_EXTRA;
    }

    static createBox( x, y, w, h, color = 0xffffff, alpha = 1 ) {
        const m = new Mesh();

        m.setVertexArray( [x, y, x + w, y, x, y + h, x + w, y + h] );
        m.setColorArray( [color, alpha, color, alpha, color, alpha, color, alpha] );
        m.setIndexArray( [0, 1, 2, 1, 3, 2] );

        return m;
    }


    encodeExtraRenderingInfo() {
        const encodedBuffer = new Float32Array( 
            14 + 
             this.dirty.positionLength + 
             this.dirty.texCoordLength + 
             Math.ceil( this.dirty.colorLength / 4 ) + 
             Math.ceil( this.dirty.indexLength / 2 ) );

        encodedBuffer.set( [
            this.texture != null ? this.texture.asset.id : 0,
            this.dirty.positionOffset,
            this.dirty.positionLength,
            this.dirty.texCoordOffset,
            this.dirty.texCoordLength,
            this.dirty.colorOffset,
            this.dirty.colorLength,
            this.dirty.indexOffset,
            this.dirty.indexLength,
            +this.dirty.textureReset,
            +this.dirty.positionReset,
            +this.dirty.texCoordReset,
            +this.dirty.colorReset,
            +this.dirty.indexReset,
        ] );
        let offset = 14;

        if ( this.dirty.positionLength > 0 ) {
            encodedBuffer.set( _Types__WEBPACK_IMPORTED_MODULE_2__.TypedArrayHelper.subarray( this.a_position,this.dirty.positionOffset, this.dirty.positionLength ),offset );
            offset +=  this.dirty.positionLength;
        }
        if ( this.dirty.texCoordLength > 0 ) {
            encodedBuffer.set( _Types__WEBPACK_IMPORTED_MODULE_2__.TypedArrayHelper.subarray( this.a_texCoord,this.dirty.texCoordOffset, this.dirty.texCoordLength ),offset );
            offset +=  this.dirty.texCoordLength;
        }
        if ( this.dirty.colorLength > 0 ) {
            encodedBuffer.set( _Types__WEBPACK_IMPORTED_MODULE_2__.TypedArrayHelper.Uint8ToFloat32( this.a_color,this.dirty.colorOffset, this.dirty.colorLength ),offset );
            offset +=  this.dirty.colorLength / 4;
        }
        if ( this.dirty.indexLength > 0 ) {
            encodedBuffer.set( _Types__WEBPACK_IMPORTED_MODULE_2__.TypedArrayHelper.Uint16ToFloat32( this.indices,this.dirty.indexOffset, this.dirty.indexLength ),offset );
        }

        this.dirty.textureReset = false;
        this.dirty.positionReset = false;
        this.dirty.texCoordReset = false;
        this.dirty.colorReset = false;
        this.dirty.indexReset = false;

        let genericData;
        let transfer;

        if ( this.a_genericArray ) {
            genericData = this.a_genericArray;
            transfer = [];
            for ( let name in this.a_genericArray ) {
                transfer.push( this.a_genericArray[name].data.buffer );
            }            
        }

        return [encodedBuffer,null,genericData,transfer];
    }
}
/** 
 * 
 * @enum {object} 
 */
Mesh.ArrayTypes = {
    UINT32:  Uint32Array,
    UINT16:  Uint16Array,
    UINT8:   Uint8Array,
    FLOAT32: Float32Array,
};



/***/ }),

/***/ "./engine/src/MovieClip.js":
/*!*********************************!*\
  !*** ./engine/src/MovieClip.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MovieClip": () => (/* binding */ MovieClip)
/* harmony export */ });
/* harmony import */ var _Sprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Sprite */ "./engine/src/Sprite.js");
/* harmony import */ var _Event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Event */ "./engine/src/Event.js");
/* harmony import */ var _easing__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./easing */ "./engine/src/easing.js");




const EMPTY_KEY = "$";
const STOP_MARK = -1;

/** 
 * @typedef {object} Options 
 * @param {boolean} autoPlay
*/

/** @type {Options} */
const defaultOptions = {
    autoPlay: true
};

// 
/*
    스테이지에 붙어 있을 때만 작동한다.
    일반 개체의 값을 조정할 때도 사용할 수 있다.

    "ease",
    [0,10,target,{x:[0,100,ease]}]
    [0,"goto","event"]
    [0,"stop"]

*/

//  * @typedef {Object.<string,Range>} Props

/**
 * @typedef {number|*[]} Range
 * @typedef {Object.<string,Range>} Props
 * @typedef {[number,number,object|string]|[number,number,object|string,Props]|[number,string,string|number]|[number,string]} Line
 * @typedef {Line[]} Timeline
 * @typedef {Object.<string,Timeline>} TimelineGroup
 */

/**
 *
 * @this MovieClip
 * @param {Event} e
 */
function onEnterFrame( e ) {
    /** @type {{timeline:object,action:object,lastFrame:number}} */
    const ani = this.__mc.animations[this.__mc.currentAnimation];

    if ( ani == null ) return;
    for ( let [target, timeline] of ani.timeline.entries() ) {
        let noKey = true;

        //console.assert(targetSprite instanceof Sprite);
        if ( typeof target == "string" ) {
            target = this.__mc.targets[target];
            console.assert( target != null, `MovieClip의 타겟을 찾을 수 없습니다.` );
        }

        for ( const param in timeline ) {
            const value = timeline[param][this.__mc.currentFrame];

            if ( param == EMPTY_KEY ) {
                noKey = false;
            } else if ( value != null ) {
                target[param] = value;
                noKey = false;
            }
        }

        if ( target instanceof _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite ) {
            if ( noKey ) {
                if ( this.contains( target ) ) this.removeChild( target );
            } else {
                if ( !this.contains( target ) ) this.addChild( target );
            }
        }
    }

    const action = ani.action[this.__mc.currentFrame];

    if ( action != null ) {
        if ( action == STOP_MARK ) {
            this.stop();
        } else if ( typeof action == "string" ) {
            const [header, value, extra] = action.split( ":" );

            if ( header == "ani" ) {
                this.gotoAndPlay( extra != null ? value + ":" + extra : value );
            } else if ( header == "sound" ) {
                //TODO:
            } else if ( header == "event" ) {
                //TODO:
            }
        } else {
            this.__mc.currentFrame = parseInt( action );
        }
    } else {
        if ( this.__mc.playing == false || this.__mc.currentFrame >= ani.lastFrame ) this.stop();
        else this.__mc.currentFrame++;
    }
}

/**
 * @this MovieClip
 * @param {Timeline} tl
 * @returns {{timeline:object,action:object,lastFrame:number}}
 */
function parseTimeline( tl ) {
    const timeline = new Map();
    const action = {};
    let paramTimeline;
    let lastFrame = 0;

    for ( const i in tl ) {
        const line = tl[i];

        if ( typeof line[1] == "string" ) {
            const [frame, command, label] = line;

            if ( command == "stop" ) {
                action[frame] = STOP_MARK;
            } else if ( command == "goto" ) {
                action[frame] = typeof label == "number" ? label : "ani:" + label;
            } else if ( command == "event" ) {
                action[frame] = "event:" + label;
            } else if ( command == "sound" ) {
                action[frame] = "sound:" + label;
            }
        } else {
            const [startFrame, endFrame, targetObject, props] = line;

            paramTimeline = timeline.get( targetObject ) || {};

            if ( props == null ) {
                paramTimeline[EMPTY_KEY] = paramTimeline[EMPTY_KEY] || {};
            
                //@ts-ignore
                for ( let frame = startFrame; frame <= endFrame; frame++ ) {
                    paramTimeline[EMPTY_KEY][frame] = 1;
                }
            } else {
            //@ts-ignore
                for ( const key in props ) {
                    paramTimeline[key] = paramTimeline[key] || {};

                    if ( Array.isArray( props[key] ) ) {
                        const [startValue, endValue, ease] = props[key];
                        const easingFunc = ( typeof ease == "function" ? ease : _easing__WEBPACK_IMPORTED_MODULE_2__.easing[ease] ) || _easing__WEBPACK_IMPORTED_MODULE_2__.easing.linear;

                        for ( let frame = startFrame; frame <= endFrame; frame++ ) {
                        //@ts-ignore
                            paramTimeline[key][frame] = easingFunc( ( frame - startFrame ) / ( endFrame - startFrame ) ) * ( endValue - startValue ) + startValue;
                        }
                    } else {
                        const value = props[key];

                        for ( let frame = startFrame; frame <= endFrame; frame++ ) {
                            paramTimeline[key][frame] = value;
                        }
                    }
                }
            }

            timeline.set( targetObject, paramTimeline );
            //@ts-ignore
            lastFrame = Math.max( lastFrame, endFrame );
        }
    }

    return { action,timeline,lastFrame };
}


class MovieClip extends _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite {
    /**
     * 자동으로 애니메이션을 하는 MovieClip 개체를 만든다.
     * MovieClip은 Tween이나 show,hide를 시간순에 맞게 보여줄 수 있다.
     * 
     * 예제1) Array를 사용한 경우
     * 
     * new MovieClip([
     *     [0,10,targetSpr,{ x:[0,100,"outCubic"], y:20, alpha:[0.5,1] }],
     *     [11,20,targetSpr,{ x:[100,0,easing.inBounce] }]
     *     [20,"goto",0] // 이렇게 루프를 시킬 수도 있다. 없으면 마지막 프레임에서 멈춤. "stop", "event", "sound" 등을 쓸 수 있다.
     * ])
     * 
     * 예제2) Object를 사용한 경우
     * 
     * new MovieClip({
     *      default: [
     *          [0,10,targetSpr, { y: 10 }]
     *          :
     *      ],
     *      show: [
     *          [0,20,targetSpr, { x: 5 }]
     *          [20,"goto","default"]
     *      ]
     * });
     * 
     * @param {Timeline|TimelineGroup=} timelineData - 하나의 타임라인 애니메이션을 Array로 넣거나 다수의 애니메이션을 Object로 넣을 수 있다
     * @param {Options=} options
     * @memberof MovieClip
     */
    constructor( timelineData, options  ) {
        super();
        this.__mc = {};
        this.__mc.currentFrame = 0;
        this.__mc.currentAnimation = undefined;
        this.__mc.playing = false;
        this.__mc.targets = {};
        this.__mc.animations = {};
        this.__mc.options = Object.assign( defaultOptions, options );
        if ( timelineData ) this.addAnimations( timelineData );
        if ( this.__mc.options.autoPlay ) {
            this.play();
        }
    }

    /**
     * MovieClip에 animation을 추가한다.
     * 
     * @param {Timeline|TimelineGroup} timelineData - 하나의 타임라인 애니메이션을 Array로 넣거나 다수의 애니메이션을 Object로 넣을 수 있다
     * @memberof MovieClip
     */
    addAnimations( timelineData ) {
        if ( timelineData != null ) {
            if ( Array.isArray( timelineData ) ) {
                this.__mc.animations["default"] = parseTimeline.call( this, timelineData );
                this.__mc.currentAnimation = "default";
            } else {
                for ( const label in timelineData ) {
                    // 첫번째 애니메이션을 디폴트로
                    if ( this.__mc.currentAnimation == null ) this.__mc.currentAnimation = label;
                    this.__mc.animations[label] = parseTimeline.call( this, timelineData[label] );
                }
            }
        }
    }

    /**
     * 두 개의 MovieClip을 병합한다
     *
     * @param {MovieClip} mc
     * @param {boolean} replace
     * @memberof MovieClip
     */
    merge( mc,replace ) {
        for ( const label in mc.__mc.animations ) {
            const ani = mc.__mc.animations[label];

            if ( replace || this.__mc.animations[label] == null ) this.__mc.animations[label] = ani;
        }
    }


    setTarget( name, target ) {
        this.__mc.targets[name] = target;
    }


    /**
     *
     *
     * @param {string|number} f
     * @memberof MovieClip
     */
    gotoAndPlay( f ) {
        if ( typeof f == "string" ) {
            //@ts-ignore
            const [animationName, frame] = f.split( ":" );

            this.__mc.currentAnimation = animationName;
            this.__mc.currentFrame = frame != null ? parseInt( frame ) : 0;
        } else {
            console.assert( typeof f == "number" );
            //@ts-ignore
            this.__mc.currentFrame = parseInt( f );
        }

        this.play();
    }

    /**
     *
     *
     * @param {number} f
     * @memberof MovieClip
     */
    gotoAndStop( f ) {
        if ( typeof f == "string" ) {
            //@ts-ignore
            const [animationName, frame] = f.split( ":" );

            this.__mc.currentAnimation = animationName;
            this.__mc.currentFrame = frame != null ? parseInt( frame ) : 0;
        } else {
            console.assert( typeof f == "number" );
            //@ts-ignore
            this.__mc.currentFrame = parseInt( f );
        }

        this.stop();
    }

    play( aniName ) {
        if ( aniName != null ) {
            this.gotoAndPlay( aniName );
        }

        if ( !this.__mc.playing ) {
            this.addEventListener( _Event__WEBPACK_IMPORTED_MODULE_1__.Event.ENTER_FRAME,onEnterFrame,this );
            this.__mc.playing = true;
        }
    }

    stop() {
        if ( this.__mc.playing ) {
            this.removeEventListener( _Event__WEBPACK_IMPORTED_MODULE_1__.Event.ENTER_FRAME,onEnterFrame,this );
            this.__mc.playing = false;
        }
    }

    /**
     *
     *
     * @param {number} f
     * @param {string|number} destination
     * @memberof MovieClip
     */
    setGotoAction( f, destination ) {
        //@ts-ignore
        if ( parseInt( destination ) == destination ) destination = parseInt( destination );
        this.__mc.animations[this.__mc.currentAnimation].action[f] = destination;
    }

    /**
     *
     *
     * @param {number} f
     * @memberof MovieClip
     */
    setStopAction( f ) {
        this.__mc.animations[this.__mc.currentAnimation].action[f] = STOP_MARK; // stop
    }


    /**
     * target을 제외하고 모든 내용이 동일한 MovieClip을 만든다.
     *
     * @returns {MovieClip}
     * @memberof MovieClip
     */
    instance() {
        const newObj = new MovieClip( null );

        newObj.__mc.animations = this.__mc.animations;
        newObj.__mc.currentAnimation = Object.keys( this.__mc.animations )[0];
        Object.assign( newObj.__mc.targets, this.__mc.targets );
        newObj.play();

        return newObj;
    }
}

// let b = new Sprite();
// new MovieClip([
//     [0, 0, b, { x: [0,1,easing.outCubic],y: [1,1] }],
// ]);




/***/ }),

/***/ "./engine/src/MsdfFont.js":
/*!********************************!*\
  !*** ./engine/src/MsdfFont.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MsdfFont": () => (/* binding */ MsdfFont)
/* harmony export */ });
/* harmony import */ var _Asset__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Asset */ "./engine/src/Asset.js");
/* harmony import */ var _FontBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FontBase */ "./engine/src/FontBase.js");
/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Utils */ "./engine/src/Utils.js");




class MsdfFont extends _FontBase__WEBPACK_IMPORTED_MODULE_1__.FontBase {
    constructor( MsdfFontName,referenceSize, styles ) {
        super( MsdfFontName, referenceSize, styles );
        // Bitmap
        this.asset = new _Asset__WEBPACK_IMPORTED_MODULE_0__.Asset( MsdfFontName,_Asset__WEBPACK_IMPORTED_MODULE_0__.Asset.AssetTypes.MsdfFont );
        // 페이지가 여러개 있는 폰트는 아직 처리 못함
        const page = this.asset.fontInfo.pages[0];
        const pngSize = _Utils__WEBPACK_IMPORTED_MODULE_2__.Utils.getImageSize( page.file );

        this.asset.load( { 
            bitmap:        page.file, 
            width:         pngSize.width,
            height:        pngSize.height,
            referenceSize: this.referenceSize,
            styles:        this.styles,
            fontInfo:      this.asset.fontInfo 
        } );
        this.fontLoaded = false;
    }    

    measureTextWidth( str,size ) {
        super.measureTextWidth( str,size );

        const fontInfo = this.asset.fontInfo;
        const scale = size ? size / fontInfo.info.size : 1;

        let width = 0;

        for ( let i = 0; i < str.length; i++ ) {
            const char = str.charCodeAt( i );
            const charInfo = fontInfo.chars[char];

            width += charInfo.xadvance * scale;
        }
        return width;        
    }
}




/***/ }),

/***/ "./engine/src/Particles.js":
/*!*********************************!*\
  !*** ./engine/src/Particles.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Particles": () => (/* binding */ Particles)
/* harmony export */ });
/* harmony import */ var _Sprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Sprite */ "./engine/src/Sprite.js");

 



class Particles extends _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite {
    constructor() {
        super();
    }

    addParticles( ...args ) {

    }

    setTexture( ...args ) {

    }
}



/***/ }),

/***/ "./engine/src/Pixel.js":
/*!*****************************!*\
  !*** ./engine/src/Pixel.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Pixel": () => (/* binding */ Pixel)
/* harmony export */ });
/* harmony import */ var _Sprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Sprite */ "./engine/src/Sprite.js");
/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Utils */ "./engine/src/Utils.js");





class Pixel extends _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite {
    constructor( color = 0xffffff, alpha = 1, width = 1, height = 1 ) {
        super();
        this._$$spriteType = _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite.SpriteTypes.PIXEL;
        this._$$updateCode = _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite.UpdateCodes.UPDATE_EXTRA;
        this.pixelColor = _Utils__WEBPACK_IMPORTED_MODULE_1__.Utils.hex2rgba( color,alpha );
        this.pixelWidth = width;
        this.pixelHeight = height;    
        this._$$localBounds.x = 0;
        this._$$localBounds.y = 0;
        this._$$localBounds.width = width;
        this._$$localBounds.height = height;
    }

    setColor( color = 0xffffff, alpha = 1 ) {
        this.pixelColor = _Utils__WEBPACK_IMPORTED_MODULE_1__.Utils.hex2rgba( color,alpha );
        this._$$updateCode = _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite.UpdateCodes.UPDATE_EXTRA;
    }

    encodeExtraRenderingInfo() {
        let encodedBuffer = new Float32Array( 6 );

        encodedBuffer[0] = this.pixelWidth;
        encodedBuffer[1] = this.pixelHeight;
        encodedBuffer.set( this.pixelColor,2 );
        return [encodedBuffer];
    }
}



/***/ }),

/***/ "./engine/src/RenderTarget.js":
/*!************************************!*\
  !*** ./engine/src/RenderTarget.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RenderTarget": () => (/* binding */ RenderTarget)
/* harmony export */ });
/* harmony import */ var _Application__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Application */ "./engine/src/Application.js");
/* harmony import */ var _TextureBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TextureBase */ "./engine/src/TextureBase.js");
/* harmony import */ var _Sprite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Sprite */ "./engine/src/Sprite.js");
/* harmony import */ var _Event__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Event */ "./engine/src/Event.js");
/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Utils */ "./engine/src/Utils.js");
/* harmony import */ var _Types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Types */ "./engine/src/Types.js");
/* harmony import */ var _Asset__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Asset */ "./engine/src/Asset.js");
//
// 렌더링과 로직 쓰레드가 분리되어 있기 때문에 RT가 가장 만들기 어렵다.
// RT를 요청하는 시점에서 메인쓰레드에 생성
// draw할 때 그릴 스프라이트 트리의 스냅샷을 전송
// main에서는 받은 스냅샷을 가지고 draw를 즉시 수행
// RT는 수동으로 파기 해주어야 함












class RenderTarget extends _TextureBase__WEBPACK_IMPORTED_MODULE_1__.TextureBase {
    /**
     *Creates an instance of RenderTarget.
     * @param {number} width
     * @param {number} height
     * @param {boolean} filter
     * @memberof RenderTarget
     */
    constructor( width, height, filter = false ) {
        super();
        this.asset = new _Asset__WEBPACK_IMPORTED_MODULE_6__.Asset( "<RT:*>",_Asset__WEBPACK_IMPORTED_MODULE_6__.Asset.AssetTypes.RenderTarget );
        this.width = width;
        this.height = height;
        this.uvRect = new _Types__WEBPACK_IMPORTED_MODULE_5__.Rect( 0,0,this.width,this.height );

        this.asset.load( { width: this.width,height: this.height,filter: filter } );
    }

    /**
     *
     *
     * @param {number} [color=0]
     * @param {number} [alpha=0]
     * @memberof RenderTarget
     */
    clear( color = 0 , alpha = 0 ) {
        _Application__WEBPACK_IMPORTED_MODULE_0__.application.postMessageToRender( { msg: "addCommand", class: "RenderTarget", method: "clear",args: [this.asset.id, _Utils__WEBPACK_IMPORTED_MODULE_4__.Utils.hex2rgba( color,alpha )] } );
    }

    /**
     *
     *
     * @param {Sprite} spr
     * @memberof RenderTarget
     */
    draw( spr ) {
        let [buf,transferList] = spr.encodeRenderingInfoWithChildren();

        _Application__WEBPACK_IMPORTED_MODULE_0__.application.postMessageToRender( { msg: "addCommand", class: "RenderTarget", method: "draw",args: [this.asset.id, buf] }, transferList );
    }
}


/***/ }),

/***/ "./engine/src/SceneManager.js":
/*!************************************!*\
  !*** ./engine/src/SceneManager.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SceneManager": () => (/* binding */ SceneManager)
/* harmony export */ });
/* harmony import */ var _Sprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Sprite */ "./engine/src/Sprite.js");
/* harmony import */ var _Event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Event */ "./engine/src/Event.js");
/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Utils */ "./engine/src/Utils.js");
/* harmony import */ var _Timer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Timer */ "./engine/src/Timer.js");
/* harmony import */ var _Mesh__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Mesh */ "./engine/src/Mesh.js");
/* harmony import */ var _RenderTarget__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./RenderTarget */ "./engine/src/RenderTarget.js");







// const Sprite = require("./sprite");
// const Mesh = require("./mesh");
// const RenderTarget = require("./renderTarget");
// const Utils = require("./utils");
// const Event = require("./event");

function rad( d ) {
    return d * Math.PI / 180;
}

let _needRT;

function defaultEase( ratio ) {
    return ratio;
}



class SceneManager extends _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite {
    constructor( application, x, y, w, h, lw, lh ) {
        super();
        this.application = application;
        this.stage = application.stage;
        this.x1 = x;
        this.y1 = y;
        this.x2 = x + w;
        this.y2 = y + h;
        this.lw = lw;
        this.lh = lh;
        this.tweening = false;
        this.transitionEventCatcher = new _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite();
        /** @type {Mesh} */
        this._blackMesh = null;
        /** @type {RenderTarget} */
        this._RT = null;
    }

    //#region [Transitions]
	
    // scene2 == newScene;
    //---------------------------------------------------------------------------------------------------
    // 트랜지션들
    //---------------------------------------------------------------------------------------------------


    static accordionLeft( self, scene1, scene2, t, rawT ) {
        const w = self.lw;
        //let h = self.lh;
        const scale1 = ( 1 - t );
        const scale2 = t;

        scene1.setScaleX( scale1 );
        scene2.setX( w * scale1 );
        scene2.setScaleX( scale2 );
    }

    static accordionRight( self, scene1, scene2, t, rawT ) {
        const w = self.lw;
        //let h = self.lh;
        const scale1 = ( 1 - t );
        const scale2 = t;

        scene1.setX( w * scale2 );
        scene1.setScaleX( scale1 );
        scene2.setScaleX( scale2 );
    }


    static zoomOut( self, scene1, scene2, t, rawT ) {
        const w = self.lw;
        const h = self.lh;
        const scale1 = t + 1;
        const scale2 = t;
        const alpha = 1 - t * 1.2;

        scene1.setAlpha( alpha );
        if ( alpha <= 0 ) scene1.setVisible( false );

        scene1.setScale( scale1 );
        scene1.setPosition( -( w * scale1 - w ) / 2, -( h * scale1 - h ) / 2 );
        scene2.setAlpha( t );
        scene2.setScale( scale2 );
        scene2.setPosition( -( w * scale2 - w ) / 2, -( h * scale2 - h ) / 2 );
    }

    static zoomIn( self, scene1, scene2, t, rawT ) {
        const w = self.lw;
        const h = self.lh;
        const scale1 = t + 1;
        const scale2 = t;

        scene1.setAlpha( 1 - t );
        scene1.setScale( scale1 );
        scene1.setPosition( -( w * scale1 - w ) / 2, -( h * scale1 - h ) / 2 );
        scene2.setAlpha( t );
        scene2.setScale( scale2 );
        scene2.setPosition( -( w * scale2 - w ) / 2, -( h * scale2 - h ) / 2 );
    }

    static zoomOutCross( self, scene1, scene2, t, rawT ) {
        const w = self.lw;
        const h = self.lh;
        const scale1 = t + 1;
        const scale2 = ( 1 - t ) + 1;
        const alpha = 1 - t * 1.2;

        scene1.setAlpha( alpha );
        if ( alpha <= 0 ) scene1.setVisible( false );

        scene1.setScale( scale1 );
        scene1.setPosition( -( w * scale1 - w ) / 2, -( h * scale1 - h ) / 2 );
        scene2.setAlpha( t );
        scene2.setScale( scale2 );
        scene2.setPosition( -( w * scale2 - w ) / 2, -( h * scale2 - h ) / 2 );
    }

    static zoomInCross( self, scene1, scene2, t, rawT ) {
        const w = self.lw;
        const h = self.lh;
        const scale1 = ( 1 - t );
        const scale2 = t;

        scene1.setAlpha( 1 - t );
        scene1.setScale( scale1 );
        scene1.setPosition( -( w * scale1 - w ) / 2, -( h * scale1 - h ) / 2 );
        scene2.setAlpha( t );
        scene2.setScale( scale2 );
        scene2.setPosition( -( w * scale2 - w ) / 2, -( h * scale2 - h ) / 2 );
    }


    static spinCW( self, scene1, scene2, t, rawT ) {
        const w = self.lw;
        const h = self.lh;
        //	let a1 = (1-t) * 360;
        const a1 = t * 180;
        const a2 = 180 + t * 180;
        //let l = Math.sqrt((w / 2) ** 2, (h / 2) ** 2);
        const [x1, y1] = [Math.cos( rad( a1 ) ) * w / 2 - Math.sin( rad( a1 ) ) * h / 2 - w / 2,
                          Math.sin( rad( a1 ) ) * w / 2 + Math.cos( rad( a1 ) ) * h / 2 - h / 2];
        const [x2, y2] = [Math.cos( rad( a2 ) ) * w / 2 - Math.sin( rad( a2 ) ) * h / 2 - w / 2,
                          Math.sin( rad( a2 ) ) * w / 2 + Math.cos( rad( a2 ) ) * h / 2 - h / 2];

        scene1.setAlpha( 1 - t );
        scene2.setAlpha( t );
        scene1.setRotation( a1 );
        scene2.setRotation( a2 );
        scene1.setPosition( -x1, -y1 );
        scene2.setPosition( -x2, -y2 );
    }

    static spinCCW( self, scene1, scene2, t, rawT ) {
        const w = self.lw;
        const h = self.lh;
        //	let a1 = (1-t) * 360;
        const a1 = 180 + ( 1 - t ) * 180;
        const a2 = ( 1 - t ) * 180;
        //let l = Math.sqrt((w / 2) ** 2, (h / 2) ** 2);
        const [x1, y1] = [Math.cos( rad( a1 ) ) * w / 2 - Math.sin( rad( a1 ) ) * h / 2 - w / 2,
                          Math.sin( rad( a1 ) ) * w / 2 + Math.cos( rad( a1 ) ) * h / 2 - h / 2];
        const [x2, y2] = [Math.cos( rad( a2 ) ) * w / 2 - Math.sin( rad( a2 ) ) * h / 2 - w / 2,
                          Math.sin( rad( a2 ) ) * w / 2 + Math.cos( rad( a2 ) ) * h / 2 - h / 2];

        scene1.setAlpha( 1 - t );
        scene2.setAlpha( t );
        scene1.setRotation( a1 );
        scene2.setRotation( a2 );
        scene1.setPosition( -x1, -y1 );
        scene2.setPosition( -x2, -y2 );
    }

    static spinCrossCW( self, scene1, scene2, t, rawT ) {
        const w = self.lw;
        const h = self.lh;
        const a1 = -t * 180;
        const a2 = 180 + t * 180;
        //let l = Math.sqrt((w / 2) ** 2, (h / 2) ** 2);
        const [x1, y1] = [Math.cos( rad( a1 ) ) * w / 2 - Math.sin( rad( a1 ) ) * h / 2 - w / 2,
                          Math.sin( rad( a1 ) ) * w / 2 + Math.cos( rad( a1 ) ) * h / 2 - h / 2];
        const [x2, y2] = [Math.cos( rad( a2 ) ) * w / 2 - Math.sin( rad( a2 ) ) * h / 2 - w / 2,
                          Math.sin( rad( a2 ) ) * w / 2 + Math.cos( rad( a2 ) ) * h / 2 - h / 2];

        scene1.setAlpha( 1 - t );
        scene2.setAlpha( t );
        scene1.setRotation( a1 );
        scene2.setRotation( a2 );
        scene1.setPosition( -x1, -y1 );
        scene2.setPosition( -x2, -y2 );
    }

    static spinCrossCCW( self, scene1, scene2, t, rawT ) {
        const w = self.lw;
        const h = self.lh;
        const a1 = t * 180;
        const a2 = 180 + -t * 180;
        //let l = Math.sqrt((w / 2) ** 2, (h / 2) ** 2);
        const [x1, y1] = [Math.cos( rad( a1 ) ) * w / 2 - Math.sin( rad( a1 ) ) * h / 2 - w / 2,
                          Math.sin( rad( a1 ) ) * w / 2 + Math.cos( rad( a1 ) ) * h / 2 - h / 2];
        const [x2, y2] = [Math.cos( rad( a2 ) ) * w / 2 - Math.sin( rad( a2 ) ) * h / 2 - w / 2,
                          Math.sin( rad( a2 ) ) * w / 2 + Math.cos( rad( a2 ) ) * h / 2 - h / 2];

        scene1.setAlpha( 1 - t );
        scene2.setAlpha( t );
        scene1.setRotation( a1 );
        scene2.setRotation( a2 );
        scene1.setPosition( -x1, -y1 );
        scene2.setPosition( -x2, -y2 );
    }


    static balloon( self, scene1, scene2, t, rawT ) {
        const w = self.lw;
        const h = self.lh;
        const scale1x = t + 1;
        const scale2x = ( 1 - t ) + 1;
        const scale1y = ( 1 - t );
        const scale2y = t;

        scene1.setAlpha( 1 - t );
        scene1.setScale( scale1x, scale1y );
        scene1.setPosition( -( w * scale1x - w ) / 2, -( h * scale1y - h ) / 2 );
        scene2.setAlpha( t );
        scene2.setScale( scale2x, scale2y );
        scene2.setPosition( -( w * scale2x - w ) / 2, -( h * scale2y - h ) / 2 );
    }


    static tv( self, scene1, scene2, t, rawT ) {
        const w = self.lw;
        const h = self.lh;
        const scale1x = t * 3 + 1;
        const scale2x = t * 0.2 + 0.8;//1--(1-t)*3+1;
        const scale1y = ( 1 - t );
        const scale2y = t;

        scene1.setAlpha( 1 - t );
        //let color = Math.max(1-t*2,0);
        //scene1.setColorMultiplier(color,color,color);
        scene1.setScale( scale1x, scale1y );
        scene1.setPosition( -( w * scale1x - w ) / 2, -( h * scale1y - h ) / 2 );
        scene2.setAlpha( t );
        scene2.setScale( scale2x, scale2y );
        scene2.setPosition( -( w * scale2x - w ) / 2, -( h * scale2y - h ) / 2 );
    }

    static getWiperV2( self, w, h ) {
        const m = new _Mesh__WEBPACK_IMPORTED_MODULE_4__.Mesh();

        m.setVertexArray( [0, 0, w, 0, 0, h * 1.2, w, h, 0, h * 1.4, w, h * 1.2] );
        m.setColorArray( [0x000000, 1, 0x000000, 1, 0x000000, 1, 0x000000, 1, 0x000000, 0, 0x000000, 0] );
        m.setIndexArray( [0, 1, 2, 1, 3, 2, 2, 3, 4, 3, 4, 5] );
        m.setColorMultiplier( 0, 0, 0 );

        return m;
    }

    static getWiperV( self, w, h ) {
        const m = new _Mesh__WEBPACK_IMPORTED_MODULE_4__.Mesh();

        m.setVertexArray( [0, 0, w, 0, 0, h, w, h, 0, h * 1.2, w, h * 1.2] );
        m.setColorArray( [0x000000, 1, 0x000000, 1, 0x000000, 1, 0x000000, 1, 0x000000, 0, 0x000000, 0] );
        m.setIndexArray( [0, 1, 2, 1, 3, 2, 2, 3, 4, 3, 4, 5] );
        m.setColorMultiplier( 0, 0, 0 );

        return m;
    }

    static getWiperH( self, w, h ) {
        const m = new _Mesh__WEBPACK_IMPORTED_MODULE_4__.Mesh();

        m.setVertexArray( [0, 0, w, 0, 0, h, w, h, w * 1.2, 0, w * 1.2, h] );
        m.setColorArray( [0x000000, 1, 0x000000, 1, 0x000000, 1, 0x000000, 1, 0x000000, 0, 0x000000, 0] );
        m.setIndexArray( [0, 1, 2, 1, 3, 2, 1, 4, 3, 4, 5, 3] );
        m.setColorMultiplier( 0, 0, 0 );

        return m;
    }

    static wipeUp2( self, scene1, scene2, t, rawT ) {
        const physicalMarginX = -self.x1;
        const physicalMarginY = -self.y1;
        const w = self.x2 - self.x1;
        const h = self.y2 - self.y1;

        if ( self._blackMesh ) {
            self._blackMesh.removeFromParent();
        }

        if ( t < 0.5 ) {
            //let t2 = t * 2;
            scene1.setVisible( true );
            scene2.setVisible( false );
            const m = SceneManager.getWiperV2( self,w, h );

            self._blackMesh = m;
            self.addChild( m );
            m.setScaleY( -1 );
            m.setX( -physicalMarginX );
            m.setY( h * ( 1 + ( 1 - t * 2 ) * 1.4 ) - physicalMarginY );
        } else {
            const t2 = ( t - 0.5 ) * 2;

            scene1.setVisible( false );
            scene2.setVisible( true );
            const m = SceneManager.getWiperV2( self,w, h );

            self._blackMesh = m;
            m.setScaleX( -1 );
            self.addChild( m );
            m.setX( w - physicalMarginX );
            m.setY( h * ( -t2 * 1.4 ) - physicalMarginY );
        }
    }


    static wipeDown( self, scene1, scene2, t, rawT ) {
        const physicalMarginX = -self.x1;
        const physicalMarginY = -self.y1;
        const w = self.x2 - self.x1;
        const h = self.y2 - self.y1;

        if ( self._blackMesh ) {
            self._blackMesh.removeFromParent();
        }

        if ( t < 0.5 ) {
            const t2 = t * 2;

            scene1.setVisible( true );
            scene2.setVisible( false );
            const m = SceneManager.getWiperV( self,w, h );

            self._blackMesh = m;
            self.addChild( m );
            m.setX( -physicalMarginX );
            m.setY( -h * ( 1 - t2 ) * 1.2 - physicalMarginY );
        } else {
            const t2 = ( t - 0.5 ) * 2;

            scene1.setVisible( false );
            scene2.setVisible( true );
            const m = SceneManager.getWiperV( self,w, h );

            self._blackMesh = m;
            self.addChild( m );
            m.setScaleY( -1 );
            m.setX( -physicalMarginX );
            m.setY( h * ( 1 + t2 * 1.2 ) - physicalMarginY );
        }
    }

    static wipeUp( self, scene1, scene2, t, rawT ) {
        const physicalMarginX = -self.x1;
        const physicalMarginY = -self.y1;
        const w = self.x2 - self.x1;
        const h = self.y2 - self.y1;

        if ( self._blackMesh ) {
            self._blackMesh.removeFromParent();
        }

        if ( t < 0.5 ) {
            //let t2 = t * 2;
            scene1.setVisible( true );
            scene2.setVisible( false );
            const m = SceneManager.getWiperV( self,w, h );

            self._blackMesh = m;
            self.addChild( m );
            m.setScaleY( -1 );
            m.setX( -physicalMarginX );
            m.setY( h * ( 1 + ( 1 - t * 2 ) * 1.2 ) - physicalMarginY );
        } else {
            const t2 = ( t - 0.5 ) * 2;

            scene1.setVisible( false );
            scene2.setVisible( true );
            const m = SceneManager.getWiperV( self,w, h );

            self._blackMesh = m;
            self.addChild( m );
            m.setX( -physicalMarginX );
            m.setY( h * ( -t2 * 1.2 ) - physicalMarginY );
        }
    }

    static wipeRight( self, scene1, scene2, t, rawT ) {
        const physicalMarginX = -self.x1;
        const physicalMarginY = -self.y1;
        const w = self.x2 - self.x1;
        const h = self.y2 - self.y1;

        if ( self._blackMesh ) {
            self._blackMesh.removeFromParent();
        }

        if ( t < 0.5 ) {
            const t2 = t * 2;

            scene1.setVisible( true );
            scene2.setVisible( false );
            const m = SceneManager.getWiperH( self,w, h );

            self._blackMesh = m;
            self.addChild( m );
            m.setX( -w * ( 1 - t2 ) * 1.2 - physicalMarginX );
            m.setY( -physicalMarginY );
        } else {
            const t2 = ( t - 0.5 ) * 2;

            scene1.setVisible( false );
            scene2.setVisible( true );
            const m = SceneManager.getWiperH( self,w, h );

            self._blackMesh = m;
            self.addChild( m );
            m.setScaleX( -1 );
            m.setX( w * ( 1 + t2 * 1.2 ) - physicalMarginX );
            m.setY( -physicalMarginY );
        }
    }

    static wipeLeft( self, scene1, scene2, t, rawT ) {
        const physicalMarginX = -self.x1;
        const physicalMarginY = -self.y1;
        const w = self.x2 - self.x1;
        const h = self.y2 - self.y1;

        if ( self._blackMesh ) {
            self._blackMesh.removeFromParent();
        }

        if ( t < 0.5 ) {
            //let t2 = t * 2;
            scene1.setVisible( true );
            scene2.setVisible( false );
            const m = SceneManager.getWiperH( self,w, h );

            self._blackMesh = m;
            self.addChild( m );
            m.setScaleX( -1 );
            m.setX( w * ( 1 + ( 1 - t * 2 ) * 1.2 ) - physicalMarginX );
            m.setY( -physicalMarginY );
        } else {
            const t2 = ( t - 0.5 ) * 2;

            scene1.setVisible( false );
            scene2.setVisible( true );
            const m = SceneManager.getWiperH( self,w, h );

            self._blackMesh = m;
            self.addChild( m );
            m.setX( w * ( -t2 * 1.2 ) - physicalMarginX );
            m.setY( -physicalMarginY );
        }
    }


    static getClockMesh( self, w, h, ratio ) {
        if ( ratio < 0 ) {
            ratio = 0;
        }

        if ( ratio > 1 ) {
            ratio = 1;
        }

        const angle = ratio * 360;
        const angleZone = Math.floor( ratio * 8 ) + 1;
        const angle2 = ( angle % 45 );
        const triWidth = Math.sin( rad( angle2 ) );
        let v = [];
        let idx = [];

        if ( ratio == 1 ) {
            v = [0 * w, 0 * h, 1 * w, 0 * h, 1 * w, 1 * h, 0 * w, 1 * h];
            idx = [0, 1, 2, 2, 3, 0];
        } else if ( angleZone == 1 ) {
            v = [0.5 * w, 0 * h, ( 0.5 + triWidth ) * w, 0 * h, 0.5 * w, 0.5 * h];
            idx = [0, 1, 2];
        } else if ( angleZone == 2 ) {
            v = [1 * w, 0 * h, 1 * w, triWidth * h, 0.5 * w, 0.5 * h, 0.5 * w, 0 * h];
            idx = [0, 1, 2, 3, 0, 2];
        } else if ( angleZone == 3 ) {
            v = [1 * w, 0.5 * h, 1 * w, ( 0.5 + triWidth ) * h, 0.5 * w, 0.5 * h, 0.5 * w, 0 * h, 1 * w, 0 * h];
            idx = [0, 1, 2, 3, 4, 2, 4, 0, 2];
        } else if ( angleZone == 4 ) {
            v = [1 * w, 1 * h, ( 1 - triWidth ) * w, 1 * h, 0.5 * w, 0.5 * h, 0.5 * w, 0 * h, 1 * w, 0 * h];
            idx = [0, 1, 2, 3, 4, 2, 4, 0, 2];
        } else if ( angleZone == 5 ) {
            v = [0.5 * w, 1 * h, ( 0.5 - triWidth ) * w, 1 * h, 0.5 * w, 0.5 * h, 0.5 * w, 0 * h, 1 * w, 0 * h, 1 * w, 1 * h];
            idx = [0, 1, 2, 3, 4, 0, 4, 5, 0];
        } else if ( angleZone == 6 ) {
            v = [0 * w, 1 * h, 0 * w, ( 1 - triWidth ) * h, 0.5 * w, 0.5 * h, 0.5 * w, 0 * h, 1 * w, 0 * h, 1 * w, 1 * h];
            idx = [0, 1, 2, 3, 4, 2, 4, 5, 0];
        } else if ( angleZone == 7 ) {
            v = [0 * w, 0.5 * h, 0 * w, ( 0.5 - triWidth ) * h, 0.5 * w, 0.5 * h, 0.5 * w, 0 * h, 1 * w, 0 * h, 1 * w, 1 * h, 0 * w, 1 * h];
            idx = [0, 1, 2, 3, 4, 2, 4, 5, 6, 0, 2, 6];
        } else {
            v = [0 * w, 0 * h, triWidth * w, 0 * h, 0.5 * w, 0.5 * h, 0.5 * w, 0 * h, 1 * w, 0 * h, 1 * w, 1 * h, 0 * w, 1 * h];
            idx = [0, 1, 2, 3, 4, 2, 4, 5, 6, 0, 2, 6];
        }

        const m = new _Mesh__WEBPACK_IMPORTED_MODULE_4__.Mesh();

        //m.setTexture(tex);
        //m.setTextureCoordinateArray(v);
        m.setVertexArray( v );
        m.setIndexArray( idx );
        m.setColorMultiplier( 0, 0, 0 );

        return m;
    }



    static getCircleMesh( self, radius ) {
        const sides = 64;
        const v = [0, 0];
        const idx = [];
        const c = [0x000000, 1];

        for ( let i = 0; i < sides; i++ ) {
            const angle = ( i / sides ) * 2 * Math.PI;

            v[2 + i * 4] = Math.cos( angle ) * radius;
            v[2 + i * 4 + 1] = Math.sin( angle ) * radius;
            v[2 + i * 4 + 2] = Math.cos( angle ) * radius * 1.2;
            v[2 + i * 4 + 3] = Math.sin( angle ) * radius * 1.2;
            c[2 + i * 4] = 0x000000;
            c[2 + i * 4 + 1] = 1;
            c[2 + i * 4 + 2] = 0x000000;
            c[2 + i * 4 + 3] = 0;
            idx[ i * 9] = 0;	//origin;
            idx[ i * 9 + 1] = ( i * 2 ) + 1;
            idx[ i * 9 + 2] = ( i * 2 ) + 3;
            idx[ i * 9 + 3] = ( i * 2 ) + 1;
            idx[ i * 9 + 4] = ( i * 2 ) + 2;
            idx[ i * 9 + 5] = ( i * 2 ) + 4;
            idx[ i * 9 + 6] = ( i * 2 ) + 1;
            idx[ i * 9 + 7] = ( i * 2 ) + 4;
            idx[ i * 9 + 8] = ( i * 2 ) + 3;

            if ( i == sides - 1 ) {
                idx[ i * 9 + 2] = 1;
                idx[ i * 9 + 5] = 2;
                idx[ i * 9 + 7] = 2;
                idx[ i * 9 + 8] = 1;
            }
        }

        //log(Log.UI, table.concat(idx,","));
        const m = new _Mesh__WEBPACK_IMPORTED_MODULE_4__.Mesh();

        m.setVertexArray( v );
        m.setIndexArray( idx );
        m.setColorArray( c );

        return m;
    }

    static getCircleHoleMesh( self, radius1, radius2 ) {
        const sides = 32;
        const v = [];
        const idx = [];
        const c = [];

        for ( let i = 0; i < sides; i++ ) {
            const angle = ( i / sides ) * 2 * Math.PI;

            v[ i * 6] = Math.cos( angle ) * radius1 / 1.2;
            v[ i * 6 + 1] = Math.sin( angle ) * radius1 / 1.2;
            v[ i * 6 + 2] = Math.cos( angle ) * radius1;
            v[ i * 6 + 3] = Math.sin( angle ) * radius1;
            v[ i * 6 + 4] = Math.cos( angle ) * radius2;
            v[ i * 6 + 5] = Math.sin( angle ) * radius2;
            c[ i * 6] = 0x000000;
            c[ i * 6 + 1] = 0;
            c[ i * 6 + 2] = 0x000000;
            c[ i * 6 + 3] = 1;
            c[ i * 6 + 4] = 0x000000;
            c[ i * 6 + 5] = 1;
            idx[ i * 12] = ( i * 3 ) + 0;
            idx[ i * 12 + 1] = ( i * 3 ) + 4;
            idx[ i * 12 + 2] = ( i * 3 ) + 3;
            idx[ i * 12 + 3] = ( i * 3 ) + 0;
            idx[ i * 12 + 4] = ( i * 3 ) + 1;
            idx[ i * 12 + 5] = ( i * 3 ) + 4;
            idx[ i * 12 + 6] = ( i * 3 ) + 1;
            idx[ i * 12 + 7] = ( i * 3 ) + 2;
            idx[ i * 12 + 8] = ( i * 3 ) + 5;
            idx[ i * 12 + 9] = ( i * 3 ) + 1;
            idx[ i * 12 + 10] = ( i * 3 ) + 5;
            idx[ i * 12 + 11] = ( i * 3 ) + 4;

            if ( i == sides - 1 ) {
                idx[ i * 12 + 1] = 1;
                idx[ i * 12 + 2] = 0;
                idx[ i * 12 + 5] = 1;
                idx[ i * 12 + 8] = 2;
                idx[ i * 12 + 10] = 2;
                idx[ i * 12 + 11] = 1;
            }
        }

        //log(Log.UI, table.concat(idx,","));
        const m = new _Mesh__WEBPACK_IMPORTED_MODULE_4__.Mesh();

        m.setVertexArray( v );
        m.setIndexArray( idx );
        m.setColorArray( c );

        return m;
    }

    static circleInOut( self, scene1, scene2, t, rawT ) {
        const w = self.x2 - self.x1;
        const h = self.y2 - self.y1;
        const radius = Math.sqrt( ( w / 2 ) ** 2 + ( h / 2 ) ** 2 );

        if ( self._blackMesh ) {
            self._blackMesh.removeFromParent();
        }

        if ( ( t < 0.5 ) ) {
            const t2 = t * 2;

            scene1.setVisible( true );
            scene2.setVisible( false );
            const m = SceneManager.getCircleHoleMesh( self,radius * ( 1 - t2 ) * 1.2, radius * 1.2 );

            self._blackMesh = m;
            self.addChild( m );
            //m.setScale(t);
            m.setX( self.lw / 2 );
            m.setY( self.lh / 2 );
        } else {
            const t2 = ( t - 0.5 ) * 2;

            scene1.setVisible( false );
            scene2.setVisible( true );
            const m = SceneManager.getCircleHoleMesh( self,radius * t2 * 1.2, radius * 1.2 );

            self._blackMesh = m;
            self.addChild( m );
            //m.setScale(t);
            m.setX( self.lw / 2 );
            m.setY( self.lh / 2 );
        }
    }


    static circleOut( self, scene1, scene2, t, rawT ) {
        const w = self.x2 - self.x1;
        const h = self.y2 - self.y1;
        const radius = Math.sqrt( ( w / 2 ) ** 2 + ( h / 2 ) ** 2 );

        if ( self._blackMesh ) {
            self._blackMesh.removeFromParent();
        }

        if ( ( t < 0.5 ) ) {
            const t2 = t * 2;

            scene1.setVisible( true );
            scene2.setVisible( false );
            const m = SceneManager.getCircleMesh( self,radius * 1.2 );

            self._blackMesh = m;
            self.addChild( m );
            m.setScale( t2 );
            m.setX( self.lw / 2 );
            m.setY( self.lh / 2 );
        } else {
            const t2 = ( t - 0.5 ) * 2;

            scene1.setVisible( false );
            scene2.setVisible( true );
            const m = SceneManager.getCircleHoleMesh( self,radius * t2 * 1.2, radius * 1.2 );

            self._blackMesh = m;
            self.addChild( m );
            //m.setScale(t);
            m.setX( self.lw / 2 );
            m.setY( self.lh / 2 );
        }
    }

    static circleIn( self, scene1, scene2, t, rawT ) {
        const w = self.x2 - self.x1;
        const h = self.y2 - self.y1;
        const radius = Math.sqrt( ( w / 2 ) ** 2 + ( h / 2 ) ** 2 );

        if ( self._blackMesh ) {
            self._blackMesh.removeFromParent();
        }

        if ( ( t < 0.5 ) ) {
            const t2 = t * 2;

            scene1.setVisible( true );
            scene2.setVisible( false );
            const m = SceneManager.getCircleHoleMesh( self,radius * ( 1 - t2 ) * 1.2, radius * 1.2 );

            self._blackMesh = m;
            self.addChild( m );
            //m.setScale(t);
            m.setX( self.lw / 2 );
            m.setY( self.lh / 2 );
        } else {
            const t2 = ( t - 0.5 ) * 2;

            scene1.setVisible( false );
            scene2.setVisible( true );
            const m = SceneManager.getCircleMesh( self,radius * 1.2 );

            self._blackMesh = m;
            self.addChild( m );
            m.setScale( 1 - t2 );
            m.setX( self.lw / 2 );
            m.setY( self.lh / 2 );
        }
    }


    static clock( self, scene1, scene2, t, rawT ) {
        const physicalMarginX = -self.x1;
        const physicalMarginY = -self.y1;
        const w = self.x2 - self.x1;
        const h = self.y2 - self.y1;

        if ( self._blackMesh ) {
            self._blackMesh.removeFromParent();
        }

        if ( ( t < 0.5 ) ) {
            scene1.setVisible( true );
            scene2.setVisible( false );
            const m = SceneManager.getClockMesh( self,w, h, t * 2 );

            m.setX( -physicalMarginX );
            m.setY( -physicalMarginY );
            self._blackMesh = m;
            self.addChild( m );
        } else {
            scene1.setVisible( false );
            scene2.setVisible( true );
            const m = SceneManager.getClockMesh( self,w, h, 1 - ( t - 0.5 ) * 2 );

            m.setScaleX( -1 );
            m.setX( w - physicalMarginX );
            m.setY( -physicalMarginY );
            self._blackMesh = m;
            self.addChild( m );
        }
    }



    //-----------------------------------------------------
    // RT transition;
    //-----------------------------------------------------

    static getCircleMeshRT( self, radius ) {
        const sides = 64;
        const v = [0, 0];
        const t = [( self.x2 - self.x1 ) / 2, ( self.y2 - self.y1 ) / 2];
        const idx = [];
        const c = [0xffffff, 1];

        for ( let i = 0; i < sides; i++ ) {
            const angle = ( i / sides ) * 2 * Math.PI;

            v[2 + i * 4] = Math.cos( angle ) * radius;
            v[2 + i * 4 + 1] = Math.sin( angle ) * radius;
            v[2 + i * 4 + 2] = Math.cos( angle ) * radius * 1.2;
            v[2 + i * 4 + 3] = Math.sin( angle ) * radius * 1.2;
            t[2 + i * 4] = t[1] + v[2 + i * 4];
            t[2 + i * 4 + 1] = t[2] + v[2 + i * 4 + 1];
            t[2 + i * 4 + 2] = t[1] + v[2 + i * 4 + 2];
            t[2 + i * 4 + 3] = t[2] + v[2 + i * 4 + 3];
            c[2 + i * 4] = 0xffffff;
            c[2 + i * 4 + 1] = 1;
            c[2 + i * 4 + 2] = 0xffffff;
            c[2 + i * 4 + 3] = 0;
            idx[i * 9] = 0;	//origin;
            idx[i * 9 + 1] = ( i * 2 ) + 1;
            idx[i * 9 + 2] = ( i * 2 ) + 3;
            idx[i * 9 + 3] = ( i * 2 ) + 1;
            idx[i * 9 + 4] = ( i * 2 ) + 2;
            idx[i * 9 + 5] = ( i * 2 ) + 4;
            idx[i * 9 + 6] = ( i * 2 ) + 1;
            idx[i * 9 + 7] = ( i * 2 ) + 4;
            idx[i * 9 + 8] = ( i * 2 ) + 3;

            if ( i == sides - 1 ) {
                idx[i * 9 + 2] = 1;
                idx[i * 9 + 5] = 2;
                idx[i * 9 + 7] = 2;
                idx[i * 9 + 8] = 1;
            }
        }

        //log(Log.UI, table.concat(idx,","));
        const m = new _Mesh__WEBPACK_IMPORTED_MODULE_4__.Mesh();

        m.setVertexArray( v );
        m.setIndexArray( idx );
        m.setColorArray( c );
        m.setTextureCoordinateArray( t );
        m.setTexture( self._RT );

        return m;
    }

    static getCircleHoleMeshRT( self, radius1, radius2 ) {
        const sides = 32;
        const [cx, cy] = [( self.x2 - self.x1 ) / 2, ( self.y2 - self.y1 ) / 2];
        const v = [];
        const t = [];
        const idx = [];
        const c = [];

        for ( let i = 0; i < sides; i++ ) {
            const angle = ( i / sides ) * 2 * Math.PI;

            v.push(
                Math.cos( angle ) * radius1 / 1.2, Math.sin( angle ) * radius1 / 1.2,
                Math.cos( angle ) * radius1, Math.sin( angle ) * radius1,
                Math.cos( angle ) * radius2, Math.sin( angle ) * radius2
            );
            t.push(
                cx + v[i * 6], cy + v[i * 6 + 1],
                cx + v[i * 6 + 2], cy + v[i * 6 + 3],
                cx + v[i * 6 + 4], cy + v[i * 6 + 5]
            );
            c.push(
                0xffffff, 0,
                0xffffff, 1,
                0xffffff, 1
            );
            idx.push(
                ( i * 3 ) + 0, ( i * 3 ) + 4, ( i * 3 ) + 3,
                ( i * 3 ) + 0, ( i * 3 ) + 1, ( i * 3 ) + 4,
                ( i * 3 ) + 1, ( i * 3 ) + 2, ( i * 3 ) + 5,
                ( i * 3 ) + 1, ( i * 3 ) + 5, ( i * 3 ) + 4
            );

            if ( i == sides - 1 ) {
                idx[i * 12 + 1] = 1;
                idx[i * 12 + 2] = 0;
                idx[i * 12 + 5] = 1;
                idx[i * 12 + 8] = 2;
                idx[i * 12 + 10] = 2;
                idx[i * 12 + 11] = 1;
            }
        }

        //log(Log.UI, table.concat(idx,","));
        const m = new _Mesh__WEBPACK_IMPORTED_MODULE_4__.Mesh();

        m.setVertexArray( v );
        m.setIndexArray( idx );
        m.setColorArray( c );
        m.setTextureCoordinateArray( t );
        m.setTexture( self._RT );

        return m;
    }


    static circleOutRT( self, scene1, scene2, t, rawT ) {
        const w = self.x2 - self.x1;
        const h = self.y2 - self.y1;

        if ( self._blackMesh != null ) {
            self._blackMesh.removeFromParent();
        }

        const radius = Math.sqrt( ( w / 2 ) ** 2 + ( h / 2 ) ** 2 );

        scene1.setVisible( false );
        scene2.setVisible( true );
        const m = SceneManager.getCircleHoleMeshRT( self,radius * t * 1.2, radius * 1.2 );

        self._blackMesh = m;
        self.addChild( m );
        //m.setScale(t);
        m.setX( self.lw / 2 );
        m.setY( self.lh / 2 );
    }

    static circleInRT( self, scene1, scene2, t, rawT ) {
        const w = self.x2 - self.x1;
        const h = self.y2 - self.y1;

        if ( self._blackMesh ) {
            self._blackMesh.removeFromParent();
        }

        const radius = Math.sqrt( ( w / 2 ) ** 2 + ( h / 2 ) ** 2 );

        scene1.setVisible( false );
        scene2.setVisible( true );
        const m = SceneManager.getCircleMeshRT( self,radius * ( 1 - t ) * 1.2 );

        self._blackMesh = m;
        self.addChild( m );
        m.setX( self.lw / 2 );
        m.setY( self.lh / 2 );
    }

    static getPaperMeshRT( self, clip1, clip2 ) {
        //let sides = 32;
        const v = [
            self.x1, self.y1,
            self.x2 - clip1 - clip2, self.y1,
            self.x1, self.y2,
            self.x2 - clip1 - clip2, self.y2
        ];
        const t = [0 + clip1, 0, ( self.x2 - self.x1 ) - clip2, 0, 0 + clip1, ( self.y2 - self.y1 ), ( self.x2 - self.x1 ) - clip2, ( self.y2 - self.y1 )];
        const idx = [0, 1, 2, 1, 3, 2];
        const m = new _Mesh__WEBPACK_IMPORTED_MODULE_4__.Mesh();

        m.setVertexArray( v );
        m.setIndexArray( idx );
        m.setTextureCoordinateArray( t );
        m.setTexture( self._RT );

        return m;
    }


    static paperDownRT( self, scene1, scene2, t, rawT ) {
        if ( self._blackMesh ) {
            self._blackMesh.removeFromParent();
        }

        scene1.setVisible( false );
        scene2.setVisible( true );
        const clip1 = Math.sin( rad( t * 180 ) ) * ( self.x2 - self.x1 ) / 2;
        const clip2 = ( t < 0.5 ) ? 0 : ( 1 - Math.cos( rad( ( t - 0.5 ) * 180 ) ) ) * ( self.x2 - self.x1 );
        const m = SceneManager.getPaperMeshRT( self,clip1, clip2 );

        scene2.setX( Math.sin( rad( t * 180 ) ) * ( self.x2 - self.x1 ) / 2 );
        m.setX( 0 );
        const b1 = 1 - t * 0.5;
        const b2 = Math.max( 0, t * 2 - 1 );

        scene2.setColorMultiplier( b2, b2, b2 );
        m.setColorMultiplier( b1, b1, b1 );
        self._blackMesh = m;
        self.addChild( m );
    }

    static paperUpRT( self, scene1, scene2, t, rawT ) {
        if ( self._blackMesh ) {
            self._blackMesh.removeFromParent();
        }

        scene1.setVisible( false );
        scene2.setVisible( true );
        scene2.setX( -Math.sin( rad( t * 180 ) ) * ( self.x2 - self.x1 ) / 2 );
        const x2 = ( t < 0.5 ) ? Math.sin( rad( t * 180 ) ) * ( self.x2 - self.x1 ) / 2 : scene2.getX() + ( self.x2 - self.x1 );
        const clip1 = ( t < 0.5 ) ? 0 : x2 - ( self.x2 - self.x1 ) / 2 - Math.cos( rad( ( t - 90 ) * 180 ) ) * ( self.x2 - self.x1 ) / 2;
        const clip2 = x2 - clip1;
        const m = SceneManager.getPaperMeshRT( self,clip1, clip2 );

        m.setX( x2 );
        const b1 = 1 - t * 0.5;
        const b2 = Math.max( 0, t * 2 - 1 );

        scene2.setColorMultiplier( b2, b2, b2 );
        m.setColorMultiplier( b1, b1, b1 );
        self._blackMesh = m;
        self.addChild( m );
    }



    static moveFromRight( self, scene1, scene2, t, rawT ) {
        const width = self.lw + -self.x1 * 2;

        scene1.setX( -t * width );
        scene2.setX( ( 1 - t ) * width );
    }

    static moveFromLeft( self, scene1, scene2, t, rawT ) {
        const width = self.lw + -self.x1 * 2;

        scene1.setX( t * width );
        scene2.setX( ( t - 1 ) * width );
    }

    static overFromRight( self, scene1, scene2, t, rawT ) {
        const width = self.lw + -self.x1 * 2;

        scene2.setX( ( 1 - t ) * width );
    }

    static overFromLeft( self, scene1, scene2, t, rawT ) {
        const width = self.lw + -self.x1 * 2;

        scene2.setX( ( t - 1 ) * width );
    }

    static moveFromRightWithFade( self, scene1, scene2, t, rawT ) {
        const width = self.lw + -self.x1 * 2;

        scene1.setAlpha( 1 - t );
        scene1.setX( -t * width );
        scene2.setX( ( 1 - t ) * width );
    }

    static moveFromLeftWithFade( self, scene1, scene2, t, rawT ) {
        const width = self.lw + -self.x1 * 2;

        scene1.setAlpha( 1 - t );
        scene1.setX( t * width );
        scene2.setX( ( t - 1 ) * width );
    }

    static overFromRightWithFade( self, scene1, scene2, t, rawT ) {
        const width = self.lw + -self.x1 * 2;

        scene1.setAlpha( 1 - t );
        scene2.setX( ( 1 - t ) * width );
    }

    static overFromLeftWithFade( self, scene1, scene2, t, rawT ) {
        const width = self.lw + -self.x1 * 2;

        scene1.setAlpha( 1 - t );
        scene2.setX( ( t - 1 ) * width );
    }

    static moveFromBottom( self, scene1, scene2, t, rawT ) {
        const height = self.lh;

        scene1.setY( -t * height );
        scene2.setY( ( 1 - t ) * height );
    }

    static moveFromTop( self, scene1, scene2, t, rawT ) {
        const height = self.lh;

        scene1.setY( t * height );
        scene2.setY( ( t - 1 ) * height );
    }

    static overFromBottom( self, scene1, scene2, t, rawT ) {
        const height = self.lh;

        scene2.setY( ( 1 - t ) * height );
    }

    static overFromTop( self, scene1, scene2, t, rawT ) {
        const height = self.lh;

        scene2.setY( ( t - 1 ) * height );
    }

    static moveFromBottomWithFade( self, scene1, scene2, t, rawT ) {
        const height = self.lh;

        scene1.setAlpha( 1 - t );
        scene1.setY( -t * height );
        scene2.setY( ( 1 - t ) * height );
    }

    static moveFromTopWithFade( self, scene1, scene2, t, rawT ) {
        const height = self.lh;

        scene1.setAlpha( 1 - t );
        scene1.setY( t * height );
        scene2.setY( ( t - 1 ) * height );
    }


    static overFromBottomWithFade( self, scene1, scene2, t, rawT ) {
        const height = self.lh;

        scene1.setAlpha( 1 - t );
        scene2.setY( ( 1 - t ) * height );
    }

    static overFromTopWithFade( self, scene1, scene2, t, rawT ) {
        const height = self.lh;

        scene1.setAlpha( 1 - t );
        scene2.setY( ( t - 1 ) * height );
    }

    static fade( self, scene1, scene2, t, rawT ) {
        if ( t < 0.5 ) {
            scene1.setAlpha( ( 0.5 - t ) * 2 );
        } else {
            scene1.setAlpha( 0 );
        }

        if ( t < 0.5 ) {
            scene2.setAlpha( 0 );
        } else {
            scene2.setAlpha( ( t - 0.5 ) * 2 );
        }
    }

    static crossfade( self, scene1, scene2, t, rawT ) {
        scene1.setAlpha( 1 - t );
        scene2.setAlpha( t );
    }

    static flip( self, scene1, scene2, t, rawT ) {
        const width = self.lw;

        if ( t < 0.5 ) {
            const s = ( 0.5 - t ) * 2;

            scene1.setScaleX( s );
            scene1.setX( ( 1 - s ) * width * 0.5 );
        } else {
            scene1.setScaleX( 0 );
            scene1.setX( width * 0.5 );
        }

        if ( t < 0.5 ) {
            scene2.setScaleX( 0 );
            scene2.setX( width * 0.5 );
        } else {
            const s = ( t - 0.5 ) * 2;

            scene2.setScaleX( s );
            scene2.setX( ( 1 - s ) * width * 0.5 );
        }
    }

    static flipWithFade( self, scene1, scene2, t, rawT ) {
        const width = self.lw;

        if ( t < 0.5 ) {
            const s = ( 0.5 - t ) * 2;

            scene1.setScaleX( s );
            scene1.setX( ( 1 - s ) * width * 0.5 );
            scene1.setAlpha( s );
        } else {
            scene1.setScaleX( 0 );
            scene1.setX( width * 0.5 );
            scene1.setAlpha( 0 );
        }

        if ( t < 0.5 ) {
            scene2.setScaleX( 0 );
            scene2.setX( width * 0.5 );
            scene2.setAlpha( 0 );
        } else {
            const s = ( t - 0.5 ) * 2;

            scene2.setScaleX( s );
            scene2.setX( ( 1 - s ) * width * 0.5 );
            scene2.setAlpha( s );
        }
    }

    static flipWithShade( self, scene1, scene2, t, rawT ) {
        const width = self.lw;

        if ( t < 0.5 ) {
            const s = ( 0.5 - t ) * 2;

            scene1.setScaleX( s );
            scene1.setX( ( 1 - s ) * width * 0.5 );
            scene1.setColorMultiplier( 1 - t, 1 - t, 1 - t, 1 );
        } else {
            scene1.setScaleX( 0 );
            scene1.setX( width * 0.5 );
            scene1.setColorMultiplier( 0.5, 0.5, 0.5, 1 );
        }

        if ( t < 0.5 ) {
            scene2.setScaleX( 0 );
            scene2.setX( width * 0.5 );
            scene2.setColorMultiplier( 0.5, 0.5, 0.5, 1 );
        } else {
            const s = ( t - 0.5 ) * 2;

            scene2.setScaleX( s );
            scene2.setX( ( 1 - s ) * width * 0.5 );
            scene2.setColorMultiplier( t, t, t, 1 );
        }
    }


    //#endregion

    //---------------------------------------------------------------------------------------------------
    //
    // 메인 코드
    //
    //---------------------------------------------------------------------------------------------------


    getCurrentSceneName() {
        return this.currentScene;
    }

    getCurrentScene() {
        if ( this.scene2 ) {
            return this.scene2;
        }

        return this.scene1;
    }

    isChanging() {
        return this.changingScene;
    }

    changeScene( sprOrFunc, duration, transition, ease, options ) {
        let spr;

        if ( typeof sprOrFunc == "function" ) {
            spr = sprOrFunc();
        } else {
            spr = sprOrFunc;
        }

        //log(Log.SCENE, "changeScene: " .. (this.currentScene ~= null and this.currentScene or "null") .. " to " .. (scene ~= null and scene or "null"));
        if ( !this.active ) {
            //if (GLOBAL.layerShieldForSceneChange) { GLOBAL.layerShieldForSceneChange.show() }
            this.addEventListener( _Event__WEBPACK_IMPORTED_MODULE_1__.Event.ENTER_FRAME, this.onEnterFrame, this );
            this.active = true;
        }

        this.changingScene = true;	 // 신 전환시 입력을 막거나 할 때 쓰려고. tweening하고는 시점이 좀 다르다
        this.eventFilter = options != null ? options.eventFilter : null;
        this.currentScene = spr;

        // henjeon, 2014.12.01;
        // 한 프레임에 onEnterFrame() 전에 changeScene() 연속으로 호출되면 begin이벤트 없이 } 이벤트가 호출되는 문제가 있다.
        // changeScene()에서 transitionBegin 이벤트를 바로 호출할 경우 코드 흐름이 전과 달라져서 여러 가지 문제가 발생하여,
        // 호출 순서는 그대로 유지하도록 여기서 this.time이 0이 아닐때만 이벤트를 호출하도록 처리함
        //		
        if ( this.tweening ) {
            if ( this.time != 0 ) {
                //return;
                this.dispatchEvent( "transitionEnd" );
                this.scene1.dispatchEvent( "exitEnd" );
                this.scene2.dispatchEvent( "enterEnd" );
                this.onTransitionEnd();
                this.scene1.removeFromParent();
                this.scene1 = this.scene2;
                this.scene2 = null;
                this.tweening = false;
                this.changingScene = false;
            } else {
                if ( this.scene2 ) {
                    this.scene2.removeFromParent();
                    this.scene2 = null;
                }
            }
        }

        if ( this.scene1 == null ) {
            //이전 씬이 없는 경우이다.
            this.scene1 = new _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite();
        }

        this.duration = duration;
        this.transition = transition;
        this.ease = ease || defaultEase;
        this.scene2 = spr; //this.scenes[scene].new(options and options.userData);
        this.scene2.setVisible( false );
        this.addChild( this.scene2 );
        this.time = 0;
        this.currentTimer = _Timer__WEBPACK_IMPORTED_MODULE_3__.Timer.now();
        this.tweening = true;

        if ( _needRT.get( transition ) ) {
            const ss = this.stage.getScale();
            const w = ( this.x2 - this.x1 ); //* ss;
            const h = ( this.y2 - this.y1 ); //* ss;
            const sx = this.stage.getX();

            this.stage.setScale( 1 );
            const rt = new _RenderTarget__WEBPACK_IMPORTED_MODULE_5__.RenderTarget( w, h, true );

            rt.clear( 0x000000, 1 );
            this.stage.setPosition( -this.x1, -this.y1 );
            rt.draw( this.stage );
            this.stage.setX( sx );
            this.stage.setScale( ss.x,ss.y );
            this._RT = rt;
        }

        return this.scene2;
    }

    resetCurrentScene( currentScene ) {
        this.scene1 = currentScene;
        this.addChild( this.scene1 );
    }

    filterTransitionEvents( event ) {
        event.stopPropagation();
    }

    onTransitionBegin() {
        if ( this.eventFilter ) {
            this.stage.addChild( this.transitionEventCatcher );

            for ( const i in this.eventFilter ) {
                const event = this.eventFilter[i];

                this.transitionEventCatcher.addEventListener( event, this.filterTransitionEvents, this );
            }
        }
    }

    onTransitionEnd() {
        if ( this.eventFilter ) {
            for ( const i in this.eventFilter ) {
                const event = this.eventFilter[i];

                this.transitionEventCatcher.removeEventListener( event, this.filterTransitionEvents, this );
            }

            this.transitionEventCatcher.removeFromParent();
        }
    }

    onEnterFrame( event ) {
        // 이벤트필터링개체를 always on top 시킨다
        this.stage.addChild( this.transitionEventCatcher );

        // 트랜지션 종료시 이곳에서 일괄 처리
        if ( !this.tweening ) {
            //if (GLOBAL.layerShieldForSceneChange) { GLOBAL.layerShieldForSceneChange.hide() }
            this.removeEventListener( _Event__WEBPACK_IMPORTED_MODULE_1__.Event.ENTER_FRAME, this.onEnterFrame, this );
            this.scene1.removeFromParent();
            this.scene1 = this.scene2;
            this.scene2 = null;
            this.active = null;
            this.changingScene = false;

            //wiper remove;
            if ( this._blackMesh ) {
                this._blackMesh.removeFromParent();
                this._blackMesh = null;
            }
		
            if ( this._RT ) {
                this._RT = null;
            }

            return;
        }

        if ( this.time == 0 ) {
            this.onTransitionBegin();
            this.scene2.setVisible( true );
            this.dispatchEvent( "transitionBegin" );
            this.scene1.dispatchEvent( "exitBegin" );
            this.scene2.dispatchEvent( "enterBegin" );
        }

        const timer = _Timer__WEBPACK_IMPORTED_MODULE_3__.Timer.now();
        const deltaTime = 1000 / 60; // timer - this.currentTimer;

        this.currentTimer = timer;
        const t = ( this.duration == 0 ) ? 1 : ( this.time / this.duration );

        this.transition( this, this.scene1, this.scene2, this.ease( t ), t );

        if ( this.time == this.duration ) {
            this.dispatchEvent( "transitionEnd" );
            this.scene1.dispatchEvent( "exitEnd" );
            this.scene2.dispatchEvent( "enterEnd" );
            this.onTransitionEnd();
            this.tweening = false;
        }

        this.time = this.time + deltaTime;

        if ( this.duration < this.time ) {
            this.time = this.duration;
        }
    }
}

_needRT = new Map( [
    [SceneManager.circleInRT, true],
    [SceneManager.circleOutRT, true],
    [SceneManager.paperDownRT, true],
    [SceneManager.paperUpRT, true],
] );



/***/ }),

/***/ "./engine/src/Serializer.js":
/*!**********************************!*\
  !*** ./engine/src/Serializer.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Serializer": () => (/* binding */ Serializer)
/* harmony export */ });

//import EventDispatcher from "./eventDispatcher";


/** 
 * @typedef {object} ClassDefOptions
 * @param {function=} construct
 * @param {boolean=} fill
 * @param {string[]=} white
 * @param {string[]=} black
 * @param {string[]=} keep
 * @param {boolean=} dataOnly
 */

/**
 * @typedef {[object,ClassDefOptions]} _ClassDef
 * 
 */

/**
 * @typedef {object|_ClassDef} ClassDef
 * 
 */

const S = {
    undefined:     "$$UDF",
    function:      "$$FNC",
    unknown:       "$$UKN",
    NaN:           "$$NAN",
    Infinity:      "$$INF",
    MinusInfinity: "$$MIF",
    Date:          "$$DAT",
    RegExp:        "$$RGX",
    Reference:     "$$REF"
};

const defaultOptions = {
    ignorePrefix:     "__",
    ignoreList:       ["__pixi"],
    skipUndefined:    true,
    skipUnknownClass: true
};

/** 
 * @typedef {object} SerializerOptions
 * @property {string=} ignorePrefix
 * @property {string[]=} ignoreList
 * @property {boolean=} skipUndefined
 * @property {boolean=} skipUnknownClass
 * 
 */


function copyObject( dst, src, keep ) {
    if ( keep == null ) {
        Object.assign( dst, src );
    } else {
        for ( const k in src ) {
            if ( typeof src[k] == "object" && dst[k] && keep.includes( k ) ) {
                // 대상이 프록시일 경우 그냥 복사하면 프록시 핸들러를 잃어버리기 때문에 
                // keep 리스트의 것들은 주소를 보존시켜야한다.
                Object.assign( dst[k], src[k] );
            } else {
                dst[k] = src[k];
            }
        }
    }
}

/**
 * 게임 오브젝트를 직렬화하고 다시 게임오브젝트로 만들 수 있도록 한다.
 * 직렬화한 오브젝트는 네트웍으로 보내거나 파일에 저장할 수 있다.
 * 
 * 직렬화할 오브젝트가 생성자에서 Proxy를 만드는 경우 주의가 필요함
 * Proxy가 다층으로 구성될 경우 Proxy의 handler를 잃어버릴 수 있다.
 * 그런 것들은 keep 옵션을 사용해서 타겟 개체의 프로토타입을 유지하도록 할 것
 *
 * @class Serializer
 */
class Serializer {
    /**
     *Creates an instance of Serializer.
     * @param {ClassDef[]} classList
     * @param {SerializerOptions} [options={}]
     * @memberof Serializer
     */
    constructor( classList, options = defaultOptions ) {
        //super();

        /** @type {Object.<string,_ClassDef>} */
        this.classList = {};
        this.options = options;
        for ( const classDef of classList ) {
            if ( Array.isArray( classDef ) ) {
                this.classList[classDef[0].name] = [classDef,classDef[1]];
            } else {
                this.classList[classDef.name] = [classDef,null];
            }
        }
        this.__objectToId = undefined;
        this.__idToObject = undefined;
        this.__refCount = undefined;
        //console.log( this.classList );
    }

    /**
     *
     *
     * @param {*} obj
     * @returns {object}
     * @memberof Serializer
     */
    _getSerializableObject( obj ) {
        if ( this.__objectToId.has( obj ) ) {
            this.__refCount[this.__objectToId.get( obj )] = ( this.__refCount[this.__objectToId.get( obj )] || 0 ) + 1;

            return S.Reference + ":" + this.__objectToId.get( obj );
        }
        if ( typeof obj == "undefined" ) {
            return S.undefined;
        } else if ( obj === null ) {
            return null;
        } else if ( obj instanceof RegExp ) {
            return S.RegExp + ":" + obj.toString();
        } else if ( obj instanceof Date ) {
            return S.Date + ":" + obj.getTime();
        } else if ( typeof obj == "string" || typeof obj == "number" || typeof obj == "boolean" ) {
            //@ts-ignore
            if ( Number.isNaN( obj ) ) {
                return S.NaN;
            } else if ( obj === Number.POSITIVE_INFINITY ) {
                return S.Infinity;
            } else if ( obj === Number.NEGATIVE_INFINITY ) {
                return S.MinusInfinity;
            } else {
                return obj;
            }
        } else if ( typeof obj == "function" ) {
            return S.function;
        } else if ( typeof obj == "object" )  {
            if ( this.options.skipUnknownClass && obj.constructor !== Object && obj.constructor !== Array && this.classList[obj.constructor.name] == null ) {
                return S.unknown;
            }

            const id = this.__objectToId.size;

            this.__objectToId.set( obj, id );
            let result;

            if ( Array.isArray( obj ) ) {
                result = [];
                for ( let i = 0; i < obj.length; i++ ) {
                    const convertedObj = this._getSerializableObject( obj[i] );

                    if ( this.options.skipUndefined && convertedObj == S.undefined ) continue;
                    if ( convertedObj != S.function && convertedObj != S.unknown ) {
                        result[i] = convertedObj;
                    }
                }
            } else {
                /** @type {ClassDefOptions} */
                const classOptions = obj.constructor !== Object ? this.classList[obj.constructor.name][1] : null;

                result = !( classOptions && classOptions.dataOnly ) && obj.constructor !== Object ? { __class: obj.constructor.name } : {};
                
                const sortedKey = Object.keys( obj ).sort();

                for ( const k of sortedKey ) {
                    // console.assert( k != "entityManager" );
                    if ( !this.options.ignoreList.includes( k ) && !k.startsWith( this.options.ignorePrefix ) ) {
                        if ( classOptions && classOptions.black && classOptions.black.includes( k ) ) continue;
                        if ( classOptions && classOptions.white && !classOptions.white.includes( k ) ) {
                            continue;
                        }
                        const convertedObj = this._getSerializableObject( obj[k] );

                        if ( this.options.skipUndefined && convertedObj == S.undefined ) continue;
                        if ( convertedObj != S.function && convertedObj != S.unknown ) {
                            result[k] = convertedObj;
                        }
                    }
                }
            }
            this.__idToObject[id] = result;
            //@ts-ignore
            result.__refId = id;

            return result;
        }
        throw new Error( `알 수 없는 타입 발견 ${obj}` );
    }

    getSerializableObject( obj ) {
        this.__objectToId = new Map();
        this.__idToObject = {};
        this.__refCount = {};

        const r = this._getSerializableObject( obj );

        // 리퍼런스 정리

        for ( const id in this.__idToObject ) {
            if ( this.__refCount[id] == null ) {
                delete this.__idToObject[id].__refId;
            }
        }
        delete this.__objectToId;
        delete this.__idToObject;
        delete this.__refCount;
        
        return r;
    }

    /**
     *
     *
     * @param {object} obj
     * @returns {string}
     * @memberof Serializer
     */
    stringify( obj ) {
        return JSON.stringify( this.getSerializableObject( obj ) );
    }

    /**
     * 직렬화된 개체를 복구한다.
     * 
     *
     * @param {string|object} s - 문자열 혹은 직렬화 처리된 개체
     * @param {object=} parseOptions
     * @returns {object}
     * @memberof Serializer
     */
    parse( s , parseOptions ) {
        /** @type {Serializer} */
        const self = this;
        const receiver = function ( k, v ) {
            if ( v == null ) {
                return v;
            } else if ( typeof v == "object" ) {
                if ( Array.isArray( v ) || v._$$class == null ) {
                    return v;
                } else {
                    console.assert( !self.__objectToId.has( v ) );

                    let newObj;
                    
                    console.assert( self.classList[v._$$class] );
                    const [classObj, classDefOptions] = self.classList[v._$$class];

                    if ( classDefOptions == null ) {
                        console.assert( classObj.length == 0,`${v._$$class}의 생성자의 인수는 ${classObj.length}인데 인수 없이 생성을 시도하고 있다. construct 옵션이 필요함` );
                        newObj = new classObj();
                        Object.assign( newObj, v );
                    } else {
                        if ( classDefOptions.construct ) {
                            newObj = classDefOptions.construct.call( self, v, parseOptions );
                        
                            if ( classDefOptions.fill !== false ) {
                                copyObject( newObj, v,classDefOptions.keep );
                            }
                        } else {
                            copyObject( newObj, v, classDefOptions.keep );
                        }
                    }
                    const id = v.__refId;

                    if ( id != null ) {
                        self.__objectToId.set( v, id );
                        self.__idToObject[id] = newObj;
                    
                        delete newObj.__refId;
                    }

                    delete newObj._$$class;

                    return newObj;
                }
            } else if ( typeof v == "string" ) {
                if ( Object.values( S ).includes( v.substr( 0, 5 ) ) ) {
                    // 내부타입 발견
                    const type = v.substr( 0, 5 );

                    if ( type == S.NaN ) return Number.NaN;
                    else if ( type == S.Infinity ) return Number.POSITIVE_INFINITY;
                    else if ( type == S.MinusInfinity ) return Number.NEGATIVE_INFINITY;
                    else if ( type == S.RegExp ) return new RegExp( v.substr( 6 ) );
                    else if ( type == S.Date ) return new Date( v.substr( 6 ) );
                    else if ( type == S.Reference ) {
                        const id = v.substr( 6 );

                        if ( self.__idToObject[id] ) return self.__idToObject[id];

                        throw new Error( "리퍼런스 개체가 만들어지기 전에 리퍼런스를 연결하려고 함" );
                    } else {
                        throw new Error( `parse 할 수 없는 개체 ${v}` );
                    }
                } else {
                    return v;
                }
            } else {
                return v;
            }
        };

        this.__objectToId = new Map();
        this.__idToObject = {};
        console.log( s );
        
        let r;

        if ( typeof s == "object" ) {
            const parseObject = function ( o ) {
                if ( o == null ) {
                    return o;
                } else if ( typeof o == "object" ) {
                    const r = Array.isArray( o ) ? [] : {};

                    for ( const k in o ) {
                        r[k] = receiver.call( r, k, parseObject( o[k] ) );
                    }

                    return r;
                } else {
                    return o;
                }
            };

            r = parseObject( s );
        } else if ( typeof s == "string" ) {
            r = JSON.parse( s, receiver );
        }

        delete this.__idToObject;
        delete this.__objectToId;

        console.log( r );

        return r;
    }
}




/***/ }),

/***/ "./engine/src/Shader.js":
/*!******************************!*\
  !*** ./engine/src/Shader.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Shader": () => (/* binding */ Shader)
/* harmony export */ });
/* harmony import */ var _Application__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Application */ "./engine/src/Application.js");
/* harmony import */ var _Asset__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Asset */ "./engine/src/Asset.js");
/* harmony import */ var _TextureBase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TextureBase */ "./engine/src/TextureBase.js");
/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Utils */ "./engine/src/Utils.js");






class Shader {
    /**
     *Creates an instance of Shader.
     * @param {string} vertexSrc
     * @param {string} fragmentSrc
     * @param {TextureBase[]=} textures
     * @param {object=} constants
     * @memberof Shader
     */
    constructor( vertexSrc, fragmentSrc, textures, constants ) {
        this.asset = new _Asset__WEBPACK_IMPORTED_MODULE_1__.Asset( "<Shader:*>",_Asset__WEBPACK_IMPORTED_MODULE_1__.Asset.AssetTypes.Shader );
        this.textures = textures != null ? textures : {};
        this.constants = constants != null ? constants : {};
        this.dirty = false;
        this.asset.load( { vertexSrc: vertexSrc,fragmentSrc: fragmentSrc,textures: this._getTextureIds(),constants: this.constants } );
    }

    _getTextureIds() {
        const textureIds = {};

        for ( let name in this.textures ) {
            textureIds[name] = this.textures[name].asset.id;
        }
        return textureIds;
    }

    _update() {
        this.dirty = true;
    }

    forceUpdate() {
        if ( this.dirty ) {
            this.asset.update( { textures: this._getTextureIds(),constants: this.constants } );
            this.dirty = false;
        }
    }

    release() {
        this.asset.release();
    }

    setConstant( name, value ) {
        this.constants[name] = value;
        this._update();

        return this;
    }

    setConstants( constants ) {
        Object.assign( this.constants,constants );
        this._update();

        return this;
    }

    /**
     * 셰이더에 텍스쳐를 바인딩한다
     * name을 지정하면 셰이더안에 nameSampler로 읽을 수 있다.
     * Sampler가 붙는 것에 주의할 것
     *
     * @param {string} name
     * @param {TextureBase} texture
     * @returns {Shader}
     * @memberof Shader
     */
    setTexture( name, texture ) {
        this.textures[name] = texture;
        this._update();

        return this;
    }

    /**
     *
     *
     * @returns {Shader} 
     * @memberof Shader
     */
    clone() {
        const newShader = { textures: {},constants: {} };

        newShader.asset = new _Asset__WEBPACK_IMPORTED_MODULE_1__.Asset( "<Shader:*>",_Asset__WEBPACK_IMPORTED_MODULE_1__.Asset.AssetTypes.Shader );
        Object.assign( newShader.textures,this.textures );
        Object.assign( newShader.constants,this.constants );
        Object.setPrototypeOf( newShader,Shader.prototype );
        newShader.asset.load( { copyFrom: this.asset.id, textures: newShader._getTextureIds(),constants: newShader.constants } );
        //@ts-ignore
        return newShader;
    }
}
Shader.lastId = 0;


/***/ }),

/***/ "./engine/src/Shape.js":
/*!*****************************!*\
  !*** ./engine/src/Shape.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Shape": () => (/* binding */ Shape)
/* harmony export */ });
/* harmony import */ var _Sprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Sprite */ "./engine/src/Sprite.js");
/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Utils */ "./engine/src/Utils.js");




// gideros와 완전히 호환은 안됨. 
// 대충 만든 다음에 API를 바꿀 것


class Shape extends _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite {
    constructor( texture ) {
        super();
        this._$$spriteType = _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite.SpriteTypes.SHAPE;
        this._$$updateCode = _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite.UpdateCodes.UPDATE_EXTRA;
        this.beginPath();
        this.setLineStyle( 0,0x000000,0 );
        this.setFillStyle( Shape.SOLID,0x000000,0 );
    }

    get currentSubPathPoints() {
        return this.subPaths[this.subPaths.length - 1];
    }

    setLineStyle( width, color, alpha ) {
        this.lineWidth = width;
        this.lineColor = _Utils__WEBPACK_IMPORTED_MODULE_1__.Utils.hex2rgba( color,alpha );
    }

    setFillStyle( type, ...args ) {
        if ( type == Shape.SOLID ) {
            const [color, alpha] = args;

            this.fillColor = _Utils__WEBPACK_IMPORTED_MODULE_1__.Utils.hex2rgba( color,alpha );
        }
    }

    beginPath( winding ) {
        this.startX = 0;
        this.startY = 0;
        this.lastX = 0;
        this.lastY = 0;
        this.subPaths = [[]];
    }

    clear() {
        this.subPaths = [];
    }

    moveTo( x,y ) {
        this.endPath();
        if ( this.currentSubPathPoints.length == 0 ) {
            this.startX = x;
            this.startY = y;
        }
        this.currentSubPathPoints.push( x,y );
        this.lastX = x;
        this.lastY = y;
        this._$$localBounds.extendPoint( x,y );
    }

    lineTo( x,y ) {
        if ( this.currentSubPathPoints.length == 0 ) return this.moveTo( x,y );
        this.currentSubPathPoints.push( x, y );
        this.lastX = x;
        this.lastY = y;
        this._$$localBounds.extendPoint( x,y );
    }

    endPath() {
    }

    closePath() {
        if ( this.currentSubPathPoints.length > 0 ) {
            this.currentSubPathPoints.push( this.startX,this.startY );
            this.subPaths.push( [] );
        }
        this._$$updateCode |= _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite.UpdateCodes.UPDATE_EXTRA;
    }


    makeBox( x, y, w, h, c, a ) {
        this.beginPath();
        this.setFillStyle( Shape.SOLID, c, a );
        this.moveTo( x,y );
        this.lineTo( x + w,y );
        this.lineTo( x + w,y + h );
        this.lineTo( x,y + h );
        this.closePath();
    }

    static makeBox( x, y, w, h, c, a ) {
        const sh = new Shape();

        sh.makeBox( x, y, w, h, c, a );
        return sh;
    }

    encodeExtraRenderingInfo() {
        const getArray = ()=> {
            const arr = [];

            arr.push( this.subPaths.length - ( this.currentSubPathPoints.length == 0 ? 1 : 0 ) );
            this.subPaths.forEach( path => {
                arr.push( path.length );
                arr.push( ...path );
            } );
            return arr;
        };

        let arr2 = getArray();
        let encodedBuffer = new Float32Array( 9 + arr2.length );

        encodedBuffer[0] = this.lineWidth;
        encodedBuffer.set( this.lineColor,1 );
        encodedBuffer.set( this.fillColor,5 );
        encodedBuffer.set( arr2,9 );

        return [encodedBuffer];
    }
}

Shape.NONE = "none";
Shape.SOLID = "solid";
Shape.TEXTURE = "texture";
Shape.LINEAR_GRADIENT = "linearGradient";
Shape.RADIAL_GRADIENT = "radialGradient";
Shape.NON_ZERO = "noneZero";



/***/ }),

/***/ "./engine/src/Sound.js":
/*!*****************************!*\
  !*** ./engine/src/Sound.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Sound": () => (/* binding */ Sound)
/* harmony export */ });
/* harmony import */ var _Application__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Application */ "./engine/src/Application.js");
/* harmony import */ var _Asset__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Asset */ "./engine/src/Asset.js");
/* harmony import */ var _Event__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Event */ "./engine/src/Event.js");
/* harmony import */ var _EventDispatcher__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./EventDispatcher */ "./engine/src/EventDispatcher.js");







class Sound extends _EventDispatcher__WEBPACK_IMPORTED_MODULE_3__.EventDispatcher {
    constructor( name ) {
        super();
        this.asset = new _Asset__WEBPACK_IMPORTED_MODULE_1__.Asset( name,_Asset__WEBPACK_IMPORTED_MODULE_1__.Asset.AssetTypes.Sound );
        this.asset.load();
        this.playing = false;
    }

    /**
     *
     *
     * @param {string} eventName
     * @param {function} func
     * @param {any=} context
     * @param {boolean} [isOnce=false]
     * @returns {Sound}
     * @memberof Sound
     */
    addEventListener( eventName, func, context = null, isOnce = false ) {
        if ( eventName == _Event__WEBPACK_IMPORTED_MODULE_2__.Event.LOADED ) {
            this.asset.addEventListener( eventName, this.dispatchEvent.bind( this,_Event__WEBPACK_IMPORTED_MODULE_2__.Event.LOADED ), null, isOnce );
        }
        //@ts-ignore
        return super.addEventListener( eventName, func, context, isOnce );
    }

    play( startTime,looping,paused ) {
        _Application__WEBPACK_IMPORTED_MODULE_0__.application.postMessageToRender( { msg: "addCommand",class: "Sound", method: "play",args: [this.asset.id, startTime,looping,paused] } );
        this.playing = true;
    }

    setVolume( v ) {
        _Application__WEBPACK_IMPORTED_MODULE_0__.application.postMessageToRender( { msg: "addCommand",class: "Sound",method: "setVolume",args: [this.asset.id, v] } );
    }

    setPitch( v ) {
        _Application__WEBPACK_IMPORTED_MODULE_0__.application.postMessageToRender( { msg: "addCommand",class: "Sound",method: "setPitch",args: [this.asset.id, v] } );
    }

    isPlaying() {
        return this.playing;
    }

    setPaused( v ) {
        if ( v ) {
            _Application__WEBPACK_IMPORTED_MODULE_0__.application.postMessageToRender( { msg: "addCommand",class: "Sound",method: "setPaused",args: [this.asset.id, v] } );
        } else {
            this.play();
        }
        this.playing = !v;
    }

    setPosition( v ) {
        _Application__WEBPACK_IMPORTED_MODULE_0__.application.postMessageToRender( { msg: "addCommand",class: "Sound",method: "setPosition",args: [this.asset.id, v] } );
    }

    stop() {
        _Application__WEBPACK_IMPORTED_MODULE_0__.application.postMessageToRender( { msg: "addCommand",class: "Sound",method: "stop",args: [this.asset.id] } );
        this.playing = false;
    }

    getLength() {
        throw new Error( "Not implemented" );
    }

    static playSound( name ) {
        return ( new Sound( name ) ).play();
    }

    /**
     * 같은 key를 사용히면 항상 하나의 사운드만 나오게 한다.
     * 만약 같은 key인데 name이 다를 경우 이전 사운드는 중지시키고 새로 연주
     *
     * @static
     * @param {*} name
     * @param {*} vol
     * @param {*} loop
     * @param {*} [key=name]
     * @memberof Sound
     */
    static playSingleSound( name,vol,loop,key = name ) {
        _Application__WEBPACK_IMPORTED_MODULE_0__.application.postMessageToRender( { msg: "addCommand",class: "Sound",method: "playSingleSound",args: [name,vol,loop,key] } );
    }

    static stopAllSingleSound() {
        _Application__WEBPACK_IMPORTED_MODULE_0__.application.postMessageToRender( { msg: "addCommand",class: "Sound",method: "stopAllSingleSound",args: [] } );
    }
}




/***/ }),

/***/ "./engine/src/Spine.js":
/*!*****************************!*\
  !*** ./engine/src/Spine.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Spine": () => (/* binding */ Spine)
/* harmony export */ });
/* harmony import */ var _Sprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Sprite */ "./engine/src/Sprite.js");
/* harmony import */ var _TextField__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TextField */ "./engine/src/TextField.js");
/* harmony import */ var _Event__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Event */ "./engine/src/Event.js");
/* harmony import */ var _Storage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Storage */ "./engine/src/Storage.js");

// import {SpinePixi from "./ext/spine-pixi";






//pixi-spine docs
//https://github.com/pixijs/pixi-spine/blob/next/examples/index.md

class Spine extends _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite {
    constructor( spineFilename ) {
        super();
 
        this.loader = new SpinePixi.AssetManager();
        this.loader.loadText( spineFilename + ".json" );
        // this.loader.loadText( spineFilename + ".atlas" );
        // this.loader.loadTexture( spineFilename + ".png" );
        // this.loader.loadTexture( spineFilename + "2.png" );
        // this.loader.loadTexture( spineFilename + "3.png" );
        // this.loader.loadTexture( spineFilename + "4.png" );
        this.loader.loadText( "Spines/Spine_Player_3.atlas" );
        this.loader.loadTexture( "Spines/Spine_Player_3.png" );

        // Storage.loadFile( spineFilename ).on( Event.COMPLETE,( e )=>{

        //     this.spine = new SpinePixi( e.data );
        //     this.on( Event.READY,()=>{

        //         this.onStage( Event.ENTER_FRAME,()=>{

        //             this.spine.update();
                
        //         } );
            
        //     } );
        
        // } );
        this.spineFilename = spineFilename;
        requestAnimationFrame( ()=>this.load() );
    }

    load() {
        if ( this.loader.isLoadingComplete() ) {
            console.log( "완료" );
            let data = this.loadSkeleton( this.spineFilename );

            this.skeleton = data.skeleton;
            this.state = data.state;
            this.bounds = data.bounds;
            this.skeletonData = data;
            // this.onStage( Event.ENTER_FRAME,()=>{

            //     s.update( 1000 / 60 );
            // } );
            this.renderer = new SpinePixi.SkeletonRenderer( this.__pixi );
            this.onStage( _Event__WEBPACK_IMPORTED_MODULE_2__.Event.ENTER_FRAME,()=>{
                this.state.update( 1 / 60 );
                this.state.apply( this.skeleton );
                this.renderer.draw( this.skeleton );
            } );

            this.__pixi.emit( _Event__WEBPACK_IMPORTED_MODULE_2__.Event.READY );
        } else {
            requestAnimationFrame( ()=>this.load() );
        }
    }

    loadSkeleton( name ) {
        let basePath = name.substr( 0,name.lastIndexOf( "/" ) );
        //        let atlas = new SpinePixi.core.TextureAtlas( this.loader.get( name.replace( "-pro", "" ).replace( "-ess", "" ) + ".atlas" ), ( path ) => {
        let atlas = new SpinePixi.core.TextureAtlas( this.loader.get( "Spines/Spine_Player_3.atlas" ), ( path ) => {
            return this.loader.get( basePath + "/" + path );
        } );

        // Create a AtlasAttachmentLoader, which is specific to the WebGL backend.
        let atlasLoader = new SpinePixi.core.AtlasAttachmentLoader( atlas );
        // Create a SkeletonJson instance for parsing the .json file.
        let skeletonJson = new SpinePixi.core.SkeletonJson( atlasLoader );

        let skeletonData = skeletonJson.readSkeletonData( this.loader.get( name + ".json" ) );
        let skeleton = new SpinePixi.core.Skeleton( skeletonData );

        skeleton.flipY = true;
        let bounds = this.calculateBounds( skeleton );

        skeleton.setSkinByName( "runner" );
        // Create an AnimationState, and set the initial animation in looping mode.
        var animationState = new SpinePixi.core.AnimationState( new SpinePixi.core.AnimationStateData( skeleton.data ) );

        animationState.setAnimation( 0, "standing", true );

        //@ts-ignore
        animationState.addListener( {
            event: function( trackIndex, event ) {
                // console.log("Event on track " + trackIndex + ": " + JSON.stringify(event));
            },
            complete: function( trackIndex, loopCount ) {
                // console.log("Animation on track " + trackIndex + " completed, loop count: " + loopCount);
            },
            start: function( trackIndex ) {
                // console.log("Animation on track " + trackIndex + " started");
            },
            end: function( trackIndex ) {
                // console.log("Animation on track " + trackIndex + " ended");
            }
        } );

        // Pack everything up and return to caller.
        return { skeleton: skeleton, state: animationState, bounds: bounds };
    }

    calculateBounds( skeleton ) {
        var data = skeleton.data;

        skeleton.setToSetupPose();
        skeleton.updateWorldTransform();
        var offset = new SpinePixi.core.Vector2();
        var size = new SpinePixi.core.Vector2();

        skeleton.getBounds( offset, size, [] );

        return { offset: offset, size: size };
    }
}

// Spine은 자체적으로 차일드를 생성하기 때문에 차일드 수가 꼬일 수 있음
// 같은 처리를 하고 있는 TextField의 것을 쓰자
Spine.prototype.getChildAt = _TextField__WEBPACK_IMPORTED_MODULE_1__.TextField.prototype.getChildAt;
Spine.prototype.getNumChildren = _TextField__WEBPACK_IMPORTED_MODULE_1__.TextField.prototype.getNumChildren;
Spine.prototype.sortChildren = _TextField__WEBPACK_IMPORTED_MODULE_1__.TextField.prototype.sortChildren;
Spine.prototype.refreshColor = _TextField__WEBPACK_IMPORTED_MODULE_1__.TextField.prototype.refreshColor;



/***/ }),

/***/ "./engine/src/Sprite.js":
/*!******************************!*\
  !*** ./engine/src/Sprite.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Sprite": () => (/* binding */ Sprite)
/* harmony export */ });
/* harmony import */ var twgl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! twgl.js */ "./node_modules/twgl.js/dist/4.x/twgl-full.module.js");
/* harmony import */ var _EventDispatcher__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EventDispatcher */ "./engine/src/EventDispatcher.js");
/* harmony import */ var _Event__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Event */ "./engine/src/Event.js");
/* harmony import */ var _ComponentHolder__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ComponentHolder */ "./engine/src/ComponentHolder.js");
/* harmony import */ var _Types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Types */ "./engine/src/Types.js");
/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Utils */ "./engine/src/Utils.js");
/* harmony import */ var _Asset__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Asset */ "./engine/src/Asset.js");
/* harmony import */ var _Application__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Application */ "./engine/src/Application.js");
/* harmony import */ var _easing__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./easing */ "./engine/src/easing.js");
/* harmony import */ var _Transform__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Transform */ "./engine/src/Transform.js");
/* harmony import */ var _Shader__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Shader */ "./engine/src/Shader.js");













class Sprite extends _ComponentHolder__WEBPACK_IMPORTED_MODULE_3__.ComponentHolder {
    constructor() {
        super();
        this._$$id = Sprite.lastId++;
        Sprite.finalizationRegistry.register( this,{ thisObjId: this._$$id } );
        this._$$spriteType = Sprite.SpriteTypes.SPRITE;
        this._$$updateCode = Sprite.UpdateCodes.UPDATE_NOTHING;
        this.transform = new _Transform__WEBPACK_IMPORTED_MODULE_9__.Transform();
        this.transform.invalidateCallback = this.onInvalidateTransform.bind( this );
        this._$$localBounds = new _Types__WEBPACK_IMPORTED_MODULE_4__.Rect( 0,0,0,0 );
        this._$$boundsDirty = true;
        this._$$bounds = new _Types__WEBPACK_IMPORTED_MODULE_4__.Rect( 0,0,0,0 );
        /** @type {Rect} */
        this.customBounds = undefined;
        // this.boundsDirty
        this.useCustomLocalBounds = false;
        this.worldMatrix = undefined;
        this.colorOverride = [1,1,1,1];
        this.colorAdd = [0,0,0,0];
        this.clipRegion = null;
        /** @type {Sprite[]} */
        this.children = [];
        this.parent = null;
        this._$$visible = true;
        this.customPrev;

        /** @type {Asset} */
        this.asset;

        this.cacheBitmapMode = Sprite.CacheBitmapModes.NO_CACHE;
        this.cacheBitmapDstId = 0;
        /** @type {Asset} */
        this.cacheBitmapAsset;
        this.blendMode = Sprite.BlendModes.NORMAL;
        this.motionBlur = true;

        /** @type {Shader} */
        this.shader;
    }

    static finalizeHandler( obj ) {
        // GC에 의해 수거되었으면 릴리즈를 보낸다.
        _Application__WEBPACK_IMPORTED_MODULE_7__.application.postMessageToRender( { msg: "addCommand",class: "Sprite", method: "release",args: [obj.thisObjId] } );
    }


    release() {
        // 강제로 삭제
        if ( this.asset != null )  {
            this.asset.release();
        }
        // 스프라이트 지우라는 메시지 보내야함
        for ( let key in this ) {
            delete this[key];
        }
        _Application__WEBPACK_IMPORTED_MODULE_7__.application.postMessageToRender( { msg: "addCommand",executionTiming: 2,class: "Sprite",method: "release",args: [this._$$id] } );
    }

    /**
     * 스프라이트의 복사본을 만든다
     * 얕은 복사를 하기 때문에 스프라이트를 상속한 개체인 경우 값이 아니라 참조가 복사되는 것에 주의 할 것
     *
     * @returns {Sprite} 
     * @memberof Sprite
     */
    clone() {
        /** @type {Sprite} */
        const newObj = {};

        Object.assign( newObj,this );
        Object.setPrototypeOf( newObj,Object.getPrototypeOf( this ) );
        newObj._$$id = Sprite.lastId++;
        // 개체를 공유하게 되기 때문에 clone을 다시 해주어야 한다
        newObj.transform = newObj.transform.clone();
        newObj.transform.invalidateCallback = newObj.onInvalidateTransform.bind( newObj );
        newObj._$$localBounds = newObj._$$localBounds.clone();
        newObj._$$bounds = newObj._$$bounds.clone();
        newObj.worldMatrix = ( newObj.worldMatrix != null ) ? twgl_js__WEBPACK_IMPORTED_MODULE_0__.m4.copy( newObj.worldMatrix ) : null;
        newObj.colorOverride = [...newObj.colorOverride];
        newObj.colorAdd = [...newObj.colorAdd];
        newObj.clipRegion = ( newObj.clipRegion != null ) ? newObj.clipRegion.clone() : null;
        newObj.children = [...newObj.children];
        newObj.customPrev = ( newObj.customPrev != null ) ? ( Object.assign( {},newObj.customPrev ) ) : null;
        newObj._$$updateCode |= Sprite.UpdateCodes.UPDATE_EXTRA;
        return newObj;
    }

    onInvalidateTransform() {
        let spr = this;

        do {
            spr._$$boundsDirty = true;
            spr = spr.parent;
        } while ( spr != null );
        return spr;
    }

    getPath( detailInfo ) {
        const path = [];
        let spr = this;

        while ( spr.parent != null ) {
            if ( detailInfo ) {
                path.unshift( spr.parent.children.indexOf( spr ) + ":" + spr.constructor.name );
            } else {
                path.unshift( spr.parent.children.indexOf( spr ) );
            }
            spr = spr.parent;
        }
        //@ts-ignore
        if ( spr.isStage ) {
            return "//" + path.join( "/" );
        } else {
            return "?/" + path.join( "/" );
        }
    }


    /**
     * @returns {Point} 
     * @memberof Sprite
     */
    get position() {
        return new _Types__WEBPACK_IMPORTED_MODULE_4__.Point( this.transform.x,this.transform.y );
    }

    /**
     * @param {Point} v
     * @memberof Sprite
     */
    set position( v ) {
        this.transform.x = v.x;
        this.transform.y = v.y;
    }

    setPosition( x,y ) {
        this.transform.x = x;
        this.transform.y = y;
    }

    getPosition() {
        return this.position;
    }


    get x() { return this.transform.x; }

    set x( v ) { this.transform.x = v; }

    getX() { return this.transform.x; }

    setX( v ) { this.transform.x = v; } 

    get y() { return this.transform.y; }

    set y( v ) { this.transform.y = v; }

    getY() { return this.transform.y; }

    setY( v ) { this.transform.y = v; } 

    /**
     * [x,y] 형태로 반환한다.
     *
     * @returns {[number,number]}
     * @memberof Sprite
     */
    get xy() { return [this.x, this.y]; }

    /**
     * [x,y] 형태로만 받는다.
     * 
     * @param {number[]|Point} v
     * @memberof Sprite
     */
    set xy( v ) {
        if ( Array.isArray( v ) ) {
            this.x = v[0];
            this.y = v[1];
        } else {
            //@ts-ignore
            this.x = v.x;
            //@ts-ignore
            this.y = v.y;
        }
    }

    /**
     * @returns {number}
     * @memberof Sprite
     */
    getRotation() { return this.transform.rotation; }

    /**
     * @param {number} v
     * @memberof Sprite
     */
    setRotation( v ) { this.transform.rotation = v; }

    get anchorX() { 
        return this.transform.anchorX / ( this.bounds.width || 1 ); 
    }

    /**
     * @returns {Point}
     * @memberof Sprite
     */
    get anchorPosition() {
        return new _Types__WEBPACK_IMPORTED_MODULE_4__.Point( this.transform.anchorX,this.transform.anchorY );
    }

    /**
     * @param {Point} v
     * @memberof Sprite
     */
    set anchorPosition( v ) {
        this.transform.anchorX = v.x;
        this.transform.anchorY = v.y;
    }

    get anchorPositionX() {
        return this.transform.anchorX;
    }

    set anchorPositionX( v ) {
        this.transform.anchorX = v;
    }

    get anchorPositionY() {
        return this.transform.anchorY;
    }

    set anchorPositionY( v ) {
        this.transform.anchorY = v;
    }


    set anchorX( v ) { 
        this.transform.anchorX = v * this.bounds.width; 
    }

    get anchorY() { 
        return this.transform.anchorY / ( this.bounds.height || 1 ); 
    }

    set anchorY( v ) { 
        this.transform.anchorY = v * this.bounds.height; 
    }

    getAnchorPoint() {
        return new _Types__WEBPACK_IMPORTED_MODULE_4__.Point( this.anchorX,this.anchorY );
    }

    setAnchorPoint( ax,ay ) {
        this.anchorX = ax;
        this.anchorY = ay;
    }

    get scaleX() { return this.transform.scaleX; }

    set scaleX( v ) { this.transform.scaleX = v; }

    getScaleX() { return this.transform.scaleX; }

    setScaleX( v ) { this.transform.scaleX = v; }
    

    get scaleY() { return this.transform.scaleY; }

    set scaleY( v ) { this.transform.scaleY = v; }

    getScaleY() { return this.transform.scaleY; }

    setScaleY( v ) { this.transform.scaleY = v; }



    /**
     * @returns {Point}
     * @memberof Sprite
     */
    get scale() { return new _Types__WEBPACK_IMPORTED_MODULE_4__.Point( this.transform.scaleX,this.transform.scaleY ); }

    /**
     * @param {number|Point} v
     *
     * @memberof Sprite
     */

    /**
     * @param {[number,number]|Float32Array|number|Point} v
     * @memberof Sprite
     */
    set scale( v ) {
        if ( typeof v === "number" ) {
            // 스케일은 동시에 넣을 수 있으면 편리
            this.transform.scaleX = v;
            this.transform.scaleY = v;
        } else {
            const p = new _Types__WEBPACK_IMPORTED_MODULE_4__.Point( v );

            this.transform.scaleX = p.x;
            this.transform.scaleY = p.y;
        }
    } 

    getScale() {
        return this.scale;
    }

    setScale( x,y ) {
        this.scaleX = x;
        this.scaleY = y == null ? x : y;
    }

    get rotation() {
        return this.transform.rotation;
    }

    set rotation( v ) {
        this.transform.rotation = v;
    }

    /**
     * 자식 스프라이트를 제외하고 순수하게 자기 자신의 크기
     *
     * @readonly
     * @memberof Sprite
     */
    get localBounds() {
        const r = new _Types__WEBPACK_IMPORTED_MODULE_4__.Rect( this._$$localBounds );

        r.x -= this.transform.anchorX;
        r.y -= this.transform.anchorY;
        return r;
    }

    /**
     * 자신과 자식 모두를 포함한 경계 사각형을 구한다.
     *
     * @readonly
     * @memberof Sprite
     */
    get bounds() {
        if ( this.customBounds ) {
            return this.customBounds;
        }
        if ( !this._$$boundsDirty ) {
            return this._$$bounds;
        }
        // 여기 느리다. 나중에 최적화 할 것
        // 하위 개체가 추가/삭제되거나 이동하면 다시 계산하도록 해야 한다.
        // 다시 계산이 필요한 경우 상위로 전파시켜줘야할 것 같음
        let matFrom = twgl_js__WEBPACK_IMPORTED_MODULE_0__.m4.identity();
        let bounds = new _Types__WEBPACK_IMPORTED_MODULE_4__.Rect();
        let boundsPoints = [];

        const search = ( spr,mat )=>{
            if ( !spr._$$boundsDirty ) {
                // 자식 스프라이트가 바뀐게 없으면 보관된 점들을 사용한다.
                boundsPoints.push( ... spr._$$boundsPoints );
            } else {
                if ( spr.spriteType != 0 ) {
                    const [x1,y1,x2,y2,x3,y3,x4,y4] = spr.localBounds.getCornerPoints();
                    let x,y;

                    [x,y] = twgl_js__WEBPACK_IMPORTED_MODULE_0__.m4.transformPoint( mat,[x1,y1,0] );
                    boundsPoints.push( x,y );
                    [x,y] = twgl_js__WEBPACK_IMPORTED_MODULE_0__.m4.transformPoint( mat,[x2,y2,0] );
                    boundsPoints.push( x,y );
                    [x,y] = twgl_js__WEBPACK_IMPORTED_MODULE_0__.m4.transformPoint( mat,[x3,y3,0] );
                    boundsPoints.push( x,y );
                    [x,y] = twgl_js__WEBPACK_IMPORTED_MODULE_0__.m4.transformPoint( mat,[x4,y4,0] );
                    boundsPoints.push( x,y );
                }
                for ( let child of spr.children ) {
                    if ( child.visible ) {
                        search( child,twgl_js__WEBPACK_IMPORTED_MODULE_0__.m4.multiply( mat,child.transform.matrix ) );
                    }
                }
            }
        };

        search( this,matFrom );
        for ( let i = 0; i < boundsPoints.length; i += 2 ) {
            bounds.extendPoint( boundsPoints[i],boundsPoints[i + 1] );
        }

        this._$$bounds = bounds;
        this._$$boundsDirty = false;
        this._$$boundsPoints = boundsPoints;
        return bounds;      
    }

    getBounds() {
        return this.bounds;
    }

    updateLocalBounds() {

    }    

    get visible() {
        return this._$$visible;
    }

    set visible( v ) {
        if ( !this._$$visible && v ) {
            this._updateChildren( Sprite.UpdateCodes.UPDATE_CLEAR_PREV ); 
        }
        this._$$visible = v;
    }

    isVisible() {
        return this.visible;
    }

    setVisible( v ) {
        this.visible = v;
    }

    isVisibleDeeply() {
        let spr;

        for ( spr = this; spr != null && !spr.isStage; spr = spr.parent ) {
            if ( !spr.visible ) return false;
        }
        if ( spr == null ) return false;

        return true;
    }

    get redMultiplier() { return this.colorOverride[0]; }

    set redMultiplier( v ) { this.colorOverride[0] = v; }

    get greenMultiplier() { return this.colorOverride[1]; }

    set greenMultiplier( v ) { this.colorOverride[1] = v; }

    get blueMultiplier() { return this.colorOverride[2]; }

    set blueMultiplier( v ) { this.colorOverride[2] = v; }

    get alpha() {
        return this.colorOverride[3];
    }

    set alpha( v ) {
        this.colorOverride[3] = v;
    }

    setAlpha( v ) {
        this.colorOverride[3] = v;
    }

    getAlpha( v ) {
        return this.colorOverride[3];
    }

    setColorMultiplier( r,g,b,a ) {
        this.colorOverride[0] = r;
        this.colorOverride[1] = g;
        this.colorOverride[2] = b;
        if ( a != null ) this.colorOverride[3] = a; 
    }

    setOverrideColor( c,a ) {
        const arr = _Utils__WEBPACK_IMPORTED_MODULE_5__.Utils.hex2rgba( c,a );

        this.colorOverride[0] = arr[0];
        this.colorOverride[1] = arr[1];
        this.colorOverride[2] = arr[2];
        if ( a != null ) this.colorOverride[3] = arr[3];
    }

    get width() {
        return this.bounds.width;
    }

    set width( v ) {
        this.customBounds = this.customBounds || this.bounds;
        this.customBounds.width = v;
    }

    get height() {
        return this.bounds.height;
    }

    set height( v ) {
        this.customBounds = this.customBounds || this.bounds;
        this.customBounds.height = v;
    }

    setCustomBounds( x,y,w,h ) {
        this.customBounds.x = x;
        this.customBounds.y = y;
        this.customBounds.width = w;
        this.customBounds.height = h;
    }


    getWidth() {
        return this.width;
    }

    getHeight() {
        return this.height;
    }

    localToGlobal( x,y ) {
        let matArr = [];

        for ( let spr = this; ; spr = spr.parent ) {
            matArr.unshift( spr.transform.matrix );
            if ( spr.parent == null ) break;
        }
        let mat = twgl_js__WEBPACK_IMPORTED_MODULE_0__.m4.identity();

        matArr.forEach( v=>{
            twgl_js__WEBPACK_IMPORTED_MODULE_0__.m4.multiply( mat,v,mat );
        } );
        let p = twgl_js__WEBPACK_IMPORTED_MODULE_0__.m4.transformPoint( mat,[x,y,0] );

        return new _Types__WEBPACK_IMPORTED_MODULE_4__.Point( p[0],p[1] );
    }

    globalToLocal( x,y ) {
        //@ts-ignore
        if ( this.parent == null || this.isStage ) {
            return new _Types__WEBPACK_IMPORTED_MODULE_4__.Point( x,y );
        }
        // 지난 프레임에 구해놓은 worldMatrix를 사용하면 빠르게 할 수 있다.
        // 지금은 그냥 둔다
        let matArr = [];

        for ( let spr = this; ; spr = spr.parent ) {
            matArr.push( twgl_js__WEBPACK_IMPORTED_MODULE_0__.m4.inverse( spr.transform.matrix ) );
            if ( spr.parent == null ) break;
        }
        let mat = twgl_js__WEBPACK_IMPORTED_MODULE_0__.m4.identity();

        matArr.forEach( v=>{
            twgl_js__WEBPACK_IMPORTED_MODULE_0__.m4.multiply( mat,v,mat );
        } );
        let p = twgl_js__WEBPACK_IMPORTED_MODULE_0__.m4.transformPoint( mat,[x,y,0] );

        return new _Types__WEBPACK_IMPORTED_MODULE_4__.Point( p[0],p[1] );
    }

    setBlendMode( v ) {
        this.blendMode = v;        
    }


    //#region addChild & removeChild

    _updateChildren( updateCodeToON ) {
        for ( const s of this.searchChildren() ) {
            s.updateCode |= updateCodeToON;
        }
    }

    /**
     *
     *
     * @param {Sprite} spr
     * @param {number=} i
     * @memberof Sprite
     */
    addChildAt( spr, i ) {
        if ( i == null ) {
            i = this.children.length;
        }
        const oldIndex = this.children.indexOf( spr );
            
        this.children.splice( i,0, spr );
        if ( oldIndex >= 0 ) {
            // 원래 있던 경우 위치 이동
            if ( oldIndex > i ) {
                this.children.splice( oldIndex + 1,1 );
            } else if ( oldIndex < i ) {
                this.children.splice( oldIndex,1 );
            }
        }
        spr.parent = this;
        if ( this.isOnStage() ) {
            spr._updateChildren( Sprite.UpdateCodes.UPDATE_CLEAR_PREV ); 
            spr.dispatchEventWithChildren( new _Event__WEBPACK_IMPORTED_MODULE_2__.Event( _Event__WEBPACK_IMPORTED_MODULE_2__.Event.ADDED_TO_STAGE ) );
        }
        this.onInvalidateTransform();
    }


    /**
     *
     *
     * @param {...Sprite} sprs
     * @memberof Sprite
     */
    addChild( ...sprs ) {
        for ( const spr of sprs ) {
            this.addChildAt( spr );
        }
    }


    removeChildAt( i ) {
        const child = this.children[i];

        child.parent = null;
        this.children.splice( i,1 );
        if ( this.isOnStage() ) {
            child.dispatchEventWithChildren( new _Event__WEBPACK_IMPORTED_MODULE_2__.Event( _Event__WEBPACK_IMPORTED_MODULE_2__.Event.REMOVED_FROM_STAGE ) );
        }
        this.onInvalidateTransform();
    }

    /**
     *
     *
     * @param {Sprite} spr
     * @memberof Sprite
     */
    removeChild( spr ) {
        let index = this.children.indexOf( spr );

        if ( index != -1 ) this.removeChildAt( index );
    }

    removeFromParent() {
        if ( this.parent ) {
            this.parent.removeChild( this );
        }
    }

    clearChildren() {
        for ( let i = this.children.length - 1; i >= 0; i-- ) {
            this.removeChildAt( i );
        }
    }

    getChildIndex( spr ) {
        return this.children.indexOf( spr );
    }

    getChildAt( i ) {
        return this.children[i];
    }

    //#endregion

    getStage() {
        let spr;

        for ( spr = this; spr != null && !spr.isStage; spr = spr.parent );
        return spr;
    }

    isOnStage() {
        return this.getStage() != null;
    }

    /**
     *
     *
     * @param {Event|string} eventOrName
     * @param {object=} extendedValues
     * @memberof Sprite
     */
    dispatchEventWithChildren( eventOrName,extendedValues ) {
        let event;

        if ( typeof eventOrName == "string" ) {
            event = new _Event__WEBPACK_IMPORTED_MODULE_2__.Event( eventOrName );
        } else {
            event = eventOrName;
        }
        Object.assign( event,extendedValues );
        // const inputOnly = Event.isInputEvent( event.name );

        for ( const spr of this.searchChildren( true ) ) {
            if ( event.stopped ) return;
            spr.dispatchEvent( event );
        }
    }

    /**
     * 
     * @param {boolean} [bottomUp=false]
     */
    *searchChildren( bottomUp ) {
        yield* Sprite.searchChildren( this, bottomUp );
    }

    /**
     *
     *
     * @static
     * @param {Sprite} startObj
     * @param {boolean} [bottomUp=false]
     * @memberof Sprite
     */
    static *searchChildren( startObj, bottomUp = false ) {
        const searchRecursive = function* ( cur ) {
            if ( bottomUp ) {
                if ( cur.children.length > 0 ) {
                    for ( let i = cur.children.length - 1; i >= 0; i-- ) {
                        const child = cur.children[i];

                        if ( child ) yield* searchRecursive( child );
                    }
                }
                yield cur;
            } else {
                yield cur;
                if ( cur.children.length > 0 ) {
                    for ( let i = 0; i < cur.children.length; i++ ) {
                        const child = cur.children[i];

                        if ( child ) yield* searchRecursive( child );
                    }
                }
            }
        };

        yield* searchRecursive( startObj );
    }

    findChildById( id ) {
        for ( let spr of this.searchChildren( ) ) {
            if ( spr.id == id ) return spr;
        }
    }


    getNumChildren() {
        return this.children.length;
    }

    /**
     *
     *
     * @returns {Sprite}
     * @memberof Sprite
     */
    getParent() {
        return this.parent;
    }

    /**
     *
     *
     * @param {Sprite} spr
     * @returns {boolean}
     * @memberof Sprite
     */
    contains( spr ) {
        return this.children.includes( spr );
    }

    hitTestPoint( x, y ) {
        const p = this.globalToLocal( x,y );
        const rect = this.bounds;

        return rect.contains( p.x,p.y );
    }

    setClip( x,y,width,height ) {
        this.clipRegion = new _Types__WEBPACK_IMPORTED_MODULE_4__.Rect( x,y,width,height );
    }

    setShader( shader ) {
        this.shader = shader;
    }

    getShader() {
        return this.shader;
    }


    //#region setInteractive() 
    
    /**
     * @callback AnimationHandler
     * @param {{x:number,y:number,button:*,target:Sprite}} event
     * @param {{downPointerPosition:Point,downThisPosition:Point,downOffset:Point,downButton:*,pushed:boolean,clickCancled:boolean,state:string,moveDeltaPosition:Point,moveThisPosition:Point}} info
     * @return {Tween}
     */
    /**
     * @callback InteractiveHandler
     * @param {{x:number,y:number,button:*,target:Sprite}} event
     * @param {{downPointerPosition:Point,downThisPosition:Point,downOffset:Point,downButton:*,pushed:boolean,clickCancled:boolean,state:string,moveDeltaPosition:Point,moveThisPosition:Point}} info
     */
    /**
     *
     * @param {object} options
     * @param {AnimationHandler=} options.pressAnimation - 눌러지는 애니메이션을 틀기. tween를 리턴해야한다.
     * @param {AnimationHandler=} options.releaseAnimation - 올라오는 애니메이션을 틀기. tween을 리턴해야한다.
     * @param {InteractiveHandler=} options.down - 영역안에서 down한 경우
     * @param {InteractiveHandler=} options.move - down 후 move할 경우
     * @param {InteractiveHandler=} options.up - down 후 up할 경우
     * @param {InteractiveHandler=} options.click - down에서 멀리 떨어지지 않은 위치에서 up
     * @param {InteractiveHandler=} options.press - down 후 up할 때 영역 안
     * @param {boolean=} options.preventRelease - click이나 press에서 releaseAnimation하지 않도록
     * @param {boolean=} options.disableBasicAnimation - 기본 애니메이션 끄기
     * @param {number=} options.pressOffsetY - 기본 pressAnimation에서 얼마나 아래로 내려가는가
     * @param {number=} options.clickRadius - click으로 판정하는 반지름
     * @param {boolean=} options.dragX - 가로축으로 드래그
     * @param {boolean=} options.dragY - 세로축으로 드래그
     * @param {number=} options.dragReleaseDistance - 이 거리를 벗어나면 drag가 취소된다.
     * @param {boolean=} options.allowDragOutside - 화면 밖으로 못 끌고 나가도록 한다
     * @memberof Sprite
     */
    setInteractive( options = null ) {
        this.__interactive = this.__interactive || {};
        const _i = this.__interactive;
        const clickCancelDistance = ( options && options.clickRadius != null ) ? options.clickRadius : 10;
        const defaultPressOffsetY = 3;// 실제 픽셀기준으로 해야함
        const pointerDown = ( e ) => {
            if ( this.hitTestPoint( e.x, e.y ) ) {
                _i.downPointerPosition = new _Types__WEBPACK_IMPORTED_MODULE_4__.Point( e.x, e.y );
                _i.downThisPosition = this.getPosition().clone();
                _i.downOffset = new _Types__WEBPACK_IMPORTED_MODULE_4__.Point( e.x - this.x, e.y - this.y );
                _i.downButton = e.button;
                _i.pushed = true;
                _i.clickCanceled = false;
                _i.state = "down";
                if ( !options.disableBasicAnimation ) {
                    if ( _i.tween ) _i.tween.stop();
                    _i.tween = this.move(
                        _i.downThisPosition.x,
                        _i.downThisPosition.y + ( options.pressOffsetY != null ? options.pressOffsetY : defaultPressOffsetY ),
                        300,
                        _easing__WEBPACK_IMPORTED_MODULE_8__.easing.outBack );
                    e.stopPropagation();
                } else if ( options.pressAnimation ) {
                    if ( _i.tween ) _i.tween.stop();
                    _i.tween = options.pressAnimation.call( this, e, _i );
                    e.stopPropagation();
                }
                if ( options.down != null ) {
                    options.down.call( this, e, _i );
                }
            }
        };
        const pointerMove = ( e ) => {
            if ( _i.state == "down" || _i.state == "move" ) {
                _i.state = "move";
                _i.moveDeltaPosition = new _Types__WEBPACK_IMPORTED_MODULE_4__.Point( e.x - _i.downPointerPosition.x , e.y - _i.downPointerPosition.y );
                _i.moveThisPosition = new _Types__WEBPACK_IMPORTED_MODULE_4__.Point(
                    options.dragX ? _i.downThisPosition.x + _i.moveDeltaPosition.x : _i.downThisPosition.x,
                    options.dragY ? _i.downThisPosition.y + _i.moveDeltaPosition.y : _i.downThisPosition.y,
                );
                if ( !options.allowDragOutside ) {
                    _i.moveThisPosition.x = _Utils__WEBPACK_IMPORTED_MODULE_5__.Utils.clamp( _i.moveThisPosition.x, _Application__WEBPACK_IMPORTED_MODULE_7__.application.logicalRenderBounds.left - _i.downOffset.x, _Application__WEBPACK_IMPORTED_MODULE_7__.application.logicalRenderBounds.right - _i.downOffset.x );
                    _i.moveThisPosition.y = _Utils__WEBPACK_IMPORTED_MODULE_5__.Utils.clamp( _i.moveThisPosition.y, _Application__WEBPACK_IMPORTED_MODULE_7__.application.logicalRenderBounds.top - _i.downOffset.y, _Application__WEBPACK_IMPORTED_MODULE_7__.application.logicalRenderBounds.bottom - _i.downOffset.y );
                }
                if ( options.dragX || options.dragY ) {
                    if ( _i.tween ) _i.tween.cancel();
                }
                if ( options.dragX ) this.x = _i.moveThisPosition.x;
                if ( options.dragY ) this.y = _i.moveThisPosition.y;
                if ( _i.clickCanceled == false ) {
                    if ( Math.sqrt( _i.moveDeltaPosition.x ** 2 + _i.moveDeltaPosition.y ** 2 ) > clickCancelDistance ) {
                        _i.clickCanceled = true;
                    }
                }
                e.stopPropagation();
                if ( options.move != null ) {
                    options.move.call( this,e, _i );
                }
                if ( _i.pushed && !this.hitTestPoint( e.x, e.y ) ) {
                    _i.pushed = false;
                    if ( !options.disableBasicAnimation ) {
                        if ( _i.tween ) _i.tween.stop();
                        _i.tween = this.move(
                            _i.moveThisPosition.x,
                            _i.moveThisPosition.y,
                            200,
                            _easing__WEBPACK_IMPORTED_MODULE_8__.easing.outCubic );
                        e.stopPropagation();
                    } else if ( options.releaseAnimation ) {
                        if ( _i.tween ) _i.tween.stop();
                        _i.tween = options.releaseAnimation.call( this, e, _i );
                        e.stopPropagation();
                    }
                } else if ( !_i.pushed && this.hitTestPoint( e.x, e.y ) ) {
                    _i.pushed = true;
                    if ( !options.disableBasicAnimation ) {
                        if ( _i.tween ) _i.tween.stop();
                        _i.tween = this.move(
                            _i.moveThisPosition.x,
                            _i.moveThisPosition.y + ( options.pressOffsetY != null ? options.pressOffsetY : defaultPressOffsetY ),
                            100,
                            _easing__WEBPACK_IMPORTED_MODULE_8__.easing.outCubic );
                        e.stopPropagation();
                    } else if ( options.pressAnimation ) {
                        if ( _i.tween ) _i.tween.stop();
                        _i.tween = options.pressAnimation.call( this, e, _i );
                        e.stopPropagation();
                    }
                }
            }
        };
        const pointerUp = ( e ) => {
            if ( _i.state == "down" || _i.state == "move" ) {
                _i.state = "up";
                _i.moveDeltaPosition = new _Types__WEBPACK_IMPORTED_MODULE_4__.Point( e.x - _i.downPointerPosition.x , e.y - _i.downPointerPosition.y );
                _i.moveThisPosition = new _Types__WEBPACK_IMPORTED_MODULE_4__.Point(
                    options.dragX ? _i.downThisPosition.x + _i.moveDeltaPosition.x : _i.downThisPosition.x,
                    options.dragY ? _i.downThisPosition.y + _i.moveDeltaPosition.y : _i.downThisPosition.y,
                );
                if ( options.dragX ) this.x = _i.moveThisPosition.x;
                if ( options.dragY ) this.y = _i.moveThisPosition.y;
                if ( !options.allowDragOutside ) {
                    _i.moveThisPosition.x = _Utils__WEBPACK_IMPORTED_MODULE_5__.Utils.clamp( _i.moveThisPosition.x, _Application__WEBPACK_IMPORTED_MODULE_7__.application.logicalRenderBounds.left - _i.downOffset.x, _Application__WEBPACK_IMPORTED_MODULE_7__.application.logicalRenderBounds.right - _i.downOffset.x );
                    _i.moveThisPosition.y = _Utils__WEBPACK_IMPORTED_MODULE_5__.Utils.clamp( _i.moveThisPosition.y, _Application__WEBPACK_IMPORTED_MODULE_7__.application.logicalRenderBounds.top - _i.downOffset.y, _Application__WEBPACK_IMPORTED_MODULE_7__.application.logicalRenderBounds.bottom - _i.downOffset.y );
                }
                if ( _i.clickCanceled == false ) {
                    if ( Math.sqrt( _i.moveDeltaPosition.x ** 2 + _i.moveDeltaPosition.y ** 2 ) < clickCancelDistance ) {
                        if ( options.click != null ) options.click.call( this, e, _i );
                    }
                }
                if ( this.hitTestPoint( e.x, e.y ) ) {
                    _i.pushed = true;
                    if ( options.press != null ) options.press.call( this,e, _i );
                }
                if ( !options.preventRelease ) {
                    if ( !options.disableBasicAnimation ) {
                        if ( _i.tween ) _i.tween.stop();
                        _i.tween = this.move(
                            _i.moveThisPosition.x,
                            _i.moveThisPosition.y,
                            300,
                            _easing__WEBPACK_IMPORTED_MODULE_8__.easing.outBounce );
                        e.stopPropagation();
                    } else if ( options.releaseAnimation ) {
                        if ( _i.tween ) _i.tween.stop();
                        _i.tween = options.releaseAnimation.call( this, e, _i );
                        e.stopPropagation();
                    }
                }
                if ( options.up != null ) {
                    options.up.call( this, e, _i );
                }
            }
        };

        if ( options != null ) {
            this.on( _Event__WEBPACK_IMPORTED_MODULE_2__.Event.POINTER_DOWN, pointerDown );
            this.on( _Event__WEBPACK_IMPORTED_MODULE_2__.Event.POINTER_MOVE, pointerMove );
            this.on( _Event__WEBPACK_IMPORTED_MODULE_2__.Event.POINTER_UP, pointerUp );
        } else {
            this.removeEventListener( _Event__WEBPACK_IMPORTED_MODULE_2__.Event.POINTER_DOWN, pointerDown );
            this.removeEventListener( _Event__WEBPACK_IMPORTED_MODULE_2__.Event.POINTER_MOVE, pointerMove );
            this.removeEventListener( _Event__WEBPACK_IMPORTED_MODULE_2__.Event.POINTER_UP, pointerUp );
            delete this.__interactive;
        }
    }

    //#endregion    


    encodeRenderingInfo() {
        // id(1),type(1),updateCode(1),colorOverride(4),colorAdd(4),anchor(2),shaderId(1),matrix(16),clipRegion(4)
        const encodedBuffer = new Float32Array( 38 );

        // encodedBuffer[0] = this.id;
        // encodedBuffer[1] = this.spriteType;
        // encodedBuffer[2] = this.updateCode; 
        // // encodedBuffer.set( this.colorOverride,3 );
        // encodedBuffer[3] = this.colorOverride[0];
        // encodedBuffer[4] = this.colorOverride[1];
        // encodedBuffer[5] = this.colorOverride[2];
        // encodedBuffer[6] = this.colorOverride[3];
        // // encodedBuffer.set( this.colorAdd,7 );
        // encodedBuffer[7] = this.colorAdd[0];
        // encodedBuffer[8] = this.colorAdd[1];
        // encodedBuffer[9] = this.colorAdd[2];
        // encodedBuffer[10] = this.colorAdd[3];
        // encodedBuffer[11] = this.transform.anchorX;
        // encodedBuffer[12] = this.transform.anchorY;

        encodedBuffer.set( [this._$$id,
                            this._$$spriteType,
                            this._$$updateCode,
                            this.colorOverride[0],
                            this.colorOverride[1],
                            this.colorOverride[2],
                            this.colorOverride[3],
                            this.colorAdd[0],
                            this.colorAdd[1],
                            this.colorAdd[2],
                            this.colorAdd[3],
                            this.transform.anchorX,
                            this.transform.anchorY] );

        if ( this.shader != null ) {
            this.shader.forceUpdate();
            encodedBuffer[13] = this.shader.asset.id;
        } else {
            encodedBuffer[13] = 0;
        }
        // for ( let i = 0; i < 16; i++ ) {
        //     encodedBuffer[14 + i] = this.transform.matrix[i]; 
        // }
        // encodedBuffer.set( this.transform.matrix,14 );
        _Types__WEBPACK_IMPORTED_MODULE_4__.TypedArrayHelper.memcpy( encodedBuffer,14,this.transform.matrix,0,16 );

        encodedBuffer.set( ( this.clipRegion != null ) ? this.clipRegion.xywh : [NaN,NaN,NaN,NaN],30 );
        encodedBuffer[34] = this.cacheBitmapAsset != null ? this.cacheBitmapAsset.id : 0;
        encodedBuffer[35] = this.cacheBitmapDstId;
        encodedBuffer[36] = this.blendMode;
        encodedBuffer[37] = +this.motionBlur;

        return encodedBuffer;
    }

    encodeCustomPrev() {
        const encodedBuffer = new Float32Array( 22 );

        encodedBuffer.set( [
            this.customPrev.colorOverride[0],
            this.customPrev.colorOverride[1],
            this.customPrev.colorOverride[2],
            this.customPrev.colorOverride[3],
            this.customPrev.anchorPositionX,
            this.customPrev.anchorPositionY] );
        // encodedBuffer.set( this.customPrev.worldMatrix,6 );
        _Types__WEBPACK_IMPORTED_MODULE_4__.TypedArrayHelper.memcpy( encodedBuffer,6,this.customPrev.worldMatrix,0,16 );
        return encodedBuffer;
    }

    sortChildren( prop = "y" ) {
        this.children.sort( ( a, b ) => a[prop] - b[prop] );
    }


    setCustomPrev( worldMatrix,colorOverride,anchorPositionX,anchorPositionY ) {
        this.customPrev = {
            worldMatrix,
            colorOverride,
            anchorPositionX,
            anchorPositionY,
        };
        this._$$updateCode |= Sprite.UpdateCodes.UPDATE_CUSTOM_PREV;
    }

    setCacheMode( mode ) {
        if ( this.cacheBitmapMode == Sprite.CacheBitmapModes.SNAPSHOT ) {
            this._updateChildren( Sprite.UpdateCodes.UPDATE_CLEAR_PREV );   
        }
        if ( this.cacheBitmapAsset ) {            
            this.cacheBitmapAsset.release();

            /**
             *
             *
             * @param {Sprite} spr
             */
            const clearDstId = ( spr )=>{
                if ( spr.cacheBitmapMode == Sprite.CacheBitmapModes.NO_CACHE ) {
                    this.cacheBitmapAsset = null;
                    spr.cacheBitmapDstId = 0;
                    for ( let spr2 of spr.children ) {
                        clearDstId( spr2 );
                    }
                }   
            };

            this.cacheBitmapMode = Sprite.CacheBitmapModes.NO_CACHE;
            clearDstId( this );
        }
        this.cacheBitmapMode = mode;
    }


    encodeRenderingInfoWithChildren() {
        const encodedBuffers = [];
        const transferList = [];

        /**
         *
         *
         * @param {Sprite} spr
         * @param {m4.Mat4} worldMatrix
         * @param {[number,number,number,number]|Float32Array} colorOverride
         * @param {[number,number,number,number]|Float32Array|null} clipRect
         * @param {number} cacheBitmapDstId
         */
        function encodeChildren( spr,worldMatrix,colorOverride, clipRect, cacheBitmapDstId ) {
            const buf = spr.encodeRenderingInfo();
            const bufMatrix = buf.subarray( 14,14 + 16 );
            const curColorOverride = buf.subarray( 3,3 + 4 );
            const curClipRect = buf.subarray( 30,30 + 4 );
            let assetId = 0;
            let extra;
            let strs;
            let genericData;
            let customPrev;
            let needMakeRT = false;

            // clipRegion 트랜스폼
            if ( !Number.isNaN( curClipRect[0] ) ) {
                let clipPos = twgl_js__WEBPACK_IMPORTED_MODULE_0__.m4.transformPoint( worldMatrix,[curClipRect[0],curClipRect[1],0] );

                curClipRect[0] = clipPos[0] + spr.x;
                curClipRect[1] = clipPos[1] + spr.y;
            }

            // 매트릭스는 트리 하단으로 갈 수록 곱한다.
            twgl_js__WEBPACK_IMPORTED_MODULE_0__.m4.multiply( worldMatrix,bufMatrix,bufMatrix );
            // 월드 매트릭스로 보관. 한 프레임 늦은 값이다.
            // copy하는 이유는 postMessage로 원본이 보내져서 사라지기 때문
            spr.worldMatrix = twgl_js__WEBPACK_IMPORTED_MODULE_0__.m4.copy( bufMatrix );


            if ( spr.cacheBitmapMode != Sprite.CacheBitmapModes.NO_CACHE ) {
                if ( spr.cacheBitmapAsset == null ) {
                    needMakeRT = true;
                } else if ( spr.cacheBitmapMode == Sprite.CacheBitmapModes.FILTER ) {
                    // 필터링 모드
                    spr.cacheBitmapAsset.release();
                    needMakeRT = true;
                }
            } 
            
            if ( needMakeRT ) {
                const rect = spr.bounds;
                const asset = new _Asset__WEBPACK_IMPORTED_MODULE_6__.Asset( "<RT:*>",_Asset__WEBPACK_IMPORTED_MODULE_6__.Asset.AssetTypes.RenderTarget );

                asset.load( { 
                    x:           rect.x,
                    y:           rect.y,
                    width:       Math.min( 2048, rect.width ),
                    height:      Math.min( 2048,rect.height ), 
                    worldMatrix: spr.worldMatrix  } );
                spr.cacheBitmapAsset = asset;
                assetId = asset.id;
                spr.cacheBitmapDstId = assetId;
                cacheBitmapDstId = assetId;
                // console.log( `Cache ${assetId} src=${spr.cacheBitmapSrcId}` );
            } else {
                spr.cacheBitmapDstId = cacheBitmapDstId || spr.cacheBitmapDstId;
            }
            buf[35] = spr.cacheBitmapDstId;

            // 컬러는 RGBA각각을 곱해나간다. 0~1 값
            curColorOverride[0] = curColorOverride[0] * colorOverride[0];
            curColorOverride[1] = curColorOverride[1] * colorOverride[1];
            curColorOverride[2] = curColorOverride[2] * colorOverride[2];
            curColorOverride[3] = curColorOverride[3] * colorOverride[3];
            // clipRect는 NaN이면 부모 것을 가져온다
            if ( Number.isNaN( curClipRect[0] ) && !Number.isNaN( clipRect[0] ) ) {
                curClipRect.set( clipRect );
            }
            if ( spr._$$spriteType != 0 ) {
                //@ts-ignore
                if ( ( spr._$$updateCode & Sprite.UpdateCodes.UPDATE_EXTRA ) && spr.encodeExtraRenderingInfo != null ) {
                    let transfer;

                    //@ts-ignore
                    [extra,strs,genericData,transfer] = spr.encodeExtraRenderingInfo();
                    if ( transfer ) transferList.push( ...transfer );
                }
                if ( ( spr._$$updateCode & Sprite.UpdateCodes.UPDATE_CUSTOM_PREV ) ) {
                    customPrev = spr.encodeCustomPrev();
                }
                // RT에 그릴 것이라서 srcId=0
                buf[34] = 0;
                encodedBuffers.push( [buf,extra,strs,customPrev,genericData] );
            } 
            
            if ( spr.cacheBitmapMode == Sprite.CacheBitmapModes.SNAPSHOT && spr.cacheBitmapDstId == 0 ) {
                // 캐시된 경우
            } else {
                // 비트맵에 캐시한 경우가 아니면 차일드를 그린다.
                spr.children.forEach( child => {
                    if ( child.visible ) {
                        encodeChildren( child, bufMatrix,curColorOverride, curClipRect, cacheBitmapDstId );
                        if ( spr.cacheBitmapMode == Sprite.CacheBitmapModes.SNAPSHOT ) {
                            child.cacheBitmapDstId = 0;
                        }
                    }
                } );
                if ( spr.cacheBitmapMode == Sprite.CacheBitmapModes.SNAPSHOT ) {
                    spr.cacheBitmapDstId = 0;
                }
            }

            if ( spr.cacheBitmapAsset ) {
                // 텍스쳐를 그려야 함
                const buf2 = new Float32Array( buf );

                buf2[34] = assetId;
                buf2[35] = 0;
                encodedBuffers.push( [buf2,null,null,customPrev,null] );
            }
            spr._$$updateCode = Sprite.UpdateCodes.UPDATE_NOTHING;
        }

        if ( this.visible ) {
            encodeChildren( this,twgl_js__WEBPACK_IMPORTED_MODULE_0__.m4.identity(), [1,1,1,1], [NaN,NaN,NaN,NaN], 0 );

            for ( let i = 0; i < encodedBuffers.length; i++ ) {
                transferList.push( encodedBuffers[i][0].buffer );
                if ( encodedBuffers[i][1] ) {
                    transferList.push( encodedBuffers[i][1].buffer );
                }
                if ( encodedBuffers[i][3] ) {
                    transferList.push( encodedBuffers[i][3].buffer );
                }
            }
            return [encodedBuffers,transferList];
        } else {
            return [null,null];
        }
    }
}

Sprite.lastId = 1;
Sprite.finalizationRegistry = new FinalizationRegistry( Sprite.finalizeHandler );
Sprite.loadedEventDispatcher = new _EventDispatcher__WEBPACK_IMPORTED_MODULE_1__.EventDispatcher();


Sprite.SpriteTypes = {
    SPRITE:    0,
    BITMAP:    1,
    MESH:      2,
    TEXTFIELD: 3,
    PIXEL:     4,
    SHAPE:     5,
};
Sprite.UpdateCodes = {
    UPDATE_NOTHING:     0,
    UPDATE_EXTRA:       1,
    UPDATE_CLEAR_PREV:  2,
    UPDATE_CUSTOM_PREV: 4,
};
Sprite.CacheBitmapModes = {
    NO_CACHE: 0,
    SNAPSHOT: 1,
    FILTER:   2,
};


/** 
 * @enum {number}
*/
Sprite.BlendModes = {
    NORMAL:     0, //[gl.ONE, gl.ONE_MINUS_SRC_ALPHA];
    MULTIPLY:   1, //[gl.DST_COLOR, gl.ONE_MINUS_SRC_ALPHA];
    ADD:        2, //[gl.ONE, gl.DST_ALPHA];
    SCREEN:     3, //[gl.ONE, gl.ONE_MINUS_SRC_COLOR];
    NORMAL_NPM: 4, //[gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];
    ADD_NPM:    5, //[gl.SRC_ALPHA, gl.DST_ALPHA, gl.ONE, gl.DST_ALPHA];
    SCREEN_NPM: 6, //[gl.SRC_ALPHA, gl.ONE_MINUS_SRC_COLOR, gl.ONE, gl.ONE_MINUS_SRC_COLOR];
};


/***/ }),

/***/ "./engine/src/Stage.js":
/*!*****************************!*\
  !*** ./engine/src/Stage.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Stage": () => (/* binding */ Stage)
/* harmony export */ });
/* harmony import */ var _Sprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Sprite */ "./engine/src/Sprite.js");
/* harmony import */ var twgl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! twgl.js */ "./node_modules/twgl.js/dist/4.x/twgl-full.module.js");






class Stage extends _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite {
    constructor() {
        super();
        this.isStage = true;
    }
}

/***/ }),

/***/ "./engine/src/Storage.js":
/*!*******************************!*\
  !*** ./engine/src/Storage.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Storage": () => (/* binding */ Storage)
/* harmony export */ });
/* harmony import */ var _EventDispatcher__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EventDispatcher */ "./engine/src/EventDispatcher.js");
/* harmony import */ var _Timer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Timer */ "./engine/src/Timer.js");
/* harmony import */ var _Event__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Event */ "./engine/src/Event.js");






// 각 스토리지 설명
//https://blog.sessionstack.com/how-javascript-works-storage-engines-how-to-choose-the-proper-storage-api-da50879ef576
// 캐시 데이터는 Cache API
// 유저 데이터는 IndexedDB 쓰라고 권고 하고 있다

class Storage extends _EventDispatcher__WEBPACK_IMPORTED_MODULE_0__.EventDispatcher {
    constructor( dbName ) {
        super();
        console.assert( self.indexedDB, "indexedDB가 지원되지 않는 브라우저" );

        const version = 1;
        const request = self.indexedDB.open( dbName,version );

        request.onerror = ( event ) => {
            throw new Error( "indexedDB 열기 실패" );
        };
        request.onupgradeneeded = ( event ) => {
            const thisDb = event.target.result;

            // console.log( "upgrade" );
            thisDb.createObjectStore( "files", { keyPath: "path" } );
        };
        request.onsuccess = ( event ) => {
            const db = request.result;

            this.db = db;

            // console.log( event );
            this.dispatchEvent( "ready" );
        };
    }

    read( key ) {
        return new Promise( ( resolve, reject ) => {
            const func = () => {
                const request = this.db.transaction( "files", "readonly" ).objectStore( "files" ).get( key );

                request.onsuccess = ( event ) => {
                    this.dispatchEvent( new _Event__WEBPACK_IMPORTED_MODULE_2__.Event( _Event__WEBPACK_IMPORTED_MODULE_2__.Event.COMPLETE, { content: event.target.result.content } ) );
                    resolve( event.target.result.content );
                };
            };

            if ( this.db ) {
                func();
            } else {
                this.once( "ready", func );
            }
        } );
    }

    write( key, value ) {
        return new Promise( ( resolve, reject ) => {
            const func = () => {
                const request = this.db.transaction( "files", "readwrite" ).objectStore( "files" ).put( { path: key, content: value } );

                request.onsuccess = ( event ) => {
                    this.dispatchEvent( new _Event__WEBPACK_IMPORTED_MODULE_2__.Event( _Event__WEBPACK_IMPORTED_MODULE_2__.Event.COMPLETE ) );
                    resolve();
                };
            };

            if ( this.db ) {
                func();
            } else {
                this.once( "ready", func );
            }
        } );
    }


    static loadFile( filename ) {
        // /** @type {PIXI.Loader} */
        // //@ts-ignore
        // const loader = PIXI.Loader.shared;
        // const r = new EventDispatcher();

        // if ( loader.resources[filename] ) {
        //     if ( loader.resources[filename].isComplete ) {
        //         Timer.delayedCall( 0, ()=> r.dispatchEvent( Event.COMPLETE,{ data: loader.resources[filename].data } ) );
        //     } else {
        //         loader.load( ( loader,resources )=> r.dispatchEvent( Event.COMPLETE,{ data: resources[filename].data } ) );
        //     }
        // } else {
        //     loader.add( filename,filename );
        //     loader.load( ( loader,resources )=> {
        //         if ( resources[filename].error ) throw new Error( resources[filename].error );
        //         r.dispatchEvent( Event.COMPLETE,{ data: resources[filename].data } );
        //     }
        //     );
        // }

        // return r;
    }
}



/***/ }),

/***/ "./engine/src/TextField.js":
/*!*********************************!*\
  !*** ./engine/src/TextField.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextField": () => (/* binding */ TextField)
/* harmony export */ });
/* harmony import */ var _FontBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./FontBase */ "./engine/src/FontBase.js");
/* harmony import */ var _Sprite__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Sprite */ "./engine/src/Sprite.js");
/* harmony import */ var _TrueTypeFont__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TrueTypeFont */ "./engine/src/TrueTypeFont.js");
/* harmony import */ var _Types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Types */ "./engine/src/Types.js");
/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Utils */ "./engine/src/Utils.js");







class TextField extends _Sprite__WEBPACK_IMPORTED_MODULE_1__.Sprite {
    /**
     * Creates an instance of TextField.
     * @param {Font} font
     * @param {string} text
     * @param {*} styles
     * @memberof TextField
     */
    constructor( font, text, styles ) {
        super();
        this.font = font;
        this.styles = styles;
        this.useBaseline = false;
        this._$$spriteType = _Sprite__WEBPACK_IMPORTED_MODULE_1__.Sprite.SpriteTypes.TEXTFIELD;
        this._$$updateCode = _Sprite__WEBPACK_IMPORTED_MODULE_1__.Sprite.UpdateCodes.UPDATE_EXTRA;
        // 트루타입폰트를 캔버스에 그렸다가 텍스쳐로 바꾸는데 이 때 알파에 검정이 섞이는 것을 빼려면 다음과 같이 해야한다.
        this.colorAdd = ( font instanceof _TrueTypeFont__WEBPACK_IMPORTED_MODULE_2__.TrueTypeFont ) ? [1,1,1,0] : [0,0,0,0];
        this.customBounds = new _Types__WEBPACK_IMPORTED_MODULE_3__.Rect();
        this.text = text;
    }

    get text() {
        return this._text;
    }

    set text( text ) {
        if ( text != this._text ) {
            this.customBounds.width = this.font.measureTextWidth( text,this.fontSize );
            this.customBounds.height = this.fontSize;
        }
        this._text = text;
    }

    get fontSize() {
        return this.font.referenceSize;
    }

    getTextWidth() {
        return this.width;
    }

    setTextColor( c,a ) {
        // this.colorAdd = Utils.hex2rgba( c,a );
        this.setOverrideColor( c,a );
    }

    static fromTextWrap( text, areaWidth, areaHeight, lineSpacing, font, align, ignoreWordWrap ) {
        const wordWrapStyle = {
            align:         align != null ? align : "left",
            lineHeight:    lineSpacing,
            wordWrap:      areaWidth != null && !ignoreWordWrap,
            whiteSpate:    "normal",
            trim:          true,
            breakWord:     areaWidth != null && !ignoreWordWrap,
            wordWrapWidth: areaWidth
        };

        const tf = new TextField( font, text, wordWrapStyle );

        //spr.addChild( tf );
        //TODO: 틀렸음
        tf.anchorX = ( align == "center" ) ? 0.5 : ( align == "right" ? 1.0 : 0.0 );

        //tf.__pixi.x = (align == "center") ? areaWidth * 0.5 : (align == "right" ? areaWidth : 0.0);
        if ( areaWidth != null ) {
            tf.x += areaWidth * tf.anchorPosition.x;
        }

        return tf;
    }



    encodeExtraRenderingInfo() {
        let encodedBuffer = new Float32Array( 2 );

        encodedBuffer[0] = this.font.asset.id;
        encodedBuffer[1] = +this.useBaseline;

        return [encodedBuffer,[this.text]];
    }
}


/***/ }),

/***/ "./engine/src/Texture.js":
/*!*******************************!*\
  !*** ./engine/src/Texture.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Texture": () => (/* binding */ Texture)
/* harmony export */ });
/* harmony import */ var _Asset__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Asset */ "./engine/src/Asset.js");
/* harmony import */ var _TextureBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TextureBase */ "./engine/src/TextureBase.js");
/* harmony import */ var _Types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Types */ "./engine/src/Types.js");
/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Utils */ "./engine/src/Utils.js");
/* harmony import */ var _Event__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Event */ "./engine/src/Event.js");





class Texture extends _TextureBase__WEBPACK_IMPORTED_MODULE_1__.TextureBase {
    /**
     * Creates an instance of Texture.
     * @param {string} filename
     * @param {boolean} filter
     * @param {*} option
     * @memberof Texture
     */
    constructor( filename, filter = false, option = {} ) {
        super();
        this.asset = new _Asset__WEBPACK_IMPORTED_MODULE_0__.Asset( filename,_Asset__WEBPACK_IMPORTED_MODULE_0__.Asset.AssetTypes.Texture );
        const size = _Utils__WEBPACK_IMPORTED_MODULE_3__.Utils.getImageSize( filename );

        this.uvRect = option.rect || new _Types__WEBPACK_IMPORTED_MODULE_2__.Rect( 0,0,size.width,size.height );
        this.width = this.uvRect.width;
        this.height = this.uvRect.height;
        this.asset.load( { width: size.width,height: size.height,uvRect: this.uvRect, filter: filter } );
    }

    /**
     *
     *
     * @param {string} eventName
     * @param {function} func
     * @param {any=} context
     * @param {boolean} [isOnce=false]
     * @returns {Texture}
     * @memberof Texture
     */
    addEventListener( eventName, func, context = null, isOnce = false ) {
        if ( eventName == _Event__WEBPACK_IMPORTED_MODULE_4__.Event.LOADED ) {
            this.asset.addEventListener( eventName, this.dispatchEvent.bind( this,_Event__WEBPACK_IMPORTED_MODULE_4__.Event.LOADED ), null, isOnce );
        } 
        //@ts-ignore
        return super.addEventListener( eventName, func, context, isOnce );
    }
}



/***/ }),

/***/ "./engine/src/TextureBase.js":
/*!***********************************!*\
  !*** ./engine/src/TextureBase.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TextureBase": () => (/* binding */ TextureBase)
/* harmony export */ });
/* harmony import */ var _Asset__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Asset */ "./engine/src/Asset.js");
/* harmony import */ var _EventDispatcher__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EventDispatcher */ "./engine/src/EventDispatcher.js");
/* harmony import */ var _Types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Types */ "./engine/src/Types.js");




class TextureBase extends _EventDispatcher__WEBPACK_IMPORTED_MODULE_1__.EventDispatcher {
    constructor() {
        super();
        this.width = 0;
        this.height = 0;
        /** @type {Asset} */
        this.asset = undefined;
        /** @type {Rect} */
        this.uvRect = undefined;
    }

    get size() {
        return [this.width,this.height];
    }
}



/***/ }),

/***/ "./engine/src/TexturePack.js":
/*!***********************************!*\
  !*** ./engine/src/TexturePack.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TexturePack": () => (/* binding */ TexturePack)
/* harmony export */ });
/* harmony import */ var _TextureBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TextureBase */ "./engine/src/TextureBase.js");
/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Utils */ "./engine/src/Utils.js");
/* harmony import */ var _Event__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Event */ "./engine/src/Event.js");
/* harmony import */ var _Types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Types */ "./engine/src/Types.js");
/* harmony import */ var _Texture__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Texture */ "./engine/src/Texture.js");







class TexturePack extends _TextureBase__WEBPACK_IMPORTED_MODULE_0__.TextureBase {
    /**
     *Creates an instance of TexturePack.
     * @param {string|object} txtfile
     * @param {string} imagefile
     * @param {TextureBase.Filters} filter
     * @param {object=} options
     * @memberof TexturePack
     */
    constructor( txtfile,imagefile,filter,options ) {
        super();
        this.filename =  imagefile;
        this.regions = {};

        if ( typeof( txtfile ) == "string" ) {
            const s = _Utils__WEBPACK_IMPORTED_MODULE_1__.Utils.getEmbeddedFile( txtfile );


            if ( s != null ) {
                const lines = s.split( "\n" );

                for ( const line of lines ) {
                //console.log(line);
                    const result = /([^,]+),\s*(\d+),\s*(\d+),\s*(\d+),\s*(\d+),\s*(\d+),\s*(\d+),\s*(\d+),\s*(\d+)/.exec( line );

                    if ( result != null ) {
                        const [, name, x, y, width, height] = result;
                        //console.log(`${name} ${x} ${y} ${width} ${height}`);
                        const rect = new _Types__WEBPACK_IMPORTED_MODULE_3__.Rect( parseFloat( x ), parseFloat( y ), parseFloat( width ), parseFloat( height ) );

                        this.regions[name] = new _Texture__WEBPACK_IMPORTED_MODULE_4__.Texture( this.filename,false,{ rect } );
                    }
                }
            }
        } else {
            // txtfile 부분에 개체를 넣은 경우
            for ( let name in txtfile ) {
                let rectArr = txtfile[name];
                let rect = new _Types__WEBPACK_IMPORTED_MODULE_3__.Rect( ...rectArr );

                this.regions[name] = new _Texture__WEBPACK_IMPORTED_MODULE_4__.Texture( this.filename,filter,{ rect } );
            }
        }
    }

    getTextureRegion( name ) {
        return this.regions[name];
    }
}



/***/ }),

/***/ "./engine/src/TileMap.js":
/*!*******************************!*\
  !*** ./engine/src/TileMap.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TileMap": () => (/* binding */ TileMap)
/* harmony export */ });
/* harmony import */ var _Sprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Sprite */ "./engine/src/Sprite.js");
/* harmony import */ var _Mesh__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Mesh */ "./engine/src/Mesh.js");
/* harmony import */ var _Shader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Shader */ "./engine/src/Shader.js");
/* harmony import */ var _TextureBase__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./TextureBase */ "./engine/src/TextureBase.js");





/*

2019-10-05
resize가 너무 느려서 처음에 메시를 만들어 두는 쪽으로 했다

2021-11-21

mesh를 child로 가지고 있는 것을 그냥 mesh를 extend하게 수정하거나
숨겨줘야함

*/



/**
 * @this {TileMap}
 *
 * @param {number} tx
 * @param {number} ty
 * @returns {number[]}
 */
function tileToRect( tx, ty ) {
    const x1 = tx * ( this.__tileWidth + this.__spacingX ) + this.__marginX;
    const y1 = ty * ( this.__tileHeight + this.__spacingY ) + this.__marginY;

    // 기데로스의 uv좌표 변환시 생기는 문제 때문에 0.99999를 곱함
    //return [x1,y1,x1 + this.__tileWidth * 0.99999,y1 + this.__tileHeight * 0.99999];
    //return [x1, y1, x1 + this.__tileWidth ,y1 + this.__tileHeight];
    // return [x1 >>> 0, y1 >>> 0, x1 + this.__tileWidth >>> 0, y1 + this.__tileHeight >>> 0];
    return [x1, y1, x1 + this.__tileWidth, y1 + this.__tileHeight];
    // let [a, b, c, d] = [0.03,0.125,-0.03,-0.125];
    // return [x1 + a, y1 + b, x1 + this.__tileWidth + c, y1 + this.__tileHeight + d];
}

function replaceMeshData( m, i, x1, y1, x2, y2, tx1, ty1, tx2, ty2, c1, a1, c2, a2, c3, a3, c4, a4 ) {
    const [nVtx, nUv, nVc, nIdx] = [i * 4,i * 4, i * 4, i * 6];

    m.setVertices(
        nVtx + 0, x1, y1,
        nVtx + 1, x2, y1,
        nVtx + 2, x1, y2,
        nVtx + 3, x2, y2
    );
    m.setTextureCoordinates(
        nUv + 0, tx1, ty1,
        nUv + 1, tx2, ty1,
        nUv + 2, tx1, ty2,
        nUv + 3, tx2, ty2
    );
    m.setColors(
        nVc + 0, c1, a1,
        nVc + 1, c2, a2,
        nVc + 2, c3, a3,
        nVc + 3, c4, a4
    );
    m.setIndices(
        nIdx + 0, nVtx + 0,
        nIdx + 1, nVtx + 1,
        nIdx + 2, nVtx + 2,
        nIdx + 3, nVtx + 1,
        nIdx + 4, nVtx + 3,
        nIdx + 5, nVtx + 2
    );
}



class TileMap extends _Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite {
    /**
     *Creates an instance of TileMap.
     * @param {number} width
     * @param {number} height
     * @param {TextureBase} texture
     * @param {number} tileWidth
     * @param {number} tileHeight
     * @param {number} [spacingX=0]
     * @param {number} [spacingY=0]
     * @param {number} [marginX=0]
     * @param {number} [marginY=0]
     * @param {number} [displayWidth=tileWidth]
     * @param {number} [displayHeight=tileHeight]
     * @memberof TileMap
     */
    constructor( width, height, texture, tileWidth, tileHeight, spacingX = 0, spacingY = 0, marginX = 0, marginY = 0, displayWidth = tileWidth, displayHeight = tileHeight ) {
        super();
        this.__mapWidth = width;
        this.__mapHeight = height;
        this.__texture = texture;
        this.__tileWidth = tileWidth;
        this.__tileHeight = tileHeight;
        this.__spacingX = spacingX;
        this.__spacingY = spacingY;
        this.__marginX = marginX;
        this.__marginY = marginY;
        this.__displayWidth = displayWidth || tileWidth;
        this.__displayHeight = displayHeight || tileHeight;
        const m = new _Mesh__WEBPACK_IMPORTED_MODULE_1__.Mesh();

        m.setTexture( texture );
        this.__mesh = m;
        this.useCustomLocalBounds = true;
        this._$$localBounds.width = width * tileWidth;
        this._$$localBounds.height = height * tileHeight;
        this.clearAllTiles();
        this.addChild( m );
    }

    clearAllTiles() {
        const [vtx, idx, uv, vc] = [[], [], [], []];

        for ( let y = 0; y < this.__mapHeight; y++ ) {
            for ( let x = 0; x < this.__mapWidth; x++ ) {
                const [x1,y1,x2,y2] = [x * this.__displayWidth,y * this.__displayHeight,( x + 1 ) * this.__displayWidth,( y + 1 ) * this.__displayHeight];

                vtx.push( x1,y1,x2,y1,x1,y2,x2,y2 );
                uv.push( 0,0,0,0,0,0,0,0 );
                vc.push( 0,0,0,0,0,0,0,0 );
                idx.push( 0,0,0, 0,0,0 );
            }
        }
        let m = this.__mesh;

        m.setVertexArray( vtx );
        m.setIndexArray( idx );
        m.setTextureCoordinateArray( uv );
        m.setColorArray( vc );
        this.__map = [];
    }
	
    /**
     *
     *
     * @param {number} x
     * @param {number} y
     * @param {number} tx
     * @param {number} ty
     * @param {boolean} [flip=false]
     * @param {number} [c1=0xffffff]
     * @param {number} [a1=1.0]
     * @param {number} [c2=c1]
     * @param {number} [a2=a1]
     * @param {number} [c3=c1]
     * @param {number} [a3=a1]
     * @param {number} [c4=c1]
     * @param {number} [a4=a1]
     * @memberof TileMap
     */
    setTile( x,y,tx,ty,flip = false,c1 = 0xffffff,a1 = 1.0,c2 = c1,a2 = a1,c3 = c1,a3 = a1,c4 = c1,a4 = a1 ) {
        if ( tx == null || ty == null ) {
            this.clearTile( x,y );
        }

        const w = this.__mapWidth;
        const [x1,y1,x2,y2] = [x * this.__displayWidth,y * this.__displayHeight,( x + 1 ) * this.__displayWidth,( y + 1 ) * this.__displayHeight];
        const m = this.__mesh;
        const [tx1,ty1,tx2,ty2] = tileToRect.call( this,tx,ty );
        let t = this.__map[y * this.__mapWidth + x];

        // if ( t == null ) {

        //     const nVtx = m.getVertexArraySize();

        //     m.resizeVertexArray( nVtx + 4 );
        //     m.resizeTextureCoordinateArray( nVtx + 4 );
        //     m.resizeColorArray( nVtx + 4 );
        //     m.resizeIndexArray( nVtx / 4 * 6 + 6 );
        //     replaceMeshData( m, nVtx / 4 ,
        //                      x1, y1, x2, y2,
        //                      tx1, ty1, tx2, ty2,
        //                      c1, a1, c2, a2, c3, a3, c4, a4 );
        //     t = [tx, ty, flip, c1, a1, c2, a2, c3, a3, c4, a4, nVtx / 4 ];
        
        // } else {

        replaceMeshData( m, x + y * this.__mapWidth,// t[11],
                         x1,y1,x2,y2,
                         tx1,ty1,tx2,ty2,
                         c1,a2,c2,a2,c3,a3,c4,a4 );
        t = [tx, ty, flip, c1, a1, c2, a2, c3, a3, c4, a4, x + y * this.__mapWidth];//t[11]];
        
        // }

        this.__map[y * this.__mapWidth + x] = t;
    }
	
    getTile( x,y ) {
        const t = this.__map[y * this.__mapWidth + x];

        if ( t != null ) {
            return t;
        }
    }
	
    getArray( x,y ) {
        const t = this.__map[y * this.__mapWidth + x];

        if ( t == null ) {
            return;
        }

        const pos = t[11];
        const [nVtx,nIdx] = [pos * 4,pos * 6];
        const m = this.__mesh;
        const vtx = [];
        const uv = [];
        const vc = [];
        const idx = [];

        for ( let i = 0; i < 4; i++ ) {
            const { x, y } = m.getVertex( nVtx + i );

            vtx.push( x,y );
            const { x: u, y: v } = m.getTextureCoordinate( nVtx + i );

            uv.push( u,v );
            const { color, alpha } = m.getColor( nVtx + i );

            vc.push( color,alpha );
        }

        for ( let i = 0; i < 6; i++ ) {
            const v = m.getIndex( nIdx + i );

            idx.push( v );
        }

        return [vtx,uv,vc,idx];
    }
	
    clearTile( x,y ) {
        const t = this.__map[y * this.__mapWidth + x];

        if ( t != null ) {
            const nIdx = t[11] * 6;

            this.__mesh.setIndices(
                nIdx + 0, 0,
                nIdx + 1, 0,
                nIdx + 2, 0,
                nIdx + 3, 0,
                nIdx + 4, 0,
                nIdx + 5, 0
            );
        }

        this.__map[y * this.__mapWidth + x] = null;
    }
    /*
	shift(offsetX,offsetY) {
	
	}
	*/


    setTexture( texture ) {
        this.__mesh.setTexture( texture );//, matrix);
    }


    /**
     *
     *
     * @param {Shader} shader
     * @memberof TileMap
     */
    setShader( shader ) {
        this.__mesh.setShader( shader );
    }

    setTileColor( x, y, color, alpha, isCorner ) {
        const w = this.__mapWidth;

        if ( !isCorner ) {
            const t = this.__map[y * this.__mapWidth + x];

            if ( t ) {
                const nVc = t[11] * 4;

                this.__mesh.setColors(
                    nVc + 0, color, alpha,
                    nVc + 1, color, alpha,
                    nVc + 2, color, alpha,
                    nVc + 3, color, alpha
                );
            }
        } else {
            // 코너의 컬러
            // 12
            // 30
            const t0 = this.__map[y * this.__mapWidth + x];
            const t1 = ( y > 0 && x > 0 ) ? this.__map[( y - 1 ) * this.__mapWidth + x - 1] : null;
            const t2 = ( y > 0 ) ? this.__map[( y - 1 ) * this.__mapWidth + x] : null;
            const t3 = ( x > 0 ) ? this.__map[y * this.__mapWidth + x - 1] : null;

            if ( t0 ) {
                this.__mesh.setColor( t0[11] * 4 + 0, color, alpha );
            }

            if ( t1 ) {
                this.__mesh.setColor( t1[11] * 4 + 3, color, alpha );
            }

            if ( t2 ) {
                this.__mesh.setColor( t2[11] * 4 + 2, color, alpha );
            }

            if ( t3 ) {
                this.__mesh.setColor( t3[11] * 4 + 1, color, alpha );
            }
        }
    }
}
TileMap.FLIP_DIAGONAL = "flipDiagonal";
TileMap.FLIP_HORIZONTAL = "flipHorizontal";
TileMap.FLIP_VERTICAL = "flipVertical";




/***/ }),

/***/ "./engine/src/Timer.js":
/*!*****************************!*\
  !*** ./engine/src/Timer.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Timer": () => (/* binding */ Timer)
/* harmony export */ });
/* harmony import */ var _EventDispatcher__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EventDispatcher */ "./engine/src/EventDispatcher.js");
/* harmony import */ var _Event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Event */ "./engine/src/Event.js");





class Timer extends _EventDispatcher__WEBPACK_IMPORTED_MODULE_0__.EventDispatcher {
    /**
     * 타이머 개체를 만든다.
     * 타이머는 바로 시작하지 않으며 start를 불러야 시작한다.
     * 
     * @param {number} delay - ms 단위
     * @param {number} [repeatCount=0] - 몇 번을 반복하는 타이머인가? 0이면 무한 반복
     * @memberof Timer
     */
    constructor( delay, repeatCount = 0 ) {
        super();
        this.delay = delay;
        this.repeatCount = repeatCount;
        this.count = 0;
    }

    start() {
        this.stop();
        this.__timer = setInterval( () => {
            this.count++;
            const e = new _Event__WEBPACK_IMPORTED_MODULE_1__.Event( _Event__WEBPACK_IMPORTED_MODULE_1__.Event.TIMER );

            // @ts-ignore
            e.timer = this;
            this.dispatchEvent( e );

            if ( this.repeatCount != 0 && this.count >= this.repeatCount ) {
                this.stop();
            }
        }, this.delay );
    }

    stop() {
        if ( this.__timer ) {
            clearInterval( this.__timer );
            this.__timer = null;
        }
    }

    getCurrentCount() {
        return this.count;
    }

    getDelay() {
        return this.delay;
    }

    /**
     * delay 만큼의 지연시간 후에 함수를 실행한다
     *
     * @static
     * @param {number} delay - ms 단위. 0을 줘도 동기적으로 실행되지 않는다.
     * @param {function} func
     * @param {object=} context
     * @returns {Timer}
     * @memberof Timer
     */
    static delayedCall( delay, func, context ) {
        console.assert( func != null );
        const t = new Timer( delay, 1 );

        t.addEventListener( _Event__WEBPACK_IMPORTED_MODULE_1__.Event.TIMER, func, context );
        t.start();

        return t;
    }

    /**
     * 현재 시간을 밀리세컨드 단위로 돌려준다
     *
     * @static
     * @returns {number}
     * @memberof Timer
     */
    static now() {
        return ( +new Date );
    }

    /**
     * 퍼포먼스 타이머는 Timer.now()보다 더 정확한 시간 간격을 측정할 수 있지만
     * 이것이 현재 시간을 표시하고 있는 것은 아님에 주의. Timer.now()와 다른 값이다.
     * 간격은 매우 정확하며 1ms 이상의 해상도를 돌려준다. 그러나 이 호출 자체가 비싸다.
     *
     * @static
     * @returns {number}
     * @memberof Timer
     */
    static getPerformaceTimer() {
        return performance.now();
    }

    /**
     * 파일이름이나 로그에 출력할 때 사용하기 편한 ISO포멧의 시간 표시를 돌려준다
     *
     * @static
     * @param {Date} [date=new Date()]
     * @returns {string}
     * @memberof Timer
     */
    static getShortDate( date = new Date() ) {
        return date.toISOString();
    }

    static wait( ms ) {
        return new Promise( ( resolve,reject )=>{
            this.delayedCall( ms,resolve );
        } );
    }

    static waitFrame( frame ) {
        return new Promise( ( resolve,reject )=>{
            this.delayedCall( 1000 / 60 * frame,resolve );
        } );
    }
}



/***/ }),

/***/ "./engine/src/Transform.js":
/*!*********************************!*\
  !*** ./engine/src/Transform.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Transform": () => (/* binding */ Transform)
/* harmony export */ });
/* harmony import */ var twgl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! twgl.js */ "./node_modules/twgl.js/dist/4.x/twgl-full.module.js");



class Transform {
    constructor() {
        this._x = 0;
        this._y = 0;
        this._anchorX = 0;
        this._anchorY = 0;
        this._scaleX = 1;
        this._scaleY = 1;
        this._rotation = 0;
        this._matrixDirty = false;
        this._matrix = twgl_js__WEBPACK_IMPORTED_MODULE_0__.m4.identity();
        this.invalidateCallback = null;
    }

    get x() {
        return this._x;
    }

    get y() {
        return this._y;
    }

    get anchorX() {
        return this._anchorX;
    }

    get anchorY() {
        return this._anchorY;
    }


    get scaleX() {
        return this._scaleX;
    }

    get scaleY() {
        return this._scaleY;
    }

    get rotation() {
        return this._rotation;       
    }

    set x( v ) {
        this.setDirty( this._x != v );
        this._x = v;
    }

    set y( v ) {
        this.setDirty( this._y != v );
        this._y = v;
    }

    set anchorX( v ) {
        this.setDirty( this._anchorX != v );
        this._anchorX = v;
    }

    set anchorY( v ) {
        this.setDirty( this._anchorY != v );
        this._anchorY = v;
    }

    set scaleX( v ) {
        this.setDirty( this._scaleX != v );
        this._scaleX = v;
    }

    set scaleY( v ) {
        this.setDirty( this._scaleY != v );
        this._scaleY = v;
    }

    set rotation( v ) {
        this.setDirty( this._rotation != v );
        this._rotation = v;
    }

    get matrix() {
        if ( this._matrixDirty ) {
            const mat =  twgl_js__WEBPACK_IMPORTED_MODULE_0__.m4.translation( [this._x,this._y,0] );

            // 앵커만큼 역으로 이동한 다음
            // 여기가 구버전과 다른 점
            // m4.translate( mat, [this.anchorPosition.x,this.anchorPosition.y,0],mat );
            twgl_js__WEBPACK_IMPORTED_MODULE_0__.m4.scale( mat, [this._scaleX,this._scaleY,1] ,mat );
            twgl_js__WEBPACK_IMPORTED_MODULE_0__.m4.rotateZ( mat,this._rotation * Math.PI / 180 ,mat );        
            // 여기서 다시 앵커만큼 이동해야 하는데
            // 이 처리는 vs에서 한다
            this._matrix = mat;
            this._matrixDirty = false;
        } 
        return this._matrix;
    }

    setDirty( v ) {
        if ( this.invalidateCallback && v ) {
            // _matrixDirty가 이번에 false에서 true가 될 때만 호출하는게 아니고
            // true에서 true가 될 때도 호출 한다.
            // 그래야 _boundsDirty가 제대로 처리 되기 때문
            this.invalidateCallback();
        }
        this._matrixDirty = this._matrixDirty || v;
    }

    /**
     *
     *
     * @returns {Transform} 
     * @memberof Transform
     */
    clone() {
        const newTransform = {};

        Object.assign( newTransform,this );
        Object.setPrototypeOf( newTransform,this.constructor.prototype );
        //@ts-ignore
        return newTransform;
    }
}




/***/ }),

/***/ "./engine/src/TrueTypeFont.js":
/*!************************************!*\
  !*** ./engine/src/TrueTypeFont.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TrueTypeFont": () => (/* binding */ TrueTypeFont)
/* harmony export */ });
/* harmony import */ var _Asset__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Asset */ "./engine/src/Asset.js");
/* harmony import */ var _FontBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FontBase */ "./engine/src/FontBase.js");
/* harmony import */ var _Utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Utils */ "./engine/src/Utils.js");





class TrueTypeFont extends _FontBase__WEBPACK_IMPORTED_MODULE_1__.FontBase {
    constructor( trueTypeFontName,referenceSize, styles ) {
        super( trueTypeFontName, referenceSize, styles );
        // TTF
        this.asset = new _Asset__WEBPACK_IMPORTED_MODULE_0__.Asset( trueTypeFontName,_Asset__WEBPACK_IMPORTED_MODULE_0__.Asset.AssetTypes.TrueTypeFont );
        this.asset.load( { 
            referenceSize: this.referenceSize, 
            styles:        this.styles 
        } );
        this.fontLoaded = false;
    }    

    measureTextWidth( str,size ) {
        super.measureTextWidth( str,size );

        const fontInfo = this.asset.fontInfo;

        let width = 0;

        for ( let i = 0; i < str.length; i++ ) {
            const char = str.charCodeAt( i );
            const charInfo = fontInfo.chars[char];

            if ( Array.isArray( charInfo ) ) {
                width += charInfo[0];
                if ( false ) {}   
            } else if ( charInfo != null ) {
                width += charInfo;
            }
            if ( i < str.length - 1 && fontInfo.kerningPairs ) {
            //마지막 글자가 아닌경우 kerning
                const charNext = str.charCodeAt( i + 1 );

                const kerning = fontInfo.kerningPairs[char + "," + charNext];

                if ( kerning ) {
                    width += kerning;
                }
            }
        }
        return width / fontInfo.unitsPerEm * ( size || this.referenceSize );
    }
}




/***/ }),

/***/ "./engine/src/Tween.js":
/*!*****************************!*\
  !*** ./engine/src/Tween.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Tween": () => (/* binding */ Tween)
/* harmony export */ });
/* harmony import */ var _Event__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Event */ "./engine/src/Event.js");
/* harmony import */ var _EventDispatcher__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EventDispatcher */ "./engine/src/EventDispatcher.js");
/* harmony import */ var _Sprite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Sprite */ "./engine/src/Sprite.js");
/* harmony import */ var _easing__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./easing */ "./engine/src/easing.js");
/* harmony import */ var _Stage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Stage */ "./engine/src/Stage.js");
/* harmony import */ var _Application__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Application */ "./engine/src/Application.js");







/**
 * @typedef Prop
 * @property {function|string=} ease
 * @property {boolean=} autoPlay
 * @property {boolean=} swapValues
 * @property {boolean=} reflect
 * @property {number=} delay
 * @property {number=} repeatCount
 * @property {boolean=} dispatchEvents
 * @property {number=} timeScale
 * @property {Tween=} nextTween
 */



/*
base on GTween for Gideros;
This code is MIT licensed, see http://www.opensource.org/licenses/mit-license.php;
Copyright (c) 2010 - 2011 Gideros Mobile;
Based on Tween 2.01 for ActionScript 3;
http://gskinner.com/libraries/GTween/
GTween 2.01 for ActionScript 3 is MIT licensed, see http://www.opensource.org/licenses/mit-license.php;
Copyright (c) 2009 Grant Skinner;
Notes:
* Documentation is derived from GTween 2.01's original documentation.
*/

/*
	* Tween is a light-weight instance oriented tween engine. This means that you instantiate tweens for specific purposes, && then reuse, update || discard them.
	* This is different than centralized tween engines where you "register" tweens with a global object. This provides a more familiar && useful interface;
	* for object oriented programmers.

	* Tween boasts a number of advanced features:
	* - frame && time based durations/positions which can be set per tween;
	* - simple sequenced tweens using .nextTween;
	* - pause && resume individual tweens || all tweens;
	* - jump directly to the } || beginning of a tween with :toEnd() || :toBeginning();
	* - jump to any arbitrary point in the tween with :setPosition();
	* - complete, init, && change callbacks;
	* - smart garbage collector interactions (prevents collection while active, allows collection if target is collected);
	* - easy to set up in a single line of code;
	* - can repeat || reflect a tween a specified number of times;
	* - deterministic, so setting a position on a tween will (almost) always result in predictable results;
*/

function hexToRgb( c ) {
    return [( c >> 16 ) / 255, ( ( c >> 8 ) & 0xff ) / 255, ( c & 0xff ) / 255];
}


const copyTickList = [];

class Tween extends _EventDispatcher__WEBPACK_IMPORTED_MODULE_1__.EventDispatcher {
    /**
     *Creates an instance of Tween.
     * @param {object} target
     * @param {number} duration
     * @param {object=} values
     * @param {string|function|Prop=} props
     * @memberof Tween
     */
    constructor( target, duration, values, props ) {
        super();
        this._delay = 0;
        this._paused = true;
        this._position = Number.NaN;
        this._isEnd = false;
        this.autoPlay = true;
        this.repeatCount = 1;
        this.timeScale = 1;
        this.ease = Tween.defaultEase;
        this.dispatchEvents = Tween.defaultDispatchEvents;
        this.target = target;
        this.duration = duration;
        this.reflect = undefined;
        this.nextTween = undefined;
        let swap = null;

        if ( typeof props == "function" || typeof props == "string" ) {
            //@ts-ignore
            props = { ease: props };
        }

        if ( props != null ) {
            //@ts-ignore
            swap = props.swapValues;
            //@ts-ignore
            props.swapValues = null;
            Object.assign( this, props );
        }

        if ( typeof this.ease == "string" ) {
            this.ease = _easing__WEBPACK_IMPORTED_MODULE_3__.easing[this.ease];
        }

        console.assert( this.ease != null );
        this.resetValues( values );

        if ( swap ) {
            this.swapValues();
        }

        if ( this.duration == 0 && this.getDelay() == 0 && this.autoPlay ) {
            this.calculatedPosition = null;
            this.setPosition( 0 );
        }

        if ( !Tween.active ) {
            _Application__WEBPACK_IMPORTED_MODULE_5__.application.stage.addEventListener( _Event__WEBPACK_IMPORTED_MODULE_0__.Event.ENTER_FRAME, Tween.onTick );
            Tween.active = true;
        }
    }

    /*
		* Plays or pauses a tween. You can still change the position value externally on a paused;
		* tween, but it will !be updated automatically. While paused is false, the tween is also prevented;
		* from being garbage collected while it is active.
		* This is achieved in one of two ways:
		* 1. If the target object derives from EventDispatcher, then the tween will subscribe to a dummy event using a hard reference. This allows;
		* the tween to be garbage collected if its target is also collected, && there are no other external references to it.
		* 2. If the target object is !an EventDispatcher, then the tween is placed in a global list, to prevent collection until it is paused || completes.
		* Note that pausing all tweens via the Tween.pauseAll static property will !free the tweens for collection.
	*/
    /**
     *
     *
     * @returns {boolean}
     * @memberof Tween
     */
    isPaused() {
        return this._paused;
    }


    isEnd() {
        return this._isEnd;
    }

    stop() {
        this.setPaused( true );
    }

    /**
     *
     *
     * @param {boolean} value
     * @memberof Tween
     */
    setPaused( value ) {
        if ( value == this._paused ) {
            return;
        }

        this._paused = value;

        if ( this._paused ) {
            Tween.activeTweenList.delete( this );
        } else {
            if ( Number.isNaN( this._position ) || ( this.repeatCount != 0 && this._position >= this.repeatCount * this.duration ) ) {
                // reached the end, reset.
                this._inited = false;
                this.calculatedPosition = 0;
                this.calculatedPositionOld = 0;
                this.ratio = 0;
                this.ratioOld = 0;
                this.positionOld = 0;
                this._position = -this.getDelay();
            }

            Tween.activeTweenList.set( this,true );
        }
    }

    stopAll() {
        for ( const [tween] of Tween.activeTweenList ) {
            tween.stop();
        }
    }


    /*
		* Gets && sets the position of the tween in frames || seconds (depending on .useFrames). This value will;
		* be constrained between -delay && repeatCount*duration. It will be resolved to a .calculatedPosition before;
		* being applied.
		*
		* Negative values:
		* Values below 0 will always resolve to a calculatedPosition of 0. Negative values can be used to set up a delay on the tween, as the tween will have to count up to 0 before initing.
		*
		* Positive values:
		* Positive values are resolved based on the duration, repeatCount, && reflect properties.
	*/
    getPosition() {
        return this._position;
    }

    /**
     *
     *
     * @param {number} pos
     * @returns {Tween}
     * @memberof Tween
     */
    setPosition( pos ) {
        this.positionOld = this._position;
        this.ratioOld = this.ratio;
        this.calculatedPositionOld = this.calculatedPosition;
        const maxPosition = this.repeatCount * this.duration;
        const isEnd = pos >= maxPosition && this.repeatCount > 0;

        if ( isEnd ) {
            if ( this.calculatedPositionOld == maxPosition ) {
                return;
            }

            this._position = maxPosition;
            this.calculatedPosition = ( this.reflect && ( this.repeatCount % 2 == 0 ) ) && 0 || this.duration;
        } else {
            this._position = pos;
            this.calculatedPosition = ( this._position < 0 ) ? 0 : ( this._position % this.duration );

            if ( this.reflect && Math.floor( this.getPosition() / this.duration ) % 2 != 0 ) {
                this.calculatedPosition = this.duration - this.calculatedPosition;
            }
        }

        this.ratio = ( this.duration == 0 && this._position >= 0 ) ? 1 : this.ease( this.calculatedPosition / this.duration, 0, 1, 1 );

        if ( this.target && ( this._position >= 0 || this.positionOld >= 0 ) && this.calculatedPosition != this.calculatedPositionOld ) {
            if ( !this._inited ) {
                this.init();
            }

            for ( const n in this._endValues ) {
                let initVal, rangeVal, val;

                if ( n == "color" ) {
                    // 컬러는 쪼개서 트윈해야한다
                    initVal = this._initValues[n];
                    rangeVal = this._rangeValues[n];
                    const val1  = initVal[0] + rangeVal[0] * this.ratio;
                    const val2  = initVal[1] + rangeVal[1] * this.ratio;
                    const val3  = initVal[2] + rangeVal[2] * this.ratio;

                    this.target.setColorMultiplier( val1, val2, val3 );
                } else {
                    initVal = this._initValues[n];
                    rangeVal = this._rangeValues[n];
                    val = initVal + rangeVal * this.ratio;
                    console.assert( this.target[n] != null );
                    this.target[n] = val;
                }
            }
        }

        if ( this.dispatchEvents ) {
            this.dispatchEvent( "change" );
        }

        if ( isEnd ) {
            this._isEnd = true;
            this.setPaused( true );

            if ( this.nextTween ) {
                this.nextTween.setPaused( false );
            }

            if ( this.dispatchEvents ) {
                this.dispatchEvent( "complete" );
            }
        }

        return this;
    }


    /*
		* The length of the delay in frames || seconds (depending on .useFrames).
		* The delay occurs before a tween reads initial values || starts playing.
	*/
    /**
     *
     *
     * @returns {number}
     * @memberof Tween
     */
    getDelay() {
        return this._delay;
    }

    /**
     *
     *
     * @param {number} value
     * @returns {Tween}
     * @memberof Tween
     */
    setDelay( value ) {
        if ( this._position <= 0 ) {
            this._position = -value;
        }

        this._delay = value;

        return this;
    }


    /*
		* Sets the numeric end value for a property on the target object that you would like to tween.
		* For example, if you wanted to tween to a new x position, you could use: myTween.setValue("x",400).
		*
		* name: The name of the property to tween.
		* value: The numeric end value (the value to tween to).
	*/
    /**
     *
     *
     * @param {string} name
     * @param {*} value
     * @returns {Tween}
     * @memberof Tween
     */
    setValue( name, value ) {
        this._endValues[name] = value;
        this.invalidate();

        return this;
    }

    /*
		* Returns the end value for the specified property if one exists.
		*
		* name: The name of the property to return a } value for.
	*/
    getValue( name ) {
        return this._endValues[name];
    }

    /*
		* Removes a end value from the tween. This prevents the Tween instance from tweening the property.
		*
		* name: The name of the end property to delete.
	*/
    deleteValue( name ) {
        this._rangeValues[name] = null;
        this._initValues[name] = null;
        const result = this._endValues[name] != null;

        this._endValues[name] = null;

        return result;
    }


    /*
		* Shorthand method for making multiple setProperty calls quickly.
		* This adds the specified properties to the values list.
		* 
		* Example: set x and y end values:
		* myTween.setEndValues({x:200, y:400});
		*
		* properties: An object containing end property values.
	*/
    /**
     *
     *
     * @param {object} values
     * @returns {Tween}
     * @memberof Tween
     */
    setValues( values ) {
        Object.assign( this._endValues, values );
        this.invalidate();

        return this;
    }

    /*
		* Similar to .setEndValues(), but clears all previous end values;
		* before setting the new ones.
		*
		* properties: An object containing end property values.
	*/
    /**
     *
     *
     * @param {*} values
     * @returns {Tween}
     * @memberof Tween
     */
    resetValues( values ) {
        this._endValues = {};
        this.setValues( values );

        return this;
    }

    /*
		* Returns the table of all end properties && their values. This is a copy of values, so modifying;
		* the returned object will not affect the tween.
	*/
    /**
     *
     *
     * @returns {object}
     * @memberof Tween
     */
    getValues() {
        return Object.assign( {}, this._endValues );
    }

    /*
		* Returns the initial value for the specified property.
		* Note that the value will not be available until the tween inits.
	*/
    /**
     *
     *
     * @param {string} name
     * @returns {*}
     * @memberof Tween
     */
    getInitValue( name ) {
        return this._initValues[name];
    }

    /*
		* Swaps the init && } values for the tween, effectively reversing it.
		* This should generally only be called before the tween starts playing.
		* This will force the tween to init if it hasn't already done so, which;
		* may result in an onInit call.
		* It will also force a render (so the target immediately jumps to the new values;
		* immediately) which will result in the onChange callback being called.
		* 
		* You can also use the special "swapValues" property on the props parameter of;
		* the Tween constructor to call :swapValues() after the values are set.
		* 
		* The following example would tween the target from 100,100 to its current position:
		* new Tween(ball, 2, {x=100, y=100}, {swapValues=true});
	*/
    swapValues() {
        if ( !this._inited ) {
            this.init();
        }

        const o = this._endValues;

        this._endValues = this._initValues;
        this._initValues = o;

        for ( const n in this._rangeValues ) {
            const v = this._rangeValues[n];

            this._rangeValues[n] = -v;
        }

        this.calculatedPosition = null;

        if ( this._position < 0 ) {
            const pos = this.positionOld;

            this.setPosition( 0 );
            this._position = this.positionOld;
            this.positionOld = pos;
        } else {
            this.setPosition( this._position );
        }
    }

    /*
		* Reads all of the initial values from target && calls the onInit callback.
		* This is called automatically when a tween becomes active (finishes delaying);
		* && when :swapValues() is called. It would rarely be used directly;
		* but is exposed for possible use by power users.
	*/
    init() {
        this._inited = true;
        this._initValues = {};
        this._rangeValues = {};

        for ( const key in this._endValues ) {
            if ( key == "color" ) {
                // hex로 들어온 값을 r, g, b 값으로 나눠서 저장한다
                this._initValues[key] = hexToRgb( this.target.colorMultiplier );
                let value;

                value = hexToRgb( this._endValues[key] );
                this._rangeValues[key] = [
                    value[0] - parseFloat( this._initValues[key][0] ),
                    value[1] - parseFloat( this._initValues[key][1] ),
                    value[2] - parseFloat( this._initValues[key][2] )
                ];
            } else {
                //나머지 원본으로
                console.assert( this.target[key] != null, `트윈으로 조작하려는 값이 null이다.` );
                this._initValues[key] = this.target[key];
                this._rangeValues[key] = this._endValues[key] - this._initValues[key];
            }
        }

        if ( this.dispatchEvents ) {
            this.dispatchEvent( "init" );
        }
    }

    /*
		* Jumps the tween to its beginning && pauses it. This is the same as calling .setPosition(0) and .setPaused(true).
	*/
    toStart() {
        this.setPosition( 0 );
        //this.setPaused(true);
    }

    cancel() {
        this.setPosition( 0 );
        this.stop();
    }

    /*
		* Jumps the tween to its end and pauses it. This is roughly the same as calling .setPosition(repeatCount*duration).
	*/
    toEnd() {
        this.setPosition( ( this.repeatCount > 0 ) && this.repeatCount * this.duration || this.duration );
    }

    invalidate() {
        this._inited = false;

        if ( this._position > 0 ) {
            this._position = 0;
        }

        if ( this.autoPlay ) {
            this.setPaused( false );
        }
    }


    /**
     *
     *
     * @returns {Tween}
     * @memberof Tween
     */
    onCompleteRemoveFromParent() {
        this.addEventListener( "complete",
                               () => {
                                   this.target.removeFromParent();
                                   this.target = null;
                               },this );

        return this;
    }

    /**
     *
     *
     * @param {function} func
     * @param {any=} data
     * @returns {Tween}
     * @memberof Tween
     */
    onComplete( func,data ) {
        this.addEventListener( "complete",func,data );

        return this;
    }

    /**
     *
     *
     * @param {function} func
     * @param {any=} data
     * @returns {Tween}
     * @memberof Tween
     */
    onChange( func,data ) {
        this.addEventListener( "change",func,data );

        return this;
    }

    /**
     *
     *
     * @param {Tween} tween
     * @returns {Tween}
     * @memberof Tween
     */
    setNextTween( tween ) {
        this.nextTween = tween;

        return this;
    }

    /**
     *
     *
     * @param {number} duration
     * @param {object} values
     * @param {string|function|Prop=} props
     * @returns {Tween}
     * @memberof Tween
     */
    tween( duration, values, props ) {
        const newTween = new Tween( this.target, duration, values, props );

        if ( !this.isEnd() ) {
            newTween.setPaused( true );
            this.setNextTween( newTween );
        }

        return newTween;
    }

    /**
     *
     *
     * @param {number} x
     * @param {number} y
     * @param {number} [duration = 0]
     * @param {string|function|Prop=} props
     * @returns {Tween}
     * @memberof Tween
     */
    move( x, y, duration = 0, props ) {
        const newTween = new Tween( this.target, duration, { x: x, y: y }, props );

        if ( !this.isEnd() ) {
            newTween.setPaused( true );
            this.setNextTween( newTween );
        }

        return newTween;
    }

    /**
     *
     *
     * @param {number} [duration=0]
     * @param {function=} func
     * @param {object=} context
     * @returns {Tween}
     * @memberof Tween
     */
    wait( duration = 0, func, context ) {
        const newTween = new Tween( this.target, duration );

        if ( func ) {
            this.onComplete( func, context );
        }

        if ( !this.isEnd() ) {
            newTween.setPaused( true );
            this.setNextTween( newTween );
        }

        return newTween;
    }

    stopTweenChain() {
        Tween.stopTarget( this.target );
    }


    static linearEase( a, b, c, d ) {
        return a;
    }

    static onTick() {
        if ( Tween.pauseAll ) {
            return;
        }

        const dt = 1 / 60 * Tween.timeScaleAll * 1000;

        for ( const [tween] of Tween.activeTweenList ) {
            copyTickList.push( tween );
        }

        for ( let i = 0; i < copyTickList.length; i++ ) {
            const tween = copyTickList[i];

            tween.setPosition( tween._position + ( tween.useFrames && Tween.timeScaleAll || dt ) * tween.timeScale );
        }

        if ( copyTickList.length == 0 ) {
            _Application__WEBPACK_IMPORTED_MODULE_5__.application.stage.removeEventListener( _Event__WEBPACK_IMPORTED_MODULE_0__.Event.ENTER_FRAME, Tween.onTick );
            Tween.active = null;
        }

        copyTickList.length = 0;
    }

    // 타겟에 걸린 트윈 모두 정지
    static stopTarget( target ) {
        for ( const [tween] of Tween.activeTweenList ) {
            if ( tween.target == target ) {
                tween.stop();
            }
        }
    }

    /*
	* Constructs a new Tween instance.
	*
	* target: The object whose properties will be tweened.
	* duration: The length of the tween in frames || seconds depending on the timingMode.
	* values: An object containing } property values. For example, to tween to x=100, y=100, you could pass {x=100, y=100} as the values object.
	* props: An object containing properties to set on this tween. For example, you could pass {ease=myEase} to set the ease property of the new instance. It also supports a single special property "swapValues" that will cause :swapValues() to be called after the values specified in the values parameter are set.
    */
}

/*

트윈을 연결해서 애니메이션을 만들 수 있도록 하기 위해서 작성
Sprite 파일에 함수를 정의하면 상호참조 때문에 안됨
spr.move(10,10,100).move(100,50,200)...

*/

_EventDispatcher__WEBPACK_IMPORTED_MODULE_1__.EventDispatcher.prototype.tween = function ( duration, values, props ) {
    return new Tween( this, duration, values, props );
};

_EventDispatcher__WEBPACK_IMPORTED_MODULE_1__.EventDispatcher.prototype.move = function ( x, y, duration = 0, props ) {
    return new Tween( this, duration, { x: x, y: y }, props );
};

_EventDispatcher__WEBPACK_IMPORTED_MODULE_1__.EventDispatcher.prototype.wait = function ( duration = 0, func, context ) {
    return new Tween( this, duration ).onComplete( func,context );
};

_EventDispatcher__WEBPACK_IMPORTED_MODULE_1__.EventDispatcher.prototype.getTweens = function ( playingOnly ) {
    const tweens = [];

    for ( const [tween] of Tween.activeTweenList ) {
        if ( tween.target == this ) {
            if ( !playingOnly || tween.paused ) {
                tweens.push( tween );
            }
        }
    }

    return tweens.length > 0 ? tweens : null;
};

_EventDispatcher__WEBPACK_IMPORTED_MODULE_1__.EventDispatcher.prototype.stopAllTweens = function () {
    Tween.stopTarget( this );
};

Tween.active = false;
Tween.defaultDispatchEvents = true;
Tween.defaultEase = Tween.linearEase;
Tween.pauseAll = false;
Tween.timeScaleAll = 1;
Tween.activeTweenList = new Map();




/***/ }),

/***/ "./engine/src/Types.js":
/*!*****************************!*\
  !*** ./engine/src/Types.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Rect": () => (/* binding */ Rect),
/* harmony export */   "Point": () => (/* binding */ Point),
/* harmony export */   "TypedArrayHelper": () => (/* binding */ TypedArrayHelper)
/* harmony export */ });

function getRectLike( r ) {
    if ( Array.isArray( r ) || r instanceof Float32Array ) {
        return { x: r[0],y: r[1], width: r[2],height: r[3] };
    } else {
        return r;
    }
}

function getPointLike( p ) {
    if ( Array.isArray( p ) || p instanceof Float32Array ) {
        return { x: p[0],y: p[1] };
    } else {
        return p;
    }
}


class Rect {
    /**
     * Creates an instance of Rect.
     * @param {[number,number,number,number]|Float32Array|number|Rect=} x
     * @param {number=} y
     * @param {number=} width
     * @param {number=} height
     * @memberof Rect
     */
    constructor( x,y,width,height ) {
        if ( Array.isArray( x ) || x instanceof Float32Array ) {
            this.x  = x[0];
            this.y = x[1];
            this.width = x[2];
            this.height = x[3];
        } else if ( typeof x === "object" ) {
            this.x = x.x;
            this.y = x.y;
            this.width = x.width;
            this.height = x.height;
        } else {
            this.x = x || 0;
            this.y = y || 0;
            this.width = width || 0;
            this.height = height || 0;
        }
    }

    /**
     *
     *
     * @returns {Rect}
     * @memberof Rect
     */
    clone() {
        return new Rect( this );    
    }


    getCornerPoints() {
        const { x,y,width,height } = this;

        return [x,y,x + width,y,x,y + height,x + width,y + height];
    }

    getArray() {
        return [this.x,this.y,this.width,this.height];
    }

    extendPoint( x,y ) {
        if ( this.x == null ) {
            this.x = x;
            this.y = y;
            this.width = 0;
            this.height = 0;
        } else {
            if ( x < this.x ) {
                this.width += this.x - x;
                this.x = x;
            }
            if ( y < this.y ) {
                this.height += this.y - y;
                this.y = y;
            }
            this.width = Math.max( this.right,x ) - this.x;
            this.height = Math.max( this.bottom,y ) - this.y;
        }
    }

    extendRect( r ) {
        this.extendPoint( r.x,r.y );
        this.extendPoint( r.right,r.y );
        this.extendPoint( r.x,r.bottom );
        this.extendPoint( r.right,r.bottom );
    }

    get xywh() {
        return [this.x,this.y,this.width,this.height];
    }

    set xywh( r ) {
        const r2 = getRectLike( r );

        this.x = r2.x;
        this.y = r2.y;
        this.width = r2.width;
        this.height = r2.height;
    }

    get left() { return this.x; }

    get right() { return this.x + this.width; }

    get top() { return this.y; }

    get bottom() { return this.y + this.height; }

    contains( x,y ) {
        return ( x >= this.left && x < this.right && y >= this.top && y < this.bottom );
    }
}


class Point {
    /**
     * Creates an instance of Point.
     * @param {[number,number]|Float32Array|number|Point=} x
     * @param {number=} y
     * @memberof Point
     */
    constructor( x,y ) {
        if ( Array.isArray( x ) || x instanceof Float32Array ) {
            this.x = x[0];
            this.y = x[1];
        } else if ( typeof x === "object" ) {
            this.x = x.x;
            this.y = x.y;
        } else {
            this.x = x || 0;
            this.y = y || 0;
        }
    }

    /**
     *
     *
     * @returns {Point}
     * @memberof Point
     */
    clone() {
        return new Point( this );    
    }

    getArray() {
        return [this.x,this.y];
    }

    get xy() {
        return [this.x,this.y];
    }

    set xy( p ) {
        const p2 = getPointLike( p );

        this.x = p2.x;
        this.y = p2.y;
    }

    /**
     * Point를 더한다.
     *
     * @param {Point|number} p
     * @returns {Point}
     * @memberof Point
     */
    add( p ) {
        const p2 = getPointLike( p );

        this.x += p2.x;
        this.y += p2.y;
        return new Point( this );
    }

    /**
     * Point를 뺀다.
     *
     * @param {Point|number} p
     * @returns {Point}
     * @memberof Point
     */
    subtract( p ) {
        const p2 = getPointLike( p );

        this.x -= p2.x;
        this.y -= p2.y;
        return new Point( this );
    }

    /**
     *
     *
     * @param {Point|number} p
     * @returns {Point}
     * @memberof Point
     */
    mul( p ) {
        const p2 = getPointLike( p );

        this.x *= p2.x;
        this.y *= p2.y;
        return new Point( this );
    }
}


class TypedArrayHelper {
    /**
     *
     *
     * @static
     * @param {Uint8Array} uint8Arr
     * @param {number} begin
     * @param {number=} length
     * @returns {Float32Array} 
     * @memberof TypedArrayHelper
     */
    static Uint8ToFloat32( uint8Arr,begin = 0,length = null ) {
        return new Float32Array( uint8Arr.buffer,uint8Arr.byteOffset + begin,( length != null ) ? Math.ceil( length / 4 ) : null );
    }

    /**
     *
     *
     * @static
     * @param {Uint16Array} uint16Arr
     * @param {number} begin
     * @param {number=} length
     * @returns {Float32Array} 
     * @memberof TypedArrayHelper
     */
    static Uint16ToFloat32( uint16Arr,begin = 0,length = null ) {
        return new Float32Array( uint16Arr.buffer,uint16Arr.byteOffset + begin * 2,length != null ? Math.ceil( length / 2 ) : null );
    }

    /**
     *
     *
     * @static
     * @param {Float32Array} float32Arr
     * @param {number} begin
     * @param {number=} length
     * @returns {Uint8Array} 
     * @memberof TypedArrayHelper
     */
    static Float32ToUint8( float32Arr,begin = 0,length = null ) {
        return new Uint8Array( float32Arr.buffer,float32Arr.byteOffset + begin * 4,length != null ? length * 4 : null );
    }

    /**
     *
     *
     * @static
     * @param {Float32Array} float32Arr
     * @param {number} begin
     * @param {number=} length
     * @returns {Uint16Array} 
     * @memberof TypedArrayHelper
     */
    static Float32ToUint16( float32Arr,begin = 0,length = null ) {
        return new Uint16Array( float32Arr.buffer,float32Arr.byteOffset + begin * 4,length != null ? length * 2 : null );
    }

    /**
     *
     *
     * @static
     * @param {Float32Array|Uint16Array|Uint8Array} typedArr
     * @param {number} begin
     * @param {number=} length
     * @returns {*} 
     * @memberof TypedArrayHelper
     */
    static subarray( typedArr,begin = 0,length = null ) {        
        return typedArr.subarray( begin, length != null ? begin + length : null );
    }

    /**
     *
     *
     * @static
     * @param {Float32Array|Uint16Array|Uint8Array} typedArr
     * @param {number} newSize
     * @returns {Float32Array|Uint16Array|Uint8Array}
     * @memberof TypedArrayHelper
     */
    static resize( typedArr, newSize ) {
        //@ts-ignore
        const newArr = new ( typedArr.constructor )( newSize );

        newArr.set( typedArr,0,Math.min( newSize,typedArr.length ) );
        return newArr;
    }

    static memcpy( dst,dstOffset,src,srcOffset,srcLength ) {
        // webpack polyfill 을 사용하는 코드
        // const elementSize = dst.constructor.BYTES_PER_ELEMENT;

        // dstOffset = dst.byteOffset + dstOffset * elementSize;
        // srcOffset = src.byteOffset + srcOffset * elementSize;
        // srcLength *= elementSize;

        // Buffer.from( src.buffer, srcOffset,srcLength ).copy( Buffer.from( dst.buffer, dstOffset, srcLength ) );

        if ( srcLength < 100 ) {
            const dst2 = dst.subarray( dstOffset );
            const src2 = src.subarray( srcOffset );

            for ( let i = 0; i < srcLength; i++ ) {
                dst2[i] = src2[i];
            }
        } else {
            const byteLength = srcLength * src.BYTES_PER_ELEMENT;
            const u8dst = new Uint8Array( dst.buffer,dst.byteOffset + dstOffset * dst.BYTES_PER_ELEMENT );
            const u8src = new Uint8Array( src.buffer,src.byteOffset + srcOffset * src.BYTES_PER_ELEMENT,byteLength );

            u8dst.set( u8src );
        }
    }    
}


/***/ }),

/***/ "./engine/src/Utils.js":
/*!*****************************!*\
  !*** ./engine/src/Utils.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Utils": () => (/* binding */ Utils)
/* harmony export */ });



class AsyncValue {
    constructor() {
        this.value = undefined;
        this.promise = new Promise( ( resolve,reject ) => {
            this._resolve = resolve;
            this._reject = reject;
        } );
    }

    resolve( v ) {
        this.value = v;
        this._resolve( v );
        delete this.promise;
        delete this._resolve;
        delete this._reject;
    }

    reject( e ) {
        this._reject( e );
        delete this.promise;
        delete this._resolve;
        delete this._reject;
    }
}

const Utils = {

    AsyncValue,
    /**
     * Ctrl-shift-H
     * Alt-R 상태로 다음 조건 변환하여 일괄 삭제할 수 있다
     * Utils\.nullReplace\(([^,]+)\s*,\s*([^)]+)\)
     * $1 != null ? $1 : $2
     * 
     * @param {*} target
     * @param {*} value
     * @returns {*}
     * @memberof Utils
     */
    nullReplace( target, value ) {
        return target != null ? target : value;
    },

    /**
     *
     *
     * @param {number=} a
     * @param {number=} b
     * @returns {number}
     * @memberof Utils
     */
    random( a, b ) {
        console.assert( ( a == null && b == null ) || ( a != null && b != null ), `random(${a},${b}) 구문은 허용되지 않음. random(1,a) 혹은 random(0,a)를 명확히 쓸 것` );

        if ( b == null ) {
            // [1,i]
            return Math.floor( Math.random() * a + 1 );
        } else if ( a == null ) {
            return Math.random();
        } else {
            // [i,j]
            return Math.floor( Math.random() * ( b - a + 1 ) + a );
        }
    },

    /**
     *
     *
     * @param {number|string} a
     * @param {number} b
     * @returns {number}
     * @memberof Utils
     */
    precision( a, b ) {
        //@ts-ignore
        return parseFloat( a ).toPrecision( b );
    },

    /**
     *
     *
     * @param {number} a
     * @param {number} b
     * @returns {number}
     * @memberof Utils
     */
    idiv( a, b ) {
        // 음수에 대해서 바르게 처리함
        return a / b >> 0;
    },

    /**
     *
     *
     * @param {number} v0
     * @param {number} v1
     * @param {number} a
     * @returns {number}
     * @memberof Utils
     */
    lerp( v0, v1, a ) {
        return v0 + ( v1 - v0 ) * a;
    },

    /**
     *
     *
     * @param {number} v
     * @param {number} min
     * @param {number} max
     * @returns {number}
     * @memberof Utils
     */
    clamp( v, min, max ) {
        return Math.min( Math.max( v, min ), max );
    },

    /**
     *
     *
     * @param {number} x1
     * @param {number} y1
     * @param {number} x2
     * @param {number} y2
     * @returns {number}
     * @memberof Utils
     */
    distance( x1, y1, x2, y2 ) {
        return Math.sqrt( ( x2 - x1 ) * ( x2 - x1 ) + ( y2 - y1 ) * ( y2 - y1 ) );
    },

    /**
     *
     *
     * @param {number} a
     * @returns {number}
     * @memberof Utils
     */
    frac( a ) {
        return a % 1;
    },

    legacy( msg = "" ) {
        // console.log( `♨ Legacy API ${msg}` );
    },

    notImplements( msg = "" ) {
        // console.log( `♨ Not Implemented. ${msg}` );
    },

    /**
     *
     *
     * @param {string} filename
     * @returns {string}
     * @memberof Utils
     */
    getEmbeddedFile( filename ) {
        console.assert( self._embeddedFiles[filename.toLowerCase()] != null );

        return self._embeddedFiles[filename];
    },

    /**
     *
     *
     * @param {string} filename
     * @returns {Uint8Array}
     * @memberof Utils
     */
    getEmbeddedBinaryFile( filename ) {
        console.assert( self._embeddedFiles[filename.toLowerCase()] != null );
        const base64Data = self._embeddedFiles[filename.toLowerCase()];
        const lookupTable = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';
        const arr = [];

        for ( let i = 0; i < base64Data.length; ) {
            const d = lookupTable.indexOf( base64Data.charAt( i++ ) );
            const e = lookupTable.indexOf( base64Data.charAt( i++ ) );
            const f = lookupTable.indexOf( base64Data.charAt( i++ ) );
            const g = lookupTable.indexOf( base64Data.charAt( i++ ) );
            const a = ( d << 2 ) | ( e >> 4 );
            const b = ( ( e & 15 ) << 4 ) | ( f >> 2 );
            const c = ( ( f & 3 ) << 6 ) | g;

            arr.push( a );
            if ( f != 64 ) arr.push( b );
            if ( g != 64 ) arr.push( c );
        }
        return new Uint8Array( arr );
    },

    embeddedFileExist( filename ) {
        return self._embeddedFiles[filename] != null;
    },

    /**
     *
     *
     * @param {string} filename
     * @returns {XMLDocument}
     * @memberof Utils
     */
    getEmbeddedXmlFile( filename ) {
        // @ts-ignore
        const xml = ( new window.DOMParser() ).parseFromString( Utils.getEmbeddedFile( filename ), "text/xml" );

        return xml;
    },

    /**
     * @typedef {object} Size
     * @property {number} width
     * @property {number} height
     *
     * @param {string} filename
     * @returns {Size}
     * @memberof Utils
     */
    getImageSize( filename ) {
        const imageInfo = self._imageSizes[filename.toLowerCase()];

        if ( imageInfo ) {
            return imageInfo;
        } else {
            return { width: 0,height: 0 };
        }
    },

    /**
     * 문자열에서 <tag> </tag> 형태를 추출한다
     *
     * @static
     * @param {string} str
     * @returns {*}
     * @memberof TextField
     */
    splitStringWithTag( str ) {
        const tagRegExp = /<([^>]+)>/g;
        const tagStack = ["default"];
        const resultArr = [];

        let lastIndex = 0;

        while ( true ) {
            const result = tagRegExp.exec( str );
            const lastTag = tagStack[tagStack.length - 1]; 

            if ( result == null ) {
                // 태그 못찾음
                if ( lastIndex < str.length ) {
                    resultArr.push( [lastTag,str.substring( lastIndex )] );
                }
                return resultArr;
            } else {
                const tagName = result[1];
                const tagIndex = result.index;

                if ( tagName[0] != '/' ) {
                    tagStack.push( tagName );
                } else if ( lastTag == tagName.substring( 1 ) ) {
                    tagStack.length--;
                } 
                if ( lastIndex != tagIndex ) {
                    resultArr.push( [lastTag,str.substring( lastIndex,tagIndex )] );
                }
                lastIndex = tagRegExp.lastIndex;
            }
        }
    },



    /**
     * [r,g,b,a] 가 담긴 어레이를 반환한다. r,g,b는 0~1.0의 값이다.
     *
     * @param {number} c
     * @param {number=} a
     * @returns {[number,number,number,number]}
     * @memberof Utils
     */
    hex2rgba( c,a ) {
        const result = [];

        // b,g,r,a 순서
        result[0] = ( ( c & 0xff0000 ) >> 16 ) / 255;
        result[1] = ( ( c & 0xff00 ) >> 8 ) / 255;
        result[2] = ( c & 0xff ) / 255;
        if ( a != null ) {
            result[3] = a;
        } else {
            result[3] = ( ( c & 0xff000000 ) >> 24 ) / 255;
        }
        //@ts-ignore
        return result;
    },

    rgba2hex( arr, i ) {
        const idx = i || 0;

        return ( ( arr[idx] * 255 ) << 16 ) | ( ( arr[idx + 1] * 255 ) << 8 ) | ( arr[idx + 2] * 255 ) | ( ( arr[idx + 3] * 255 ) << 24 );
    },


    /**
     *
     *
     * @param {number} angle
     * @returns {number}
     * @memberof Utils
     */
    angleToDir( angle ) {
        let dir;

        if ( -135 < angle && angle <= -45 ) {
            dir = 1;
        } else if ( -45 < angle && angle <= 45 ) {
            dir = 2;
        } else if ( 45 < angle && angle <= 135 ) {
            dir = 3;
        } else {
            dir = 4;
        }

        return dir;
    },

    /**
     *
     *
     * @param {number} dir
     * @returns {[number,number]}
     * @memberof Utils
     */
    dirToOffset( dir ) {
        let ax, ay;

        if ( dir == 1 ) {
            [ax, ay] = [0, -1];
        } else if ( dir == 2 ) {
            [ax, ay] = [1, 0];
        } else if ( dir == 3 ) {
            [ax, ay] = [0, 1];
        } else if ( dir == 4 ) {
            [ax, ay] = [-1, 0];
        }

        return [ax, ay];
    },



    filterAttrib( attrib, whiteList, blackList ) {
        // 성공하면 true
        const whiteListStr = whiteList != null ? ( Array.isArray( whiteList ) ? "," + whiteList.join( "," ) + "," : "," + whiteList + "," ) : ",*,";
        const blackListStr = blackList != null ? ( Array.isArray( blackList ) ? "," + blackList.join( "," ) + "," : "," + blackList + "," ) : "";
        const attribs = attrib != null ? ( Array.isArray( attrib ) ? attrib : attrib.split( "," ) ) : [];


        let whitePass;

        if ( blackListStr.indexOf( ",*," ) >= 0 ) {
            // black이 * 면 그냥 실패
            return false;
        } else if ( whiteListStr.indexOf( ",*," ) >= 0 ) {
            //white가 * 면 그냥 통과
            whitePass = true;
        } else if ( attribs.length > 0 ) {
            for ( const v of attribs ) {
                if ( whiteListStr.indexOf( "," + v + "," ) >= 0 ) {
                    //화이트에서 하나라도 있으면 통과
                    whitePass = true;
                    break;
                }
            }
        } else {
            //어트리뷰트가 하나도 주어지지 않았을 경우 실패
            return false;
        }

        if ( whitePass ) {
            for ( const v of attribs ) {
                if ( blackListStr.indexOf( "," + v + "," ) >= 0 ) {
                    //블랙에서 하나라도 있으면 최종 실패
                    return false;
                }
            }

            return true;
        }

        return false;
    },


    format( text, ...args ) {
        let s;

        if ( args.length > 0 ) {
            // %s %d
            // %0 %1 %2 %3 %4...
            let count = 0;

            s = text.replace( /%[s|d]/g, function ( s ) {
                return `%${count++}`;
            } );

            for ( let i = 0; i < args.length; i++ ) {
                s = s.replace( `%${i}`, args[i] );
            }
        } else s = text;

        return s;
    },

    isNode() {
        return ( typeof {"env": {}} == "object" && typeof {"env": {}}.versions == "object" && typeof {"env": {}}.versions.node != "undefined" );
    },

    isWebWorker() {
        //@ts-ignore
        return !this.isNode() 
            && ( typeof WorkerGlobalScope !== "undefined" ) 
            && ( typeof importScripts === "function" ) 
            // eslint-disable-next-line no-undef
            && ( navigator instanceof WorkerNavigator );
    },

    clearObject( obj ) {
        const props = Object.keys( obj );

        for ( let i = 0,n = props.length; i < n; i++ ) {
            delete obj[props[i]];
        }
    }

};


/***/ }),

/***/ "./engine/src/easing.js":
/*!******************************!*\
  !*** ./engine/src/easing.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "easing": () => (/* binding */ easing)
/* harmony export */ });
/*
Easing functions adapted from Robert Penner's AS3 tweening equations.
*/

const easing = {};

const backS = 1.70158;

easing.inBack = function ( t ) {
    return t * t * ( ( backS + 1 ) * t - backS );
};

easing.outBack = function ( t ) {
    t = t - 1;

    return t * t * ( ( backS + 1 ) * t + backS ) + 1;
};

easing.inOutBack = function ( t ) {
    t = t * 2;

    if ( t < 1 ) return 0.5 * ( t * t * ( ( backS * 1.525 + 1 ) * t - backS * 1.525 ) );
    else {
        t = t - 2;

        return 0.5 * ( t * t * ( ( backS * 1.525 + 1 ) * t + backS * 1.525 ) + 2 );
    }
};

easing.inBounce = function ( t ) {
    return 1 - easing.outBounce( 1 - t );
};

easing.outBounce = function ( t ) {
    if ( t < 1 / 2.75 ) {
        return 7.5625 * t * t;
    } else if ( t < 2 / 2.75 ) {
        t = t - 1.5 / 2.75;

        return 7.5625 * t * t + 0.75;
    } else if ( t < 2.5 / 2.75 ) {
        t = t - 2.25 / 2.75;

        return 7.5625 * t * t + 0.9375;
    } else {
        t = t - 2.625 / 2.75;

        return 7.5625 * t * t + 0.984375;
    }
};

easing.inOutBounce = function ( t ) {
    t = t * 2;
    if ( t < 1 ) return 0.5 * easing.inBounce( t );
    else return 0.5 * easing.outBounce( t - 1 ) + 0.5;
};

easing.inCircular = function ( t ) {
    return -( Math.sqrt( 1 - t * t ) - 1 );
};

easing.outCircular = function ( t ) {
    return Math.sqrt( 1 - ( t - 1 ) * ( t - 1 ) );
};

easing.inOutCircular = function ( t ) {
    t = t * 2;

    if ( t < 1 ) return -0.5 * ( Math.sqrt( 1 - t * t ) - 1 );
    else {
        t = t - 2;

        return 0.5 * ( Math.sqrt( 1 - t * t ) + 1 );
    }
};

easing.inCubic = function ( t ) {
    return t * t * t;
};

easing.outCubic = function ( t ) {
    t = t - 1;

    return t * t * t + 1;
};

easing.inOutCubic = function ( t ) {
    if ( t < 0.5 ) return 4 * t * t * t;
    else {
        t = t - 1;

        return 4 * t * t * t + 1;
    }
};

var elasticA = 1;
var elasticP = 0.3;
var elasticS = elasticP / 4;

easing.inElastic = function ( t ) {
    if ( t == 0 || t == 1 ) return t;
    t = t - 1;

    return -( elasticA * Math.pow( 2, 10 * t ) * Math.sin( ( t - elasticS ) * ( 2 * Math.PI ) / elasticP ) );
};

easing.outElastic = function ( t ) {
    if ( t == 0 || t == 1 ) return t;

    return elasticA * Math.pow( 2, -10 * t ) * Math.sin( ( t - elasticS ) * ( 2 * Math.PI ) / elasticP ) + 1;
};

easing.inOutElastic = function ( t ) {
    if ( t == 0 || t == 1 ) return t;
    t = t * 2 - 1;
    if ( t < 0 ) return -0.5 * ( elasticA * Math.pow( 2, 10 * t ) * Math.sin( ( t - elasticS * 1.5 ) * ( 2 * Math.PI ) / ( elasticP * 1.5 ) ) );

    return 0.5 * elasticA * Math.pow( 2, -10 * t ) * Math.sin( ( t - elasticS * 1.5 ) * ( 2 * Math.PI ) / ( elasticP * 1.5 ) ) + 1;
};

easing.inExponential = function ( t ) {
    if ( t == 0 ) return 0;

    return Math.pow( 2, 10 * ( t - 1 ) );
};

easing.outExponential = function ( t ) {
    if ( t == 1 ) return 1;

    return 1 - Math.pow( 2, -10 * t );
};

easing.inOutExponential = function ( t ) {
    if ( t == 0 || t == 1 ) return t;
    t = t * 2 - 1;
    if ( t < 0 ) return 0.5 * Math.pow( 2, 10 * t );

    return 1 - 0.5 * Math.pow( 2, -10 * t );
};

easing.linear = function ( t ) {
    return t;
};

easing.inQuadratic = function ( t ) {
    return t * t;
};

easing.outQuadratic = function ( t ) {
    return -t * ( t - 2 );
};

easing.inOutQuadratic = function ( t ) {
    if ( t < 0.5 ) return 2 * t * t;

    return -2 * t * ( t - 2 ) - 1;
};

easing.inQuartic = function ( t ) {
    return t * t * t * t;
};

easing.outQuartic = function ( t ) {
    t = t - 1;

    return 1 - t * t * t * t;
};

easing.inOutQuartic = function ( t ) {
    if ( t < 0.5 ) return 8 * t * t * t * t;
    t = t - 1;

    return -8 * t * t * t * t + 1;
};

easing.inQuintic = function ( t ) {
    return t * t * t * t * t;
};

easing.outQuintic = function ( t ) {
    t = t - 1;

    return 1 + t * t * t * t * t;
};

easing.inOutQuintic = function ( t ) {
    if ( t < 0.5 ) return 16 * t * t * t * t * t;
    t = t - 1;

    return 16 * t * t * t * t * t + 1;
};

easing.inSine = function ( t ) {
    return 1 - Math.cos( t * ( Math.PI / 2 ) );
};

easing.outSine = function ( t ) {
    return Math.sin( t * ( Math.PI / 2 ) );
};

easing.inOutSine = function ( t ) {
    return -0.5 * ( Math.cos( t * Math.PI ) - 1 );
};

easing.outElasticSmooth = function ( t ) {
    if ( t == 0 || t == 1 ) return t;
    var elasticA = 1, elasticP = 0.38;
    var elasticS = elasticP / 4;

    return elasticA * Math.pow( 2.5, -10 * t ) * Math.sin( ( t - elasticS ) * ( 2 * Math.PI ) / elasticP ) + 1;
};

easing.inElasticSmooth2 = function ( t ) {
    if ( t == 0 || t == 1 ) return t;
    t = t - 1;
    var elasticA = 1, elasticP = 0.57;
    var elasticS = elasticP / 4;

    return -( elasticA * Math.pow( 2.6, 10 * t ) * Math.sin( ( t - elasticS ) * ( 2 * Math.PI ) / elasticP ) );
};

easing.outElasticSmooth2 = function ( t ) {
    if ( t == 0 || t == 1 ) return t;
    var elasticA = 1, elasticP = 0.57;
    var elasticS = elasticP / 4;

    return elasticA * Math.pow( 2.6, -10 * t ) * Math.sin( ( t - elasticS ) * ( 2 * Math.PI ) / elasticP ) + 1;
};

easing.outElasticWave = function ( t ) {
    if ( t == 0 || t == 1 ) return t;
    var elasticP = 0.19;
    var elasticS = elasticP / 4;
    var tPow = Math.pow( t, 4 );
    var v = Math.pow( 220, -0.7 * Math.pow( t, 0.4 ) ) * Math.sin( ( Math.pow( t, 0.95 ) - elasticS ) * ( 2 * Math.PI ) / elasticP ) + 1;

    return v * ( 1 - tPow ) + tPow;
};




/***/ }),

/***/ "./engine/src/flatfast.js":
/*!********************************!*\
  !*** ./engine/src/flatfast.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Application": () => (/* reexport safe */ _Application_js__WEBPACK_IMPORTED_MODULE_0__.Application),
/* harmony export */   "application": () => (/* reexport safe */ _Application_js__WEBPACK_IMPORTED_MODULE_0__.application),
/* harmony export */   "stage": () => (/* reexport safe */ _Application_js__WEBPACK_IMPORTED_MODULE_0__.stage),
/* harmony export */   "Bitmap": () => (/* reexport safe */ _Bitmap_js__WEBPACK_IMPORTED_MODULE_1__.Bitmap),
/* harmony export */   "Component": () => (/* reexport safe */ _Component_js__WEBPACK_IMPORTED_MODULE_2__.Component),
/* harmony export */   "ComponentHolder": () => (/* reexport safe */ _ComponentHolder_js__WEBPACK_IMPORTED_MODULE_3__.ComponentHolder),
/* harmony export */   "Event": () => (/* reexport safe */ _Event_js__WEBPACK_IMPORTED_MODULE_4__.Event),
/* harmony export */   "EventDispatcher": () => (/* reexport safe */ _EventDispatcher_js__WEBPACK_IMPORTED_MODULE_5__.EventDispatcher),
/* harmony export */   "TrueTypeFont": () => (/* reexport safe */ _TrueTypeFont_js__WEBPACK_IMPORTED_MODULE_6__.TrueTypeFont),
/* harmony export */   "BitmapFont": () => (/* reexport safe */ _BitmapFont_js__WEBPACK_IMPORTED_MODULE_7__.BitmapFont),
/* harmony export */   "MsdfFont": () => (/* reexport safe */ _MsdfFont_js__WEBPACK_IMPORTED_MODULE_8__.MsdfFont),
/* harmony export */   "KeyCode": () => (/* reexport safe */ _KeyCode_js__WEBPACK_IMPORTED_MODULE_9__.KeyCode),
/* harmony export */   "Layout": () => (/* reexport safe */ _Layout_js__WEBPACK_IMPORTED_MODULE_10__.Layout),
/* harmony export */   "Matrix": () => (/* reexport safe */ _Matrix_js__WEBPACK_IMPORTED_MODULE_11__.Matrix),
/* harmony export */   "Mesh": () => (/* reexport safe */ _Mesh_js__WEBPACK_IMPORTED_MODULE_12__.Mesh),
/* harmony export */   "MovieClip": () => (/* reexport safe */ _MovieClip_js__WEBPACK_IMPORTED_MODULE_13__.MovieClip),
/* harmony export */   "Particles": () => (/* reexport safe */ _Particles_js__WEBPACK_IMPORTED_MODULE_14__.Particles),
/* harmony export */   "Pixel": () => (/* reexport safe */ _Pixel_js__WEBPACK_IMPORTED_MODULE_15__.Pixel),
/* harmony export */   "RenderTarget": () => (/* reexport safe */ _RenderTarget_js__WEBPACK_IMPORTED_MODULE_16__.RenderTarget),
/* harmony export */   "SceneManager": () => (/* reexport safe */ _SceneManager_js__WEBPACK_IMPORTED_MODULE_17__.SceneManager),
/* harmony export */   "Shader": () => (/* reexport safe */ _Shader_js__WEBPACK_IMPORTED_MODULE_18__.Shader),
/* harmony export */   "Shape": () => (/* reexport safe */ _Shape_js__WEBPACK_IMPORTED_MODULE_19__.Shape),
/* harmony export */   "Sound": () => (/* reexport safe */ _Sound_js__WEBPACK_IMPORTED_MODULE_20__.Sound),
/* harmony export */   "Spine": () => (/* reexport safe */ _Spine_js__WEBPACK_IMPORTED_MODULE_21__.Spine),
/* harmony export */   "Sprite": () => (/* reexport safe */ _Sprite_js__WEBPACK_IMPORTED_MODULE_22__.Sprite),
/* harmony export */   "Stage": () => (/* reexport safe */ _Stage_js__WEBPACK_IMPORTED_MODULE_23__.Stage),
/* harmony export */   "Storage": () => (/* reexport safe */ _Storage_js__WEBPACK_IMPORTED_MODULE_24__.Storage),
/* harmony export */   "TextField": () => (/* reexport safe */ _TextField_js__WEBPACK_IMPORTED_MODULE_25__.TextField),
/* harmony export */   "Texture": () => (/* reexport safe */ _Texture_js__WEBPACK_IMPORTED_MODULE_26__.Texture),
/* harmony export */   "TextureBase": () => (/* reexport safe */ _TextureBase_js__WEBPACK_IMPORTED_MODULE_27__.TextureBase),
/* harmony export */   "TexturePack": () => (/* reexport safe */ _TexturePack_js__WEBPACK_IMPORTED_MODULE_28__.TexturePack),
/* harmony export */   "TileMap": () => (/* reexport safe */ _TileMap_js__WEBPACK_IMPORTED_MODULE_29__.TileMap),
/* harmony export */   "Timer": () => (/* reexport safe */ _Timer_js__WEBPACK_IMPORTED_MODULE_30__.Timer),
/* harmony export */   "Tween": () => (/* reexport safe */ _Tween_js__WEBPACK_IMPORTED_MODULE_31__.Tween),
/* harmony export */   "Utils": () => (/* reexport safe */ _Utils_js__WEBPACK_IMPORTED_MODULE_32__.Utils),
/* harmony export */   "easing": () => (/* reexport safe */ _easing_js__WEBPACK_IMPORTED_MODULE_33__.easing),
/* harmony export */   "hangul": () => (/* reexport safe */ _hangul_js__WEBPACK_IMPORTED_MODULE_34__.hangul),
/* harmony export */   "Point": () => (/* reexport safe */ _Types_js__WEBPACK_IMPORTED_MODULE_35__.Point),
/* harmony export */   "Rect": () => (/* reexport safe */ _Types_js__WEBPACK_IMPORTED_MODULE_35__.Rect),
/* harmony export */   "Serializer": () => (/* reexport safe */ _Serializer_js__WEBPACK_IMPORTED_MODULE_36__.Serializer)
/* harmony export */ });
/* harmony import */ var _Application_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Application.js */ "./engine/src/Application.js");
/* harmony import */ var _Bitmap_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Bitmap.js */ "./engine/src/Bitmap.js");
/* harmony import */ var _Component_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Component.js */ "./engine/src/Component.js");
/* harmony import */ var _ComponentHolder_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ComponentHolder.js */ "./engine/src/ComponentHolder.js");
/* harmony import */ var _Event_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Event.js */ "./engine/src/Event.js");
/* harmony import */ var _EventDispatcher_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./EventDispatcher.js */ "./engine/src/EventDispatcher.js");
/* harmony import */ var _TrueTypeFont_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./TrueTypeFont.js */ "./engine/src/TrueTypeFont.js");
/* harmony import */ var _BitmapFont_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./BitmapFont.js */ "./engine/src/BitmapFont.js");
/* harmony import */ var _MsdfFont_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./MsdfFont.js */ "./engine/src/MsdfFont.js");
/* harmony import */ var _KeyCode_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./KeyCode.js */ "./engine/src/KeyCode.js");
/* harmony import */ var _Layout_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Layout.js */ "./engine/src/Layout.js");
/* harmony import */ var _Matrix_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./Matrix.js */ "./engine/src/Matrix.js");
/* harmony import */ var _Mesh_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./Mesh.js */ "./engine/src/Mesh.js");
/* harmony import */ var _MovieClip_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./MovieClip.js */ "./engine/src/MovieClip.js");
/* harmony import */ var _Particles_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./Particles.js */ "./engine/src/Particles.js");
/* harmony import */ var _Pixel_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./Pixel.js */ "./engine/src/Pixel.js");
/* harmony import */ var _RenderTarget_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./RenderTarget.js */ "./engine/src/RenderTarget.js");
/* harmony import */ var _SceneManager_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./SceneManager.js */ "./engine/src/SceneManager.js");
/* harmony import */ var _Shader_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./Shader.js */ "./engine/src/Shader.js");
/* harmony import */ var _Shape_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./Shape.js */ "./engine/src/Shape.js");
/* harmony import */ var _Sound_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./Sound.js */ "./engine/src/Sound.js");
/* harmony import */ var _Spine_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./Spine.js */ "./engine/src/Spine.js");
/* harmony import */ var _Sprite_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./Sprite.js */ "./engine/src/Sprite.js");
/* harmony import */ var _Stage_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./Stage.js */ "./engine/src/Stage.js");
/* harmony import */ var _Storage_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./Storage.js */ "./engine/src/Storage.js");
/* harmony import */ var _TextField_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./TextField.js */ "./engine/src/TextField.js");
/* harmony import */ var _Texture_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./Texture.js */ "./engine/src/Texture.js");
/* harmony import */ var _TextureBase_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./TextureBase.js */ "./engine/src/TextureBase.js");
/* harmony import */ var _TexturePack_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./TexturePack.js */ "./engine/src/TexturePack.js");
/* harmony import */ var _TileMap_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./TileMap.js */ "./engine/src/TileMap.js");
/* harmony import */ var _Timer_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./Timer.js */ "./engine/src/Timer.js");
/* harmony import */ var _Tween_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./Tween.js */ "./engine/src/Tween.js");
/* harmony import */ var _Utils_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./Utils.js */ "./engine/src/Utils.js");
/* harmony import */ var _easing_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./easing.js */ "./engine/src/easing.js");
/* harmony import */ var _hangul_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./hangul.js */ "./engine/src/hangul.js");
/* harmony import */ var _Types_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./Types.js */ "./engine/src/Types.js");
/* harmony import */ var _Serializer_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./Serializer.js */ "./engine/src/Serializer.js");







































/***/ }),

/***/ "./engine/src/hangul.js":
/*!******************************!*\
  !*** ./engine/src/hangul.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "hangul": () => (/* binding */ hangul)
/* harmony export */ });

const choSungTable = ["ㄱ", "ㄲ", "ㄴ", "ㄷ", "ㄸ", "ㄹ", "ㅁ", "ㅂ", "ㅃ", "ㅅ", "ㅆ", "ㅇ", "ㅈ", "ㅉ", "ㅊ", "ㅋ", "ㅌ", "ㅍ", "ㅎ"];
const jungSungTable = [
    "ㅏ", "ㅐ", "ㅑ", "ㅒ", "ㅓ", // 0~4;
    "ㅔ", "ㅕ", "ㅖ", "ㅗ", "ㅘ", // 5~9;
    "ㅙ", "ㅚ", "ㅛ", "ㅜ", "ㅝ", // 10~14;
    "ㅞ", "ㅟ", "ㅠ", "ㅡ", "ㅢ", // 15~19;
    "ㅣ"];
const jongSungTable = [" ", "ㄱ", "ㄲ", "ㄳ", "ㄴ", "ㄵ", "ㄶ", "ㄷ", "ㄹ", "ㄺ", "ㄻ", "ㄼ", "ㄽ", "ㄾ", "ㄿ", "ㅀ", "ㅁ", "ㅂ", "ㅄ", "ㅅ", "ㅆ", "ㅇ", "ㅈ", "ㅊ", "ㅋ", "ㅌ", "ㅍ", "ㅎ"];

const choSungToCode = {};
const jungSungToCode = {
    ["ㅏㅣ"]:  1,
    ["ㅣㅏ"]:  2,
    ["ㅑㅣ"]:  3,
    ["ㅓㅣ"]:  5,
    ["ㅣㅓ"]:  6,
    ["ㅕㅣ"]:  7,
    ["ㅗㅏ"]:  9,
    ["ㅗㅐ"]:  10,
    ["ㅗㅏㅣ"]: 10,
    ["ㅗㅣ"]:  11,
    ["ㅣㅗ"]:  12,
    ["ㅜㅓ"]:  14,
    ["ㅜㅔ"]:  15,
    ["ㅜㅓㅣ"]: 15,
    ["ㅜㅣ"]:  16,
    ["ㅡㅜ"]:  17,
    ["ㅡㅣ"]:  19,
};
const jongSungToCode = {};

for ( let i = 0; i < choSungTable.length; i++ ) {
    const v = choSungTable[i];

    choSungToCode[v] = i;
}

for ( let i = 0; i < jungSungTable.length; i++ ) {
    const v = jungSungTable[i];

    jungSungToCode[v] = i;
}

for ( let i = 0; i < jongSungTable.length; i++ ) {
    const v = jongSungTable[i];

    jongSungToCode[v] = i;
}

const uniCodeHangulBase = 0xac00;
const uniCodeHangulLast = 0xd79f;

const hangul = {};

function ucharToNumber( uchar ) {
    return uchar.charCodeAt( 0 );
}

const rangeHangul = [ucharToNumber( "가" ), ucharToNumber( "힣" )];

hangul.isValidUnicode = function ( uchar ) {
    //[가-힣] 검사, 
    const num = ucharToNumber( uchar );

    return num >= rangeHangul[0] && num <= rangeHangul[1];
};

const rangeHangulJa = [ucharToNumber( "ㄱ" ), ucharToNumber( "ㅎ" )];
const rangeHangulMo = [ucharToNumber( "ㅏ" ), ucharToNumber( "ㅣ" )];

hangul.isJamo = function ( uchar ) {
    //자모 여부 검사 검사
    const num = ucharToNumber( uchar );

    return ( num >= rangeHangulJa[0] && num <= rangeHangulJa[1] ) ||
		( num >= rangeHangulMo[0] && num <= rangeHangulMo[1] );
};

// 마지막이 종성이 검사
hangul.isJongSung = function ( str ) {
    const char = str.substr( str.length - 1 );
    const code = char.charCodeAt( 0 );

    if ( code < uniCodeHangulBase || code > uniCodeHangulLast ) {
        const choSung = choSungToCode[char];

        if ( choSung ) {
            // 자음은 모두 받침이 있게 발음된다
            return true;
        }

        if ( "bcdfghjklmnpqrstvwxz136780".indexOf( char ) >= 0 ) {
            return true;
        }

        return false;
    }

    // 분해해서 받침이 있는지 본다
    let uc = code - uniCodeHangulBase;

    //const choSung = Math.floor(uc / (21 * 28));
    uc = uc % ( 21 * 28 );
    //const jungSung = Math.floor(uc / 28);
    uc = uc % 28;
    const jongSung = uc;

    return jongSung > 0;
};




// 대한민국{를} 가려면 [비행기]{을} 타라

hangul.replaceJoSa = function ( inputText ) {
    if ( inputText == null || inputText == "" ) return inputText;

    //let words = inputText.match(/\s*([\S]+){([^/}]+)}/g);
    const re = /}?([^}]*){([^/}]*)}/g;
    let result = re.exec( inputText );
    //const words = [];
    let lastIndex = 0;
    let s = "";

    while ( result != null ) {
        lastIndex = re.lastIndex;
        const [pre, joSa, lastChar] = [
            //RegExp.lastMatch,
            RegExp.$1,
            RegExp.$2,
            RegExp.$1.match( /.['"`^()[\]]?$/ )[0].substr( 0, 1 ), // 마지막 글자
        ];
        const isJongSung = hangul.isJongSung( lastChar );
        const jongSung = isJongSung ? hangul.divideJaSo( lastChar )[2] : null;
        let newJoSa;

        if ( joSa == "을" || joSa == "를" ) {
            newJoSa = isJongSung ? "을" : "를";
        } else if ( joSa == "이" || joSa == "가" ) {
            newJoSa = isJongSung ? "이" : "가";
        } else if ( joSa == "과" || joSa == "와" ) {
            newJoSa = isJongSung ? "과" : "와";
        } else if ( joSa == "은" || joSa == "는" ) {
            newJoSa = isJongSung ? "은" : "는";
        } else if ( joSa == "이는" ) {
            newJoSa = isJongSung ? "이는" : "는";
        } else if ( joSa == "이와" ) {
            newJoSa = isJongSung ? "이와" : "와";
        } else if ( joSa == "여" || joSa == "이여" ) {
            newJoSa = isJongSung ? "이여" : "여";
        } else if ( joSa == "으로" || joSa == "로" ) {
            newJoSa = ( isJongSung && jongSung != "ㄹ" ) ? "으로" : "로";
        } else if ( joSa == "이네" || joSa == "네" ) {
            newJoSa = isJongSung ? "이네" : "네";
        } else if ( joSa == "이랑" || joSa == "랑" ) {
            newJoSa = isJongSung ? "이랑" : "랑";
        } else if ( joSa == "라" ) {
            newJoSa = isJongSung ? "이라" : "라";
        }

        s = s + pre + newJoSa;

        result = re.exec( inputText );
    }

    return s + inputText.substr( lastIndex );
};

hangul.format = function ( text, ...args ) {
    let s;

    if ( args.length > 0 ) {
        // %s %d
        // %0 %1 %2 %3 %4...
        let count = 0;

        s = text.replace( /%[s|d]/g, function ( s ) {
            return `%${count++}`;
        } );

        for ( let i = 0; i < args.length; i++ ) {
            s = s.replace( `%${i}`, args[i] );
        }
    } else s = text;

    return hangul.replaceJoSa( s );
};

// 자소를 합친다
hangul.mergeJaSo = function ( choSung, jungSung, jongSung ) {
    //log(choSung,jungSung,jongSung);
    const choSungPos = choSungToCode[choSung];
    const jungSungPos = jungSungToCode[jungSung];
    const jongSungPos = jongSung ? jongSungToCode[jongSung] : 0;
    const code = uniCodeHangulBase + ( choSungPos * 21 + jungSungPos ) * 28 + jongSungPos;

    return String.fromCharCode( code );
};

// 글자하나를 자소로 분리한다
hangul.divideJaSo = function ( char ) {
    const code = char.charCodeAt( 0 );

    if ( code < uniCodeHangulBase || code > uniCodeHangulLast ) {
        const choSung = choSungToCode[char];

        if ( choSung ) {
            return [choSungTable[choSung]];
        }

        const jungSung = jungSungToCode[char];

        if ( jungSung ) {
            return [null, jungSungTable[jungSung]];
        }

        return [];
    }

    let uc = code - uniCodeHangulBase;
    const choSung = Math.floor( uc / ( 21 * 28 ) );

    uc = uc % ( 21 * 28 );
    const jungSung = Math.floor( uc / 28 );

    uc = uc % 28;
    const jongSung = uc;

    return [
        choSungTable[choSung],
        jungSungTable[jungSung],
        ( jongSung > 0 && jongSungTable[jongSung] || null )
    ];
};

// 이 캐릭터가 자소중에 하나인지 검사
hangul.getTypeOfJaSo = function ( char ) {
    let [f1, f2, f3] = [false, false, false];
    const choSung = choSungToCode[char];

    if ( choSung ) {
        f1 = true;
    }

    const jungSung = jungSungToCode[char];

    if ( jungSung ) {
        f2 = true;
    }

    const jongSung = jongSungToCode[char];

    if ( jongSung ) {
        f3 = true;
    }

    return [f1, f2, f3];
};

// console.log(hangul.divideJaSo("한"));
// console.log(hangul.mergeJaSo(...hangul.divideJaSo("글")));
// console.log(hangul.isJamo("한"));
// console.log(hangul.isJamo("ㅏ"));
// console.log(hangul.isJongSung("간"));
// console.log(hangul.isJongSung("가"));
// console.log(hangul.isJongSung("bob"));
// console.log(hangul.replaceJoSa("대한민국{를} 가려면 '비행기'{을} 타라 323{로}"));


/***/ }),

/***/ "./engine/src/lib/a-star.js":
/*!**********************************!*\
  !*** ./engine/src/lib/a-star.js ***!
  \**********************************/
/***/ ((module) => {

// ======================================================================
// Copyright (c) 2012 RapidFire Studio Limited;
// All Rights Reserved. 
// http://www.rapidfirestudio.com;
// Permission is hereby granted, free of charge, to any person obtaining;
// a copy of this software && associated documentation files (the;
// "Software"), to deal in the Software without restriction, including;
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/|| sell copies of the Software, && to;
// permit persons to whom the Software is furnished to do so, subject to;
// the following conditions:

// The above copyright notice && this permission notice shall be;
// included in all copies || substantial portions of the Software.

// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF;
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
// IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY;
// CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
// TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE;
// SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
// ======================================================================

//module ( "astar", package.seeall );
//--------------------------------------------------------------
// let variables;
//--------------------------------------------------------------

let INF = Number.POSITIVE_INFINITY;
let cachedPaths = null;
//--------------------------------------------------------------
// let statics;
//--------------------------------------------------------------


class astar {


    static dist( x1, y1, x2, y2 ) {
        return Math.sqrt( Math.pow( x2 - x1, 2 ) + Math.pow( y2 - y1, 2 ) );
    }

    static dist_between ( nodeA, nodeB ) {
        return this.dist( nodeA.x, nodeA.y, nodeB.x, nodeB.y );
    }

    static heuristic_cost_estimate ( nodeA, nodeB ) {
        return this.dist( nodeA.x, nodeA.y, nodeB.x, nodeB.y );
    }

    static is_valid_node ( node, neighbor ) {
        return true;
    }

    static lowest_f_score ( set, f_score ) {
        let [lowest, bestNode] = [INF, null];
        for (let i in set) {
            let node = set[i];
            let score = f_score [ node ];
            if (score < lowest) {
                [lowest, bestNode] = [score, node];
            }
        }
        return bestNode;
    }

    static neighbor_nodes ( theNode, nodes ) {
        let neighbors = [];
        for (let i in nodes) {
            let node = nodes[i];
            if (theNode != node && this.is_valid_node( theNode, node )) {
                neighbors.push(node);
            }
        }
        return neighbors;
    }

    static not_in ( set, theNode ) {
        for (let i in set) {
            let node = set[i];
            if (node == theNode) return false;
        }
        return true;
    }

    static remove_node ( set, theNode ) {
        for (let i in set) {
            let node = set[i];
            if (node == theNode) { 
                set[i] = set[set.length - 1];
                set[set.length - 1] = null;
                break;
            }
        }	
    }

    static unwind_path ( flat_path, map, current_node ) {
        if (map [ current_node ]) {
            flat_path.unshift(map[ current_node ] );
            return this.unwind_path( flat_path, map, map [ current_node ] );
        } else {
            return flat_path;
        }
    }

    //--------------------------------------------------------------
    // pathfinding statics;
    //--------------------------------------------------------------

    static a_star ( start, goal, nodes, valid_node_func ) {
        let closedset = [];
        let openset = [ start ];
        let came_from = [];

        if (valid_node_func) this.is_valid_node = valid_node_func;

        let [g_score, f_score] = [[], []];
        g_score [ start ] = 0;
        f_score[start] = g_score[start] + this.heuristic_cost_estimate( start, goal );
        while (openset.length > 0) {
            let current = this.lowest_f_score( openset, f_score );
            if (current == goal) {
                let path = this.unwind_path( [], came_from, goal );
                path.push(goal);
                return path;
            }

            this.remove_node( openset, current );
            closedset.push(current);
            let neighbors = this.neighbor_nodes( current, nodes );
            for (let i in neighbors) {
                let neighbor = neighbors[i];
                if (this.not_in( closedset, neighbor )) {
			
                    let tentative_g_score = g_score[current] + this.dist_between( current, neighbor );
                    if (this.not_in( openset, neighbor ) || tentative_g_score < g_score [ neighbor ]) { 
                        came_from 	[ neighbor ] = current;
                        g_score 	[ neighbor ] = tentative_g_score;
                        f_score[neighbor] = g_score[neighbor] + this.heuristic_cost_estimate( neighbor, goal );
                        if (this.not_in( openset, neighbor )) {
                            openset.push(neighbor );
                        }
                    }
                }
            }
        }
        return null; // no valid path;
    }

    //--------------------------------------------------------------
    // exposed statics;
    //--------------------------------------------------------------

    static clear_cached_paths () {
        cachedPaths = null;
    }

    static distance ( x1, y1, x2, y2 ) {
        return this.dist( x1, y1, x2, y2 );
    }

    static path ( start, goal, nodes, ignore_cache, valid_node_func ) {
        if (!cachedPaths) { cachedPaths = {}; }
        if (!cachedPaths[start]) {
            cachedPaths[start] = {};
        } else if(cachedPaths[start][goal] && !ignore_cache) {
            return cachedPaths[start][goal];
        }
	
        return this.a_star(start, goal, nodes, valid_node_func);
    }

}

module.exports = astar;


/***/ }),

/***/ "./engine/src/lib/button2.js":
/*!***********************************!*\
  !*** ./engine/src/lib/button2.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Button2)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");


/*

    * 표시는 애니메이션 가능한 인자
    
    up.image;
    up.font;
    up.text;
    up.textColor       *
    up.textAlignLeft;
    up.textX           *
    up.textY           *
    up.icon;
    up.iconChecked;
    up.iconColor;
    up.iconScale;
    up.iconX           *
    up.iconY           *
    up.color           *
    up.alpha           *
    up.scale           *        scaleX, scaleY를 한꺼번에 지정
    up.scaleX          *
    up.scaleY          *
    up.width;
    up.height;
    up.x               *
    up.y               *
    
    up.ease;
    up.duration;
    textMaxWidth                글자의 가로 최대 크기를 지정(넘치면 스케일링해서 줄임);
    checkBox;
    check = false;
    holdDownOnClick = false        클릭되었을때 눌러져있는가
    clickOnDown = false            마우스 다운에서 클릭이 발생하는가
    
    textureTypeImage = true            이미지 타입이 Texture인가(자동 판정);
    singleSpriteType = false        스프라이트 하나만 사용하는 버튼인가(down.image를 따로 지정하지 않고 사용. 이미지 타입이 Texutre가 아닌 경우);
    useSpriteAnchorPoint = false    이미지를 스프라이트로 지정하는 경우, 기존 앵커포인트를 그대로 사용할지 여부.
    spriteTypeIcon = false            아이콘을 스프라이트 타입으로 갖다 쓸 것인가. (기본은 Texuture라서 new Bitmap()로 만들어서 사용);
    //-
    
    2014.06;
        - image에 Sprite도 지정할 수 있게 수정. (단, Sprite를 사용할 때는 down.image도 반드시 지정해야 함);
        - 텍스트 정렬할 때 앵커포인트 계산을 바운딩박스 기준으로 정밀하게 계산하도록 수정.
        - UP/DOWN 트위닝이 중간에 끊길 때 toEnd 대신 setPause로 수정해서 부드럽게 전환되도록 수정.        
        
    2014.07.07;
        - singleSpriteType 사용할 수 있게 됨. 스프라이트 하나만으로 버튼 만들기 가능.
        - useSpriteAnchorPoint 추가. 스프라이트로 버튼 만들 때 기존의 앵커포인트를 그대로 사용.
        
    2014.07.18;
        - textMaxWidth 추가. 출력되는 글자가 이 길이를 넘어가면 scaleX를 줄여줌.
        
    2014.07.21;
        - disable.alpha 추가. 비활성화 되었을 때의 알파를 바꾸고 싶을 때 사용.
        - iconScale 추가.
        
    2014.08.01;
        - buttonChild 추가. 텍스트랑 같은 레벨에 외부 객체를 차일드로 넣을 수 있음.
        - 사실상 텍스트를 외부에서 조립해서 넣는거나 마찬가지(애니메이션도 자연스럽게 따라감);
    2014.08.27;
        - hitBox 추가. up.sprite 대신 버튼영역을 설정하는 용도. 기울어지지 않은 사각형 형태만 사용가능.
    
*/


function splitHexColor( c ) {
    let r = Math.floor( c / 65536 ) % 65536 / 255;
    let g = Math.floor( c / 256 ) % 256 / 255;
    let b = c % 256 / 255;

    return [r, g, b];
}

function fireClickEvent( self ) {
    if ( self.isVisible() == false ) { return; }

    self.clicked = true;
    if ( self.sound ) {
        playSound( self.sound );
    }
    let e = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "click" );

    e.checked = self.checked;
    self.dispatchEvent( e );
}


function setIconTexture( iconSprite, icon ) {
    if ( icon.getRegion ) {
        iconSprite.setTextureRegion( icon );
    } else {
        iconSprite.setTexture( icon );
    }
}

// 기존 트윈 모두 제거
function deleteAllTweens( self ) {
    self._tween = null;
    self._tweenSprite = null;
    self._tweenText = null;
    self._tweenIcon = null;
}

// 기존 트윈 모두 멈춤
function stopAllTweens( self ) {
    if ( self._tween ) { self._tween.stop(); }
    if ( self._tweenSprite ) { self._tweenSprite.stop(); }
    if ( self._tweenText ) { self._tweenText.stop(); }
    if ( self._tweenIcon ) { self._tweenIcon.stop(); }
    deleteAllTweens( self );
}

function onPointerDown( e, cancel ) {
    if ( this.isVisibleDeeply() == false ) { return; }

    //if (this.upSprite.hitTestPoint(e.x, e.y) || cancel) {
    if ( ( this.hitBox || this.upSprite ).hitTestPoint( e.x, e.y ) || cancel ) {
        this.pointerHold = true;    // move 이벤트를 항상 처리하지 않기 위해서 표시를 남김
        if ( !this.clicked ) {
            stopAllTweens( this );
            this.tween = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween(
                this.upSprite, this.down.duration,
                {
                    scaleX: this.down.scaleX,
                    scaleY: this.down.scaleY,
                    x:      this.down.x,
                    y:      this.down.y,
                    alpha:  this.down.alpha,
                }, { ease: this.down.ease } );
            this.tween.addEventListener( "complete",
                                         () => {
                                             deleteAllTweens( this );
                                             this.isCompletelyDownState = true;
                                             if ( !this.singleSpriteType ) {
                                                 this.upSprite.setVisible( false );
                                                 this.downSprite.setVisible( true );
                                                 if ( this.buttonChild ) {
                                                     this.downSprite.addChild( this.buttonChild );
                                                 }
                                             }

                                             if ( this.checkBox ) {
                                                 if ( this.checked ) {
                                                     console.log( "체크박스켜기", this.upSprite.icon, this.up.iconChecked );
                                                     setIconTexture( this.upSprite.icon, this.up.iconChecked );
                                                     setIconTexture( this.downSprite.icon, this.down.iconChecked || this.up.iconChecked );
                                                 } else {
                                                     console.log( "체크박스끄기", this.upSprite.icon, this.up.icon );
                                                     setIconTexture( this.upSprite.icon, this.up.icon );
                                                     setIconTexture( this.downSprite.icon, this.down.icon || this.up.icon );
                                                 }
                                             }
                                         }
            );
            if ( this.checkBox ) {
                this.checked = !this.checked;
            }

            this.tweenSprite = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween(
                this.upSprite.image, this.down.duration,
                {
                    redMultiplier:   this.down.colorR,
                    greenMultiplier: this.down.colorG,
                    blueMultiplier:  this.down.colorB,
                }, { ease: this.down.ease }
            );
            if ( this.upSprite.text ) {
                this.tweenText = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween(
                    this.upSprite.text, this.down.duration,
                    {
                        x:               this.down.textX,
                        y:               this.down.textY,
                        redMultiplier:   this.down.textColorR,
                        greenMultiplier: this.down.textColorG,
                        blueMultiplier:  this.down.textColorB,
                        alpha:           this.down.alpha,
                    }, { ease: this.down.ease }
                );
            }
            if ( this.upSprite.icon ) {
                this.tweenIcon = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween(
                    this.upSprite.icon, this.down.duration,
                    {
                        x: this.down.iconX,
                        y: this.down.iconY,
                    }, { ease: this.down.ease }
                );
            }
            if ( this.buttonChild ) {
                this.tweenChild = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween(
                    this.buttonChild, this.down.duration,
                    {
                        redMultiplier:   this.down.textColorR,
                        greenMultiplier: this.down.textColorG,
                        blueMultiplier:  this.down.textColorB,
                        alpha:           this.down.alpha,
                    }, { ease: this.down.ease }
                );
            }

            if ( !cancel && this.clickOnDown ) {
                fireClickEvent( this );
            } else {
                if ( this.down.sound ) {
                    playSound( this.down.sound );
                }
            }
        }
        e.stopPropagation();
    }
}

function upButton( self ) {
    self.isCompletelyDownState = false;
    if ( !self.singleSpriteType ) {
        self.upSprite.setVisible( true );
        self.downSprite.setVisible( false );
        if ( self.buttonChild ) {
            self.upSprite.addChild( self.buttonChild );
        }
    }

    self._tween = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween(
        self.upSprite, self.up.duration,
        {
            scaleX: self.up.scaleX,
            scaleY: self.up.scaleY,
            x:      self.up.x,
            y:      self.up.y,
            alpha:  self.up.alpha,
        }, { ease: self.up.ease } );
    self._tween.addEventListener( "complete",
                                  () => { deleteAllTweens( self ); }
    );
    self._tweenSprite = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween(
        self.upSprite.image, self.up.duration,
        {
            redMultiplier:   self.up.colorR,
            greenMultiplier: self.up.colorG,
            blueMultiplier:  self.up.colorB,
        }, { ease: self.down.ease }
    );
    if ( self.upSprite.text ) {
        self._tweenText = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween(
            self.upSprite.text, self.up.duration,
            {
                x:               self.up.textX,
                y:               self.up.textY,
                redMultiplier:   self.up.textColorR,
                greenMultiplier: self.up.textColorG,
                blueMultiplier:  self.up.textColorB,
                alpha:           self.up.alpha,
            }, { ease: self.up.ease }
        );
    }
    if ( self.upSprite.icon ) {
        self._tweenIcon = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween(
            self.upSprite.icon, self.up.duration,
            {
                x: self.up.iconX,
                y: self.up.iconY,
            }, { ease: self.up.ease }
        );
    }
    if ( self.buttonChild ) {
        self._tweenChild = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween(
            self.buttonChild, self.up.duration,
            {
                redMultiplier:   self.up.textColorR,
                greenMultiplier: self.up.textColorG,
                blueMultiplier:  self.up.textColorB,
                alpha:           self.up.alpha,
            }, { ease: self.up.ease }
        );
    }

    self.clicked = false;
}

function onPointerUp( e, cancel ) {
    if ( this.isVisible() == false ) { return; }

    if ( !this.pointerHold ) { return; }
    e.stopPropagation();
    if ( !cancel ) { this.pointerHold = false; } // 범위 벗어나서 튀어나오는 경우가 cancel;
    stopAllTweens( this );
    let [x, y, w, h] = this.cancelBound;
    let pos = this.globalToLocal( e.x, e.y );
    let x2 = pos.x;
    let y2 = pos.y;

    //let clicked = false;
    if ( !this.clicked && !this.clickOnDown && !cancel && x <= x2 && x2 < x + w && y <= y2 && y2 < y + h ) {
        fireClickEvent( this );
    }
    if ( !( this.clicked && this.holdDownOnClick ) ) {
        // downOnClick이 아니면 
        if ( cancel && this.up.sound ) {
            playSound( this.up.sound );
        }

        upButton( this );
        if ( cancel && this.checkBox ) {
            this.checked = !this.checked;
            if ( this.checked ) {
                console.log( "캔슬로 체크박스켜기" );
                setIconTexture( this.upSprite.icon, this.up.iconChecked );
                setIconTexture( this.downSprite.icon, this.down.iconChecked || this.up.iconChecked );
            } else {
                console.log( "캔슬로 체크박스끄기" );
                setIconTexture( this.upSprite.icon, this.up.icon );
                setIconTexture( this.downSprite.icon, this.down.icon || this.up.icon );
            }
        }
    }
}

function onPointerMove( e ) {
    if ( this.isVisible() == false ) { return; }

    if ( this.pointerHold ) {
        let [x, y, w, h] = this.cancelBound;
        let { x: x2, y: y2 } = this.globalToLocal( e.x, e.y );

        if ( x <= x2 && x2 < x + w && y <= y2 && y2 < y + h ) {
            if ( !this.isCompletelyDownState && this.tween == null ) {
                onPointerDown.call( this,e, true );
            }
        } else {
            if ( this.isCompletelyDownState && this.tween == null ) {
                onPointerUp.call( this,e, true );
            }
        }
        e.stopPropagation();
    }
}

// 전달받은 이미지를 타입에 따라 구분해서 스프라이트로 반환(Texture인지 Sprite인지);
function imageToSprite( image ) {
    if ( image.RGBA5551 ) {
        return [new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( image ), true];
    } else {
        return [image, false];
    }
}




class Button2 extends _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite {
    constructor( p ) {
        super();
        p = p || { };
        this.checkBox = p.checkBox;
        this.checked = p.checked;
        this.holdDownOnClick = p.holdDownOnClick;
        this.clickOnDown = p.clickOnDown;
        this.sound = p.sound;
        this.textureTypeImage = true;
        this.singleSpriteType = false;
        this.isCompletelyDownState = false;
        this.textMaxWidth = p.textMaxWidth;
        this.buttonChild = p.buttonChild;
        this.buttonChildPos = p.buttonChildPos || { x: 0, y: 0 };
        this.hitBox = p.hitBox;
        this.hitBoxPos = p.hitBoxPos || { x: 0, y: 0 };
        this.spriteTypeIcon = p.spriteTypeIcon;
        let up = p.up;
        let down = p.down || {};
        let disable = p.disable || {};

        down.width = up.width;
        down.height = up.height;
        //애니메이션 가능한 부분은 기본값이 필요하다
        up.textColor = up.textColor || 0x000000;
        up.textX = up.textX || 0;
        up.textY = up.textY || 0;
        up.iconX = up.iconX || 0;
        up.iconY = up.iconY || 0;
        up.iconColor = up.iconColor || 0xffffff;
        up.iconScale = up.iconScale || 1;
        up.color = up.color || 0xffffff;
        up.alpha = up.alpha || 1.0;
        up.scaleX = up.scaleX || up.scale || 1.0;
        up.scaleY = up.scaleY || up.scale || 1.0;
        up.x = up.x || 0;
        up.y = up.y || 0;
        up.ease = up.ease || _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outBack;
        up.duration = up.duration || 150;
        up.useSpriteAnchorPoint = up.useSpriteAnchorPoint || false;
        down.text = down.text || up.text;
        down.textColor = down.textColor || up.textColor;
        down.textX = down.textX || up.textX;
        down.textY = down.textY || up.textY;
        down.iconX = down.iconX || up.iconX;
        down.iconY = down.iconY || up.iconY;
        down.iconColor = down.iconColor || up.iconColor;
        down.iconScale = down.iconScale || up.iconScale;
        down.color = down.color || up.color;
        down.alpha = down.alpha || up.alpha;
        down.scaleX = down.scaleX || down.scale || up.scaleX;
        down.scaleY = down.scaleY || down.scale || up.scaleY;
        down.x = down.x || up.x;
        down.y = down.y || up.y;
        down.ease = down.ease || up.ease;
        down.duration = down.duration || up.duration;
        disable.color = disable.color || 0x808080;
        disable.alpha = disable.alpha || 1;
        disable.spriteTypeAlpha = disable.spriteTypeAlpha || 0.6;
        this.up = up;
        this.down = down;
        this.disable = disable;
        // 컬러를 쪼개야 트윈 가능
        [up.colorR, up.colorG, up.colorB] = splitHexColor( up.color );
        [down.colorR, down.colorG, down.colorB] = splitHexColor( down.color );
        [up.textColorR, up.textColorG, up.textColorB] = splitHexColor( up.textColor );
        [down.textColorR, down.textColorG, down.textColorB] = splitHexColor( down.textColor );
        {
            this.upSprite = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();
            let b;
            let ap = { x: 0.5, y: 0.5 };

            if ( up.image ) {
                [b, this.textureTypeImage] = imageToSprite( up.image );
                if ( !this.textureTypeImage && up.useSpriteAnchorPoint ) {
                    ap = b.getAnchorPoint();
                }            
            } else {
                b = Mesh.createBox( 0, 0, up.width, up.height, 0xffffff );
            }
            if ( b.setAnchorPoint ) {
                b.setAnchorPoint( ap.x, ap.y );
            } else {
                b.setPosition( -ap.x * b.getWidth(),-ap.y * b.getHeight() );
            }
            b.setColorMultiplier( up.colorR, up.colorG, up.colorB );
            this.upSprite.addChild( b );
            if ( up.text ) {
                this.upSprite.textInfo =
                {
                    font:      up.font,
                    x:         up.textX,
                    y:         up.textY,
                    r:         up.textColorR,
                    g:         up.textColorG,
                    b:         up.textColorB,
                    alignLeft: up.textAlignLeft,
                    color:     up.textColor
                    //color = 0x000000;
                };
            }

            let icon;

            if ( up.icon ) {
                if ( this.checkBox && this.checked ) {
                    if ( this.spriteTypeIcon ) {
                        icon = up.iconChecked;
                    } else {
                        icon = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( up.iconChecked );
                    }
                } else {
                    if ( this.spriteTypeIcon ) {
                        icon = up.icon;
                    } else {
                        icon = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( up.icon );
                    }
                }
                icon.setScale( up.iconScale );
                icon.setAnchorPoint( 0.5, 0.5 );
                icon.setPosition( up.iconX, up.iconY );
                icon.setOverrideColor( up.iconColor );
                //icon.setScale(up.iconScale);
                this.upSprite.addChild( icon );
            }
            
            if ( this.buttonChild ) {
                this.buttonChild.setPosition( this.buttonChildPos.x, this.buttonChildPos.y );
                this.buttonChild.setColorMultiplierByHex( up.textColor );
                this.upSprite.addChild( this.buttonChild );
            }
            
            this.upSprite.setX( up.x );
            this.upSprite.setY( up.y );
            this.upSprite.setScaleX( up.scaleX );
            this.upSprite.setScaleY( up.scaleY );
            this.addChild( this.upSprite );
            this.upSprite.image = b;
            this.upSprite.icon = icon;
            this.upSprite.setAlpha( up.alpha );
        }

        {
            this.downSprite = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();
            let b;

            if ( down.image ) {    
                b = imageToSprite( down.image );
            } else if ( !this.textureTypeImage ) {
                this.singleSpriteType = true;
                b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();
            } else if ( up.image ) {
                b = imageToSprite( up.image );
            } else {
                b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Shape();
                b.makeBox( 0, 0, down.width, down.height, 0xffffff );
            }
            b.setAnchorPoint( 0.5, 0.5 );
            b.setColorMultiplier( down.colorR, down.colorG, down.colorB );
            this.downSprite.addChild( b );
            if ( down.text ) {
                this.downSprite.textInfo =
                {
                    font:      down.font || up.font,
                    x:         down.textX,
                    y:         down.textY,
                    r:         down.textColorR,
                    g:         down.textColorG,
                    b:         down.textColorB,
                    alignLeft: down.textAlignLeft || up.textAlignLeft,
                    color:     down.textColor
                    //color = 0x000000;
                };
            }

            let icon;

            if ( down.icon || up.icon ) {
                if ( this.checkBox && this.checked ) {
                    if ( this.spriteTypeIcon ) {
                        icon = down.iconChecked || up.iconChecked;
                    } else {
                        icon = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( down.iconChecked || up.iconChecked );
                    }
                } else {
                    if ( this.spriteTypeIcon ) {
                        icon = down.icon || up.icon;
                    } else {
                        icon = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( down.icon || up.icon );
                    }
                }
                icon.setScale( down.iconScale );
                icon.setAnchorPoint( 0.5, 0.5 );
                icon.setOverrideColor( down.iconColor );
                icon.setPosition( down.iconX, down.iconY );
                //icon.setScale(down.iconScale);
                this.downSprite.addChild( icon );
            }

            this.downSprite.setX( down.x );
            this.downSprite.setY( down.y );
            this.downSprite.setScaleX( down.scaleX );
            this.downSprite.setScaleY( down.scaleY );
            this.downSprite.setVisible( false );
            this.addChild( this.downSprite );
            this.downSprite.icon = icon;
            this.downSprite.setAlpha( down.alpha );
        }

        this.setText( up.text, down.text );
        // 터치 영역 관련
        {
            if ( this.hitBox ) {
                this.hitBox.setAlpha( 0 );
                this.hitBox.setPosition( this.hitBoxPos.x, this.hitBoxPos.y );
                this.addChild( this.hitBox );
            }
            
            //x, y, w, h = this.getBounds(this.upSprite);
            let { x, y, width:w, height:h } = ( this.hitBox || this.upSprite ).getBounds( this );

            this.cancelBound = [x - Button2.cancelMargin, y - Button2.cancelMargin, w + Button2.cancelMargin * 2, h + Button2.cancelMargin * 2];
        }

        this.setEnabled( true );
    }

    _setText( btnSpr, txt ) {
        let ti = btnSpr.textInfo;
        let t = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextField( ti.font, txt );

        t.setTextColor( 0xffffff );
        t.setColorMultiplier( ti.r, ti.g, ti.b );
        // 좌표 조정
        // 앵커포인트를 바운딩박스 기준으로 맞춰야 제대로 된 좌표에 나온다.
        // 숫자 "0"의 바운딩박스 하단을 Baseline으로 보고 세로 정렬을 하고,
        // txt의 바운딩박스 전체를 가지고 가로정렬을 한다.    
        let [ , by, , bh] = ti.font.getBounds0();
        let [tx,  , tw, ] = ti.font.getBounds( txt );
        let [h, v] = [0.5, 0.5];

        if ( ti.alignLeft ) { h = 0; }
        
        // 길이제한이 있으면 먼저 맞춰준다
        let sx = 1;

        if ( this.textMaxWidth && tw > this.textMaxWidth ) {        
            sx = this.textMaxWidth / tw;
            t.setScaleX( sx );
        }
        
        h = ( tx + tw * h ) / t.getWidth() * sx;
        v = ( by + bh * v ) / t.getHeight();
        t.setAnchorPoint( h, v );
        t.setPosition( ti.x, ti.y );
        btnSpr.addChild( t );
        btnSpr.text = t;
        btnSpr.textStr = txt;
    }

    setText( upText, downText ) {
        this.up.text = upText;
        this.down.text = downText;
        if ( this.upSprite.text ) {
            this.upSprite.text.removeFromParent();
            this.upSprite.text = null;
        }

        if ( this.downSprite.text ) {
            this.downSprite.text.removeFromParent();
            this.downSprite.text = null;
        }

        if ( upText  && this.upSprite.textInfo ) {
            this._setText( this.upSprite, upText );
        }

        if ( downText  && this.downSprite.textInfo ) {
            this._setText( this.downSprite, downText );
        }
    }

    setIconScale( scx, scy ) {
        if ( this.upSprite.icon ) {
            this.upSprite.icon.setScale( scx, scy );
        }
        
        if ( this.downSprite.icon ) {
            this.downSprite.icon.setScale( scx, scy );
        }
    }

    setTextScale( scx, scy ) {
        if ( this.upSprite.text ) {
            this.upSprite.text.setScale( scx, scy );
        }

        if ( this.downSprite.text ) {
            this.downSprite.text.setScale( scx, scy );
        }
    }

    setTextColor( hexColor ) {
        if ( this.upSprite.text ) {
            this.upSprite.text.setTextColor( hexColor );
        }

        if ( this.downSprite.text ) {
            this.downSprite.text.setTextColor( hexColor );
        }
        
        if ( this.upSprite.textInfo ) {
            this.upSprite.textInfo.color = hexColor;
        }
        
        if ( this.downSprite.textInfo ) {
            this.downSprite.textInfo.color = hexColor;
        }
    }

    setButtonColor( hexColor ) {
        this.up.color = hexColor;
        this.down.color = hexColor;
        let r,g,b = splitHexColor( hexColor );

        this.up.colorR, this.up.colorG, this.up.colorB = r,g,b;
        this.down.colorR, this.down.colorG, this.down.colorB = r,g,b;
        this.upSprite.image.setColorMultiplier( r,g,b );
    }

    setEnabled( bOpt ) {
        if ( bOpt != this.enabled ) {
            if ( bOpt == true ) {
                stopAllTweens( this );
                this.upSprite.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_DOWN, onPointerDown, this );
                this.downSprite.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_DOWN, onPointerDown, this );
                this.upSprite.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_UP, onPointerUp, this );
                this.downSprite.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_UP, onPointerUp, this );
                this.upSprite.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_MOVE, onPointerMove, this );
                this.downSprite.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_MOVE, onPointerMove, this );
                this.enabled = true;
                /*
                if (this.textureTypeImage == true) {
                    this.setColorMultiplier(1, 1, 1);
                    this.setAlpha(1);
                } else {
                    this.setAlpha(1);
                }
                */
                this.setColorMultiplier( 1, 1, 1 );
                this.setAlpha( 1 );
            } else {
                stopAllTweens( this );
                this.upSprite.removeEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_DOWN, onPointerDown, this );
                this.downSprite.removeEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_DOWN, onPointerDown, this );
                this.upSprite.removeEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_UP, onPointerUp, this );
                this.downSprite.removeEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_UP, onPointerUp, this );
                this.upSprite.removeEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_MOVE, onPointerMove, this );
                this.downSprite.removeEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_MOVE, onPointerMove, this );
                this.enabled = false;
                if ( this.textureTypeImage == true ) {
                    //this.setColorMultiplier(0.5, 0.5, 0.5);
                    this.setOverrideColor( this.disable.color );
                    this.setAlpha( this.disable.alpha );
                    this.upSprite.setColorMultiplier( this.up.colorR, this.up.colorG, this.up.colorB );
                } else {
                    this.setOverrideColor( this.disable.color );
                    this.setAlpha( this.disable.spriteTypeAlpha );
                }

                this.upSprite.setVisible( true );
                this.downSprite.setVisible( false );
                this.upSprite.setPosition( this.up.x, this.up.y );
                this.upSprite.setScale( this.up.scaleX, this.up.scaleY );
                this.upSprite.setAlpha( this.up.alpha );
                if ( this.upSprite.text ) {
                    this.upSprite.text.setPosition( this.up.textX, this.up.textY );
                    this.upSprite.text.setColorMultiplier( this.up.textColorR, this.up.textColorG, this.up.textColorB, this.up.alpha );
                }
                
                if ( this.upSprite.icon ) {
                    this.upSprite.icon.setPosition( this.up.iconX, this.up.iconY );
                }
            }    
        }
    }


    setCanceled() {
        let e = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "cancel" );

        e.x = 0;
        e.y = 0;
        onPointerUp( this, e, true );
    }

    forceUp() {
        upButton( this );
    }
}

Button2.cancelMargin = 30;



/***/ }),

/***/ "./engine/src/lib/colors.js":
/*!**********************************!*\
  !*** ./engine/src/lib/colors.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
const Colors = {
    AliceBlue:            0xF0F8FF,
    AntiqueWhite:         0xFAEBD7,
    Aqua:                 0x00FFFF,
    Aquamarine:           0x7FFFD4,
    Azure:                0xF0FFFF,
    Beige:                0xF5F5DC,
    Bisque:               0xFFE4C4,
    Black:                0x000000,
    BlanchedAlmond:       0xFFEBCD,
    Blue:                 0x0000FF,
    BlueViolet:           0x8A2BE2,
    Brown:                0xA52A2A,
    BurlyWood:            0xDEB887,
    CadetBlue:            0x5F9EA0,
    Chartreuse:           0x7FFF00,
    Chocolate:            0xD2691E,
    Coral:                0xFF7F50,
    CornflowerBlue:       0x6495ED,
    Cornsilk:             0xFFF8DC,
    Crimson:              0xDC143C,
    Cyan:                 0x00FFFF,
    DarkBlue:             0x00008B,
    DarkCyan:             0x008B8B,
    DarkGoldenrod:        0xB8860B,
    DarkGray:             0xA9A9A9,
    DarkGreen:            0x006400,
    DarkKhaki:            0xBDB76B,
    DarkMagenta:          0x8B008B,
    DarkOliveGreen:       0x556B2F,
    DarkOrange:           0xFF8C00,
    DarkOrchid:           0x9932CC,
    DarkRed:              0x8B0000,
    DarkSalmon:           0xE9967A,
    DarkSeaGreen:         0x8FBC8F,
    DarkSlateBlue:        0x483D8B,
    DarkSlateGray:        0x2F4F4F,
    DarkTurquoise:        0x00CED1,
    DarkViolet:           0x9400D3,
    DeepPink:             0xFF1493,
    DeepSkyBlue:          0x00BFFF,
    DimGray:              0x696969,
    DodgerBlue:           0x1E90FF,
    FireBrick:            0xB22222,
    FloralWhite:          0xFFFAF0,
    ForestGreen:          0x228B22,
    Fuchsia:              0xFF00FF,
    Gainsboro:            0xDCDCDC,
    GhostWhite:           0xF8F8FF,
    Gold:                 0xFFD700,
    Goldenrod:            0xDAA520,
    Gray:                 0x808080,
    Green:                0x008000,
    GreenYellow:          0xADFF2F,
    Honeydew:             0xF0FFF0,
    HotPink:              0xFF69B4,
    IndianRed:            0xCD5C5C,
    Indigo:               0x4B0082,
    Ivory:                0xFFFFF0,
    Khaki:                0xF0E68C,
    Lavender:             0xE6E6FA,
    LavenderBlush:        0xFFF0F5,
    LawnGreen:            0x7CFC00,
    LemonChiffon:         0xFFFACD,
    LightBlue:            0xADD8E6,
    LightCoral:           0xF08080,
    LightCyan:            0xE0FFFF,
    LightGoldenrodYellow: 0xFAFAD2,
    LightGreen:           0x90EE90,
    LightGray:            0xD3D3D3,
    LightPink:            0xFFB6C1,
    LightSalmon:          0xFFA07A,
    LightSeaGreen:        0x20B2AA,
    LightSkyBlue:         0x87CEFA,
    LightSlateGray:       0x778899,
    LightSteelBlue:       0xB0C4DE,
    LightYellow:          0xFFFFE0,
    Lime:                 0x00FF00,
    LimeGreen:            0x32CD32,
    Linen:                0xFAF0E6,
    Magenta:              0xFF00FF,
    Maroon:               0x800000,
    MediumAquamarine:     0x66CDAA,
    MediumBlue:           0x0000CD,
    MediumOrchid:         0xBA55D3,
    MediumPurple:         0x9370DB,
    MediumSeaGreen:       0x3CB371,
    MediumSlateBlue:      0x7B68EE,
    MediumSpringGreen:    0x00FA9A,
    MediumTurquoise:      0x48D1CC,
    MediumVioletRed:      0xC71585,
    MidnightBlue:         0x191970,
    MintCream:            0xF5FFFA,
    MistyRose:            0xFFE4E1,
    Moccasin:             0xFFE4B5,
    NavajoWhite:          0xFFDEAD,
    Navy:                 0x000080,
    OldLace:              0xFDF5E6,
    Olive:                0x808000,
    OliveDrab:            0x6B8E23,
    Orange:               0xFFA500,
    OrangeRed:            0xFF4500,
    Orchid:               0xDA70D6,
    PaleGoldenrod:        0xEEE8AA,
    PaleGreen:            0x98FB98,
    PaleTurquoise:        0xAFEEEE,
    PaleVioletRed:        0xDB7093,
    PapayaWhip:           0xFFEFD5,
    PeachPuff:            0xFFDAB9,
    Peru:                 0xCD853F,
    Pink:                 0xFFC0CB,
    Plum:                 0xDDA0DD,
    PowderBlue:           0xB0E0E6,
    Purple:               0x800080,
    Red:                  0xFF0000,
    RosyBrown:            0xBC8F8F,
    RoyalBlue:            0x4169E1,
    SaddleBrown:          0x8B4513,
    Salmon:               0xFA8072,
    SandyBrown:           0xF4A460,
    SeaGreen:             0x2E8B57,
    Seashell:             0xFFF5EE,
    Sienna:               0xA0522D,
    Silver:               0xC0C0C0,
    SkyBlue:              0x87CEEB,
    SlateBlue:            0x6A5ACD,
    SlateGray:            0x708090,
    Snow:                 0xFFFAFA,
    SpringGreen:          0x00FF7F,
    SteelBlue:            0x4682B4,
    Tan:                  0xD2B48C,
    Teal:                 0x008080,
    Thistle:              0xD8BFD8,
    Tomato:               0xFF6347,
    Turquoise:            0x40E0D0,
    Violet:               0xEE82EE,
    Wheat:                0xF5DEB3,
    White:                0xFFFFFF,
    WhiteSmoke:           0xF5F5F5,
    Yellow:               0xFFFF00,
    YellowGreen:          0x9ACD32,
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Colors);

/***/ }),

/***/ "./engine/src/lib/grid9.js":
/*!*********************************!*\
  !*** ./engine/src/lib/grid9.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Grid9)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");



class Grid9 extends _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh {
    /**
     *Creates an instance of Grid9.
     * @param {TextureBase} texture
     * @param {number=} x
     * @param {number=} y
     * @param {number=} w
     * @param {number=} h
     * @memberof Grid9
     */
    constructor( texture, x, y, w, h ) {
        super();
        this.__texture = texture;
        if ( x != null && y != null && w != null && h != null ) {
            this.setRect( x, y, w, h );
        }
    }

    /**
     *
     *
     * @param {number} x
     * @param {number} y
     * @param {number} w
     * @param {number} h
     * @memberof Grid9
     */
    setRect( x, y, w, h ) {
        let [tw, th] = [this.__texture.width,this.__texture.height];
        let a = Math.ceil( tw / 3 );
        let b = Math.floor( th / 3 );

        this.__rect = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Rect( x, y, w, h );
        this.setVertexArray( [
            x, y, x + a, y, x + w - a, y, x + w, y,
            x, y + b, x + a, y + b, x + w - a, y + b, x + w, y + b,
            x, y + h - b, x + a, y + h - b, x + w - a, y + h - b, x + w, y + h - b,
            x, y + h, x + a, y + h, x + w - a, y + h, x + w, y + h
        ] );
        this.setTextureCoordinateArray( [
            0, 0, a, 0, tw - a, 0, tw, 0,
            0, b, a, b, tw - a, b, tw, b,
            0, th - b, a, th - b, tw - a, th - b, tw, th - b,
            0, th, a, th, tw - a, th, tw, th
        ] );
        // 1 2 3 4;
        // 5 6 7 8;
        // 9 101112;
        // 13141516;
        this.setIndexArray( [
            0, 1, 4, 1, 5, 4, 1, 2, 5, 2, 6, 5, 2, 3, 6, 3, 7, 6,
            4, 5, 8, 5, 9, 8, 5, 6, 9, 6, 10, 9, 6, 7, 10, 7, 11, 10,
            8, 9, 12, 9, 13, 12, 9, 10, 13, 10, 14, 13, 10, 11, 14, 11, 15, 14] );
        this.setColorArray( [
            0xffffff, 1, 0xffffff, 1, 0xffffff, 1, 0xffffff, 1,
            0xffffff, 1, 0xffffff, 1, 0xffffff, 1, 0xffffff, 1,
            0xffffff, 1, 0xffffff, 1, 0xffffff, 1, 0xffffff, 1,
            0xffffff, 1, 0xffffff, 1, 0xffffff, 1, 0xffffff, 1] );
        this.setTexture( this.__texture );
    }

    get width() {
        return this.__rect.width;
    }

    get height() {
        return this.__rect.height;
    }

    getLocalBounds( rect ) {
        return this.__rect;
    }
}



/***/ }),

/***/ "./engine/src/lib/iconPack.js":
/*!************************************!*\
  !*** ./engine/src/lib/iconPack.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ IconPack)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");



class IconPack extends _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh {
    /**
     *Creates an instance of IconPack.
     * @param {TextureBase} texture
     * @param {number} col
     * @param {number} row
     * @param {number} tw
     * @param {number} th
     * @param {number} [color=0xffffff]
     * @param {number} [alpha=1]
     * @param {number} [spacing=0]
     * @param {number} [margin=0]
     * @memberof IconPack
     */
    constructor( texture, col, row, tw, th, color = 0xffffff, alpha = 1, spacing = 0, margin = 0 ) {
        super();
        this.__isIconPack = true;
        this.__spacing = spacing;
        this.__margin = margin;
        this.__width = tw;
        this.__height = th;
        this.__texture = texture;
        this.__perRow = Math.floor( ( texture.width / tw - this.__margin * 2 ) / ( tw + this.__spacing ) );
        this.setTexture( texture );
        this._$$color = color;
        this.__alpha = alpha;
        this.setColorArray( [color,alpha,color,alpha,color,alpha,color,alpha] );
        this.setVertexArray( [-tw / 2,-th / 2, tw / 2,-th / 2, -tw / 2,th / 2, tw / 2,th / 2] );
        this.setIndexArray( [0,1,2,1,3,2] );
        this.setColRow( col,row );
    }


    setColRow( col,row ) {
        let tw = this.__width;
        let th = this.__height;
        let tx = ( col - 1 ) * ( tw + this.__spacing ) + this.__margin;
        let ty = ( row - 1 ) * ( th + this.__spacing ) + this.__margin;

        this.setTextureCoordinateArray( [tx,ty,tx + tw,ty,tx,ty + th,tx + tw,ty + th] );
        this._$$col = col;
        this.__row = row;
    }

    setById( id ) {
        let col = ( ( id - 1 ) % this.__perRow ) + 1;
        let row = Math.floor( id / this.__perRow ) + 1;

        this.setColRow( col,row );
    }

    getId() {
        return this._$$col + ( this.__row - 1 ) * this.__perRow;
    }

    getColRow() {
        return [this._$$col,this.__row];
    }

    clone( col,row ) {
        return new IconPack( this.__texture,
                             col != null ? col : this._$$col,
                             row != null ? row : this.__row,
                             this.__width, this.__height, this._$$color, this.__alpha, this.__spacing, this.__margin );
    }


    /**
     *
     *
     * @param {boolean=} x
     * @param {boolean=} y
     * @memberof IconPack
     */
    setFlip( x,y ) {
        let tw = this.__width;
        let th = this.__height;
        let tx = ( this._$$col - 1 ) * ( tw + this.__spacing ) + this.__margin;
        let ty = ( this.__row - 1 ) * ( th + this.__spacing ) + this.__margin;

        if ( x && y ) {
            this.setTextureCoordinates( 3,tx,ty,2,tx + tw,ty,1,tx,ty + th,0,tx + tw,ty + th );
        } else if ( x ) {
            this.setTextureCoordinates( 1,tx,ty,0,tx + tw,ty,3,tx,ty + th,2,tx + tw,ty + th );
        } else if ( y ) {
            this.setTextureCoordinates( 2,tx,ty,3,tx + tw,ty,0,tx,ty + th,1,tx + tw,ty + th );
        } else {
            this.setTextureCoordinates( 0,tx,ty,1,tx + tw,ty,2,tx,ty + th,3,tx + tw,ty + th );
        }
    }

    // 임의의 4조각으로 쪼갠다
    sliceMesh( physics ) {
        let col = this._$$col;
        let row = this.__row;
        let tw = this.__width;
        let th = this.__height;
        let tx = ( col - 1 ) * ( tw + this.__spacing ) + this.__margin;
        let ty = ( row - 1 ) * ( th + this.__spacing ) + this.__margin;
        let cx = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( Math.floor( tw * 0.45 ),Math.floor( tw * 0.55 ) ) - 1;
        let cy = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( Math.floor( th * 0.45 ),Math.floor( th * 0.55 ) ) - 1;
        let x1 = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( Math.floor( tw * 0.3 ),Math.floor( tw * 0.7 ) ) - 1;
        let y1 = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( Math.floor( th * 0.3 ),Math.floor( th * 0.7 ) ) - 1;
        let x2 = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( Math.floor( tw * 0.3 ),Math.floor( tw * 0.7 ) ) - 1;
        let y2 = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( Math.floor( th * 0.3 ),Math.floor( th * 0.7 ) ) - 1;
        //log(tx,ty,tw,th,cx,cy);
        let m1 = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh();
        let vtx1 = [-tw / 2, -th / 2, x1 - tw / 2, -th / 2, cx - tw / 2, cy - th / 2, -tw / 2, y1 - th / 2];

        m1.setVertexArray( vtx1 );
        m1.setTextureCoordinateArray( [tx,ty,tx + x1,ty,tx + cx,ty + cy,tx,ty + y1] );
        m1.setIndexArray( [0,1,2,0,2,3] );
        m1.setTexture( this.__texture );
        let m2 = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh();
        let vtx2 = [x1 - tw / 2, -th / 2, tw - tw / 2, -th / 2, tw - tw / 2, y2 - th / 2, cx - tw / 2, cy - th / 2];

        m2.setVertexArray( vtx2 );
        m2.setTextureCoordinateArray( [tx + x1,ty,tx + tw,ty,tx + tw,ty + y2,tx + cx,ty + cy] );
        m2.setIndexArray( [0,1,2,0,2,3] );
        m2.setTexture( this.__texture );
        let m3 = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh();
        let vtx3 = [-tw / 2, y1 - th / 2, cx - tw / 2, cy - th / 2, x2 - tw / 2, th - th / 2, -tw / 2, th - th / 2];

        m3.setVertexArray( vtx3 );
        m3.setTextureCoordinateArray( [tx,ty + y1,tx + cx,ty + cy,tx + x2,ty + th,tx,ty + th] );
        m3.setIndexArray( [0,1,2,0,2,3] );
        m3.setTexture( this.__texture );
        let m4 = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh();
        let vtx4 = [cx - tw / 2, cy - th / 2, tw - tw / 2, y2 - th / 2, tw - tw / 2, th - th / 2, x2 - tw / 2, th - th / 2];

        m4.setVertexArray( vtx4 );
        m4.setTextureCoordinateArray( [tx + cx,ty + cy,tx + tw,ty + y2,tx + tw,ty + th,tx + x2,ty + th] );
        m4.setIndexArray( [0,1,2,0,2,3] );
        m4.setTexture( this.__texture );
        if ( this._$$color ) {
            let color = this._$$color;
            let alpha = this.__alpha;

            m1.setColorArray( [color,alpha || 1,color,alpha || 1,color,alpha || 1,color,alpha || 1] );
            m2.setColorArray( [color,alpha || 1,color,alpha || 1,color,alpha || 1,color,alpha || 1] );
            m3.setColorArray( [color,alpha || 1,color,alpha || 1,color,alpha || 1,color,alpha || 1] );
            m4.setColorArray( [color,alpha || 1,color,alpha || 1,color,alpha || 1,color,alpha || 1] );
        }

        return [m1,m2,m3,m4];
    }
}



/***/ }),

/***/ "./engine/src/lib/listView.js":
/*!************************************!*\
  !*** ./engine/src/lib/listView.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ListView)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _grid9__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./grid9 */ "./engine/src/lib/grid9.js");



/*

ListView;
듀얼에 사용한 것에서 많이 바뀌었음

params = 

stickOnBorder = false;
background = {image,color}  // 구글스러운 스타일
animationFunc = func(this,item,index);
clip = true;
fitHitAreaToScreenWidth // 화면 다 덮는다. 모달처럼. CONFIG 없으면 동작안됨
align = "top" , "bottom"
							bottom 은 setItems를 할 때 즉시 위로 밀어올리게 되어있다.
							add로 하나씩 추가하면 위치가 잘 안맞을 수 있음

//--------------------------------------------------------------------------------------------------------------

Example);
	// 만들때
	// 첫번째 인자가 items이다.
	listView1 = new ListView({}, width, height, spriteFunc, 
		{
			padding = 0,
			cutOffsetBottom = 0,
			fitHitAreaToScreenWidth = true,
			background = {color=0xf0f0f0,image = deckImage,headerHeight = 180},
		});
	listView1.addEventListener("click", onClick, this);
	listView1.addEventListener("movePosition",function(e);
		// e.backgroundY 로 포지션 값이 넘어온다
	end);
	listView1.add(item);
	listView1.setItems(items, forceUpdate, forceRefresh);
	item = {text = itemName, data = {} }
	
Sprite Func);
function spriteFunc_example(listView,item,index,listViewOwner) {
	let text = item.text;
	let d = item.data;
	let spr = new Sprite();
	:
	retrun spr;
}


Refresh 처리);
		listView1.addEventListener("refreshReady", func, data);
		listView1.addEventListener("refreshCancel", func, data);
		listView1.addEventListener("refresh", func, data);
		e.sprite로 리프래시 스프라이트가 넘어옴
		




*/

const ITEM_PADDING = 1;

//let LIST_TOP_MARGIN = 0;
/**
 * @this ListView
 *
 * @param {*} item
 * @param {number} index
 * @param {*} owner
 * @returns {[Sprite,*,number]}
 */
function defaultSpriteFunc( item, index, owner ) {
    const spr = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();
    const back1 = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh.createBox( -Math.floor( this.width / 2 ), -10, this.width, 20, 0xffffff );
    const back2 = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh.createBox( -Math.floor( this.width / 2 ) + 1, -9, this.width - 4, 18, 0xff0000 );

    spr.addChild( back1 );
    spr.addChild( back2 );
    const t1 = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextField( null , item.text );

    t1.setPosition( Math.floor( -t1.getWidth() / 2 ), Math.floor( -t1.getHeight() / 2 + Font.getDefault().getAscender() ) );
    t1.setTextColor( 0xffffff );
    spr.addChild( t1 );

    return [spr, null , 20];
}

/**
 * @this ListView
 *
 * @param {number} y
 * @returns {number}
 */
function getClippedY( y ) {
    if ( this.align == "top" ) {
        if ( y < this.topPosition ) {
            if ( this.itemHeight < this.height ) {
                y = this.topPosition;
            } else if ( y + this.itemHeight < this.height ) {
                y = this.height - this.itemHeight;
            }
        } else {
            if ( this.itemHeight < this.height ) {
                if ( y + this.itemHeight > 0 ) {
                    y = this.topPosition;
                }
            } else {
                if ( this.height < y + this.itemHeight ) {
                    y = this.topPosition;
                }
            }
        }
    } else if ( this.align == "bottom" ) {
        if ( y + this.itemHeight > this.topPosition + this.height ) {
            // 하단 아래로 들어간 경우
            if ( this.itemHeight < this.height ) {
                y = this.height - this.itemHeight - 1;
            } else if ( y > 0 ) {
                y = 0;
            }
        } else {
            if ( this.itemHeight < this.height ) {
                if ( y + this.itemHeight < this.height ) {
                    y = this.height - this.itemHeight - 1;
                }
            } else {
                if ( y + this.itemHeight < this.topPosition + this.height ) {
                    y = this.height - this.itemHeight - 1;
                }
            }
        }
    }

    return y;
}

/**
 * @this ListView
 *
 * @param {number} index
 * @returns {boolean}
 */
function existItemSprite( index ) {
    if ( index >= this.parentSprite.getNumChildren()  || index < 0 ) {
        return false;
    }

    return true;
}

/**
 * @this ListView
 *
 * @param {number} index
 * @returns {[boolean,object?]}
 */
function isItemVisible( index ) {
    if ( !existItemSprite.call( this, index ) || index >= this.parentSprite.getNumChildren() ) {
        return [false, null];
    }

    const itemSprite = this.parentSprite.getChildAt( index );
    const height = itemSprite._height != null ? itemSprite._height : itemSprite.getHeight();
    let y, isVisible;
    let top = 0 + this.cutOffsetTop;
    let bottom = this.height + this.cutOffsetBottom;

    if ( this.clip ) {
        top = this.clip.top != null ? this.clip.top : top;
        bottom = this.clip.bottom != null ? this.clip.bottom : bottom;
    }

    if ( this.dontHide ) {
        isVisible = true;
    } else {
        y = itemSprite.getY() + this.parentSprite.getY();
        isVisible = y + height / 2 > top && y - height / 2 < bottom;
    }

    return [isVisible, itemSprite];
}

/**
 * @this ListView
 *
 * @param {number} i
 * @param {*} v
 * @param {*} oldTable
 */
function createChildSprite( i, v, oldTable ) {
    // TODO: 뭐뭐를 this 의 변수로 빼야하나
    let y = this.y1;
    //let col = 1;
    let spr;
    // 스프라이트 재사용
    let customWidth, customHeight;

    if ( oldTable ) {
        //log(Log.UI, v.text,oldTable[v],"재활용");
        spr = oldTable[v];
        [customWidth, customHeight] = [spr._$$customWidth, spr._$$customHeight];
    }

    if ( spr ) {
    } else {
        [spr, customWidth, customHeight] = this.spriteFunc( this,v, i, this.owner );
        spr._$$customWidth =  customWidth  != null ?  customWidth  : spr._$$customWidth;
        spr._$$customHeight =  customHeight  != null ?  customHeight  : spr._$$customHeight;
    }

    v.targetPosY = y;
    const h =  customHeight  != null ?  customHeight  : spr.getHeight( );
    const w =  customWidth  != null ?  customWidth  : spr.getWidth( );

    if ( i == 0 && this.params.pullToRefresh ) {
        this.pullLength = h + this.params.padding;// * 2.5; -- 조금만 당겨도 리프레시가 일어나서 좀 더 늘려놓음 by 세미콜론맨
        y = y - this.pullLength;
    }

    if ( ! this.animationFunc ) {
        spr.setPosition( this.width / 2 + ( spr.getWidth() - w ) / 2, y + Math.floor( h / 2 ) );
    } else {
        spr.setPosition( this.width / 2 + ( spr.getWidth() - w ) / 2, y + Math.floor( h / 2 ) );
        this.animationFunc( this, spr, i );
    }

    this.parentSprite.addChild( spr );

    if ( ! spr._skipLineFeed || i == this.items.length - 1 ) {
        this.y1 = this.y1 + h + this.params.padding;
    }

    this.items[i].sprite = spr;
    spr.setVisible( false );
}

/**
 * @this ListView
 *
 * @param {number} start
 * @param {*} oldTable
 */
function createChildSprites( start, oldTable ) {
    if ( this.items == null || this.items.length == 0 ) {
        return;
    }

    start = start || 0;

    for ( let i = start; i < this.items.length; i++ ) {
        const v = this.items[i];

        if ( !existItemSprite.call( this, i ) ) {
            createChildSprite.call( this, i, v, oldTable );

            if ( this.sprDynamic != null ) {
                this.itemHeight = Math.max( this.y1, this.y2 ) - this.params.padding - this.params.topMargin;

                if ( this.itemHeight > this.height - this.targetPosY ) {
                    break;
                }
            }
        }
    }
}

/**
 * @this ListView
 *
 */
function invalidateVisible() {
    if ( this.lowerbound && this.upperbound ) {
        if ( isItemVisible.call( this, this.lowerbound ) && isItemVisible.call( this, this.upperbound ) &&
			!isItemVisible.call( this, this.lowerbound - 1 ) &&
			!isItemVisible.call( this, this.upperbound + 1 ) ) {
            return;
        }
    }

    this.lowerbound = null;
    this.upperbound = null;

    if ( this.items ) {
        for ( const i in this.items ) {
            const v = this.items[i];

            if ( this.sprDynamic != null && !existItemSprite.call( this, i ) ) {
                if ( this.upperbound ) {
                    // upperbound 가 설정된 이후에는 리스트 항목을 만들지 않는다(보이지 않는 부분이므로 생성하지 않는다);
                    break;
                }

                // 보이는 부분에 대해서 리스트 항목 추가 생성
                createChildSprites.call( this, i );
            }

            const [isVisible, itemSprite] = isItemVisible.call( this, i );

            if ( itemSprite != null && itemSprite.isVisible() != isVisible ) {
                //log(v.text,"보이기",isVisible);
                itemSprite.setVisible( isVisible );
                const e = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "setVisible" );

                e.visible = isVisible;
                itemSprite.dispatchEvent( e );
            }

            if ( this.lowerbound != null ) {
                if ( isVisible ) {
                    //lowerbound는 가장 먼저 발견된 보이는 인덱스
                    if ( this.lowerbound != i ) {
                        const e = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "moved" );

                        e.lowerbound = i;
                        this.dispatchEvent( e );
                    }

                    this.lowerbound = i;
                }
            } else if ( this.upperbound != null ) {
                if ( ! isVisible ) {
                    //upperbound는 보이지 않는 인덱스 - 1;
                    this.upperbound = parseInt( i ) - 1;
                }
            }
        }
    }

    this.upperbound = this.upperbound != null ? this.upperbound : this.items.length;
}

/**
 * @this ListView
 *
 */
function onEnterFrame() {
    //if (this .locked) { return }
    let dstY;

    if ( this.locked == true ) {
        dstY = this.pullLength || 0;
    } else {
        dstY = this.targetPosY;
    }

    if ( this.drag ) {
    } else {
        const y = ( dstY * 0.5 + this.currentPosY * 4.5 ) / 5;
        const delta = Math.abs( this.currentPosY - y );

        if ( delta > 0.1 ) {
            this.currentPosY = y;
            this.parentSprite.setY( y );
            invalidateVisible.call( this );
        } else {
            this.parentSprite.setY( this.targetPosY );
            this.removeEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.ENTER_FRAME, onEnterFrame, this );
        }

        //e.stopPropagation();
        this.setBackgroundY( y );
    }

    const e = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "movePosition" );

    e.y = this.parentSprite.getY();
    e.backgroundY = e.y * 0.9;
    this.dispatchEvent( e );
}

/**
 * @this ListView
 *
 * @param {*} e
 */
function onPointerDown( e ) {
    //log(Log.UI, "pointerDown:", this .locked, this .isVisible());

    if ( ! this.locked && this.isVisible() ) {
        const { x: ex, y: ey } = this.globalToLocal( e.x, e.y );
        const { x, y } = this.hitArea.globalToLocal( e.x, e.y );
        const [w, h] = [this.hitArea.getWidth(), this.hitArea.getHeight()];

        // 조작감 좋게 해주려고 약간 여유있게 해줌.
        //if (this .hitArea.hitTestPoint(e.x, e.y)) {
        const minX = Math.min( 0, ( this.width - w ) / 2 );
        let minY;

        if ( this.params.background ) {
            minY = this.currentPosY * 0.9 - 10;//(this .topPosition || 10) - 10;
        } else {
            minY = 0;
        }

        if ( x > minX && x < w && y > minY - this.params.margin && y < h + this.params.margin ) {
            let selectedIndex;

            for ( let i = 0; i < this.parentSprite.getNumChildren(); i++ ) {
                const spr = this.parentSprite.getChildAt( i );
                //log(Log.UI, i, e.x, e.y, spr.hitTestPoint(e.x, e.y));

                if ( spr.hitTestPoint( e.x, e.y ) ) {
                    selectedIndex = i;
                    break;
                }
            }

            this.clickIndex = selectedIndex;
            /*
			if (! selectedIndex) {
			
				let event = new Event("close");
				event.x = e.x;
				event.y = e.y;
				this .dispatchEvent(event);
			end*/
            [this.startPosX, this.startPosY] = [ex, ey];
            this.originalPosY = this.parentSprite.getY();
            this.lastPosY = ey;
            this.currentPosY = this.originalPosY + ey - this.startPosY;
            this.velY = 0;
            this.pointerTime = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.now();
            this.drag = true;
            this.isClick = true;
            e.stopPropagation();
        } else {
            const event = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "close" );

            event.x = e.x;
            event.y = e.y;
            this.dispatchEvent( event );
            /*
			if (this .params.moreThanOne == null ) {
				e.stopPropagation();
			}
			*/
            e.stopPropagation();
        }
    }
}

/**
 * @this ListView
 *
 * @param {*} e
 */
function onPointerUp( e ) {
    if ( this.drag && this.isVisible() ) {
        const { y: ey } = this.globalToLocal( e.x, e.y );

        this.drag = false;
        const deltaTime = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.now() - this.pointerTime;  // 시간이 길수록 천천히 움직인 것

        this.velY = this.velY / Math.pow( 3, ( deltaTime / 1000 * 30 ) );
        const deltaY = ey - this.startPosY;
        const deltaY2 = this.velY * 10;

        this.targetPosY = getClippedY.call( this, this.originalPosY + deltaY + deltaY2 );

        if ( this.pulled ) {
            console.log( "당겼음" );
            this.pulled = false;
            const e = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "refresh" );

            e.sprite = this.parentSprite.getChildAt( 1 );
            e.item = this.items[1];
            this.dispatchEvent( e );
            this.setLocked( true );
        } else if ( this.isClick && this.itemTouchEnable ) {
            //for (let i=1;i<=this ;i++) {
            if ( this.clickIndex == null ) {
                const event = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "close" );

                event.x = e.x;
                event.y = e.y;
                this.dispatchEvent( event );
            } else {
                for ( let i = 0; i < this.items.length; i++ ) {
                    //let spr = this .parentSprite.getChildAt(i);
                    const spr = this.items[i].sprite;

                    if ( spr && spr.hitTestPoint( e.x, e.y ) ) {
                        let ex, ey = this.globalToLocal( e.x, e.y );
                        const _e = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "click" );

                        //e.data = {index=i,item=this .items[i]}
                        _e.index = i;
                        _e.item = this.items[i];
                        _e.item._target = spr;
                        _e.x = ex;
                        _e.y = ey;
                        //log(Log.UI, e.index,e.item);
                        this.dispatchEvent( _e );
                        break;
                    }
                }
            }
        }

        this.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.ENTER_FRAME, onEnterFrame, this );
        e.stopPropagation();
    }
}

//마우스 드래그 동작을 적당히 붙여넣어서 휠이 동작하게 처리함.
/**
 * @this ListView
 *
 * @param {*} e
 * @returns
 */
function onPointerWheel( e ) {
    if ( this.drag ) {
        return;
    }

    if ( !this.isVisible() ) {
        return;
    }

    let { x: ex, y: ey } = this.globalToLocal( e.x, e.y );
    //from pointer down, 히트 영역 검사 부분
    let { x, y } = this.hitArea.globalToLocal( e.x, e.y );
    const [w, h] = [this.hitArea.getWidth(), this .hitArea.getHeight()];

    // 조작감 좋게 해주려고 약간 여유있게 해줌.
    const minX = Math.min( 0, ( this.width - w ) / 2 );
    let minY;

    if ( this.params.background ) {
        minY = this.currentPosY * 0.9 - 10;
    } else {
        minY = 0;
    }

    //히트 영역 검사
    if ( !( x > minX && x < w && y > minY - this.params.margin && y < h + this.params.margin ) ) {
        return;
    }

    //from pointer down, 마우스 다운시 처리
    [this.startPosX, this.startPosY] = [ex, ey];
    this.originalPosY = this.parentSprite.getY();
    this.lastPosY = ey;
    this.currentPosY = this.originalPosY + ey - this.startPosY;
    this.velY = 0;
    this.pointerTime = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.now();
    //from pointer move, 드래그 처리 부분
    const WheelSpeed = 1;//휠 속도 처리 부분

    ( {  y: ey } = this.globalToLocal( e.x, e.y ) );
    y = this.originalPosY + ey - this.startPosY;

    if ( this.parentSprite.getY() != y ) {
        this.currentPosY = y;
        this.parentSprite.setY( y );
        invalidateVisible.call( this );
        this.setBackgroundY( y );
        const e = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "movePosition" );

        e.y = this.parentSprite.getY();
        e.backgroundY = e.y * 0.9;
        this.dispatchEvent( e );
    }

    this.velY = this.velY + ( ey - this.lastPosY );
    let deltaTime = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.now() - this.pointerTime;  // 시간이 길수록 천천히 움직인 것

    deltaTime = Math.max( deltaTime, 100 );
    this.velY = this.velY / Math.pow( 3, ( deltaTime / 1000 * 30 ) );
    this.pointerTime = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.now();
    //from pointer up, 드래그 후 마우스 업하는 부분
    const deltaY = ey - this.startPosY;
    const deltaY2 = this.velY * 10;

    this.targetPosY = getClippedY.call( this, this.originalPosY + deltaY + deltaY2 );
    //애니메이션 처리
    this.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.ENTER_FRAME, onEnterFrame, this );
    e.stopPropagation();
}

/**
 * @this ListView
 *
 * @param {*} e
 */
function onPointerMove( e ) {
    if ( this.drag && this.isVisible() ) {
        const { x: ex, y: ey } = this.globalToLocal( e.x, e.y );
        let y = this.originalPosY + ey - this.startPosY;

        if ( this.stickOnBorder ) {
            y = getClippedY.call( this, y );
        }

        if ( this.parentSprite.getY() != y ) {
            this.currentPosY = y;
            this.parentSprite.setY( y );
            invalidateVisible.call( this );
            this.setBackgroundY( y );
            const e = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "movePosition" );

            e.y = this.parentSprite.getY();
            e.backgroundY = e.y * 0.9;
            this.dispatchEvent( e );
        }

        this.velY = this.velY + ( ey - this.lastPosY );
        const deltaTime = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.now() - this.pointerTime;  // 시간이 길수록 천천히 움직인 것

        this.velY = this.velY / Math.pow( 3, ( deltaTime * 30 ) );
        this.pointerTime = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.now();

        if ( Math.abs( this.startPosX - ex ) > 10 || Math.abs( this.startPosY - ey ) > 10 ) {
            this.isClick = false;
        }

        if ( ! this.pulled && this.pullLength && this.pullLength <= y ) {
            console.log( "당기기 준비" );
            this.pulled = true;
            const e = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "refreshReady" );

            e.sprite = this.parentSprite.getChildAt( 1 );
            e.item = this.items[1];
            this.dispatchEvent( e );
        } else if ( this.pulled && this.pullLength && y < this.pullLength ) {
            console.log( "당기기 취소" );
            this.pulled = false;
            const e = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "refreshCancel" );

            e.sprite = this.parentSprite.getChildAt( 1 );
            e.item = this.items[1];
            this.dispatchEvent( e );
        }

        //log(Log.UI, this .currentPosY);
        e.stopPropagation();
        this.lastPosY = ey;
    }
}

//-------------------------------------------------------------------------------------------------------------------
// ListView.add(item);
// ListView.insert(item, pos);
//-------------------------------------------------------------------------------------------------------------------

/**
 * @this ListView
 *
 * @param {*} v
 * @param {number} pos
 */
function insertItem( v, pos ) {
    pos = pos != null ? pos : this.items.length;

    if ( typeof v == "object" ) {
        this.items.splice( pos, 0, { text: v[0], data: v[1] } );
    } else if ( typeof v == "string" ) {
        this.items.splice( pos, 0, { text: v } );
    }
}



class ListView extends _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite {
    //-------------------------------------------------------------------------------------------------------------------
    // ListView.constructor(itemTable, height, params);
    //-------------------------------------------------------------------------------------------------------------------

    constructor( itemTable, width, height, params ) {
        super();
        params = params  != null ? params  : {};
        this.params = params;
        params.topMargin = params.topMargin != null ? params.topMargin : 0;
        params.bottomMargin = params.bottomMargin  != null ? params.bottomMargin  : 0;
        this.height = height != null ? height : _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalViewport.height;
        this.width = width != null ? width : _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalViewport.width;
        this.dontHide = params.dontHide;
        this.lockColumn = params.lockColumn;
        this.owner = params.owner;
        this.sprDynamic = params.sprDynamic;
        this.animationFunc = params.animationFunc;
        this.align = params.align != null ? params.align : "top";
        this.stickOnBorder = params.stickOnBorder;
        // 상하 잘리는 범위 옵셋 지정
        this.cutOffsetTop = params.cutOffsetTop != null ? params.cutOffsetTop : 0;
        this.cutOffsetBottom = params.cutOffsetBottom  != null ? params.cutOffsetBottom  : 0;
        this.topPosition = 0;

        // background;
        if ( params.background ) {
            this.topPosition = params.background.headerHeight;
            this.makeBackground();
        }

        const margin = this.cutOffsetTop + this.cutOffsetBottom + params.topMargin + params.bottomMargin;

        this.setCustomBounds( 0, 0, width, height + margin );
        this.refreshHitArea();

        // 리스트아이템이 이 아래에 들어감
        this.soundTimers = [];
        this.parentSprite = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();
        this.parentSprite.setY( this.topPosition );
        this.addChild( this.parentSprite );
        this.spriteFunc = params.spriteFunc != null ? params.spriteFunc : defaultSpriteFunc;
        this.targetPosY = 0;
        this.currentPosY = 0;
        params.padding = params.padding != null ? params.padding : ITEM_PADDING;
        //params.topMargin = params.topMargin || LIST_TOP_MARGIN;
        this.items = [];
        this.setItems( itemTable );
        this.itemTouchEnable = true;
        params.margin =  params.margin != null ?  params.margin : 0;
        this.clip = params.clip;
        this.updateClip();
        this.pullLength = undefined;
    }

    updateClip() {
        if ( this.clip ) {
            this.setClip( 0, 0, this.width, this.height );
        }
    }



    //-------------------------------------------------------------------------------------------------------------------
    // ListView.setLocked(v);
    //-------------------------------------------------------------------------------------------------------------------

    setLocked( v ) {
        if ( this.locked && v == null ) {
            this.currentPosY = this.pullLength;
        }

        this.locked = v;
    }

    //-------------------------------------------------------------------------------------------------------------------
    // ListView.refreshHitArea();
    //-------------------------------------------------------------------------------------------------------------------

    refreshHitArea() {
        let m;

        if ( this.params.fitHitAreaToScreenWidth ) {
            m = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh.createBox( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.left, 0, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.width, this.height, 0xff0000 );
        } else {
            m = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh.createBox( 0, 0, this.width, this.height, 0xff0000 );
        }

        m.setAlpha( 0.2 );
        m.setVisible( false );
        this.addChild( m );

        if ( this.hitArea ) {
            this.hitArea.removeFromParent();
        }

        this.hitArea = m;
        this.hitArea.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_DOWN, onPointerDown, this );
        this.hitArea.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_UP, onPointerUp, this );
        this.hitArea.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_MOVE, onPointerMove, this );
        //this.hitArea.addEventListener(Event.POINTER_WHEEL, onPointerWheel, this);
    }

    //-------------------------------------------------------------------------------------------------------------------
    // ListView.setCurY(y, stopScroll);
    //-------------------------------------------------------------------------------------------------------------------

    /**
     *
     *
     * @param {number=} [y=null]
     * @param {boolean} [stopScroll=false]
     * @memberof ListView
     */
    setCurY( y = null, stopScroll = false ) {
        if ( y == null ) y = this.currentPosY; 

        this.targetPosY = y;
        this.removeEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.ENTER_FRAME, onEnterFrame, this );

        if ( stopScroll ) {
            this.currentPosY = y;
            this.parentSprite.setY( y );
        } else {
            //log(Log.UI, this.currentPosY,this.targetPosY);
            this.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.ENTER_FRAME, onEnterFrame, this );
        }

        invalidateVisible.call( this );
    }


    add( item ) {
        insertItem.call( this, item );
        this.setItems();
    }

    insert( item, pos ) {
        insertItem.call( this, item, pos );
        this.setItems();
    }

    //-------------------------------------------------------------------------------------------------------------------
    // ListView.getIndex(item);
    // ListView.getItem(index);
    // ListView.setItem(item, index);
    // ListView.getNumOfItems();
    //-------------------------------------------------------------------------------------------------------------------

    getIndex( item ) {
        return this.items.indexOf( item );
    }

    getItem( index ) {
        return this.items[index];
    }

    setItem( item, index ) {
        this.removeAt( index );
        this.insert( item, index );
    }

    getNumOfItems() {
        return this.items.length;
    }


    //-------------------------------------------------------------------------------------------------------------------
    // ListView.refresh();
    //-------------------------------------------------------------------------------------------------------------------

    // 리스트 스프라이트를 다시그린다.
    refresh() {
        this.setItems( null , false, true );
    }

    //-------------------------------------------------------------------------------------------------------------------
    // ListView.setItems(itemTable, forceUpdate, forceRefresh);
    //-------------------------------------------------------------------------------------------------------------------

    /**
     *
     *
     * @param {[]=} [itemTable = null]
     * @param {boolean} [forceUpdate = false]
     * @param {boolean} [forceRefresh = false]
     * @memberof ListView
     */
    setItems( itemTable = null, forceUpdate = false, forceRefresh = false ) {
        if ( this.y1 == null || this.y2 == null || forceUpdate || itemTable != null || this.sprDynamic == null ) {
            this.y1 = 0 + this.params.topMargin;
            this.y2 = 0 + this.params.topMargin;
        }

        let oldTable, oldParentSprite;

        if ( forceUpdate || itemTable != null ) {
            this.parentSprite.clearChildren();
            this.items = [];

            //k,v 테이블로 바꿈
            if ( itemTable != null ) {
                for ( const i in itemTable ) {
                    const v = itemTable[i];

                    insertItem.call( this, v );
                }
            }
        } else if ( forceRefresh ) {
            const { x, y } = this.parentSprite.getPosition();

            this.parentSprite.clearChildren();
            this.parentSprite.setPosition( x, y );
        } else {
            oldParentSprite = this.parentSprite;
            oldTable = this._lastSprites;
            oldParentSprite.removeFromParent();
            this.parentSprite = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();
            this.addChild( this.parentSprite );
            this.parentSprite.position = oldParentSprite.getPosition();
        }

        this.lowerbound = null;
        this.upperbound = null;

        if ( this.items != null ) {
            // 리스트 항목을 처음 부터 추가
            createChildSprites.call( this, 0, oldTable );
        }


        //전체 아이템의 세로 사이즈
        //this.itemHeight = y - this.params.padding;
        if ( this.sprDynamic == null ) {
            this.itemHeight = Math.max( this.y1, this.y2 ) - this.params.padding - this.params.topMargin + this.params.bottomMargin;

            //변경된 사이즈 처리
            if ( this.itemHeight < this.height ) {
                if ( this.targetPosY + this.itemHeight < 0 ) {
                    this.targetPosY = 0;
                    this.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.ENTER_FRAME, onEnterFrame, this );
                }
            }

            if ( this.items != null ) {
                this._lastSprites = [];

                for ( const i in this.items ) {
                    const v = this.items[i];

                    if ( i < this.parentSprite.getNumChildren() ) {
                        this._lastSprites[v] = this.parentSprite.getChildAt( i );
                    } else {
                        this._lastSprites[v] = null;
                    }
                }
            } else {
                this._lastSprites = null;
            }
        }

        if ( this.align == "bottom" ) {
            this.parentSprite.setY( this.height - this.itemHeight );
        }

        invalidateVisible.call( this );

        if ( this.align == "bottom" ) {
            this.targetPosY = this.height - this.itemHeight - 1;
            this.parentSprite.setY( this.targetPosY );
            //this.addEventListener(Event.ENTER_FRAME, onEnterFrame, this);
        }
    }

    //-------------------------------------------------------------------------------------------------------------------
    // ListView.clear();
    // ListView.remove(item);
    // ListView.removeAt(index);
    //-------------------------------------------------------------------------------------------------------------------

    clear() {
        for ( const i in this.soundTimers ) {
            const t = this.soundTimers[i];

            t.stop();
        }

        this.soundTimers = [];

        this.items = [];
        this.setItems();
    }

    remove( item ) {
        const i = this.items.indexOf( item );

        console.assert( i >= 0 );
        this.removeAt( i );
    }

    removeAt( index ) {
        this.items.splice( index, 1 );
        this.setItems();
    }

    //-------------------------------------------------------------------------------------------------------------------
    // ListView.moveTo(index);
    //-------------------------------------------------------------------------------------------------------------------

    moveTo( index ) {
        index = index || 1;

        if ( this.items && this.items.length > 0 ) {
            if ( index > this.items.length ) {
                index = this.items.length;
            }

            this.targetPosY = -this.items[index].targetPosY;

            if ( this.targetPosY < 0 ) {
                if ( this.itemHeight < this.height ) {
                    this.targetPosY = this.topPosition;
                } else if ( this.targetPosY + this.itemHeight < this.height ) {
                    this.targetPosY = this.height - this.itemHeight;
                }
            }
        } else {
            this.targetPosY = this.topPosition;
        }

        if ( this.currentPosY != this.targetPosY ) {
            this.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.ENTER_FRAME, onEnterFrame, this );
        }
    }

    //-------------------------------------------------------------------------------------------------------------------
    // ListView.setItemsTouchDisabled();
    // ListView.setItemsTouchEnabled();
    //-------------------------------------------------------------------------------------------------------------------

    // 버튼 터치 가능/불가능하게
    setItemsTouchDisabled() {
        this.itemTouchEnable = false;
        const e = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "itemsTouchDisabled" );

        this.dispatchEvent( e );
    }

    setItemsTouchEnabled() {
        this.itemTouchEnable = true;
        const e = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "itemsTouchEnabled" );

        this.dispatchEvent( e );
    }

    //-------------------------------------------------------------------------------------------------------------------
    // ListView.makeBackground();
    //-------------------------------------------------------------------------------------------------------------------

    makeBackground() {
        if ( this.params.background.image ) {
            const img = this.params.background.image;
            const [w, h] = [img.getWidth() / img.getScaleX(), img.getHeight() / img.getScaleY()];
            const [sx, sy] = [_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.width / w,( this.topPosition - 10 ) / h];
            const minScale = Math.max( sx, sy );
            const maxScale = Math.max( sx, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.height / h );//*1.2;
            const minY = ( this.topPosition - 10 ) / 2;
            const maxY = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.height / 2;

            //log (Log.UI, "해더이미지",w,h,minScale,maxScale,"물리가로폭",CONFIG.PW);
            img.setScale( minScale );
            img.setPosition( this.width / 2 - w * minScale / 2, minY - h * minScale / 2 );
            this.addChild( img );
            this.headerImage = img;
            this.headerImageMinScale = minScale;
            this.headerImageMaxScale = maxScale;
            this.headerImageMinY = minY;
            this.headerImageMaxY = maxY;
        }

        const s = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Shape();

        s.makeBox( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.left,
                   -10,
                   _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.width,
                   _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.height + 10,// - this.getY() + 10, 
                   this.params.background.color || 0xffffff );
        this.addChild( s );
        this.background = s;
        this.setBackgroundY( this.topPosition );
    }


    //-------------------------------------------------------------------------------------------------------------------
    // ListView.setBackgroundY(y);
    //-------------------------------------------------------------------------------------------------------------------

    setBackgroundY( y ) {
        if ( ! this.background ) {
            return;
        }

        y = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.clamp( y, 0, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.height / 0.9 );

        if ( this.params.background.image ) {
            const img = this.headerImage;
            const [w, h] = [img.getWidth() / img.getScaleX(), img.getHeight() / img.getScaleY()];
            const v = y / _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.height;
            const scale = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.lerp( this.headerImageMinScale, this.headerImageMaxScale, v );

            y = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.lerp( this.headerImageMinY, this.headerImageMaxY, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.linear( v ) );
            this.headerImage.setScale( scale );
            this.headerImage.setPosition( this.width / 2 - w * scale / 2, y - h * scale / 2 );
            const v2 = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.lerp( this.params.background.darkLevel || 0.5, 1.0, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.linear( v ) );

            this.headerImage.setColorMultiplier( v2, v2, v2 );
        }

        this.background.setY( y * 0.9 > 0 && y * 0.9 || 0 );
    }


    //-------------------------------------------------------------------------------------------------------------------
    // ListView.fadeIn(dur);
    //-------------------------------------------------------------------------------------------------------------------

    fadeIn( dur ) {
        //log(Log.UI, "페이드인효과");
        this.parentSprite.setAlpha( 0 );
        new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( this.parentSprite, dur || 1000, { alpha: 1 } );
    }

    //-------------------------------------------------------------------------------------------------------------------
    // ListView.getVisibleItemSprites();
    //-------------------------------------------------------------------------------------------------------------------

    getVisibleItemSprites() {
        const t = [];

        for ( let i = this.lowerbound; i <= this.upperbound; i++ ) {
            t.push( this.items[i].sprite );
        }

        return t;
    }
}



/***/ }),

/***/ "./engine/src/lib/mabiMML.js":
/*!***********************************!*\
  !*** ./engine/src/lib/mabiMML.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MabiMML)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");





const destiny = `
MML@t106L8r16G#.ABB>C16C.&C<E.F#.&F#A.B.>D<B.BB16B16B16BAAG16GF#.r.D#16AGGA16B.G#ABB>C16C.&Cr16E.DCC<B16B.&BF#E16EB16B16B16BA16A.GGF#AG16G16E2>F#.E.<B>G.F#.&F#A.G.<A16>e16F.E.<A>F.E.<A>G.F.&F<G32>C#32E32A4.&A32r<FFF16F.<AB->CC<B-16>F.&FrB-.B-16D16E16FFFF16F.GEDDE16C.&CrG.A.FDDE16F.DEFDA16A.&ArF.A16F16G16AAAA16A.B-GF16G.&Gr4A4>E4F<FFF16F.<AB->CC<B-16>F.&F>C<A.B-16D16E16FFFF16F.EFG16A2&A16rAB-F#o1B>B<B>B<B->B-<B->B-<A>A<A>AD>D<D>D<G#>G#<G#>G#<A>A<A>A<D4>D<D4A>D<DG.>D16G4<CG>C<CF.>C16F<F<B->FB-<B-B.B16r4B.>BB.E>E<F#>F#<G#>G#<E4o4B>C16C.&Cr<F#GAAB16B.&Br4r16B16B16B16BAAG16GF#.r.D#16AGGA16B.G#ABB>C16C.&Cr16E.DCC<B16B.&Br4r16B16B16B16BA16A.GGF#AG16G16o2E>E<E>E<D>D<D>D<C>C<C>C<<B>B<B>BD>D<D>D<C>C<C>C<B->B-<B->B-<A2L32DA1.r4.r16.,
v14r16L8D.DEG#.G.&GC.C.&CF#.F#.rG.G.&GE4E4D#4F#4r16E.ED#D4D4<<A.>AE16<AD.>D.<DG.>GD16<GCG>C<CF#4>F#<F#<B.>B.<B>E>E<E>E<D>D<D>D<C>C<C>C<<B>B<B>BD>D<D>D<C>C<C>C<<B->B-<B->B-<A2>D4>D4<DA>D4<G4>G.D16<G>DG<GC4>C.<G16C4>C4<F4>F.C16<F>CF4<<B-4>B-4<B->FB-<B-B4>B4<BB>B4C4>C.<G16C4>C4<C#4>C#.<A16C#A>C#<C#D4>D4<DA>D4<G4>G..D16<G>DG<GC4>C.<G16C4>C4<E-4>E-.<E-16DD>D<D>>v15A.G.GrGAEG.F.F4.DEFF16E.EFEGF16F16D2rAB-F#A.G.GrGAEG.F.F4FGFE.E.ED#.B.AAG#G#A16BG#.ABo1A4>A4DA>D<DG4>G<GCG>C<CF#4>F#4<<B4>B4E16>E<E16>E<F#G#>EG#<G#<A4>A4DA>D<DF4>F<FEB>E<E<A.>E16A4<B>F#B<Bo5F#.E.<B>F#.E.<B>G.F#.&F#A.G.<A16>E16F.E.<A>F.E.<A>G.F.&FL32rC#EA4.&Arr<<F#A>CE1&E4.r4.rrr,
v14r16<L8E.F#G#<A2>D4.<F#G2>C2<F#4.AB2r16E.EF#G#.>E.&E>L4EGF#AAGL8<AG16G.&G>E.E<A.>E4D#4>F#.E.<BB.B.GB.B.&B>D#.D#.r<A.A.rA.A.rA.A.&Ar2<A.>C4r.F.A.B-.D16r4.F.F.<B-.B-16r4.>D.<B-.>C2rC.E.C.<A16r4.>A4.F2rD.D.F.C16r4.G.F.B-.C16r4E4A4A4r4.>C.<A.B-2rF.F.D2r<B-.>E-.F.D-16r4F#4C4>A.G.&GA.B-.&B->C.<F.&FE.F.&FF.E.&EF.E.&ED.<A.A.B-.><F4L2DDE-D<AB>E<B4>E4L8E-.G.CE-.E-.CE.F#.>D<B4E4E.CC.<B.>D.rE16>E.ED#D<E.G.D.G.CF#.F#.DA.F.AA.G#.&G#E4ECD#<B.B.L2>GGBAAAAG;
`;
const ahchoo = `
MML@t128v15>>L4F2E2D.L8C16<B-16>C<B-AGG>C<F2ECD2<CDDD16E16v14o1G>GL16>EFGArGD<B-GD<B-GL8>C2C#2rA>DEFA>C4L16rv15FG>C<FG>L32C.<C.FG>CFG>C<CFG>CFG>C2&C8&C&C2L8ro4FF4v14o1B-4>B-<B-B->B-rC4.>C<CrCB-4<A4>A<AA4>A4D4>D<DrD>D4<<B-4>B-<B-B->B-rC4.>C<CrC>C4<C#4>C#<C#C#4>C#<D4>D4<AD>D<D4<B4>B<BB4>B4<B-4>B-<B-B-4>B-4<A4>A<AA4>A4D4>D<DD4>D4<<G>G<GA4A>A4<B->B-<B-B4B>B4C4>C<GCG>C<Cr>C<C4r4>C<C<B-4B-4>C4C4D-4D-A->E-4<E-.<A-.>A-<A-4A->A-<A-4A->A-<A-4A->A-<A-4G>G<G4G>G<G>C4>C<C>C<C>C<C>C<F>F<F>F<F>F<FE-4>E-<E->E-<E->E-<E-D4>D<DF#4>F#<F#G4>G<G-4F4<B-.A-.>A-<A-4A->A-<A-4A->A-<A-4A->A-<A-4G>G<G4G>G<G>C4>C<C>C<C>C<C>C<F>F<F>F<F>F<FE-4>E-<E->E-<E->E-<E-D4>D<DF#4>F#<F#F4>F<B->B-C4<B4v15o5C#4C#>C#4<<EEEED#D#>C#C#<BBA#16B.&BB>B<BA#B>C#DDC#C#16<G#.GG#>C#16<B.A4rAG#AB16>C#.&C#r4.C#D#E4EEED#<A#>D#C#4<BB4A#4B.>C#.&C#<G#.G#16rEEEED#D#>C#C#<BBA#16B.&BB.B16BA#B>C#DDC#C#16<G#.GG#>C#16<B.AA.A16AG#AB16>C#.&C#rC#C#C#D#E4EEED#<A#>D#C#4<BB4B4B4t76L16>>C#.<C#.F#B.<B.>EA.<A.>EL32o3rF#A>>CG#2.&G#&G#16.o2E.B.>EF#.G#16&G#64&G#2.&G#2.,
v14>B-2G2F.r.rCr2<GF2r2v15F2E2D2E.E16F16G2F.E8C1.&&C2L8rCC4rEEFF4rEF4A4E4F4r4GFFEEDDCC4G4F4rEEFF4rEF4A4E4F4rB-B-B-B-AAGGFF4EEF4A4A.A16AGF16G16G4rEEEG>DC4.C.C16C<B-AG4AF4.AAAF4.G4.rF16G16AGFG4A4B-4.r4AGFG4.r2.F4E4F4G4A-4G4A-4B-.>C.&C<G.G16rE-E-E-E-DD>CC<B-B-A16B-.&B-B-.B-16B-AB->CD-D-CC16<G.F#G>C16<B-.A-A-.A-16A-GA-B-16>C.&C<A-.A-16r>CDE-4E-E-E-D<A>DC4<B-B-4A-4B-.>C.&C<G.G16rE-E-E-E-DD>CC<B-B-A16B-.&B-B-.B-16B-AB->CD-D-CC16<G.F#G>C16<B-.A-A-.A-16A-GA-B-16>C.&CrCCCDE-4E-E-E-D<A>DC4<B-B-2B.>C#16v14L4o2A1A1G#1>C#<C#C#C#8>C#16<F#8.F#F#F#8F#8EEEE8E8D#>L8D#<D#G4>G<GG#4>G#<G4F#4<B.A.>A<A4A>A<A4A>A<A4A>A<A4G#>G#<G#4G#>G#<G#>C#4>C#<C#>C#<C#>C#<C#>C#<F#>F#<F#>F#<F#>F#<F#E4>E<E>E<E>E<ED#4>D#<D#G4>G<GF#4F#F#4BF#<B4L16>>A.>E.A<G#.>E.F#<F#.>C#.E<<B1L32r8r.r.>>Et54<B>G#B>E>E1&E4.,
v14<B-1C1<A2>F2<B->F8B-.&B-B-2B-2F2A2<D1&D1&D1L8rDD4>>rC2.CrC4CC4C4rC2.ArB-4AD4C4rC2.CrC4CC4C4rE2.DD4C4C2F2rD4E4.G.G16r>D4<G4.G4r>CCF4.F.F16rFEC<D4.E2rD4.D2rF4.F4DD<B-r1L4B-B-B-B->D-D-D-L8D-.E-.&E-C4rGGF4.F.F.rF.F.&FF.F.FFF4.E4F4E.E-.&E-C4rCCC4.E-4rA-GF#2L4ArF.G-E-L8F.G.&GC4rCC<B-4.>F.F.rF.F.&FF4rFFF4.E4D-4E.E-.&E-C.C.E-E-E-4.A-.A-.A-GF#2A4r4L4E-.FGrE.>G#r.<<B.r.rB.>>F#.r<F#FD#F8.E2&E16L8rEEE2r4AG#G2A#4r4F#4.G4E4F#.G#.&G#C#4rG#G#F#4.r2F#.F#2.r.F#4.F4D#4F.E.&EE4.EEE4.A4.AG#G2A#4r4A4EE4F#4F#4;
`;


const steps = {
    A: 0,
    B: 2,
    C: -9,
    D: -7,
    E: -5,
    F: -4,
    G: -2
};

const REF_FREQ = 440; // A4;
const REF_OCTAVE = 4;
const ROOT_MULT = 2 ** ( 1 / 12 ); // A constant: the twelfth root of two.


function calculateNoteFrequency( n ) {
    return REF_FREQ * ( ROOT_MULT ** n );
}

function calculateNoteSteps( str ) {
    const [_, note, sharp, octave] = /([a-z])([#-]?)(\d)/i.exec( str );

    if ( note == "N" ) {
        return parseInt( octave ) - 13;
    } else {
        return ( parseInt( octave ) - REF_OCTAVE ) * 12 + steps[note] + ( sharp == "#" ? 1 : 0 ) + ( sharp == "-" ? - 1 : 0 );
    }
}

function calculateNote( note ) {
    const steps = calculateNoteSteps( note );

    return calculateNoteFrequency( steps );
}

/**
 * @this MabiMML
 *
 * @param {string} mml
 * @returns {[any,any]}
 */
function mml2note( mml ) {
    const noteResult = [];
    const tempoResult = []; // for tempo;
    let tempo = 120;
    let octave = 4;
    let notelength = 4;
    let volume = 15;
    let time = 0;
    let pos = 0;
    let finished = false;

    do {
        //string.match(string.sub(mml, pos), "^(%&*)([%a<>])(%A-)()[%&%a<>]");
        const r = /^(&*)([a-z<>])([^a-z<>]*)[&a-z<>]/i.exec( mml.substr( pos ) );
        let found, link, c, args;

        if ( r == null ) {
            [found, link, c, args] = /^(&*)([a-z<>])([^a-z<>]*)/i.exec( mml.substr( pos ) );
            finished = true;
        } else {
            [found, link, c, args] = r;
        }

        pos = pos + found.length - 1;

        if ( c == "O" ) { // Set octave;
            octave = parseFloat( args );
        } else if ( c == "T" ) { // Set tempo;
            tempo = parseFloat( args );
            tempoResult.push( [time, tempo] );
        } else if ( c == "V" ) { // Set volume;
            volume = parseFloat( args );
        } else if ( c == "R" ) { // Rest;
            let notetime;

            if ( /\d+/.test( args ) ) {
                const [len] = args.match( /\d+/ );

                notetime = parseFloat( len );
            } else {
                notetime = notelength;
            }

            if ( /\./.test( args ) ) {
                notetime = notetime / 1.5;
            }

            noteResult.push( [time, 0, 0] );
            time = time + 240 / notetime;
        } else if ( c == "L" ) { // Set note length;
            notelength = parseFloat( args );

            if ( /\./.test( args ) ) {
                notelength = notelength / 1.5;
            }
        } else if ( c == ">" ) {
            // Increase octave;
            octave = Math.max( 0, octave + 1 );
        } else if ( c == "<" ) {
            // Decrease octave;
            octave = Math.max( 0, octave - 1 );
        } else if ( /[A-GN]/.test( c ) ) {
            // Play note;
            let note;

            if ( /[+#-]/.test( args ) ) {
                const [mod] = args.match( /[+#-]/ );

                if ( mod == "#" || mod == "+" ) {
                    note = c + "#" + octave;
                } else if ( mod == "-" ) {
                    note = c + "-" + octave;
                }
            } else {
                note = c + octave;
            }

            let notetime;

            if ( /\d+/.test( args ) ) {
                const [len] = args.match( /\d+/ );

                notetime = parseFloat( len );
            } else {
                notetime = notelength;
            }

            if ( /\./.test( args ) ) {
                notetime = notetime / 1.5;
            }

            const linkFlag = link != "";
            const pitch = calculateNote( note );

            noteResult.push( [time, pitch, volume, linkFlag] );
            time = time + 240 / notetime;
        }
    } while ( !finished );

    noteResult.push( [time, 0, 0] );

    return [noteResult, tempoResult];
}

/**
 * @this MabiMML
 *
 * @param {string} mml
 * @returns {[number[],number[]]}
 */
function parseMML( mml ) {
    //".*MML@(.*);-"
    console.assert( /MML@([\s\S]*);/m.test( mml ),"Can't found MML tag." );
    let [_, s] = /MML@([\s\S]*);/m.exec( mml );
    let chNotes = [];
    const noteResult = [];

    if ( s ) {
        s = s.toUpperCase();
        //s = string.gsub(s,"[^ABCDEFG#+%-%.O><TVLNR0-9&,]","");
        s = s.replace( /\s/g,"" );
        chNotes = s.split( "," );
    }

    const tempo = [];

    for ( const i in chNotes ) {
        const chNote = chNotes[i];
        //log(v);
        let tempoResult;

        [noteResult[i], tempoResult] = mml2note.call( this, chNote );

        for ( const j in tempoResult ) {
            const v2 = tempoResult[j];

            tempo.push( v2 );
        }
    }

    tempo.sort( ( a, b ) => a[0] - b[0] );

    for ( let i = tempo.length - 1; i > 1; i-- ) {
        if ( tempo[i] == tempo[i - 1] ) {
            tempo.splice( i, 1 );
        }
    }

    return [noteResult, tempo];
}

/**
 * @this MabiMML
 *
 */
function playNote() {
    let nextPlayTime = Number.POSITIVE_INFINITY;
    let duration;

    if ( this.tempoPosition < this.tempos.length && this.tempos[this.tempoPosition][0] <= this.time ) {
        this.tempo = this.tempos[this.tempoPosition][1];
        this.tempoPosition = this.tempoPosition + 1;

        if ( this.tempoPosition < this.tempos.length ) {
            nextPlayTime = Math.min( nextPlayTime, this.tempos[this.tempoPosition][0] );
        }
    }

    let notePlayed;

    for ( const channelIndex in this.channels ) {
        const channel = this.channels[channelIndex];

        if ( this.positions[channelIndex] < channel.length ) {
            const [time, pitch, volume, link] = channel[this.positions[channelIndex]];

            if ( time <= this.time ) {
                const sc = this.sound[channelIndex];

                if ( pitch > 0 ) {
                    sc.setVolume( Math.pow( Math.min( 1, volume / 15 ), 2 ) * this.volume );
                    sc.setPitch( pitch / 440 * this.pitchMod );

                    if ( !link ) {
                        sc.stop();
                        sc.play();
                        notePlayed = true;
                    } else {
                        sc.setPause( true );
                        sc.setPause( false );
                        //played = true;
                    }
                } else {
                    if ( sc ) {
                        sc.stop();
                        this.sc[channelIndex] = null;
                    }
                }

                this.positions[channelIndex] = this.positions[channelIndex] + 1;
            }

            if ( this.positions[channelIndex] < channel.length ) {
                nextPlayTime = Math.min( nextPlayTime, channel[this.positions[channelIndex]][0] );
            }
        }
    }

    if ( nextPlayTime < Number.POSITIVE_INFINITY ) {
        let remain = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.clamp( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.now() - this.ms, -100, 100 );

        if ( this.time == 0 ) {
            remain = 0;
        }

        duration = ( nextPlayTime - this.time ) / this.tempo * 1000 / this.speed;
        this.timer = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( duration - remain * 0.5, playNote, this );
        this.time = nextPlayTime;
        this.ms = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.now()  + duration;

        if ( notePlayed ) {
            const e = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "note", { duration: duration } );

            this.dispatchEvent( e );
        }
    } else {
        console.log( "End of song" );
        this.stop();
        const e = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "complete" );

        this.dispatchEvent( e );
    }
}



class MabiMML extends _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.EventDispatcher {
    constructor( mml, instrument ) {
        super();
        this.instrument = instrument;
        this.channels = undefined;
        this.tempos = undefined;
        [this.channels, this.tempos] = parseMML.call( this,mml );
        this.positions = [];
        this.tempoPosition = 0;
        this.tempo = 120;
        this.sound = [];
        this.sc = [];
        this.speed = 1.0;
        this.pitchMod = 1.0;
        this.volume = 1.0;
        console.log( this.channels );
        for ( const i in this.channels ) {
            this.positions[i] = 0;

            if ( typeof instrument == "object" ) {
                this.sound[i] = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound( instrument[i] );
            } else {
                this.sound[i] = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound( instrument );
            }
        }
    }

    setSpeed( v ) {
        this.speed = v;
    }

    setPitch( v ) {
        this.pitchMod = v;
    }

    play() {
        this.time = 0;
        this.ms = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.now();
        console.log( "Begin song" );
        playNote.call( this );
    }

    stop() {
        if ( this.timer ) {
            this.timer.stop();
            this.timer = null;
        }

        for ( const i in this.channels ) {
            if ( this.sc[i] ) {
                this.sc[i].stop();
                this.sc[i] = null;
            }
        }
    }

    setVolume( v ) {
        this.volume = v;
    }
}



/***/ }),

/***/ "./engine/src/lib/random.js":
/*!**********************************!*\
  !*** ./engine/src/lib/random.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/*

비트연산 버전으로 바꾼 랜덤

l1 = lcg(0) // Linear congruential generator (Ansi C params);
l2 = lcg(0, 'nr') //Linear congruential generator (Numerical recipes params);
l3 = lcg(0, 'mvc') // Linear congruential generator (Microsoft Visual C params);
c1 = mwc(0) // Multiply-with-carry (Ansi C params);
c2 = mwc(0, 'nr') // Multiply-with-carry (Numerical recipes params);
c3 = mwc(0, 'mvc') // Multiply-with-carry (Microsoft Visual C params);
m = twister(0) // Mersenne twister;

*/

const _random = {
    random: function ( i, j ) {

        if ( i == null ) {

            return Math.random();
        
        } else if ( j == null ) {

            return Math.floor( Math.random() * i + 1 );
        
        } else {

            return Math.floor( Math.random() * ( j - i ) + 1 ) + i;
        
        }
    
    }
};

function normalize( n ) { //keep numbers at 32 bits;

    //return n % 0x100000000;
    return n & 0xffffffff;

}

function seed() {

    //return normalize(tonumber(tostring(os.time()):reverse()));
    return normalize( +new Date() );

}

//Mersenne twister;
class mersenne_twister {

    constructor( s ) {

        this.mt = [];
        this.index = 0;
        this.randomseed( s );
    
    }

    randomseed( s ) {

        if ( s == null ) s = seed();
        this.mt[0] = normalize( s );
        for ( let i = 1; i <= 623; i++ ) {

            this.mt[i] = normalize( 0x6c078965 * ( this.mt[i - 1] ^ ( ( this.mt[i - 1] / 0x40000000 ) >> 0 ) + i ) );
        
        }
    
    }

    random( a, b ) {

        let y;
        if ( this.index == 0 ) {

            for ( let i = 0; i <= 623; i++ ) {

                //y = bit_or(math_floor(this.mt[i] / 0x80000000) * 0x80000000, this.mt[(i + 1) % 624] % 0x80000000);
                y = this.mt[( i + 1 ) % 624] & 0x7fffffff;
                this.mt[i] = this.mt[( i + 397 ) % 624] ^ ( y >> 1 );
                if ( ( y & 1 ) != 0 ) {

                    this.mt[i] = this.mt[i] ^ 0x9908b0df; 
                
                }
            
            }
        
        }
        y = this.mt[this.index];
        y = y ^ ( y / 0x800 );
        y = y ^ ( normalize( y << 7 ) & 0x9d2c5680 );
        y = y ^ ( normalize( y << 15 ) & 0xefc60000 );
        y = y ^ ( y >> 14 );
        y = y >>> 0;
        this.index = ( this.index + 1 ) % 624;
        if ( a == null ) {

            return y / 0x100000000;
        
        } else if ( b == null ) {

            if ( a == 0 ) {

                return y;
            
            } else {

                return 1 + ( y % a );
            
            }
        
        } else {

            return a + ( y % ( b - a + 1 ) );
        
        }
    
    }

}

//Linear Congruential Generator;
class linear_congruential_generator {

    constructor( s,r ) {

        this.a = 1103515245;
        this.c = 12345;
        this.m = 0x100000000;  //from Ansi C;
        if ( r ) {

            if ( r == "nr" ) {

                [this.a, this.c, this.m] = [1664525, 1013904223, 0x100000000]; //from Numerical Recipes.
            
            } else if ( r == "mvc" ) {

                [this.a, this.c, this.m] = [214013, 2531011, 0x100000000];
            
            }//from MVC;
        
        }
        this.randomseed( s );
    
    }

    random( a, b ) {

        const y = ( this.a * this.x + this.c ) % this.m;

        this.x = y;
        if ( a == null ) {

            return y / 0x100000000;
        
        } else if ( b == null ) {

            if ( a == 0 ) {

                return y;
            
            } else {

                return 1 + ( y % a );
            
            }
        
        } else {

            return a + ( y % ( b - a + 1 ) );
        
        }
    
    }

    randomseed( s ) {

        if ( s == null ) s = seed();
        this.x = normalize( s );
    
    }

}

// Multiply-with-carry;
class multiply_with_carry {

    constructor( s,r ) {

        this.a = 1103515245;
        this.c = 12345;
        this.m = 0x100000000;  //from Ansi C;
        if ( r ) {

            if ( r == "nr" ) {

                [this.a, this.c, this.m] = [1664525, 1013904223, 0x100000000]; //from Numerical Recipes.
            
            } else if ( r == "mvc" ) {

                [this.a, this.c, this.m] = [214013, 2531011, 0x100000000];
            
            }//from MVC;
        
        }
        this.ic = this.c;
        this.randomseed( s );
    
    }

    random( a, b ) {

        const m = this.m;
        const t = this.a * this.x + this.c;
        const y = t % m;

        this.x = y;
        this.c = t / m >> 0;
        if ( a == null ) {

            return y / 0x100000000;
        
        } else if ( b == null ) {

            if ( a == 0 ) {

                return y;
            
            } else {

                return 1 + ( y % a );
            
            }
        
        } else {

            return a + ( y % ( b - a + 1 ) );
        
        }
    
    }

    randomseed( s ) {

        if ( s == null ) s = seed();
        this.c = this.ic;
        this.x = normalize( s );
    
    }

}

/**
 * @this Random
 *
 * @param {number} balance
 * @param {number} bias
 * @param {number} min
 * @param {number} max
 * @returns {number}
 */
function _getDamage( balance, bias, min, max ) {

    const generator = this.generator || _random;

    function curveFunc( a, b ) {

        return Math.pow( a, 1 / ( b * 0.66 + 0.34 ) );

    }

    let r;
    do {

        const r0 = generator.random();
        const r1 = generator.random();

        if ( r0 < 0.5 ) {

            if ( bias < 0.5 ) {

                r = curveFunc( r1, balance ) * ( 1 - bias ) - 1 + bias + bias;

            } else {

                r = curveFunc( r1, balance ) * bias;

            }

        } else {

            if ( bias < 0.5 ) {

                r = ( 1 - curveFunc( 1 - r1, balance ) ) * ( 1 - bias ) + bias;

            } else {

                r = ( 1 - curveFunc( 1 - r1, balance ) ) * bias + bias;

            }

        }

    } while ( r < 0 || r >= 1 );
    if ( max ) {

        return Math.floor( min + ( max + 1 - min ) * r );

    } else if ( min ) {

        return Math.floor( 1 + max * r );

    } else {

        return r;

    }

}


class Random {

    constructor( seed, method, arg ) {

        seed = seed != null ? seed : ( +new Date() );
        this.seed = seed;
        this.method = method;
        this.arg = arg;
        if ( method == "mwc" ) {

            this.generator = new multiply_with_carry( seed, arg );
        
        } else if ( method == "lcg" ) {

            this.generator = new linear_congruential_generator( seed, arg );
        
        } else {

            this.generator = new mersenne_twister( seed );
        
        }

    }

    /**
     *
     *
     * @param {number?} a
     * @param {number?} b
     * @returns {number}
     * @memberof Random
     */
    random( a, b ) {

        console.assert( ( a == null && b == null ) || ( a != null && b != null ),`random(${a},${b}) 구문은 허용되지 않음. random(1,a) 혹은 random(0,a)를 명확히 쓸 것` );

        return this.generator.random( a, b );
    
    }

    getRandomFunc() {

        return this.generator.random.bind( this.generator ); 
    
    }

    randomseed( s ) {

        return this.generator.randomseed( s );
    
    }


    // 테이블을 섞어서 돌려줌
    shuffle( t ) {

        const generator = this.generator || _random;
        const t1 = [];
        const t2 = [];
        for ( let i = 1; i <= t; i++ ) {

            t1[i] = t[i];
        
        }
        for ( let i = 1; i <= t; i++ ) {

            const pick = generator.random( t1.length );

            t2[t2.length + 1] = t1[pick];
            t1.splice( pick, 1 );
        
        }

        return t2;
    
    }

    bool() {

        const generator = this.generator || _random;

        return generator.random( 2 ) == 1 ? true : false;
    
    }

    rangei( a, b ) {

        const generator = this.generator || _random;

        return generator.random( Math.floor( a ), Math.floor( b ) );
    
    }

    rangef( a, b ) {

        const generator = this.generator || _random;
        if ( a != null && b != null ) {

            return generator.random() * ( b - a ) + a;
        
        } else {

            return generator.random();
        
        }
    
    }

    pick( a, b, n ) {

        const generator = this.generator || _random;
        const t = [];
        const t2 = [];

        console.assert( b - a + 1 >= n, "범위보다 많은 랜덤 갯수를 요구함" );
        for ( let i = 1; i <= n; i++ ) {

            let pick;
            do {

                pick = generator.random( a, b );
            
            } while ( t[pick] );
            t[pick] = true;
            t2.push( pick );
        
        }

        return t2;
    
    }

    getDamage( balance, bias, min, max ) {

        return _getDamage.call( this, balance, bias, min, max );
    
    }

    static getDamage( balance, bias, min, max ) {

        _getDamage.call( this, balance, bias, min, max );
    
    }

    save() {

        const t = JSON.parse( JSON.stringify( this ) );
        if ( t.generator.mt ) {

            for ( const k in t.generator.mt ) {

                const v = t.generator.mt[k];

                t.generator.mt[k] = v;
            
            }
        
        }

        return t;
    
    }

    load( t ) {

        if ( t.method == "mwc" ) {

            this.generator = new multiply_with_carry( t.seed, t.arg );
        
        } else if ( t.method == "lcg" ) {

            this.generator = new linear_congruential_generator( t.seed, t.arg );
        
        } else {

            this.generator = new mersenne_twister( t.seed );
        
        }
        for ( const k in t ) {

            const v = t[k];
            if ( k == "generator" ) {

                for ( const k2 in v ) {

                    const v2 = v[k2];
                    if ( typeof v2 == "object" ) {

                        Object.assign( this[k][k2],v2 );
                    
                    } else {

                        this[k][k2] = v2;
                    
                    }
                
                }
            
            } else if ( typeof v == "object" ) {

                Object.assign( this[k], v );
            
            } else {

                this[k] = v;
            
            }
        
        }
    
    }

}

Random.prototype.get = Random.prototype.random;

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Random);


/***/ }),

/***/ "./engine/src/lib/shaderHelper.js":
/*!****************************************!*\
  !*** ./engine/src/lib/shaderHelper.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _engine_Shader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/Shader */ "./engine/src/Shader.js");


//@ts-ignore
// import defaultVertexSrc from "@engine/render/shaders/default.vs";

// uniform mat3 translationMatrix;
// uniform mat3 projectionMatrix;


class ShaderHelper {
    /**
     *
     *
     * @param {string} shaderName
     * @returns {Shader}
     * @memberof ShaderHelper
     */
    getShader( shaderName ) {
        return ShaderHelper.shaders[shaderName];
    }
}


const defaultVertexSrc = `
    precision mediump float;

    attribute vec2 a_position;
    attribute vec4 a_color;
    attribute vec2 a_texCoord;

    uniform mat4 u_viewMatrix;
    uniform mat4 u_worldMatrix;
    uniform vec2 u_anchor;

    varying mediump vec2 v_texCoord;
    varying mediump vec2 v_position;
    varying lowp vec4 v_colorOverride;

    void main() {
        mat4 anchorMat = mat4(1);

        anchorMat[3].xy = u_anchor;
        gl_Position = vec4((u_viewMatrix * u_worldMatrix * anchorMat * vec4(a_position, 0.0,1.0)).xy, 0, 1);
        v_position = gl_Position.xy;
        v_colorOverride = vec4(a_color.xyz*a_color.www,1.0);
        v_texCoord = a_texCoord;
    }
`;


ShaderHelper.shaders = {
    "mask": new _engine_Shader__WEBPACK_IMPORTED_MODULE_0__.Shader(
        `
        precision mediump float;

        attribute vec2 a_position;
        attribute vec4 uvuv;
        attribute vec2 a_texCoord;

        uniform mat4 u_viewMatrix;
        uniform mat4 u_worldMatrix;
        uniform vec2 u_anchor;

        varying mediump vec2 v_texCoord;
        varying mediump vec2 v_position;

        varying mediump vec2 v_texCoord1;
        varying mediump vec2 v_texCoord2;
        
        void main() {
            mat4 anchorMat = mat4(1);

            anchorMat[3].xy = u_anchor;
            gl_Position = vec4((u_viewMatrix * u_worldMatrix * anchorMat * vec4(a_position, 0.0,1.0)).xy, 0, 1);

            v_position = gl_Position.xy;
            //256*128
            vec4 uvuv2 = uvuv.wzyx;
            // v_texCoord1 = ((uvuv2.wz * vec2(2.0,2.0*3.0/2.0)  )*vec2(18.0/16.0,26.0/24.0)) / vec2(512.0,256.0);
            // v_texCoord2 = ((uvuv2.yx * vec2(2.0,2.0*3.0/2.0)  )*vec2(18.0/16.0,26.0/24.0)) / vec2(512.0,256.0);
            v_texCoord1 = uvuv2.wz / vec2(512.0,256.0);
            v_texCoord2 = uvuv2.yx / vec2(512.0,256.0);

            v_texCoord = a_texCoord;
        }
        `, `
        varying mediump vec2 v_position;
        varying mediump vec2 v_texCoord;
        varying mediump vec2 v_texCoord1;
        varying mediump vec2 v_texCoord2;

        uniform lowp sampler2D maskSampler;
        uniform lowp sampler2D baseSampler;

        uniform mediump float mask;
        uniform mediump vec2 texSize;


        void main() {
            highp vec2 uv = v_texCoord;

            lowp vec4 tile = texture2D(baseSampler, floor(v_texCoord)/texSize);
            lowp vec4 mask1 = texture2D(maskSampler, v_texCoord1);
            lowp vec4 mask2 = texture2D(maskSampler, v_texCoord2);

            lowp vec4 c;
            lowp vec3 mask0 = vec3(mask1.g,1.0,mask2.g);
            c.xyz = mix( vec3(0.0,1.0,1.0), mask0.xyz , step(1.0/256.0,tile.g + mask) );
            c.a = 1.0;
            gl_FragColor = c;

            gl_FragColor.xyz *= gl_FragColor.a;
        }
        `,
        null,
        {
            mask: 0
        }
    ),
    "shadow": new _engine_Shader__WEBPACK_IMPORTED_MODULE_0__.Shader(
        `
        precision mediump float;

        attribute vec2 a_position;
        attribute vec3 custom;
        attribute vec4 a_color;

        uniform mat4 u_viewMatrix;
        uniform mat4 u_worldMatrix;
        uniform vec2 u_anchor;

        uniform vec4 eyePos;


        varying mediump vec2 v_position;
        varying lowp vec4 v_colorOverride;

        void main() {
            mat4 anchorMat = mat4(1);

            anchorMat[3].xy = u_anchor;
            gl_Position = vec4((u_viewMatrix * u_worldMatrix * anchorMat * vec4(custom.xy, 0.0,1.0)).xy, 0, 1);

            mediump float scale;
            mediump vec2 s;
            mediump vec2 delta = gl_Position.xy - eyePos.xy;
            s = abs(delta);
            scale = max(s.x,s.y);

            gl_Position.xy += delta * custom.z / (scale+0.001);
            v_position = gl_Position.xy;
            v_colorOverride = vec4(0,1,1,1);
        }
        `, `
        varying mediump vec2 v_position;
        varying lowp vec4 v_colorOverride;

        void main() {
            gl_FragColor = v_colorOverride;
            gl_FragColor.xyz *= gl_FragColor.a;
        }
        `,
        null,
        {
            eyePos: [0, 0, 0, 0]
        }
    ),
    "tileMap": new _engine_Shader__WEBPACK_IMPORTED_MODULE_0__.Shader(
        defaultVertexSrc, `
        varying mediump vec2 v_position;
        varying mediump vec2 v_texCoord;
        varying lowp vec4 v_colorOverride;

        uniform lowp sampler2D fogSampler;
        uniform lowp sampler2D baseSampler;

        uniform highp vec4 offset;
        uniform highp vec4 viewInfo;
        uniform lowp vec4 color1;
        uniform lowp vec4 color2;
        uniform lowp vec4 glossy;
        uniform mediump vec2 texSize;

        void main() {
            mediump vec2 viewPos = viewInfo.xy;
            mediump vec2 viewSize = viewInfo.zw;
            mediump vec2 uv = v_texCoord;
            mediump vec2 a;

            highp vec2 uv2;
            mediump vec2 delta = (-glossy.xy+v_position.xy*0.5-viewPos.xy)*glossy.zw;
            lowp float fallOff = max(0.0,(1.0-dot(delta,delta)))*color1.a;

            uv2.x = (v_position.x*0.5+0.5)*viewSize.x+viewPos.x;
            uv2.y = (v_position.y*0.5+0.5)*viewSize.y+viewPos.y;
            uv/=texSize;
            if (uv.y>=408.0/512.0) uv += offset.xy; 

            lowp vec4 c = 	texture2D(baseSampler, uv) * v_colorOverride;
            lowp vec4 fog = texture2D(fogSampler, uv2);

            lowp vec3 fallOffColor = fallOff*color1.xyz*(1.0-min(1.0,c.g*1000.0));

            lowp float gray = dot(c.xyz,vec3(0.3,0.6,0.1)*0.5);
            c.xyz = c.xyz + fallOffColor.xyz;
            gl_FragColor.xyz =  mix(color2.xyz*gray,c.xyz,fog.r*color2.a) * c.a * fog.b;
            
            gl_FragColor.a = c.a;
            gl_FragColor.xyz *= gl_FragColor.a;
        }
        `,
        null,
        {
            offset:   [0, 0, 0, 0],
            viewInfo: [0, 0, 0, 0],
            color1:   [0, 0, 0, 0],
            color2:   [0, 0, 0, 0],
            glossy:   [0,0,0,0]
        }
    ),
    "light": new _engine_Shader__WEBPACK_IMPORTED_MODULE_0__.Shader(
        defaultVertexSrc, `
        varying mediump vec2 v_position;
        varying mediump vec2 v_texCoord;
        varying lowp vec4 v_colorOverride;

        uniform sampler2D fogSampler;
        uniform sampler2D baseSampler;

        uniform mediump vec4 viewInfo;

        void main() {
            mediump vec2 viewPos = viewInfo.xy;
            mediump vec2 viewSize = viewInfo.zw;
            mediump vec2 uv = v_texCoord;
            mediump vec2 a;

            mediump vec2 uv2;
            uv2.x = (v_position.x*0.5+0.5)*viewSize.x+viewPos.x;
            uv2.y = (v_position.y*0.5+0.5)*viewSize.y+viewPos.y;

            lowp vec4 c = texture2D(baseSampler, uv);
            lowp vec4 fog = texture2D(fogSampler, uv2);
            
            lowp float gray = dot(c.xyz,vec3(0.3,0.6,0.1))*0.05;

            c *= v_colorOverride;
            gl_FragColor = mix(vec4(gray,gray,gray,1),c,fog.x);
            gl_FragColor.a = c.a;
            gl_FragColor.xyz *= gl_FragColor.a;
            // gl_FragColor = vec4(c.www,1);
        }
        `,
        null,
        {
            viewInfo: [0,0,0,0]
        }
    ),
};


const shaderHelper = new ShaderHelper();

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (shaderHelper);



/***/ }),

/***/ "./engine/src/lib/slideView.js":
/*!*************************************!*\
  !*** ./engine/src/lib/slideView.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SlideView)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");


/*

화면을 가로로 슬라이드해서 넘겨보는 뷰
최근에 짠 UI 코드라 이쪽을 참고해서 다음 작성을 하도록 하자.


"click" 클릭하면 발생
"indexChanged" 이미지 다른걸로 넘어갔을 때 발생
"indexChanging" 이미지 다른걸로 넘어갔을 때 손을 떼면 즉시 발생


options;
background = {image,color}
autoRotationTime = 초

*/

function onIndexChanging( self ) {
    let e = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "indexChanging" );

    e.index = self.getIndex();
    self.dispatchEvent( e );
}

function onIndexChanged( self ) {
    let e = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "indexChanged" );

    e.index = self.getIndex();
    self.dispatchEvent( e );
}

function onClick( self ) {
    let e = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "click" );

    e.index = self.getIndex();
    self.dispatchEvent( e );
}

function onEnterFrame( self ) {
    if ( Math.abs( self.posX - self.targetPosX ) < 0.1 ) {
        self.posX = self.targetPosX;
        self.updateVisual();
        self.hitArea.removeEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.ENTER_FRAME, onEnterFrame, self );
        if ( self.timer ) {
            self.timer.start();
        }
        onIndexChanged( self );
        return;
    }
    self.velX = ( self.targetPosX - self.posX ) / 8; // 상수
    self.posX = self.posX + self.velX;
    self.updateVisual();
}

function onMouseDown( self, e ) {
    if ( self.hitArea.hitTestPoint( e.x, e.y ) ) {
        if ( self.hitArea.hasEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.ENTER_FRAME ) ) {
            self.hitArea.removeEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.ENTER_FRAME, onEnterFrame, self );
        }
        let [ex, ey] = self.getParent().globalToLocal( e.x, e.y );

        self.mouse = {};
        self.mouse.x = ex;
        self.mouse.y = ey;
        self.mouse.posX = self.posX;
        self.mouse.lastX = ex;
        self.mouse.time = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.now();
        self.mouse.isClick = true;
        self.velX = 0;
        e.stopPropagation();
        if ( self.timer ) {
            self.timer.stop();
        }
    }
}

function onMouseMove( self, e ) {
    if ( self.mouse ) {
        let [ex, ey] = self.getParent().globalToLocal( e.x, e.y );
        let dx = ex - self.mouse.x;
        let currentTime = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.now();
        let ax = ex - self.mouse.lastX;	//가속도

        self.velX = self.velX / Math.pow( 3, ( ( currentTime - self.mouse.time ) / 1000 * 20 ) );	// 감쇄
        self.velX = self.velX + ax;
        self.mouse.time = currentTime;
        self.mouse.lastX = ex;
        self.posX = self.mouse.posX + dx;
        self.updateVisual();
        if ( Math.abs( self.mouse.x - ex ) > 20 || Math.abs( self.mouse.y - ey ) > 20 ) {
            self.mouse.isClick = false;
        }
        e.stopPropagation();
    }
}

function onMouseUp( self, e ) {
    if ( self.mouse ) {
        let [ex, _] = self.getParent().globalToLocal( e.x, e.y );
        //let dx = ex - self.mouse.x;
        let currentTime = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.now();
        let ax = ex - self.mouse.lastX;	//가속도

        self.velX = self.velX / Math.pow( 3, ( ( currentTime - self.mouse.time ) / 1000 * 20 ) );	// 감쇄
        self.velX = self.velX + ax;
        //self.targetPosX = self.posX + self.velX * 3;
        self.targetPosX = Math.floor( ( self.posX + self.velX * 4 ) / self.width + 0.5 ) * self.width;
        onIndexChanging( self );
        if ( !self.hitArea.hasEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.ENTER_FRAME ) ) {
            self.hitArea.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.ENTER_FRAME, onEnterFrame, self );
        }
        if ( self.mouse.isClick ) {
            onClick( self );
        }
        self.mouse = null;
        e.stopPropagation();
    }
}

function onAutoRotation( self ) {
    self.targetPosX = Math.floor( self.posX / self.width + 0.5 - 1 ) * self.width;
    if ( !self.hitArea.hasEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.ENTER_FRAME ) ) {
        self.hitArea.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.ENTER_FRAME, onEnterFrame, self );
    }
}




class SlideView extends _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite {
    constructor( width, height, imageList, options ) {
        super();
        this.imageList = imageList;
        this.width = width;
        this.height = height;
        this.options = options || {};
        this.numOfImage = this.imageList.length;
        this.totalWidth = this.imageList.length * this.width;
        {
            if ( this.options.background && this.options.background.image ) {
                this.options.background.image.setAnchorPoint( 0.5, 0.5 );
                this.options.background.image.setPosition( this.width / 2, this.height / 2 );
                this.addChild( this.options.background.image );
                //고해상도 배경이 주어질 경우 스케일
                let ratio = this.options.background.image.getWidth() / this.options.background.image.getHeight();

                if ( ratio > 1.0 ) {
                    //가로가 세로보다 큰 경우 세로에 맞춰서 스케일
                    this.options.background.image.setScale( this.height / this.options.background.image.getHeight() );
                } else {
                    this.options.background.image.setScale( this.width / this.options.background.image.getWidth() );
                }
            } else {
                let color = 0;

                if ( this.options.background && this.options.background.color ) {
                    color = this.options.background.color;
                }
                let m = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh.createBox( 0, 0, width, height, color );

                this.addChild( m );
            }
        }

        {
            //hitArea;
            let m = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh.createBox( 0, 0, width, height, 0 );

            this.addChild( m );
            m.setVisible( false );
            m.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.MOUSE_DOWN, onMouseDown, this );
            m.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.MOUSE_MOVE, onMouseMove, this );
            m.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.MOUSE_UP, onMouseUp, this );
            this.hitArea = m;
        }

        {
            let b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();

            for ( let k in imageList ) {
                let v = imageList[k];
                let i = parseInt( k );

                if ( v ) {
                    //v.setAnchorPoint(0.5,0.5);
                    //v.setPosition((i-0.5)*width-v.getWidth()/2,height/2-v.getHeight()/2);
                    v.setPosition( ( i - 0.5 ) * width - v.getWidth() / 2, height / 2 - v.getHeight() / 2 );
                    b.addChild( v );
                }
            }
            this.parentSpr = b;
        }
        this.addChild( this.parentSpr );
        this.posX = 0;
        this.targetPosX = 0;
        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( 1, onIndexChanging, this );
        // 타이머 이벤트를 잘 처리하기 위해서 화면에 있을때만 붙임
        this.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.ADDED_TO_STAGE, () => {
            if ( this.options.autoRotationTime ) {
                if ( this.timer ) {
                    this.timer.stop();
                    this.timer.removeEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.TIMER, onAutoRotation, this );
                    this.timer = null;
                }
                this.timer = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer( this.options.autoRotationTime * 1000, 0 );
                this.timer.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.TIMER, onAutoRotation, this );
                this.timer.start();
            }
        } );
        this.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.REMOVED_FROM_STAGE, () => {
            if ( this.options.autoRotationTime ) {
                if ( this.timer ) {
                    this.timer.removeEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.TIMER, onAutoRotation, this );
                    this.timer.stop();
                    this.timer = null;
                }
            }
        } );
    }



    updateVisual() {
        this.parentSpr.setX( this.posX - this.getWidth() / 2 );
        let innerX = -this.posX % this.width;
        let i1 = Math.ceil( -this.posX / this.width );
        let i2 = i1 - 1;
        let i0 = i1;

        i1 = i1 % this.numOfImage;
        i2 = i2 % this.numOfImage;
        for ( let i in this.imageList ) {
            let v = this.imageList[i];

            if ( v ) {
                v.setVisible( false );
            }
        }
		
        if ( this.imageList[i1 + 1] ) {
            this.imageList[i1 + 1].setVisible( true );
            this.imageList[i1 + 1].setX( ( i0 + 0.5 ) * this.width );
        }
        if ( this.imageList[i2 + 1] ) {
            this.imageList[i2 + 1].setX( ( i0 - 0.5 ) * this.width );
            if ( innerX > 0 ) {
                this.imageList[i2 + 1].setVisible( true );
            }
        }
    }

    getIndex() {
        let index = Math.floor( -this.targetPosX  / this.width + 0.5 );

        return ( index % this.numOfImage ) + 1;
    }

    setIndex( v ) {
        if ( !this.mouse ) {
            this.targetPosX = -v * this.width;
            if ( !this.hitArea.hasEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.ENTER_FRAME ) ) {
                this.hitArea.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.ENTER_FRAME,onEnterFrame,this );
            }
        }
    }

    getWidth() {
        return this.width * this.getScaleX();
    }

    getHeight() {
        return this.height * this.getScaleY();
    }
}



/***/ }),

/***/ "./engine/src/lib/visibilityTile.js":
/*!******************************************!*\
  !*** ./engine/src/lib/visibilityTile.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ VisibilityTile)
/* harmony export */ });
/* harmony import */ var _engine_Sprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/Sprite */ "./engine/src/Sprite.js");


//const GameMap = require("../avalonika/world/gameMap");

const _BLOCK_VISION = 2;

function* rayCheckIterator( xStart, yStart, xEnd, yEnd ) {
    // change from step to step;
    let tValue, xGrid, yGrid, tForNextBorderX, tForNextBorderY;
    //print("input",xStart, yStart, xEnd, yEnd);
    // constant throughout raycast;
    let xDirection, yDirection, tForOneX, tForOneY, xStep, yStep;

    xDirection = xEnd - xStart;
    yDirection = yEnd - yStart;
    tForOneX = Math.abs( 1.0 / xDirection );
    tForOneY = Math.abs( 1.0 / yDirection );
    yStep = ( yDirection >= 0 ) ? 1 : - 1;
    xStep = ( xDirection >= 0 ) ? 1 : - 1;
    const xSign = ( xDirection >= 0 ) ? 0 : 1;
    const ySign = ( yDirection >= 0 ) ? 0 : 1;

    tValue = 0;
    xGrid = Math.floor( xStart );
    yGrid = Math.floor( yStart );
    const fracStartPosX = xStart - Math.floor( xStart );

    if ( xDirection > 0 ) {
        tForNextBorderX = ( 1 - fracStartPosX ) * tForOneX;
    } else {
        tForNextBorderX = fracStartPosX * tForOneX;
    }

    const fracStartPosY = yStart - Math.floor( yStart );

    if ( yDirection > 0 ) {
        tForNextBorderY = ( 1 - fracStartPosY ) * tForOneY;
    } else {
        tForNextBorderY = fracStartPosY * tForOneY;
    }
    let g;

    if ( xEnd == xStart ) {
        g = ( yEnd - yStart ) / ( xEnd - xStart + 0.00001 );
    } else {
        g = ( yEnd - yStart ) / ( xEnd - xStart );
    }
    const a = yStart - g * xStart;

    while ( true ) {
        let tileX, tileY, collideX, collideY, isLast;

        if ( Math.abs( tForNextBorderX - tForNextBorderY ) < 0.000001 ) {
            // diagonal step (normally not included in a raycast);
            tValue = tForNextBorderX;
            tForNextBorderX = tForNextBorderX + tForOneX;
            tForNextBorderY = tForNextBorderY + tForOneY;
            xGrid = xGrid + xStep;
            yGrid = yGrid + yStep;
            collideX = xGrid + xSign;
            collideY = yGrid + ySign;
        } else if ( tForNextBorderX <= tForNextBorderY ) {
            // step in x;
            tValue = tForNextBorderX;
            tForNextBorderX = tForNextBorderX + tForOneX;
            xGrid = xGrid + xStep;
            collideX = xGrid + xSign;
            collideY = g * ( xGrid + xSign ) + a;
        } else {
            // step in y;
            tValue = tForNextBorderY;
            tForNextBorderY = tForNextBorderY + tForOneY;
            yGrid = yGrid + yStep;
            collideX = ( ( yGrid + ySign ) - a ) / g;
            collideY = yGrid + ySign;
        }
        isLast = tValue > 1.0;
        if ( !isLast ) {
            //print("continue",tileX,tileY,collideX,collideY);
            [tileX, tileY] = [xGrid, yGrid];
            yield [tileX, tileY, collideX, collideY];
        } else {
            return;
        }
    }
}


function* bresenhamIterator( xStart, yStart, xEnd, yEnd ) {
    const deltaX = Math.floor( Math.abs( xEnd - xStart ) );
    const deltaY = Math.floor( Math.abs( yEnd - yStart ) );
    const xStep = xEnd >= xStart ? 1 : - 1;
    const yStep = yEnd >= yStart ? 1 : - 1;
    let error = deltaX - deltaY;
    let [xGrid, yGrid] = [xStart, yStart];

    while ( xGrid != xEnd || yGrid != yEnd ) {
        //let rx, ry = xGrid, yGrid;
        const twoError = 2 * error;

        if ( twoError > ( -1 * deltaY ) ) {
            error = error - deltaY;
            xGrid = xGrid + xStep;
        }
        if ( twoError < deltaX ) {
            error = error + deltaX;
            yGrid = yGrid + yStep;
        }
        yield [xGrid, yGrid];
    }
}


class VisibilityTile extends _engine_Sprite__WEBPACK_IMPORTED_MODULE_0__.Sprite {
    constructor( width, height, wallTable ) {
        super();
        this.setWallTable( width, height, wallTable );
    }

    setWallTable( width, height, wallTable ) {
        this.width = width;
        this.height = height;
        this.wallTable = wallTable;
        this.isCleared = true;
        this.resultTable = new Array( width * height );
        this.resultTable.fill( -1 );
    }

    canBeSeen( x, y, targetX, targetY, wall, checkFunc ) {
        wall = ( wall != null ) ? wall : 2;
        let [lastX, lastY] = [x, y];

        for ( const [x3, y3] of bresenhamIterator( x, y, targetX, targetY ) ) {
            const v = this.wallTable[y3 * this.width + x3].wall;

            if ( ( v & wall ) != 0 ) {
                if ( targetX == x3 && targetY == y3 ) {
                    return [VisibilityTile.BLOCK_VISION, lastX, lastY];
                } else {
                    // 벽에 가림
                    return [VisibilityTile.SHADOW, lastX, lastY];
                }
            } else {
                if ( checkFunc ) {
                    if ( checkFunc( x3, y3 ) ) {
                        return [VisibilityTile.BLOCK_VISION, lastX, lastY];
                    }
                }
            }
            [lastX, lastY] = [x3, y3];
        }

        return [VisibilityTile.EMPTY, targetX, targetY];
    }

    clearResult() {
        this.isCleared = true;
    }

    getResult( cx = this.cx, cy = this.cy,radius = this.radius ) {
        if ( this.isCleared || this.cx != cx || this.cy != cy || this.radius != radius ) {
            // 시점이 달라지면 다시 계산해야한다.
            this.resultTable.fill( Number.NEGATIVE_INFINITY );
            this.fillResultQuick( cx, cy, radius );
            this.isCleared = false;
        }

        const result = this.resultTable;

        this.cx = cx;
        this.cy = cy;
        this.radius = radius;
        
        // if (x1 >= cx - 15 && x2 <= cx + 15 && y1 >= cy - 15 && y2 <= cy + 15) {
        //     //quick에서 mask로 이미 구한 부분
        //     return result;
        // }
		
        // for (let y = y1;y <= y2;y++) {
        //     for (let x = x1;x <= x2;x++) {
        //         if (result[x + "," + y] == null && (x - cx) ** 2 + (y - cy) ** 2 <= radius ** 2) {
        //             result[x + "," + y] = this.canBeSeen(cx,cy,x,y)[0];
        //         }
        //     }
        // }
		
        return result;
    }


    isVisible( x, y ) {
        let v = this.isCleared ? null : this.resultTable[y * this.width + x];

        if ( this.cx == null || this.cy == null || x < 0 || x >= this.width || y < 0 || y >= this.height ) {
            return 2;
        } else if ( v == Number.NEGATIVE_INFINITY ) {
            if ( ( ( x - this.cx ) ** 2 + ( y - this.cy ) ** 2 ) <= ( this.radius ** 2 ) ) {
                console.log( `시야체크중 없는 데이터 발견 ${x}, ${y}` );
                v = this.canBeSeen( this.cx, this.cy, x, y )[0];
                this.resultTable[y * this.width + x] = v;
            } else {
                return 2;
            }
        }

        return v;
    }

    fillResultQuick( centerX, centerY, radius ) {
        const result = this.resultTable;
        const wt = this.wallTable;
        const [w, h] = [this.width, this.height];
        const mask = VisibilityTile.mask;
        const r = Math.min( 15, Math.ceil( radius ) );
        const summedMask = new Uint32Array( [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] );
        let y1 = Math.max( 0, centerY - r );
        let y2 = Math.min( h - 1, centerY + r );
        let x1 = Math.max( 0, centerX - r );
        let x2 = Math.min( w - 1, centerX + r );

        for ( let y = y1; y <= y2; y++ ) {
            for ( let x = x1; x <= x2; x++ ) {
                const wall = wt[y * w + x].wall;

                if ( ( wall & _BLOCK_VISION ) != 0 ) {
                    // 해당위치가 가려져있으면 그 블록은 가려졌다고 표시함
                    result[y * w + x] = VisibilityTile.BLOCK_VISION;

                    // 마스크를 만든다
                    const index = ( ( centerY - y ) + 16 - 1 ) * 31 + ( centerX - x ) + 16 - 1;
                    const startIndex = mask.startIndex[index];
                    const skip = mask.skip[index];
                    const count = mask.count[index];

                    if ( startIndex > 0 ) {
                        // 마스크의 첫 값은 y축 시작 위치. 1부터 시작함
                        for ( let j = 0; j < count; j++ ) {
                            // 마스크 값을 모두 OR해서 합쳐둔다
                            summedMask[skip + j] |= mask.data[startIndex - 1 + j];
                        }
                    }
                } else {
                    result[y * w + x] = VisibilityTile.EMPTY;
                }
            }
        }
        // for ( const i in summedMask ) {
        //     console.log( summedMask[i].toString( 2 ) );
        // }
        // 이 단계에서 t에는 안보여야 하는 곳이 1비트이고 보여야하는 곳이 0비트
        y1 = Math.max( 0, centerY - 15 );
        y2 = Math.min( h - 1, centerY + 15 );
        x1 = Math.max( 0, centerX - 15 );
        x2 = Math.min( w - 1, centerX + 15 );
        for ( let y = y1; y <= y2; y++ ) {
            for ( let x = x1; x <= x2; x++ ) {
                if ( ( ( x - centerX ) ** 2 + ( y - centerY ) ** 2 ) <= radius ** 2 ) {
                    //t[y+16]에서 0인 비트에 칠해야함 
                    const checkTarget = ~( summedMask[( centerY - y ) + 15] );
                    const checkBit = ( 1 << ( centerX - x + 15 ) );

                    if ( ( checkTarget & checkBit ) == 0 ) {
                        result[y * w + x] = VisibilityTile.SHADOW;
                    }
                } else {
                    result[y * w + x] = VisibilityTile.SHADOW;
                }
            }
        }
        console.log( `시야데이터 ${centerX},${centerY} ${w} ${h} X:${Math.max( 0, centerX - 15 )}~${Math.min( w - 1, centerX + 15 )} Y:${Math.max( 0, centerY - 15 )}~${Math.min( h - 1, centerY + 15 )} ` );
    }

    traceRay( x1, y1, x2, y2, gridWidth, gridHeight, wall, checkFunc ) {
        // 타일계의 좌표를 픽셀계 좌표로 바꿔줘야한다.
        wall = wall != null ? wall : 1;
        for ( const [tx, ty, cx, cy] of rayCheckIterator( x1 / gridWidth, y1 / gridHeight, x2 / gridWidth, y2 / gridHeight ) ) {
            const w = this.wallTable[ty * this.width + tx].wall;

            if ( checkFunc && checkFunc( tx, ty ) ) {
                let r;

                if ( tx == Math.floor( x2 / gridWidth ) && ty == Math.floor( y2 / gridHeight ) ) {
                    // 충돌했지만 거기가 목적지임
                    r = VisibilityTile.EMPTY;
                } else {
                    // 무언가에 의해 막혔음
                    r = VisibilityTile.CREATURE;
                }

                //log(cx,cy);
                return [r, tx, ty, cx * gridWidth, cy * gridHeight];
            } else if ( ( w & wall ) != 0 ) {
                // 벽에 충돌
                return [VisibilityTile.BLOCK_VISION, tx, ty, cx * gridWidth, cy * gridHeight];
            }
        }

        return [VisibilityTile.EMPTY, Math.floor( x2 / gridWidth ), Math.floor( y2 / gridHeight ), x2, y2];
    }
}

VisibilityTile.EMPTY = 0;
VisibilityTile.BLOCK_VISION = 1;
VisibilityTile.SHADOW = 2;
VisibilityTile.CREATURE = 4;
VisibilityTile.mask = __webpack_require__( /*! ./visibilityTileMask */ "./engine/src/lib/visibilityTileMask.js" );



/***/ }),

/***/ "./engine/src/lib/visibilityTileMask.js":
/*!**********************************************!*\
  !*** ./engine/src/lib/visibilityTileMask.js ***!
  \**********************************************/
/***/ ((module) => {


// 32비트
// 좌우 15비트씩

/*
// function buildMask() {
//     let wt = [];
//     let vt = new VisibilityTile(31,31,wt);
//     for (let y = 1;y <= 31;i++) {
//         for (let x = 1;x <= 31;i++) {
//             let t = [];
//             for (let i = 1;i <= 31;i++) {
//                 wt[i] = { wall: 0 };
//             }
//             wt[(y - 1) * 31 + x].wall = 2;
//             vt.clearResult();
//             let rt = vt.getResult2(16,16,1,1,31,31,true);
//             for (let yy = 1;yy <= 31;yy++) {
//                 let v = 0;
//                 for (let xx = 1;xx <= 31;xx++) {
//                     if (rt[(yy - 1) * 31 + xx] && rt[(yy - 1) * 31 + xx] >= 2) {
//                         v = v | (1 << (xx - 1));
//                     }
//                 }
//                 t[yy] = v;
//             }
//             let s = "";
//             let notZero = 0;
//             for (let i in t) {
//                 let v = t[i];
//                 if (v != 0) {
//                     notZero = parseInt(i);
//                     break;
//                 }
//             }
//             if (notZero == 0) {
//                 s = "null,";
//                 console.log(s);
//             }
//             else {
//                 s = "{" + notZero + ", ";
//                 let lastNotZero;
//                 for (let j = t.length; j >= notZero;j--) {
//                     if (t[j] != 0) {
//                         lastNotZero = j;
//                         break;
//                     }
//                 }
//                 for (let k = notZero;k <= lastNotZero;k++) {
//                     s = s + t[k] + ",";
//                 }
//                 console.log(s.substr(0,s.length) + "},");
//             }
//         }
//     }
// }
// */



// //buildMask();


// const VisibilityTile_mask = [
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     new Uint32Array([ 1, 1]),
//     new Uint32Array([ 1, 2]),
//     new Uint32Array([ 1, 4]),
//     new Uint32Array([ 1, 8]),
//     new Uint32Array([ 1, 16]),
//     new Uint32Array([ 1, 32]),
//     new Uint32Array([ 1, 64]),
//     new Uint32Array([ 1, 384]),
//     new Uint32Array([ 1, 512]),
//     new Uint32Array([ 1, 1024]),
//     new Uint32Array([ 1, 2048]),
//     new Uint32Array([ 1, 4096]),
//     new Uint32Array([ 1, 8192]),
//     new Uint32Array([ 1, 16384]),
//     new Uint32Array([ 1, 32768]),
//     new Uint32Array([ 1, 65536]),
//     new Uint32Array([ 1, 131072]),
//     new Uint32Array([ 1, 262144]),
//     new Uint32Array([ 1, 524288]),
//     new Uint32Array([ 1, 1048576]),
//     new Uint32Array([ 1, 2097152]),
//     new Uint32Array([ 1, 12582912]),
//     new Uint32Array([ 1, 16777216]),
//     new Uint32Array([ 1, 33554432]),
//     new Uint32Array([ 1, 67108864]),
//     new Uint32Array([ 1, 134217728]),
//     new Uint32Array([ 1, 268435456]),
//     new Uint32Array([ 1, 536870912]),
//     new Uint32Array([ 1, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 2, 1]),
//     new Uint32Array([ 1, 1, 2]),
//     new Uint32Array([ 1, 2, 4]),
//     new Uint32Array([ 1, 4, 8]),
//     new Uint32Array([ 1, 24, 16]),
//     new Uint32Array([ 1, 32, 32]),
//     new Uint32Array([ 1, 64, 64]),
//     new Uint32Array([ 1, 128, 128]),
//     new Uint32Array([ 1, 256, 768]),
//     new Uint32Array([ 1, 512, 1024]),
//     new Uint32Array([ 1, 1024, 2048]),
//     new Uint32Array([ 1, 6144, 4096]),
//     new Uint32Array([ 1, 8192, 8192]),
//     new Uint32Array([ 1, 16384, 16384]),
//     new Uint32Array([ 1, 32768, 32768]),
//     new Uint32Array([ 1, 65536, 65536]),
//     new Uint32Array([ 1, 131072, 131072]),
//     new Uint32Array([ 1, 786432, 262144]),
//     new Uint32Array([ 1, 1048576, 524288]),
//     new Uint32Array([ 1, 2097152, 1048576]),
//     new Uint32Array([ 1, 4194304, 6291456]),
//     new Uint32Array([ 1, 8388608, 8388608]),
//     new Uint32Array([ 1, 16777216, 16777216]),
//     new Uint32Array([ 1, 33554432, 33554432]),
//     new Uint32Array([ 1, 201326592, 67108864]),
//     new Uint32Array([ 1, 268435456, 134217728]),
//     new Uint32Array([ 1, 536870912, 268435456]),
//     new Uint32Array([ 1, 1073741824, 536870912]),
//     new Uint32Array([ 2, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 3, 1]),
//     new Uint32Array([ 2, 1, 2]),
//     new Uint32Array([ 1, 1, 2, 4]),
//     new Uint32Array([ 1, 2, 4, 8]),
//     new Uint32Array([ 1, 12, 8, 16]),
//     new Uint32Array([ 1, 16, 48, 32]),
//     new Uint32Array([ 1, 32, 64, 64]),
//     new Uint32Array([ 1, 64, 128, 128]),
//     new Uint32Array([ 1, 384, 256, 768]),
//     new Uint32Array([ 1, 512, 512, 1024]),
//     new Uint32Array([ 1, 1024, 1024, 2048]),
//     new Uint32Array([ 1, 2048, 6144, 4096]),
//     new Uint32Array([ 1, 12288, 8192, 8192]),
//     new Uint32Array([ 1, 16384, 16384, 16384]),
//     new Uint32Array([ 1, 32768, 32768, 32768]),
//     new Uint32Array([ 1, 65536, 65536, 65536]),
//     new Uint32Array([ 1, 393216, 131072, 131072]),
//     new Uint32Array([ 1, 524288, 786432, 262144]),
//     new Uint32Array([ 1, 1048576, 1048576, 524288]),
//     new Uint32Array([ 1, 2097152, 2097152, 1048576]),
//     new Uint32Array([ 1, 12582912, 4194304, 6291456]),
//     new Uint32Array([ 1, 16777216, 8388608, 8388608]),
//     new Uint32Array([ 1, 33554432, 16777216, 16777216]),
//     new Uint32Array([ 1, 67108864, 100663296, 33554432]),
//     new Uint32Array([ 1, 402653184, 134217728, 67108864]),
//     new Uint32Array([ 1, 536870912, 268435456, 134217728]),
//     new Uint32Array([ 1, 1073741824, 536870912, 268435456]),
//     new Uint32Array([ 2, 1073741824, 536870912]),
//     new Uint32Array([ 3, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 4, 1]),
//     new Uint32Array([ 3, 1, 2]),
//     new Uint32Array([ 2, 1, 2, 4]),
//     new Uint32Array([ 1, 1, 2, 4, 8]),
//     new Uint32Array([ 1, 6, 4, 8, 16]),
//     new Uint32Array([ 1, 8, 24, 16, 32]),
//     new Uint32Array([ 1, 16, 32, 96, 64]),
//     new Uint32Array([ 1, 96, 64, 128, 128]),
//     new Uint32Array([ 1, 128, 128, 256, 256]),
//     new Uint32Array([ 1, 256, 768, 512, 1536]),
//     new Uint32Array([ 1, 1536, 1024, 1024, 2048]),
//     new Uint32Array([ 1, 2048, 2048, 6144, 4096]),
//     new Uint32Array([ 1, 4096, 12288, 8192, 8192]),
//     new Uint32Array([ 1, 24576, 16384, 16384, 16384]),
//     new Uint32Array([ 1, 32768, 32768, 32768, 32768]),
//     new Uint32Array([ 1, 196608, 65536, 65536, 65536]),
//     new Uint32Array([ 1, 262144, 393216, 131072, 131072]),
//     new Uint32Array([ 1, 524288, 524288, 786432, 262144]),
//     new Uint32Array([ 1, 3145728, 1048576, 1048576, 524288]),
//     new Uint32Array([ 1, 4194304, 6291456, 2097152, 3145728]),
//     new Uint32Array([ 1, 8388608, 8388608, 4194304, 4194304]),
//     new Uint32Array([ 1, 50331648, 16777216, 8388608, 8388608]),
//     new Uint32Array([ 1, 67108864, 33554432, 50331648, 16777216]),
//     new Uint32Array([ 1, 134217728, 201326592, 67108864, 33554432]),
//     new Uint32Array([ 1, 805306368, 268435456, 134217728, 67108864]),
//     new Uint32Array([ 1, 1073741824, 536870912, 268435456, 134217728]),
//     new Uint32Array([ 2, 1073741824, 536870912, 268435456]),
//     new Uint32Array([ 3, 1073741824, 536870912]),
//     new Uint32Array([ 4, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 5, 1]),
//     new Uint32Array([ 4, 1, 3]),
//     new Uint32Array([ 3, 1, 3, 4]),
//     new Uint32Array([ 2, 1, 3, 4, 8]),
//     new Uint32Array([ 1, 1, 2, 4, 8, 16]),
//     new Uint32Array([ 1, 6, 12, 8, 16, 32]),
//     new Uint32Array([ 1, 8, 16, 48, 32, 64]),
//     new Uint32Array([ 1, 48, 32, 64, 192, 128]),
//     new Uint32Array([ 1, 64, 192, 128, 256, 256]),
//     new Uint32Array([ 1, 384, 256, 768, 512, 1536]),
//     new Uint32Array([ 1, 512, 1536, 1024, 1024, 2048]),
//     new Uint32Array([ 1, 3072, 2048, 2048, 2048, 4096]),
//     new Uint32Array([ 1, 4096, 4096, 12288, 12288, 8192]),
//     new Uint32Array([ 1, 24576, 24576, 16384, 16384, 16384]),
//     new Uint32Array([ 1, 32768, 32768, 32768, 32768, 32768]),
//     new Uint32Array([ 1, 196608, 196608, 65536, 65536, 65536]),
//     new Uint32Array([ 1, 262144, 262144, 393216, 393216, 131072]),
//     new Uint32Array([ 1, 1572864, 524288, 524288, 524288, 262144]),
//     new Uint32Array([ 1, 2097152, 3145728, 1048576, 1048576, 524288]),
//     new Uint32Array([ 1, 12582912, 4194304, 6291456, 2097152, 3145728]),
//     new Uint32Array([ 1, 16777216, 25165824, 8388608, 4194304, 4194304]),
//     new Uint32Array([ 1, 100663296, 33554432, 16777216, 25165824, 8388608]),
//     new Uint32Array([ 1, 134217728, 67108864, 100663296, 33554432, 16777216]),
//     new Uint32Array([ 1, 805306368, 402653184, 134217728, 67108864, 33554432]),
//     new Uint32Array([ 1, 1073741824, 536870912, 268435456, 134217728, 67108864]),
//     new Uint32Array([ 2, 1073741824, 1610612736, 268435456, 134217728]),
//     new Uint32Array([ 3, 1073741824, 1610612736, 268435456]),
//     new Uint32Array([ 4, 1073741824, 1610612736]),
//     new Uint32Array([ 5, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 6, 1]),
//     new Uint32Array([ 6, 3]),
//     new Uint32Array([ 5, 3, 6]),
//     new Uint32Array([ 4, 3, 6, 8]),
//     new Uint32Array([ 2, 1, 3, 6, 8, 16]),
//     new Uint32Array([ 1, 1, 2, 4, 8, 16, 32]),
//     new Uint32Array([ 1, 6, 12, 24, 16, 32, 64]),
//     new Uint32Array([ 1, 24, 16, 32, 96, 192, 128]),
//     new Uint32Array([ 1, 32, 96, 192, 128, 256, 256]),
//     new Uint32Array([ 1, 192, 128, 256, 256, 512, 512]),
//     new Uint32Array([ 1, 768, 768, 512, 1536, 1024, 3072]),
//     new Uint32Array([ 1, 1024, 3072, 3072, 2048, 2048, 4096]),
//     new Uint32Array([ 1, 6144, 4096, 4096, 4096, 12288, 8192]),
//     new Uint32Array([ 1, 24576, 24576, 24576, 24576, 16384, 16384]),
//     new Uint32Array([ 1, 32768, 32768, 32768, 32768, 32768, 32768]),
//     new Uint32Array([ 1, 196608, 196608, 196608, 196608, 65536, 65536]),
//     new Uint32Array([ 1, 786432, 262144, 262144, 262144, 393216, 131072]),
//     new Uint32Array([ 1, 1048576, 1572864, 1572864, 524288, 524288, 262144]),
//     new Uint32Array([ 1, 6291456, 6291456, 2097152, 3145728, 1048576, 1572864]),
//     new Uint32Array([ 1, 25165824, 8388608, 4194304, 4194304, 2097152, 2097152]),
//     new Uint32Array([ 1, 33554432, 50331648, 25165824, 8388608, 4194304, 4194304]),
//     new Uint32Array([ 1, 201326592, 67108864, 33554432, 50331648, 25165824, 8388608]),
//     new Uint32Array([ 1, 805306368, 402653184, 201326592, 67108864, 33554432, 16777216]),
//     new Uint32Array([ 1, 1073741824, 536870912, 268435456, 134217728, 67108864, 33554432]),
//     new Uint32Array([ 2, 1073741824, 1610612736, 805306368, 134217728, 67108864]),
//     new Uint32Array([ 4, 1610612736, 805306368, 134217728]),
//     new Uint32Array([ 5, 1610612736, 805306368]),
//     new Uint32Array([ 6, 1610612736]),
//     new Uint32Array([ 6, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 7, 1]),
//     new Uint32Array([ 7, 3]),
//     new Uint32Array([ 6, 1, 6]),
//     new Uint32Array([ 5, 1, 6, 12]),
//     new Uint32Array([ 4, 1, 6, 12, 16]),
//     new Uint32Array([ 2, 1, 3, 6, 12, 16, 32]),
//     new Uint32Array([ 1, 1, 2, 4, 8, 16, 32, 64]),
//     new Uint32Array([ 1, 6, 12, 24, 48, 96, 64, 128]),
//     new Uint32Array([ 1, 24, 48, 96, 64, 128, 384, 256]),
//     new Uint32Array([ 1, 96, 192, 128, 384, 256, 512, 512]),
//     new Uint32Array([ 1, 384, 256, 768, 512, 1536, 1024, 3072]),
//     new Uint32Array([ 1, 1536, 1536, 1024, 3072, 2048, 2048, 4096]),
//     new Uint32Array([ 1, 6144, 6144, 6144, 4096, 4096, 12288, 8192]),
//     new Uint32Array([ 1, 24576, 24576, 24576, 24576, 24576, 16384, 16384]),
//     new Uint32Array([ 1, 32768, 32768, 32768, 32768, 32768, 32768, 32768]),
//     new Uint32Array([ 1, 196608, 196608, 196608, 196608, 196608, 65536, 65536]),
//     new Uint32Array([ 1, 786432, 786432, 786432, 262144, 262144, 393216, 131072]),
//     new Uint32Array([ 1, 3145728, 3145728, 1048576, 1572864, 524288, 524288, 262144]),
//     new Uint32Array([ 1, 12582912, 4194304, 6291456, 2097152, 3145728, 1048576, 1572864]),
//     new Uint32Array([ 1, 50331648, 25165824, 8388608, 12582912, 4194304, 2097152, 2097152]),
//     new Uint32Array([ 1, 201326592, 100663296, 50331648, 16777216, 8388608, 12582912, 4194304]),
//     new Uint32Array([ 1, 805306368, 402653184, 201326592, 100663296, 50331648, 16777216, 8388608]),
//     new Uint32Array([ 1, 1073741824, 536870912, 268435456, 134217728, 67108864, 33554432, 16777216]),
//     new Uint32Array([ 2, 1073741824, 1610612736, 805306368, 402653184, 67108864, 33554432]),
//     new Uint32Array([ 4, 1073741824, 805306368, 402653184, 67108864]),
//     new Uint32Array([ 5, 1073741824, 805306368, 402653184]),
//     new Uint32Array([ 6, 1073741824, 805306368]),
//     new Uint32Array([ 7, 1610612736]),
//     new Uint32Array([ 7, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 8, 1, 1]),
//     new Uint32Array([ 8, 3]),
//     new Uint32Array([ 7, 1, 6]),
//     new Uint32Array([ 6, 1, 3, 12]),
//     new Uint32Array([ 5, 1, 3, 12, 24]),
//     new Uint32Array([ 4, 1, 3, 12, 24, 48]),
//     new Uint32Array([ 2, 1, 3, 6, 12, 24, 48, 64]),
//     new Uint32Array([ 1, 3, 3, 4, 8, 16, 32, 64, 128]),
//     new Uint32Array([ 1, 12, 12, 24, 48, 96, 192, 128, 256]),
//     new Uint32Array([ 1, 48, 48, 96, 192, 128, 256, 768, 512]),
//     new Uint32Array([ 1, 192, 192, 384, 256, 768, 512, 1024, 1024]),
//     new Uint32Array([ 1, 768, 768, 1536, 1536, 3072, 3072, 2048, 6144]),
//     new Uint32Array([ 1, 3072, 3072, 6144, 6144, 4096, 4096, 12288, 8192]),
//     new Uint32Array([ 1, 12288, 12288, 24576, 24576, 24576, 24576, 16384, 16384]),
//     new Uint32Array([ 1, 114688, 114688, 32768, 32768, 32768, 32768, 32768, 32768]),
//     new Uint32Array([ 1, 393216, 393216, 196608, 196608, 196608, 196608, 65536, 65536]),
//     new Uint32Array([ 1, 1572864, 1572864, 786432, 786432, 262144, 262144, 393216, 131072]),
//     new Uint32Array([ 1, 6291456, 6291456, 3145728, 3145728, 1572864, 1572864, 524288, 786432]),
//     new Uint32Array([ 1, 25165824, 25165824, 12582912, 4194304, 6291456, 2097152, 1048576, 1048576]),
//     new Uint32Array([ 1, 100663296, 100663296, 50331648, 25165824, 8388608, 4194304, 6291456, 2097152]),
//     new Uint32Array([ 1, 402653184, 402653184, 201326592, 100663296, 50331648, 25165824, 8388608, 4194304]),
//     new Uint32Array([ 1, 1610612736, 1610612736, 268435456, 134217728, 67108864, 33554432, 16777216, 8388608]),
//     new Uint32Array([ 2, 1073741824, 1610612736, 805306368, 402653184, 201326592, 100663296, 16777216]),
//     new Uint32Array([ 4, 1073741824, 1610612736, 402653184, 201326592, 100663296]),
//     new Uint32Array([ 5, 1073741824, 1610612736, 402653184, 201326592]),
//     new Uint32Array([ 6, 1073741824, 1610612736, 402653184]),
//     new Uint32Array([ 7, 1073741824, 805306368]),
//     new Uint32Array([ 8, 1610612736]),
//     new Uint32Array([ 8, 1073741824, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 10, 1]),
//     new Uint32Array([ 9, 3, 2]),
//     new Uint32Array([ 8, 1, 7, 4]),
//     new Uint32Array([ 8, 3, 12]),
//     new Uint32Array([ 7, 3, 6, 24]),
//     new Uint32Array([ 6, 3, 6, 12, 48]),
//     new Uint32Array([ 4, 1, 3, 6, 12, 48, 96]),
//     new Uint32Array([ 3, 3, 7, 12, 24, 48, 96, 128]),
//     new Uint32Array([ 1, 3, 7, 14, 12, 16, 32, 64, 128, 256]),
//     new Uint32Array([ 1, 12, 24, 48, 48, 96, 192, 384, 256, 512]),
//     new Uint32Array([ 1, 112, 96, 192, 192, 384, 768, 512, 1536, 1024]),
//     new Uint32Array([ 1, 384, 896, 768, 768, 1536, 1024, 3072, 2048, 6144]),
//     new Uint32Array([ 1, 3584, 3072, 3072, 3072, 6144, 6144, 4096, 4096, 8192]),
//     new Uint32Array([ 1, 12288, 12288, 12288, 12288, 24576, 24576, 24576, 24576, 16384]),
//     new Uint32Array([ 1, 114688, 114688, 114688, 114688, 32768, 32768, 32768, 32768, 32768]),
//     new Uint32Array([ 1, 393216, 393216, 393216, 393216, 196608, 196608, 196608, 196608, 65536]),
//     new Uint32Array([ 1, 3670016, 1572864, 1572864, 1572864, 786432, 786432, 262144, 262144, 131072]),
//     new Uint32Array([ 1, 12582912, 14680064, 6291456, 6291456, 3145728, 1048576, 1572864, 524288, 786432]),
//     new Uint32Array([ 1, 117440512, 50331648, 25165824, 25165824, 12582912, 6291456, 2097152, 3145728, 1048576]),
//     new Uint32Array([ 1, 402653184, 201326592, 100663296, 100663296, 50331648, 25165824, 12582912, 4194304, 2097152]),
//     new Uint32Array([ 1, 1610612736, 1879048192, 939524096, 402653184, 67108864, 33554432, 16777216, 8388608, 4194304]),
//     new Uint32Array([ 3, 1610612736, 1879048192, 402653184, 201326592, 100663296, 50331648, 8388608]),
//     new Uint32Array([ 4, 1073741824, 1610612736, 805306368, 402653184, 100663296, 50331648]),
//     new Uint32Array([ 6, 1610612736, 805306368, 402653184, 100663296]),
//     new Uint32Array([ 7, 1610612736, 805306368, 201326592]),
//     new Uint32Array([ 8, 1610612736, 402653184]),
//     new Uint32Array([ 8, 1073741824, 1879048192, 268435456]),
//     new Uint32Array([ 9, 1610612736, 536870912]),
//     new Uint32Array([ 10, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 11, 1]),
//     new Uint32Array([ 10, 1, 2]),
//     new Uint32Array([ 10, 3, 4]),
//     new Uint32Array([ 9, 3, 14, 8]),
//     new Uint32Array([ 8, 1, 7, 28, 16]),
//     new Uint32Array([ 7, 1, 3, 12, 48]),
//     new Uint32Array([ 6, 1, 3, 14, 24, 96]),
//     new Uint32Array([ 5, 3, 7, 12, 24, 96, 192]),
//     new Uint32Array([ 3, 1, 3, 14, 28, 48, 96, 192, 256]),
//     new Uint32Array([ 1, 3, 7, 14, 28, 56, 48, 64, 128, 256, 512]),
//     new Uint32Array([ 1, 28, 56, 48, 96, 192, 192, 384, 768, 1536, 1024]),
//     new Uint32Array([ 1, 224, 192, 448, 384, 768, 768, 1536, 1024, 2048, 2048]),
//     new Uint32Array([ 1, 1792, 1792, 3584, 3584, 3072, 3072, 6144, 6144, 4096, 12288]),
//     new Uint32Array([ 1, 14336, 14336, 12288, 12288, 12288, 12288, 24576, 24576, 24576, 16384]),
//     new Uint32Array([ 1, 114688, 114688, 114688, 114688, 114688, 114688, 32768, 32768, 32768, 32768]),
//     new Uint32Array([ 1, 917504, 917504, 393216, 393216, 393216, 393216, 196608, 196608, 196608, 65536]),
//     new Uint32Array([ 1, 7340032, 7340032, 3670016, 3670016, 1572864, 1572864, 786432, 786432, 262144, 393216]),
//     new Uint32Array([ 1, 58720256, 25165824, 29360128, 12582912, 6291456, 6291456, 3145728, 1048576, 524288, 524288]),
//     new Uint32Array([ 1, 469762048, 234881024, 100663296, 50331648, 25165824, 25165824, 12582912, 6291456, 3145728, 1048576]),
//     new Uint32Array([ 1, 1610612736, 1879048192, 939524096, 469762048, 234881024, 100663296, 16777216, 8388608, 4194304, 2097152]),
//     new Uint32Array([ 3, 1073741824, 1610612736, 939524096, 469762048, 100663296, 50331648, 25165824, 4194304]),
//     new Uint32Array([ 5, 1610612736, 1879048192, 402653184, 201326592, 50331648, 25165824]),
//     new Uint32Array([ 6, 1073741824, 1610612736, 939524096, 201326592, 50331648]),
//     new Uint32Array([ 7, 1073741824, 1610612736, 402653184, 100663296]),
//     new Uint32Array([ 8, 1073741824, 1879048192, 469762048, 67108864]),
//     new Uint32Array([ 9, 1610612736, 939524096, 134217728]),
//     new Uint32Array([ 10, 1610612736, 268435456]),
//     new Uint32Array([ 10, 1073741824, 536870912]),
//     new Uint32Array([ 11, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 12, 1]),
//     new Uint32Array([ 11, 1, 2]),
//     new Uint32Array([ 11, 3, 4]),
//     new Uint32Array([ 10, 1, 7, 8]),
//     new Uint32Array([ 10, 3, 14, 16]),
//     new Uint32Array([ 9, 3, 15, 56, 32]),
//     new Uint32Array([ 8, 1, 7, 28, 112, 64]),
//     new Uint32Array([ 7, 3, 7, 28, 48, 192]),
//     new Uint32Array([ 5, 1, 3, 15, 28, 48, 224, 384]),
//     new Uint32Array([ 3, 1, 3, 7, 14, 56, 112, 192, 384, 768]),
//     new Uint32Array([ 1, 3, 7, 14, 28, 56, 112, 224, 192, 256, 512, 1024]),
//     new Uint32Array([ 1, 60, 120, 112, 224, 448, 384, 768, 768, 1536, 3072, 2048]),
//     new Uint32Array([ 1, 960, 896, 1920, 1792, 1536, 3584, 3072, 3072, 6144, 4096, 12288]),
//     new Uint32Array([ 1, 15360, 15360, 14336, 14336, 14336, 12288, 12288, 12288, 24576, 24576, 16384]),
//     new Uint32Array([ 1, 114688, 114688, 114688, 114688, 114688, 114688, 114688, 114688, 32768, 32768, 32768]),
//     new Uint32Array([ 1, 1966080, 1966080, 917504, 917504, 917504, 393216, 393216, 393216, 196608, 196608, 65536]),
//     new Uint32Array([ 1, 31457280, 14680064, 15728640, 7340032, 3145728, 3670016, 1572864, 1572864, 786432, 262144, 393216]),
//     new Uint32Array([ 1, 503316480, 251658240, 117440512, 58720256, 29360128, 12582912, 6291456, 6291456, 3145728, 1572864, 524288]),
//     new Uint32Array([ 1, 1610612736, 1879048192, 939524096, 469762048, 234881024, 117440512, 58720256, 25165824, 4194304, 2097152, 1048576]),
//     new Uint32Array([ 3, 1073741824, 1610612736, 1879048192, 939524096, 234881024, 117440512, 25165824, 12582912, 6291456]),
//     new Uint32Array([ 5, 1073741824, 1610612736, 2013265920, 469762048, 100663296, 58720256, 12582912]),
//     new Uint32Array([ 7, 1610612736, 1879048192, 469762048, 100663296, 25165824]),
//     new Uint32Array([ 8, 1073741824, 1879048192, 469762048, 117440512, 16777216]),
//     new Uint32Array([ 9, 1610612736, 2013265920, 234881024, 33554432]),
//     new Uint32Array([ 10, 1610612736, 939524096, 67108864]),
//     new Uint32Array([ 10, 1073741824, 1879048192, 134217728]),
//     new Uint32Array([ 11, 1610612736, 268435456]),
//     new Uint32Array([ 11, 1073741824, 536870912]),
//     new Uint32Array([ 12, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 13, 1]),
//     new Uint32Array([ 12, 1, 3]),
//     new Uint32Array([ 12, 3, 6]),
//     new Uint32Array([ 12, 7, 12]),
//     new Uint32Array([ 11, 1, 15, 16]),
//     new Uint32Array([ 11, 7, 30, 32]),
//     new Uint32Array([ 10, 3, 15, 56, 64]),
//     new Uint32Array([ 9, 3, 15, 60, 240, 128]),
//     new Uint32Array([ 8, 3, 15, 30, 112, 448, 256]),
//     new Uint32Array([ 6, 1, 7, 15, 60, 112, 192, 768]),
//     new Uint32Array([ 3, 1, 3, 7, 15, 30, 56, 240, 448, 768, 1536]),
//     new Uint32Array([ 1, 7, 15, 31, 30, 60, 112, 224, 448, 896, 768, 1024, 2048]),
//     new Uint32Array([ 1, 248, 240, 480, 480, 960, 896, 1792, 1536, 3072, 3072, 6144, 4096]),
//     new Uint32Array([ 1, 7936, 7936, 7680, 7680, 15360, 15360, 14336, 14336, 12288, 12288, 24576, 24576]),
//     new Uint32Array([ 1, 253952, 253952, 253952, 253952, 114688, 114688, 114688, 114688, 114688, 114688, 32768, 32768]),
//     new Uint32Array([ 1, 8126464, 8126464, 3932160, 3932160, 1966080, 1966080, 917504, 917504, 393216, 393216, 196608, 196608]),
//     new Uint32Array([ 1, 260046848, 125829120, 62914560, 62914560, 31457280, 14680064, 7340032, 3145728, 1572864, 1572864, 786432, 262144]),
//     new Uint32Array([ 1, 1879048192, 2013265920, 2080374784, 1006632960, 503316480, 117440512, 58720256, 29360128, 14680064, 6291456, 1048576, 524288]),
//     new Uint32Array([ 3, 1073741824, 1610612736, 1879048192, 2013265920, 1006632960, 234881024, 125829120, 29360128, 6291456, 3145728]),
//     new Uint32Array([ 6, 1073741824, 1879048192, 2013265920, 503316480, 117440512, 25165824, 6291456]),
//     new Uint32Array([ 8, 1610612736, 2013265920, 1006632960, 117440512, 29360128, 4194304]),
//     new Uint32Array([ 9, 1610612736, 2013265920, 503316480, 125829120, 8388608]),
//     new Uint32Array([ 10, 1610612736, 2013265920, 234881024, 16777216]),
//     new Uint32Array([ 11, 1879048192, 1006632960, 33554432]),
//     new Uint32Array([ 11, 1073741824, 2013265920, 67108864]),
//     new Uint32Array([ 12, 1879048192, 402653184]),
//     new Uint32Array([ 12, 1610612736, 805306368]),
//     new Uint32Array([ 12, 1073741824, 1610612736]),
//     new Uint32Array([ 13, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 14, 1]),
//     new Uint32Array([ 14, 3]),
//     new Uint32Array([ 13, 1, 7]),
//     new Uint32Array([ 13, 3, 14]),
//     new Uint32Array([ 13, 15, 28]),
//     new Uint32Array([ 12, 1, 31, 48]),
//     new Uint32Array([ 12, 7, 63, 96]),
//     new Uint32Array([ 11, 3, 15, 124, 192]),
//     new Uint32Array([ 10, 1, 15, 63, 240, 256]),
//     new Uint32Array([ 9, 3, 15, 63, 252, 960, 512]),
//     new Uint32Array([ 7, 1, 7, 15, 63, 252, 480, 1792, 1024]),
//     new Uint32Array([ 4, 1, 3, 15, 31, 63, 124, 240, 960, 1792, 3072]),
//     new Uint32Array([ 1, 15, 31, 63, 63, 126, 252, 496, 480, 960, 1792, 3584, 3072, 4096]),
//     new Uint32Array([ 1, 4080, 4064, 4032, 4032, 8064, 7936, 7680, 7680, 15360, 14336, 12288, 12288, 24576]),
//     new Uint32Array([ 1, 520192, 520192, 520192, 520192, 253952, 253952, 253952, 253952, 114688, 114688, 114688, 114688, 32768]),
//     new Uint32Array([ 1, 133693440, 66584576, 33030144, 33030144, 16515072, 8126464, 3932160, 3932160, 1966080, 917504, 393216, 393216, 196608]),
//     new Uint32Array([ 1, 2013265920, 2080374784, 2113929216, 2113929216, 1056964608, 528482304, 130023424, 62914560, 31457280, 7340032, 3670016, 1572864, 262144]),
//     new Uint32Array([ 4, 1073741824, 1610612736, 2013265920, 2080374784, 2113929216, 520093696, 125829120, 31457280, 7340032, 1572864]),
//     new Uint32Array([ 7, 1073741824, 1879048192, 2013265920, 2113929216, 528482304, 62914560, 7340032, 1048576]),
//     new Uint32Array([ 9, 1610612736, 2013265920, 2113929216, 528482304, 31457280, 2097152]),
//     new Uint32Array([ 10, 1073741824, 2013265920, 2113929216, 125829120, 4194304]),
//     new Uint32Array([ 11, 1610612736, 2013265920, 520093696, 25165824]),
//     new Uint32Array([ 12, 1879048192, 2113929216, 50331648]),
//     new Uint32Array([ 12, 1073741824, 2080374784, 100663296]),
//     new Uint32Array([ 13, 2013265920, 469762048]),
//     new Uint32Array([ 13, 1610612736, 939524096]),
//     new Uint32Array([ 13, 1073741824, 1879048192]),
//     new Uint32Array([ 14, 1610612736]),
//     new Uint32Array([ 14, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 15, 1]),
//     new Uint32Array([ 15, 3]),
//     new Uint32Array([ 15, 7]),
//     new Uint32Array([ 14, 1, 15]),
//     new Uint32Array([ 14, 3, 31]),
//     new Uint32Array([ 14, 15, 63]),
//     new Uint32Array([ 14, 31, 127]),
//     new Uint32Array([ 13, 3, 63, 252]),
//     new Uint32Array([ 13, 15, 255, 496]),
//     new Uint32Array([ 12, 3, 63, 511, 960]),
//     new Uint32Array([ 11, 3, 31, 255, 1023, 1792]),
//     new Uint32Array([ 9, 3, 15, 63, 255, 1023, 4080, 3072]),
//     new Uint32Array([ 5, 1, 3, 15, 31, 63, 255, 511, 1023, 4080, 7936, 4096]),
//     new Uint32Array([ 1, 255, 255, 511, 511, 1023, 1023, 2047, 2047, 4092, 4080, 8128, 7936, 15360, 12288]),
//     new Uint32Array([ 1, 8388352, 8388352, 4193792, 4193792, 2096128, 2096128, 1046528, 1046528, 520192, 520192, 253952, 253952, 114688, 114688]),
//     new Uint32Array([ 1, 2139095040, 2139095040, 2143289344, 2143289344, 2145386496, 2145386496, 2146435072, 2146435072, 536346624, 133693440, 33292288, 8126464, 1966080, 393216]),
//     new Uint32Array([ 5, 1073741824, 1610612736, 2013265920, 2080374784, 2113929216, 2139095040, 2143289344, 2145386496, 133693440, 8126464, 262144]),
//     new Uint32Array([ 9, 1610612736, 2013265920, 2113929216, 2139095040, 2145386496, 133693440, 1572864]),
//     new Uint32Array([ 11, 1610612736, 2080374784, 2139095040, 2145386496, 7340032]),
//     new Uint32Array([ 12, 1610612736, 2113929216, 2143289344, 31457280]),
//     new Uint32Array([ 13, 2013265920, 2139095040, 130023424]),
//     new Uint32Array([ 13, 1610612736, 2113929216, 528482304]),
//     new Uint32Array([ 14, 2080374784, 2130706432]),
//     new Uint32Array([ 14, 2013265920, 2113929216]),
//     new Uint32Array([ 14, 1610612736, 2080374784]),
//     new Uint32Array([ 14, 1073741824, 2013265920]),
//     new Uint32Array([ 15, 1879048192]),
//     new Uint32Array([ 15, 1610612736]),
//     new Uint32Array([ 15, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 16, 1]),
//     new Uint32Array([ 16, 3]),
//     new Uint32Array([ 16, 7]),
//     new Uint32Array([ 16, 15]),
//     new Uint32Array([ 16, 31]),
//     new Uint32Array([ 16, 63]),
//     new Uint32Array([ 16, 127]),
//     new Uint32Array([ 15, 3, 255, 3]),
//     new Uint32Array([ 15, 15, 511, 15]),
//     new Uint32Array([ 15, 63, 1023, 63]),
//     new Uint32Array([ 15, 255, 2047, 255]),
//     new Uint32Array([ 14, 15, 1023, 4095, 1023, 15]),
//     new Uint32Array([ 13, 15, 255, 4095, 8191, 4095, 255, 15]),
//     new Uint32Array([ 9, 3, 15, 63, 255, 1023, 4095, 16383, 16383, 16383, 4095, 1023, 255, 63, 15, 3]),
//     null,
//     new Uint32Array([ 9, 1610612736, 2013265920, 2113929216, 2139095040, 2145386496, 2146959360, 2147352576, 2147352576, 2147352576, 2146959360, 2145386496, 2139095040, 2113929216, 2013265920, 1610612736]),
//     new Uint32Array([ 13, 2013265920, 2139095040, 2146959360, 2147221504, 2146959360, 2139095040, 2013265920]),
//     new Uint32Array([ 14, 2013265920, 2145386496, 2146959360, 2145386496, 2013265920]),
//     new Uint32Array([ 15, 2139095040, 2146435072, 2139095040]),
//     new Uint32Array([ 15, 2113929216, 2145386496, 2113929216]),
//     new Uint32Array([ 15, 2013265920, 2143289344, 2013265920]),
//     new Uint32Array([ 15, 1610612736, 2139095040, 1610612736]),
//     new Uint32Array([ 16, 2130706432]),
//     new Uint32Array([ 16, 2113929216]),
//     new Uint32Array([ 16, 2080374784]),
//     new Uint32Array([ 16, 2013265920]),
//     new Uint32Array([ 16, 1879048192]),
//     new Uint32Array([ 16, 1610612736]),
//     new Uint32Array([ 16, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 17, 1]),
//     new Uint32Array([ 17, 3]),
//     new Uint32Array([ 17, 7]),
//     new Uint32Array([ 17, 15, 1]),
//     new Uint32Array([ 17, 31, 3]),
//     new Uint32Array([ 17, 63, 15]),
//     new Uint32Array([ 17, 127, 31]),
//     new Uint32Array([ 17, 252, 63, 3]),
//     new Uint32Array([ 17, 496, 255, 15]),
//     new Uint32Array([ 17, 960, 511, 63, 3]),
//     new Uint32Array([ 17, 1792, 1023, 255, 31, 3]),
//     new Uint32Array([ 17, 3072, 4080, 1023, 255, 63, 15, 3]),
//     new Uint32Array([ 17, 4096, 7936, 4080, 1023, 511, 255, 63, 31, 15, 3, 1]),
//     new Uint32Array([ 18, 12288, 15360, 7936, 8128, 4080, 4092, 2047, 2047, 1023, 1023, 511, 511, 255, 255]),
//     new Uint32Array([ 18, 114688, 114688, 253952, 253952, 520192, 520192, 1046528, 1046528, 2096128, 2096128, 4193792, 4193792, 8388352, 8388352]),
//     new Uint32Array([ 18, 393216, 1966080, 8126464, 33292288, 133693440, 536346624, 2146435072, 2146435072, 2145386496, 2145386496, 2143289344, 2143289344, 2139095040, 2139095040]),
//     new Uint32Array([ 17, 262144, 8126464, 133693440, 2145386496, 2143289344, 2139095040, 2113929216, 2080374784, 2013265920, 1610612736, 1073741824]),
//     new Uint32Array([ 17, 1572864, 133693440, 2145386496, 2139095040, 2113929216, 2013265920, 1610612736]),
//     new Uint32Array([ 17, 7340032, 2145386496, 2139095040, 2080374784, 1610612736]),
//     new Uint32Array([ 17, 31457280, 2143289344, 2113929216, 1610612736]),
//     new Uint32Array([ 17, 130023424, 2139095040, 2013265920]),
//     new Uint32Array([ 17, 528482304, 2113929216, 1610612736]),
//     new Uint32Array([ 17, 2130706432, 2080374784]),
//     new Uint32Array([ 17, 2113929216, 2013265920]),
//     new Uint32Array([ 17, 2080374784, 1610612736]),
//     new Uint32Array([ 17, 2013265920, 1073741824]),
//     new Uint32Array([ 17, 1879048192]),
//     new Uint32Array([ 17, 1610612736]),
//     new Uint32Array([ 17, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 18, 1]),
//     new Uint32Array([ 18, 3]),
//     new Uint32Array([ 18, 7, 1]),
//     new Uint32Array([ 18, 14, 3]),
//     new Uint32Array([ 18, 28, 15]),
//     new Uint32Array([ 18, 48, 31, 1]),
//     new Uint32Array([ 18, 96, 63, 7]),
//     new Uint32Array([ 18, 192, 124, 15, 3]),
//     new Uint32Array([ 18, 256, 240, 63, 15, 1]),
//     new Uint32Array([ 18, 512, 960, 252, 63, 15, 3]),
//     new Uint32Array([ 18, 1024, 1792, 480, 252, 63, 15, 7, 1]),
//     new Uint32Array([ 19, 3072, 1792, 960, 240, 124, 63, 31, 15, 3, 1]),
//     new Uint32Array([ 19, 4096, 3072, 3584, 1792, 960, 480, 496, 252, 126, 63, 63, 31, 15]),
//     new Uint32Array([ 19, 24576, 12288, 12288, 14336, 15360, 7680, 7680, 7936, 8064, 4032, 4032, 4064, 4080]),
//     new Uint32Array([ 19, 32768, 114688, 114688, 114688, 114688, 253952, 253952, 253952, 253952, 520192, 520192, 520192, 520192]),
//     new Uint32Array([ 19, 196608, 393216, 393216, 917504, 1966080, 3932160, 3932160, 8126464, 16515072, 33030144, 33030144, 66584576, 133693440]),
//     new Uint32Array([ 19, 262144, 1572864, 3670016, 7340032, 31457280, 62914560, 130023424, 528482304, 1056964608, 2113929216, 2113929216, 2080374784, 2013265920]),
//     new Uint32Array([ 19, 1572864, 7340032, 31457280, 125829120, 520093696, 2113929216, 2080374784, 2013265920, 1610612736, 1073741824]),
//     new Uint32Array([ 18, 1048576, 7340032, 62914560, 528482304, 2113929216, 2013265920, 1879048192, 1073741824]),
//     new Uint32Array([ 18, 2097152, 31457280, 528482304, 2113929216, 2013265920, 1610612736]),
//     new Uint32Array([ 18, 4194304, 125829120, 2113929216, 2013265920, 1073741824]),
//     new Uint32Array([ 18, 25165824, 520093696, 2013265920, 1610612736]),
//     new Uint32Array([ 18, 50331648, 2113929216, 1879048192]),
//     new Uint32Array([ 18, 100663296, 2080374784, 1073741824]),
//     new Uint32Array([ 18, 469762048, 2013265920]),
//     new Uint32Array([ 18, 939524096, 1610612736]),
//     new Uint32Array([ 18, 1879048192, 1073741824]),
//     new Uint32Array([ 18, 1610612736]),
//     new Uint32Array([ 18, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 19, 1]),
//     new Uint32Array([ 19, 3, 1]),
//     new Uint32Array([ 19, 6, 3]),
//     new Uint32Array([ 19, 12, 7]),
//     new Uint32Array([ 19, 16, 15, 1]),
//     new Uint32Array([ 19, 32, 30, 7]),
//     new Uint32Array([ 19, 64, 56, 15, 3]),
//     new Uint32Array([ 19, 128, 240, 60, 15, 3]),
//     new Uint32Array([ 19, 256, 448, 112, 30, 15, 3]),
//     new Uint32Array([ 20, 768, 192, 112, 60, 15, 7, 1]),
//     new Uint32Array([ 20, 1536, 768, 448, 240, 56, 30, 15, 7, 3, 1]),
//     new Uint32Array([ 20, 2048, 1024, 768, 896, 448, 224, 112, 60, 30, 31, 15, 7]),
//     new Uint32Array([ 20, 4096, 6144, 3072, 3072, 1536, 1792, 896, 960, 480, 480, 240, 248]),
//     new Uint32Array([ 20, 24576, 24576, 12288, 12288, 14336, 14336, 15360, 15360, 7680, 7680, 7936, 7936]),
//     new Uint32Array([ 20, 32768, 32768, 114688, 114688, 114688, 114688, 114688, 114688, 253952, 253952, 253952, 253952]),
//     new Uint32Array([ 20, 196608, 196608, 393216, 393216, 917504, 917504, 1966080, 1966080, 3932160, 3932160, 8126464, 8126464]),
//     new Uint32Array([ 20, 262144, 786432, 1572864, 1572864, 3145728, 7340032, 14680064, 31457280, 62914560, 62914560, 125829120, 260046848]),
//     new Uint32Array([ 20, 524288, 1048576, 6291456, 14680064, 29360128, 58720256, 117440512, 503316480, 1006632960, 2080374784, 2013265920, 1879048192]),
//     new Uint32Array([ 20, 3145728, 6291456, 29360128, 125829120, 234881024, 1006632960, 2013265920, 1879048192, 1610612736, 1073741824]),
//     new Uint32Array([ 20, 6291456, 25165824, 117440512, 503316480, 2013265920, 1879048192, 1073741824]),
//     new Uint32Array([ 19, 4194304, 29360128, 117440512, 1006632960, 2013265920, 1610612736]),
//     new Uint32Array([ 19, 8388608, 125829120, 503316480, 2013265920, 1610612736]),
//     new Uint32Array([ 19, 16777216, 234881024, 2013265920, 1610612736]),
//     new Uint32Array([ 19, 33554432, 1006632960, 1879048192]),
//     new Uint32Array([ 19, 67108864, 2013265920, 1073741824]),
//     new Uint32Array([ 19, 402653184, 1879048192]),
//     new Uint32Array([ 19, 805306368, 1610612736]),
//     new Uint32Array([ 19, 1610612736, 1073741824]),
//     new Uint32Array([ 19, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 20, 1]),
//     new Uint32Array([ 20, 2, 1]),
//     new Uint32Array([ 20, 4, 3]),
//     new Uint32Array([ 20, 8, 7, 1]),
//     new Uint32Array([ 20, 16, 14, 3]),
//     new Uint32Array([ 20, 32, 56, 15, 3]),
//     new Uint32Array([ 20, 64, 112, 28, 7, 1]),
//     new Uint32Array([ 21, 192, 48, 28, 7, 3]),
//     new Uint32Array([ 21, 384, 224, 48, 28, 15, 3, 1]),
//     new Uint32Array([ 21, 768, 384, 192, 112, 56, 14, 7, 3, 1]),
//     new Uint32Array([ 21, 1024, 512, 256, 192, 224, 112, 56, 28, 14, 7, 3]),
//     new Uint32Array([ 21, 2048, 3072, 1536, 768, 768, 384, 448, 224, 112, 120, 60]),
//     new Uint32Array([ 21, 12288, 4096, 6144, 3072, 3072, 3584, 1536, 1792, 1920, 896, 960]),
//     new Uint32Array([ 21, 16384, 24576, 24576, 12288, 12288, 12288, 14336, 14336, 14336, 15360, 15360]),
//     new Uint32Array([ 21, 32768, 32768, 32768, 114688, 114688, 114688, 114688, 114688, 114688, 114688, 114688]),
//     new Uint32Array([ 21, 65536, 196608, 196608, 393216, 393216, 393216, 917504, 917504, 917504, 1966080, 1966080]),
//     new Uint32Array([ 21, 393216, 262144, 786432, 1572864, 1572864, 3670016, 3145728, 7340032, 15728640, 14680064, 31457280]),
//     new Uint32Array([ 21, 524288, 1572864, 3145728, 6291456, 6291456, 12582912, 29360128, 58720256, 117440512, 251658240, 503316480]),
//     new Uint32Array([ 21, 1048576, 2097152, 4194304, 25165824, 58720256, 117440512, 234881024, 469762048, 939524096, 1879048192, 1610612736]),
//     new Uint32Array([ 21, 6291456, 12582912, 25165824, 117440512, 234881024, 939524096, 1879048192, 1610612736, 1073741824]),
//     new Uint32Array([ 21, 12582912, 58720256, 100663296, 469762048, 2013265920, 1610612736, 1073741824]),
//     new Uint32Array([ 21, 25165824, 100663296, 469762048, 1879048192, 1610612736]),
//     new Uint32Array([ 20, 16777216, 117440512, 469762048, 1879048192, 1073741824]),
//     new Uint32Array([ 20, 33554432, 234881024, 2013265920, 1610612736]),
//     new Uint32Array([ 20, 67108864, 939524096, 1610612736]),
//     new Uint32Array([ 20, 134217728, 1879048192, 1073741824]),
//     new Uint32Array([ 20, 268435456, 1610612736]),
//     new Uint32Array([ 20, 536870912, 1073741824]),
//     new Uint32Array([ 20, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 21, 1]),
//     new Uint32Array([ 21, 2, 1]),
//     new Uint32Array([ 21, 4, 3]),
//     new Uint32Array([ 21, 8, 14, 3]),
//     new Uint32Array([ 21, 16, 28, 7, 1]),
//     new Uint32Array([ 22, 48, 12, 3, 1]),
//     new Uint32Array([ 22, 96, 24, 14, 3, 1]),
//     new Uint32Array([ 22, 192, 96, 24, 12, 7, 3]),
//     new Uint32Array([ 22, 256, 192, 96, 48, 28, 14, 3, 1]),
//     new Uint32Array([ 22, 512, 256, 128, 64, 48, 56, 28, 14, 7, 3]),
//     new Uint32Array([ 22, 1024, 1536, 768, 384, 192, 192, 96, 48, 56, 28]),
//     new Uint32Array([ 22, 2048, 2048, 1024, 1536, 768, 768, 384, 448, 192, 224]),
//     new Uint32Array([ 22, 12288, 4096, 6144, 6144, 3072, 3072, 3584, 3584, 1792, 1792]),
//     new Uint32Array([ 22, 16384, 24576, 24576, 24576, 12288, 12288, 12288, 12288, 14336, 14336]),
//     new Uint32Array([ 22, 32768, 32768, 32768, 32768, 114688, 114688, 114688, 114688, 114688, 114688]),
//     new Uint32Array([ 22, 65536, 196608, 196608, 196608, 393216, 393216, 393216, 393216, 917504, 917504]),
//     new Uint32Array([ 22, 393216, 262144, 786432, 786432, 1572864, 1572864, 3670016, 3670016, 7340032, 7340032]),
//     new Uint32Array([ 22, 524288, 524288, 1048576, 3145728, 6291456, 6291456, 12582912, 29360128, 25165824, 58720256]),
//     new Uint32Array([ 22, 1048576, 3145728, 6291456, 12582912, 25165824, 25165824, 50331648, 100663296, 234881024, 469762048]),
//     new Uint32Array([ 22, 2097152, 4194304, 8388608, 16777216, 100663296, 234881024, 469762048, 939524096, 1879048192, 1610612736]),
//     new Uint32Array([ 22, 4194304, 25165824, 50331648, 100663296, 469762048, 939524096, 1610612736, 1073741824]),
//     new Uint32Array([ 22, 25165824, 50331648, 201326592, 402653184, 1879048192, 1610612736]),
//     new Uint32Array([ 22, 50331648, 201326592, 939524096, 1610612736, 1073741824]),
//     new Uint32Array([ 22, 100663296, 402653184, 1610612736, 1073741824]),
//     new Uint32Array([ 21, 67108864, 469762048, 1879048192, 1073741824]),
//     new Uint32Array([ 21, 134217728, 939524096, 1610612736]),
//     new Uint32Array([ 21, 268435456, 1610612736]),
//     new Uint32Array([ 21, 536870912, 1073741824]),
//     new Uint32Array([ 21, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 22, 1]),
//     new Uint32Array([ 22, 2, 3]),
//     new Uint32Array([ 22, 4, 7, 1]),
//     new Uint32Array([ 23, 12, 3]),
//     new Uint32Array([ 23, 24, 6, 3]),
//     new Uint32Array([ 23, 48, 12, 6, 3]),
//     new Uint32Array([ 23, 96, 48, 12, 6, 3, 1]),
//     new Uint32Array([ 23, 128, 96, 48, 24, 12, 7, 3]),
//     new Uint32Array([ 23, 256, 128, 64, 32, 16, 12, 14, 7, 3]),
//     new Uint32Array([ 23, 512, 256, 384, 192, 96, 48, 48, 24, 12]),
//     new Uint32Array([ 23, 1024, 1536, 512, 768, 384, 192, 192, 96, 112]),
//     new Uint32Array([ 23, 6144, 2048, 3072, 1024, 1536, 768, 768, 896, 384]),
//     new Uint32Array([ 23, 8192, 4096, 4096, 6144, 6144, 3072, 3072, 3072, 3584]),
//     new Uint32Array([ 23, 16384, 24576, 24576, 24576, 24576, 12288, 12288, 12288, 12288]),
//     new Uint32Array([ 23, 32768, 32768, 32768, 32768, 32768, 114688, 114688, 114688, 114688]),
//     new Uint32Array([ 23, 65536, 196608, 196608, 196608, 196608, 393216, 393216, 393216, 393216]),
//     new Uint32Array([ 23, 131072, 262144, 262144, 786432, 786432, 1572864, 1572864, 1572864, 3670016]),
//     new Uint32Array([ 23, 786432, 524288, 1572864, 1048576, 3145728, 6291456, 6291456, 14680064, 12582912]),
//     new Uint32Array([ 23, 1048576, 3145728, 2097152, 6291456, 12582912, 25165824, 25165824, 50331648, 117440512]),
//     new Uint32Array([ 23, 2097152, 4194304, 12582912, 25165824, 50331648, 100663296, 100663296, 201326592, 402653184]),
//     new Uint32Array([ 23, 4194304, 8388608, 16777216, 33554432, 67108864, 402653184, 939524096, 1879048192, 1610612736]),
//     new Uint32Array([ 23, 8388608, 50331648, 100663296, 201326592, 402653184, 1879048192, 1610612736]),
//     new Uint32Array([ 23, 50331648, 100663296, 402653184, 805306368, 1610612736, 1073741824]),
//     new Uint32Array([ 23, 100663296, 402653184, 805306368, 1610612736]),
//     new Uint32Array([ 23, 201326592, 805306368, 1610612736]),
//     new Uint32Array([ 23, 402653184, 1610612736]),
//     new Uint32Array([ 22, 268435456, 1879048192, 1073741824]),
//     new Uint32Array([ 22, 536870912, 1610612736]),
//     new Uint32Array([ 22, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 23, 1, 1]),
//     new Uint32Array([ 24, 3]),
//     new Uint32Array([ 24, 6, 1]),
//     new Uint32Array([ 24, 12, 3, 1]),
//     new Uint32Array([ 24, 24, 12, 3, 1]),
//     new Uint32Array([ 24, 48, 24, 12, 3, 1]),
//     new Uint32Array([ 24, 64, 48, 24, 12, 6, 3, 1]),
//     new Uint32Array([ 24, 128, 64, 32, 16, 8, 4, 3, 3]),
//     new Uint32Array([ 24, 256, 128, 192, 96, 48, 24, 12, 12]),
//     new Uint32Array([ 24, 512, 768, 256, 128, 192, 96, 48, 48]),
//     new Uint32Array([ 24, 1024, 1024, 512, 768, 256, 384, 192, 192]),
//     new Uint32Array([ 24, 6144, 2048, 3072, 3072, 1536, 1536, 768, 768]),
//     new Uint32Array([ 24, 8192, 12288, 4096, 4096, 6144, 6144, 3072, 3072]),
//     new Uint32Array([ 24, 16384, 16384, 24576, 24576, 24576, 24576, 12288, 12288]),
//     new Uint32Array([ 24, 32768, 32768, 32768, 32768, 32768, 32768, 114688, 114688]),
//     new Uint32Array([ 24, 65536, 65536, 196608, 196608, 196608, 196608, 393216, 393216]),
//     new Uint32Array([ 24, 131072, 393216, 262144, 262144, 786432, 786432, 1572864, 1572864]),
//     new Uint32Array([ 24, 786432, 524288, 1572864, 1572864, 3145728, 3145728, 6291456, 6291456]),
//     new Uint32Array([ 24, 1048576, 1048576, 2097152, 6291456, 4194304, 12582912, 25165824, 25165824]),
//     new Uint32Array([ 24, 2097152, 6291456, 4194304, 8388608, 25165824, 50331648, 100663296, 100663296]),
//     new Uint32Array([ 24, 4194304, 8388608, 25165824, 50331648, 100663296, 201326592, 402653184, 402653184]),
//     new Uint32Array([ 24, 8388608, 16777216, 33554432, 67108864, 134217728, 268435456, 1610612736, 1610612736]),
//     new Uint32Array([ 24, 16777216, 100663296, 201326592, 402653184, 805306368, 1610612736, 1073741824]),
//     new Uint32Array([ 24, 100663296, 201326592, 402653184, 1610612736, 1073741824]),
//     new Uint32Array([ 24, 201326592, 402653184, 1610612736, 1073741824]),
//     new Uint32Array([ 24, 402653184, 1610612736, 1073741824]),
//     new Uint32Array([ 24, 805306368, 1073741824]),
//     new Uint32Array([ 24, 1610612736]),
//     new Uint32Array([ 23, 1073741824, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 25, 1]),
//     new Uint32Array([ 25, 3]),
//     new Uint32Array([ 25, 6, 1]),
//     new Uint32Array([ 25, 12, 6, 1]),
//     new Uint32Array([ 25, 16, 12, 6, 1]),
//     new Uint32Array([ 25, 32, 16, 12, 6, 3, 1]),
//     new Uint32Array([ 25, 64, 32, 16, 8, 4, 2, 1]),
//     new Uint32Array([ 25, 128, 64, 96, 48, 24, 12, 6]),
//     new Uint32Array([ 25, 256, 384, 128, 64, 96, 48, 24]),
//     new Uint32Array([ 25, 512, 512, 256, 384, 128, 192, 96]),
//     new Uint32Array([ 25, 3072, 1024, 1536, 512, 768, 256, 384]),
//     new Uint32Array([ 25, 4096, 2048, 2048, 3072, 1024, 1536, 1536]),
//     new Uint32Array([ 25, 8192, 12288, 4096, 4096, 6144, 6144, 6144]),
//     new Uint32Array([ 25, 16384, 16384, 24576, 24576, 24576, 24576, 24576]),
//     new Uint32Array([ 25, 32768, 32768, 32768, 32768, 32768, 32768, 32768]),
//     new Uint32Array([ 25, 65536, 65536, 196608, 196608, 196608, 196608, 196608]),
//     new Uint32Array([ 25, 131072, 393216, 262144, 262144, 786432, 786432, 786432]),
//     new Uint32Array([ 25, 262144, 524288, 524288, 1572864, 1048576, 3145728, 3145728]),
//     new Uint32Array([ 25, 1572864, 1048576, 3145728, 2097152, 6291456, 4194304, 12582912]),
//     new Uint32Array([ 25, 2097152, 2097152, 4194304, 12582912, 8388608, 25165824, 50331648]),
//     new Uint32Array([ 25, 4194304, 12582912, 8388608, 16777216, 50331648, 100663296, 201326592]),
//     new Uint32Array([ 25, 8388608, 16777216, 50331648, 100663296, 201326592, 402653184, 805306368]),
//     new Uint32Array([ 25, 16777216, 33554432, 67108864, 134217728, 268435456, 536870912, 1073741824]),
//     new Uint32Array([ 25, 33554432, 67108864, 402653184, 805306368, 1610612736, 1073741824]),
//     new Uint32Array([ 25, 67108864, 402653184, 805306368, 1073741824]),
//     new Uint32Array([ 25, 402653184, 805306368, 1073741824]),
//     new Uint32Array([ 25, 805306368, 1073741824]),
//     new Uint32Array([ 25, 1610612736]),
//     new Uint32Array([ 25, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 26, 1]),
//     new Uint32Array([ 26, 3]),
//     new Uint32Array([ 26, 6, 3]),
//     new Uint32Array([ 26, 8, 6, 3]),
//     new Uint32Array([ 26, 16, 8, 6, 3, 1]),
//     new Uint32Array([ 26, 32, 16, 8, 4, 2, 1]),
//     new Uint32Array([ 26, 64, 32, 16, 24, 12, 6]),
//     new Uint32Array([ 26, 128, 192, 96, 32, 16, 24]),
//     new Uint32Array([ 26, 256, 256, 128, 192, 96, 32]),
//     new Uint32Array([ 26, 512, 512, 256, 256, 128, 192]),
//     new Uint32Array([ 26, 3072, 1024, 1536, 512, 768, 768]),
//     new Uint32Array([ 26, 4096, 2048, 2048, 3072, 3072, 1024]),
//     new Uint32Array([ 26, 8192, 12288, 4096, 4096, 4096, 6144]),
//     new Uint32Array([ 26, 16384, 16384, 24576, 24576, 24576, 24576]),
//     new Uint32Array([ 26, 32768, 32768, 32768, 32768, 32768, 32768]),
//     new Uint32Array([ 26, 65536, 65536, 196608, 196608, 196608, 196608]),
//     new Uint32Array([ 26, 131072, 393216, 262144, 262144, 262144, 786432]),
//     new Uint32Array([ 26, 262144, 524288, 524288, 1572864, 1572864, 1048576]),
//     new Uint32Array([ 26, 1572864, 1048576, 3145728, 2097152, 6291456, 6291456]),
//     new Uint32Array([ 26, 2097152, 2097152, 4194304, 4194304, 8388608, 25165824]),
//     new Uint32Array([ 26, 4194304, 4194304, 8388608, 25165824, 50331648, 33554432]),
//     new Uint32Array([ 26, 8388608, 25165824, 50331648, 33554432, 67108864, 201326592]),
//     new Uint32Array([ 26, 16777216, 33554432, 67108864, 201326592, 402653184, 805306368]),
//     new Uint32Array([ 26, 33554432, 67108864, 134217728, 268435456, 536870912, 1073741824]),
//     new Uint32Array([ 26, 67108864, 134217728, 805306368, 1610612736, 1073741824]),
//     new Uint32Array([ 26, 134217728, 805306368, 1610612736]),
//     new Uint32Array([ 26, 805306368, 1610612736]),
//     new Uint32Array([ 26, 1610612736]),
//     new Uint32Array([ 26, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 27, 1]),
//     new Uint32Array([ 27, 3, 1]),
//     new Uint32Array([ 27, 4, 3, 1]),
//     new Uint32Array([ 27, 8, 4, 3, 1]),
//     new Uint32Array([ 27, 16, 8, 4, 2, 1]),
//     new Uint32Array([ 27, 32, 16, 8, 12, 6]),
//     new Uint32Array([ 27, 64, 32, 48, 16, 8]),
//     new Uint32Array([ 27, 128, 192, 64, 32, 48]),
//     new Uint32Array([ 27, 256, 256, 128, 192, 64]),
//     new Uint32Array([ 27, 1536, 512, 768, 256, 384]),
//     new Uint32Array([ 27, 2048, 1024, 1024, 1536, 512]),
//     new Uint32Array([ 27, 4096, 2048, 2048, 2048, 3072]),
//     new Uint32Array([ 27, 8192, 12288, 12288, 4096, 4096]),
//     new Uint32Array([ 27, 16384, 16384, 16384, 24576, 24576]),
//     new Uint32Array([ 27, 32768, 32768, 32768, 32768, 32768]),
//     new Uint32Array([ 27, 65536, 65536, 65536, 196608, 196608]),
//     new Uint32Array([ 27, 131072, 393216, 393216, 262144, 262144]),
//     new Uint32Array([ 27, 262144, 524288, 524288, 524288, 1572864]),
//     new Uint32Array([ 27, 524288, 1048576, 1048576, 3145728, 2097152]),
//     new Uint32Array([ 27, 3145728, 2097152, 6291456, 4194304, 12582912]),
//     new Uint32Array([ 27, 4194304, 4194304, 8388608, 25165824, 16777216]),
//     new Uint32Array([ 27, 8388608, 25165824, 16777216, 33554432, 100663296]),
//     new Uint32Array([ 27, 16777216, 33554432, 100663296, 67108864, 134217728]),
//     new Uint32Array([ 27, 33554432, 67108864, 134217728, 402653184, 805306368]),
//     new Uint32Array([ 27, 67108864, 134217728, 268435456, 536870912, 1073741824]),
//     new Uint32Array([ 27, 134217728, 268435456, 1610612736, 1073741824]),
//     new Uint32Array([ 27, 268435456, 1610612736, 1073741824]),
//     new Uint32Array([ 27, 1610612736, 1073741824]),
//     new Uint32Array([ 27, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 28, 1]),
//     new Uint32Array([ 28, 2, 1]),
//     new Uint32Array([ 28, 4, 2, 1]),
//     new Uint32Array([ 28, 8, 4, 2, 1]),
//     new Uint32Array([ 28, 16, 8, 4, 6]),
//     new Uint32Array([ 28, 32, 16, 24, 8]),
//     new Uint32Array([ 28, 64, 96, 32, 16]),
//     new Uint32Array([ 28, 128, 128, 64, 96]),
//     new Uint32Array([ 28, 256, 256, 128, 128]),
//     new Uint32Array([ 28, 1536, 512, 768, 256]),
//     new Uint32Array([ 28, 2048, 1024, 1024, 1536]),
//     new Uint32Array([ 28, 4096, 6144, 2048, 2048]),
//     new Uint32Array([ 28, 8192, 8192, 12288, 4096]),
//     new Uint32Array([ 28, 16384, 16384, 16384, 24576]),
//     new Uint32Array([ 28, 32768, 32768, 32768, 32768]),
//     new Uint32Array([ 28, 65536, 65536, 65536, 196608]),
//     new Uint32Array([ 28, 131072, 131072, 393216, 262144]),
//     new Uint32Array([ 28, 262144, 786432, 524288, 524288]),
//     new Uint32Array([ 28, 524288, 1048576, 1048576, 3145728]),
//     new Uint32Array([ 28, 3145728, 2097152, 6291456, 4194304]),
//     new Uint32Array([ 28, 4194304, 4194304, 8388608, 8388608]),
//     new Uint32Array([ 28, 8388608, 8388608, 16777216, 50331648]),
//     new Uint32Array([ 28, 16777216, 50331648, 33554432, 67108864]),
//     new Uint32Array([ 28, 33554432, 67108864, 201326592, 134217728]),
//     new Uint32Array([ 28, 67108864, 134217728, 268435456, 805306368]),
//     new Uint32Array([ 28, 134217728, 268435456, 536870912, 1073741824]),
//     new Uint32Array([ 28, 268435456, 536870912, 1073741824]),
//     new Uint32Array([ 28, 536870912, 1073741824]),
//     new Uint32Array([ 28, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 29, 1]),
//     new Uint32Array([ 29, 2, 1]),
//     new Uint32Array([ 29, 4, 2, 1]),
//     new Uint32Array([ 29, 8, 4, 2]),
//     new Uint32Array([ 29, 16, 8, 12]),
//     new Uint32Array([ 29, 32, 48, 16]),
//     new Uint32Array([ 29, 64, 64, 32]),
//     new Uint32Array([ 29, 128, 128, 64]),
//     new Uint32Array([ 29, 768, 256, 384]),
//     new Uint32Array([ 29, 1024, 512, 512]),
//     new Uint32Array([ 29, 2048, 1024, 1024]),
//     new Uint32Array([ 29, 4096, 6144, 2048]),
//     new Uint32Array([ 29, 8192, 8192, 12288]),
//     new Uint32Array([ 29, 16384, 16384, 16384]),
//     new Uint32Array([ 29, 32768, 32768, 32768]),
//     new Uint32Array([ 29, 65536, 65536, 65536]),
//     new Uint32Array([ 29, 131072, 131072, 393216]),
//     new Uint32Array([ 29, 262144, 786432, 524288]),
//     new Uint32Array([ 29, 524288, 1048576, 1048576]),
//     new Uint32Array([ 29, 1048576, 2097152, 2097152]),
//     new Uint32Array([ 29, 6291456, 4194304, 12582912]),
//     new Uint32Array([ 29, 8388608, 8388608, 16777216]),
//     new Uint32Array([ 29, 16777216, 16777216, 33554432]),
//     new Uint32Array([ 29, 33554432, 100663296, 67108864]),
//     new Uint32Array([ 29, 67108864, 134217728, 402653184]),
//     new Uint32Array([ 29, 134217728, 268435456, 536870912]),
//     new Uint32Array([ 29, 268435456, 536870912, 1073741824]),
//     new Uint32Array([ 29, 536870912, 1073741824]),
//     new Uint32Array([ 29, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 30, 1]),
//     new Uint32Array([ 30, 2, 1]),
//     new Uint32Array([ 30, 4, 2]),
//     new Uint32Array([ 30, 8, 4]),
//     new Uint32Array([ 30, 16, 24]),
//     new Uint32Array([ 30, 32, 32]),
//     new Uint32Array([ 30, 64, 64]),
//     new Uint32Array([ 30, 128, 128]),
//     new Uint32Array([ 30, 768, 256]),
//     new Uint32Array([ 30, 1024, 512]),
//     new Uint32Array([ 30, 2048, 1024]),
//     new Uint32Array([ 30, 4096, 6144]),
//     new Uint32Array([ 30, 8192, 8192]),
//     new Uint32Array([ 30, 16384, 16384]),
//     new Uint32Array([ 30, 32768, 32768]),
//     new Uint32Array([ 30, 65536, 65536]),
//     new Uint32Array([ 30, 131072, 131072]),
//     new Uint32Array([ 30, 262144, 786432]),
//     new Uint32Array([ 30, 524288, 1048576]),
//     new Uint32Array([ 30, 1048576, 2097152]),
//     new Uint32Array([ 30, 6291456, 4194304]),
//     new Uint32Array([ 30, 8388608, 8388608]),
//     new Uint32Array([ 30, 16777216, 16777216]),
//     new Uint32Array([ 30, 33554432, 33554432]),
//     new Uint32Array([ 30, 67108864, 201326592]),
//     new Uint32Array([ 30, 134217728, 268435456]),
//     new Uint32Array([ 30, 268435456, 536870912]),
//     new Uint32Array([ 30, 536870912, 1073741824]),
//     new Uint32Array([ 30, 1073741824]),
//     null,
//     null,
//     new Uint32Array([ 31, 1]),
//     new Uint32Array([ 31, 2]),
//     new Uint32Array([ 31, 4]),
//     new Uint32Array([ 31, 8]),
//     new Uint32Array([ 31, 16]),
//     new Uint32Array([ 31, 32]),
//     new Uint32Array([ 31, 64]),
//     new Uint32Array([ 31, 384]),
//     new Uint32Array([ 31, 512]),
//     new Uint32Array([ 31, 1024]),
//     new Uint32Array([ 31, 2048]),
//     new Uint32Array([ 31, 4096]),
//     new Uint32Array([ 31, 8192]),
//     new Uint32Array([ 31, 16384]),
//     new Uint32Array([ 31, 32768]),
//     new Uint32Array([ 31, 65536]),
//     new Uint32Array([ 31, 131072]),
//     new Uint32Array([ 31, 262144]),
//     new Uint32Array([ 31, 524288]),
//     new Uint32Array([ 31, 1048576]),
//     new Uint32Array([ 31, 2097152]),
//     new Uint32Array([ 31, 12582912]),
//     new Uint32Array([ 31, 16777216]),
//     new Uint32Array([ 31, 33554432]),
//     new Uint32Array([ 31, 67108864]),
//     new Uint32Array([ 31, 134217728]),
//     new Uint32Array([ 31, 268435456]),
//     new Uint32Array([ 31, 536870912]),
//     new Uint32Array([ 31, 1073741824]),
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
//     null,
// ];

// let sindex = [];
// let skip = [];
// let count = [];
// let buf = [];
// let cur = 0;
// for (let i in VisibilityTile_mask) {
//     let v = VisibilityTile_mask[i];
//     if (v != null) {
//         sindex[i] = cur + 1;
//         skip[i] = v[0] - 1;
//         count[i] = v.length - 1;
//         for (let j = 1; j < v.length; j++) {
//             buf.push("0x" + v[j].toString(16));
//             cur++;
//         }
//     } else {
//         sindex[i] = 0;
//         skip[i] = 0;
//         count[i] = 0;
//     }
// }
// console.log(sindex.join());
// console.log(skip.join());
// console.log(count.join());
// console.log(buf.join());


const VisibilityTile_mask = {
    startIndex: new Uint16Array([
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,0,0,30,31,33,35,37,39,41,43,45,47,49,51,53,55,57,59,61,63,65,67,69,71,73,75,77,79,81,83,85,0,0,86,87,89,92,95,98,101,104,107,110,113,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,166,0,0,167,168,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,233,237,241,245,249,253,257,261,265,268,270,0,0,271,272,274,277,281,286,291,296,301,306,311,316,321,326,331,336,341,346,351,356,361,366,371,376,381,386,390,393,395,0,0,396,397,398,400,403,408,414,420,426,432,438,444,450,456,462,468,474,480,486,492,498,504,510,516,522,527,530,532,533,0,0,534,535,536,538,541,545,551,558,565,572,579,586,593,600,607,614,621,628,635,642,649,656,663,670,676,680,683,685,686,0,0,687,689,690,692,695,699,704,711,719,727,735,743,751,759,767,775,783,791,799,807,815,823,831,838,843,847,850,852,853,0,0,855,856,858,861,863,866,870,876,883,892,901,910,919,928,937,946,955,964,973,982,991,1000,1007,1013,1017,1020,1022,1025,1027,0,0,1028,1029,1031,1033,1036,1040,1044,1049,1055,1063,1073,1083,1093,1103,1113,1123,1133,1143,1153,1163,1173,1181,1187,1192,1196,1200,1203,1205,1207,0,0,1208,1209,1211,1213,1216,1219,1223,1228,1233,1240,1249,1260,1271,1282,1293,1304,1315,1326,1337,1348,1357,1364,1369,1374,1378,1381,1384,1386,1388,0,0,1389,1390,1392,1394,1396,1399,1402,1406,1411,1417,1424,1434,1446,1458,1470,1482,1494,1506,1518,1528,1535,1541,1546,1550,1553,1556,1558,1560,1562,0,0,1563,1564,1565,1567,1569,1571,1574,1577,1581,1586,1592,1600,1610,1623,1636,1649,1662,1675,1685,1693,1699,1704,1708,1711,1714,1716,1718,1720,1721,0,0,1722,1723,1724,1725,1727,1729,1731,1733,1736,1739,1743,1748,1755,1766,1780,1794,1808,1819,1826,1831,1835,1838,1841,1843,1845,1847,1849,1850,1851,0,0,1852,1853,1854,1855,1856,1857,1858,1859,1862,1865,1868,1871,1876,1883,0,1898,1913,1920,1925,1928,1931,1934,1937,1938,1939,1940,1941,1942,1943,0,0,1944,1945,1946,1947,1949,1951,1953,1955,1958,1961,1965,1970,1977,1988,2002,2016,2030,2041,2048,2053,2057,2060,2063,2065,2067,2069,2071,2072,2073,0,0,2074,2075,2076,2078,2080,2082,2085,2088,2092,2097,2103,2111,2121,2134,2147,2160,2173,2186,2196,2204,2210,2215,2219,2222,2225,2227,2229,2231,2232,0,0,2233,2234,2236,2238,2240,2243,2246,2250,2255,2261,2268,2278,2290,2302,2314,2326,2338,2350,2362,2372,2379,2385,2390,2394,2397,2400,2402,2404,2406,0,0,2407,2408,2410,2412,2415,2418,2422,2427,2432,2439,2448,2459,2470,2481,2492,2503,2514,2525,2536,2547,2556,2563,2568,2573,2577,2580,2583,2585,2587,0,0,2588,2589,2591,2593,2596,2600,2604,2609,2615,2623,2633,2643,2653,2663,2673,2683,2693,2703,2713,2723,2733,2741,2747,2752,2756,2760,2763,2765,2767,0,0,2768,2769,2771,2774,2776,2779,2783,2789,2796,2805,2814,2823,2832,2841,2850,2859,2868,2877,2886,2895,2904,2913,2920,2926,2930,2933,2935,2938,2940,0,0,2941,2943,2944,2946,2949,2953,2958,2965,2973,2981,2989,2997,3005,3013,3021,3029,3037,3045,3053,3061,3069,3077,3085,3092,3097,3101,3104,3106,3107,0,0,3109,3110,3111,3113,3116,3120,3126,3133,3140,3147,3154,3161,3168,3175,3182,3189,3196,3203,3210,3217,3224,3231,3238,3245,3251,3255,3258,3260,3261,0,0,3262,3263,3264,3266,3269,3274,3280,3286,3292,3298,3304,3310,3316,3322,3328,3334,3340,3346,3352,3358,3364,3370,3376,3382,3388,3393,3396,3398,3399,0,0,3400,3401,3403,3406,3410,3415,3420,3425,3430,3435,3440,3445,3450,3455,3460,3465,3470,3475,3480,3485,3490,3495,3500,3505,3510,3515,3519,3522,3524,0,0,3525,3526,3528,3531,3535,3539,3543,3547,3551,3555,3559,3563,3567,3571,3575,3579,3583,3587,3591,3595,3599,3603,3607,3611,3615,3619,3623,3626,3628,0,0,3629,3630,3632,3635,3638,3641,3644,3647,3650,3653,3656,3659,3662,3665,3668,3671,3674,3677,3680,3683,3686,3689,3692,3695,3698,3701,3704,3707,3709,0,0,3710,3711,3713,3715,3717,3719,3721,3723,3725,3727,3729,3731,3733,3735,3737,3739,3741,3743,3745,3747,3749,3751,3753,3755,3757,3759,3761,3763,3765,0,0,3766,3767,3768,3769,3770,3771,3772,3773,3774,3775,3776,3777,3778,3779,3780,3781,3782,3783,3784,3785,3786,3787,3788,3789,3790,3791,3792,3793,3794,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
    ]),
    skip: new Uint8Array([
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,0,0,3,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,0,0,4,3,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,0,0,5,5,4,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,4,5,5,0,0,6,6,5,4,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,4,5,6,6,0,0,7,7,6,5,4,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,4,5,6,7,7,0,0,9,8,7,7,6,5,3,2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,5,6,7,7,8,9,0,0,10,9,9,8,7,6,5,4,2,0,0,0,0,0,0,0,0,0,0,0,2,4,5,6,7,8,9,9,10,0,0,11,10,10,9,9,8,7,6,4,2,0,0,0,0,0,0,0,0,0,2,4,6,7,8,9,9,10,10,11,0,0,12,11,11,11,10,10,9,8,7,5,2,0,0,0,0,0,0,0,2,5,7,8,9,10,10,11,11,11,12,0,0,13,13,12,12,12,11,11,10,9,8,6,3,0,0,0,0,0,3,6,8,9,10,11,11,12,12,12,13,13,0,0,14,14,14,13,13,13,13,12,12,11,10,8,4,0,0,0,4,8,10,11,12,12,13,13,13,13,14,14,14,0,0,15,15,15,15,15,15,15,14,14,14,14,13,12,8,0,8,12,13,14,14,14,14,15,15,15,15,15,15,15,0,0,16,16,16,16,16,16,16,16,16,16,16,16,16,17,17,17,16,16,16,16,16,16,16,16,16,16,16,16,16,0,0,17,17,17,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,17,17,17,17,17,17,17,17,17,17,17,0,0,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,18,18,18,18,18,18,18,18,18,0,0,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,19,19,19,19,19,19,19,0,0,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,20,20,20,20,20,0,0,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,21,21,21,0,0,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,22,0,0,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,0,0,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,0,0,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,0,0,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,0,0,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,0,0,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,0,0,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
    ]),
    count: new Uint8Array([
        0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,0,0,1,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,1,0,0,1,2,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,2,1,0,0,1,2,3,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,3,2,1,0,0,1,1,2,3,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,5,3,2,1,1,0,0,1,1,2,3,4,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,6,4,3,2,1,1,0,0,2,1,2,3,4,5,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,7,5,4,3,2,1,2,0,0,1,2,3,2,3,4,6,7,9,9,9,9,9,9,9,9,9,9,9,9,9,7,6,4,3,2,3,2,1,0,0,1,2,2,3,4,4,5,6,8,10,10,10,10,10,10,10,10,10,10,10,8,6,5,4,4,3,2,2,1,0,0,1,2,2,3,3,4,5,5,7,9,11,11,11,11,11,11,11,11,11,9,7,5,5,4,3,3,2,2,1,0,0,1,2,2,2,3,3,4,5,6,7,10,12,12,12,12,12,12,12,10,7,6,5,4,3,3,2,2,2,1,0,0,1,1,2,2,2,3,3,4,5,6,8,10,13,13,13,13,13,10,8,6,5,4,3,3,2,2,2,1,1,0,0,1,1,1,2,2,2,2,3,3,4,5,7,11,14,14,14,11,7,5,4,3,3,2,2,2,2,1,1,1,0,0,1,1,1,1,1,1,1,3,3,3,3,5,7,15,0,15,7,5,3,3,3,3,1,1,1,1,1,1,1,0,0,1,1,1,2,2,2,2,3,3,4,5,7,11,14,14,14,11,7,5,4,3,3,2,2,2,2,1,1,1,0,0,1,1,2,2,2,3,3,4,5,6,8,10,13,13,13,13,13,10,8,6,5,4,3,3,2,2,2,1,1,0,0,1,2,2,2,3,3,4,5,6,7,10,12,12,12,12,12,12,12,10,7,6,5,4,3,3,2,2,2,1,0,0,1,2,2,3,3,4,5,5,7,9,11,11,11,11,11,11,11,11,11,9,7,5,5,4,3,3,2,2,1,0,0,1,2,2,3,4,4,5,6,8,10,10,10,10,10,10,10,10,10,10,10,8,6,5,4,4,3,2,2,1,0,0,1,2,3,2,3,4,6,7,9,9,9,9,9,9,9,9,9,9,9,9,9,7,6,4,3,2,3,2,1,0,0,2,1,2,3,4,5,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,7,5,4,3,2,1,2,0,0,1,1,2,3,4,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,6,4,3,2,1,1,0,0,1,1,2,3,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,5,3,2,1,1,0,0,1,2,3,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,3,2,1,0,0,1,2,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,2,1,0,0,1,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,1,0,0,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
    ]),
    data: new Uint32Array([
        0x1,0x2,0x4,0x8,0x10,0x20,0x40,0x180,0x200,0x400,0x800,0x1000,0x2000,0x4000,0x8000,0x10000,0x20000,0x40000,0x80000,0x100000,0x200000,0xc00000,0x1000000,0x2000000,0x4000000,0x8000000,0x10000000,0x20000000,0x40000000,0x1,0x1,0x2,0x2,0x4,0x4,0x8,0x18,0x10,0x20,0x20,0x40,0x40,0x80,0x80,0x100,0x300,0x200,0x400,0x400,0x800,0x1800,0x1000,0x2000,0x2000,0x4000,0x4000,0x8000,0x8000,0x10000,0x10000,0x20000,0x20000,0xc0000,0x40000,0x100000,0x80000,0x200000,0x100000,0x400000,0x600000,0x800000,0x800000,0x1000000,0x1000000,0x2000000,0x2000000,0xc000000,0x4000000,0x10000000,0x8000000,0x20000000,0x10000000,0x40000000,0x20000000,0x40000000,0x1,0x1,0x2,0x1,0x2,0x4,0x2,0x4,0x8,0xc,0x8,0x10,0x10,0x30,0x20,0x20,0x40,0x40,0x40,0x80,0x80,0x180,0x100,0x300,0x200,0x200,0x400,0x400,0x400,0x800,0x800,0x1800,0x1000,0x3000,0x2000,0x2000,0x4000,0x4000,0x4000,0x8000,0x8000,0x8000,0x10000,0x10000,0x10000,0x60000,0x20000,0x20000,0x80000,0xc0000,0x40000,0x100000,0x100000,0x80000,0x200000,0x200000,0x100000,0xc00000,0x400000,0x600000,0x1000000,0x800000,0x800000,0x2000000,0x1000000,0x1000000,0x4000000,0x6000000,0x2000000,0x18000000,0x8000000,0x4000000,0x20000000,0x10000000,0x8000000,0x40000000,0x20000000,0x10000000,0x40000000,0x20000000,0x40000000,0x1,0x1,0x2,0x1,0x2,0x4,0x1,0x2,0x4,0x8,0x6,0x4,0x8,0x10,0x8,0x18,0x10,0x20,0x10,0x20,0x60,0x40,0x60,0x40,0x80,0x80,0x80,0x80,0x100,0x100,0x100,0x300,0x200,0x600,0x600,0x400,0x400,0x800,0x800,0x800,0x1800,0x1000,0x1000,0x3000,0x2000,0x2000,0x6000,0x4000,0x4000,0x4000,0x8000,0x8000,0x8000,0x8000,0x30000,0x10000,0x10000,0x10000,0x40000,0x60000,0x20000,0x20000,0x80000,0x80000,0xc0000,0x40000,0x300000,0x100000,0x100000,0x80000,0x400000,0x600000,0x200000,0x300000,0x800000,0x800000,0x400000,0x400000,0x3000000,0x1000000,0x800000,0x800000,0x4000000,0x2000000,0x3000000,0x1000000,0x8000000,0xc000000,0x4000000,0x2000000,0x30000000,0x10000000,0x8000000,0x4000000,0x40000000,0x20000000,0x10000000,0x8000000,0x40000000,0x20000000,0x10000000,0x40000000,0x20000000,0x40000000,0x1,0x1,0x3,0x1,0x3,0x4,0x1,0x3,0x4,0x8,0x1,0x2,0x4,0x8,0x10,0x6,0xc,0x8,0x10,0x20,0x8,0x10,0x30,0x20,0x40,0x30,0x20,0x40,0xc0,0x80,0x40,0xc0,0x80,0x100,0x100,0x180,0x100,0x300,0x200,0x600,0x200,0x600,0x400,0x400,0x800,0xc00,0x800,0x800,0x800,0x1000,0x1000,0x1000,0x3000,0x3000,0x2000,0x6000,0x6000,0x4000,0x4000,0x4000,0x8000,0x8000,0x8000,0x8000,0x8000,0x30000,0x30000,0x10000,0x10000,0x10000,0x40000,0x40000,0x60000,0x60000,0x20000,0x180000,0x80000,0x80000,0x80000,0x40000,0x200000,0x300000,0x100000,0x100000,0x80000,0xc00000,0x400000,0x600000,0x200000,0x300000,0x1000000,0x1800000,0x800000,0x400000,0x400000,0x6000000,0x2000000,0x1000000,0x1800000,0x800000,0x8000000,0x4000000,0x6000000,0x2000000,0x1000000,0x30000000,0x18000000,0x8000000,0x4000000,0x2000000,0x40000000,0x20000000,0x10000000,0x8000000,0x4000000,0x40000000,0x60000000,0x10000000,0x8000000,0x40000000,0x60000000,0x10000000,0x40000000,0x60000000,0x40000000,0x1,0x3,0x3,0x6,0x3,0x6,0x8,0x1,0x3,0x6,0x8,0x10,0x1,0x2,0x4,0x8,0x10,0x20,0x6,0xc,0x18,0x10,0x20,0x40,0x18,0x10,0x20,0x60,0xc0,0x80,0x20,0x60,0xc0,0x80,0x100,0x100,0xc0,0x80,0x100,0x100,0x200,0x200,0x300,0x300,0x200,0x600,0x400,0xc00,0x400,0xc00,0xc00,0x800,0x800,0x1000,0x1800,0x1000,0x1000,0x1000,0x3000,0x2000,0x6000,0x6000,0x6000,0x6000,0x4000,0x4000,0x8000,0x8000,0x8000,0x8000,0x8000,0x8000,0x30000,0x30000,0x30000,0x30000,0x10000,0x10000,0xc0000,0x40000,0x40000,0x40000,0x60000,0x20000,0x100000,0x180000,0x180000,0x80000,0x80000,0x40000,0x600000,0x600000,0x200000,0x300000,0x100000,0x180000,0x1800000,0x800000,0x400000,0x400000,0x200000,0x200000,0x2000000,0x3000000,0x1800000,0x800000,0x400000,0x400000,0xc000000,0x4000000,0x2000000,0x3000000,0x1800000,0x800000,0x30000000,0x18000000,0xc000000,0x4000000,0x2000000,0x1000000,0x40000000,0x20000000,0x10000000,0x8000000,0x4000000,0x2000000,0x40000000,0x60000000,0x30000000,0x8000000,0x4000000,0x60000000,0x30000000,0x8000000,0x60000000,0x30000000,0x60000000,0x40000000,0x1,0x3,0x1,0x6,0x1,0x6,0xc,0x1,0x6,0xc,0x10,0x1,0x3,0x6,0xc,0x10,0x20,0x1,0x2,0x4,0x8,0x10,0x20,0x40,0x6,0xc,0x18,0x30,0x60,0x40,0x80,0x18,0x30,0x60,0x40,0x80,0x180,0x100,0x60,0xc0,0x80,0x180,0x100,0x200,0x200,0x180,0x100,0x300,0x200,0x600,0x400,0xc00,0x600,0x600,0x400,0xc00,0x800,0x800,0x1000,0x1800,0x1800,0x1800,0x1000,0x1000,0x3000,0x2000,0x6000,0x6000,0x6000,0x6000,0x6000,0x4000,0x4000,0x8000,0x8000,0x8000,0x8000,0x8000,0x8000,0x8000,0x30000,0x30000,0x30000,0x30000,0x30000,0x10000,0x10000,0xc0000,0xc0000,0xc0000,0x40000,0x40000,0x60000,0x20000,0x300000,0x300000,0x100000,0x180000,0x80000,0x80000,0x40000,0xc00000,0x400000,0x600000,0x200000,0x300000,0x100000,0x180000,0x3000000,0x1800000,0x800000,0xc00000,0x400000,0x200000,0x200000,0xc000000,0x6000000,0x3000000,0x1000000,0x800000,0xc00000,0x400000,0x30000000,0x18000000,0xc000000,0x6000000,0x3000000,0x1000000,0x800000,0x40000000,0x20000000,0x10000000,0x8000000,0x4000000,0x2000000,0x1000000,0x40000000,0x60000000,0x30000000,0x18000000,0x4000000,0x2000000,0x40000000,0x30000000,0x18000000,0x4000000,0x40000000,0x30000000,0x18000000,0x40000000,0x30000000,0x60000000,0x40000000,0x1,0x1,0x3,0x1,0x6,0x1,0x3,0xc,0x1,0x3,0xc,0x18,0x1,0x3,0xc,0x18,0x30,0x1,0x3,0x6,0xc,0x18,0x30,0x40,0x3,0x3,0x4,0x8,0x10,0x20,0x40,0x80,0xc,0xc,0x18,0x30,0x60,0xc0,0x80,0x100,0x30,0x30,0x60,0xc0,0x80,0x100,0x300,0x200,0xc0,0xc0,0x180,0x100,0x300,0x200,0x400,0x400,0x300,0x300,0x600,0x600,0xc00,0xc00,0x800,0x1800,0xc00,0xc00,0x1800,0x1800,0x1000,0x1000,0x3000,0x2000,0x3000,0x3000,0x6000,0x6000,0x6000,0x6000,0x4000,0x4000,0x1c000,0x1c000,0x8000,0x8000,0x8000,0x8000,0x8000,0x8000,0x60000,0x60000,0x30000,0x30000,0x30000,0x30000,0x10000,0x10000,0x180000,0x180000,0xc0000,0xc0000,0x40000,0x40000,0x60000,0x20000,0x600000,0x600000,0x300000,0x300000,0x180000,0x180000,0x80000,0xc0000,0x1800000,0x1800000,0xc00000,0x400000,0x600000,0x200000,0x100000,0x100000,0x6000000,0x6000000,0x3000000,0x1800000,0x800000,0x400000,0x600000,0x200000,0x18000000,0x18000000,0xc000000,0x6000000,0x3000000,0x1800000,0x800000,0x400000,0x60000000,0x60000000,0x10000000,0x8000000,0x4000000,0x2000000,0x1000000,0x800000,0x40000000,0x60000000,0x30000000,0x18000000,0xc000000,0x6000000,0x1000000,0x40000000,0x60000000,0x18000000,0xc000000,0x6000000,0x40000000,0x60000000,0x18000000,0xc000000,0x40000000,0x60000000,0x18000000,0x40000000,0x30000000,0x60000000,0x40000000,0x40000000,0x1,0x3,0x2,0x1,0x7,0x4,0x3,0xc,0x3,0x6,0x18,0x3,0x6,0xc,0x30,0x1,0x3,0x6,0xc,0x30,0x60,0x3,0x7,0xc,0x18,0x30,0x60,0x80,0x3,0x7,0xe,0xc,0x10,0x20,0x40,0x80,0x100,0xc,0x18,0x30,0x30,0x60,0xc0,0x180,0x100,0x200,0x70,0x60,0xc0,0xc0,0x180,0x300,0x200,0x600,0x400,0x180,0x380,0x300,0x300,0x600,0x400,0xc00,0x800,0x1800,0xe00,0xc00,0xc00,0xc00,0x1800,0x1800,0x1000,0x1000,0x2000,0x3000,0x3000,0x3000,0x3000,0x6000,0x6000,0x6000,0x6000,0x4000,0x1c000,0x1c000,0x1c000,0x1c000,0x8000,0x8000,0x8000,0x8000,0x8000,0x60000,0x60000,0x60000,0x60000,0x30000,0x30000,0x30000,0x30000,0x10000,0x380000,0x180000,0x180000,0x180000,0xc0000,0xc0000,0x40000,0x40000,0x20000,0xc00000,0xe00000,0x600000,0x600000,0x300000,0x100000,0x180000,0x80000,0xc0000,0x7000000,0x3000000,0x1800000,0x1800000,0xc00000,0x600000,0x200000,0x300000,0x100000,0x18000000,0xc000000,0x6000000,0x6000000,0x3000000,0x1800000,0xc00000,0x400000,0x200000,0x60000000,0x70000000,0x38000000,0x18000000,0x4000000,0x2000000,0x1000000,0x800000,0x400000,0x60000000,0x70000000,0x18000000,0xc000000,0x6000000,0x3000000,0x800000,0x40000000,0x60000000,0x30000000,0x18000000,0x6000000,0x3000000,0x60000000,0x30000000,0x18000000,0x6000000,0x60000000,0x30000000,0xc000000,0x60000000,0x18000000,0x40000000,0x70000000,0x10000000,0x60000000,0x20000000,0x40000000,0x1,0x1,0x2,0x3,0x4,0x3,0xe,0x8,0x1,0x7,0x1c,0x10,0x1,0x3,0xc,0x30,0x1,0x3,0xe,0x18,0x60,0x3,0x7,0xc,0x18,0x60,0xc0,0x1,0x3,0xe,0x1c,0x30,0x60,0xc0,0x100,0x3,0x7,0xe,0x1c,0x38,0x30,0x40,0x80,0x100,0x200,0x1c,0x38,0x30,0x60,0xc0,0xc0,0x180,0x300,0x600,0x400,0xe0,0xc0,0x1c0,0x180,0x300,0x300,0x600,0x400,0x800,0x800,0x700,0x700,0xe00,0xe00,0xc00,0xc00,0x1800,0x1800,0x1000,0x3000,0x3800,0x3800,0x3000,0x3000,0x3000,0x3000,0x6000,0x6000,0x6000,0x4000,0x1c000,0x1c000,0x1c000,0x1c000,0x1c000,0x1c000,0x8000,0x8000,0x8000,0x8000,0xe0000,0xe0000,0x60000,0x60000,0x60000,0x60000,0x30000,0x30000,0x30000,0x10000,0x700000,0x700000,0x380000,0x380000,0x180000,0x180000,0xc0000,0xc0000,0x40000,0x60000,0x3800000,0x1800000,0x1c00000,0xc00000,0x600000,0x600000,0x300000,0x100000,0x80000,0x80000,0x1c000000,0xe000000,0x6000000,0x3000000,0x1800000,0x1800000,0xc00000,0x600000,0x300000,0x100000,0x60000000,0x70000000,0x38000000,0x1c000000,0xe000000,0x6000000,0x1000000,0x800000,0x400000,0x200000,0x40000000,0x60000000,0x38000000,0x1c000000,0x6000000,0x3000000,0x1800000,0x400000,0x60000000,0x70000000,0x18000000,0xc000000,0x3000000,0x1800000,0x40000000,0x60000000,0x38000000,0xc000000,0x3000000,0x40000000,0x60000000,0x18000000,0x6000000,0x40000000,0x70000000,0x1c000000,0x4000000,0x60000000,0x38000000,0x8000000,0x60000000,0x10000000,0x40000000,0x20000000,0x40000000,0x1,0x1,0x2,0x3,0x4,0x1,0x7,0x8,0x3,0xe,0x10,0x3,0xf,0x38,0x20,0x1,0x7,0x1c,0x70,0x40,0x3,0x7,0x1c,0x30,0xc0,0x1,0x3,0xf,0x1c,0x30,0xe0,0x180,0x1,0x3,0x7,0xe,0x38,0x70,0xc0,0x180,0x300,0x3,0x7,0xe,0x1c,0x38,0x70,0xe0,0xc0,0x100,0x200,0x400,0x3c,0x78,0x70,0xe0,0x1c0,0x180,0x300,0x300,0x600,0xc00,0x800,0x3c0,0x380,0x780,0x700,0x600,0xe00,0xc00,0xc00,0x1800,0x1000,0x3000,0x3c00,0x3c00,0x3800,0x3800,0x3800,0x3000,0x3000,0x3000,0x6000,0x6000,0x4000,0x1c000,0x1c000,0x1c000,0x1c000,0x1c000,0x1c000,0x1c000,0x1c000,0x8000,0x8000,0x8000,0x1e0000,0x1e0000,0xe0000,0xe0000,0xe0000,0x60000,0x60000,0x60000,0x30000,0x30000,0x10000,0x1e00000,0xe00000,0xf00000,0x700000,0x300000,0x380000,0x180000,0x180000,0xc0000,0x40000,0x60000,0x1e000000,0xf000000,0x7000000,0x3800000,0x1c00000,0xc00000,0x600000,0x600000,0x300000,0x180000,0x80000,0x60000000,0x70000000,0x38000000,0x1c000000,0xe000000,0x7000000,0x3800000,0x1800000,0x400000,0x200000,0x100000,0x40000000,0x60000000,0x70000000,0x38000000,0xe000000,0x7000000,0x1800000,0xc00000,0x600000,0x40000000,0x60000000,0x78000000,0x1c000000,0x6000000,0x3800000,0xc00000,0x60000000,0x70000000,0x1c000000,0x6000000,0x1800000,0x40000000,0x70000000,0x1c000000,0x7000000,0x1000000,0x60000000,0x78000000,0xe000000,0x2000000,0x60000000,0x38000000,0x4000000,0x40000000,0x70000000,0x8000000,0x60000000,0x10000000,0x40000000,0x20000000,0x40000000,0x1,0x1,0x3,0x3,0x6,0x7,0xc,0x1,0xf,0x10,0x7,0x1e,0x20,0x3,0xf,0x38,0x40,0x3,0xf,0x3c,0xf0,0x80,0x3,0xf,0x1e,0x70,0x1c0,0x100,0x1,0x7,0xf,0x3c,0x70,0xc0,0x300,0x1,0x3,0x7,0xf,0x1e,0x38,0xf0,0x1c0,0x300,0x600,0x7,0xf,0x1f,0x1e,0x3c,0x70,0xe0,0x1c0,0x380,0x300,0x400,0x800,0xf8,0xf0,0x1e0,0x1e0,0x3c0,0x380,0x700,0x600,0xc00,0xc00,0x1800,0x1000,0x1f00,0x1f00,0x1e00,0x1e00,0x3c00,0x3c00,0x3800,0x3800,0x3000,0x3000,0x6000,0x6000,0x3e000,0x3e000,0x3e000,0x3e000,0x1c000,0x1c000,0x1c000,0x1c000,0x1c000,0x1c000,0x8000,0x8000,0x7c0000,0x7c0000,0x3c0000,0x3c0000,0x1e0000,0x1e0000,0xe0000,0xe0000,0x60000,0x60000,0x30000,0x30000,0xf800000,0x7800000,0x3c00000,0x3c00000,0x1e00000,0xe00000,0x700000,0x300000,0x180000,0x180000,0xc0000,0x40000,0x70000000,0x78000000,0x7c000000,0x3c000000,0x1e000000,0x7000000,0x3800000,0x1c00000,0xe00000,0x600000,0x100000,0x80000,0x40000000,0x60000000,0x70000000,0x78000000,0x3c000000,0xe000000,0x7800000,0x1c00000,0x600000,0x300000,0x40000000,0x70000000,0x78000000,0x1e000000,0x7000000,0x1800000,0x600000,0x60000000,0x78000000,0x3c000000,0x7000000,0x1c00000,0x400000,0x60000000,0x78000000,0x1e000000,0x7800000,0x800000,0x60000000,0x78000000,0xe000000,0x1000000,0x70000000,0x3c000000,0x2000000,0x40000000,0x78000000,0x4000000,0x70000000,0x18000000,0x60000000,0x30000000,0x40000000,0x60000000,0x40000000,0x1,0x3,0x1,0x7,0x3,0xe,0xf,0x1c,0x1,0x1f,0x30,0x7,0x3f,0x60,0x3,0xf,0x7c,0xc0,0x1,0xf,0x3f,0xf0,0x100,0x3,0xf,0x3f,0xfc,0x3c0,0x200,0x1,0x7,0xf,0x3f,0xfc,0x1e0,0x700,0x400,0x1,0x3,0xf,0x1f,0x3f,0x7c,0xf0,0x3c0,0x700,0xc00,0xf,0x1f,0x3f,0x3f,0x7e,0xfc,0x1f0,0x1e0,0x3c0,0x700,0xe00,0xc00,0x1000,0xff0,0xfe0,0xfc0,0xfc0,0x1f80,0x1f00,0x1e00,0x1e00,0x3c00,0x3800,0x3000,0x3000,0x6000,0x7f000,0x7f000,0x7f000,0x7f000,0x3e000,0x3e000,0x3e000,0x3e000,0x1c000,0x1c000,0x1c000,0x1c000,0x8000,0x7f80000,0x3f80000,0x1f80000,0x1f80000,0xfc0000,0x7c0000,0x3c0000,0x3c0000,0x1e0000,0xe0000,0x60000,0x60000,0x30000,0x78000000,0x7c000000,0x7e000000,0x7e000000,0x3f000000,0x1f800000,0x7c00000,0x3c00000,0x1e00000,0x700000,0x380000,0x180000,0x40000,0x40000000,0x60000000,0x78000000,0x7c000000,0x7e000000,0x1f000000,0x7800000,0x1e00000,0x700000,0x180000,0x40000000,0x70000000,0x78000000,0x7e000000,0x1f800000,0x3c00000,0x700000,0x100000,0x60000000,0x78000000,0x7e000000,0x1f800000,0x1e00000,0x200000,0x40000000,0x78000000,0x7e000000,0x7800000,0x400000,0x60000000,0x78000000,0x1f000000,0x1800000,0x70000000,0x7e000000,0x3000000,0x40000000,0x7c000000,0x6000000,0x78000000,0x1c000000,0x60000000,0x38000000,0x40000000,0x70000000,0x60000000,0x40000000,0x1,0x3,0x7,0x1,0xf,0x3,0x1f,0xf,0x3f,0x1f,0x7f,0x3,0x3f,0xfc,0xf,0xff,0x1f0,0x3,0x3f,0x1ff,0x3c0,0x3,0x1f,0xff,0x3ff,0x700,0x3,0xf,0x3f,0xff,0x3ff,0xff0,0xc00,0x1,0x3,0xf,0x1f,0x3f,0xff,0x1ff,0x3ff,0xff0,0x1f00,0x1000,0xff,0xff,0x1ff,0x1ff,0x3ff,0x3ff,0x7ff,0x7ff,0xffc,0xff0,0x1fc0,0x1f00,0x3c00,0x3000,0x7fff00,0x7fff00,0x3ffe00,0x3ffe00,0x1ffc00,0x1ffc00,0xff800,0xff800,0x7f000,0x7f000,0x3e000,0x3e000,0x1c000,0x1c000,0x7f800000,0x7f800000,0x7fc00000,0x7fc00000,0x7fe00000,0x7fe00000,0x7ff00000,0x7ff00000,0x1ff80000,0x7f80000,0x1fc0000,0x7c0000,0x1e0000,0x60000,0x40000000,0x60000000,0x78000000,0x7c000000,0x7e000000,0x7f800000,0x7fc00000,0x7fe00000,0x7f80000,0x7c0000,0x40000,0x60000000,0x78000000,0x7e000000,0x7f800000,0x7fe00000,0x7f80000,0x180000,0x60000000,0x7c000000,0x7f800000,0x7fe00000,0x700000,0x60000000,0x7e000000,0x7fc00000,0x1e00000,0x78000000,0x7f800000,0x7c00000,0x60000000,0x7e000000,0x1f800000,0x7c000000,0x7f000000,0x78000000,0x7e000000,0x60000000,0x7c000000,0x40000000,0x78000000,0x70000000,0x60000000,0x40000000,0x1,0x3,0x7,0xf,0x1f,0x3f,0x7f,0x3,0xff,0x3,0xf,0x1ff,0xf,0x3f,0x3ff,0x3f,0xff,0x7ff,0xff,0xf,0x3ff,0xfff,0x3ff,0xf,0xf,0xff,0xfff,0x1fff,0xfff,0xff,0xf,0x3,0xf,0x3f,0xff,0x3ff,0xfff,0x3fff,0x3fff,0x3fff,0xfff,0x3ff,0xff,0x3f,0xf,0x3,0x60000000,0x78000000,0x7e000000,0x7f800000,0x7fe00000,0x7ff80000,0x7ffe0000,0x7ffe0000,0x7ffe0000,0x7ff80000,0x7fe00000,0x7f800000,0x7e000000,0x78000000,0x60000000,0x78000000,0x7f800000,0x7ff80000,0x7ffc0000,0x7ff80000,0x7f800000,0x78000000,0x78000000,0x7fe00000,0x7ff80000,0x7fe00000,0x78000000,0x7f800000,0x7ff00000,0x7f800000,0x7e000000,0x7fe00000,0x7e000000,0x78000000,0x7fc00000,0x78000000,0x60000000,0x7f800000,0x60000000,0x7f000000,0x7e000000,0x7c000000,0x78000000,0x70000000,0x60000000,0x40000000,0x1,0x3,0x7,0xf,0x1,0x1f,0x3,0x3f,0xf,0x7f,0x1f,0xfc,0x3f,0x3,0x1f0,0xff,0xf,0x3c0,0x1ff,0x3f,0x3,0x700,0x3ff,0xff,0x1f,0x3,0xc00,0xff0,0x3ff,0xff,0x3f,0xf,0x3,0x1000,0x1f00,0xff0,0x3ff,0x1ff,0xff,0x3f,0x1f,0xf,0x3,0x1,0x3000,0x3c00,0x1f00,0x1fc0,0xff0,0xffc,0x7ff,0x7ff,0x3ff,0x3ff,0x1ff,0x1ff,0xff,0xff,0x1c000,0x1c000,0x3e000,0x3e000,0x7f000,0x7f000,0xff800,0xff800,0x1ffc00,0x1ffc00,0x3ffe00,0x3ffe00,0x7fff00,0x7fff00,0x60000,0x1e0000,0x7c0000,0x1fc0000,0x7f80000,0x1ff80000,0x7ff00000,0x7ff00000,0x7fe00000,0x7fe00000,0x7fc00000,0x7fc00000,0x7f800000,0x7f800000,0x40000,0x7c0000,0x7f80000,0x7fe00000,0x7fc00000,0x7f800000,0x7e000000,0x7c000000,0x78000000,0x60000000,0x40000000,0x180000,0x7f80000,0x7fe00000,0x7f800000,0x7e000000,0x78000000,0x60000000,0x700000,0x7fe00000,0x7f800000,0x7c000000,0x60000000,0x1e00000,0x7fc00000,0x7e000000,0x60000000,0x7c00000,0x7f800000,0x78000000,0x1f800000,0x7e000000,0x60000000,0x7f000000,0x7c000000,0x7e000000,0x78000000,0x7c000000,0x60000000,0x78000000,0x40000000,0x70000000,0x60000000,0x40000000,0x1,0x3,0x7,0x1,0xe,0x3,0x1c,0xf,0x30,0x1f,0x1,0x60,0x3f,0x7,0xc0,0x7c,0xf,0x3,0x100,0xf0,0x3f,0xf,0x1,0x200,0x3c0,0xfc,0x3f,0xf,0x3,0x400,0x700,0x1e0,0xfc,0x3f,0xf,0x7,0x1,0xc00,0x700,0x3c0,0xf0,0x7c,0x3f,0x1f,0xf,0x3,0x1,0x1000,0xc00,0xe00,0x700,0x3c0,0x1e0,0x1f0,0xfc,0x7e,0x3f,0x3f,0x1f,0xf,0x6000,0x3000,0x3000,0x3800,0x3c00,0x1e00,0x1e00,0x1f00,0x1f80,0xfc0,0xfc0,0xfe0,0xff0,0x8000,0x1c000,0x1c000,0x1c000,0x1c000,0x3e000,0x3e000,0x3e000,0x3e000,0x7f000,0x7f000,0x7f000,0x7f000,0x30000,0x60000,0x60000,0xe0000,0x1e0000,0x3c0000,0x3c0000,0x7c0000,0xfc0000,0x1f80000,0x1f80000,0x3f80000,0x7f80000,0x40000,0x180000,0x380000,0x700000,0x1e00000,0x3c00000,0x7c00000,0x1f800000,0x3f000000,0x7e000000,0x7e000000,0x7c000000,0x78000000,0x180000,0x700000,0x1e00000,0x7800000,0x1f000000,0x7e000000,0x7c000000,0x78000000,0x60000000,0x40000000,0x100000,0x700000,0x3c00000,0x1f800000,0x7e000000,0x78000000,0x70000000,0x40000000,0x200000,0x1e00000,0x1f800000,0x7e000000,0x78000000,0x60000000,0x400000,0x7800000,0x7e000000,0x78000000,0x40000000,0x1800000,0x1f000000,0x78000000,0x60000000,0x3000000,0x7e000000,0x70000000,0x6000000,0x7c000000,0x40000000,0x1c000000,0x78000000,0x38000000,0x60000000,0x70000000,0x40000000,0x60000000,0x40000000,0x1,0x3,0x1,0x6,0x3,0xc,0x7,0x10,0xf,0x1,0x20,0x1e,0x7,0x40,0x38,0xf,0x3,0x80,0xf0,0x3c,0xf,0x3,0x100,0x1c0,0x70,0x1e,0xf,0x3,0x300,0xc0,0x70,0x3c,0xf,0x7,0x1,0x600,0x300,0x1c0,0xf0,0x38,0x1e,0xf,0x7,0x3,0x1,0x800,0x400,0x300,0x380,0x1c0,0xe0,0x70,0x3c,0x1e,0x1f,0xf,0x7,0x1000,0x1800,0xc00,0xc00,0x600,0x700,0x380,0x3c0,0x1e0,0x1e0,0xf0,0xf8,0x6000,0x6000,0x3000,0x3000,0x3800,0x3800,0x3c00,0x3c00,0x1e00,0x1e00,0x1f00,0x1f00,0x8000,0x8000,0x1c000,0x1c000,0x1c000,0x1c000,0x1c000,0x1c000,0x3e000,0x3e000,0x3e000,0x3e000,0x30000,0x30000,0x60000,0x60000,0xe0000,0xe0000,0x1e0000,0x1e0000,0x3c0000,0x3c0000,0x7c0000,0x7c0000,0x40000,0xc0000,0x180000,0x180000,0x300000,0x700000,0xe00000,0x1e00000,0x3c00000,0x3c00000,0x7800000,0xf800000,0x80000,0x100000,0x600000,0xe00000,0x1c00000,0x3800000,0x7000000,0x1e000000,0x3c000000,0x7c000000,0x78000000,0x70000000,0x300000,0x600000,0x1c00000,0x7800000,0xe000000,0x3c000000,0x78000000,0x70000000,0x60000000,0x40000000,0x600000,0x1800000,0x7000000,0x1e000000,0x78000000,0x70000000,0x40000000,0x400000,0x1c00000,0x7000000,0x3c000000,0x78000000,0x60000000,0x800000,0x7800000,0x1e000000,0x78000000,0x60000000,0x1000000,0xe000000,0x78000000,0x60000000,0x2000000,0x3c000000,0x70000000,0x4000000,0x78000000,0x40000000,0x18000000,0x70000000,0x30000000,0x60000000,0x60000000,0x40000000,0x40000000,0x1,0x2,0x1,0x4,0x3,0x8,0x7,0x1,0x10,0xe,0x3,0x20,0x38,0xf,0x3,0x40,0x70,0x1c,0x7,0x1,0xc0,0x30,0x1c,0x7,0x3,0x180,0xe0,0x30,0x1c,0xf,0x3,0x1,0x300,0x180,0xc0,0x70,0x38,0xe,0x7,0x3,0x1,0x400,0x200,0x100,0xc0,0xe0,0x70,0x38,0x1c,0xe,0x7,0x3,0x800,0xc00,0x600,0x300,0x300,0x180,0x1c0,0xe0,0x70,0x78,0x3c,0x3000,0x1000,0x1800,0xc00,0xc00,0xe00,0x600,0x700,0x780,0x380,0x3c0,0x4000,0x6000,0x6000,0x3000,0x3000,0x3000,0x3800,0x3800,0x3800,0x3c00,0x3c00,0x8000,0x8000,0x8000,0x1c000,0x1c000,0x1c000,0x1c000,0x1c000,0x1c000,0x1c000,0x1c000,0x10000,0x30000,0x30000,0x60000,0x60000,0x60000,0xe0000,0xe0000,0xe0000,0x1e0000,0x1e0000,0x60000,0x40000,0xc0000,0x180000,0x180000,0x380000,0x300000,0x700000,0xf00000,0xe00000,0x1e00000,0x80000,0x180000,0x300000,0x600000,0x600000,0xc00000,0x1c00000,0x3800000,0x7000000,0xf000000,0x1e000000,0x100000,0x200000,0x400000,0x1800000,0x3800000,0x7000000,0xe000000,0x1c000000,0x38000000,0x70000000,0x60000000,0x600000,0xc00000,0x1800000,0x7000000,0xe000000,0x38000000,0x70000000,0x60000000,0x40000000,0xc00000,0x3800000,0x6000000,0x1c000000,0x78000000,0x60000000,0x40000000,0x1800000,0x6000000,0x1c000000,0x70000000,0x60000000,0x1000000,0x7000000,0x1c000000,0x70000000,0x40000000,0x2000000,0xe000000,0x78000000,0x60000000,0x4000000,0x38000000,0x60000000,0x8000000,0x70000000,0x40000000,0x10000000,0x60000000,0x20000000,0x40000000,0x40000000,0x1,0x2,0x1,0x4,0x3,0x8,0xe,0x3,0x10,0x1c,0x7,0x1,0x30,0xc,0x3,0x1,0x60,0x18,0xe,0x3,0x1,0xc0,0x60,0x18,0xc,0x7,0x3,0x100,0xc0,0x60,0x30,0x1c,0xe,0x3,0x1,0x200,0x100,0x80,0x40,0x30,0x38,0x1c,0xe,0x7,0x3,0x400,0x600,0x300,0x180,0xc0,0xc0,0x60,0x30,0x38,0x1c,0x800,0x800,0x400,0x600,0x300,0x300,0x180,0x1c0,0xc0,0xe0,0x3000,0x1000,0x1800,0x1800,0xc00,0xc00,0xe00,0xe00,0x700,0x700,0x4000,0x6000,0x6000,0x6000,0x3000,0x3000,0x3000,0x3000,0x3800,0x3800,0x8000,0x8000,0x8000,0x8000,0x1c000,0x1c000,0x1c000,0x1c000,0x1c000,0x1c000,0x10000,0x30000,0x30000,0x30000,0x60000,0x60000,0x60000,0x60000,0xe0000,0xe0000,0x60000,0x40000,0xc0000,0xc0000,0x180000,0x180000,0x380000,0x380000,0x700000,0x700000,0x80000,0x80000,0x100000,0x300000,0x600000,0x600000,0xc00000,0x1c00000,0x1800000,0x3800000,0x100000,0x300000,0x600000,0xc00000,0x1800000,0x1800000,0x3000000,0x6000000,0xe000000,0x1c000000,0x200000,0x400000,0x800000,0x1000000,0x6000000,0xe000000,0x1c000000,0x38000000,0x70000000,0x60000000,0x400000,0x1800000,0x3000000,0x6000000,0x1c000000,0x38000000,0x60000000,0x40000000,0x1800000,0x3000000,0xc000000,0x18000000,0x70000000,0x60000000,0x3000000,0xc000000,0x38000000,0x60000000,0x40000000,0x6000000,0x18000000,0x60000000,0x40000000,0x4000000,0x1c000000,0x70000000,0x40000000,0x8000000,0x38000000,0x60000000,0x10000000,0x60000000,0x20000000,0x40000000,0x40000000,0x1,0x2,0x3,0x4,0x7,0x1,0xc,0x3,0x18,0x6,0x3,0x30,0xc,0x6,0x3,0x60,0x30,0xc,0x6,0x3,0x1,0x80,0x60,0x30,0x18,0xc,0x7,0x3,0x100,0x80,0x40,0x20,0x10,0xc,0xe,0x7,0x3,0x200,0x100,0x180,0xc0,0x60,0x30,0x30,0x18,0xc,0x400,0x600,0x200,0x300,0x180,0xc0,0xc0,0x60,0x70,0x1800,0x800,0xc00,0x400,0x600,0x300,0x300,0x380,0x180,0x2000,0x1000,0x1000,0x1800,0x1800,0xc00,0xc00,0xc00,0xe00,0x4000,0x6000,0x6000,0x6000,0x6000,0x3000,0x3000,0x3000,0x3000,0x8000,0x8000,0x8000,0x8000,0x8000,0x1c000,0x1c000,0x1c000,0x1c000,0x10000,0x30000,0x30000,0x30000,0x30000,0x60000,0x60000,0x60000,0x60000,0x20000,0x40000,0x40000,0xc0000,0xc0000,0x180000,0x180000,0x180000,0x380000,0xc0000,0x80000,0x180000,0x100000,0x300000,0x600000,0x600000,0xe00000,0xc00000,0x100000,0x300000,0x200000,0x600000,0xc00000,0x1800000,0x1800000,0x3000000,0x7000000,0x200000,0x400000,0xc00000,0x1800000,0x3000000,0x6000000,0x6000000,0xc000000,0x18000000,0x400000,0x800000,0x1000000,0x2000000,0x4000000,0x18000000,0x38000000,0x70000000,0x60000000,0x800000,0x3000000,0x6000000,0xc000000,0x18000000,0x70000000,0x60000000,0x3000000,0x6000000,0x18000000,0x30000000,0x60000000,0x40000000,0x6000000,0x18000000,0x30000000,0x60000000,0xc000000,0x30000000,0x60000000,0x18000000,0x60000000,0x10000000,0x70000000,0x40000000,0x20000000,0x60000000,0x40000000,0x1,0x1,0x3,0x6,0x1,0xc,0x3,0x1,0x18,0xc,0x3,0x1,0x30,0x18,0xc,0x3,0x1,0x40,0x30,0x18,0xc,0x6,0x3,0x1,0x80,0x40,0x20,0x10,0x8,0x4,0x3,0x3,0x100,0x80,0xc0,0x60,0x30,0x18,0xc,0xc,0x200,0x300,0x100,0x80,0xc0,0x60,0x30,0x30,0x400,0x400,0x200,0x300,0x100,0x180,0xc0,0xc0,0x1800,0x800,0xc00,0xc00,0x600,0x600,0x300,0x300,0x2000,0x3000,0x1000,0x1000,0x1800,0x1800,0xc00,0xc00,0x4000,0x4000,0x6000,0x6000,0x6000,0x6000,0x3000,0x3000,0x8000,0x8000,0x8000,0x8000,0x8000,0x8000,0x1c000,0x1c000,0x10000,0x10000,0x30000,0x30000,0x30000,0x30000,0x60000,0x60000,0x20000,0x60000,0x40000,0x40000,0xc0000,0xc0000,0x180000,0x180000,0xc0000,0x80000,0x180000,0x180000,0x300000,0x300000,0x600000,0x600000,0x100000,0x100000,0x200000,0x600000,0x400000,0xc00000,0x1800000,0x1800000,0x200000,0x600000,0x400000,0x800000,0x1800000,0x3000000,0x6000000,0x6000000,0x400000,0x800000,0x1800000,0x3000000,0x6000000,0xc000000,0x18000000,0x18000000,0x800000,0x1000000,0x2000000,0x4000000,0x8000000,0x10000000,0x60000000,0x60000000,0x1000000,0x6000000,0xc000000,0x18000000,0x30000000,0x60000000,0x40000000,0x6000000,0xc000000,0x18000000,0x60000000,0x40000000,0xc000000,0x18000000,0x60000000,0x40000000,0x18000000,0x60000000,0x40000000,0x30000000,0x40000000,0x60000000,0x40000000,0x40000000,0x1,0x3,0x6,0x1,0xc,0x6,0x1,0x10,0xc,0x6,0x1,0x20,0x10,0xc,0x6,0x3,0x1,0x40,0x20,0x10,0x8,0x4,0x2,0x1,0x80,0x40,0x60,0x30,0x18,0xc,0x6,0x100,0x180,0x80,0x40,0x60,0x30,0x18,0x200,0x200,0x100,0x180,0x80,0xc0,0x60,0xc00,0x400,0x600,0x200,0x300,0x100,0x180,0x1000,0x800,0x800,0xc00,0x400,0x600,0x600,0x2000,0x3000,0x1000,0x1000,0x1800,0x1800,0x1800,0x4000,0x4000,0x6000,0x6000,0x6000,0x6000,0x6000,0x8000,0x8000,0x8000,0x8000,0x8000,0x8000,0x8000,0x10000,0x10000,0x30000,0x30000,0x30000,0x30000,0x30000,0x20000,0x60000,0x40000,0x40000,0xc0000,0xc0000,0xc0000,0x40000,0x80000,0x80000,0x180000,0x100000,0x300000,0x300000,0x180000,0x100000,0x300000,0x200000,0x600000,0x400000,0xc00000,0x200000,0x200000,0x400000,0xc00000,0x800000,0x1800000,0x3000000,0x400000,0xc00000,0x800000,0x1000000,0x3000000,0x6000000,0xc000000,0x800000,0x1000000,0x3000000,0x6000000,0xc000000,0x18000000,0x30000000,0x1000000,0x2000000,0x4000000,0x8000000,0x10000000,0x20000000,0x40000000,0x2000000,0x4000000,0x18000000,0x30000000,0x60000000,0x40000000,0x4000000,0x18000000,0x30000000,0x40000000,0x18000000,0x30000000,0x40000000,0x30000000,0x40000000,0x60000000,0x40000000,0x1,0x3,0x6,0x3,0x8,0x6,0x3,0x10,0x8,0x6,0x3,0x1,0x20,0x10,0x8,0x4,0x2,0x1,0x40,0x20,0x10,0x18,0xc,0x6,0x80,0xc0,0x60,0x20,0x10,0x18,0x100,0x100,0x80,0xc0,0x60,0x20,0x200,0x200,0x100,0x100,0x80,0xc0,0xc00,0x400,0x600,0x200,0x300,0x300,0x1000,0x800,0x800,0xc00,0xc00,0x400,0x2000,0x3000,0x1000,0x1000,0x1000,0x1800,0x4000,0x4000,0x6000,0x6000,0x6000,0x6000,0x8000,0x8000,0x8000,0x8000,0x8000,0x8000,0x10000,0x10000,0x30000,0x30000,0x30000,0x30000,0x20000,0x60000,0x40000,0x40000,0x40000,0xc0000,0x40000,0x80000,0x80000,0x180000,0x180000,0x100000,0x180000,0x100000,0x300000,0x200000,0x600000,0x600000,0x200000,0x200000,0x400000,0x400000,0x800000,0x1800000,0x400000,0x400000,0x800000,0x1800000,0x3000000,0x2000000,0x800000,0x1800000,0x3000000,0x2000000,0x4000000,0xc000000,0x1000000,0x2000000,0x4000000,0xc000000,0x18000000,0x30000000,0x2000000,0x4000000,0x8000000,0x10000000,0x20000000,0x40000000,0x4000000,0x8000000,0x30000000,0x60000000,0x40000000,0x8000000,0x30000000,0x60000000,0x30000000,0x60000000,0x60000000,0x40000000,0x1,0x3,0x1,0x4,0x3,0x1,0x8,0x4,0x3,0x1,0x10,0x8,0x4,0x2,0x1,0x20,0x10,0x8,0xc,0x6,0x40,0x20,0x30,0x10,0x8,0x80,0xc0,0x40,0x20,0x30,0x100,0x100,0x80,0xc0,0x40,0x600,0x200,0x300,0x100,0x180,0x800,0x400,0x400,0x600,0x200,0x1000,0x800,0x800,0x800,0xc00,0x2000,0x3000,0x3000,0x1000,0x1000,0x4000,0x4000,0x4000,0x6000,0x6000,0x8000,0x8000,0x8000,0x8000,0x8000,0x10000,0x10000,0x10000,0x30000,0x30000,0x20000,0x60000,0x60000,0x40000,0x40000,0x40000,0x80000,0x80000,0x80000,0x180000,0x80000,0x100000,0x100000,0x300000,0x200000,0x300000,0x200000,0x600000,0x400000,0xc00000,0x400000,0x400000,0x800000,0x1800000,0x1000000,0x800000,0x1800000,0x1000000,0x2000000,0x6000000,0x1000000,0x2000000,0x6000000,0x4000000,0x8000000,0x2000000,0x4000000,0x8000000,0x18000000,0x30000000,0x4000000,0x8000000,0x10000000,0x20000000,0x40000000,0x8000000,0x10000000,0x60000000,0x40000000,0x10000000,0x60000000,0x40000000,0x60000000,0x40000000,0x40000000,0x1,0x2,0x1,0x4,0x2,0x1,0x8,0x4,0x2,0x1,0x10,0x8,0x4,0x6,0x20,0x10,0x18,0x8,0x40,0x60,0x20,0x10,0x80,0x80,0x40,0x60,0x100,0x100,0x80,0x80,0x600,0x200,0x300,0x100,0x800,0x400,0x400,0x600,0x1000,0x1800,0x800,0x800,0x2000,0x2000,0x3000,0x1000,0x4000,0x4000,0x4000,0x6000,0x8000,0x8000,0x8000,0x8000,0x10000,0x10000,0x10000,0x30000,0x20000,0x20000,0x60000,0x40000,0x40000,0xc0000,0x80000,0x80000,0x80000,0x100000,0x100000,0x300000,0x300000,0x200000,0x600000,0x400000,0x400000,0x400000,0x800000,0x800000,0x800000,0x800000,0x1000000,0x3000000,0x1000000,0x3000000,0x2000000,0x4000000,0x2000000,0x4000000,0xc000000,0x8000000,0x4000000,0x8000000,0x10000000,0x30000000,0x8000000,0x10000000,0x20000000,0x40000000,0x10000000,0x20000000,0x40000000,0x20000000,0x40000000,0x40000000,0x1,0x2,0x1,0x4,0x2,0x1,0x8,0x4,0x2,0x10,0x8,0xc,0x20,0x30,0x10,0x40,0x40,0x20,0x80,0x80,0x40,0x300,0x100,0x180,0x400,0x200,0x200,0x800,0x400,0x400,0x1000,0x1800,0x800,0x2000,0x2000,0x3000,0x4000,0x4000,0x4000,0x8000,0x8000,0x8000,0x10000,0x10000,0x10000,0x20000,0x20000,0x60000,0x40000,0xc0000,0x80000,0x80000,0x100000,0x100000,0x100000,0x200000,0x200000,0x600000,0x400000,0xc00000,0x800000,0x800000,0x1000000,0x1000000,0x1000000,0x2000000,0x2000000,0x6000000,0x4000000,0x4000000,0x8000000,0x18000000,0x8000000,0x10000000,0x20000000,0x10000000,0x20000000,0x40000000,0x20000000,0x40000000,0x40000000,0x1,0x2,0x1,0x4,0x2,0x8,0x4,0x10,0x18,0x20,0x20,0x40,0x40,0x80,0x80,0x300,0x100,0x400,0x200,0x800,0x400,0x1000,0x1800,0x2000,0x2000,0x4000,0x4000,0x8000,0x8000,0x10000,0x10000,0x20000,0x20000,0x40000,0xc0000,0x80000,0x100000,0x100000,0x200000,0x600000,0x400000,0x800000,0x800000,0x1000000,0x1000000,0x2000000,0x2000000,0x4000000,0xc000000,0x8000000,0x10000000,0x10000000,0x20000000,0x20000000,0x40000000,0x40000000,0x1,0x2,0x4,0x8,0x10,0x20,0x40,0x180,0x200,0x400,0x800,0x1000,0x2000,0x4000,0x8000,0x10000,0x20000,0x40000,0x80000,0x100000,0x200000,0xc00000,0x1000000,0x2000000,0x4000000,0x8000000,0x10000000,0x20000000,0x40000000
    ]),
};

module.exports = VisibilityTile_mask;



/***/ }),

/***/ "./games/Avalonika/src/config.js":
/*!***************************************!*\
  !*** ./games/Avalonika/src/config.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/*

    ▄████████  ▄█    █▄     ▄████████  ▄█        ▄██████▄  ███▄▄▄▄    ▄█     ▄█   ▄█▄    ▄████████
    ███    ███ ███    ███   ███    ███ ███       ███    ███ ███▀▀▀██▄ ███    ███ ▄███▀   ███    ███
    ███    ███ ███    ███   ███    ███ ███       ███    ███ ███   ███ ███▌   ███▐██▀     ███    ███
    ███    ███ ███    ███   ███    ███ ███       ███    ███ ███   ███ ███▌  ▄█████▀      ███    ███
  ▀███████████ ███    ███ ▀███████████ ███       ███    ███ ███   ███ ███▌ ▀▀█████▄    ▀███████████
    ███    ███ ███    ███   ███    ███ ███       ███    ███ ███   ███ ███    ███▐██▄     ███    ███
    ███    ███ ███    ███   ███    ███ ███▌    ▄ ███    ███ ███   ███ ███    ███ ▀███▄   ███    ███
    ███    █▀   ▀██████▀    ███    █▀  █████▄▄██  ▀██████▀   ▀█   █▀  █▀     ███   ▀█▀   ███    █▀
    ▀                                     ▀

    ███ ▀▄    ▄     ██▄     ▄      ▄     ▄▀  ▄███▄   ████▄    ▄   █  █▀ ▄█ █▀▄▀█
    █  █  █  █      █  █     █      █  ▄▀    █▀   ▀  █   █     █  █▄█   ██ █ █ █
    █ ▀ ▄  ▀█       █   █ █   █ ██   █ █ ▀▄  ██▄▄    █   █ ██   █ █▀▄   ██ █ ▄ █
    █  ▄▀  █        █  █  █   █ █ █  █ █   █ █▄   ▄▀ ▀████ █ █  █ █  █  ▐█ █   █
    ███  ▄▀         ███▀  █▄ ▄█ █  █ █  ███  ▀███▀         █  █ █   █    ▐    █
    ▀▀▀  █   ██             █   ██  ▀         ▀                ▀

*/




class AppData {
    constructor() {
        this._RANDOM = 0;

        this.World = {
            tileWidth:                  16,
            tileHeight:                 24,
            tilePerRow:                 16,
            shadowScale:                2,      // 시야 그림자의 해상도:타일의 해상도 비율
            shadowWidth:                1024,
            shadowHeight:               1024,
            textureToScreenMagicNumber: 0.9594726,	// 이게 왜 필요한지 나도 모른다. 픽셀퍼펙트하기 위해서 보정하다 알아낸 값
            zoomMin:                    1.0,
            zoomMax:                    1.8,
            turnPerDay:                 200,

            tileTextureName:       "tile1624.png",
            lightTextureName:      "Light.png",
            shadowMaskTextureName: "shadowMask1624.png",
            
            timeTable: [
                { time: 0, radius: 3, c1: [0.1, 0.3, 1, 0.1], c2: [0.25, 0.4, 1, 0.7] },
                { time: 3, radius: 3, c1: [0.1, 0.3, 1, 0.12], c2: [0.5, 0.75, 1, 1] },
                { time: 5, radius: 6, c1: [0.5, 0.5, 1.0, 0.15], c2: [0.5, 1, 1, 1] },
                { time: 10, radius: 14, c1: [0.4, 0.7, 0.9, 0.16], c2: [1, 1, 1, 1] },
                { time: 11, radius: 15, c1: [1, 1, 0.8, 0.21], c2: [1, 1, 1, 1] },
                { time: 18, radius: 15, c1: [1, 0.6, 0.5, 0.21], c2: [1, 0.7, 0.7, 1] },
                { time: 19, radius: 14, c1: [1, 0, 0.2, 0.16], c2: [1, 1, 0.5, 1] },
                { time: 21, radius: 6, c1: [1, 0, 1, 0.2], c2: [1.0, 0.6, 0.2, 1] },
                { time: 24, radius: 3, c1: [0.1, 0.3, 1, 0.1], c2: [0.25, 0.4, 1, 0.7] },
            ],
        };


        this.Entity = {
            width:     16,
            height:    24,
            walkSpeed: 220,
        };

        this.Interface = {
            margin: 8
        };
    }

    get PARTICLE_SCALE() {
        return _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.deviceViewport.width / _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.deviceViewport.height;
    }
}

const CONFIG = new AppData();

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CONFIG);


/***/ }),

/***/ "./games/Avalonika/src/effect.js":
/*!***************************************!*\
  !*** ./games/Avalonika/src/effect.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Effect)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./global */ "./games/Avalonika/src/global.js");







class Effect extends _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite {
    constructor( type, ...args ) {
        super();
        this.returnValue = Effect.funcTable[type]( this, ...args );
        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( this.returnValue[0], this.removeFromParent, this );
    }

    getDuration() {
        return this.returnValue;
    }
}

Effect.funcTable = {};
let _FT = Effect.funcTable;

_FT["arrow"] = ( self,x1,y1,x2,y2,isHit ) => {
    let b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "Arrow.png",true,{ format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );
    let angle = Math.atan2( y2 - y1,x2 - x1 ) / Math.PI * 180;
    let dist = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getDistance( x1,y1,x2,y2 );

    b.setAnchorPoint( 0.5,0.5 );
    b.setRotation( angle );
    b.setColorMultiplier( 1,1,1 );
    b.setPosition( x1,y1 );
    self.addChild( b );
    _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.entityLayer.addChild( self );
    x2 = x2 - ( x2 - x1 ) / dist * 6;
    y2 = y2 - ( y2 - y1 ) / dist * 6;
    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/bow_shoot.wav" );
    let dur = dist * 2;

    new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( b,dur,{ x: x2,y: y2 },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCubic } )
        .onComplete( () => {
            if ( !isHit ) {
                console.log( "화살튕김" );
                new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( b, 200, {
                    x:        x2 + _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( -15, 15 ),
                    y:        y2 + _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( -15, 15 ),
                    rotation: angle + 360
                }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCubic } )
                    .onCompleteRemoveFromParent();
            } else {
                b.removeFromParent();
            }
        } );
    if ( !isHit ) {
        dur = dur + 200;
    }

    return [dur];
};

_FT["swing"] = ( self,x1,y1,x2,y2,isHit,weaponImage,attacker ) => {
    let b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "swordSwing.png",true,{ format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );
    let angle = ( Math.atan2( y2 - y1,x2 - x1 ) ) / Math.PI * 180;
    let dist = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getDistance( x1,y1,x2,y2 );

    b.setAnchorPoint( -0.4,0.5 );
    self.addChild( b );
    b.setRotation( angle + 70 );
    b.setColorMultiplier( 1,1,1 );
    b.setPosition( x1,y1 );
    b.setAlpha( 0.5 );
    self.addChild( b );
    _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.entityLayer.addChild( self );
    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/swing_0.wav" );
    let dur = 300;
    let hitDur;

    if ( attacker.__effectTween ) {
        attacker.__effectTween.stop();
        attacker.resetPositionAndColor();
    }

    let attX = x1 + ( x2 - x1 ) / dist * 5;
    let attY = y1 + ( y2 - y1 ) / dist * 5;
    let attX0 = attacker.getX();
    let attY0 = attacker.getY();

    hitDur = 100;
    let tw = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( attacker,100,{ x: attX,y: attY },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.inBack } )
        .onComplete( () => {
            new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( attacker, dur - 100, { x: attX0, y: attY0 }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.inCubic } );
        } );

    attacker.__effectTween = tw;
    let weaponSpr = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();

    weaponImage.setRotation( 135 );
    weaponImage.setPosition( 12,0 );
    weaponSpr.addChild( weaponImage );
    self.addChild( weaponSpr );
    weaponSpr.setRotation( angle + 160 );
    weaponSpr.setPosition( x1,y1 );
    new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( b,dur,{ blueMultiplier: 1,rotation: angle - 90,alpha: 0 },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCubic } )
        .onCompleteRemoveFromParent();
    new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( weaponSpr,dur - 100,{ rotation: angle - 130 },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCubic } )
        .onComplete( () => {
            new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( weaponSpr, 100, { rotation: angle - 150, scaleX: 0.5, scaleY: 0.5 } )
                .onCompleteRemoveFromParent();
        } );

    return [dur,hitDur];
};

_FT["pickaxe"] = ( self,x1,y1,x2,y2,isHit,weaponImage,attacker ) => {
    let angle = ( Math.atan2( y2 - y1, x2 - x1 ) ) / Math.PI * 180;
    let dist = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getDistance( x1,y1,x2,y2 );
    let dirX = x2 - x1 > 0 ? 1 : -1;

    _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.entityLayer.addChild( self );
    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/swing_0.wav" );
    let dur = 400;
    let hitDur;

    if ( attacker.__effectTween ) {
        attacker.__effectTween.stop();
        attacker.resetPositionAndColor();
    }

    let attX = x1 + ( x2 - x1 ) / dist * 5;
    let attY = y1 + ( y2 - y1 ) / dist * 5;
    let attX0 = attacker.getX();
    let attY0 = attacker.getY();

    hitDur = dur - 100;
    let tw = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( attacker,100,{ x: attX,y: attY },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.inBack } )
        .onComplete( () => {
            new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( attacker, dur - 100, { x: attX0, y: attY0 }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.inCubic } );
        } );

    attacker.__effectTween = tw;
    let weaponSpr = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();

    weaponImage.setRotation( 135 );
    weaponImage.setPosition( 12,0 );
    weaponSpr.addChild( weaponImage );
    self.addChild( weaponSpr );
    weaponSpr.setRotation( angle - 200 * dirX );
    weaponSpr.setPosition( x1,y1 );
    new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( weaponSpr,dur - 100,{ rotation: angle + 5 * dirX,x: x1 + 2 * dirX,y: y1 + 5 },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.inCubic } )
        .onComplete( () => {
            new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( weaponSpr,100,{ rotation: angle + 5 * dirX,y: y1 } )
                .onCompleteRemoveFromParent();
        } );

    return [dur,hitDur];
};


_FT["stab"] = ( self,x1,y1,x2,y2,isHit,weaponImage,attacker ) => {
    let angle = ( Math.atan2( y2 - y1, x2 - x1 ) ) / Math.PI * 180;
    let dist = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getDistance( x1,y1,x2,y2 );

    _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.entityLayer.addChild( self );
    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/swing_0.wav" );
    let dur = 300;
    let hitDur;
    let weaponSpr = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();

    weaponImage.setRotation( 135 );
    weaponImage.setPosition( 12,0 );
    weaponSpr.addChild( weaponImage );
    self.addChild( weaponSpr );
    weaponSpr.setRotation( angle );
    weaponSpr.setPosition( x1,y1 );
    let x = x1 + ( x2 - x1 ) / dist * 3;
    let y = y1 + ( y2 - y1 ) / dist * 3;

    if ( attacker.__effectTween ) {
        attacker.__effectTween.stop();
        attacker.resetPositionAndColor();
    }

    let attX = x1 + ( x2 - x1 ) / dist * 5;
    let attY = y1 + ( y2 - y1 ) / dist * 5;
    let attX0 = attacker.getX();
    let attY0 = attacker.getY();

    hitDur = 100;
    let tw = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( attacker,100,{ x: attX,y: attY },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.inBack } )
        .onComplete( () => {
            new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( attacker,dur - 100,{ x: attX0,y: attY0 },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.inCubic } );
        } );

    attacker.__effectTween = tw;
    new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( weaponSpr,dur - 100,{ x: x + ( y2 == y1 ? 0 : 3 ),y: y },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outBounce } )
        .onComplete( () => {
            new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( weaponSpr,100,{ x: x1 + ( y2 == y1 ? 0 : 3 ),y: y1,rotation: angle,scaleX: 0.5,scaleY: 0.5 } )
                .onCompleteRemoveFromParent();
        } );

    return [dur,hitDur];
};

_FT["hand"] = ( self,x1,y1,x2,y2,isHit,weaponImage,attacker ) => {
    let angle = ( Math.atan2( y2 - y1, x2 - x1 ) ) / Math.PI * 180;
    let dist = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getDistance( x1,y1,x2,y2 );

    _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.entityLayer.addChild( self );
    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/swing_0.wav" );
    let dur = 300;
    let hitDur;
    let weaponSpr = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();

    weaponImage.setRotation( 90 );
    weaponImage.setPosition( 12,0 );
    weaponImage.setScale( 0.5 );
    weaponSpr.addChild( weaponImage );
    self.addChild( weaponSpr );
    weaponSpr.setRotation( angle );
    weaponSpr.setPosition( x1,y1 );
    let x = x1 + ( x2 - x1 ) / dist * 2 + ( y2 == y1 ? 0 : 3 );
    let y = y1 + ( y2 - y1 ) / dist * 2;

    if ( attacker.__effectTween ) {
        attacker.__effectTween.stop();
        attacker.resetPositionAndColor();
    }

    let attX = x1 + ( x2 - x1 ) / dist * 5;
    let attY = y1 + ( y2 - y1 ) / dist * 5;
    let attX0 = attacker.getX();
    let attY0 = attacker.getY();

    hitDur = 100;
    let tw = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( attacker,100,{ x: attX,y: attY },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.inBack } )
        .onComplete( () => {
            new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( attacker,dur - 100,{ x: attX0,y: attY0 },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.inCubic } );
        } );

    attacker.__effectTween = tw;
    new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( weaponSpr,dur - 100,{ x: x,y: y },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.inOutBack } )
        .onComplete( () => {
            new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( weaponSpr,100,{ x: x1,y: y1 },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.inCubic } )
                .onCompleteRemoveFromParent();
        } );

    return [dur,hitDur];
};

_FT["claw"] = ( self,x1,y1,x2,y2,isHit,weaponImage,attacker ) => {
    let angle = ( Math.atan2( y2 - y1, x2 - x1 ) ) / Math.PI * 180;
    let dist = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getDistance( x1,y1,x2,y2 );

    _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.entityLayer.addChild( self );
    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/swing_0.wav" );
    let dur = 300;
    let hitDur;
    let b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "Claw.png",false,{ format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );

    b.setAnchorPoint( 0.5,0.5 );
    b.setScale( 0.8 );
    b.setOverrideColor( 0xff0000 );
    b.setPosition( x2 + 10,y2 - 10 );
    let x = x1 + ( x2 - x1 ) / dist * 1;
    let y = y1 + ( y2 - y1 ) / dist * 1;

    if ( attacker.__effectTween ) {
        attacker.__effectTween.stop();
        attacker.resetPositionAndColor();
    }

    let attX = x1 + ( x2 - x1 ) / dist * 7;
    let attY = y1 + ( y2 - y1 ) / dist * 7;
    let attX0 = attacker.getX();
    let attY0 = attacker.getY();

    hitDur = 100;
    let tw = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( attacker,100,{ x: attX,y: attY },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.inOutBack } )
        .onComplete( () => {
            self.addChild( b );
            new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( b,100,{ x: x2 - 5,y: y2 + 5,alpha: 0.5 },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCubic } )
                .onCompleteRemoveFromParent();
            new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( attacker,dur - 100,{ x: attX0,y: attY0 },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.inCubic } );
        } );

    attacker.__effectTween = tw;

    return [dur,hitDur];
};

_FT["damage"] = ( self,x1,y1,x2,y2,target,attacker,hitDur ) => {
    x2 = x2 != null ? x2 : target.getX();
    y2 = y2 != null ? y2 :  target.getY();
    x1 = x1 != null ? x1 :  x2;
    y1 = y1 != null ? y1 :  y2;
    attacker = attacker != null ? attacker : target;
    hitDur = hitDur || 0;
    let angle = ( Math.atan2( y2 - y1, x2 - x1 ) ) / Math.PI * 180;
    let dist = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getDistance( x1,y1,x2,y2 );

    _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.entityLayer.addChild( self );
    let dur = 300;
    let targetX = target.getX();
    let targetY = target.getY();
    let x = targetX + ( x2 - x1 ) / dist * 0;
    let y = targetY + ( y2 - y1 ) / dist * 0;

    if ( target.__effectTween ) {
        target.__effectTween.stop();
        target.resetPositionAndColor();
    }
    let tick = 0;

    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( hitDur, () => {
        target.setOverrideColor( 0xff0000 );
        target.setScale( 1.5 );
        let tw = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( target,100,{ color: 0xa00000 },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outBounce } )
            .onChange( () => {
                target.setScale( 1.5 + Math.floor( tick / 2 ) * 0.3 );
                tick = ( tick + 1 ) % 4;
            } )
            .onComplete( () => {
                new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( target,dur - hitDur - 50,{ scaleX: 1,scaleY: 1,color: 0xffffff },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.inCubic } );
            } );

        target.__effectTween = tw;
    } );

    return [dur,hitDur];
};

_FT["death"] = ( self,x1,y1,x2,y2,target,attacker,hitDur ) => {
    x2 = x2 != null ? x2 : target.getX();
    y2 = y2 != null ? y2 : target.getY();
    x1 = x1 != null ? x1 : x2;
    y1 = y1 != null ? y1 : y2;
    attacker = attacker != null ? attacker : target;
    hitDur = hitDur || 0;
    let angle = ( Math.atan2( y2 - y1, x2 - x1 ) ) / Math.PI * 180;
    let dist = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getDistance( x1,y1,x2,y2 );

    _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.entityLayer.addChild( self );
    let dur = 1000;
    let targetX = target.getX();
    let targetY = target.getY();
    let speed = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 10,14 );

    angle = angle + _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( -5,5 );
    let x = targetX + Math.cos( ( angle / 180 * Math.PI ) ) * speed;
    let y = targetY + Math.sin( ( angle / 180 * Math.PI ) ) * speed + 5;

    if ( target.__effectTween ) {
        target.__effectTween.stop();
        target.resetPositionAndColor();
    }
    let targetAngle = Math.sign( x2 - x1 ) * 90;

    if ( y2 - y1 > 0 ) {
        targetAngle = 180;
    }
    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( hitDur, () => {
        target.setOverrideColor( 0xff0000 );
        //target.setScale(1.5);
        target.setRotation( targetAngle );
        target.setPosition( targetX,targetY + 5 );
        if ( target.__animationTimer ) {
            target.__animationTimer.stop();
        }
        let tw = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( target,200,{ color: 0xa00000,x: x,y: y },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCubic } )
            .onComplete( () => {
                new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( target,dur - hitDur - 50,{ alpha: 0 },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.inCubic } );
            } );

        target.__effectTween = tw;
    } );

    return [dur,hitDur];
};

_FT["boom"] = ( self,x,y,scale,dur,hitDur,color ) => {
    hitDur = hitDur || 0;
    _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.entityLayer.addChild( self );
    let tex = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "boom.png",false,{ format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } );
    let b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( tex );
    let sc1 = scale / ( tex.width / 2 );

    b.setAnchorPoint( 0.5,0.5 );
    b.setOverrideColor( color != null ? color : 0xffffff );
    b.setPosition( x,y );
    b.setBlendMode( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite.BlendModes.ADD );
    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( hitDur, () => {
        self.addChild( b );
        b.setScale( 0.0 );
        new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( b,dur * 0.6,{ scaleX: sc1 * 0.95,scaleY: sc1 * 0.95,alpha: 0.4 },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCircular } )
            .onComplete( () => {
                new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( b,dur * 0.4,{ scaleX: sc1,scaleY: sc1,alpha: 0.0 },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCubic } );
            } );
    } );

    return [dur,hitDur];
};

// 프랍을 부수는 이펙트
// 해당 프랍이미지의 13번~16번까지는 파티클이라고 가정한다.
_FT["breakProp"] = ( self,x1,y1,x2,y2,target,attacker,hitDur ) => {
    x2 = x2 != null ? x2 : target.getX();
    y2 = y2 != null ? y2 : target.getY();
    x1 = x1 != null ? x1 : x2;
    y1 = y1 != null ? y1 : y2;
    attacker = attacker != null ? attacker : target;
    hitDur = hitDur || 0;
    let angle = ( Math.atan2( y2 - y1, x2 - x1 ) ) / Math.PI * 180;
    let dist = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getDistance( x1,y1,x2,y2 );

    _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.entityLayer.addChild( self );
    let targetX = target.getX();
    let targetY = target.getY();
    let dur = 2000;
    let speed = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 10,14 );

    angle = angle + _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( -2,2 );
    let x = targetX + Math.cos( ( angle / 180 * Math.PI ) ) * speed;
    let y = targetY + Math.sin( ( angle / 180 * Math.PI ) ) * speed;
    let fx = Math.cos( ( angle / 180 * Math.PI ) ) * 10;
    let fy = Math.sin( ( angle / 180 * Math.PI ) ) * 10;

    if ( target.__effectTween ) {
        target.__effectTween.stop();
        target.resetPositionAndColor();
    }
    let m = [];

    if ( target.property.slice != false ) {
        [m[0],m[1],m[2],m[3]] = target.mesh.sliceMesh();
    }
    for ( let i = 0; i < ( target.property.particle != null ? target.property.particle : 4 ); i++ ) {
        let [col,row] = target.mesh.getColRow();

        m.push( target.mesh.clone( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 13,16 ),row ) );
    }
    let t = [];

    for ( let i = 0; i < m.length; i++ ) {
        let f1 = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 200,300 );
        let f2 = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 10,40 );
        let h1 = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( -14,-2 );
        let h2 = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 4,7 );

        t.push( [0, f1, m[i], { x: [ 0, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( -15 - fx * 3, 15 ), "outCubic"] }] );
        t.push( [0, f2, m[i],{ y: [ 0, h1, "outCubic" ] }] );
        t.push( [f2 + 1, f2 * 3, m[i], { y: [ h1, h2, "outBounce"] }] );
        t.push( [0, f2 * 2, m[i], { rotation: [ 0, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( -720, 720 ), "outCubic"] }] );
    }
    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( hitDur, () => {
        let mc = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.MovieClip( t );

        self.addChild( mc );
        mc.setPosition( targetX,targetY );
        target.setVisible( false );
        if ( target.__animationTimer ) {
            target.__animationTimer.stop();
        }
        let tw = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( mc,300,{ x: targetX + fx,y: targetY + fy,scaleX: 0.9,scaleY: 0.9 },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.linear } )
            .onComplete( () => {
                new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( mc,dur - hitDur - 50,{ scaleX: 1.0,scaleY: 1.0,alpha: 0 },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.inCubic } );
            } );

        target.__effectTween = tw;
    } );

    return [dur,hitDur];
};


_FT["hitProp"] = ( self,x1,y1,x2,y2,target,attacker,hitDur ) => {
    x2 = x2 != null ? x2 : target.getX();
    y2 = y2 != null ? y2 : target.getY();
    x1 = x1 != null ? x1 : x2;
    y1 = y1 != null ? y1 : y2;
    attacker = attacker != null ? attacker : target;
    hitDur = hitDur || 0;
    let angle = ( Math.atan2( y2 - y1, x2 - x1 ) ) / Math.PI * 180;
    let dist = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getDistance( x1,y1,x2,y2 );

    _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.entityLayer.addChild( self );
    let dur = 300;
    let targetX = target.getX();
    let targetY = target.getY();
    let x = targetX + ( x2 - x1 ) / dist * 0;
    let y = targetY + ( y2 - y1 ) / dist * 0;

    if ( target.__effectTween ) {
        target.__effectTween.stop();
        target.resetPositionAndColor();
    }
    let tick = 0;

    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( hitDur, () => {
        target.setOverrideColor( 0x808080 );
        let tw = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( target,100,{ color: 0xffffff },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outBounce } )
            .onChange( () => {
                target.setX( x + Math.floor( tick ) * 4 - 2 );
                tick = ( tick + 0.5 ) % 2;
            } )
            .onComplete( () => {
                target.setX( x );
                new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( target,dur - hitDur - 50,{ color: 0xffffff },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.inCubic } );
            } );

        target.__effectTween = tw;
    } );

    return [dur,hitDur];
};



/***/ }),

/***/ "./games/Avalonika/src/entity/buff.js":
/*!********************************************!*\
  !*** ./games/Avalonika/src/entity/buff.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Buff)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _lib_random__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @lib/random */ "./engine/src/lib/random.js");
/* harmony import */ var _lib_iconPack__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @lib/iconPack */ "./engine/src/lib/iconPack.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../global */ "./games/Avalonika/src/global.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../config */ "./games/Avalonika/src/config.js");










class Buff {
    constructor( type, power, cr ) {
        this.type = type;
        this.creature = cr;
        this.power = power;
        const b = new _lib_iconPack__WEBPACK_IMPORTED_MODULE_2__["default"]( Buff.texture, Buff.data[this.type].iconCol, Buff.data[this.type].iconRow, 16, 16, Buff.data[this.type].iconColor );

        this.icon = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.MovieClip( [
            [0, 30, b, { redMultiplier: [1, 0, "linear"], greenMultiplier: [1, 0, "linear"], blueMultiplier: [1, 0, "linear"] }],
            [0,"goto",0]
        ] );
        _global__WEBPACK_IMPORTED_MODULE_3__["default"].world.addLog( Buff.data[this.type].addLog, this.creatureName() );
    }

    renew( power ) {
        this.power = power;
        _global__WEBPACK_IMPORTED_MODULE_3__["default"].world.addLog( Buff.data[this.type].renewLog, this.creatureName() );
    }


    static addBuff( cr, type, power ) {
        let buff;

        if ( cr.buffs[type] ) {
            buff = cr.buffs[type];
            buff.renew( power );
        } else {
            buff = new Buff( type, power, cr );
        }

        return buff;
    }

    process() {
        if ( Buff.data[this.type].processFunc ) {
            Buff.data[this.type].processFunc( this );
        }
        if ( Buff.data[this.type].removeFunc ) {
            const r = Buff.data[this.type].removeFunc( this );

            if ( r ) {
                this.remove();
            }
        }
    }

    decreasePower() {
        this.power = this.power - 1;

        return this.power <= 0;
    }

    remove() {
        _global__WEBPACK_IMPORTED_MODULE_3__["default"].world.addLog( Buff.data[this.type].removeLog, this.creatureName() );
        this.creature.buffs[this.type] = null;
    }

    showProcessLog( ...args ) {
        _global__WEBPACK_IMPORTED_MODULE_3__["default"].world.addLog( Buff.data[this.type].processLog, ...args );
    }

    creatureName() {
        return this.creature.getName();
    }

    damage( dmg ) {
        this.creature.damage( dmg, this.creature, this.creature.getX(), this.creature.getY(), 0, Buff.data[this.type].processSound );
    }
}

Buff.texture = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "buff.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } );
Buff.FIRE = "F";
Buff.POISON = "P";
Buff.FROZEN = "f";
Buff.BLIND = "B";
Buff.SILENCE = "S";
Buff.STONE = "O";
Buff.CURSE = "c";
Buff.BLESS = "b";
Buff.BLEED = "L";
Buff.CONFUSE = "C";
Buff.STUN = "T";
Buff.BERSERK = "K";
Buff.WEAKEN = "W";
Buff.SHOCK = "E";

Buff.data = {

    [Buff.FIRE]: {
        iconCol:    1, iconRow:    1, iconColor:  0xff0000,
        addLog:     "%s에게 불이 붙었다!",
        renewLog:   "%s에게 불이 또 붙었다!",
        removeLog:  "%s에게 붙은 불이 꺼졌다!",
        removeFunc: function ( self ) {
            return self.decreasePower();
        },
        processLog:   "%s{는} 불로 인해 %d 대미지를 입었다!",
        processSound: "sound/damage_fire.wav",
        processFunc:  function ( self ) {
            const dmg = _global__WEBPACK_IMPORTED_MODULE_3__["default"].world.random( 1, 3 );

            this.showProcessLog( this.creatureName(), dmg );
            this.damage( dmg );
        },
    },
    [Buff.POISON]: {
        iconCol:    2, iconRow:    1, iconColor:  0xff00ff,
        addLog:     "%s{는} 독에 걸렸다!",
        renewLog:   "%s{는} 독에 또 노출됐다!",
        removeLog:  "%s의 몸에서 독이 사라졌다!",
        removeFunc: function ( self ) {
            return _global__WEBPACK_IMPORTED_MODULE_3__["default"].world.random( 5 ) == 1;
        },
        processLog:   "%s{는} 독으로 인해 %d 대미지를 입었다!",
        processSound: "sound/damage_poison.wav",
        processFunc:  function ( self ) {
            const dmg = _global__WEBPACK_IMPORTED_MODULE_3__["default"].world.random( 1, 2 );

            this.showProcessLog( this.creatureName(), dmg );
            this.damage( dmg );
        },
    },
    [Buff.FROZEN]:  {},
    [Buff.BLIND]:   {},
    [Buff.SILENCE]: {},
    [Buff.STONE]:   {},
    [Buff.CURSE]:   {},
    [Buff.BLESS]:   {},
    [Buff.BLEED]:   {},
    [Buff.CONFUSE]: {},
    [Buff.STUN]:    {},
    [Buff.BERSERK]: {},
    [Buff.WEAKEN]:  {},
    [Buff.SHOCK]:   {},

};



/***/ }),

/***/ "./games/Avalonika/src/entity/creature.js":
/*!************************************************!*\
  !*** ./games/Avalonika/src/entity/creature.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Creature)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _entity__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./entity */ "./games/Avalonika/src/entity/entity.js");
/* harmony import */ var _world_gameMap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../world/gameMap */ "./games/Avalonika/src/world/gameMap.js");
/* harmony import */ var _buff__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./buff */ "./games/Avalonika/src/entity/buff.js");
/* harmony import */ var _lib_iconPack__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @lib/iconPack */ "./engine/src/lib/iconPack.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../global */ "./games/Avalonika/src/global.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../config */ "./games/Avalonika/src/config.js");











const moodToNumber = {
    ["!"]:         1,
    ["?"]:         2,
    ["♥"]:         3,
    ["fear"]:      4,
    ["nearDeath"]: 5,
};


/**
 *
 *
 * @class Creature
 * @extends {Entity}
 */
class Creature extends _entity__WEBPACK_IMPORTED_MODULE_1__["default"] {
    constructor( name, tileX, tileY, options ) {
        super( name, tileX, tileY, options );
        this.isCreature = true;
        this.follow = null;
        this.hp = 1;
        this.maxHp = 1;
        if ( tileY && _global__WEBPACK_IMPORTED_MODULE_5__["default"].world.entityManager.getEntity( tileX,tileY ) ) {
            // 해당 위치에 다른 오브젝트가 있다.
            const t = _global__WEBPACK_IMPORTED_MODULE_5__["default"].world.pathManager.getSummonFloor( tileX,tileY,1 );

            if ( t.length == 0 ) {
                console.log( "소환할 자리가 없음", tileX, tileY );
            } else {
                tileX = t[0].x;
                tileY = t[0].y;
                const { x: wx, y: wy } = _global__WEBPACK_IMPORTED_MODULE_5__["default"].world.tileCenterToWorld( tileX, tileY );

                this.setPosition( wx,wy );
                [this.tileX,this.tileY] = [tileX,tileY];
                [this.lastTileX,this.lastTileY] = [tileX,tileY];
            }
        }
        this.postInit( Creature );
    }

    addBuff( type,power ) {
        this.buffs[type] = _buff__WEBPACK_IMPORTED_MODULE_3__["default"].addBuff( this,type,power );
        this.buffLayer.clearChildren();
        let numOfActiveBuff = 0;

        for ( const k in this.buffs ) {
            const v = this.buffs[k];

            numOfActiveBuff = numOfActiveBuff + 1;
        }
        let i = 0;

        for ( const k in this.buffs ) {
            const v = this.buffs[k];

            v.icon.setPosition( -( numOfActiveBuff - 1 ) * 16 / 2 + i * 16,-25 );
            this.buffLayer.addChild( v.icon );
            i = i + 1;
        }
    }


    processBuff() {
        for ( const k in this.buffs ) {
            const v = this.buffs[k];

            v.process();
        }
        this.buffLayer.clearChildren();
        let numOfActiveBuff = 0;

        for ( const k in this.buffs ) {
            const v = this.buffs[k];

            numOfActiveBuff = numOfActiveBuff + 1;
        }
        let i = 0;

        for ( const k in this.buffs ) {
            const v = this.buffs[k];

            v.icon.setPosition( -( numOfActiveBuff - 1 ) * 16 / 2 + i * 16,-25 );
            this.buffLayer.addChild( v.icon );
            i = i + 1;
        }
    }

    showMood( mood ) {
        if ( this.__moodSprite != null ) this.__moodSprite.removeFromParent();
        if ( mood ) {
            const moodNum = moodToNumber[mood];
            const b = new _lib_iconPack__WEBPACK_IMPORTED_MODULE_4__["default"]( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "fx.png",false,{ format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ),moodNum,5,16,24 );

            b.setY( this.gaugeLayer.isVisible() && -24 || -16 );
            const mc = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.MovieClip( [
                [0,15,b,{ scaleX: [1,0.7,"outCubic"],scaleY: [1,0.7,"outCubic"] }],
                [16, 30, b, { scaleX: [0.7, 1, "inCubic"], scaleY: [0.7, 1, "inCubic"] }],
                [30,"goto",0]
            ] );

            this.addChild( mc );
            this.__moodSprite = mc;
        }
    }


    refreshGauge() {
        const v = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.clamp( this.hp / this.hpMax,0,1 );

        if ( v == 1 || v == 0 || this.isPlayer ) {
            this.gaugeLayer.setVisible( false );
        } else {
            this.gaugeLayer.setVisible( true );
        }
        const w = this.mesh.getWidth();
        const h = this.mesh.getHeight();

        if ( !this.__gaugeBackSprite ) {
            const back = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Pixel( 0x000000,1,w,4 );

            back.setPosition( -w / 2,-h / 2 - 7 );
            this.gaugeLayer.addChild( back );
            this.__gaugeBackSprite = back;
        }
        if ( !this.__gaugeSprite ) {
            const gauge = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Pixel( 0xff0000,1,w - 2,2 );

            gauge.setPosition( 1,1 );
            this.__gaugeBackSprite.addChild( gauge );
            this.__gaugeSprite = gauge;
        }
        if ( this.__gaugeLastValue != v ) {
            const gaugeDelta = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Pixel( 0xa00000,1,w - 2,2 );

            gaugeDelta.setScaleX( ( this.__gaugeLastValue || 1 ) - v );
            gaugeDelta.setPosition( 1 + v * ( w - 2 ),1 );
            new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( gaugeDelta,1000,{ scaleX: 0,alpha: 0 },{ ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.inCubic } )
                .onCompleteRemoveFromParent();
            this.__gaugeBackSprite.addChild( gaugeDelta );
            this.__gaugeSprite.setScaleX( v );
            this.__gaugeLastValue = v;
        }
    }


    getFactionRelation( target ) {
        const myFaction = this.property.faction || "M";
        const targetFaction = target.property.faction || "M";
	
        const ft = Creature.factionTable[myFaction][0];
        const i = Creature.factionTable[targetFaction][1] * 2;

        return ft.substr( i, 1 );
    }

    // 범위 안의 타겟을 찾음
    // F>R>f>r 의 순서로 찾는다
    // f,r은 senseDistance의 절반에 들어올 경우 동작함
    // 리턴값은 {관계,개체,중요도} 순으로된 어레이 1번을 읽으면 된다.

    searchTarget( range ) {
        if ( !range ) {
            if ( this.isPlayer ) {
                range = _global__WEBPACK_IMPORTED_MODULE_5__["default"].world.viewRadius;
            } else {
                range = this.senseDistance;
            }
        }
	
        // 오브젝트 목록을 얻어온다
        const t = this.getNearEntities( range );
        const t2 = [];
	
        for ( const i in t ) {
            const v = t[i];

            if ( v.isCreature && this.follow != v && this.canSee( v.tileX, v.tileY, _world_gameMap__WEBPACK_IMPORTED_MODULE_2__["default"].BLOCK_VISION )[0] ) {
                const relation = this.getFactionRelation( v );
                //log(relation);
                const importantPoint = relation == "F" ? 4 :
                    relation == "R" ? 3 :
                        relation == "f" ? 2 :
                            relation == "r" ? 1 : 0;

                t2[t2.length + 1] = [relation, v, importantPoint - _global__WEBPACK_IMPORTED_MODULE_5__["default"].world.getDistanceBetweenEntities( this, v ) * 0.001];
            }
        }
        t2.sort( ( a, b )=>  b[3] - a[3] );

        return [t2[1],t2];
    }



    //--------------------------------------------------------------------------------------
    // 펫에게 명령을 전달한다.
    // 타겟을 생략하면 모든 펫
    //--------------------------------------------------------------------------------------
    commandFollower( command,options,target ) {
        if ( target ) {
            if ( this == target.follow ) {
                target.receiveCommand( command, options );
            } else {
                throw new Error( "자신의 펫이 아닌데 명령을 전달하려함" );
            }
        } else {
            const t = _global__WEBPACK_IMPORTED_MODULE_5__["default"].world.entityManager.getAllEntities();

            for ( const i in t ) {
                const v = t[i];

                if ( this == v.follow ) {
                    console.log( this.getName(),command,"명령을 전달함",v.getName() );
                    v.receiveCommand( command,options );
                }
            }
        }
    }

    receiveCommand( command,options ) {
        console.log( this.getName(),command,"명령을 받음" );
        if ( command == "dance" ) {
            this.enableDefaultAnimation( false );
            options.mml
                .on( "note", () => {
                    const [tw, th] = [this.tileWidth, this.tileHeight];

                    this.__animationTick = ( this.__animationTick + 1 ) % 2;
                    const [tx, ty] = [this._textureX,this._textureY + this.__animationTick * th];
                    const [w, h] = [_config__WEBPACK_IMPORTED_MODULE_6__["default"].Entity.width, _config__WEBPACK_IMPORTED_MODULE_6__["default"].Entity.height];

                    this.mesh.setTextureCoordinateArray( [tx, ty, tx + tw, ty, tx, ty + th, tx + tw, ty + th] );
                    this.shadowMesh.setTextureCoordinateArray( [ tx, ty + h, tx + w, ty + h, tx, ty, tx + w, ty ] );
                } )
                .on( "complete", () => {
                    this.enableDefaultAnimation( true );
                } );
        }
    }
}


Creature.texture = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "Character.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } );
Creature.width = 18;
Creature.height = 24;
Creature.tileWidth = 18;
Creature.tileHeight = 24;
Creature.walkSpeed = 200;
Creature.perRow = Math.floor( Creature.texture.width / Creature.tileWidth );
Creature.factionTable = {
    /*
	
		faction;
		O Order;
		C Chaos;
		L Liberty;
		H Human;
		G Guard;
		R Raider;
		A Animal;
		P Predetor Animal;
		M Monster;
		V Vampire;
		U Outter universe;
			세로축은 자신, 가로축은 대상
			F 적극적 전투, f 소극적 전투 
			R 적극적 도망, r 소극적 도망
			O가 A를 만나면 f소극적으로 싸움
	*/
    //O C L H G R A P M V U;
    O: [ ": f       F f   F   R", 0],
    C: [ "F : f       f   f   R", 1],
    L: [ "    :     f     f f R", 2],
    H: [ "      :   f f r f   R", 3],
    G: [ "        : F   f F   R", 4],
    R: [ "F f F F r : f r f r R", 5],
    A: [ "            : R r r R", 6],
    P: [ "f f f f   f F : r r R", 7],
    M: [ "F F F F F f   f : r R", 8],
    V: [ "f f f F   f f     : r", 9],
    U: [ "F F F f f f f f f f :", 10],

};



/***/ }),

/***/ "./games/Avalonika/src/entity/entity.js":
/*!**********************************************!*\
  !*** ./games/Avalonika/src/entity/entity.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Entity)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _lib_iconPack__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @lib/iconPack */ "./engine/src/lib/iconPack.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../global */ "./games/Avalonika/src/global.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config */ "./games/Avalonika/src/config.js");
/*

	월드에 올라가는 개체는 전부 Entity;
	Entity는 기데로스가 사용하기 때문에 Entity라고 한다

	Entity;
	|
	+-Creature-----Player;
	|       |
	|		+------Monster-------Pet;
	|		            |
	|					+--------Npc;
	+-Prop;
    |
	+-Item;
    |
	+-Skill;
*/







const goldAni = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.MovieClip( [
    [0, 10, "@t", { redMultiplier: [1, 1, "linear"], greenMultiplier: [1, 0.8, "linear"], blueMultiplier: [0, 0, "linear"] }],
    [10, "goto", 0]
] );

const dropAni = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.MovieClip( {
    default: [[0, 0, "@t"]],
    hide:    [[0, 0, "@t", { alpha: 0 }]],
    drop:    [
        [0, 30, "@t", { alpha: 1, y: [0, -10, "outCubic"], rotation: [-360 * 2, 0, "linear"] }],
        [31, 60, "@t", { y: [-10, 0, "outBounce"] }]
    ],
} );


// 숨쉬기 애니메이션
// 이후에 다른 것으로 교체될 수 있으므로 루즈하게 둔다.


/**
 * @this Entity
 */
function onTimer() {
    const [tw, th] = [this.tileWidth, this.tileHeight];

    this.__animationTick = ( this.__animationTick + 1 ) % 2;
    const [tx, ty] = [this._textureX, this._textureY + this.__animationTick * th];
    const [w, h] = [_config__WEBPACK_IMPORTED_MODULE_3__["default"].Entity.width, _config__WEBPACK_IMPORTED_MODULE_3__["default"].Entity.height];

    //this.mesh.setTextureCoordinates(0, tx, ty, 1, tx + tw, ty, 2, tx, ty + th, 3, tx + tw, ty + th);
    this.mesh.setTextureCoordinateArray( [tx, ty, tx + tw, ty, tx, ty + th, tx + tw, ty + th] );
    if ( this.shadowMesh ) {
        this.shadowMesh.setTextureCoordinateArray( [ tx, ty + h, tx + w, ty + h, tx, ty, tx + w, ty ] );
    }
}

/**
 * @this Entity
 */
function onEnterFrame() {
    const { x, y } = this.getPosition();

    this.shadowMesh.setPosition( x,y );
    this.shadowMesh.setAlpha( this.getAlpha() );
    this.shadowMesh.setVisible( this.isVisible() );
}

/** 
 * @typedef {object|undefined} EntityProperty
 * @property {number[]=} image
 * @property {[[number,number]]=} images
 * @property {number=} color
 * @property {string=} desc
 * @property {string=} type
 * */



class Entity extends _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite {
    //--------------------------------------------------------------------------------------
    // 초기화
    //--------------------------------------------------------------------------------------
    /**
     *Creates an instance of Entity.
     * @param {string} name
     * @param {number|object=} tileX
     * @param {number=} tileY
     * @param {object=} options
     * @memberof Entity
     */
    constructor( name, tileX, tileY, options ) {
        super();
        if ( typeof tileX == "object" && tileY == null && options == null ) {
            options = tileX;
            tileX = null;
        }
        /**
         * 유니크 ID 
         * @type {number} 
         * @readonly
        */
        this.id = Entity.generateNewId();
        this.isEntity = true;
        this.walkSpeed = _config__WEBPACK_IMPORTED_MODULE_3__["default"].Entity.walkSpeed;
        this.options = options != null ? options : {};

        if ( typeof tileX == "number" ) {
            this.position = _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.tileCenterToWorld( tileX, tileY );
            this.tileX = tileX;
            this.tileY = tileY;
            this.lastTileX = tileX;
            this.lastTileY = tileY;
        }
		
        this.name = name;
        /** @type {EntityProperty} */
        this.property = undefined;
        /** @type {Mesh} */
        this.mesh = undefined;
        /** @type {MovieClip} */
        this.movieClip = undefined;
        /** @type {boolean} */
        this.addedToWorld = undefined;
        /** @type {number} */
        this.tileWidth = undefined;
        /** @type {number} */
        this.tileHeight = undefined;
        /** @type {boolean} */
        this.isItem = undefined;
        /** @type {boolean} */
        this.isCreature = undefined;
        /** @type {boolean} */
        this.isProp = undefined;
        /** @type {boolean} */
        this.isSkill = undefined;
        /** @type {boolean} */
        this.isPlayer = undefined;

        /** @type {TextureBase} */
        this.texture = undefined;

        this.imageNum = undefined;
        this.imageCol = undefined;
        this.imageRow = undefined;
        this.colorNum = undefined;
    }


    /**
     *
     *
     * @param {object} baseTable
     * @param {string} key
     * @memberof Entity
     */
    fillProperties( baseTable, key ) {
        this.__key = key;
        console.assert( baseTable[key], `베이스테이블에 키가 없음 ${baseTable},${key}` );
        this.property = new Proxy( {}, {
            get: ( target, name ) => {
                return name in target ? target[name] : baseTable[key][name];
            }
        } );
    }


    postInit( currentClass ) {
        if ( this.constructor != currentClass ) {
            return;
        }
        const options = this.options;
        const pr = this.property;
        const [tileX, tileY] = [this.tileX, this.tileY];
        let imageCol, imageRow;

        if ( pr.image ) {
            [imageCol, imageRow] = pr.image;
        } else if ( pr.images ) {
            [imageCol, imageRow] = pr.images[this.imageNum];
        }

        [this.imageCol, this.imageRow] = [imageCol, imageRow];
        this.color = this.color || this.options.color || pr.color;
        if ( pr.colors && this.color == null ) {
            this.color = pr.colors[this.colorNum];
        } else if ( !this.color ) {
            this.color = 0xffffff;
        }
		
        if ( this.isCreature ) {
            imageRow = imageRow * 2 - 1;
        }

        const [w, h] = [_config__WEBPACK_IMPORTED_MODULE_3__["default"].Entity.width, _config__WEBPACK_IMPORTED_MODULE_3__["default"].Entity.height];
        const [tw, th] = [this.tileWidth, this.tileHeight];
        const [tx, ty] = [( imageCol - 1 ) * tw, ( imageRow - 1 ) * th];
        let m = new _lib_iconPack__WEBPACK_IMPORTED_MODULE_1__["default"]( this.texture, imageCol, imageRow, tw, th, this.color, 1 );

        this.mesh = m;
        m.setFlip( options.flip );
        if ( tileX && tileY && _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.map.getVisibility( tileX, tileY ) > 0 ) {
            this.setVisible( false );
        } else {
            this.setVisible( true );
        }

        if ( this.isProp || this.isCreature || this.isSkill ) {
            this.addChild( m );
            const m3 = m.clone();
            const sh = h * 0.8;

            m3.setVertexArray( [
                0 - w / 2, 0 - h / 2 + sh,
                w - w / 2, 0 - h / 2 + sh,
                0 - w / 2, h - h / 2 + sh,
                w - w / 2, h - h / 2 + sh
            ] );
            m3.setTextureCoordinateArray( [tx, ty + h, tx + w, ty + h, tx, ty, tx + w, ty] );
            m3.setColorArray( [0x000000, 0.5, 0x000000, 0.5, 0x000000, 0.5, 0x000000, 0.5] );
            this.shadowMesh = m3;
            this.addEventListenerOnStage( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.ENTER_FRAME, onEnterFrame, this );
        }
        if ( this.isCreature ) {
            this._textureX = tx;
            this._textureY = ty;
            this.__animationTick = 0;
            this.__animationTimer = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer( 500, 0 );
            this.__animationTimer.start();
            this.__animationTimer.addEventListenerOnStage( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.TIMER, onTimer, this, this );
            this.buffs = {};
            this.buffLayer = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();
            this.gaugeLayer = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();
            this.addChild( this.gaugeLayer );
            this.addChild( this.buffLayer );
        }
		
        //-------------------------------------------------------
        // 아이템 전용
        //-------------------------------------------------------

        if ( this.isItem ) {
            if ( this.property.effect == "gold" ) {
                const mc = goldAni.instance();

                mc.setTarget( "@t", m );
                //mc.setGotoAction(10, 0);
                //@ts-ignore
                m = mc;
            }
            const mc = dropAni.instance();

            mc.setTarget( "@t", m );
            this.addChild( mc );
            this.movieClip = mc;
            if ( tileX ) {
                const { x, y } = _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.tileCenterToWorld( tileX, tileY );

                this.setPosition( x,y );
                [this.tileX, this.tileY] = [tileX, tileY];
            }

            if ( options.drop == true ) {
                if ( options.dropX ) {
                    const { x: tx, y: ty } = _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.tileCenterToWorld( options.dropX, options.dropY );

                    mc.setPosition( tx - this.getX(), ty - this.getY() );
                    new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( mc, 300, { x: 0, y: 0 } );
                }
                if ( options.dropDelay ) {
                    mc.gotoAndPlay( "hide" );
                    this.dropAnimationTimer = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( options.dropDelay, () => {
                        this.dropAnimationTimer = null;
                        // @ts-ignore
                        this.showDrop();
                    } );
                } else {
                    // @ts-ignore
                    this.showDrop();
                }
            }

            if ( this.property.bundle ) {
                this.amount = options.amount || 1;
                if ( this.property.bundle == "gold" ) {
                    if ( this.amount <= 5 ) {
                        this.changeImage( 1, 14 );
                    } else if ( this.amount <= 20 ) {
                        this.changeImage( 2, 14 );
                    } else if ( this.amount <= 100 ) {
                        this.changeImage( 3, 14 );
                    } else {
                        this.changeImage( 4, 14 );
                    }
                }
            }
        }
    }

    changeImage( col, row ) {
        const [w, h] = [_config__WEBPACK_IMPORTED_MODULE_3__["default"].Entity.width, _config__WEBPACK_IMPORTED_MODULE_3__["default"].Entity.height];
        const [tx, ty] = [( col - 1 ) * this.tileWidth, ( row - 1 ) * this.tileHeight];
        const m = this.mesh;

        m.setTextureCoordinateArray( [tx, ty, tx + w, ty, tx, ty + h, tx + w, ty + h] );
    }

    //--------------------------------------------------------------------------------------
    // 월드내부의 위치바꾸기
    // tileX,tileY는 각종 상호작용에서 참고하는 위치이다. 
    //--------------------------------------------------------------------------------------

    // Item은 다른 오브젝트와 같은 위치에 있을 수 있으므로
    // 아래의 메소드를 오버라이드한다.
    setTileXy( tileX, tileY ) {
        if ( this.lastTileX != this.tileX && this.lastTileY != this.tileY ) {
            [this.lastTileX, this.lastTileY] = [this.tileX, this.tileY]; // 이동방향 측정을 위해서 보관함
        }
        if ( this.addedToWorld ) {
            delete _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.entityManager.entitiesByXy[this.tileX + "," + this.tileY];
            [this.tileX, this.tileY] = [tileX, tileY];
            if ( _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.entityManager.entitiesByXy[tileX + "," + tileY] != null ) {
                throw new Error( "☞☞☞ 오브젝트가 있는 위치에 오브젝트를 이동하려함" );
            }
            _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.entityManager.entitiesByXy[tileX + "," + tileY] = this;
        } else {
            [this.tileX, this.tileY] = [tileX, tileY];
        }
    }

    enableDefaultAnimation( v ) {
        if ( this.__animationTimer ) {
            if ( v ) {
                onTimer.call( this );
                this.__animationTimer.start();
            } else {
                this.__animationTimer.stop();
            }
        }
    }

    stopPreviousAction( reason ) {
        this.enableDefaultAnimation( true );
        this.dispatchEvent( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "stopAction", { reason } ) );
    }

    //--------------------------------------------------------------------------------------
    // 애니메이션하면서 이동하기
    // 외부에서는 이걸 불러서 이동한다
    //--------------------------------------------------------------------------------------

    moveTo( tileX, tileY ) {
        if ( _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.entityManager.getEntity( tileX, tileY ) ) {
            // 다른 오브젝트가 있다.
            // 벽인지도 검사해야하나?
            return null;
        } else {
            this.stopPreviousAction( "move" );
            if ( this.__walkTween ) {
                this.__walkTween.stop();
            }
            const { x, y } = _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.tileCenterToWorld( tileX, tileY );

            this.setTileXy( tileX, tileY );
            const tw = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( this, this.walkSpeed, { x, y }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.inOutCubic } );

            this.__walkTween = tw;

            return tw;
        }
    }

    // 상대좌표를 사용하는 타입
    moveToRel( ax, ay ) {
        this.moveTo( this.tileX + ax, this.tileY + ay );
    }

    swapLocation( target ) {
        console.assert( this.addedToWorld && target.addedToWorld, "☞☞☞ 월드에 없는 오브젝트의 위치를 바꾸려함" );
        {
            if ( this.__walkTween ) {
                this.__walkTween.stop();
            }
            const { x, y } = _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.tileCenterToWorld( target.tileX, target.tileY );
            //this.setTileXy(tileX,tileY);
            const tw = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( this, this.walkSpeed, { x, y }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.inOutCubic } );

            this.__walkTween = tw;
        }
        {
            if ( target.__walkTween ) {
                target.__walkTween.stop();
            }
            const { x, y } = _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.tileCenterToWorld( this.tileX, this.tileY );
            //this.setTileXy(tileX,tileY);
            const tw = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( target, target.walkSpeed, { x, y }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.inOutCubic } );

            target.__walkTween = tw;
        }

        _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.entityManager.entitiesByXy[this.tileX + "," + this.tileY] = target;
        _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.entityManager.entitiesByXy[target.tileX + "," + target.tileY] = this;
        [this.tileX, this.tileY, target.tileX, target.tileY] = [target.tileX, target.tileY, this.tileX, this.tileY];
    }

    //--------------------------------------------------------------------------------------
    // 맵정보 읽기
    //--------------------------------------------------------------------------------------

    getPropertyRel( ax, ay ) {
        return _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.getProperty( this.tileX + ax, this.tileY + ay );
    }

    //--------------------------------------------------------------------------------------
    // 오브젝트 정보 읽기
    //--------------------------------------------------------------------------------------

    getEntityRel( ax, ay ) {
        return _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.entityManager.getEntity( this.tileX + ax, this.tileY + ay );
    }

    getEntityPropertyRel( ax, ay ) {
        const entity = _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.entityManager.getEntity( this.tileX + ax, this.tileY + ay );

        return entity != null ? entity.property : null;
    }

    //--------------------------------------------------------------------------------------
    // 자기자신을 삭제하기
    // 스프라이트도 즉시 사라짐
    //--------------------------------------------------------------------------------------

    removeFromWorld() {
        _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.entityManager.removeEntity( this );
    }

    //--------------------------------------------------------------------------------------
    // 자기자신을 삭제하는데 스프라이트는 그대로 둔다
    //--------------------------------------------------------------------------------------

    detachFromWorld() {
        _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.entityManager.detachEntity( this );
    }


    //--------------------------------------------------------------------------------------
    // 시야검사
    //--------------------------------------------------------------------------------------

    /**
     *
     *
     * @param {*=} wall
     * @returns {number[]}
     * @memberof Entity
     */
    canBeSeen( wall ) {
        return _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.sightManager.canBeSeen( this.tileX, this.tileY, wall );
    }

    canSee( x, y, wall ) {
        if ( typeof x == "number" ) {
            return _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.sightManager.canSee( this.tileX, this.tileY, x, y, wall );
        } else {
            //x가 entity라고 가정
            //item도 가능하다
            //log("보기체크",this.tileX,this.tileY,x.tileX,x.tileY,y);
            //log(GLOBAL.world.canSee(this.tileX,this.tileY,x.tileX,x.tileY,y));
            return _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.sightManager.canSee( this.tileX, this.tileY, x.tileX, x.tileY, y );
        }
    }

    //--------------------------------------------------------------------------------------
    // 트윈 애니메이션을 중단
    //--------------------------------------------------------------------------------------

    resetPositionAndColor() {
        //if (this.__walkTween) {
        //this.__walkTween.stop();
        //}
        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween.stopTarget( this );
        const { x, y } = _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.tileCenterToWorld( this.tileX, this.tileY );

        this.setPosition( x,y );
        this.setOverrideColor( 0xffffff );
        this.setScale( 1 );
        this.setAlpha( 1 );
    }

    //--------------------------------------------------------------------------------------
    // 근처의 상호작용 대상 목록을 얻기
    //--------------------------------------------------------------------------------------

    /**
     *
     *
     * @param {number} radius
     * @param {number=} angleLimit
     * @param {number=} targetX
     * @param {number=} targetY
     * @returns {Entity[]}
     * @memberof Entity
     */
    getNearEntities( radius, angleLimit, targetX, targetY ) {
        const [tx, ty] = [this.tileX, this.tileY];
        // 범위안의 엔티티를 일단 모두 얻어옴
        const entities = _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.entityManager.getEntitiesInRect( tx - radius, ty - radius, tx + radius, ty + radius );
        const entityInfos = [];
        let angle0;

        if ( targetX != null && targetY != null ) {
            angle0 = ( Math.atan2( targetY - this.y, targetX - this.x ) / Math.PI * 180 ) + 360;
        } else {
            angle0 = 0;
        }
        //log("발견한 크리쳐수",t.length,x,y,angle0);
        for ( const i in entities ) {
            const entity = entities[i];
            const dist = _global__WEBPACK_IMPORTED_MODULE_2__["default"].world.getDistanceBetweenEntities( this, entity );

            if ( this != entity && dist <= radius ) {
                const angle = Math.floor( Math.abs( ( Math.atan2( entity.tileY - this.tileY, entity.tileX - this.tileX ) / Math.PI * 180 ) + 360 - angle0 ) );

                if ( angleLimit == null || angle <= angleLimit ) {
                    entityInfos.push( {
                        dist:   dist,
                        angle:  angle,
                        entity: entity
                    } );
                }
                //log("크리쳐",v.tileX,v.tileY,dist,angle);
            }
        }
        entityInfos.sort( ( a, b ) => {
            if ( a.dist == b.dist ) {
                return a.angle - b.angle;
            } else {
                return a.dist - b.dist;
            }
        } );
        if ( entities.length > 0 ) {
            const resultEntities = [];

            for ( const i in entityInfos ) {
                const v = entityInfos[i];

                resultEntities.push( v.entity );
            }

            return resultEntities;
        } else {
            return null;
        }
    }


    //--------------------------------------------------------------------------------------
    // 이름과 설명 얻기
    //--------------------------------------------------------------------------------------

    getName() {
        return this.name || "이름 없는 무언가";
    }


    getDesc() {
        let desc;

        desc = this.property.desc;
        if ( !desc ) {
            return "설명이 없습니다";
        } else {
            return desc;
        }
    }


    static generateNewId() {
        return ++this.nextId;
    }
}

Entity.nextId = 0;



/***/ }),

/***/ "./games/Avalonika/src/entity/entityComponents.js":
/*!********************************************************!*\
  !*** ./games/Avalonika/src/entity/entityComponents.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Props": () => (/* binding */ Props),
/* harmony export */   "WorldEntity": () => (/* binding */ WorldEntity)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");




class Props extends _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Component {
    /**
     *Creates an instance of Props.
     * @param {object} DB
     * @param {string} key
     * @memberof Props
     */
    constructor( DB, key ) {
        super();

        this.id = undefined;
        this.tileX = undefined;
        this.tileY = undefined;

        return new Proxy( this,{
            get: ( t,k ) => {
                //@ts-ignore
                return t[k] !== undefined ? t[k] : DB[key][k];
            }
        } );
    }
}

class WorldEntity extends _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Component {
    constructor( world,props ) {
        super();
        this.world = world;
        this.entityManager = world.getComponent( "EntityManager" );
        this.props = props;
    }

    setTileXy( x,y ) {

    }

    moveTo( x,y ) {

    }

    swapLocation( target ) {

    }
}





/***/ }),

/***/ "./games/Avalonika/src/entity/item.js":
/*!********************************************!*\
  !*** ./games/Avalonika/src/entity/item.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Item)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _entity__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./entity */ "./games/Avalonika/src/entity/entity.js");
/* harmony import */ var _lib_random__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @lib/random */ "./engine/src/lib/random.js");
/* harmony import */ var _lib_iconPack__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @lib/iconPack */ "./engine/src/lib/iconPack.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../global */ "./games/Avalonika/src/global.js");






const EntityComponents = __webpack_require__( /*! ./entityComponents */ "./games/Avalonika/src/entity/entityComponents.js" );


/*
export default class Entity {
    EntityLogic
    World
}

*/

class Item extends _entity__WEBPACK_IMPORTED_MODULE_1__["default"] {
    constructor( name,tileX,tileY,options ) {
        super( name,tileX,tileY,options );
        this.isItem = true;
        this.fillProperties( Item.property,name );

        this.props = this.addComponent( new EntityComponents.Props( Item.property, name ) );
        this.controller = this.addComponent( new EntityComponents.WorldEntity( _global__WEBPACK_IMPORTED_MODULE_4__["default"].world,this.props ) );
        const pr = this.property;

        this.name = pr.name || name;
        this.rarity = this.options.rarity || this.property.rarity || 0;
        this.color = ( this.options.color != null ) ? this.options.color : Item.rarityColor[this.rarity];
        this.texture = this.options.filtering ? Item.textureFiltered : Item.texture;
        this.tileWidth = Item.tileWidth;
        this.tileHeight = Item.tileHeight;

        this.postInit( Item );
    }


    showDrop() {
        this.movieClip.gotoAndPlay( "drop" );
        if ( this.property.dropSoundImm ) {
            if ( this.property.dropSound ) {
                _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/" + this.property.dropSound );
            } else {
                _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/drop_default.wav" );
            }
        } else {
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/drop_spin.wav" );
            if ( this.property.dropSound ) {
                _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( 900, ()=> {
                    if ( this.getParent() ) {
                        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/" + this.property.dropSound );
                    }
                } );
            } else {
                _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( 900, () => {
                    if ( this.getParent() ) {
                        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/drop_default.wav" );
                    }
                } );
            }
        }
    }



    // Item은 다른 오브젝트와 같은 위치에 있을 수 있다
    setTileXy( tileX,tileY ) {
        if ( this.lastTileX !=  this.tileX && this.lastTileY !=  this.tileY ) {
            [this.lastTileX, this.lastTileY] = [this.tileX, this.tileY]; // 이동방향 측정을 위해서 보관함
        }
        if ( this.addedToWorld ) {
            const x1 = this.tileX;
            const y1 = this.tileY;

            _global__WEBPACK_IMPORTED_MODULE_4__["default"].world.entityManager.removeEntity( this );
            this.tileX = tileX;
            this.tileY = tileY;
            _global__WEBPACK_IMPORTED_MODULE_4__["default"].world.entityManager.addEntity( this );
        } else {
            [this.tileX, this.tileY] = [tileX, tileY];
        }
    }

    getIcon( filtering,flip ) {
        const item = new Item( this.__key,{ filtering: filtering,flip: flip } );

        return item;
    }

    getTypeIcon() {
        const type = this.property.type || "etc";
        const [col,row] = Item.typeToIcon[type];
        const item = new _lib_iconPack__WEBPACK_IMPORTED_MODULE_3__["default"]( Item.textureEquipSlot,col,row,16,16 );

        return item;
    }

    drop( x,y ) {
        this.equipped = false;
        const { x: px, y: py } = _global__WEBPACK_IMPORTED_MODULE_4__["default"].world.tileCenterToWorld( x, y );

        this.setPosition( px,py );
        this.tileX = x;
        this.tileY = y;
        _global__WEBPACK_IMPORTED_MODULE_4__["default"].world.entityManager.addEntity( this );
        this.showDrop();
    }

    isEquippable() {
        const type = this.property.type;

        if ( Item.typeEquipMax[type] && Item.typeEquipMax[type] > 0 ) {
            return Item.typeEquipMax[type];
        } else {
            return false;
        }
    }

    isRanged() {
        if ( this.property.type == "ranged" ) {
            return true;
        } else {
            return false;
        }
    }



    equip() {
        console.log( "장비장착",this.name );
        this.equipped = true;
    }

    unequip() {
        console.log( "장비해제",this.name );
        this.equipped = false;
    }

    getInventorySprite() {
        const spr = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();
        const b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "itemPanel.png",false,{ format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );

        b.setAnchorPoint( 0.5,0.5 );
        const icon = this.getIcon();

        icon.setPosition( -60 + 16,1 );
        b.addChild( icon );
        b.setOverrideColor( this.color );
        const tw = _global__WEBPACK_IMPORTED_MODULE_4__["default"]["interface"].getHiresTextWrap( this.name );

        tw.setPosition( -60 + 29,-7 );
        tw.setTextColor( this.color );
        spr.addChild( b );
        spr.addChild( tw );

        if ( this.isEquippable() ) {
            spr.updateEquip = () => {
                if ( spr.equipIcon ) {
                    spr.equipIcon.removeFromParent();
                }
                const b1 = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "itemTypeBack.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );

                b1.setAnchorPoint( 0.5, 0.5 );
                b1.setPosition( 60 - 16, 0 );
                if ( this.equipped ) {
                    b1.setOverrideColor( 0xffffff );
                } else {
                    b1.setOverrideColor( 0x202020 );
                }
                const typeIcon = this.getTypeIcon();

                typeIcon.setOverrideColor( 0x000000 );
                b1.addChild( typeIcon );
                spr.addChild( b1 );
                spr.equipIcon = b1;
            };
            spr.updateEquip();
        } else {
            const typeIcon = this.getTypeIcon();

            typeIcon.setOverrideColor( 0x202020 );
            typeIcon.setPosition( 60 - 16,0 );
            spr.addChild( typeIcon );
        }

        return spr;
    }


    /*

	대미지 스트링
	최소값[~최대값][밸런스][바이아스] [/ 대형대상최소값[~최대값][밸런스][바이아스] ]

	1~10B+/2~10C-
	소형에 대해서 1~10대미지 밸런스는 B(==2.0)이고 bias는 0.6;
	대형에 대해서 2~10대미지 밸런스는 C(==1.75)이고 bias는 0.4;
	*/
    static parseDamageString( str ) {
        //string.match(str, "([^/]+)/?(.*)"
        let [, small, big] = /([^/]+)\/?(.*)/.exec( str );

        function parse( s ) {
            //let min,max,bal,bi = string.match(s,"(%d+)~?(%d*)(%a?)([%+%-]*)");
            let [, min, max, bal, bi] = /(\d+)~?(\d*)([A-E]?)([+-]*)/.exec( s );
            const balTable = {
                ["A"]: 3.0,
                ["B"]: 2.0,
                ["C"]: 1.75,
                ["D"]: 1.5,
                ["E"]: 1.25,
            };

            bal = bal ? balTable[bal.toUpperCase()] : 1.0;
            const biTable = {
                ["+++"]: 1.0,
                ["++"]:  0.75,
                ["+"]:   0.6,
                ["//-"]: 0.0,
                ["//"]:  0.25,
                ["-"]:   0.4,
            };

            bi = biTable[bi] != null ? biTable[bi] : 0.5;
            const _min = parseFloat( min );
            const _max = max == "" ? min : parseFloat( max );

            return [_min,_max,bal,bi];
        }
        big = big == "" ? small : big;
        const [min,max,bal,bi] = parse( small );

        return [min,max,bal,bi,...parse( big )];
    }

    calculateDamage() {
        const [min,max,bal,bi,min2,max2,bal2,bi2] = Item.parseDamageString( this.property.attack );
        const damage = _global__WEBPACK_IMPORTED_MODULE_4__["default"].world.randomGenerator.getDamage( bal,bi,min,max );

        return damage;
    }
}

/*
//테스트
Timer.delayedCall(100,function();
	log(Item.parseDamageString("1~30Z++"));
end);
*/

Item.property = {

    ["롱소드"]: {
        image:  [1, 1], type:   "melee",
        attack: "4~8B/4~9C",
    },
    ["브로드소드"]: {
        image:  [2, 1], type:   "melee",
        attack: "4~9C/4~9B",
    },
    ["도끼"]: {
        image:  [3, 1], type:   "melee",
        attack: "3~10E/3~10D",
    },
    ["크로우바"]: {
        image:  [4, 1], type:   "melee",
        attack: "2~6",
    },
    ["숏소드"]: {
        image:  [5, 1], type:   "melee",
        attack: "3~6B",
    },
    ["완드"]: {
        image:  [6, 1], type:   "melee",
        attack: "2~5",
    },
    ["완드2"]: {
        image:  [7, 1], type:   "melee",
        attack: "2~5",
    },
    ["전투도끼"]: {
        image:  [8, 1], type:   "melee",
        attack: "3~11E/3~11D",
    },
    ["손도끼"]: {
        image:  [10, 1], type:   "melee",
        attack: "3~11E/3~10D",
    },
    ["몽둥이"]: {
        image:  [11, 1], type:   "melee",
        attack: "2~8/2~7",
    },
    ["망치"]: {
        image:  [12, 1], type:   "melee",
        attack: "2~9/1~10",
    },
    ["나이프"]: {
        image:  [13, 1], type:   "melee", anim:   "stab",
        attack: "3~7C",
        desc:   "두 뼘 정도 길이의 칼. 턱이나 옆구리 등의 적의 급소를 찌르기 좋도록 되어있다.",
    },
    ["삼지창"]: {
        image:  [14, 1], type:   "melee", anim:   "stab",
        attack: "3~9C/2~10B",
    },
    ["대형망치"]: {
        image:  [15, 1], type:   "melee",
        attack: "3~9/2~10",
    },
    ["손에끼는"]: {
        image:  [16, 1], type:   "melee", anim:   "hand",
        attack: "1~6",
    },
    ["완드3"]: {
        image:  [17, 1], type:   "melee",
        attack: "2~5",
    },
    ["숏보우"]: {
        image:  [18, 1], type:   "ranged",
        attack: "2~7D/1~7C",
        desc:   "나무와 활시위의 탄성을 이용해 멀리 있는 적을 맞추는 무기. 서서 빠르게 쏠 수 있을 정도의 적당한 크기의 활이다.",
    },
    ["십자궁"]: {
        image:  [19, 1], type:   "ranged",
        attack: "2~7C/1~6B",
    },
    ["완드4"]: {
        image:  [2, 2], type:   "melee",
        attack: "2~5",
    },
    ["헬버드"]: {
        image:  [4, 2], type:   "melee",
        attack: "1~11C/2~12B",
    },
    ["지팡이2"]: {
        image:  [5, 2], type:   "melee",
        attack: "1~8",
    },
    ["새총"]: {
        image:  [6, 2], type:   "ranged",
        attack: "1~4",
    },
    ["창"]: {
        image:  [7, 2], type:   "melee", anim:   "stab",
        attack: "2~10C/2~10C",
    },
    ["창2"]: {
        image:  [8, 2], type:   "melee", anim:   "stab",
        attack: "2~10C/3~11C",
    },
    ["렌스"]: {
        image:  [9, 2], type:   "melee", anim:   "stab",
        attack: "4~10D/5~11C",
    },
    ["시미터"]: {
        image:  [10, 2], type:   "melee",
        attack: "5~8B",
    },
    ["팔시온"]: {
        image:  [11, 2], type:   "melee",
        attack: "4~9B",
    },
    ["모닝스타"]: {
        image:  [12, 2], type:   "melee",
        attack: "2~9",
    },
    ["철퇴"]: {
        image:  [13, 2], type:   "melee",
        attack: "3~9",
    },
    ["채찍"]: {
        image:  [14, 2], type:   "melee",
        attack: "1~10/1~12",
    },
    ["프레일"]: {
        image:  [15, 2], type:   "melee",
        attack: "1~11/2~13",
    },
    ["대형표창"]: {
        image:  [16, 2], type:   "melee",
        attack: "1~5E/1~4D",
    },
    ["표창"]: {
        image:  [17, 2], type:   "melee",
        attack: "1~4E/1~3",
    },
    ["부메랑"]: {
        image:  [18, 2], type:   "melee",
        attack: "1~6/1~5",
    },
    ["지팡이"]: {
        image:  [19, 2], type:   "melee",
        attack: "1~8",
    },
    ["맨손"]: {
        image:  [5, 3], type:   "hand", anim:   "hand",
        attack: "1~2/1",
    },
    ["채광삽"]: {
        image: [16, 5], type: "pickaxe", anim: "pickaxe", hitSound: "pickaxe_0.wav",
    },
    ["곡괭이"]: {
        image:    [20, 5], type:     "pickaxe", anim:     "pickaxe", hitSound: "pickaxe_0.wav",
        desc:     "광석을 부숴서 캐낼 수 있도록 만들어진 도구. 이것이 있으면 광물을 빨리 캘 수 있다.",
    },
    ["만돌린"]: {
        image:      [1, 15], type:       "instrument",
        desc:       "음유시인들이 많이 사용하는 소형의 악기이다. 울림통이 둥글고 8줄의 현을 가졌다.",
        instrument: "sound/mml_mandolin-a4.wav",
    },
    ["하프"]: {
        image:      [1, 15], type:       "instrument",
        desc:       "켈틱 하프, 이미지는 없어서 일단 만돌린처럼 생긴걸로 하자.",
        instrument: "sound/mml_celtic-harp-a4.wav",
    },
    ["레트로MSX"]: {
        image:      [1, 15], type:       "instrument",
        desc:       "8Bit FM 사운드가 나는 신묘한 악기",
        instrument: "sound/mml_retro-a4.wav",
    },
    ["레트로APPLE"]: {
        image:      [1, 15], type:       "instrument",
        desc:       "APPLE ][의 사운드가 연상되는 악기",
        instrument: "sound/mml_retro-apple-a4.wav",
    },
    ["악보1"]: {
        image: [2, 15], type:  "note",
        name:  '악보 "아추"',
        desc:  "재채기와 짝사랑은 숨길 수 없다는 내용의 가사가 담긴 노래의 악보",
        mml:   `
			MML@t128v15>>L4F2E2D.L8C16<B-16>C<B-AGG>C<F2ECD2<CDDD16E16v14o1G>GL16>EFGArGD<B-GD<B-GL8>C2C#2rA>DEFA>C4L16rv15FG>C<FG>L32C.<C.FG>CFG>C<CFG>CFG>C2&C8&C&C2L8ro4FF4v14o1B-4>B-<B-B->B-rC4.>C<CrCB-4<A4>A<AA4>A4D4>D<DrD>D4<<B-4>B-<B-B->B-rC4.>C<CrC>C4<C#4>C#<C#C#4>C#<D4>D4<AD>D<D4<B4>B<BB4>B4<B-4>B-<B-B-4>B-4<A4>A<AA4>A4D4>D<DD4>D4<<G>G<GA4A>A4<B->B-<B-B4B>B4C4>C<GCG>C<Cr>C<C4r4>C<C<B-4B-4>C4C4D-4D-A->E-4<E-.<A-.>A-<A-4A->A-<A-4A->A-<A-4A->A-<A-4G>G<G4G>G<G>C4>C<C>C<C>C<C>C<F>F<F>F<F>F<FE-4>E-<E->E-<E->E-<E-D4>D<DF#4>F#<F#G4>G<G-4F4<B-.A-.>A-<A-4A->A-<A-4A->A-<A-4A->A-<A-4G>G<G4G>G<G>C4>C<C>C<C>C<C>C<F>F<F>F<F>F<FE-4>E-<E->E-<E->E-<E-D4>D<DF#4>F#<F#F4>F<B->B-C4<B4v15o5C#4C#>C#4<<EEEED#D#>C#C#<BBA#16B.&BB>B<BA#B>C#DDC#C#16<G#.GG#>C#16<B.A4rAG#AB16>C#.&C#r4.C#D#E4EEED#<A#>D#C#4<BB4A#4B.>C#.&C#<G#.G#16rEEEED#D#>C#C#<BBA#16B.&BB.B16BA#B>C#DDC#C#16<G#.GG#>C#16<B.AA.A16AG#AB16>C#.&C#rC#C#C#D#E4EEED#<A#>D#C#4<BB4B4B4t76L16>>C#.<C#.F#B.<B.>EA.<A.>EL32o3rF#A>>CG#2.&G#&G#16.o2E.B.>EF#.G#16&G#64&G#2.&G#2.,
			v14>B-2G2F.r.rCr2<GF2r2v15F2E2D2E.E16F16G2F.E8C1.&&C2L8rCC4rEEFF4rEF4A4E4F4r4GFFEEDDCC4G4F4rEEFF4rEF4A4E4F4rB-B-B-B-AAGGFF4EEF4A4A.A16AGF16G16G4rEEEG>DC4.C.C16C<B-AG4AF4.AAAF4.G4.rF16G16AGFG4A4B-4.r4AGFG4.r2.F4E4F4G4A-4G4A-4B-.>C.&C<G.G16rE-E-E-E-DD>CC<B-B-A16B-.&B-B-.B-16B-AB->CD-D-CC16<G.F#G>C16<B-.A-A-.A-16A-GA-B-16>C.&C<A-.A-16r>CDE-4E-E-E-D<A>DC4<B-B-4A-4B-.>C.&C<G.G16rE-E-E-E-DD>CC<B-B-A16B-.&B-B-.B-16B-AB->CD-D-CC16<G.F#G>C16<B-.A-A-.A-16A-GA-B-16>C.&CrCCCDE-4E-E-E-D<A>DC4<B-B-2B.>C#16v14L4o2A1A1G#1>C#<C#C#C#8>C#16<F#8.F#F#F#8F#8EEEE8E8D#>L8D#<D#G4>G<GG#4>G#<G4F#4<B.A.>A<A4A>A<A4A>A<A4A>A<A4G#>G#<G#4G#>G#<G#>C#4>C#<C#>C#<C#>C#<C#>C#<F#>F#<F#>F#<F#>F#<F#E4>E<E>E<E>E<ED#4>D#<D#G4>G<GF#4F#F#4BF#<B4L16>>A.>E.A<G#.>E.F#<F#.>C#.E<<B1L32r8r.r.>>Et54<B>G#B>E>E1&E4.,
			v14<B-1C1<A2>F2<B->F8B-.&B-B-2B-2F2A2<D1&D1&D1L8rDD4>>rC2.CrC4CC4C4rC2.ArB-4AD4C4rC2.CrC4CC4C4rE2.DD4C4C2F2rD4E4.G.G16r>D4<G4.G4r>CCF4.F.F16rFEC<D4.E2rD4.D2rF4.F4DD<B-r1L4B-B-B-B->D-D-D-L8D-.E-.&E-C4rGGF4.F.F.rF.F.&FF.F.FFF4.E4F4E.E-.&E-C4rCCC4.E-4rA-GF#2L4ArF.G-E-L8F.G.&GC4rCC<B-4.>F.F.rF.F.&FF4rFFF4.E4D-4E.E-.&E-C.C.E-E-E-4.A-.A-.A-GF#2A4r4L4E-.FGrE.>G#r.<<B.r.rB.>>F#.r<F#FD#F8.E2&E16L8rEEE2r4AG#G2A#4r4F#4.G4E4F#.G#.&G#C#4rG#G#F#4.r2F#.F#2.r.F#4.F4D#4F.E.&EE4.EEE4.A4.AG#G2A#4r4A4EE4F#4F#4;
			`
    },
    ["악보2"]: {
        image: [2, 15], type:  "note",
        name:  '악보 "데스티니"',
        desc:  "에린을 바라보기만하는 이웨카의 안타까움이 담긴 노래의 악보",
        mml:   `
			MML@t106v15L8r16G#.ABB>C16C.&C<E.F#.&F#A.B.>D<B.BB16B16B16BAAG16GF#.r.D#16AGGA16B.G#ABB>C16C.&Cr16E.DCC<B16B.&BF#E16EB16B16B16BA16A.GGF#AG16G16E2>F#.E.<B>G.F#.&F#A.G.<A16>e16F.E.<A>F.E.<A>G.F.&F<G32>C#32E32A4.&A32r<FFF16F.<AB->CC<B-16>F.&FrB-.B-16D16E16FFFF16F.GEDDE16C.&CrG.A.FDDE16F.DEFDA16A.&ArF.A16F16G16AAAA16A.B-GF16G.&Gr4A4>E4F<FFF16F.<AB->CC<B-16>F.&F>C<A.B-16D16E16FFFF16F.EFG16A2&A16rAB-F#o1B>B<B>B<B->B-<B->B-<A>A<A>AD>D<D>D<G#>G#<G#>G#<A>A<A>A<D4>D<D4A>D<DG.>D16G4<CG>C<CF.>C16F<F<B->FB-<B-B.B16r4B.>BB.E>E<F#>F#<G#>G#<E4o4B>C16C.&Cr<F#GAAB16B.&Br4r16B16B16B16BAAG16GF#.r.D#16AGGA16B.G#ABB>C16C.&Cr16E.DCC<B16B.&Br4r16B16B16B16BA16A.GGF#AG16G16o2E>E<E>E<D>D<D>D<C>C<C>C<<B>B<B>BD>D<D>D<C>C<C>C<B->B-<B->B-<A2L32DA1.r4.r16.,
			v14r16L8D.DEG#.G.&GC.C.&CF#.F#.rG.G.&GE4E4D#4F#4r16E.ED#D4D4<<A.>AE16<AD.>D.<DG.>GD16<GCG>C<CF#4>F#<F#<B.>B.<B>E>E<E>E<D>D<D>D<C>C<C>C<<B>B<B>BD>D<D>D<C>C<C>C<<B->B-<B->B-<A2>D4>D4<DA>D4<G4>G.D16<G>DG<GC4>C.<G16C4>C4<F4>F.C16<F>CF4<<B-4>B-4<B->FB-<B-B4>B4<BB>B4C4>C.<G16C4>C4<C#4>C#.<A16C#A>C#<C#D4>D4<DA>D4<G4>G..D16<G>DG<GC4>C.<G16C4>C4<E-4>E-.<E-16DD>D<D>>v15A.G.GrGAEG.F.F4.DEFF16E.EFEGF16F16D2rAB-F#A.G.GrGAEG.F.F4FGFE.E.ED#.B.AAG#G#A16BG#.ABo1A4>A4DA>D<DG4>G<GCG>C<CF#4>F#4<<B4>B4E16>E<E16>E<F#G#>EG#<G#<A4>A4DA>D<DF4>F<FEB>E<E<A.>E16A4<B>F#B<Bo5F#.E.<B>F#.E.<B>G.F#.&F#A.G.<A16>E16F.E.<A>F.E.<A>G.F.&FL32rC#EA4.&Arr<<F#A>CE1&E4.r4.rrr,
			v14r16<L8E.F#G#<A2>D4.<F#G2>C2<F#4.AB2r16E.EF#G#.>E.&E>L4EGF#AAGL8<AG16G.&G>E.E<A.>E4D#4>F#.E.<BB.B.GB.B.&B>D#.D#.r<A.A.rA.A.rA.A.&Ar2<A.>C4r.F.A.B-.D16r4.F.F.<B-.B-16r4.>D.<B-.>C2rC.E.C.<A16r4.>A4.F2rD.D.F.C16r4.G.F.B-.C16r4E4A4A4r4.>C.<A.B-2rF.F.D2r<B-.>E-.F.D-16r4F#4C4>A.G.&GA.B-.&B->C.<F.&FE.F.&FF.E.&EF.E.&ED.<A.A.B-.><F4L2DDE-D<AB>E<B4>E4L8E-.G.CE-.E-.CE.F#.>D<B4E4E.CC.<B.>D.rE16>E.ED#D<E.G.D.G.CF#.F#.DA.F.AA.G#.&G#E4ECD#<B.B.L2>GGBAAAAG;
			`
    },
    ["악보3"]: {
        image: [2, 15], type:  "note",
        name:  '악보 "안녕"',
        desc:  "언제나 너의 뒤에서 몰래 바라봤다는 노래의 악보",
        mml:   `
			MML@t90t125>L4GFL8E-.G.C4.>C4.<FGA-2&A->C2<C4.<B16>C16DCDE-4.GF4.CD4.FE-4G4A-2&A-A-GE-<B-2&B-r<B-L16>E-FGB-v13L8o1A-rA->A-<A->A-<A->A-<B->B-<B->B-<B->B-<B-A-G>G<G>G<G>G<G>GC>C<C>C<C>C<C<B-A->A-<A->A-<A->A-<A->A-<B->B-<B->B-<B->B-<B->B-C>C<C>C<C>C<C>C<<G>G<G>G<G>G<G>G<A->A-<A->A-<A->A-<A->A-<B->B-<B->B-<B->B-<B-A-G>G<G>G<G>G<G>GC>C<C>C<C>C<C<B-A->A-<A->A-<A->A-<A->A-<B->B-<B->B-<B->B-<B->B-C>C<C>C<C>C<C>C<<G>G<G>G<G>G<G>G<A-4A-4A->A-GF4.F4FCFC4.C4C4C4<B-4.>CrC>C4<F4F>F<F>F<F4<B->B-<B->B-<B->B-<B-4>E>E<E>E<E>E<EA4A<A>A<AB>C+<A>D4D<B4>B<B>C4.C<A4>A<AG4>G<G>G<G>G<G>C4>C<C>C<C>C<C>C<F4F>F<F>F<F4<B->B-<B->B-<B->B-<B-4>E>E<E>E<E>E<EA4A<A>A<AB>C+<A>D4D<B4>B<B>C4.C<A4>A<AG4>G<G>G<G>G<G>C4>C<C>C<C>C<C>C<<B->B-<B->B-<B->B-16<B-.>B-<B->B-<B->FB-4<B-4A>A<A>A<A>A16<A.>A<A->A-<A->FA-4<A-4G>G<GA4>A<AB-4>B<B-B4>B<B>C4.>C<C>C<C>C<C4.r2.o5v14F4ACACAB-2&B-B-4.E4<G>EB-2D4<A>D<G4.L16AB>CEF4L4A8GDE.G8F>C8<A8B-.&B->D.<<L16v12C8.<B>CDEDEFGFGA>C4v14o2L8><F4F>F<F>F<F4<B->B-<B->B-<B->B-<B-4>E>E<E>E<E>E<EA4A<A>A<AB>C+<A>D4D<B4>B<B>C4.C<A4>A<AG4>G<G>G<G>G<G>C4>C<C16>C<C16>C<G16>C16<C4o6v15DEFCEF<B>EF<B-2&B-<A1&A4F1.&F1&F1r1,
			v14B-A-L8G.B-.E-4.>C4.r4C2&CF2<F2FE-FG4.GF4.CB-4.FB-4B-4>C2&C<A-GE-<B-2&B-<B-<B->B-16F16<B-o5E-rv15<B-4B-4A-GGFE-16F.r4E-FGA-GFrE-E-FGE-F4G4B-4B-rB-B-B-4B-B-B-A-G4r4FE-G4GA-GFF4r4E-FGE-E-4>E-r<B-B-B-4B-B-B-4B-4r4E-FGA-GFFE-E-E->C4<G4F4G4B-rB-B-B-4B->E-DC<B-4r4E-FGA-GFF4E-E->E-4DCC4D4G4<B->E-4D<A-A-4.A->E-4D<GG4.G>E-4D<FF4.rF4G4.>>C4<<AAAAB->C4C<B-B-AB-16AFG.&GGGGGAB-4B-B->C<AGFF4.AG4D4E4.GF4>C<AB-2&B-<B->DFB-4B-AAGFGGA4AAAAB->C4C<B-B-AB-16AFG.&GGGGGAB-4B-B->C<A>DEEF4<AGG4>FEE4<GF4>ECCD4r16D.DC<B-A4B-G2<B-4>>F4<AAA4AB-AGG4>C4<FFAAAB-AGGFF4G4E-4F4DEFF4GAA4GFFr>D<AG2&GFG>D<F4.r2.>C4<AAAAB->C4C<B-B-AB-16AFG.rGGGGAB-4B-B->C<AGFF4.AG4D4E4.GF4>C<AB-2&B-<B->DFB-4B-AAGFGGA4AAAAB->C4C<B-B-AB-16AFG.&GGGGGAB-4B-B->C<A>DEEF4<AG4.>FE4.<GF4>ECCD4r16D<F16>DC<B-A4B-G4>C2o3L4B-.A.A-.G.&GC1&C<F1.&F1&F1,
			v14<L8E-2.&E-E-1D1&D<G1>C4.<A2B-2G2F2&F>F4.<B-2&B-r2>>B-rE-2.r<B-2.rB-rB-rB-2rB-2.r>E-rE-2.rE-2.rE-rE-2.r<B-2r>B-4B-rE-2.rE-2.rE-rE-4<B-2r>Gr2B-4E-rE-2.rE-2.rE-1rF2.r>C4.A-2F1&F<E-1<L4B-.>CC.>A2<F.>F.DCr8G.&G<D.>D.&DA2F.GDE2F2B-.r16D8.D.>C.r16<F8.F2>C2.r8<F.DC.G.&G<D>D2&DA2<A.>GD<G2>F2B-.r2r8>C.r16<F8.FrA2&A.G.&G>C<AG2&G.<C.Dr2<B-.>C2D2D2>C1C.r2.o2Fo4F2C8<B->GG.&Go2Er.r>A.&A2.<D.<B2>>C8<C.<A2>G8<G>GL8GAB->C<C4r4.C16G16>C4o6L4C2<<F.>F.DC.G1D.rA2<A.>GD<G2>F2B-.r<B-.>B-.&B->C2<F.F.F.D.&D<E1r<A1.;
			`
	
    },
    ["악보4"]: {
        image: [2, 15], type:  "note",
        name:  '악보 "너무너무너무"',
        desc:  "너무너무너무 자꾸자꾸자꾸 보고 싶어지라는 염원을 담은 노래의 악보",
        mml:   `
			MML@t190v12<cegel8cegec2r2.b4ggggggr2ggggggggggggr2g4.gggbbaaggf+f+ee<bbaal4ggab>ed16el8&e.r4bbggggggr2ggggggggggggr2g4.gggbbaaggf+f+ee<bbaal4ggab>ed16el8&e.r2.f+gggg4gee4r4gggel4ere8d8egbarl8ef+f+f+f+4f+dl4drd8d8degggal8agg4r4f+ggggggee4r4gggel4ere8d8egbarl8ef+f+f+f+4f+dl4drd8d8bb+bbag8f+8f+grbggl8gggggga4a4.br1r4ggf+d4dr4ggf+d4dr4ddl4bb+bbagf+gd16b8.>bggl8ggggggl4aa.ba8r1g<c-32f+8&f+16.>d8d8rgf+d8d8rd8d8bb+bbagf+gl8<ggggggr2ggggggggggggr2g4.gggbbaaggf+f+ee<bbaal4ggab>ed16el8&e.r4bbggggggr2ggggggggggggr2g4.gggbbaaggf+f+ee<bbaal4ggab>ed16e2.&e8.,
			l16<<c&c&c&c&c&c&c&c&c&c&c&c&c&c&c&c&c&c&c&c&c&c&c&c&c&c&c&c&c&c&c&cr2l4r.v9<<e8>c.>g.c<c2cc<a.>>e.<a<a2aab.>>f+.<b<b2>bde2eeeeee8e8c2>g8c8r<c2>gc<<a2>>e8c8r<<a2aab2n30>b<b2>bde2eeeeel8ee>cgb2.g2g4c4<<a4.>>e4<a>er<a>egeb4a4c-f+a2.f+4.<bbl4c-.ebd+>d+8<d+8dac+>c+8<c+8c8.r16c>g2g2gc<<a.>>e<a8>e8r8n9e<a.>a8<<bb>>f+2l4.f+<b8b8c-ebl8>e<eeb>e4.e<e4>cgl2b.<cl4>ee<<a32>a&a16.>e32g&g16.<a<a.>a.rg1>dagf+l8<eb>e2gel4.<e>ec-8e8<c>gl4c<ccc2<a32>a&a16.>e32g&g16.<a<a8>a>e32g8&g16.<ar8g2>g8<g.<g2>>f+8d8<g<e.>>e.<eeeee8e8c.>e.c<c2cc<a.>>e.<a<a2aab.>>f+.<b<b2>bde2eeeeeec2>g8c8r<c2>gc<<a2>>e8c8r<<a2aav12l8o4bbaaggf+f+ee<bbaal4ggab>ed16e2.&e8.,
			r1.r1rv10<<b8<e8>c.b.rc2cc<a.>g.r<a2aab.>a.rc-2f+de2eeeee>e8e8<c2b8r.c2br<a2>a8r.<a2aab2>arc-2f+de2eeeeel8eer4>deer4.<b2b4r4<a>>cc<g4rgrl4>ccecr1<a.r2r.er2.dr2c8.r16c32l16.>de8c-32er4.<b2b4r4<a8>>c8c8<g4r8g32b+r8<a32>>c8&c<g32>c8&cl4<ba<bb>a2a.r1e.rb32>e8&e16.<babr>eee<c2ggr1r1f+1r1>dddddddd<c32l8>e&e16.bc-g4g4ggggggl4aa.ba8r1g<g>d8d8rgf+d8d8rdbb+bbagf+gl8ccccccl4r<c>c8c8<cc<a.>g8>c8c8r<<an36aab.>a.rc-2f+de2eeeeel8>>bbggggggr4<<c4>>ggggggggggggl4rn21g.g8g8g8o0b2n30>b<b2>bde2eeeee2;
		`
    },
    ["악보5"]: {
        image: [2, 15], type:  "note",
        name:  '악보 "픽미"',
        desc:  "많은 사람들 중에서 나를 뽑아 달라는 내용의 노래의 악보",
        mml:   `
			MML@t90v15L32E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&E&Et128v14L8rEo2E>ErErErErErErErE<E>ErErErErErErErE<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<Er2.rE>E<E>E<E>E<E>E<E>E<E>E<E>E<E16B16>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E16B16>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E16B16>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E16B16>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E16B16>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E16B16>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E16B16>E<E>E<E>E<E>E<E>E<E>E<E16>E.<ErE4L8EEEEEEEE<AAAABBL16B>B<B>BL8EEEEEEEE<AAAABBL16B>B<B>BE8E8E>E<E>E<E8E8E>E<E>E<<A>A<A>A<A>A<A>A<B>B<B>BB4E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<r1L8E>E<E>E<E>E<E16B16>E<E>E<E>E<E>E<E16B16>E<E>E<E>E<E>E<E16B16>E<E>E<E>E<E>ErE<E>E<E>E<E>E<E16B16>E<E>E<E>E<E>E<E16B16>E<E>E<E>E<E>E<E16B16>Er1<F#F#GGG#G#AAAAA#A#BB>CC#DD#EFF#GG#Ar1L4<EEEEEEEEEEEEEEEEL8E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<L16E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<r1L8E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<L16E>E<E>E<E>E<E>E<L32E>E<E>E<E>E<E>E<E>E<E>E<E>E<E>E<L8E,
			r1.v15L8BG#BG#BG#BG#BG#BG#BG#BG#BG#BG#BG#BG#BG#BG#BG#BG#BG#BG#BG#BG#BG#BG#BG#BG#BG#BG#BG#BG#r1rBBBBBAG#AB4Br4.ErBBBBBAG#AB4Br4.ErBBBBBAG#AB4BrBABG#4B4BB4BrB4BBBB4rBBBBBAG#AB4Br4.ErBBBBBAG#AB4Br4.ErBBBBBAG#AB4B4BABG#4B4BB4BrB4BBBB4E4F#4G#EEA4A4G#ABB4E4F#4G#EEA4A4G#ABB4E4F#4G#EEA4A4G#A4BG#G#2rBrBrEEEG#EE4BG#BG#EF#G#4BG#BG#EF#G#4BG#BG#BG#BG#BG#BG#EF#G#4BG#BG#EF#G#4BG#BG#EF#G#4BG#BG#BG#BG#rBBAA4BG#v14C#C#DDD#D#EEEEFFF#F#GG#AA#B>CC#DD#Ev15r<BBAA4B4E4E4E.E.ErE4EE.E.&EE4E4E.E.E>E4E4F#4EF#<E4E4E.E.ErE4EE.E.&EE4E4E.E.ErBBBA4B4E>E<E>E<E.>E.<ErEE>E<E.>E.<EE>E<E>E<E.>E.<E>E4E4F#4EF#<E>E<F>F<F#.>G.<GG#>G#<A>A<A#.>B.<B>C>C<C#>C#<D.>D#.<D#r<BBBA4B4L4G#rG#rG#rv13G#rv11G#rv9G#rv7G#rv5G#r2.,
			r1.v14r1.rE8E8r1.r.E8r1.rE8E8r1.r1r.E8r1.r.E8r1.r.E8r2r.E8r2r.E8r2r.E8r.E8r.E8r.E8r.E8r.E8r.E8r.E8r2r.E8r.E8r.E8r.E8r.E8r.E8r.E8r2L8r>ErErErErErErErErErErErErErErErErErErErErErErErErErErErEr1<rErErErErErErErErErErErErErErErErErErErErErErErErErErErEr1v15L4G#rArBr>C#rL8DD#EFF#GG#Ar1<<B4B4B.B.BrB4BB.B.&BB4B4B.B.B>L4GGAB<BBL8B.B.BrB4BB.B.&BB4B4B.B.Br1r2r.>E.r2r.rE.r2r.rE.rG4G4A4B>Cr2F#.<G.r2r>A#.<B.r2r>>D.<D#.rr1;
		`
    },
    ["골드"]:        { image: [1, 14], effect: "gold", dropSound: "drop_gold.wav", dropSoundImm: true, getSound: "get_gold.wav", bundle: "gold" },
    ["물"]:         { image: [1, 1], type: "potion", desc: "투명한 액체이다.", uname: "투명한 물약" },
    ["파이어볼트 스크롤"]: { image: [1, 1], type: "scroll", desc: "투명한 액체이다.", uname: '스크롤:"제오스라"' },
    ["파이어볼트 지팡이"]: { image: [1, 1], type: "melee", desc: "투명한 액체이다.", uname: "커브가 새겨진 지팡이" },
    ["파이어볼트 마법책"]: { image: [1, 1], type: "book", desc: "투명한 액체이다.", uname: "화려한 커버의 책" },

};


Item.texture = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "Items.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } );
Item.textureFiltered = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "Items.png", true, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } );
Item.textureEquipSlot = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "equipSlot.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } );
Item.width = 16;
Item.height = 24;
Item.tileWidth = 16;
Item.tileHeight = 24;
Item.perRow = Math.floor( Item.texture.width / Item.tileWidth );
Item.rarityColor = [
    0xffffff,  	// 회색
    0x00a651,	// 녹색
    0x00aeef,	// 파랑
    0x9e005d,	// 보라색
    0xfff200,	// 노랑색
];

Item.typeToIcon = {
    ammor:      [1, 1],
    helm:       [2, 1],
    boots:      [3, 1],
    pants:      [4, 1],
    melee:      [5, 1],
    ranged:     [6, 1],
    shield:     [7, 1],
    belt:       [8, 1],
    accessory:  [9, 1],
    ring:       [10, 1],
    pickaxe:    [11, 1],
    instrument: [12, 1],
    note:       [13, 1],
    food:       [12, 1],
    potion:     [13, 1],
    scroll:     [14, 1],
    key:        [15, 1],
    book:       [16, 1],
    usable:     [1, 2],
    etc:        [2, 2],
    hand:       [3, 2],
};

Item.typeEquipMax = {
    ammor:      1,
    helm:       1,
    boots:      1,
    pants:      1,
    melee:      1,
    ranged:     1,
    shield:     1,
    belt:       1,
    accessory:  1,
    ring:       2,
    pickaxe:    1,
    instrument: 1,
    note:       1,
};



Item.gold = "골드";
Item.bareHand = "맨손";




Item.validIdList = [];
for ( const k in Item.property ) {
    const v = Item.property[k];

    if ( k ) {
        Item.validIdList.push( k );
    }
}



/***/ }),

/***/ "./games/Avalonika/src/entity/monster.js":
/*!***********************************************!*\
  !*** ./games/Avalonika/src/entity/monster.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Monster)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _world_gameMap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../world/gameMap */ "./games/Avalonika/src/world/gameMap.js");
/* harmony import */ var _effect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../effect */ "./games/Avalonika/src/effect.js");
/* harmony import */ var _world_elemental__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../world/elemental */ "./games/Avalonika/src/world/elemental.js");
/* harmony import */ var _lib_iconPack__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @lib/iconPack */ "./engine/src/lib/iconPack.js");
/* harmony import */ var _lib_mabiMML__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @lib/mabiMML */ "./engine/src/lib/mabiMML.js");
/* harmony import */ var _lib_random__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @lib/random */ "./engine/src/lib/random.js");
/* harmony import */ var _lib_colors__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @lib/colors */ "./engine/src/lib/colors.js");
/* harmony import */ var _creature__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./creature */ "./games/Avalonika/src/entity/creature.js");
/* harmony import */ var _entity__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./entity */ "./games/Avalonika/src/entity/entity.js");
/* harmony import */ var _item__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./item */ "./games/Avalonika/src/entity/item.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../global */ "./games/Avalonika/src/global.js");

















// 몬스터를 상속한 클래스들이 모두 AI를 사용한다.
const AI = {};

/**
 * @this Monster
 *
 * @param {Entity} target
 * @param {number} dist
 */
function decideFollow( target, dist ) {
    // 난 따라다니는 중이다
    const followDist = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.getDistanceBetweenEntities( this, this.follow );

    if ( followDist > this.senseDistance ) {
        // 너무 머니까 정확히 따라가야해
        console.log( this.mode );

        if ( this.mode != "followExatly" ) {
            _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.addLog( "%s{가} %s{를} 찾아 나섰다.", this.getName(), this.follow.getName() );
        }

        this.mode = "followExatly";
    } else if ( followDist > this.senseDistance * 0.5 ) {
        // 너무 머니까 따라가야해
        if ( this.mode != "followFast" ) {
            _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.addLog( "%s{가} %s{를} 따라온다.", this.getName(), this.follow.getName() );
        }

        this.mode = "followFast";
    } else if ( followDist > 1 ) {
        // 따라가야해
        this.mode = "followSlow";
    } else {
        // 아니면 방황
        this.mode = "roaming";
    }
}

/**
 *
 *
 * @this Monster
 * @param {Entity} target
 * @param {number} dist
 */
function decideSchedule( target, dist ) {
    const sc = this.getSchdule();
    let place = this.places[sc.place];

    if ( !place ) {
        // 못찾았으면 월드에서 찾아본다
        place = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.places[sc.place];
    }

    if ( !place ) {
        console.log( this.places );
        console.log( "장소를 찾을 수가 없다.", sc.place );
    }

    if ( this.mode != "moveToPlace" ) {
        const dist = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.getDistance( this.tileX, this.tileY, place.x, place.y );

        if ( dist <= ( sc.radius || this.senseDistance * 0.5 ) && this.canSee( place.x, place.y )[0] ) {
            // 도착
            this.mode = sc.action;
        } else {
            console.log( sc.place, "로 이동시작" );
            this.mode = "moveToPlace";

            if ( this.path == null || this.path.length == 0 ) {
                this.path = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.pathManager.findPath( this.tileX, this.tileY, place.x, place.y, true );
            }
        }
    }
}


class Monster extends _creature__WEBPACK_IMPORTED_MODULE_8__["default"] {
    constructor( name, tileX, tileY, options ) {
        super( name, tileX, tileY, options );
        this.isMonster = true;
        console.assert( Monster.property[name],`${name}이라는 몬스터의 정보가 없다.` );
        this.fillProperties( Monster.property, name );
        const pr = this.property;

        this.senseDistance = pr.senseDistance || 6;
        this.weaponRange = pr.weaponRange || 1;
        this.AI = pr.AI || "default";
        this.hpMax = pr.hp || 1;
        this.hp = this.hpMax;
        this.texture = _creature__WEBPACK_IMPORTED_MODULE_8__["default"].texture;
        this.tileWidth = _creature__WEBPACK_IMPORTED_MODULE_8__["default"].tileWidth;
        this.tileHeight = _creature__WEBPACK_IMPORTED_MODULE_8__["default"].tileHeight;
        this.mode = undefined;

        this.postInit( Monster );
    }

    getWeaponImage( flipX,flipY ) {
        return null;
    }


    processAI() {
        if ( this.target && !this.target.addedToWorld ) {
            this.target = null;
        }

        if ( this.follow && !this.follow.addedToWorld ) {
            this.follow = null;
        }

        const dist = this.target && _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.getDistanceBetweenEntities( this, this.target );
        // 타겟과 거리를 미리 계산해서 넣어준다.
        const mode = this.mode;

        AI[this.AI]( this, this.target, dist );
        this.lastMode = mode;
    }

    calculateDamage() {
        const [min, max, bal, bi, min2, max2, bal2, bi2] = _item__WEBPACK_IMPORTED_MODULE_10__["default"].parseDamageString( this.property.attack );
        const damage = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.randomGenerator.getDamage( bal, bi, min, max );

        return damage;
    }

    stop() {
		
    }

    attack( cr, dmg ) {
        this.stopPreviousAction( "attack" );
        const { x: x1, y: y1 } = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.tileCenterToWorld( this.tileX, this.tileY );
        const { x: x2, y: y2 } = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.tileCenterToWorld( cr.tileX, cr.tileY );
        const [dur, hitDur] = new _effect__WEBPACK_IMPORTED_MODULE_2__["default"]( "claw", x1, y1, x2, y2, true, this.getWeaponImage( true, true ), this ).getDuration();

        cr.stop();
        cr.damage( dmg, this, x1, y1, hitDur || dur );
        _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.entityManager.wait( 300 );
    }

    death( dmg, attacker, fromX, fromY, hitDur, sound ) {
        hitDur = hitDur || 0;
        //dmg는 이미 hp에 적용이 된 상태
        this.enableDefaultAnimation( false );
        this.shadowMesh.removeFromParent();
        this.detachFromWorld();
        new _effect__WEBPACK_IMPORTED_MODULE_2__["default"]( "death", fromX, fromY, this.getX(), this.getY(), this, attacker, hitDur );
        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( hitDur, () => {
            this.stopPreviousAction( "death" );
            this.enableDefaultAnimation( false );
            _global__WEBPACK_IMPORTED_MODULE_11__["default"]["interface"].addLog( "%s{를} 공격하여 <yellow>%d</yellow> 대미지!", this.getName(), dmg );
            _global__WEBPACK_IMPORTED_MODULE_11__["default"]["interface"].addLog( "%s{를} 쓰러뜨렸다!", this.getName() );
            this.refreshGauge();
            const p = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Particles();

            p.setTexture( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "Blood.png", false ) );
            console.log( "사망", this.getPosition() );

            for ( let i = 1; i <= 10; i++ ) {
                //p.addParticles(0,0,50,90,60,10,10);
                const angle = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 0,359 );
                const speed = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 1,6 );
                let x, y = this.getPosition();

                //x = x; // GLOBAL.world.viewWidth/2;
                //y = y; // GLOBAL.world.viewHeight/2;
                p.addParticles( [
                    {
                        x:            x, y:            y, size:         _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 4, 30 ),//this.getX(),y=this.getY(),size=20,
                        angle:        angle,
                        ttl:          60 + _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 1,100 ),
                        speedX:       Math.cos( angle ) * speed,
                        speedY:       Math.sin( angle ) * speed,
                        speedAngular: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 1,30 ) - 15,
                        decay:        0.5,
                        color:        0x400000,
                        alpha:        1.0,
                    }
                ]
                );
            }

            _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.floorLayer.addChild( p );
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( sound || "sound/damage_0.wav" );
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/finish_1.wav" );
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( 5000, () => {
                p.removeFromParent();
                this.removeFromWorld();
            } );
        } );

        if ( this.property.explosion ) {
            if ( this.property.explosion == "water" ) {
                _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/explosion_water.wav" );
                new _effect__WEBPACK_IMPORTED_MODULE_2__["default"]( "boom", this.getX(), this.getY(), 20, 350, hitDur, 0x0000ff );
                _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.elemental.addElemental( _world_elemental__WEBPACK_IMPORTED_MODULE_3__["default"].WATER, this.tileX, this.tileY, 10 );
            } else if ( this.property.explosion == "fire" ) {
                _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/explosion_fire.wav" );
                new _effect__WEBPACK_IMPORTED_MODULE_2__["default"]( "boom", this.getX(), this.getY(), 50, 300, hitDur, 0xff9000 );
                _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.elemental.addElemental( _world_elemental__WEBPACK_IMPORTED_MODULE_3__["default"].FIRE, this.tileX, this.tileY, 10 );
            } else if ( this.property.explosion == "poison" ) {
                _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/explosion_gas.wav" );
                new _effect__WEBPACK_IMPORTED_MODULE_2__["default"]( "boom", this.getX(), this.getY(), 30, 400, hitDur, 0xff00ff );
                _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.elemental.addElemental( _world_elemental__WEBPACK_IMPORTED_MODULE_3__["default"].POISON, this.tileX, this.tileY, 10 );
            }
        }

        // 이걸 오버라이드해서 쓴다
        this.afterDeath( dmg, attacker, fromX, fromY, hitDur, sound );
    }

    afterDeath( dmg, attacker, fromX, fromY, hitDur, sound ) {
        _global__WEBPACK_IMPORTED_MODULE_11__["default"].player.exp = _global__WEBPACK_IMPORTED_MODULE_11__["default"].player.exp + 1;
        const numOfDrop = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.random( 1,4 );
        const floorList = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.pathManager.getSplashFloor( this.tileX, this.tileY, numOfDrop );

        for ( let i = 0; i < numOfDrop; i++ ) {
            _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.entityManager.addEntity( new _item__WEBPACK_IMPORTED_MODULE_10__["default"]( _item__WEBPACK_IMPORTED_MODULE_10__["default"].gold, floorList[i].x, floorList[i].y, {
                amount:    _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.random( 1,30 ),
                drop:      true, dropX:     this.tileX, dropY:     this.tileY,
                dropDelay: ( numOfDrop - i ) * 100 + hitDur,
            } ) );
        }

        if ( _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.random( 1,3 ) == 1 ) {
            _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.entityManager.addEntity(
                new _item__WEBPACK_IMPORTED_MODULE_10__["default"]( _item__WEBPACK_IMPORTED_MODULE_10__["default"].validIdList[_global__WEBPACK_IMPORTED_MODULE_11__["default"].world.random( 0,_item__WEBPACK_IMPORTED_MODULE_10__["default"].validIdList.length - 1 )], this.tileX, this.tileY, {
                    drop:      true, dropX:     this.tileX, dropY:     this.tileY,
                    dropDelay: 100 + hitDur,
                } ) );
        }
    }


    damage( dmg, attacker, fromX, fromY, hitDur, sound ) {
        hitDur = hitDur || 0;
        this.hp = this.hp - dmg;

        if ( this.hp <= 0 ) {
            this.death( dmg, attacker, fromX, fromY, hitDur, sound );
        } else {
            let mood;

            if ( !this.target ) {
                this.target = attacker;
                mood = "!";
            } else if ( _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.random( 1,Math.floor( this.hp / 10 ) + 1 ) == 1 ) {
                this.target = attacker;
            }

            new _effect__WEBPACK_IMPORTED_MODULE_2__["default"]( "damage", fromX, fromY, this.getX(), this.getY(), this, attacker, hitDur );
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( hitDur, () => {
                this.showMood( mood );
                this.stopPreviousAction( "damage" );
                _global__WEBPACK_IMPORTED_MODULE_11__["default"]["interface"].addLog( "%s{를} 공격하여 <yellow>%d</yellow> 대미지!", this.getName(), dmg );

                if ( attacker == this.follow ) {
                    _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.addLog( "%s{가} %s의 공격을 받고 화가 났다!", this.getName(), attacker.getName() );
                }

                this.refreshGauge();

                if ( sound ) {
                    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/" + sound );
                } else {
                    console.log( "사운드 지정 안됨" );
                    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( sound || "sound/damage_0.wav" );
                }
            } );
        }
    }


    //---------------------------------------------------------------

    getSchdule( hour, min ) {
        if ( this.property.schedule == null ) {
            return;
        }

        let ti;

        if ( hour ) {
            ti = { hour: hour, min: min || 0 };
        } else {
            ti = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.getDateTime();
        }

        let sc;

        console.log( `게임 내의 시간 ${ti.hour}시 ${ti.min}분` );

        for ( let i = this.property.schedule.length - 1; i >= 0; i-- ) {
            const v = this.property.schedule[i];

            if ( v.hour < ti.hour || ( v.hour == ti.hour && v.min <= ti.min ) ) {
                // 약속시간
                sc = v;
                console.log( "스케쥴 결정", sc.hour, sc.min, "부터", sc.place, "에 있어야 한다." );
                break;
            }
        }

        if ( sc == null ) {
            sc = this.property.schedule[this.property.schedule.length - 1];

            if ( sc == null ) {
                console.log( "스케쥴을 찾을 수가 없다. 이건 데이터를 잘못 작성한 것임." );
            }
        }

        return sc;
    }


    // 가능한 몬스터 목록
    static pickMonsters( attrib ) {
        const t = [];

        for ( const k in Monster.property ) {
            const v = Monster.property[k];

            if ( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.filterAttrib( attrib, v.whiteAttrib, v.blackAttrib ) ) {
                t.push( k );
            }
        }

        return t;
    }

    static parseMonsterList( str ) {
        const t = str.split( "," );
        let mustCount = 0;

        for ( const i in t ) {
            const v = t[i];
            //let [,type, name] = string.match(v, "([%a%?]?)(.*)");
            const [, type, name] = /([a-zA-Z?]?)(.*)/.exec( v );

            t[i] = { name: name, type: ( type == "" ? null : type ) };

            if ( type != "?" ) {
                mustCount = mustCount + 1;
            }
        }

        return [t, mustCount];
    }
}

//---------------------------------------------------------------


AI.trackFast = function ( self, target, dist, dir ) {
    dir = dir || 1;
    // 매턴 추적
    let [ax, ay] = [Math.sign( target.tileX - self.tileX ), Math.sign( target.tileY - self.tileY )];
    const mpH = self.getPropertyRel( ax, 0 );
    const cpH = self.getEntityPropertyRel( ax, 0 );
    const mpV = self.getPropertyRel( 0, ay );
    const cpV = self.getEntityPropertyRel( 0, ay );

    if ( mpH.wall > 0 || cpH ) { // 가야되는데 막힌 경우
        if ( ay == 0 ) { // 같은 줄이면 랜덤하게 우회
            ay = ( _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.random( 1,2 ) - 1 ) * 2 - 1;
        }
    }

    if ( mpV.wall > 0 || cpV ) {
        if ( ax == 0 ) { // 같은 줄이면 랜덤하게 우회
            ax = ( _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.random( 1,2 ) - 1 ) * 2 - 1;
        }
    }

    if ( ax == 0 || ay == 0 ) {
        //
    } else {
        if ( _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.random( 1,2 ) == 1 ) {
            ax = 0;
        } else {
            ay = 0;
        }
    }

    const mp = self.getPropertyRel( ax * dir, ay * dir );
    const cp = self.getEntityPropertyRel( ax * dir, ay * dir );

    if ( mp.wall > 0 || cp ) {
        //log("move",ax,ay,"blocked");
    } else {
        self.moveToRel( ax * dir, ay * dir );
    }
};

AI.trackSlow = function( self,target,dist,dir ) {
    // 좀 천천히 트랙함
    if ( _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.random( 1,4 ) > 1 ) {
        AI.trackFast( self,target,dist,dir );
    }
};

AI.trackExactly = function( self,target,dist,dir ) {
    if ( dist <= self.senseDistance && self.canSee( target.tileX, target.tileY ) ) {
        // 보이는 거리이므로 여기까지
    } else {
        if ( !self.path || self.path.length == 0 ) {
            self.path = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.pathManager.findPath( self.tileX,self.tileY,target.tileX,target.tileY,true );
        }

        if ( self.path && self.path.length > 0 ) {
            const [tx, ty] = [self.path[0].x, self.path[0].y];

            self.path.shift();

            if ( self.path.length == 0 ) {
                self.path = null;
            }

            if ( !self.moveTo( tx, ty ) ) {
                // 못찾음
                console.log( self.getName(), "길이 막혔음", target.getName() );
                self.path = null;
            }
        } else {
            // 이동 못함
            console.log( self.getName(),"타겟에 이르는 길을 못찾음",target.getName() );
        }
    }
};

AI.followFast = function( self,target,dist,dir ) {
    AI.trackFast( self,self.follow,dist,dir );
};

AI.followSlow = function( self,target,dist,dir ) {
    if ( _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.random( 1,4 ) > 1 ) {
        AI.trackFast( self,self.follow,dist,dir );
    }
};

AI.followExatly = function( self,target,dist,dir ) {
    dist = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.getDistanceBetweenEntities( self,self.follow );
    AI.trackExactly( self,self.follow,dist,dir );
};

AI.retreatSlow = function( self,target,dist ) {
    // trackSlow의 반대
    return AI.trackSlow( self,target,dist,-1 );
};

AI.retreatFast = function( self,target,dist ) {
    // trackFast의 반대
    return AI.trackFast( self,target,dist,-1 );
};

AI.moveToPlace = function( self,target,dist ) {
    if ( self.path && self.path.length > 0 ) {
        // 이동한다.
        const [tx, ty] = [self.path[0].x, self.path[0].y];

        self.path.shift();

        if ( self.path.length == 0 ) {
            self.path = null;
        }

        if ( !self.moveTo( tx, ty ) ) {
            // 이동을 못하면. 플레이어라든가 프랍이라든가 각종 여러 이유로 못감
            console.log( self.getName(), "길이 막혔음" );
            self.path = null;
        }
    } else {
        // 한번 더 디사이드를 불러주면 action을 수행할 것이다.
        self.mode = null;
        decideSchedule.call( self,target,dist );

        if ( !self.mode ) {
            self.mode = "roaming";
        }

        console.log( self.getName(),"path가 끝났음. 다음은 ",self.mode );
    }
};

AI.roaming = function( self,target,dist ) {
    // 의미 없이 돌아 다님
    // 벽이 있으면 그냥 안감
    const [ax,ay] = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.dirToOffset( _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.random( 1,4 ) );
    const mp = self.getPropertyRel( ax,ay );
    const cr = self.getEntityPropertyRel( ax, ay );

    if ( mp.wall > 0 || cr ) {
    } else {
        self.moveToRel( ax,ay );
    }
};
	
AI.stop = function( self,target,dist ) {
    // 아무 것도 안함
};

AI.attack = function( self,target,dist ) {
    // 그냥 적을 때림
    self.attack( target,self.calculateDamage() );
};

AI.searchTarget = function( self,target,dist ) {
    // 타겟을 수색
    AI.roaming( self,target,dist );
};

AI.sleep = function( self,target,dist ) {
    if ( self.lastMode == self.mode ) {
        return;
    }

    self.enableDefaultAnimation( false );
    //self.changeImage(14,23);
    const timer = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer( 1000 );

    timer.start();
    timer.on( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.TIMER, () => {
        const b = new _lib_iconPack__WEBPACK_IMPORTED_MODULE_4__["default"]( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "fx.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ), 11, 4, 16, 24 );
        const mc = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.MovieClip( [
            [0, 60, b, { y: [-4, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( -30, -15 ), "outCubic"], scaleX: [0.2, 1], scaleY: [0.2, 1] }],
            [50, 60, b, { alpha: [1, 0, "outCubic"] }],
        ] );

        self.addChild( mc );
        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( 1000, () => {
            mc.removeFromParent();
        } );
    } );
    self.once( "stopAction", () => {
        timer.stop();
    } );
};

AI.shop = function( self,target,dist ) {
    AI.roaming( self,target,dist );
};

AI.playMusic = function( self,target,dist ) {
    if ( self.lastMode == self.mode ) {
        return;
    }

    _global__WEBPACK_IMPORTED_MODULE_11__["default"]["interface"].addLog( "%s{는} 노래를 부르기 시작했다.",self.getName() );
    self.enableDefaultAnimation( false );
    //self.changeImage(1,5);
    const instrument = "sound/mml_celtic-harp-a4.wav";
    const ahchoo = `
	MML@t128v15>>L4F2E2D.L8C16<B-16>C<B-AGG>C<F2ECD2<CDDD16E16v14o1G>GL16>EFGArGD<B-GD<B-GL8>C2C2rA.length>DEFA>C4L16rv15FG>C<FG>L32C.<C.FG>CFG>C<CFG>CFG>C2&C8&C&C2L8ro4FF4v14o1B-4>B-<B-B->B-rC4.>C<CrCB-4<A4>A<AA4>A4D4>D<DrD>D4<<B-4>B-<B-B->B-rC4.>C<CrC>C4<C4.length>C#<CC.length4.length>C#<D4>D4<AD>D<D4<B4>B<BB4>B4<B-4>B-<B-B-4>B-4<A4>A<AA4>A4D4>D<DD4>D4<<G>G<GA4A>A4<B->B-<B-B4B>B4C4>C<GCG>C<Cr>C<C4r4>C<C<B-4B-4>C4C4D-4D-A->E-4<E-.<A-.>A-<A-4A->A-<A-4A->A-<A-4A->A-<A-4G>G<G4G>G<G>C4>C<C>C<C>C<C>C<F>F<F>F<F>F<FE-4>E-<E->E-<E->E-<E-D4>D<DF4.length>F#<FG4.length>G<G-4F4<B-.A-.>A-<A-4A->A-<A-4A->A-<A-4A->A-<A-4G>G<G4G>G<G>C4>C<C>C<C>C<C>C<F>F<F>F<F>F<FE-4>E-<E->E-<E->E-<E-D4>D<DF4.length>F#<FF4.length>F<B->B-C4<B4v15o5C4C.length#>C4.length<<EEEEDD.length#>CC.length#<BBA16B.length.&BB>B<BAB.length>CDDC.lengthC.length16.length<G#.GG#>C16.length<B.A4rAGAB16.length>C#.&Cr4.CD.length.lengthE4EEED.length#<A#>DC.length4.length<BB4A4B.length.>C#.&C#<G#.G16rEEEED.lengthD.length#>CC.length#<BBA16B.length.&BB.B16BAB.length>CDDC.lengthC.length16.length<G#.GG#>C16.length<B.AA.A16AGAB16.length>C#.&CrC.lengthC.lengthC.lengthD.lengthE4EEED.length#<A#>DC.length4.length<BB4B4B4t76L16>>C#.<C#.FB.length.<B.>EA.<A.>EL32o3rFA.length>>CG2.length.&G#&G16.o2E.length.B.>EF#.G16.length&G64.length&G2.length.&G2.length.,
	v14>B-2G2F.r.rCr2<GF2r2v15F2E2D2E.E16F16G2F.E8C1.&&C2L8rCC4rEEFF4rEF4A4E4F4r4GFFEEDDCC4G4F4rEEFF4rEF4A4E4F4rB-B-B-B-AAGGFF4EEF4A4A.A16AGF16G16G4rEEEG>DC4.C.C16C<B-AG4AF4.AAAF4.G4.rF16G16AGFG4A4B-4.r4AGFG4.r2.F4E4F4G4A-4G4A-4B-.>C.&C<G.G16rE-E-E-E-DD>CC<B-B-A16B-.&B-B-.B-16B-AB->CD-D-CC16<G.FG.length>C16<B-.A-A-.A-16A-GA-B-16>C.&C<A-.A-16r>CDE-4E-E-E-D<A>DC4<B-B-4A-4B-.>C.&C<G.G16rE-E-E-E-DD>CC<B-B-A16B-.&B-B-.B-16B-AB->CD-D-CC16<G.FG.length>C16<B-.A-A-.A-16A-GA-B-16>C.&CrCCCDE-4E-E-E-D<A>DC4<B-B-2B.>C16v14L4o2A1A1G.length1.length>C#<CC.lengthC.length8.length>C16.length<F8.FF.length.lengthF.length8F.length8EEEE8E8D.length#>L8D#<DG4.length>G<GG4.length>G#<G4F4.length<B.A.>A<A4A>A<A4A>A<A4A>A<A4G#>G#<G4G.length#>G#<G#>C4.length>C#<C#>C#<C#>C#<C#>C#<F#>F#<F#>F#<F#>F#<FE4.length>E<E>E<E>E<ED4.length>D#<DG4.length>G<GF4F.lengthF.length4BF.length#<B4L16>>A.>E.A<G#.>E.F#<F#.>C#.E<<B1L32r8r.r.>>Et54<B>GB.length>E>E1&E4.,
	v14<B-1C1<A2>F2<B->F8B-.&B-B-2B-2F2A2<D1&D1&D1L8rDD4>>rC2.CrC4CC4C4rC2.ArB-4AD4C4rC2.CrC4CC4C4rE2.DD4C4C2F2rD4E4.G.G16r>D4<G4.G4r>CCF4.F.F16rFEC<D4.E2rD4.D2rF4.F4DD<B-r1L4B-B-B-B->D-D-D-L8D-.E-.&E-C4rGGF4.F.F.rF.F.&FF.F.FFF4.E4F4E.E-.&E-C4rCCC4.E-4rA-GF2L4ArF.G.length-E-L8F.G.&GC4rCC<B-4.>F.F.rF.F.&FF4rFFF4.E4D-4E.E-.&E-C.C.E-E-E-4.A-.A-.A-GF2A4r4L4E.length-.FGrE.>Gr.length.<<B.r.rB.>>F#.r<FFD.lengthF8.E2.length&E16L8rEEE2r4AGG2A.length4r4F.length4.G4E4F.length#.G#.&GC.length4rG.lengthG.lengthF.length4.r2F.length#.F2.r.length.F4.F4D4F.length.length.E.&EE4.EEE4.A4.AGG2A.length4r4A4EE4F.length4F.length4.length;
	`;

    const mml = new _lib_mabiMML__WEBPACK_IMPORTED_MODULE_5__["default"]( ahchoo,instrument );

    self.commandFollower( "dance",{ mml: mml } );
    const { x, y } = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.worldToTile( _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.viewX,_global__WEBPACK_IMPORTED_MODULE_11__["default"].world.viewY );

    dist = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.getDistance( x,y,self.tileX,self.tileY );
    mml.setVolume( 0.5 - _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.clamp( dist / 16,0,1 ) * 0.5 );
    mml.play();
    mml.on( "note", () => {
        self.__animationTick = ( self.__animationTick + 1 ) % 2;
        self.changeImage( self.imageCol, self.imageRow + self.__animationTick );
        const b = new _lib_iconPack__WEBPACK_IMPORTED_MODULE_4__["default"]( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "fx.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ), _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 9, 10 ), 4, 16, 24 );
        const mc = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.MovieClip( [
            [0, 60, b, { y: [-2, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( -30, -15 ), "outBack"], x: [7, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( -5, 20 ), "inOutSine"] }],
            [50, 60, b, { alpha: [1, 0, "outCubic"] }],
        ] );

        self.addChild( mc );
        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( 1000, () => {
            mc.removeFromParent();
        } );
    } );

    // 거리가 멀면 소리를 줄인다
    function onViewChanged( e ) {
        const { x, y } = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.worldToTile( e.viewX,e.viewY );
        const dist = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.getDistance( x,y,self.tileX,self.tileY );

        mml.setVolume( 0.5 - _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.clamp( dist / 16,0,1 ) * 0.5 );
    }

    _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.on( "viewChanged",onViewChanged );
    mml.on( "complete", () => {
        _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.removeEventListener( "viewChanged", onViewChanged );
    } );
    self.once( "stopAction", () => {
        mml.stop();
        _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.removeEventListener( "viewChanged", onViewChanged );
    } );
};


//---------------------------------------------------------------
// 기본 AI;
//---------------------------------------------------------------

AI.default = function( self,target,dist,dir ) {
    if ( !target ) {
        // 난 아직 타겟이 없어
        const t = self.searchTarget();

        if ( t ) {
            const [relation, target] = t;

            if ( relation == "f" ) {
                self.showMood( "!" );
                self.target = target;
                self.mode = "trackSlow";
                _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.addLog( "%s{가} %s에게 적대감을 드러냈다!", self.getName(), self.target.getName() );
            } else if ( relation == "F" ) {
                self.showMood( "!" );
                self.target = target;
                self.mode = "trackFast";
                _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.addLog( "%s{가} %s에게 강한 적대감을 드러냈다!", self.getName(), self.target.getName() );
            } else if ( relation == "r" ) {
                self.showMood( "fear" );
                self.target = target;
                self.mode = "retreatSlow";
                _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.addLog( "%s{가} %s{를} 보고 뒷걸음질치기 시작했다!", self.getName(), self.target.getName() );
            } else if ( relation == "R" ) {
                self.showMood( "fear" );
                self.target = target;
                self.mode = "retreatFast";
                _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.addLog( "%s{가} %s{를} 보고 도망치기 시작했다!", self.getName(), self.target.getName() );
            } else if ( relation == "=" ) {
                // 동족
            } else {
            }
        }

        if ( !self.target ) {
            if ( self.follow ) {
                decideFollow.call( self, target, dist );
            } else if ( self.property.schedule ) {
                decideSchedule.call( self, target, dist );
            }
        }

        if ( !self.mode ) {
            console.log( "아무것도 결정되지 않아서 로밍" );
            self.mode = "roaming";
        }
    } else {
        // 타겟이 있어
        if ( self.mode == "searchTarget" ) {
            // 경계
            if ( dist <= self.senseDistance && self.canSee( target.tileX, self.tileY ) ) {
                if ( target == _global__WEBPACK_IMPORTED_MODULE_11__["default"].player ) {
                    self.showMood( "!" );
                    _global__WEBPACK_IMPORTED_MODULE_11__["default"]["interface"].addLog( "%s{가} %s{를} 발견했다!", target.getName(), self.getName() );
                }

                self.mode = "trackFast";
            } else if ( _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.random( 1,20 ) == 1 ) {
                self.target = null;
                self.mode = "roaming";
            }
        } else if ( dist >= self.senseDistance * 1.5 ) {
            // 느끼는 거리의 150% 보다 멀어지면 놓친다.
            if ( target == _global__WEBPACK_IMPORTED_MODULE_11__["default"].player ) {
                _global__WEBPACK_IMPORTED_MODULE_11__["default"]["interface"].addLog( "%s{는} %s의 추적에서 벗어났다.", target.getName(), self.getName() );
            }

            self.mode = "searchTarget";
        } else if ( dist <= self.weaponRange ) {
            // 공격하자
            if ( self.mode == "retreatFast" && _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.random( 1,6 ) == 1 ) {
                self.mode = "attack";
            } else if ( self.mode == "retreatSlow" && _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.random( 1,3 ) == 1 ) {
                self.mode = "attack";
            } else {
                self.mode = "attack";
            }
        } else if ( !self.canSee( target.tileX, target.tileY ) ) {
            const dice = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.random( 1,10 );

            if ( dice == 10 ) {
                // 시야밖에 있으면 놓침
                if ( target == _global__WEBPACK_IMPORTED_MODULE_11__["default"].player ) {
                    _global__WEBPACK_IMPORTED_MODULE_11__["default"]["interface"].addLog( "%s{는} %s의 추적에서 벗어났다.", target.getName(), self.getName() );
                }

                self.mode = "searchTarget";
            } else if ( dice <= 5 ) {
                self.path = null;
                self.mode = "trackExactly";
            } else if ( self.mode != "trackFast" || self.mode != "trackSlow" ) {
                self.mode = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.random( 1,2 ) == 1 ? "trackSlow" : "trackFast";
            }
        } else {
            if ( self.hp / self.hpMax <= 0.2 ) {
                if ( self.mode != "retreatSlow" ) {
                    self.showMood( "fear" );
                    _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.addLog( "%s{가} 도망치기 시작했다!", self.getName() );
                    self.mode = "retreatSlow";
                }
            } else {
                self.mode = "trackSlow";
            }
        }
    }

    if ( self.mode == null ) {
        console.log( self.getName(),self.mode,self.target );
        console.log( "모드설정이 잘못되었음",self.getName() );
    }

    AI[self.mode]( self,self.target,dist );

    // 플레이어가 실수로 때린 경우 정신차리기
    if ( self.follow && self.follow == target ) {
        if ( _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.random( 1,5 ) == 1 ) {
            _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.addLog( "%s{가} 정신을 차렸다.",self.getName() );
            self.target = null;
        }
    }
};

AI.citizen = function ( self, target, dist, dir ) {
    AI.default( self, target, dist );
};

AI.cat = function ( self, target, dist,dir ) {
    AI.default( self, target, dist,dir );
};


Monster.property = {
    ["쥐"]: {
        image:       [2, 3], color:       _lib_colors__WEBPACK_IMPORTED_MODULE_7__["default"].Orange,
        faction:     "A", attack:      "1~3", hp:          5, whiteAttrib: "*", blackAttrib: "",
    },

    ["쥐가족"]: {
        list:        "K쥐,쥐,쥐,쥐,?쥐,?쥐",
        whiteAttrib: "cave,dungeon", blackAttrib: "",
    },

};

Monster.AI = AI;





/***/ }),

/***/ "./games/Avalonika/src/entity/npc.js":
/*!*******************************************!*\
  !*** ./games/Avalonika/src/entity/npc.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Npc)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _world_gameMap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../world/gameMap */ "./games/Avalonika/src/world/gameMap.js");
/* harmony import */ var _world_elemental__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../world/elemental */ "./games/Avalonika/src/world/elemental.js");
/* harmony import */ var _lib_random__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @lib/random */ "./engine/src/lib/random.js");
/* harmony import */ var _lib_colors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @lib/colors */ "./engine/src/lib/colors.js");
/* harmony import */ var _creature__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./creature */ "./games/Avalonika/src/entity/creature.js");
/* harmony import */ var _monster__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./monster */ "./games/Avalonika/src/entity/monster.js");
/* harmony import */ var _item__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./item */ "./games/Avalonika/src/entity/item.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../global */ "./games/Avalonika/src/global.js");
/* harmony import */ var _effect__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../effect */ "./games/Avalonika/src/effect.js");















class Npc extends _monster__WEBPACK_IMPORTED_MODULE_6__["default"] {
    constructor( name, tileX, tileY, options ) {
        super( name, tileX, tileY, options );
        this.isNpc = true;
        this.AI = "roaming";

        this.fillProperties( Npc.property, name );
        let pr = this.property;

        // 스케쥴이 있는 NPC는 아래의 장소를 참고한다.
        this.places = [];

        this.senseDistance = pr.senseDistance || 6;
        this.weaponRange = pr.weaponRange || 1;
        this.AI = pr.AI || "default";
        this.hpMax = pr.hp || 1;
        this.hp = this.hpMax;
        this.texture = _creature__WEBPACK_IMPORTED_MODULE_5__["default"].texture;
        this.tileWidth = _creature__WEBPACK_IMPORTED_MODULE_5__["default"].tileWidth;
        this.tileHeight = _creature__WEBPACK_IMPORTED_MODULE_5__["default"].tileHeight;

        this.postInit( Npc );
    }


    attack( cr, dmg ) {
        let { x: x1, y: y1 } = _global__WEBPACK_IMPORTED_MODULE_8__["default"].world.tileCenterToWorld( this.tileX, this.tileY );
        let { x: x2, y: y2 } = _global__WEBPACK_IMPORTED_MODULE_8__["default"].world.tileCenterToWorld( cr.tileX, cr.tileY );
        let [dur, hitDur] = new _effect__WEBPACK_IMPORTED_MODULE_9__["default"]( "claw", x1, y1, x2, y2, true, this.getWeaponImage( true, true ), this ).getDuration();

        cr.stop();
        cr.damage( dmg, this, x1, y1, hitDur || dur );
        _global__WEBPACK_IMPORTED_MODULE_8__["default"].world.entityManager.wait( 300 );
    }


    damage( dmg, attacker, fromX, fromY, hitDur, sound ) {
        hitDur = hitDur || 0;
        this.hp = this.hp - dmg;
        if ( this.hp <= 0 ) {
            this.removeFromWorld();
            new _effect__WEBPACK_IMPORTED_MODULE_9__["default"]( "death", fromX, fromY, this.getX(), this.getY(), this, attacker, hitDur );
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( hitDur, () => {
                let p = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Particles();

                p.setTexture( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "Blood.png" ) );
                console.log( "사망", this.getPosition() );
                for ( let i = 1; i <= 10; i++ ) {
                    //p.addParticles(0,0,50,90,60,10,10);
                    let angle = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 360 );
                    let speed = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 6 );
                    let { x, y } = this.getPosition();

                    // x = x; // GLOBAL.world.viewWidth/2;
                    // y = y; // GLOBAL.world.viewHeight/2;
                    p.addParticles( [{
                        x:            x, y:            y, size:         _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 4, 30 ),//this.getX(),y=this.getY(),size=20,
                        angle:        angle,
                        ttl:          60 + _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 100 ),
                        speedX:       _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.cos( angle ) * speed,
                        speedY:       _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.sin( angle ) * speed,
                        speedAngular: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 30 ) - 15,
                        decay:        0.5,
                        color:        0x400000,
                        alpha:        1.0,
                    }] );
                }
                _global__WEBPACK_IMPORTED_MODULE_8__["default"].world.floorLayer.addChild( p );
                _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( sound || "sound/damage_0.wav" );
                _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/finish_1.wav" );
                _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( 5000, () => {
                    p.removeFromParent();
                    this.removeFromWorld();
                } );
            } );
            _global__WEBPACK_IMPORTED_MODULE_8__["default"]["interface"].addLog( "%s{를} 공격하여 %d 대미지!", this.getName(), dmg );
            _global__WEBPACK_IMPORTED_MODULE_8__["default"]["interface"].addLog( "%s{를} 쓰러뜨렸다!", this.getName() );
            _global__WEBPACK_IMPORTED_MODULE_8__["default"].player.exp = _global__WEBPACK_IMPORTED_MODULE_8__["default"].player.exp + 1;
            let numOfDrop = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 4 );
            let floorList = _global__WEBPACK_IMPORTED_MODULE_8__["default"].world.pathManager.getSplashFloor( this.tileX, this.tileY, numOfDrop );

            for ( let i = 1; i <= numOfDrop; i++ ) {
                _global__WEBPACK_IMPORTED_MODULE_8__["default"].world.entityManager.addEntity( new _item__WEBPACK_IMPORTED_MODULE_7__["default"]( floorList[i].x, floorList[i].y, {
                    id:        _item__WEBPACK_IMPORTED_MODULE_7__["default"].gold,
                    amount:    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 30 ),
                    drop:      true, dropX:     this.tileX, dropY:     this.tileY,
                    dropDelay: ( numOfDrop - i ) * 100,
                } ) );
            }
            if ( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 3 ) == 1 ) {
                _global__WEBPACK_IMPORTED_MODULE_8__["default"].world.entityManager.addEntity( new _item__WEBPACK_IMPORTED_MODULE_7__["default"]( this.tileX, this.tileY, {
                    id:        _item__WEBPACK_IMPORTED_MODULE_7__["default"].validIdList[_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( _item__WEBPACK_IMPORTED_MODULE_7__["default"].validIdList.length )],
                    //amount:Math.random(30),
                    drop:      true, dropX:     this.tileX, dropY:     this.tileY,
                    dropDelay: 100,
                } ) );
            }
            if ( this.property.explosion ) {
                if ( this.property.explosion == "water" ) {
                    new _effect__WEBPACK_IMPORTED_MODULE_9__["default"]( "boom", this.getX(), this.getY(), 20, 350, hitDur, 0x0000ff );
                    _global__WEBPACK_IMPORTED_MODULE_8__["default"].world.elemental.addElemental( _world_elemental__WEBPACK_IMPORTED_MODULE_2__["default"].WATER, this.tileX, this.tileY, 10 );
                } else if ( this.property.explosion == "fire" ) {
                    new _effect__WEBPACK_IMPORTED_MODULE_9__["default"]( "boom", this.getX(), this.getY(), 50, 300, hitDur, 0xff9000 );
                    _global__WEBPACK_IMPORTED_MODULE_8__["default"].world.elemental.addElemental( _world_elemental__WEBPACK_IMPORTED_MODULE_2__["default"].FIRE, this.tileX, this.tileY, 10 );
                } else if ( this.property.explosion == "poison" ) {
                    new _effect__WEBPACK_IMPORTED_MODULE_9__["default"]( "boom", this.getX(), this.getY(), 30, 400, hitDur, 0xff00ff );
                    _global__WEBPACK_IMPORTED_MODULE_8__["default"].world.elemental.addElemental( _world_elemental__WEBPACK_IMPORTED_MODULE_2__["default"].POISON, this.tileX, this.tileY, 10 );
                }
            }
        } else {
            new _effect__WEBPACK_IMPORTED_MODULE_9__["default"]( "damage", fromX, fromY, this.getX(), this.getY(), this, attacker, hitDur );
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( hitDur, () => {
                _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( sound || "sound/damage_0.wav" );
            } );
            _global__WEBPACK_IMPORTED_MODULE_8__["default"]["interface"].addLog( "%s{를} 공격하여 %d 대미지!", this.getName(), dmg );
        }
    }
}

// 상속받았기 때문에 Monster.property를 파괴할 수 있음
Object.assign( Npc.property, {
    ["나오"]: {
        image:    [17, 1], color:    _lib_colors__WEBPACK_IMPORTED_MODULE_4__["default"].Yellow,
        faction:  "H", attack:   "2~5", hp:       25, AI:       "citizen",
        schedule: [
            { hour: 7, min: 0, place: "room" },
            { hour: 8, min: 30, place: "work", action: "playMusic" },
            { hour: 17, min: 0, place: "room" },
            { hour: 21, min: 0, place: "bed", radius: 0, action: "sleep" },
        ],
    }
} );







/***/ }),

/***/ "./games/Avalonika/src/entity/pet.js":
/*!*******************************************!*\
  !*** ./games/Avalonika/src/entity/pet.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Pet)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _world_gameMap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../world/gameMap */ "./games/Avalonika/src/world/gameMap.js");
/* harmony import */ var _lib_random__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @lib/random */ "./engine/src/lib/random.js");
/* harmony import */ var _lib_colors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @lib/colors */ "./engine/src/lib/colors.js");
/* harmony import */ var _creature__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./creature */ "./games/Avalonika/src/entity/creature.js");
/* harmony import */ var _monster__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./monster */ "./games/Avalonika/src/entity/monster.js");
/* harmony import */ var _item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./item */ "./games/Avalonika/src/entity/item.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../global */ "./games/Avalonika/src/global.js");












/*

Pet은 몬스터의 일종이다

플레이어와 적절한 거리를 유지하면서 공격함

pet_cat = 선공하지 않음. 자신이 공격 받거나 플레이어 공격 받으면 공격함. 라이프가 줄어들면 도망침. 
pet_dog = 선공하지 않음. 자신이 공격 받거나 플레이어 공격 받으면 공격함. 
pet_wolf = 선공함.


남은 작업
follow가 공격 받을 때 공격하기
프랍이 가로막아 타겟에 도달하지 못할 때 프랍을 공격하기

*/





class Pet extends _monster__WEBPACK_IMPORTED_MODULE_5__["default"] {
    constructor( name, tileX, tileY, options ) {
        super( name, tileX, tileY, options );
        this.isPet = true;
        //this.isMonster = false;
        if ( tileY == null ) {
            // pet은 위치를 지정하지 않으면 플레이어 바로 옆에 소환한다.
            const t = _global__WEBPACK_IMPORTED_MODULE_7__["default"].world.pathManager.getSummonFloor( _global__WEBPACK_IMPORTED_MODULE_7__["default"].player.tileX, _global__WEBPACK_IMPORTED_MODULE_7__["default"].player.tileY, 1 );

            if ( t.length == 0 ) {
                console.log( "소환할 자리가 없음" );
                // 몬스터가 플레이어 바로 옆까지 소환된 경우
            } else {
                tileX = t[0].x;
                tileY = t[0].y;
                this.position = _global__WEBPACK_IMPORTED_MODULE_7__["default"].world.tileCenterToWorld( tileX, tileY );
                [this.tileX, this.tileY] = [tileX, tileY];
                [this.lastTileX, this.lastTileY] = [tileX, tileY];
            }
        }

        this.fillProperties( Pet.property, name );
        const pr = this.property;

        this.senseDistance = pr.senseDistance || 6;
        this.weaponRange = pr.weaponRange || 1;
        this.follow = _global__WEBPACK_IMPORTED_MODULE_7__["default"].player; // 펫이니까

        this.AI = pr.AI || "default";
        this.hpMax = pr.hp || 1;
        this.hp = this.hpMax;
        this.texture = _creature__WEBPACK_IMPORTED_MODULE_4__["default"].texture;
        this.tileWidth = _creature__WEBPACK_IMPORTED_MODULE_4__["default"].tileWidth;
        this.tileHeight = _creature__WEBPACK_IMPORTED_MODULE_4__["default"].tileHeight;
        this.postInit( Pet );
    }

    called( from ) {
        const dist = _global__WEBPACK_IMPORTED_MODULE_7__["default"].world.getDistanceBetweenEntities( this, from );

        if ( dist == 1 ) {
            if ( _global__WEBPACK_IMPORTED_MODULE_7__["default"].world.random( 1,2 ) == 1 ) {
                _global__WEBPACK_IMPORTED_MODULE_7__["default"]["interface"].addLog( "%s{는} 풀쩍 뛰어 올랐다.", this.getName() );
                this.swapLocation( from );
            } else {
                _global__WEBPACK_IMPORTED_MODULE_7__["default"]["interface"].addLog( "%s{는} 매우 좋아했다.", this.getName() );
            }
        } else {
            _global__WEBPACK_IMPORTED_MODULE_7__["default"]["interface"].addLog( "%s{는} 울음 소리를 냈다.", this.getName() );
            // 불러서 돌아가야함
        }
    }

    afterDeath( dmg, attacker, fromX, fromY, hitDur, sound ) {
    }
}



Object.assign( Pet.property, {
    ["고양이"]: {
        image:   [ 12, 3], color:   _lib_colors__WEBPACK_IMPORTED_MODULE_3__["default"].Yellow,
        faction: "P", attack:  "2~5", hp:      13, AI:      "cat",
    },
} );

Pet.maxPet = 5; // 플레이어가 가질 수 있는 최대 펫의 수. 이 숫자만큼 계단 옆을 비워야한다.



/***/ }),

/***/ "./games/Avalonika/src/entity/player.js":
/*!**********************************************!*\
  !*** ./games/Avalonika/src/entity/player.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Player)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _effect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../effect */ "./games/Avalonika/src/effect.js");
/* harmony import */ var _interface_inventory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../interface/inventory */ "./games/Avalonika/src/interface/inventory.js");
/* harmony import */ var _world_elemental__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../world/elemental */ "./games/Avalonika/src/world/elemental.js");
/* harmony import */ var _skill__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./skill */ "./games/Avalonika/src/entity/skill.js");
/* harmony import */ var _item__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./item */ "./games/Avalonika/src/entity/item.js");
/* harmony import */ var _lib_visibilityTile__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @lib/visibilityTile */ "./engine/src/lib/visibilityTile.js");
/* harmony import */ var _world_gameMap__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../world/gameMap */ "./games/Avalonika/src/world/gameMap.js");
/* harmony import */ var _creature__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./creature */ "./games/Avalonika/src/entity/creature.js");
/* harmony import */ var _lib_mabiMML__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @lib/mabiMML */ "./engine/src/lib/mabiMML.js");
/* harmony import */ var _lib_iconPack__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @lib/iconPack */ "./engine/src/lib/iconPack.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../global */ "./games/Avalonika/src/global.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../config */ "./games/Avalonika/src/config.js");
/* harmony import */ var _pet__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./pet */ "./games/Avalonika/src/entity/pet.js");
/* harmony import */ var _monster__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./monster */ "./games/Avalonika/src/entity/monster.js");
/* harmony import */ var _prop__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./prop */ "./games/Avalonika/src/entity/prop.js");





















//--------------------------------------------------------------------------------------
// Player는 GLOBAL.player 글로벌 변수에 할당된다
//--------------------------------------------------------------------------------------

//--------------------------------------------------------------------------------------
// 이동처리
// GLOBAL.player.findPathAndMoveTo 만 신경쓰면 된다
//--------------------------------------------------------------------------------------

function endMove( self ) {
    self.path = null;
    if ( self.interactX ) {
        // 이동후 인터랙션
        if ( _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.getDistance( self.tileX, self.tileY, self.interactX, self.interactY ) == 1 ) {
            self.interact( self.interactX, self.interactY );
        }
        self.interactX = null;
        self.interactY = null;
    }
    _global__WEBPACK_IMPORTED_MODULE_11__["default"]["interface"].cursor.snapToPlayer();
    _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.showMapInfo( self.tileX, self.tileY );
    self.targetX = null;
    self.targetY = null;
}

function movePathStep( self ) {
    if ( self.path && self.path.length > 0 ) {
        const { x: nextX, y: nextY } = self.path[0];

        self.path.shift();
        const c = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.entityManager.getEntity( nextX, nextY );

        if ( c ) {
            // 크리쳐에 의해서 도중에 길이 막혔다
            // 목적지를 다시 찾는다.
            console.log( "한번더 찾기" );
            self.stop();
            self.findPathAndMoveTo( self.targetX, self.targetY, self.interactX, self.interactY );
        } else {
            self.doTurn( ()=>{
                console.log( `이동 ${_global__WEBPACK_IMPORTED_MODULE_11__["default"].world.turn}, ${nextX}, ${nextY}, ${self.targetX}, ${self.targetY}` );
                // 적턴을 처리해서 이동이 막힐 가능성이 있다
                if ( _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.entityManager.getEntity( nextX, nextY ) ) {
                    if ( self.targetX != null ) {
                        self.findPathAndMoveTo( self.targetX, self.targetY, self.interactX, self.interactY );
                    }
                } else {
                    self.moveTo( nextX, nextY )
                        .onChange( () => {
                            const { x, y } = self.getPosition();

                            _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.sightManager.moveEyeTo( x,y );
                        } );
                    self.pickUpGold();
                    const pr = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.map.getProperty( nextX, nextY );
                    const footstep = pr.sound || 0;

                    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/footstep_" + footstep + ".wav" );
                    self.playPositionSound( nextX, nextY );
                }

                return [_creature__WEBPACK_IMPORTED_MODULE_8__["default"].walkSpeed, 1];
            } );
        }
    }
}

function startMove( self ) {
    movePathStep( self );
}


//--------------------------------------------------------------------------------------
// 공격: interact에서 호출해주기 때문에 이걸 직접 부르면 안된다.
//--------------------------------------------------------------------------------------

/**
 *
 * @this Player
 * 
 * @param {number} x
 * @param {number} y
 * @param {boolean} isRanged
 * @param {number} px
 * @param {number} py
 */
function attack( x, y, isRanged, px, py ) {
    let cr;

    if ( isRanged ) {
        const { x: x1, y: y1 } = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.tileCenterToWorld( this.tileX, this.tileY );
        const [x2, y2] = [px, py];
        const [r, tx, ty, cx, cy] = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.map.visibilityTileChecker.traceRay( x1, y1, x2, y2,
                                                                                     _config__WEBPACK_IMPORTED_MODULE_12__["default"].World.tileWidth, _config__WEBPACK_IMPORTED_MODULE_12__["default"].World.tileHeight, _world_gameMap__WEBPACK_IMPORTED_MODULE_7__["default"].BLOCK_VISION | _world_gameMap__WEBPACK_IMPORTED_MODULE_7__["default"].BLOCK_ARROW, ( x, y ) => {
                                                                                         return _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.entityManager.getEntity( x, y );
                                                                                     } );

        console.log( x2, y2, r, tx, ty, cx, cy, _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.stageToWorld( ...this.getPosition().xy ) );
        if ( r == _lib_visibilityTile__WEBPACK_IMPORTED_MODULE_6__["default"].EMPTY || r == _lib_visibilityTile__WEBPACK_IMPORTED_MODULE_6__["default"].CREATURE ) {
            cr = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.entityManager.getEntity( tx, ty );
            [px, py] = [cx, cy];
        } else {
            cr = null;
            [px, py] = [cx, cy];
        }
    }
    //GLOBAL.interface.hideInfo();
    console.log( " 플레이어 공격" );
    //맵검토가 여기에 들어가야한다
    const angle = ( Math.atan2( y - this.tileY, x - this.tileX ) ) / Math.PI * 180;
    const dir = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.angleToDir( angle );
    let ax, ay;
    let dur, hitDur;
    let weapon = this.getSelectedWeapon()[0];
    let damage = weapon.calculateDamage();

    if ( isRanged ) {
        if ( cr ) {
            [dur, hitDur] = new _effect__WEBPACK_IMPORTED_MODULE_1__["default"]( "arrow", this.getX(), this.getY(), px, py, true ).getDuration();
        } else {
            [dur, hitDur] = new _effect__WEBPACK_IMPORTED_MODULE_1__["default"]( "arrow", this.getX(), this.getY(), px, py, false ).getDuration();
        }
        console.log( "화살발사", px, py );
    } else {
        [ax, ay] = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.dirToOffset( dir );
        cr = this.getEntityRel( ax, ay );
        let weaponAnimation;

        if ( cr && cr.isProp && cr.property.needPickAxe ) {
            const pickaxe = this.getEquippedItem( "pickaxe" );

            if ( pickaxe ) {
                weapon = pickaxe;
            }
        }
        weaponAnimation = weapon.property.anim || "swing";
        const { x: x1, y: y1 } = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.tileCenterToWorld( this.tileX, this.tileY );

        if ( cr ) {
            [dur, hitDur] = new _effect__WEBPACK_IMPORTED_MODULE_1__["default"](
                weaponAnimation,
                x1, y1, x1 + ax * _config__WEBPACK_IMPORTED_MODULE_12__["default"].World.tileWidth, y1 + ay * _config__WEBPACK_IMPORTED_MODULE_12__["default"].World.tileHeight,
                true,
                weapon.getIcon( true, true ),
                this ).getDuration();
        } else {
            [dur, hitDur] = new _effect__WEBPACK_IMPORTED_MODULE_1__["default"](
                weaponAnimation,
                x1, y1, x1 + ax * _config__WEBPACK_IMPORTED_MODULE_12__["default"].World.tileWidth, y1 + ay * _config__WEBPACK_IMPORTED_MODULE_12__["default"].World.tileHeight,
                false,
                weapon.getIcon( true, true ),
                this ).getDuration();
        }
    }
    //log("angle",angle,dir,ax,ay);
    //log("target",c);
    hitDur = hitDur || dur;
    if ( cr ) {
        if ( cr.isProp ) {
            if ( weapon.property.type == "pickaxe" ) {
                damage = 5;
            } else {
                damage = 1; // 프랍 때릴 때는 무조건 1;
            }
        }
        _global__WEBPACK_IMPORTED_MODULE_11__["default"]["interface"].cursor.lock( hitDur || dur );
        const { x: x1, y: y1 } = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.tileCenterToWorld( this.tileX, this.tileY );
        const { x: x2, y: y2 } = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.tileCenterToWorld( cr.tileX, cr.tileY );

        if ( cr instanceof _monster__WEBPACK_IMPORTED_MODULE_14__["default"] || cr instanceof _prop__WEBPACK_IMPORTED_MODULE_15__["default"] ) {
            cr.damage( damage, this, x1, y1, hitDur );
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( Math.max( 0, hitDur - 50 ), () => {
            // 공격할 때 나는 무기 소리
                _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/" + ( weapon.property.hitSound || "damage_0.wav" ) );
            } );
        }
    } else {
        _global__WEBPACK_IMPORTED_MODULE_11__["default"]["interface"].cursor.lock( 100 );
    }
}


//--------------------------------------------------------------------------------------
// 펫부르기
// 거리가 멀면 부른다
//--------------------------------------------------------------------------------------

/**
 * @this Player
 *
 * @param {Pet} target
 * @param {number} dist
 */
function callPet( target, dist ) {
    if ( dist == 1 ) {
        _global__WEBPACK_IMPORTED_MODULE_11__["default"]["interface"].addLog( "%s{는} %s{를} 쓰다듬었다.",this.getName(),target.getName() );
        target.called( this );
    } else {
        _global__WEBPACK_IMPORTED_MODULE_11__["default"]["interface"].addLog( "%s{는} %s{를} 불렀다.", this.getName(),target.getName() );
        target.called( this );
    }
}



/**
 *
 *
 * @class Player
 * @extends {Creature}
 */
class Player extends _creature__WEBPACK_IMPORTED_MODULE_8__["default"] {
//--------------------------------------------------------------------------------------
// 플레이어 초기화
//--------------------------------------------------------------------------------------
    constructor( name, tileX, tileY, options ) {
        super( name, tileX, tileY, options );
        this.isPlayer = true;
        this.faction = "player";

        this.texture = Player.texture;
        this.tileWidth = Player.tileWidth;
        this.tileHeight = Player.tileHeight;
        this.property = { image: [ 1, 1], faction: "O" };
        this.name = "나크";
        this.hp = 30;
        this.hpMax = 30;
        this.mp = 20;
        this.mpMax = 20;
        this.level = 1;
        this.exp = 0;
        this.expMax = 30;
        this.gold = 0;
        this.inventory = new _interface_inventory__WEBPACK_IMPORTED_MODULE_2__["default"]( 20 );
        this.str = 0;	// 힘
        this.dex = 0;	// 솜씨
        this.int = 0;	// 지능
        this.luck = 0;	// 행운
        // hp = 레벨 str;
        // mp = 레벨 int;
        // matk = int;
        // normal = str + dex;
        // heavy weapon = str;
        // technical weapon = dex;
        // shield = str + dex;
        // dodge = dex;
        // critical = int+lck;
        // trap dodge = lck;
        // untrap = dex+lck;
        this.skills = [
            new _skill__WEBPACK_IMPORTED_MODULE_4__["default"]( "근접무기" ),
            new _skill__WEBPACK_IMPORTED_MODULE_4__["default"]( "원거리무기" ),
        ];
        this.baseWeapon = new _item__WEBPACK_IMPORTED_MODULE_5__["default"]( _item__WEBPACK_IMPORTED_MODULE_5__["default"].bareHand );
        this.selectedAction = this.baseWeapon;

        this.startX = undefined;
        this.startY = undefined;
        this.postInit( Player );
    }


    selectAction( skill ) {
        _global__WEBPACK_IMPORTED_MODULE_11__["default"]["interface"].actionSelector.select( skill );
    }

    getSelectedWeapon() {
        const sa = this.selectedAction;
        let item;

        if ( sa.property.type == "melee" ) {
            item = this.inventory.findEquippedItemByType( "melee" );
        } else if ( sa.property.type == "ranged" ) {
            item = this.inventory.findEquippedItemByType( "ranged" );
        }

        return item || this.baseWeapon;
    }



    selectSkillByType( type ) {
        let skill;
		
        for ( const i in this.skills ) {
            const v = this.skills[i];

            if ( v.property.type == type ) {
                skill = v;
                break;
            }
        }
        if ( _global__WEBPACK_IMPORTED_MODULE_11__["default"]["interface"] ) {
            _global__WEBPACK_IMPORTED_MODULE_11__["default"]["interface"].actionSelector.select( skill );
        }
    }

    selectSkill( name ) {
        let skill;

        for ( const i in this.skills ) {
            const v = this.skills[i];

            if ( v.name == name ) {
                skill = v;
                break;
            }
        }
        if ( _global__WEBPACK_IMPORTED_MODULE_11__["default"]["interface"] ) {
            _global__WEBPACK_IMPORTED_MODULE_11__["default"]["interface"].actionSelector.select( skill );
        }
    }

    getSelectedAction() {
        return this.selectedAction;
    }

    getWeaponImage( filtering,flip ) {
        return this.selectedAction.getIcon( filtering,flip );
    }

    getEquippedItem( type ) {
        const item = this.inventory.findEquippedItemByType( type );

        return item[0];
    }

    getEquippedItemImage( type ) {
        const item = this.getEquippedItem( type );

        return item != null ? item.getIcon() : null;
    }

    processAutoMove() {
        if ( this.path && this.path.length > 0 ) {
            console.log( "자동이동 남은 숫자", this.path.length );
            movePathStep( this );
        } else {
            if ( this.targetX != null && ( this.targetX != this.tileX || this.targetY != this.tileY ) ) {
                // 그 사이에 길이 났을 수도 있으니까 다시 이동한다
                //log("한번더 찾기");
                this.findPathAndMoveTo( this.targetX,this.targetY,this.interactX,this.interactY );
            }
            if ( !( this.path && this.path.length > 0 ) ) {
                endMove( this );
            }
        }
    }


    //--------------------------------------------------------------------------------------
    // GLOBAL.player.findPathAndMoveTo;
    //--------------------------------------------------------------------------------------

    findPathAndMoveTo( x,y,interactX,interactY ) {
        _global__WEBPACK_IMPORTED_MODULE_11__["default"]["interface"].hideInfo();
        let moving;

        if ( this.path && this.path.length > 0 ) {
            moving = true;
        }
        if ( this.tileX == x && this.tileY == y ) {
            // 이동할 필요가 없음
            endMove( this );

            return;
        }
        // 이동 중인 경우 멈춤
        this.stop();
        [this.startX, this.startY] = [this.tileX, this.tileY];
        [this.targetX, this.targetY] = [x,y];
        this.interactX = interactX;
        this.interactY = interactY;
        const path = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.pathManager.findPath( this.tileX,this.tileY,x,y );

        this.path = path;
        //log("찾기 결과",path,path and path.length);
        if ( moving ) {
            //
        } else if ( path && path.length > 0 ) {
            startMove( this );
        } else {
            endMove( this );
        }
    }

    stop() {
        this.path = null;
        this.targetX = this.tileX;
        this.targetY = this.tileY;
    }

    //--------------------------------------------------------------------------------------
    // 턴을 안먹는 행동
    //--------------------------------------------------------------------------------------

    pickUpGold() {
        // 골드 줍기는 턴을 안먹음
        const items = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.entityManager.getItems( this.tileX,this.tileY );

        if ( items != null ) {
            for ( let i = 0; i < items.length; i++ ) {
                const item = items[i];

                if ( item.property.bundle == "gold" ) {
                    this.pickUpItem( item );
                }
            }
        }
    }


    //--------------------------------------------------------------------------------------
    // 턴을 먹는 행동
    //--------------------------------------------------------------------------------------

    // doTurn으로 감싸서 처리하면 턴이 된다

    doTurn( func,data ) {
        let [delay,turn] = [0, 1];

        _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.entityManager.doDelayedEnemyTurnIfExist( () => {
            _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.entityManager.clearMonsterMood();
            if ( func ) {
                console.log( `▶플레이어턴 ${_global__WEBPACK_IMPORTED_MODULE_11__["default"].world.turn}` );
                [delay, turn] = func( data );
                // 플레이어의 행동의 delay. 그리고 적은 몇 턴 행동을 하게 되는가
            } else {
                console.log( `▶플레이어턴(아무 것도 안함) ${_global__WEBPACK_IMPORTED_MODULE_11__["default"].world.turn}` );
            }
            for ( let i = 0; i < turn; i++ ) {
                this.processBuff();
                _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.turn = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.turn + 1;
                _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.entityManager.doEnemyTurn( delay );
            }
        } );
    }


    pickUpItem( item ) {
        if ( item.property.bundle == "gold" ) {
            _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.entityManager.removeEntity( item );
            this.gold = this.gold + item.amount;
            _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.addLog( "<yellow>%d 골드</yellow>를 주웠다.", item.amount );
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/" + item.property.getSound );
        } else {
            if ( this.inventory.isFull() ) {
                _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.entityManager.removeEntity( item );
                _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.addLog( "소지품이 가득차서 %s{를} 주을 수 없었다.", item.name );
                item.drop( item.tileX, item.tileY );
                _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.showMapInfo( this.tileX, this.tileY );
            } else {
                this.doTurn( () => {
                    _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.entityManager.removeEntity( item );
                    _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.addLog( "%s{를} 주웠다.", item.name );
                    this.inventory.addItem( item );
                    if ( item.property.getSound ) {
                        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/" + item.property.getSound );
                    } else {
                        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/get_default.wav" );
                    }

                    return [0, 1];
                } );
            }
        }
    }

    openDoor( x,y ) {
        this.doTurn( () => {
            _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.openDoor( x, y );

            return [300, 1];
        } );
    }


    doNothing( text ) {
        if ( text ) {
            _global__WEBPACK_IMPORTED_MODULE_11__["default"]["interface"].addLog( text );
        }
        this.doTurn();
    }


    //--------------------------------------------------------------------------------------
    // 상호작용
    // 해당 위치에 대해 알맞는 상호작용을 한다.
    // 위치에 여러 상호작용이 가능한 경우는 없음
    //--------------------------------------------------------------------------------------


    interact( tx,ty,isRanged,px,py ) {
        this.doTurn( () => {
            _global__WEBPACK_IMPORTED_MODULE_11__["default"]["interface"].hideInfo();
            console.log( "인터랙션", _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.turn );
            //맵검토가 여기에 들어가야한다
            this.stop();
            const cr = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.entityManager.getEntity( tx, ty );
            const pr = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.getProperty( tx, ty );
            const dist = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.getDistance( tx, ty, this.tileX, this.tileY );

            if ( dist == 1 && pr.char == "E" ) {
                console.log( "문열기 시도" );
                _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.openDoor( tx, ty );
            } else if ( cr && cr.isPet && cr.follow == this ) {
                callPet.call( this, cr, dist );
            } else {
                attack.call( this, tx, ty, isRanged, px, py );
            }

            return [300, 1];
        } );
    }



    //--------------------------------------------------------------------------------------
    // 대미지를 입는 연출
    // 실제로 hp도 여기서 조작한다
    //--------------------------------------------------------------------------------------

    damage( dmg,attacker,fromX,fromY,hitDur,sound ) {
        hitDur = hitDur || 0;
        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( hitDur, () => {
            _global__WEBPACK_IMPORTED_MODULE_11__["default"]["interface"].addLog( "%s로부터 <yellow>%d</yellow> 대미지를 받았다!", attacker.getName(), dmg );
            if ( sound ) {
                _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/" + sound );
            } else {
                console.log( "사운드 지정 안됨" );
                _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( sound || "sound/damage_0.wav" );
            }
        } );
        this.hp = this.hp - dmg;
        _global__WEBPACK_IMPORTED_MODULE_11__["default"]["interface"].cursor.snapToPlayer();
        new _effect__WEBPACK_IMPORTED_MODULE_1__["default"]( "damage",fromX,fromY,this.getX(),this.getY(),this,attacker,hitDur );
    }


    //--------------------------------------------------------------------------------------
    // 위치에 따른 사운드를 틀어준다
    // 월드가 호출함 직접 불러줄 필요 없음
    //--------------------------------------------------------------------------------------

    playPositionSound( x,y ) {
        const pr = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.map.getProperty( x,y );
        const l = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.getProperty( x - 1,y );
        const r = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.getProperty( x + 1,y );
        const u = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.getProperty( x,y - 1 );
        const d = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.getProperty( x,y + 1 );
        const c = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.getProperty( x,y );
        const le = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.elemental.getElemental( x - 1,y );
        const re = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.elemental.getElemental( x + 1,y );
        const ue = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.elemental.getElemental( x,y - 1 );
        const de = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.elemental.getElemental( x,y + 1 );
        const ce = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.elemental.getElemental( x,y );
        const torch = ( l.fire || 0 ) + ( r.fire || 0 ) + ( u.fire || 0 ) + ( d.fire || 0 ) + ( c.fire || 0 );
        const fire =  ( ( le && le.type == _world_elemental__WEBPACK_IMPORTED_MODULE_3__["default"].FIRE ) ? 1 : 0 );

        + ( ( re && re.type == _world_elemental__WEBPACK_IMPORTED_MODULE_3__["default"].FIRE ) ? 1 : 0 );
        + ( ( ue && ue.type == _world_elemental__WEBPACK_IMPORTED_MODULE_3__["default"].FIRE ) ? 1 : 0 );
        + ( ( de && de.type == _world_elemental__WEBPACK_IMPORTED_MODULE_3__["default"].FIRE ) ? 1 : 0 );
        + ( ( ce && ce.type == _world_elemental__WEBPACK_IMPORTED_MODULE_3__["default"].FIRE ) ? 1 : 0 );
        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSingleSound( "sound/loop_torch.wav",Math.min( 1,torch * 0.7 ),true );
        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSingleSound( "sound/loop_fire.wav",Math.min( 1,fire ),true );
        if ( ce && ce.type == _world_elemental__WEBPACK_IMPORTED_MODULE_3__["default"].WATER ) {
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/env_water.wav" );
        }
		
        for ( const i in _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.map.envSounds ) {
            const v = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.map.envSounds[i];
            const dist = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.getDistance( v.x,v.y,x,y ) / 10 + 1;
            const vol = 1 / ( dist * dist );

            //log(v.x,v.y,x,y,dist,vol);
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSingleSound( "sound/loop_" + v.sound + ".wav",vol,true,v );
        }
		
        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( Player.walkSpeed, () => {
            const waterVol = _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.waterAmount / 10;

            //log("물볼륨",waterVol);
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSingleSound( "sound/loop_water.wav", Math.min( 1, waterVol ), true );
        } );
    }



    //--------------------------------------------------------------------------------------
    // 음악을 연주한다
    //--------------------------------------------------------------------------------------

    playMusic( mml ) {
        _global__WEBPACK_IMPORTED_MODULE_11__["default"]["interface"].cursor.hideAutoAction();
        this.enableDefaultAnimation( false );
        this.changeImage( 1,5 );
        const item = this.getEquippedItem( "instrument" );
        let instrument;

        if ( item ) {
            instrument = item.property.instrument;
        } else {
            instrument = "sound/mml_celtic-harp-a4.wav";
        }
        mml = new _lib_mabiMML__WEBPACK_IMPORTED_MODULE_9__["default"]( mml,instrument );
        this.commandFollower( "dance",{ mml: mml } );
        mml.setVolume( 0.5 );
        mml.on( "note", () => {
            this.__animationTick = ( this.__animationTick + 1 ) % 2;
            this.changeImage( 1, 5 + this.__animationTick );
            const b = new _lib_iconPack__WEBPACK_IMPORTED_MODULE_10__["default"]( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "fx.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ), _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 9, 10 ), 4, 16, 24 );
            const mc = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.MovieClip( [
                [0, 60, b, { y: [-2, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( -30, -15 ), "outBack"], x: [7, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( -5, 20 ), "inOutSine"] }],
                [50, 60, b, { alpha: [1, 0, "outCubic"] }],
            ] );

            this.addChild( mc );
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( 1000, () => {
                mc.removeFromParent();
            } );
        } );
        mml.play();
        _global__WEBPACK_IMPORTED_MODULE_11__["default"].world.once( "enemyTurn", () => {
            mml.stop();
            this.enableDefaultAnimation( true );
        } );
    }
}

Player.texture = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "Player.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } );
Player.width = 18;
Player.height = 24;



/***/ }),

/***/ "./games/Avalonika/src/entity/prop.js":
/*!********************************************!*\
  !*** ./games/Avalonika/src/entity/prop.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Prop)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _entity__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./entity */ "./games/Avalonika/src/entity/entity.js");
/* harmony import */ var _item__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./item */ "./games/Avalonika/src/entity/item.js");
/* harmony import */ var _world_gameMap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../world/gameMap */ "./games/Avalonika/src/world/gameMap.js");
/* harmony import */ var _effect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../effect */ "./games/Avalonika/src/effect.js");
/* harmony import */ var _world_elemental__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../world/elemental */ "./games/Avalonika/src/world/elemental.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../global */ "./games/Avalonika/src/global.js");









/*

프랍은 공간을 차지하면 오브젝트이면서 생물이 아닌 것이다.
AI도 없고 buff도 없다.

*/

class Prop extends _entity__WEBPACK_IMPORTED_MODULE_1__["default"] {
    constructor( name, tileX, tileY, options ) {
        super( name, tileX, tileY, options );
        this.isProp = true;
        this.char = name;
        this.fillProperties( Prop.property, name );
        const pr = this.property;

        this.name = pr.name;
        this.imageNum = _global__WEBPACK_IMPORTED_MODULE_6__["default"].world.random( 0,pr.images.length - 1 );
        this.colorNum = _global__WEBPACK_IMPORTED_MODULE_6__["default"].world.random( 0,pr.colors.length - 1 );
        this.hp = pr.hp;
        this.hpMax = this.hp;
        this.texture = Prop.texture;
        this.tileWidth = Prop.tileWidth;
        this.tileHeight = Prop.tileHeight;

        this.postInit( Prop );
    }


    damage( dmg, attacker, fromX, fromY, hitDur, sound ) {
        hitDur = hitDur || 0;
        this.hp = this.hp - dmg;
        if ( this.hp <= 0 ) {
            this.detachFromWorld();
            new _effect__WEBPACK_IMPORTED_MODULE_4__["default"]( "breakProp", fromX, fromY, this.getX(), this.getY(), this, attacker, hitDur );
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( hitDur, () => {
                const p = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Particles();

                p.setTexture( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "Blood.png", false ) );
                console.log( "사망", this.getPosition() );
                for ( let i = 1; i <= 10; i++ ) {
                    //p.addParticles(0,0,50,90,60,10,10);
                    const angle = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 0,359 );
                    const speed = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 1,6 );
                    const { x, y } = this.getPosition();

                    //x = x; // GLOBAL.world.viewWidth/2;
                    //y = y; // GLOBAL.world.viewHeight/2;
                    p.addParticles( [{
                        x:            x, y:            y, size:         _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 4, 30 ),//this.getX(),y=this.getY(),size=20,
                        angle:        angle,
                        ttl:          60 + _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 1,100 ),
                        speedX:       Math.cos( angle ) * speed,
                        speedY:       Math.sin( angle ) * speed,
                        speedAngular: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 1,30 ) - 15,
                        decay:        0.5,
                        color:        0x404040,
                        alpha:        1.0,
                    }] );
                }
                _global__WEBPACK_IMPORTED_MODULE_6__["default"].world.floorLayer.addChild( p );
                _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/" + this.property.breakSound );
                _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( 5000, () => {
                    p.removeFromParent();
                    this.removeFromWorld();
                } );
            } );
            _global__WEBPACK_IMPORTED_MODULE_6__["default"]["interface"].addLog( "%s{를} 부쉈다!", this.name );
            _global__WEBPACK_IMPORTED_MODULE_6__["default"].player.exp = _global__WEBPACK_IMPORTED_MODULE_6__["default"].player.exp + 1;
            const numOfDrop = _global__WEBPACK_IMPORTED_MODULE_6__["default"].world.random( 1,4 );
            const floorList = _global__WEBPACK_IMPORTED_MODULE_6__["default"].world.pathManager.getSplashFloor( this.tileX, this.tileY, numOfDrop );

            for ( let i = 0; i < numOfDrop; i++ ) {
                _global__WEBPACK_IMPORTED_MODULE_6__["default"].world.entityManager.addEntity(
                    new _item__WEBPACK_IMPORTED_MODULE_2__["default"]( _item__WEBPACK_IMPORTED_MODULE_2__["default"].gold, floorList[i].x, floorList[i].y, {
                        amount:    _global__WEBPACK_IMPORTED_MODULE_6__["default"].world.random( 1,30 ),
                        drop:      true, dropX:     this.tileX, dropY:     this.tileY,
                        dropDelay: ( numOfDrop - i ) * 100 + hitDur,
                    } ) );
            }
            if ( _global__WEBPACK_IMPORTED_MODULE_6__["default"].world.random( 1,3 ) == 1 ) {
                _global__WEBPACK_IMPORTED_MODULE_6__["default"].world.entityManager.addEntity(
                    new _item__WEBPACK_IMPORTED_MODULE_2__["default"]( _item__WEBPACK_IMPORTED_MODULE_2__["default"].validIdList[_global__WEBPACK_IMPORTED_MODULE_6__["default"].world.random( 0,_item__WEBPACK_IMPORTED_MODULE_2__["default"].validIdList.length - 1 )], this.tileX, this.tileY, {
                        drop:      true, dropX:     this.tileX, dropY:     this.tileY,
                        dropDelay: 100 + hitDur,
                    } ) );
            }
            if ( this.property.explosion ) {
                if ( this.property.explosion == "water" ) {
                    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/explosion_water.wav" );
                    new _effect__WEBPACK_IMPORTED_MODULE_4__["default"]( "boom", this.getX(), this.getY(), 20, 350, hitDur, 0x0000ff );
                    _global__WEBPACK_IMPORTED_MODULE_6__["default"].world.elemental.addElemental( _world_elemental__WEBPACK_IMPORTED_MODULE_5__["default"].WATER, this.tileX, this.tileY, 10 );
                } else if ( this.property.explosion == "fire" ) {
                    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/explosion_fire.wav" );
                    new _effect__WEBPACK_IMPORTED_MODULE_4__["default"]( "boom", this.getX(), this.getY(), 50, 300, hitDur, 0xff9000 );
                    _global__WEBPACK_IMPORTED_MODULE_6__["default"].world.elemental.addElemental( _world_elemental__WEBPACK_IMPORTED_MODULE_5__["default"].FIRE, this.tileX, this.tileY, 10 );
                } else if ( this.property.explosion == "poison" ) {
                    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/explosion_gas.wav" );
                    new _effect__WEBPACK_IMPORTED_MODULE_4__["default"]( "boom", this.getX(), this.getY(), 30, 400, hitDur, 0xff00ff );
                    _global__WEBPACK_IMPORTED_MODULE_6__["default"].world.elemental.addElemental( _world_elemental__WEBPACK_IMPORTED_MODULE_5__["default"].POISON, this.tileX, this.tileY, 10 );
                }
            }
        } else {
            new _effect__WEBPACK_IMPORTED_MODULE_4__["default"]( "hitProp", fromX, fromY, this.getX(), this.getY(), this, attacker, hitDur );
            _global__WEBPACK_IMPORTED_MODULE_6__["default"]["interface"].addLog( "%s{를} 공격하여 %d 대미지!", this.getName(), dmg );
        }
    }
}

Prop.texture = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "prop.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } );
Prop.width = 16;
Prop.height = 24;
Prop.tileWidth = 16;
Prop.tileHeight = 24;
Prop.perRow = Math.floor( Prop.texture.width / Prop.tileWidth );

Prop.property = {
    ["@"]: {
        name:       "항아리",  hp:         1, hitSound:   null, breakSound: "break_2.wav",
        colors:     [0xcfb78a],
        images:     [[ 1, 1 ], [ 2, 1 ], [ 3, 1 ], [ 4, 1 ], [ 5, 1 ], [ 6, 1 ], [ 7, 1 ]] 
    },
    ["#"]: {
        name:       "나무상자", hp:         1, hitSound:   null, breakSound: "break_1.wav",
        colors:     [0x91451c],
        images:     [ [ 1, 2 ], [ 2, 2 ], [ 3, 2 ] ]
    },
    ["&"]: {
        name:        "광물", hp:          5, hitSound:    null, breakSound:  "break_1.wav", slice:       false, particle:    15, needPickAxe: true,
        colors:      [0x4c2348],
        images:      [ [ 1, 3 ], [ 2, 3 ], [ 3, 3 ], [ 4, 3 ] ]
    },
};




/***/ }),

/***/ "./games/Avalonika/src/entity/skill.js":
/*!*********************************************!*\
  !*** ./games/Avalonika/src/entity/skill.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Skill)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _entity__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./entity */ "./games/Avalonika/src/entity/entity.js");
/* harmony import */ var _world_gameMap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../world/gameMap */ "./games/Avalonika/src/world/gameMap.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../global */ "./games/Avalonika/src/global.js");








class Skill extends _entity__WEBPACK_IMPORTED_MODULE_1__["default"] {
    constructor( name, tileX, tileY, options ) {
        super( name, tileX, tileY, options );
        this.isSkill = true;
        this.fillProperties( Skill.property,name );
        const pr = this.property;

        this.name = pr.name || name;
        this.color = Skill.color[pr.type];

        this.texture = this.options.filtering ? Skill.textureFiltered : Skill.texture;
        this.tileWidth = Skill.tileWidth;
        this.tileHeight = Skill.tileHeight;
        this.postInit( Skill );
    }

    getIcon( filtering,flip ) {
        let icon;

        if ( this.property.type == "melee" ) {
            icon = _global__WEBPACK_IMPORTED_MODULE_3__["default"].player.getEquippedItem( "melee" );
            if ( !icon ) {
                icon = _global__WEBPACK_IMPORTED_MODULE_3__["default"].player.baseWeapon.getIcon();
            } else {
                icon = icon.getIcon();
            }
        } else if ( this.property.type == "ranged" ) {
            icon = _global__WEBPACK_IMPORTED_MODULE_3__["default"].player.getEquippedItem( "ranged" );
            if ( !icon ) {
                icon = _global__WEBPACK_IMPORTED_MODULE_3__["default"].player.baseWeapon.getIcon();
            } else {
                icon = icon.getIcon();
            }
        } else {
            icon = new Skill( this.__key,{ filtering: filtering,flip: flip } );
        }

        return icon;
    }

    getInventorySprite() {
        const base = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();
        const b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "skillPanel.png",false,{ format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );
        const color = this.color;

        b.setOverrideColor( color );
        b.setAnchorPoint( 0.5,0.5 );
        base.addChild( b );
        const icon = this.getIcon();

        icon.setPosition( -60 + 16,1 );
        base.addChild( icon );
        const tw = _global__WEBPACK_IMPORTED_MODULE_3__["default"]["interface"].getHiresTextWrap( this.name );

        tw.setPosition( -60 + 35,-7 );
        tw.setTextColor( this.color );
        base.addChild( tw );

        return base;
    }

    isEquippable() {
        return false;
    }
}


Skill.property = {
    ["근접무기"]:  { image: [1,1], type: "melee",  },
    ["원거리무기"]: { image: [1,1], type: "ranged", },
    ["스매시"]:   { image: [1,1], type: "active",  },
    ["쌍검난타"]:  { image: [2, 1], type: "magic", },

};

Skill.texture = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "Skills.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } );
Skill.textureFiltered = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "Skills.png", true, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } );
Skill.width = 32;
Skill.height = 32;
Skill.tileWidth = 32;
Skill.tileHeight = 32;
Skill.perRow = Math.floor( Skill.texture.width / Skill.width );
Skill.color = {
    melee: 	 0xee145b,  	// 근접
    ranged: 	0xee145b,  	// 원거리
    active: 	0xee145b,  	// 액티브
    passive: 0xa0a0a0,	// 패시브
    magic: 	 0x00aeef,	// 마법
};




/***/ }),

/***/ "./games/Avalonika/src/global.js":
/*!***************************************!*\
  !*** ./games/Avalonika/src/global.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _engine_SceneManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/SceneManager */ "./engine/src/SceneManager.js");
/* harmony import */ var _engine_Stage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @engine/Stage */ "./engine/src/Stage.js");
/* harmony import */ var _interface_interface__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./interface/interface */ "./games/Avalonika/src/interface/interface.js");
/* harmony import */ var _saveLoad__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./saveLoad */ "./games/Avalonika/src/saveLoad.js");
/* harmony import */ var _world_world__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./world/world */ "./games/Avalonika/src/world/world.js");
/* harmony import */ var _entity_player__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./entity/player */ "./games/Avalonika/src/entity/player.js");







class AppData {
    constructor() {
        /** @type {World} */
        this.world = null;
        /** @type {Interface} */
        this.interface = null;
        /** @type {Stage} */
        this.stage = null;
        /** @type {SceneManager} */
        this.sceneManager = null;
        /** @type {SaveLoad} */
        this.saveLoad = null;
        /** @type {Player} */
        this.player = null;
    }
}

const GLOBAL = new AppData();

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (GLOBAL);


/***/ }),

/***/ "./games/Avalonika/src/interface/actionSelector.js":
/*!*********************************************************!*\
  !*** ./games/Avalonika/src/interface/actionSelector.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ActionSelector)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _world_gameMap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../world/gameMap */ "./games/Avalonika/src/world/gameMap.js");
/* harmony import */ var _autoMap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./autoMap */ "./games/Avalonika/src/interface/autoMap.js");
/* harmony import */ var _cursor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./cursor */ "./games/Avalonika/src/interface/cursor.js");
/* harmony import */ var _interface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./interface */ "./games/Avalonika/src/interface/interface.js");
/* harmony import */ var _lib_iconPack__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @lib/iconPack */ "./engine/src/lib/iconPack.js");
/* harmony import */ var _lib_button2__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @lib/button2 */ "./engine/src/lib/button2.js");
/* harmony import */ var _lib_random__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @lib/random */ "./engine/src/lib/random.js");
/* harmony import */ var _lib_colors__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @lib/colors */ "./engine/src/lib/colors.js");
/* harmony import */ var _lib_grid9__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @lib/grid9 */ "./engine/src/lib/grid9.js");
/* harmony import */ var _lib_listView__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @lib/listView */ "./engine/src/lib/listView.js");
/* harmony import */ var _entity_prop__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../entity/prop */ "./games/Avalonika/src/entity/prop.js");
/* harmony import */ var _entity_monster__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../entity/monster */ "./games/Avalonika/src/entity/monster.js");
/* harmony import */ var _entity_npc__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../entity/npc */ "./games/Avalonika/src/entity/npc.js");
/* harmony import */ var _entity_item__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../entity/item */ "./games/Avalonika/src/entity/item.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../global */ "./games/Avalonika/src/global.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../config */ "./games/Avalonika/src/config.js");





















/*

스킬과 아이템을 고른다.

*/


function spriteFunc( lv, lvItem, index, owner ) {
    let _world = owner;
    let item = lvItem.data.item;
    let spr = item.getInventorySprite();

    // spr.enableMouseDrag(true, {
    //     verticalLock:      true,
    //     mouseDownCallback: (this, e) => {
    //         e.drag.cancel = true;
    //     },
    //     mouseMoveCallback: (this, e) => {
    //         if (item.isItem && item != GLOBAL.player.baseWeapon) {
    //             e.drag.x = Math.max(e.drag.x, e.drag.ox);
    //             if (e.drag.dx > 60) { // 버리기
    //                 spr.setAlpha(0.5);
    //             } else {
    //                 spr.setAlpha(1);
    //             }
    //         } else {
    //             e.drag.x = Utils.clamp(e.drag.x, e.drag.ox, e.drag.ox + 10);
    //         }
    //         e.drag.cancel = true;
    //     },
    //     mouseUpCallback: (this, e) => {
    //         if (item.isItem && item != GLOBAL.player.baseWeapon) {
    //             e.drag.x = Math.max(e.drag.x, e.drag.ox);
    //             if (e.drag.dx > 60) { // 버리기
    //                 _world.addLog("%s{을} 바닥에 버렸다.", item.name);
    //                 GLOBAL.interface.actionSelector.unselect(item);
    //                 lv.remove(lvItem);
    //                 GLOBAL.player.inventory.removeItem(item);
    //                 item.drop(GLOBAL.player.tileX, GLOBAL.player.tileY);
    //             } else {
    //                 new Tween(spr, 100, { x: e.drag.ox }, { ease: easing.outCubic });
    //             }
    //         } else {
    //             e.drag.x = Utils.clamp(e.drag.x, e.drag.ox, e.drag.ox + 10);
    //             new Tween(spr, 100, { x: e.drag.ox }, { ease: easing.outCubic });
    //         }
    //         e.drag.cancel = true;
    //     },
    // });
    return [spr,_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalViewport.width,spr.getHeight() - 3];
}


/**
 * @this ActionSelector
 *
 * @param {*} e
 */
function onClick( e ) {
    let item = e.item.data.item;

    if ( item.isEquippable() ) {
        _global__WEBPACK_IMPORTED_MODULE_15__["default"].player.inventory.tryEquip( item,true );
    }
    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/changer_select.wav" );
    this.select( item );
    this.close();
}


/**
 * @this ActionSelector
 *
 */
function showEquips() {
    let items = [];

    //t[t.length+1] = GLOBAL.player.baseWeapon;
    {
        let t0 = _global__WEBPACK_IMPORTED_MODULE_15__["default"].player.skills;

        if ( t0.length > 0 ) {
            for ( let i in t0 ) {
                let v = t0[i];

                items.push( v );
            }
        }
    }
    /*
    if (false) {
        let t0 = [GLOBAL.player.inventory.findEquippedItemByType("ranged")];
        if (t0.length > 0) { 
            for (let i in t0) {
                let v = t0[i];
                t.push(v);
            }
        }
    }
    if (false) {
        let t0 = [GLOBAL.player.inventory.findEquippedItemByType("melee")];
        if (t0.length > 0) { 
            for (let i in t0) {
                let v = t0[i];
                t.push(v);
                console.log(v.name);
            }
        }
    }
	*/
    for ( let i in items ) {
        let v = items[i];

        if ( !this.actions.includes( v ) ) {
            this.actions.unshift( v ); // 없는 것이면 맨위에 추가
        }
    }
    for ( let i = this.actions.length - 1; i >= 0; i-- ) {
        if ( !items.includes( this.actions[i] ) ) {
            this.actions.splice( i,1 );
        }
    }
	
    //this.select() -- 주먹이라도 선택
	
    let lvItems = [];

    for ( let i in this.actions ) {
        let v = this.actions[i];

        lvItems.push( [v.name, { item: v }] );
    }

    let lv = new _lib_listView__WEBPACK_IMPORTED_MODULE_10__["default"](
        lvItems,
        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalViewport.width,
        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalViewport.height - 40,
        {
            owner:         _global__WEBPACK_IMPORTED_MODULE_15__["default"].world,
            align:         "bottom",
            //clip:          true,
            //cutOffsetBottom = 40,
            stickOnBorder: true,
            spriteFunc:    spriteFunc,
            animationFunc: ( self, spr, i ) => {
                let i2 = self.getNumOfItems() - i + 1;
                let x = spr.getX();

                spr.setX( x - 10 );
                spr.setAlpha( 0 );
                new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( spr, 100, { x: x, alpha: 1 }, { delay: i2 * 0.02, ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCubic } );
            },
        }
    );

    lv.setPosition( _config__WEBPACK_IMPORTED_MODULE_16__["default"].Interface.margin,0 );
    lv.addEventListener( "click",onClick,this );
    lv.addEventListener( "close",this.close,this );
    this.baseSpr.addChild( lv );
    this.listView = lv;
}

class ActionSelector extends _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite {
    constructor( selectedIcon ) {
        super();
        this.listView = undefined;
        this.selectedIcon = selectedIcon;
        this.actions = [];
        let [x, y, w, h] = [_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.left, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.top, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.width, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.height];
        let m = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();//helper.createBox(x,y,w,h,0xff0000,0.5);

        m.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_DOWN, ( e ) => {
            if ( this.isVisible() ) {
                this.close();
                e.stopPropagation();
            }
        } );
        this.addChild( m );
        this.setVisible( false );
        this.baseSpr = m;
    }

    refresh() {
        let action = _global__WEBPACK_IMPORTED_MODULE_15__["default"].player.selectedAction;

        this.selectedIcon.setColRow( 1, 1 );
        let icon = action.getIcon();

        if ( action.property.type == "melee" ||
			action.property.type == "ranged" ) {
            _global__WEBPACK_IMPORTED_MODULE_15__["default"]["interface"].cursor.setMode( icon.property.type );
        } else {
            _global__WEBPACK_IMPORTED_MODULE_15__["default"]["interface"].cursor.setMode( action.property.type );
        }
        this.selectedIcon.clearChildren();
        icon.setX( -8 );
        this.selectedIcon.addChild( icon );
    }

    select( action ) {
        action = action || _global__WEBPACK_IMPORTED_MODULE_15__["default"].player.selectedAction;
        _global__WEBPACK_IMPORTED_MODULE_15__["default"].player.selectedAction = action;
        this.refresh();
        // 마지막에 쓴걸 맨아래로
        let idx;

        for ( let i = 0; i < this.actions.length; i++ ) {
            let v = this.actions[i];

            console.log( v.name );
            if ( v == action ) {
                idx = i;
                break;
            }
        }
        this.actions.splice( idx );
        this.actions.push( action );
    }


    // 장비중인 아이템을 버리거나 할 경우
    unselect( item ) {
        if ( item == _global__WEBPACK_IMPORTED_MODULE_15__["default"].player.selectedAction ) {
            if ( _global__WEBPACK_IMPORTED_MODULE_15__["default"]["interface"].cursor.mode == "hybrid" ) {
                let equipRanged = _global__WEBPACK_IMPORTED_MODULE_15__["default"].player && _global__WEBPACK_IMPORTED_MODULE_15__["default"].player.inventory.findEquippedItemByType( "ranged" );
                let equipMelee = _global__WEBPACK_IMPORTED_MODULE_15__["default"].player && _global__WEBPACK_IMPORTED_MODULE_15__["default"].player.inventory.findEquippedItemByType( "melee" );

                if ( equipRanged ) {
                    this.select( equipRanged );
                } else {
                    this.select( equipMelee );
                }
            } else {
                this.select( _global__WEBPACK_IMPORTED_MODULE_15__["default"].player.baseWeapon );
            }
        }
        this.refresh();
    }

    open() {
        _global__WEBPACK_IMPORTED_MODULE_15__["default"]["interface"].hudLayer.addChild( this );
        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/changer_open.wav" );
        _global__WEBPACK_IMPORTED_MODULE_15__["default"]["interface"].hideInfo();
        showEquips.call( this );
        this.setVisible( true );
    }

    close() {
        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/changer_close.wav" );
        this.setVisible( false );
        this.baseSpr.clearChildren();
        this.removeFromParent();
        _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.showMapInfo( _global__WEBPACK_IMPORTED_MODULE_15__["default"].player.tileX, _global__WEBPACK_IMPORTED_MODULE_15__["default"].player.tileY );
    }

    isOpen() {
        return this.isVisible();
    }
}




/***/ }),

/***/ "./games/Avalonika/src/interface/autoMap.js":
/*!**************************************************!*\
  !*** ./games/Avalonika/src/interface/autoMap.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AutoMap)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../global */ "./games/Avalonika/src/global.js");
/* harmony import */ var _lib_iconPack__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @lib/iconPack */ "./engine/src/lib/iconPack.js");
/* harmony import */ var _lib_grid9__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @lib/grid9 */ "./engine/src/lib/grid9.js");
/* harmony import */ var _world_world__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../world/world */ "./games/Avalonika/src/world/world.js");
/* harmony import */ var _world_gameMap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../world/gameMap */ "./games/Avalonika/src/world/gameMap.js");
/* harmony import */ var _lib_visibilityTile__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @lib/visibilityTile */ "./engine/src/lib/visibilityTile.js");












let clipWidth = 100;
let clipHeight = 100;
// 그리기용
let p0 = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Pixel( 0xffffff,1,1,1 );
let p1 = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Pixel( 0xffffff,1,1,1 );
let p2 = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Pixel( 0xffffff,1,1,1 );
let p3 = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Pixel( 0xffffff,1,1,1 );
let p4 = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Pixel( 0xffffff,1,1,1 );

p1.setPosition( 0,-1 );
p2.setPosition( 1,0 );
p3.setPosition( 0,1 );
p4.setPosition( -1,0 );
p0.addChild( p1 );
p0.addChild( p2 );
p0.addChild( p3 );
p0.addChild( p4 );

/**
 * @this AutoMap
 *
 * @param {Event} e
 */
function onPointerDown( e ) {
    if ( this.hitTestPointPixel( e.x,e.y ) ) {
        let { x: ex, y: ey } = this.getParent().globalToLocal( e.x, e.y );//stageSprite.globalToLocal(e.x,e.y);

        this.__drag = { ox: this.getX(), oy: this.getY(), ex: ex, ey: ey };
        e.stopPropagation();
    }
}

/**
 * @this AutoMap
 *
 * @param {Event} e
 */
function onPointerUp( e ) {
    if ( this.__drag ) {
        let { x: ex, y: ey } = this.getParent().globalToLocal( e.x, e.y );//stageSprite.globalToLocal(e.x,e.y);
        let x = ex + this.__drag.ox - this.__drag.ex;
        let y = ey + this.__drag.oy - this.__drag.ey;

        this.setPosition( x,y );
        this.__drag = null;
        e.stopPropagation();
    }
}

/**
 * @this AutoMap
 *
 * @param {Event} e
 */
function onPointerMove( e ) {
    if ( this.__drag ) {
        let { x: ex, y: ey } = this.getParent().globalToLocal( e.x, e.y );//stageSprite.globalToLocal(e.x,e.y);
        let x = ex + this.__drag.ox - this.__drag.ex;
        let y = ey + this.__drag.oy - this.__drag.ey;

        this.setPosition( x,y );
        e.stopPropagation();
    }
}

/**
 *
 *
 * @class AutoMap
 * @extends {Sprite}
 */
class AutoMap extends _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite {
    constructor() {
        super();
        this.mapScale = 2;
        this.clear();
        let p = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Pixel( 0xffffff,1 );

        p.setScale( this.mapScale );
        let mc = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.MovieClip( [
            [0,30,p,{ alpha:  [1,0],
                      scaleX: [this.mapScale * 2,this.mapScale],
                      scaleY: [this.mapScale * 2,this.mapScale],
                      x:      [-this.mapScale,-this.mapScale / 2],
                      y:      [-this.mapScale, -this.mapScale / 2]
            }],
            [30,"goto",0]
        ] );

        this.mapLayer = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();
        this.mapLayer.addChild( mc );
        this.addChild( this.mapLayer );
        this.relX = 0;
        this.relY = 0;
        this.xMin = Number.MAX_VALUE;
        this.xMax = Number.MIN_VALUE;
        this.yMin = Number.MAX_VALUE;
        this.yMax = Number.MIN_VALUE;
        this.mapLayer
            .on( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_DOWN,onPointerDown,this )
            .on( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_UP,onPointerUp,this )
            .on( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_MOVE,onPointerMove,this );
    }

    clear() {
        if ( this.bitmap ) this.bitmap.removeFromParent();
        if ( _global__WEBPACK_IMPORTED_MODULE_1__["default"].world && _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.map ) {
            this.rtt = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.RenderTarget( _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.map.width, _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.map.height );
            this.bitmap = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( this.rtt );
            this.addChildAt( this.bitmap, 0 );
            this.bitmap.setScale( this.mapScale );
            this.bitmap.setBlendMode( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite.BlendModes.SCREEN );
        }
    }



    setPlayerPosition( x, y ) {
        this.bitmap.setPosition( Math.floor( -x * this.mapScale + 1 ),Math.floor( -y * this.mapScale + 1 ) );
        [this.relX, this.relY] = [x, y];
        this.setClip( -clipWidth / 2, -clipHeight / 2, clipWidth, clipHeight );
    }

    drawTile( x,y,forceReveal ) {
        let pr = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getProperty( x,y );

        p1.setColor( 0xff0000,0 );
        p2.setColor( 0xff0000,0 );
        p3.setColor( 0xff0000,0 );
        p4.setColor( 0xff0000,0 );
        if ( forceReveal || pr.revealed ) {
            if ( ( pr.wall & _world_gameMap__WEBPACK_IMPORTED_MODULE_5__["default"].BLOCK_PASS ) != 0 ) {
                if ( forceReveal ) {
                    if ( pr.char == "E" ) {
                        p0.setColor( 0xa00000,1 );
                    } else {
                        p0.setColor( pr.mapColor != null ? pr.mapColor : 0x606060,1 );
                    }
                } else {
                    if ( pr.char == "E" ) {
                        p0.setColor( 0xff4000,1 );
                    } else {
                        p0.setColor( pr.mapColor != null ? pr.mapColor : 0x808080,1 );
                    }
                }
            } else {
                p0.setColor( pr.mapColor != null ? pr.mapColor : 0x202020,1 );
                if ( !forceReveal ) {
                    if ( !_global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getProperty( x,y - 1 ).revealed ) {
                        p1.setColor( 0xff4000,1 );
                    }
                    if ( !_global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getProperty( x + 1,y ).revealed ) {
                        p2.setColor( 0xff4000,1 );
                    }
                    if ( !_global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getProperty( x,y + 1 ).revealed ) {
                        p3.setColor( 0xff4000,1 );
                    }
                    if ( !_global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getProperty( x - 1,y ).revealed ) {
                        p4.setColor( 0xff4000,1 );
                    }
                }
            }
            p0.setPosition( x - 1,y - 1 );
            this.rtt.draw( p0 );
        }
        this.xMin = Math.min( this.xMin,x );
        this.xMax = Math.max( this.xMax,x );
        this.yMin = Math.min( this.yMin,y );
        this.yMax = Math.max( this.yMax,y );
        let mw = this.xMax - this.xMin;
        let mh = this.yMax - this.yMin;

        this.mapScale = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.clamp( 50 / Math.max( mw,mh ),1,2 );
        this.bitmap.setScale( this.mapScale );
        this.bitmap.setPosition( Math.floor( -this.relX * this.mapScale + 1 ),Math.floor( -this.relY * this.mapScale + 1 ) );
    }

    drawAll( forceReveal ) {
        this.rtt.clear( 0x000000,1 );
        for ( let y = 0; y < _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.map.height; y++ ) {
            for ( let x = 0; x < _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.map.width; x++ ) {
                this.drawTile( x,y,forceReveal );
            }
        }

        return this.bitmap;
    }



    hitTestPointPixel( x, y ) {
        if ( !this.hitTestPoint( x, y ) ) {
            return false;
        } else {
            let { x: ex, y: ey } = this.bitmap.globalToLocal( x, y );
            let tx = Math.floor( ex );
            let ty = Math.floor( ey );

            console.log( x,y,ex,ey,this.relX,this.relY );
            if ( tx >= this.relX - 5 && tx <= this.relX + 5 && ty >= this.relY - 5 && ty <= this.relY + 5 ) {
                return true;
            } else if ( ex < this.relX - clipWidth / 2 || ex > this.relX + clipWidth / 2 ||
				ey < this.relY - clipHeight / 2 || ey > this.relY + clipHeight / 2 ) {
                return false;
            } else if ( _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getProperty( tx, ty ).revealed ) {
                return true;
            } else {
                return false;
            }
        }
    }
}





/***/ }),

/***/ "./games/Avalonika/src/interface/cursor.js":
/*!*************************************************!*\
  !*** ./games/Avalonika/src/interface/cursor.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Cursor)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../global */ "./games/Avalonika/src/global.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./games/Avalonika/src/config.js");
/* harmony import */ var _lib_iconPack__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @lib/iconPack */ "./engine/src/lib/iconPack.js");
/* harmony import */ var _lib_grid9__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @lib/grid9 */ "./engine/src/lib/grid9.js");
/* harmony import */ var _world_world__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../world/world */ "./games/Avalonika/src/world/world.js");
/* harmony import */ var _world_gameMap__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../world/gameMap */ "./games/Avalonika/src/world/gameMap.js");
/* harmony import */ var _lib_visibilityTile__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @lib/visibilityTile */ "./engine/src/lib/visibilityTile.js");
/* harmony import */ var _entity_monster__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../entity/monster */ "./games/Avalonika/src/entity/monster.js");
/* harmony import */ var _entity_pet__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../entity/pet */ "./games/Avalonika/src/entity/pet.js");
/* harmony import */ var _entity_npc__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../entity/npc */ "./games/Avalonika/src/entity/npc.js");












/*

게임의 조작계에 해당하는 부분
플레이어 캐릭터에게 interact나 moveTo 등을 불러주게 된다.

여기 코드 때 되면 대수술 정리 해야할 것 같다.
처음엔 커서였는데 모든 조작이 여기에 의존하고 있음.
_controller 같은게 되어야 하지 않을까 싶은 생각이 듬

*/



const typeToCol = {
    ["tile"]:     1,
    ["door"]:     2,
    ["interact"]: 3,
    ["talk"]:     4,
    ["attack"]:   5,
    ["aim"]:      6,
    ["player"]:   7,
    ["target"]:   8,
};

//-------------------------------------------------------------------------------------------------------------------
// 마우스 이벤트 처리
//-------------------------------------------------------------------------------------------------------------------

/**
 * @this Cursor
 *
 * @param {*} e
 */
function onMouseWheel( e ) {
    //log(e.wheel);
    if ( this.isVisibleDeeply() ) {
        _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.sightManager.setZoom( _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.sightManager.getZoom() - e.wheel / 1000 );
    }
    //this.setType("tile");
}

/**
 * @this Cursor
 *
 * @param {number} ex
 * @param {number} ey
 * @param {boolean} immediatly
 */
function onPointerHold( ex,ey,immediatly ) {
    this.holdTimer = null;

    if ( this.__drag ) {
        console.log( "홀드" );
        this.__drag.dragCursor = true;
        const { x: tx, y: ty } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.stageToTile( ex,ey );
        let { x: ex2, y: ey2 } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.tileCenterToStage( tx,ty );
        const sx = 1 / _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.zoom;
        const sy = 1 / _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.zoom;

        [ex2,ey2] = [ex2 * sx,ey2 * sy];
        this.__drag.ex = ( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalViewport.width / 2 - ex2 + ex );
        this.__drag.ey = ( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalViewport.height / 2 - ey2 + ey );

        if ( this.twCursor ) {
            this.twCursor.stop();
        }

        if ( immediatly ) {
            this.x = ex2;
            this.y = ey2;
            this.twCursor = null;
        } else {
            this.twCursor = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( this, 300, { x: ex2, y: ey2 }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCubic } )
                .onComplete( () => {
                    this.twCursor = null;
                } );
        }

        this.__drag.click = false;
        this.__drag.holded = true;
    }
}



/**
 * @this Cursor
 * @param {*} e 
 */
function onPointerDown( e ) {
    if ( !this.isVisibleDeeply() ) {
        return;
    }

    console.log( "커서" + this.getPath( true ) );
    this.hideAutoAction();
    const { x: ex, y: ey } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].stage.globalToLocal( e.x,e.y );

    this.__drag = { ox: _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.viewX, oy: _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.viewY, ex: ex, ey: ey, click: true, cx: this.x, cy: this.y };

    if ( !this.locked ) {
        if ( e.type == _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.MOUSE_DOWN ) {
            this.__drag.dragCursor = true;
            onPointerHold.call( this,ex, ey,true );
        } else {
            if ( this.mesh.hitTestPoint( e.x, e.y ) ) {
                //log("커서 눌림");
                this.__drag.dragCursor = true;
            }

            this.holdTimer = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer( 500, 1 ).on( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.TIMER, () => {
                onPointerHold.call( this, ex, ey );
            } );
            this.holdTimer.start();
        }
    }
}

/**
 * @this Cursor
 * @param {*} e 
 */
function onPointerMove( e ) {
    if ( this.__drag ) {
        if ( this.aimLine ) {
            this.aimLine.removeFromParent();
        }

        const { x: ex, y: ey } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].stage.globalToLocal( e.x,e.y );
        // const { x: ex, y: ey } = { x: e.x,y: e.y };// GLOBAL.stage.globalToLocal( e.x,e.y );
        const sx = 1 / _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.zoom;
        const sy = 1 / _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.zoom;
        const dx = ( this.__drag.ex - ex ) / sx;
        const dy = ( this.__drag.ey - ey ) / sy;
        const x = this.__drag.ox + this.moveDir * dx;
        const y = this.__drag.oy + this.moveDir * dy;
        const { x: x1, y: y1 } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.stageToWorld( this.__drag.ex, this.__drag.ey );
        const pos = this.getPosition();
        const { x: x2, y: y2 } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.stageToWorld( pos.x,pos.y );

        if ( !this.locked ) {
            this.stopSnap();

            if ( this.__drag.dragCursor ) {
                if ( this.twCursor == null ) {
                    this.setPosition( this.__drag.cx - dx * this.mesh.getScaleX(),this.__drag.cy - dy * this.mesh.getScaleY() );
                }
            } else {
                _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.sightManager.moveViewTo( x,y );
            }

            if ( Math.abs( dx ) > _config__WEBPACK_IMPORTED_MODULE_2__["default"].World.tileWidth / 2 ||
                Math.abs( dy ) > _config__WEBPACK_IMPORTED_MODULE_2__["default"].World.tileHeight / 2 ) {
                this.__drag.click = false;
                _global__WEBPACK_IMPORTED_MODULE_1__["default"]["interface"].hideInfo();

                if ( this.holdTimer ) {
                    this.holdTimer.stop();
                    this.holdTimer = null;
                }
            }

            this.dragging( x1,y1,x2,y2 );
            e.stopPropagation();
        } else {
            console.log( "락" );
        }
    }
}

/**
 * @this Cursor
 * @param {*} e 
 */
function onPointerUp( e ) {
    console.log( "커서UP " + this.getPath( true ) );

    if ( this.holdTimer ) {
        this.holdTimer.stop();
        this.holdTimer = null;
    }

    if ( this.__drag ) {
        if ( this.aimLine ) {
            this.aimLine.removeFromParent();
        }

        const { x: ex, y: ey } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].stage.globalToLocal( e.x,e.y );
        const sx = 1 / _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.zoom;
        const sy = 1 / _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.zoom;
        const dx = ( this.__drag.ex - ex ) / sx;
        const dy = ( this.__drag.ey - ey ) / sy;
        const x = this.__drag.ox + this.moveDir * dx;
        const y = this.__drag.oy + this.moveDir * dy;
        const { x: x1, y: y1 } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.stageToWorld( this.__drag.ex, this.__drag.ey );
        const pos = this.getPosition();
        const { x: x2, y: y2 } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.stageToWorld( pos.x,pos.y );

        if ( this.locked ) {
            if ( this.__drag.click ) {
                const { x: rcx, y: rcy } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.stageToWorld( ex,ey );

                this.reservedClick.push( [rcx, rcy, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.now()] );
                console.log( "선입력 저장",this.reservedClick.length );
            }
        } else {
            if ( this.__drag.dragCursor ) {
            } else {
                _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.sightManager.moveViewTo( x,y );
            }

            if ( !this.__drag.holded ) this.snapToWorld();

            if ( this.__drag.click ) {
                this.__drag = null;
                const { x: tx, y: ty } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.stageToWorld( ex, ey );

                this.click( tx,ty );
            } else {
                this.__drag = null;
                this.drag( x1,y1,x2,y2 );
            }

            e.stopPropagation();
        }
    }
}



//-------------------------------------------------------------------------------------------------------------------
// 터치 핸들러
//-------------------------------------------------------------------------------------------------------------------

/**
 * @this Cursor
 * @param {*} e 
 */
function onTouchesBegin( e ) {
    const te = e.touches;

    if ( te.length == 2 && this.isVisibleDeeply() ) {
        if ( this.aimLine ) {
            this.aimLine.removeFromParent();
        }

        this.__drag = null;
        const [x1,y1,x2,y2] = [te[0].x,te[0].y,te[1].x,te[1].y];

        this.__touches = { dist: Math.sqrt( ( x2 - x1 ) * ( x2 - x1 ) + ( y2 - y1 ) * ( y2 - y1 ) ), zoom: _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.sightManager.getZoom() };
        e.stopPropagation();
        /*	} else if (te.length==1) {
		e.x, e.y = e.touch.x, e.touch.y;
		onMouseDown(self,e)*/
    }
}

/**
 * @this Cursor
 * @param {*} e 
 */
function onTouchesMove( e ) {
    const te = e.touches;

    if ( this.__touches && te.length == 2 ) {
        const [x1,y1,x2,y2] = [te[0].x,te[0].y,te[1].x,te[1].y];
        const dist = Math.sqrt( ( x2 - x1 ) * ( x2 - x1 ) + ( y2 - y1 ) * ( y2 - y1 ) );
        const delta = this.__touches.dist / ( dist + 0.00001 );

        //log("핀치줌델타",delta);
        _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.sightManager.setZoom( this.__touches.zoom *  delta );
        this.setType( "tile" );
        e.stopPropagation();
        /*	} else if (te.length==1) {
		e.x, e.y = e.touch.x, e.touch.y;
		onMouseMove(self,e)*/
    }
}

/**
 * @this Cursor
 * @param {*} e 
 */
function onTouchesEnd( e ) {
    const te = e.allTouches;

    if ( this.__touches ) {
        this.__touches = null;
        this.snapToPlayer();
        e.stopPropagation();
        /*	} else if (te.length==1) {
		e.x, e.y = e.touch.x, e.touch.y;
		onMouseUp(self,e)*/
    }
}


/**
 * @this Cursor
 * @param {*} e 
 */
function onKeyDown( e ) {
    if ( this.locked ) {
        return;
    }

    console.log( e.keyCode );
    const [rx,ry] = [_global__WEBPACK_IMPORTED_MODULE_1__["default"].player.tileX, _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.tileY];

    this.__drag = null;
    let ax,ay;

    if ( e.keyCode == _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.KeyCode.LEFT ) {
        [ax, ay] = [-1, 0];
    } else if ( e.keyCode == _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.KeyCode.RIGHT ) {
        [ax, ay] = [1, 0];
    } else if ( e.keyCode == _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.KeyCode.UP ) {
        [ax, ay] = [0, -1];
    } else if ( e.keyCode == _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.KeyCode.DOWN ) {
        [ax, ay] = [0, 1];
    } else if ( e.keyCode == _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.KeyCode.S ) {
        _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.entityManager.safeExecute( () => {
            _global__WEBPACK_IMPORTED_MODULE_1__["default"].saveLoad.save();
        } );
    } else if ( e.keyCode == _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.KeyCode.L ) {
        _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.entityManager.safeExecute( () => {
            _global__WEBPACK_IMPORTED_MODULE_1__["default"].saveLoad.load();
        } );
    } else if ( e.keyCode == _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.KeyCode.P ) {
        // GLOBAL.player.playMusic( `
        // MML@t106v15L8r16G#.ABB>C16C.&C<E.F#.&F#A.B.>D<B.,
        // v0r16L8D.DEG#.G.&GC.C.&CF#.F#.rG.G.&GE4E4D#4F#4,
        // v0r16<L8E.F#G#<A2>D4.<F#G2>C2<F#4.AB2r16E.EF#G#.;
        // ` );
        _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.playMusic( `
        MML@t106L8r16G#.ABB>C16C.&C<E.F#.&F#A.B.>D<B.BB16B16B16BAAG16GF#.r.D#16AGGA16B.G#ABB>C16C.&Cr16E.DCC<B16B.&BF#E16EB16B16B16BA16A.GGF#AG16G16E2>F#.E.<B>G.F#.&F#A.G.<A16>e16F.E.<A>F.E.<A>G.F.&F<G32>C#32E32A4.&A32r<FFF16F.<AB->CC<B-16>F.&FrB-.B-16D16E16FFFF16F.GEDDE16C.&CrG.A.FDDE16F.DEFDA16A.&ArF.A16F16G16AAAA16A.B-GF16G.&Gr4A4>E4F<FFF16F.<AB->CC<B-16>F.&F>C<A.B-16D16E16FFFF16F.EFG16A2&A16rAB-F#o1B>B<B>B<B->B-<B->B-<A>A<A>AD>D<D>D<G#>G#<G#>G#<A>A<A>A<D4>D<D4A>D<DG.>D16G4<CG>C<CF.>C16F<F<B->FB-<B-B.B16r4B.>BB.E>E<F#>F#<G#>G#<E4o4B>C16C.&Cr<F#GAAB16B.&Br4r16B16B16B16BAAG16GF#.r.D#16AGGA16B.G#ABB>C16C.&Cr16E.DCC<B16B.&Br4r16B16B16B16BA16A.GGF#AG16G16o2E>E<E>E<D>D<D>D<C>C<C>C<<B>B<B>BD>D<D>D<C>C<C>C<B->B-<B->B-<A2L32DA1.r4.r16.,
        v14r16L8D.DEG#.G.&GC.C.&CF#.F#.rG.G.&GE4E4D#4F#4r16E.ED#D4D4<<A.>AE16<AD.>D.<DG.>GD16<GCG>C<CF#4>F#<F#<B.>B.<B>E>E<E>E<D>D<D>D<C>C<C>C<<B>B<B>BD>D<D>D<C>C<C>C<<B->B-<B->B-<A2>D4>D4<DA>D4<G4>G.D16<G>DG<GC4>C.<G16C4>C4<F4>F.C16<F>CF4<<B-4>B-4<B->FB-<B-B4>B4<BB>B4C4>C.<G16C4>C4<C#4>C#.<A16C#A>C#<C#D4>D4<DA>D4<G4>G..D16<G>DG<GC4>C.<G16C4>C4<E-4>E-.<E-16DD>D<D>>v15A.G.GrGAEG.F.F4.DEFF16E.EFEGF16F16D2rAB-F#A.G.GrGAEG.F.F4FGFE.E.ED#.B.AAG#G#A16BG#.ABo1A4>A4DA>D<DG4>G<GCG>C<CF#4>F#4<<B4>B4E16>E<E16>E<F#G#>EG#<G#<A4>A4DA>D<DF4>F<FEB>E<E<A.>E16A4<B>F#B<Bo5F#.E.<B>F#.E.<B>G.F#.&F#A.G.<A16>E16F.E.<A>F.E.<A>G.F.&FL32rC#EA4.&Arr<<F#A>CE1&E4.r4.rrr,
        v14r16<L8E.F#G#<A2>D4.<F#G2>C2<F#4.AB2r16E.EF#G#.>E.&E>L4EGF#AAGL8<AG16G.&G>E.E<A.>E4D#4>F#.E.<BB.B.GB.B.&B>D#.D#.r<A.A.rA.A.rA.A.&Ar2<A.>C4r.F.A.B-.D16r4.F.F.<B-.B-16r4.>D.<B-.>C2rC.E.C.<A16r4.>A4.F2rD.D.F.C16r4.G.F.B-.C16r4E4A4A4r4.>C.<A.B-2rF.F.D2r<B-.>E-.F.D-16r4F#4C4>A.G.&GA.B-.&B->C.<F.&FE.F.&FF.E.&EF.E.&ED.<A.A.B-.><F4L2DDE-D<AB>E<B4>E4L8E-.G.CE-.E-.CE.F#.>D<B4E4E.CC.<B.>D.rE16>E.ED#D<E.G.D.G.CF#.F#.DA.F.AA.G#.&G#E4ECD#<B.B.L2>GGBAAAAG;
        ` );
        // GLOBAL.player.playMusic( `
        // MML@t106v10cr>d,v10er>e,v10gr>a;` );
        // GLOBAL.player.playMusic( `MML@t106v15cdefgab>c,>c<bafedc;` );
    }

    if ( ax != null ) {
        e.stopPropagation();
        const isInteractTile = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getProperty( rx + ax,ry + ay ).char == "E";
 
        if ( isInteractTile || _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.entityManager.getEntity( rx + ax,ry + ay ) ) {
            _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.interact( rx + ax,ry + ay );
        } else {
            _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.findPathAndMoveTo( rx + ax,ry + ay );
        }
    }
}

/**
 * @this Cursor
 * @param {number} x
 * @param {number} y
 */
function snapToXy( x, y ) {
    if ( _global__WEBPACK_IMPORTED_MODULE_1__["default"]["interface"].isSidePanelOpened() ) {
        return;
    }

    if ( this.tw ) {
        this.tw.stop();
    }

    if ( this.twCursor ) {
        this.twCursor.stop();
    }

    //log("Snap",x,y);
    this.twCursor = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( this, 500, { x: _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.viewWidth / 2, y: _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.viewHeight / 2 }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCubic } );
    const tw = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( _global__WEBPACK_IMPORTED_MODULE_1__["default"].world, 500, { viewX: x, viewY: y }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCubic } )
        .onChange( () => {
            console.assert( !Number.isNaN( _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.viewX ) );

            if ( !_global__WEBPACK_IMPORTED_MODULE_1__["default"]["interface"].isSidePanelOpened() ) {
                _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.sightManager.moveViewTo( _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.viewX + _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getX() / 2, _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.viewY + _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getY() / 2 );
            }
        } )
        .onComplete( () => {
            this.tw = null;
        } );

    this.tw = tw;
}

/**
 *
 * @this Cursor
 * @param {Sprite} icon1
 * @param {Sprite} icon2
 * @returns {Sprite}
 */
function getActionBox( icon1, icon2 ) {
    const m = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh();
    const wf = new _lib_grid9__WEBPACK_IMPORTED_MODULE_4__["default"]( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "BlackFrame.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );
    const w = icon1.getWidth() + icon2.getWidth() + 40;
    const h = Math.max( icon1.getHeight(), icon2.getHeight() ) + 10;
    const baseSpr = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();

    wf.setRect( -w / 2, -h / 2, w, h );
    wf.setAlpha( 0.8 );
    const b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "useTo.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );

    b.setOverrideColor( 0xff9000 );
    b.setAnchorPoint( 0.5, 0.5 );
    b.setPosition( 0, 0 );
    b.setBlendMode( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite.BlendModes.ADD );
    const mc = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.MovieClip( [
        [ 0, 60, b,{ alpha: [ 0, 1] }],
        [61, 120, b, { alpha: [1, 0] }],
        [120,"goto",0]
    ] );

    baseSpr.addChild( wf );
    baseSpr.addChild( mc );
    icon1.setPosition( -w / 2 / 2.1, -2 );
    baseSpr.addChild( icon1 );
    icon2.setPosition( w / 2 / 2.1, -2 );

    baseSpr.addChild( icon2 );

    return baseSpr;
}





class Cursor extends _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite {
//-------------------------------------------------------------------------------------------------------------------
// 초기화
//-------------------------------------------------------------------------------------------------------------------

    constructor() {
        super();
        this.mesh = new _lib_iconPack__WEBPACK_IMPORTED_MODULE_3__["default"]( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "cursors.png",false,{ format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA4444 } ),1,1,32,32 );
        this.addChild( this.mesh );
        this.setType( "player" );
        this.moveDir = 1;
        this.mode = "melee";
        this.reservedClick = [];
        this.__touches = null;
        this.setPosition( _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.viewWidth / 2,_global__WEBPACK_IMPORTED_MODULE_1__["default"].world.viewHeight / 2 );
        this.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_DOWN,onPointerDown,this );
        this.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_UP,onPointerUp,this );
        this.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_MOVE,onPointerMove,this );
        this.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.KEY_DOWN, onKeyDown, this );
        this.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.MOUSE_WHEEL,onMouseWheel,this );
        this.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.TOUCHES_BEGIN,onTouchesBegin,this );
        this.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.TOUCHES_END,onTouchesEnd,this );
        this.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.TOUCHES_MOVE,onTouchesMove,this );
    }

	
    holded() {
        if ( this.__drag && this.__drag.holded ) {
            return true;
        }
    }

    cancelHold() {
        if ( this.holdTimer ) {
            this.holdTimer.stop();
            this.holdTimer = null;
        }

        this.__drag = null;
    }

    setType( type,color ) {
        this.mesh.setColRow( typeToCol[type],1 );

        if ( color ) {
            this.mesh.setOverrideColor( color );
        } else {
            this.mesh.setOverrideColor( 0xffffff,1 );
        }
    }

    resetScale() {
        const sx = 1 / _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.zoom;
        const sy = 1 / _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.zoom;

        this.mesh.setScale( sx,sy );
    }

    snapToWorld() {
        const pos = this.getPosition();
        const { x: tx, y: ty } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.stageToTile( pos.x,pos.y );

        if ( !this.tw ) {
            const { x: px, y: py } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.tileCenterToWorld( tx,ty );

            snapToXy.call( this,px,py );
        }

        return [tx,ty];
    }

    snapToPlayer() {
        const [tx,ty] = [_global__WEBPACK_IMPORTED_MODULE_1__["default"].player.tileX, _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.tileY];

        if ( !this.__drag ) {
            const { x: px, y: py } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.tileCenterToWorld( tx,ty );

            snapToXy.call( this,px,py );
        }

        this.setType( "player" );

        return [tx,ty];
    }

    stopSnap() {
        if ( this.tw ) {
            this.tw.stop();
            this.tw = null;
        }

        if ( !this.holded() && this.twCursor ) {
            this.twCursor.stop();
            this.twCursor = null;
        }
    }

    setTileXy( x,y ) {
        const { x: tx, y: ty } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.tileCenterToStage( x,y );

        this.setPosition( tx,ty );
    }

    getTileXy() {
        const { x: tx, y: ty } = this.getPosition();

        return _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.stageToTile( tx,ty );
    }


    lock( time ) {
        if ( this.unlockTimer ) {
            this.unlockTimer.stop();
        }

        this.locked = true;
        //this.__drag = null;
        this.setVisible( false );

        if ( time ) {
            this.unlockTimer = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( time,this.unlock,this );
        }
    }

    unlock() {
        if ( this.unlockTimer ) {
            this.unlockTimer.stop();
        }

        this.unlockTimer = null;
        this.locked = false;
        this.setVisible( true );
    }

    processReservedClick() {
        while ( this.reservedClick.length > 0 && this.reservedClick[0][2] < _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.now() - 500 ) {
            //log("0.5초 전 클릭 버림",this.reservedClick[1][3],os.timer());
            this.reservedClick.shift();
        }

        if ( this.reservedClick.length > 0 ) {
            console.log( "선입력처리", this.reservedClick.length );
            this.click( this.reservedClick[0][0],this.reservedClick[0][1] );
            this.reservedClick.shift();
        }
    }

    setMode( mode ) {
        this.mode = mode;
    }

    click( x,y ) {
        let { x: tx, y: ty } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.worldToTile( x,y );
        let c = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.entityManager.getEntity( tx,ty );
        const isAttackableCreature = c && ( c instanceof _entity_monster__WEBPACK_IMPORTED_MODULE_8__["default"] && !( c instanceof _entity_pet__WEBPACK_IMPORTED_MODULE_9__["default"] ) && !( c instanceof _entity_npc__WEBPACK_IMPORTED_MODULE_10__["default"] ) ) && c.canBeSeen();
        const isProp = c && c.isProp && c.canBeSeen();
        const isNormalProp = isProp && !c.property.needPickAxe;
        const isStoneProp = isProp && c.property.needPickAxe;
        const dist =  _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getDistance( _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.tileX,_global__WEBPACK_IMPORTED_MODULE_1__["default"].player.tileY,tx,ty );

        //log(tx,ty,x,y);
        _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.stop();
        //플레이어 클릭 = 쉬기
        //몬스터클릭 = 레인지이면 레인지 공격
        //         = 밀리 범위이면 밀리 공격
        //땅클릭 = 근거리 적있으면 밀리 공격
        //      = 레인지, 범위에 적있으면 레인지 공격
        //      = 떨어진 아이템이 있으면 걸어가서 집기
        //      = 없으면 쉬기

        if ( c == _global__WEBPACK_IMPORTED_MODULE_1__["default"].player ) {
            this.setType( "player" );
            _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.doNothing( "아무 행동도 하지 않고 기다렸다." );

            return;
            // 탈출
        } else {
            let mode = this.mode;

            if ( isAttackableCreature && this.mode == "melee" && dist == 1 ) {
                mode = "melee";
            } else if ( isAttackableCreature && this.mode == "ranged" ) {
                mode = "ranged";
            } else if ( isProp && dist == 1 ) {
                mode = "melee";
            } else if ( isNormalProp && dist > 1 && this.mode == "ranged" ) {
                mode = "ranged";
            } else {
                //검색
                const t = _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.getNearEntities( 5,45,x,y );
                let doNothing = true;

                for ( const i in t ) {
                    const v = t[i];
                    const isAttackableCreature = v && ( v instanceof _entity_monster__WEBPACK_IMPORTED_MODULE_8__["default"] && !( v instanceof _entity_pet__WEBPACK_IMPORTED_MODULE_9__["default"] ) && !( v instanceof _entity_npc__WEBPACK_IMPORTED_MODULE_10__["default"] ) );

                    if ( isAttackableCreature && v.canBeSeen()[0] ) {
                        c = v;
                        [tx,ty] = [c.tileX,c.tileY];
                        ( { x, y } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.tileCenterToWorld( tx,ty ) );
                        doNothing = false;
                        break;
                    } else if ( v && v.isProp && !v.property.needPickAxe && v.canBeSeen()[0] ) {
                        c = v;
                        [tx,ty] = [c.tileX,c.tileY];
                        [x, y ] = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.tileCenterToWorld( tx,ty ).xy;
                        doNothing = false;
                        break;
                    } else if ( v && v.isProp && v.property.needPickAxe && _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getDistanceBetweenEntities( v,_global__WEBPACK_IMPORTED_MODULE_1__["default"].player ) == 1 ) {
                        c = v;
                        [tx,ty] = [c.tileX,c.tileY];
                        [x,y] = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.tileCenterToWorld( tx,ty ).xy;
                        doNothing = false;
                        break;
                    }
                }

                // 아무것도 안함
                if ( doNothing ) {
                    const items = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.entityManager.getItems( tx,ty );

                    if ( items ) {
                        console.log( "아이템 집기" );
                    }

                    // skip;
                    _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.interact( tx,ty,false,x,y );

                    return;
                }
            }

            this.setType( "aim" );
            _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.interact( tx,ty,mode == "ranged",x,y );
        }
    }

    drag( x1,y1,x2,y2 ) {
        const { x: tx, y: ty } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.worldToTile( x2,y2 );
        const [ptx,pty] = [_global__WEBPACK_IMPORTED_MODULE_1__["default"].player.tileX,_global__WEBPACK_IMPORTED_MODULE_1__["default"].player.tileY];
        const c = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.entityManager.getEntity( tx,ty );
        const isAttackableCreature = c && ( c instanceof _entity_monster__WEBPACK_IMPORTED_MODULE_8__["default"] && !( c instanceof _entity_pet__WEBPACK_IMPORTED_MODULE_9__["default"] ) && !( c instanceof _entity_npc__WEBPACK_IMPORTED_MODULE_10__["default"] ) ) && c.canBeSeen();
        const isProp = c && c.isProp && c.canBeSeen();
        const isNormalProp = isProp && !c.property.needPickAxe;
        const isStoneProp = isProp && c.property.needPickAxe;
        const pr = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getProperty( tx,ty );
        // 다른 오브젝트로 확장해야함
        const isInteractTile = !c && pr.char == "E"; 
        const distFromPlayer = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getDistance( ptx,pty,tx,ty );
        const mode = this.mode;
        let skip;

        // 공격이 우선
        if ( isAttackableCreature || isProp ) {
            this.setType( "aim" );

            if ( mode == "ranged" ) {
                // 적에게 드래그했으면 발사
                if ( isProp ) {
                    // 활을 들어도 1칸 거리면 근접공격
                    _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.interact( tx,ty,distFromPlayer > 1,x2,y2 );
                } else {
                    _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.interact( tx,ty,true,x2,y2 );
                }

                skip = true;
            } else if ( distFromPlayer == 1 ) {
                // 한칸 옆에 있으면 그냥 그 놈 공격
                _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.interact( tx,ty,false,x2,y2 );
                skip = true;
            }
            //this.setType("tile");
        }

        if ( !skip ) {
            if ( !pr.revealed ) {
                const { x: aim_x1, y: aim_y1 } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.tileCenterToWorld( ptx,pty );
                const [r,tx2,ty2,cx,cy] = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.map.visibilityTileChecker.traceRay( aim_x1,aim_y1,x2,y2,
                                                                                           _config__WEBPACK_IMPORTED_MODULE_2__["default"].World.tileWidth,_config__WEBPACK_IMPORTED_MODULE_2__["default"].World.tileHeight,_world_gameMap__WEBPACK_IMPORTED_MODULE_6__["default"].BLOCK_PASS | _world_gameMap__WEBPACK_IMPORTED_MODULE_6__["default"].BLOCK_VISION );

                if ( _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getProperty( tx2,ty2 ).char == "E" ) {
                    // 이동 후에 문을 연다
                    this.setType( "door" );
                    _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.findPathAndMoveTo( tx2,ty2,tx2,ty2 );
                } else {
                    // 아니면 이동
                    _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.findPathAndMoveTo( tx,ty );
                }
            } else if ( isInteractTile && distFromPlayer == 1 ) {
                _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.interact( tx,ty );
            } else {
                if ( pr.char == "E" ) {
                    // 이동 후에 문을 연다
                    this.setType( "door" );
                    _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.findPathAndMoveTo( tx,ty,tx,ty );
                } else {
                    // 아니면 이동
                    _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.findPathAndMoveTo( tx,ty,tx,ty );
                }
            }
        }
    }

    dragging( x1,y1,x2,y2 ) {
        const { x: tx, y: ty } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.worldToTile( x2,y2 );
        const [ptx,pty] = [_global__WEBPACK_IMPORTED_MODULE_1__["default"].player.tileX,_global__WEBPACK_IMPORTED_MODULE_1__["default"].player.tileY];
        const c = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.entityManager.getEntity( tx,ty );
        const isAttackableCreature = c && ( c instanceof _entity_monster__WEBPACK_IMPORTED_MODULE_8__["default"] && !( c instanceof _entity_pet__WEBPACK_IMPORTED_MODULE_9__["default"] ) && !( c instanceof _entity_npc__WEBPACK_IMPORTED_MODULE_10__["default"] ) ) && c.canBeSeen()[0];
        const isProp = c && c.isProp && c.canBeSeen()[0];
        const isNormalProp = isProp && !c.property.needPickAxe;
        const isStoneProp = isProp && c.property.needPickAxe;
        const pr = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getProperty( tx,ty );
        const isInteractTile = c != null && pr.char == "E"; 
        const distFromPlayer = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getDistance( ptx,pty,tx,ty );

        if ( tx == ptx && ty == pty ) {
            this.setType( "player" );
        } else if ( this.mode == "ranged" ) {
            if ( ( isAttackableCreature || isNormalProp ) &&
				( distFromPlayer > 1 || ( distFromPlayer == 1 && this.mode == "ranged" ) ) ) {
                // 몬스터에 커서를 대고 있음
                if ( !this.__drag.aimed ) {
                    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/bow_aim.wav" );
                    this.__drag.aimed = true;
                }
				
                const { x: ox, y: oy } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.stageToWorld( this.getX(),this.getY() );
                const { x: aim_x1, y: aim_y1 } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.tileCenterToWorld( ptx,pty );
                const [r,tx,ty,cx,cy] = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.map.visibilityTileChecker.traceRay( aim_x1,aim_y1,x2,y2,
                                                                                         _config__WEBPACK_IMPORTED_MODULE_2__["default"].World.tileWidth, _config__WEBPACK_IMPORTED_MODULE_2__["default"].World.tileHeight,_world_gameMap__WEBPACK_IMPORTED_MODULE_6__["default"].BLOCK_VISION | _world_gameMap__WEBPACK_IMPORTED_MODULE_6__["default"].BLOCK_ARROW,
                                                                                         ( x,y ) => _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.entityManager.getEntity( x,y ) );
                const s = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Shape();

                s.setLineStyle( 1,0xffffff,0.5 );
                s.moveTo( aim_x1 - ox,aim_y1 - oy );
                s.lineTo( cx - ox,cy - oy );
                s.endPath();
                s.setScale( 1 / _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.zoom );
                this.addChild( s );
                this.aimLine = s;

                if ( r == _lib_visibilityTile__WEBPACK_IMPORTED_MODULE_7__["default"].EMPTY ) {
                    this.setType( "aim" );
                } else {
                    this.setType( "aim",0x303030 );
                }
            } else if ( !pr.revealed ) {
                const { x: ox, y: oy } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.stageToWorld( this.getX(),this.getY() );
                const { x: aim_x1, y: aim_y1 } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.tileCenterToWorld( ptx,pty );
                const [r,tx2,ty2,cx,cy] = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.map.visibilityTileChecker.traceRay( aim_x1,aim_y1,x2,y2,
                                                                                           _config__WEBPACK_IMPORTED_MODULE_2__["default"].World.tileWidth,_config__WEBPACK_IMPORTED_MODULE_2__["default"].World.tileHeight,_world_gameMap__WEBPACK_IMPORTED_MODULE_6__["default"].BLOCK_VISION | _world_gameMap__WEBPACK_IMPORTED_MODULE_6__["default"].BLOCK_ARROW );

                if ( _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getProperty( tx2,ty2 ).char == "E" ) {
                    this.setType( "door" );
                    const s = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Shape();

                    s.setLineStyle( 1,0xffffff,0.5 );
                    s.moveTo( aim_x1 - ox,aim_y1 - oy );
                    s.lineTo( cx - ox,cy - oy );
                    s.endPath();
                    s.setScale( 1 / _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.zoom );
                    this.addChild( s );
                    this.aimLine = s;
                } else {
                    this.setType( "tile" );
                }
            } else if ( pr.char == "E" ) {
                this.setType( "door" );
            } else if ( isInteractTile && distFromPlayer == 1 ) {
                this.setType( "interact" );
            } else {
                this.setType( "tile" );
            }
        }
    }

    // 클릭시에 나가는 액션 보여주기
    showAutoAction() {
        if ( this.autoActionSprite != null ) this.autoActionSprite.removeFromParent();
        if ( this.autoActionTargetSprite != null ) this.autoActionTargetSprite.removeFromParent();
        const [action,icon1,icon2,tx,ty] = this.getAutoAction();

        if ( !action || !icon1 || !tx ) {
            return;
        }

        /** @type {Mesh} */
        const m = getActionBox.call( this,icon1,icon2 );

        this.autoActionSprite = m;
        m.setPosition( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalViewport.width / 2, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalViewport.height - 40 );
        m.setInteractive( {
            preventRelease:        true,
            disableBasicAnimation: true,
            pressAnimation:        ( e, i ) => e.target.move( i.downThisPosition.x, i.downThisPosition.y + 3, 50 ),
            releaseAnimation:      ( e, i ) => e.target.move( i.downThisPosition.x, i.downThisPosition.y, 100 ),
            press:                 () => {
                this.cancelHold();
                this.__drag = null;
                this.doAutoAction();
            }
        } );
        const b = this.mesh.clone( typeToCol["target"],1 );

        b.setOverrideColor( 0xff9000 );
        b.setBlendMode( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite.BlendModes.ADD );
        const pos = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.tileCenterToStage( tx, ty );

        b.setPosition( pos.x,pos.y );
        const mc = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.MovieClip( [
            [0,60,b,{ alpha: [0,1],rotation: [0,360,"outCubic"] }],
            [61, 120, b, { alpha: [1, 0], rotation: [360, 720, "inCubic"] }],
            [120,"goto",0]
        ] );

        mc.addEventListenerOnStage( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.ENTER_FRAME, () => {
            const { x, y } = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.tileCenterToStage( tx, ty );
            const sx = 1 / _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.zoom;
            const sy = 1 / _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.zoom;

            b.setScale( sx, sy );
            b.setPosition( x * sx, y * sy );
        } );
        _global__WEBPACK_IMPORTED_MODULE_1__["default"]["interface"].hudLayer.origin.addChildAt( mc,0 );
        this.autoActionTargetSprite = mc;
        _global__WEBPACK_IMPORTED_MODULE_1__["default"]["interface"].hudLayer.origin.addChild( m );
    }

    hideAutoAction() {
        if ( this.autoActionSprite ) {
            const spr = this.autoActionSprite;

            new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( this.autoActionSprite,200,{ alpha: 0 } )
                .onComplete( () => {
                    if ( spr != null ) spr.removeFromParent();
                } );
            this.autoActionSprite = null;
        }

        if ( this.autoActionTargetSprite ) {
            const spr = this.autoActionTargetSprite;

            new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( this.autoActionTargetSprite,200,{ alpha: 0 } )
                .onComplete( () => {
                    if ( spr != null ) spr.removeFromParent();
                } );
            this.autoActionTargetSprite = null;
        }
    }

    getAutoAction( x,y ) {
        let c;
        let tx,ty;
        let mode;
        const t = _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.getNearEntities( 5,null,x,y );
        let doNothing = true;
        let action;
        let icon1;
        let icon2;

        // 근처의 오브젝트를 검토하고 할 수 있는 일을 찾는다
        for ( const i in t ) {
            const v = t[i];

            if ( v && v.isMonster && !v.isPet && !v.isNpc && v.canBeSeen()[0] ) {
                // 몬스터 발견
                c = v;
                [tx,ty] = [c.tileX,c.tileY];
                [x,y] = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.tileCenterToWorld( tx,ty ).xy;
                icon1 = _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.getWeaponImage();
                icon2 = c.mesh.clone();
                doNothing = false;
                break;
            } else if ( v && v.isProp && !v.property.needPickAxe && v.canBeSeen()[0] ) {
                const r = v.canBeSeen()[0];

                c = v;
                [tx,ty] = [c.tileX,c.tileY];
                [x,y] = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.tileCenterToWorld( tx,ty ).xy;
                icon1 = _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.getWeaponImage();
                icon2 = c.mesh.clone();
                doNothing = false;
                break;
            } else if ( v && v.isProp && v.property.needPickAxe && _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getDistanceBetweenEntities( v,_global__WEBPACK_IMPORTED_MODULE_1__["default"].player ) == 1 ) {
                icon1 = _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.getEquippedItemImage( "pickaxe" ) || _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.getWeaponImage();
                c = v;
                [tx,ty] = [c.tileX,c.tileY];
                [x,y] = _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.tileCenterToWorld( tx,ty ).xy;
                icon2 = c.mesh.clone();
                doNothing = false;
                break;
            }
        }

        if ( doNothing ) { 
            // 근처에서 발견한게 없음. 아무것도 안함
        } else if ( _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getDistanceBetweenEntities( c,_global__WEBPACK_IMPORTED_MODULE_1__["default"].player ) == 1 ) {
            if ( c.isProp ) {
                action = () => {
                    _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.interact( tx,ty,false,x,y );
                };
            } else {
                action = () => {
                    _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.interact( tx,ty,this.mode == "ranged",x,y );
                };
            }
        } else {
            if ( this.mode == "ranged" ) {
                action = () => {
                    _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.interact( tx,ty,true,x,y );
                };
            }
        }

        return [action,icon1,icon2,tx,ty];
    }

    doAutoAction( x,y ) {
        this.hideAutoAction();
        const [action, icon1, icon2, tx, ty] = this.getAutoAction( x, y );

        console.log( `자동액션 실행` );

        if ( tx ) {
            action();
        }
    }
}



/***/ }),

/***/ "./games/Avalonika/src/interface/detailInfoWindow.js":
/*!***********************************************************!*\
  !*** ./games/Avalonika/src/interface/detailInfoWindow.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DetailInfoWindow)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _world_gameMap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../world/gameMap */ "./games/Avalonika/src/world/gameMap.js");
/* harmony import */ var _autoMap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./autoMap */ "./games/Avalonika/src/interface/autoMap.js");
/* harmony import */ var _cursor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./cursor */ "./games/Avalonika/src/interface/cursor.js");
/* harmony import */ var _interface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./interface */ "./games/Avalonika/src/interface/interface.js");
/* harmony import */ var _lib_iconPack__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @lib/iconPack */ "./engine/src/lib/iconPack.js");
/* harmony import */ var _lib_button2__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @lib/button2 */ "./engine/src/lib/button2.js");
/* harmony import */ var _lib_random__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @lib/random */ "./engine/src/lib/random.js");
/* harmony import */ var _lib_colors__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @lib/colors */ "./engine/src/lib/colors.js");
/* harmony import */ var _lib_grid9__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @lib/grid9 */ "./engine/src/lib/grid9.js");
/* harmony import */ var _entity_prop__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../entity/prop */ "./games/Avalonika/src/entity/prop.js");
/* harmony import */ var _entity_monster__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../entity/monster */ "./games/Avalonika/src/entity/monster.js");
/* harmony import */ var _entity_npc__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../entity/npc */ "./games/Avalonika/src/entity/npc.js");
/* harmony import */ var _entity_item__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../entity/item */ "./games/Avalonika/src/entity/item.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../global */ "./games/Avalonika/src/global.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../config */ "./games/Avalonika/src/config.js");



















/*

대상의 정보를 모달로 보여줌

장비
- 장비한다 / 장비해제
- 버린다 / 제물로 받친다
- 던진다

소모품
- 사용한다 / 먹는다
- 버린다 / 제물로 받친다
- 던진다

확인되지 않은 물건
- 감정한다



*/

/**
 * @this DetailInfoWindow
 *
 */
function showContent() {
    let back = this.baseSpr;
    let target = this.target;
    let x = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalViewport.width / 2;
    let y = ( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalViewport.height - this.height ) / 2 + 20;
    let icon = target.getIcon();

    icon.setPosition( x, y + 23 );
    back.addChild( icon );
    let tf = _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].getHiresTextField( target.name );

    tf.setTextColor( target.color );
    tf.setPosition( x - tf.getWidth() / 2, y + 44 - 10 );
    back.addChild( tf );
    let tw = _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].getHiresTextWrap(
        target.getDesc(),
        this.width - 20, 100, 15, _interface__WEBPACK_IMPORTED_MODULE_4__["default"].ttf, "center" );

    tw.setAnchorPoint( 0.5, 0 );
    tw.setTextColor( 0xc0c0c0 );
    tw.setPosition( x, y + 50 );
    back.addChild( tw );
    if ( target.property.type == "instrument" ) {
        let b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "detailButton.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );

        b.setAnchorPoint( 0.5, 0.5 );
        let tf = _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].getHiresTextField( "연주한다", _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].uiTtf );

        tf.setTextColor( 0x000000 );
        tf.setPosition( -tf.getWidth() / 2 + 4, 3 - 10 );
        b.addChild( tf );
        let icon = new _lib_iconPack__WEBPACK_IMPORTED_MODULE_5__["default"]( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "detailButtonIcon.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ),
                                 1, 2, 16, 16, 0x000000, 1 );

        icon.setScale( 0.75 );
        icon.setPosition( -tf.getWidth() / 2 - 4, 0 );
        b.addChild( icon );
        let btn = new _lib_button2__WEBPACK_IMPORTED_MODULE_6__["default"]( {
            up:   { image: b, useSpriteAnchorPoint: true },
            down: { y: 1 },
        } );

        btn.setPosition( x, y + this.height - 63 );
        back.addChild( btn );
        btn.on( "click", () => {
            this.close();
            _global__WEBPACK_IMPORTED_MODULE_14__["default"].player.inventory.close( () => {
                let note = _global__WEBPACK_IMPORTED_MODULE_14__["default"].player.inventory.findEquippedItemByType( "note" )[0];

                if ( note ) {
                    _global__WEBPACK_IMPORTED_MODULE_14__["default"].player.playMusic( note.property.mml );
                } else {
                    _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].addLog( "연주 할 악보가 없다." );
                }
            } );
        } );
        if ( target.isEquippable() && !target.equipped ) {
            btn.setEnabled( false );
        }
    }

    {
        let text, col;

        if ( target.equipped ) {
            text = "장비해제";
            col = 2;
        } else {
            text = "장비한다";
            col = 1;
        }
        let b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "detailButton.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );

        b.setAnchorPoint( 0.5, 0.5 );
        let tf = _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].getHiresTextField( text, _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].uiTtf );

        tf.setTextColor( 0x000000 );
        tf.setPosition( -tf.getWidth() / 2 + 4, 3 - 10 );
        b.addChild( tf );
        let icon = new _lib_iconPack__WEBPACK_IMPORTED_MODULE_5__["default"]( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "detailButtonIcon.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ),
                                 col, 1, 16, 16, 0x000000, 1 );

        icon.setScale( 0.75 );
        icon.setPosition( -tf.getWidth() / 2 - 4, 0 );
        b.addChild( icon );
        let btn = new _lib_button2__WEBPACK_IMPORTED_MODULE_6__["default"]( {
            up:   { image: b },
            down: { y: 1 },
        } );

        btn.setPosition( x - 30, y + this.height - 38 );
        back.addChild( btn );
        btn.on( "click", () => {
            this.close();
            _global__WEBPACK_IMPORTED_MODULE_14__["default"].player.inventory.tryEquip( target );
        } );
        if ( !target.isEquippable() ) {
            btn.setEnabled( false );
        }
    }
    {
        let b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "detailButton.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );

        b.setAnchorPoint( 0.5, 0.5 );
        let tf = _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].getHiresTextField( "던진다", _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].uiTtf );

        tf.setTextColor( 0x000000 );
        tf.setPosition( -tf.getWidth() / 2 + 4, 3 - 10 );
        b.addChild( tf );
        let icon = new _lib_iconPack__WEBPACK_IMPORTED_MODULE_5__["default"]( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "detailButtonIcon.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ),
                                 7, 1, 16, 16, 0x000000, 1 );

        icon.setScale( 0.75 );
        icon.setPosition( -tf.getWidth() / 2 - 4, 0 );
        b.addChild( icon );
        let btn = new _lib_button2__WEBPACK_IMPORTED_MODULE_6__["default"]( {
            up:   { image: b },
            down: { y: 1 },
        } );

        btn.setPosition( x + 30, y + this.height - 38 );
        btn.setEnabled( false );
        back.addChild( btn );
    }
    {
        let b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "detailButton.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );

        b.setAnchorPoint( 0.5, 0.5 );
        let tf = _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].getHiresTextField( "감정한다", _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].uiTtf );

        tf.setTextColor( 0x000000 );
        tf.setPosition( -tf.getWidth() / 2 + 4, 3 - 10 );
        b.addChild( tf );
        let icon = new _lib_iconPack__WEBPACK_IMPORTED_MODULE_5__["default"]( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "detailButtonIcon.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ),
                                 4, 1, 16, 16, 0x000000, 1 );

        icon.setScale( 0.75 );
        icon.setPosition( -tf.getWidth() / 2 - 4, 0 );
        b.addChild( icon );
        let btn = new _lib_button2__WEBPACK_IMPORTED_MODULE_6__["default"]( {
            up:   { image: b },
            down: { y: 1 },
        } );

        btn.setPosition( x - 30, y + this.height - 18 );
        btn.setEnabled( false );
        back.addChild( btn );
    }
    {
        let b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "detailButton.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );

        b.setAnchorPoint( 0.5, 0.5 );
        let tf = _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].getHiresTextField( "버린다", _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].uiTtf );

        tf.setTextColor( 0x000000 );
        tf.setPosition( -tf.getWidth() / 2 + 4, 3 - 10 );
        b.addChild( tf );
        let icon = new _lib_iconPack__WEBPACK_IMPORTED_MODULE_5__["default"]( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "detailButtonIcon.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ),
                                 3, 1, 16, 16, 0x000000, 1 );

        icon.setScale( 0.75 );
        icon.setPosition( -tf.getWidth() / 2 - 4, 0 );
        b.addChild( icon );
        let btn = new _lib_button2__WEBPACK_IMPORTED_MODULE_6__["default"]( {
            up:   { image: b },
            down: { y: 1 },
        } );

        btn.setPosition( x + 30, y + this.height - 18 );
        back.addChild( btn );
        btn.on( "click", () => {
            this.close();
            _global__WEBPACK_IMPORTED_MODULE_14__["default"].player.inventory.dropItem( target );
        } );
    }
}

/**
 * @this DetailInfoWindow
 *
 * @param {*} e
 */
function onPointerDown( e ) {
    this.close();
    e.stopPropagation();
}

/**
 * @this DetailInfoWindow
 *
 * @param {*} e
 */
function onPointerDownFrame( e ) {
    if ( this.wf.hitTestPoint( e.x, e.y ) ) {
        e.stopPropagation();
    }
}



class DetailInfoWindow extends _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite {
    constructor( target ) {
        super();
        this.width = 140;
        this.height = 180;
        console.log( "자세한 정보 요청", target.name );
        this.target = target;
    }

    show() {
        let [x, y, w, h] = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.xywh;
        let back = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh.createBox( x, y, w, h, 0x000000, 0.7 );

        this.addChild( back );
        back.on( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_DOWN, onPointerDown, this );
        back.on( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_UP, onPointerDown, this );
        this.back = back;
        let wf = new _lib_grid9__WEBPACK_IMPORTED_MODULE_9__["default"]( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "RectFrame.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );

        this.openRate = 0;
        back.addChild( wf );
        _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].modalLayer.origin.addChild( this );
        wf.on( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_DOWN, onPointerDownFrame, this );
        wf.on( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_UP, onPointerDownFrame, this );
        this.wf = wf;
        this.baseSpr = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();
        this.wf.addChild( this.baseSpr );
        showContent.call( this );
        new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( this, 300, { openRate: 1.0 }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outBack } )
            .onChange( () => {
                wf.setRect( ( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalViewport.width - this.width ) / 2, ( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalViewport.height - this.height * this.openRate ) / 2 + 20, this.width, this.height * this.openRate );
                //wf.setClip((application.logicalViewport.width - this.width) / 2, (application.logicalViewport.height - this.height * this.openRate) / 2 + 20, this.width, this.height * this.openRate);
            } );
        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/top_menu_open.wav" );
    }

    close() {
        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/top_menu_close.wav" );
        this.back.removeEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_DOWN, onPointerDown, this );
        this.back.removeEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_UP, onPointerDown, this );
        new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( this, 200, { openRate: 0.0 }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.inBack } )
            .onChange( () => {
                this.wf.setRect( ( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalViewport.width - this.width ) / 2, ( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalViewport.height - this.height * this.openRate ) / 2 + 20, this.width, this.height * this.openRate );
                //this.wf.setClip((application.logicalViewport.width - this.width) / 2, (application.logicalViewport.height - this.height * this.openRate) / 2 + 20, this.width, this.height * this.openRate);
            } )
            .onComplete( () => {
                this.removeFromParent();
            } );
    }
}





/***/ }),

/***/ "./games/Avalonika/src/interface/interface.js":
/*!****************************************************!*\
  !*** ./games/Avalonika/src/interface/interface.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Interface)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _world_gameMap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../world/gameMap */ "./games/Avalonika/src/world/gameMap.js");
/* harmony import */ var _autoMap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./autoMap */ "./games/Avalonika/src/interface/autoMap.js");
/* harmony import */ var _lib_iconPack__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @lib/iconPack */ "./engine/src/lib/iconPack.js");
/* harmony import */ var _lib_button2__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @lib/button2 */ "./engine/src/lib/button2.js");
/* harmony import */ var _lib_random__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @lib/random */ "./engine/src/lib/random.js");
/* harmony import */ var _lib_colors__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @lib/colors */ "./engine/src/lib/colors.js");
/* harmony import */ var _lib_grid9__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @lib/grid9 */ "./engine/src/lib/grid9.js");
/* harmony import */ var _entity_prop__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../entity/prop */ "./games/Avalonika/src/entity/prop.js");
/* harmony import */ var _entity_monster__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../entity/monster */ "./games/Avalonika/src/entity/monster.js");
/* harmony import */ var _entity_npc__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../entity/npc */ "./games/Avalonika/src/entity/npc.js");
/* harmony import */ var _entity_item__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../entity/item */ "./games/Avalonika/src/entity/item.js");
/* harmony import */ var _topMenu__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./topMenu */ "./games/Avalonika/src/interface/topMenu.js");
/* harmony import */ var _cursor__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./cursor */ "./games/Avalonika/src/interface/cursor.js");
/* harmony import */ var _actionSelector__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./actionSelector */ "./games/Avalonika/src/interface/actionSelector.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../global */ "./games/Avalonika/src/global.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../config */ "./games/Avalonika/src/config.js");





















const logWindowWidth = 200;
const logWindowHeight = 50;
const infoWindowHeight = 60;

//---------------------------------------------------------------------------------------------------
// onEnterFrame;
//---------------------------------------------------------------------------------------------------

/**
 * 
 * @this {Interface}
 */
function onEnterFrame() {
    const [hp0, hpMax0, mp0, mpMax0, level0, exp0, expMax0, gold0] = this.oldValue;
    const pl = _global__WEBPACK_IMPORTED_MODULE_15__["default"].player;

    if ( !pl ) {
        // 아직 플레이어가 없는 경우
        return;
    }

    if ( this.waitingForWorldAndPlayer && _global__WEBPACK_IMPORTED_MODULE_15__["default"].world && pl ) {
        // 준비가 되었으므로 켠다
        this.waitingForWorldAndPlayer = false;
        this.show();
    }

    const [hp, hpMax, mp, mpMax, level, exp, expMax, gold] = [pl.hp, pl.hpMax, pl.mp, pl.mpMax, pl.level, pl.exp, pl.expMax, pl.gold];

    if ( hp != hp0 ) {
        if ( this.twHp ) {
            this.twHp.stop();
        }

        this.twHp = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( this, 300, { hp: hp }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCubic } );
    }

    if ( hpMax != hpMax0 ) {
        if ( this.twHpMax ) {
            this.twHpMax.stop();
        }

        this.twHpMax = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( this, 300, { hpMax: hpMax }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCubic } );
    }

    if ( mp != mp0 ) {
        if ( this.twMp ) {
            this.twMp.stop();
        }

        this.twMp = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( this, 300, { mp: mp }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCubic } );
    }

    if ( mpMax != mpMax0 ) {
        if ( this.twMpMax ) {
            this.twMpMax.stop();
        }

        this.twMpMax = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( this, 300, { mpMax: mpMax }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCubic } );
    }

    if ( exp != exp0 ) {
        if ( this.twExp ) {
            this.twExp.stop();
        }

        this.twExp = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( this, 300, { exp: exp }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCubic } );
    }

    if ( expMax != expMax0 ) {
        if ( this.twExpMax ) {
            this.twExpMax.stop();
        }

        this.twExpMax = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( this, 300, { expMax: expMax }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCubic } );
    }

    if ( gold != gold0 ) {
        if ( this.twGold ) {
            this.twGold.stop();
        }

        this.twGold = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( this, 300, { gold: gold }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCubic } );
    }

    this.level = level;

    if ( this.statusChanging ) {
        this.setGauge( this.hp, this.hpMax, this.mp, this.mpMax, this.level, this.exp, this.expMax, this.gold );
    }

    if ( this.hp == hp && this.hpMax == hpMax &&
		this.mp == mp && this.mpMax == mpMax &&
		this.exp == exp && this.expMax == expMax &&
		this.gold == gold ) {
        this.statusChanging = false;
    } else {
        this.statusChanging = true;
    }

    this.oldValue = [hp, hpMax, mp, mpMax, level, exp, expMax, gold];

    // 오토맵
    this.autoMap.setPlayerPosition( pl.tileX, pl.tileY );
}

//---------------------------------------------------------------------------------------------------
// 체력등의 상태 표시
//---------------------------------------------------------------------------------------------------


/**
 *
 * @this Interface
 * @param {number} v
 * @param {number} maxV
 * @param {number} x
 * @param {number} y
 * @param {number} w
 * @param {number} h
 * @param {number} color
 * @param {number} color2
 * @param {boolean} isExp
 * @returns {Sprite}
 */
function makeMesh( v, maxV, x, y, w, h, color, color2, isExp ) {
    const m = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();

    if ( isExp ) {
        const p = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Pixel( 0, 1, w + 2, h + 2 );

        p.setPosition( x - 1, y - 1 );
        m.addChild( p );
    }

    let gridGap;

    if ( isExp ) {
        gridGap = maxV / 4;
    } else {
        gridGap = 10 * Math.ceil( maxV / 100 );
    }

    if ( maxV > 0 ) {
        const numOfGrid = Math.floor( ( maxV - 1 ) / gridGap );

        if ( v > 0 ) {
            const p = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Pixel( color, 1, Math.min( 1, v / maxV ) * w, h );

            p.setPosition( x, y );
            m.addChild( p );
        }

        for ( let i = 1; i <= numOfGrid; i++ ) {
            const gridX = i * w * gridGap / maxV;
            let c;

            if ( i * gridGap < v ) {
                c = 0x000000;
            } else {
                c = color2;
            }

            const p = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Pixel( c, 1, 1, h );

            p.setPosition( x + gridX, y );
            m.addChild( p );
        }
    }

    if ( !isExp ) {
        const tf = this.getBitmapTextField( Math.floor( v ) + "/" + Math.floor( maxV ).toString() );

        tf.setTextColor( color );
        tf.setPosition( x, y + 16 - 8 );
        m.addChild( tf );
    }

    return m;
}



//---------------------------------------------------------------------------------------------------
// 로그화면
//---------------------------------------------------------------------------------------------------

/**
 * @this Interface
 *
 * @param {*} dy
 */
function redrawLog( dy ) {
    if ( dy == this.logFrame.lastPos ) {
        return;
    }

    const bottomIndex = Math.floor( dy / Interface.LOG_LINE_SPACING );
    const topIndex = bottomIndex + Math.floor( ( logWindowHeight - 16 ) / Interface.LOG_LINE_SPACING ) + 1;
    const rest = dy % Interface.LOG_LINE_SPACING;

    this.logTextLayer.clearChildren();

    for ( let i = Math.min( topIndex, this.logText.length - 1 ); i >= bottomIndex; i-- ) {
        let tw;

        //console.log(i,dy,bottomIndex);
        if ( this.logText[i].textWrap ) {
            tw = this.logText[i].textWrap;
        } else {
            tw = this.getHiresTextWrap( this.logText[i].text );
            this.logText[i].textWrap = tw;
        }

        //tw.setTextColor(0xa0a0c0);
        const y = -1 - Interface.LOG_LINE_SPACING * ( 1 + i - bottomIndex ) + rest;

        tw.setPosition( 0, y );
        this.logTextLayer.addChildAt( tw, 0 );
    }

    this.logFrame.lastPos = dy;
}


// 마우스 핸들러
/**
 * @this Interface
 *
 * @param {*} e
 */
function onLogPointerDown( e ) {
    const { x: ex, y: ey } = _global__WEBPACK_IMPORTED_MODULE_15__["default"].stage.globalToLocal( e.x, e.y );

    if ( this.isVisible() && this.logFrame.hitTestPoint( e.x, e.y ) && !this.isSidePanelOpened() ) {
        this.logFrame.__drag = { ex: ex, ey: ey, click: true };

        if ( this.logFrame.isVisible() && !this.isSidePanelOpened() && !this.actionSelector.isOpen() ) {
            this.showLog();

            if ( this.logHideTimer ) {
                this.logHideTimer.stop();
                this.logHideTimer = null;
            }

            if ( this.logTextLayer.getNumChildren() > 0 && this.logTextLayer.getChildAt( 0 )._tw ) {
                for ( let i = 0; i < this.getNumChildren(); i++ ) {
                    const s = this.logTextLayer.getChildAt( i );

                    s._tw.toEnd();
                }
            }

            e.stopPropagation();
        }
    }
}

/**
 * @this Interface
 *
 * @param {*} e
 */
function onLogPointerMove( e ) {
    const { x: ex, y: ey } = _global__WEBPACK_IMPORTED_MODULE_15__["default"].stage.globalToLocal( e.x, e.y,_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.stage );

    if ( this.logFrame.isVisible() ) {
        if ( this.logFrame.__drag ) {
            if ( this.logText.length >= Math.floor( ( logWindowHeight - 16 ) / Interface.LOG_LINE_SPACING ) ) {
                const dx = ex - this.logFrame.__drag.ex;
                let dy = this.logScrollPos + ey - this.logFrame.__drag.ey;

                dy = Math.max( 0, Math.min( Interface.LOG_LINE_SPACING * this.logText.length - ( logWindowHeight - 16 ) + 1, dy ) );
                redrawLog.call( this, dy );
            }

            e.stopPropagation();
        }
    } else {
        if ( this.logFrame.__drag ) {
            const dx = ex - this.logFrame.__drag.ex;
            const dy = Math.max( 0, this.logScrollPos + ey - this.logFrame.__drag.ey );

            if ( Math.abs( dx ) > 10 || Math.abs( dy ) > 10 ) {
                this.logFrame.__drag.click = false;
            }
        }
    }
}


/**
 * @this Interface
 *
 * @param {*} e
 */
function onLogPointerUp( e ) {
    if ( this.logFrame.isVisible() ) {
        if ( this.logFrame.__drag ) {
            this.logHideTimer = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( 3000, this.hideLog, this );

            if ( this.logText.length >= Math.floor( ( logWindowHeight - 16 ) / Interface.LOG_LINE_SPACING ) ) {
                const { x: ex, y: ey } = _global__WEBPACK_IMPORTED_MODULE_15__["default"].stage.globalToLocal( e.x, e.y );
                let dy = Math.max( 0, this.logScrollPos + ey - this.logFrame.__drag.ey );

                dy = Math.max( 0, Math.min( Interface.LOG_LINE_SPACING * this.logText.length - ( logWindowHeight - 16 ) + 1, dy ) );
                redrawLog.call( this, dy );
                this.logScrollPos = dy;
                // 자동사라지기 켬
            }

            e.stopPropagation();
        }
    } else {
        // if (!this.cursor.holded() && this.logFrame.__drag && this.logFrame.__drag.click) {
        //     this.cursor.cancelHold();
        //     this.logScrollPos = 0;
        //     this.showLog();
        //     // 자동사라지기 켬
        //     this.logHideTimer = Timer.delayedCall(3000, this.hideLog, this);
        //     e.stopPropagation();
        // }
    }

    this.logFrame.__drag = null;
}



class Interface extends _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite {
    //---------------------------------------------------------------------------------------------------
    // 초기화
    //---------------------------------------------------------------------------------------------------

    constructor() {
        super();

        const { x, y } = _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.getPosition();

        this.hudLayer = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Layout.fromRenderViewport();
        this.addChild( this.hudLayer );
        this.cursor = new _cursor__WEBPACK_IMPORTED_MODULE_13__["default"]();
        this.hudLayer.origin.addChild( this.cursor );
        
        this.logWindowLayer = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Layout.fromRenderViewport();
        this.modalLayer = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Layout.fromRenderViewport();
        this.on( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.ADDED_TO_STAGE, () => {
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.stage.addChild( this.logWindowLayer );
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.stage.addChild( this.modalLayer );
        } );

        this.oldValue = [ 0, 0, 0, 0];
        this.hp = 0;
        this.hpMax = 0;
        this.mp = 0;
        this.mpMax = 0;
        this.level = 0;
        this.exp = 0;
        this.expMax = 0;
        this.gold = 0;
        this.logText = [];

        {
            this.autoMap = new _autoMap__WEBPACK_IMPORTED_MODULE_2__["default"]();
            this.autoMap.setPosition( - _config__WEBPACK_IMPORTED_MODULE_16__["default"].Interface.margin - 12, - 70 );
            this.hudLayer.bottomRight.addChild( this.autoMap );
        }


        {
            const wf = new _lib_grid9__WEBPACK_IMPORTED_MODULE_7__["default"]( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "WindowFrame.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );
            let x1, y1, w1, h1;
            const s = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Layout();

            const resize = () => {
                wf.setRect(
                    Math.floor( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.left + _config__WEBPACK_IMPORTED_MODULE_16__["default"].Interface.margin ),
                    30,
                    Math.floor( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.width - _config__WEBPACK_IMPORTED_MODULE_16__["default"].Interface.margin * 2 ),
                    logWindowHeight
                );
                [x1, y1] = [_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.left + _config__WEBPACK_IMPORTED_MODULE_16__["default"].Interface.margin + 9, 30 + 8];
                [w1, h1] = [_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.width - ( _config__WEBPACK_IMPORTED_MODULE_16__["default"].Interface.margin + 9 ) * 2, logWindowHeight - 16];
                s.setRect( x1, y1, w1, h1 );
                s.setClip( 0, 0, w1, h1 );
            };

            this.logFrame = wf;
            this.logTextLayer = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();
            this.logFrame.setVisible( false );
            //this.logTextLayer.setClip(x1,y1,x2,y2);
            s.bottomLeft.addChild( this.logTextLayer );
            wf.addChild( s );
            this.logWindowLayer.origin.addChild( wf );
            this.logWindowLayer.on( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.RESIZE, () => {
                resize();
            } );
            resize();
            wf.on( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_DOWN, onLogPointerDown, this )
                .on( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_MOVE, onLogPointerMove, this )
                .on( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_UP, onLogPointerUp, this );
            this.logScrollPos = 0;
            //wf.setInteractive( { dragX: true, dragY: true } );
        }

        {
            const b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "Status.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );

            this.statusSprite = b;
            b.setAnchorPoint( 0.5, 0.5 );
            const btn1 = new _lib_button2__WEBPACK_IMPORTED_MODULE_4__["default"]( {
                up:           { image: b },
                down:         { color: 0xa0a0a0, y: 2 },
                pixelPerfect: true,
            } );

            btn1.setPosition( 0, _config__WEBPACK_IMPORTED_MODULE_16__["default"].Interface.margin + 10 );
            btn1.addEventListener( "click", () => {
                this.topMenu.open();
            } );
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.RESIZE,( n )=>{
                btn1.setScale( Math.min( 1,_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.width / btn1.getWidth() ) );
            } );
            this.hudLayer.topMiddle.addChild( btn1 );
            this.topMenu = new _topMenu__WEBPACK_IMPORTED_MODULE_12__["default"]();
            this.hudLayer.topMiddle.addChild( this.topMenu );
        }

        {
            const b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "InventoryIcon.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );

            b.setAnchorPoint( 0.5, 0.5 );
            const btn1 = new _lib_button2__WEBPACK_IMPORTED_MODULE_4__["default"]( {
                up:   { image: b },
                down: { color: 0xa0a0a0, y: 2 },
            } );

            btn1.setPosition( - _config__WEBPACK_IMPORTED_MODULE_16__["default"].Interface.margin - 12,  - _config__WEBPACK_IMPORTED_MODULE_16__["default"].Interface.margin - 16 );
            btn1.addEventListener( "click", () => {
                _global__WEBPACK_IMPORTED_MODULE_15__["default"].player.inventory.open();
            } );
            this.hudLayer.bottomRight.addChild( btn1 );
        }

        {
            // 이퀩체인저가 가장 마지막에 추가되어야한다.
            const b = new _lib_iconPack__WEBPACK_IMPORTED_MODULE_3__["default"]( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "ItemBackground.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ), 1, 1, 48, 32 );
            //let item1 = new Item({imageCol=2,imageRow=1});
            //item1.setPosition(b.getWidth()/2,b.getHeight()/2);
            //b.addChild(item1);
            //this.addChild(b);
            const btn1 = new _lib_button2__WEBPACK_IMPORTED_MODULE_4__["default"]( {
                up:   { image: b, useSpriteAnchorPoint: true },
                down: { y: 2 },
            } );

            btn1.setPosition( _config__WEBPACK_IMPORTED_MODULE_16__["default"].Interface.margin + b.getWidth() / 2,  - b.getHeight() / 2 - _config__WEBPACK_IMPORTED_MODULE_16__["default"].Interface.margin );
            this.hudLayer.bottomLeft.addChild( btn1 );
            this.actionSelector = new _actionSelector__WEBPACK_IMPORTED_MODULE_14__["default"]( b );
            btn1.addEventListener( "click", () => {
                this.actionSelector.open();
            } );
        }

        // 월드나 플레이어가 준비될 때까지 숨겨둔다
        this.waitingForWorldAndPlayer = true;
        this.hide();
        this.addEventListenerOnStage( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.ENTER_FRAME, onEnterFrame, this );
    }





    //---------------------------------------------------------------------------------------------------
    // 비트맵 텍스트 얻어오기
    //---------------------------------------------------------------------------------------------------

    getBitmapTextField( text ) {
        const tf = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextField( Interface.font, text );

        //tf.scale = 1 / stage.renderViewportScale;
        return tf;
    }

    //---------------------------------------------------------------------------------------------------
    // 고해상도 텍스트 얻어오기
    //---------------------------------------------------------------------------------------------------

    getHiresTextField( text, ttf ) {
        const tf = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextField( ttf || Interface.ttf, text );

        return tf;
    }

    getHiresTextWrap( text, w, h, spacing, ttf, align, ignoreWordWrap ) {
        const tw = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextField.fromTextWrap( text, w, h, spacing, ttf || Interface.ttf, align, ignoreWordWrap );

        return tw;
    }


    setGauge( hp, hpMax, mp, mpMax, level, exp, expMax, gold ) {
        if ( this.statusHp ) {
            this.statusHp.removeFromParent();
        }

        if ( this.statusMp ) {
            this.statusMp.removeFromParent();
        }

        if ( this.statusExp ) {
            this.statusExp.removeFromParent();
        }

        if ( this.statusGold ) {
            this.statusGold.removeFromParent();
        }

        const [ox, oy] = [85,8]; // 앵커포인트 맞추기
        const m1 = makeMesh.call( this, hp, hpMax, 15 - ox, 2 - oy, 76, 11, 0xff0000, 0x5a0000 );

        this.statusSprite.addChild( m1 );
        this.statusHp = m1;
        const m2 = makeMesh.call( this, mp, mpMax, 109 - ox, 2 - oy, 58, 11, 0x00aeef, 0x00415a );

        this.statusSprite.addChild( m2 );
        this.statusMp = m2;

        {
            const tf = this.getBitmapTextField( "LV." + level.toString() );

            tf.setTextColor( 0xffffff );
            tf.setPosition( 0 - ox, -2 - 8 - oy );
            const tf2 = this.getBitmapTextField( "g" + Math.floor( gold ).toString() );

            tf2.setTextColor( 0xffd000 );
            tf2.setPosition( 168 - tf2.getWidth() - ox, -2 - 8 - oy );
            this.statusSprite.addChild( tf2 );
            this.statusGold = tf2;
            const m3 = makeMesh.call( this, exp, expMax, tf.getWidth() + 3 - ox, -6 - oy,
                                      this.statusSprite.getWidth() - tf.getWidth() - 7 - tf2.getWidth(), 5, 0xffff00, 0x606000, true );

            this.statusSprite.addChild( m3 );
            this.statusExp = m3;
            this.statusExp.addChild( tf );
        }
    }

    addLog( ...args ) {
        this.showLog();
        const text = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.hangul.format( ...args );

        console.log( "로그출력", text );

        if ( this.logTextLayer.getNumChildren() > 0 && this.logTextLayer.getChildAt( 0 )._tw ) {
            for ( let i = 0; i < this.logTextLayer.getNumChildren(); i++ ) {
                const s = this.logTextLayer.getChildAt( i );

                s._tw.toEnd();
            }
        }

        this.logText.unshift( { text: text } );
        if ( this.logText.length > Interface.LOG_MAX_LINE ) this.logText.length = Interface.LOG_MAX_LINE;

        if ( this.logFrame.__drag ) {
            //드래그중
            return;
        }

        //console.log(this.logScrollPos);
        if ( this.logScrollPos == 0 ) {
            const tw = this.getHiresTextWrap( text,null,null,null,Interface.ttf );

            this.logText[0].textWrap = tw;
            tw.setTextColor( 0xffffff );
            tw.setPosition( 0, -1 );
            this.logTextLayer.addChildAt( tw, 0 );

            for ( let i = this.logTextLayer.getNumChildren() - 1; i >= 0; i-- ) {
                const s = this.logTextLayer.getChildAt( i );
                const y2 = s.getY();

                if ( y2 < -logWindowHeight ) {
                    s.removeFromParent();
                } else {
                    const tw = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( s, 300, { y: y2 - Interface.LOG_LINE_SPACING }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCubic } );

                    s._tw = tw;
                    tw.addEventListener( "complete", () => {
                        s._tw = null;
                    } );
                }
            }
        } else {
            //드래그중이 아니면 리셋
            const dy = 0;

            redrawLog.call( this, dy );
            this.logScrollPos = 0;
        }
    }

    hideLog() {
        if ( this.logHideTimer ) {
            this.logHideTimer.stop();
            this.logHideTimer = null;
        }

        if ( this.loTween ) {
            this.loTween.stop();
        }

        this.loTween = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( this.logFrame, 300, { alpha: 0 }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.linear } )
            .onComplete( () => {
                for ( let i = 0; i < this.logText.length; i++ ) {
                    const s = this.logText[i].textWrap;

                    s.setOverrideColor( 0x707070 );
                }

                this.logFrame.setVisible( false );
                this.loTween = null;
            } );
    }


    showLog() {
        if ( this.loTween ) {
            this.loTween.toEnd();
        }

        this.logFrame.setAlpha( 1 );
        this.logFrame.setVisible( true );

        if ( this.logHideTimer != null ) {
            this.logHideTimer.stop();
            this.logHideTimer = null;
        }

        this.logHideTimer = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( 3000, this.hideLog, this );
    }


    //---------------------------------------------------------------------------------------------------
    // 인포창
    //---------------------------------------------------------------------------------------------------

    /*

	info;
	type = item | interact;
	text = 

	*/
    showInfo( info ) {
        console.log( "위치에 대한 정보", info.type );
        /*info= {}
		info.type = "item"
		info.text = "아이템설명입니다\n<c.ff0000>안녕</c>하세요?\n반갑습니다. 여러분 어떻게 지내십니까?\n아리가또\n고자이마스\n랄라라라\n라라랄라"
		info.name = "엑조틱 강한강한 왕도끼+15"
		info.buttonType = "interact"
		info.rarity = 5;
		*/

        if ( this.infoLayer ) {
            this.infoLayer.removeFromParent();
        }

        this.infoLayer = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();
        this.hudLayer.center.addChild( this.infoLayer );
        let frameWidth, frameHeight;
        let textLabel;
        let itemImage;
        let color = 0xffffff;
        let windowFrame;

        if ( info.type == "interact" ) {
            textLabel = this.getHiresTextWrap( info.text, null, null, null, null, "center" );
            console.log( "인포창", info.text );
            textLabel.setTextColor( 0xa0a0a0 );
            frameWidth = textLabel.getTextWidth() + 16;
            frameHeight = textLabel.getHeight() + 18;
            const [textX, textY] = [0, - 36 - 7];

            textLabel.setPosition( textX, textY );
        } else if ( info.type == "item" ) {
            itemImage = new _entity_item__WEBPACK_IMPORTED_MODULE_11__["default"]( info.item.__key );
            color = info.item.color;
            textLabel = this.getHiresTextWrap( itemImage.name );
            textLabel.setTextColor( color );
            frameWidth = textLabel.getTextWidth() + 16;
            frameHeight = textLabel.getHeight() + 18;
            const [textX, textY] = [ ( -frameWidth - 20 ) / 2 + 16 + 10, - 36 - 7];

            textLabel.setPosition( textX, textY );
            itemImage.setPosition( ( -frameWidth - 20 ) / 2 + 16, - 36 );
            itemImage.setOverrideColor( color );
        }

        windowFrame = new _lib_grid9__WEBPACK_IMPORTED_MODULE_7__["default"]( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "RectFrame.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );
        windowFrame.setRect(
            ( - frameWidth - 20 ) / 2,
            - frameHeight - 20,
            frameWidth + 20,
            frameHeight
        );
        windowFrame.setOverrideColor( ( color >> 1 ) & 0x7f7f7f );
        windowFrame.setAlpha( 1 );
        this.infoFrame = windowFrame;
        this.infoLayer.addChildAt( windowFrame, 0 );
        this.infoLayer.addChild( textLabel );
        if ( itemImage != null ) this.infoLayer.addChild( itemImage );

        let btn1, btn2;

        if ( info.type == "item" || info.buttonType == "pickup" ) {
            const b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "PickUpButton.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );

            btn1 = new _lib_button2__WEBPACK_IMPORTED_MODULE_4__["default"]( {
                up:   { image: b, color: 0xffa000 },
                down: { color: 0x903000, y: 2 },
            } );

            if ( info.needNext ) {
                const b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "NextButton.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );

                btn2 = new _lib_button2__WEBPACK_IMPORTED_MODULE_4__["default"]( {
                    up:   { image: b, color: 0xa0a0a0 },
                    down: { color: 0x606060, y: 2 },
                } );
            }
        } else if ( info.buttonType == "yesno" ) {
            let b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "YesButton.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );

            btn1 = new _lib_button2__WEBPACK_IMPORTED_MODULE_4__["default"]( {
                up:   { image: b, color: 0xffa000 },
                down: { color: 0x903000, y: 2 },
            } );
            b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "NoButton.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );
            btn2 = new _lib_button2__WEBPACK_IMPORTED_MODULE_4__["default"]( {
                up:   { image: b, color: 0xa0a0a0 },
                down: { color: 0x606060, y: 2 },
            } );
        } else if ( info.buttonType == "okcancel" ) {
            let b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "OkButton.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );

            btn1 = new _lib_button2__WEBPACK_IMPORTED_MODULE_4__["default"]( {
                up:   { image: b, color: 0xffa000 },
                down: { color: 0x903000, y: 2 },
            } );
            b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "NoButton.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );
            btn2 = new _lib_button2__WEBPACK_IMPORTED_MODULE_4__["default"]( {
                up:   { image: b, color: 0xa0a0a0 },
                down: { color: 0x606060, y: 2 },
            } );
        } else if ( info.buttonType == "interact" ) {
            const b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "InteractButton.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );

            btn1 = new _lib_button2__WEBPACK_IMPORTED_MODULE_4__["default"]( {
                up:   { image: b, color: 0x00a0ff },
                down: { color: 0x903000, y: 2 },
            } );

            if ( info.needNext ) {
                const b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "NextButton.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );

                btn2 = new _lib_button2__WEBPACK_IMPORTED_MODULE_4__["default"]( {
                    up:   { image: b, color: 0xa0a0a0 },
                    down: { color: 0x606060, y: 2 },
                } );
            }
        }

        if ( btn2 ) { // 버튼2개
            btn1.setPosition( - 22, 55 );
            //btn1.scale = stage.renderViewportScale;
            this.infoLayer.addChild( btn1 );
            btn2.setPosition( 22, 55 );
            this.infoLayer.addChild( btn2 );
            btn1.addEventListener( "click", () => {
                this.hideInfo();

                if ( info.button1 ) {
                    info.button1();
                }
            } );
            btn2.addEventListener( "click", () => {
                this.hideInfo();

                if ( info.button2 ) {
                    info.button2();
                }
            } );
        } else if ( btn1 ) { // 1개
            btn1.setPosition( 0,55 );
            this.infoLayer.addChild( btn1 );
            btn1.addEventListener( "click", () => {
                this.hideInfo();

                if ( info.button1 ) {
                    info.button1();
                }
            } );
        }
    }

    hideInfo() {
        if ( !this.infoLayer ) {
            return;
        }

        if ( this.infoTween ) {
            this.infoTween.stop();
        }

        const tw = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( this.infoLayer, 100, { alpha: 0 }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.linear } );

        this.infoTween = tw;
        //TODO: context
        tw.addEventListener( "complete", ()=>{
            this.infoLayer.removeFromParent();
            this.infoTween = null;
        }, this );
    }




    //---------------------------------------------------------------------------------------------------
    // 패널 슬라이딩
    //---------------------------------------------------------------------------------------------------

    slideOpen( ax, ay, closingCallback ) {
        if ( this.slideInfo ) {
            // 이미 열렸다
            const [ax, ay, viewX, viewY, worldX, worldY, tw, m] = this.slideInfo;

            tw.stop();
            _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.setPosition( worldX, worldY );
            _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.sightManager.moveViewTo( viewX + _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.getX() / 2, viewY + _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.getY() );
            _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.sightManager.updateShaderViewInfo();
            m.removeFromParent();
        }

        //this.hideLog();
        this.hideInfo();
        this.cursor.hideAutoAction();
        const [viewX, viewY] = [_global__WEBPACK_IMPORTED_MODULE_15__["default"].world.viewX, _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.viewY];
        const { x: worldX, y: worldY } = _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.getPosition();

        _global__WEBPACK_IMPORTED_MODULE_15__["default"]["interface"].cursor.lock();
        const [x, y, w, h] = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.deviceViewport.xywh;
        const m = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh.createBox( x + ax, y - ay, w + Math.abs( ax ), h + Math.abs( ay ), 0xff0000, 0.5 );

        m.setVisible( false );
        this.addChildAt( m,0 );
        const tw = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( _global__WEBPACK_IMPORTED_MODULE_15__["default"].world, 300, { x: worldX + ax, y: worldY + ay }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outBack } )
            .onChange( () => {
                _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.sightManager.moveViewTo( viewX + _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.getX() / 2, viewY + _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.getY() / 2 );
                _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.sightManager.updateShaderViewInfo();
                this.logFrame.setY( _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.getY() );
                this.setPosition( ..._global__WEBPACK_IMPORTED_MODULE_15__["default"].world.getPosition().xy );
            } )
            .onComplete( () => {
                m.addEventListener( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.POINTER_DOWN, ( e ) => {
                    if ( closingCallback ) {
                        closingCallback();
                    }

                    e.stopPropagation();
                } );
            } );

        this.slideInfo = [ax, ay, viewX, viewY, worldX, worldY, tw, m ];

        return tw;
    }


    slideClose( closedCallback ) {
        if ( this.slideInfo ) {
            let [ax, ay, viewX, viewY, worldX, worldY, tw, m] = this.slideInfo;

            tw.stop();
            tw = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( _global__WEBPACK_IMPORTED_MODULE_15__["default"].world, 300, { x: worldX, y: worldY }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCubic } )
                .onChange( () => {
                    _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.sightManager.moveViewTo( viewX + _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.getX() / 2, viewY + _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.getY() / 2 );
                    _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.sightManager.updateShaderViewInfo();
                    this.logFrame.setY( _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.getY() );
                    this.position = _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.getPosition();
                } )
                .onComplete( () => {
                    this.slideInfo = null;
                    m.removeFromParent();
                    _global__WEBPACK_IMPORTED_MODULE_15__["default"]["interface"].cursor.unlock();

                    if ( closedCallback ) {
                        closedCallback();
                    }
                } );

            return tw;
        }
    }

    isSidePanelOpened() {
        if ( this.slideInfo ) {
            return true;
        } else {
            return false;
        }
    }





    hide() {
        this.setVisible( false );
        this.hudLayer.setVisible( false );
        this.logWindowLayer.setVisible( false );
    }

    show() {
        this.setVisible( true );
        this.hudLayer.setVisible( true );
        this.logWindowLayer.setVisible( true );
    }
}



Interface.ttf = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.MsdfFont( "msdf_mtcg", 12, { yellow: { fill: 0xffff00 } } );
Interface.uiTtf = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.MsdfFont( "msdf_mtcg_ui", 12, {} );
Interface.font = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.BitmapFont( "font_bitmap", 8 );
// Interface.ttf.on( Event.LOADED,()=>{
//     console.log( `폰트로딩완료 mtcg` );
//     console.log( `폰트 길이 ${Interface.ttf.measureTextWidth( "안녕하세요?",20 )}` );
// } );

//Interface.oldFont = new Font("font_old.txt", "font_old.png");
Interface.LOG_LINE_SPACING = 12;
Interface.LOG_MAX_LINE = 30; // 너무 크면 텍스쳐를 많이 요구하게됨



/***/ }),

/***/ "./games/Avalonika/src/interface/inventory.js":
/*!****************************************************!*\
  !*** ./games/Avalonika/src/interface/inventory.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Inventory)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _world_gameMap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../world/gameMap */ "./games/Avalonika/src/world/gameMap.js");
/* harmony import */ var _autoMap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./autoMap */ "./games/Avalonika/src/interface/autoMap.js");
/* harmony import */ var _cursor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./cursor */ "./games/Avalonika/src/interface/cursor.js");
/* harmony import */ var _detailInfoWindow__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./detailInfoWindow */ "./games/Avalonika/src/interface/detailInfoWindow.js");
/* harmony import */ var _lib_iconPack__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @lib/iconPack */ "./engine/src/lib/iconPack.js");
/* harmony import */ var _lib_button2__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @lib/button2 */ "./engine/src/lib/button2.js");
/* harmony import */ var _lib_random__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @lib/random */ "./engine/src/lib/random.js");
/* harmony import */ var _lib_colors__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @lib/colors */ "./engine/src/lib/colors.js");
/* harmony import */ var _lib_listView__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @lib/listView */ "./engine/src/lib/listView.js");
/* harmony import */ var _lib_grid9__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @lib/grid9 */ "./engine/src/lib/grid9.js");
/* harmony import */ var _entity_prop__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../entity/prop */ "./games/Avalonika/src/entity/prop.js");
/* harmony import */ var _entity_monster__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../entity/monster */ "./games/Avalonika/src/entity/monster.js");
/* harmony import */ var _entity_npc__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../entity/npc */ "./games/Avalonika/src/entity/npc.js");
/* harmony import */ var _entity_item__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../entity/item */ "./games/Avalonika/src/entity/item.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../global */ "./games/Avalonika/src/global.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../config */ "./games/Avalonika/src/config.js");





















function spriteFunc( lv, lvItem, index, self ) {
    const item = lvItem.data.item;
    const spr = item.getInventorySprite();

    // spr.enableMouseDrag(true, {
    //     verticalLock:      true,
    //     mouseDownCallback: (spr, e) => {
    //         e.drag.cancel = true;
    //     },
    //     mouseMoveCallback: (spr, e) => {
    //         e.drag.x = Math.min(e.drag.x, e.drag.ox);
    //         if (e.drag.dx < - 60) { // 버리기
    //             spr.setAlpha(0.5);
    //         } else {
    //             spr.setAlpha(1);
    //         }
    //         e.drag.cancel = true;
    //     },
    //     mouseUpCallback: (spr, e) => {
    //         e.drag.x = Math.min(e.drag.x, e.drag.ox);
    //         if (e.drag.dx < -60) { // 버리기
    //             console.log(self);
    //             self.dropItem(item);
    //         } else {
    //             new Tween(spr, 100, { x: e.drag.ox }, { ease: easing.outCubic });
    //         }
    //         e.drag.cancel = true;
    //     },
    // });
    return [spr, null, spr.getHeight() - 3];
}

/**
 * @this Inventory
 *
 * @param {*} e
 */
function onClick( e ) {
    //log(e.index,e.item,e.item.data.item.name);
    const item = e.item.data.item;

    if ( e.x >= 90 && !this.tryUse( item ) ) {
        this.tryEquip( item );
    } else {
        // 아이템 설명 보기
        const diw = new _detailInfoWindow__WEBPACK_IMPORTED_MODULE_4__["default"]( item );

        diw.show();
    }
}



class Inventory {
    constructor( size ) {
        this.items = [];
        this.size = size;
    }

    isFull() {
        return this.items.length >= this.size;
    }

    addItem( item ) {
        if ( this.items.length >= this.size ) {
            return null;
        } else {
            this.items.push( item );

            return this.items.length;
        }
    }

    getIndex( item ) {
        return this.items.indexOf( item );
    }

    findEquippedItemByType( type ) {
        const t = [];

        for ( const i in this.items ) {
            const v = this.items[i];

            if ( v.property.type == type && v.equipped ) {
                t.push( v );
            }
        }

        return t;
    }

    findItemByType( type ) {
        const t = [];

        for ( const i in this.items ) {
            const v = this.items[i];

            if ( v.property.type == type ) {
                t.push( v );
            }
        }

        return t;
    }


    removeItem( item ) {
        const i = this.getIndex( item );

        if ( i ) {
            return this.removeItemAt( i );
        }
    }

    removeItemAt( i ) {
        const item = this.items[i];

        this.items.splice( i,1 );

        return item;
    }

    // 인벤토리를 닫았을 때 실행할 함수를 줄 수 있다
    close( func,data ) {
        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/inventory_close.wav" );
        const tw = _global__WEBPACK_IMPORTED_MODULE_15__["default"]["interface"].slideClose( () => {
            this.baseSpr.removeFromParent();
            this.listView = null;
            this.baseSpr = null;
            if ( func ) {
                func( data );
            } else {
                _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.showMapInfo( _global__WEBPACK_IMPORTED_MODULE_15__["default"].player.tileX, _global__WEBPACK_IMPORTED_MODULE_15__["default"].player.tileY );
            }
        } );

        tw.onChange( () => {
            //this.baseSpr.setX(GLOBAL.world.getX());
            //this.listView.updateClip();
        } );
    }

    dropItem( item ) {
        _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.addLog( "%s{을} 바닥에 버렸다.",item.name );
        for ( const i in this.listView.items ) {
            const v = this.listView.items[i];

            if ( v.data.item == item ) {
                this.listView.remove( v );
            }
        }
        _global__WEBPACK_IMPORTED_MODULE_15__["default"].player.inventory.removeItem( item );
        _global__WEBPACK_IMPORTED_MODULE_15__["default"]["interface"].actionSelector.unselect( item );
        item.drop( _global__WEBPACK_IMPORTED_MODULE_15__["default"].player.tileX,_global__WEBPACK_IMPORTED_MODULE_15__["default"].player.tileY );
        if ( _global__WEBPACK_IMPORTED_MODULE_15__["default"].player.inventory.items.length == 0 ) {
            _global__WEBPACK_IMPORTED_MODULE_15__["default"].player.inventory.setListView( _global__WEBPACK_IMPORTED_MODULE_15__["default"].player.inventory.baseSpr );
        }
    }

    setListView( baseSpr ) {
        {
            const numOfItem = 0;
            //TODO:
            const tf1 = _global__WEBPACK_IMPORTED_MODULE_15__["default"]["interface"].getBitmapTextField( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.format( "%d/%d", this.items.length,this.size ) );

            if ( this.items.length == this.size ) {
                tf1.setTextColor( 0xff0000 );
            } else {
                tf1.setTextColor( 0xffffff );
            }
            tf1.setPosition( 0,- 20 );
            baseSpr.addChild( tf1 );
        }
        if ( this.items.length == 0 ) {
            //
        } else {
            const lvItems = [];

            for ( const i in this.items ) {
                const v = this.items[i];

                lvItems.push( [v.name, { item: v }] );
            }
            const lv = new _lib_listView__WEBPACK_IMPORTED_MODULE_9__["default"](
                lvItems,
                120,
                _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.height - 20,
                {
                    owner:           this,
                    align:           "bottom",
                    //clip:            true,
                    cutOffsetBottom: 20,
                    //stickOnBorder = true,
                    spriteFunc:      spriteFunc,
					
                    animationFunc: ( self, spr, i ) => {
                        const i2 = self.getNumOfItems() - i + 1;
                        const { x, y } = spr.getPosition();

                        spr.setX( x + 160 );
                        new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( spr, 300, { x, y }, { delay: i2 * 0.02, ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCubic } );
                    },
					
                }
            );

            //lv.setAnchorPoint( 0, 0 );
            lv.setPosition( 0,-_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.height );
            lv.addEventListener( "click",onClick,this );
            baseSpr.addChild( lv );
            this.listView = lv;
            this.listView.addEventListener( "close", () => this.close() );
        }
    }


    open() {
        const baseSpr = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();

        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/inventory_open.wav" );
        console.log( "인벤토리 보기" );
        for ( const i in this.items ) {
            const v = this.items[i];

            console.log( v.name );
        }

        const tw = _global__WEBPACK_IMPORTED_MODULE_15__["default"]["interface"].slideOpen( -120, 0, () => {
            this.close();
        } );

        tw.onChange( () => {
            //baseSpr.setX(GLOBAL.world.getX());
            //this.listView.updateClip();
        } );
        this.setListView( baseSpr );
        this.baseSpr = baseSpr;
        _global__WEBPACK_IMPORTED_MODULE_15__["default"]["interface"].hudLayer.bottomRight.addChild( baseSpr );
    }


    tryEquip( item,notToggle ) {
        const i = this.getIndex( item );
        const equipMax = item.isEquippable() || 0;
        const equippedItems = this.findEquippedItemByType( item.property.type );
        const equipAvailable = equipMax - equippedItems.length;

        if ( equipMax && equipMax > 0 ) {
            if ( equipMax == 1 ) {
                if ( equippedItems[0] && !( notToggle && equippedItems[0] == item ) ) {
                    _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.addLog( "%s{을} 장비해제했다.",equippedItems[0].name );
                    equippedItems[0].unequip();
                    _global__WEBPACK_IMPORTED_MODULE_15__["default"]["interface"].actionSelector.unselect( equippedItems[0] );
                    if ( this.listView ) {
                        const lvItem = this.listView.getItem( this.getIndex( equippedItems[0] ) );

                        lvItem.sprite.updateEquip();
                    }
                    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/inventory_unequip.wav" );
                }
                if ( equippedItems[0] != item ) {
                    _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.addLog( "%s{을} 장비했다.",item.name );
                    item.equip();
                    if ( this.listView ) {
                        const lvItem = this.listView.getItem( this.getIndex( item ) );

                        lvItem.sprite.updateEquip();
                    }
                    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/inventory_equip.wav" );
                    if ( _global__WEBPACK_IMPORTED_MODULE_15__["default"].player.getSelectedAction().property.type == item.property.type ) {
                        _global__WEBPACK_IMPORTED_MODULE_15__["default"]["interface"].actionSelector.select( item );
                    }
                    _global__WEBPACK_IMPORTED_MODULE_15__["default"].player.doNothing();
                }
                _global__WEBPACK_IMPORTED_MODULE_15__["default"]["interface"].actionSelector.refresh();

                return true;
            } else {
                // 두개이상장비가능한 아이템
                if ( equipAvailable > 0 ) {
                    _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.addLog( "%s{을} 장비했다.",item.name );
                    item.equip();
                    if ( this.listView ) {
                        const lvItem = this.listView.getItem( this.getIndex( item ) );

                        lvItem.sprite.updateEquip();
                    }
                    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/inventory_equip.wav" );
                    _global__WEBPACK_IMPORTED_MODULE_15__["default"].player.doNothing();
                } else {
                    _global__WEBPACK_IMPORTED_MODULE_15__["default"].world.addLog( "다른 장비를 벗기 전에는 %s{을} 장비할 수 없다.",item.name );

                    return false;
                }
            }
        } else {
            console.log( "장비할 수 없는 아이템을 장비하려함" );

            return false;
        }
    }

    tryUse( item ) {
        if ( item.property.type == "usable" ) {
            return true;
        } else {
            return null;
        }
    }
}





/***/ }),

/***/ "./games/Avalonika/src/interface/topMenu.js":
/*!**************************************************!*\
  !*** ./games/Avalonika/src/interface/topMenu.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ TopMenu)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../global */ "./games/Avalonika/src/global.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ "./games/Avalonika/src/config.js");
/* harmony import */ var _lib_iconPack__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @lib/iconPack */ "./engine/src/lib/iconPack.js");
/* harmony import */ var _lib_grid9__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @lib/grid9 */ "./engine/src/lib/grid9.js");
/* harmony import */ var _lib_slideView__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @lib/slideView */ "./engine/src/lib/slideView.js");
/* harmony import */ var _world_world__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../world/world */ "./games/Avalonika/src/world/world.js");
/* harmony import */ var _world_gameMap__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../world/gameMap */ "./games/Avalonika/src/world/gameMap.js");
/* harmony import */ var _interface__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./interface */ "./games/Avalonika/src/interface/interface.js");
/* harmony import */ var _lib_visibilityTile__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @lib/visibilityTile */ "./engine/src/lib/visibilityTile.js");













let dot6Texture = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "dot6.png",false,{ format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } );
let dot10Texture = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "dot10.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } );

function setIndexDot( self,index,maxIndex ) {
    self.indexDotSprite.removeFromParent();
    let s = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();

    for ( let i = 0; i <= maxIndex; i++ ) {
        let b;

        if ( index == i ) {
            b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( dot10Texture );
            b.setAnchorPoint( 0.5,0.5 );
            b.setAlpha( 0.9 );
        } else {
            b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( dot6Texture );
            b.setAnchorPoint( 0.5,0.5 );
            b.setAlpha( 0.5 );
        }
        b.setPosition( -maxIndex / 2 * 8 + ( i - 0.5 ) * 8,0 );
        s.addChild( b );
    }
    s.setPosition( application.logicalViewport.width / 2,TopMenu.height - 10 );
    self.indexDotSprite = s;
    self.baseSpr.addChild( s );
}


class TopMenu extends _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite {
    constructor() {
        super();
    }

    close( callback ) {
        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/top_menu_close.wav" );
        _global__WEBPACK_IMPORTED_MODULE_1__["default"]["interface"].slideClose( () => {
            this.baseSpr.removeFromParent();
            _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.showMapInfo( _global__WEBPACK_IMPORTED_MODULE_1__["default"].player.tileX,_global__WEBPACK_IMPORTED_MODULE_1__["default"].player.tileY );
        } )
            .onChange( () => {
                this.baseSpr.setY( _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getY() - TopMenu.height );
            } );
    }

    open() {
        let baseSpr = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();

        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/top_menu_open.wav" );
        console.log( "탑 메뉴" );
        //this.setListView(GLOBAL.world,baseSpr);
        this.baseSpr = baseSpr;
        _global__WEBPACK_IMPORTED_MODULE_1__["default"]["interface"].hudLayer.addChild( baseSpr );
        //GLOBAL.interface.hiresLayer.addChild(baseSpr);
        let panels = {};
        let [x,y,w] = _global__WEBPACK_IMPORTED_MODULE_1__["default"].stage.renderViewport.xywh;
        let h = TopMenu.height;

        panels[0] = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh.createBox( x,y,w,h,0x000000 );
        panels[1] = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh.createBox( x,y,w,h,0xff0000 );
        panels[2] = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh.createBox( x,y,w,h,0x0000ff );
        this.makeCharacterPanel( panels[0] );
        let sv = new _lib_slideView__WEBPACK_IMPORTED_MODULE_5__["default"]( w,TopMenu.height,panels )
            .on( "indexChanging",( e ) => {
                setIndexDot( this,e.index,panels.length );
            } );

        baseSpr.addChild( sv );
        _global__WEBPACK_IMPORTED_MODULE_1__["default"]["interface"].slideOpen( 0,TopMenu.height,() => {
            this.close();
        } )
            .onChange( () => {
                this.baseSpr.setY( _global__WEBPACK_IMPORTED_MODULE_1__["default"].world.getY() - TopMenu.height );
            } );
    }


    makeCharacterPanel( s ) {
        {
            let b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "nameFrame.png",false,{ format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA4444 } ) );

            b.setAnchorPoint( 0.5,0.5 );
            //b.setOverrideColor(0x505050);
            b.setPosition( application.logicalViewport.width / 2,30 );
            s.addChild( b );
        }
        {
            let tf = _global__WEBPACK_IMPORTED_MODULE_1__["default"]["interface"].getHiresTextField( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.format( "레벨%d 바바리안 전사",_global__WEBPACK_IMPORTED_MODULE_1__["default"].player.level ),_interface__WEBPACK_IMPORTED_MODULE_8__["default"].uiTtf );

            tf.setTextColor( 0xc0c0c0 );
            tf.setPosition( application.logicalViewport.width / 2 - tf.getWidth() / 2,55 );
            s.addChild( tf );
        }
        {
            let tf = _global__WEBPACK_IMPORTED_MODULE_1__["default"]["interface"].getHiresTextField( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.format( "김나크",_global__WEBPACK_IMPORTED_MODULE_1__["default"].player.level ) );

            tf.setTextColor( 0x000000 );
            tf.setPosition( application.logicalViewport.width / 2 - tf.getWidth() / 2,32 );
            s.addChild( tf );
        }
        {
            let b = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Bitmap( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "paperdoll.png",false,{ format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ) );

            //let b = GLOBAL.interface.getHiresBitmap(new Texture("paperdoll.png",false,{format:TextureBase.RGBA5551}));
            b.setAnchorPoint( 0.5,0.5 );
            b.setPosition( application.logicalViewport.width / 2 - 20,110 );
            s.addChild( b );
        }
        {
            let tf = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextField( _interface__WEBPACK_IMPORTED_MODULE_8__["default"].font,_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.format( "STR %d",_global__WEBPACK_IMPORTED_MODULE_1__["default"].player.str ) );

            tf.setTextColor( 0xffffff );
            tf.setPosition( application.logicalViewport.width / 2 + 10,100 );
            s.addChild( tf );
        }
        {
            let tf = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextField( _interface__WEBPACK_IMPORTED_MODULE_8__["default"].font,_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.format( "DEX %d",_global__WEBPACK_IMPORTED_MODULE_1__["default"].player.dex ) );

            tf.setTextColor( 0xffffff );
            tf.setPosition( application.logicalViewport.width / 2 + 10,100 + 8 );
            s.addChild( tf );
        }
        {
            let tf = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextField( _interface__WEBPACK_IMPORTED_MODULE_8__["default"].font,_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.format( "INT %d",_global__WEBPACK_IMPORTED_MODULE_1__["default"].player.int ) );

            tf.setTextColor( 0xffffff );
            tf.setPosition( application.logicalViewport.width / 2 + 10,100 + 8 * 2 );
            s.addChild( tf );
        }
        {
            let tf = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextField( _interface__WEBPACK_IMPORTED_MODULE_8__["default"].font,_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.format( "LUCK %d",_global__WEBPACK_IMPORTED_MODULE_1__["default"].player.luck ) );

            tf.setTextColor( 0xffffff );
            tf.setPosition( application.logicalViewport.width / 2 + 10,100 + 8 * 3 );
            s.addChild( tf );
        }
        {
            let tf = _global__WEBPACK_IMPORTED_MODULE_1__["default"]["interface"].getHiresTextWrap(
                "북쪽지방의 바바리안은 타고난 전사이다.\n그들은 평생을 용병이나 모험가로 살아가며 끝없는 전투를 통해\n자신을 증명하고 발할라로 가기를 꿈꾼다.",
                application.logicalViewport.width - _config__WEBPACK_IMPORTED_MODULE_2__["default"].Interface.margin * 2,40,15,_interface__WEBPACK_IMPORTED_MODULE_8__["default"].uiTtf,"center" );

            tf.setTextColor( 0xc0c0c0 );
            tf.setPosition( application.logicalViewport.width / 2,160 );
            tf.setScale( tf.getScaleX() * 0.8,tf.getScaleY() * 0.8 );
            s.addChild( tf );
        }
    }
}
TopMenu.height = 220;




/***/ }),

/***/ "./games/Avalonika/src/proceduralMap/customBlocks.js":
/*!***********************************************************!*\
  !*** ./games/Avalonika/src/proceduralMap/customBlocks.js ***!
  \***********************************************************/
/***/ (() => {

const CustomBlocks = {
    ["campfire"]: {
        map: [
            "M1111111M\n" +
            "3.......2\n" +
            "3...F...2\n" +
            "3.......2\n" +
            "M4444444M",
        ],
        doorMin:        2,
        doorMax:        4,
        canClip:        false,
        margin:         2,
        wall:           "M",
        chanceToAppear: 1,
        appearFloor:    [[2, 5]],
        whiteAttrib:    [["dungeon", 1], ["cave", 1]],
        blackAttrib:    [],
        special:        "campfire",
        maxTry:         5,
        mustPlace:      true,
        lock:           "all",
        func:           null,
    },
    ["room_01"]: {
        map: [
            "M11111111M\n" + 
            "3        2\n" + 
            "3 ~~||~~ 2\n" + 
            "3 ~    ~ 2\n" + 
            "3 ~    ~ 2\n" + 
            "3 ~~||~~ 2\n" + 
            "3        2\n" + 
            "M44444444M" ,
            
            "0000M1111M0000\n" + 
            "0000M    M0000\n" + 
            "0000M    M0000\n" + 
            "0000M    M0000\n" + 
            "MMMMM    MMMMM\n" + 
            "3            2\n" + 
            "3            2\n" + 
            "3            2\n" + 
            "MMMMM    MMMMM\n" + 
            "0000M    M0000\n" + 
            "0000M    M0000\n" + 
            "0000M    M0000\n" + 
            "0000M4444M0000" ,
        ],
        doorMin:        1,
        doorMax:        4,
        canClip:        false,
        margin:         2,
        wall:           "M",
        chanceToAppear: 5,
        appearFloor:    null,//[[2,5]],
        whiteAttrib:    [["dungeon", 1]],
        blackAttrib:    [],
        special:        null,
        maxTry:         2,
        mustPlace:      false,
        lock:           "all",
        func:           null,
    },
    ["lava_01"]: {
        map: [
            
            "000%%%000\n" + 
            "00%%%%%00\n" + 
            "%%%%%%%%%\n" +
            "%%%%%%%00\n" + 
            "00%%00000" ,
            
            "%%%000%%%\n" +
            "%%%%%%%%%\n" +
            "%%%%%%000\n" + 
            "00%%%%%00\n" + 
            "0000%%%%%" ,
                        
            "00%%%%%00\n" + 
            "%%%%%%%%%\n" +
            "%%%00%%%0\n" + 
            "%000%%%00\n" + 
            "00%%%%000" , 

            "00%%00\n" + 
            "%%%%%0\n" +
            "%%%%%0\n" + 
            "%%%%%%\n" +
            "0%%%%%\n" +
            "0%%%%%\n" +
            "00%%%0" , 

        ],
        doorMin:        0,
        doorMax:        0,
        canClip:        false,
        margin:         0,
        wall:           null,
        chanceToAppear: 5,
        appearFloor:    [[6, 999]],
        whiteAttrib:    [["cave", 1]],
        blackAttrib:    [],
        special:        null,
        maxTry:         1,
        mustPlace:      false,
        lock:           "all",
        func:           null,
    },

};




/***/ }),

/***/ "./games/Avalonika/src/proceduralMap/proceduralMap.js":
/*!************************************************************!*\
  !*** ./games/Avalonika/src/proceduralMap/proceduralMap.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ProceduralMap)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _world_gameMap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../world/gameMap */ "./games/Avalonika/src/world/gameMap.js");
/* harmony import */ var _lib_random__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @lib/random */ "./engine/src/lib/random.js");
/* harmony import */ var _customBlocks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./customBlocks */ "./games/Avalonika/src/proceduralMap/customBlocks.js");
/* harmony import */ var _customBlocks__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_customBlocks__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _entity_pet__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../entity/pet */ "./games/Avalonika/src/entity/pet.js");
/* harmony import */ var _entity_monster__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../entity/monster */ "./games/Avalonika/src/entity/monster.js");
/*

지도를 생성할 떄는 조금씩 만들 수 있게 해야함

options;
seed = 랜덤시드

width = {min,max}
height = {min,max}
numOfFloor = {min,max}

numOfBoss;
cave = 0.0~1.0   1.0이면 1층부터 자연동굴이고 0.5이면 중간부터 0.0이면 1층부터 인공


*/










const DEBUG_LOG = false;
const log = DEBUG_LOG ? console.log : ()=>{};


//_PRANDOM @ |this.random.random|

/**
 * @this ProceduralMap
 *
 * @param {number} x
 * @param {number} y
 * @param {number} minSector
 * @returns {*[]|null}
 */
function findNearestSector( x, y, minSector ) {
    let t;
    let path;

    let checkSurrounding = ( node, x, y ) => {
        if ( path[x + "," + y] ) {
            //막힘
            if ( fail ) {
                log( "본것", x, y );
            }

            return;
        }
        let c = this.read( x, y );

        if ( typeof c == "number" && c >= minSector ) {
            if ( fail ) {
                log( "발견", minSector );
            }

            return [ node, x, y, c ]; //찾았음
        }
        // 락이 2가 아닌 벽은 뚫음
        if ( this.readLock( x, y ) == 2 && ( typeof c != "number" && !this.isSpace( x, y ) ) ) {
            if ( fail ) {
                log( "락", x, y, c, typeof c );
            }

            return;
        }
        if ( fail ) {
            log( "처리", x, y );
        }
        let newNode = [node, x, y, c];

        path[x + "," + y] = newNode;
        t.push( [newNode, x - 1, y] );
        t.push( [newNode, x + 1, y] );
        t.push( [newNode, x, y - 1] );
        t.push( [newNode, x, y + 1] );
    };


    let fail;

    do {
        let curSector = this.read( x, y );

        path = {};
        t = [[null, x, y ]];
	
        let result;

        do {
            let t1 = t;

            t = [];
            if ( fail ) {
                log( "처리할 점의 수", t1.length );
            }
            for ( let i in t1 ) {
                let [node,x,y] = t1[i];

                result = checkSurrounding( node, x, y );
                if ( result ) {
                    break;
                }
            }
        } while ( result == null && t.length != 0 );
        let lastNode = result;

        if ( lastNode ) {
            let curNode = lastNode;
            let [node,x,y,sectorNum] = curNode;

            log( `${minSector} 이상의 섹터를 찾은 결과 ${sectorNum} 발견` );
            let t2 = [];

            do {
                [node, x, y] = curNode;
                t2.push( [x,y] );
                curNode = node;
            } while ( curNode != null && !( typeof sectorNum == "number" && sectorNum == curSector ) );

            return t2;
        } else {
            log( minSector, "연결 대상을 못찾음" );
            if ( fail ) {
                console.assert();
            }
            fail = true;
        }
    } while ( fail );
}




// 선긋기하는 용도랑 약간 다르다. 대각선이동할때 두꺼워져야 함
// for에서 사용하는 이터레이터임
function *rayCast( xStart, yStart, xEnd, yEnd ) {
    // change from step to step;
    let tValue, xGrid, yGrid, tForNextBorderX, tForNextBorderY;
    //print("input",xStart, yStart, xEnd, yEnd);
    // constant throughout raycast;
    let xDirection, yDirection, tForOneX, tForOneY, xStep, yStep;

    xDirection = xEnd - xStart;
    yDirection = yEnd - yStart;
    tForOneX = Math.abs( 1.0 / ( xDirection + 0.00001 ) );
    tForOneY = Math.abs( 1.0 / ( yDirection + 0.00001 ) );
    yStep = ( yDirection >= 0 ) ? 1 : -1;
    xStep = ( xDirection >= 0 ) ? 1 : -1;
    let xSign = ( xDirection >= 0 ) ? 0 : 1;
    let ySign = ( yDirection >= 0 ) ? 0 : 1;

    tValue = 0;
    xGrid = Math.floor( xStart );
    yGrid = Math.floor( yStart );
    let fracStartPosX = xStart - Math.floor( xStart );

    if ( xDirection > 0 ) {
        tForNextBorderX = ( 1 - fracStartPosX ) * tForOneX;
    } else {
        tForNextBorderX = fracStartPosX * tForOneX;
    }

    let fracStartPosY = yStart - Math.floor( yStart );

    if ( yDirection > 0 ) {
        tForNextBorderY = ( 1 - fracStartPosY ) * tForOneY;
    } else {
        tForNextBorderY = fracStartPosY * tForOneY;
    }


    let isLast;

    while ( !isLast ) {
        if ( tForNextBorderX <= tForNextBorderY ) {
            // step in x;
            tValue = tForNextBorderX;
            tForNextBorderX = tForNextBorderX + tForOneX;
            xGrid = xGrid + xStep;
        } else {
            // step in y;
            tValue = tForNextBorderY;
            tForNextBorderY = tForNextBorderY + tForOneY;
            yGrid = yGrid + yStep;
        }
        isLast = tValue > 1.0;
        yield [xGrid, yGrid];
    }
}


class ProceduralMap {
//let log = function(...) }

    /**
     *Creates an instance of ProceduralMap.
     * @param {object} options
     * @param {number=} options.floor
     * @param {number=} options.seed
     * @param {number|{min:number,max:number}=} options.width
     * @param {number|{min:number,max:number}=} options.height
     * @param {number|{min:number,max:number}=} options.numOfFloor
     * @param {string[]=} options.attrib
     * @param {"wildness"|"dungeon"=} options.type
     * @param {number=} options.cave 0.0~1.0 자연 동굴의 비율
     * @param {number=} options.numOfBoss
     * @param {number=} options.numOfCampfire
     * @param {number=} options.numOfShop
     * @memberof ProceduralMap
     */
    constructor( options ) {
        options = options || {};
        this.options = options;
        this.options.floor = this.options.floor != null ? this.options.floor : 1;
        log( "랜덤시드",this.options.seed );
        this.random = new _lib_random__WEBPACK_IMPORTED_MODULE_2__["default"]( this.options.seed );
        this.options.seed = this.options.seed  != null ? this.options.seed  : this.random.seed;
        this.options.width = this.options.width  != null ? this.options.width  : { min: 24,max: 40 };
        this.options.height = this.options.height  != null ? this.options.height  : { min: 24,max: 40 };
        this.options.numOfFloor = this.options.numOfFloor  != null ? this.options.numOfFloor  : { min: 5,max: 10 };
		
        this.width = typeof this.options.width == "number" ? this.options.width : this.random.random( this.options.width.min,this.options.width.max );
        this.height = typeof this.options.height == "number" ? this.options.height : this.random.random( this.options.height.min,this.options.height.max );
        // 생성에 참고하는 어트리뷰트
        // 커스텀블록이 배치될 때 이 어트리뷰트를 참고해서 등장 여부가 결정된다.
        this.attrib = [];
        if ( options.attrib ) {
            for ( let k in options.attrib ) {
                let v = options.attrib[k];

                this.attrib[k] = v;
            }
        }
        //-------------------------------------------------
        // 생성된 맵이 들어갈 곳
        //-------------------------------------------------
        this.map = [];
        // 읽기/쓰기 제어
        this.readMap = this.map;
        this.writeMap = this.map;
        // 시작점=올라가는 계단
        /** @type {number} */
        this.startX = undefined;
        /** @type {number} */
        this.startY = undefined;
        // 끝점=내려가는 계단  월드에서는 없다
        /** @type {number} */
        this.endX = undefined;
        /** @type {number} */
        this.endY = undefined;
        // lockMap은 생성 중에 만들던 내용을 덮어쓰지 않도록 마스킹할 때 쓴다.
        this.lockMap = [];
        this.clear( null,this.lockMap );
        // 락맵 내용
        // null = 락안됨   
        // 1 = 락되어 커스텀블록이 못올라가지만 길은 뚫을 수 있음
        // 2 = 길도 못 뚫음. 변경불가

        //-------------------------------------------------
        // 오브젝트 배치
        //-------------------------------------------------
        /** @type {*[][]} */
        this.entityMap = [];
        this.clear( null,this.entityMap );
        // 오브젝트맵 내용
        // null == 배치안함
        // table = {type,char,options}

        //-------------------------------------------------
        // 흥미도 계산 결과 {score 0~1,x,y}
        //-------------------------------------------------
        /** @type {[number,number,number][]} */
        this.scoreList = undefined;
        // 스코어 내용
        // {점수0~1,x,y}


        //-------------------------------------------------
        // 타입에 따라 생성
        //-------------------------------------------------
        if ( options.type == "wildness" ) {
            // 야외 타입으로 생성하는 경우

            //this.generateWildness();
        } else if  ( options.type == "dungeon" ) {
            // 던전 타입으로 생성

            // 던전의 층 수
            this.numOfFloor = typeof this.options.numOfFloor == "number" ? this.options.numOfFloor : this.random.random( this.options.numOfFloor.min,this.options.numOfFloor.max );
            // 지금 들어가는 층
            // 같은 시드를 주고 층을 오갈 수 있게 하기 위해서임
            this.floor = this.options.floor;
            // cave 값은 자연동굴이 얼마나 차지하는가를 지정함 0.0 이면 전체 층이 인공이다.
            let cave = this.options.cave != null ? this.options.cave : this.random.random( 0,10 ) / 10;
            let caveRange = Math.min( Math.abs( 1 - cave ),Math.abs( 0 - cave ) );

            this.caveStart = this.random.random(
                Math.floor( this.numOfFloor * ( 1 - cave - caveRange ) ),
                Math.floor( this.numOfFloor * ( 1 - cave + caveRange ) )
            );
            // 보스가 위치하는 층이 어디인지 지정한다
            this.bossFloors = [];
            this.numOfBoss = Math.min( this.options.numOfBoss  != null ? this.options.numOfBoss  : 0 , this.numOfFloor );
            if ( this.numOfBoss > 0 ) {
                if ( this.numOfBoss > 1 ) {
                    this.bossFloors = this.random.pick( 1, this.numOfFloor - 1, this.numOfBoss - 1 );
                } else {
                    // 마지막 보스는 항상 맨 아래층에 있다
                    this.bossFloors[this.numOfBoss - 1] = this.numOfFloor;
                }
            }
            // 상점
            this.shopFloors = {};
            this.numOfShop = Math.min( this.options.numOfShop  != null ? this.options.numOfShop  : 0 , this.numOfFloor );
            if ( this.numOfShop > 1 ) {
                this.shopFloors = this.random.pick( 1, this.numOfFloor - 1, this.numOfShop );
            }
            // 캠프파이어
            this.campfireFloors = {};
            this.numOfCampfire = Math.min( this.options.numOfCampfire  != null ? this.options.numOfCampfire  : 0 , this.numOfFloor );
            if ( this.numOfCampfire > 1 ) {
                this.campfireFloors = this.random.pick( 1, this.numOfFloor - 1, this.numOfCampfire );
            }


            //랜덤버리기
            for ( let i = 1; i <= this.floor; i++ ) {
                this.random.random( 0,0 );
            }

            //-------------------------------------------------
            // 생성하는 부분
            //-------------------------------------------------
			
            let sector;

            if ( this.floor < this.caveStart ) {
                this.attrib.push( "dungeon" );
                sector = this.generateDungeon();
            } else {
                this.attrib.push( "cave" );
                sector = this.generateCave();
            }
            if ( !sector ) {
                let s = this.getMapString( this.map );

                log( s );
                console.assert( sector,"던전 생성 실패" );
            }
			
            // 흥미도 계산 결과로 맵을 돌려줌
            // 이미지 프로세싱을 할꺼면 맵을 쓰면된다.
            // 그외에는 scoreList를 쓴다
            this.computeInterestingMap();
            // 프랍배치
            this.placeProps();
            // 몬스터배치
            this.placeMonsters();
            // 내려가는 계단 달기
            if ( this.floor < this.numOfFloor ) {
                this.makeDownStair();
            }
            this.closeDoors();
        }
    }


    setReadWrite( readMap,writeMap ) {
        this.readMap = readMap || this.map;
        this.writeMap = writeMap || this.map;
    }

    cloneMap( map ) {
        map = map || this.readMap;
        let t = [];

        for ( let y = 0; y < this.height; y++ ) {
            t[y] = [];
            for ( let x = 0; x < this.width; x++ ) {
                t[y][x] = map[y][x];
            }
        }

        return t;
    }

    clear( c,map ) {
        map = map || this.writeMap;
        map.length = 0;
        for ( let y = 0; y < this.height; y++ ) {
            map[y] = [];
            if ( c != null ) {
                for ( let x = 0; x < this.width; x++ ) {
                    map[y][x] = c;
                }
            }
        }
    }

    getMapString( map ) {
        // 빠른 버전
        map = map || this.readMap;
        let s = "";

        for ( let y = 0; y < this.height; y++ ) {
            s = s + map[y].join( "" );
            if ( y != this.height - 1 ) s += "\n";
        }

        return s;
    }

    logMapString( map ) {
        map = map || this.readMap;
        let s = "";

        for ( let y = 0; y < this.height; y++ ) {
            for ( let x = 0; x < this.width; x++ ) {
                let c = map[y][x];

                if ( typeof c == "object" ) {
                    c = c[2];	// objectMap;
                } else if  ( typeof c == "number" ) {
                    c = ( map[y][x] ).tostring();
                } else if  ( c == null ) {
                    c = "°"; // null 대신 표시
                }
                s = s + c.tostring();
            }
            s = s + "\n";
        }
        log( "\n" + s );

        return s;
    }

    getEntityList( map ) {
        map = map != null ? map : this.entityMap;
        //this.getMapString(map) -- 테스트 출력
        let t = [];

        for ( let y = 0; y < this.height; y++ ) {
            for ( let x = 0; x < this.width; x++ ) {
                if ( map[y][x] ) {
                    t.push( { type: map[y][x][0], x: x, y: y, char: map[y][x][1], options: map[y][x][2] } );
                }
            }
        }

        return t;
    }

    //-------------------------------------------------------------------------------------------------
    // 오브젝트 배치 도구
    //-------------------------------------------------------------------------------------------------
    addEntity( x,y,type,char,options ) {
        this.draw( x,y,[type,char,options],this.entityMap );
    }

    removeEntity( x,y ) {
        this.draw( x,y,null,this.entityMap );
    }

    readEntity( x,y ) {
        let v = this.read( x,y,this.entityMap );

        return v && v[0] || null;
    }

    //-------------------------------------------------------------------------------------------------
    // 계산 도구
    //-------------------------------------------------------------------------------------------------

    isSpace( x,y ) {
        let c = this.read( x,y );

        return typeof c == "string" && ( ( _world_gameMap__WEBPACK_IMPORTED_MODULE_1__["default"].tileStringData[c].wall & _world_gameMap__WEBPACK_IMPORTED_MODULE_1__["default"].BLOCK_PASS ) == 0 );
    }

    countSurrounded( x,y,tc ) {
        let count = 0;

        count = count + ( this.read( x - 1,y - 1 ) != tc ? 0 : 1 );
        count = count + ( this.read( x  ,y - 1 ) != tc ? 0 : 1 );
        count = count + ( this.read( x + 1,y - 1 ) != tc ? 0 : 1 );
        count = count + ( this.read( x - 1,y  ) != tc ? 0 : 1 );
        count = count + ( this.read( x + 1,y  ) != tc ? 0 : 1 );
        count = count + ( this.read( x - 1,y + 1 ) != tc ? 0 : 1 );
        count = count + ( this.read( x  ,y + 1 ) != tc ? 0 : 1 );
        count = count + ( this.read( x + 1,y + 1 ) != tc ? 0 : 1 );

        return count;
    }

    countSurroundedBlock( x,y ) {
        let count = 0;

        count = count + ( this.isSpace( x - 1,y - 1 ) ? 0 : 1 );
        count = count + ( this.isSpace( x  ,y - 1 ) ? 0 : 1 );
        count = count + ( this.isSpace( x + 1,y - 1 ) ? 0 : 1 );
        count = count + ( this.isSpace( x - 1,y  ) ? 0 : 1 );
        count = count + ( this.isSpace( x + 1,y  ) ? 0 : 1 );
        count = count + ( this.isSpace( x - 1,y + 1 ) ? 0 : 1 );
        count = count + ( this.isSpace( x  ,y + 1 ) ? 0 : 1 );
        count = count + ( this.isSpace( x + 1,y + 1 ) ? 0 : 1 );

        return count;
    }

    checkBox( x1,y1,x2,y2 ) {
        for ( let y = y1; y <= y2; y++ ) {
            for ( let x = x1; x <= x2; x++ ) {
                let tc = this.read( x,y );

                if ( tc != null ) {
                    return true;
                }
            }
        }

        return false;
    }

    checkMapString( x,y,s ) {
        let t = s.split( "\n" );
        let height = t.length;
        let width = t[0].length;

        for ( let yy = 0; yy < height; yy++ ) {
            for ( let xx = 0; xx < width; xx++ ) {
                let c = t[yy].substr( xx,1 );

                if ( c != "0" ) { // 투명색
                    let tc = this.read( x + xx,y + yy );

                    if ( tc != null ) {
                        return true;
                    }
                }
            }
        }

        return false;
    }

    getMapStringSize( s ) {
        let t = s.split( "\n" );
        let height = t.length;
        let width = t[1].length;

        return [width,height,t];
    }

    getSpaceTable( x1,y1,x2,y2 ) {
        x1 = x1 || 1;
        y1 = y1 || 1;
        x2 = x2 || this.width;
        y2 = y2 || this.height;
        let t = [];

        for ( let y = y1; y <= y2; y++ ) {
            for ( let x = x1; x <= x2; x++ ) {
                if ( this.isSpace( x,y ) ) {
                    t.push( [x, y] );
                }
            }
        }

        return t;
    }

    getSameCharTable( x1,y1,x2,y2,tc ) {
        let t = [];

        for ( let y = y1; y <= y2; y++ ) {
            for ( let x = x1; x <= x2; x++ ) {
                let c = this.read( x,y );

                if ( c == tc ) {
                    t.push( [x, y] );
                }
            }
        }

        return t;
    }

    getPassages( x,y ) {
        let t = [];

        if ( this.isSpace( x - 1, y ) ) {
            t.push( [-1, 0] );
        }
        if ( this.isSpace( x + 1, y ) ) {
            t.push( [1, 0] );
        }
        if ( this.isSpace( x, y - 1 ) ) {
            t.push( [0, -1] );
        }
        if ( this.isSpace( x, y + 1 ) ) {
            t.push( [0, 1] );
        }

        return t;
    }

    getConnectedNearFloor( x,y,count, lockRefMap ) {
        let fail;
        let path = {};
        let t = [[x,y]];
        let t2 = [];
		
        let checkSurrounding = ( x, y ) => {
            let c = this.read( x, y );

            if ( path[x + "," + y] || !this.isSpace( x, y ) || c == "<" ) {
                // 체크한 곳이거나
                // 빈공간이 아니거나
                return;
            }
            path[x + "," + y] = true;
            if ( c != "D" && this.read( x, y, lockRefMap ) ) {
                // 문위에 뭔가를 배치하지 않도록 하자
                // 락리퍼런스맵이 null인 경우도 스킵
                // 아에 막진 말고 배치만 스킵
                t2.push( [ x, y ] );
            }
            if ( t2.length >= count ) {
                return true;
            }
            t.push( [x - 1, y] );
            t.push( [x + 1, y] );
            t.push( [x, y - 1] );
            t.push( [x, y + 1] );
        };

        do {
            let t1 = t;

            t = [];
            for ( let i in t1 ) {
                let [x,y] = t1[i];
			
                if ( checkSurrounding( x, y ) ) {
                    return t2;
                }
            }
        } while ( t.length != 0 );

        return t2;
    }


    //-------------------------------------------------------------------------------------------------
    // 맵 그리기 도구
    //-------------------------------------------------------------------------------------------------

    /**
     *
     *
     * @param {number} x
     * @param {number} y
     * @param {string|number|[*,*,*]} c
     * @param {*[]=} map
     * @memberof ProceduralMap
     */
    draw( x, y, c, map ) {
        console.assert( c != undefined, "c가 undefined" );
        console.assert( c != null, "c가 null" );
        if ( x < 0 || x >= this.width || y < 0 || y >= this.height ) {
            return;
        } else {
            map = map != null ? map : this.writeMap;
            map[y][x] = c;
        }
    }

    /**
     *
     *
     * @param {number} x
     * @param {number} y
     * @param {*[]=} map
     * @returns {string|number|null|[*,*,*]}
     * @memberof ProceduralMap
     */
    read( x,y,map ) {
        if ( x < 0 || x >= this.width || y < 0 || y >= this.height ) {
            return "W";
        } else {
            map = map != null ? map : this.readMap;

            return map[y][x];
        }
    }

    /**
     *
     *
     * @param {number} x
     * @param {number} y
     * @returns {number}
     * @memberof ProceduralMap
     */
    readLock( x,y ) {
        if ( x < 0 || x >= this.width || y < 0 || y >= this.height ) {
            return 2;
        } else {
            if ( y == null || x == null || this.lockMap[y] == null ) {
                log( x,y,this.lockMap[y] );
            }

            return this.lockMap[y][x];
        }
    }

    /**
     *
     *
     * @param {number} x1
     * @param {number} y1
     * @param {number} x2
     * @param {number} y2
     * @param {number|string} c
     * @memberof ProceduralMap
     */
    drawBox( x1,y1,x2,y2,c ) {
        for ( let y = y1; y <= y2; y++ ) {
            for ( let x = x1; x <= x2; x++ ) {
                this.draw( x,y,c );
            }
        }
    }


    /**
     *
     *
     * @param {number} x1
     * @param {number} y1
     * @param {number} x2
     * @param {number} y2
     * @param {number} tc
     * @param {boolean} checkGreaterEqual
     * @returns {*[]}
     * @memberof ProceduralMap
     */
    traceRay( x1,y1,x2,y2,tc,checkGreaterEqual ) {
        for ( let [tx,ty] of rayCast( x1,y1,x2,y2 ) ) {
            let rc = this.read( tx,ty );

            if ( checkGreaterEqual && typeof rc == "number" && rc >= tc ) {
                return [tx,ty,rc];
            } else if  ( rc == tc ) {
                return [tx,ty,rc];
            }
        }

        return [x2,y2,tc];
    }

    /**
     *
     *
     * @param {number} x1
     * @param {number} y1
     * @param {number} x2
     * @param {number} y2
     * @returns {*[]|null}
     * @memberof ProceduralMap
     */
    traceRayToSpace( x1,y1,x2,y2 ) {
        for ( let [tx,ty] of rayCast( x1,y1,x2,y2 ) ) {
            if ( this.isSpace( tx,ty ) ) {
                return [tx,ty];
            }
        }

        return;
    }


    /**
     *
     *
     * @param {number} x1
     * @param {number} y1
     * @param {number} x2
     * @param {number} y2
     * @param {number|string} c
     * @param {boolean=} bridge
     * @memberof ProceduralMap
     */
    drawLine( x1,y1,x2,y2,c,bridge ) {
        for ( let [tx,ty,cx,cy] of rayCast( x1,y1,x2,y2 ) ) {
            let rc = this.read( tx,ty );

            if ( bridge && ( rc == "%" || rc == "~" ) ) {
                //용암이나 물이면 다리를 덮는다
                this.draw( tx,ty,"|" );
            } else {
                this.draw( tx,ty,c );
            }
        }
    }

    /**
     *
     *
     * @param {number} x
     * @param {number} y
     * @param {string} s
     * @param {string|number=} forceChar
     * @memberof ProceduralMap
     */
    drawMapString( x,y,s,forceChar ) {
        let t = s.split( "\n" );
        let height = t.length;
        let width = t[0].length;

        for ( let yy = 0; yy < height; yy++ ) {
            for ( let xx = 0; xx < width; xx++ ) {
                let c = t[yy].substr( xx,1 );

                if ( c != "0" ) { // 투명색
                    this.draw( x + xx,y + yy,forceChar != null ? forceChar : c );
                }
            }
        }
    }



    //-------------------------------------------------------------------------------------------------
    // 두 점을 연결하기
    // 벽을 파면서 연결하는 것이므로 자연동굴 생성의 초기에만 사용
    //-------------------------------------------------------------------------------------------------

    /**
     *
     *
     * @param {number} x1
     * @param {number} y1
     * @param {number} x2
     * @param {number} y2
     * @param {string|number} c
     * @memberof ProceduralMap
     */
    connect( x1,y1,x2,y2,c ) {
        let method = this.random.random( 1,3 );
        let bridge;

        if ( method == 1 ) {
            if ( this.random.random( 1,3 ) == 1 ) {
                bridge = true;
            }
            this.drawLine( x1,y1,x2,y2,c,bridge );
        } else if  ( method == 2 ) {
            //수직 먼저 하는 직각 
            if ( this.random.random( 1,4 ) > 1 ) {
                bridge = true;
            }
            this.drawLine( x1,y2,x2,y2,c,bridge );
        } else {
            //수평 먼저 하는 직각 
            if ( this.random.random( 1,4 ) > 1 ) {
                bridge = true;
            }
            this.drawLine( x2,y1,x2,y2,c,bridge );
        }
    }


    /**
     *
     *
     * @param {number} x
     * @param {number} y
     * @param {string|number} c
     * @returns {Array.<number,number>[]}
     * @memberof ProceduralMap
     */
    floodFill( x,y,c ) {
        let t = [];
        let tc = this.read( x,y );

        console.assert( tc != c,"칠할 곳이 같으면 안되지" );
        function scan( xx,yy,dir ) {
            let drawn;

            while ( this.read( xx,yy ) == tc ) {
                drawn = true;
                t.push( [xx, yy] );
                this.draw( xx,yy,c );
                if ( this.read( xx,yy - 1 ) == tc ) {
                    if ( scan( xx,yy - 1,-1 ) ) {
                        scan( xx + 1,yy - 1,1 );
                    }
                }
                if ( this.read( xx,yy + 1 ) == tc ) {
                    if ( scan( xx,yy + 1,-1 ) ) {
                        scan( xx + 1,yy + 1,1 );
                    }
                }
                xx = xx + dir;
            }

            return drawn;
        }
		
        if ( scan( x,y,-1 ) ) {
            scan( x + 1,y,1 );
        }

        return t;
    }

    /**
     *
     *
     * @param {number} x
     * @param {number} y
     * @param {string|number} c
     * @returns {Array.<number,number>[]}
     * @memberof ProceduralMap
     */
    floodFillSpace( x,y,c ) {
        let t = [];
		
        let scan = ( xx, yy, dir ) => {
            let drawn;

            while ( this.isSpace( xx, yy ) ) {
                drawn = true;
                t.push( [xx, yy] );
                this.draw( xx, yy, c );
                if ( this.isSpace( xx, yy - 1 ) ) {
                    if ( scan( xx, yy - 1, -1 ) ) {
                        scan( xx + 1, yy - 1, 1 );
                    }
                }
                if ( this.isSpace( xx, yy + 1 ) ) {
                    if ( scan( xx, yy + 1, -1 ) ) {
                        scan( xx + 1, yy + 1, 1 );
                    }
                }
                xx = xx + dir;
            }

            return drawn;
        };
		
        if ( scan( x,y,-1 ) ) {
            scan( x + 1,y,1 );
        }

        return t;
    }



    //-------------------------------------------------------------------------------------------------
    // 던전 한 층은 하나의 섹터가 되어야 한다.
    //-------------------------------------------------------------------------------------------------

    /**
     *
     *
     * @param {boolean=} mark
     * @returns {*[]}
     * @memberof ProceduralMap
     */
    countSectors( mark ) {
        let sectors = [];

        if ( mark ) {
            // 섹터를 다 칠할 것이냐
            for ( let y = 0; y < this.height; y++ ) {
                for ( let x = 0; x < this.width; x++ ) {
                    if ( this.isSpace( x, y ) ) {
                        const sectorNum = sectors.length;

                        sectors.push( { sectorNumber: sectorNum, pos: this.floodFillSpace( x, y, sectorNum ) } );
                        log( `섹터 ${sectorNum}, ${sectors[sectorNum].pos.length}개 칠함 [${x},${y}]` );
                        if ( this.random.random( 1, Math.floor( this.width * this.height * .005 ) ) > sectors[sectorNum].pos.length ) {
                            // w*h * 0.005 개 보다 작은 섹터는 지울 확률이 있음
                            log( `섹터 ${sectorNum}, ${sectors[sectorNum].pos.length}개라 너무 작아서 막아버림 [${x},${y}]` );
                            for ( let i in sectors[sectorNum].pos ) {
                                let [x,y] = sectors[sectorNum].pos[i];

                                if ( this.readLock( x,y ) != 2 ) {
                                    this.draw( x,y,"W" );
                                }
                            }
                            sectors.splice( sectorNum,1 );
                        }
                    }
                }
            }
            log( `총 섹터수 ${sectors.length}` );
        } else {
            let newMap = this.cloneMap();

            this.setReadWrite( newMap,newMap );
            for ( let y = 0; y < this.height; y++ ) {
                for ( let x = 0; x < this.width; x++ ) {
                    if ( this.isSpace( x,y ) ) {
                        const sectorNum = sectors.length;

                        sectors.push( { sectorNumber: sectorNum, pos: this.floodFillSpace( x, y, "W" ) } );
                    }
                }
            }
            log( `총 섹터수 ${sectors.length}` );
            this.setReadWrite();
        }

        return sectors;
    }

    connectSectors() {
        let newMap = this.cloneMap();

        this.setReadWrite( newMap,newMap );
        let sectors = this.countSectors( true );
        //this.getMapString(newMap);
        const needCount = sectors.length - 1;

        for ( let i = 0; i < needCount; i++ ) {
            let try1 = 0;
            let path;

            log( "--- 섹터연결",sectors[0].sectorNumber );
            do {
                try1 = try1 + 1;
                let [x1, y1] = sectors[0].pos[this.random.random( 0,sectors[0].pos.length - 1 )]; // 내 좌표중에 하나에서

                log( "시도위치", x1, y1 );
                path = findNearestSector.call( this, x1, y1, sectors[0].sectorNumber + 1 );
                log( `시도결과 경로 길이 ${path.length}` );
            } while ( path == null && try1 <= Math.min( sectors[0].pos.length, 5 ) );
            if ( path ) {
                for ( let i in path ) {
                    let v = path[i];
                    let [x,y] = v;
                    let c = this.read( x,y );

                    // 여기서 섹터의 유일한 곳이면 번호를 삭제해버리게 된다.
                    if ( parseInt( i ) > 0 ) {
                        if ( c == "%" || c == "~" ) {
                            //용암이나 물이면 다리
                            this.draw( x,y,"|" );
                        } else {
                            this.draw( x,y," " );
                        }
                    }
                }
            } else {
                log( "다른 섹터에 연결할 수 없는 섹터다" );
                for ( let i in sectors[0].pos ) {
                    let v = sectors[0].pos[i];
                    let [x, y] = v;

                    if ( this.readLock( x,y ) != 2 ) {
                        this.draw( x,y,"B" );
                    }
                }
            }
            sectors.shift();
        }
        //임시로 쓴 타일 정리
        this.setReadWrite( newMap );
        for ( let y = 0; y < this.height; y++ ) {
            for ( let x = 0; x < this.width; x++ ) {
                let c = this.read( x,y );

                if ( typeof c == "string" ) {
                    this.draw( x,y,c );
                }
            }
        }
        this.setReadWrite();
    }


    decoFloor() {
        let tiles = "";
		
        let rep = ( char, grad, start ) => {
            let v = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.clamp( start + ( this.floor - 1 ) * grad, 0, 10 );

            if ( v > 0 ) {
                tiles = tiles + char.repeat( v );
            }
        };

        rep( '"', -4, 10 ); // 풀
        rep( ".", -3, 10 );// 고운흙
        rep( ";", -2, 10 ); // 거친흙
        rep( ",", -1, 10 ); // 흙
        rep( "?", 1, 5 ); // 자갈
        rep( "(", 0.5, -1 );// 돌
        rep( "{", 1, -1 ); // 큰 돌
        let replaceWall;

        if ( this.random.random( 1,this.floor ) > 5 ) {
            replaceWall = "R";
        } else if  ( this.random.random( 1,this.floor ) > 10 ) {
            replaceWall = "&";
        }
        for ( let y = 0; y < this.height; y++ ) {
            for ( let x = 0; x < this.width; x++ ) {
                let c = this.read( x,y );

                if ( c == " " ) {
                    let pick = this.random.random( 0,tiles.length - 1 );
                    let rc = tiles.substr( pick,1 );

                    this.draw( x,y,rc );
                }
                if ( c == "W" && replaceWall ) {
                    this.draw( x,y,replaceWall );
                }
            }
        }
    }


    /**
     *
     *
     * @param {string|number} c
     * @memberof ProceduralMap
     */
    makeRiver( c ) {
        let [w,h] = [this.width,this.height];
        let [x,y] = [this.random.random( 0,w - 1 ),this.random.random( 0,h - 1 )];
        let angle = this.random.random( 0,359 );
		
        const line = ( x, y, angle ) => {
            let dist = this.random.random( 1,5 );
            let x2,y2;
            let step = 1;

            while ( !( x < 0 || x >= w || y < 0 || y >= h || step > 100 ) ) {
                x2 = x + Math.cos( angle * 180 / Math.PI ) * dist;
                y2 = y + Math.sin( angle * 180 / Math.PI ) * dist;
                this.drawLine( x,y,x2,y2,c );
                [x,y] = [x2,y2];
                angle = angle + this.random.random( -30,30 );
                dist = this.random.random( 1,5 );
                step = step + 1;
            }
        };
		
        line( x,y,angle );
        line( x,y,-angle );
    }



    /*

	커스텀 블록에서만 사용하는 블록
	0   투명색
	1~9 문이 붙을 수 있는 벽

	*/

    /**
     *
     *
     * @returns {[string,number,boolean][]}
     * @memberof ProceduralMap
     */
    getCustomBlockList() {
        let floor = this.floor;
        
        /** @type {[string,number,boolean][]} */
        let t = [];
        const special = {};
		
        for ( let k in (_customBlocks__WEBPACK_IMPORTED_MODULE_3___default()) ) {
            let v = (_customBlocks__WEBPACK_IMPORTED_MODULE_3___default())[k];

            if ( v.special ) {
                if ( v.special == "boss" ) {
                    if ( this.bossFloors.includes( this.floor ) ) {
                        special["boss"] = special["boss"] || [];
                        special["boss"].push( v );
                    }
                }
                if ( v.special == "shop" ) {
                    if ( this.shopFloors.includes( this.floor ) ) {
                        special["shop"] = special["shop"] || [];
                        special["shop"].push( v );
                    }
                }
                if ( v.special == "campfire" ) {
                    if ( this.campfireFloors.includes( this.floor ) ) {
                        special["campfire"] = special["campfire"] || [];
                        special["campfire"].push( v );
                    }
                }
            } else {
                let canAppear;
                let mustAppear;
                let chance = v.chanceToAppear || 1;

                if ( v.whiteAttrib ) {
                    for ( let i in v.whiteAttrib ) {
                        let v2 = v.whiteAttrib[i];
                        let attribName;
                        let _chance;

                        if ( typeof v2 == "string" ) {
                            attribName = v2;
                        } else {
                            attribName = v2[1];
                            _chance = v2[2];
                        }
                        if ( this.attrib.includes( attribName ) ) {
                            canAppear = true;
                            chance = chance * ( _chance || 1 );
                            break;
                        }
                    }
                }

                if ( canAppear && v.blackAttrib ) {
                    for ( let i in v.blackAttrib ) {
                        let v2 = v.blackAttrib[i];
                        let attribName;
                        let _chance;

                        if ( typeof v2 == "string" ) {
                            attribName = v2;
                        } else {
                            attribName = v2[1];
                            _chance = v2[2];
                        }
                        if ( this.attrib.includes( attribName ) ) {
                            canAppear = false;
                            break;
                        }
                    }
                }
                if ( canAppear && v.appearFloor ) {
                    let canAppearFloor;
                    let chanceFloor = 1;

                    for ( let i in v.appearFloor ) {
                        let v2 = v.appearFloor[i];
                        let [min,max,_chance] = v2;

                        if ( floor >= min && floor <= max ) {
                            canAppearFloor = true;
                            chanceFloor = _chance || 1;
                            break;
                        }
                    }
                    if ( canAppearFloor ) {
                        chance = chance * chanceFloor;
                    } else {
                        canAppear = false;
                    }
                }
                if ( canAppear && this.random.random( 1,Math.floor( chance * 100 ) ) <= 100 ) {
                    // 나타날 확률은 소수점 2자리까지 허용
                    let name,mustPlace,maxTry;

                    name = k;
                    mustPlace = v.mustPlace;
                    maxTry = v.maxTry;
                    t.push( [name, maxTry, mustPlace] );
                }
            }
        }
        for ( let k in special ) {
            let v = special[k];
            let pick = this.random.random( 0,v.length - 1 );
            let name,mustPlace,maxTry;

            name = k;//v[pick]
            mustPlace = v[pick].mustPlace;
            maxTry = v[pick].maxTry;
            t.unshift( [name, maxTry, mustPlace ] );
        }

        return t;
    }



    /**
     *
     *
     * @param {[string,number,boolean][]=} t
     * @returns {Array.<number,number>[]}
     * @memberof ProceduralMap
     */
    placeCustomBlocks( t ) {
        t = t != null ? t : this.getCustomBlockList();
        let savedMap = this.cloneMap();
        let savedLockMap = this.cloneMap( this.lockMap );
        let posTable = [];
        let fail;

        for ( let i in t ) {
            let v = t[i];
            let [name,maxTry,mustPlace] = v;
            let [x,y ] = this.placeCustomBlock( name,maxTry );

            if ( x == null && mustPlace == true ) {
                // 꼭놔야되는 거면 실패
                fail = true;
                break;
            }
            posTable.push( [x, y] );
        }
        if ( fail ) {
            this.map = savedMap;
            this.lockMap = savedLockMap;
            this.setReadWrite();

            return;
        } else {
            return posTable;
        }
    }

    /**
     *
     *
     * @param {string} name
     * @param {number} maxTry
     * @returns {Array.<number,number>|null}
     * @memberof ProceduralMap
     */
    placeCustomBlock( name,maxTry ) {
        let cb = (_customBlocks__WEBPACK_IMPORTED_MODULE_3___default())[name];
        let mapString = cb.map[this.random.random( 0,cb.map.length - 1 )];
        let [bw,bh] = this.getMapStringSize( mapString );
        let [w,h] = [this.width,this.height];
        let margin = cb.margin;
        let x,y;
        let try1 = 0;
        let isLocked;

        this.setReadWrite( this.lockMap );
        do {
            try1 = try1 + 1;
            if ( try1 > ( maxTry || 1 ) ) {
                // 실패
                log( "커스텀블록", name, "을 배치할 곳이 없다" );
                this.setReadWrite();

                return;
            }
            x = this.random.random( margin, w - margin - bw );
            y = this.random.random( margin, h - margin - bh );
            isLocked = this.checkMapString( x, y, mapString );
        } while ( isLocked );
        log( `커스텀블록 ${name}배치 위치는`,x,y );
        this.drawMapString( x,y,mapString );
        this.setReadWrite( null,this.lockMap );
        // 마진 만큼 넓게 락을 건다
        // 주변은 1로 락을 걸고 (길을 낼 수 있지만 다른 블록은 못놓음);
        // 내부는 2로 락을 건다 (길만 못냄);
        if ( margin > 0 ) {
            for ( let yy = y - margin; yy <= y + margin; yy++ ) {
                for ( let xx = x - margin; xx <= x + margin; xx++ ) {
                    this.drawMapString( xx,yy,mapString,1 );
                }
            }
        }
        this.drawMapString( x,y,mapString,2 );
        this.setReadWrite();
        let numOfDoors = this.random.random( cb.doorMin,cb.doorMax );
        let pickedDoor = [];
        let doors = [];

        for ( let i = 0; i < cb.doorMax; i++ ) {
            // 문 숫자는 1부터 시작
            // 0은 투명
            doors.push( i + 1 );
        }
        for ( let i = 0; i < numOfDoors; i++ ) {
            let picked = this.random.random( 0, doors.length - 1 );

            pickedDoor.push( doors[picked] );
            doors.splice( picked, 1 );
        }
		
        for ( let i = 0; i < numOfDoors; i++ ) {
            log( "문달기시도",pickedDoor[i] );
            let t = this.getSameCharTable( x,y,x + bw - 1,y + bh - 1,pickedDoor[i].toString() );
            let doorX,doorY;
            let passages;
            let try2 = 0;

            do {
                try2 = try2 + 1;
                [doorX, doorY] = t[this.random.random( 0,t.length - 1 )];
                passages = this.getPassages( doorX, doorY );
                // 문에 연결된 길이 두 개면 나가서 섹터로 연결되는지 보면된다.
            } while ( !( passages.length == 2 || try2 > 5 ) );
            this.draw( doorX,doorY,"D" ); // 일단 문은 달고
            if ( passages && passages.length != 2 ) {
                // 선택한 문에 길을 달아야 하는 상황
                log( "문 앞에 길을 달아야한다",passages.length );
                console.assert( passages.length == 1,"문이 한쪽도 안열려있으면 안되잖아. 블록데이터 오류" );
                let [ax,ay] = passages[0];

                log( "다는 위치와 방향",doorX - ax,doorY - ay,-ax,-ay );
                this.draw( doorX - ax,doorY - ay," " );
                //this.connectAnywhere(doorX-ax,doorY-ay,-ax,-ay);
            } else {
                log( "문을 그냥 달기만 하면됨",doorX,doorY );
            }
        }
        for ( let yy = y; yy < y + bh; yy++ ) {
            for ( let xx = x; xx < x + bw; xx++ ) {
                let c = this.read( xx, yy );

                //@ts-ignore
                if ( "123456789".indexOf( c ) >= 0 ) {
                    this.draw( xx,yy,cb.wall || "M" );
                }
            }
        }
        log( "커스텀블록",name,"배치완료" );

        return [x,y];
    }






    //-------------------------------------------------------------------------------------------------
    // 흥미도 계산
    //-------------------------------------------------------------------------------------------------
    /*

	입구에서 멀다 = 입구에서부터 칠해가면서 구함
	막다른 곳

	*/

    /**
     *
     *
     * @returns {*[]}
     * @memberof ProceduralMap
     */
    computeInterestingMap() {
        let [startX,startY] = [this.startX,this.startY];
        let path = {};
        let t = [[0, startX, startY]];
		
        let checkSurrounding = ( dist, x, y ) => {
            if ( path[x + "," + y] || !this.isSpace( x, y ) ) {
                return;
            }
            // 좁은길을 따라갈수록 가산점을 준다
            let count = 0;

            count = count + ( this.read( x - 1, y ) == 0 ? 1 : 0 );
            count = count + ( this.read( x + 1, y ) == 0 ? 1 : 0 );
            count = count + ( this.read( x, y - 1 ) == 0 ? 1 : 0 );
            count = count + ( this.read( x, y + 1 ) == 0 ? 1 : 0 );
            dist = dist + Math.pow( count, 4 );
            let newNode = [ dist, x, y ];

            path[x + "," + y] = newNode;
            t.push( [dist + 1, x - 1, y] );
            t.push( [dist + 1, x + 1, y] );
            t.push( [dist + 1, x, y - 1] );
            t.push( [dist + 1, x, y + 1] );
        };
		
        let result;
        let t1;

        do {
            t1 = t;
            t = [];
            for ( let i in t1 ) {
                let [dist,x,y] = t1[i];

                checkSurrounding( dist, x, y );
            }
        } while ( t1.length != 0 );
        let intMap0 = [];

        this.setReadWrite( intMap0,intMap0 );
        this.clear( 0 );
        for ( let k in path ) {
            let [d, x, y] = path[k];

            this.draw( x,y,d );
        }
        let intMap = this.cloneMap( intMap0 );

        this.setReadWrite( intMap0,intMap );
        let maxScore = 0;

        for ( let k in path ) {
            let [, x, y] = path[k];

            if ( this.read( x,y ) > 0 ) {
                let count = 0;

                count = count + ( this.read( x - 1,y ) != 0 && 1 || 0 );
                count = count + ( this.read( x + 1,y ) != 0 && 1 || 0 );
                count = count + ( this.read( x,y - 1 ) != 0 && 1 || 0 );
                count = count + ( this.read( x,y + 1 ) != 0 && 1 || 0 );
                let val = 0;

                //@ts-ignore
                val = val + this.read( x - 1,y );
                //@ts-ignore
                val = val + this.read( x + 1, y );
                //@ts-ignore
                val = val + this.read( x, y - 1 );
                //@ts-ignore
                val = val + this.read( x, y + 1 );
                let average = val / count;
                //주변의 벽수
                //벽이 많으면 가산점
                //@ts-ignore
                let score = Math.max( 0, this.read( x, y, intMap ) * 2 - average );

                maxScore = Math.max( maxScore,score );
                this.draw( x,y,score );
            }
        }
        this.setReadWrite( intMap,intMap );
        for ( let k in path ) {
            let v = path[k];
            let [ ,x,y] = v;
            //@ts-ignore
            let score = this.read( x, y ) / maxScore;

            v[0] = score;
            this.draw( x,y,String.fromCharCode( 65 + score * 25 ) );
        }
        // 스코어가 높은 순서로 정렬
        let scoreList = [];

        for ( let k in path ) {
            let v = path[k];
            let [, x, y] = v;
            let c = this.read( x,y,this.map );

            //@ts-ignore
            if ( "DE><FYI*".indexOf( c ) < 0 ) {
                scoreList.push( v );
            }
        }
		
        scoreList.sort( ( a, b ) => b[0] - a[0] );
        // 플레이어와 펫이 계단을 내려갈 위치를 확보하기 위해서 뒤에서 5개를 잘라낸다.
        scoreList.length -= _entity_pet__WEBPACK_IMPORTED_MODULE_4__["default"].maxPet;

        this.setReadWrite();
        this.scoreList = scoreList;
        this.getMapString( intMap );

        return intMap;
    }


    /**
     *
     *
     * @param {number} num
     * @param {number} endRate
     * @returns {[number,number,number][]}
     * @memberof ProceduralMap
     */
    pickEvents( num,endRate ) {
        const pool = this.scoreList.slice();
        /** @type {[number,number,number][]} */
        const events = [];

        for ( let i = 0; i < num; i++ ) {
            console.assert( pool.length > 0 );
            let picked = this.random.random( 0,pool.length - 1 );

            console.assert( picked >= 0 );
            for ( let j = 0; j < endRate; j++ ) {
                picked = this.random.random( 0, picked );
                console.assert( picked >= 0 );
            }
            events.push( [pool[picked][0], pool[picked][1], pool[picked][2]] );
            if ( pool.length > 1 ) {
                pool.splice( picked,1 );
            }
        }

        return events;
    }



    /**
     *
     *
     * @param {number} numMin
     * @param {number} numMax
     * @returns {[number,number,number,number][]}
     * @memberof ProceduralMap
     */
    makeRooms( numMin,numMax ) {
        // BSP 방식으로 공간을 쪼갠다
        let t = [];

        let divide = ( dir, x, y, w, h ) => {
            if ( h < 8 ) {
                dir = 2;
            }
            if ( w < 8 ) {
                dir = 1;
            }
            if ( dir == 1 && h > 4 && !( h < 15 && this.random.random( 1,2 ) == 1 ) ) {
                let h2 = this.random.random( 2, h - 2 );

                divide( 3 - dir, x, y, w, h2 );
                divide( 3 - dir, x, y + h2, w, h - h2 );
            } else if ( dir == 2 && w > 4 && !( w < 15 && this.random.random( 1,2 ) == 1 ) ) {
                let w2 = this.random.random( 2, w - 2 );

                divide( 3 - dir, x, y, w2, h );
                divide( 3 - dir, x + w2, y, w - w2, h );
            } else {
                console.assert( `dir이 1,2가 아님` );
                t.push( [x, y, w, h] );
            }
        };

        divide( this.random.random( 1,2 ),3,3,this.width - 5,this.height - 5 );
        this.setReadWrite( this.lockMap );
        for ( let i in t ) {
            let v = t[i];
            let [x,y,w,h] = v;

            if ( w > 3 && h > 3 ) {
                let x1,y1,x2,y2;

                if ( this.random.random( 1,4 ) == 1 ) {
                    x1 = this.random.random( x + 1,x + w - 1 - 2 );
                    y1 = this.random.random( y + 1,y + h - 1 - 2 );
                    x2 = this.random.random( x1 + 2,x + w - 1 );
                    y2 = this.random.random( y1 + 2,y + h - 1 );
                } else {
                    [x1,y1,x2,y2] = [x + 1,y + 1,x + w - 1,y + h - 1];
                }
                // 커스텀 블록으로 락되었으면 아무 처리하지 않고 넘어간다
                if ( this.checkBox( x1 - 1,y1 - 1,x2 + 1,y2 + 1 ) ) {
                    t[i] = null; // 이 블록은 못쓰는 블록이다.
                } else {
                    t[i] = [x1, y1, x2, y2];
                }
            } else {
                t[i] = null;
            }
        }
        this.setReadWrite();
        // 방 그리기
        let rooms = [];

        for ( let k in t ) {
            let v = t[k];

            if ( v ) {
                rooms.push( v );
                let [x1,y1,x2,y2] = v;

                this.setReadWrite();
                this.drawBox( x1 - 1,y1 - 1,x2 + 1,y2 + 1,"M" );
                this.drawBox( x1,y1,x2,y2," " );
                this.setReadWrite( this.lockMap,this.lockMap );
                this.drawBox( x1 - 1,y1 - 1,x2 + 1,y2 + 1,2 );
                this.drawBox( x1,y1,x2,y2,1 );
                this.setReadWrite();
                let doors = [1, 2, 3, 4];

                // 문을 몇개 추가
                for ( let i = 1; i <= this.random.random( 0,3 ); i++ ) {
                    doors.push( this.random.random( 1,4 ) );
                }
                for ( let i in doors ) {
                    let v = doors[i];
                    let doorDir = v;

                    if ( doorDir == 1 ) {
                        let x = this.random.random( x1,x2 );

                        if ( this.read( x - 1,y1 - 1 ) != "D" && this.read( x + 1,y1 - 1 ) != "D" && this.read( x,y1 - 2 ) != "M" ) { //문이 바로 이웃해있으면 별로
                            this.draw( x,y1 - 1,"D" );
                            this.draw( x,y1 - 2," " );
                        }
                    } else if  ( doorDir == 2 ) {
                        let y = this.random.random( y1,y2 );

                        if ( this.read( x2 + 1,y - 1 ) != "D" && this.read( x2 + 1,y + 1 ) != "D" && this.read( x2 + 2,y ) != "M" ) {
                            this.draw( x2 + 1,y,"D" );
                            this.draw( x2 + 2,y," " );
                        }
                    } else if  ( doorDir == 3 ) {
                        let x = this.random.random( x1,x2 );

                        if ( this.read( x - 1,y2 + 1 ) != "D" && this.read( x + 1,y2 + 1 ) != "D" && this.read( x,y2 + 2 ) != "M" ) {
                            this.draw( x,y2 + 1,"D" );
                            this.draw( x,y2 + 2," " );
                        }
                    } else if  ( doorDir == 4 ) {
                        let y = this.random.random( y1,y2 );

                        if ( this.read( x1 - 1,y - 1 ) != "D" && this.read( x1 - 1,y + 1 ) != "D" && this.read( x1 - 2,y ) != "M" ) {
                            this.draw( x1 - 1,y,"D" );
                            this.draw( x1 - 2,y," " );
                        }
                    }
                }
            }
        }

        // 이 단계에서는 섹터연결이 안될 수 있다.
        // 방이 운이 나쁘게 O자 형태로 연결되거나 하면 문제가 됨
        return rooms; // 데코레이션을 위해서 넘긴다. 
    }


    eraseTinyHallAndDoor() {
        for ( let y = 0; y < this.height; y++ ) {
            for ( let x = 0; x < this.width; x++ ) {
                if ( this.read( x,y ) == " " ) {
                    let count = 0;

                    count = count + ( this.isSpace( x - 1,y  ) ? 0 : 1 );
                    count = count + ( this.isSpace( x  ,y - 1 ) ? 0 : 1 );
                    count = count + ( this.isSpace( x + 1,y  ) ? 0 : 1 );
                    count = count + ( this.isSpace( x  ,y + 1 ) ? 0 : 1 );
                    if ( count == 3 ) {
                        if ( this.read( x - 1,y ) == "D" || this.read( x + 1,y ) == "D" || this.read( x,y - 1 ) == "D" || this.read( x,y + 1 ) == "D" ) {
                            //3면이 벽이고 나머지가 문이면 막아야한다.
                            this.draw( x,y,"W" );
                        }
                    }
                }
            }
        }
        for ( let y = 0; y < this.height; y++ ) {
            for ( let x = 0; x < this.width; x++ ) {
                if ( this.read( x,y ) == "D" ) {
                    let count = 0;

                    count = count + ( this.isSpace( x - 1,y  ) ? 0 : 1 );
                    count = count + ( this.isSpace( x  ,y - 1 ) ? 0 : 1 );
                    count = count + ( this.isSpace( x + 1,y  ) ? 0 : 1 );
                    count = count + ( this.isSpace( x  ,y + 1 ) ? 0 : 1 );
                    if ( count == 3 ) {
                        this.draw( x,y,"M" );
                    }
                }
            }
        }
    }


    /**
     *
     *
     * @param {Array.<number,number>[]} pos
     * @memberof ProceduralMap
     */
    makeUpStair( pos ) {
        let x,y;

        do {
            [x, y] = pos[this.random.random( 0,pos.length - 1 )];
        } while ( this.read( x, y ) == "D" ); // 문에는 배치하면 안돼
        this.draw( x,y,"<" );
        [this.startX,this.startY] = [x,y];
    }

    /**
     *
     *
     * @returns {Array.<number,number>}
     * @memberof ProceduralMap
     */
    makeDownStair() {
        // 내려가는 계단은 시작점에서 먼 곳에 배치하고 흥미로운 지점에 놔야한다.
        let range = 1.0;
        let score,x,y;
        let isValid;

        do {
            range = range - 0.1;
            let events = this.pickEvents( 1, range );

            [score, x, y] = events[0];
            if ( this.read( x, y ) != "D" ) {
                if ( this.isSpace( x - 1, y ) && this.read( x - 1, y ) != "D" ) {
                    isValid = -1;
                }
                if ( this.isSpace( x + 1, y ) && this.read( x + 1, y ) != "D" ) {
                    isValid = 1;
                }
            }
        } while ( !isValid );
        this.draw( x,y,">" );
        this.draw( x + isValid,y,">" );
        this.endX = Math.min( x,x + isValid );
        this.endY = y;

        return [this.endX,this.endY];
    }

    /**
     *
     *
     * @param {[number,number,number,number][]} rooms
     * @memberof ProceduralMap
     */
    decoRooms( rooms ) {
        for ( let i in rooms ) {
            let v = rooms[i];
            let [x1,y1,x2,y2] = v;
            let w = x2 - x1 + 1;
            let h = y2 - y1 + 1;

            // 기둥 박기
            if ( this.random.random( 1,4 ) <= 1 + w * h / 60 ) {
                let pillarCol = 0;
                let pillarRow = 0;

                if ( w >= 5 ) {
                    pillarCol = 1 + ( w > 5 && 1 || 0 ) + ( ( w ) % 2 );
                }
                if ( h >= 5 ) {
                    pillarRow = 1 + ( h > 5 && 1 || 0 ) + ( ( h ) % 2 );
                }
                let pillarOffsetX = 0;//this.random.random(0,(w-1)%2);
                let pillarOffsetY = 0;//this.random.random(0,(h-1)%2);

                for ( let y = 1; y <= pillarRow; y++ ) {
                    for ( let x = 1; x <= pillarCol; x++ ) {
                        //if (this.random.random(5+Math.floor(w*h/50))==1) {
                        let xx = pillarOffsetX + x1 + Math.floor( ( x - 1 ) * ( w - 2 ) / ( pillarCol - 0.999 ) ) + 1;
                        let yy = pillarOffsetY + y1 + Math.floor( ( y - 1 ) * ( h - 2 ) / ( pillarRow - 0.999 ) ) + 1;

                        if ( this.read( xx,yy ) == " " ) {
                            this.draw( xx,yy,"U" );
                        }
                        //}
                    }
                }
            }
            //조명박기
            let numOfTorch = Math.max( 0,this.random.random( 1,3 + Math.floor( w * h / 30 ) ) - 2 );

            for ( let i = 1; i <= numOfTorch; i++ ) {
                let xx,yy;

                if ( this.random.random( 1,4 ) == 1 ) {
                    // 방 가운데 
                    xx = this.random.random( x1,x2 );
                    yy = this.random.random( y1,y2 );
                } else {
                    // 벽쪽에
                    let dir = this.random.random( 1,4 );

                    if ( dir == 1 ) {
                        xx = this.random.random( x1,x2 );
                        yy = y1;
                    } else if  ( dir == 2 ) {
                        xx = x2;
                        yy = this.random.random( y1,y2 );
                    } else if  ( dir == 3 ) {
                        xx = this.random.random( x1,x2 );
                        yy = y2;
                    } else if  ( dir == 4 ) {
                        xx = x1;
                        yy = this.random.random( y1,y2 );
                    }
                }
                if ( this.read( xx,yy ) == " " ) {
                    this.draw( xx,yy,"I" );
                }
            }
            // 바닥타일깔기
            let tiles = "ZZZZZ:::::::+++++||........,,,{";
            let numOfTiles = Math.max( 1,this.random.random( 1,6 ) - 3 );
            let pickedTiles = [];

            for ( let i = 1; i <= numOfTiles; i++ ) {
                let i2 = this.random.random( 0,tiles.length - 1 );

                pickedTiles.push( tiles.substr( i2,1 ) );
            }
            for ( let yy = y1; yy <= y2; yy++ ) {
                for ( let xx = x1; xx <= x2; xx++ ) {
                    if ( this.read( xx,yy ) == " " ) {
                        this.draw( xx,yy,pickedTiles[this.random.random( 0,numOfTiles - 1 )] );
                    }
                }
            }
        }
    }

    closeDoors() {
        for ( let y = 0; y < this.height; y++ ) {
            for ( let x = 0; x < this.width; x++ ) {
                if ( this.read( x,y ) == "D" ) {
                    this.draw( x,y,"E" );
                }
            }
        }
    }


    //-------------------------------------------------------------------------------------------------
    // 생성
    //-------------------------------------------------------------------------------------------------

    /**
     *
     *
     * @returns {Array.<number,number>}
     * @memberof ProceduralMap
     */
    generateCave() {
        this.clear( " " );
        let [w,h] = [this.width,this.height];
        let wallRate = this.random.random( 30,40 );
        let birthLimit = 4;
        let deathLimit = this.random.random( 2,3 );
        let numOfGeneration = this.random.random( 3,5 );

        for ( let y = 0; y < h; y++ ) {
            for ( let x = 0; x < w; x++ ) {
                if ( this.random.random( 1,100 ) < wallRate ) {
                    this.draw( x,y,"W" );
                }
            }
        }
        for ( let i = 1; i <= numOfGeneration; i++ ) {
            let newMap = this.cloneMap( this.map );

            this.setReadWrite( newMap );
            for ( let y = 0; y < h; y++ ) {
                for ( let x = 0; x < w; x++ ) {
                    let count = this.countSurroundedBlock( x,y );

                    if ( count <= deathLimit ) {
                        this.draw( x,y," " );
                    } else if  ( count >= birthLimit ) {
                        this.draw( x,y,"W" );
                    }
                }
            }
        }
        this.setReadWrite();
        //모서리 막기
        for ( let y = 0; y < h; y++ ) {
            this.draw( 0,y,"W" );
            this.draw( w - 1,y,"W" );
        }
        for ( let x = 0; x < w; x++ ) {
            this.draw( x,0,"W" );
            this.draw( x,h - 1,"W" );
        }
        // 용암과 물
        // 지하로 갈수록 용암
        let numOfRiver = this.random.random( 0,this.floor < this.random.random( 1,10 ) && 2 || 0 );
        let numOfLava = Math.max( 0,this.floor > this.random.random( 5,10 ) && 2 || 0 );

        for ( let i = 0; i < numOfRiver; i++ ) {
            this.makeRiver( "~" );
        }
        for ( let i = 0; i < numOfLava; i++ ) {
            this.makeRiver( "%" );
        }
		
        // 횃불
        // 지하로 갈수록 불이 적다
        for ( let i = 0; i < Math.floor( w * h / ( 50 * ( 1 + this.floor / 10 ) ) ); i++ ) {
            let [x,y] = [this.random.random( 0,w - 1 ),this.random.random( 0,h - 1 )];

            if ( this.read( x,y ) == " " && ( this.read( x - 1,y ) == "W" || this.read( x + 1,y ) == "W" ) ) {
                this.draw( x,y,"I" );
            }
        }

		
        let try1 = 0;
        let result;

        do {
            try1 = try1 + 1;
            result = this.placeCustomBlocks();
        } while ( ! ( result || try1 > 5 ) );
        if ( !result ) {
            //실패
            return;
        }
        this.connectSectors();
        this.eraseTinyHallAndDoor();
        this.decoFloor();
        //최종 검산
        let sectors = this.countSectors();

        if ( sectors.length > 1 ) {
            //실패
            console.assert( false, `섹터가 많다. ${sectors.length}` );

            return;
        }
        // 빈칸중 하나에서 시작점을 고른다
        this.makeUpStair( sectors[0].pos );

        return sectors[0].pos;
    }


    /**
     *
     *
     * @returns {Array.<number,number>}
     * @memberof ProceduralMap
     */
    generateDungeon() {
        this.clear( "W" );
        let [w,h] = [this.width,this.height];
        let try1 = 0;
        let result;

        do {
            try1 = try1 + 1;
            result = this.placeCustomBlocks();
        } while ( !( result || try1 > 5 ) );
        console.assert( result, "커스텀 블록을 배치하는 과정에서 실패" );
        let rooms = this.makeRooms( 1,10 );

        this.connectSectors();
        this.eraseTinyHallAndDoor();
        this.decoRooms( rooms );
        this.decoFloor();
        //최종 검산
        let sectors = this.countSectors();

        if ( sectors.length > 1 ) {
            //실패
            log( this.getMapString() );
            console.assert( false, `섹터가 많다. ${sectors.length}` );

            return;
        }
        // 빈칸중 하나에서 시작점을 고른다
        this.makeUpStair( sectors[0].pos );

        return sectors[0].pos;
    }


    placeProps() {
        for ( let i in this.scoreList ) {
            let v = this.scoreList[i];
            let [score,x,y] = v;

            if ( this.countSurroundedBlock( x,y ) < 6 && this.countSurrounded( x,y,"D" ) == 0 ) {
                if ( this.random.random( 1,Math.max( 1,100 - Math.pow( this.countSurrounded( x,y,"M" ) * 3,2 ) ) ) == 1 ) {
                    this.addEntity( x,y,"prop","@" );
                }
                if ( this.random.random( 1,Math.max( 1,100 - Math.pow( this.countSurrounded( x,y,"W" ) * 3,2 ) ) ) == 1 ) {
                    this.addEntity( x,y,"prop","&" );
                }
                if ( this.random.random( 1,Math.max( 1,100 - Math.pow( this.countSurrounded( x,y,"M" ) * 3,2 ) ) ) == 1 ) {
                    this.addEntity( x,y,"prop","#" );
                }
            }
        }
    }


    placeMonsters() {
        let t = _entity_monster__WEBPACK_IMPORTED_MODULE_5__["default"].pickMonsters( this.attrib );

        log( "몬스터배치" );
        log( this.attrib );
        let scoreMap = {};

        this.setReadWrite( scoreMap,scoreMap );
        this.clear( null );
        for ( let i in this.scoreList ) {
            let v = this.scoreList[i];
            let [score,x,y] = v;

            this.draw( x,y,score > 0 && "@" || "." );
        }
        this.setReadWrite();
        //this.logMapString(scoreMap);
        for ( let i = 1; i <= Math.floor( this.scoreList.length / 10 ); i++ ) {
            let name = t[this.random.random( 0,t.length - 1 )];
            let [score, x, y] = this.scoreList[this.scoreList.length - 1];

            if ( !_entity_monster__WEBPACK_IMPORTED_MODULE_5__["default"].property[name].list ) {
                if ( this.readEntity( x,y ) == null ) {
                    this.addEntity( x,y,"monster",name );
                }
            } else {
                let [t, mustCount] = _entity_monster__WEBPACK_IMPORTED_MODULE_5__["default"].parseMonsterList( _entity_monster__WEBPACK_IMPORTED_MODULE_5__["default"].property[name].list );
                let floorList = this.getConnectedNearFloor( x,y,this.random.random( mustCount,t.length ),scoreMap );

                for ( let i in floorList ) {
                    let [x,y] = floorList[i];

                    //log(v[1],v[2],"monster",t[i],mustCount,t.length);
                    this.addEntity( x,y,"monster",t[i].name );
                }
            }
        }
    }
}





/***/ }),

/***/ "./games/Avalonika/src/saveLoad.js":
/*!*****************************************!*\
  !*** ./games/Avalonika/src/saveLoad.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SaveLoad)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _entity_entity__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./entity/entity */ "./games/Avalonika/src/entity/entity.js");
/* harmony import */ var _entity_npc__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./entity/npc */ "./games/Avalonika/src/entity/npc.js");
/* harmony import */ var _entity_monster__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./entity/monster */ "./games/Avalonika/src/entity/monster.js");
/* harmony import */ var _entity_player__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./entity/player */ "./games/Avalonika/src/entity/player.js");
/* harmony import */ var _entity_pet__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./entity/pet */ "./games/Avalonika/src/entity/pet.js");
/* harmony import */ var _entity_prop__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./entity/prop */ "./games/Avalonika/src/entity/prop.js");
/* harmony import */ var _entity_item__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./entity/item */ "./games/Avalonika/src/entity/item.js");
/* harmony import */ var _entity_skill__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./entity/skill */ "./games/Avalonika/src/entity/skill.js");
/* harmony import */ var _world_world__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./world/world */ "./games/Avalonika/src/world/world.js");
/* harmony import */ var _world_entityManager__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./world/entityManager */ "./games/Avalonika/src/world/entityManager.js");
/* harmony import */ var _interface_inventory__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./interface/inventory */ "./games/Avalonika/src/interface/inventory.js");
/* harmony import */ var _engine_SceneManager__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @engine/SceneManager */ "./engine/src/SceneManager.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./global */ "./games/Avalonika/src/global.js");





















class SaveLoad {
    constructor( path ) {
        this.path = path || "savedata_" + _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.getShortDate() + ".json";

        this.storage = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Storage( "saveload" );
        this.serializer = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Serializer( [
            [_world_world__WEBPACK_IMPORTED_MODULE_9__["default"], {
                dataOnly: true,
                white:    ["turn", "dateTimeOrigin", "places", "clearAutoMap", "type", "entityManager"]
            }],
            [_world_entityManager__WEBPACK_IMPORTED_MODULE_10__["default"], { dataOnly: true, white: ["itemsByXy","entitiesByXy"] }],
            [_entity_player__WEBPACK_IMPORTED_MODULE_4__["default"], { construct: ( src ) => new _entity_player__WEBPACK_IMPORTED_MODULE_4__["default"]( src.name, src.tileX, src.tileY ), keep: ["property"] }],
            [_entity_prop__WEBPACK_IMPORTED_MODULE_6__["default"], { construct: ( src ) => new _entity_prop__WEBPACK_IMPORTED_MODULE_6__["default"]( src.char, src.tileX, src.tileY ), keep: ["property"] }],
            [_entity_pet__WEBPACK_IMPORTED_MODULE_5__["default"], { construct: ( src ) => new _entity_pet__WEBPACK_IMPORTED_MODULE_5__["default"]( src.name, src.tileX, src.tileY ), keep: ["property"] }],
            [_entity_monster__WEBPACK_IMPORTED_MODULE_3__["default"], { construct: ( src ) => new _entity_monster__WEBPACK_IMPORTED_MODULE_3__["default"]( src.name, src.tileX, src.tileY ), keep: ["property"] }],
            [_entity_item__WEBPACK_IMPORTED_MODULE_7__["default"], { construct: ( src ) => new _entity_item__WEBPACK_IMPORTED_MODULE_7__["default"]( src.name, src.tileX, src.tileY ), keep: ["property"] }],
            [_entity_skill__WEBPACK_IMPORTED_MODULE_8__["default"], { construct: ( src ) => new _entity_skill__WEBPACK_IMPORTED_MODULE_8__["default"]( src.name, src.tileX, src.tileY ), keep: ["property"] }],
            [_interface_inventory__WEBPACK_IMPORTED_MODULE_11__["default"], { construct: ( src ) => new _interface_inventory__WEBPACK_IMPORTED_MODULE_11__["default"]( src.size ) }],
        ] );
    }

    save() {
        const t = {};

        // 월드 데이터 저장
        t.world = _global__WEBPACK_IMPORTED_MODULE_13__["default"].world;
        t.player = _global__WEBPACK_IMPORTED_MODULE_13__["default"].player;
        t.worldOptions = _global__WEBPACK_IMPORTED_MODULE_13__["default"].world.options;
        t.random = _global__WEBPACK_IMPORTED_MODULE_13__["default"].world.randomGenerator.save();
        t.mapString = _global__WEBPACK_IMPORTED_MODULE_13__["default"].world.map.getMapString();
        t.mapProperty = {};
        t.nextId = _entity_entity__WEBPACK_IMPORTED_MODULE_1__["default"].nextId;
        for ( const k in _global__WEBPACK_IMPORTED_MODULE_13__["default"].world.map.propertyTable ) {
            const v = _global__WEBPACK_IMPORTED_MODULE_13__["default"].world.map.propertyTable[k];
            const pr = {};

            for ( const name of Object.getOwnPropertyNames( v ) ) {
                pr[name] = v[name];
            }
            t.mapProperty[k] = pr;
        }
        // 엘레멘탈 시스템
        t.elemental = [];
        for ( const k in _global__WEBPACK_IMPORTED_MODULE_13__["default"].world.elemental.elementalsByXy ) {
            const v = _global__WEBPACK_IMPORTED_MODULE_13__["default"].world.elemental.elementalsByXy[k];

            t.elemental.push( [v.type, v.tileX, v.tileY, v.life] );
        }
        const s = this.serializer.getSerializableObject( t );

        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.setPaused( true );
        const t1 = JSON.stringify( s );

        console.log( t1 );

        this.storage.write( this.path, t1 ).then( () => {
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.setPaused( false );
        } );
    }


    load( path ) {
        _global__WEBPACK_IMPORTED_MODULE_13__["default"].world.entityManager.forceStopTurnProcessing();
        this.path = path || this.path;

        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.setPaused( true );
        this.storage.read( this.path ).then( ( s ) => {
            const t = JSON.parse( s );

            console.log( "세이브파일 로드 시작", this.path );
            _global__WEBPACK_IMPORTED_MODULE_13__["default"].world.destroy( true );
            const worldLoadData = {
                random:    t.random,
                mapString: t.mapString,
            };

            const w = _global__WEBPACK_IMPORTED_MODULE_13__["default"].world = new _world_world__WEBPACK_IMPORTED_MODULE_9__["default"]( { loadData: worldLoadData } );
            
            const result = this.serializer.parse( t );

            _global__WEBPACK_IMPORTED_MODULE_13__["default"]["interface"].autoMap.clear();
            for ( const i in result.mapProperty ) {
                const pr = result.mapProperty[i];

                Object.assign( w.map.propertyTable[i], pr );
                if ( pr.revealed ) {
                    _global__WEBPACK_IMPORTED_MODULE_13__["default"].world.sightManager.revealTile( pr.x, pr.y, true );
                }
            }
            for ( const k in result.world.entityManager.entitiesByXy ) {
                const v = result.world.entityManager.entitiesByXy[k];

                w.entityManager.addEntity( v );
            }
            _global__WEBPACK_IMPORTED_MODULE_13__["default"].player = result.player;
            _entity_entity__WEBPACK_IMPORTED_MODULE_1__["default"].nextId = t.nextId;

            // 로드 화면 연출
            _global__WEBPACK_IMPORTED_MODULE_13__["default"].sceneManager.changeScene( _global__WEBPACK_IMPORTED_MODULE_13__["default"].world, 1000, _engine_SceneManager__WEBPACK_IMPORTED_MODULE_12__.SceneManager.circleInOut, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.linear );
            _global__WEBPACK_IMPORTED_MODULE_13__["default"]["interface"].actionSelector.actions = [];
            _global__WEBPACK_IMPORTED_MODULE_13__["default"]["interface"].actionSelector.select( _global__WEBPACK_IMPORTED_MODULE_13__["default"].player.selectedAction );
            _global__WEBPACK_IMPORTED_MODULE_13__["default"]["interface"].cursor.lock();
            _global__WEBPACK_IMPORTED_MODULE_13__["default"]["interface"].cursor.hideAutoAction();
            _global__WEBPACK_IMPORTED_MODULE_13__["default"].world.on( "enterEnd", () => {
                _global__WEBPACK_IMPORTED_MODULE_13__["default"]["interface"].cursor.unlock();
                _global__WEBPACK_IMPORTED_MODULE_13__["default"]["interface"].cursor.resetScale();
                _global__WEBPACK_IMPORTED_MODULE_13__["default"].world.showMapInfo( _global__WEBPACK_IMPORTED_MODULE_13__["default"].player.tileX, _global__WEBPACK_IMPORTED_MODULE_13__["default"].player.tileY );
            } );
            console.log( "세이브파일 로드 끝", this.path );
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.setPaused( false );
        } );
    }
}



/***/ }),

/***/ "./games/Avalonika/src/world/elemental.js":
/*!************************************************!*\
  !*** ./games/Avalonika/src/world/elemental.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Elemental)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _gameMap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./gameMap */ "./games/Avalonika/src/world/gameMap.js");
/* harmony import */ var _entity_buff__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../entity/buff */ "./games/Avalonika/src/entity/buff.js");
/* harmony import */ var _lib_random__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @lib/random */ "./engine/src/lib/random.js");
/* harmony import */ var _lib_iconPack__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @lib/iconPack */ "./engine/src/lib/iconPack.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../global */ "./games/Avalonika/src/global.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../config */ "./games/Avalonika/src/config.js");










/*

독. 크리쳐가 독에 걸림
물. 아이템이 떠내려감
불. 크리쳐가 불에 붙음
전기. 근처의 도체를 향해 전달

*/




class Elemental extends _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite {
    constructor() {
        super();
        this.elementalsByXy = []; // TODO:weak
        this.layers = {
            [Elemental.FIRE]:   new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite(),
            [Elemental.WATER]:  new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite(),
            [Elemental.POISON]: new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite(),
        };
    }

    addElemental( type, x, y, life, x1, y1 ) {
        if ( this.elementalsByXy[x + "," + y] ) {
            this.removeElemental( x, y );
        }
        x1 = x1 != null ? x1 : x;
        y1 = y1 != null ? y1 : y;
        const spr = new _lib_iconPack__WEBPACK_IMPORTED_MODULE_4__["default"]( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "elemental.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } ),
                                  Elemental.data[type].col,
                                  Elemental.data[type].row,
                                  16, 24,
                                  Elemental.data[type].color );

        spr.setShader( _global__WEBPACK_IMPORTED_MODULE_5__["default"].world.floorTileMap._shader );
        spr.setBlendMode( Elemental.data[type].blend );
        spr.tileX = x;
        spr.tileY = y;
        spr.type = type;
        spr.life = life;
        spr.newLife = life;
        let tx, ty;

        if ( x1 ) {
            const a = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.clamp( life / 2, 0.5, 1 );

            if ( spr.type == Elemental.WATER ) {
                spr.setAlpha( 0 );
                spr.position = _global__WEBPACK_IMPORTED_MODULE_5__["default"].world.tileCenterToWorld( x, y );
                new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( spr, 300, { alpha: a } );
            } else if ( spr.type == Elemental.POISON ) {
                spr.setAlpha( 0 );
                const { x: tx, y: ty } = _global__WEBPACK_IMPORTED_MODULE_5__["default"].world.tileCenterToWorld( x, y );

                spr.position = _global__WEBPACK_IMPORTED_MODULE_5__["default"].world.tileCenterToWorld( x1, y1 );
                new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( spr, 1000, { alpha: a, x: tx, y: ty }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCubic } );
            } else {
                spr.setAlpha( 0 );
                const { x: tx, y: ty } = _global__WEBPACK_IMPORTED_MODULE_5__["default"].world.tileCenterToWorld( x, y );

                spr.position = _global__WEBPACK_IMPORTED_MODULE_5__["default"].world.tileCenterToWorld( x1, y1 );
                new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( spr, 600, { alpha: a, x: tx, y: ty }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.inOutCubic } );
            }
        } else {
            spr.position = _global__WEBPACK_IMPORTED_MODULE_5__["default"].world.tileCenterToWorld( x, y );
        }
		
        this.layers[type].addChild( spr );
        this.elementalsByXy[x + "," + y] = spr;
    }

    removeElemental( x, y ) {
        let e;

        if ( typeof x == "number" ) {
            e = this.elementalsByXy[x + "," + y];
            e.removeFromParent();
            delete this.elementalsByXy[x + "," + y];
        } else {
            e = x;
            e.removeFromParent();
            delete this.elementalsByXy[e.tileX + "," + e.tileY];
        }

        return e;
    }

    getElemental( x, y ) {
        return this.elementalsByXy[x + "," + y];
    }


    process() {
        let dir;
        let ax, ay;
        const processTable = [];

        for ( const k in this.elementalsByXy ) {
            const e = this.elementalsByXy[k];

            e.life = e.newLife;
            if ( e.type == Elemental.POISON ) {
                const a = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.clamp( e.life / 2, 0.4, 1 );

                e.setScale( a * 1.5 );
                e.setAlpha( a * 0.9 );
            } else if ( e.type == Elemental.FIRE ) {
                const a = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.clamp( e.life / 2 + 0.7, 0.8, 1 );

                e.setAlpha( a );
            } else {
                e.setAlpha( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.clamp( e.life / 2, 0.4, 1 ) );
            }
            processTable.push( e );
        }
        for ( const i in processTable ) {
            const e = processTable[i];
	
            const leftEl = this.getElemental( e.tileX - 1, e.tileY );
            const rightEl = this.getElemental( e.tileX + 1, e.tileY );
            const upEl = this.getElemental( e.tileX, e.tileY - 1 );
            const downEl = this.getElemental( e.tileX, e.tileY + 1 );

            // 상호작용
            if ( e.type == Elemental.FIRE ) {
                // 불이 물을 만나면 꺼짐
                if ( ( leftEl && leftEl.type == Elemental.WATER ) ||
					( rightEl && rightEl.type == Elemental.WATER ) ||
					( upEl && upEl.type == Elemental.WATER ) ||
					( downEl && downEl.type == Elemental.WATER ) ) {
                    this.removeElemental( e );
                }
            } else if ( e.type == Elemental.POISON ) {
                // 독이 불을 만나면 사라짐
                if ( ( leftEl && leftEl.type == Elemental.FIRE ) ||
					( rightEl && rightEl.type == Elemental.FIRE ) ||
					( upEl && upEl.type == Elemental.FIRE ) ||
					( downEl && downEl.type == Elemental.FIRE ) ) {
                    this.removeElemental( e );
                }
            }
            if ( e.getParent() ) {
                const leftWall = _global__WEBPACK_IMPORTED_MODULE_5__["default"].world.getProperty( e.tileX - 1, e.tileY ).wall & _gameMap__WEBPACK_IMPORTED_MODULE_1__["default"].BLOCK_PASS;
                const rightWall = _global__WEBPACK_IMPORTED_MODULE_5__["default"].world.getProperty( e.tileX + 1, e.tileY ).wall & _gameMap__WEBPACK_IMPORTED_MODULE_1__["default"].BLOCK_PASS;
                const upWall = _global__WEBPACK_IMPORTED_MODULE_5__["default"].world.getProperty( e.tileX, e.tileY - 1 ).wall & _gameMap__WEBPACK_IMPORTED_MODULE_1__["default"].BLOCK_PASS;
                const downWall = _global__WEBPACK_IMPORTED_MODULE_5__["default"].world.getProperty( e.tileX, e.tileY + 1 ).wall & _gameMap__WEBPACK_IMPORTED_MODULE_1__["default"].BLOCK_PASS;

                //BLOCK_PASS 가 1이라고 가정
                console.assert( _gameMap__WEBPACK_IMPORTED_MODULE_1__["default"].BLOCK_PASS == 1 );
                let [l, r, u, d] = [0, 0, 0, 0];

                if ( e.life > 0 && e.life <= 1 ) {
                    e.newLife = _global__WEBPACK_IMPORTED_MODULE_5__["default"].world.random( 0, 1 ) * e.life * 0.5;
                } else {
                    l = ( leftEl && leftEl.type == e.type ) ? leftEl.life : 0;
                    r = ( rightEl && rightEl.type == e.type ) ? rightEl.life : 0;
                    u = ( upEl && upEl.type == e.type ) ? upEl.life : 0;
                    d = ( downEl && downEl.type == e.type ) ? downEl.life : 0;
                    const sum = ( Math.max( r, Math.max( l, Math.max( u, d ) ) ) + e.life ) / 2.2;

                    e.newLife = sum;
                    if ( sum > 0.5 ) {
                        if ( leftWall == 0 && !leftEl ) {
                            this.addElemental( e.type, e.tileX - 1, e.tileY, 0, e.tileX, e.tileY );
                        }
                        if ( rightWall == 0 && !rightEl ) {
                            this.addElemental( e.type, e.tileX + 1, e.tileY, 0, e.tileX, e.tileY );
                        }
                        if ( upWall == 0 && !upEl ) {
                            this.addElemental( e.type, e.tileX, e.tileY - 1, 0, e.tileX, e.tileY );
                        }
                        if ( downWall == 0 && !downEl ) {
                            this.addElemental( e.type, e.tileX, e.tileY + 1, 0, e.tileX, e.tileY );
                        }
                    }
                }
                if ( e.newLife <= 0 ) {
                    this.removeElemental( e );
                }
                if ( e.type == Elemental.WATER ) {
                    const items = _global__WEBPACK_IMPORTED_MODULE_5__["default"].world.getItems( e.tileX, e.tileY );

                    // 아이템 흘리기
                    if ( items ) {
                        this.moveItemOnWater( items, e, l, r, u, d );
                    }
                } else if ( e.type == Elemental.POISON ) {
                    const cr = _global__WEBPACK_IMPORTED_MODULE_5__["default"].world.getEntity( e.tileX, e.tileY );

                    // 독
                    if ( cr ) {
                        cr.addBuff( _entity_buff__WEBPACK_IMPORTED_MODULE_2__["default"].POISON, 3 );
                    }
                } else if ( e.type == Elemental.FIRE ) {
                    const cr = _global__WEBPACK_IMPORTED_MODULE_5__["default"].world.getEntity( e.tileX, e.tileY );

                    // 불
                    if ( cr ) {
                        cr.addBuff( _entity_buff__WEBPACK_IMPORTED_MODULE_2__["default"].FIRE, 3 );
                    }
                }
            }
        }
    }

    moveItemOnWater( items, e, l, r, u, d ) {
        const t = [];

        if ( e.life >= l && l > 0 ) {
            t.push( [-1, 0] );
        }
        if ( e.life >= r && r > 0 ) {
            t.push( [1, 0] );
        }
        if ( e.life >= u && u > 0 ) {
            t.push( [0, -1] );
        }
        if ( e.life >= d && d > 0 ) {
            t.push( [0, 1] );
        }
        if ( t.length > 0 ) {
            const item = items[_global__WEBPACK_IMPORTED_MODULE_5__["default"].world.random( items.length )];
            const x1 = item.tileX;
            const y1 = item.tileY;
            const [ax, ay] = t[_global__WEBPACK_IMPORTED_MODULE_5__["default"].world.random( t.length )];
            const [x2, y2] = [e.tileX + ax, e.tileY + ay];

            item.move( x2, y2 );
            _global__WEBPACK_IMPORTED_MODULE_5__["default"].world.addLog( "%s{가} 물에 떠내려갔다!", item.name );
        }
    }
}

Elemental.POISON = 1;
Elemental.FIRE = 2;
Elemental.WATER = 3;
//Elemental.LIGHTNING = 4;
Elemental.data = {
    [Elemental.POISON]: {
        col:   1,
        row:   4,
        color: 0x400080,
        blend: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite.ALPHA,
    },
    [Elemental.WATER]: {
        col:   9,
        row:   4,
        color: 0x0030ff,
        blend: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite.ALPHA,
    },
    [Elemental.FIRE]: {
        col:   5,
        row:   4,
        color: 0xc00000,
        blend: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite.ADD,
    },
};





/***/ }),

/***/ "./games/Avalonika/src/world/entityManager.js":
/*!****************************************************!*\
  !*** ./games/Avalonika/src/world/entityManager.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ EntityManager)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _entity_entity__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../entity/entity */ "./games/Avalonika/src/entity/entity.js");
/* harmony import */ var _gameMap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./gameMap */ "./games/Avalonika/src/world/gameMap.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../global */ "./games/Avalonika/src/global.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../config */ "./games/Avalonika/src/config.js");
/* harmony import */ var _entity_player__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../entity/player */ "./games/Avalonika/src/entity/player.js");
/* harmony import */ var _world__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./world */ "./games/Avalonika/src/world/world.js");
/* harmony import */ var _entity_monster__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../entity/monster */ "./games/Avalonika/src/entity/monster.js");










//-------------------------------------------------------------------------------------------------------------------
// 적의 턴 처리
//-------------------------------------------------------------------------------------------------------------------
// 적의 턴의 delay는 적이 맞고 움직여야 하는 경우이다.
// delay가 0이면 이동하다 맞거나 하게 됨

/**
 * 
 * @this EntityManager
 *
 */
function process() {
    console.log( "▷적턴", this.world.turn );
    // 처리 순서를 정하는 방법이 일정해야한다.
    const processOrder = [];

    for ( const k in this.AITable ) {
        const v = this.AITable[k];

        processOrder.push( [Math.abs( v.tileX - _global__WEBPACK_IMPORTED_MODULE_3__["default"].player.tileX ) + Math.abs( v.tileY - _global__WEBPACK_IMPORTED_MODULE_3__["default"].player.tileY ), v] );
    }
    processOrder.sort( ( a, b ) => {
        // 거리가 같다면 가로 세로 위치를 고려해서 정함
        if ( a[0] == b[0] ) {
            if ( a[1].tileX == b[1].tileX ) {
                return a[1].tileY - b[1].tileY;
            } else {
                return a[1].tileX - b[1].tileX;
            }
        } else {
            return a[0] - b[0];
        }
    } );
    for ( const i in processOrder ) {
        const v = processOrder[i];

        //log(i,v[2].name,v[1],v[2].tileX,v[2].tileY);
        v[1].processBuff();
        v[1].processAI();
    }
    console.log( " - 적턴끝",this.world.turn );
    console.log( "※엘리멘탈",this.world.turn );
    this.world.elemental.process();
}



//-------------------------------------------------------------------------------------------------------------------
// 월드에 Creature(Monster,Player) 나 물건을 올리고 내림
//-------------------------------------------------------------------------------------------------------------------

/**
 * @this EntityManager
 *
 * @param {Entity[]} items
 * @param {Entity} item
 */
function collapseBundle( items, item ) {
    const bundle = item.property.bundle;

    if ( bundle != null && items != null ) {
        //log("번들발견");
        let i = 0;

        while ( i < items.length ) {
            if ( items[i].property.bundle == bundle ) {
                if ( item.property.bundleMax != null ) {
                    const remain = item.property.bundleMax - ( item.amount + items[i].amount );

                    if ( remain > 0 ) {
                        item.amount = item.property.bundleMax;
                        items[i].amount = remain;
                    } else {
                        item.amount = item.amount + items[i].amount;
                        items.splice( i,1 );
                    }
                } else {
                    items[i].removeFromParent();
                    console.log( "골드 합치기",item.amount,items[i].amount );
                    item.amount = item.amount + items[i].amount;
                    items[i].amount = 0;
                    items.splice( i, 1 );
                }
            } else {
                i = i + 1;
            }
        }
    }
    if ( bundle == "gold" ) {
        if ( item.amount <= 5 ) {
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( 1000, () => item.changeImage( 1, 14 ) );
        } else if ( item.amount <= 20 ) {
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( 1000, () => item.changeImage( 2, 14 ) );
        } else if ( item.amount <= 100 ) {
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( 1000, () => item.changeImage( 3, 14 ) );
        } else {
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( 1000, () => item.changeImage( 4, 14 ) );
        }
    }
}



class EntityManager extends _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Component {
    /**
     *Creates an instance of EntityManager.
     * @param {World} world
     * @memberof EntityManager
     */
    onAdded( world ) {
        this.world = world;


        // 플레이어 이동시에 턴처리할 Creature 목록
        //this.AITable = {};  // TODO: weak table
        this.AITable = {};

        // 캐릭터 서치 참조 목록
        this.entitiesByXy = {}; // TODO: weak table
        // 아이템 서치 목록
        this.itemsByXy = {};


        //---------------------
        // Reserved Turn Func;
        //---------------------

        this.reservedPlayerTurnFuncs = [];
    }

    /**
     *
     *
     * @param {Entity} obj
     * @memberof EntityManager
     */
    addEntity( obj ) {
        obj.addedToWorld = true;
        if ( this.world.map.getVisibility( obj.tileX, obj.tileY ) > 0 ) {
            obj.setVisible( false );
        } else {
            obj.setVisible( true );
        }
        if ( obj.isItem ) {
            // 아이템을 월드에 올린다
            // 아이템은 한자리에 여러개가 올라갈 수 있다
            let items = this.itemsByXy[obj.tileX + "," + obj.tileY];

            if ( items == null ) {
                // 빈칸에 올리려고 하는 중
                items = [];
                this.itemsByXy[obj.tileX + "," + obj.tileY] = items;
                items = this.itemsByXy[obj.tileX + "," + obj.tileY];
            }
            if ( items.length > 0 ) {
                // 바닥에 아이템이 이미 있음
                if ( obj.property.bundle == "gold" ) {
                    //골드는 맨아래로 떨어짐
                    if ( obj.dropAnimationTimer ) {
                        const delayRemain = obj.dropAnimationTimer.getDelay();

                        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( delayRemain + 1000, () => {
                            // 골드 외에 다른 아이템이 있는 경우 숨김
                            if ( items.length > 1 ) {
                                obj.setVisible( false );
                            }
                        } );
                    } else {
                        if ( items.length > 1 ) {
                            obj.setVisible( false );
                        }
                    }
                } else if ( obj.dropAnimationTimer ) {
                    const delayRemain = obj.dropAnimationTimer.getDelay();

                    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( delayRemain + 1000, function() {
                        this.setVisible( false );
                    }, items[items.length - 1] );
                } else {
                    items[items.length - 1].setVisible( false );	// 기존 맨 위 아이템 숨기기
                }
            }
            collapseBundle.call( this, items, obj );
            if ( obj.property.bundle == "gold" ) {
                items.unshift( obj );
            } else {
                items.push( obj );
            }
            //log("아이템추가",obj.name,items.length,items[1],items[2]);
            this.world.itemLayer.addChild( obj );
        } else if ( obj.isCreature || obj.isProp ) {
            this.world.entityLayer.addChild( obj );
            if ( obj.shadowMesh ) {
                this.world.shadowLayer.addChild( obj.shadowMesh );
            }
            if ( obj instanceof _entity_monster__WEBPACK_IMPORTED_MODULE_7__["default"] && obj.AI ) {
                this.AITable[obj.id] = obj;
                // array로 하지 않은 이유는 #이 잘못된 값을 돌려줄 수 있기 때문
            }
		
            if ( this.entitiesByXy[obj.tileX + "," + obj.tileY] ) {
                throw new Error( "☞☞☞ 크리쳐가 있는 위치에 또 크리쳐를 생성하려함" );
            }
            this.entitiesByXy[obj.tileX + "," + obj.tileY] = obj;
            if ( obj instanceof _entity_player__WEBPACK_IMPORTED_MODULE_5__["default"] ) {
                const { x, y } = obj.getPosition();

                this.world.sightManager.moveEyeTo( x,y );
                this.world.sightManager.moveViewTo( x,y );
                this.world.onEnterFrame(); // 시야갱신
                this.world.sightManager.refreshEntityVisibility();
                obj.playPositionSound( obj.tileX, obj.tileY );                
            }
        }
        //obj.setVisible(this.canBeSeen(obj.tileX,obj.tileY,1));
    }

    removeEntity( obj ) {
        this.detachEntity( obj, true );
    }

    // 로직만 떼고 스프라이트는 둔다
    detachEntity( obj, removeSprite ) {
        obj.addedToWorld = false;
        if ( removeSprite ) {
            obj.removeFromParent();
            if ( this.dropAnimationTimer ) {
                this.dropAnimationTimer.stop();
                this.dropAnimationTimer = null;
            }
        }
        if ( obj.isItem ) {
            const items = this.itemsByXy[obj.tileX + "," + obj.tileY];

            if ( items ) {
                for ( let i = 0; i < items.length; i++ ) {
                    const v = items[i];

                    if ( v == obj ) {
                        obj.removeFromParent();
                        if ( i == items.length - 1 ) {
                            if ( i > 0 ) {
                                items[i - 1].setVisible( true ); // 그 다음 아이템 보여주기
                            }
                        }
                        items.splice( i, 1 );
                        if ( items.length == 0 ) {
                            delete this.itemsByXy[obj.tileX + "," + obj.tileY];
                        }
                        break;
                    }
                }
            } else {
                throw new Error( "월드에 존재하지 않는 아이템을 월드에서 삭제하려고함" );
            }
        } else if ( obj.isCreature || obj.isProp ) {
            if ( obj.shadowMesh && removeSprite ) {
                obj.shadowMesh.removeFromParent();
            }
            if ( obj.AI ) {
                delete this.AITable[obj.id];
            }
            if ( this.entitiesByXy[obj.tileX + "," + obj.tileY] == obj ) {
                delete this.entitiesByXy[obj.tileX + "," + obj.tileY];
            }
        }
    }


    //-------------------------------------------------------------------------------------------------------------------
    // 개체를 얻는 유틸리티 함수
    //-------------------------------------------------------------------------------------------------------------------

    /**
     *
     *
     * @param {number} tileX
     * @param {number} tileY
     * @returns {Entity}
     * @memberof EntityManager
     */
    getEntity( tileX, tileY ) {
        return this.entitiesByXy[tileX + "," + tileY];
    }

    /**
     * 개체 전체를 얻어온다
     * pairs는 순서를 보장하지 않기 때문에 이걸 써야함
     *
     * @returns {Entity[]}
     * @memberof EntityManager
     */
    getAllEntities() {
        const t = [];

        for ( let y = 0; y < this.world.map.height; y++ ) {
            for ( let x = 0; x < this.world.map.width; x++ ) {
                const v = this.getEntity( x, y );

                if ( v ) {
                    t.push( v );
                }
            }
        }

        return t;
    }


    // 아이템 목록을 돌려준다
    getItems( tileX, tileY ) {
        return this.itemsByXy[tileX + "," + tileY];
    }

    getNumOfItems( tileX, tileY ) {
        const items = this.itemsByXy[tileX + "," + tileY];

        return items ? items.length : 0;
    }

    moveTopItemToBottom( tileX, tileY ) {
        const items = this.getItems( tileX, tileY );

        if ( items && items.length > 1 ) {
            const topItem = items[items.length];

            topItem.setVisible( false );
            items[items.length] = null;
            items.unshift( topItem );
            items[items.length - 1].setVisible( true );
        }
    }

    getEntitiesInRect( x1, y1, x2, y2 ) {
        const t = [];

        for ( const k in this.entitiesByXy ) {
            const v = this.entitiesByXy[k];

            if ( v.tileX >= x1 && v.tileX <= x2 && v.tileY >= y1 && v.tileY <= y2 ) {
                t.push( v );
            }
        }

        return t;
    }

    clearMonsterMood() {
        for ( const k in this.entitiesByXy ) {
            const v = this.entitiesByXy[k];

            if ( v.showMood ) {
                v.showMood();
            }
        }
    }



    doEnemyTurn( delay ) {
        this.doDelayedEnemyTurnIfExist( () => {
            //log("적 턴을 시작하자",delay);
            this.enemyTurnTimer = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( delay, () => {
                //log("적 턴을 시작한다");
                const e = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "enemyTurn" );

                this.world.dispatchEvent( e );
                this.enemyTurnTimer = null;
                process.call( this );
                this.doPlayerTurn();
            } );
        } );
    }

    wait( delay, unstoppable ) {
        if ( unstoppable ) {
            _global__WEBPACK_IMPORTED_MODULE_3__["default"]["interface"].cursor.lock();
        } else if ( this.waitSkip ) {
            return;
        }
        this.waitTimer = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( delay, () => {
            this.waitTimer = null;
            if ( unstoppable ) {
                _global__WEBPACK_IMPORTED_MODULE_3__["default"]["interface"].cursor.unlock();
            }
        } );
    }

    doDelayedEnemyTurnIfExist( callback, data ) {
        if ( this.enemyTurnTimer ) {
            //이미 대기중인 적 턴이 있는 경우 바로 실행한다.
            console.log( "대기중 적 턴이 있다" );
            this.enemyTurnTimer.stop();
            this.enemyTurnTimer = null;
            process.call( this );
            callback.call( data );
        } else if ( this.waitTimer ) {
            console.log( "대기중 wait가 있다" );
            this.waitTimer.stop();
            this.waitTimer = null;
            this.waitSkip = true;
        } else {
            //console.log("대기중 적 턴이 없다");
            callback( data );
        }
    }

    //-------------------------------------------------------------------------------------------------------------------
    // 플레이어 턴 처리
    //-------------------------------------------------------------------------------------------------------------------

    doPlayerTurn() {
        this.world.processDateTime();
        const e = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "playerTurn" );

        this.world.dispatchEvent( e );
        this.waitSkip = false;
        this.world.sightManager.refreshEntityVisibility();
        // 안전하게 밀린 작업을 할 수 있는 시간
        if ( this.reservedPlayerTurnFuncs.length > 0 ) {
            _global__WEBPACK_IMPORTED_MODULE_3__["default"]["interface"].hideInfo();
            _global__WEBPACK_IMPORTED_MODULE_3__["default"]["interface"].cursor.hideAutoAction();
            console.log( "예약작업실행" );
            for ( const i in this.reservedPlayerTurnFuncs ) {
                const v = this.reservedPlayerTurnFuncs[i];

                if ( v[0].call( v[1] ) ) {
                    this.reservedPlayerTurnFuncs = [];

                    return;
                }
            }
            this.reservedPlayerTurnFuncs = [];
        }
        _global__WEBPACK_IMPORTED_MODULE_3__["default"]["interface"].cursor.processReservedClick();
        _global__WEBPACK_IMPORTED_MODULE_3__["default"].player.processAutoMove();
    }

    // 예약 작업 추가
    // true 리턴하면 이후 작업은 실행안함
    safeExecute( func, data ) {
        if ( this.isTurnProcessing() ) {
            this.reservedPlayerTurnFuncs.push( [func, data] );
        } else {
            _global__WEBPACK_IMPORTED_MODULE_3__["default"]["interface"].hideInfo();
            _global__WEBPACK_IMPORTED_MODULE_3__["default"]["interface"].cursor.hideAutoAction();
            func( data );
        }
    }

    //-------------------------------------------------------------------------------------------------------------------
    // 턴 강제 종료
    //-------------------------------------------------------------------------------------------------------------------

    isTurnProcessing() {
        return this.enemyTurnTimer != null || this.waitTimer != null;
    }

    forceStopTurnProcessing() {
        if ( this.enemyTurnTimer != null ) {
            this.enemyTurnTimer.stop();
            this.enemyTurnTimer = null;
        }
        if ( this.waitTimer != null ) {
            this.waitTimer.stop();
            this.waitTimer = null;
        }
    }
}




/***/ }),

/***/ "./games/Avalonika/src/world/gameMap.js":
/*!**********************************************!*\
  !*** ./games/Avalonika/src/world/gameMap.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ GameMap)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ "./games/Avalonika/src/config.js");
/* harmony import */ var _entity_creature__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../entity/creature */ "./games/Avalonika/src/entity/creature.js");
/* harmony import */ var _lib_random__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @lib/random */ "./engine/src/lib/random.js");
/* harmony import */ var _lib_visibilityTile__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @lib/visibilityTile */ "./engine/src/lib/visibilityTile.js");

	





// 맵의 x,y 는 모두 타일 단위 이다

class GameMap {
    constructor() {
        this.randomGenerator = new _lib_random__WEBPACK_IMPORTED_MODULE_3__["default"]( 0 );
        this.random = this.randomGenerator.random.bind( this.randomGenerator );
        this.lightList = undefined;

        /** @type {number[]} */
        this.data = undefined;
        /** @type {number} */
        this.width = undefined;
        /** @type {number} */
        this.height = undefined;

        /** @type {object[]} */
        this.propertyTable = undefined;

        /** @type {object[]} */
        this.tiles = undefined;
    }

    getData( x, y ) {
        return this.data[y * this.width + x];
    }

    setData( x, y, v ) {
        let i;

        if ( v ) {
            i = y * this.width + x;
        } else {
            i = x;
            v = y;
        }
        this.data[i] = v;
        this.propertyTable[i] = new Proxy( {},this.__mt );
        const tileProp = this.propertyTable[i];

        //TODO: x,y를 기록하는 것이 낭비
        tileProp.id = this.tiles[v].id;
        tileProp.x = i % this.width;
        tileProp.y = Math.floor( i / this.width );
        if ( tileProp.light && tileProp.light == 1 ) {
            this.lightList.push( { x: tileProp.x, y: tileProp.y, light: tileProp.light, color: tileProp.color != null ? tileProp.color : 0xffffff } );
        }
        if ( tileProp.envSound ) {
            this.envSounds.push( { x: tileProp.x, y: tileProp.y, sound: tileProp.envSound } );
        }
    }

    setDataByChar( x, y, c ) {
        this.setData( x, y, GameMap.tileStringData[c].id );
    }

    getProperty( x, y ) {
        return this.propertyTable[y * this.width + x];
    }

    getVisibility( x, y ) {
        return this.visibilityTileChecker.isVisible( x, y );
    }


    // 크리쳐 id 혹은 col,row 로부터 속성을 얻어온다
    getEntityProperty( col, row ) {
        let id;

        if ( row ) {
            id = ( row - 1 ) * this.creaturePerRow + col;
        } else {
            id = col;
        }

        return this.creaturePropertyTable[id];
    }


    buildLightMap() {
        const lm = [];
        const lit = [];
        const [w, h] = [this.width,this.height];
        //타일 밝기 계산
        let fastMode; //= true;

        for ( let i = 0; i < w * h; i++ ) {
            lit[i] = [70, 75, 80]; // 앰비언트
        }
        const mask = _lib_visibilityTile__WEBPACK_IMPORTED_MODULE_4__["default"].mask;

        for ( const i in this.lightList ) {
            const light = this.lightList[i];
            const summedMask = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];

            for ( let y = Math.max( 0, light.y - 15 ); y <= Math.min( h - 1, light.y + 15 ); y++ ) {
                for ( let x = Math.max( 0, light.x - 15 ); x <= Math.min( w - 1, light.x + 15 ); x++ ) {
                    if ( this.getProperty( x, y ).wall >= 2 ) {
                        // 마스크를 만든다
                        const index = ( ( light.y - y ) + 16 - 1 ) * 31 + ( light.x - x ) + 16 - 1;
                        const startIndex = mask.startIndex[index];
                        const skip = mask.skip[index];
                        const count = mask.count[index];

                        if ( startIndex > 0 ) {
                            // 마스크의 첫 값은 y축 시작 위치. 1부터 시작함
                            for ( let j = 0; j < count; j++ ) {
                                // 마스크 값을 모두 OR해서 합쳐둔다
                                summedMask[skip + j] |= mask.data[startIndex - 1 + j];
                            }
                        }
                    }
                }
            }
            for ( let y = Math.max( 0, light.y - 15 ); y <= Math.min( h - 1, light.y + 15 ); y++ ) {
                for ( let x = Math.max( 0, light.x - 15 ); x <= Math.min( w - 1, light.x + 15 ); x++ ) {
                    const [relX, relY] = [light.x - x, light.y - y];
                    let [r, g, b] = [0, 0, 0];

                    if ( ( ( ~summedMask[relY + 15] ) & ( 1 << ( relX + 15 ) ) ) != 0 ) {
                        const [lr, lg, lb] = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.hex2rgba( light.color );
                        const dist = ( relX * relX + relY * relY );

                        // 라이트는 거리의 제곱에 반비례한다.
                        r = Math.min( 255,lr / ( dist * 1 ) * 255 );
                        g = Math.min( 255, lg / ( dist * 4 ) * 255 );
                        b = Math.min( 255, lb / ( dist * 2 ) * 255 );
                    }
                    lit[y  * w + x][0] += r;
                    lit[y  * w + x][1] += g;
                    lit[y  * w + x][2] += b;
                }
            }
        }
        for ( let y = 0; y < this.height; y++ ) {
            for ( let x = 0; x < this.width; x++ ) {
                const pr = this.getProperty( x, y );

                if ( pr.illum == 1 ) {
                    const i = y * this.width + x;
                    const [r, g, b] = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.hex2rgba( pr.color );

                    lit[i][0] = r * 255;
                    lit[i][1] = g * 255;
                    lit[i][2] = b * 255;
                }
            }
        }

        // 코너를 위해서 2x2 블러
        for ( let y = 0; y < this.height; y++ ) {
            for ( let x = 0; x < this.width; x++ ) {
                const i = y * this.width + x;

                if ( x == 0 || y == 0 ) {
                    lm[i] = 0;
                } else {
                    const sr = Math.floor( Math.min( 255, ( lit[i][0] + lit[i - 1][0] + lit[i - w][0] + lit[i - 1 - w][0] ) / 4 ) );
                    const sg = Math.floor( Math.min( 255, ( lit[i][1] + lit[i - 1][1] + lit[i - w][1] + lit[i - 1 - w][1] ) / 4 ) );
                    const sb = Math.floor( Math.min( 255, ( lit[i][2] + lit[i - 1][2] + lit[i - w][2] + lit[i - 1 - w][2] ) / 4 ) );

                    lm[i] = sr * 0x10000 + sg * 0x100 + sb;
                    //p.setOverrideColor(lm[i]);
                    //p.setPosition(x-1,y-1);
                    //rt.draw(p);
                }
            }
        }

        this.lightMap = lm;
        //let b = new BitGameMap(rt);
        //b.setScale(3);
        //b.setY(50);
        //_stage.addChild(b);
    }

    getLightMap( x, y ) {
        return this.lightMap[( y - 1 ) * this.width + x];
    }

    getTileLightMap( x, y ) {
        const i = ( y - 1 ) * this.width + x;

        if ( x > 1 && x < this.width && y > 1 && y < this.height ) {
            return [this.lightMap[i], this.lightMap[i + 1],
                    this.lightMap[i + this.width], this.lightMap[i + 1 + this.width]];
        } else {
            const c1 = ( x > 1 && y > 1 ) ? this.lightMap[i] : 0;
            const c2 = ( x < this.width && y > 1 ) ? this.lightMap[i + 1] : 0;
            const c3 = ( x > 1 && y < this.height ) ? this.lightMap[i + this.width] : 0;
            const c4 = ( x < this.width && y < this.height ) ? this.lightMap[i + this.width + 1] : 0;

            return [c1, c2, c3, c4];
        }
    }


    //-------------------------------------------------------------------------------------------------------------------
    // 스트링 로더
    //-------------------------------------------------------------------------------------------------------------------

    loadString( s ) {
        const t = s.split( "\n" );
        const height = t.length;
        const width = t[0].length;

        this.width = width;
        this.height = height;
        this.tileWidth = _config__WEBPACK_IMPORTED_MODULE_1__["default"].World.tileWidth;
        this.tileHeight = _config__WEBPACK_IMPORTED_MODULE_1__["default"].World.tileHeight;
        this.tilePerRow = _config__WEBPACK_IMPORTED_MODULE_1__["default"].World.tilePerRow;
        this.creaturePerRow = _entity_creature__WEBPACK_IMPORTED_MODULE_2__["default"].perRow;
        this.envSounds = [];

        this.tiles = [];
        for ( const k in GameMap.tileStringData ) {
            const v = GameMap.tileStringData[k];

            v.char = k;
            this.tiles[v.id] = v;
        }

        this.data = [];
        for ( let y = 0; y < height; y++ ) {
            //log(t[y]);
            for ( let x = 0; x < width; x++ ) {
                const tile = GameMap.tileStringData[t[y].substr( x,1 )];

                if ( !tile ) {
                    console.log( `컨버팅할 수 없는 타일 ${tile} 발견 ${x}, ${y}` );
                } else {
                    this.data[y * width + x] = tile.id;
                }
            }
        }
        this.data = new Proxy( this.data, {
            get: ( target, name ) => {
                return name in target ? target[name] : 0;
            }
        } );
        //setmetatable(this.data, { __index: function (t, k) { return 0; } });
        this.lightList = [];
        // 속성 테이블을 TILED 데이터에서 읽어서 propertyTable에 저장한다.
        // propertyTable[GameMapIndex]로 얻어올 수 있다

        this.propertyTable = [];
        //setmetatable(this.propertyTable, { __index: function (t, k) { return GameMap.defaultProperty; } });
        this.propertyTable = new Proxy( this.propertyTable, {
            get: ( target, name ) => {
                return name in target ? target[name] : GameMap.defaultProperty;
            }
        } );

        this.__mt = {
            get: ( target, name ) => {
                return name in target ? target[name] : ( this.tiles[target.id][name] || GameMap.defaultProperty[name] );
            }
        };
        // 화면 구석 처리용 기본 속성값
        this.__dpr = JSON.parse( JSON.stringify( GameMap.defaultProperty ) );
        this.__dpr.bridge = 1; //화면 구석 처리
        this.__dpr.block = 1; //화면 구석 처리
        this.__dpr.road = 1; //화면 구석 처리
        this.__dpr.lava = 1; //화면 구석 처리

        for ( const i in this.data ) {
            const v = this.data[i];

            this.setData( i, v );
        }
        for ( let y = 0; y < height; y++ ) {
            for ( let x = 0; x < width; x++ ) {
                this.processVType( x, y );
            }
        }

        // 크리쳐 속성 테이블을 TILED에서 읽어서 creaturePropertyTable에 저장한다
        // creaturePropertyTable[id]로 얻을 수 있다

        this.creaturePropertyTable = {};
        //setmetatable(this.creaturePropertyTable, { __index: function (t, k) { GameMap.defaultCreatureProperty; } } );
        this.creaturePropertyTable = new Proxy( this.creaturePropertyTable, {
            get: ( target, name ) => {
                return name in target ? target[name] : GameMap.defaultCreatureProperty;
            }
        } );
        // spawnTable에 기록해두고 spawn처리는 World가 한다.
        this.spawnTable = {};

        // 타일 단위 시야처리기
        this.visibilityTileChecker = new _lib_visibilityTile__WEBPACK_IMPORTED_MODULE_4__["default"]( this.width, this.height, this.propertyTable );
        this.buildLightMap();
    }


    processVType( x, y ) {
        const width = this.width;
        const height = this.height;
        const pt = this.propertyTable;
        const dpr = this.__dpr;
        const i = y * width + x;
        const pr = pt[i];

        if ( pr.vtype ) {
            const ul = ( y > 0 && x > 0 ) 			? pt[i - width - 1] : dpr;
            const u = ( y > 0 ) 					? pt[i - width] : dpr;
            const ur = ( y > 0 && x < width - 1 ) 		? pt[i - width + 1] : dpr;
            const l = ( x > 0 ) 					? pt[i - 1] : dpr;
            const r = ( x < width - 1 )					? pt[i + 1] : dpr;
            const dl = ( y < height - 1 && x > 0 )		? pt[i + width - 1] : dpr;
            const d = ( y < height - 1 )				? pt[i + width] : dpr;
            const dr = ( y < height - 1 && x < width - 1 ) 	? pt[i + width + 1] : dpr;
            const newId = vtypeFunc[pr.vtype]( this, ul, u, ur, l, pr, r, dl, d, dr );

            if ( !newId ) {
                console.log( "ID를 얻을 수 없음", pr.vtype, x, y );
            } else {
                this.data[i] = newId;
            }
        }
    }

    getMapString() {
        let s = "";

        for ( let y = 0; y < this.height; y++ ) {
            for ( let x = 0; x < this.width; x++ ) {
                const pr = this.getProperty( x, y );

                s = s + pr.char;
            }
            s = s + "\n";
        }

        return s;
    }
}


const vtypeFunc = {
    ["wall"]: function ( self, ul, u, ur, l, c, r, dl, d, dr ) {
        const id = c.id;
        let add = 0;

        if ( d.block != c.block ) {
            //아래가 빈 경우
            if ( u.block != c.block ) {
                //위가 빈 경우
                if ( l.block != c.block && r.block != c.block ) {
                    add = 22;
                } else if ( l.block != c.block ) {
                    add = 20;
                } else if ( r.block != c.block ) {
                    add = 21;
                } else {
                    add = self.random( 16, 17 );
                }
            } else {
                //if (u.char==c.char) {
                //	add=16;
                //} else {
                add = self.random( 16, 19 );
                //}
            }
        } else {
            if ( u.block != c.block && l.block != c.block && r.block != c.block ) {
                //위가 빈 경우
                add = 4;
            } else if ( u.block != c.block && l.block != c.block ) {
                add = 6;
            } else if ( u.block != c.block && r.block != c.block ) {
                add = 5;
            } else {
                //if (l.block!=c.block && r.block!=c.block) {
                add = self.random( 1, 3 );
            }
        }

        return id + add;
    },
    ["water"]: function ( self, ul, u, ur, l, c, r, dl, d, dr ) {
        const att = c.glue;
        const ca = c[att];
        const flag = ( ul[att] != ca ? 1 << 7 : 0 ) |
            ( u[att] != ca ? 1 << 6 : 0 ) |
            ( ur[att] != ca ? 1 << 5 : 0 ) |
            ( l[att] != ca ? 1 << 4 : 0 ) |
            ( r[att] != ca ? 1 << 3 : 0 ) |
            ( dl[att] != ca ? 1 << 2 : 0 ) |
            ( d[att] != ca ? 1 << 1 : 0 ) |
            ( dr[att] != ca ? 1 << 0 : 0 );

        return 112 + GameMap.tileBlendTable[256 - flag];
    },

    ["mountain"]: function ( self, ul, u, ur, l, c, r, dl, d, dr ) {
        const id = c.id;

        if ( l.char != c.char && r.char != c.char ) {
            return id + 3;
        } else if ( l.char != c.char ) {
            return id;
        } else if ( r.char != c.char ) {
            return id + 2;
        } else {
            return id + 1;
        }
    },
    ["fence"]: function ( self, ul, u, ur, l, c, r, dl, d, dr ) {
        const id = c.id;
        let add = 0;

        if ( d.block == c.block && u.block != c.block ) {
            if ( l.block == c.block ) {
                add = 6;
            } else if ( r.block == c.block ) {
                add = 7;
            } else if ( l.block != c.block && r.block != c.block ) {
                add = self.random( 6, 7 );
            } else {
                add = self.random( 0, 1 );
            }
        } else if ( u.block == c.block && d.block != c.block ) {
            if ( l.block == c.block ) {
                add = 4;
            } else if ( r.block == c.block ) {
                add = 5;
            } else if ( l.block != c.block && r.block != c.block ) {
                add = self.random( 4, 5 );
            } else {
                add = self.random( 0, 1 );
            }
        } else if ( u.block == c.block && d.block == c.block ) {
            if ( l.block == c.block ) {
                add = 10;
            } else if ( r.block == c.block ) {
                add = 11;
            } else {
                add = 8;
            }
        }

        return id + add;
    },
    ["torch"]: function ( self, ul, u, ur, l, c, r, dl, d, dr ) {
        const id = c.id;
        const t = [];

        if ( l.char == "M" || l.char == "W" || l.char == "B" ) {
            t.push( 24 );
        }
        if ( r.char == "M" || r.char == "W" || r.char == "B" ) {
            t.push( 20 );
        }
        if ( t.length > 0 ) {
            return id + t[self.random( 0, t.length - 1 )];
        } else {
            return id;
        }
    },
    ["door"]: function ( self, ul, u, ur, l, c, r, dl, d, dr ) {
        if ( u.char == "M" || d.char == "M" || l.char == "M" || r.char == "M" ) {
            return 103;
        } else if ( u.char == "W" || d.char == "W" || l.char == "W" || r.char == "W" ) {
            return 47;
        } else if ( u.char == "#" || d.char == "#" || l.char == "#" || r.char == "#" ) {
            return 51;
        } else {
            return 39;
        }
    },
    ["cdoor"]: function ( self, ul, u, ur, l, c, r, dl, d, dr ) {
        if ( u.char == "M" || d.char == "M" || l.char == "M" || r.char == "M" ) {
            return 87;
        } else if ( u.char == "W" || d.char == "W" || l.char == "W" || r.char == "W" ) {
            return 31;
        } else if ( u.char == "#" || d.char == "#" || l.char == "#" || r.char == "#" ) {
            return 50;
        } else {
            return 23;
        }
    },
    ["dstair"]: function ( self, ul, u, ur, l, c, r, dl, d, dr ) {
        if ( l.char == "R" && r.char == "R" ) {
            c.shadow = 1;

            return 162;
        } else if ( l.char != c.char && r.char != c.char ) {
            c.shadow = 1;

            return 161;
        } else if ( l.char == c.char ) {
            return 71;
        } else {
            return 70;
        }
    },
    ["chair"]: function ( self, ul, u, ur, l, c, r, dl, d, dr ) {
        const id = c.id;
        const t = [];

        if ( l.char == "H" || l.char == "Z" ) {
            t.push( 1 );
        }
        if ( r.char == "H" || r.char == "Z" ) {
            t.push( 0 );
        }
        if ( u.char == "H" || u.char == "Z" ) {
            t.push( 2 );
        }
        if ( d.char == "H" || d.char == "Z" ) {
            t.push( 3 );
        }
        if ( t.length > 0 ) {
            return id + t[self.random( 0, t.length - 1 )];
        } else {
            return id + self.random( 0, 3 );
        }
    },
    ["wbridge"]: function ( self, ul, u, ur, l, c, r, dl, d, dr ) {
        const t = [];

        if ( l.char != c.char || r.char != c.char ) {
            t.push( 7 );
        }
        if ( u.char != c.char || d.char != c.char ) {
            t.push( 109 );
        }
        if ( t.length > 0 ) {
            return t[self.random( 0, t.length - 1 )];
        } else {
            return self.random( 1,2 ) == 1 ? 7 : 109;
        }
    },

};

GameMap.tileBlendTable = new Uint8Array( [
    0x2e, 0x2e, 0x28, 0x28, 0x2e, 0x2e, 0x28, 0x28, 0x29, 0x29, 0x21, 0x20, 0x29, 0x29, 0x21, 0x20,
    0x2a, 0x2a, 0x23, 0x23, 0x2a, 0x2a, 0x22, 0x22, 0x2c, 0x2c, 0x13, 0x11, 0x2c, 0x2c, 0x12, 0x10,
    0x2e, 0x2e, 0x28, 0x28, 0x2e, 0x2e, 0x28, 0x28, 0x29, 0x29, 0x21, 0x20, 0x29, 0x29, 0x21, 0x20,
    0x2a, 0x2a, 0x23, 0x23, 0x2a, 0x2a, 0x22, 0x22, 0x2c, 0x2c, 0x13, 0x11, 0x2c, 0x2c, 0x12, 0x10,
    0x2b, 0x2b, 0x2d, 0x2d, 0x2b, 0x2b, 0x2d, 0x2d, 0x25, 0x25, 0x1f, 0x1d, 0x25, 0x25, 0x1f, 0x1d,
    0x27, 0x27, 0x17, 0x17, 0x27, 0x27, 0x15, 0x15, 0x1b, 0x1b, 0x0f, 0x07, 0x1b, 0x1b, 0x0b, 0x03,
    0x2b, 0x2b, 0x2d, 0x2d, 0x2b, 0x2b, 0x2d, 0x2d, 0x24, 0x24, 0x1e, 0x1c, 0x24, 0x24, 0x1e, 0x1c,
    0x27, 0x27, 0x17, 0x17, 0x27, 0x27, 0x15, 0x15, 0x19, 0x19, 0x0d, 0x05, 0x19, 0x19, 0x09, 0x01,
    0x2e, 0x2e, 0x28, 0x28, 0x2e, 0x2e, 0x28, 0x28, 0x29, 0x29, 0x21, 0x20, 0x29, 0x29, 0x21, 0x20,
    0x2a, 0x2a, 0x23, 0x23, 0x2a, 0x2a, 0x22, 0x22, 0x2c, 0x2c, 0x13, 0x11, 0x2c, 0x2c, 0x12, 0x10,
    0x2e, 0x2e, 0x28, 0x28, 0x2e, 0x2e, 0x28, 0x28, 0x29, 0x29, 0x21, 0x20, 0x29, 0x29, 0x21, 0x20,
    0x2a, 0x2a, 0x23, 0x23, 0x2a, 0x2a, 0x22, 0x22, 0x2c, 0x2c, 0x13, 0x11, 0x2c, 0x2c, 0x12, 0x10,
    0x2b, 0x2b, 0x2d, 0x2d, 0x2b, 0x2b, 0x2d, 0x2d, 0x25, 0x25, 0x1f, 0x1d, 0x25, 0x25, 0x1f, 0x1d,
    0x26, 0x26, 0x16, 0x16, 0x26, 0x26, 0x14, 0x14, 0x1a, 0x1a, 0x0e, 0x06, 0x1a, 0x1a, 0x0a, 0x02,
    0x2b, 0x2b, 0x2d, 0x2d, 0x2b, 0x2b, 0x2d, 0x2d, 0x24, 0x24, 0x1e, 0x1c, 0x24, 0x24, 0x1e, 0x1c,
    0x26, 0x26, 0x16, 0x16, 0x26, 0x26, 0x14, 0x14, 0x18, 0x18, 0x0c, 0x04, 0x18, 0x18, 0x08, 0x00,
] );


GameMap.defaultProperty = { wall: 0, shadow: 0 };
GameMap.defaultCreatureProperty = { race: "", level: 1 };
GameMap.EMPTY			= 0;
GameMap.BLOCK_PASS		= 1;
GameMap.BLOCK_VISION	= 2;
GameMap.BLOCK_ARROW		= 4;
const BP = GameMap.BLOCK_PASS;
const BV = GameMap.BLOCK_VISION;
const BA = GameMap.BLOCK_ARROW;

GameMap.tileStringData = {

    ["~"]: { id: 272, name: "물", wall: BP, water: 1, vtype: "water", below: 272, bridge: 1, glue: "bridge", illum: 1, color: 0x0090ff, GameMapColor: 0x305090 },
    ["-"]: { id: 276, name: "깊은 물", wall: BP, water: 2, vtype: "water", below: 276, bridge: 1, glue: "bridge", illum: 1, color: 0x0090ff, GameMapColor: 0x305090 },
    ["="]: { id: 280, name: "매우 깊은 물", wall: BP, water: 3, vtype: "water", below: 280, bridge: 1, glue: "bridge", illum: 1, color: 0x0090ff, GameMapColor: 0x305090 },
    [" "]: { id: 15, name: "바닥", sound: 1 },
    ["@"]: { id: 62, name: "길", sound: 1, vtype: "water", below: 62, road: 1, glue: "road", GameMapColor: 0x603010 },
    ["Q"]: { id: 160, name: "거친 길", sound: 1, vtype: "water", below: 160, road: 1, glue: "road", GameMapColor: 0x603010 },
    ["."]: { id: 11, name: "고운 흙바닥", sound: 1 },
    [","]: { id: 10, name: "흙바닥", sound: 1 },
    [";"]: { id: 9, name: "거친 흙바닥", sound: 1 },
    ["?"]: { id: 12, name: "자갈밭" },
    ["`"]: { id: 0, name: "풀", sound: 2 },
    ['"']: { id: 13, name: "잔디", sound: 2 },
    ["^"]: { id: 1, name: "큰 풀", sound: 2 },
    ["V"]: { id: 3, name: "무성한 풀", sound: 2 },
    ["G"]: { id: 2, name: "덤불", wall: BV, sound: 3, shadow: 1, GameMapColor: 0x004000 },
    ["T"]: { id: 60, name: "큰 나무", wall: BV + BP, shadow: 1, GameMapColor: 0x30a030 },
    ["("]: { id: 14, name: "돌바닥" },
    ["{"]: { id: 4, name: "큰돌바닥" },
    ["R"]: { id: 68, name: "바위", wall: BV | BP | BA, shadow: 1, noRain: 1 },
    ["&"]: { id: 64, name: "산", wall: BV | BP | BA, vtype: "mountain", shadow: 1, noRain: 1 },
    ["W"]: { id: 24, name: "동굴벽", wall: BV | BP, vtype: "wall", shadow: 1, block: 1, road: 1, noRain: 1 },
    ["M"]: { id: 80, name: "돌벽", wall: BV | BP | BA, vtype: "wall", shadow: 1, block: 1, road: 1, noRain: 1 },
    ["B"]: { id: 16, name: "벽돌벽", wall: BV | BP | BA, vtype: "wall", shadow: 1, block: 1, road: 1, noRain: 1 },
    ["#"]: { id: 48, name: "울타리", wall: BP, vtype: "fence", shadow: 1, block: 1 },
    ["D"]: { id: 39, name: "문", vtype: "door", shadow: 1, block: 1, road: 1, noRain: 1 },
    ["E"]: { id: 23, name: "잠긴 문", vtype: "cdoor", wall: BP | BV | BA, shadow: 1, block: 1, road: 1, noRain: 1 },
    ["|"]: { id: 7, name: "나무 바닥", vtype: "wbridge", sound: 4, bridge: 1, road: 1, lava: 1, noRain: 1 },
    ["+"]: { id: 6, name: "타일", sound: 5, bridge: 1, road: 1, lava: 1, noRain: 1 },
    [":"]: { id: 8, name: "작은 타일", bridge: 1, road: 1, lava: 1 },
    ["Z"]: { id: 5, name: "흙 타일" },
    ["I"]: { id: 288, name: "횃불", fire: 1, vtype: "torch", color: 0xcf7015, light: 1 },
    ["*"]: { id: 300, name: "반딧불", color: 0x0020af, light: 1, sound: 7 },
    [">"]: { id: 70, name: "내려가는 계단", vtype: "dstair", illum: 1, color: 0xa09000, road: 1, noRain: 1, GameMapColor: 0xffff00 },
    ["<"]: { id: 69, name: "올라가는 계단", wall: BV, shadow: 1, illum: 1, color: 0xa09000, road: 1, noRain: 1, GameMapColor: 0xa0a000 },
    ["_"]: { id: 72, name: "제단", sound: 5 },
    ["Y"]: { id: 296, name: "분수", wall: BV, water: 1, envSound: "fountain", shadow: 1 },
    ["O"]: { id: 73, name: "모리안의 신상", wall: BP | BV | BA, shadow: 1, noRain: 1 },
    ["C"]: { id: 74, name: "키홀의 신상", wall: BP | BV | BA, shadow: 1, noRain: 1 },
    ["L"]: { id: 75, name: "마하의 신상", wall: BP | BV | BA, shadow: 1, noRain: 1 },
    ["!"]: { id: 61, name: "푯말", wall: BP | BV | BA, shadow: 1 },
    ["F"]: { id: 292, name: "모닥불", wall: BV, fire: 1, envSound: "campfire", color: 0xff4000, light: 1, shadow: 1 },
    ["%"]: { id: 304, name: "용암", wall: BP, fire: 3, vtype: "water", color: 0xff3030, below: 304, lava: 1, illum: 1, glue: "lava" },
    ["H"]: { id: 88, name: "탁자", wall: BP, vtype: "mountain", shadow: 1, noRain: 1 },
    [")"]: { id: 92, name: "의자", vtype: "chair", sound: 4, shadow: 1, noRain: 1 },
    ["}"]: { id: 104, name: "침대", shadow: 1, sound: 6, noRain: 1 },
    ["S"]: { id: 105, name: "간판", wall: BP, shadow: 1, illum: 1, color: 0xffffff, noRain: 1 },
    ["U"]: { id: 163, name: "기둥", wall: BP | BV | BA, shadow: 1, noRain: 1 },

    ["1"]: { id: -1, name: "문위치1", wall: BP | BV },
    ["2"]: { id: -1, name: "문위치2", wall: BP | BV },
    ["3"]: { id: -1, name: "문위치3", wall: BP | BV },
    ["4"]: { id: -1, name: "문위치4", wall: BP | BV },
    ["5"]: { id: -1, name: "문위치5", wall: BP | BV },
    ["6"]: { id: -1, name: "문위치6", wall: BP | BV },
    ["7"]: { id: -1, name: "문위치7", wall: BP | BV },
    ["8"]: { id: -1, name: "문위치8", wall: BP | BV },
    ["9"]: { id: -1, name: "문위치9", wall: BP | BV },

};

// 기본값 보장
for ( const k in GameMap.tileStringData ) {
    const v = GameMap.tileStringData[k];

    for ( const k2 in GameMap.defaultProperty ) {
        const v2 = GameMap.defaultProperty[k2];

        if ( !v[k2] ) {
            v[k2] = v2;
        }
    }
}






/***/ }),

/***/ "./games/Avalonika/src/world/pathManager.js":
/*!**************************************************!*\
  !*** ./games/Avalonika/src/world/pathManager.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ pathManager)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _gameMap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./gameMap */ "./games/Avalonika/src/world/gameMap.js");
/* harmony import */ var _lib_a_star__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @lib/a-star */ "./engine/src/lib/a-star.js");
/* harmony import */ var _lib_a_star__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_lib_a_star__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _world__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./world */ "./games/Avalonika/src/world/world.js");








//-------------------------------------------------------------------------------------------------------------------
// 길찾기
//-------------------------------------------------------------------------------------------------------------------

/**
 *
 *
 * @class pathManager
 */
class pathManager extends _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Component {
    /**
     *Creates an instance of pathManager.
     * @param {World} world
     * @memberof pathManager
     */
    onAdded( world ) {
        this.world = world;
    }
    

    findPath_old( x, y, x2, y2 ) {
        function isValid( x, y ) {
            return this.map.getProperty( x, y ).wall == 0 && !this.getEntity( x, y );
        }

        function validNodeFunc( node, neighbor ) {
            if ( Math.abs( node.x - neighbor.x ) + Math.abs( node.y - neighbor.y ) <= 1 ) {
                return true;
            }

            return false;
        }
	
        //----------------------------------
        // FloodFill로 갈 수 있는 영역을 구한다
        //----------------------------------
        let [nearestNode, floorList] = this.findNearestFloor( x, y, x2, y2 );
        let startNode = this.world.getProperty( x, y );
        let endNode = this.world.getProperty( x2, y2 );
        let path;

        if ( !path && isValid( x2, y2 ) &&
            x2 >= 1 && x2 <= this.world.map.width &&
            y2 >= 1 && y2 <= this.world.map.height &&
            floorList.includes( endNode ) ) {
            //----------------------
            // A star 로 길을 찾는다
            //----------------------
            //path = astar.path(startNode,endNode,floorList,true,validNodeFunc);
        }
        if ( !path ) {
            //---------------------------------
            // 목적지에 가장 가까운 위치로 이동한다
            //---------------------------------
            path = _lib_a_star__WEBPACK_IMPORTED_MODULE_2___default().path( startNode, nearestNode, floorList, true, validNodeFunc );
        }

        return path;
    }


    /**
     *
     *
     * @param {number} x
     * @param {number} y
     * @param {number} x2
     * @param {number} y2
     * @returns {[object,object[]]}
     * @memberof pathManager
     */
    findNearestFloor( x, y, x2, y2 ) {
        // floodfill 방식으로 도달할 수 있는 칸을 구함
        // 최대 범위를 제한하거나 캐시된 정보를 쓰는 식으로 최적화해야한다.
        let checkList = [];
        let floor = [];
        let minDist = 999999;
        let nearestPr = this.world.map.getProperty( x, y );

        let check = ( pr ) => {
            return checkList[pr.y * this.world.map.width + pr.x];
        };

        let setCheck = ( pr, v ) => {
            checkList[pr.y * this.world.map.width + pr.x] = v;
        };

        let floodFill = ( cx, cy, dir ) => {
            let pr;

            while ( true ) {
                pr = this.world.map.getProperty( cx, cy );
                //log(pr.wall,pr.revealed,pr._checked,this.getEntity(cx,cy),minDist);
                if ( minDist == 999999 ||
                    ( ( pr.wall & _gameMap__WEBPACK_IMPORTED_MODULE_1__["default"].BLOCK_PASS ) == 0 && pr.revealed && !check( pr ) && !this.world.entityManager.getEntity( cx, cy ) ) ) {
                    setCheck( pr, true );
                    let dist = Math.abs( x2 - cx ) + Math.abs( y2 - cy );

                    if ( minDist > dist ) {
                        minDist = dist;
                        nearestPr = pr;
                    }
                    floor.push( pr );
                    let upPr = this.world.map.getProperty( cx, cy - 1 );
                    let downPr = this.world.map.getProperty( cx, cy + 1 );

                    if ( upPr.wall == 0 && pr.revealed && !check( upPr ) && !this.world.entityManager.getEntity( cx, cy - 1 ) ) {
                        floodFill( cx, cy - 1, -1 );
                        floodFill( cx + 1, cy - 1, 1 );
                    }
                    if ( downPr.wall == 0 && pr.revealed && !check( downPr ) && !this.world.entityManager.getEntity( cx, cy + 1 ) ) {
                        floodFill( cx, cy + 1, -1 );
                        floodFill( cx + 1, cy + 1, 1 );
                    }
                } else {
                    break;
                }
                cx = cx + dir;
            }
        };

        floodFill( x, y, -1 );
        floodFill( x + 1, y, 1 );

        return [nearestPr, floor];
    }

    //길찾기
    //맵 프로퍼티의 어레이를 돌려줌
    //.x,.y를 읽으면 된다.
    //못찾는 경우 null;
    findPath( x, y, x2, y2, ignoreReveal ) {
        // 자체 a star 구현
        let forceNearestMove;
        let canReachTarget;
        let shortestDist = Math.abs( x2 - x ) + Math.abs( y2 - y );
        let limitDist = shortestDist * 3;
        //맵프로퍼티
        let pr;
        let startPr = this.world.getProperty( x, y );
        let endPr = this.world.getProperty( x2, y2 );

        if ( startPr.x == null || startPr.y == null ) {
            // 맵영역 밖에서 findPath 시도
            return null;
        }
        if ( ( endPr.wall & _gameMap__WEBPACK_IMPORTED_MODULE_1__["default"].BLOCK_PASS ) == 0 && ( ignoreReveal || endPr.revealed ) && !this.world.entityManager.getEntity( x2, y2 ) ) {
            //
        } else {
            forceNearestMove = true;
        }
        let distToTarget = Math.abs( x2 - x ) + Math.abs( y2 - y );

        // 1칸 이동일 경우 특별처리
        if ( distToTarget == 1 ) {
            //log("한칸이동");
            if ( forceNearestMove ) {
                return null;
            } else {
                return [ endPr ];
            }
        }

        let checkList = [];// 체크한 타일인지 마킹하는 부울테이블
        let [cx, cy] = [x, y];
        let step = 0;
        let stack = [];
        let floor = [];
        let floorFrom = new Map(); // 경로 역추적 테이블

        let minDist = 999999;
        let nearestPr = null;

        let check = ( pr ) => {
            return checkList[pr.y * this.world.map.width + pr.x];
        };

        let setCheck = ( pr, v ) => {
            checkList[pr.y * this.world.map.width + pr.x] = v;
        };

        let spread = ( cx, cy, fromPr, stack ) => {
            let pr = this.world.getProperty( cx, cy );
            let dist = Math.abs( x2 - cx ) + Math.abs( y2 - cy );

            if ( minDist > dist ) {
                minDist = dist;
                nearestPr = pr;
            } else if ( dist > limitDist ) {
                return;
            } else if ( forceNearestMove ) {
                // 근처까지 이동해야 하는데 더 멀리가는 목적지는 검색할 필요 없음
                //log("가까운 목적지이므로 멈춤",minDist,dist);
                //return;
            }
            floor.push( pr );
            floorFrom.set( pr, fromPr );
            if ( cx == x2 && cy == y2 ) { // 목적지도착
                canReachTarget = true;

                return true;
            }
		
            let pr1 = this.world.getProperty( cx, cy - 1 );
            let pr2 = this.world.getProperty( cx + 1, cy );
            let pr3 = this.world.getProperty( cx, cy + 1 );
            let pr4 = this.world.getProperty( cx - 1, cy );

            //log(checkList[pr1],checkList[pr2],checkList[pr3],checkList[pr4]);
            if ( ( pr1.wall & _gameMap__WEBPACK_IMPORTED_MODULE_1__["default"].BLOCK_PASS ) == 0 && ( ignoreReveal || pr1.revealed ) && !check( pr1 ) && !this.world.entityManager.getEntity( cx, cy - 1 ) ) {
                setCheck( pr1, true );
                stack.push( [cx, cy - 1, pr] );
            }
            if ( ( pr2.wall & _gameMap__WEBPACK_IMPORTED_MODULE_1__["default"].BLOCK_PASS ) == 0 && ( ignoreReveal || pr2.revealed ) && !check( pr2 ) && !this.world.entityManager.getEntity( cx + 1, cy ) ) {
                setCheck( pr2, true );
                stack.push( [cx + 1, cy, pr] );
            }
            if ( ( pr3.wall & _gameMap__WEBPACK_IMPORTED_MODULE_1__["default"].BLOCK_PASS ) == 0 && ( ignoreReveal || pr3.revealed ) && !check( pr3 ) && !this.world.entityManager.getEntity( cx, cy + 1 ) ) {
                setCheck( pr3, true );
                stack.push( [cx, cy + 1, pr] );
            }
            if ( ( pr4.wall & _gameMap__WEBPACK_IMPORTED_MODULE_1__["default"].BLOCK_PASS ) == 0 && ( ignoreReveal || pr4.revealed ) && !check( pr4 ) && !this.world.entityManager.getEntity( cx - 1, cy ) ) {
                setCheck( pr4, true );
                stack.push( [cx - 1, cy, pr] );
            }
        };
	
        // 시작칸을 체크하고 시작한다
        setCheck( startPr, true );
        spread( x, y, null, stack );
        //log("------------검색시작---------------");
        let forceStop;

        while ( !forceStop && !canReachTarget && stack.length > 0 ) {
            step = step + 1;
            //log("단계",step);
            let oldStack = stack;

            stack = [];
            for ( let i in oldStack ) {
                let v = oldStack[i];

                if ( spread( v[0], v[1], v[2], stack ) ) {
                    break;
                }
            }
            //log("단계결과",stack.length);
        }

        // 스텝을 역으로 추적한다
        let [path, path2] = [[], []];

        if ( canReachTarget ) {
            console.log( "골인 가능" );
            pr = endPr;
        } else {
            pr = nearestPr;
            console.log( "골인 불가능",pr.x,pr.y );
        }
        console.log( "스탭의 최종결과",step );
        console.log( pr.x,pr.y );
        path2.push( pr );
        do {
            pr = floorFrom.get( pr );
            path2.push( pr );
        } while ( !( pr == null || ( pr.x == x && pr.y == y ) ) );
        //테이블 뒤집기
        //log(path2.length,path2[4]);
        for ( let i = path2.length - 2; i >= 0; i-- ) {
            path.push( path2[i] );
        }

        //log("길찾기 결과");
        //for (let i in path) {
        //let v = path[i];
        //log(v.x,v.y);
        //}
        return path;
    }



    //-------------------------------------------------------------------------------------------------------------------
    // 흩뿌릴 위치 구하기
    //-------------------------------------------------------------------------------------------------------------------

    getSplashFloor( x, y, numOfSplash ) {
        let splashList = [];
        let [, floor] = this.findNearestFloor( x, y, x, y );
        let sortedFloor = [];

        for ( let i in floor ) {
            let v = floor[i];
            let dist = Math.abs( v.x - x ) + Math.abs( v.y - y );

            sortedFloor.push( [dist, v] );
        }
        sortedFloor.sort( ( a, b ) => a[0] - b[0] );
        //log("흩뿌릴 위치 찾기",x,y);
        for ( let i in sortedFloor ) {
            let v = sortedFloor[i];

            // 가까운 거리에서부터
            if ( this.world.map.visibilityTileChecker.canBeSeen( x, y, v[1].x, v[1].y, 1 )[0] == 0 ) {
                splashList.push( v[1] );
                if ( splashList.length >= numOfSplash ) {
                    break;
                }
                //log("거리",v[1],v[2].x,v[2].y);
            }
        }
        // 뿌릴자리가 모자라면 자기 자리
        if ( splashList.length < numOfSplash ) {
            for ( let i = 1; i <= numOfSplash; i++ ) {
                splashList.push( sortedFloor[0][1] );
            }
        }

        return splashList;
    }



    //-------------------------------------------------------------------------------------------------------------------
    // 소환할 위치 구하기
    // 자리가 부족할 수 있다는 것에 주의
    //-------------------------------------------------------------------------------------------------------------------

    getSummonFloor( x, y, numOfSummon ) {
        let splashList = [];
        let [, floor] = this.findNearestFloor( x, y, x, y );
        let sortedFloor = [];

        for ( let i in floor ) {
            let v = floor[i];
            let dist = Math.abs( v.x - x ) + Math.abs( v.y - y );

            sortedFloor.push( [dist, v] );
        }
        sortedFloor.sort( ( a, b ) => a[0] - b[0] );
        for ( let i in sortedFloor ) {
            let v = sortedFloor[i];

            // 가까운 거리에서부터
            if ( !this.world.entityManager.getEntity( v[1].x, v[1].y ) ) {
                splashList.push( v[1] );
                if ( splashList.length >= numOfSummon ) {
                    break;
                }
            }
        }

        return splashList;
    }
}



/***/ }),

/***/ "./games/Avalonika/src/world/sightManager.js":
/*!***************************************************!*\
  !*** ./games/Avalonika/src/world/sightManager.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SightManager)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _lib_visibilityTile__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @lib/visibilityTile */ "./engine/src/lib/visibilityTile.js");
/* harmony import */ var _lib_shaderHelper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @lib/shaderHelper */ "./engine/src/lib/shaderHelper.js");
/* harmony import */ var _gameMap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./gameMap */ "./games/Avalonika/src/world/gameMap.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../global */ "./games/Avalonika/src/global.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ "./games/Avalonika/src/config.js");
/* harmony import */ var _world__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./world */ "./games/Avalonika/src/world/world.js");










/*
Timer.delayedCall(0,function();
	World.shadowMaskTexture = ShaderHelper.getUpscaledTexture("shadowMask.png",false,{format:TextureBase.RGBA5551,wrap:TextureBase.REPEAT});
end);
*/

const sightTexture = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "sight.png",false,{ format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGB565 } );

function idToXy( id ) {
    if ( id != null ) {
        let tx, ty;

        tx = id  % _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.tilePerRow;
        ty = Math.floor( id / _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.tilePerRow );

        return [tx,ty];
    } else {
        return null;
    }
}


//-------------------------------------------------------------------------------------------------------------------
// 시야 처리
//-------------------------------------------------------------------------------------------------------------------
// 원본메시 1234 확대한 타일 5678이고 방향에 따라 조합한다

const idxSet = [];

idxSet[1] = [0, 4, 2, 4, 6, 23];
idxSet[2] = [5, 1, 7, 1, 3, 7];
idxSet[4] = [0, 1, 4, 1, 5, 4];
idxSet[8] = [6, 7, 2, 7, 3, 2];
idxSet[1 + 4] = [0, 1, 2, 1, 5, 2, 2, 5, 6, 5, 7, 6];
idxSet[1 + 8] = [0, 3, 2, 0, 4, 7, 0, 7, 3, 4, 5, 7];
idxSet[2 + 4] = [6, 4, 7, 4, 0, 3, 4, 3, 7, 0, 1, 3];
idxSet[2 + 8] = [4, 5, 6, 6, 5, 1, 6, 1, 2, 1, 3, 2];


/**
 * 
 * @this SightManager
 *
 */
function initShaders() {
    const maskTexture = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowMaskTextureName );
    const baseTexture = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.tileTextureName );
    const fogTexture = this.visibilityTexture;
    const lightTexture = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "Light.png", false, { format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA5551 } );

    _lib_shaderHelper__WEBPACK_IMPORTED_MODULE_2__["default"].getShader( "mask" )
        .setTexture( "maskSampler", maskTexture )
        .setTexture( "baseSampler", baseTexture )
        .setConstant( "texSize", baseTexture.size );
    _lib_shaderHelper__WEBPACK_IMPORTED_MODULE_2__["default"].getShader( "tileMap" )
        .setTexture( "baseSampler", baseTexture )
        .setTexture( "fogSampler", fogTexture )
        .setConstant( "texSize", baseTexture.size );
    _lib_shaderHelper__WEBPACK_IMPORTED_MODULE_2__["default"].getShader( "light" )
        .setTexture( "baseSampler", lightTexture )
        .setTexture( "fogSampler", fogTexture );

    maskTexture.waitEvents( [_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.LOADED,[_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.LOADED,baseTexture]], () => {
        console.log( "텍스쳐 모두 로딩했음" );
        this.invalidateEye();
    } );
    maskTexture.eventToPromise( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.LOADED ).then( () => {
        console.log( "이런식으로 이벤트를..." );
    } );
}


class SightManager extends _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Component {
    /**
     *Creates an instance of SightManager.
     * @param {World} world
     * @memberof SightManager
     */
    onAdded( world ) {
        this.world = world;
        this.__revealCache = undefined;
        this.visibilityTexture = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.RenderTarget( _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowWidth, _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowHeight );
        initShaders.call( this );
    }

    cacheReveal2( x, y, v ) {
        // 7 6 5
        // 4   3
        // 2 1 0
        const rc = this.__revealCache[x + "," + y];

        this.__revealCache[x + "," + y] = ( rc != null ? rc : 0 ) | v;
    }

    cacheReveal3( x, y ) {
        const c = this.__revealCache;

        c[x + "," + y] = (
            ( c[( x - 1 ) + "," + ( y - 1 )] << 0 ? 1 << 7 : 0 ) |
            ( c[x + "," + ( y - 1 )] << 1 ? 1 << 6 : 0 ) |
            ( c[( x + 1 ) + "," + ( y - 1 )] << 2 ? 1 << 5 : 0 ) |
            ( c[( x - 1 ) + "," + y] << 3 ? 1 << 4 : 0 ) |
            ( c[( x + 1 ) + "," + y] << 4 ? 1 << 3 : 0 ) |
            ( c[( x - 1 ) + "," + ( y + 1 )] << 5 ? 1 << 2 : 0 ) |
            ( c[x + "," + ( y + 1 )] << 6 ? 1 << 1 : 0 ) |
            ( c[( x + 1 ) + "," + ( y + 1 )] << 7 ? 1 << 0 : 0 ) );
    }


    // 새롭게 나타난 타일
    revealTile( x, y, forceReveal ) {
        const pr = this.world.getProperty( x, y );

        if ( ( forceReveal == true || !pr.revealed ) && x >= 0 && x < this.world.map.width && y >= 0 && y < this.world.map.height ) {
            if ( pr.revealed == false ) this.cacheReveal3( x, y );
            pr.revealed = true;
            //this.__revealCache[x + "," + y] = 0xff;
            this.cacheReveal2( x - 1, y - 1,1 << 0 );
            this.cacheReveal2( x, y - 1, 1 << 0 | 1 << 1 | 1 << 2 );
            this.cacheReveal2( x + 1, y - 1,1 << 2 );
            this.cacheReveal2( x - 1, y,1 << 3 | 1 << 0 | 1 << 5 );
            this.cacheReveal2( x + 1, y,1 << 4 | 1 << 7 | 1 << 2 );
            this.cacheReveal2( x - 1, y + 1,1 << 2 );
            this.cacheReveal2( x, y + 1,1 << 6 | 1 << 7 | 1 << 5 );
            this.cacheReveal2( x + 1, y + 1,1 << 5 );
            _global__WEBPACK_IMPORTED_MODULE_4__["default"]["interface"].autoMap.drawTile( x, y );
            const [tx, ty] = idToXy( this.world.map.getData( x, y ) );
            let tx2, ty2;

            if ( pr.below ) {
                [tx2, ty2] = idToXy( pr.below + 1 );
            }

            let [c1, c2, c3, c4] = this.world.map.getTileLightMap( x, y );

            if ( pr.shadow == 0 ) {
                // AO 처리
                const _UL = this.world.getProperty( x - 1, y - 1 ).shadow;
                const _U = this.world.getProperty( x, y - 1 ).shadow;
                const _UR = this.world.getProperty( x + 1, y - 1 ).shadow;
                const _L = this.world.getProperty( x - 1, y ).shadow;
                const _R = this.world.getProperty( x + 1, y ).shadow;
                const _DL = this.world.getProperty( x - 1, y + 1 ).shadow;
                const _D = this.world.getProperty( x, y + 1 ).shadow;
                const _DR = this.world.getProperty( x + 1, y + 1 ).shadow;

                if ( _UL > 0 || _U > 0 || _L > 0 ) {
                    c1 = ( c1 >> 1 ) & 0x7f7f7f;
                }

                if ( _UR > 0 || _U > 0 || _R > 0 ) {
                    c2 = ( c2 >> 1 ) & 0x7f7f7f;
                }

                if ( _DL > 0 || _D > 0 || _L > 0 ) {
                    c3 = ( c3 >> 1 ) & 0x7f7f7f;
                }

                if ( _DR > 0 || _D > 0 || _R > 0 ) {
                    c4 = ( c4 >> 1 ) & 0x7f7f7f;
                }
                /*
                if (_U>0) { 
                    c1=(c1>>3)&0x1f1f1f;
                    c2=(c2>>3)&0x1f1f1f;
                }
                */
            }

            //c1 = 0xffffff;
            // c2 = null;
            if ( pr.below ) {
                this.world.belowTileMap.setTile( x, y, tx2, ty2, null, c1, 1, c2, 1, c3, 1, c4, 1 );
            }

            if ( pr.shadow > 0 ) {
                this.world.wallTileMap.setTile( x, y, tx, ty, null, c1, 1, c2, 1, c3, 1, c4, 1 );
            } else {
                this.world.floorTileMap.setTile( x, y, tx, ty, null, c1, 1, c2, 1, c3, 1, c4, 1 );
            }

            for ( const i in this.world.map.lightList ) {
                const v = this.world.map.lightList[i];

                if ( v.x == x && v.y == y ) {
                    const m = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh();
                    //let [w, h] = [tex.width, tex.height];
                    const r = 60;
                    const c = v.color;
                    const a = 0.5;

                    m.setVertexArray( [-r, -r, r, -r, -r, r, r, r] );
                    m.setTextureCoordinateArray( [0, 0, 1, 0, 0, 1, 1, 1] );
                    m.setIndexArray( [0, 1, 2, 1, 3, 2] );
                    m.setColorArray( [c, a, c, a, c, a, c, a] );
                    m.position = this.world.tileCenterToWorld( v.x, v.y );
                    m.setShader( _lib_shaderHelper__WEBPACK_IMPORTED_MODULE_2__["default"].getShader( "light" ) );
                    this.world.lightLayer.addChild( m );
                    m.setBlendMode( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite.BlendModes.ADD );
                    m.motionBlur = false;
                    v.mesh = m;
                }
            }
        }
    }


    // eyeX,eyeY에 광원이 있다고 보고 그림자 메시를 구해낸다.
    // 시야처리에 사용함
    // eyeX,eyeY는 world좌표임. 나머지는 타일좌표

    /**
     *
     *
     * @param {number} eyeX
     * @param {number} eyeY
     * @param {number} radius
     * @param {function=} checkFunc
     * @param {boolean=} skipTable
     * @returns {{mesh:Mesh,visibleTileList:*}}
     * @memberof SightManager
     */
    getShadowMesh( eyeX, eyeY, radius, checkFunc = null, skipTable = false ) {
        const custom = [];
        const idx = [];
        const visibleTileList = [];
        const [w, h] = [_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.width, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.height];
        const [tw, th] = [_config__WEBPACK_IMPORTED_MODULE_5__["default"].World.tileWidth, _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.tileHeight];
        // let sx = 1 / this.world.zoom; // 핀치줌
        // let sy = 1 / this.world.zoom;
        const eyeTileX = Math.floor( eyeX / _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.tileWidth );
        const eyeTileY = Math.floor( eyeY / _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.tileHeight );
        const r = Math.floor( radius + 1 );
        const { x: viewX1, y: viewY1 } = this.world.worldToTile( this.world.viewX - w / 2 * this.world.zoom, this.world.viewY - h / 2 * this.world.zoom );
        const [viewX2, viewY2] = [viewX1 + Math.floor( w * this.world.zoom / tw ) + 1, viewY1 + Math.floor( h * this.world.zoom / th ) + 1];
        const sightX1 = Math.max( 0, Math.max( viewX1, eyeTileX - r ) );
        const sightX2 = Math.min( this.world.map.width - 1, Math.min( viewX2, eyeTileX + r ) );
        const sightY1 = Math.max( 0, Math.max( viewY1, eyeTileY - r ) );
        const sightY2 = Math.min( this.world.map.height - 1, Math.min( viewY2, eyeTileY + r ) );

        checkFunc = checkFunc || this.world.map.getVisibility.bind( this.world.map );

        for ( let y = sightY1; y <= sightY2; y++ ) {
            for ( let x = sightX1; x <= sightX2; x++ ) {
                const dist = ( x - eyeTileX ) ** 2 + ( y - eyeTileY ) ** 2;

                if ( dist != 0 && dist < r ** 2 ) {
                    const v = checkFunc( x, y );
                    // 리턴값
                    // 0 보이고 갈수 있음 
                    // 1 보이고 그 위치는 벽  
                    // 2 가려져서 보이지 않음
                    const pr = this.world.getProperty( x, y );

                    if ( !skipTable && v <= 1 ) {
                        visibleTileList.push( pr );
                    }

                    if ( ( pr.wall & _gameMap__WEBPACK_IMPORTED_MODULE_3__["default"].BLOCK_VISION ) != 0 ) {
                        const [tx, ty] = [x * tw, y * th];
                        const baseIndex = custom.length / 3;

                        custom.push(
                            // 원본 타일 버텍스
                            tx, ty, 0,
                            tx + tw, ty, 0,
                            tx, ty + th, 0,
                            tx + tw, ty + th, 0,
                            // 원본 타일 버텍스
                            tx, ty, 1, 
                            tx + tw, ty, 1,
                            tx, ty + th, 1, 
                            tx + tw, ty + th, 1
                        );//8*2개씩
                        idx.push(
                            baseIndex + 0, baseIndex + 1, baseIndex + 2,
                            baseIndex + 1, baseIndex + 3, baseIndex + 2,
                            baseIndex + 4, baseIndex + 1, baseIndex + 0,
                            baseIndex + 4, baseIndex + 5, baseIndex + 1,
                            baseIndex + 1, baseIndex + 5, baseIndex + 7,
                            baseIndex + 1, baseIndex + 7, baseIndex + 3,
                            baseIndex + 2, baseIndex + 3, baseIndex + 7,
                            baseIndex + 2, baseIndex + 7, baseIndex + 6,
                            baseIndex + 4, baseIndex + 0, baseIndex + 2,
                            baseIndex + 4, baseIndex + 2, baseIndex + 6,
                        );
                    }
                }
            }
        }

        const m = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh();

        //m.setVertexArray(custom);
        m.setIndexArray( idx );
        m.setGenericArray( "custom", custom, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh.ArrayTypes.FLOAT32, 3, false );

        return { mesh: m, visibleTileList: visibleTileList };
    }

    computeVisibility() { //viewX1,viewY1,viewX2,viewY2,radius) {
        // viewX1,viewY1,viewX2,viewY2 보여지는 영역의 타일좌표
        // radius 시야 범위. view범위보다 작음. 타일 단위
        const [eyeX, eyeY] = [this.world.eyeX, this.world.eyeY]; // 시야처리 중심점

        if ( eyeX == null || eyeY == null ) {
            // 아직 월드가 준비가 안된 경우이다
            return;
        }
        const zoomX = 1 / this.world.zoom; // 핀치줌
        const zoomY = 1 / this.world.zoom;
        const [tileWidth, tileHeight] = [_config__WEBPACK_IMPORTED_MODULE_5__["default"].World.tileWidth, _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.tileHeight];
        const eyeTileX = Math.floor( eyeX / _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.tileWidth );
        const eyeTileY = Math.floor( eyeY / _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.tileHeight );
        const radius = Math.floor( this.world.viewRadius * 100 + 0.005 ) / 100;
        let { x: viewX1, y: viewY1 } = this.world.worldToTile( this.world.viewX - _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.width / 2 * this.world.zoom, this.world.viewY - _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.height / 2 * this.world.zoom );
        let [viewX2, viewY2] = [viewX1 + Math.floor( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.width * this.world.zoom / tileWidth ), viewY1 + Math.floor( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.height * this.world.zoom / tileHeight )];

        viewX1 = viewX1 - 1;
        viewY1 = viewY1 - 1;
        viewX2 = viewX2 + 1;
        viewY2 = viewY2 + 1;
        const profileBegin = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.now();
        let shadowMesh, wallMesh, floorMesh;
        let cache = this.__visibilityCache;

        if ( cache &&
            cache.eyeTileX == eyeTileX && cache.eyeTileY == eyeTileY &&
            cache.viewX1 == viewX1 && cache.viewY1 == viewY1 && cache.viewX2 == viewX2 && cache.viewY2 == viewY2 && cache.radius == Math.floor( radius ) ) {
            // 지난번에 계산한 것과 범위와 시점이 모두 일치함
            // console.log( "완전 캐시히트" );
            wallMesh = cache.mWall;
            floorMesh = cache.mFloor;
            shadowMesh = cache.m;
            // ({ mesh: shadowMesh } = this.getShadowMesh(eyeX, eyeY, radius, null, true));
        } else {
            const wallVtx = [];
            const wallUv = [];
            const wallIdx = [];
            const wallVc = [];

            const floorVtx = [];
            const floorUv = [];
            const floorIdx = [];
            const floorVc = [];
		
            let useCachedVisibility;
            let cachedVisibility;

            if ( cache && cache.eyeTileX == eyeTileX && cache.eyeTileY == eyeTileY && cache.radius == radius ) {
                // 시야와 범위가 같은 경우
                // console.log( "캐시히트", Timer.now() - profileBegin );
                useCachedVisibility = true;
                cachedVisibility = cache.visibility;
                //({ mesh: shadowMesh } = this.getShadowMesh(eyeX, eyeY, radius, null, true));
                shadowMesh = cache.m;
            } else {
                let visibleTileList;

                // 아래 행에서 2ms 정도 걸리고 있음
                // console.log( this.world.map.visibilityTileChecker.radius,radius );
                this.world.map.visibilityTileChecker.getResult( eyeTileX, eyeTileY, radius );
                // console.log( "0-1 여기까지", Timer.now() - profileBegin );
                ( { mesh: shadowMesh, visibleTileList } = this.getShadowMesh( eyeX, eyeY, radius ) );
                // console.log( "0-2 여기까지", Timer.now() - profileBegin );
                console.assert( shadowMesh.indices );

                for ( const i in visibleTileList ) {
                    const pr = visibleTileList[i];

                    this.revealTile( pr.x, pr.y );
                }

                cachedVisibility = {};
                // console.log( "0-3 여기까지", Timer.now() - profileBegin );
            }

            // console.log( "1 여기까지", Timer.now() - profileBegin );
            // 블록에 블렌딩 효과를 만드는 부분
            // 화면에 보이면 모두 처리를 해야한다.
            this.waterAmount = 0;

            for ( let y = viewY1; y <= viewY2; y++ ) {
                for ( let x = viewX1; x <= viewX2; x++ ) {
                    const pr = this.world.map.getProperty( x, y );

                    if ( pr == null ) break;

                    if ( pr.water && !pr.envSound ) {
                        // 물사운드를 내기 위해서 물의 수를 카운트함
                        const dist = _global__WEBPACK_IMPORTED_MODULE_4__["default"].world.getDistance( x, y, eyeTileX, eyeTileY );

                        this.waterAmount = this.waterAmount + ( 1 / ( dist * dist ) );
                    }

                    if ( !!pr.revealed == false ) {
                        // 안까진 타일에 할 일은 없다
                    } else {
                        const [tx, ty] = [x * tileWidth, y * tileHeight];
                        let visionBlend = 0x2f;
                        let revealBlend;
                        // const _rc = this.__revealCache[x + "," + y];
                        // revealBlend = _rc != null ? _rc : 0x2f;
                        const _rc = this.__revealCache[x + "," + y];

                        revealBlend = _gameMap__WEBPACK_IMPORTED_MODULE_3__["default"].tileBlendTable[_rc != null ? _rc : 0x00];
                        const checkFunc = this.world.map.getVisibility.bind( this.world.map );

                        if ( checkFunc( x, y ) <= 1 ) {
                            if ( useCachedVisibility ) {
                                const cv = cachedVisibility[x + "," + y];

                                visionBlend = cv != null ? cv : 0x00;
                            } else {
                                visionBlend = _gameMap__WEBPACK_IMPORTED_MODULE_3__["default"].tileBlendTable[(
                                    ( checkFunc( x - 1, y - 1 ) <= 1 ? 1 << 7 : 0 ) |
                                    ( checkFunc( x, y - 1 ) <= 1 ? 1 << 6 : 0 ) |
                                    ( checkFunc( x + 1, y - 1 ) <= 1 ? 1 << 5 : 0 ) |
                                    ( checkFunc( x - 1, y ) <= 1 ? 1 << 4 : 0 ) |
                                    ( checkFunc( x + 1, y ) <= 1 ? 1 << 3 : 0 ) |
                                    ( checkFunc( x - 1, y + 1 ) <= 1 ? 1 << 2 : 0 ) |
                                    ( checkFunc( x, y + 1 ) <= 1 ? 1 << 1 : 0 ) |
                                    ( checkFunc( x + 1, y + 1 ) <= 1 ? 1 << 0 : 0 ) )];
                                cachedVisibility[x + "," + y] = visionBlend;
                            }
                        }

                        const uvx1 = visionBlend & 0x0f;
                        const uvy1 = visionBlend >> 4;
                        const uvx2 = revealBlend & 0x0f;
                        const uvy2 = revealBlend >> 4;

                        if ( pr.shadow > 0 && ( revealBlend < 0x2f ) ) {
                            const [ , tileUv, , ] = this.world.wallTileMap.getArray( x, y );
                            const baseIndex0 = wallVtx.length / 2;

                            wallVtx.push(
                                tx, ty,
                                tx + tileWidth, ty,
                                tx, ty + tileHeight,
                                tx + tileWidth, ty + tileHeight,
                            );
                            wallUv.push(
                                tileUv[0], tileUv[1],
                                tileUv[2], tileUv[3],
                                tileUv[4], tileUv[5],
                                tileUv[6], tileUv[7],
                            );
                            wallIdx.push(
                                baseIndex0 + 0, baseIndex0 + 1, baseIndex0 + 2,
                                baseIndex0 + 1, baseIndex0 + 3, baseIndex0 + 2,
                            );
                            // uvx1 = 0;
                            // uvy1 = 0;
                            // uvx2 = 0;
                            // uvy2 = 0;
                            const vc = ( ( uvx1 * 8 ) << 24 ) | ( ( uvy1 * 8 ) << 16 ) | ( ( uvx2 * 8 ) << 8 ) | ( uvy2 * 8 );

                            // wallVc.push(
                            //     vc,
                            //     vc + ( 8 << 24 ) + ( 8 << 8 ),
                            //     vc + ( 8 << 16 ) + 8,
                            //     vc + ( 8 << 24 ) + ( 8 << 8 ) + ( 8 << 16 ) + 8,
                            // );
                            // wallVc.push(
                            //     uvx1 * 8 , uvy1 * 8,uvx2 * 8,uvy2 * 8,
                            //     uvx1 * 8 + 8, uvy1 * 8,uvx2 * 8 + 8,uvy2 * 8,
                            //     uvx1 * 8 , uvy1 * 8 + 8,uvx2 * 8,uvy2 * 8 + 8,
                            //     uvx1 * 8 + 8 , uvy1 * 8 + 8,uvx2 * 8 + 8,uvy2 * 8 + 8,
                            // );
                            wallVc.push(
                                uvx1 * 18 + 1,  uvy1 * 26 + 1,  uvx2 * 18 + 1,  uvy2 * 26 + 1,
                                uvx1 * 18 + 17, uvy1 * 26 + 1,  uvx2 * 18 + 17, uvy2 * 26 + 1,
                                uvx1 * 18 + 1,  uvy1 * 26 + 25, uvx2 * 18 + 1,  uvy2 * 26 + 25,
                                uvx1 * 18 + 17, uvy1 * 26 + 25, uvx2 * 18 + 17, uvy2 * 26 + 25,
                            );
                        } else {
                            let tileUv;

                            if ( pr.shadow > 0 ) {
                                [ , tileUv, , ] = this.world.wallTileMap.getArray( x, y );
                            } else {
                                [ , tileUv, , ] = this.world.floorTileMap.getArray( x, y );
                            }

                            if ( tileUv != null && ( revealBlend > 0x00 && revealBlend < 0x2f ) ) {
                                const baseIndex0 = floorVtx.length / 2;

                                floorVtx.push(
                                    tx, ty,
                                    tx + tileWidth, ty,
                                    tx, ty + tileHeight,
                                    tx + tileWidth, ty + tileHeight,
                                );
                                floorUv.push(
                                    tileUv[0], tileUv[1],
                                    tileUv[2], tileUv[3],
                                    tileUv[4], tileUv[5],
                                    tileUv[6], tileUv[7],
                                );
                                floorIdx.push(
                                    baseIndex0 + 0, baseIndex0 + 1, baseIndex0 + 2,
                                    baseIndex0 + 1, baseIndex0 + 3, baseIndex0 + 2,
                                );
                                // const vc = ( ( uvx1 * 8 ) << 24 ) | ( ( uvy1 * 8 ) << 16 ) | ( ( uvx2 * 8 ) << 8 ) | ( uvy2 * 8 );

                                floorVc.push(
                                    uvx1 * 8 , uvy1 * 8,uvx2 * 8,uvy2 * 8,
                                    uvx1 * 8 + 8, uvy1 * 8,uvx2 * 8 + 8,uvy2 * 8,
                                    uvx1 * 8 , uvy1 * 8 + 8,uvx2 * 8,uvy2 * 8 + 8,
                                    uvx1 * 8 + 8 , uvy1 * 8 + 8,uvx2 * 8 + 8,uvy2 * 8 + 8,
                                );
                            }
                        }
                    }
                }
            }

            wallMesh = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh();
            // wallMesh.setBlendMode( Sprite.ONE,Sprite.ZERO );
            wallMesh.setVertexArray( wallVtx );
            wallMesh.setTextureCoordinateArray( wallUv );
            wallMesh.setIndexArray( wallIdx );
            //mWall.setColorArray(vcWall);
            wallMesh.setGenericArray( "uvuv", wallVc, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh.ArrayTypes.UINT16, 4, false );
            floorMesh = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh();
            //mFloor.setBlendMode(Sprite.ONE,Sprite.ZERO);
            floorMesh.setVertexArray( floorVtx );
            floorMesh.setTextureCoordinateArray( floorUv );
            floorMesh.setIndexArray( floorIdx );
            //mFloor.setColorArray(vcFloor);
            floorMesh.setGenericArray( "uvuv", floorVc, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh.ArrayTypes.UINT16, 4, false );
            this.__visibilityCache = {};
            cache = this.__visibilityCache;
            cache.visibility = cachedVisibility;
            cache.eyeTileX = eyeTileX;
            cache.eyeTileY = eyeTileY;
            cache.viewX1 = viewX1;
            cache.viewY1 = viewY1;
            cache.viewX2 = viewX2;
            cache.viewY2 = viewY2;
            cache.radius = Math.floor( radius );
            cache.m = shadowMesh;
            cache.mWall = wallMesh;
            cache.mFloor = floorMesh;
            // console.log( "시야처리에 걸린 시간", ( Timer.now() - profileBegin ) );
        }

        shadowMesh.setColorMultiplier( 0, 1, 1 );
        shadowMesh.setBlendMode( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite.BlendModes.MULTIPLY );
        
        let sx1, sy1;

        sx1 = ( _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowWidth / _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.width * zoomX );
        sy1 = ( _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowHeight / _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.height * zoomY );
        const ax = ( _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowWidth / 2 - Math.floor( this.world.viewX ) * _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowScale );
        const ay = ( _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowHeight / 2 - Math.floor( this.world.viewY ) * _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowScale );

        shadowMesh.setScale( _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowScale );
        wallMesh.setScale( _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowScale );
        floorMesh.setScale( _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowScale );
        shadowMesh.setPosition( ax, ay );
        wallMesh.setPosition( ax, ay );
        floorMesh.setPosition( ax, ay );
        const radiusBitmap = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Mesh();

        {
            radiusBitmap.setColorArray( [0xffffff, 1, 0xffffff, 1, 0xffffff, 1, 0xffffff, 1] );
            radiusBitmap.setIndexArray( [0, 1, 2, 1, 3, 2] );
            radiusBitmap.setTexture( sightTexture );
            const w = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.width / zoomX;
            const h = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.height / zoomY;

            radiusBitmap.setVertexArray( [-w / 2, -h / 2, w / 2, -h / 2, -w / 2, h / 2, w / 2, h / 2] );
            //radiusBitmap.setAnchorPoint(0.5, 0.5);
            radiusBitmap.setScale( _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowScale );
            radiusBitmap.setPosition( _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowWidth / 2, _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowHeight / 2 );
            const tsx = _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.tileWidth * ( radius * 0.9 - 1 ) / sightTexture.width;
            const tsy = _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.tileHeight * ( radius * 0.9 - 1 ) / sightTexture.height;
            const scaleAdjustX = _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.tileHeight / _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.tileWidth / tsx / 2 / 2;
            const scaleAdjustY = _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.tileWidth / _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.tileHeight / tsy / 2;
            const tcx = ( -this.world.eyeX + this.world.viewX ) * scaleAdjustX + ( sightTexture.width / 2 );
            const tcy = ( -this.world.eyeY + this.world.viewY ) * scaleAdjustY + ( sightTexture.height / 2 );
            const tw = this.world.viewWidth / tsx / sx1 * 2;
            const th = this.world.viewHeight / tsy / sy1 * 2;

            radiusBitmap.setTextureCoordinateArray( [
                tcx - tw / 2, tcy - th / 2, tcx + tw / 2, tcy - th / 2,
                tcx - tw / 2, tcy + th / 2, tcx + tw / 2, tcy + th / 2,
            ] );
            radiusBitmap.setBlendMode( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite.BlendModes.MULTIPLY );
        }
	
        // b 값을 낮추면 시야 범위가 일정하게 밝아진다.
        this.visibilityTexture.clear( 0xffffff, 1.0 );
        // m 은 wall을 주욱 늘린 메시이다
        // 색은 블랙
        floorMesh.setShader( _lib_shaderHelper__WEBPACK_IMPORTED_MODULE_2__["default"].getShader( "mask" ) );
        // 바닥메시
        _lib_shaderHelper__WEBPACK_IMPORTED_MODULE_2__["default"].getShader( "mask" ).setConstant( "mask", 1.0 );
        this.visibilityTexture.draw( floorMesh );

        //m.setShader();
        {
            let ex = ( eyeX - Math.floor( this.world.viewX ) ) / _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowWidth;
            let ey = ( eyeY - Math.floor( this.world.viewY ) ) / _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowHeight;

            ex = ex * 2 * _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowScale;
            ey = ey * 2 * _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowScale;
            //log(ex,ey);
            shadowMesh.setShader( _lib_shaderHelper__WEBPACK_IMPORTED_MODULE_2__["default"].getShader( "shadow" ) );
            _lib_shaderHelper__WEBPACK_IMPORTED_MODULE_2__["default"].getShader( "shadow" ).setConstant( "eyePos", [ex, ey, 0, 0] );
        }

        //시야메시를 그린다
        this.visibilityTexture.draw( shadowMesh );
        
        //원형감쇄이미지를 그린다
        this.visibilityTexture.draw( radiusBitmap );
        
        _lib_shaderHelper__WEBPACK_IMPORTED_MODULE_2__["default"].getShader( "mask" ).setConstant( "mask", 0.0 );

        //벽을 그린다
        wallMesh.setShader( _lib_shaderHelper__WEBPACK_IMPORTED_MODULE_2__["default"].getShader( "mask" ) );
        _lib_shaderHelper__WEBPACK_IMPORTED_MODULE_2__["default"].getShader( "mask" ).setTexture( "maskSampler", new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowMaskTextureName ) );

        this.visibilityTexture.draw( wallMesh );

        // R=시야 G=그림자 B=마스킹
        if ( false ) {}
    }
               
    invalidateVisibility() {
        this.__visibilityCache = null;
    }


    //-------------------------------------------------------------------------------------------------------------------
    // 시야의 오브젝트 보이기 숨기기 
    //-------------------------------------------------------------------------------------------------------------------

    refreshEntityVisibility() {
        this.world.entityLayer.sortChildren();

        for ( const k in this.world.entityManager.entitiesByXy ) {
            const v = this.world.entityManager.entitiesByXy[k];

            if ( v.visibleTw ) {
                v.visibleTw.stop();
            }

            if ( ( this.world.map.getVisibility( v.tileX, v.tileY ) & _gameMap__WEBPACK_IMPORTED_MODULE_3__["default"].BLOCK_VISION ) != 0 ) {
                if ( v.isPlayer ) {
                    console.log( "플레이어가 안보임", v.tileX, v.tileY, this.world.map.getVisibility( v.tileX, v.tileY ) );
                }

                v.visibleTw = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( v, 200, { alpha: 0.0 }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.linear } )
                    .onComplete( () => {
                        v.setVisible( false );
                    } );
            } else {
                v.setVisible( true );
                v.visibleTw = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( v, 100, { alpha: 1.0 }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.linear } );
            }
        }

        for ( const k in this.world.entityManager.itemsByXy ) {
            const items = this.world.entityManager.itemsByXy[k];
            const item = items[items.length - 1];

            if ( item.visibleTw ) {
                item.visibleTw.stop();
            }

            if ( ( this.world.map.getVisibility( item.tileX, item.tileY ) & _gameMap__WEBPACK_IMPORTED_MODULE_3__["default"].BLOCK_VISION ) != 0 ) {
                //log("아이템숨김",item.tileX,item.tileY);
                item.visibleTw = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( item, 200, { alpha: 0.0 }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.linear } )
                    .onComplete( () => {
                        item.setVisible( false );
                    } );
            } else {
                //log("아이템보임",item.tileX,item.tileY);
                if ( !item.isVisible() ) {
                    item.setVisible( true );
                    item.visibleTw = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( item, 100, { alpha: 1.0 }, { ease: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.linear } );
                }
            }
        }

        // 라이트
        for ( const i in this.world.map.lightList ) {
            const v = this.world.map.lightList[i];

            if ( v.mesh ) {
                if ( ( this.world.map.getVisibility( v.x, v.y ) & _gameMap__WEBPACK_IMPORTED_MODULE_3__["default"].BLOCK_VISION ) != 0 ) {
                    v.mesh.removeFromParent();
                } else {
                    this.world.lightLayer.addChild( v.mesh );
                }
            }
        }
    }

    canBeSeen( x, y, wall ) {
        const { x: eyeTileX, y: eyeTileY } = this.world.worldToTile( this.world.eyeX, this.world.eyeY );

        if ( wall ) {
            const [r, rx, ry] = this.world.map.visibilityTileChecker.canBeSeen( eyeTileX, eyeTileY, x, y, wall );

            return [r == _lib_visibilityTile__WEBPACK_IMPORTED_MODULE_1__["default"].EMPTY, r, rx, ry];
        } else {
            // wall을 지정하지 않으면
            // 캐시된 시야 상태를 가지고 바로 돌려준다.
            // 부정확할 수 있음에 유의
            let [r, rx, ry] = [this.world.map.getVisibility( x, y ), x, y];

            if ( r != _lib_visibilityTile__WEBPACK_IMPORTED_MODULE_1__["default"].EMPTY ) {
                [r, rx, ry] = this.world.map.visibilityTileChecker.canBeSeen( eyeTileX, eyeTileY, x, y, _gameMap__WEBPACK_IMPORTED_MODULE_3__["default"].BLOCK_VISION );
            }

            return [r == _lib_visibilityTile__WEBPACK_IMPORTED_MODULE_1__["default"].EMPTY, r, rx, ry];
        }
    }

    canSee( x1, y1, x2, y2, wall ) {
        const [r, rx, ry] = this.world.map.visibilityTileChecker.canBeSeen(
            x1, y1, x2, y2, wall || _gameMap__WEBPACK_IMPORTED_MODULE_3__["default"].BLOCK_VISION );

        return [r == _lib_visibilityTile__WEBPACK_IMPORTED_MODULE_1__["default"].EMPTY, r, rx, ry];
    }


    //-------------------------------------------------------------------------------------------------------------------
    // 셰이더 갱신
    //-------------------------------------------------------------------------------------------------------------------

    updateShaderViewInfo() {
        const sx = 1 / this.world.zoom;
        const sy = 1 / this.world.zoom;

        const shadowWidth = _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowWidth / _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowScale;
        const shadowHeight = _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowHeight / _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowScale;
        const t = {
            // viewPos.xy viewSize.zw
            viewInfo: [
                //0.5 - (application.logicalRenderBounds.width / 2 / sx - Utils.frac(Utils.precision(this.world.viewX, 3)) + this.world.x) / CONFIG.World.shadowWidth * CONFIG.World.shadowScale,
                //0.5 - (application.logicalRenderBounds.height / 2 / sy + Utils.frac(Utils.precision(this.world.viewY, 3)) - this.world.y) / CONFIG.World.shadowHeight * CONFIG.World.shadowScale,
                0.5 - ( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.width / 2 / sx  + this.world.x ) / shadowWidth,
                0.5 - ( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.height / 2 / sy  - this.world.y ) / shadowHeight,
                _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.width / sx / shadowWidth,
                _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.height / sy / shadowHeight,
            ],
            color1: this.world.__envColor1,
            color2: this.world.__envColor2,
        };

        t.viewInfo[1] = -t.viewInfo[1] + 1;
        t.viewInfo[3] = -t.viewInfo[3];
        _lib_shaderHelper__WEBPACK_IMPORTED_MODULE_2__["default"].getShader( "tileMap" ).setConstants( t );
        _lib_shaderHelper__WEBPACK_IMPORTED_MODULE_2__["default"].getShader( "light" ).setConstants( t );
    }



    //-------------------------------------------------------------------------------------------------------------------
    // 화면 확대 축소
    //-------------------------------------------------------------------------------------------------------------------

    setZoom( zoom ) {
        const zoomMax = Math.min( _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.zoomMax, Math.min(
            _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowWidth / _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.width,
            _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.shadowHeight / _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.height ) );

        this.world.zoom = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.clamp( zoom, _config__WEBPACK_IMPORTED_MODULE_5__["default"].World.zoomMin, zoomMax );
        this.world.worldLayer.setScaleX( 1 / this.world.zoom );
        this.world.worldLayer.setScaleY( 1 / this.world.zoom );

        this.lastPos = [Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY];//this.viewX,this.viewY,this.eyeX,this.eyeY}
        this.moveViewTo( this.world.viewX, this.world.viewY );
        this.updateShaderViewInfo();
        _global__WEBPACK_IMPORTED_MODULE_4__["default"]["interface"].cursor.resetScale();

        return this.world.zoom;
    }

    getZoom() {
        return this.world.zoom;
    }


    //-------------------------------------------------------------------------------------------------------------------
    // View, Eye 이동
    //-------------------------------------------------------------------------------------------------------------------

    moveViewTo( px, py ) {
        //px=Math.floor(px);
        //py=Math.floor(py);
        console.assert( !Number.isNaN( px ) );
        // this.world.viewX = Math.floor( px );
        // this.world.viewY = Math.floor( py );
        this.world.viewX = px;
        this.world.viewY = py;
        const sx = 1 / this.world.zoom;
        const sy = 1 / this.world.zoom;
        const [x1, y1] = [px * sx - this.world.viewWidth / 2, py * sy - this.world.viewHeight / 2];
        /*
			this.worldLayer.setPosition(
				-Math.floor(x1+0.7),
				-Math.floor(y1+0.7);
			)
		*/
        const e = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "viewChanged" );

        e.viewX = px;
        e.viewY = py;
        this.world.dispatchEvent( e );
    }


    moveEyeTo( px, py ) {
        // px = Math.floor( px );
        // py = Math.floor( py );

        if ( this.world.eyeX != px || this.world.eyeY != py ) {
            this.world.eyeX = px;
            this.world.eyeY = py;
        }

        const e = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "eyeChanged" );

        e.eyeX = px;
        e.eyeY = py;
        this.world.dispatchEvent( e );
    }

    invalidateEye() {
        this.world.lastPos = [Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY];
        this.world.map.visibilityTileChecker.clearResult();
        this.world.map.visibilityTileChecker.getResult();
    }
}




/***/ }),

/***/ "./games/Avalonika/src/world/world.js":
/*!********************************************!*\
  !*** ./games/Avalonika/src/world/world.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ World)
/* harmony export */ });
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _entityManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./entityManager */ "./games/Avalonika/src/world/entityManager.js");
/* harmony import */ var _pathManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pathManager */ "./games/Avalonika/src/world/pathManager.js");
/* harmony import */ var _sightManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./sightManager */ "./games/Avalonika/src/world/sightManager.js");
/* harmony import */ var _gameMap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./gameMap */ "./games/Avalonika/src/world/gameMap.js");
/* harmony import */ var _proceduralMap_proceduralMap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../proceduralMap/proceduralMap */ "./games/Avalonika/src/proceduralMap/proceduralMap.js");
/* harmony import */ var _elemental__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./elemental */ "./games/Avalonika/src/world/elemental.js");
/* harmony import */ var _lib_random__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @lib/random */ "./engine/src/lib/random.js");
/* harmony import */ var _lib_colors__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @lib/colors */ "./engine/src/lib/colors.js");
/* harmony import */ var _entity_prop__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../entity/prop */ "./games/Avalonika/src/entity/prop.js");
/* harmony import */ var _entity_monster__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../entity/monster */ "./games/Avalonika/src/entity/monster.js");
/* harmony import */ var _entity_npc__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../entity/npc */ "./games/Avalonika/src/entity/npc.js");
/* harmony import */ var _entity_item__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../entity/item */ "./games/Avalonika/src/entity/item.js");
/* harmony import */ var _lib_shaderHelper__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @lib/shaderHelper */ "./engine/src/lib/shaderHelper.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../global */ "./games/Avalonika/src/global.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../config */ "./games/Avalonika/src/config.js");





















//-------------------------------------------------------------------------------------------------------------------
// World;
// 게임의 핵심 클래스
// 대부분의 게임 개체는 월드에 addEntity로 추가해서 처리해야한다.
//-------------------------------------------------------------------------------------------------------------------


// 물과 같은 애니메이션 타일을 처리한다

/**
 *
 * @this World
 * 
 */
function onTimer() {
    if ( this.floorTileMap != null ) {
        this.__animationTick = ( this.__animationTick + 1 ) % 4;
        const ox = this.__animationTick * 1 / 256 * _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileWidth; // 타일 텍스쳐가 256이라고 가정하고 있다

        _lib_shaderHelper__WEBPACK_IMPORTED_MODULE_13__["default"].getShader( "tileMap" ).setConstant( "offset",[ ox, 0, 0, 0] );
    }
}

//-------------------------------------------------------------------------------------------------------------------
// 맵 로더
//-------------------------------------------------------------------------------------------------------------------

/**
 * @this World
 *
 * @param {GameMap} map
 */
function setMap( map ) {
    console.assert( this.floorTileMap == null, "월드에 map을 여러번 생성하려함" );
    this.map = map;
    this.belowTileMap = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TileMap(
        this.map.width,
        this.map.height,
        null,
        _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileWidth,
        _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileHeight,
        2, 2, 1, 1,
        _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileWidth,
        _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileHeight );
    this.floorTileMap = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TileMap(
        this.map.width,
        this.map.height,
        null,
        _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileWidth,
        _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileHeight,
        2, 2, 1, 1,
        _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileWidth,
        _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileHeight );
    this.wallTileMap = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TileMap(
        this.map.width,
        this.map.height,
        null,
        _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileWidth,
        _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileHeight,
        2, 2, 1, 1,
        _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileWidth,
        _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileHeight );
    for ( const i in this.map.spawnTable ) {
        const v = this.map.spawnTable[i];
        const e1 = new _entity_monster__WEBPACK_IMPORTED_MODULE_10__["default"]( v.x, v.y,
                                {
                                    id:    v.id,
                                    color: this.map.getEntityProperty( v.id ).color || 0xff9000
                                } );

        this.entityManager.addEntity( e1 );
    }

    this.floorLayer.addChildAt( this.floorTileMap, 0 );
    this.floorLayer.addChildAt( this.belowTileMap, 0 );
    this.wallLayer.addChildAt( this.wallTileMap, 0 );
    
    this.floorTileMap.setShader( _lib_shaderHelper__WEBPACK_IMPORTED_MODULE_13__["default"].getShader( "tileMap" ) );
    this.belowTileMap.setShader( _lib_shaderHelper__WEBPACK_IMPORTED_MODULE_13__["default"].getShader( "tileMap" ) );
    this.wallTileMap.setShader( _lib_shaderHelper__WEBPACK_IMPORTED_MODULE_13__["default"].getShader( "tileMap" ) );
    this.floorTileMap.motionBlur = false;
    this.belowTileMap.motionBlur = false;
    this.wallTileMap.motionBlur = false;

    _lib_shaderHelper__WEBPACK_IMPORTED_MODULE_13__["default"].getShader( "tileMap" ).setConstant(
        "glossy", [0, 0, _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.shadowWidth / _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.shadowHeight * 8 / this.zoom, 8 / this.zoom]
    );
    this.sightManager.updateShaderViewInfo();
    this.sightManager.__revealCache = {};
    this.addEventListenerOnStage( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.ENTER_FRAME, this.onEnterFrame, this );

    // console.log( this.map.getMapString() );
}





/**
 *
 *
 * @class World
 * @extends {Sprite}
 */
class World extends _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite {
//-------------------------------------------------------------------------------------------------------------------
// 월드 초기화
//-------------------------------------------------------------------------------------------------------------------

    constructor( options ) {
        super();
        if ( !_global__WEBPACK_IMPORTED_MODULE_14__["default"].world ) {
            _global__WEBPACK_IMPORTED_MODULE_14__["default"].world = this;
        } else {
            console.log( "GLOBAL.world가 존재하는데 월드를 생성중" );
        }
        this.entityManager = this.addComponent( new _entityManager__WEBPACK_IMPORTED_MODULE_1__["default"]() );
        this.sightManager = this.addComponent( new _sightManager__WEBPACK_IMPORTED_MODULE_3__["default"]() );
        this.pathManager = this.addComponent( new _pathManager__WEBPACK_IMPORTED_MODULE_2__["default"]() );
        
        console.assert( this.entityManager != null && this.sightManager != null && this.pathManager != null, `World의 Manager 초기화가 실패함.` );


        this.options = options || {};
        const [w,h] = [_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalViewport.width,_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalViewport.height];

        this.viewWidth = w;
        this.viewHeight = h;
        // 디바이스의 피지컬 화면을 view기준으로 본 것
        this.zoom = 1.0;
        this.viewX = null;
        this.viewY = null;
        this.eyeX = null;
        this.eyeY = null;
        this.viewRadius = 10;
        this.lastPos = [0, 0, 0, 0];

        this.__envColor1 = [1, 1, 1, 0.2];
        this.__envColor2 = [0.4, 0.5, 0.6, 1];

        /** @type {GameMap} */        
        this.map = undefined;
        this.turn = 1;
        this.dateTimeOrigin = 0;
        this.__time = 0;
        this.__rain = -1;
        this.time = 0;
        this.rain = -1;
        this.__timer = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer( 250,0 );
        this.__timer.start();
        this.__animationTick = 0;
        this.__timer.addEventListenerOnStage( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event.TIMER,onTimer,this,this );
        this.randomGenerator = new _lib_random__WEBPACK_IMPORTED_MODULE_7__["default"]( this.options.seed );
        this.random = this.randomGenerator.random.bind( this.randomGenerator );
        //-------------
        // Layers;
        //-------------

        this.worldLayer = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();
        this.clipLayer = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();
        //this.clipLayer.setClip( application.logicalRenderBounds.left, application.logicalRenderBounds.top, application.logicalRenderBounds.width, application.logicalRenderBounds.height);
        this.floorLayer = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();
        this.shadowLayer = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();
        this.wallLayer = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();
        this.itemLayer = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();
        this.entityLayer = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();
        this.lightLayer = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();
        //this.lightLayer.setBlendMode(Sprite.BlendModes.ADD);
        this.effectLayer = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sprite();
        //this.lightLayer.setShader(shaderHelper.getShader("light"));
        //this.lightLayer.setBlendMode(Sprite.ADD);
        this.clipLayer.addChild( this.worldLayer );
        this.worldLayer.addChild( this.floorLayer );
        this.worldLayer.addChild( this.shadowLayer );
        this.worldLayer.addChild( this.wallLayer );
        this.worldLayer.addChild( this.lightLayer );
        this.worldLayer.addChild( this.itemLayer );
        this.worldLayer.addChild( this.entityLayer );
        this.worldLayer.addChild( this.effectLayer );

        this.belowTileMap = undefined;
        this.floorTileMap = undefined;
        this.wallTileMap = undefined;
        
        this.addChild( this.clipLayer );

        // //-------------------
        // // Physics;
        // //-------------------
        // this.b2w = b2.new World(0,0,true);
        // if (false) {
        // 	let debugDraw = b2.new DebugDraw();
        // 	this.b2w.setDebugDraw(debugDraw);
        // 	this.worldLayer.addChild(debugDraw);
        // }
        // this.b2ps = this.b2w.createParticleSystem({radius=5}) //destroyByAge=true,
        // //this.b2ps.setTexture(new Texture("Blood.png",false,{format=TextureBase.RGBA5551}));
        // this.worldLayer.addChild(this.b2ps);
        //-------------------
        // Elemental System;
        //-------------------
        this.elemental = new _elemental__WEBPACK_IMPORTED_MODULE_6__["default"]();
        this.floorLayer.addChild( this.elemental.layers[_elemental__WEBPACK_IMPORTED_MODULE_6__["default"].WATER] );
        this.effectLayer.addChild( this.elemental.layers[_elemental__WEBPACK_IMPORTED_MODULE_6__["default"].POISON] );
        this.effectLayer.addChild( this.elemental.layers[_elemental__WEBPACK_IMPORTED_MODULE_6__["default"].FIRE] );
        this.waterAmount = 0; // 물사운드 내는 용도

        this.clearAutoMap = true;
        //-------------------
        // GameMap  Loader;
        // Url;
        // SaveData;
        // ProceduralMap;
        //-------------------
        this.places = [];
        // 장소이름이 키이고 x,y;
        if ( this.options.loadData ) {
            this.setMapString( this.options.loadData.mapString );
            this.randomGenerator.load( this.options.loadData.random );
            this.options.loadData = null;
            console.log( "세이브데이터로드" );
            this.ready();
        } else if ( this.options.url ) {
            this.type = "wildness";
            console.log( "URL에서 데이터를 받아온다.",this.options.url );
            this.setMapUrl( this.options.url )
                .on( "complete",() => {
                    this.ready();
                } );
            this.options.url = null;
        } else if ( this.options.worldGen ) {
            this.type = "wildness";
            console.log( "WORLD GENERATOR 를 통해서 생성." );
            this.setByWorldGen( this.options.worldGen );
            this.ready();
            this.options.worldGen = null;
        } else {
            if ( this.options.type == "dungeon" || this.options.type == "wildness" ) {
                this.type = "dungeon";
                this.proceduralMap = new _proceduralMap_proceduralMap__WEBPACK_IMPORTED_MODULE_5__["default"]( this.options );
                this.setMapString( this.proceduralMap.getMapString() );
                this.enterX = this.proceduralMap.startX;
                this.enterY = this.proceduralMap.startY;
                const t = this.proceduralMap.getEntityList();

                for ( const i in t ) {
                    const v = t[i];
                    let obj;

                    if ( v.type == "prop" ) {
                        obj = new _entity_prop__WEBPACK_IMPORTED_MODULE_9__["default"]( v.char,v.x,v.y,v.options );
                    } else if ( v.type == "monster" ) {
                        obj = new _entity_monster__WEBPACK_IMPORTED_MODULE_10__["default"]( v.char,v.x,v.y,v.options );
                    } else if ( v.type == "npc" ) {
                        obj = new _entity_npc__WEBPACK_IMPORTED_MODULE_11__["default"]( v.char,v.x,v.y,v.options );
                    }
                    this.entityManager.addEntity( obj );
                }
            }
            this.ready();
        }

        this.sightManager.updateShaderViewInfo();
    }

    ready( delay ) {
        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( delay || 0,() => {
            this.processDateTime();
            const e = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Event( "ready" );

            this.dispatchEvent( e );
        } );
    }

    getProperty( tileX, tileY ) {
        return this.map.getProperty( tileX, tileY );
    }



    //-------------------------------------------------------------------------------------------------------------------
    // 매 프레임 그리는 부분
    //-------------------------------------------------------------------------------------------------------------------

    /**
     * @this World
     *
     * @memberof World
     */
    onEnterFrame() {
        const [lastRadius,lastX,lastY,lastEyeX,lastEyeY] = this.lastPos;
        const sx = 1 / this.zoom;
        const sy = 1 / this.zoom;

        this.sightManager.updateShaderViewInfo();
        const zoom = 1;

        // if (Accelerometer.isAvailable()) {
        // 	let x,y,z = _accelerometer.getAcceleration();
        // 	this.__accelX = ((this.__accelX || 0)*6+ -x)/7;
        // 	this.__accelY = ((this.__accelY || 0)*6+ (z*0.4-y*0.6))/7;
        // 	shaderHelper.setConstant("tileMap",{
        // 		fGlossy = {this.__accelX*0.8,this.__accelY*-0.4,
        // 					World.shadowWidth/World.shadowHeight*zoom,
        // 					zoom,}
        // 	});
        // } else {
        _lib_shaderHelper__WEBPACK_IMPORTED_MODULE_13__["default"].getShader( "tileMap" ).setConstant(
            "glossy",[0,0,_config__WEBPACK_IMPORTED_MODULE_15__["default"].World.shadowWidth / _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.shadowHeight * zoom,zoom]
        );
        // }

        // 날씨효과 그리기
        this.renderWhetherEffect( this.viewX - ( lastX || this.viewX ),this.viewY - ( lastY || this.viewY ) );
        if ( this.clearAutoMap ) {
            _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].autoMap.clear();
            this.clearAutoMap = false;
        }
        if ( lastRadius !=  this.viewRadius || lastX !=  this.viewX || lastY != this.viewY || lastEyeX !=  this.eyeX || lastEyeY !=  this.eyeY ) {
            const [x1,y1] = [this.viewX - this.viewWidth / 2 * this.zoom,this.viewY - this.viewHeight / 2 * this.zoom];
            const [x2,y2] = [this.viewX + this.viewWidth / 2 * this.zoom,this.viewY + this.viewHeight / 2 * this.zoom];
            let viewX1,viewY1,viewX2,viewY2;

            viewX1 = Math.floor( x1 / _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileWidth ) + 1 - 1;
            viewY1 = Math.floor( y1 / _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileHeight ) + 1 - 1;
            viewX2 = Math.floor( x2 / _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileWidth ) + 1 + 1;
            viewY2 = Math.floor( y2 / _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileHeight ) + 1 + 1;
            this.sightManager.computeVisibility();//viewX1,viewY1,viewX2,viewY2,this.viewRadius);
            this.lastPos = [this.viewRadius, this.viewX, this.viewY, this.eyeX, this.eyeY];
        }


        if ( this.lightLayer.getNumChildren() > 0 ) {
            const i = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 0,20 );

            if ( i <= this.lightLayer.getNumChildren() ) {
                const b = this.lightLayer.getChildAt( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 0,this.lightLayer.getNumChildren() - 1 ) );

                b.setScale( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 1,10 ) * 0.01 + 0.9 );
                b.setAlpha( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 1,10 ) * 0.03 + 0.7 );
            }
        }



        this.worldLayer.setPosition(
            -( this.viewX * sx - this.viewWidth / 2 ),
            -( this.viewY * sy - this.viewHeight / 2 ) );
        //this.clipLayer.setPosition(Math.frac(1-this.viewX),Math.frac(1-this.viewY));
        //this.b2w.step(1/60,8,3);
    }


    setMap( mapName ) {
        const map = new _gameMap__WEBPACK_IMPORTED_MODULE_4__["default"]();

        //TODO: 아직 안만들었나
        map.loadFile( mapName );
        setMap.call( this,map );
    }


    //-------------------------------------------------------------------------------------------------------------------
    // 생성된 맵 로더
    //-------------------------------------------------------------------------------------------------------------------

    setMapUrl( url ) {
        const loader = new UrlLoader( url )
            .on( "complete",( e ) => {
                const s = e.data;
                const map = new _gameMap__WEBPACK_IMPORTED_MODULE_4__["default"]( );

                map.loadString( s );
                setMap.call( this,map );
            } )
            .on( "error",() => {
                console.log( "UrlLoader ERROR" );
            } );

        return loader;
    }

    /*
    setByWorldGen(worldGenConfig) {

        let worldGen = new WorldGenerator(worldGenConfig.width, worldGenConfig.height, worldGenConfig);
        worldGen.advanceAllStep();
        let tileMap = worldGen.makeTileMap();
        let width = worldGenConfig.width;
        let height = worldGenConfig.height;
        let lines = {};
        for (let y = 0;y <= height;y++) {
            let line = {};
            for (let x = 0;x <= width;x++) {
                let c = tileMap.getValue(x, y);
                line[line.length + 1] = c;
            }
            lines.push(line.join());
        }

        let s = lines.join("\n");
        let map = new GameMap();
        map.loadString(s);
        setMap(this,map);
	}
	*/

    //-------------------------------------------------------------------------------------------------------------------
    // 스트링 맵 로더
    //-------------------------------------------------------------------------------------------------------------------

    setMapString( s ) {
        const map = new _gameMap__WEBPACK_IMPORTED_MODULE_4__["default"]( );

        map.loadString( s );
        setMap.call( this,map );
    }


    //-------------------------------------------------------------------------------------------------------------------
    // 좌표계 변환 함수들
    //-------------------------------------------------------------------------------------------------------------------

    tileToWorld( tileX,tileY ) {
        return new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Point(
            Math.floor( tileX ) * _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileWidth,
            Math.floor( tileY ) * _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileHeight
        );
    }

    tileCenterToWorld( tileX,tileY ) {
        return new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Point(
            Math.floor( tileX ) * _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileWidth + _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileWidth * 0.5,
            Math.floor( tileY ) * _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileHeight + _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileHeight * 0.5
        );
    }

    worldToTile( px,py ) {
        return new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Point(
            Math.floor( px / _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileWidth ),
            Math.floor( py / _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileHeight )
        );
    }

    stageToTile( px,py ) {
        const sx = 1 / this.zoom;
        const sy = 1 / this.zoom;
        const vcw = this.viewWidth / 2 / sx;
        const vch = this.viewHeight / 2 / sy;

        return new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Point(
            Math.floor( ( px / sx + this.viewX - vcw ) / _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileWidth ), 
            Math.floor( ( py / sy + this.viewY - vch ) / _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileHeight )
        );
    }

    stageToWorld( px,py ) {
        const sx = 1 / this.zoom;
        const sy = 1 / this.zoom;
        const viewCenterX = this.viewWidth / 2 / sx;
        const viewCenterY = this.viewHeight / 2 / sy;

        return new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Point(
            px / sx + this.viewX - viewCenterX, 
            py / sy + this.viewY - viewCenterY
        );
    }

    worldToStage( px,py ) {
        const sx = 1 / this.zoom;
        const sy = 1 / this.zoom;
        const viewCenterX = this.viewWidth / 2 / sx;
        const viewCenterY = this.viewHeight / 2 / sy;

        return new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Point( 
            px - this.viewX + viewCenterX, 
            py - this.viewY + viewCenterY
        );
    }

    tileToStage( tileX,tileY ) {
        const sx = 1 / this.zoom;
        const sy = 1 / this.zoom;
        const vcw = this.viewWidth / 2 / sx;
        const vch = this.viewHeight / 2 / sy;

        return new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Point(
            Math.floor( tileX - 1 ) * _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileWidth - this.viewX + vcw, 
            Math.floor( tileY - 1 ) * _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileHeight - this.viewY + vch
        );
    }

    tileCenterToStage( tileX,tileY ) {
        const sx = 1 / this.zoom;
        const sy = 1 / this.zoom;
        const vcw = this.viewWidth / 2 / sx;
        const vch = this.viewHeight / 2 / sy;

        return new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Point(
            Math.floor( tileX ) * _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileWidth + _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileWidth * 0.5 - this.viewX + vcw,
            Math.floor( tileY ) * _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileHeight + _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileHeight * 0.5 - this.viewY + vch
        );
    }

    getDistance( x,y,x2,y2 ) {
        return Math.sqrt( ( x2 - x ) * ( x2 - x ) + ( y2 - y ) * ( y2 - y ) );
    }

    getDistanceBetweenEntities( c1,c2 ) {
        return this.getDistance( c1.tileX,c1.tileY,c2.tileX,c2.tileY );
    }


    //-------------------------------------------------------------------------------------------------------------------
    // 월드가 대신 처리해주는 함수들
    //-------------------------------------------------------------------------------------------------------------------


    addLog( ...args ) {
        _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].addLog( ...args );
    }


    //-------------------------------------------------------------------------------------------------------------------
    // 월드 삭제
    //-------------------------------------------------------------------------------------------------------------------
    // GLOBAL.world 에 대입한다고 가정하고 있음
    //

    destroy( remainSprite ) {
        if ( _global__WEBPACK_IMPORTED_MODULE_14__["default"].world == this ) {
            _global__WEBPACK_IMPORTED_MODULE_14__["default"].world = null;
        }
        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.stopAllSingleSound();
        if ( !remainSprite ) {
            this.removeFromParent();
        }
        //collectgarbage();
        console.log( "월드를 성공적으로 파괴했습니다." );
    }






    //-------------------------------------------------------------------------------------------------------------------
    // 맵 정보, 이벤트 처리
    //-------------------------------------------------------------------------------------------------------------------

    showMapInfo( tileX,tileY ) {
        if ( _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].isSidePanelOpened() ) {
            return;
        }

        const mapEvents = [];
        let curEvent;

        const showEvent = ( num ) => {
            num = num != null ? num : curEvent;
            curEvent = num;
            const t = mapEvents[num];

            t.button2 = () => {
                if ( num > 1 ) {
                    _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( 100,() => {
                        showEvent( num - 1 );
                    } );
                }
            };
            if ( mapEvents.length > 1 ) {
                t.needNext = true;
            } else {
                t.needNext = false;
            }
            _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].showInfo( t );
        };


        const pr = this.getProperty( tileX,tileY );

        if ( pr.char == ">" ) {
            mapEvents[mapEvents.length] = {
                type:       "interact",
                buttonType: "yesno",
                button1:    () => {
                    //showAgain();
                    _global__WEBPACK_IMPORTED_MODULE_14__["default"].world.entityManager.removeEntity( _global__WEBPACK_IMPORTED_MODULE_14__["default"].player );
                    this.destroy( true );
                    this.options.floor = this.options.floor + 1;
                    _global__WEBPACK_IMPORTED_MODULE_14__["default"].world = new World( this.options );
                    //GLOBAL.stage.addChildAt(GLOBAL.world,0);
                    _global__WEBPACK_IMPORTED_MODULE_14__["default"].sceneManager.changeScene( _global__WEBPACK_IMPORTED_MODULE_14__["default"].world,5000, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.SceneManager.circleInOut,_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.linear );
                    _global__WEBPACK_IMPORTED_MODULE_14__["default"].player.setTileXy( _global__WEBPACK_IMPORTED_MODULE_14__["default"].world.enterX,_global__WEBPACK_IMPORTED_MODULE_14__["default"].world.enterY );
                    _global__WEBPACK_IMPORTED_MODULE_14__["default"].player.resetPositionAndColor();
                    _global__WEBPACK_IMPORTED_MODULE_14__["default"].world.entityManager.addEntity( _global__WEBPACK_IMPORTED_MODULE_14__["default"].player );
                    _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].actionSelector.select();
                    _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].cursor.lock();
                    _global__WEBPACK_IMPORTED_MODULE_14__["default"].world.on( "enterEnd",() => {
                        console.log( "이동완료" );
                        _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].cursor.unlock();
                        _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].cursor.resetScale();
                    } );
                },
                text: undefined
            };
            if ( this.options.type == "dungeon" ) {
                mapEvents[mapEvents.length - 1].text = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.hangul.format( "지하 %d층으로 내려가겠습니까?",this.options.floor + 1 );
            } else {
                mapEvents[mapEvents.length - 1].text = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.hangul.format( "%s 던전에 들어가겠습니까?","개발중" );
            }
        }
        const doors = [];

        if ( this.getProperty( tileX - 1,tileY ).char == "E" ) {
            doors.push( ["서쪽", -1, 0] );
        }
        if ( this.getProperty( tileX,tileY + 1 ).char == "E" ) {
            doors.push( ["남쪽", 0, 1] );
        }
        if ( this.getProperty( tileX + 1,tileY ).char == "E" ) {
            doors.push( ["동쪽", 1, 0] );
        }
        if ( this.getProperty( tileX,tileY - 1 ).char == "E" ) {
            doors.push( ["북쪽", 0, -1] );
        }
        if ( doors.length > 0 ) {
            for ( const i in doors ) {
                const v = doors[i];

                mapEvents[mapEvents.length] = {
                    type:       "interact",
                    text:       `${v[0]} 방향의 문을 열겠습니까?`,
                    buttonType: "yesno",
                    button1:    () => {
                        _global__WEBPACK_IMPORTED_MODULE_14__["default"].player.openDoor( tileX + v[1],tileY + v[2] );
                    },
                };
            }
            if ( doors.length == 1 ) {
                mapEvents[0].text = "문을 열겠습니까?";
            }
        }
		
        const items = this.entityManager.getItems( tileX,tileY );

        if ( items ) {
            for ( let i = 0; i < items.length; i++ ) {
                mapEvents[mapEvents.length] = {
                    type:    "item",
                    item:    items[items.length - 1],
                    button1: () => {
                        _global__WEBPACK_IMPORTED_MODULE_14__["default"].player.pickUpItem( items[items.length - 1] );
                    },
                };
            }
        }
        if ( mapEvents.length > 0 ) {
            showEvent( mapEvents.length - 1 );
        } else {
            //log("표시할 맵정보가 없음");
        }
        _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].cursor.showAutoAction();
    }


    openDoor( x,y ) {
        _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSound( "sound/door_open.wav" );
        this.map.setDataByChar( x,y,"D" );
        this.map.processVType( x,y );
        console.log( "문열기",this.map.getProperty( x,y ).char,_global__WEBPACK_IMPORTED_MODULE_14__["default"].player.tileX,_global__WEBPACK_IMPORTED_MODULE_14__["default"].player.tileY,x,y );
        //this.map.getProperty(x,y).revealed=false;
        this.sightManager.revealTile( x,y,true );
        this.sightManager.invalidateEye();
        this.sightManager.invalidateVisibility();
        this.sightManager.refreshEntityVisibility();
    }


    //-------------------------------------------------------------------------------------------------------------------
    // 월드 날짜 밤,낮,날씨
    //-------------------------------------------------------------------------------------------------------------------

    processDateTime() {
        const curDateTime = this.dateTimeOrigin + this.turn;
        const time = ( curDateTime / _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.turnPerDay ) * 24;
        const hour = Math.floor( ( time % 24 ) );
        const minute = Math.floor( ( time * 60 ) % 60 );
        const rain = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.clamp( this.rain + ( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( -40,35 ) / 100 ),-1,1.3 );
        const rainData = { radius: 3, c1: [1, 1, 1, 0.2], c2: [1, 1, 1, 0.5] };
		
        if ( this.type != "wildness" ) {
            this.time = time;
            this.rain = rain;

            return;
        }
        if ( this.rain <= 0.2 && rain > 0.2 ) {
            _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].addLog( "비가 오기 시작한다." );
        } else if ( this.rain >= -0.2 && rain < -0.2 ) {
            _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].addLog( "비가 그쳤다." );
        }
        if ( Math.floor( ( this.time % 24 ) ) < 6 && hour >= 6 ) {
            if ( rain <= 0 ) {
                _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].addLog( "태양이 떠오르고 있다." );
            } else {
                _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].addLog( "날이 밝았다." );
            }
        }
        if ( Math.floor( ( this.time % 24 ) ) < 18 && hour >= 18 ) {
            if ( rain <= 0 ) {
                _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].addLog( "태양이 지고 있다." );
            } else {
                _global__WEBPACK_IMPORTED_MODULE_14__["default"]["interface"].addLog( "날이 저물었다." );
            }
        }

        if ( this.__tweenTime ) {
            this.__tweenTime.stop();
        }
        this.time = time;
        this.rain = rain;
        this.__tweenTime = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Tween( this,500,{ __time: time,__rain: rain } )
            .onChange( () => {
                let rate,s1,s2;

                for ( const i in _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.timeTable ) {
                    const v = _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.timeTable[i];

                    if ( v.time > ( this.__time % 24 ) ) {
                        s1 = _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.timeTable[parseInt( i ) - 1];
                        s2 = _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.timeTable[i];
                        rate = ( ( this.__time % 24 ) - s1.time ) / ( s2.time - s1.time );
                        break;
                    }
                }
                const r = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.lerp( s1.radius,s2.radius,rate );
                let c1 = [_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.lerp( s1.c1[1], s2.c1[1], rate ),
                          _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.lerp( s1.c1[2], s2.c1[2], rate ),
                          _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.lerp( s1.c1[3], s2.c1[3], rate ),
                          _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.lerp( s1.c1[4], s2.c1[4], rate )];
                let c2 = [_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.lerp( s1.c2[1], s2.c2[1], rate ),
                          _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.lerp( s1.c2[2], s2.c2[2], rate ),
                          _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.lerp( s1.c2[3], s2.c2[3], rate ),
                          _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.lerp( s1.c2[4], s2.c2[4], rate )];
                const rate2 = Math.min( 1,this.__rain );

                //r = Utils.lerp(r,rainData.radius,rate2);
                c1 = [_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.lerp( c1[1], rainData.c1[1], rate2 ),
                      _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.lerp( c1[2], rainData.c1[2], rate2 ),
                      _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.lerp( c1[3], rainData.c1[3], rate2 ),
                      _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.lerp( c1[4], rainData.c1[4], rate2 )];
                c2 = [_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.lerp( c2[1], rainData.c2[1], rate2 ),
                      _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.lerp( c2[2], rainData.c2[2], rate2 ),
                      _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.lerp( c2[3], rainData.c2[3], rate2 ),
                      _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.lerp( c2[4], rainData.c2[4], rate2 )];
                this.viewRadius = r;
                this.__envColor1 = c1;
                this.__envColor2 = c2;
                this.sightManager.updateShaderViewInfo();
            } );
    }

    renderWhetherEffect( dx,dy ) {
        const lightningData = { radius: 15, c1: [1, 1, 1, 1], c2: [1, 1, 1, 1] };

        if ( this.type == "wildness" && this.__rain > 0 ) {
            const rain = Math.min( 1,this.__rain );
            const lightningRate = ( 101 - 100 * rain ) * 80;

            if ( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( lightningRate ) == 1 && this.lightningTimer != null ) {
                const r = this.viewRadius;
                const c1 = this.__envColor1;
                const c2 = this.__envColor2;

                this.viewRadius = lightningData.radius;
                this.__envColor1 = lightningData.c1;
                this.__envColor2 = lightningData.c2;
                this.sightManager.updateShaderViewInfo();
                this.lightningTimer = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( 20,() => {
                    this.viewRadius = r;
                    this.__envColor1 = c1;
                    this.__envColor2 = c2;
                    this.sightManager.updateShaderViewInfo();
                    this.lightningTimer = null;
                } );
                _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 3000 ),() => {
                    const sc = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound( "sound/env_lightning.wav" ).play( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 5000 ) );

                    if ( sc ) {
                        sc.setPitch( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 80,100 ) * 0.01 );
                        sc.setVolume( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 50,100 ) * 0.01 );
                    }
                } );
            }

            const [x1,y1] = [this.viewX - this.viewWidth / 2 / 0.5,this.viewY - this.viewHeight / 2 / 0.5];
            const [x2,y2] = [this.viewX + this.viewWidth / 2 / 0.5,this.viewY + this.viewHeight / 2 / 0.5];
            let viewX1,viewY1,viewX2,viewY2;

            viewX1 = Math.floor( x1 / _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileWidth ) + 1;
            viewY1 = Math.floor( y1 / _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileHeight ) + 1;
            viewX2 = Math.floor( x2 / _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileWidth ) + 1;
            viewY2 = Math.floor( y2 / _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileHeight ) + 1;
            if ( !this.rainSprite ) {
                this.rainSprite = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Particles();
                this.rainSprite.setTexture( new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Texture( "rainDrop.png",false,{ format: _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.TextureBase.RGBA4444 } ) );
                this.effectLayer.addChild( this.rainSprite );
            }
            _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Sound.playSingleSound( "sound/loop_rain.wav",this.rain,true );
            const angle = Math.atan2( -dx,20 ) + ( 90 * Math.PI / 180 );
            const eyeTx = this.eyeX / _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileWidth;
            const eyeTy = this.eyeY / _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileHeight;
            const size = 16 * this.getScaleX();//*CONFIG.PARTICLE_SCALE;
            const dropRate = 101 - 100 * Math.pow( rain,2 );
            const rainRadius = this.viewRadius ^ 2;

            for ( let y = viewY1; y <= viewY2; y++ ) {
                for ( let x = viewX1; x <= viewX2; x++ ) {
                    const xx = ( x - 1 ) * _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileWidth + _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileWidth );
                    const yy = ( y - 1 ) * _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileHeight + _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( _config__WEBPACK_IMPORTED_MODULE_15__["default"].World.tileHeight );
                    const speed = 8;
                    const pr = this.getProperty( x,y );

                    if ( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( dropRate ) == 1 &&
						( x - eyeTx ) ** 2 + ( y - eyeTy ) ** 2 <= rainRadius &&
						pr.revealed && !pr.noRain ) {
                        this.rainSprite.addParticles(
                            [{	x:      xx,
                               y:      yy - 2 * speed,
                               size:   size,
                               angle:  ( angle / Math.PI * 180 ) + 90,//+Utils.random(-10,10),
                               ttl:    3,
                               speedX: Math.cos( angle ) * speed,
                               speedY: Math.sin( angle ) * speed,
                               color:  0xffffff,
                               alpha:  0.4,
                            }] );
                    }
                }
            }
        }
    }

    getDateTime() {
        const day = Math.floor( this.time / 24 );
        const hour = Math.floor( this.time % 24 );
        const min = Math.floor( ( this.time * 60 ) % 60 );
        const sec = Math.floor( ( this.time * 60 * 60 ) % 60 );
        const t = { day: day, hour: hour, min: min, sec: sec };

        return t;
    }

    isRainy() {
        return this.rain * 100 > 20;
    }
}




/***/ }),

/***/ "./node_modules/eventemitter3/index.js":
/*!*********************************************!*\
  !*** ./node_modules/eventemitter3/index.js ***!
  \*********************************************/
/***/ ((module) => {

"use strict";


var has = Object.prototype.hasOwnProperty
  , prefix = '~';

/**
 * Constructor to create a storage for our `EE` objects.
 * An `Events` instance is a plain object whose properties are event names.
 *
 * @constructor
 * @private
 */
function Events() {}

//
// We try to not inherit from `Object.prototype`. In some engines creating an
// instance in this way is faster than calling `Object.create(null)` directly.
// If `Object.create(null)` is not supported we prefix the event names with a
// character to make sure that the built-in object properties are not
// overridden or used as an attack vector.
//
if (Object.create) {
  Events.prototype = Object.create(null);

  //
  // This hack is needed because the `__proto__` property is still inherited in
  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.
  //
  if (!new Events().__proto__) prefix = false;
}

/**
 * Representation of a single event listener.
 *
 * @param {Function} fn The listener function.
 * @param {*} context The context to invoke the listener with.
 * @param {Boolean} [once=false] Specify if the listener is a one-time listener.
 * @constructor
 * @private
 */
function EE(fn, context, once) {
  this.fn = fn;
  this.context = context;
  this.once = once || false;
}

/**
 * Add a listener for a given event.
 *
 * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn The listener function.
 * @param {*} context The context to invoke the listener with.
 * @param {Boolean} once Specify if the listener is a one-time listener.
 * @returns {EventEmitter}
 * @private
 */
function addListener(emitter, event, fn, context, once) {
  if (typeof fn !== 'function') {
    throw new TypeError('The listener must be a function');
  }

  var listener = new EE(fn, context || emitter, once)
    , evt = prefix ? prefix + event : event;

  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;
  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);
  else emitter._events[evt] = [emitter._events[evt], listener];

  return emitter;
}

/**
 * Clear event by name.
 *
 * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.
 * @param {(String|Symbol)} evt The Event name.
 * @private
 */
function clearEvent(emitter, evt) {
  if (--emitter._eventsCount === 0) emitter._events = new Events();
  else delete emitter._events[evt];
}

/**
 * Minimal `EventEmitter` interface that is molded against the Node.js
 * `EventEmitter` interface.
 *
 * @constructor
 * @public
 */
function EventEmitter() {
  this._events = new Events();
  this._eventsCount = 0;
}

/**
 * Return an array listing the events for which the emitter has registered
 * listeners.
 *
 * @returns {Array}
 * @public
 */
EventEmitter.prototype.eventNames = function eventNames() {
  var names = []
    , events
    , name;

  if (this._eventsCount === 0) return names;

  for (name in (events = this._events)) {
    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);
  }

  if (Object.getOwnPropertySymbols) {
    return names.concat(Object.getOwnPropertySymbols(events));
  }

  return names;
};

/**
 * Return the listeners registered for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @returns {Array} The registered listeners.
 * @public
 */
EventEmitter.prototype.listeners = function listeners(event) {
  var evt = prefix ? prefix + event : event
    , handlers = this._events[evt];

  if (!handlers) return [];
  if (handlers.fn) return [handlers.fn];

  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {
    ee[i] = handlers[i].fn;
  }

  return ee;
};

/**
 * Return the number of listeners listening to a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @returns {Number} The number of listeners.
 * @public
 */
EventEmitter.prototype.listenerCount = function listenerCount(event) {
  var evt = prefix ? prefix + event : event
    , listeners = this._events[evt];

  if (!listeners) return 0;
  if (listeners.fn) return 1;
  return listeners.length;
};

/**
 * Calls each of the listeners registered for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @returns {Boolean} `true` if the event had listeners, else `false`.
 * @public
 */
EventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {
  var evt = prefix ? prefix + event : event;

  if (!this._events[evt]) return false;

  var listeners = this._events[evt]
    , len = arguments.length
    , args
    , i;

  if (listeners.fn) {
    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);

    switch (len) {
      case 1: return listeners.fn.call(listeners.context), true;
      case 2: return listeners.fn.call(listeners.context, a1), true;
      case 3: return listeners.fn.call(listeners.context, a1, a2), true;
      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;
      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;
      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;
    }

    for (i = 1, args = new Array(len -1); i < len; i++) {
      args[i - 1] = arguments[i];
    }

    listeners.fn.apply(listeners.context, args);
  } else {
    var length = listeners.length
      , j;

    for (i = 0; i < length; i++) {
      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);

      switch (len) {
        case 1: listeners[i].fn.call(listeners[i].context); break;
        case 2: listeners[i].fn.call(listeners[i].context, a1); break;
        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;
        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;
        default:
          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {
            args[j - 1] = arguments[j];
          }

          listeners[i].fn.apply(listeners[i].context, args);
      }
    }
  }

  return true;
};

/**
 * Add a listener for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn The listener function.
 * @param {*} [context=this] The context to invoke the listener with.
 * @returns {EventEmitter} `this`.
 * @public
 */
EventEmitter.prototype.on = function on(event, fn, context) {
  return addListener(this, event, fn, context, false);
};

/**
 * Add a one-time listener for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn The listener function.
 * @param {*} [context=this] The context to invoke the listener with.
 * @returns {EventEmitter} `this`.
 * @public
 */
EventEmitter.prototype.once = function once(event, fn, context) {
  return addListener(this, event, fn, context, true);
};

/**
 * Remove the listeners of a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn Only remove the listeners that match this function.
 * @param {*} context Only remove the listeners that have this context.
 * @param {Boolean} once Only remove one-time listeners.
 * @returns {EventEmitter} `this`.
 * @public
 */
EventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {
  var evt = prefix ? prefix + event : event;

  if (!this._events[evt]) return this;
  if (!fn) {
    clearEvent(this, evt);
    return this;
  }

  var listeners = this._events[evt];

  if (listeners.fn) {
    if (
      listeners.fn === fn &&
      (!once || listeners.once) &&
      (!context || listeners.context === context)
    ) {
      clearEvent(this, evt);
    }
  } else {
    for (var i = 0, events = [], length = listeners.length; i < length; i++) {
      if (
        listeners[i].fn !== fn ||
        (once && !listeners[i].once) ||
        (context && listeners[i].context !== context)
      ) {
        events.push(listeners[i]);
      }
    }

    //
    // Reset the array, or remove it completely if we have no more listeners.
    //
    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;
    else clearEvent(this, evt);
  }

  return this;
};

/**
 * Remove all listeners, or those of the specified event.
 *
 * @param {(String|Symbol)} [event] The event name.
 * @returns {EventEmitter} `this`.
 * @public
 */
EventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {
  var evt;

  if (event) {
    evt = prefix ? prefix + event : event;
    if (this._events[evt]) clearEvent(this, evt);
  } else {
    this._events = new Events();
    this._eventsCount = 0;
  }

  return this;
};

//
// Alias methods names because people roll like that.
//
EventEmitter.prototype.off = EventEmitter.prototype.removeListener;
EventEmitter.prototype.addListener = EventEmitter.prototype.on;

//
// Expose the prefix.
//
EventEmitter.prefixed = prefix;

//
// Allow `EventEmitter` to be imported as module namespace.
//
EventEmitter.EventEmitter = EventEmitter;

//
// Expose the module.
//
if (true) {
  module.exports = EventEmitter;
}


/***/ }),

/***/ "./node_modules/twgl.js/dist/4.x/twgl-full.module.js":
/*!***********************************************************!*\
  !*** ./node_modules/twgl.js/dist/4.x/twgl-full.module.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "addExtensionsToContext": () => (/* binding */ addExtensionsToContext),
/* harmony export */   "attributes": () => (/* binding */ attributes),
/* harmony export */   "bindFramebufferInfo": () => (/* binding */ bindFramebufferInfo),
/* harmony export */   "bindTransformFeedbackInfo": () => (/* binding */ bindTransformFeedbackInfo),
/* harmony export */   "bindUniformBlock": () => (/* binding */ bindUniformBlock),
/* harmony export */   "canFilter": () => (/* binding */ canFilter),
/* harmony export */   "canGenerateMipmap": () => (/* binding */ canGenerateMipmap),
/* harmony export */   "createAttribsFromArrays": () => (/* binding */ createAttribsFromArrays),
/* harmony export */   "createAttributeSetters": () => (/* binding */ createAttributeSetters),
/* harmony export */   "createBufferFromArray": () => (/* binding */ createBufferFromArray),
/* harmony export */   "createBufferFromTypedArray": () => (/* binding */ createBufferFromTypedArray),
/* harmony export */   "createBufferInfoFromArrays": () => (/* binding */ createBufferInfoFromArrays),
/* harmony export */   "createBuffersFromArrays": () => (/* binding */ createBuffersFromArrays),
/* harmony export */   "createFramebufferInfo": () => (/* binding */ createFramebufferInfo),
/* harmony export */   "createProgram": () => (/* binding */ createProgram),
/* harmony export */   "createProgramFromScripts": () => (/* binding */ createProgramFromScripts),
/* harmony export */   "createProgramFromSources": () => (/* binding */ createProgramFromSources),
/* harmony export */   "createProgramInfo": () => (/* binding */ createProgramInfo),
/* harmony export */   "createProgramInfoFromProgram": () => (/* binding */ createProgramInfoFromProgram),
/* harmony export */   "createSampler": () => (/* binding */ createSampler),
/* harmony export */   "createSamplers": () => (/* binding */ createSamplers),
/* harmony export */   "createTexture": () => (/* binding */ createTexture),
/* harmony export */   "createTextures": () => (/* binding */ createTextures),
/* harmony export */   "createTransformFeedback": () => (/* binding */ createTransformFeedback),
/* harmony export */   "createTransformFeedbackInfo": () => (/* binding */ createTransformFeedbackInfo),
/* harmony export */   "createUniformBlockInfo": () => (/* binding */ createUniformBlockInfo),
/* harmony export */   "createUniformBlockInfoFromProgram": () => (/* binding */ createUniformBlockInfoFromProgram),
/* harmony export */   "createUniformBlockSpecFromProgram": () => (/* binding */ createUniformBlockSpecFromProgram),
/* harmony export */   "createUniformSetters": () => (/* binding */ createUniformSetters),
/* harmony export */   "createVAOAndSetAttributes": () => (/* binding */ createVAOAndSetAttributes),
/* harmony export */   "createVAOFromBufferInfo": () => (/* binding */ createVAOFromBufferInfo),
/* harmony export */   "createVertexArrayInfo": () => (/* binding */ createVertexArrayInfo),
/* harmony export */   "draw": () => (/* binding */ draw),
/* harmony export */   "drawBufferInfo": () => (/* binding */ drawBufferInfo),
/* harmony export */   "drawObjectList": () => (/* binding */ drawObjectList),
/* harmony export */   "framebuffers": () => (/* binding */ framebuffers),
/* harmony export */   "getArray_": () => (/* binding */ getArray),
/* harmony export */   "getBytesPerElementForInternalFormat": () => (/* binding */ getBytesPerElementForInternalFormat),
/* harmony export */   "getContext": () => (/* binding */ getContext),
/* harmony export */   "getFormatAndTypeForInternalFormat": () => (/* binding */ getFormatAndTypeForInternalFormat),
/* harmony export */   "getGLTypeForTypedArray": () => (/* binding */ getGLTypeForTypedArray),
/* harmony export */   "getGLTypeForTypedArrayType": () => (/* binding */ getGLTypeForTypedArrayType),
/* harmony export */   "getNumComponentsForFormat": () => (/* binding */ getNumComponentsForFormat),
/* harmony export */   "getNumComponents_": () => (/* binding */ getNumComponents),
/* harmony export */   "getTypedArrayTypeForGLType": () => (/* binding */ getTypedArrayTypeForGLType),
/* harmony export */   "getWebGLContext": () => (/* binding */ getWebGLContext),
/* harmony export */   "glEnumToString": () => (/* binding */ glEnumToString),
/* harmony export */   "isArrayBuffer": () => (/* binding */ isArrayBuffer),
/* harmony export */   "isWebGL1": () => (/* binding */ isWebGL1),
/* harmony export */   "isWebGL2": () => (/* binding */ isWebGL2),
/* harmony export */   "loadTextureFromUrl": () => (/* binding */ loadTextureFromUrl),
/* harmony export */   "m4": () => (/* binding */ m4),
/* harmony export */   "primitives": () => (/* binding */ primitives),
/* harmony export */   "programs": () => (/* binding */ programs),
/* harmony export */   "resizeCanvasToDisplaySize": () => (/* binding */ resizeCanvasToDisplaySize),
/* harmony export */   "resizeFramebufferInfo": () => (/* binding */ resizeFramebufferInfo),
/* harmony export */   "resizeTexture": () => (/* binding */ resizeTexture),
/* harmony export */   "setAttribInfoBufferFromArray": () => (/* binding */ setAttribInfoBufferFromArray),
/* harmony export */   "setAttributeDefaults_": () => (/* binding */ setDefaults),
/* harmony export */   "setAttributePrefix": () => (/* binding */ setAttributePrefix),
/* harmony export */   "setAttributes": () => (/* binding */ setAttributes),
/* harmony export */   "setBlockUniforms": () => (/* binding */ setBlockUniforms),
/* harmony export */   "setBuffersAndAttributes": () => (/* binding */ setBuffersAndAttributes),
/* harmony export */   "setDefaultTextureColor": () => (/* binding */ setDefaultTextureColor),
/* harmony export */   "setDefaults": () => (/* binding */ setDefaults$2),
/* harmony export */   "setEmptyTexture": () => (/* binding */ setEmptyTexture),
/* harmony export */   "setSamplerParameters": () => (/* binding */ setSamplerParameters),
/* harmony export */   "setTextureDefaults_": () => (/* binding */ setDefaults$1),
/* harmony export */   "setTextureFilteringForSize": () => (/* binding */ setTextureFilteringForSize),
/* harmony export */   "setTextureFromArray": () => (/* binding */ setTextureFromArray),
/* harmony export */   "setTextureFromElement": () => (/* binding */ setTextureFromElement),
/* harmony export */   "setTextureParameters": () => (/* binding */ setTextureParameters),
/* harmony export */   "setUniformBlock": () => (/* binding */ setUniformBlock),
/* harmony export */   "setUniforms": () => (/* binding */ setUniforms),
/* harmony export */   "setUniformsAndBindTextures": () => (/* binding */ setUniformsAndBindTextures),
/* harmony export */   "textures": () => (/* binding */ textures),
/* harmony export */   "typedarrays": () => (/* binding */ typedarrays),
/* harmony export */   "utils": () => (/* binding */ utils),
/* harmony export */   "v3": () => (/* binding */ v3),
/* harmony export */   "vertexArrays": () => (/* binding */ vertexArrays)
/* harmony export */ });
/* @license twgl.js 4.21.2 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */
/*
 * Copyright 2019 Gregg Tavares
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS IN THE SOFTWARE.
 */

/**
 *
 * Vec3 math math functions.
 *
 * Almost all functions take an optional `dst` argument. If it is not passed in the
 * functions will create a new Vec3. In other words you can do this
 *
 *     var v = v3.cross(v1, v2);  // Creates a new Vec3 with the cross product of v1 x v2.
 *
 * or
 *
 *     var v = v3.create();
 *     v3.cross(v1, v2, v);  // Puts the cross product of v1 x v2 in v
 *
 * The first style is often easier but depending on where it's used it generates garbage where
 * as there is almost never allocation with the second style.
 *
 * It is always save to pass any vector as the destination. So for example
 *
 *     v3.cross(v1, v2, v1);  // Puts the cross product of v1 x v2 in v1
 *
 * @module twgl/v3
 */

let VecType = Float32Array;

/**
 * A JavaScript array with 3 values or a Float32Array with 3 values.
 * When created by the library will create the default type which is `Float32Array`
 * but can be set by calling {@link module:twgl/v3.setDefaultType}.
 * @typedef {(number[]|Float32Array)} Vec3
 * @memberOf module:twgl/v3
 */

/**
 * Sets the type this library creates for a Vec3
 * @param {constructor} ctor the constructor for the type. Either `Float32Array` or `Array`
 * @return {constructor} previous constructor for Vec3
 * @memberOf module:twgl/v3
 */
function setDefaultType(ctor) {
  const oldType = VecType;
  VecType = ctor;
  return oldType;
}

/**
 * Creates a vec3; may be called with x, y, z to set initial values.
 * @param {number} [x] Initial x value.
 * @param {number} [y] Initial y value.
 * @param {number} [z] Initial z value.
 * @return {module:twgl/v3.Vec3} the created vector
 * @memberOf module:twgl/v3
 */
function create(x, y, z) {
  const dst = new VecType(3);
  if (x) {
    dst[0] = x;
  }
  if (y) {
    dst[1] = y;
  }
  if (z) {
    dst[2] = z;
  }
  return dst;
}

/**
 * Adds two vectors; assumes a and b have the same dimension.
 * @param {module:twgl/v3.Vec3} a Operand vector.
 * @param {module:twgl/v3.Vec3} b Operand vector.
 * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created.
 * @return {module:twgl/v3.Vec3} A vector tha tis the sum of a and b.
 * @memberOf module:twgl/v3
 */
function add(a, b, dst) {
  dst = dst || new VecType(3);

  dst[0] = a[0] + b[0];
  dst[1] = a[1] + b[1];
  dst[2] = a[2] + b[2];

  return dst;
}

/**
 * Subtracts two vectors.
 * @param {module:twgl/v3.Vec3} a Operand vector.
 * @param {module:twgl/v3.Vec3} b Operand vector.
 * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created.
 * @return {module:twgl/v3.Vec3} A vector that is the difference of a and b.
 * @memberOf module:twgl/v3
 */
function subtract(a, b, dst) {
  dst = dst || new VecType(3);

  dst[0] = a[0] - b[0];
  dst[1] = a[1] - b[1];
  dst[2] = a[2] - b[2];

  return dst;
}

/**
 * Performs linear interpolation on two vectors.
 * Given vectors a and b and interpolation coefficient t, returns
 * a + t * (b - a).
 * @param {module:twgl/v3.Vec3} a Operand vector.
 * @param {module:twgl/v3.Vec3} b Operand vector.
 * @param {number} t Interpolation coefficient.
 * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created.
 * @return {module:twgl/v3.Vec3} The linear interpolated result.
 * @memberOf module:twgl/v3
 */
function lerp(a, b, t, dst) {
  dst = dst || new VecType(3);

  dst[0] = a[0] + t * (b[0] - a[0]);
  dst[1] = a[1] + t * (b[1] - a[1]);
  dst[2] = a[2] + t * (b[2] - a[2]);

  return dst;
}

/**
 * Performs linear interpolation on two vectors.
 * Given vectors a and b and interpolation coefficient vector t, returns
 * a + t * (b - a).
 * @param {module:twgl/v3.Vec3} a Operand vector.
 * @param {module:twgl/v3.Vec3} b Operand vector.
 * @param {module:twgl/v3.Vec3} t Interpolation coefficients vector.
 * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created.
 * @return {module:twgl/v3.Vec3} the linear interpolated result.
 * @memberOf module:twgl/v3
 */
function lerpV(a, b, t, dst) {
  dst = dst || new VecType(3);

  dst[0] = a[0] + t[0] * (b[0] - a[0]);
  dst[1] = a[1] + t[1] * (b[1] - a[1]);
  dst[2] = a[2] + t[2] * (b[2] - a[2]);

  return dst;
}

/**
 * Return max values of two vectors.
 * Given vectors a and b returns
 * [max(a[0], b[0]), max(a[1], b[1]), max(a[2], b[2])].
 * @param {module:twgl/v3.Vec3} a Operand vector.
 * @param {module:twgl/v3.Vec3} b Operand vector.
 * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created.
 * @return {module:twgl/v3.Vec3} The max components vector.
 * @memberOf module:twgl/v3
 */
function max(a, b, dst) {
  dst = dst || new VecType(3);

  dst[0] = Math.max(a[0], b[0]);
  dst[1] = Math.max(a[1], b[1]);
  dst[2] = Math.max(a[2], b[2]);

  return dst;
}

/**
 * Return min values of two vectors.
 * Given vectors a and b returns
 * [min(a[0], b[0]), min(a[1], b[1]), min(a[2], b[2])].
 * @param {module:twgl/v3.Vec3} a Operand vector.
 * @param {module:twgl/v3.Vec3} b Operand vector.
 * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created.
 * @return {module:twgl/v3.Vec3} The min components vector.
 * @memberOf module:twgl/v3
 */
function min(a, b, dst) {
  dst = dst || new VecType(3);

  dst[0] = Math.min(a[0], b[0]);
  dst[1] = Math.min(a[1], b[1]);
  dst[2] = Math.min(a[2], b[2]);

  return dst;
}

/**
 * Multiplies a vector by a scalar.
 * @param {module:twgl/v3.Vec3} v The vector.
 * @param {number} k The scalar.
 * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created.
 * @return {module:twgl/v3.Vec3} The scaled vector.
 * @memberOf module:twgl/v3
 */
function mulScalar(v, k, dst) {
  dst = dst || new VecType(3);

  dst[0] = v[0] * k;
  dst[1] = v[1] * k;
  dst[2] = v[2] * k;

  return dst;
}

/**
 * Divides a vector by a scalar.
 * @param {module:twgl/v3.Vec3} v The vector.
 * @param {number} k The scalar.
 * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created.
 * @return {module:twgl/v3.Vec3} The scaled vector.
 * @memberOf module:twgl/v3
 */
function divScalar(v, k, dst) {
  dst = dst || new VecType(3);

  dst[0] = v[0] / k;
  dst[1] = v[1] / k;
  dst[2] = v[2] / k;

  return dst;
}

/**
 * Computes the cross product of two vectors; assumes both vectors have
 * three entries.
 * @param {module:twgl/v3.Vec3} a Operand vector.
 * @param {module:twgl/v3.Vec3} b Operand vector.
 * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created.
 * @return {module:twgl/v3.Vec3} The vector of a cross b.
 * @memberOf module:twgl/v3
 */
function cross(a, b, dst) {
  dst = dst || new VecType(3);

  const t1 = a[2] * b[0] - a[0] * b[2];
  const t2 = a[0] * b[1] - a[1] * b[0];
  dst[0] = a[1] * b[2] - a[2] * b[1];
  dst[1] = t1;
  dst[2] = t2;

  return dst;
}

/**
 * Computes the dot product of two vectors; assumes both vectors have
 * three entries.
 * @param {module:twgl/v3.Vec3} a Operand vector.
 * @param {module:twgl/v3.Vec3} b Operand vector.
 * @return {number} dot product
 * @memberOf module:twgl/v3
 */
function dot(a, b) {
  return (a[0] * b[0]) + (a[1] * b[1]) + (a[2] * b[2]);
}

/**
 * Computes the length of vector
 * @param {module:twgl/v3.Vec3} v vector.
 * @return {number} length of vector.
 * @memberOf module:twgl/v3
 */
function length$1(v) {
  return Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]);
}

/**
 * Computes the square of the length of vector
 * @param {module:twgl/v3.Vec3} v vector.
 * @return {number} square of the length of vector.
 * @memberOf module:twgl/v3
 */
function lengthSq(v) {
  return v[0] * v[0] + v[1] * v[1] + v[2] * v[2];
}

/**
 * Computes the distance between 2 points
 * @param {module:twgl/v3.Vec3} a vector.
 * @param {module:twgl/v3.Vec3} b vector.
 * @return {number} distance between a and b
 * @memberOf module:twgl/v3
 */
function distance(a, b) {
  const dx = a[0] - b[0];
  const dy = a[1] - b[1];
  const dz = a[2] - b[2];
  return Math.sqrt(dx * dx + dy * dy + dz * dz);
}

/**
 * Computes the square of the distance between 2 points
 * @param {module:twgl/v3.Vec3} a vector.
 * @param {module:twgl/v3.Vec3} b vector.
 * @return {number} square of the distance between a and b
 * @memberOf module:twgl/v3
 */
function distanceSq(a, b) {
  const dx = a[0] - b[0];
  const dy = a[1] - b[1];
  const dz = a[2] - b[2];
  return dx * dx + dy * dy + dz * dz;
}

/**
 * Divides a vector by its Euclidean length and returns the quotient.
 * @param {module:twgl/v3.Vec3} a The vector.
 * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created.
 * @return {module:twgl/v3.Vec3} The normalized vector.
 * @memberOf module:twgl/v3
 */
function normalize(a, dst) {
  dst = dst || new VecType(3);

  const lenSq = a[0] * a[0] + a[1] * a[1] + a[2] * a[2];
  const len = Math.sqrt(lenSq);
  if (len > 0.00001) {
    dst[0] = a[0] / len;
    dst[1] = a[1] / len;
    dst[2] = a[2] / len;
  } else {
    dst[0] = 0;
    dst[1] = 0;
    dst[2] = 0;
  }

  return dst;
}

/**
 * Negates a vector.
 * @param {module:twgl/v3.Vec3} v The vector.
 * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created.
 * @return {module:twgl/v3.Vec3} -v.
 * @memberOf module:twgl/v3
 */
function negate(v, dst) {
  dst = dst || new VecType(3);

  dst[0] = -v[0];
  dst[1] = -v[1];
  dst[2] = -v[2];

  return dst;
}

/**
 * Copies a vector.
 * @param {module:twgl/v3.Vec3} v The vector.
 * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created.
 * @return {module:twgl/v3.Vec3} A copy of v.
 * @memberOf module:twgl/v3
 */
function copy(v, dst) {
  dst = dst || new VecType(3);

  dst[0] = v[0];
  dst[1] = v[1];
  dst[2] = v[2];

  return dst;
}

/**
 * Multiplies a vector by another vector (component-wise); assumes a and
 * b have the same length.
 * @param {module:twgl/v3.Vec3} a Operand vector.
 * @param {module:twgl/v3.Vec3} b Operand vector.
 * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created.
 * @return {module:twgl/v3.Vec3} The vector of products of entries of a and
 *     b.
 * @memberOf module:twgl/v3
 */
function multiply(a, b, dst) {
  dst = dst || new VecType(3);

  dst[0] = a[0] * b[0];
  dst[1] = a[1] * b[1];
  dst[2] = a[2] * b[2];

  return dst;
}

/**
 * Divides a vector by another vector (component-wise); assumes a and
 * b have the same length.
 * @param {module:twgl/v3.Vec3} a Operand vector.
 * @param {module:twgl/v3.Vec3} b Operand vector.
 * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not new one is created.
 * @return {module:twgl/v3.Vec3} The vector of quotients of entries of a and
 *     b.
 * @memberOf module:twgl/v3
 */
function divide(a, b, dst) {
  dst = dst || new VecType(3);

  dst[0] = a[0] / b[0];
  dst[1] = a[1] / b[1];
  dst[2] = a[2] / b[2];

  return dst;
}

var v3 = /*#__PURE__*/Object.freeze({
  __proto__: null,
  add: add,
  copy: copy,
  create: create,
  cross: cross,
  distance: distance,
  distanceSq: distanceSq,
  divide: divide,
  divScalar: divScalar,
  dot: dot,
  lerp: lerp,
  lerpV: lerpV,
  length: length$1,
  lengthSq: lengthSq,
  max: max,
  min: min,
  mulScalar: mulScalar,
  multiply: multiply,
  negate: negate,
  normalize: normalize,
  setDefaultType: setDefaultType,
  subtract: subtract
});

/*
 * Copyright 2019 Gregg Tavares
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS IN THE SOFTWARE.
 */

/**
 * 4x4 Matrix math math functions.
 *
 * Almost all functions take an optional `dst` argument. If it is not passed in the
 * functions will create a new matrix. In other words you can do this
 *
 *     const mat = m4.translation([1, 2, 3]);  // Creates a new translation matrix
 *
 * or
 *
 *     const mat = m4.create();
 *     m4.translation([1, 2, 3], mat);  // Puts translation matrix in mat.
 *
 * The first style is often easier but depending on where it's used it generates garbage where
 * as there is almost never allocation with the second style.
 *
 * It is always save to pass any matrix as the destination. So for example
 *
 *     const mat = m4.identity();
 *     const trans = m4.translation([1, 2, 3]);
 *     m4.multiply(mat, trans, mat);  // Multiplies mat * trans and puts result in mat.
 *
 * @module twgl/m4
 */
let MatType = Float32Array;

/**
 * A JavaScript array with 16 values or a Float32Array with 16 values.
 * When created by the library will create the default type which is `Float32Array`
 * but can be set by calling {@link module:twgl/m4.setDefaultType}.
 * @typedef {(number[]|Float32Array)} Mat4
 * @memberOf module:twgl/m4
 */

/**
 * Sets the type this library creates for a Mat4
 * @param {constructor} ctor the constructor for the type. Either `Float32Array` or `Array`
 * @return {constructor} previous constructor for Mat4
 * @memberOf module:twgl/m4
 */
function setDefaultType$1(ctor) {
  const oldType = MatType;
  MatType = ctor;
  return oldType;
}

/**
 * Negates a matrix.
 * @param {module:twgl/m4.Mat4} m The matrix.
 * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} -m.
 * @memberOf module:twgl/m4
 */
function negate$1(m, dst) {
  dst = dst || new MatType(16);

  dst[ 0] = -m[ 0];
  dst[ 1] = -m[ 1];
  dst[ 2] = -m[ 2];
  dst[ 3] = -m[ 3];
  dst[ 4] = -m[ 4];
  dst[ 5] = -m[ 5];
  dst[ 6] = -m[ 6];
  dst[ 7] = -m[ 7];
  dst[ 8] = -m[ 8];
  dst[ 9] = -m[ 9];
  dst[10] = -m[10];
  dst[11] = -m[11];
  dst[12] = -m[12];
  dst[13] = -m[13];
  dst[14] = -m[14];
  dst[15] = -m[15];

  return dst;
}

/**
 * Copies a matrix.
 * @param {module:twgl/m4.Mat4} m The matrix.
 * @param {module:twgl/m4.Mat4} [dst] The matrix. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} A copy of m.
 * @memberOf module:twgl/m4
 */
function copy$1(m, dst) {
  dst = dst || new MatType(16);

  dst[ 0] = m[ 0];
  dst[ 1] = m[ 1];
  dst[ 2] = m[ 2];
  dst[ 3] = m[ 3];
  dst[ 4] = m[ 4];
  dst[ 5] = m[ 5];
  dst[ 6] = m[ 6];
  dst[ 7] = m[ 7];
  dst[ 8] = m[ 8];
  dst[ 9] = m[ 9];
  dst[10] = m[10];
  dst[11] = m[11];
  dst[12] = m[12];
  dst[13] = m[13];
  dst[14] = m[14];
  dst[15] = m[15];

  return dst;
}

/**
 * Creates an n-by-n identity matrix.
 *
 * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} An n-by-n identity matrix.
 * @memberOf module:twgl/m4
 */
function identity(dst) {
  dst = dst || new MatType(16);

  dst[ 0] = 1;
  dst[ 1] = 0;
  dst[ 2] = 0;
  dst[ 3] = 0;
  dst[ 4] = 0;
  dst[ 5] = 1;
  dst[ 6] = 0;
  dst[ 7] = 0;
  dst[ 8] = 0;
  dst[ 9] = 0;
  dst[10] = 1;
  dst[11] = 0;
  dst[12] = 0;
  dst[13] = 0;
  dst[14] = 0;
  dst[15] = 1;

  return dst;
}

/**
 * Takes the transpose of a matrix.
 * @param {module:twgl/m4.Mat4} m The matrix.
 * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} The transpose of m.
 * @memberOf module:twgl/m4
 */
 function transpose(m, dst) {
  dst = dst || new MatType(16);
  if (dst === m) {
    let t;

    t = m[1];
    m[1] = m[4];
    m[4] = t;

    t = m[2];
    m[2] = m[8];
    m[8] = t;

    t = m[3];
    m[3] = m[12];
    m[12] = t;

    t = m[6];
    m[6] = m[9];
    m[9] = t;

    t = m[7];
    m[7] = m[13];
    m[13] = t;

    t = m[11];
    m[11] = m[14];
    m[14] = t;
    return dst;
  }

  const m00 = m[0 * 4 + 0];
  const m01 = m[0 * 4 + 1];
  const m02 = m[0 * 4 + 2];
  const m03 = m[0 * 4 + 3];
  const m10 = m[1 * 4 + 0];
  const m11 = m[1 * 4 + 1];
  const m12 = m[1 * 4 + 2];
  const m13 = m[1 * 4 + 3];
  const m20 = m[2 * 4 + 0];
  const m21 = m[2 * 4 + 1];
  const m22 = m[2 * 4 + 2];
  const m23 = m[2 * 4 + 3];
  const m30 = m[3 * 4 + 0];
  const m31 = m[3 * 4 + 1];
  const m32 = m[3 * 4 + 2];
  const m33 = m[3 * 4 + 3];

  dst[ 0] = m00;
  dst[ 1] = m10;
  dst[ 2] = m20;
  dst[ 3] = m30;
  dst[ 4] = m01;
  dst[ 5] = m11;
  dst[ 6] = m21;
  dst[ 7] = m31;
  dst[ 8] = m02;
  dst[ 9] = m12;
  dst[10] = m22;
  dst[11] = m32;
  dst[12] = m03;
  dst[13] = m13;
  dst[14] = m23;
  dst[15] = m33;

  return dst;
}

/**
 * Computes the inverse of a 4-by-4 matrix.
 * @param {module:twgl/m4.Mat4} m The matrix.
 * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} The inverse of m.
 * @memberOf module:twgl/m4
 */
function inverse(m, dst) {
  dst = dst || new MatType(16);

  const m00 = m[0 * 4 + 0];
  const m01 = m[0 * 4 + 1];
  const m02 = m[0 * 4 + 2];
  const m03 = m[0 * 4 + 3];
  const m10 = m[1 * 4 + 0];
  const m11 = m[1 * 4 + 1];
  const m12 = m[1 * 4 + 2];
  const m13 = m[1 * 4 + 3];
  const m20 = m[2 * 4 + 0];
  const m21 = m[2 * 4 + 1];
  const m22 = m[2 * 4 + 2];
  const m23 = m[2 * 4 + 3];
  const m30 = m[3 * 4 + 0];
  const m31 = m[3 * 4 + 1];
  const m32 = m[3 * 4 + 2];
  const m33 = m[3 * 4 + 3];
  const tmp_0  = m22 * m33;
  const tmp_1  = m32 * m23;
  const tmp_2  = m12 * m33;
  const tmp_3  = m32 * m13;
  const tmp_4  = m12 * m23;
  const tmp_5  = m22 * m13;
  const tmp_6  = m02 * m33;
  const tmp_7  = m32 * m03;
  const tmp_8  = m02 * m23;
  const tmp_9  = m22 * m03;
  const tmp_10 = m02 * m13;
  const tmp_11 = m12 * m03;
  const tmp_12 = m20 * m31;
  const tmp_13 = m30 * m21;
  const tmp_14 = m10 * m31;
  const tmp_15 = m30 * m11;
  const tmp_16 = m10 * m21;
  const tmp_17 = m20 * m11;
  const tmp_18 = m00 * m31;
  const tmp_19 = m30 * m01;
  const tmp_20 = m00 * m21;
  const tmp_21 = m20 * m01;
  const tmp_22 = m00 * m11;
  const tmp_23 = m10 * m01;

  const t0 = (tmp_0 * m11 + tmp_3 * m21 + tmp_4 * m31) -
      (tmp_1 * m11 + tmp_2 * m21 + tmp_5 * m31);
  const t1 = (tmp_1 * m01 + tmp_6 * m21 + tmp_9 * m31) -
      (tmp_0 * m01 + tmp_7 * m21 + tmp_8 * m31);
  const t2 = (tmp_2 * m01 + tmp_7 * m11 + tmp_10 * m31) -
      (tmp_3 * m01 + tmp_6 * m11 + tmp_11 * m31);
  const t3 = (tmp_5 * m01 + tmp_8 * m11 + tmp_11 * m21) -
      (tmp_4 * m01 + tmp_9 * m11 + tmp_10 * m21);

  const d = 1.0 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);

  dst[ 0] = d * t0;
  dst[ 1] = d * t1;
  dst[ 2] = d * t2;
  dst[ 3] = d * t3;
  dst[ 4] = d * ((tmp_1 * m10 + tmp_2 * m20 + tmp_5 * m30) -
          (tmp_0 * m10 + tmp_3 * m20 + tmp_4 * m30));
  dst[ 5] = d * ((tmp_0 * m00 + tmp_7 * m20 + tmp_8 * m30) -
          (tmp_1 * m00 + tmp_6 * m20 + tmp_9 * m30));
  dst[ 6] = d * ((tmp_3 * m00 + tmp_6 * m10 + tmp_11 * m30) -
          (tmp_2 * m00 + tmp_7 * m10 + tmp_10 * m30));
  dst[ 7] = d * ((tmp_4 * m00 + tmp_9 * m10 + tmp_10 * m20) -
          (tmp_5 * m00 + tmp_8 * m10 + tmp_11 * m20));
  dst[ 8] = d * ((tmp_12 * m13 + tmp_15 * m23 + tmp_16 * m33) -
          (tmp_13 * m13 + tmp_14 * m23 + tmp_17 * m33));
  dst[ 9] = d * ((tmp_13 * m03 + tmp_18 * m23 + tmp_21 * m33) -
          (tmp_12 * m03 + tmp_19 * m23 + tmp_20 * m33));
  dst[10] = d * ((tmp_14 * m03 + tmp_19 * m13 + tmp_22 * m33) -
          (tmp_15 * m03 + tmp_18 * m13 + tmp_23 * m33));
  dst[11] = d * ((tmp_17 * m03 + tmp_20 * m13 + tmp_23 * m23) -
          (tmp_16 * m03 + tmp_21 * m13 + tmp_22 * m23));
  dst[12] = d * ((tmp_14 * m22 + tmp_17 * m32 + tmp_13 * m12) -
          (tmp_16 * m32 + tmp_12 * m12 + tmp_15 * m22));
  dst[13] = d * ((tmp_20 * m32 + tmp_12 * m02 + tmp_19 * m22) -
          (tmp_18 * m22 + tmp_21 * m32 + tmp_13 * m02));
  dst[14] = d * ((tmp_18 * m12 + tmp_23 * m32 + tmp_15 * m02) -
          (tmp_22 * m32 + tmp_14 * m02 + tmp_19 * m12));
  dst[15] = d * ((tmp_22 * m22 + tmp_16 * m02 + tmp_21 * m12) -
          (tmp_20 * m12 + tmp_23 * m22 + tmp_17 * m02));

  return dst;
}

/**
 * Multiplies two 4-by-4 matrices with a on the left and b on the right
 * @param {module:twgl/m4.Mat4} a The matrix on the left.
 * @param {module:twgl/m4.Mat4} b The matrix on the right.
 * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} The matrix product of a and b.
 * @memberOf module:twgl/m4
 */
function multiply$1(a, b, dst) {
  dst = dst || new MatType(16);

  const a00 = a[0];
  const a01 = a[1];
  const a02 = a[2];
  const a03 = a[3];
  const a10 = a[ 4 + 0];
  const a11 = a[ 4 + 1];
  const a12 = a[ 4 + 2];
  const a13 = a[ 4 + 3];
  const a20 = a[ 8 + 0];
  const a21 = a[ 8 + 1];
  const a22 = a[ 8 + 2];
  const a23 = a[ 8 + 3];
  const a30 = a[12 + 0];
  const a31 = a[12 + 1];
  const a32 = a[12 + 2];
  const a33 = a[12 + 3];
  const b00 = b[0];
  const b01 = b[1];
  const b02 = b[2];
  const b03 = b[3];
  const b10 = b[ 4 + 0];
  const b11 = b[ 4 + 1];
  const b12 = b[ 4 + 2];
  const b13 = b[ 4 + 3];
  const b20 = b[ 8 + 0];
  const b21 = b[ 8 + 1];
  const b22 = b[ 8 + 2];
  const b23 = b[ 8 + 3];
  const b30 = b[12 + 0];
  const b31 = b[12 + 1];
  const b32 = b[12 + 2];
  const b33 = b[12 + 3];

  dst[ 0] = a00 * b00 + a10 * b01 + a20 * b02 + a30 * b03;
  dst[ 1] = a01 * b00 + a11 * b01 + a21 * b02 + a31 * b03;
  dst[ 2] = a02 * b00 + a12 * b01 + a22 * b02 + a32 * b03;
  dst[ 3] = a03 * b00 + a13 * b01 + a23 * b02 + a33 * b03;
  dst[ 4] = a00 * b10 + a10 * b11 + a20 * b12 + a30 * b13;
  dst[ 5] = a01 * b10 + a11 * b11 + a21 * b12 + a31 * b13;
  dst[ 6] = a02 * b10 + a12 * b11 + a22 * b12 + a32 * b13;
  dst[ 7] = a03 * b10 + a13 * b11 + a23 * b12 + a33 * b13;
  dst[ 8] = a00 * b20 + a10 * b21 + a20 * b22 + a30 * b23;
  dst[ 9] = a01 * b20 + a11 * b21 + a21 * b22 + a31 * b23;
  dst[10] = a02 * b20 + a12 * b21 + a22 * b22 + a32 * b23;
  dst[11] = a03 * b20 + a13 * b21 + a23 * b22 + a33 * b23;
  dst[12] = a00 * b30 + a10 * b31 + a20 * b32 + a30 * b33;
  dst[13] = a01 * b30 + a11 * b31 + a21 * b32 + a31 * b33;
  dst[14] = a02 * b30 + a12 * b31 + a22 * b32 + a32 * b33;
  dst[15] = a03 * b30 + a13 * b31 + a23 * b32 + a33 * b33;

  return dst;
}

/**
 * Sets the translation component of a 4-by-4 matrix to the given
 * vector.
 * @param {module:twgl/m4.Mat4} a The matrix.
 * @param {module:twgl/v3.Vec3} v The vector.
 * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} The matrix with translation set.
 * @memberOf module:twgl/m4
 */
function setTranslation(a, v, dst) {
  dst = dst || identity();
  if (a !== dst) {
    dst[ 0] = a[ 0];
    dst[ 1] = a[ 1];
    dst[ 2] = a[ 2];
    dst[ 3] = a[ 3];
    dst[ 4] = a[ 4];
    dst[ 5] = a[ 5];
    dst[ 6] = a[ 6];
    dst[ 7] = a[ 7];
    dst[ 8] = a[ 8];
    dst[ 9] = a[ 9];
    dst[10] = a[10];
    dst[11] = a[11];
  }
  dst[12] = v[0];
  dst[13] = v[1];
  dst[14] = v[2];
  dst[15] = 1;
  return dst;
}

/**
 * Returns the translation component of a 4-by-4 matrix as a vector with 3
 * entries.
 * @param {module:twgl/m4.Mat4} m The matrix.
 * @param {module:twgl/v3.Vec3} [dst] vector to hold result. If not passed a new one is created.
 * @return {module:twgl/v3.Vec3} The translation component of m.
 * @memberOf module:twgl/m4
 */
function getTranslation(m, dst) {
  dst = dst || create();
  dst[0] = m[12];
  dst[1] = m[13];
  dst[2] = m[14];
  return dst;
}

/**
 * Returns an axis of a 4x4 matrix as a vector with 3 entries
 * @param {module:twgl/m4.Mat4} m The matrix.
 * @param {number} axis The axis 0 = x, 1 = y, 2 = z;
 * @return {module:twgl/v3.Vec3} [dst] vector.
 * @return {module:twgl/v3.Vec3} The axis component of m.
 * @memberOf module:twgl/m4
 */
function getAxis(m, axis, dst) {
  dst = dst || create();
  const off = axis * 4;
  dst[0] = m[off + 0];
  dst[1] = m[off + 1];
  dst[2] = m[off + 2];
  return dst;
}

/**
 * Sets an axis of a 4x4 matrix as a vector with 3 entries
 * @param {module:twgl/m4.Mat4} m The matrix.
 * @param {module:twgl/v3.Vec3} v the axis vector
 * @param {number} axis The axis  0 = x, 1 = y, 2 = z;
 * @param {module:twgl/m4.Mat4} [dst] The matrix to set. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} The matrix with axis set.
 * @memberOf module:twgl/m4
 */
function setAxis(a, v, axis, dst) {
  if (dst !== a) {
    dst = copy$1(a, dst);
  }
  const off = axis * 4;
  dst[off + 0] = v[0];
  dst[off + 1] = v[1];
  dst[off + 2] = v[2];
  return dst;
}

/**
 * Computes a 4-by-4 perspective transformation matrix given the angular height
 * of the frustum, the aspect ratio, and the near and far clipping planes.  The
 * arguments define a frustum extending in the negative z direction.  The given
 * angle is the vertical angle of the frustum, and the horizontal angle is
 * determined to produce the given aspect ratio.  The arguments near and far are
 * the distances to the near and far clipping planes.  Note that near and far
 * are not z coordinates, but rather they are distances along the negative
 * z-axis.  The matrix generated sends the viewing frustum to the unit box.
 * We assume a unit box extending from -1 to 1 in the x and y dimensions and
 * from 0 to 1 in the z dimension.
 * @param {number} fieldOfViewYInRadians The camera angle from top to bottom (in radians).
 * @param {number} aspect The aspect ratio width / height.
 * @param {number} zNear The depth (negative z coordinate)
 *     of the near clipping plane.
 * @param {number} zFar The depth (negative z coordinate)
 *     of the far clipping plane.
 * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} The perspective matrix.
 * @memberOf module:twgl/m4
 */
function perspective(fieldOfViewYInRadians, aspect, zNear, zFar, dst) {
  dst = dst || new MatType(16);

  const f = Math.tan(Math.PI * 0.5 - 0.5 * fieldOfViewYInRadians);
  const rangeInv = 1.0 / (zNear - zFar);

  dst[0]  = f / aspect;
  dst[1]  = 0;
  dst[2]  = 0;
  dst[3]  = 0;

  dst[4]  = 0;
  dst[5]  = f;
  dst[6]  = 0;
  dst[7]  = 0;

  dst[8]  = 0;
  dst[9]  = 0;
  dst[10] = (zNear + zFar) * rangeInv;
  dst[11] = -1;

  dst[12] = 0;
  dst[13] = 0;
  dst[14] = zNear * zFar * rangeInv * 2;
  dst[15] = 0;

  return dst;
}

/**
 * Computes a 4-by-4 orthogonal transformation matrix given the left, right,
 * bottom, and top dimensions of the near clipping plane as well as the
 * near and far clipping plane distances.
 * @param {number} left Left side of the near clipping plane viewport.
 * @param {number} right Right side of the near clipping plane viewport.
 * @param {number} bottom Bottom of the near clipping plane viewport.
 * @param {number} top Top of the near clipping plane viewport.
 * @param {number} near The depth (negative z coordinate)
 *     of the near clipping plane.
 * @param {number} far The depth (negative z coordinate)
 *     of the far clipping plane.
 * @param {module:twgl/m4.Mat4} [dst] Output matrix. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} The perspective matrix.
 * @memberOf module:twgl/m4
 */
function ortho(left, right, bottom, top, near, far, dst) {
  dst = dst || new MatType(16);

  dst[0]  = 2 / (right - left);
  dst[1]  = 0;
  dst[2]  = 0;
  dst[3]  = 0;

  dst[4]  = 0;
  dst[5]  = 2 / (top - bottom);
  dst[6]  = 0;
  dst[7]  = 0;

  dst[8]  = 0;
  dst[9]  = 0;
  dst[10] = 2 / (near - far);
  dst[11] = 0;

  dst[12] = (right + left) / (left - right);
  dst[13] = (top + bottom) / (bottom - top);
  dst[14] = (far + near) / (near - far);
  dst[15] = 1;

  return dst;
}

/**
 * Computes a 4-by-4 perspective transformation matrix given the left, right,
 * top, bottom, near and far clipping planes. The arguments define a frustum
 * extending in the negative z direction. The arguments near and far are the
 * distances to the near and far clipping planes. Note that near and far are not
 * z coordinates, but rather they are distances along the negative z-axis. The
 * matrix generated sends the viewing frustum to the unit box. We assume a unit
 * box extending from -1 to 1 in the x and y dimensions and from 0 to 1 in the z
 * dimension.
 * @param {number} left The x coordinate of the left plane of the box.
 * @param {number} right The x coordinate of the right plane of the box.
 * @param {number} bottom The y coordinate of the bottom plane of the box.
 * @param {number} top The y coordinate of the right plane of the box.
 * @param {number} near The negative z coordinate of the near plane of the box.
 * @param {number} far The negative z coordinate of the far plane of the box.
 * @param {module:twgl/m4.Mat4} [dst] Output matrix. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} The perspective projection matrix.
 * @memberOf module:twgl/m4
 */
function frustum(left, right, bottom, top, near, far, dst) {
  dst = dst || new MatType(16);

  const dx = (right - left);
  const dy = (top - bottom);
  const dz = (near - far);

  dst[ 0] = 2 * near / dx;
  dst[ 1] = 0;
  dst[ 2] = 0;
  dst[ 3] = 0;
  dst[ 4] = 0;
  dst[ 5] = 2 * near / dy;
  dst[ 6] = 0;
  dst[ 7] = 0;
  dst[ 8] = (left + right) / dx;
  dst[ 9] = (top + bottom) / dy;
  dst[10] = far / dz;
  dst[11] = -1;
  dst[12] = 0;
  dst[13] = 0;
  dst[14] = near * far / dz;
  dst[15] = 0;

  return dst;
}

let xAxis;
let yAxis;
let zAxis;

/**
 * Computes a 4-by-4 look-at transformation.
 *
 * This is a matrix which positions the camera itself. If you want
 * a view matrix (a matrix which moves things in front of the camera)
 * take the inverse of this.
 *
 * @param {module:twgl/v3.Vec3} eye The position of the eye.
 * @param {module:twgl/v3.Vec3} target The position meant to be viewed.
 * @param {module:twgl/v3.Vec3} up A vector pointing up.
 * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} The look-at matrix.
 * @memberOf module:twgl/m4
 */
function lookAt(eye, target, up, dst) {
  dst = dst || new MatType(16);

  xAxis = xAxis || create();
  yAxis = yAxis || create();
  zAxis = zAxis || create();

  normalize(
      subtract(eye, target, zAxis), zAxis);
  normalize(cross(up, zAxis, xAxis), xAxis);
  normalize(cross(zAxis, xAxis, yAxis), yAxis);

  dst[ 0] = xAxis[0];
  dst[ 1] = xAxis[1];
  dst[ 2] = xAxis[2];
  dst[ 3] = 0;
  dst[ 4] = yAxis[0];
  dst[ 5] = yAxis[1];
  dst[ 6] = yAxis[2];
  dst[ 7] = 0;
  dst[ 8] = zAxis[0];
  dst[ 9] = zAxis[1];
  dst[10] = zAxis[2];
  dst[11] = 0;
  dst[12] = eye[0];
  dst[13] = eye[1];
  dst[14] = eye[2];
  dst[15] = 1;

  return dst;
}

/**
 * Creates a 4-by-4 matrix which translates by the given vector v.
 * @param {module:twgl/v3.Vec3} v The vector by
 *     which to translate.
 * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} The translation matrix.
 * @memberOf module:twgl/m4
 */
function translation(v, dst) {
  dst = dst || new MatType(16);

  dst[ 0] = 1;
  dst[ 1] = 0;
  dst[ 2] = 0;
  dst[ 3] = 0;
  dst[ 4] = 0;
  dst[ 5] = 1;
  dst[ 6] = 0;
  dst[ 7] = 0;
  dst[ 8] = 0;
  dst[ 9] = 0;
  dst[10] = 1;
  dst[11] = 0;
  dst[12] = v[0];
  dst[13] = v[1];
  dst[14] = v[2];
  dst[15] = 1;
  return dst;
}

/**
 * Translates the given 4-by-4 matrix by the given vector v.
 * @param {module:twgl/m4.Mat4} m The matrix.
 * @param {module:twgl/v3.Vec3} v The vector by
 *     which to translate.
 * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} The translated matrix.
 * @memberOf module:twgl/m4
 */
function translate(m, v, dst) {
  dst = dst || new MatType(16);

  const v0 = v[0];
  const v1 = v[1];
  const v2 = v[2];
  const m00 = m[0];
  const m01 = m[1];
  const m02 = m[2];
  const m03 = m[3];
  const m10 = m[1 * 4 + 0];
  const m11 = m[1 * 4 + 1];
  const m12 = m[1 * 4 + 2];
  const m13 = m[1 * 4 + 3];
  const m20 = m[2 * 4 + 0];
  const m21 = m[2 * 4 + 1];
  const m22 = m[2 * 4 + 2];
  const m23 = m[2 * 4 + 3];
  const m30 = m[3 * 4 + 0];
  const m31 = m[3 * 4 + 1];
  const m32 = m[3 * 4 + 2];
  const m33 = m[3 * 4 + 3];

  if (m !== dst) {
    dst[ 0] = m00;
    dst[ 1] = m01;
    dst[ 2] = m02;
    dst[ 3] = m03;
    dst[ 4] = m10;
    dst[ 5] = m11;
    dst[ 6] = m12;
    dst[ 7] = m13;
    dst[ 8] = m20;
    dst[ 9] = m21;
    dst[10] = m22;
    dst[11] = m23;
  }

  dst[12] = m00 * v0 + m10 * v1 + m20 * v2 + m30;
  dst[13] = m01 * v0 + m11 * v1 + m21 * v2 + m31;
  dst[14] = m02 * v0 + m12 * v1 + m22 * v2 + m32;
  dst[15] = m03 * v0 + m13 * v1 + m23 * v2 + m33;

  return dst;
}

/**
 * Creates a 4-by-4 matrix which rotates around the x-axis by the given angle.
 * @param {number} angleInRadians The angle by which to rotate (in radians).
 * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} The rotation matrix.
 * @memberOf module:twgl/m4
 */
function rotationX(angleInRadians, dst) {
  dst = dst || new MatType(16);

  const c = Math.cos(angleInRadians);
  const s = Math.sin(angleInRadians);

  dst[ 0] = 1;
  dst[ 1] = 0;
  dst[ 2] = 0;
  dst[ 3] = 0;
  dst[ 4] = 0;
  dst[ 5] = c;
  dst[ 6] = s;
  dst[ 7] = 0;
  dst[ 8] = 0;
  dst[ 9] = -s;
  dst[10] = c;
  dst[11] = 0;
  dst[12] = 0;
  dst[13] = 0;
  dst[14] = 0;
  dst[15] = 1;

  return dst;
}

/**
 * Rotates the given 4-by-4 matrix around the x-axis by the given
 * angle.
 * @param {module:twgl/m4.Mat4} m The matrix.
 * @param {number} angleInRadians The angle by which to rotate (in radians).
 * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} The rotated matrix.
 * @memberOf module:twgl/m4
 */
function rotateX(m, angleInRadians, dst) {
  dst = dst || new MatType(16);

  const m10 = m[4];
  const m11 = m[5];
  const m12 = m[6];
  const m13 = m[7];
  const m20 = m[8];
  const m21 = m[9];
  const m22 = m[10];
  const m23 = m[11];
  const c = Math.cos(angleInRadians);
  const s = Math.sin(angleInRadians);

  dst[4]  = c * m10 + s * m20;
  dst[5]  = c * m11 + s * m21;
  dst[6]  = c * m12 + s * m22;
  dst[7]  = c * m13 + s * m23;
  dst[8]  = c * m20 - s * m10;
  dst[9]  = c * m21 - s * m11;
  dst[10] = c * m22 - s * m12;
  dst[11] = c * m23 - s * m13;

  if (m !== dst) {
    dst[ 0] = m[ 0];
    dst[ 1] = m[ 1];
    dst[ 2] = m[ 2];
    dst[ 3] = m[ 3];
    dst[12] = m[12];
    dst[13] = m[13];
    dst[14] = m[14];
    dst[15] = m[15];
  }

  return dst;
}

/**
 * Creates a 4-by-4 matrix which rotates around the y-axis by the given angle.
 * @param {number} angleInRadians The angle by which to rotate (in radians).
 * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} The rotation matrix.
 * @memberOf module:twgl/m4
 */
function rotationY(angleInRadians, dst) {
  dst = dst || new MatType(16);

  const c = Math.cos(angleInRadians);
  const s = Math.sin(angleInRadians);

  dst[ 0] = c;
  dst[ 1] = 0;
  dst[ 2] = -s;
  dst[ 3] = 0;
  dst[ 4] = 0;
  dst[ 5] = 1;
  dst[ 6] = 0;
  dst[ 7] = 0;
  dst[ 8] = s;
  dst[ 9] = 0;
  dst[10] = c;
  dst[11] = 0;
  dst[12] = 0;
  dst[13] = 0;
  dst[14] = 0;
  dst[15] = 1;

  return dst;
}

/**
 * Rotates the given 4-by-4 matrix around the y-axis by the given
 * angle.
 * @param {module:twgl/m4.Mat4} m The matrix.
 * @param {number} angleInRadians The angle by which to rotate (in radians).
 * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} The rotated matrix.
 * @memberOf module:twgl/m4
 */
function rotateY(m, angleInRadians, dst) {
  dst = dst || new MatType(16);

  const m00 = m[0 * 4 + 0];
  const m01 = m[0 * 4 + 1];
  const m02 = m[0 * 4 + 2];
  const m03 = m[0 * 4 + 3];
  const m20 = m[2 * 4 + 0];
  const m21 = m[2 * 4 + 1];
  const m22 = m[2 * 4 + 2];
  const m23 = m[2 * 4 + 3];
  const c = Math.cos(angleInRadians);
  const s = Math.sin(angleInRadians);

  dst[ 0] = c * m00 - s * m20;
  dst[ 1] = c * m01 - s * m21;
  dst[ 2] = c * m02 - s * m22;
  dst[ 3] = c * m03 - s * m23;
  dst[ 8] = c * m20 + s * m00;
  dst[ 9] = c * m21 + s * m01;
  dst[10] = c * m22 + s * m02;
  dst[11] = c * m23 + s * m03;

  if (m !== dst) {
    dst[ 4] = m[ 4];
    dst[ 5] = m[ 5];
    dst[ 6] = m[ 6];
    dst[ 7] = m[ 7];
    dst[12] = m[12];
    dst[13] = m[13];
    dst[14] = m[14];
    dst[15] = m[15];
  }

  return dst;
}

/**
 * Creates a 4-by-4 matrix which rotates around the z-axis by the given angle.
 * @param {number} angleInRadians The angle by which to rotate (in radians).
 * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} The rotation matrix.
 * @memberOf module:twgl/m4
 */
function rotationZ(angleInRadians, dst) {
  dst = dst || new MatType(16);

  const c = Math.cos(angleInRadians);
  const s = Math.sin(angleInRadians);

  dst[ 0] = c;
  dst[ 1] = s;
  dst[ 2] = 0;
  dst[ 3] = 0;
  dst[ 4] = -s;
  dst[ 5] = c;
  dst[ 6] = 0;
  dst[ 7] = 0;
  dst[ 8] = 0;
  dst[ 9] = 0;
  dst[10] = 1;
  dst[11] = 0;
  dst[12] = 0;
  dst[13] = 0;
  dst[14] = 0;
  dst[15] = 1;

  return dst;
}

/**
 * Rotates the given 4-by-4 matrix around the z-axis by the given
 * angle.
 * @param {module:twgl/m4.Mat4} m The matrix.
 * @param {number} angleInRadians The angle by which to rotate (in radians).
 * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} The rotated matrix.
 * @memberOf module:twgl/m4
 */
function rotateZ(m, angleInRadians, dst) {
  dst = dst || new MatType(16);

  const m00 = m[0 * 4 + 0];
  const m01 = m[0 * 4 + 1];
  const m02 = m[0 * 4 + 2];
  const m03 = m[0 * 4 + 3];
  const m10 = m[1 * 4 + 0];
  const m11 = m[1 * 4 + 1];
  const m12 = m[1 * 4 + 2];
  const m13 = m[1 * 4 + 3];
  const c = Math.cos(angleInRadians);
  const s = Math.sin(angleInRadians);

  dst[ 0] = c * m00 + s * m10;
  dst[ 1] = c * m01 + s * m11;
  dst[ 2] = c * m02 + s * m12;
  dst[ 3] = c * m03 + s * m13;
  dst[ 4] = c * m10 - s * m00;
  dst[ 5] = c * m11 - s * m01;
  dst[ 6] = c * m12 - s * m02;
  dst[ 7] = c * m13 - s * m03;

  if (m !== dst) {
    dst[ 8] = m[ 8];
    dst[ 9] = m[ 9];
    dst[10] = m[10];
    dst[11] = m[11];
    dst[12] = m[12];
    dst[13] = m[13];
    dst[14] = m[14];
    dst[15] = m[15];
  }

  return dst;
}

/**
 * Creates a 4-by-4 matrix which rotates around the given axis by the given
 * angle.
 * @param {module:twgl/v3.Vec3} axis The axis
 *     about which to rotate.
 * @param {number} angleInRadians The angle by which to rotate (in radians).
 * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} A matrix which rotates angle radians
 *     around the axis.
 * @memberOf module:twgl/m4
 */
function axisRotation(axis, angleInRadians, dst) {
  dst = dst || new MatType(16);

  let x = axis[0];
  let y = axis[1];
  let z = axis[2];
  const n = Math.sqrt(x * x + y * y + z * z);
  x /= n;
  y /= n;
  z /= n;
  const xx = x * x;
  const yy = y * y;
  const zz = z * z;
  const c = Math.cos(angleInRadians);
  const s = Math.sin(angleInRadians);
  const oneMinusCosine = 1 - c;

  dst[ 0] = xx + (1 - xx) * c;
  dst[ 1] = x * y * oneMinusCosine + z * s;
  dst[ 2] = x * z * oneMinusCosine - y * s;
  dst[ 3] = 0;
  dst[ 4] = x * y * oneMinusCosine - z * s;
  dst[ 5] = yy + (1 - yy) * c;
  dst[ 6] = y * z * oneMinusCosine + x * s;
  dst[ 7] = 0;
  dst[ 8] = x * z * oneMinusCosine + y * s;
  dst[ 9] = y * z * oneMinusCosine - x * s;
  dst[10] = zz + (1 - zz) * c;
  dst[11] = 0;
  dst[12] = 0;
  dst[13] = 0;
  dst[14] = 0;
  dst[15] = 1;

  return dst;
}

/**
 * Rotates the given 4-by-4 matrix around the given axis by the
 * given angle.
 * @param {module:twgl/m4.Mat4} m The matrix.
 * @param {module:twgl/v3.Vec3} axis The axis
 *     about which to rotate.
 * @param {number} angleInRadians The angle by which to rotate (in radians).
 * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} The rotated matrix.
 * @memberOf module:twgl/m4
 */
function axisRotate(m, axis, angleInRadians, dst) {
  dst = dst || new MatType(16);

  let x = axis[0];
  let y = axis[1];
  let z = axis[2];
  const n = Math.sqrt(x * x + y * y + z * z);
  x /= n;
  y /= n;
  z /= n;
  const xx = x * x;
  const yy = y * y;
  const zz = z * z;
  const c = Math.cos(angleInRadians);
  const s = Math.sin(angleInRadians);
  const oneMinusCosine = 1 - c;

  const r00 = xx + (1 - xx) * c;
  const r01 = x * y * oneMinusCosine + z * s;
  const r02 = x * z * oneMinusCosine - y * s;
  const r10 = x * y * oneMinusCosine - z * s;
  const r11 = yy + (1 - yy) * c;
  const r12 = y * z * oneMinusCosine + x * s;
  const r20 = x * z * oneMinusCosine + y * s;
  const r21 = y * z * oneMinusCosine - x * s;
  const r22 = zz + (1 - zz) * c;

  const m00 = m[0];
  const m01 = m[1];
  const m02 = m[2];
  const m03 = m[3];
  const m10 = m[4];
  const m11 = m[5];
  const m12 = m[6];
  const m13 = m[7];
  const m20 = m[8];
  const m21 = m[9];
  const m22 = m[10];
  const m23 = m[11];

  dst[ 0] = r00 * m00 + r01 * m10 + r02 * m20;
  dst[ 1] = r00 * m01 + r01 * m11 + r02 * m21;
  dst[ 2] = r00 * m02 + r01 * m12 + r02 * m22;
  dst[ 3] = r00 * m03 + r01 * m13 + r02 * m23;
  dst[ 4] = r10 * m00 + r11 * m10 + r12 * m20;
  dst[ 5] = r10 * m01 + r11 * m11 + r12 * m21;
  dst[ 6] = r10 * m02 + r11 * m12 + r12 * m22;
  dst[ 7] = r10 * m03 + r11 * m13 + r12 * m23;
  dst[ 8] = r20 * m00 + r21 * m10 + r22 * m20;
  dst[ 9] = r20 * m01 + r21 * m11 + r22 * m21;
  dst[10] = r20 * m02 + r21 * m12 + r22 * m22;
  dst[11] = r20 * m03 + r21 * m13 + r22 * m23;

  if (m !== dst) {
    dst[12] = m[12];
    dst[13] = m[13];
    dst[14] = m[14];
    dst[15] = m[15];
  }

  return dst;
}

/**
 * Creates a 4-by-4 matrix which scales in each dimension by an amount given by
 * the corresponding entry in the given vector; assumes the vector has three
 * entries.
 * @param {module:twgl/v3.Vec3} v A vector of
 *     three entries specifying the factor by which to scale in each dimension.
 * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} The scaling matrix.
 * @memberOf module:twgl/m4
 */
function scaling(v, dst) {
  dst = dst || new MatType(16);

  dst[ 0] = v[0];
  dst[ 1] = 0;
  dst[ 2] = 0;
  dst[ 3] = 0;
  dst[ 4] = 0;
  dst[ 5] = v[1];
  dst[ 6] = 0;
  dst[ 7] = 0;
  dst[ 8] = 0;
  dst[ 9] = 0;
  dst[10] = v[2];
  dst[11] = 0;
  dst[12] = 0;
  dst[13] = 0;
  dst[14] = 0;
  dst[15] = 1;

  return dst;
}

/**
 * Scales the given 4-by-4 matrix in each dimension by an amount
 * given by the corresponding entry in the given vector; assumes the vector has
 * three entries.
 * @param {module:twgl/m4.Mat4} m The matrix to be modified.
 * @param {module:twgl/v3.Vec3} v A vector of three entries specifying the
 *     factor by which to scale in each dimension.
 * @param {module:twgl/m4.Mat4} [dst] matrix to hold result. If not passed a new one is created.
 * @return {module:twgl/m4.Mat4} The scaled matrix.
 * @memberOf module:twgl/m4
 */
function scale(m, v, dst) {
  dst = dst || new MatType(16);

  const v0 = v[0];
  const v1 = v[1];
  const v2 = v[2];

  dst[ 0] = v0 * m[0 * 4 + 0];
  dst[ 1] = v0 * m[0 * 4 + 1];
  dst[ 2] = v0 * m[0 * 4 + 2];
  dst[ 3] = v0 * m[0 * 4 + 3];
  dst[ 4] = v1 * m[1 * 4 + 0];
  dst[ 5] = v1 * m[1 * 4 + 1];
  dst[ 6] = v1 * m[1 * 4 + 2];
  dst[ 7] = v1 * m[1 * 4 + 3];
  dst[ 8] = v2 * m[2 * 4 + 0];
  dst[ 9] = v2 * m[2 * 4 + 1];
  dst[10] = v2 * m[2 * 4 + 2];
  dst[11] = v2 * m[2 * 4 + 3];

  if (m !== dst) {
    dst[12] = m[12];
    dst[13] = m[13];
    dst[14] = m[14];
    dst[15] = m[15];
  }

  return dst;
}

/**
 * Takes a 4-by-4 matrix and a vector with 3 entries,
 * interprets the vector as a point, transforms that point by the matrix, and
 * returns the result as a vector with 3 entries.
 * @param {module:twgl/m4.Mat4} m The matrix.
 * @param {module:twgl/v3.Vec3} v The point.
 * @param {module:twgl/v3.Vec3} [dst] optional vec3 to store result. If not passed a new one is created.
 * @return {module:twgl/v3.Vec3} The transformed point.
 * @memberOf module:twgl/m4
 */
function transformPoint(m, v, dst) {
  dst = dst || create();
  const v0 = v[0];
  const v1 = v[1];
  const v2 = v[2];
  const d = v0 * m[0 * 4 + 3] + v1 * m[1 * 4 + 3] + v2 * m[2 * 4 + 3] + m[3 * 4 + 3];

  dst[0] = (v0 * m[0 * 4 + 0] + v1 * m[1 * 4 + 0] + v2 * m[2 * 4 + 0] + m[3 * 4 + 0]) / d;
  dst[1] = (v0 * m[0 * 4 + 1] + v1 * m[1 * 4 + 1] + v2 * m[2 * 4 + 1] + m[3 * 4 + 1]) / d;
  dst[2] = (v0 * m[0 * 4 + 2] + v1 * m[1 * 4 + 2] + v2 * m[2 * 4 + 2] + m[3 * 4 + 2]) / d;

  return dst;
}

/**
 * Takes a 4-by-4 matrix and a vector with 3 entries, interprets the vector as a
 * direction, transforms that direction by the matrix, and returns the result;
 * assumes the transformation of 3-dimensional space represented by the matrix
 * is parallel-preserving, i.e. any combination of rotation, scaling and
 * translation, but not a perspective distortion. Returns a vector with 3
 * entries.
 * @param {module:twgl/m4.Mat4} m The matrix.
 * @param {module:twgl/v3.Vec3} v The direction.
 * @param {module:twgl/v3.Vec3} [dst] optional Vec3 to store result. If not passed a new one is created.
 * @return {module:twgl/v3.Vec3} The transformed direction.
 * @memberOf module:twgl/m4
 */
function transformDirection(m, v, dst) {
  dst = dst || create();

  const v0 = v[0];
  const v1 = v[1];
  const v2 = v[2];

  dst[0] = v0 * m[0 * 4 + 0] + v1 * m[1 * 4 + 0] + v2 * m[2 * 4 + 0];
  dst[1] = v0 * m[0 * 4 + 1] + v1 * m[1 * 4 + 1] + v2 * m[2 * 4 + 1];
  dst[2] = v0 * m[0 * 4 + 2] + v1 * m[1 * 4 + 2] + v2 * m[2 * 4 + 2];

  return dst;
}

/**
 * Takes a 4-by-4 matrix m and a vector v with 3 entries, interprets the vector
 * as a normal to a surface, and computes a vector which is normal upon
 * transforming that surface by the matrix. The effect of this function is the
 * same as transforming v (as a direction) by the inverse-transpose of m.  This
 * function assumes the transformation of 3-dimensional space represented by the
 * matrix is parallel-preserving, i.e. any combination of rotation, scaling and
 * translation, but not a perspective distortion.  Returns a vector with 3
 * entries.
 * @param {module:twgl/m4.Mat4} m The matrix.
 * @param {module:twgl/v3.Vec3} v The normal.
 * @param {module:twgl/v3.Vec3} [dst] The direction. If not passed a new one is created.
 * @return {module:twgl/v3.Vec3} The transformed normal.
 * @memberOf module:twgl/m4
 */
function transformNormal(m, v, dst) {
  dst = dst || create();
  const mi = inverse(m);
  const v0 = v[0];
  const v1 = v[1];
  const v2 = v[2];

  dst[0] = v0 * mi[0 * 4 + 0] + v1 * mi[0 * 4 + 1] + v2 * mi[0 * 4 + 2];
  dst[1] = v0 * mi[1 * 4 + 0] + v1 * mi[1 * 4 + 1] + v2 * mi[1 * 4 + 2];
  dst[2] = v0 * mi[2 * 4 + 0] + v1 * mi[2 * 4 + 1] + v2 * mi[2 * 4 + 2];

  return dst;
}

var m4 = /*#__PURE__*/Object.freeze({
  __proto__: null,
  axisRotate: axisRotate,
  axisRotation: axisRotation,
  copy: copy$1,
  frustum: frustum,
  getAxis: getAxis,
  getTranslation: getTranslation,
  identity: identity,
  inverse: inverse,
  lookAt: lookAt,
  multiply: multiply$1,
  negate: negate$1,
  ortho: ortho,
  perspective: perspective,
  rotateX: rotateX,
  rotateY: rotateY,
  rotateZ: rotateZ,
  rotationX: rotationX,
  rotationY: rotationY,
  rotationZ: rotationZ,
  scale: scale,
  scaling: scaling,
  setAxis: setAxis,
  setDefaultType: setDefaultType$1,
  setTranslation: setTranslation,
  transformDirection: transformDirection,
  transformNormal: transformNormal,
  transformPoint: transformPoint,
  translate: translate,
  translation: translation,
  transpose: transpose
});

/*
 * Copyright 2019 Gregg Tavares
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS IN THE SOFTWARE.
 */

/* DataType */
const BYTE                           = 0x1400;
const UNSIGNED_BYTE                  = 0x1401;
const SHORT                          = 0x1402;
const UNSIGNED_SHORT                 = 0x1403;
const INT                            = 0x1404;
const UNSIGNED_INT                   = 0x1405;
const FLOAT                          = 0x1406;
const UNSIGNED_SHORT_4_4_4_4       = 0x8033;
const UNSIGNED_SHORT_5_5_5_1       = 0x8034;
const UNSIGNED_SHORT_5_6_5         = 0x8363;
const HALF_FLOAT                   = 0x140B;
const UNSIGNED_INT_2_10_10_10_REV  = 0x8368;
const UNSIGNED_INT_10F_11F_11F_REV = 0x8C3B;
const UNSIGNED_INT_5_9_9_9_REV     = 0x8C3E;
const FLOAT_32_UNSIGNED_INT_24_8_REV = 0x8DAD;
const UNSIGNED_INT_24_8            = 0x84FA;

const glTypeToTypedArray = {};
{
  const tt = glTypeToTypedArray;
  tt[BYTE]                           = Int8Array;
  tt[UNSIGNED_BYTE]                  = Uint8Array;
  tt[SHORT]                          = Int16Array;
  tt[UNSIGNED_SHORT]                 = Uint16Array;
  tt[INT]                            = Int32Array;
  tt[UNSIGNED_INT]                   = Uint32Array;
  tt[FLOAT]                          = Float32Array;
  tt[UNSIGNED_SHORT_4_4_4_4]         = Uint16Array;
  tt[UNSIGNED_SHORT_5_5_5_1]         = Uint16Array;
  tt[UNSIGNED_SHORT_5_6_5]           = Uint16Array;
  tt[HALF_FLOAT]                     = Uint16Array;
  tt[UNSIGNED_INT_2_10_10_10_REV]    = Uint32Array;
  tt[UNSIGNED_INT_10F_11F_11F_REV]   = Uint32Array;
  tt[UNSIGNED_INT_5_9_9_9_REV]       = Uint32Array;
  tt[FLOAT_32_UNSIGNED_INT_24_8_REV] = Uint32Array;
  tt[UNSIGNED_INT_24_8]              = Uint32Array;
}

/**
 * Get the GL type for a typedArray
 * @param {ArrayBufferView} typedArray a typedArray
 * @return {number} the GL type for array. For example pass in an `Int8Array` and `gl.BYTE` will
 *   be returned. Pass in a `Uint32Array` and `gl.UNSIGNED_INT` will be returned
 * @memberOf module:twgl/typedArray
 */
function getGLTypeForTypedArray(typedArray) {
  if (typedArray instanceof Int8Array)         { return BYTE; }           // eslint-disable-line
  if (typedArray instanceof Uint8Array)        { return UNSIGNED_BYTE; }  // eslint-disable-line
  if (typedArray instanceof Uint8ClampedArray) { return UNSIGNED_BYTE; }  // eslint-disable-line
  if (typedArray instanceof Int16Array)        { return SHORT; }          // eslint-disable-line
  if (typedArray instanceof Uint16Array)       { return UNSIGNED_SHORT; } // eslint-disable-line
  if (typedArray instanceof Int32Array)        { return INT; }            // eslint-disable-line
  if (typedArray instanceof Uint32Array)       { return UNSIGNED_INT; }   // eslint-disable-line
  if (typedArray instanceof Float32Array)      { return FLOAT; }          // eslint-disable-line
  throw new Error('unsupported typed array type');
}

/**
 * Get the GL type for a typedArray type
 * @param {ArrayBufferView} typedArrayType a typedArray constructor
 * @return {number} the GL type for type. For example pass in `Int8Array` and `gl.BYTE` will
 *   be returned. Pass in `Uint32Array` and `gl.UNSIGNED_INT` will be returned
 * @memberOf module:twgl/typedArray
 */
function getGLTypeForTypedArrayType(typedArrayType) {
  if (typedArrayType === Int8Array)         { return BYTE; }           // eslint-disable-line
  if (typedArrayType === Uint8Array)        { return UNSIGNED_BYTE; }  // eslint-disable-line
  if (typedArrayType === Uint8ClampedArray) { return UNSIGNED_BYTE; }  // eslint-disable-line
  if (typedArrayType === Int16Array)        { return SHORT; }          // eslint-disable-line
  if (typedArrayType === Uint16Array)       { return UNSIGNED_SHORT; } // eslint-disable-line
  if (typedArrayType === Int32Array)        { return INT; }            // eslint-disable-line
  if (typedArrayType === Uint32Array)       { return UNSIGNED_INT; }   // eslint-disable-line
  if (typedArrayType === Float32Array)      { return FLOAT; }          // eslint-disable-line
  throw new Error('unsupported typed array type');
}

/**
 * Get the typed array constructor for a given GL type
 * @param {number} type the GL type. (eg: `gl.UNSIGNED_INT`)
 * @return {function} the constructor for a the corresponding typed array. (eg. `Uint32Array`).
 * @memberOf module:twgl/typedArray
 */
function getTypedArrayTypeForGLType(type) {
  const CTOR = glTypeToTypedArray[type];
  if (!CTOR) {
    throw new Error('unknown gl type');
  }
  return CTOR;
}

const isArrayBuffer = typeof SharedArrayBuffer !== 'undefined'
  ? function isArrayBufferOrSharedArrayBuffer(a) {
    return a && a.buffer && (a.buffer instanceof ArrayBuffer || a.buffer instanceof SharedArrayBuffer);
  }
  : function isArrayBuffer(a) {
    return a && a.buffer && a.buffer instanceof ArrayBuffer;
  };

var typedarrays = /*#__PURE__*/Object.freeze({
  __proto__: null,
  getGLTypeForTypedArray: getGLTypeForTypedArray,
  getGLTypeForTypedArrayType: getGLTypeForTypedArrayType,
  getTypedArrayTypeForGLType: getTypedArrayTypeForGLType,
  isArrayBuffer: isArrayBuffer
});

/*
 * Copyright 2019 Gregg Tavares
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS IN THE SOFTWARE.
 */

/* eslint no-console: "off" */

/**
 * Copy named properties
 *
 * @param {string[]} names names of properties to copy
 * @param {object} src object to copy properties from
 * @param {object} dst object to copy properties to
 * @private
 */
function copyNamedProperties(names, src, dst) {
  names.forEach(function(name) {
    const value = src[name];
    if (value !== undefined) {
      dst[name] = value;
    }
  });
}

/**
 * Copies properties from source to dest only if a matching key is in dest
 *
 * @param {Object.<string, ?>} src the source
 * @param {Object.<string, ?>} dst the dest
 * @private
 */
function copyExistingProperties(src, dst) {
  Object.keys(dst).forEach(function(key) {
    if (dst.hasOwnProperty(key) && src.hasOwnProperty(key)) {  /* eslint no-prototype-builtins: 0 */
      dst[key] = src[key];
    }
  });
}

function error(...args) {
  console.error(...args);
}

function warn(...args) {
  console.warn(...args);
}

function isBuffer(gl, t) {
  return typeof WebGLBuffer !== 'undefined' && t instanceof WebGLBuffer;
}

function isRenderbuffer(gl, t) {
  return typeof WebGLRenderbuffer !== 'undefined' && t instanceof WebGLRenderbuffer;
}

function isShader(gl, t) {
  return typeof WebGLShader !== 'undefined' && t instanceof WebGLShader;
}

function isTexture(gl, t) {
  return typeof WebGLTexture !== 'undefined' && t instanceof WebGLTexture;
}

function isSampler(gl, t) {
  return typeof WebGLSampler !== 'undefined' && t instanceof WebGLSampler;
}

/*
 * Copyright 2019 Gregg Tavares
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS IN THE SOFTWARE.
 */

const STATIC_DRAW                  = 0x88e4;
const ARRAY_BUFFER                 = 0x8892;
const ELEMENT_ARRAY_BUFFER         = 0x8893;
const BUFFER_SIZE                  = 0x8764;

const BYTE$1                         = 0x1400;
const UNSIGNED_BYTE$1                = 0x1401;
const SHORT$1                        = 0x1402;
const UNSIGNED_SHORT$1               = 0x1403;
const INT$1                          = 0x1404;
const UNSIGNED_INT$1                 = 0x1405;
const FLOAT$1                        = 0x1406;
const defaults = {
  attribPrefix: "",
};

/**
 * Sets the default attrib prefix
 *
 * When writing shaders I prefer to name attributes with `a_`, uniforms with `u_` and varyings with `v_`
 * as it makes it clear where they came from. But, when building geometry I prefer using un-prefixed names.
 *
 * In other words I'll create arrays of geometry like this
 *
 *     var arrays = {
 *       position: ...
 *       normal: ...
 *       texcoord: ...
 *     };
 *
 * But need those mapped to attributes and my attributes start with `a_`.
 *
 * @deprecated see {@link module:twgl.setDefaults}
 * @param {string} prefix prefix for attribs
 * @memberOf module:twgl/attributes
 */
function setAttributePrefix(prefix) {
  defaults.attribPrefix = prefix;
}

function setDefaults(newDefaults) {
  copyExistingProperties(newDefaults, defaults);
}

function setBufferFromTypedArray(gl, type, buffer, array, drawType) {
  gl.bindBuffer(type, buffer);
  gl.bufferData(type, array, drawType || STATIC_DRAW);
}

/**
 * Given typed array creates a WebGLBuffer and copies the typed array
 * into it.
 *
 * @param {WebGLRenderingContext} gl A WebGLRenderingContext
 * @param {ArrayBuffer|SharedArrayBuffer|ArrayBufferView|WebGLBuffer} typedArray the typed array. Note: If a WebGLBuffer is passed in it will just be returned. No action will be taken
 * @param {number} [type] the GL bind type for the buffer. Default = `gl.ARRAY_BUFFER`.
 * @param {number} [drawType] the GL draw type for the buffer. Default = 'gl.STATIC_DRAW`.
 * @return {WebGLBuffer} the created WebGLBuffer
 * @memberOf module:twgl/attributes
 */
function createBufferFromTypedArray(gl, typedArray, type, drawType) {
  if (isBuffer(gl, typedArray)) {
    return typedArray;
  }
  type = type || ARRAY_BUFFER;
  const buffer = gl.createBuffer();
  setBufferFromTypedArray(gl, type, buffer, typedArray, drawType);
  return buffer;
}

function isIndices(name) {
  return name === "indices";
}

// This is really just a guess. Though I can't really imagine using
// anything else? Maybe for some compression?
function getNormalizationForTypedArray(typedArray) {
  if (typedArray instanceof Int8Array)    { return true; }  // eslint-disable-line
  if (typedArray instanceof Uint8Array)   { return true; }  // eslint-disable-line
  return false;
}

// This is really just a guess. Though I can't really imagine using
// anything else? Maybe for some compression?
function getNormalizationForTypedArrayType(typedArrayType) {
  if (typedArrayType === Int8Array)    { return true; }  // eslint-disable-line
  if (typedArrayType === Uint8Array)   { return true; }  // eslint-disable-line
  return false;
}

function getArray(array) {
  return array.length ? array : array.data;
}

const texcoordRE = /coord|texture/i;
const colorRE = /color|colour/i;

function guessNumComponentsFromName(name, length) {
  let numComponents;
  if (texcoordRE.test(name)) {
    numComponents = 2;
  } else if (colorRE.test(name)) {
    numComponents = 4;
  } else {
    numComponents = 3;  // position, normals, indices ...
  }

  if (length % numComponents > 0) {
    throw new Error(`Can not guess numComponents for attribute '${name}'. Tried ${numComponents} but ${length} values is not evenly divisible by ${numComponents}. You should specify it.`);
  }

  return numComponents;
}

function getNumComponents(array, arrayName) {
  return array.numComponents || array.size || guessNumComponentsFromName(arrayName, getArray(array).length);
}

function makeTypedArray(array, name) {
  if (isArrayBuffer(array)) {
    return array;
  }

  if (isArrayBuffer(array.data)) {
    return array.data;
  }

  if (Array.isArray(array)) {
    array = {
      data: array,
    };
  }

  let Type = array.type;
  if (!Type) {
    if (isIndices(name)) {
      Type = Uint16Array;
    } else {
      Type = Float32Array;
    }
  }
  return new Type(array.data);
}

/**
 * The info for an attribute. This is effectively just the arguments to `gl.vertexAttribPointer` plus the WebGLBuffer
 * for the attribute.
 *
 * @typedef {Object} AttribInfo
 * @property {number[]|ArrayBufferView} [value] a constant value for the attribute. Note: if this is set the attribute will be
 *    disabled and set to this constant value and all other values will be ignored.
 * @property {number} [numComponents] the number of components for this attribute.
 * @property {number} [size] synonym for `numComponents`.
 * @property {number} [type] the type of the attribute (eg. `gl.FLOAT`, `gl.UNSIGNED_BYTE`, etc...) Default = `gl.FLOAT`
 * @property {boolean} [normalize] whether or not to normalize the data. Default = false
 * @property {number} [offset] offset into buffer in bytes. Default = 0
 * @property {number} [stride] the stride in bytes per element. Default = 0
 * @property {number} [divisor] the divisor in instances. Default = undefined. Note: undefined = don't call gl.vertexAttribDivisor
 *    where as anything else = do call it with this value
 * @property {WebGLBuffer} buffer the buffer that contains the data for this attribute
 * @property {number} [drawType] the draw type passed to gl.bufferData. Default = gl.STATIC_DRAW
 * @memberOf module:twgl
 */

/**
 * Use this type of array spec when TWGL can't guess the type or number of components of an array
 * @typedef {Object} FullArraySpec
 * @property {number[]|ArrayBufferView} [value] a constant value for the attribute. Note: if this is set the attribute will be
 *    disabled and set to this constant value and all other values will be ignored.
 * @property {(number|number[]|ArrayBufferView)} data The data of the array. A number alone becomes the number of elements of type.
 * @property {number} [numComponents] number of components for `vertexAttribPointer`. Default is based on the name of the array.
 *    If `coord` is in the name assumes `numComponents = 2`.
 *    If `color` is in the name assumes `numComponents = 4`.
 *    otherwise assumes `numComponents = 3`
 * @property {constructor} [type] type. This is only used if `data` is a JavaScript array. It is the constructor for the typedarray. (eg. `Uint8Array`).
 * For example if you want colors in a `Uint8Array` you might have a `FullArraySpec` like `{ type: Uint8Array, data: [255,0,255,255, ...], }`.
 * @property {number} [size] synonym for `numComponents`.
 * @property {boolean} [normalize] normalize for `vertexAttribPointer`. Default is true if type is `Int8Array` or `Uint8Array` otherwise false.
 * @property {number} [stride] stride for `vertexAttribPointer`. Default = 0
 * @property {number} [offset] offset for `vertexAttribPointer`. Default = 0
 * @property {number} [divisor] divisor for `vertexAttribDivisor`. Default = undefined. Note: undefined = don't call gl.vertexAttribDivisor
 *    where as anything else = do call it with this value
 * @property {string} [attrib] name of attribute this array maps to. Defaults to same name as array prefixed by the default attribPrefix.
 * @property {string} [name] synonym for `attrib`.
 * @property {string} [attribName] synonym for `attrib`.
 * @property {WebGLBuffer} [buffer] Buffer to use for this attribute. This lets you use your own buffer
 *    but you will need to supply `numComponents` and `type`. You can effectively pass an `AttribInfo`
 *    to provide this. Example:
 *
 *         const bufferInfo1 = twgl.createBufferInfoFromArrays(gl, {
 *           position: [1, 2, 3, ... ],
 *         });
 *         const bufferInfo2 = twgl.createBufferInfoFromArrays(gl, {
 *           position: bufferInfo1.attribs.position,  // use the same buffer from bufferInfo1
 *         });
 *
 * @memberOf module:twgl
 */

/**
 * An individual array in {@link module:twgl.Arrays}
 *
 * When passed to {@link module:twgl.createBufferInfoFromArrays} if an ArraySpec is `number[]` or `ArrayBufferView`
 * the types will be guessed based on the name. `indices` will be `Uint16Array`, everything else will
 * be `Float32Array`. If an ArraySpec is a number it's the number of floats for an empty (zeroed) buffer.
 *
 * @typedef {(number|number[]|ArrayBufferView|module:twgl.FullArraySpec)} ArraySpec
 * @memberOf module:twgl
 */

/**
 * This is a JavaScript object of arrays by name. The names should match your shader's attributes. If your
 * attributes have a common prefix you can specify it by calling {@link module:twgl.setAttributePrefix}.
 *
 *     Bare JavaScript Arrays
 *
 *         var arrays = {
 *            position: [-1, 1, 0],
 *            normal: [0, 1, 0],
 *            ...
 *         }
 *
 *     Bare TypedArrays
 *
 *         var arrays = {
 *            position: new Float32Array([-1, 1, 0]),
 *            color: new Uint8Array([255, 128, 64, 255]),
 *            ...
 *         }
 *
 * *   Will guess at `numComponents` if not specified based on name.
 *
 *     If `coord` is in the name assumes `numComponents = 2`
 *
 *     If `color` is in the name assumes `numComponents = 4`
 *
 *     otherwise assumes `numComponents = 3`
 *
 * Objects with various fields. See {@link module:twgl.FullArraySpec}.
 *
 *     var arrays = {
 *       position: { numComponents: 3, data: [0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0], },
 *       texcoord: { numComponents: 2, data: [0, 0, 0, 1, 1, 0, 1, 1],                 },
 *       normal:   { numComponents: 3, data: [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1],     },
 *       indices:  { numComponents: 3, data: [0, 1, 2, 1, 2, 3],                       },
 *     };
 *
 * @typedef {Object.<string, module:twgl.ArraySpec>} Arrays
 * @memberOf module:twgl
 */


/**
 * Creates a set of attribute data and WebGLBuffers from set of arrays
 *
 * Given
 *
 *      var arrays = {
 *        position: { numComponents: 3, data: [0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0], },
 *        texcoord: { numComponents: 2, data: [0, 0, 0, 1, 1, 0, 1, 1],                 },
 *        normal:   { numComponents: 3, data: [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1],     },
 *        color:    { numComponents: 4, data: [255, 255, 255, 255, 255, 0, 0, 255, 0, 0, 255, 255], type: Uint8Array, },
 *        indices:  { numComponents: 3, data: [0, 1, 2, 1, 2, 3],                       },
 *      };
 *
 * returns something like
 *
 *      var attribs = {
 *        position: { numComponents: 3, type: gl.FLOAT,         normalize: false, buffer: WebGLBuffer, },
 *        texcoord: { numComponents: 2, type: gl.FLOAT,         normalize: false, buffer: WebGLBuffer, },
 *        normal:   { numComponents: 3, type: gl.FLOAT,         normalize: false, buffer: WebGLBuffer, },
 *        color:    { numComponents: 4, type: gl.UNSIGNED_BYTE, normalize: true,  buffer: WebGLBuffer, },
 *      };
 *
 * notes:
 *
 * *   Arrays can take various forms
 *
 *     Bare JavaScript Arrays
 *
 *         var arrays = {
 *            position: [-1, 1, 0],
 *            normal: [0, 1, 0],
 *            ...
 *         }
 *
 *     Bare TypedArrays
 *
 *         var arrays = {
 *            position: new Float32Array([-1, 1, 0]),
 *            color: new Uint8Array([255, 128, 64, 255]),
 *            ...
 *         }
 *
 * *   Will guess at `numComponents` if not specified based on name.
 *
 *     If `coord` is in the name assumes `numComponents = 2`
 *
 *     If `color` is in the name assumes `numComponents = 4`
 *
 *     otherwise assumes `numComponents = 3`
 *
 * @param {WebGLRenderingContext} gl The webgl rendering context.
 * @param {module:twgl.Arrays} arrays The arrays
 * @param {module:twgl.BufferInfo} [srcBufferInfo] a BufferInfo to copy from
 *   This lets you share buffers. Any arrays you supply will override
 *   the buffers from srcBufferInfo.
 * @return {Object.<string, module:twgl.AttribInfo>} the attribs
 * @memberOf module:twgl/attributes
 */
function createAttribsFromArrays(gl, arrays) {
  const attribs = {};
  Object.keys(arrays).forEach(function(arrayName) {
    if (!isIndices(arrayName)) {
      const array = arrays[arrayName];
      const attribName = array.attrib || array.name || array.attribName || (defaults.attribPrefix + arrayName);
      if (array.value) {
        if (!Array.isArray(array.value) && !isArrayBuffer(array.value)) {
          throw new Error('array.value is not array or typedarray');
        }
        attribs[attribName] = {
          value: array.value,
        };
      } else {
        let buffer;
        let type;
        let normalization;
        let numComponents;
        if (array.buffer && array.buffer instanceof WebGLBuffer) {
          buffer = array.buffer;
          numComponents = array.numComponents || array.size;
          type = array.type;
          normalization = array.normalize;
        } else if (typeof array === "number" || typeof array.data === "number") {
          const numValues = array.data || array;
          const arrayType = array.type || Float32Array;
          const numBytes = numValues * arrayType.BYTES_PER_ELEMENT;
          type = getGLTypeForTypedArrayType(arrayType);
          normalization = array.normalize !== undefined ? array.normalize : getNormalizationForTypedArrayType(arrayType);
          numComponents = array.numComponents || array.size || guessNumComponentsFromName(arrayName, numValues);
          buffer = gl.createBuffer();
          gl.bindBuffer(ARRAY_BUFFER, buffer);
          gl.bufferData(ARRAY_BUFFER, numBytes, array.drawType || STATIC_DRAW);
        } else {
          const typedArray = makeTypedArray(array, arrayName);
          buffer = createBufferFromTypedArray(gl, typedArray, undefined, array.drawType);
          type = getGLTypeForTypedArray(typedArray);
          normalization = array.normalize !== undefined ? array.normalize : getNormalizationForTypedArray(typedArray);
          numComponents = getNumComponents(array, arrayName);
        }
        attribs[attribName] = {
          buffer:        buffer,
          numComponents: numComponents,
          type:          type,
          normalize:     normalization,
          stride:        array.stride || 0,
          offset:        array.offset || 0,
          divisor:       array.divisor === undefined ? undefined : array.divisor,
          drawType:      array.drawType,
        };
      }
    }
  });
  gl.bindBuffer(ARRAY_BUFFER, null);
  return attribs;
}

/**
 * Sets the contents of a buffer attached to an attribInfo
 *
 * This is helper function to dynamically update a buffer.
 *
 * Let's say you make a bufferInfo
 *
 *     var arrays = {
 *        position: new Float32Array([0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0]),
 *        texcoord: new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]),
 *        normal:   new Float32Array([0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1]),
 *        indices:  new Uint16Array([0, 1, 2, 1, 2, 3]),
 *     };
 *     var bufferInfo = twgl.createBufferInfoFromArrays(gl, arrays);
 *
 *  And you want to dynamically update the positions. You could do this
 *
 *     // assuming arrays.position has already been updated with new data.
 *     twgl.setAttribInfoBufferFromArray(gl, bufferInfo.attribs.position, arrays.position);
 *
 * @param {WebGLRenderingContext} gl
 * @param {AttribInfo} attribInfo The attribInfo who's buffer contents to set. NOTE: If you have an attribute prefix
 *   the name of the attribute will include the prefix.
 * @param {ArraySpec} array Note: it is arguably inefficient to pass in anything but a typed array because anything
 *    else will have to be converted to a typed array before it can be used by WebGL. During init time that
 *    inefficiency is usually not important but if you're updating data dynamically best to be efficient.
 * @param {number} [offset] an optional offset into the buffer. This is only an offset into the WebGL buffer
 *    not the array. To pass in an offset into the array itself use a typed array and create an `ArrayBufferView`
 *    for the portion of the array you want to use.
 *
 *        var someArray = new Float32Array(1000); // an array with 1000 floats
 *        var someSubArray = new Float32Array(someArray.buffer, offsetInBytes, sizeInUnits); // a view into someArray
 *
 *    Now you can pass `someSubArray` into setAttribInfoBufferFromArray`
 * @memberOf module:twgl/attributes
 */
function setAttribInfoBufferFromArray(gl, attribInfo, array, offset) {
  array = makeTypedArray(array);
  if (offset !== undefined) {
    gl.bindBuffer(ARRAY_BUFFER, attribInfo.buffer);
    gl.bufferSubData(ARRAY_BUFFER, offset, array);
  } else {
    setBufferFromTypedArray(gl, ARRAY_BUFFER, attribInfo.buffer, array, attribInfo.drawType);
  }
}

function getBytesPerValueForGLType(gl, type) {
  if (type === BYTE$1)           return 1;  // eslint-disable-line
  if (type === UNSIGNED_BYTE$1)  return 1;  // eslint-disable-line
  if (type === SHORT$1)          return 2;  // eslint-disable-line
  if (type === UNSIGNED_SHORT$1) return 2;  // eslint-disable-line
  if (type === INT$1)            return 4;  // eslint-disable-line
  if (type === UNSIGNED_INT$1)   return 4;  // eslint-disable-line
  if (type === FLOAT$1)          return 4;  // eslint-disable-line
  return 0;
}

// Tries to get the number of elements from a set of arrays.
const positionKeys = ['position', 'positions', 'a_position'];
function getNumElementsFromNonIndexedArrays(arrays) {
  let key;
  let ii;
  for (ii = 0; ii < positionKeys.length; ++ii) {
    key = positionKeys[ii];
    if (key in arrays) {
      break;
    }
  }
  if (ii === positionKeys.length) {
    key = Object.keys(arrays)[0];
  }
  const array = arrays[key];
  const length = getArray(array).length;
  const numComponents = getNumComponents(array, key);
  const numElements = length / numComponents;
  if (length % numComponents > 0) {
    throw new Error(`numComponents ${numComponents} not correct for length ${length}`);
  }
  return numElements;
}

function getNumElementsFromAttributes(gl, attribs) {
  let key;
  let ii;
  for (ii = 0; ii < positionKeys.length; ++ii) {
    key = positionKeys[ii];
    if (key in attribs) {
      break;
    }
    key = defaults.attribPrefix + key;
    if (key in attribs) {
      break;
    }
  }
  if (ii === positionKeys.length) {
    key = Object.keys(attribs)[0];
  }
  const attrib = attribs[key];
  gl.bindBuffer(ARRAY_BUFFER, attrib.buffer);
  const numBytes = gl.getBufferParameter(ARRAY_BUFFER, BUFFER_SIZE);
  gl.bindBuffer(ARRAY_BUFFER, null);

  const bytesPerValue = getBytesPerValueForGLType(gl, attrib.type);
  const totalElements = numBytes / bytesPerValue;
  const numComponents = attrib.numComponents || attrib.size;
  // TODO: check stride
  const numElements = totalElements / numComponents;
  if (numElements % 1 !== 0) {
    throw new Error(`numComponents ${numComponents} not correct for length ${length}`);
  }
  return numElements;
}

/**
 * @typedef {Object} BufferInfo
 * @property {number} numElements The number of elements to pass to `gl.drawArrays` or `gl.drawElements`.
 * @property {number} [elementType] The type of indices `UNSIGNED_BYTE`, `UNSIGNED_SHORT` etc..
 * @property {WebGLBuffer} [indices] The indices `ELEMENT_ARRAY_BUFFER` if any indices exist.
 * @property {Object.<string, module:twgl.AttribInfo>} [attribs] The attribs appropriate to call `setAttributes`
 * @memberOf module:twgl
 */

/**
 * Creates a BufferInfo from an object of arrays.
 *
 * This can be passed to {@link module:twgl.setBuffersAndAttributes} and to
 * {@link module:twgl:drawBufferInfo}.
 *
 * Given an object like
 *
 *     var arrays = {
 *       position: { numComponents: 3, data: [0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0], },
 *       texcoord: { numComponents: 2, data: [0, 0, 0, 1, 1, 0, 1, 1],                 },
 *       normal:   { numComponents: 3, data: [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1],     },
 *       indices:  { numComponents: 3, data: [0, 1, 2, 1, 2, 3],                       },
 *     };
 *
 *  Creates an BufferInfo like this
 *
 *     bufferInfo = {
 *       numElements: 4,        // or whatever the number of elements is
 *       indices: WebGLBuffer,  // this property will not exist if there are no indices
 *       attribs: {
 *         position: { buffer: WebGLBuffer, numComponents: 3, },
 *         normal:   { buffer: WebGLBuffer, numComponents: 3, },
 *         texcoord: { buffer: WebGLBuffer, numComponents: 2, },
 *       },
 *     };
 *
 *  The properties of arrays can be JavaScript arrays in which case the number of components
 *  will be guessed.
 *
 *     var arrays = {
 *        position: [0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0],
 *        texcoord: [0, 0, 0, 1, 1, 0, 1, 1],
 *        normal:   [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1],
 *        indices:  [0, 1, 2, 1, 2, 3],
 *     };
 *
 *  They can also be TypedArrays
 *
 *     var arrays = {
 *        position: new Float32Array([0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0]),
 *        texcoord: new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]),
 *        normal:   new Float32Array([0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1]),
 *        indices:  new Uint16Array([0, 1, 2, 1, 2, 3]),
 *     };
 *
 *  Or AugmentedTypedArrays
 *
 *     var positions = createAugmentedTypedArray(3, 4);
 *     var texcoords = createAugmentedTypedArray(2, 4);
 *     var normals   = createAugmentedTypedArray(3, 4);
 *     var indices   = createAugmentedTypedArray(3, 2, Uint16Array);
 *
 *     positions.push([0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0]);
 *     texcoords.push([0, 0, 0, 1, 1, 0, 1, 1]);
 *     normals.push([0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1]);
 *     indices.push([0, 1, 2, 1, 2, 3]);
 *
 *     var arrays = {
 *        position: positions,
 *        texcoord: texcoords,
 *        normal:   normals,
 *        indices:  indices,
 *     };
 *
 * For the last example it is equivalent to
 *
 *     var bufferInfo = {
 *       attribs: {
 *         position: { numComponents: 3, buffer: gl.createBuffer(), },
 *         texcoord: { numComponents: 2, buffer: gl.createBuffer(), },
 *         normal: { numComponents: 3, buffer: gl.createBuffer(), },
 *       },
 *       indices: gl.createBuffer(),
 *       numElements: 6,
 *     };
 *
 *     gl.bindBuffer(gl.ARRAY_BUFFER, bufferInfo.attribs.position.buffer);
 *     gl.bufferData(gl.ARRAY_BUFFER, arrays.position, gl.STATIC_DRAW);
 *     gl.bindBuffer(gl.ARRAY_BUFFER, bufferInfo.attribs.texcoord.buffer);
 *     gl.bufferData(gl.ARRAY_BUFFER, arrays.texcoord, gl.STATIC_DRAW);
 *     gl.bindBuffer(gl.ARRAY_BUFFER, bufferInfo.attribs.normal.buffer);
 *     gl.bufferData(gl.ARRAY_BUFFER, arrays.normal, gl.STATIC_DRAW);
 *     gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, bufferInfo.indices);
 *     gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, arrays.indices, gl.STATIC_DRAW);
 *
 * @param {WebGLRenderingContext} gl A WebGLRenderingContext
 * @param {module:twgl.Arrays} arrays Your data
 * @param {module:twgl.BufferInfo} [srcBufferInfo] An existing
 *        buffer info to start from. WebGLBuffers etc specified
 *        in the srcBufferInfo will be used in a new BufferInfo
 *        with any arrays specified overriding the ones in
 *        srcBufferInfo.
 * @return {module:twgl.BufferInfo} A BufferInfo
 * @memberOf module:twgl/attributes
 */
function createBufferInfoFromArrays(gl, arrays, srcBufferInfo) {
  const newAttribs = createAttribsFromArrays(gl, arrays);
  const bufferInfo = Object.assign({}, srcBufferInfo ? srcBufferInfo : {});
  bufferInfo.attribs = Object.assign({}, srcBufferInfo ? srcBufferInfo.attribs : {}, newAttribs);
  const indices = arrays.indices;
  if (indices) {
    const newIndices = makeTypedArray(indices, "indices");
    bufferInfo.indices = createBufferFromTypedArray(gl, newIndices, ELEMENT_ARRAY_BUFFER);
    bufferInfo.numElements = newIndices.length;
    bufferInfo.elementType = getGLTypeForTypedArray(newIndices);
  } else if (!bufferInfo.numElements) {
    bufferInfo.numElements = getNumElementsFromAttributes(gl, bufferInfo.attribs);
  }

  return bufferInfo;
}

/**
 * Creates a buffer from an array, typed array, or array spec
 *
 * Given something like this
 *
 *     [1, 2, 3],
 *
 * or
 *
 *     new Uint16Array([1,2,3]);
 *
 * or
 *
 *     {
 *        data: [1, 2, 3],
 *        type: Uint8Array,
 *     }
 *
 * returns a WebGLBuffer that contains the given data.
 *
 * @param {WebGLRenderingContext} gl A WebGLRenderingContext.
 * @param {module:twgl.ArraySpec} array an array, typed array, or array spec.
 * @param {string} arrayName name of array. Used to guess the type if type can not be derived otherwise.
 * @return {WebGLBuffer} a WebGLBuffer containing the data in array.
 * @memberOf module:twgl/attributes
 */
function createBufferFromArray(gl, array, arrayName) {
  const type = arrayName === "indices" ? ELEMENT_ARRAY_BUFFER : ARRAY_BUFFER;
  const typedArray = makeTypedArray(array, arrayName);
  return createBufferFromTypedArray(gl, typedArray, type);
}

/**
 * Creates buffers from arrays or typed arrays
 *
 * Given something like this
 *
 *     var arrays = {
 *        positions: [1, 2, 3],
 *        normals: [0, 0, 1],
 *     }
 *
 * returns something like
 *
 *     buffers = {
 *       positions: WebGLBuffer,
 *       normals: WebGLBuffer,
 *     }
 *
 * If the buffer is named 'indices' it will be made an ELEMENT_ARRAY_BUFFER.
 *
 * @param {WebGLRenderingContext} gl A WebGLRenderingContext.
 * @param {module:twgl.Arrays} arrays
 * @return {Object<string, WebGLBuffer>} returns an object with one WebGLBuffer per array
 * @memberOf module:twgl/attributes
 */
function createBuffersFromArrays(gl, arrays) {
  const buffers = { };
  Object.keys(arrays).forEach(function(key) {
    buffers[key] = createBufferFromArray(gl, arrays[key], key);
  });

  // Ugh!
  if (arrays.indices) {
    buffers.numElements = arrays.indices.length;
    buffers.elementType = getGLTypeForTypedArray(makeTypedArray(arrays.indices));
  } else {
    buffers.numElements = getNumElementsFromNonIndexedArrays(arrays);
  }

  return buffers;
}

var attributes = /*#__PURE__*/Object.freeze({
  __proto__: null,
  createAttribsFromArrays: createAttribsFromArrays,
  createBuffersFromArrays: createBuffersFromArrays,
  createBufferFromArray: createBufferFromArray,
  createBufferFromTypedArray: createBufferFromTypedArray,
  createBufferInfoFromArrays: createBufferInfoFromArrays,
  setAttribInfoBufferFromArray: setAttribInfoBufferFromArray,
  setAttributePrefix: setAttributePrefix,
  setAttributeDefaults_: setDefaults,
  getNumComponents_: getNumComponents,
  getArray_: getArray
});

/*
 * Copyright 2019 Gregg Tavares
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS IN THE SOFTWARE.
 */

const getArray$1 = getArray;  // eslint-disable-line
const getNumComponents$1 = getNumComponents;  // eslint-disable-line

/**
 * @typedef {(Int8Array|Uint8Array|Int16Array|Uint16Array|Int32Array|Uint32Array|Float32Array)} TypedArray
 */

/**
 * Add `push` to a typed array. It just keeps a 'cursor'
 * and allows use to `push` values into the array so we
 * don't have to manually compute offsets
 * @param {TypedArray} typedArray TypedArray to augment
 * @param {number} numComponents number of components.
 * @private
 */
function augmentTypedArray(typedArray, numComponents) {
  let cursor = 0;
  typedArray.push = function() {
    for (let ii = 0; ii < arguments.length; ++ii) {
      const value = arguments[ii];
      if (value instanceof Array || isArrayBuffer(value)) {
        for (let jj = 0; jj < value.length; ++jj) {
          typedArray[cursor++] = value[jj];
        }
      } else {
        typedArray[cursor++] = value;
      }
    }
  };
  typedArray.reset = function(opt_index) {
    cursor = opt_index || 0;
  };
  typedArray.numComponents = numComponents;
  Object.defineProperty(typedArray, 'numElements', {
    get: function() {
      return this.length / this.numComponents | 0;
    },
  });
  return typedArray;
}

/**
 * creates a typed array with a `push` function attached
 * so that you can easily *push* values.
 *
 * `push` can take multiple arguments. If an argument is an array each element
 * of the array will be added to the typed array.
 *
 * Example:
 *
 *     const array = createAugmentedTypedArray(3, 2);  // creates a Float32Array with 6 values
 *     array.push(1, 2, 3);
 *     array.push([4, 5, 6]);
 *     // array now contains [1, 2, 3, 4, 5, 6]
 *
 * Also has `numComponents` and `numElements` properties.
 *
 * @param {number} numComponents number of components
 * @param {number} numElements number of elements. The total size of the array will be `numComponents * numElements`.
 * @param {constructor} opt_type A constructor for the type. Default = `Float32Array`.
 * @return {ArrayBufferView} A typed array.
 * @memberOf module:twgl/primitives
 */
function createAugmentedTypedArray(numComponents, numElements, opt_type) {
  const Type = opt_type || Float32Array;
  return augmentTypedArray(new Type(numComponents * numElements), numComponents);
}

function allButIndices(name) {
  return name !== "indices";
}

/**
 * Given indexed vertices creates a new set of vertices un-indexed by expanding the indexed vertices.
 * @param {Object.<string, TypedArray>} vertices The indexed vertices to deindex
 * @return {Object.<string, TypedArray>} The deindexed vertices
 * @memberOf module:twgl/primitives
 */
function deindexVertices(vertices) {
  const indices = vertices.indices;
  const newVertices = {};
  const numElements = indices.length;

  function expandToUnindexed(channel) {
    const srcBuffer = vertices[channel];
    const numComponents = srcBuffer.numComponents;
    const dstBuffer = createAugmentedTypedArray(numComponents, numElements, srcBuffer.constructor);
    for (let ii = 0; ii < numElements; ++ii) {
      const ndx = indices[ii];
      const offset = ndx * numComponents;
      for (let jj = 0; jj < numComponents; ++jj) {
        dstBuffer.push(srcBuffer[offset + jj]);
      }
    }
    newVertices[channel] = dstBuffer;
  }

  Object.keys(vertices).filter(allButIndices).forEach(expandToUnindexed);

  return newVertices;
}

/**
 * flattens the normals of deindexed vertices in place.
 * @param {Object.<string, TypedArray>} vertices The deindexed vertices who's normals to flatten
 * @return {Object.<string, TypedArray>} The flattened vertices (same as was passed in)
 * @memberOf module:twgl/primitives
 */
function flattenNormals(vertices) {
  if (vertices.indices) {
    throw new Error('can not flatten normals of indexed vertices. deindex them first');
  }

  const normals = vertices.normal;
  const numNormals = normals.length;
  for (let ii = 0; ii < numNormals; ii += 9) {
    // pull out the 3 normals for this triangle
    const nax = normals[ii + 0];
    const nay = normals[ii + 1];
    const naz = normals[ii + 2];

    const nbx = normals[ii + 3];
    const nby = normals[ii + 4];
    const nbz = normals[ii + 5];

    const ncx = normals[ii + 6];
    const ncy = normals[ii + 7];
    const ncz = normals[ii + 8];

    // add them
    let nx = nax + nbx + ncx;
    let ny = nay + nby + ncy;
    let nz = naz + nbz + ncz;

    // normalize them
    const length = Math.sqrt(nx * nx + ny * ny + nz * nz);

    nx /= length;
    ny /= length;
    nz /= length;

    // copy them back in
    normals[ii + 0] = nx;
    normals[ii + 1] = ny;
    normals[ii + 2] = nz;

    normals[ii + 3] = nx;
    normals[ii + 4] = ny;
    normals[ii + 5] = nz;

    normals[ii + 6] = nx;
    normals[ii + 7] = ny;
    normals[ii + 8] = nz;
  }

  return vertices;
}

function applyFuncToV3Array(array, matrix, fn) {
  const len = array.length;
  const tmp = new Float32Array(3);
  for (let ii = 0; ii < len; ii += 3) {
    fn(matrix, [array[ii], array[ii + 1], array[ii + 2]], tmp);
    array[ii    ] = tmp[0];
    array[ii + 1] = tmp[1];
    array[ii + 2] = tmp[2];
  }
}

function transformNormal$1(mi, v, dst) {
  dst = dst || create();
  const v0 = v[0];
  const v1 = v[1];
  const v2 = v[2];

  dst[0] = v0 * mi[0 * 4 + 0] + v1 * mi[0 * 4 + 1] + v2 * mi[0 * 4 + 2];
  dst[1] = v0 * mi[1 * 4 + 0] + v1 * mi[1 * 4 + 1] + v2 * mi[1 * 4 + 2];
  dst[2] = v0 * mi[2 * 4 + 0] + v1 * mi[2 * 4 + 1] + v2 * mi[2 * 4 + 2];

  return dst;
}

/**
 * Reorients directions by the given matrix..
 * @param {(number[]|TypedArray)} array The array. Assumes value floats per element.
 * @param {module:twgl/m4.Mat4} matrix A matrix to multiply by.
 * @return {(number[]|TypedArray)} the same array that was passed in
 * @memberOf module:twgl/primitives
 */
function reorientDirections(array, matrix) {
  applyFuncToV3Array(array, matrix, transformDirection);
  return array;
}

/**
 * Reorients normals by the inverse-transpose of the given
 * matrix..
 * @param {(number[]|TypedArray)} array The array. Assumes value floats per element.
 * @param {module:twgl/m4.Mat4} matrix A matrix to multiply by.
 * @return {(number[]|TypedArray)} the same array that was passed in
 * @memberOf module:twgl/primitives
 */
function reorientNormals(array, matrix) {
  applyFuncToV3Array(array, inverse(matrix), transformNormal$1);
  return array;
}

/**
 * Reorients positions by the given matrix. In other words, it
 * multiplies each vertex by the given matrix.
 * @param {(number[]|TypedArray)} array The array. Assumes value floats per element.
 * @param {module:twgl/m4.Mat4} matrix A matrix to multiply by.
 * @return {(number[]|TypedArray)} the same array that was passed in
 * @memberOf module:twgl/primitives
 */
function reorientPositions(array, matrix) {
  applyFuncToV3Array(array, matrix, transformPoint);
  return array;
}

/**
 * @typedef {(number[]|TypedArray)} NativeArrayOrTypedArray
 */

/**
 * Reorients arrays by the given matrix. Assumes arrays have
 * names that contains 'pos' could be reoriented as positions,
 * 'binorm' or 'tan' as directions, and 'norm' as normals.
 *
 * @param {Object.<string, NativeArrayOrTypedArray>} arrays The vertices to reorient
 * @param {module:twgl/m4.Mat4} matrix matrix to reorient by.
 * @return {Object.<string, NativeArrayOrTypedArray>} same arrays that were passed in.
 * @memberOf module:twgl/primitives
 */
function reorientVertices(arrays, matrix) {
  Object.keys(arrays).forEach(function(name) {
    const array = arrays[name];
    if (name.indexOf("pos") >= 0) {
      reorientPositions(array, matrix);
    } else if (name.indexOf("tan") >= 0 || name.indexOf("binorm") >= 0) {
      reorientDirections(array, matrix);
    } else if (name.indexOf("norm") >= 0) {
      reorientNormals(array, matrix);
    }
  });
  return arrays;
}

/**
 * Creates XY quad BufferInfo
 *
 * The default with no parameters will return a 2x2 quad with values from -1 to +1.
 * If you want a unit quad with that goes from 0 to 1 you'd call it with
 *
 *     twgl.primitives.createXYQuadBufferInfo(gl, 1, 0.5, 0.5);
 *
 * If you want a unit quad centered above 0,0 you'd call it with
 *
 *     twgl.primitives.createXYQuadBufferInfo(gl, 1, 0, 0.5);
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext.
 * @param {number} [size] the size across the quad. Defaults to 2 which means vertices will go from -1 to +1
 * @param {number} [xOffset] the amount to offset the quad in X
 * @param {number} [yOffset] the amount to offset the quad in Y
 * @return {Object.<string, WebGLBuffer>} the created XY Quad BufferInfo
 * @memberOf module:twgl/primitives
 * @function createXYQuadBuffers
 */

/**
 * Creates XY quad Buffers
 *
 * The default with no parameters will return a 2x2 quad with values from -1 to +1.
 * If you want a unit quad with that goes from 0 to 1 you'd call it with
 *
 *     twgl.primitives.createXYQuadBufferInfo(gl, 1, 0.5, 0.5);
 *
 * If you want a unit quad centered above 0,0 you'd call it with
 *
 *     twgl.primitives.createXYQuadBufferInfo(gl, 1, 0, 0.5);
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext.
 * @param {number} [size] the size across the quad. Defaults to 2 which means vertices will go from -1 to +1
 * @param {number} [xOffset] the amount to offset the quad in X
 * @param {number} [yOffset] the amount to offset the quad in Y
 * @return {module:twgl.BufferInfo} the created XY Quad buffers
 * @memberOf module:twgl/primitives
 * @function createXYQuadBufferInfo
 */

/**
 * Creates XY quad vertices
 *
 * The default with no parameters will return a 2x2 quad with values from -1 to +1.
 * If you want a unit quad with that goes from 0 to 1 you'd call it with
 *
 *     twgl.primitives.createXYQuadVertices(1, 0.5, 0.5);
 *
 * If you want a unit quad centered above 0,0 you'd call it with
 *
 *     twgl.primitives.createXYQuadVertices(1, 0, 0.5);
 *
 * @param {number} [size] the size across the quad. Defaults to 2 which means vertices will go from -1 to +1
 * @param {number} [xOffset] the amount to offset the quad in X
 * @param {number} [yOffset] the amount to offset the quad in Y
 * @return {Object.<string, TypedArray>} the created XY Quad vertices
 * @memberOf module:twgl/primitives
 */
function createXYQuadVertices(size, xOffset, yOffset) {
  size = size || 2;
  xOffset = xOffset || 0;
  yOffset = yOffset || 0;
  size *= 0.5;
  return {
    position: {
      numComponents: 2,
      data: [
        xOffset + -1 * size, yOffset + -1 * size,
        xOffset +  1 * size, yOffset + -1 * size,
        xOffset + -1 * size, yOffset +  1 * size,
        xOffset +  1 * size, yOffset +  1 * size,
      ],
    },
    normal: [
      0, 0, 1,
      0, 0, 1,
      0, 0, 1,
      0, 0, 1,
    ],
    texcoord: [
      0, 0,
      1, 0,
      0, 1,
      1, 1,
    ],
    indices: [ 0, 1, 2, 2, 1, 3 ],
  };
}

/**
 * Creates XZ plane BufferInfo.
 *
 * The created plane has position, normal, and texcoord data
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext.
 * @param {number} [width] Width of the plane. Default = 1
 * @param {number} [depth] Depth of the plane. Default = 1
 * @param {number} [subdivisionsWidth] Number of steps across the plane. Default = 1
 * @param {number} [subdivisionsDepth] Number of steps down the plane. Default = 1
 * @param {module:twgl/m4.Mat4} [matrix] A matrix by which to multiply all the vertices.
 * @return {module:twgl.BufferInfo} The created plane BufferInfo.
 * @memberOf module:twgl/primitives
 * @function createPlaneBufferInfo
 */

/**
 * Creates XZ plane buffers.
 *
 * The created plane has position, normal, and texcoord data
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext.
 * @param {number} [width] Width of the plane. Default = 1
 * @param {number} [depth] Depth of the plane. Default = 1
 * @param {number} [subdivisionsWidth] Number of steps across the plane. Default = 1
 * @param {number} [subdivisionsDepth] Number of steps down the plane. Default = 1
 * @param {module:twgl/m4.Mat4} [matrix] A matrix by which to multiply all the vertices.
 * @return {Object.<string, WebGLBuffer>} The created plane buffers.
 * @memberOf module:twgl/primitives
 * @function createPlaneBuffers
 */

/**
 * Creates XZ plane vertices.
 *
 * The created plane has position, normal, and texcoord data
 *
 * @param {number} [width] Width of the plane. Default = 1
 * @param {number} [depth] Depth of the plane. Default = 1
 * @param {number} [subdivisionsWidth] Number of steps across the plane. Default = 1
 * @param {number} [subdivisionsDepth] Number of steps down the plane. Default = 1
 * @param {module:twgl/m4.Mat4} [matrix] A matrix by which to multiply all the vertices.
 * @return {Object.<string, TypedArray>} The created plane vertices.
 * @memberOf module:twgl/primitives
 */
function createPlaneVertices(
    width,
    depth,
    subdivisionsWidth,
    subdivisionsDepth,
    matrix) {
  width = width || 1;
  depth = depth || 1;
  subdivisionsWidth = subdivisionsWidth || 1;
  subdivisionsDepth = subdivisionsDepth || 1;
  matrix = matrix || identity();

  const numVertices = (subdivisionsWidth + 1) * (subdivisionsDepth + 1);
  const positions = createAugmentedTypedArray(3, numVertices);
  const normals = createAugmentedTypedArray(3, numVertices);
  const texcoords = createAugmentedTypedArray(2, numVertices);

  for (let z = 0; z <= subdivisionsDepth; z++) {
    for (let x = 0; x <= subdivisionsWidth; x++) {
      const u = x / subdivisionsWidth;
      const v = z / subdivisionsDepth;
      positions.push(
          width * u - width * 0.5,
          0,
          depth * v - depth * 0.5);
      normals.push(0, 1, 0);
      texcoords.push(u, v);
    }
  }

  const numVertsAcross = subdivisionsWidth + 1;
  const indices = createAugmentedTypedArray(
      3, subdivisionsWidth * subdivisionsDepth * 2, Uint16Array);

  for (let z = 0; z < subdivisionsDepth; z++) {  // eslint-disable-line
    for (let x = 0; x < subdivisionsWidth; x++) {  // eslint-disable-line
      // Make triangle 1 of quad.
      indices.push(
          (z + 0) * numVertsAcross + x,
          (z + 1) * numVertsAcross + x,
          (z + 0) * numVertsAcross + x + 1);

      // Make triangle 2 of quad.
      indices.push(
          (z + 1) * numVertsAcross + x,
          (z + 1) * numVertsAcross + x + 1,
          (z + 0) * numVertsAcross + x + 1);
    }
  }

  const arrays = reorientVertices({
    position: positions,
    normal: normals,
    texcoord: texcoords,
    indices: indices,
  }, matrix);
  return arrays;
}

/**
 * Creates sphere BufferInfo.
 *
 * The created sphere has position, normal, and texcoord data
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext.
 * @param {number} radius radius of the sphere.
 * @param {number} subdivisionsAxis number of steps around the sphere.
 * @param {number} subdivisionsHeight number of vertically on the sphere.
 * @param {number} [opt_startLatitudeInRadians] where to start the
 *     top of the sphere. Default = 0.
 * @param {number} [opt_endLatitudeInRadians] Where to end the
 *     bottom of the sphere. Default = Math.PI.
 * @param {number} [opt_startLongitudeInRadians] where to start
 *     wrapping the sphere. Default = 0.
 * @param {number} [opt_endLongitudeInRadians] where to end
 *     wrapping the sphere. Default = 2 * Math.PI.
 * @return {module:twgl.BufferInfo} The created sphere BufferInfo.
 * @memberOf module:twgl/primitives
 * @function createSphereBufferInfo
 */

/**
 * Creates sphere buffers.
 *
 * The created sphere has position, normal, and texcoord data
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext.
 * @param {number} radius radius of the sphere.
 * @param {number} subdivisionsAxis number of steps around the sphere.
 * @param {number} subdivisionsHeight number of vertically on the sphere.
 * @param {number} [opt_startLatitudeInRadians] where to start the
 *     top of the sphere. Default = 0.
 * @param {number} [opt_endLatitudeInRadians] Where to end the
 *     bottom of the sphere. Default = Math.PI.
 * @param {number} [opt_startLongitudeInRadians] where to start
 *     wrapping the sphere. Default = 0.
 * @param {number} [opt_endLongitudeInRadians] where to end
 *     wrapping the sphere. Default = 2 * Math.PI.
 * @return {Object.<string, WebGLBuffer>} The created sphere buffers.
 * @memberOf module:twgl/primitives
 * @function createSphereBuffers
 */

/**
 * Creates sphere vertices.
 *
 * The created sphere has position, normal, and texcoord data
 *
 * @param {number} radius radius of the sphere.
 * @param {number} subdivisionsAxis number of steps around the sphere.
 * @param {number} subdivisionsHeight number of vertically on the sphere.
 * @param {number} [opt_startLatitudeInRadians] where to start the
 *     top of the sphere. Default = 0.
 * @param {number} [opt_endLatitudeInRadians] Where to end the
 *     bottom of the sphere. Default = Math.PI.
 * @param {number} [opt_startLongitudeInRadians] where to start
 *     wrapping the sphere. Default = 0.
 * @param {number} [opt_endLongitudeInRadians] where to end
 *     wrapping the sphere. Default = 2 * Math.PI.
 * @return {Object.<string, TypedArray>} The created sphere vertices.
 * @memberOf module:twgl/primitives
 */
function createSphereVertices(
    radius,
    subdivisionsAxis,
    subdivisionsHeight,
    opt_startLatitudeInRadians,
    opt_endLatitudeInRadians,
    opt_startLongitudeInRadians,
    opt_endLongitudeInRadians) {
  if (subdivisionsAxis <= 0 || subdivisionsHeight <= 0) {
    throw new Error('subdivisionAxis and subdivisionHeight must be > 0');
  }

  opt_startLatitudeInRadians = opt_startLatitudeInRadians || 0;
  opt_endLatitudeInRadians = opt_endLatitudeInRadians || Math.PI;
  opt_startLongitudeInRadians = opt_startLongitudeInRadians || 0;
  opt_endLongitudeInRadians = opt_endLongitudeInRadians || (Math.PI * 2);

  const latRange = opt_endLatitudeInRadians - opt_startLatitudeInRadians;
  const longRange = opt_endLongitudeInRadians - opt_startLongitudeInRadians;

  // We are going to generate our sphere by iterating through its
  // spherical coordinates and generating 2 triangles for each quad on a
  // ring of the sphere.
  const numVertices = (subdivisionsAxis + 1) * (subdivisionsHeight + 1);
  const positions = createAugmentedTypedArray(3, numVertices);
  const normals   = createAugmentedTypedArray(3, numVertices);
  const texcoords = createAugmentedTypedArray(2, numVertices);

  // Generate the individual vertices in our vertex buffer.
  for (let y = 0; y <= subdivisionsHeight; y++) {
    for (let x = 0; x <= subdivisionsAxis; x++) {
      // Generate a vertex based on its spherical coordinates
      const u = x / subdivisionsAxis;
      const v = y / subdivisionsHeight;
      const theta = longRange * u + opt_startLongitudeInRadians;
      const phi = latRange * v + opt_startLatitudeInRadians;
      const sinTheta = Math.sin(theta);
      const cosTheta = Math.cos(theta);
      const sinPhi = Math.sin(phi);
      const cosPhi = Math.cos(phi);
      const ux = cosTheta * sinPhi;
      const uy = cosPhi;
      const uz = sinTheta * sinPhi;
      positions.push(radius * ux, radius * uy, radius * uz);
      normals.push(ux, uy, uz);
      texcoords.push(1 - u, v);
    }
  }

  const numVertsAround = subdivisionsAxis + 1;
  const indices = createAugmentedTypedArray(3, subdivisionsAxis * subdivisionsHeight * 2, Uint16Array);
  for (let x = 0; x < subdivisionsAxis; x++) {  // eslint-disable-line
    for (let y = 0; y < subdivisionsHeight; y++) {  // eslint-disable-line
      // Make triangle 1 of quad.
      indices.push(
          (y + 0) * numVertsAround + x,
          (y + 0) * numVertsAround + x + 1,
          (y + 1) * numVertsAround + x);

      // Make triangle 2 of quad.
      indices.push(
          (y + 1) * numVertsAround + x,
          (y + 0) * numVertsAround + x + 1,
          (y + 1) * numVertsAround + x + 1);
    }
  }

  return {
    position: positions,
    normal: normals,
    texcoord: texcoords,
    indices: indices,
  };
}

/**
 * Array of the indices of corners of each face of a cube.
 * @type {Array.<number[]>}
 * @private
 */
const CUBE_FACE_INDICES = [
  [3, 7, 5, 1],  // right
  [6, 2, 0, 4],  // left
  [6, 7, 3, 2],  // ??
  [0, 1, 5, 4],  // ??
  [7, 6, 4, 5],  // front
  [2, 3, 1, 0],  // back
];

/**
 * Creates a BufferInfo for a cube.
 *
 * The cube is created around the origin. (-size / 2, size / 2).
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext.
 * @param {number} [size] width, height and depth of the cube.
 * @return {module:twgl.BufferInfo} The created BufferInfo.
 * @memberOf module:twgl/primitives
 * @function createCubeBufferInfo
 */

/**
 * Creates the buffers and indices for a cube.
 *
 * The cube is created around the origin. (-size / 2, size / 2).
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext.
 * @param {number} [size] width, height and depth of the cube.
 * @return {Object.<string, WebGLBuffer>} The created buffers.
 * @memberOf module:twgl/primitives
 * @function createCubeBuffers
 */

/**
 * Creates the vertices and indices for a cube.
 *
 * The cube is created around the origin. (-size / 2, size / 2).
 *
 * @param {number} [size] width, height and depth of the cube.
 * @return {Object.<string, TypedArray>} The created vertices.
 * @memberOf module:twgl/primitives
 */
function createCubeVertices(size) {
  size = size || 1;
  const k = size / 2;

  const cornerVertices = [
    [-k, -k, -k],
    [+k, -k, -k],
    [-k, +k, -k],
    [+k, +k, -k],
    [-k, -k, +k],
    [+k, -k, +k],
    [-k, +k, +k],
    [+k, +k, +k],
  ];

  const faceNormals = [
    [+1, +0, +0],
    [-1, +0, +0],
    [+0, +1, +0],
    [+0, -1, +0],
    [+0, +0, +1],
    [+0, +0, -1],
  ];

  const uvCoords = [
    [1, 0],
    [0, 0],
    [0, 1],
    [1, 1],
  ];

  const numVertices = 6 * 4;
  const positions = createAugmentedTypedArray(3, numVertices);
  const normals   = createAugmentedTypedArray(3, numVertices);
  const texcoords = createAugmentedTypedArray(2 , numVertices);
  const indices   = createAugmentedTypedArray(3, 6 * 2, Uint16Array);

  for (let f = 0; f < 6; ++f) {
    const faceIndices = CUBE_FACE_INDICES[f];
    for (let v = 0; v < 4; ++v) {
      const position = cornerVertices[faceIndices[v]];
      const normal = faceNormals[f];
      const uv = uvCoords[v];

      // Each face needs all four vertices because the normals and texture
      // coordinates are not all the same.
      positions.push(position);
      normals.push(normal);
      texcoords.push(uv);

    }
    // Two triangles make a square face.
    const offset = 4 * f;
    indices.push(offset + 0, offset + 1, offset + 2);
    indices.push(offset + 0, offset + 2, offset + 3);
  }

  return {
    position: positions,
    normal: normals,
    texcoord: texcoords,
    indices: indices,
  };
}

/**
 * Creates a BufferInfo for a truncated cone, which is like a cylinder
 * except that it has different top and bottom radii. A truncated cone
 * can also be used to create cylinders and regular cones. The
 * truncated cone will be created centered about the origin, with the
 * y axis as its vertical axis.
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext.
 * @param {number} bottomRadius Bottom radius of truncated cone.
 * @param {number} topRadius Top radius of truncated cone.
 * @param {number} height Height of truncated cone.
 * @param {number} radialSubdivisions The number of subdivisions around the
 *     truncated cone.
 * @param {number} verticalSubdivisions The number of subdivisions down the
 *     truncated cone.
 * @param {boolean} [opt_topCap] Create top cap. Default = true.
 * @param {boolean} [opt_bottomCap] Create bottom cap. Default = true.
 * @return {module:twgl.BufferInfo} The created cone BufferInfo.
 * @memberOf module:twgl/primitives
 * @function createTruncatedConeBufferInfo
 */

/**
 * Creates buffers for a truncated cone, which is like a cylinder
 * except that it has different top and bottom radii. A truncated cone
 * can also be used to create cylinders and regular cones. The
 * truncated cone will be created centered about the origin, with the
 * y axis as its vertical axis.
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext.
 * @param {number} bottomRadius Bottom radius of truncated cone.
 * @param {number} topRadius Top radius of truncated cone.
 * @param {number} height Height of truncated cone.
 * @param {number} radialSubdivisions The number of subdivisions around the
 *     truncated cone.
 * @param {number} verticalSubdivisions The number of subdivisions down the
 *     truncated cone.
 * @param {boolean} [opt_topCap] Create top cap. Default = true.
 * @param {boolean} [opt_bottomCap] Create bottom cap. Default = true.
 * @return {Object.<string, WebGLBuffer>} The created cone buffers.
 * @memberOf module:twgl/primitives
 * @function createTruncatedConeBuffers
 */

/**
 * Creates vertices for a truncated cone, which is like a cylinder
 * except that it has different top and bottom radii. A truncated cone
 * can also be used to create cylinders and regular cones. The
 * truncated cone will be created centered about the origin, with the
 * y axis as its vertical axis. .
 *
 * @param {number} bottomRadius Bottom radius of truncated cone.
 * @param {number} topRadius Top radius of truncated cone.
 * @param {number} height Height of truncated cone.
 * @param {number} radialSubdivisions The number of subdivisions around the
 *     truncated cone.
 * @param {number} verticalSubdivisions The number of subdivisions down the
 *     truncated cone.
 * @param {boolean} [opt_topCap] Create top cap. Default = true.
 * @param {boolean} [opt_bottomCap] Create bottom cap. Default = true.
 * @return {Object.<string, TypedArray>} The created cone vertices.
 * @memberOf module:twgl/primitives
 */
function createTruncatedConeVertices(
    bottomRadius,
    topRadius,
    height,
    radialSubdivisions,
    verticalSubdivisions,
    opt_topCap,
    opt_bottomCap) {
  if (radialSubdivisions < 3) {
    throw new Error('radialSubdivisions must be 3 or greater');
  }

  if (verticalSubdivisions < 1) {
    throw new Error('verticalSubdivisions must be 1 or greater');
  }

  const topCap = (opt_topCap === undefined) ? true : opt_topCap;
  const bottomCap = (opt_bottomCap === undefined) ? true : opt_bottomCap;

  const extra = (topCap ? 2 : 0) + (bottomCap ? 2 : 0);

  const numVertices = (radialSubdivisions + 1) * (verticalSubdivisions + 1 + extra);
  const positions = createAugmentedTypedArray(3, numVertices);
  const normals   = createAugmentedTypedArray(3, numVertices);
  const texcoords = createAugmentedTypedArray(2, numVertices);
  const indices   = createAugmentedTypedArray(3, radialSubdivisions * (verticalSubdivisions + extra / 2) * 2, Uint16Array);

  const vertsAroundEdge = radialSubdivisions + 1;

  // The slant of the cone is constant across its surface
  const slant = Math.atan2(bottomRadius - topRadius, height);
  const cosSlant = Math.cos(slant);
  const sinSlant = Math.sin(slant);

  const start = topCap ? -2 : 0;
  const end = verticalSubdivisions + (bottomCap ? 2 : 0);

  for (let yy = start; yy <= end; ++yy) {
    let v = yy / verticalSubdivisions;
    let y = height * v;
    let ringRadius;
    if (yy < 0) {
      y = 0;
      v = 1;
      ringRadius = bottomRadius;
    } else if (yy > verticalSubdivisions) {
      y = height;
      v = 1;
      ringRadius = topRadius;
    } else {
      ringRadius = bottomRadius +
        (topRadius - bottomRadius) * (yy / verticalSubdivisions);
    }
    if (yy === -2 || yy === verticalSubdivisions + 2) {
      ringRadius = 0;
      v = 0;
    }
    y -= height / 2;
    for (let ii = 0; ii < vertsAroundEdge; ++ii) {
      const sin = Math.sin(ii * Math.PI * 2 / radialSubdivisions);
      const cos = Math.cos(ii * Math.PI * 2 / radialSubdivisions);
      positions.push(sin * ringRadius, y, cos * ringRadius);
      if (yy < 0) {
        normals.push(0, -1, 0);
      } else if (yy > verticalSubdivisions) {
        normals.push(0, 1, 0);
      } else if (ringRadius === 0.0) {
        normals.push(0, 0, 0);
      } else {
        normals.push(sin * cosSlant, sinSlant, cos * cosSlant);
      }
      texcoords.push((ii / radialSubdivisions), 1 - v);
    }
  }

  for (let yy = 0; yy < verticalSubdivisions + extra; ++yy) {  // eslint-disable-line
    if (yy === 1 && topCap || yy === verticalSubdivisions + extra - 2 && bottomCap) {
      continue;
    }
    for (let ii = 0; ii < radialSubdivisions; ++ii) {  // eslint-disable-line
      indices.push(vertsAroundEdge * (yy + 0) + 0 + ii,
                   vertsAroundEdge * (yy + 0) + 1 + ii,
                   vertsAroundEdge * (yy + 1) + 1 + ii);
      indices.push(vertsAroundEdge * (yy + 0) + 0 + ii,
                   vertsAroundEdge * (yy + 1) + 1 + ii,
                   vertsAroundEdge * (yy + 1) + 0 + ii);
    }
  }

  return {
    position: positions,
    normal: normals,
    texcoord: texcoords,
    indices: indices,
  };
}

/**
 * Expands RLE data
 * @param {number[]} rleData data in format of run-length, x, y, z, run-length, x, y, z
 * @param {number[]} [padding] value to add each entry with.
 * @return {number[]} the expanded rleData
 * @private
 */
function expandRLEData(rleData, padding) {
  padding = padding || [];
  const data = [];
  for (let ii = 0; ii < rleData.length; ii += 4) {
    const runLength = rleData[ii];
    const element = rleData.slice(ii + 1, ii + 4);
    element.push.apply(element, padding);
    for (let jj = 0; jj < runLength; ++jj) {
      data.push.apply(data, element);
    }
  }
  return data;
}

/**
 * Creates 3D 'F' BufferInfo.
 * An 'F' is useful because you can easily tell which way it is oriented.
 * The created 'F' has position, normal, texcoord, and color buffers.
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext.
 * @return {module:twgl.BufferInfo} The created BufferInfo.
 * @memberOf module:twgl/primitives
 * @function create3DFBufferInfo
 */

/**
 * Creates 3D 'F' buffers.
 * An 'F' is useful because you can easily tell which way it is oriented.
 * The created 'F' has position, normal, texcoord, and color buffers.
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext.
 * @return {Object.<string, WebGLBuffer>} The created buffers.
 * @memberOf module:twgl/primitives
 * @function create3DFBuffers
 */

/**
 * Creates 3D 'F' vertices.
 * An 'F' is useful because you can easily tell which way it is oriented.
 * The created 'F' has position, normal, texcoord, and color arrays.
 *
 * @return {Object.<string, TypedArray>} The created vertices.
 * @memberOf module:twgl/primitives
 */
function create3DFVertices() {

  const positions = [
    // left column front
    0,   0,  0,
    0, 150,  0,
    30,   0,  0,
    0, 150,  0,
    30, 150,  0,
    30,   0,  0,

    // top rung front
    30,   0,  0,
    30,  30,  0,
    100,   0,  0,
    30,  30,  0,
    100,  30,  0,
    100,   0,  0,

    // middle rung front
    30,  60,  0,
    30,  90,  0,
    67,  60,  0,
    30,  90,  0,
    67,  90,  0,
    67,  60,  0,

    // left column back
      0,   0,  30,
     30,   0,  30,
      0, 150,  30,
      0, 150,  30,
     30,   0,  30,
     30, 150,  30,

    // top rung back
     30,   0,  30,
    100,   0,  30,
     30,  30,  30,
     30,  30,  30,
    100,   0,  30,
    100,  30,  30,

    // middle rung back
     30,  60,  30,
     67,  60,  30,
     30,  90,  30,
     30,  90,  30,
     67,  60,  30,
     67,  90,  30,

    // top
      0,   0,   0,
    100,   0,   0,
    100,   0,  30,
      0,   0,   0,
    100,   0,  30,
      0,   0,  30,

    // top rung front
    100,   0,   0,
    100,  30,   0,
    100,  30,  30,
    100,   0,   0,
    100,  30,  30,
    100,   0,  30,

    // under top rung
    30,   30,   0,
    30,   30,  30,
    100,  30,  30,
    30,   30,   0,
    100,  30,  30,
    100,  30,   0,

    // between top rung and middle
    30,   30,   0,
    30,   60,  30,
    30,   30,  30,
    30,   30,   0,
    30,   60,   0,
    30,   60,  30,

    // top of middle rung
    30,   60,   0,
    67,   60,  30,
    30,   60,  30,
    30,   60,   0,
    67,   60,   0,
    67,   60,  30,

    // front of middle rung
    67,   60,   0,
    67,   90,  30,
    67,   60,  30,
    67,   60,   0,
    67,   90,   0,
    67,   90,  30,

    // bottom of middle rung.
    30,   90,   0,
    30,   90,  30,
    67,   90,  30,
    30,   90,   0,
    67,   90,  30,
    67,   90,   0,

    // front of bottom
    30,   90,   0,
    30,  150,  30,
    30,   90,  30,
    30,   90,   0,
    30,  150,   0,
    30,  150,  30,

    // bottom
    0,   150,   0,
    0,   150,  30,
    30,  150,  30,
    0,   150,   0,
    30,  150,  30,
    30,  150,   0,

    // left side
    0,   0,   0,
    0,   0,  30,
    0, 150,  30,
    0,   0,   0,
    0, 150,  30,
    0, 150,   0,
  ];

  const texcoords = [
    // left column front
    0.22, 0.19,
    0.22, 0.79,
    0.34, 0.19,
    0.22, 0.79,
    0.34, 0.79,
    0.34, 0.19,

    // top rung front
    0.34, 0.19,
    0.34, 0.31,
    0.62, 0.19,
    0.34, 0.31,
    0.62, 0.31,
    0.62, 0.19,

    // middle rung front
    0.34, 0.43,
    0.34, 0.55,
    0.49, 0.43,
    0.34, 0.55,
    0.49, 0.55,
    0.49, 0.43,

    // left column back
    0, 0,
    1, 0,
    0, 1,
    0, 1,
    1, 0,
    1, 1,

    // top rung back
    0, 0,
    1, 0,
    0, 1,
    0, 1,
    1, 0,
    1, 1,

    // middle rung back
    0, 0,
    1, 0,
    0, 1,
    0, 1,
    1, 0,
    1, 1,

    // top
    0, 0,
    1, 0,
    1, 1,
    0, 0,
    1, 1,
    0, 1,

    // top rung front
    0, 0,
    1, 0,
    1, 1,
    0, 0,
    1, 1,
    0, 1,

    // under top rung
    0, 0,
    0, 1,
    1, 1,
    0, 0,
    1, 1,
    1, 0,

    // between top rung and middle
    0, 0,
    1, 1,
    0, 1,
    0, 0,
    1, 0,
    1, 1,

    // top of middle rung
    0, 0,
    1, 1,
    0, 1,
    0, 0,
    1, 0,
    1, 1,

    // front of middle rung
    0, 0,
    1, 1,
    0, 1,
    0, 0,
    1, 0,
    1, 1,

    // bottom of middle rung.
    0, 0,
    0, 1,
    1, 1,
    0, 0,
    1, 1,
    1, 0,

    // front of bottom
    0, 0,
    1, 1,
    0, 1,
    0, 0,
    1, 0,
    1, 1,

    // bottom
    0, 0,
    0, 1,
    1, 1,
    0, 0,
    1, 1,
    1, 0,

    // left side
    0, 0,
    0, 1,
    1, 1,
    0, 0,
    1, 1,
    1, 0,
  ];

  const normals = expandRLEData([
    // left column front
    // top rung front
    // middle rung front
    18, 0, 0, 1,

    // left column back
    // top rung back
    // middle rung back
    18, 0, 0, -1,

    // top
    6, 0, 1, 0,

    // top rung front
    6, 1, 0, 0,

    // under top rung
    6, 0, -1, 0,

    // between top rung and middle
    6, 1, 0, 0,

    // top of middle rung
    6, 0, 1, 0,

    // front of middle rung
    6, 1, 0, 0,

    // bottom of middle rung.
    6, 0, -1, 0,

    // front of bottom
    6, 1, 0, 0,

    // bottom
    6, 0, -1, 0,

    // left side
    6, -1, 0, 0,
  ]);

  const colors = expandRLEData([
        // left column front
        // top rung front
        // middle rung front
      18, 200,  70, 120,

        // left column back
        // top rung back
        // middle rung back
      18, 80, 70, 200,

        // top
      6, 70, 200, 210,

        // top rung front
      6, 200, 200, 70,

        // under top rung
      6, 210, 100, 70,

        // between top rung and middle
      6, 210, 160, 70,

        // top of middle rung
      6, 70, 180, 210,

        // front of middle rung
      6, 100, 70, 210,

        // bottom of middle rung.
      6, 76, 210, 100,

        // front of bottom
      6, 140, 210, 80,

        // bottom
      6, 90, 130, 110,

        // left side
      6, 160, 160, 220,
  ], [255]);

  const numVerts = positions.length / 3;

  const arrays = {
    position: createAugmentedTypedArray(3, numVerts),
    texcoord: createAugmentedTypedArray(2,  numVerts),
    normal: createAugmentedTypedArray(3, numVerts),
    color: createAugmentedTypedArray(4, numVerts, Uint8Array),
    indices: createAugmentedTypedArray(3, numVerts / 3, Uint16Array),
  };

  arrays.position.push(positions);
  arrays.texcoord.push(texcoords);
  arrays.normal.push(normals);
  arrays.color.push(colors);

  for (let ii = 0; ii < numVerts; ++ii) {
    arrays.indices.push(ii);
  }

  return arrays;
}

/**
 * Creates crescent BufferInfo.
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext.
 * @param {number} verticalRadius The vertical radius of the crescent.
 * @param {number} outerRadius The outer radius of the crescent.
 * @param {number} innerRadius The inner radius of the crescent.
 * @param {number} thickness The thickness of the crescent.
 * @param {number} subdivisionsDown number of steps around the crescent.
 * @param {number} [startOffset] Where to start arc. Default 0.
 * @param {number} [endOffset] Where to end arg. Default 1.
 * @return {module:twgl.BufferInfo} The created BufferInfo.
 * @memberOf module:twgl/primitives
 * @function createCresentBufferInfo
 */

/**
 * Creates crescent buffers.
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext.
 * @param {number} verticalRadius The vertical radius of the crescent.
 * @param {number} outerRadius The outer radius of the crescent.
 * @param {number} innerRadius The inner radius of the crescent.
 * @param {number} thickness The thickness of the crescent.
 * @param {number} subdivisionsDown number of steps around the crescent.
 * @param {number} [startOffset] Where to start arc. Default 0.
 * @param {number} [endOffset] Where to end arg. Default 1.
 * @return {Object.<string, WebGLBuffer>} The created buffers.
 * @memberOf module:twgl/primitives
 * @function createCresentBuffers
 */

/**
 * Creates crescent vertices.
 *
 * @param {number} verticalRadius The vertical radius of the crescent.
 * @param {number} outerRadius The outer radius of the crescent.
 * @param {number} innerRadius The inner radius of the crescent.
 * @param {number} thickness The thickness of the crescent.
 * @param {number} subdivisionsDown number of steps around the crescent.
 * @param {number} [startOffset] Where to start arc. Default 0.
 * @param {number} [endOffset] Where to end arg. Default 1.
 * @return {Object.<string, TypedArray>} The created vertices.
 * @memberOf module:twgl/primitives
 * @function createCresentBuffers
 */

/**
 * Creates crescent BufferInfo.
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext.
 * @param {number} verticalRadius The vertical radius of the crescent.
 * @param {number} outerRadius The outer radius of the crescent.
 * @param {number} innerRadius The inner radius of the crescent.
 * @param {number} thickness The thickness of the crescent.
 * @param {number} subdivisionsDown number of steps around the crescent.
 * @param {number} [startOffset] Where to start arc. Default 0.
 * @param {number} [endOffset] Where to end arg. Default 1.
 * @return {module:twgl.BufferInfo} The created BufferInfo.
 * @memberOf module:twgl/primitives
 * @function createCrescentBufferInfo
 */

/**
 * Creates crescent buffers.
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext.
 * @param {number} verticalRadius The vertical radius of the crescent.
 * @param {number} outerRadius The outer radius of the crescent.
 * @param {number} innerRadius The inner radius of the crescent.
 * @param {number} thickness The thickness of the crescent.
 * @param {number} subdivisionsDown number of steps around the crescent.
 * @param {number} [startOffset] Where to start arc. Default 0.
 * @param {number} [endOffset] Where to end arg. Default 1.
 * @return {Object.<string, WebGLBuffer>} The created buffers.
 * @memberOf module:twgl/primitives
 * @function createCrescentBuffers
 */

/**
 * Creates crescent vertices.
 *
 * @param {number} verticalRadius The vertical radius of the crescent.
 * @param {number} outerRadius The outer radius of the crescent.
 * @param {number} innerRadius The inner radius of the crescent.
 * @param {number} thickness The thickness of the crescent.
 * @param {number} subdivisionsDown number of steps around the crescent.
 * @param {number} [startOffset] Where to start arc. Default 0.
 * @param {number} [endOffset] Where to end arg. Default 1.
 * @return {Object.<string, TypedArray>} The created vertices.
 * @memberOf module:twgl/primitives
 */
 function createCrescentVertices(
    verticalRadius,
    outerRadius,
    innerRadius,
    thickness,
    subdivisionsDown,
    startOffset,
    endOffset) {
  if (subdivisionsDown <= 0) {
    throw new Error('subdivisionDown must be > 0');
  }

  startOffset = startOffset || 0;
  endOffset   = endOffset || 1;

  const subdivisionsThick = 2;

  const offsetRange = endOffset - startOffset;
  const numVertices = (subdivisionsDown + 1) * 2 * (2 + subdivisionsThick);
  const positions   = createAugmentedTypedArray(3, numVertices);
  const normals     = createAugmentedTypedArray(3, numVertices);
  const texcoords   = createAugmentedTypedArray(2, numVertices);

  function lerp(a, b, s) {
    return a + (b - a) * s;
  }

  function createArc(arcRadius, x, normalMult, normalAdd, uMult, uAdd) {
    for (let z = 0; z <= subdivisionsDown; z++) {
      const uBack = x / (subdivisionsThick - 1);
      const v = z / subdivisionsDown;
      const xBack = (uBack - 0.5) * 2;
      const angle = (startOffset + (v * offsetRange)) * Math.PI;
      const s = Math.sin(angle);
      const c = Math.cos(angle);
      const radius = lerp(verticalRadius, arcRadius, s);
      const px = xBack * thickness;
      const py = c * verticalRadius;
      const pz = s * radius;
      positions.push(px, py, pz);
      const n = add(multiply([0, s, c], normalMult), normalAdd);
      normals.push(n);
      texcoords.push(uBack * uMult + uAdd, v);
    }
  }

  // Generate the individual vertices in our vertex buffer.
  for (let x = 0; x < subdivisionsThick; x++) {
    const uBack = (x / (subdivisionsThick - 1) - 0.5) * 2;
    createArc(outerRadius, x, [1, 1, 1], [0,     0, 0], 1, 0);
    createArc(outerRadius, x, [0, 0, 0], [uBack, 0, 0], 0, 0);
    createArc(innerRadius, x, [1, 1, 1], [0,     0, 0], 1, 0);
    createArc(innerRadius, x, [0, 0, 0], [uBack, 0, 0], 0, 1);
  }

  // Do outer surface.
  const indices = createAugmentedTypedArray(3, (subdivisionsDown * 2) * (2 + subdivisionsThick), Uint16Array);

  function createSurface(leftArcOffset, rightArcOffset) {
    for (let z = 0; z < subdivisionsDown; ++z) {
      // Make triangle 1 of quad.
      indices.push(
          leftArcOffset + z + 0,
          leftArcOffset + z + 1,
          rightArcOffset + z + 0);

      // Make triangle 2 of quad.
      indices.push(
          leftArcOffset + z + 1,
          rightArcOffset + z + 1,
          rightArcOffset + z + 0);
    }
  }

  const numVerticesDown = subdivisionsDown + 1;
  // front
  createSurface(numVerticesDown * 0, numVerticesDown * 4);
  // right
  createSurface(numVerticesDown * 5, numVerticesDown * 7);
  // back
  createSurface(numVerticesDown * 6, numVerticesDown * 2);
  // left
  createSurface(numVerticesDown * 3, numVerticesDown * 1);

  return {
    position: positions,
    normal:   normals,
    texcoord: texcoords,
    indices:  indices,
  };
}

/**
 * Creates cylinder BufferInfo. The cylinder will be created around the origin
 * along the y-axis.
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext.
 * @param {number} radius Radius of cylinder.
 * @param {number} height Height of cylinder.
 * @param {number} radialSubdivisions The number of subdivisions around the cylinder.
 * @param {number} verticalSubdivisions The number of subdivisions down the cylinder.
 * @param {boolean} [topCap] Create top cap. Default = true.
 * @param {boolean} [bottomCap] Create bottom cap. Default = true.
 * @return {module:twgl.BufferInfo} The created BufferInfo.
 * @memberOf module:twgl/primitives
 * @function createCylinderBufferInfo
 */

 /**
  * Creates cylinder buffers. The cylinder will be created around the origin
  * along the y-axis.
  *
  * @param {WebGLRenderingContext} gl The WebGLRenderingContext.
  * @param {number} radius Radius of cylinder.
  * @param {number} height Height of cylinder.
  * @param {number} radialSubdivisions The number of subdivisions around the cylinder.
  * @param {number} verticalSubdivisions The number of subdivisions down the cylinder.
  * @param {boolean} [topCap] Create top cap. Default = true.
  * @param {boolean} [bottomCap] Create bottom cap. Default = true.
  * @return {Object.<string, WebGLBuffer>} The created buffers.
  * @memberOf module:twgl/primitives
  * @function createCylinderBuffers
  */

 /**
  * Creates cylinder vertices. The cylinder will be created around the origin
  * along the y-axis.
  *
  * @param {number} radius Radius of cylinder.
  * @param {number} height Height of cylinder.
  * @param {number} radialSubdivisions The number of subdivisions around the cylinder.
  * @param {number} verticalSubdivisions The number of subdivisions down the cylinder.
  * @param {boolean} [topCap] Create top cap. Default = true.
  * @param {boolean} [bottomCap] Create bottom cap. Default = true.
  * @return {Object.<string, TypedArray>} The created vertices.
  * @memberOf module:twgl/primitives
  */
function createCylinderVertices(
    radius,
    height,
    radialSubdivisions,
    verticalSubdivisions,
    topCap,
    bottomCap) {
  return createTruncatedConeVertices(
      radius,
      radius,
      height,
      radialSubdivisions,
      verticalSubdivisions,
      topCap,
      bottomCap);
}

/**
 * Creates BufferInfo for a torus
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext.
 * @param {number} radius radius of center of torus circle.
 * @param {number} thickness radius of torus ring.
 * @param {number} radialSubdivisions The number of subdivisions around the torus.
 * @param {number} bodySubdivisions The number of subdivisions around the body torus.
 * @param {boolean} [startAngle] start angle in radians. Default = 0.
 * @param {boolean} [endAngle] end angle in radians. Default = Math.PI * 2.
 * @return {module:twgl.BufferInfo} The created BufferInfo.
 * @memberOf module:twgl/primitives
 * @function createTorusBufferInfo
 */

/**
 * Creates buffers for a torus
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext.
 * @param {number} radius radius of center of torus circle.
 * @param {number} thickness radius of torus ring.
 * @param {number} radialSubdivisions The number of subdivisions around the torus.
 * @param {number} bodySubdivisions The number of subdivisions around the body torus.
 * @param {boolean} [startAngle] start angle in radians. Default = 0.
 * @param {boolean} [endAngle] end angle in radians. Default = Math.PI * 2.
 * @return {Object.<string, WebGLBuffer>} The created buffers.
 * @memberOf module:twgl/primitives
 * @function createTorusBuffers
 */

/**
 * Creates vertices for a torus
 *
 * @param {number} radius radius of center of torus circle.
 * @param {number} thickness radius of torus ring.
 * @param {number} radialSubdivisions The number of subdivisions around the torus.
 * @param {number} bodySubdivisions The number of subdivisions around the body torus.
 * @param {boolean} [startAngle] start angle in radians. Default = 0.
 * @param {boolean} [endAngle] end angle in radians. Default = Math.PI * 2.
 * @return {Object.<string, TypedArray>} The created vertices.
 * @memberOf module:twgl/primitives
 */
function createTorusVertices(
    radius,
    thickness,
    radialSubdivisions,
    bodySubdivisions,
    startAngle,
    endAngle) {
  if (radialSubdivisions < 3) {
    throw new Error('radialSubdivisions must be 3 or greater');
  }

  if (bodySubdivisions < 3) {
    throw new Error('verticalSubdivisions must be 3 or greater');
  }

  startAngle = startAngle || 0;
  endAngle = endAngle || Math.PI * 2;
  const range = endAngle - startAngle;

  const radialParts = radialSubdivisions + 1;
  const bodyParts   = bodySubdivisions + 1;
  const numVertices = radialParts * bodyParts;
  const positions   = createAugmentedTypedArray(3, numVertices);
  const normals     = createAugmentedTypedArray(3, numVertices);
  const texcoords   = createAugmentedTypedArray(2, numVertices);
  const indices     = createAugmentedTypedArray(3, (radialSubdivisions) * (bodySubdivisions) * 2, Uint16Array);

  for (let slice = 0; slice < bodyParts; ++slice) {
    const v = slice / bodySubdivisions;
    const sliceAngle = v * Math.PI * 2;
    const sliceSin = Math.sin(sliceAngle);
    const ringRadius = radius + sliceSin * thickness;
    const ny = Math.cos(sliceAngle);
    const y = ny * thickness;
    for (let ring = 0; ring < radialParts; ++ring) {
      const u = ring / radialSubdivisions;
      const ringAngle = startAngle + u * range;
      const xSin = Math.sin(ringAngle);
      const zCos = Math.cos(ringAngle);
      const x = xSin * ringRadius;
      const z = zCos * ringRadius;
      const nx = xSin * sliceSin;
      const nz = zCos * sliceSin;
      positions.push(x, y, z);
      normals.push(nx, ny, nz);
      texcoords.push(u, 1 - v);
    }
  }

  for (let slice = 0; slice < bodySubdivisions; ++slice) {  // eslint-disable-line
    for (let ring = 0; ring < radialSubdivisions; ++ring) {  // eslint-disable-line
      const nextRingIndex  = 1 + ring;
      const nextSliceIndex = 1 + slice;
      indices.push(radialParts * slice          + ring,
                   radialParts * nextSliceIndex + ring,
                   radialParts * slice          + nextRingIndex);
      indices.push(radialParts * nextSliceIndex + ring,
                   radialParts * nextSliceIndex + nextRingIndex,
                   radialParts * slice          + nextRingIndex);
    }
  }

  return {
    position: positions,
    normal:   normals,
    texcoord: texcoords,
    indices:  indices,
  };
}


/**
 * Creates a disc BufferInfo. The disc will be in the xz plane, centered at
 * the origin. When creating, at least 3 divisions, or pie
 * pieces, need to be specified, otherwise the triangles making
 * up the disc will be degenerate. You can also specify the
 * number of radial pieces `stacks`. A value of 1 for
 * stacks will give you a simple disc of pie pieces.  If you
 * want to create an annulus you can set `innerRadius` to a
 * value > 0. Finally, `stackPower` allows you to have the widths
 * increase or decrease as you move away from the center. This
 * is particularly useful when using the disc as a ground plane
 * with a fixed camera such that you don't need the resolution
 * of small triangles near the perimeter. For example, a value
 * of 2 will produce stacks whose outside radius increases with
 * the square of the stack index. A value of 1 will give uniform
 * stacks.
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext.
 * @param {number} radius Radius of the ground plane.
 * @param {number} divisions Number of triangles in the ground plane (at least 3).
 * @param {number} [stacks] Number of radial divisions (default=1).
 * @param {number} [innerRadius] Default 0.
 * @param {number} [stackPower] Power to raise stack size to for decreasing width.
 * @return {module:twgl.BufferInfo} The created BufferInfo.
 * @memberOf module:twgl/primitives
 * @function createDiscBufferInfo
 */

/**
 * Creates disc buffers. The disc will be in the xz plane, centered at
 * the origin. When creating, at least 3 divisions, or pie
 * pieces, need to be specified, otherwise the triangles making
 * up the disc will be degenerate. You can also specify the
 * number of radial pieces `stacks`. A value of 1 for
 * stacks will give you a simple disc of pie pieces.  If you
 * want to create an annulus you can set `innerRadius` to a
 * value > 0. Finally, `stackPower` allows you to have the widths
 * increase or decrease as you move away from the center. This
 * is particularly useful when using the disc as a ground plane
 * with a fixed camera such that you don't need the resolution
 * of small triangles near the perimeter. For example, a value
 * of 2 will produce stacks whose outside radius increases with
 * the square of the stack index. A value of 1 will give uniform
 * stacks.
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext.
 * @param {number} radius Radius of the ground plane.
 * @param {number} divisions Number of triangles in the ground plane (at least 3).
 * @param {number} [stacks] Number of radial divisions (default=1).
 * @param {number} [innerRadius] Default 0.
 * @param {number} [stackPower] Power to raise stack size to for decreasing width.
 * @return {Object.<string, WebGLBuffer>} The created buffers.
 * @memberOf module:twgl/primitives
 * @function createDiscBuffers
 */

/**
 * Creates disc vertices. The disc will be in the xz plane, centered at
 * the origin. When creating, at least 3 divisions, or pie
 * pieces, need to be specified, otherwise the triangles making
 * up the disc will be degenerate. You can also specify the
 * number of radial pieces `stacks`. A value of 1 for
 * stacks will give you a simple disc of pie pieces.  If you
 * want to create an annulus you can set `innerRadius` to a
 * value > 0. Finally, `stackPower` allows you to have the widths
 * increase or decrease as you move away from the center. This
 * is particularly useful when using the disc as a ground plane
 * with a fixed camera such that you don't need the resolution
 * of small triangles near the perimeter. For example, a value
 * of 2 will produce stacks whose outside radius increases with
 * the square of the stack index. A value of 1 will give uniform
 * stacks.
 *
 * @param {number} radius Radius of the ground plane.
 * @param {number} divisions Number of triangles in the ground plane (at least 3).
 * @param {number} [stacks] Number of radial divisions (default=1).
 * @param {number} [innerRadius] Default 0.
 * @param {number} [stackPower] Power to raise stack size to for decreasing width.
 * @return {Object.<string, TypedArray>} The created vertices.
 * @memberOf module:twgl/primitives
 */
function createDiscVertices(
    radius,
    divisions,
    stacks,
    innerRadius,
    stackPower) {
  if (divisions < 3) {
    throw new Error('divisions must be at least 3');
  }

  stacks = stacks ? stacks : 1;
  stackPower = stackPower ? stackPower : 1;
  innerRadius = innerRadius ? innerRadius : 0;

  // Note: We don't share the center vertex because that would
  // mess up texture coordinates.
  const numVertices = (divisions + 1) * (stacks + 1);

  const positions = createAugmentedTypedArray(3, numVertices);
  const normals   = createAugmentedTypedArray(3, numVertices);
  const texcoords = createAugmentedTypedArray(2, numVertices);
  const indices   = createAugmentedTypedArray(3, stacks * divisions * 2, Uint16Array);

  let firstIndex = 0;
  const radiusSpan = radius - innerRadius;
  const pointsPerStack = divisions + 1;

  // Build the disk one stack at a time.
  for (let stack = 0; stack <= stacks; ++stack) {
    const stackRadius = innerRadius + radiusSpan * Math.pow(stack / stacks, stackPower);

    for (let i = 0; i <= divisions; ++i) {
      const theta = 2.0 * Math.PI * i / divisions;
      const x = stackRadius * Math.cos(theta);
      const z = stackRadius * Math.sin(theta);

      positions.push(x, 0, z);
      normals.push(0, 1, 0);
      texcoords.push(1 - (i / divisions), stack / stacks);
      if (stack > 0 && i !== divisions) {
        // a, b, c and d are the indices of the vertices of a quad.  unless
        // the current stack is the one closest to the center, in which case
        // the vertices a and b connect to the center vertex.
        const a = firstIndex + (i + 1);
        const b = firstIndex + i;
        const c = firstIndex + i - pointsPerStack;
        const d = firstIndex + (i + 1) - pointsPerStack;

        // Make a quad of the vertices a, b, c, d.
        indices.push(a, b, c);
        indices.push(a, c, d);
      }
    }

    firstIndex += divisions + 1;
  }

  return {
    position: positions,
    normal: normals,
    texcoord: texcoords,
    indices: indices,
  };
}

/**
 * creates a random integer between 0 and range - 1 inclusive.
 * @param {number} range
 * @return {number} random value between 0 and range - 1 inclusive.
 * @private
 */
function randInt(range) {
  return Math.random() * range | 0;
}

/**
 * Used to supply random colors
 * @callback RandomColorFunc
 * @param {number} ndx index of triangle/quad if unindexed or index of vertex if indexed
 * @param {number} channel 0 = red, 1 = green, 2 = blue, 3 = alpha
 * @return {number} a number from 0 to 255
 * @memberOf module:twgl/primitives
 */

/**
 * @typedef {Object} RandomVerticesOptions
 * @property {number} [vertsPerColor] Defaults to 3 for non-indexed vertices
 * @property {module:twgl/primitives.RandomColorFunc} [rand] A function to generate random numbers
 * @memberOf module:twgl/primitives
 */

/**
 * Creates an augmentedTypedArray of random vertex colors.
 * If the vertices are indexed (have an indices array) then will
 * just make random colors. Otherwise assumes they are triangles
 * and makes one random color for every 3 vertices.
 * @param {Object.<string, AugmentedTypedArray>} vertices Vertices as returned from one of the createXXXVertices functions.
 * @param {module:twgl/primitives.RandomVerticesOptions} [options] options.
 * @return {Object.<string, AugmentedTypedArray>} same vertices as passed in with `color` added.
 * @memberOf module:twgl/primitives
 */
function makeRandomVertexColors(vertices, options) {
  options = options || {};
  const numElements = vertices.position.numElements;
  const vColors = createAugmentedTypedArray(4, numElements, Uint8Array);
  const rand = options.rand || function(ndx, channel) {
    return channel < 3 ? randInt(256) : 255;
  };
  vertices.color = vColors;
  if (vertices.indices) {
    // just make random colors if index
    for (let ii = 0; ii < numElements; ++ii) {
      vColors.push(rand(ii, 0), rand(ii, 1), rand(ii, 2), rand(ii, 3));
    }
  } else {
    // make random colors per triangle
    const numVertsPerColor = options.vertsPerColor || 3;
    const numSets = numElements / numVertsPerColor;
    for (let ii = 0; ii < numSets; ++ii) {  // eslint-disable-line
      const color = [rand(ii, 0), rand(ii, 1), rand(ii, 2), rand(ii, 3)];
      for (let jj = 0; jj < numVertsPerColor; ++jj) {
        vColors.push(color);
      }
    }
  }
  return vertices;
}

/**
 * creates a function that calls fn to create vertices and then
 * creates a buffers for them
 * @private
 */
function createBufferFunc(fn) {
  return function(gl) {
    const arrays = fn.apply(this, Array.prototype.slice.call(arguments, 1));
    return createBuffersFromArrays(gl, arrays);
  };
}

/**
 * creates a function that calls fn to create vertices and then
 * creates a bufferInfo object for them
 * @private
 */
function createBufferInfoFunc(fn) {
  return function(gl) {
    const arrays = fn.apply(null,  Array.prototype.slice.call(arguments, 1));
    return createBufferInfoFromArrays(gl, arrays);
  };
}

const arraySpecPropertyNames = [
  "numComponents",
  "size",
  "type",
  "normalize",
  "stride",
  "offset",
  "attrib",
  "name",
  "attribName",
];

/**
 * Copy elements from one array to another
 *
 * @param {Array|TypedArray} src source array
 * @param {Array|TypedArray} dst dest array
 * @param {number} dstNdx index in dest to copy src
 * @param {number} [offset] offset to add to copied values
 * @private
 */
function copyElements(src, dst, dstNdx, offset) {
  offset = offset || 0;
  const length = src.length;
  for (let ii = 0; ii < length; ++ii) {
    dst[dstNdx + ii] = src[ii] + offset;
  }
}

/**
 * Creates an array of the same time
 *
 * @param {(number[]|ArrayBufferView|module:twgl.FullArraySpec)} srcArray array who's type to copy
 * @param {number} length size of new array
 * @return {(number[]|ArrayBufferView|module:twgl.FullArraySpec)} array with same type as srcArray
 * @private
 */
function createArrayOfSameType(srcArray, length) {
  const arraySrc = getArray$1(srcArray);
  const newArray = new arraySrc.constructor(length);
  let newArraySpec = newArray;
  // If it appears to have been augmented make new one augmented
  if (arraySrc.numComponents && arraySrc.numElements) {
    augmentTypedArray(newArray, arraySrc.numComponents);
  }
  // If it was a full spec make new one a full spec
  if (srcArray.data) {
    newArraySpec = {
      data: newArray,
    };
    copyNamedProperties(arraySpecPropertyNames, srcArray, newArraySpec);
  }
  return newArraySpec;
}

/**
 * Concatenates sets of vertices
 *
 * Assumes the vertices match in composition. For example
 * if one set of vertices has positions, normals, and indices
 * all sets of vertices must have positions, normals, and indices
 * and of the same type.
 *
 * Example:
 *
 *      const cubeVertices = twgl.primitives.createCubeVertices(2);
 *      const sphereVertices = twgl.primitives.createSphereVertices(1, 10, 10);
 *      // move the sphere 2 units up
 *      twgl.primitives.reorientVertices(
 *          sphereVertices, twgl.m4.translation([0, 2, 0]));
 *      // merge the sphere with the cube
 *      const cubeSphereVertices = twgl.primitives.concatVertices(
 *          [cubeVertices, sphereVertices]);
 *      // turn them into WebGL buffers and attrib data
 *      const bufferInfo = twgl.createBufferInfoFromArrays(gl, cubeSphereVertices);
 *
 * @param {module:twgl.Arrays[]} arrays Array of arrays of vertices
 * @return {module:twgl.Arrays} The concatenated vertices.
 * @memberOf module:twgl/primitives
 */
function concatVertices(arrayOfArrays) {
  const names = {};
  let baseName;
  // get names of all arrays.
  // and numElements for each set of vertices
  for (let ii = 0; ii < arrayOfArrays.length; ++ii) {
    const arrays = arrayOfArrays[ii];
    Object.keys(arrays).forEach(function(name) {  // eslint-disable-line
      if (!names[name]) {
        names[name] = [];
      }
      if (!baseName && name !== 'indices') {
        baseName = name;
      }
      const arrayInfo = arrays[name];
      const numComponents = getNumComponents$1(arrayInfo, name);
      const array = getArray$1(arrayInfo);
      const numElements = array.length / numComponents;
      names[name].push(numElements);
    });
  }

  // compute length of combined array
  // and return one for reference
  function getLengthOfCombinedArrays(name) {
    let length = 0;
    let arraySpec;
    for (let ii = 0; ii < arrayOfArrays.length; ++ii) {
      const arrays = arrayOfArrays[ii];
      const arrayInfo = arrays[name];
      const array = getArray$1(arrayInfo);
      length += array.length;
      if (!arraySpec || arrayInfo.data) {
        arraySpec = arrayInfo;
      }
    }
    return {
      length: length,
      spec: arraySpec,
    };
  }

  function copyArraysToNewArray(name, base, newArray) {
    let baseIndex = 0;
    let offset = 0;
    for (let ii = 0; ii < arrayOfArrays.length; ++ii) {
      const arrays = arrayOfArrays[ii];
      const arrayInfo = arrays[name];
      const array = getArray$1(arrayInfo);
      if (name === 'indices') {
        copyElements(array, newArray, offset, baseIndex);
        baseIndex += base[ii];
      } else {
        copyElements(array, newArray, offset);
      }
      offset += array.length;
    }
  }

  const base = names[baseName];

  const newArrays = {};
  Object.keys(names).forEach(function(name) {
    const info = getLengthOfCombinedArrays(name);
    const newArraySpec = createArrayOfSameType(info.spec, info.length);
    copyArraysToNewArray(name, base, getArray$1(newArraySpec));
    newArrays[name] = newArraySpec;
  });
  return newArrays;
}

/**
 * Creates a duplicate set of vertices
 *
 * This is useful for calling reorientVertices when you
 * also want to keep the original available
 *
 * @param {module:twgl.Arrays} arrays of vertices
 * @return {module:twgl.Arrays} The duplicated vertices.
 * @memberOf module:twgl/primitives
 */
function duplicateVertices(arrays) {
  const newArrays = {};
  Object.keys(arrays).forEach(function(name) {
    const arraySpec = arrays[name];
    const srcArray = getArray$1(arraySpec);
    const newArraySpec = createArrayOfSameType(arraySpec, srcArray.length);
    copyElements(srcArray, getArray$1(newArraySpec), 0);
    newArrays[name] = newArraySpec;
  });
  return newArrays;
}

const create3DFBufferInfo = createBufferInfoFunc(create3DFVertices);
const create3DFBuffers = createBufferFunc(create3DFVertices);
const createCubeBufferInfo = createBufferInfoFunc(createCubeVertices);
const createCubeBuffers = createBufferFunc(createCubeVertices);
const createPlaneBufferInfo = createBufferInfoFunc(createPlaneVertices);
const createPlaneBuffers = createBufferFunc(createPlaneVertices);
const createSphereBufferInfo = createBufferInfoFunc(createSphereVertices);
const createSphereBuffers = createBufferFunc(createSphereVertices);
const createTruncatedConeBufferInfo = createBufferInfoFunc(createTruncatedConeVertices);
const createTruncatedConeBuffers = createBufferFunc(createTruncatedConeVertices);
const createXYQuadBufferInfo = createBufferInfoFunc(createXYQuadVertices);
const createXYQuadBuffers = createBufferFunc(createXYQuadVertices);
const createCrescentBufferInfo = createBufferInfoFunc(createCrescentVertices);
const createCrescentBuffers = createBufferFunc(createCrescentVertices);
const createCylinderBufferInfo = createBufferInfoFunc(createCylinderVertices);
const createCylinderBuffers = createBufferFunc(createCylinderVertices);
const createTorusBufferInfo = createBufferInfoFunc(createTorusVertices);
const createTorusBuffers = createBufferFunc(createTorusVertices);
const createDiscBufferInfo = createBufferInfoFunc(createDiscVertices);
const createDiscBuffers = createBufferFunc(createDiscVertices);

// these were mis-spelled until 4.12
const createCresentBufferInfo = createCrescentBufferInfo;
const createCresentBuffers = createCrescentBuffers;
const createCresentVertices = createCrescentVertices;

var primitives = /*#__PURE__*/Object.freeze({
  __proto__: null,
  create3DFBufferInfo: create3DFBufferInfo,
  create3DFBuffers: create3DFBuffers,
  create3DFVertices: create3DFVertices,
  createAugmentedTypedArray: createAugmentedTypedArray,
  createCubeBufferInfo: createCubeBufferInfo,
  createCubeBuffers: createCubeBuffers,
  createCubeVertices: createCubeVertices,
  createPlaneBufferInfo: createPlaneBufferInfo,
  createPlaneBuffers: createPlaneBuffers,
  createPlaneVertices: createPlaneVertices,
  createSphereBufferInfo: createSphereBufferInfo,
  createSphereBuffers: createSphereBuffers,
  createSphereVertices: createSphereVertices,
  createTruncatedConeBufferInfo: createTruncatedConeBufferInfo,
  createTruncatedConeBuffers: createTruncatedConeBuffers,
  createTruncatedConeVertices: createTruncatedConeVertices,
  createXYQuadBufferInfo: createXYQuadBufferInfo,
  createXYQuadBuffers: createXYQuadBuffers,
  createXYQuadVertices: createXYQuadVertices,
  createCresentBufferInfo: createCresentBufferInfo,
  createCresentBuffers: createCresentBuffers,
  createCresentVertices: createCresentVertices,
  createCrescentBufferInfo: createCrescentBufferInfo,
  createCrescentBuffers: createCrescentBuffers,
  createCrescentVertices: createCrescentVertices,
  createCylinderBufferInfo: createCylinderBufferInfo,
  createCylinderBuffers: createCylinderBuffers,
  createCylinderVertices: createCylinderVertices,
  createTorusBufferInfo: createTorusBufferInfo,
  createTorusBuffers: createTorusBuffers,
  createTorusVertices: createTorusVertices,
  createDiscBufferInfo: createDiscBufferInfo,
  createDiscBuffers: createDiscBuffers,
  createDiscVertices: createDiscVertices,
  deindexVertices: deindexVertices,
  flattenNormals: flattenNormals,
  makeRandomVertexColors: makeRandomVertexColors,
  reorientDirections: reorientDirections,
  reorientNormals: reorientNormals,
  reorientPositions: reorientPositions,
  reorientVertices: reorientVertices,
  concatVertices: concatVertices,
  duplicateVertices: duplicateVertices
});

/*
 * Copyright 2019 Gregg Tavares
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS IN THE SOFTWARE.
 */

/**
 * Gets the gl version as a number
 * @param {WebGLRenderingContext} gl A WebGLRenderingContext
 * @return {number} version of gl
 * @private
 */
//function getVersionAsNumber(gl) {
//  return parseFloat(gl.getParameter(gl.VERSION).substr(6));
//}

/**
 * Check if context is WebGL 2.0
 * @param {WebGLRenderingContext} gl A WebGLRenderingContext
 * @return {bool} true if it's WebGL 2.0
 * @memberOf module:twgl
 */
function isWebGL2(gl) {
  // This is the correct check but it's slow
  //  return gl.getParameter(gl.VERSION).indexOf("WebGL 2.0") === 0;
  // This might also be the correct check but I'm assuming it's slow-ish
  // return gl instanceof WebGL2RenderingContext;
  return !!gl.texStorage2D;
}

/**
 * Check if context is WebGL 1.0
 * @param {WebGLRenderingContext} gl A WebGLRenderingContext
 * @return {bool} true if it's WebGL 1.0
 * @memberOf module:twgl
 */
function isWebGL1(gl) {
  // This is the correct check but it's slow
  // const version = getVersionAsNumber(gl);
  // return version <= 1.0 && version > 0.0;  // because as of 2016/5 Edge returns 0.96
  // This might also be the correct check but I'm assuming it's slow-ish
  // return gl instanceof WebGLRenderingContext;
  return !gl.texStorage2D;
}

/**
 * Gets a string for WebGL enum
 *
 * Note: Several enums are the same. Without more
 * context (which function) it's impossible to always
 * give the correct enum. As it is, for matching values
 * it gives all enums. Checking the WebGL2RenderingContext
 * that means
 *
 *      0     = ZERO | POINT | NONE | NO_ERROR
 *      1     = ONE | LINES | SYNC_FLUSH_COMMANDS_BIT
 *      32777 = BLEND_EQUATION_RGB | BLEND_EQUATION_RGB
 *      36662 = COPY_READ_BUFFER | COPY_READ_BUFFER_BINDING
 *      36663 = COPY_WRITE_BUFFER | COPY_WRITE_BUFFER_BINDING
 *      36006 = FRAMEBUFFER_BINDING | DRAW_FRAMEBUFFER_BINDING
 *
 * It's also not useful for bits really unless you pass in individual bits.
 * In other words
 *
 *     const bits = gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT;
 *     twgl.glEnumToString(gl, bits);  // not going to work
 *
 * Note that some enums only exist on extensions. If you
 * want them to show up you need to pass the extension at least
 * once. For example
 *
 *     const ext = gl.getExtension('WEBGL_compressed_texture_s3tc');
 *     if (ext) {
 *        twgl.glEnumToString(ext, 0);  // just prime the function
 *
 *        ..later..
 *
 *        const internalFormat = ext.COMPRESSED_RGB_S3TC_DXT1_EXT;
 *        console.log(twgl.glEnumToString(gl, internalFormat));
 *
 * Notice I didn't have to pass the extension the second time. This means
 * you can have place that generically gets an enum for texture formats for example.
 * and as long as you primed the function with the extensions
 *
 * If you're using `twgl.addExtensionsToContext` to enable your extensions
 * then twgl will automatically get the extension's enums.
 *
 * @param {WebGLRenderingContext} gl A WebGLRenderingContext or any extension object
 * @param {number} value the value of the enum you want to look up.
 * @return {string} enum string or hex value
 * @memberOf module:twgl
 * @function glEnumToString
 */
const glEnumToString = (function() {
  const haveEnumsForType = {};
  const enums = {};

  function addEnums(gl) {
    const type = gl.constructor.name;
    if (!haveEnumsForType[type]) {
      for (const key in gl) {
        if (typeof gl[key] === 'number') {
          const existing = enums[gl[key]];
          enums[gl[key]] = existing ? `${existing} | ${key}` : key;
        }
      }
      haveEnumsForType[type] = true;
    }
  }

  return function glEnumToString(gl, value) {
    addEnums(gl);
    return enums[value] || (typeof value === 'number' ? `0x${value.toString(16)}` : value);
  };
}());

var utils = /*#__PURE__*/Object.freeze({
  __proto__: null,
  glEnumToString: glEnumToString,
  isWebGL1: isWebGL1,
  isWebGL2: isWebGL2
});

/*
 * Copyright 2019 Gregg Tavares
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS IN THE SOFTWARE.
 */
const defaults$1 = {
  textureColor: new Uint8Array([128, 192, 255, 255]),
  textureOptions: {},
  crossOrigin: undefined,
};
const isArrayBuffer$1 = isArrayBuffer;

// Should we make this on demand?
const getShared2DContext = function() {
  let s_ctx;
  return function getShared2DContext() {
    s_ctx = s_ctx ||
        ((typeof document !== 'undefined' && document.createElement)
          ? document.createElement("canvas").getContext("2d")
          : null);
    return s_ctx;
  };
}();

// NOTE: Chrome supports 2D canvas in a Worker (behind flag as of v64 but
//       not only does Firefox NOT support it but Firefox freezes immediately
//       if you try to create one instead of just returning null and continuing.
//  : (global.OffscreenCanvas && (new global.OffscreenCanvas(1, 1)).getContext("2d"));  // OffscreenCanvas may not support 2d

// NOTE: We can maybe remove some of the need for the 2d canvas. In WebGL2
// we can use the various unpack settings. Otherwise we could try using
// the ability of an ImageBitmap to be cut. Unfortunately cutting an ImageBitmap
// is async and the current TWGL code expects a non-Async result though that
// might not be a problem. ImageBitmap though is not available in Edge or Safari
// as of 2018-01-02

/* PixelFormat */
const ALPHA                          = 0x1906;
const RGB                            = 0x1907;
const RGBA                           = 0x1908;
const LUMINANCE                      = 0x1909;
const LUMINANCE_ALPHA                = 0x190A;
const DEPTH_COMPONENT                = 0x1902;
const DEPTH_STENCIL                  = 0x84F9;

/* TextureWrapMode */
// const REPEAT                         = 0x2901;
// const MIRRORED_REPEAT                = 0x8370;
const CLAMP_TO_EDGE                  = 0x812f;

/* TextureMagFilter */
const NEAREST                        = 0x2600;
const LINEAR                         = 0x2601;

/* TextureMinFilter */
// const NEAREST_MIPMAP_NEAREST         = 0x2700;
// const LINEAR_MIPMAP_NEAREST          = 0x2701;
// const NEAREST_MIPMAP_LINEAR          = 0x2702;
// const LINEAR_MIPMAP_LINEAR           = 0x2703;

/* Texture Target */
const TEXTURE_2D                     = 0x0de1;
const TEXTURE_CUBE_MAP               = 0x8513;
const TEXTURE_3D                     = 0x806f;
const TEXTURE_2D_ARRAY               = 0x8c1a;

/* Cubemap Targets */
const TEXTURE_CUBE_MAP_POSITIVE_X    = 0x8515;
const TEXTURE_CUBE_MAP_NEGATIVE_X    = 0x8516;
const TEXTURE_CUBE_MAP_POSITIVE_Y    = 0x8517;
const TEXTURE_CUBE_MAP_NEGATIVE_Y    = 0x8518;
const TEXTURE_CUBE_MAP_POSITIVE_Z    = 0x8519;
const TEXTURE_CUBE_MAP_NEGATIVE_Z    = 0x851a;

/* Texture Parameters */
const TEXTURE_MIN_FILTER             = 0x2801;
const TEXTURE_MAG_FILTER             = 0x2800;
const TEXTURE_WRAP_S                 = 0x2802;
const TEXTURE_WRAP_T                 = 0x2803;
const TEXTURE_WRAP_R                 = 0x8072;
const TEXTURE_MIN_LOD                = 0x813a;
const TEXTURE_MAX_LOD                = 0x813b;
const TEXTURE_BASE_LEVEL             = 0x813c;
const TEXTURE_MAX_LEVEL              = 0x813d;


/* Pixel store */
const UNPACK_ALIGNMENT                   = 0x0cf5;
const UNPACK_ROW_LENGTH                  = 0x0cf2;
const UNPACK_IMAGE_HEIGHT                = 0x806e;
const UNPACK_SKIP_PIXELS                 = 0x0cf4;
const UNPACK_SKIP_ROWS                   = 0x0cf3;
const UNPACK_SKIP_IMAGES                 = 0x806d;
const UNPACK_COLORSPACE_CONVERSION_WEBGL = 0x9243;
const UNPACK_PREMULTIPLY_ALPHA_WEBGL     = 0x9241;
const UNPACK_FLIP_Y_WEBGL                = 0x9240;

const R8                           = 0x8229;
const R8_SNORM                     = 0x8F94;
const R16F                         = 0x822D;
const R32F                         = 0x822E;
const R8UI                         = 0x8232;
const R8I                          = 0x8231;
const RG16UI                       = 0x823A;
const RG16I                        = 0x8239;
const RG32UI                       = 0x823C;
const RG32I                        = 0x823B;
const RG8                          = 0x822B;
const RG8_SNORM                    = 0x8F95;
const RG16F                        = 0x822F;
const RG32F                        = 0x8230;
const RG8UI                        = 0x8238;
const RG8I                         = 0x8237;
const R16UI                        = 0x8234;
const R16I                         = 0x8233;
const R32UI                        = 0x8236;
const R32I                         = 0x8235;
const RGB8                         = 0x8051;
const SRGB8                        = 0x8C41;
const RGB565                       = 0x8D62;
const RGB8_SNORM                   = 0x8F96;
const R11F_G11F_B10F               = 0x8C3A;
const RGB9_E5                      = 0x8C3D;
const RGB16F                       = 0x881B;
const RGB32F                       = 0x8815;
const RGB8UI                       = 0x8D7D;
const RGB8I                        = 0x8D8F;
const RGB16UI                      = 0x8D77;
const RGB16I                       = 0x8D89;
const RGB32UI                      = 0x8D71;
const RGB32I                       = 0x8D83;
const RGBA8                        = 0x8058;
const SRGB8_ALPHA8                 = 0x8C43;
const RGBA8_SNORM                  = 0x8F97;
const RGB5_A1                      = 0x8057;
const RGBA4                        = 0x8056;
const RGB10_A2                     = 0x8059;
const RGBA16F                      = 0x881A;
const RGBA32F                      = 0x8814;
const RGBA8UI                      = 0x8D7C;
const RGBA8I                       = 0x8D8E;
const RGB10_A2UI                   = 0x906F;
const RGBA16UI                     = 0x8D76;
const RGBA16I                      = 0x8D88;
const RGBA32I                      = 0x8D82;
const RGBA32UI                     = 0x8D70;

const DEPTH_COMPONENT16            = 0x81A5;
const DEPTH_COMPONENT24            = 0x81A6;
const DEPTH_COMPONENT32F           = 0x8CAC;
const DEPTH32F_STENCIL8            = 0x8CAD;
const DEPTH24_STENCIL8             = 0x88F0;

/* DataType */
const BYTE$2                         = 0x1400;
const UNSIGNED_BYTE$2                = 0x1401;
const SHORT$2                        = 0x1402;
const UNSIGNED_SHORT$2               = 0x1403;
const INT$2                          = 0x1404;
const UNSIGNED_INT$2                 = 0x1405;
const FLOAT$2                        = 0x1406;
const UNSIGNED_SHORT_4_4_4_4$1       = 0x8033;
const UNSIGNED_SHORT_5_5_5_1$1       = 0x8034;
const UNSIGNED_SHORT_5_6_5$1         = 0x8363;
const HALF_FLOAT$1                   = 0x140B;
const HALF_FLOAT_OES               = 0x8D61;  // Thanks Khronos for making this different >:(
const UNSIGNED_INT_2_10_10_10_REV$1  = 0x8368;
const UNSIGNED_INT_10F_11F_11F_REV$1 = 0x8C3B;
const UNSIGNED_INT_5_9_9_9_REV$1     = 0x8C3E;
const FLOAT_32_UNSIGNED_INT_24_8_REV$1 = 0x8DAD;
const UNSIGNED_INT_24_8$1            = 0x84FA;

const RG                           = 0x8227;
const RG_INTEGER                   = 0x8228;
const RED                          = 0x1903;
const RED_INTEGER                  = 0x8D94;
const RGB_INTEGER                  = 0x8D98;
const RGBA_INTEGER                 = 0x8D99;

const formatInfo = {};
{
  // NOTE: this is named `numColorComponents` vs `numComponents` so we can let Uglify mangle
  // the name.
  const f = formatInfo;
  f[ALPHA]           = { numColorComponents: 1, };
  f[LUMINANCE]       = { numColorComponents: 1, };
  f[LUMINANCE_ALPHA] = { numColorComponents: 2, };
  f[RGB]             = { numColorComponents: 3, };
  f[RGBA]            = { numColorComponents: 4, };
  f[RED]             = { numColorComponents: 1, };
  f[RED_INTEGER]     = { numColorComponents: 1, };
  f[RG]              = { numColorComponents: 2, };
  f[RG_INTEGER]      = { numColorComponents: 2, };
  f[RGB]             = { numColorComponents: 3, };
  f[RGB_INTEGER]     = { numColorComponents: 3, };
  f[RGBA]            = { numColorComponents: 4, };
  f[RGBA_INTEGER]    = { numColorComponents: 4, };
  f[DEPTH_COMPONENT] = { numColorComponents: 1, };
  f[DEPTH_STENCIL]   = { numColorComponents: 2, };
}

/**
 * @typedef {Object} TextureFormatDetails
 * @property {number} textureFormat format to pass texImage2D and similar functions.
 * @property {boolean} colorRenderable true if you can render to this format of texture.
 * @property {boolean} textureFilterable true if you can filter the texture, false if you can ony use `NEAREST`.
 * @property {number[]} type Array of possible types you can pass to texImage2D and similar function
 * @property {Object.<number,number>} bytesPerElementMap A map of types to bytes per element
 * @private
 */

let s_textureInternalFormatInfo;
function getTextureInternalFormatInfo(internalFormat) {
  if (!s_textureInternalFormatInfo) {
    // NOTE: these properties need unique names so we can let Uglify mangle the name.
    const t = {};
    // unsized formats
    t[ALPHA]              = { textureFormat: ALPHA,           colorRenderable: true,  textureFilterable: true,  bytesPerElement: [1, 2, 2, 4],        type: [UNSIGNED_BYTE$2, HALF_FLOAT$1, HALF_FLOAT_OES, FLOAT$2], };
    t[LUMINANCE]          = { textureFormat: LUMINANCE,       colorRenderable: true,  textureFilterable: true,  bytesPerElement: [1, 2, 2, 4],        type: [UNSIGNED_BYTE$2, HALF_FLOAT$1, HALF_FLOAT_OES, FLOAT$2], };
    t[LUMINANCE_ALPHA]    = { textureFormat: LUMINANCE_ALPHA, colorRenderable: true,  textureFilterable: true,  bytesPerElement: [2, 4, 4, 8],        type: [UNSIGNED_BYTE$2, HALF_FLOAT$1, HALF_FLOAT_OES, FLOAT$2], };
    t[RGB]                = { textureFormat: RGB,             colorRenderable: true,  textureFilterable: true,  bytesPerElement: [3, 6, 6, 12, 2],    type: [UNSIGNED_BYTE$2, HALF_FLOAT$1, HALF_FLOAT_OES, FLOAT$2, UNSIGNED_SHORT_5_6_5$1], };
    t[RGBA]               = { textureFormat: RGBA,            colorRenderable: true,  textureFilterable: true,  bytesPerElement: [4, 8, 8, 16, 2, 2], type: [UNSIGNED_BYTE$2, HALF_FLOAT$1, HALF_FLOAT_OES, FLOAT$2, UNSIGNED_SHORT_4_4_4_4$1, UNSIGNED_SHORT_5_5_5_1$1], };
    t[DEPTH_COMPONENT]    = { textureFormat: DEPTH_COMPONENT, colorRenderable: true,  textureFilterable: false, bytesPerElement: [2, 4],              type: [UNSIGNED_INT$2, UNSIGNED_SHORT$2], };

    // sized formats
    t[R8]                 = { textureFormat: RED,             colorRenderable: true,  textureFilterable: true,  bytesPerElement: [1],        type: [UNSIGNED_BYTE$2], };
    t[R8_SNORM]           = { textureFormat: RED,             colorRenderable: false, textureFilterable: true,  bytesPerElement: [1],        type: [BYTE$2], };
    t[R16F]               = { textureFormat: RED,             colorRenderable: false, textureFilterable: true,  bytesPerElement: [4, 2],     type: [FLOAT$2, HALF_FLOAT$1], };
    t[R32F]               = { textureFormat: RED,             colorRenderable: false, textureFilterable: false, bytesPerElement: [4],        type: [FLOAT$2], };
    t[R8UI]               = { textureFormat: RED_INTEGER,     colorRenderable: true,  textureFilterable: false, bytesPerElement: [1],        type: [UNSIGNED_BYTE$2], };
    t[R8I]                = { textureFormat: RED_INTEGER,     colorRenderable: true,  textureFilterable: false, bytesPerElement: [1],        type: [BYTE$2], };
    t[R16UI]              = { textureFormat: RED_INTEGER,     colorRenderable: true,  textureFilterable: false, bytesPerElement: [2],        type: [UNSIGNED_SHORT$2], };
    t[R16I]               = { textureFormat: RED_INTEGER,     colorRenderable: true,  textureFilterable: false, bytesPerElement: [2],        type: [SHORT$2], };
    t[R32UI]              = { textureFormat: RED_INTEGER,     colorRenderable: true,  textureFilterable: false, bytesPerElement: [4],        type: [UNSIGNED_INT$2], };
    t[R32I]               = { textureFormat: RED_INTEGER,     colorRenderable: true,  textureFilterable: false, bytesPerElement: [4],        type: [INT$2], };
    t[RG8]                = { textureFormat: RG,              colorRenderable: true,  textureFilterable: true,  bytesPerElement: [2],        type: [UNSIGNED_BYTE$2], };
    t[RG8_SNORM]          = { textureFormat: RG,              colorRenderable: false, textureFilterable: true,  bytesPerElement: [2],        type: [BYTE$2], };
    t[RG16F]              = { textureFormat: RG,              colorRenderable: false, textureFilterable: true,  bytesPerElement: [8, 4],     type: [FLOAT$2, HALF_FLOAT$1], };
    t[RG32F]              = { textureFormat: RG,              colorRenderable: false, textureFilterable: false, bytesPerElement: [8],        type: [FLOAT$2], };
    t[RG8UI]              = { textureFormat: RG_INTEGER,      colorRenderable: true,  textureFilterable: false, bytesPerElement: [2],        type: [UNSIGNED_BYTE$2], };
    t[RG8I]               = { textureFormat: RG_INTEGER,      colorRenderable: true,  textureFilterable: false, bytesPerElement: [2],        type: [BYTE$2], };
    t[RG16UI]             = { textureFormat: RG_INTEGER,      colorRenderable: true,  textureFilterable: false, bytesPerElement: [4],        type: [UNSIGNED_SHORT$2], };
    t[RG16I]              = { textureFormat: RG_INTEGER,      colorRenderable: true,  textureFilterable: false, bytesPerElement: [4],        type: [SHORT$2], };
    t[RG32UI]             = { textureFormat: RG_INTEGER,      colorRenderable: true,  textureFilterable: false, bytesPerElement: [8],        type: [UNSIGNED_INT$2], };
    t[RG32I]              = { textureFormat: RG_INTEGER,      colorRenderable: true,  textureFilterable: false, bytesPerElement: [8],        type: [INT$2], };
    t[RGB8]               = { textureFormat: RGB,             colorRenderable: true,  textureFilterable: true,  bytesPerElement: [3],        type: [UNSIGNED_BYTE$2], };
    t[SRGB8]              = { textureFormat: RGB,             colorRenderable: false, textureFilterable: true,  bytesPerElement: [3],        type: [UNSIGNED_BYTE$2], };
    t[RGB565]             = { textureFormat: RGB,             colorRenderable: true,  textureFilterable: true,  bytesPerElement: [3, 2],     type: [UNSIGNED_BYTE$2, UNSIGNED_SHORT_5_6_5$1], };
    t[RGB8_SNORM]         = { textureFormat: RGB,             colorRenderable: false, textureFilterable: true,  bytesPerElement: [3],        type: [BYTE$2], };
    t[R11F_G11F_B10F]     = { textureFormat: RGB,             colorRenderable: false, textureFilterable: true,  bytesPerElement: [12, 6, 4], type: [FLOAT$2, HALF_FLOAT$1, UNSIGNED_INT_10F_11F_11F_REV$1], };
    t[RGB9_E5]            = { textureFormat: RGB,             colorRenderable: false, textureFilterable: true,  bytesPerElement: [12, 6, 4], type: [FLOAT$2, HALF_FLOAT$1, UNSIGNED_INT_5_9_9_9_REV$1], };
    t[RGB16F]             = { textureFormat: RGB,             colorRenderable: false, textureFilterable: true,  bytesPerElement: [12, 6],    type: [FLOAT$2, HALF_FLOAT$1], };
    t[RGB32F]             = { textureFormat: RGB,             colorRenderable: false, textureFilterable: false, bytesPerElement: [12],       type: [FLOAT$2], };
    t[RGB8UI]             = { textureFormat: RGB_INTEGER,     colorRenderable: false, textureFilterable: false, bytesPerElement: [3],        type: [UNSIGNED_BYTE$2], };
    t[RGB8I]              = { textureFormat: RGB_INTEGER,     colorRenderable: false, textureFilterable: false, bytesPerElement: [3],        type: [BYTE$2], };
    t[RGB16UI]            = { textureFormat: RGB_INTEGER,     colorRenderable: false, textureFilterable: false, bytesPerElement: [6],        type: [UNSIGNED_SHORT$2], };
    t[RGB16I]             = { textureFormat: RGB_INTEGER,     colorRenderable: false, textureFilterable: false, bytesPerElement: [6],        type: [SHORT$2], };
    t[RGB32UI]            = { textureFormat: RGB_INTEGER,     colorRenderable: false, textureFilterable: false, bytesPerElement: [12],       type: [UNSIGNED_INT$2], };
    t[RGB32I]             = { textureFormat: RGB_INTEGER,     colorRenderable: false, textureFilterable: false, bytesPerElement: [12],       type: [INT$2], };
    t[RGBA8]              = { textureFormat: RGBA,            colorRenderable: true,  textureFilterable: true,  bytesPerElement: [4],        type: [UNSIGNED_BYTE$2], };
    t[SRGB8_ALPHA8]       = { textureFormat: RGBA,            colorRenderable: true,  textureFilterable: true,  bytesPerElement: [4],        type: [UNSIGNED_BYTE$2], };
    t[RGBA8_SNORM]        = { textureFormat: RGBA,            colorRenderable: false, textureFilterable: true,  bytesPerElement: [4],        type: [BYTE$2], };
    t[RGB5_A1]            = { textureFormat: RGBA,            colorRenderable: true,  textureFilterable: true,  bytesPerElement: [4, 2, 4],  type: [UNSIGNED_BYTE$2, UNSIGNED_SHORT_5_5_5_1$1, UNSIGNED_INT_2_10_10_10_REV$1], };
    t[RGBA4]              = { textureFormat: RGBA,            colorRenderable: true,  textureFilterable: true,  bytesPerElement: [4, 2],     type: [UNSIGNED_BYTE$2, UNSIGNED_SHORT_4_4_4_4$1], };
    t[RGB10_A2]           = { textureFormat: RGBA,            colorRenderable: true,  textureFilterable: true,  bytesPerElement: [4],        type: [UNSIGNED_INT_2_10_10_10_REV$1], };
    t[RGBA16F]            = { textureFormat: RGBA,            colorRenderable: false, textureFilterable: true,  bytesPerElement: [16, 8],    type: [FLOAT$2, HALF_FLOAT$1], };
    t[RGBA32F]            = { textureFormat: RGBA,            colorRenderable: false, textureFilterable: false, bytesPerElement: [16],       type: [FLOAT$2], };
    t[RGBA8UI]            = { textureFormat: RGBA_INTEGER,    colorRenderable: true,  textureFilterable: false, bytesPerElement: [4],        type: [UNSIGNED_BYTE$2], };
    t[RGBA8I]             = { textureFormat: RGBA_INTEGER,    colorRenderable: true,  textureFilterable: false, bytesPerElement: [4],        type: [BYTE$2], };
    t[RGB10_A2UI]         = { textureFormat: RGBA_INTEGER,    colorRenderable: true,  textureFilterable: false, bytesPerElement: [4],        type: [UNSIGNED_INT_2_10_10_10_REV$1], };
    t[RGBA16UI]           = { textureFormat: RGBA_INTEGER,    colorRenderable: true,  textureFilterable: false, bytesPerElement: [8],        type: [UNSIGNED_SHORT$2], };
    t[RGBA16I]            = { textureFormat: RGBA_INTEGER,    colorRenderable: true,  textureFilterable: false, bytesPerElement: [8],        type: [SHORT$2], };
    t[RGBA32I]            = { textureFormat: RGBA_INTEGER,    colorRenderable: true,  textureFilterable: false, bytesPerElement: [16],       type: [INT$2], };
    t[RGBA32UI]           = { textureFormat: RGBA_INTEGER,    colorRenderable: true,  textureFilterable: false, bytesPerElement: [16],       type: [UNSIGNED_INT$2], };
    // Sized Internal
    t[DEPTH_COMPONENT16]  = { textureFormat: DEPTH_COMPONENT, colorRenderable: true,  textureFilterable: false, bytesPerElement: [2, 4],     type: [UNSIGNED_SHORT$2, UNSIGNED_INT$2], };
    t[DEPTH_COMPONENT24]  = { textureFormat: DEPTH_COMPONENT, colorRenderable: true,  textureFilterable: false, bytesPerElement: [4],        type: [UNSIGNED_INT$2], };
    t[DEPTH_COMPONENT32F] = { textureFormat: DEPTH_COMPONENT, colorRenderable: true,  textureFilterable: false, bytesPerElement: [4],        type: [FLOAT$2], };
    t[DEPTH24_STENCIL8]   = { textureFormat: DEPTH_STENCIL,   colorRenderable: true,  textureFilterable: false, bytesPerElement: [4],        type: [UNSIGNED_INT_24_8$1], };
    t[DEPTH32F_STENCIL8]  = { textureFormat: DEPTH_STENCIL,   colorRenderable: true,  textureFilterable: false, bytesPerElement: [4],        type: [FLOAT_32_UNSIGNED_INT_24_8_REV$1], };

    Object.keys(t).forEach(function(internalFormat) {
      const info = t[internalFormat];
      info.bytesPerElementMap = {};
      info.bytesPerElement.forEach(function(bytesPerElement, ndx) {
        const type = info.type[ndx];
        info.bytesPerElementMap[type] = bytesPerElement;
      });
    });
    s_textureInternalFormatInfo = t;
  }
  return s_textureInternalFormatInfo[internalFormat];
}

/**
 * Gets the number of bytes per element for a given internalFormat / type
 * @param {number} internalFormat The internalFormat parameter from texImage2D etc..
 * @param {number} type The type parameter for texImage2D etc..
 * @return {number} the number of bytes per element for the given internalFormat, type combo
 * @memberOf module:twgl/textures
 */
function getBytesPerElementForInternalFormat(internalFormat, type) {
  const info = getTextureInternalFormatInfo(internalFormat);
  if (!info) {
    throw "unknown internal format";
  }
  const bytesPerElement = info.bytesPerElementMap[type];
  if (bytesPerElement === undefined) {
    throw "unknown internal format";
  }
  return bytesPerElement;
}

/**
 * Info related to a specific texture internalFormat as returned
 * from {@link module:twgl/textures.getFormatAndTypeForInternalFormat}.
 *
 * @typedef {Object} TextureFormatInfo
 * @property {number} format Format to pass to texImage2D and related functions
 * @property {number} type Type to pass to texImage2D and related functions
 * @memberOf module:twgl/textures
 */

/**
 * Gets the format and type for a given internalFormat
 *
 * @param {number} internalFormat The internal format
 * @return {module:twgl/textures.TextureFormatInfo} the corresponding format and type,
 * @memberOf module:twgl/textures
 */
function getFormatAndTypeForInternalFormat(internalFormat) {
  const info = getTextureInternalFormatInfo(internalFormat);
  if (!info) {
    throw "unknown internal format";
  }
  return {
    format: info.textureFormat,
    type: info.type[0],
  };
}

/**
 * Returns true if value is power of 2
 * @param {number} value number to check.
 * @return true if value is power of 2
 * @private
 */
function isPowerOf2(value) {
  return (value & (value - 1)) === 0;
}

/**
 * Gets whether or not we can generate mips for the given
 * internal format.
 *
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @param {number} width The width parameter from texImage2D etc..
 * @param {number} height The height parameter from texImage2D etc..
 * @param {number} internalFormat The internalFormat parameter from texImage2D etc..
 * @return {boolean} true if we can generate mips
 * @memberOf module:twgl/textures
 */
function canGenerateMipmap(gl, width, height, internalFormat) {
  if (!isWebGL2(gl)) {
    return isPowerOf2(width) && isPowerOf2(height);
  }
  const info = getTextureInternalFormatInfo(internalFormat);
  if (!info) {
    throw "unknown internal format";
  }
  return info.colorRenderable && info.textureFilterable;
}

/**
 * Gets whether or not we can generate mips for the given format
 * @param {number} internalFormat The internalFormat parameter from texImage2D etc..
 * @return {boolean} true if we can generate mips
 * @memberOf module:twgl/textures
 */
function canFilter(internalFormat) {
  const info = getTextureInternalFormatInfo(internalFormat);
  if (!info) {
    throw "unknown internal format";
  }
  return info.textureFilterable;
}

/**
 * Gets the number of components for a given image format.
 * @param {number} format the format.
 * @return {number} the number of components for the format.
 * @memberOf module:twgl/textures
 */
function getNumComponentsForFormat(format) {
  const info = formatInfo[format];
  if (!info) {
    throw "unknown format: " + format;
  }
  return info.numColorComponents;
}

/**
 * Gets the texture type for a given array type.
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @return {number} the gl texture type
 * @private
 */
function getTextureTypeForArrayType(gl, src, defaultType) {
  if (isArrayBuffer$1(src)) {
    return getGLTypeForTypedArray(src);
  }
  return defaultType || UNSIGNED_BYTE$2;
}

function guessDimensions(gl, target, width, height, numElements) {
  if (numElements % 1 !== 0) {
    throw "can't guess dimensions";
  }
  if (!width && !height) {
    const size = Math.sqrt(numElements / (target === TEXTURE_CUBE_MAP ? 6 : 1));
    if (size % 1 === 0) {
      width = size;
      height = size;
    } else {
      width = numElements;
      height = 1;
    }
  } else if (!height) {
    height = numElements / width;
    if (height % 1) {
      throw "can't guess dimensions";
    }
  } else if (!width) {
    width = numElements / height;
    if (width % 1) {
      throw "can't guess dimensions";
    }
  }
  return {
    width: width,
    height: height,
  };
}

/**
 * Sets the default texture color.
 *
 * The default texture color is used when loading textures from
 * urls. Because the URL will be loaded async we'd like to be
 * able to use the texture immediately. By putting a 1x1 pixel
 * color in the texture we can start using the texture before
 * the URL has loaded.
 *
 * @param {number[]} color Array of 4 values in the range 0 to 1
 * @deprecated see {@link module:twgl.setDefaults}
 * @memberOf module:twgl/textures
 */
function setDefaultTextureColor(color) {
  defaults$1.textureColor = new Uint8Array([color[0] * 255, color[1] * 255, color[2] * 255, color[3] * 255]);
}

function setDefaults$1(newDefaults) {
  copyExistingProperties(newDefaults, defaults$1);
  if (newDefaults.textureColor) {
    setDefaultTextureColor(newDefaults.textureColor);
  }
}

/**
 * A function to generate the source for a texture.
 * @callback TextureFunc
 * @param {WebGLRenderingContext} gl A WebGLRenderingContext
 * @param {module:twgl.TextureOptions} options the texture options
 * @return {*} Returns any of the things documented for `src` for {@link module:twgl.TextureOptions}.
 * @memberOf module:twgl
 */

/**
 * Texture options passed to most texture functions. Each function will use whatever options
 * are appropriate for its needs. This lets you pass the same options to all functions.
 *
 * Note: A `TexImageSource` is defined in the WebGL spec as a `HTMLImageElement`, `HTMLVideoElement`,
 * `HTMLCanvasElement`, `ImageBitmap`, or `ImageData`.
 *
 * @typedef {Object} TextureOptions
 * @property {number} [target] the type of texture `gl.TEXTURE_2D` or `gl.TEXTURE_CUBE_MAP`. Defaults to `gl.TEXTURE_2D`.
 * @property {number} [level] the mip level to affect. Defaults to 0. Note, if set auto will be considered false unless explicitly set to true.
 * @property {number} [width] the width of the texture. Only used if src is an array or typed array or null.
 * @property {number} [height] the height of a texture. Only used if src is an array or typed array or null.
 * @property {number} [depth] the depth of a texture. Only used if src is an array or type array or null and target is `TEXTURE_3D` .
 * @property {number} [min] the min filter setting (eg. `gl.LINEAR`). Defaults to `gl.NEAREST_MIPMAP_LINEAR`
 *     or if texture is not a power of 2 on both dimensions then defaults to `gl.LINEAR`.
 * @property {number} [mag] the mag filter setting (eg. `gl.LINEAR`). Defaults to `gl.LINEAR`
 * @property {number} [minMag] both the min and mag filter settings.
 * @property {number} [internalFormat] internal format for texture. Defaults to `gl.RGBA`
 * @property {number} [format] format for texture. Defaults to `gl.RGBA`.
 * @property {number} [type] type for texture. Defaults to `gl.UNSIGNED_BYTE` unless `src` is ArrayBufferView. If `src`
 *     is ArrayBufferView defaults to type that matches ArrayBufferView type.
 * @property {number} [wrap] Texture wrapping for both S and T (and R if TEXTURE_3D or WebGLSampler). Defaults to `gl.REPEAT` for 2D unless src is WebGL1 and src not npot and `gl.CLAMP_TO_EDGE` for cube
 * @property {number} [wrapS] Texture wrapping for S. Defaults to `gl.REPEAT` and `gl.CLAMP_TO_EDGE` for cube. If set takes precedence over `wrap`.
 * @property {number} [wrapT] Texture wrapping for T. Defaults to `gl.REPEAT` and `gl.CLAMP_TO_EDGE` for cube. If set takes precedence over `wrap`.
 * @property {number} [wrapR] Texture wrapping for R. Defaults to `gl.REPEAT` and `gl.CLAMP_TO_EDGE` for cube. If set takes precedence over `wrap`.
 * @property {number} [minLod] TEXTURE_MIN_LOD setting
 * @property {number} [maxLod] TEXTURE_MAX_LOD setting
 * @property {number} [baseLevel] TEXTURE_BASE_LEVEL setting
 * @property {number} [maxLevel] TEXTURE_MAX_LEVEL setting
 * @property {number} [unpackAlignment] The `gl.UNPACK_ALIGNMENT` used when uploading an array. Defaults to 1.
 * @property {number[]|ArrayBufferView} [color] Color to initialize this texture with if loading an image asynchronously.
 *     The default use a blue 1x1 pixel texture. You can set another default by calling `twgl.setDefaults`
 *     or you can set an individual texture's initial color by setting this property. Example: `[1, .5, .5, 1]` = pink
 * @property {number} [premultiplyAlpha] Whether or not to premultiply alpha. Defaults to whatever the current setting is.
 *     This lets you set it once before calling `twgl.createTexture` or `twgl.createTextures` and only override
 *     the current setting for specific textures.
 * @property {number} [flipY] Whether or not to flip the texture vertically on upload. Defaults to whatever the current setting is.
 *     This lets you set it once before calling `twgl.createTexture` or `twgl.createTextures` and only override
 *     the current setting for specific textures.
 * @property {number} [colorspaceConversion] Whether or not to let the browser do colorspace conversion of the texture on upload. Defaults to whatever the current setting is.
 *     This lets you set it once before calling `twgl.createTexture` or `twgl.createTextures` and only override
 *     the current setting for specific textures.
 * @property {boolean} [auto] If `undefined` or `true`, in WebGL1, texture filtering is set automatically for non-power of 2 images and
 *    mips are generated for power of 2 images. In WebGL2 mips are generated if they can be. Note: if `level` is set above
 *    then then `auto` is assumed to be `false` unless explicity set to `true`.
 * @property {number[]} [cubeFaceOrder] The order that cube faces are pulled out of an img or set of images. The default is
 *
 *     [gl.TEXTURE_CUBE_MAP_POSITIVE_X,
 *      gl.TEXTURE_CUBE_MAP_NEGATIVE_X,
 *      gl.TEXTURE_CUBE_MAP_POSITIVE_Y,
 *      gl.TEXTURE_CUBE_MAP_NEGATIVE_Y,
 *      gl.TEXTURE_CUBE_MAP_POSITIVE_Z,
 *      gl.TEXTURE_CUBE_MAP_NEGATIVE_Z]
 *
 * @property {(number[]|ArrayBufferView|TexImageSource|TexImageSource[]|string|string[]|module:twgl.TextureFunc)} [src] source for texture
 *
 *    If `string` then it's assumed to be a URL to an image. The image will be downloaded async. A usable
 *    1x1 pixel texture will be returned immediately. The texture will be updated once the image has downloaded.
 *    If `target` is `gl.TEXTURE_CUBE_MAP` will attempt to divide image into 6 square pieces. 1x6, 6x1, 3x2, 2x3.
 *    The pieces will be uploaded in `cubeFaceOrder`
 *
 *    If `string[]` or `TexImageSource[]` and target is `gl.TEXTURE_CUBE_MAP` then it must have 6 entries, one for each face of a cube map.
 *
 *    If `string[]` or `TexImageSource[]` and target is `gl.TEXTURE_2D_ARRAY` then each entry is a slice of the a 2d array texture
 *    and will be scaled to the specified width and height OR to the size of the first image that loads.
 *
 *    If `TexImageSource` then it wil be used immediately to create the contents of the texture. Examples `HTMLImageElement`,
 *    `HTMLCanvasElement`, `HTMLVideoElement`.
 *
 *    If `number[]` or `ArrayBufferView` it's assumed to be data for a texture. If `width` or `height` is
 *    not specified it is guessed as follows. First the number of elements is computed by `src.length / numComponents`
 *    where `numComponents` is derived from `format`. If `target` is `gl.TEXTURE_CUBE_MAP` then `numElements` is divided
 *    by 6. Then
 *
 *    *   If neither `width` nor `height` are specified and `sqrt(numElements)` is an integer then width and height
 *        are set to `sqrt(numElements)`. Otherwise `width = numElements` and `height = 1`.
 *
 *    *   If only one of `width` or `height` is specified then the other equals `numElements / specifiedDimension`.
 *
 * If `number[]` will be converted to `type`.
 *
 * If `src` is a function it will be called with a `WebGLRenderingContext` and these options.
 * Whatever it returns is subject to these rules. So it can return a string url, an `HTMLElement`
 * an array etc...
 *
 * If `src` is undefined then an empty texture will be created of size `width` by `height`.
 *
 * @property {string} [crossOrigin] What to set the crossOrigin property of images when they are downloaded.
 *    default: undefined. Also see {@link module:twgl.setDefaults}.
 *
 * @memberOf module:twgl
 */

/**
 * Sets any packing state that will be set based on the options.
 * @param {module:twgl.TextureOptions} options A TextureOptions object with whatever parameters you want set.
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @private
 */
function setPackState(gl, options) {
  if (options.colorspaceConversion !== undefined) {
    gl.pixelStorei(UNPACK_COLORSPACE_CONVERSION_WEBGL, options.colorspaceConversion);
  }
  if (options.premultiplyAlpha !== undefined) {
    gl.pixelStorei(UNPACK_PREMULTIPLY_ALPHA_WEBGL, options.premultiplyAlpha);
  }
  if (options.flipY !== undefined) {
    gl.pixelStorei(UNPACK_FLIP_Y_WEBGL, options.flipY);
  }
}

/**
 * Set skip state to defaults
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @private
 */
function setSkipStateToDefault(gl) {
  gl.pixelStorei(UNPACK_ALIGNMENT, 4);
  if (isWebGL2(gl)) {
    gl.pixelStorei(UNPACK_ROW_LENGTH, 0);
    gl.pixelStorei(UNPACK_IMAGE_HEIGHT, 0);
    gl.pixelStorei(UNPACK_SKIP_PIXELS, 0);
    gl.pixelStorei(UNPACK_SKIP_ROWS, 0);
    gl.pixelStorei(UNPACK_SKIP_IMAGES, 0);
  }
}

/**
 * Sets the parameters of a texture or sampler
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @param {number|WebGLSampler} target texture target or sampler
 * @param {function()} parameteriFn texParameteri or samplerParameteri fn
 * @param {WebGLTexture} tex the WebGLTexture to set parameters for
 * @param {module:twgl.TextureOptions} options A TextureOptions object with whatever parameters you want set.
 *   This is often the same options you passed in when you created the texture.
 * @private
 */
function setTextureSamplerParameters(gl, target, parameteriFn, options) {
  if (options.minMag) {
    parameteriFn.call(gl, target, TEXTURE_MIN_FILTER, options.minMag);
    parameteriFn.call(gl, target, TEXTURE_MAG_FILTER, options.minMag);
  }
  if (options.min) {
    parameteriFn.call(gl, target, TEXTURE_MIN_FILTER, options.min);
  }
  if (options.mag) {
    parameteriFn.call(gl, target, TEXTURE_MAG_FILTER, options.mag);
  }
  if (options.wrap) {
    parameteriFn.call(gl, target, TEXTURE_WRAP_S, options.wrap);
    parameteriFn.call(gl, target, TEXTURE_WRAP_T, options.wrap);
    if (target === TEXTURE_3D || isSampler(gl, target)) {
      parameteriFn.call(gl, target, TEXTURE_WRAP_R, options.wrap);
    }
  }
  if (options.wrapR) {
    parameteriFn.call(gl, target, TEXTURE_WRAP_R, options.wrapR);
  }
  if (options.wrapS) {
    parameteriFn.call(gl, target, TEXTURE_WRAP_S, options.wrapS);
  }
  if (options.wrapT) {
    parameteriFn.call(gl, target, TEXTURE_WRAP_T, options.wrapT);
  }
  if (options.minLod) {
    parameteriFn.call(gl, target, TEXTURE_MIN_LOD, options.minLod);
  }
  if (options.maxLod) {
    parameteriFn.call(gl, target, TEXTURE_MAX_LOD, options.maxLod);
  }
  if (options.baseLevel) {
    parameteriFn.call(gl, target, TEXTURE_BASE_LEVEL, options.baseLevel);
  }
  if (options.maxLevel) {
    parameteriFn.call(gl, target, TEXTURE_MAX_LEVEL, options.maxLevel);
  }
}

/**
 * Sets the texture parameters of a texture.
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @param {WebGLTexture} tex the WebGLTexture to set parameters for
 * @param {module:twgl.TextureOptions} options A TextureOptions object with whatever parameters you want set.
 *   This is often the same options you passed in when you created the texture.
 * @memberOf module:twgl/textures
 */
function setTextureParameters(gl, tex, options) {
  const target = options.target || TEXTURE_2D;
  gl.bindTexture(target, tex);
  setTextureSamplerParameters(gl, target, gl.texParameteri, options);
}

/**
 * Sets the sampler parameters of a sampler.
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @param {WebGLSampler} sampler the WebGLSampler to set parameters for
 * @param {module:twgl.TextureOptions} options A TextureOptions object with whatever parameters you want set.
 * @memberOf module:twgl/textures
 */
function setSamplerParameters(gl, sampler, options) {
  setTextureSamplerParameters(gl, sampler, gl.samplerParameteri, options);
}

/**
 * Creates a new sampler object and sets parameters.
 *
 * Example:
 *
 *      const sampler = twgl.createSampler(gl, {
 *        minMag: gl.NEAREST,         // sets both TEXTURE_MIN_FILTER and TEXTURE_MAG_FILTER
 *        wrap: gl.CLAMP_TO_NEAREST,  // sets both TEXTURE_WRAP_S and TEXTURE_WRAP_T and TEXTURE_WRAP_R
 *      });
 *
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @param {Object.<string,module:twgl.TextureOptions>} options A object of TextureOptions one per sampler.
 * @return {Object.<string,WebGLSampler>} the created samplers by name
 * @private
 */
function createSampler(gl, options) {
  const sampler = gl.createSampler();
  setSamplerParameters(gl, sampler, options);
  return sampler;
}

/**
 * Creates a multiple sampler objects and sets parameters on each.
 *
 * Example:
 *
 *      const samplers = twgl.createSamplers(gl, {
 *        nearest: {
 *          minMag: gl.NEAREST,
 *        },
 *        nearestClampS: {
 *          minMag: gl.NEAREST,
 *          wrapS: gl.CLAMP_TO_NEAREST,
 *        },
 *        linear: {
 *          minMag: gl.LINEAR,
 *        },
 *        nearestClamp: {
 *          minMag: gl.NEAREST,
 *          wrap: gl.CLAMP_TO_EDGE,
 *        },
 *        linearClamp: {
 *          minMag: gl.LINEAR,
 *          wrap: gl.CLAMP_TO_EDGE,
 *        },
 *        linearClampT: {
 *          minMag: gl.LINEAR,
 *          wrapT: gl.CLAMP_TO_EDGE,
 *        },
 *      });
 *
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @param {module:twgl.TextureOptions} [options] A TextureOptions object with whatever parameters you want set on the sampler
 * @private
 */
function createSamplers(gl, samplerOptions) {
  const samplers = {};
  Object.keys(samplerOptions).forEach(function(name) {
    samplers[name] = createSampler(gl, samplerOptions[name]);
  });
  return samplers;
}

/**
 * Makes a 1x1 pixel
 * If no color is passed in uses the default color which can be set by calling `setDefaultTextureColor`.
 * @param {(number[]|ArrayBufferView)} [color] The color using 0-1 values
 * @return {Uint8Array} Unit8Array with color.
 * @private
 */
function make1Pixel(color) {
  color = color || defaults$1.textureColor;
  if (isArrayBuffer$1(color)) {
    return color;
  }
  return new Uint8Array([color[0] * 255, color[1] * 255, color[2] * 255, color[3] * 255]);
}

/**
 * Sets filtering or generates mips for texture based on width or height
 * If width or height is not passed in uses `options.width` and//or `options.height`
 *
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @param {WebGLTexture} tex the WebGLTexture to set parameters for
 * @param {module:twgl.TextureOptions} [options] A TextureOptions object with whatever parameters you want set.
 *   This is often the same options you passed in when you created the texture.
 * @param {number} [width] width of texture
 * @param {number} [height] height of texture
 * @param {number} [internalFormat] The internalFormat parameter from texImage2D etc..
 * @memberOf module:twgl/textures
 */
function setTextureFilteringForSize(gl, tex, options, width, height, internalFormat) {
  options = options || defaults$1.textureOptions;
  internalFormat = internalFormat || RGBA;
  const target = options.target || TEXTURE_2D;
  width = width || options.width;
  height = height || options.height;
  gl.bindTexture(target, tex);
  if (canGenerateMipmap(gl, width, height, internalFormat)) {
    gl.generateMipmap(target);
  } else {
    const filtering = canFilter(internalFormat) ? LINEAR : NEAREST;
    gl.texParameteri(target, TEXTURE_MIN_FILTER, filtering);
    gl.texParameteri(target, TEXTURE_MAG_FILTER, filtering);
    gl.texParameteri(target, TEXTURE_WRAP_S, CLAMP_TO_EDGE);
    gl.texParameteri(target, TEXTURE_WRAP_T, CLAMP_TO_EDGE);
  }
}

function shouldAutomaticallySetTextureFilteringForSize(options) {
  return options.auto === true || (options.auto === undefined && options.level === undefined);
}

/**
 * Gets an array of cubemap face enums
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @param {module:twgl.TextureOptions} options A TextureOptions object with whatever parameters you want set.
 *   This is often the same options you passed in when you created the texture.
 * @return {number[]} cubemap face enums
 * @private
 */
function getCubeFaceOrder(gl, options) {
  options = options || {};
  return options.cubeFaceOrder || [
      TEXTURE_CUBE_MAP_POSITIVE_X,
      TEXTURE_CUBE_MAP_NEGATIVE_X,
      TEXTURE_CUBE_MAP_POSITIVE_Y,
      TEXTURE_CUBE_MAP_NEGATIVE_Y,
      TEXTURE_CUBE_MAP_POSITIVE_Z,
      TEXTURE_CUBE_MAP_NEGATIVE_Z,
    ];
}

/**
 * @typedef {Object} FaceInfo
 * @property {number} face gl enum for texImage2D
 * @property {number} ndx face index (0 - 5) into source data
 * @ignore
 */

/**
 * Gets an array of FaceInfos
 * There's a bug in some NVidia drivers that will crash the driver if
 * `gl.TEXTURE_CUBE_MAP_POSITIVE_X` is not uploaded first. So, we take
 * the user's desired order from his faces to WebGL and make sure we
 * do the faces in WebGL order
 *
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @param {module:twgl.TextureOptions} options A TextureOptions object with whatever parameters you want set.
 * @return {FaceInfo[]} cubemap face infos. Arguably the `face` property of each element is redundant but
 *    it's needed internally to sort the array of `ndx` properties by `face`.
 * @private
 */
function getCubeFacesWithNdx(gl, options) {
  const faces = getCubeFaceOrder(gl, options);
  // work around bug in NVidia drivers. We have to upload the first face first else the driver crashes :(
  const facesWithNdx = faces.map(function(face, ndx) {
    return { face: face, ndx: ndx };
  });
  facesWithNdx.sort(function(a, b) {
    return a.face - b.face;
  });
  return facesWithNdx;
}

/**
 * Set a texture from the contents of an element. Will also set
 * texture filtering or generate mips based on the dimensions of the element
 * unless `options.auto === false`. If `target === gl.TEXTURE_CUBE_MAP` will
 * attempt to slice image into 1x6, 2x3, 3x2, or 6x1 images, one for each face.
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @param {WebGLTexture} tex the WebGLTexture to set parameters for
 * @param {HTMLElement} element a canvas, img, or video element.
 * @param {module:twgl.TextureOptions} [options] A TextureOptions object with whatever parameters you want set.
 *   This is often the same options you passed in when you created the texture.
 * @memberOf module:twgl/textures
 * @kind function
 */
function setTextureFromElement(gl, tex, element, options) {
  options = options || defaults$1.textureOptions;
  const target = options.target || TEXTURE_2D;
  const level = options.level || 0;
  let width = element.width;
  let height = element.height;
  const internalFormat = options.internalFormat || options.format || RGBA;
  const formatType = getFormatAndTypeForInternalFormat(internalFormat);
  const format = options.format || formatType.format;
  const type = options.type || formatType.type;
  setPackState(gl, options);
  gl.bindTexture(target, tex);
  if (target === TEXTURE_CUBE_MAP) {
    // guess the parts
    const imgWidth  = element.width;
    const imgHeight = element.height;
    let size;
    let slices;
    if (imgWidth / 6 === imgHeight) {
      // It's 6x1
      size = imgHeight;
      slices = [0, 0, 1, 0, 2, 0, 3, 0, 4, 0, 5, 0];
    } else if (imgHeight / 6 === imgWidth) {
      // It's 1x6
      size = imgWidth;
      slices = [0, 0, 0, 1, 0, 2, 0, 3, 0, 4, 0, 5];
    } else if (imgWidth / 3 === imgHeight / 2) {
      // It's 3x2
      size = imgWidth / 3;
      slices = [0, 0, 1, 0, 2, 0, 0, 1, 1, 1, 2, 1];
    } else if (imgWidth / 2 === imgHeight / 3) {
      // It's 2x3
      size = imgWidth / 2;
      slices = [0, 0, 1, 0, 0, 1, 1, 1, 0, 2, 1, 2];
    } else {
      throw "can't figure out cube map from element: " + (element.src ? element.src : element.nodeName);
    }
    const ctx = getShared2DContext();
    if (ctx) {
      ctx.canvas.width = size;
      ctx.canvas.height = size;
      width = size;
      height = size;
      getCubeFacesWithNdx(gl, options).forEach(function(f) {
        const xOffset = slices[f.ndx * 2 + 0] * size;
        const yOffset = slices[f.ndx * 2 + 1] * size;
        ctx.drawImage(element, xOffset, yOffset, size, size, 0, 0, size, size);
        gl.texImage2D(f.face, level, internalFormat, format, type, ctx.canvas);
      });
      // Free up the canvas memory
      ctx.canvas.width = 1;
      ctx.canvas.height = 1;
    } else if (typeof createImageBitmap !== 'undefined') {
      // NOTE: It seems like we should prefer ImageBitmap because unlike canvas it's
      // note lossy? (alpha is not premultiplied? although I'm not sure what
      width = size;
      height = size;
      getCubeFacesWithNdx(gl, options).forEach(function(f) {
        const xOffset = slices[f.ndx * 2 + 0] * size;
        const yOffset = slices[f.ndx * 2 + 1] * size;
        // We can't easily use a default texture color here as it would have to match
        // the type across all faces where as with a 2D one there's only one face
        // so we're replacing everything all at once. It also has to be the correct size.
        // On the other hand we need all faces to be the same size so as one face loads
        // the rest match else the texture will be un-renderable.
        gl.texImage2D(f.face, level, internalFormat, size, size, 0, format, type, null);
        createImageBitmap(element, xOffset, yOffset, size, size, {
          premultiplyAlpha: 'none',
          colorSpaceConversion: 'none',
        })
        .then(function(imageBitmap) {
          setPackState(gl, options);
          gl.bindTexture(target, tex);
          gl.texImage2D(f.face, level, internalFormat, format, type, imageBitmap);
          if (shouldAutomaticallySetTextureFilteringForSize(options)) {
            setTextureFilteringForSize(gl, tex, options, width, height, internalFormat);
          }
        });
      });
    }
  } else if (target === TEXTURE_3D || target === TEXTURE_2D_ARRAY) {
    const smallest = Math.min(element.width, element.height);
    const largest = Math.max(element.width, element.height);
    const depth = largest / smallest;
    if (depth % 1 !== 0) {
      throw "can not compute 3D dimensions of element";
    }
    const xMult = element.width  === largest ? 1 : 0;
    const yMult = element.height === largest ? 1 : 0;
    gl.pixelStorei(UNPACK_ALIGNMENT, 1);
    gl.pixelStorei(UNPACK_ROW_LENGTH, element.width);
    gl.pixelStorei(UNPACK_IMAGE_HEIGHT, 0);
    gl.pixelStorei(UNPACK_SKIP_IMAGES, 0);
    gl.texImage3D(target, level, internalFormat, smallest, smallest, smallest, 0, format, type, null);
    for (let d = 0; d < depth; ++d) {
      const srcX = d * smallest * xMult;
      const srcY = d * smallest * yMult;
      gl.pixelStorei(UNPACK_SKIP_PIXELS, srcX);
      gl.pixelStorei(UNPACK_SKIP_ROWS, srcY);
      gl.texSubImage3D(target, level, 0, 0, d, smallest, smallest, 1, format, type, element);
    }
    setSkipStateToDefault(gl);
  } else {
    gl.texImage2D(target, level, internalFormat, format, type, element);
  }
  if (shouldAutomaticallySetTextureFilteringForSize(options)) {
    setTextureFilteringForSize(gl, tex, options, width, height, internalFormat);
  }
  setTextureParameters(gl, tex, options);
}

function noop() {
}

/**
 * Checks whether the url's origin is the same so that we can set the `crossOrigin`
 * @param {string} url url to image
 * @returns {boolean} true if the window's origin is the same as image's url
 * @private
 */
function urlIsSameOrigin(url) {
  if (typeof document !== 'undefined') {
    // for IE really
    const a = document.createElement('a');
    a.href = url;
    return a.hostname === location.hostname &&
           a.port     === location.port &&
           a.protocol === location.protocol;
  } else {
    const localOrigin = (new URL(location.href)).origin;
    const urlOrigin = (new URL(url, location.href)).origin;
    return urlOrigin === localOrigin;
  }
}

function setToAnonymousIfUndefinedAndURLIsNotSameOrigin(url, crossOrigin) {
  return crossOrigin === undefined && !urlIsSameOrigin(url)
     ? 'anonymous'
     : crossOrigin;
}

/**
 * Loads an image
 * @param {string} url url to image
 * @param {string} crossOrigin
 * @param {function(err, img)} [callback] a callback that's passed an error and the image. The error will be non-null
 *     if there was an error
 * @return {HTMLImageElement} the image being loaded.
 * @private
 */
function loadImage(url, crossOrigin, callback) {
  callback = callback || noop;
  let img;
  crossOrigin = crossOrigin !== undefined ? crossOrigin : defaults$1.crossOrigin;
  crossOrigin = setToAnonymousIfUndefinedAndURLIsNotSameOrigin(url, crossOrigin);
  if (typeof Image !== 'undefined') {
    img = new Image();
    if (crossOrigin !== undefined) {
      img.crossOrigin = crossOrigin;
    }

    const clearEventHandlers = function clearEventHandlers() {
      img.removeEventListener('error', onError);  // eslint-disable-line
      img.removeEventListener('load', onLoad);  // eslint-disable-line
      img = null;
    };

    const onError = function onError() {
      const msg = "couldn't load image: " + url;
      error(msg);
      callback(msg, img);
      clearEventHandlers();
    };

    const onLoad = function onLoad() {
      callback(null, img);
      clearEventHandlers();
    };

    img.addEventListener('error', onError);
    img.addEventListener('load', onLoad);
    img.src = url;
    return img;
  } else if (typeof ImageBitmap !== 'undefined') {
    let err;
    let bm;
    const cb = function cb() {
      callback(err, bm);
    };

    const options = {};
    if (crossOrigin) {
      options.mode = 'cors'; // TODO: not sure how to translate image.crossOrigin
    }
    fetch(url, options).then(function(response) {
      if (!response.ok) {
        throw response;
      }
      return response.blob();
    }).then(function(blob) {
      return createImageBitmap(blob, {
        premultiplyAlpha: 'none',
        colorSpaceConversion: 'none',
      });
    }).then(function(bitmap) {
      // not sure if this works. We don't want
      // to catch the user's error. So, call
      // the callback in a timeout so we're
      // not in this scope inside the promise.
      bm = bitmap;
      setTimeout(cb);
    }).catch(function(e) {
      err = e;
      setTimeout(cb);
    });
    img = null;
  }
  return img;
}

/**
 * check if object is a TexImageSource
 *
 * @param {Object} obj Object to test
 * @return {boolean} true if object is a TexImageSource
 * @private
 */
function isTexImageSource(obj) {
  return (typeof ImageBitmap !== 'undefined' && obj instanceof ImageBitmap) ||
         (typeof ImageData !== 'undefined'  && obj instanceof ImageData) ||
         (typeof HTMLElement !== 'undefined'  && obj instanceof HTMLElement);
}

/**
 * if obj is an TexImageSource then just
 * uses it otherwise if obj is a string
 * then load it first.
 *
 * @param {string|TexImageSource} obj
 * @param {string} crossOrigin
 * @param {function(err, img)} [callback] a callback that's passed an error and the image. The error will be non-null
 *     if there was an error
 * @private
 */
function loadAndUseImage(obj, crossOrigin, callback) {
  if (isTexImageSource(obj)) {
    setTimeout(function() {
      callback(null, obj);
    });
    return obj;
  }

  return loadImage(obj, crossOrigin, callback);
}

/**
 * Sets a texture to a 1x1 pixel color. If `options.color === false` is nothing happens. If it's not set
 * the default texture color is used which can be set by calling `setDefaultTextureColor`.
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @param {WebGLTexture} tex the WebGLTexture to set parameters for
 * @param {module:twgl.TextureOptions} [options] A TextureOptions object with whatever parameters you want set.
 *   This is often the same options you passed in when you created the texture.
 * @memberOf module:twgl/textures
 */
function setTextureTo1PixelColor(gl, tex, options) {
  options = options || defaults$1.textureOptions;
  const target = options.target || TEXTURE_2D;
  gl.bindTexture(target, tex);
  if (options.color === false) {
    return;
  }
  // Assume it's a URL
  // Put 1x1 pixels in texture. That makes it renderable immediately regardless of filtering.
  const color = make1Pixel(options.color);
  if (target === TEXTURE_CUBE_MAP) {
    for (let ii = 0; ii < 6; ++ii) {
      gl.texImage2D(TEXTURE_CUBE_MAP_POSITIVE_X + ii, 0, RGBA, 1, 1, 0, RGBA, UNSIGNED_BYTE$2, color);
    }
  } else if (target === TEXTURE_3D || target === TEXTURE_2D_ARRAY) {
    gl.texImage3D(target, 0, RGBA, 1, 1, 1, 0, RGBA, UNSIGNED_BYTE$2, color);
  } else {
    gl.texImage2D(target, 0, RGBA, 1, 1, 0, RGBA, UNSIGNED_BYTE$2, color);
  }
}

/**
 * The src image(s) used to create a texture.
 *
 * When you call {@link module:twgl.createTexture} or {@link module:twgl.createTextures}
 * you can pass in urls for images to load into the textures. If it's a single url
 * then this will be a single HTMLImageElement. If it's an array of urls used for a cubemap
 * this will be a corresponding array of images for the cubemap.
 *
 * @typedef {HTMLImageElement|HTMLImageElement[]} TextureSrc
 * @memberOf module:twgl
 */

/**
 * A callback for when an image finished downloading and been uploaded into a texture
 * @callback TextureReadyCallback
 * @param {*} err If truthy there was an error.
 * @param {WebGLTexture} texture the texture.
 * @param {module:twgl.TextureSrc} source image(s) used to as the src for the texture
 * @memberOf module:twgl
 */

/**
 * A callback for when all images have finished downloading and been uploaded into their respective textures
 * @callback TexturesReadyCallback
 * @param {*} err If truthy there was an error.
 * @param {Object.<string, WebGLTexture>} textures the created textures by name. Same as returned by {@link module:twgl.createTextures}.
 * @param {Object.<string, module:twgl.TextureSrc>} sources the image(s) used for the texture by name.
 * @memberOf module:twgl
 */

/**
 * A callback for when an image finished downloading and been uploaded into a texture
 * @callback CubemapReadyCallback
 * @param {*} err If truthy there was an error.
 * @param {WebGLTexture} tex the texture.
 * @param {HTMLImageElement[]} imgs the images for each face.
 * @memberOf module:twgl
 */

/**
 * A callback for when an image finished downloading and been uploaded into a texture
 * @callback ThreeDReadyCallback
 * @param {*} err If truthy there was an error.
 * @param {WebGLTexture} tex the texture.
 * @param {HTMLImageElement[]} imgs the images for each slice.
 * @memberOf module:twgl
 */

/**
 * Loads a texture from an image from a Url as specified in `options.src`
 * If `options.color !== false` will set the texture to a 1x1 pixel color so that the texture is
 * immediately useable. It will be updated with the contents of the image once the image has finished
 * downloading. Filtering options will be set as appropriate for image unless `options.auto === false`.
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @param {WebGLTexture} tex the WebGLTexture to set parameters for
 * @param {module:twgl.TextureOptions} [options] A TextureOptions object with whatever parameters you want set.
 * @param {module:twgl.TextureReadyCallback} [callback] A function to be called when the image has finished loading. err will
 *    be non null if there was an error.
 * @return {HTMLImageElement} the image being downloaded.
 * @memberOf module:twgl/textures
 */
function loadTextureFromUrl(gl, tex, options, callback) {
  callback = callback || noop;
  options = options || defaults$1.textureOptions;
  setTextureTo1PixelColor(gl, tex, options);
  // Because it's async we need to copy the options.
  options = Object.assign({}, options);
  const img = loadAndUseImage(options.src, options.crossOrigin, function(err, img) {
    if (err) {
      callback(err, tex, img);
    } else {
      setTextureFromElement(gl, tex, img, options);
      callback(null, tex, img);
    }
  });
  return img;
}

/**
 * Loads a cubemap from 6 urls or TexImageSources as specified in `options.src`. Will set the cubemap to a 1x1 pixel color
 * so that it is usable immediately unless `option.color === false`.
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @param {WebGLTexture} tex the WebGLTexture to set parameters for
 * @param {module:twgl.TextureOptions} options A TextureOptions object with whatever parameters you want set.
 * @param {module:twgl.CubemapReadyCallback} [callback] A function to be called when all the images have finished loading. err will
 *    be non null if there was an error.
 * @memberOf module:twgl/textures
 */
function loadCubemapFromUrls(gl, tex, options, callback) {
  callback = callback || noop;
  const urls = options.src;
  if (urls.length !== 6) {
    throw "there must be 6 urls for a cubemap";
  }
  const level = options.level || 0;
  const internalFormat = options.internalFormat || options.format || RGBA;
  const formatType = getFormatAndTypeForInternalFormat(internalFormat);
  const format = options.format || formatType.format;
  const type = options.type || UNSIGNED_BYTE$2;
  const target = options.target || TEXTURE_2D;
  if (target !== TEXTURE_CUBE_MAP) {
    throw "target must be TEXTURE_CUBE_MAP";
  }
  setTextureTo1PixelColor(gl, tex, options);
  // Because it's async we need to copy the options.
  options = Object.assign({}, options);
  let numToLoad = 6;
  const errors = [];
  const faces = getCubeFaceOrder(gl, options);
  let imgs;  // eslint-disable-line

  function uploadImg(faceTarget) {
    return function(err, img) {
      --numToLoad;
      if (err) {
        errors.push(err);
      } else {
        if (img.width !== img.height) {
          errors.push("cubemap face img is not a square: " + img.src);
        } else {
          setPackState(gl, options);
          gl.bindTexture(target, tex);

          // So assuming this is the first image we now have one face that's img sized
          // and 5 faces that are 1x1 pixel so size the other faces
          if (numToLoad === 5) {
            // use the default order
            getCubeFaceOrder().forEach(function(otherTarget) {
              // Should we re-use the same face or a color?
              gl.texImage2D(otherTarget, level, internalFormat, format, type, img);
            });
          } else {
            gl.texImage2D(faceTarget, level, internalFormat, format, type, img);
          }

          if (shouldAutomaticallySetTextureFilteringForSize(options)) {
            gl.generateMipmap(target);
          }
        }
      }

      if (numToLoad === 0) {
        callback(errors.length ? errors : undefined, tex, imgs);
      }
    };
  }

  imgs = urls.map(function(url, ndx) {
    return loadAndUseImage(url, options.crossOrigin, uploadImg(faces[ndx]));
  });
}

/**
 * Loads a 2d array or 3d texture from urls OR TexImageSources as specified in `options.src`.
 * Will set the texture to a 1x1 pixel color
 * so that it is usable immediately unless `option.color === false`.
 *
 * If the width and height is not specified the width and height of the first
 * image loaded will be used. Note that since images are loaded async
 * which image downloads first is unknown.
 *
 * If an image is not the same size as the width and height it will be scaled
 * to that width and height.
 *
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @param {WebGLTexture} tex the WebGLTexture to set parameters for
 * @param {module:twgl.TextureOptions} options A TextureOptions object with whatever parameters you want set.
 * @param {module:twgl.ThreeDReadyCallback} [callback] A function to be called when all the images have finished loading. err will
 *    be non null if there was an error.
 * @memberOf module:twgl/textures
 */
function loadSlicesFromUrls(gl, tex, options, callback) {
  callback = callback || noop;
  const urls = options.src;
  const internalFormat = options.internalFormat || options.format || RGBA;
  const formatType = getFormatAndTypeForInternalFormat(internalFormat);
  const format = options.format || formatType.format;
  const type = options.type || UNSIGNED_BYTE$2;
  const target = options.target || TEXTURE_2D_ARRAY;
  if (target !== TEXTURE_3D && target !== TEXTURE_2D_ARRAY) {
    throw "target must be TEXTURE_3D or TEXTURE_2D_ARRAY";
  }
  setTextureTo1PixelColor(gl, tex, options);
  // Because it's async we need to copy the options.
  options = Object.assign({}, options);
  let numToLoad = urls.length;
  const errors = [];
  let imgs;  // eslint-disable-line
  const level = options.level || 0;
  let width = options.width;
  let height = options.height;
  const depth = urls.length;
  let firstImage = true;

  function uploadImg(slice) {
    return function(err, img) {
      --numToLoad;
      if (err) {
        errors.push(err);
      } else {
        setPackState(gl, options);
        gl.bindTexture(target, tex);

        if (firstImage) {
          firstImage = false;
          width = options.width || img.width;
          height = options.height || img.height;
          gl.texImage3D(target, level, internalFormat, width, height, depth, 0, format, type, null);

          // put it in every slice otherwise some slices will be 0,0,0,0
          for (let s = 0; s < depth; ++s) {
            gl.texSubImage3D(target, level, 0, 0, s, width, height, 1, format, type, img);
          }
        } else {
          let src = img;
          let ctx;
          if (img.width !== width || img.height !== height) {
            // Size the image to fix
            ctx = getShared2DContext();
            src = ctx.canvas;
            ctx.canvas.width = width;
            ctx.canvas.height = height;
            ctx.drawImage(img, 0, 0, width, height);
          }

          gl.texSubImage3D(target, level, 0, 0, slice, width, height, 1, format, type, src);

          // free the canvas memory
          if (ctx && src === ctx.canvas) {
            ctx.canvas.width = 0;
            ctx.canvas.height = 0;
          }
        }

        if (shouldAutomaticallySetTextureFilteringForSize(options)) {
          gl.generateMipmap(target);
        }
      }

      if (numToLoad === 0) {
        callback(errors.length ? errors : undefined, tex, imgs);
      }
    };
  }

  imgs = urls.map(function(url, ndx) {
    return loadAndUseImage(url, options.crossOrigin, uploadImg(ndx));
  });
}

/**
 * Sets a texture from an array or typed array. If the width or height is not provided will attempt to
 * guess the size. See {@link module:twgl.TextureOptions}.
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @param {WebGLTexture} tex the WebGLTexture to set parameters for
 * @param {(number[]|ArrayBufferView)} src An array or typed arry with texture data.
 * @param {module:twgl.TextureOptions} [options] A TextureOptions object with whatever parameters you want set.
 *   This is often the same options you passed in when you created the texture.
 * @memberOf module:twgl/textures
 */
function setTextureFromArray(gl, tex, src, options) {
  options = options || defaults$1.textureOptions;
  const target = options.target || TEXTURE_2D;
  gl.bindTexture(target, tex);
  let width = options.width;
  let height = options.height;
  let depth = options.depth;
  const level = options.level || 0;
  const internalFormat = options.internalFormat || options.format || RGBA;
  const formatType = getFormatAndTypeForInternalFormat(internalFormat);
  const format = options.format || formatType.format;
  const type = options.type || getTextureTypeForArrayType(gl, src, formatType.type);
  if (!isArrayBuffer$1(src)) {
    const Type = getTypedArrayTypeForGLType(type);
    src = new Type(src);
  } else if (src instanceof Uint8ClampedArray) {
    src = new Uint8Array(src.buffer);
  }

  const bytesPerElement = getBytesPerElementForInternalFormat(internalFormat, type);
  const numElements = src.byteLength / bytesPerElement;  // TODO: check UNPACK_ALIGNMENT?
  if (numElements % 1) {
    throw "length wrong size for format: " + glEnumToString(gl, format);
  }
  let dimensions;
  if (target === TEXTURE_3D || target === TEXTURE_2D_ARRAY) {
    if (!width && !height && !depth) {
      const size = Math.cbrt(numElements);
      if (size % 1 !== 0) {
        throw "can't guess cube size of array of numElements: " + numElements;
      }
      width = size;
      height = size;
      depth = size;
    } else if (width && (!height || !depth)) {
      dimensions = guessDimensions(gl, target, height, depth, numElements / width);
      height = dimensions.width;
      depth = dimensions.height;
    } else if (height && (!width || !depth)) {
      dimensions = guessDimensions(gl, target, width, depth, numElements / height);
      width = dimensions.width;
      depth = dimensions.height;
    } else {
      dimensions = guessDimensions(gl, target, width, height, numElements / depth);
      width = dimensions.width;
      height = dimensions.height;
    }
  } else {
    dimensions = guessDimensions(gl, target, width, height, numElements);
    width = dimensions.width;
    height = dimensions.height;
  }
  setSkipStateToDefault(gl);
  gl.pixelStorei(UNPACK_ALIGNMENT, options.unpackAlignment || 1);
  setPackState(gl, options);
  if (target === TEXTURE_CUBE_MAP) {
    const elementsPerElement = bytesPerElement / src.BYTES_PER_ELEMENT;
    const faceSize = numElements / 6 * elementsPerElement;

    getCubeFacesWithNdx(gl, options).forEach(f => {
      const offset = faceSize * f.ndx;
      const data = src.subarray(offset, offset + faceSize);
      gl.texImage2D(f.face, level, internalFormat, width, height, 0, format, type, data);
    });
  } else if (target === TEXTURE_3D || target === TEXTURE_2D_ARRAY) {
    gl.texImage3D(target, level, internalFormat, width, height, depth, 0, format, type, src);
  } else {
    gl.texImage2D(target, level, internalFormat, width, height, 0, format, type, src);
  }
  return {
    width: width,
    height: height,
    depth: depth,
    type: type,
  };
}

/**
 * Sets a texture with no contents of a certain size. In other words calls `gl.texImage2D` with `null`.
 * You must set `options.width` and `options.height`.
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @param {WebGLTexture} tex the WebGLTexture to set parameters for
 * @param {module:twgl.TextureOptions} options A TextureOptions object with whatever parameters you want set.
 * @memberOf module:twgl/textures
 */
function setEmptyTexture(gl, tex, options) {
  const target = options.target || TEXTURE_2D;
  gl.bindTexture(target, tex);
  const level = options.level || 0;
  const internalFormat = options.internalFormat || options.format || RGBA;
  const formatType = getFormatAndTypeForInternalFormat(internalFormat);
  const format = options.format || formatType.format;
  const type = options.type || formatType.type;
  setPackState(gl, options);
  if (target === TEXTURE_CUBE_MAP) {
    for (let ii = 0; ii < 6; ++ii) {
      gl.texImage2D(TEXTURE_CUBE_MAP_POSITIVE_X + ii, level, internalFormat, options.width, options.height, 0, format, type, null);
    }
  } else if (target === TEXTURE_3D || target === TEXTURE_2D_ARRAY) {
    gl.texImage3D(target, level, internalFormat, options.width, options.height, options.depth, 0, format, type, null);
  } else {
    gl.texImage2D(target, level, internalFormat, options.width, options.height, 0, format, type, null);
  }
}

/**
 * Creates a texture based on the options passed in.
 *
 * Note: may reset UNPACK_ALIGNMENT, UNPACK_ROW_LENGTH, UNPACK_IMAGE_HEIGHT, UNPACK_SKIP_IMAGES
 * UNPACK_SKIP_PIXELS, and UNPACK_SKIP_ROWS
 *
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @param {module:twgl.TextureOptions} [options] A TextureOptions object with whatever parameters you want set.
 * @param {module:twgl.TextureReadyCallback} [callback] A callback called when an image has been downloaded and uploaded to the texture.
 * @return {WebGLTexture} the created texture.
 * @memberOf module:twgl/textures
 */
function createTexture(gl, options, callback) {
  callback = callback || noop;
  options = options || defaults$1.textureOptions;
  const tex = gl.createTexture();
  const target = options.target || TEXTURE_2D;
  let width  = options.width  || 1;
  let height = options.height || 1;
  const internalFormat = options.internalFormat || RGBA;
  gl.bindTexture(target, tex);
  if (target === TEXTURE_CUBE_MAP) {
    // this should have been the default for cubemaps :(
    gl.texParameteri(target, TEXTURE_WRAP_S, CLAMP_TO_EDGE);
    gl.texParameteri(target, TEXTURE_WRAP_T, CLAMP_TO_EDGE);
  }
  let src = options.src;
  if (src) {
    if (typeof src === "function") {
      src = src(gl, options);
    }
    if (typeof (src) === "string") {
      loadTextureFromUrl(gl, tex, options, callback);
    } else if (isArrayBuffer$1(src) ||
               (Array.isArray(src) && (
                    typeof src[0] === 'number' ||
                    Array.isArray(src[0]) ||
                    isArrayBuffer$1(src[0]))
               )
              ) {
      const dimensions = setTextureFromArray(gl, tex, src, options);
      width  = dimensions.width;
      height = dimensions.height;
    } else if (Array.isArray(src) && (typeof (src[0]) === 'string' || isTexImageSource(src[0]))) {
      if (target === TEXTURE_CUBE_MAP) {
        loadCubemapFromUrls(gl, tex, options, callback);
      } else {
        loadSlicesFromUrls(gl, tex, options, callback);
      }
    } else { // if (isTexImageSource(src))
      setTextureFromElement(gl, tex, src, options);
      width  = src.width;
      height = src.height;
    }
  } else {
    setEmptyTexture(gl, tex, options);
  }
  if (shouldAutomaticallySetTextureFilteringForSize(options)) {
    setTextureFilteringForSize(gl, tex, options, width, height, internalFormat);
  }
  setTextureParameters(gl, tex, options);
  return tex;
}

/**
 * Resizes a texture based on the options passed in.
 *
 * Note: This is not a generic resize anything function.
 * It's mostly used by {@link module:twgl.resizeFramebufferInfo}
 * It will use `options.src` if it exists to try to determine a `type`
 * otherwise it will assume `gl.UNSIGNED_BYTE`. No data is provided
 * for the texture. Texture parameters will be set accordingly
 *
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @param {WebGLTexture} tex the texture to resize
 * @param {module:twgl.TextureOptions} options A TextureOptions object with whatever parameters you want set.
 * @param {number} [width] the new width. If not passed in will use `options.width`
 * @param {number} [height] the new height. If not passed in will use `options.height`
 * @param {number} [depth] the new depth. If not passed in will use `options.depth`
 * @memberOf module:twgl/textures
 */
function resizeTexture(gl, tex, options, width, height, depth) {
  width = width || options.width;
  height = height || options.height;
  depth = depth || options.depth;
  const target = options.target || TEXTURE_2D;
  gl.bindTexture(target, tex);
  const level = options.level || 0;
  const internalFormat = options.internalFormat || options.format || RGBA;
  const formatType = getFormatAndTypeForInternalFormat(internalFormat);
  const format = options.format || formatType.format;
  let type;
  const src = options.src;
  if (!src) {
    type = options.type || formatType.type;
  } else if (isArrayBuffer$1(src) || (Array.isArray(src) && typeof (src[0]) === 'number')) {
    type = options.type || getTextureTypeForArrayType(gl, src, formatType.type);
  } else {
    type = options.type || formatType.type;
  }
  if (target === TEXTURE_CUBE_MAP) {
    for (let ii = 0; ii < 6; ++ii) {
      gl.texImage2D(TEXTURE_CUBE_MAP_POSITIVE_X + ii, level, internalFormat, width, height, 0, format, type, null);
    }
  } else if (target === TEXTURE_3D || target === TEXTURE_2D_ARRAY) {
    gl.texImage3D(target, level, internalFormat, width, height, depth, 0, format, type, null);
  } else {
    gl.texImage2D(target, level, internalFormat, width, height, 0, format, type, null);
  }
}

/**
 * Check if a src is an async request.
 * if src is a string we're going to download an image
 * if src is an array of strings we're going to download cubemap images
 * @param {*} src The src from a TextureOptions
 * @returns {bool} true if src is async.
 * @private
 */
function isAsyncSrc(src) {
  return typeof src === 'string' ||
         (Array.isArray(src) && typeof src[0] === 'string');
}

/**
 * Creates a bunch of textures based on the passed in options.
 *
 * Example:
 *
 *     const textures = twgl.createTextures(gl, {
 *       // a power of 2 image
 *       hftIcon: { src: "images/hft-icon-16.png", mag: gl.NEAREST },
 *       // a non-power of 2 image
 *       clover: { src: "images/clover.jpg" },
 *       // From a canvas
 *       fromCanvas: { src: ctx.canvas },
 *       // A cubemap from 6 images
 *       yokohama: {
 *         target: gl.TEXTURE_CUBE_MAP,
 *         src: [
 *           'images/yokohama/posx.jpg',
 *           'images/yokohama/negx.jpg',
 *           'images/yokohama/posy.jpg',
 *           'images/yokohama/negy.jpg',
 *           'images/yokohama/posz.jpg',
 *           'images/yokohama/negz.jpg',
 *         ],
 *       },
 *       // A cubemap from 1 image (can be 1x6, 2x3, 3x2, 6x1)
 *       goldengate: {
 *         target: gl.TEXTURE_CUBE_MAP,
 *         src: 'images/goldengate.jpg',
 *       },
 *       // A 2x2 pixel texture from a JavaScript array
 *       checker: {
 *         mag: gl.NEAREST,
 *         min: gl.LINEAR,
 *         src: [
 *           255,255,255,255,
 *           192,192,192,255,
 *           192,192,192,255,
 *           255,255,255,255,
 *         ],
 *       },
 *       // a 1x2 pixel texture from a typed array.
 *       stripe: {
 *         mag: gl.NEAREST,
 *         min: gl.LINEAR,
 *         format: gl.LUMINANCE,
 *         src: new Uint8Array([
 *           255,
 *           128,
 *           255,
 *           128,
 *           255,
 *           128,
 *           255,
 *           128,
 *         ]),
 *         width: 1,
 *       },
 *     });
 *
 * Now
 *
 * *   `textures.hftIcon` will be a 2d texture
 * *   `textures.clover` will be a 2d texture
 * *   `textures.fromCanvas` will be a 2d texture
 * *   `textures.yohohama` will be a cubemap texture
 * *   `textures.goldengate` will be a cubemap texture
 * *   `textures.checker` will be a 2d texture
 * *   `textures.stripe` will be a 2d texture
 *
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @param {Object.<string,module:twgl.TextureOptions>} options A object of TextureOptions one per texture.
 * @param {module:twgl.TexturesReadyCallback} [callback] A callback called when all textures have been downloaded.
 * @return {Object.<string,WebGLTexture>} the created textures by name
 * @memberOf module:twgl/textures
 */
function createTextures(gl, textureOptions, callback) {
  callback = callback || noop;
  let numDownloading = 0;
  const errors = [];
  const textures = {};
  const images = {};

  function callCallbackIfReady() {
    if (numDownloading === 0) {
      setTimeout(function() {
        callback(errors.length ? errors : undefined, textures, images);
      }, 0);
    }
  }

  Object.keys(textureOptions).forEach(function(name) {
    const options = textureOptions[name];
    let onLoadFn;
    if (isAsyncSrc(options.src)) {
      onLoadFn = function(err, tex, img) {
        images[name] = img;
        --numDownloading;
        if (err) {
          errors.push(err);
        }
        callCallbackIfReady();
      };
      ++numDownloading;
    }
    textures[name] = createTexture(gl, options, onLoadFn);
  });

  // queue the callback if there are no images to download.
  // We do this because if your code is structured to wait for
  // images to download but then you comment out all the async
  // images your code would break.
  callCallbackIfReady();

  return textures;
}

var textures = /*#__PURE__*/Object.freeze({
  __proto__: null,
  setTextureDefaults_: setDefaults$1,
  createSampler: createSampler,
  createSamplers: createSamplers,
  setSamplerParameters: setSamplerParameters,
  createTexture: createTexture,
  setEmptyTexture: setEmptyTexture,
  setTextureFromArray: setTextureFromArray,
  loadTextureFromUrl: loadTextureFromUrl,
  setTextureFromElement: setTextureFromElement,
  setTextureFilteringForSize: setTextureFilteringForSize,
  setTextureParameters: setTextureParameters,
  setDefaultTextureColor: setDefaultTextureColor,
  createTextures: createTextures,
  resizeTexture: resizeTexture,
  canGenerateMipmap: canGenerateMipmap,
  canFilter: canFilter,
  getNumComponentsForFormat: getNumComponentsForFormat,
  getBytesPerElementForInternalFormat: getBytesPerElementForInternalFormat,
  getFormatAndTypeForInternalFormat: getFormatAndTypeForInternalFormat
});

/*
 * Copyright 2019 Gregg Tavares
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS IN THE SOFTWARE.
 */

/**
 * Low level shader program related functions
 *
 * You should generally not need to use these functions. They are provided
 * for those cases where you're doing something out of the ordinary
 * and you need lower level access.
 *
 * For backward compatibility they are available at both `twgl.programs` and `twgl`
 * itself
 *
 * See {@link module:twgl} for core functions
 *
 * @module twgl/programs
 */

const error$1 = error;
const warn$1 = warn;
function getElementById(id) {
  return (typeof document !== 'undefined' && document.getElementById)
      ? document.getElementById(id)
      : null;
}

const TEXTURE0                       = 0x84c0;
const DYNAMIC_DRAW                   = 0x88e8;

const ARRAY_BUFFER$1                   = 0x8892;
const ELEMENT_ARRAY_BUFFER$1           = 0x8893;
const UNIFORM_BUFFER                 = 0x8a11;
const TRANSFORM_FEEDBACK_BUFFER      = 0x8c8e;

const TRANSFORM_FEEDBACK             = 0x8e22;

const COMPILE_STATUS                 = 0x8b81;
const LINK_STATUS                    = 0x8b82;
const FRAGMENT_SHADER                = 0x8b30;
const VERTEX_SHADER                  = 0x8b31;
const SEPARATE_ATTRIBS               = 0x8c8d;

const ACTIVE_UNIFORMS                = 0x8b86;
const ACTIVE_ATTRIBUTES              = 0x8b89;
const TRANSFORM_FEEDBACK_VARYINGS    = 0x8c83;
const ACTIVE_UNIFORM_BLOCKS          = 0x8a36;
const UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER   = 0x8a44;
const UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER = 0x8a46;
const UNIFORM_BLOCK_DATA_SIZE                     = 0x8a40;
const UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES        = 0x8a43;

const FLOAT$3                         = 0x1406;
const FLOAT_VEC2                    = 0x8B50;
const FLOAT_VEC3                    = 0x8B51;
const FLOAT_VEC4                    = 0x8B52;
const INT$3                           = 0x1404;
const INT_VEC2                      = 0x8B53;
const INT_VEC3                      = 0x8B54;
const INT_VEC4                      = 0x8B55;
const BOOL                          = 0x8B56;
const BOOL_VEC2                     = 0x8B57;
const BOOL_VEC3                     = 0x8B58;
const BOOL_VEC4                     = 0x8B59;
const FLOAT_MAT2                    = 0x8B5A;
const FLOAT_MAT3                    = 0x8B5B;
const FLOAT_MAT4                    = 0x8B5C;
const SAMPLER_2D                    = 0x8B5E;
const SAMPLER_CUBE                  = 0x8B60;
const SAMPLER_3D                    = 0x8B5F;
const SAMPLER_2D_SHADOW             = 0x8B62;
const FLOAT_MAT2x3                  = 0x8B65;
const FLOAT_MAT2x4                  = 0x8B66;
const FLOAT_MAT3x2                  = 0x8B67;
const FLOAT_MAT3x4                  = 0x8B68;
const FLOAT_MAT4x2                  = 0x8B69;
const FLOAT_MAT4x3                  = 0x8B6A;
const SAMPLER_2D_ARRAY              = 0x8DC1;
const SAMPLER_2D_ARRAY_SHADOW       = 0x8DC4;
const SAMPLER_CUBE_SHADOW           = 0x8DC5;
const UNSIGNED_INT$3                  = 0x1405;
const UNSIGNED_INT_VEC2             = 0x8DC6;
const UNSIGNED_INT_VEC3             = 0x8DC7;
const UNSIGNED_INT_VEC4             = 0x8DC8;
const INT_SAMPLER_2D                = 0x8DCA;
const INT_SAMPLER_3D                = 0x8DCB;
const INT_SAMPLER_CUBE              = 0x8DCC;
const INT_SAMPLER_2D_ARRAY          = 0x8DCF;
const UNSIGNED_INT_SAMPLER_2D       = 0x8DD2;
const UNSIGNED_INT_SAMPLER_3D       = 0x8DD3;
const UNSIGNED_INT_SAMPLER_CUBE     = 0x8DD4;
const UNSIGNED_INT_SAMPLER_2D_ARRAY = 0x8DD7;

const TEXTURE_2D$1                    = 0x0DE1;
const TEXTURE_CUBE_MAP$1              = 0x8513;
const TEXTURE_3D$1                    = 0x806F;
const TEXTURE_2D_ARRAY$1              = 0x8C1A;

const typeMap = {};

/**
 * Returns the corresponding bind point for a given sampler type
 */
function getBindPointForSamplerType(gl, type) {
  return typeMap[type].bindPoint;
}

// This kind of sucks! If you could compose functions as in `var fn = gl[name];`
// this code could be a lot smaller but that is sadly really slow (T_T)

function floatSetter(gl, location) {
  return function(v) {
    gl.uniform1f(location, v);
  };
}

function floatArraySetter(gl, location) {
  return function(v) {
    gl.uniform1fv(location, v);
  };
}

function floatVec2Setter(gl, location) {
  return function(v) {
    gl.uniform2fv(location, v);
  };
}

function floatVec3Setter(gl, location) {
  return function(v) {
    gl.uniform3fv(location, v);
  };
}

function floatVec4Setter(gl, location) {
  return function(v) {
    gl.uniform4fv(location, v);
  };
}

function intSetter(gl, location) {
  return function(v) {
    gl.uniform1i(location, v);
  };
}

function intArraySetter(gl, location) {
  return function(v) {
    gl.uniform1iv(location, v);
  };
}

function intVec2Setter(gl, location) {
  return function(v) {
    gl.uniform2iv(location, v);
  };
}

function intVec3Setter(gl, location) {
  return function(v) {
    gl.uniform3iv(location, v);
  };
}

function intVec4Setter(gl, location) {
  return function(v) {
    gl.uniform4iv(location, v);
  };
}

function uintSetter(gl, location) {
  return function(v) {
    gl.uniform1ui(location, v);
  };
}

function uintArraySetter(gl, location) {
  return function(v) {
    gl.uniform1uiv(location, v);
  };
}

function uintVec2Setter(gl, location) {
  return function(v) {
    gl.uniform2uiv(location, v);
  };
}

function uintVec3Setter(gl, location) {
  return function(v) {
    gl.uniform3uiv(location, v);
  };
}

function uintVec4Setter(gl, location) {
  return function(v) {
    gl.uniform4uiv(location, v);
  };
}

function floatMat2Setter(gl, location) {
  return function(v) {
    gl.uniformMatrix2fv(location, false, v);
  };
}

function floatMat3Setter(gl, location) {
  return function(v) {
    gl.uniformMatrix3fv(location, false, v);
  };
}

function floatMat4Setter(gl, location) {
  return function(v) {
    gl.uniformMatrix4fv(location, false, v);
  };
}

function floatMat23Setter(gl, location) {
  return function(v) {
    gl.uniformMatrix2x3fv(location, false, v);
  };
}

function floatMat32Setter(gl, location) {
  return function(v) {
    gl.uniformMatrix3x2fv(location, false, v);
  };
}

function floatMat24Setter(gl, location) {
  return function(v) {
    gl.uniformMatrix2x4fv(location, false, v);
  };
}

function floatMat42Setter(gl, location) {
  return function(v) {
    gl.uniformMatrix4x2fv(location, false, v);
  };
}

function floatMat34Setter(gl, location) {
  return function(v) {
    gl.uniformMatrix3x4fv(location, false, v);
  };
}

function floatMat43Setter(gl, location) {
  return function(v) {
    gl.uniformMatrix4x3fv(location, false, v);
  };
}

function samplerSetter(gl, type, unit, location) {
  const bindPoint = getBindPointForSamplerType(gl, type);
  return isWebGL2(gl) ? function(textureOrPair) {
    let texture;
    let sampler;
    if (isTexture(gl, textureOrPair)) {
      texture = textureOrPair;
      sampler = null;
    } else {
      texture = textureOrPair.texture;
      sampler = textureOrPair.sampler;
    }
    gl.uniform1i(location, unit);
    gl.activeTexture(TEXTURE0 + unit);
    gl.bindTexture(bindPoint, texture);
    gl.bindSampler(unit, sampler);
  } : function(texture) {
    gl.uniform1i(location, unit);
    gl.activeTexture(TEXTURE0 + unit);
    gl.bindTexture(bindPoint, texture);
  };
}

function samplerArraySetter(gl, type, unit, location, size) {
  const bindPoint = getBindPointForSamplerType(gl, type);
  const units = new Int32Array(size);
  for (let ii = 0; ii < size; ++ii) {
    units[ii] = unit + ii;
  }

  return isWebGL2(gl) ? function(textures) {
    gl.uniform1iv(location, units);
    textures.forEach(function(textureOrPair, index) {
      gl.activeTexture(TEXTURE0 + units[index]);
      let texture;
      let sampler;
      if (isTexture(gl, textureOrPair)) {
        texture = textureOrPair;
        sampler = null;
      } else {
        texture = textureOrPair.texture;
        sampler = textureOrPair.sampler;
      }
      gl.bindSampler(unit, sampler);
      gl.bindTexture(bindPoint, texture);
    });
  } : function(textures) {
    gl.uniform1iv(location, units);
    textures.forEach(function(texture, index) {
      gl.activeTexture(TEXTURE0 + units[index]);
      gl.bindTexture(bindPoint, texture);
    });
  };
}

typeMap[FLOAT$3]                         = { Type: Float32Array, size:  4, setter: floatSetter,      arraySetter: floatArraySetter, };
typeMap[FLOAT_VEC2]                    = { Type: Float32Array, size:  8, setter: floatVec2Setter,  cols: 2, };
typeMap[FLOAT_VEC3]                    = { Type: Float32Array, size: 12, setter: floatVec3Setter,  cols: 3, };
typeMap[FLOAT_VEC4]                    = { Type: Float32Array, size: 16, setter: floatVec4Setter,  cols: 4, };
typeMap[INT$3]                           = { Type: Int32Array,   size:  4, setter: intSetter,        arraySetter: intArraySetter, };
typeMap[INT_VEC2]                      = { Type: Int32Array,   size:  8, setter: intVec2Setter,    cols: 2, };
typeMap[INT_VEC3]                      = { Type: Int32Array,   size: 12, setter: intVec3Setter,    cols: 3, };
typeMap[INT_VEC4]                      = { Type: Int32Array,   size: 16, setter: intVec4Setter,    cols: 4, };
typeMap[UNSIGNED_INT$3]                  = { Type: Uint32Array,  size:  4, setter: uintSetter,       arraySetter: uintArraySetter, };
typeMap[UNSIGNED_INT_VEC2]             = { Type: Uint32Array,  size:  8, setter: uintVec2Setter,   cols: 2, };
typeMap[UNSIGNED_INT_VEC3]             = { Type: Uint32Array,  size: 12, setter: uintVec3Setter,   cols: 3, };
typeMap[UNSIGNED_INT_VEC4]             = { Type: Uint32Array,  size: 16, setter: uintVec4Setter,   cols: 4, };
typeMap[BOOL]                          = { Type: Uint32Array,  size:  4, setter: intSetter,        arraySetter: intArraySetter, };
typeMap[BOOL_VEC2]                     = { Type: Uint32Array,  size:  8, setter: intVec2Setter,    cols: 2, };
typeMap[BOOL_VEC3]                     = { Type: Uint32Array,  size: 12, setter: intVec3Setter,    cols: 3, };
typeMap[BOOL_VEC4]                     = { Type: Uint32Array,  size: 16, setter: intVec4Setter,    cols: 4, };
typeMap[FLOAT_MAT2]                    = { Type: Float32Array, size: 32, setter: floatMat2Setter,  rows: 2, cols: 2, };
typeMap[FLOAT_MAT3]                    = { Type: Float32Array, size: 48, setter: floatMat3Setter,  rows: 3, cols: 3, };
typeMap[FLOAT_MAT4]                    = { Type: Float32Array, size: 64, setter: floatMat4Setter,  rows: 4, cols: 4, };
typeMap[FLOAT_MAT2x3]                  = { Type: Float32Array, size: 32, setter: floatMat23Setter, rows: 2, cols: 3, };
typeMap[FLOAT_MAT2x4]                  = { Type: Float32Array, size: 32, setter: floatMat24Setter, rows: 2, cols: 4, };
typeMap[FLOAT_MAT3x2]                  = { Type: Float32Array, size: 48, setter: floatMat32Setter, rows: 3, cols: 2, };
typeMap[FLOAT_MAT3x4]                  = { Type: Float32Array, size: 48, setter: floatMat34Setter, rows: 3, cols: 4, };
typeMap[FLOAT_MAT4x2]                  = { Type: Float32Array, size: 64, setter: floatMat42Setter, rows: 4, cols: 2, };
typeMap[FLOAT_MAT4x3]                  = { Type: Float32Array, size: 64, setter: floatMat43Setter, rows: 4, cols: 3, };
typeMap[SAMPLER_2D]                    = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D$1,       };
typeMap[SAMPLER_CUBE]                  = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_CUBE_MAP$1, };
typeMap[SAMPLER_3D]                    = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_3D$1,       };
typeMap[SAMPLER_2D_SHADOW]             = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D$1,       };
typeMap[SAMPLER_2D_ARRAY]              = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D_ARRAY$1, };
typeMap[SAMPLER_2D_ARRAY_SHADOW]       = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D_ARRAY$1, };
typeMap[SAMPLER_CUBE_SHADOW]           = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_CUBE_MAP$1, };
typeMap[INT_SAMPLER_2D]                = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D$1,       };
typeMap[INT_SAMPLER_3D]                = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_3D$1,       };
typeMap[INT_SAMPLER_CUBE]              = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_CUBE_MAP$1, };
typeMap[INT_SAMPLER_2D_ARRAY]          = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D_ARRAY$1, };
typeMap[UNSIGNED_INT_SAMPLER_2D]       = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D$1,       };
typeMap[UNSIGNED_INT_SAMPLER_3D]       = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_3D$1,       };
typeMap[UNSIGNED_INT_SAMPLER_CUBE]     = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_CUBE_MAP$1, };
typeMap[UNSIGNED_INT_SAMPLER_2D_ARRAY] = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D_ARRAY$1, };

function floatAttribSetter(gl, index) {
  return function(b) {
    if (b.value) {
      gl.disableVertexAttribArray(index);
      switch (b.value.length) {
        case 4:
          gl.vertexAttrib4fv(index, b.value);
          break;
        case 3:
          gl.vertexAttrib3fv(index, b.value);
          break;
        case 2:
          gl.vertexAttrib2fv(index, b.value);
          break;
        case 1:
          gl.vertexAttrib1fv(index, b.value);
          break;
        default:
          throw new Error('the length of a float constant value must be between 1 and 4!');
      }
    } else {
      gl.bindBuffer(ARRAY_BUFFER$1, b.buffer);
      gl.enableVertexAttribArray(index);
      gl.vertexAttribPointer(
          index, b.numComponents || b.size, b.type || FLOAT$3, b.normalize || false, b.stride || 0, b.offset || 0);
      if (b.divisor !== undefined) {
        gl.vertexAttribDivisor(index, b.divisor);
      }
    }
  };
}

function intAttribSetter(gl, index) {
  return function(b) {
    if (b.value) {
      gl.disableVertexAttribArray(index);
      if (b.value.length === 4) {
        gl.vertexAttrib4iv(index, b.value);
      } else {
        throw new Error('The length of an integer constant value must be 4!');
      }
    } else {
      gl.bindBuffer(ARRAY_BUFFER$1, b.buffer);
      gl.enableVertexAttribArray(index);
      gl.vertexAttribIPointer(
          index, b.numComponents || b.size, b.type || INT$3, b.stride || 0, b.offset || 0);
      if (b.divisor !== undefined) {
        gl.vertexAttribDivisor(index, b.divisor);
      }
    }
  };
}

function uintAttribSetter(gl, index) {
  return function(b) {
    if (b.value) {
      gl.disableVertexAttribArray(index);
      if (b.value.length === 4) {
        gl.vertexAttrib4uiv(index, b.value);
      } else {
        throw new Error('The length of an unsigned integer constant value must be 4!');
      }
    } else {
      gl.bindBuffer(ARRAY_BUFFER$1, b.buffer);
      gl.enableVertexAttribArray(index);
      gl.vertexAttribIPointer(
          index, b.numComponents || b.size, b.type || UNSIGNED_INT$3, b.stride || 0, b.offset || 0);
      if (b.divisor !== undefined) {
        gl.vertexAttribDivisor(index, b.divisor);
      }
    }
  };
}

function matAttribSetter(gl, index, typeInfo) {
  const defaultSize = typeInfo.size;
  const count = typeInfo.count;

  return function(b) {
    gl.bindBuffer(ARRAY_BUFFER$1, b.buffer);
    const numComponents = b.size || b.numComponents || defaultSize;
    const size = numComponents / count;
    const type = b.type || FLOAT$3;
    const typeInfo = typeMap[type];
    const stride = typeInfo.size * numComponents;
    const normalize = b.normalize || false;
    const offset = b.offset || 0;
    const rowOffset = stride / count;
    for (let i = 0; i < count; ++i) {
      gl.enableVertexAttribArray(index + i);
      gl.vertexAttribPointer(
          index + i, size, type, normalize, stride, offset + rowOffset * i);
      if (b.divisor !== undefined) {
        gl.vertexAttribDivisor(index + i, b.divisor);
      }
    }
  };
}



const attrTypeMap = {};
attrTypeMap[FLOAT$3]             = { size:  4, setter: floatAttribSetter, };
attrTypeMap[FLOAT_VEC2]        = { size:  8, setter: floatAttribSetter, };
attrTypeMap[FLOAT_VEC3]        = { size: 12, setter: floatAttribSetter, };
attrTypeMap[FLOAT_VEC4]        = { size: 16, setter: floatAttribSetter, };
attrTypeMap[INT$3]               = { size:  4, setter: intAttribSetter,   };
attrTypeMap[INT_VEC2]          = { size:  8, setter: intAttribSetter,   };
attrTypeMap[INT_VEC3]          = { size: 12, setter: intAttribSetter,   };
attrTypeMap[INT_VEC4]          = { size: 16, setter: intAttribSetter,   };
attrTypeMap[UNSIGNED_INT$3]      = { size:  4, setter: uintAttribSetter,  };
attrTypeMap[UNSIGNED_INT_VEC2] = { size:  8, setter: uintAttribSetter,  };
attrTypeMap[UNSIGNED_INT_VEC3] = { size: 12, setter: uintAttribSetter,  };
attrTypeMap[UNSIGNED_INT_VEC4] = { size: 16, setter: uintAttribSetter,  };
attrTypeMap[BOOL]              = { size:  4, setter: intAttribSetter,   };
attrTypeMap[BOOL_VEC2]         = { size:  8, setter: intAttribSetter,   };
attrTypeMap[BOOL_VEC3]         = { size: 12, setter: intAttribSetter,   };
attrTypeMap[BOOL_VEC4]         = { size: 16, setter: intAttribSetter,   };
attrTypeMap[FLOAT_MAT2]        = { size:  4, setter: matAttribSetter,   count: 2, };
attrTypeMap[FLOAT_MAT3]        = { size:  9, setter: matAttribSetter,   count: 3, };
attrTypeMap[FLOAT_MAT4]        = { size: 16, setter: matAttribSetter,   count: 4, };

const errorRE = /ERROR:\s*\d+:(\d+)/gi;
function addLineNumbersWithError(src, log = '', lineOffset = 0) {
  // Note: Error message formats are not defined by any spec so this may or may not work.
  const matches = [...log.matchAll(errorRE)];
  const lineNoToErrorMap = new Map(matches.map((m, ndx) => {
    const lineNo = parseInt(m[1]);
    const next = matches[ndx + 1];
    const end = next ? next.index : log.length;
    const msg = log.substring(m.index, end);
    return [lineNo - 1, msg];
  }));
  return src.split('\n').map((line, lineNo) => {
    const err = lineNoToErrorMap.get(lineNo);
    return `${lineNo + 1 + lineOffset}: ${line}${err ? `\n\n^^^ ${err}` : ''}`;
  }).join('\n');
}

/**
 * Error Callback
 * @callback ErrorCallback
 * @param {string} msg error message.
 * @param {number} [lineOffset] amount to add to line number
 * @memberOf module:twgl
 */

const spaceRE = /^[ \t]*\n/;

/**
 * Loads a shader.
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.
 * @param {string} shaderSource The shader source.
 * @param {number} shaderType The type of shader.
 * @param {module:twgl.ErrorCallback} opt_errorCallback callback for errors.
 * @return {WebGLShader} The created shader.
 * @private
 */
function loadShader(gl, shaderSource, shaderType, opt_errorCallback) {
  const errFn = opt_errorCallback || error$1;
  // Create the shader object
  const shader = gl.createShader(shaderType);

  // Remove the first end of line because WebGL 2.0 requires
  // #version 300 es
  // as the first line. No whitespace allowed before that line
  // so
  //
  // <script>
  // #version 300 es
  // </script>
  //
  // Has one line before it which is invalid according to GLSL ES 3.00
  //
  let lineOffset = 0;
  if (spaceRE.test(shaderSource)) {
    lineOffset = 1;
    shaderSource = shaderSource.replace(spaceRE, '');
  }

  // Load the shader source
  gl.shaderSource(shader, shaderSource);

  // Compile the shader
  gl.compileShader(shader);

  // Check the compile status
  const compiled = gl.getShaderParameter(shader, COMPILE_STATUS);
  if (!compiled) {
    // Something went wrong during compilation; get the error
    const lastError = gl.getShaderInfoLog(shader);
    errFn(`${addLineNumbersWithError(shaderSource, lastError, lineOffset)}\nError compiling ${glEnumToString(gl, shaderType)}: ${lastError}`);
    gl.deleteShader(shader);
    return null;
  }

  return shader;
}

/**
 * @typedef {Object} ProgramOptions
 * @property {function(string)} [errorCallback] callback for errors
 * @property {Object.<string,number>} [attribLocations] a attribute name to location map
 * @property {(module:twgl.BufferInfo|Object.<string,module:twgl.AttribInfo>|string[])} [transformFeedbackVaryings] If passed
 *   a BufferInfo will use the attribs names inside. If passed an object of AttribInfos will use the names from that object. Otherwise
 *   you can pass an array of names.
 * @property {number} [transformFeedbackMode] the mode to pass `gl.transformFeedbackVaryings`. Defaults to `SEPARATE_ATTRIBS`.
 * @memberOf module:twgl
 */

/**
 * Gets the program options based on all these optional arguments
 * @param {module:twgl.ProgramOptions|string[]} [opt_attribs] Options for the program or an array of attribs names. Locations will be assigned by index if not passed in
 * @param {number[]} [opt_locations] The locations for the. A parallel array to opt_attribs letting you assign locations.
 * @param {module:twgl.ErrorCallback} [opt_errorCallback] callback for errors. By default it just prints an error to the console
 *        on error. If you want something else pass an callback. It's passed an error message.
 * @return {module:twgl.ProgramOptions} an instance of ProgramOptions based on the arguments passed in
 * @private
 */
function getProgramOptions(opt_attribs, opt_locations, opt_errorCallback) {
  let transformFeedbackVaryings;
  let transformFeedbackMode;
  if (typeof opt_locations === 'function') {
    opt_errorCallback = opt_locations;
    opt_locations = undefined;
  }
  if (typeof opt_attribs === 'function') {
    opt_errorCallback = opt_attribs;
    opt_attribs = undefined;
  } else if (opt_attribs && !Array.isArray(opt_attribs)) {
    // If we have an errorCallback we can just return this object
    // Otherwise we need to construct one with default errorCallback
    if (opt_attribs.errorCallback) {
      return opt_attribs;
    }
    const opt = opt_attribs;
    opt_errorCallback = opt.errorCallback;
    opt_attribs = opt.attribLocations;
    transformFeedbackVaryings = opt.transformFeedbackVaryings;
    transformFeedbackMode = opt.transformFeedbackMode;
  }

  const options = {
    errorCallback: opt_errorCallback || error$1,
    transformFeedbackVaryings: transformFeedbackVaryings,
    transformFeedbackMode: transformFeedbackMode,
  };

  if (opt_attribs) {
    let attribLocations = {};
    if (Array.isArray(opt_attribs)) {
      opt_attribs.forEach(function(attrib,  ndx) {
        attribLocations[attrib] = opt_locations ? opt_locations[ndx] : ndx;
      });
    } else {
      attribLocations = opt_attribs;
    }
    options.attribLocations = attribLocations;
  }

  return options;
}

const defaultShaderType = [
  "VERTEX_SHADER",
  "FRAGMENT_SHADER",
];

function getShaderTypeFromScriptType(gl, scriptType) {
  if (scriptType.indexOf("frag") >= 0) {
    return FRAGMENT_SHADER;
  } else if (scriptType.indexOf("vert") >= 0) {
    return VERTEX_SHADER;
  }
  return undefined;
}

function deleteShaders(gl, shaders) {
  shaders.forEach(function(shader) {
    gl.deleteShader(shader);
  });
}

/**
 * Creates a program, attaches (and/or compiles) shaders, binds attrib locations, links the
 * program and calls useProgram.
 *
 * NOTE: There are 4 signatures for this function
 *
 *     twgl.createProgram(gl, [vs, fs], options);
 *     twgl.createProgram(gl, [vs, fs], opt_errFunc);
 *     twgl.createProgram(gl, [vs, fs], opt_attribs, opt_errFunc);
 *     twgl.createProgram(gl, [vs, fs], opt_attribs, opt_locations, opt_errFunc);
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.
 * @param {WebGLShader[]|string[]} shaders The shaders to attach, or element ids for their source, or strings that contain their source
 * @param {module:twgl.ProgramOptions|string[]|module:twgl.ErrorCallback} [opt_attribs] Options for the program or an array of attribs names or an error callback. Locations will be assigned by index if not passed in
 * @param {number[]} [opt_locations|module:twgl.ErrorCallback] The locations for the. A parallel array to opt_attribs letting you assign locations or an error callback.
 * @param {module:twgl.ErrorCallback} [opt_errorCallback] callback for errors. By default it just prints an error to the console
 *        on error. If you want something else pass an callback. It's passed an error message.
 * @return {WebGLProgram?} the created program or null if error.
 * @memberOf module:twgl/programs
 */
function createProgram(
    gl, shaders, opt_attribs, opt_locations, opt_errorCallback) {
  const progOptions = getProgramOptions(opt_attribs, opt_locations, opt_errorCallback);
  const realShaders = [];
  const newShaders = [];
  for (let ndx = 0; ndx < shaders.length; ++ndx) {
    let shader = shaders[ndx];
    if (typeof (shader) === 'string') {
      const elem = getElementById(shader);
      const src = elem ? elem.text : shader;
      let type = gl[defaultShaderType[ndx]];
      if (elem && elem.type) {
        type = getShaderTypeFromScriptType(gl, elem.type) || type;
      }
      shader = loadShader(gl, src, type, progOptions.errorCallback);
      newShaders.push(shader);
    }
    if (isShader(gl, shader)) {
      realShaders.push(shader);
    }
  }

  if (realShaders.length !== shaders.length) {
    progOptions.errorCallback("not enough shaders for program");
    deleteShaders(gl, newShaders);
    return null;
  }

  const program = gl.createProgram();
  realShaders.forEach(function(shader) {
    gl.attachShader(program, shader);
  });
  if (progOptions.attribLocations) {
    Object.keys(progOptions.attribLocations).forEach(function(attrib) {
      gl.bindAttribLocation(program, progOptions.attribLocations[attrib], attrib);
    });
  }
  let varyings = progOptions.transformFeedbackVaryings;
  if (varyings) {
    if (varyings.attribs) {
      varyings = varyings.attribs;
    }
    if (!Array.isArray(varyings)) {
      varyings = Object.keys(varyings);
    }
    gl.transformFeedbackVaryings(program, varyings, progOptions.transformFeedbackMode || SEPARATE_ATTRIBS);
  }
  gl.linkProgram(program);

  // Check the link status
  const linked = gl.getProgramParameter(program, LINK_STATUS);
  if (!linked) {
    // something went wrong with the link
    const lastError = gl.getProgramInfoLog(program);
    progOptions.errorCallback(`${
      realShaders.map(shader => {
        const src = addLineNumbersWithError(gl.getShaderSource(shader), '', 0);
        const type = gl.getShaderParameter(shader, gl.SHADER_TYPE);
        return `${glEnumToString(gl, type)}\n${src}}`;
      }).join('\n')
    }\nError in program linking: ${lastError}`);

    gl.deleteProgram(program);
    deleteShaders(gl, newShaders);
    return null;
  }
  return program;
}

/**
 * Loads a shader from a script tag.
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.
 * @param {string} scriptId The id of the script tag.
 * @param {number} [opt_shaderType] The type of shader. If not passed in it will
 *     be derived from the type of the script tag.
 * @param {module:twgl.ErrorCallback} [opt_errorCallback] callback for errors.
 * @return {WebGLShader?} The created shader or null if error.
 * @private
 */
function createShaderFromScript(
    gl, scriptId, opt_shaderType, opt_errorCallback) {
  let shaderSource = "";
  const shaderScript = getElementById(scriptId);
  if (!shaderScript) {
    throw new Error(`unknown script element: ${scriptId}`);
  }
  shaderSource = shaderScript.text;

  const shaderType = opt_shaderType || getShaderTypeFromScriptType(gl, shaderScript.type);
  if (!shaderType) {
    throw new Error('unknown shader type');
  }

  return loadShader(gl, shaderSource, shaderType, opt_errorCallback);
}

/**
 * Creates a program from 2 script tags.
 *
 * NOTE: There are 4 signatures for this function
 *
 *     twgl.createProgramFromScripts(gl, [vs, fs], opt_options);
 *     twgl.createProgramFromScripts(gl, [vs, fs], opt_errFunc);
 *     twgl.createProgramFromScripts(gl, [vs, fs], opt_attribs, opt_errFunc);
 *     twgl.createProgramFromScripts(gl, [vs, fs], opt_attribs, opt_locations, opt_errFunc);
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext
 *        to use.
 * @param {string[]} shaderScriptIds Array of ids of the script
 *        tags for the shaders. The first is assumed to be the
 *        vertex shader, the second the fragment shader.
 * @param {module:twgl.ProgramOptions|string[]|module:twgl.ErrorCallback} [opt_attribs] Options for the program or an array of attribs names or an error callback. Locations will be assigned by index if not passed in
 * @param {number[]} [opt_locations|module:twgl.ErrorCallback] The locations for the. A parallel array to opt_attribs letting you assign locations or an error callback.
 * @param {module:twgl.ErrorCallback} [opt_errorCallback] callback for errors. By default it just prints an error to the console
 *        on error. If you want something else pass an callback. It's passed an error message.
 * @return {WebGLProgram?} the created program or null if error.
 * @memberOf module:twgl/programs
 */
function createProgramFromScripts(
    gl, shaderScriptIds, opt_attribs, opt_locations, opt_errorCallback) {
  const progOptions = getProgramOptions(opt_attribs, opt_locations, opt_errorCallback);
  const shaders = [];
  for (let ii = 0; ii < shaderScriptIds.length; ++ii) {
    const shader = createShaderFromScript(
        gl, shaderScriptIds[ii], gl[defaultShaderType[ii]], progOptions.errorCallback);
    if (!shader) {
      return null;
    }
    shaders.push(shader);
  }
  return createProgram(gl, shaders, progOptions);
}

/**
 * Creates a program from 2 sources.
 *
 * NOTE: There are 4 signatures for this function
 *
 *     twgl.createProgramFromSource(gl, [vs, fs], opt_options);
 *     twgl.createProgramFromSource(gl, [vs, fs], opt_errFunc);
 *     twgl.createProgramFromSource(gl, [vs, fs], opt_attribs, opt_errFunc);
 *     twgl.createProgramFromSource(gl, [vs, fs], opt_attribs, opt_locations, opt_errFunc);
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext
 *        to use.
 * @param {string[]} shaderSources Array of sources for the
 *        shaders. The first is assumed to be the vertex shader,
 *        the second the fragment shader.
 * @param {module:twgl.ProgramOptions|string[]|module:twgl.ErrorCallback} [opt_attribs] Options for the program or an array of attribs names or an error callback. Locations will be assigned by index if not passed in
 * @param {number[]} [opt_locations|module:twgl.ErrorCallback] The locations for the. A parallel array to opt_attribs letting you assign locations or an error callback.
 * @param {module:twgl.ErrorCallback} [opt_errorCallback] callback for errors. By default it just prints an error to the console
 *        on error. If you want something else pass an callback. It's passed an error message.
 * @return {WebGLProgram?} the created program or null if error.
 * @memberOf module:twgl/programs
 */
function createProgramFromSources(
    gl, shaderSources, opt_attribs, opt_locations, opt_errorCallback) {
  const progOptions = getProgramOptions(opt_attribs, opt_locations, opt_errorCallback);
  const shaders = [];
  for (let ii = 0; ii < shaderSources.length; ++ii) {
    const shader = loadShader(
        gl, shaderSources[ii], gl[defaultShaderType[ii]], progOptions.errorCallback);
    if (!shader) {
      return null;
    }
    shaders.push(shader);
  }
  return createProgram(gl, shaders, progOptions);
}

/**
 * Returns true if attribute/uniform is a reserved/built in
 *
 * It makes no sense to me why GL returns these because it's
 * illegal to call `gl.getUniformLocation` and `gl.getAttribLocation`
 * with names that start with `gl_` (and `webgl_` in WebGL)
 *
 * I can only assume they are there because they might count
 * when computing the number of uniforms/attributes used when you want to
 * know if you are near the limit. That doesn't really make sense
 * to me but the fact that these get returned are in the spec.
 *
 * @param {WebGLActiveInfo} info As returned from `gl.getActiveUniform` or
 *    `gl.getActiveAttrib`.
 * @return {bool} true if it's reserved
 * @private
 */
function isBuiltIn(info) {
  const name = info.name;
  return name.startsWith("gl_") || name.startsWith("webgl_");
}

const tokenRE = /(\.|\[|]|\w+)/g;
const isDigit = s => s >= '0' && s <= '9';
function addSetterToUniformTree(fullPath, setter, node, uniformSetters) {
  const tokens = fullPath.split(tokenRE).filter(s => s !== '');
  let tokenNdx = 0;
  let path = '';

  for (;;) {
    const token = tokens[tokenNdx++];  // has to be name or number
    path += token;
    const isArrayIndex = isDigit(token[0]);
    const accessor = isArrayIndex
        ? parseInt(token)
        : token;
    if (isArrayIndex) {
      path += tokens[tokenNdx++];  // skip ']'
    }
    const isLastToken = tokenNdx === tokens.length;
    if (isLastToken) {
      node[accessor] = setter;
      break;
    } else {
      const token = tokens[tokenNdx++];  // has to be . or [
      const isArray = token === '[';
      const child = node[accessor] || (isArray ? [] : {});
      node[accessor] = child;
      node = child;
      uniformSetters[path] = uniformSetters[path] || function(node) {
        return function(value) {
          setUniformTree(node, value);
        };
      }(child);
      path += token;
    }
  }
}

/**
 * Creates setter functions for all uniforms of a shader
 * program.
 *
 * @see {@link module:twgl.setUniforms}
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.
 * @param {WebGLProgram} program the program to create setters for.
 * @returns {Object.<string, function>} an object with a setter by name for each uniform
 * @memberOf module:twgl/programs
 */
function createUniformSetters(gl, program) {
  let textureUnit = 0;

  /**
   * Creates a setter for a uniform of the given program with it's
   * location embedded in the setter.
   * @param {WebGLProgram} program
   * @param {WebGLUniformInfo} uniformInfo
   * @returns {function} the created setter.
   */
  function createUniformSetter(program, uniformInfo, location) {
    const isArray = uniformInfo.name.endsWith("[0]");
    const type = uniformInfo.type;
    const typeInfo = typeMap[type];
    if (!typeInfo) {
      throw new Error(`unknown type: 0x${type.toString(16)}`); // we should never get here.
    }
    let setter;
    if (typeInfo.bindPoint) {
      // it's a sampler
      const unit = textureUnit;
      textureUnit += uniformInfo.size;
      if (isArray) {
        setter = typeInfo.arraySetter(gl, type, unit, location, uniformInfo.size);
      } else {
        setter = typeInfo.setter(gl, type, unit, location, uniformInfo.size);
      }
    } else {
      if (typeInfo.arraySetter && isArray) {
        setter = typeInfo.arraySetter(gl, location);
      } else {
        setter = typeInfo.setter(gl, location);
      }
    }
    setter.location = location;
    return setter;
  }

  const uniformSetters = {};
  const uniformTree = {};
  const numUniforms = gl.getProgramParameter(program, ACTIVE_UNIFORMS);

  for (let ii = 0; ii < numUniforms; ++ii) {
    const uniformInfo = gl.getActiveUniform(program, ii);
    if (isBuiltIn(uniformInfo)) {
      continue;
    }
    let name = uniformInfo.name;
    // remove the array suffix.
    if (name.endsWith("[0]")) {
      name = name.substr(0, name.length - 3);
    }
    const location = gl.getUniformLocation(program, uniformInfo.name);
    // the uniform will have no location if it's in a uniform block
    if (location) {
      const setter = createUniformSetter(program, uniformInfo, location);
      uniformSetters[name] = setter;
      addSetterToUniformTree(name, setter, uniformTree, uniformSetters);
    }
  }

  return uniformSetters;
}

/**
 * @typedef {Object} TransformFeedbackInfo
 * @property {number} index index of transform feedback
 * @property {number} type GL type
 * @property {number} size 1 - 4
 * @memberOf module:twgl
 */

/**
 * Create TransformFeedbackInfo for passing to bindTransformFeedbackInfo.
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.
 * @param {WebGLProgram} program an existing WebGLProgram.
 * @return {Object<string, module:twgl.TransformFeedbackInfo>}
 * @memberOf module:twgl
 */
function createTransformFeedbackInfo(gl, program) {
  const info = {};
  const numVaryings = gl.getProgramParameter(program, TRANSFORM_FEEDBACK_VARYINGS);
  for (let ii = 0; ii < numVaryings; ++ii) {
    const varying = gl.getTransformFeedbackVarying(program, ii);
    info[varying.name] = {
      index: ii,
      type: varying.type,
      size: varying.size,
    };
  }
  return info;
}

/**
 * Binds buffers for transform feedback.
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.
 * @param {(module:twgl.ProgramInfo|Object<string, module:twgl.TransformFeedbackInfo>)} transformFeedbackInfo A ProgramInfo or TransformFeedbackInfo.
 * @param {(module:twgl.BufferInfo|Object<string, module:twgl.AttribInfo>)} [bufferInfo] A BufferInfo or set of AttribInfos.
 * @memberOf module:twgl
 */
function bindTransformFeedbackInfo(gl, transformFeedbackInfo, bufferInfo) {
  if (transformFeedbackInfo.transformFeedbackInfo) {
    transformFeedbackInfo = transformFeedbackInfo.transformFeedbackInfo;
  }
  if (bufferInfo.attribs) {
    bufferInfo = bufferInfo.attribs;
  }
  for (const name in bufferInfo) {
    const varying = transformFeedbackInfo[name];
    if (varying) {
      const buf = bufferInfo[name];
      if (buf.offset) {
        gl.bindBufferRange(TRANSFORM_FEEDBACK_BUFFER, varying.index, buf.buffer, buf.offset, buf.size);
      } else {
        gl.bindBufferBase(TRANSFORM_FEEDBACK_BUFFER, varying.index, buf.buffer);
      }
    }
  }
}

/**
 * Creates a transform feedback and sets the buffers
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.
 * @param {module:twgl.ProgramInfo} programInfo A ProgramInfo as returned from {@link module:twgl.createProgramInfo}
 * @param {(module:twgl.BufferInfo|Object<string, module:twgl.AttribInfo>)} [bufferInfo] A BufferInfo or set of AttribInfos.
 * @return {WebGLTransformFeedback} the created transform feedback
 * @memberOf module:twgl
 */
function createTransformFeedback(gl, programInfo, bufferInfo) {
  const tf = gl.createTransformFeedback();
  gl.bindTransformFeedback(TRANSFORM_FEEDBACK, tf);
  gl.useProgram(programInfo.program);
  bindTransformFeedbackInfo(gl, programInfo, bufferInfo);
  gl.bindTransformFeedback(TRANSFORM_FEEDBACK, null);
  return tf;
}

/**
 * @typedef {Object} UniformData
 * @property {string} name The name of the uniform
 * @property {number} type The WebGL type enum for this uniform
 * @property {number} size The number of elements for this uniform
 * @property {number} blockNdx The block index this uniform appears in
 * @property {number} offset The byte offset in the block for this uniform's value
 * @memberOf module:twgl
 */

/**
 * The specification for one UniformBlockObject
 *
 * @typedef {Object} BlockSpec
 * @property {number} index The index of the block.
 * @property {number} size The size in bytes needed for the block
 * @property {number[]} uniformIndices The indices of the uniforms used by the block. These indices
 *    correspond to entries in a UniformData array in the {@link module:twgl.UniformBlockSpec}.
 * @property {bool} usedByVertexShader Self explanatory
 * @property {bool} usedByFragmentShader Self explanatory
 * @property {bool} used Self explanatory
 * @memberOf module:twgl
 */

/**
 * A `UniformBlockSpec` represents the data needed to create and bind
 * UniformBlockObjects for a given program
 *
 * @typedef {Object} UniformBlockSpec
 * @property {Object.<string, module:twgl.BlockSpec>} blockSpecs The BlockSpec for each block by block name
 * @property {UniformData[]} uniformData An array of data for each uniform by uniform index.
 * @memberOf module:twgl
 */

/**
 * Creates a UniformBlockSpec for the given program.
 *
 * A UniformBlockSpec represents the data needed to create and bind
 * UniformBlockObjects
 *
 * @param {WebGL2RenderingContext} gl A WebGL2 Rendering Context
 * @param {WebGLProgram} program A WebGLProgram for a successfully linked program
 * @return {module:twgl.UniformBlockSpec} The created UniformBlockSpec
 * @memberOf module:twgl/programs
 */
function createUniformBlockSpecFromProgram(gl, program) {
  const numUniforms = gl.getProgramParameter(program, ACTIVE_UNIFORMS);
  const uniformData = [];
  const uniformIndices = [];

  for (let ii = 0; ii < numUniforms; ++ii) {
    uniformIndices.push(ii);
    uniformData.push({});
    const uniformInfo = gl.getActiveUniform(program, ii);
    uniformData[ii].name = uniformInfo.name;
  }

  [
    [ "UNIFORM_TYPE", "type" ],
    [ "UNIFORM_SIZE", "size" ],  // num elements
    [ "UNIFORM_BLOCK_INDEX", "blockNdx" ],
    [ "UNIFORM_OFFSET", "offset", ],
  ].forEach(function(pair) {
    const pname = pair[0];
    const key = pair[1];
    gl.getActiveUniforms(program, uniformIndices, gl[pname]).forEach(function(value, ndx) {
      uniformData[ndx][key] = value;
    });
  });

  const blockSpecs = {};

  const numUniformBlocks = gl.getProgramParameter(program, ACTIVE_UNIFORM_BLOCKS);
  for (let ii = 0; ii < numUniformBlocks; ++ii) {
    const name = gl.getActiveUniformBlockName(program, ii);
    const blockSpec = {
      index: gl.getUniformBlockIndex(program, name),
      usedByVertexShader: gl.getActiveUniformBlockParameter(program, ii, UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),
      usedByFragmentShader: gl.getActiveUniformBlockParameter(program, ii, UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),
      size: gl.getActiveUniformBlockParameter(program, ii, UNIFORM_BLOCK_DATA_SIZE),
      uniformIndices: gl.getActiveUniformBlockParameter(program, ii, UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES),
    };
    blockSpec.used = blockSpec.usedByVertexShader || blockSpec.usedByFragmentShader;
    blockSpecs[name] = blockSpec;
  }

  return {
    blockSpecs: blockSpecs,
    uniformData: uniformData,
  };
}

const arraySuffixRE = /\[\d+\]\.$/;  // better way to check?

const pad = (v, padding) => ((v + (padding - 1)) / padding | 0) * padding;

function createUniformBlockUniformSetter(view, isArray, rows, cols) {
  if (isArray || rows) {
    cols = cols || 1;
    const numElements = view.length;
    const totalRows = numElements / 4;
    return function(value) {
      let dst = 0;
      let src = 0;
      for (let row = 0; row < totalRows; ++row) {
        for (let col = 0; col < cols; ++col) {
          view[dst++] = value[src++];
        }
        dst += 4 - cols;
      }
    };
  } else {
    return function(value) {
      if (value.length) {
        view.set(value);
      } else {
        view[0] = value;
      }
    };
  }
}

/**
 * Represents a UniformBlockObject including an ArrayBuffer with all the uniform values
 * and a corresponding WebGLBuffer to hold those values on the GPU
 *
 * @typedef {Object} UniformBlockInfo
 * @property {string} name The name of the block
 * @property {ArrayBuffer} array The array buffer that contains the uniform values
 * @property {Float32Array} asFloat A float view on the array buffer. This is useful
 *    inspecting the contents of the buffer in the debugger.
 * @property {WebGLBuffer} buffer A WebGL buffer that will hold a copy of the uniform values for rendering.
 * @property {number} [offset] offset into buffer
 * @property {Object<string, ArrayBufferView>} uniforms A uniform name to ArrayBufferView map.
 *   each Uniform has a correctly typed `ArrayBufferView` into array at the correct offset
 *   and length of that uniform. So for example a float uniform would have a 1 float `Float32Array`
 *   view. A single mat4 would have a 16 element `Float32Array` view. An ivec2 would have an
 *   `Int32Array` view, etc.
 * @property {Object<string, function>} setters A setter for this uniform.
 *   The reason to use setters is elements of arrays are padded to vec4 sizes which
 *   means if you want to set an array of 4 floats you'd need to set 16 values
 *   (or set elements 0, 4, 8, 12). In other words
 *   `someBlockInfo.uniforms.some4FloatArrayUniform.set([0, , , , 1, , , , 2, , , , 3])`
 *   where as the setter handles just passing in [0, 1, 2, 3] either directly as in
 *   `someBlockInfo.setter.some4FloatArrayUniform.set([0, 1, 2, 3])` (not recommended)
 *   or via {@link module:twgl.setBlockUniforms}
 * @memberOf module:twgl
 */

/**
 * Creates a `UniformBlockInfo` for the specified block
 *
 * Note: **If the blockName matches no existing blocks a warning is printed to the console and a dummy
 * `UniformBlockInfo` is returned**. This is because when debugging GLSL
 * it is common to comment out large portions of a shader or for example set
 * the final output to a constant. When that happens blocks get optimized out.
 * If this function did not create dummy blocks your code would crash when debugging.
 *
 * @param {WebGL2RenderingContext} gl A WebGL2RenderingContext
 * @param {WebGLProgram} program A WebGLProgram
 * @param {module:twgl.UniformBlockSpec} uniformBlockSpec. A UniformBlockSpec as returned
 *     from {@link module:twgl.createUniformBlockSpecFromProgram}.
 * @param {string} blockName The name of the block.
 * @return {module:twgl.UniformBlockInfo} The created UniformBlockInfo
 * @memberOf module:twgl/programs
 */
function createUniformBlockInfoFromProgram(gl, program, uniformBlockSpec, blockName) {
  const blockSpecs = uniformBlockSpec.blockSpecs;
  const uniformData = uniformBlockSpec.uniformData;
  const blockSpec = blockSpecs[blockName];
  if (!blockSpec) {
    warn$1("no uniform block object named:", blockName);
    return {
      name: blockName,
      uniforms: {},
    };
  }
  const array = new ArrayBuffer(blockSpec.size);
  const buffer = gl.createBuffer();
  const uniformBufferIndex = blockSpec.index;
  gl.bindBuffer(UNIFORM_BUFFER, buffer);
  gl.uniformBlockBinding(program, blockSpec.index, uniformBufferIndex);

  let prefix = blockName + ".";
  if (arraySuffixRE.test(prefix)) {
    prefix = prefix.replace(arraySuffixRE, ".");
  }
  const uniforms = {};
  const setters = {};
  const setterTree = {};
  blockSpec.uniformIndices.forEach(function(uniformNdx) {
    const data = uniformData[uniformNdx];
    let name = data.name;
    if (name.startsWith(prefix)) {
      name = name.substr(prefix.length);
    }
    const isArray = name.endsWith('[0]');
    if (isArray) {
      name = name.substr(0, name.length - 3);
    }
    const typeInfo = typeMap[data.type];
    const Type = typeInfo.Type;
    const byteLength = isArray
        ? pad(typeInfo.size, 16) * data.size
        : typeInfo.size * data.size;
    const uniformView = new Type(array, data.offset, byteLength / Type.BYTES_PER_ELEMENT);
    uniforms[name] = uniformView;
    // Note: I'm not sure what to do here. The original
    // idea was to create TypedArray views into each part
    // of the block. This is useful, for example if you have
    // a block with { mat4: model; mat4 view; mat4 projection; }
    // you'll get a Float32Array for each one suitable for
    // passing to most JS math libraries including twgl's and glMatrix.js.
    //
    // But, if you have a an array of structures, especially if that
    // array is large, you get a whole bunch of TypedArray views.
    // Every one of them has overhead and switching between them all
    // is probably a cache miss. In that case it would really be better
    // to just have one view (asFloat) and have all the setters
    // just reference the correct portion. But, then you can't easily
    // treat a matrix, or a vec4, as a standalone thing like you can
    // with all the views.
    //
    // Another problem with the views is they are not shared. With
    // uniforms you have one set of setters. With UniformBlockInfo
    // you have a set of setters *pre block instance*. That's because
    // TypedArray views can't be mapped to different buffers.
    //
    // My gut right now is if you really want the speed and compactness
    // then you should probably roll your own solution. TWGL's goal
    // here is ease of use as AFAICT there is no simple generic efficient
    // solution.
    const setter = createUniformBlockUniformSetter(uniformView, isArray, typeInfo.rows, typeInfo.cols);
    setters[name] = setter;
    addSetterToUniformTree(name, setter, setterTree, setters);
  });
  return {
    name: blockName,
    array,
    asFloat: new Float32Array(array),  // for debugging
    buffer,
    uniforms,
    setters,
  };
}

/**
 * Creates a `UniformBlockInfo` for the specified block
 *
 * Note: **If the blockName matches no existing blocks a warning is printed to the console and a dummy
 * `UniformBlockInfo` is returned**. This is because when debugging GLSL
 * it is common to comment out large portions of a shader or for example set
 * the final output to a constant. When that happens blocks get optimized out.
 * If this function did not create dummy blocks your code would crash when debugging.
 *
 * @param {WebGL2RenderingContext} gl A WebGL2RenderingContext
 * @param {module:twgl.ProgramInfo} programInfo a `ProgramInfo`
 *     as returned from {@link module:twgl.createProgramInfo}
 * @param {string} blockName The name of the block.
 * @return {module:twgl.UniformBlockInfo} The created UniformBlockInfo
 * @memberOf module:twgl/programs
 */
function createUniformBlockInfo(gl, programInfo, blockName) {
  return createUniformBlockInfoFromProgram(gl, programInfo.program, programInfo.uniformBlockSpec, blockName);
}

/**
 * Binds a uniform block to the matching uniform block point.
 * Matches by blocks by name so blocks must have the same name not just the same
 * structure.
 *
 * If you have changed any values and you upload the values into the corresponding WebGLBuffer
 * call {@link module:twgl.setUniformBlock} instead.
 *
 * @param {WebGL2RenderingContext} gl A WebGL 2 rendering context.
 * @param {(module:twgl.ProgramInfo|module:twgl.UniformBlockSpec)} programInfo a `ProgramInfo`
 *     as returned from {@link module:twgl.createProgramInfo} or or `UniformBlockSpec` as
 *     returned from {@link module:twgl.createUniformBlockSpecFromProgram}.
 * @param {module:twgl.UniformBlockInfo} uniformBlockInfo a `UniformBlockInfo` as returned from
 *     {@link module:twgl.createUniformBlockInfo}.
 * @return {bool} true if buffer was bound. If the programInfo has no block with the same block name
 *     no buffer is bound.
 * @memberOf module:twgl/programs
 */
function bindUniformBlock(gl, programInfo, uniformBlockInfo) {
  const uniformBlockSpec = programInfo.uniformBlockSpec || programInfo;
  const blockSpec = uniformBlockSpec.blockSpecs[uniformBlockInfo.name];
  if (blockSpec) {
    const bufferBindIndex = blockSpec.index;
    gl.bindBufferRange(UNIFORM_BUFFER, bufferBindIndex, uniformBlockInfo.buffer, uniformBlockInfo.offset || 0, uniformBlockInfo.array.byteLength);
    return true;
  }
  return false;
}

/**
 * Uploads the current uniform values to the corresponding WebGLBuffer
 * and binds that buffer to the program's corresponding bind point for the uniform block object.
 *
 * If you haven't changed any values and you only need to bind the uniform block object
 * call {@link module:twgl.bindUniformBlock} instead.
 *
 * @param {WebGL2RenderingContext} gl A WebGL 2 rendering context.
 * @param {(module:twgl.ProgramInfo|module:twgl.UniformBlockSpec)} programInfo a `ProgramInfo`
 *     as returned from {@link module:twgl.createProgramInfo} or or `UniformBlockSpec` as
 *     returned from {@link module:twgl.createUniformBlockSpecFromProgram}.
 * @param {module:twgl.UniformBlockInfo} uniformBlockInfo a `UniformBlockInfo` as returned from
 *     {@link module:twgl.createUniformBlockInfo}.
 * @memberOf module:twgl/programs
 */
function setUniformBlock(gl, programInfo, uniformBlockInfo) {
  if (bindUniformBlock(gl, programInfo, uniformBlockInfo)) {
    gl.bufferData(UNIFORM_BUFFER, uniformBlockInfo.array, DYNAMIC_DRAW);
  }
}

/**
 * Sets values of a uniform block object
 *
 * @param {module:twgl.UniformBlockInfo} uniformBlockInfo A UniformBlockInfo as returned by {@link module:twgl.createUniformBlockInfo}.
 * @param {Object.<string, ?>} values A uniform name to value map where the value is correct for the given
 *    type of uniform. So for example given a block like
 *
 *       uniform SomeBlock {
 *         float someFloat;
 *         vec2 someVec2;
 *         vec3 someVec3Array[2];
 *         int someInt;
 *       }
 *
 *  You can set the values of the uniform block with
 *
 *       twgl.setBlockUniforms(someBlockInfo, {
 *          someFloat: 12.3,
 *          someVec2: [1, 2],
 *          someVec3Array: [1, 2, 3, 4, 5, 6],
 *          someInt: 5,
 *       }
 *
 *  Arrays can be JavaScript arrays or typed arrays
 *
 *  You can also fill out structure and array values either via
 *  shortcut. Example
 *
 *     // -- in shader --
 *     struct Light {
 *       float intensity;
 *       vec4 color;
 *     };
 *     uniform Lights {
 *       Light lights[2];
 *     };
 *
 *     // in JavaScript
 *
 *     twgl.setBlockUniforms(someBlockInfo, {
 *       lights: [
 *         { intensity: 5.0, color: [1, 0, 0, 1] },
 *         { intensity: 2.0, color: [0, 0, 1, 1] },
 *       ],
 *     });
 *
 *     // or the more traditional way
 *
 *     twgl.setBlockUniforms(someBlockInfo, {
 *       "lights[0].intensity": 5.0,
 *       "lights[0].color": [1, 0, 0, 1],
 *       "lights[1].intensity": 2.0,
 *       "lights[1].color": [0, 0, 1, 1],
 *     });
 *
 *   You can also specify partial paths
 *
 *     twgl.setBlockUniforms(someBlockInfo, {
 *       'lights[1]: { intensity: 5.0, color: [1, 0, 0, 1] },
 *     });
 *
 *   But you can not specify leaf array indices.
 *
 *  **IMPORTANT!**, packing in a UniformBlock is unintuitive.
 *  For example the actual layout of `someVec3Array` above in memory
 *  is `1, 2, 3, unused, 4, 5, 6, unused`. twgl takes in 6 values
 *  as shown about and copies them, skipping the padding. This might
 *  be confusing if you're already familiar with Uniform blocks.
 *
 *  If you want to deal with the padding yourself you can access the array
 *  buffer views directly. eg:
 *
 *      someBlockInfo.someVec3Array.set([1, 2, 3, 0, 4, 5, 6, 0]);
 *
 *  Any name that doesn't match will be ignored
 * @memberOf module:twgl/programs
 */
function setBlockUniforms(uniformBlockInfo, values) {
  const setters = uniformBlockInfo.setters;
  for (const name in values) {
    const setter = setters[name];
    if (setter) {
      const value = values[name];
      setter(value);
    }
  }
}

function setUniformTree(tree, values) {
  for (const name in values) {
    const prop = tree[name];
    if (typeof prop === 'function') {
      prop(values[name]);
    } else {
      setUniformTree(tree[name], values[name]);
    }
  }
}

/**
 * Set uniforms and binds related textures.
 *
 * example:
 *
 *     const programInfo = createProgramInfo(
 *         gl, ["some-vs", "some-fs"]);
 *
 *     const tex1 = gl.createTexture();
 *     const tex2 = gl.createTexture();
 *
 *     ... assume we setup the textures with data ...
 *
 *     const uniforms = {
 *       u_someSampler: tex1,
 *       u_someOtherSampler: tex2,
 *       u_someColor: [1,0,0,1],
 *       u_somePosition: [0,1,1],
 *       u_someMatrix: [
 *         1,0,0,0,
 *         0,1,0,0,
 *         0,0,1,0,
 *         0,0,0,0,
 *       ],
 *     };
 *
 *     gl.useProgram(program);
 *
 * This will automatically bind the textures AND set the
 * uniforms.
 *
 *     twgl.setUniforms(programInfo, uniforms);
 *
 * For the example above it is equivalent to
 *
 *     var texUnit = 0;
 *     gl.activeTexture(gl.TEXTURE0 + texUnit);
 *     gl.bindTexture(gl.TEXTURE_2D, tex1);
 *     gl.uniform1i(u_someSamplerLocation, texUnit++);
 *     gl.activeTexture(gl.TEXTURE0 + texUnit);
 *     gl.bindTexture(gl.TEXTURE_2D, tex2);
 *     gl.uniform1i(u_someSamplerLocation, texUnit++);
 *     gl.uniform4fv(u_someColorLocation, [1, 0, 0, 1]);
 *     gl.uniform3fv(u_somePositionLocation, [0, 1, 1]);
 *     gl.uniformMatrix4fv(u_someMatrix, false, [
 *         1,0,0,0,
 *         0,1,0,0,
 *         0,0,1,0,
 *         0,0,0,0,
 *       ]);
 *
 * Note it is perfectly reasonable to call `setUniforms` multiple times. For example
 *
 *     const uniforms = {
 *       u_someSampler: tex1,
 *       u_someOtherSampler: tex2,
 *     };
 *
 *     const moreUniforms {
 *       u_someColor: [1,0,0,1],
 *       u_somePosition: [0,1,1],
 *       u_someMatrix: [
 *         1,0,0,0,
 *         0,1,0,0,
 *         0,0,1,0,
 *         0,0,0,0,
 *       ],
 *     };
 *
 *     twgl.setUniforms(programInfo, uniforms);
 *     twgl.setUniforms(programInfo, moreUniforms);
 *
 * You can also add WebGLSamplers to uniform samplers as in
 *
 *     const uniforms = {
 *       u_someSampler: {
 *         texture: someWebGLTexture,
 *         sampler: someWebGLSampler,
 *       },
 *     };
 *
 * In which case both the sampler and texture will be bound to the
 * same unit.
 *
 * @param {(module:twgl.ProgramInfo|Object.<string, function>)} setters a `ProgramInfo` as returned from `createProgramInfo` or the setters returned from
 *        `createUniformSetters`.
 * @param {Object.<string, ?>} values an object with values for the
 *        uniforms.
 *   You can pass multiple objects by putting them in an array or by calling with more arguments.For example
 *
 *     const sharedUniforms = {
 *       u_fogNear: 10,
 *       u_projection: ...
 *       ...
 *     };
 *
 *     const localUniforms = {
 *       u_world: ...
 *       u_diffuseColor: ...
 *     };
 *
 *     twgl.setUniforms(programInfo, sharedUniforms, localUniforms);
 *
 *     // is the same as
 *
 *     twgl.setUniforms(programInfo, [sharedUniforms, localUniforms]);
 *
 *     // is the same as
 *
 *     twgl.setUniforms(programInfo, sharedUniforms);
 *     twgl.setUniforms(programInfo, localUniforms};
 *
 *   You can also fill out structure and array values either via
 *   shortcut. Example
 *
 *     // -- in shader --
 *     struct Light {
 *       float intensity;
 *       vec4 color;
 *     };
 *     uniform Light lights[2];
 *
 *     // in JavaScript
 *
 *     twgl.setUniforms(programInfo, {
 *       lights: [
 *         { intensity: 5.0, color: [1, 0, 0, 1] },
 *         { intensity: 2.0, color: [0, 0, 1, 1] },
 *       ],
 *     });
 *
 *   or the more traditional way
 *
 *     twgl.setUniforms(programInfo, {
 *       "lights[0].intensity": 5.0,
 *       "lights[0].color": [1, 0, 0, 1],
 *       "lights[1].intensity": 2.0,
 *       "lights[1].color": [0, 0, 1, 1],
 *     });
 *
 *   You can also specify partial paths
 *
 *     twgl.setUniforms(programInfo, {
 *       'lights[1]: { intensity: 5.0, color: [1, 0, 0, 1] },
 *     });
 *
 *   But you can not specify leaf array indices
 *
 * @memberOf module:twgl/programs
 */
function setUniforms(setters, ...args) {  // eslint-disable-line
  const actualSetters = setters.uniformSetters || setters;
  const numArgs = args.length;
  for (let aNdx = 0; aNdx < numArgs; ++aNdx) {
    const values = args[aNdx];
    if (Array.isArray(values)) {
      const numValues = values.length;
      for (let ii = 0; ii < numValues; ++ii) {
        setUniforms(actualSetters, values[ii]);
      }
    } else {
      for (const name in values) {
        const setter = actualSetters[name];
        if (setter) {
          setter(values[name]);
        }
      }
    }
  }
}

/**
 * Alias for `setUniforms`
 * @function
 * @param {(module:twgl.ProgramInfo|Object.<string, function>)} setters a `ProgramInfo` as returned from `createProgramInfo` or the setters returned from
 *        `createUniformSetters`.
 * @param {Object.<string, ?>} values an object with values for the
 * @memberOf module:twgl/programs
 */
const setUniformsAndBindTextures = setUniforms;

/**
 * Creates setter functions for all attributes of a shader
 * program. You can pass this to {@link module:twgl.setBuffersAndAttributes} to set all your buffers and attributes.
 *
 * @see {@link module:twgl.setAttributes} for example
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.
 * @param {WebGLProgram} program the program to create setters for.
 * @return {Object.<string, function>} an object with a setter for each attribute by name.
 * @memberOf module:twgl/programs
 */
function createAttributeSetters(gl, program) {
  const attribSetters = {
  };

  const numAttribs = gl.getProgramParameter(program, ACTIVE_ATTRIBUTES);
  for (let ii = 0; ii < numAttribs; ++ii) {
    const attribInfo = gl.getActiveAttrib(program, ii);
    if (isBuiltIn(attribInfo)) {
      continue;
    }
    const index = gl.getAttribLocation(program, attribInfo.name);
    const typeInfo = attrTypeMap[attribInfo.type];
    const setter = typeInfo.setter(gl, index, typeInfo);
    setter.location = index;
    attribSetters[attribInfo.name] = setter;
  }

  return attribSetters;
}

/**
 * Sets attributes and binds buffers (deprecated... use {@link module:twgl.setBuffersAndAttributes})
 *
 * Example:
 *
 *     const program = createProgramFromScripts(
 *         gl, ["some-vs", "some-fs");
 *
 *     const attribSetters = createAttributeSetters(program);
 *
 *     const positionBuffer = gl.createBuffer();
 *     const texcoordBuffer = gl.createBuffer();
 *
 *     const attribs = {
 *       a_position: {buffer: positionBuffer, numComponents: 3},
 *       a_texcoord: {buffer: texcoordBuffer, numComponents: 2},
 *     };
 *
 *     gl.useProgram(program);
 *
 * This will automatically bind the buffers AND set the
 * attributes.
 *
 *     setAttributes(attribSetters, attribs);
 *
 * Properties of attribs. For each attrib you can add
 * properties:
 *
 * *   type: the type of data in the buffer. Default = gl.FLOAT
 * *   normalize: whether or not to normalize the data. Default = false
 * *   stride: the stride. Default = 0
 * *   offset: offset into the buffer. Default = 0
 * *   divisor: the divisor for instances. Default = undefined
 *
 * For example if you had 3 value float positions, 2 value
 * float texcoord and 4 value uint8 colors you'd setup your
 * attribs like this
 *
 *     const attribs = {
 *       a_position: {buffer: positionBuffer, numComponents: 3},
 *       a_texcoord: {buffer: texcoordBuffer, numComponents: 2},
 *       a_color: {
 *         buffer: colorBuffer,
 *         numComponents: 4,
 *         type: gl.UNSIGNED_BYTE,
 *         normalize: true,
 *       },
 *     };
 *
 * @param {Object.<string, function>} setters Attribute setters as returned from createAttributeSetters
 * @param {Object.<string, module:twgl.AttribInfo>} buffers AttribInfos mapped by attribute name.
 * @memberOf module:twgl/programs
 * @deprecated use {@link module:twgl.setBuffersAndAttributes}
 */
function setAttributes(setters, buffers) {
  for (const name in buffers) {
    const setter = setters[name];
    if (setter) {
      setter(buffers[name]);
    }
  }
}

/**
 * Sets attributes and buffers including the `ELEMENT_ARRAY_BUFFER` if appropriate
 *
 * Example:
 *
 *     const programInfo = createProgramInfo(
 *         gl, ["some-vs", "some-fs");
 *
 *     const arrays = {
 *       position: { numComponents: 3, data: [0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0], },
 *       texcoord: { numComponents: 2, data: [0, 0, 0, 1, 1, 0, 1, 1],                 },
 *     };
 *
 *     const bufferInfo = createBufferInfoFromArrays(gl, arrays);
 *
 *     gl.useProgram(programInfo.program);
 *
 * This will automatically bind the buffers AND set the
 * attributes.
 *
 *     setBuffersAndAttributes(gl, programInfo, bufferInfo);
 *
 * For the example above it is equivalent to
 *
 *     gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
 *     gl.enableVertexAttribArray(a_positionLocation);
 *     gl.vertexAttribPointer(a_positionLocation, 3, gl.FLOAT, false, 0, 0);
 *     gl.bindBuffer(gl.ARRAY_BUFFER, texcoordBuffer);
 *     gl.enableVertexAttribArray(a_texcoordLocation);
 *     gl.vertexAttribPointer(a_texcoordLocation, 4, gl.FLOAT, false, 0, 0);
 *
 * @param {WebGLRenderingContext} gl A WebGLRenderingContext.
 * @param {(module:twgl.ProgramInfo|Object.<string, function>)} setters A `ProgramInfo` as returned from {@link module:twgl.createProgramInfo} or Attribute setters as returned from {@link module:twgl.createAttributeSetters}
 * @param {(module:twgl.BufferInfo|module:twgl.VertexArrayInfo)} buffers a `BufferInfo` as returned from {@link module:twgl.createBufferInfoFromArrays}.
 *   or a `VertexArrayInfo` as returned from {@link module:twgl.createVertexArrayInfo}
 * @memberOf module:twgl/programs
 */
function setBuffersAndAttributes(gl, programInfo, buffers) {
  if (buffers.vertexArrayObject) {
    gl.bindVertexArray(buffers.vertexArrayObject);
  } else {
    setAttributes(programInfo.attribSetters || programInfo, buffers.attribs);
    if (buffers.indices) {
      gl.bindBuffer(ELEMENT_ARRAY_BUFFER$1, buffers.indices);
    }
  }
}

/**
 * @typedef {Object} ProgramInfo
 * @property {WebGLProgram} program A shader program
 * @property {Object<string, function>} uniformSetters object of setters as returned from createUniformSetters,
 * @property {Object<string, function>} attribSetters object of setters as returned from createAttribSetters,
 * @property {module:twgl.UniformBlockSpec} [uniformBlockSpec] a uniform block spec for making UniformBlockInfos with createUniformBlockInfo etc..
 * @property {Object<string, module:twgl.TransformFeedbackInfo>} [transformFeedbackInfo] info for transform feedbacks
 * @memberOf module:twgl
 */

/**
 * Creates a ProgramInfo from an existing program.
 *
 * A ProgramInfo contains
 *
 *     programInfo = {
 *        program: WebGLProgram,
 *        uniformSetters: object of setters as returned from createUniformSetters,
 *        attribSetters: object of setters as returned from createAttribSetters,
 *     }
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext
 *        to use.
 * @param {WebGLProgram} program an existing WebGLProgram.
 * @return {module:twgl.ProgramInfo} The created ProgramInfo.
 * @memberOf module:twgl/programs
 */
function createProgramInfoFromProgram(gl, program) {
  const uniformSetters = createUniformSetters(gl, program);
  const attribSetters = createAttributeSetters(gl, program);
  const programInfo = {
    program,
    uniformSetters,
    attribSetters,
  };

  if (isWebGL2(gl)) {
    programInfo.uniformBlockSpec = createUniformBlockSpecFromProgram(gl, program);
    programInfo.transformFeedbackInfo = createTransformFeedbackInfo(gl, program);
  }

  return programInfo;
}

/**
 * Creates a ProgramInfo from 2 sources.
 *
 * A ProgramInfo contains
 *
 *     programInfo = {
 *        program: WebGLProgram,
 *        uniformSetters: object of setters as returned from createUniformSetters,
 *        attribSetters: object of setters as returned from createAttribSetters,
 *     }
 *
 * NOTE: There are 4 signatures for this function
 *
 *     twgl.createProgramInfo(gl, [vs, fs], options);
 *     twgl.createProgramInfo(gl, [vs, fs], opt_errFunc);
 *     twgl.createProgramInfo(gl, [vs, fs], opt_attribs, opt_errFunc);
 *     twgl.createProgramInfo(gl, [vs, fs], opt_attribs, opt_locations, opt_errFunc);
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext
 *        to use.
 * @param {string[]} shaderSources Array of sources for the
 *        shaders or ids. The first is assumed to be the vertex shader,
 *        the second the fragment shader.
 * @param {module:twgl.ProgramOptions|string[]|module:twgl.ErrorCallback} [opt_attribs] Options for the program or an array of attribs names or an error callback. Locations will be assigned by index if not passed in
 * @param {number[]} [opt_locations|module:twgl.ErrorCallback] The locations for the. A parallel array to opt_attribs letting you assign locations or an error callback.
 * @param {module:twgl.ErrorCallback} [opt_errorCallback] callback for errors. By default it just prints an error to the console
 *        on error. If you want something else pass an callback. It's passed an error message.
 * @return {module:twgl.ProgramInfo?} The created ProgramInfo or null if it failed to link or compile
 * @memberOf module:twgl/programs
 */
function createProgramInfo(
    gl, shaderSources, opt_attribs, opt_locations, opt_errorCallback) {
  const progOptions = getProgramOptions(opt_attribs, opt_locations, opt_errorCallback);
  let good = true;
  shaderSources = shaderSources.map(function(source) {
    // Lets assume if there is no \n it's an id
    if (source.indexOf("\n") < 0) {
      const script = getElementById(source);
      if (!script) {
        progOptions.errorCallback("no element with id: " + source);
        good = false;
      } else {
        source = script.text;
      }
    }
    return source;
  });
  if (!good) {
    return null;
  }
  const program = createProgramFromSources(gl, shaderSources, progOptions);
  if (!program) {
    return null;
  }
  return createProgramInfoFromProgram(gl, program);
}

var programs = /*#__PURE__*/Object.freeze({
  __proto__: null,
  createAttributeSetters: createAttributeSetters,
  createProgram: createProgram,
  createProgramFromScripts: createProgramFromScripts,
  createProgramFromSources: createProgramFromSources,
  createProgramInfo: createProgramInfo,
  createProgramInfoFromProgram: createProgramInfoFromProgram,
  createUniformSetters: createUniformSetters,
  createUniformBlockSpecFromProgram: createUniformBlockSpecFromProgram,
  createUniformBlockInfoFromProgram: createUniformBlockInfoFromProgram,
  createUniformBlockInfo: createUniformBlockInfo,
  createTransformFeedback: createTransformFeedback,
  createTransformFeedbackInfo: createTransformFeedbackInfo,
  bindTransformFeedbackInfo: bindTransformFeedbackInfo,
  setAttributes: setAttributes,
  setBuffersAndAttributes: setBuffersAndAttributes,
  setUniforms: setUniforms,
  setUniformsAndBindTextures: setUniformsAndBindTextures,
  setUniformBlock: setUniformBlock,
  setBlockUniforms: setBlockUniforms,
  bindUniformBlock: bindUniformBlock
});

/*
 * Copyright 2019 Gregg Tavares
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS IN THE SOFTWARE.
 */

const TRIANGLES                      = 0x0004;
const UNSIGNED_SHORT$3                 = 0x1403;

/**
 * Drawing related functions
 *
 * For backward compatibility they are available at both `twgl.draw` and `twgl`
 * itself
 *
 * See {@link module:twgl} for core functions
 *
 * @module twgl/draw
 */

/**
 * Calls `gl.drawElements` or `gl.drawArrays`, whichever is appropriate
 *
 * normally you'd call `gl.drawElements` or `gl.drawArrays` yourself
 * but calling this means if you switch from indexed data to non-indexed
 * data you don't have to remember to update your draw call.
 *
 * @param {WebGLRenderingContext} gl A WebGLRenderingContext
 * @param {(module:twgl.BufferInfo|module:twgl.VertexArrayInfo)} bufferInfo A BufferInfo as returned from {@link module:twgl.createBufferInfoFromArrays} or
 *   a VertexArrayInfo as returned from {@link module:twgl.createVertexArrayInfo}
 * @param {number} [type] eg (gl.TRIANGLES, gl.LINES, gl.POINTS, gl.TRIANGLE_STRIP, ...). Defaults to `gl.TRIANGLES`
 * @param {number} [count] An optional count. Defaults to bufferInfo.numElements
 * @param {number} [offset] An optional offset. Defaults to 0.
 * @param {number} [instanceCount] An optional instanceCount. if set then `drawArraysInstanced` or `drawElementsInstanced` will be called
 * @memberOf module:twgl/draw
 */
function drawBufferInfo(gl, bufferInfo, type, count, offset, instanceCount) {
  type = type === undefined ? TRIANGLES : type;
  const indices = bufferInfo.indices;
  const elementType = bufferInfo.elementType;
  const numElements = count === undefined ? bufferInfo.numElements : count;
  offset = offset === undefined ? 0 : offset;
  if (elementType || indices) {
    if (instanceCount !== undefined) {
      gl.drawElementsInstanced(type, numElements, elementType === undefined ? UNSIGNED_SHORT$3 : bufferInfo.elementType, offset, instanceCount);
    } else {
      gl.drawElements(type, numElements, elementType === undefined ? UNSIGNED_SHORT$3 : bufferInfo.elementType, offset);
    }
  } else {
    if (instanceCount !== undefined) {
      gl.drawArraysInstanced(type, offset, numElements, instanceCount);
    } else {
      gl.drawArrays(type, offset, numElements);
    }
  }
}

/**
 * A DrawObject is useful for putting objects in to an array and passing them to {@link module:twgl.drawObjectList}.
 *
 * You need either a `BufferInfo` or a `VertexArrayInfo`.
 *
 * @typedef {Object} DrawObject
 * @property {boolean} [active] whether or not to draw. Default = `true` (must be `false` to be not true). In other words `undefined` = `true`
 * @property {number} [type] type to draw eg. `gl.TRIANGLES`, `gl.LINES`, etc...
 * @property {module:twgl.ProgramInfo} programInfo A ProgramInfo as returned from {@link module:twgl.createProgramInfo}
 * @property {module:twgl.BufferInfo} [bufferInfo] A BufferInfo as returned from {@link module:twgl.createBufferInfoFromArrays}
 * @property {module:twgl.VertexArrayInfo} [vertexArrayInfo] A VertexArrayInfo as returned from {@link module:twgl.createVertexArrayInfo}
 * @property {Object<string, ?>} uniforms The values for the uniforms.
 *   You can pass multiple objects by putting them in an array. For example
 *
 *     var sharedUniforms = {
 *       u_fogNear: 10,
 *       u_projection: ...
 *       ...
 *     };
 *
 *     var localUniforms = {
 *       u_world: ...
 *       u_diffuseColor: ...
 *     };
 *
 *     var drawObj = {
 *       ...
 *       uniforms: [sharedUniforms, localUniforms],
 *     };
 *
 * @property {number} [offset] the offset to pass to `gl.drawArrays` or `gl.drawElements`. Defaults to 0.
 * @property {number} [count] the count to pass to `gl.drawArrays` or `gl.drawElements`. Defaults to bufferInfo.numElements.
 * @property {number} [instanceCount] the number of instances. Defaults to undefined.
 * @memberOf module:twgl
 */

/**
 * Draws a list of objects
 * @param {WebGLRenderingContext} gl A WebGLRenderingContext
 * @param {DrawObject[]} objectsToDraw an array of objects to draw.
 * @memberOf module:twgl/draw
 */
function drawObjectList(gl, objectsToDraw) {
  let lastUsedProgramInfo = null;
  let lastUsedBufferInfo = null;

  objectsToDraw.forEach(function(object) {
    if (object.active === false) {
      return;
    }

    const programInfo = object.programInfo;
    const bufferInfo = object.vertexArrayInfo || object.bufferInfo;
    let bindBuffers = false;
    const type = object.type === undefined ? TRIANGLES : object.type;

    if (programInfo !== lastUsedProgramInfo) {
      lastUsedProgramInfo = programInfo;
      gl.useProgram(programInfo.program);

      // We have to rebind buffers when changing programs because we
      // only bind buffers the program uses. So if 2 programs use the same
      // bufferInfo but the 1st one uses only positions the when the
      // we switch to the 2nd one some of the attributes will not be on.
      bindBuffers = true;
    }

    // Setup all the needed attributes.
    if (bindBuffers || bufferInfo !== lastUsedBufferInfo) {
      if (lastUsedBufferInfo && lastUsedBufferInfo.vertexArrayObject && !bufferInfo.vertexArrayObject) {
        gl.bindVertexArray(null);
      }
      lastUsedBufferInfo = bufferInfo;
      setBuffersAndAttributes(gl, programInfo, bufferInfo);
    }

    // Set the uniforms.
    setUniforms(programInfo, object.uniforms);

    // Draw
    drawBufferInfo(gl, bufferInfo, type, object.count, object.offset, object.instanceCount);
  });

  if (lastUsedBufferInfo && lastUsedBufferInfo.vertexArrayObject) {
    gl.bindVertexArray(null);
  }
}

var draw = /*#__PURE__*/Object.freeze({
  __proto__: null,
  drawBufferInfo: drawBufferInfo,
  drawObjectList: drawObjectList
});

/*
 * Copyright 2019 Gregg Tavares
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS IN THE SOFTWARE.
 */

const FRAMEBUFFER                    = 0x8d40;
const RENDERBUFFER                   = 0x8d41;
const TEXTURE_2D$2                     = 0x0de1;

const UNSIGNED_BYTE$3                  = 0x1401;

/* PixelFormat */
const DEPTH_COMPONENT$1                = 0x1902;
const RGBA$1                           = 0x1908;
const DEPTH_COMPONENT24$1              = 0x81a6;
const DEPTH_COMPONENT32F$1             = 0x8cac;
const DEPTH24_STENCIL8$1               = 0x88f0;
const DEPTH32F_STENCIL8$1              = 0x8cad;

/* Framebuffer Object. */
const RGBA4$1                          = 0x8056;
const RGB5_A1$1                        = 0x8057;
const RGB565$1                         = 0x8D62;
const DEPTH_COMPONENT16$1              = 0x81A5;
const STENCIL_INDEX                  = 0x1901;
const STENCIL_INDEX8                 = 0x8D48;
const DEPTH_STENCIL$1                  = 0x84F9;
const COLOR_ATTACHMENT0              = 0x8CE0;
const DEPTH_ATTACHMENT               = 0x8D00;
const STENCIL_ATTACHMENT             = 0x8D20;
const DEPTH_STENCIL_ATTACHMENT       = 0x821A;

/* TextureWrapMode */
const CLAMP_TO_EDGE$1                  = 0x812F;

/* TextureMagFilter */
const LINEAR$1                         = 0x2601;

/**
 * The options for a framebuffer attachment.
 *
 * Note: For a `format` that is a texture include all the texture
 * options from {@link module:twgl.TextureOptions} for example
 * `min`, `mag`, `clamp`, etc... Note that unlike {@link module:twgl.TextureOptions}
 * `auto` defaults to `false` for attachment textures but `min` and `mag` default
 * to `gl.LINEAR` and `wrap` defaults to `CLAMP_TO_EDGE`
 *
 * @typedef {Object} AttachmentOptions
 * @property {number} [attachmentPoint] The attachment point. Defaults
 *   to `gl.COLOR_ATTACHMENT0 + ndx` unless type is a depth or stencil type
 *   then it's gl.DEPTH_ATTACHMENT or `gl.DEPTH_STENCIL_ATTACHMENT` depending
 *   on the format or attachment type.
 * @property {number} [format] The format. If one of `gl.RGBA4`,
 *   `gl.RGB565`, `gl.RGB5_A1`, `gl.DEPTH_COMPONENT16`,
 *   `gl.STENCIL_INDEX8` or `gl.DEPTH_STENCIL` then will create a
 *   renderbuffer. Otherwise will create a texture. Default = `gl.RGBA`
 * @property {number} [type] The type. Used for texture. Default = `gl.UNSIGNED_BYTE`.
 * @property {number} [target] The texture target for `gl.framebufferTexture2D`.
 *   Defaults to `gl.TEXTURE_2D`. Set to appropriate face for cube maps.
 * @property {number} [level] level for `gl.framebufferTexture2D`. Defaults to 0.
 * @property {number} [layer] layer for `gl.framebufferTextureLayer`. Defaults to undefined.
 *   If set then `gl.framebufferTextureLayer` is called, if not then `gl.framebufferTexture2D`
 * @property {(WebGLRenderbuffer | WebGLTexture)} [attachment] An existing renderbuffer or texture.
 *    If provided will attach this Object. This allows you to share
 *    attachments across framebuffers.
 * @memberOf module:twgl
 * @mixes module:twgl.TextureOptions
 */

const defaultAttachments = [
  { format: RGBA$1, type: UNSIGNED_BYTE$3, min: LINEAR$1, wrap: CLAMP_TO_EDGE$1, },
  { format: DEPTH_STENCIL$1, },
];

const attachmentsByFormat = {};
attachmentsByFormat[DEPTH_STENCIL$1] = DEPTH_STENCIL_ATTACHMENT;
attachmentsByFormat[STENCIL_INDEX] = STENCIL_ATTACHMENT;
attachmentsByFormat[STENCIL_INDEX8] = STENCIL_ATTACHMENT;
attachmentsByFormat[DEPTH_COMPONENT$1] = DEPTH_ATTACHMENT;
attachmentsByFormat[DEPTH_COMPONENT16$1] = DEPTH_ATTACHMENT;
attachmentsByFormat[DEPTH_COMPONENT24$1] = DEPTH_ATTACHMENT;
attachmentsByFormat[DEPTH_COMPONENT32F$1] = DEPTH_ATTACHMENT;
attachmentsByFormat[DEPTH24_STENCIL8$1] = DEPTH_STENCIL_ATTACHMENT;
attachmentsByFormat[DEPTH32F_STENCIL8$1] = DEPTH_STENCIL_ATTACHMENT;

function getAttachmentPointForFormat(format, internalFormat) {
  return attachmentsByFormat[format] || attachmentsByFormat[internalFormat];
}

const renderbufferFormats = {};
renderbufferFormats[RGBA4$1] = true;
renderbufferFormats[RGB5_A1$1] = true;
renderbufferFormats[RGB565$1] = true;
renderbufferFormats[DEPTH_STENCIL$1] = true;
renderbufferFormats[DEPTH_COMPONENT16$1] = true;
renderbufferFormats[STENCIL_INDEX] = true;
renderbufferFormats[STENCIL_INDEX8] = true;

function isRenderbufferFormat(format) {
  return renderbufferFormats[format];
}

/**
 * @typedef {Object} FramebufferInfo
 * @property {WebGLFramebuffer} framebuffer The WebGLFramebuffer for this framebufferInfo
 * @property {Array.<(WebGLRenderbuffer | WebGLTexture)>} attachments The created attachments in the same order as passed in to {@link module:twgl.createFramebufferInfo}.
 * @property {number} width The width of the framebuffer and its attachments
 * @property {number} height The width of the framebuffer and its attachments
 * @memberOf module:twgl
 */

/**
 * Creates a framebuffer and attachments.
 *
 * This returns a {@link module:twgl.FramebufferInfo} because it needs to return the attachments as well as the framebuffer.
 *
 * The simplest usage
 *
 *     // create an RGBA/UNSIGNED_BYTE texture and DEPTH_STENCIL renderbuffer
 *     const fbi = twgl.createFramebufferInfo(gl);
 *
 * More complex usage
 *
 *     // create an RGB565 renderbuffer and a STENCIL_INDEX8 renderbuffer
 *     const attachments = [
 *       { format: RGB565, mag: NEAREST },
 *       { format: STENCIL_INDEX8 },
 *     ]
 *     const fbi = twgl.createFramebufferInfo(gl, attachments);
 *
 * Passing in a specific size
 *
 *     const width = 256;
 *     const height = 256;
 *     const fbi = twgl.createFramebufferInfo(gl, attachments, width, height);
 *
 * **Note!!** It is up to you to check if the framebuffer is renderable by calling `gl.checkFramebufferStatus`.
 * [WebGL1 only guarantees 3 combinations of attachments work](https://www.khronos.org/registry/webgl/specs/latest/1.0/#6.6).
 *
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @param {module:twgl.AttachmentOptions[]} [attachments] which attachments to create. If not provided the default is a framebuffer with an
 *    `RGBA`, `UNSIGNED_BYTE` texture `COLOR_ATTACHMENT0` and a `DEPTH_STENCIL` renderbuffer `DEPTH_STENCIL_ATTACHMENT`.
 * @param {number} [width] the width for the attachments. Default = size of drawingBuffer
 * @param {number} [height] the height for the attachments. Default = size of drawingBuffer
 * @return {module:twgl.FramebufferInfo} the framebuffer and attachments.
 * @memberOf module:twgl/framebuffers
 */
function createFramebufferInfo(gl, attachments, width, height) {
  const target = FRAMEBUFFER;
  const fb = gl.createFramebuffer();
  gl.bindFramebuffer(target, fb);
  width  = width  || gl.drawingBufferWidth;
  height = height || gl.drawingBufferHeight;
  attachments = attachments || defaultAttachments;
  let colorAttachmentCount = 0;
  const framebufferInfo = {
    framebuffer: fb,
    attachments: [],
    width: width,
    height: height,
  };
  attachments.forEach(function(attachmentOptions) {
    let attachment = attachmentOptions.attachment;
    const format = attachmentOptions.format;
    let attachmentPoint = attachmentOptions.attachmentPoint || getAttachmentPointForFormat(format, attachmentOptions.internalFormat);
    if (!attachmentPoint) {
      attachmentPoint = COLOR_ATTACHMENT0 + colorAttachmentCount++;
    }
    if (!attachment) {
      if (isRenderbufferFormat(format)) {
        attachment = gl.createRenderbuffer();
        gl.bindRenderbuffer(RENDERBUFFER, attachment);
        gl.renderbufferStorage(RENDERBUFFER, format, width, height);
      } else {
        const textureOptions = Object.assign({}, attachmentOptions);
        textureOptions.width = width;
        textureOptions.height = height;
        if (textureOptions.auto === undefined) {
          textureOptions.auto = false;
          textureOptions.min = textureOptions.min || textureOptions.minMag || LINEAR$1;
          textureOptions.mag = textureOptions.mag || textureOptions.minMag || LINEAR$1;
          textureOptions.wrapS = textureOptions.wrapS || textureOptions.wrap || CLAMP_TO_EDGE$1;
          textureOptions.wrapT = textureOptions.wrapT || textureOptions.wrap || CLAMP_TO_EDGE$1;
        }
        attachment = createTexture(gl, textureOptions);
      }
    }
    if (isRenderbuffer(gl, attachment)) {
      gl.framebufferRenderbuffer(target, attachmentPoint, RENDERBUFFER, attachment);
    } else if (isTexture(gl, attachment)) {
      if (attachmentOptions.layer !== undefined) {
        gl.framebufferTextureLayer(
          target,
          attachmentPoint,
          attachment,
          attachmentOptions.level || 0,
          attachmentOptions.layer);
      } else {
        gl.framebufferTexture2D(
            target,
            attachmentPoint,
            attachmentOptions.target || TEXTURE_2D$2,
            attachment,
            attachmentOptions.level || 0);
      }
    } else {
      throw new Error('unknown attachment type');
    }
    framebufferInfo.attachments.push(attachment);
  });
  return framebufferInfo;
}

/**
 * Resizes the attachments of a framebuffer.
 *
 * You need to pass in the same `attachments` as you passed in {@link module:twgl.createFramebufferInfo}
 * because TWGL has no idea the format/type of each attachment.
 *
 * The simplest usage
 *
 *     // create an RGBA/UNSIGNED_BYTE texture and DEPTH_STENCIL renderbuffer
 *     const fbi = twgl.createFramebufferInfo(gl);
 *
 *     ...
 *
 *     function render() {
 *       if (twgl.resizeCanvasToDisplaySize(gl.canvas)) {
 *         // resize the attachments
 *         twgl.resizeFramebufferInfo(gl, fbi);
 *       }
 *
 * More complex usage
 *
 *     // create an RGB565 renderbuffer and a STENCIL_INDEX8 renderbuffer
 *     const attachments = [
 *       { format: RGB565, mag: NEAREST },
 *       { format: STENCIL_INDEX8 },
 *     ]
 *     const fbi = twgl.createFramebufferInfo(gl, attachments);
 *
 *     ...
 *
 *     function render() {
 *       if (twgl.resizeCanvasToDisplaySize(gl.canvas)) {
 *         // resize the attachments to match
 *         twgl.resizeFramebufferInfo(gl, fbi, attachments);
 *       }
 *
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @param {module:twgl.FramebufferInfo} framebufferInfo a framebufferInfo as returned from {@link module:twgl.createFramebufferInfo}.
 * @param {module:twgl.AttachmentOptions[]} [attachments] the same attachments options as passed to {@link module:twgl.createFramebufferInfo}.
 * @param {number} [width] the width for the attachments. Default = size of drawingBuffer
 * @param {number} [height] the height for the attachments. Default = size of drawingBuffer
 * @memberOf module:twgl/framebuffers
 */
function resizeFramebufferInfo(gl, framebufferInfo, attachments, width, height) {
  width  = width  || gl.drawingBufferWidth;
  height = height || gl.drawingBufferHeight;
  framebufferInfo.width = width;
  framebufferInfo.height = height;
  attachments = attachments || defaultAttachments;
  attachments.forEach(function(attachmentOptions, ndx) {
    const attachment = framebufferInfo.attachments[ndx];
    const format = attachmentOptions.format;
    if (isRenderbuffer(gl, attachment)) {
      gl.bindRenderbuffer(RENDERBUFFER, attachment);
      gl.renderbufferStorage(RENDERBUFFER, format, width, height);
    } else if (isTexture(gl, attachment)) {
      resizeTexture(gl, attachment, attachmentOptions, width, height);
    } else {
      throw new Error('unknown attachment type');
    }
  });
}

/**
 * Binds a framebuffer
 *
 * This function pretty much solely exists because I spent hours
 * trying to figure out why something I wrote wasn't working only
 * to realize I forget to set the viewport dimensions.
 * My hope is this function will fix that.
 *
 * It is effectively the same as
 *
 *     gl.bindFramebuffer(gl.FRAMEBUFFER, someFramebufferInfo.framebuffer);
 *     gl.viewport(0, 0, someFramebufferInfo.width, someFramebufferInfo.height);
 *
 * @param {WebGLRenderingContext} gl the WebGLRenderingContext
 * @param {module:twgl.FramebufferInfo|null} [framebufferInfo] a framebufferInfo as returned from {@link module:twgl.createFramebufferInfo}.
 *   If falsy will bind the canvas.
 * @param {number} [target] The target. If not passed `gl.FRAMEBUFFER` will be used.
 * @memberOf module:twgl/framebuffers
 */

function bindFramebufferInfo(gl, framebufferInfo, target) {
  target = target || FRAMEBUFFER;
  if (framebufferInfo) {
    gl.bindFramebuffer(target, framebufferInfo.framebuffer);
    gl.viewport(0, 0, framebufferInfo.width, framebufferInfo.height);
  } else {
    gl.bindFramebuffer(target, null);
    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);
  }
}

var framebuffers = /*#__PURE__*/Object.freeze({
  __proto__: null,
  bindFramebufferInfo: bindFramebufferInfo,
  createFramebufferInfo: createFramebufferInfo,
  resizeFramebufferInfo: resizeFramebufferInfo
});

/*
 * Copyright 2019 Gregg Tavares
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS IN THE SOFTWARE.
 */

/**
 * vertex array object related functions
 *
 * You should generally not need to use these functions. They are provided
 * for those cases where you're doing something out of the ordinary
 * and you need lower level access.
 *
 * For backward compatibility they are available at both `twgl.attributes` and `twgl`
 * itself
 *
 * See {@link module:twgl} for core functions
 *
 * @module twgl/vertexArrays
 */

const ELEMENT_ARRAY_BUFFER$2           = 0x8893;

/**
 * @typedef {Object} VertexArrayInfo
 * @property {number} numElements The number of elements to pass to `gl.drawArrays` or `gl.drawElements`.
 * @property {number} [elementType] The type of indices `UNSIGNED_BYTE`, `UNSIGNED_SHORT` etc..
 * @property {WebGLVertexArrayObject} [vertexArrayObject] a vertex array object
 * @memberOf module:twgl
 */

/**
 * Creates a VertexArrayInfo from a BufferInfo and one or more ProgramInfos
 *
 * This can be passed to {@link module:twgl.setBuffersAndAttributes} and to
 * {@link module:twgl:drawBufferInfo}.
 *
 * > **IMPORTANT:** Vertex Array Objects are **not** a direct analog for a BufferInfo. Vertex Array Objects
 *   assign buffers to specific attributes at creation time. That means they can only be used with programs
 *   who's attributes use the same attribute locations for the same purposes.
 *
 * > Bind your attribute locations by passing an array of attribute names to {@link module:twgl.createProgramInfo}
 *   or use WebGL 2's GLSL ES 3's `layout(location = <num>)` to make sure locations match.
 *
 * also
 *
 * > **IMPORTANT:** After calling twgl.setBuffersAndAttribute with a BufferInfo that uses a Vertex Array Object
 *   that Vertex Array Object will be bound. That means **ANY MANIPULATION OF ELEMENT_ARRAY_BUFFER or ATTRIBUTES**
 *   will affect the Vertex Array Object state.
 *
 * > Call `gl.bindVertexArray(null)` to get back manipulating the global attributes and ELEMENT_ARRAY_BUFFER.
 *
 * @param {WebGLRenderingContext} gl A WebGLRenderingContext
 * @param {module:twgl.ProgramInfo|module:twgl.ProgramInfo[]} programInfo a programInfo or array of programInfos
 * @param {module:twgl.BufferInfo} bufferInfo BufferInfo as returned from createBufferInfoFromArrays etc...
 *
 *    You need to make sure every attribute that will be used is bound. So for example assume shader 1
 *    uses attributes A, B, C and shader 2 uses attributes A, B, D. If you only pass in the programInfo
 *    for shader 1 then only attributes A, B, and C will have their attributes set because TWGL doesn't
 *    now attribute D's location.
 *
 *    So, you can pass in both shader 1 and shader 2's programInfo
 *
 * @return {module:twgl.VertexArrayInfo} The created VertexArrayInfo
 *
 * @memberOf module:twgl/vertexArrays
 */
function createVertexArrayInfo(gl, programInfos, bufferInfo) {
  const vao = gl.createVertexArray();
  gl.bindVertexArray(vao);
  if (!programInfos.length) {
    programInfos = [programInfos];
  }
  programInfos.forEach(function(programInfo) {
    setBuffersAndAttributes(gl, programInfo, bufferInfo);
  });
  gl.bindVertexArray(null);
  return {
    numElements: bufferInfo.numElements,
    elementType: bufferInfo.elementType,
    vertexArrayObject: vao,
  };
}

/**
 * Creates a vertex array object and then sets the attributes on it
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.
 * @param {Object.<string, function>} setters Attribute setters as returned from createAttributeSetters
 * @param {Object.<string, module:twgl.AttribInfo>} attribs AttribInfos mapped by attribute name.
 * @param {WebGLBuffer} [indices] an optional ELEMENT_ARRAY_BUFFER of indices
 * @memberOf module:twgl/vertexArrays
 */
function createVAOAndSetAttributes(gl, setters, attribs, indices) {
  const vao = gl.createVertexArray();
  gl.bindVertexArray(vao);
  setAttributes(setters, attribs);
  if (indices) {
    gl.bindBuffer(ELEMENT_ARRAY_BUFFER$2, indices);
  }
  // We unbind this because otherwise any change to ELEMENT_ARRAY_BUFFER
  // like when creating buffers for other stuff will mess up this VAO's binding
  gl.bindVertexArray(null);
  return vao;
}

/**
 * Creates a vertex array object and then sets the attributes
 * on it
 *
 * @param {WebGLRenderingContext} gl The WebGLRenderingContext
 *        to use.
 * @param {Object.<string, function>| module:twgl.ProgramInfo} programInfo as returned from createProgramInfo or Attribute setters as returned from createAttributeSetters
 * @param {module:twgl.BufferInfo} bufferInfo BufferInfo as returned from createBufferInfoFromArrays etc...
 * @param {WebGLBuffer} [indices] an optional ELEMENT_ARRAY_BUFFER of indices
 * @memberOf module:twgl/vertexArrays
 */
function createVAOFromBufferInfo(gl, programInfo, bufferInfo) {
  return createVAOAndSetAttributes(gl, programInfo.attribSetters || programInfo, bufferInfo.attribs, bufferInfo.indices);
}

var vertexArrays = /*#__PURE__*/Object.freeze({
  __proto__: null,
  createVertexArrayInfo: createVertexArrayInfo,
  createVAOAndSetAttributes: createVAOAndSetAttributes,
  createVAOFromBufferInfo: createVAOFromBufferInfo
});

/*
 * Copyright 2019 Gregg Tavares
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS IN THE SOFTWARE.
 */
const defaults$2 = {
  addExtensionsToContext: true,
};

/**
 * Various default settings for twgl.
 *
 * Note: You can call this any number of times. Example:
 *
 *     twgl.setDefaults({ textureColor: [1, 0, 0, 1] });
 *     twgl.setDefaults({ attribPrefix: 'a_' });
 *
 * is equivalent to
 *
 *     twgl.setDefaults({
 *       textureColor: [1, 0, 0, 1],
 *       attribPrefix: 'a_',
 *     });
 *
 * @typedef {Object} Defaults
 * @property {string} [attribPrefix] The prefix to stick on attributes
 *
 *   When writing shaders I prefer to name attributes with `a_`, uniforms with `u_` and varyings with `v_`
 *   as it makes it clear where they came from. But, when building geometry I prefer using un-prefixed names.
 *
 *   In other words I'll create arrays of geometry like this
 *
 *       const arrays = {
 *         position: ...
 *         normal: ...
 *         texcoord: ...
 *       };
 *
 *   But need those mapped to attributes and my attributes start with `a_`.
 *
 *   Default: `""`
 *
 * @property {number[]} [textureColor] Array of 4 values in the range 0 to 1
 *
 *   The default texture color is used when loading textures from
 *   urls. Because the URL will be loaded async we'd like to be
 *   able to use the texture immediately. By putting a 1x1 pixel
 *   color in the texture we can start using the texture before
 *   the URL has loaded.
 *
 *   Default: `[0.5, 0.75, 1, 1]`
 *
 * @property {string} [crossOrigin]
 *
 *   If not undefined sets the crossOrigin attribute on images
 *   that twgl creates when downloading images for textures.
 *
 *   Also see {@link module:twgl.TextureOptions}.
 *
 * @property {bool} [addExtensionsToContext]
 *
 *   If true, then, when twgl will try to add any supported WebGL extensions
 *   directly to the context under their normal GL names. For example
 *   if ANGLE_instances_arrays exists then twgl would enable it,
 *   add the functions `vertexAttribDivisor`, `drawArraysInstanced`,
 *   `drawElementsInstanced`, and the constant `VERTEX_ATTRIB_ARRAY_DIVISOR`
 *   to the `WebGLRenderingContext`.
 *
 * @memberOf module:twgl
 */

/**
 * Sets various defaults for twgl.
 *
 * In the interest of terseness which is kind of the point
 * of twgl I've integrated a few of the older functions here
 *
 * @param {module:twgl.Defaults} newDefaults The default settings.
 * @memberOf module:twgl
 */
function setDefaults$2(newDefaults) {
  copyExistingProperties(newDefaults, defaults$2);
  setDefaults(newDefaults);  // eslint-disable-line
  setDefaults$1(newDefaults);  // eslint-disable-line
}

const prefixRE = /^(.*?)_/;
function addExtensionToContext(gl, extensionName) {
  glEnumToString(gl, 0);
  const ext = gl.getExtension(extensionName);
  if (ext) {
    const enums = {};
    const fnSuffix = prefixRE.exec(extensionName)[1];
    const enumSuffix = '_' + fnSuffix;
    for (const key in ext) {
      const value = ext[key];
      const isFunc = typeof (value) === 'function';
      const suffix = isFunc ? fnSuffix : enumSuffix;
      let name = key;
      // examples of where this is not true are WEBGL_compressed_texture_s3tc
      // and WEBGL_compressed_texture_pvrtc
      if (key.endsWith(suffix)) {
        name = key.substring(0, key.length - suffix.length);
      }
      if (gl[name] !== undefined) {
        if (!isFunc && gl[name] !== value) {
          warn(name, gl[name], value, key);
        }
      } else {
        if (isFunc) {
          gl[name] = function(origFn) {
            return function() {
              return origFn.apply(ext, arguments);
            };
          }(value);
        } else {
          gl[name] = value;
          enums[name] = value;
        }
      }
    }
    // pass the modified enums to glEnumToString
    enums.constructor = {
      name: ext.constructor.name,
    };
    glEnumToString(enums, 0);
  }
  return ext;
}

/*
 * If you're wondering why the code doesn't just iterate
 * over all extensions using `gl.getExtensions` is that it's possible
 * some future extension is incompatible with this code. Rather than
 * have thing suddenly break it seems better to manually add to this
 * list.
 *
 */
const supportedExtensions = [
  'ANGLE_instanced_arrays',
  'EXT_blend_minmax',
  'EXT_color_buffer_float',
  'EXT_color_buffer_half_float',
  'EXT_disjoint_timer_query',
  'EXT_disjoint_timer_query_webgl2',
  'EXT_frag_depth',
  'EXT_sRGB',
  'EXT_shader_texture_lod',
  'EXT_texture_filter_anisotropic',
  'OES_element_index_uint',
  'OES_standard_derivatives',
  'OES_texture_float',
  'OES_texture_float_linear',
  'OES_texture_half_float',
  'OES_texture_half_float_linear',
  'OES_vertex_array_object',
  'WEBGL_color_buffer_float',
  'WEBGL_compressed_texture_atc',
  'WEBGL_compressed_texture_etc1',
  'WEBGL_compressed_texture_pvrtc',
  'WEBGL_compressed_texture_s3tc',
  'WEBGL_compressed_texture_s3tc_srgb',
  'WEBGL_depth_texture',
  'WEBGL_draw_buffers',
];

/**
 * Attempts to enable all of the following extensions
 * and add their functions and constants to the
 * `WebGLRenderingContext` using their normal non-extension like names.
 *
 *      ANGLE_instanced_arrays
 *      EXT_blend_minmax
 *      EXT_color_buffer_float
 *      EXT_color_buffer_half_float
 *      EXT_disjoint_timer_query
 *      EXT_disjoint_timer_query_webgl2
 *      EXT_frag_depth
 *      EXT_sRGB
 *      EXT_shader_texture_lod
 *      EXT_texture_filter_anisotropic
 *      OES_element_index_uint
 *      OES_standard_derivatives
 *      OES_texture_float
 *      OES_texture_float_linear
 *      OES_texture_half_float
 *      OES_texture_half_float_linear
 *      OES_vertex_array_object
 *      WEBGL_color_buffer_float
 *      WEBGL_compressed_texture_atc
 *      WEBGL_compressed_texture_etc1
 *      WEBGL_compressed_texture_pvrtc
 *      WEBGL_compressed_texture_s3tc
 *      WEBGL_compressed_texture_s3tc_srgb
 *      WEBGL_depth_texture
 *      WEBGL_draw_buffers
 *
 * For example if `ANGLE_instanced_arrays` exists then the functions
 * `drawArraysInstanced`, `drawElementsInstanced`, `vertexAttribDivisor`
 * and the constant `VERTEX_ATTRIB_ARRAY_DIVISOR` are added to the
 * `WebGLRenderingContext`.
 *
 * Note that if you want to know if the extension exists you should
 * probably call `gl.getExtension` for each extension. Alternatively
 * you can check for the existence of the functions or constants that
 * are expected to be added. For example
 *
 *    if (gl.drawBuffers) {
 *      // Either WEBGL_draw_buffers was enabled OR you're running in WebGL2
 *      ....
 *
 * @param {WebGLRenderingContext} gl A WebGLRenderingContext
 * @memberOf module:twgl
 */
function addExtensionsToContext(gl) {
  for (let ii = 0; ii < supportedExtensions.length; ++ii) {
    addExtensionToContext(gl, supportedExtensions[ii]);
  }
}

/**
 * Creates a webgl context.
 * @param {HTMLCanvasElement} canvas The canvas tag to get
 *     context from. If one is not passed in one will be
 *     created.
 * @return {WebGLRenderingContext} The created context.
 * @private
 */
function create3DContext(canvas, opt_attribs) {
  const names = ["webgl", "experimental-webgl"];
  let context = null;
  for (let ii = 0; ii < names.length; ++ii) {
    context = canvas.getContext(names[ii], opt_attribs);
    if (context) {
      if (defaults$2.addExtensionsToContext) {
        addExtensionsToContext(context);
      }
      break;
    }
  }
  return context;
}

/**
 * Gets a WebGL1 context.
 *
 * Note: Will attempt to enable Vertex Array Objects
 * and add WebGL2 entry points. (unless you first set defaults with
 * `twgl.setDefaults({enableVertexArrayObjects: false})`;
 *
 * @param {HTMLCanvasElement} canvas a canvas element.
 * @param {WebGLContextAttributes} [opt_attribs] optional webgl context creation attributes
 * @return {WebGLRenderingContext} The created context.
 * @memberOf module:twgl
 */
function getWebGLContext(canvas, opt_attribs) {
  const gl = create3DContext(canvas, opt_attribs);
  return gl;
}

/**
 * Creates a webgl context.
 *
 * Will return a WebGL2 context if possible.
 *
 * You can check if it's WebGL2 with
 *
 *     twgl.isWebGL2(gl);
 *
 * @param {HTMLCanvasElement} canvas The canvas tag to get
 *     context from. If one is not passed in one will be
 *     created.
 * @return {WebGLRenderingContext} The created context.
 */
function createContext(canvas, opt_attribs) {
  const names = ["webgl2", "webgl", "experimental-webgl"];
  let context = null;
  for (let ii = 0; ii < names.length; ++ii) {
    context = canvas.getContext(names[ii], opt_attribs);
    if (context) {
      if (defaults$2.addExtensionsToContext) {
        addExtensionsToContext(context);
      }
      break;
    }
  }
  return context;
}

/**
 * Gets a WebGL context.  Will create a WebGL2 context if possible.
 *
 * You can check if it's WebGL2 with
 *
 *    function isWebGL2(gl) {
 *      return gl.getParameter(gl.VERSION).indexOf("WebGL 2.0 ") == 0;
 *    }
 *
 * Note: For a WebGL1 context will attempt to enable Vertex Array Objects
 * and add WebGL2 entry points. (unless you first set defaults with
 * `twgl.setDefaults({enableVertexArrayObjects: false})`;
 *
 * @param {HTMLCanvasElement} canvas a canvas element.
 * @param {WebGLContextAttributes} [opt_attribs] optional webgl context creation attributes
 * @return {WebGLRenderingContext} The created context.
 * @memberOf module:twgl
 */
function getContext(canvas, opt_attribs) {
  const gl = createContext(canvas, opt_attribs);
  return gl;
}

/**
 * Resize a canvas to match the size it's displayed.
 * @param {HTMLCanvasElement} canvas The canvas to resize.
 * @param {number} [multiplier] So you can pass in `window.devicePixelRatio` or other scale value if you want to.
 * @return {boolean} true if the canvas was resized.
 * @memberOf module:twgl
 */
function resizeCanvasToDisplaySize(canvas, multiplier) {
  multiplier = multiplier || 1;
  multiplier = Math.max(0, multiplier);
  const width  = canvas.clientWidth  * multiplier | 0;
  const height = canvas.clientHeight * multiplier | 0;
  if (canvas.width !== width || canvas.height !== height) {
    canvas.width = width;
    canvas.height = height;
    return true;
  }
  return false;
}




/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!*************************************!*\
  !*** ./games/Avalonika/src/main.js ***!
  \*************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @engine/flatfast */ "./engine/src/flatfast.js");
/* harmony import */ var _lib_iconPack__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @lib/iconPack */ "./engine/src/lib/iconPack.js");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./config */ "./games/Avalonika/src/config.js");
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./global */ "./games/Avalonika/src/global.js");
/* harmony import */ var _world_world__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./world/world */ "./games/Avalonika/src/world/world.js");
/* harmony import */ var _world_gameMap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./world/gameMap */ "./games/Avalonika/src/world/gameMap.js");
/* harmony import */ var _entity_player__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./entity/player */ "./games/Avalonika/src/entity/player.js");
/* harmony import */ var _entity_pet__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./entity/pet */ "./games/Avalonika/src/entity/pet.js");
/* harmony import */ var _entity_npc__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./entity/npc */ "./games/Avalonika/src/entity/npc.js");
/* harmony import */ var _entity_item__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./entity/item */ "./games/Avalonika/src/entity/item.js");
/* harmony import */ var _interface_interface__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./interface/interface */ "./games/Avalonika/src/interface/interface.js");
/* harmony import */ var _saveLoad__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./saveLoad */ "./games/Avalonika/src/saveLoad.js");
/* harmony import */ var _lib_random__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @lib/random */ "./engine/src/lib/random.js");
/* harmony import */ var _entity_entityComponents__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./entity/entityComponents */ "./games/Avalonika/src/entity/entityComponents.js");
//flatfast.init(360, 640);

// Application.init( { logicalWidth: 180,logicalHeight: 320 } );
_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.init( 180,320 ,60,_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Application.ScaleModes.LETTERBOX );


        

















// gui.add( application.logicalViewport, "width" );
// gui.add( application.logicalViewport, "height" );


// _accelerometer = new Accelerometer();
// _accelerometer.start();

_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.setBackgroundColor( 0x000000 );
//GLOBAL.stage = ScaledStage.new(720 / 3.5, 1280 / 3.5, true)
_global__WEBPACK_IMPORTED_MODULE_3__["default"].stage = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.stage;//new ScaledStage(750 / 4, 1334 / 4);// , true)
//GLOBAL.stage = ScaledStage.new(750 / 2, 1334 / 2)// , true)
// GLOBAL.stage.setFullScreen(true);
// GLOBAL.stage.addToStage();
// GLOBAL.stage.setScanline(true);
//TODO:
//GLOBAL.console = new DebugConsole(Interface.uiTtf);

// GLOBAL.world = null;
// GLOBAL.player = null;
// GLOBAL.interface = null;
// GLOBAL.saveLoad = null;


// let tm = new TileMap(10, 10, new Texture("tile.png"), 16, 24, 0, 0, 0, 0, 16, 24);
// for (let y = 0; y < 10; y++) {
//     for (let x = 0; x < 10; x++) {
//         tm.setTile(x, y, x, y);
//     }
// }
// stage.addChild(tm);
// let ip = new IconPack(new Texture("prop.png"), 3, 2, 16, 24, 0xffffff, 1, 0, 0);
// stage.addChild(ip);
// let tf = TextField.fromTextWrap("안녕하십니까\n안녕하시냐고요");
// tf.y = 50;
//tf.setTextColor(0xff0000);
// stage.addChild(tf);
// console.log(`텍스트 세로크기 ${tf.getHeight()}`);
// let f = new Font("font_bitmap.fnt", "font_bitmap.png");


// import RemoteComponent from "@engine/remoteComponent";


// import MotionBlurSprite from "./engine/motionBlurSprite";

_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Timer.delayedCall( 1000, () => {
    // const t = new Texture( "WindowFrame.png" );
    // const b = new MotionBlurSprite( t );

    // stage.addChild( b );
    // b.y = 60;
    // b.move( 150,250,400,{ ease: "inOutCubic" , repeatCount: 0, reflect: true } );

    // let s = new Spine( "Spines/HumanSide/human_side.json" );
    // let s = new Spine( "Spines/human_side" );

    // s.on( Event.READY,()=>{

    //     s.x = 100;
    //     s.y = 200;
    //     s.scale = 0.2;
    //     // let ss = s.__pixi.spineData.skins[ "loderunner" ];

    //     // s.__pixi.skeleton.setSkin( ss );
    //     stage.addChild( s );

    // } );

    // let s = new Sprite();
    // let c = new RemoteComponent();

    // stage.addChild( s );
    // s.addComponent( c );

    // c.locked = 1;
    // console.log( `잠긴값 테스트 ${c.locked}` );
    // let r = c.testMethod( c );

    // s.on( Event.UPDATE,( e )=>{

    //     console.log( `잠긴값 테스트2 ${c.locked}` );
    
    // } );
    // s.on( "test",( e )=>{

    //     console.log( "이벤트잡음",e );
    
    // } );
    // s.dispatchEvent( "hello" );

    // const dd = ComponentHolder.getAllComponents( RemoteComponent );

    // console.log( "컴퍼넌트찾기",dd );
    
    // const dd2 = ComponentHolder.getAllComponentHolders( RemoteComponent );

    // console.log( "홀더찾기",dd2 );
    
    // // c.requestModify( this.__dirtyList );

    // r.then( ( e )=>console.log( e ) );

    // export default class CH extends ComponentHolder {

    //     constructor() {

    //         super();
    //         this.life =  this.addComponent( new Params( 10 ) );
    //         this.motion = this.addComponent( new Motion() );
    //         this.a = this.createComponent( Props,{ a: 999 } );
    //         console.log( "체크",this.hasAllComponents( Params,Motion,Props ) );
        
    //     }

    // }



    // let ch = new CH();
    // let [p] = ch.getCompatibleComponents( Props );

    // console.log( p.a,p.b );
    // ch.dispatchEvent( "motion" );
    // ch.dispatchEvent( "motion" );
    // // ch.removeComponent( ch.getComponent( Motion ) );    
    // ch.removeComponent( Motion );    
    // ch.dispatchEvent( "motion" );

    /** 
     * 
    */
    // Component.C = C;
    


    // const sz = new Serializer( [[Item, { construct: ( src )=>new Item( src.name,src.tileX,src.tileY ) }]] );
    
    // const t = new Texture( "WindowFrame.png" );
    // const b = new Bitmap( t );

    // const i1 = new Item( "곡괭이" );
    // const o = { it: i1,hello: "world", x: [1, 2, 3, 4], t: "?" };

    // console.log( sz.parse( sz.stringify( o ) ) );


    // const s = new Sprite().triggerable();
    // //s.addTrigger("aaa", { x: true }, (o, k) => o[k] > 1 );
    // //s.on("aaa", () => { console.log("이벤트트리거") ; } );
    // // stage.addChild(s);
    // // s.move(100, 100, 1000);
    // const e = s.newEvent( { a: 10 } );

    // e.on( function( x ) {

    //     console.log( "이벤트왔당",x,this ); 

    // } );
    // e.dispatch();

    // const t = new Texture( "WindowFrame.png" );
    // //b.x += 30;
    // // b.y += 30;3
    // const b = new Bitmap( t );

    // // b.setRotation(45);
    // // b.x = 50;
    // stage.addChild( b );
    // b.wait( 500, () => console.log( "다기다렸다" ) ).move( 100, 100, 1000, "outBounce" )
    //     .wait( 500 )
    //     .move( 0, 200, 1000 );
    // console.log( b.hitTestPoint( 24, 24 ) );

    // b.setInteractive( {
    //     down: ( e, i ) => {

    //         console.log( e, i );
        
    //     },
    //     dragX: true,
    //     dragY: true
    // } );
    
    // const s1 = new Storage( "xxx" );

    // s1.write( "1", "완전히 성공했습니다" ).then( () => {

    //     s1.read( "1" ).then( r => console.log( r ) );
    
    // } );

    //let tf = new TextField(null, "abcdefg\ndefgdg");

    // tf.x = 50;
    // tf.y = 50;
    // let ff = PIXI.BitmapText.fonts["font_bitmap.fnt"];
    //stage.addChild(tf);
    // console.log("logicalViewport", application.logicalViewport);
    // console.log("logicalViewportScale", application.logicalViewportScale);
    // console.log("renderViewport", stage.renderViewport);
    // console.log("renderViewportScale", stage.renderViewportScale);
    // console.log("deviceViewport", stage.deviceViewport);
    // console.log("logicalViewportOffset", application.logicalViewportOffset);
    // console.log("logicalRenderBounds",application.logicalRenderBounds);
} );
//let t = new Texture("Tile.png");
// let b = new Bitmap(t);
// b.x = 0;
// b.alpha = 0.1;
// stage.addChild(b);


//b.__pixi.rotation = Math.PI * 1.9;
//let g = new PIXI.Graphics();
//g.beginFill(0x000000, 1);
//g.drawRect(100, 0, 200, 100);
//g.endFill();
//stage.__pixi.addChild(g);
//b.__pixi.mask = g;
//b.setClip(0, 0, 100, 100);
//stage.__pixi.addChild(b.__pixi);
// let s1 = new Sprite();
// s1.addChild(b);
// s1.setAnchorPoint(0, 0);
// stage.addChild(s1);
// //new Tween(b, 1000, { x: 100 }, { ease: easing.outCubic });
// mc.setGotoAction(60, 0);
// stage.addChild(mc);

//stage.addChild(new Pixel(0x00ffff, 0.5, 10, 10));
// Timer.delayedCall(1000, () => {
    
//     console.log(t.getWidth());
//     let b = new Bitmap(t);
//     //stage.addChild(b);
// let m = new Mesh();
// m.setIndexArray([0, 1, 2, 1, 3, 2]);
// m.setVertexArray([0, 0, 100, 0, 0, 100, 100, 100]);
// m.setTexture(t);
// m.setColorArray([0xffffff, 1.0, 0xffffff, 1.0, 0xffffff, 1, 0xffffff, 1]);
// m.setTextureCoordinateArray([0, 0, 100, 0, 0, 100, 100, 100]);
// //m.setTextureCoordinates(0,100, 0, 1,200, 0, 2,100, 100, 3,200, 100);
// //m.setTextureCoordinateArray([0, 0, 1, 0, 0, 1, 1, 1]);
// m.alpha = 0.5;
// stage.addChild(m);

//     // let rt = new RenderTarget(application,512, 512);
//     // rt.clear(0xff0000, 1);
//     // rt.draw(b);
//     // let b1 = new Bitmap(rt);
//     // stage.addChild(b1);
//     // b1.y = 50;
// });


//application.setFullscreen( true );

const [px, py, pw, ph] = [0,0,_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.width,_engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalRenderBounds.height];

_global__WEBPACK_IMPORTED_MODULE_3__["default"].sceneManager = new _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.SceneManager( _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application, px, py, pw, ph, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalViewport.width, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.application.logicalViewport.height );
_global__WEBPACK_IMPORTED_MODULE_3__["default"].stage.addChild( _global__WEBPACK_IMPORTED_MODULE_3__["default"].sceneManager );


_global__WEBPACK_IMPORTED_MODULE_3__["default"].world = new _world_world__WEBPACK_IMPORTED_MODULE_4__["default"]( {
    seed:          5,
    type:          "dungeon",
    cave:          0.1,
    numOfFloor:    { min: 10, max: 15 },
    numOfCampfire: 5,
    floor:         1,
} );

/*
    GLOBAL.world = World.new({
        type="wildness",
        width=512,
        height=512,
    })
*/

/*
    GLOBAL.world = World.new({
        url="http://bitria2.homeip.net:8080/worldgen/gen.php?w=200&h=200&randomSeed=3",
    })
*/


/*
    GLOBAL.world = World.new({
        worldGen = {
            seed = 3,
            width = 200,
            height = 200,

            maxRiverCount = 128,
            seaLevel = 0.35,
            temperatureYTop = 0.3,
            temperatureYMid = 0.5,
            temperatureYBottom = 0.7,
            rainNoiseOctaveCount = 8,
            rainNoisePersistance = 0.5,
            rainNoiseMidAmplify = 1.5,
        }
    })
*/


_global__WEBPACK_IMPORTED_MODULE_3__["default"].sceneManager.changeScene( _global__WEBPACK_IMPORTED_MODULE_3__["default"].world, 1000, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.SceneManager.circleOutRT, _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.easing.outCubic );
//GLOBAL.sceneManager.changeScene(GLOBAL.world, 5000, SceneManager.circleInOut, easing.outCubic);
//GLOBAL.sceneManager.changeScene(GLOBAL.world, 1000, SceneManager.moveFromTop, easing.outCubic);
/*
    GLOBAL.world = World.new({
        type="dungeon",
        cave=0.5,
        numOfFloor={ min=40, max=40 },
        floor=1,
    })
*/

const s =
    `
..@......P..................................
..@..........*..I...........................
..@...P.....MMMMMMM..........BBBBBBBBBBBB...
..@....MM...M|)|||M++........B..........B...
..@.........MZZZZ|MMMMM......B....*+++++B...
..@.*.......M|||||D++.M......B.....++++.B...
..@@@@@@..##M|||||M++WWWWWWW.BBBBBBBDBBBB...
....MM.@..#.M|||||M++W}...)W....+++++.......
....MM.@T.#.MMMMMMM++D.)HHHW....+.......#...
.......@..#....#..@++W...).W.++++....*..#...
..>>...@.MMM####..@.+WWWWWWW.+..........####
......M@...M......@~+++::+++++..........#...
..P...T@.......I..@~..+::...~~..###D#####...
.......@@@@@@@@@@@@~...::.~~~...#.#.....#...
....P..@@@@@..F@@.@|@@@::@|@@@@@#...........
...........@@@@@@..~~~~::~~...#@@@@T....*...
....................~..::.....#.............
`;


//GLOBAL.stage.addChild(GLOBAL.world)
_global__WEBPACK_IMPORTED_MODULE_3__["default"]["interface"] = new _interface_interface__WEBPACK_IMPORTED_MODULE_10__["default"]();
_global__WEBPACK_IMPORTED_MODULE_3__["default"].stage.addChild( _global__WEBPACK_IMPORTED_MODULE_3__["default"]["interface"] );


_global__WEBPACK_IMPORTED_MODULE_3__["default"].saveLoad = null;

_global__WEBPACK_IMPORTED_MODULE_3__["default"].world.on( "ready", function () {
    //TODO:
    _global__WEBPACK_IMPORTED_MODULE_3__["default"].saveLoad = new _saveLoad__WEBPACK_IMPORTED_MODULE_11__["default"]( "save.json" );

    let [x, y] = [_global__WEBPACK_IMPORTED_MODULE_3__["default"].world.enterX, _global__WEBPACK_IMPORTED_MODULE_3__["default"].world.enterY];

    if ( x == null ) {
        [x, y] = [100, 196];
    }

    while ( ( _global__WEBPACK_IMPORTED_MODULE_3__["default"].world.getProperty( x, y ).wall & _world_gameMap__WEBPACK_IMPORTED_MODULE_5__["default"].BLOCK_PASS ) != 0 ) {
        x = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 1,_global__WEBPACK_IMPORTED_MODULE_3__["default"].world.map.width );
        y = _engine_flatfast__WEBPACK_IMPORTED_MODULE_0__.Utils.random( 1,_global__WEBPACK_IMPORTED_MODULE_3__["default"].world.map.height );
    }
    _global__WEBPACK_IMPORTED_MODULE_3__["default"].player = new _entity_player__WEBPACK_IMPORTED_MODULE_6__["default"]( null, x, y );// , { imageCol=1, imageRow=3 })
    _global__WEBPACK_IMPORTED_MODULE_3__["default"].world.entityManager.addEntity( _global__WEBPACK_IMPORTED_MODULE_3__["default"].player );

    const item1 = new _entity_item__WEBPACK_IMPORTED_MODULE_9__["default"]( "도끼" );

    _global__WEBPACK_IMPORTED_MODULE_3__["default"].player.inventory.addItem( item1 );
    item1.equip();

    const item2 = new _entity_item__WEBPACK_IMPORTED_MODULE_9__["default"]( "숏보우" );

    _global__WEBPACK_IMPORTED_MODULE_3__["default"].player.inventory.addItem( item2 );

    const item3 = new _entity_item__WEBPACK_IMPORTED_MODULE_9__["default"]( "나이프" );

    _global__WEBPACK_IMPORTED_MODULE_3__["default"].player.inventory.addItem( item3 );
    item2.equip();
    _global__WEBPACK_IMPORTED_MODULE_3__["default"].player.selectAction( item2 );

    const item4 = new _entity_item__WEBPACK_IMPORTED_MODULE_9__["default"]( "곡괭이" );

    _global__WEBPACK_IMPORTED_MODULE_3__["default"].player.inventory.addItem( item4 );
    item4.equip();

    _global__WEBPACK_IMPORTED_MODULE_3__["default"].player.inventory.addItem( new _entity_item__WEBPACK_IMPORTED_MODULE_9__["default"]( "하프" ) );
    _global__WEBPACK_IMPORTED_MODULE_3__["default"].player.inventory.addItem( new _entity_item__WEBPACK_IMPORTED_MODULE_9__["default"]( "만돌린" ) );
    _global__WEBPACK_IMPORTED_MODULE_3__["default"].player.inventory.addItem( new _entity_item__WEBPACK_IMPORTED_MODULE_9__["default"]( "레트로MSX" ) );
    _global__WEBPACK_IMPORTED_MODULE_3__["default"].player.inventory.addItem( new _entity_item__WEBPACK_IMPORTED_MODULE_9__["default"]( "레트로APPLE" ) );
    _global__WEBPACK_IMPORTED_MODULE_3__["default"].player.inventory.addItem( new _entity_item__WEBPACK_IMPORTED_MODULE_9__["default"]( "악보1" ) );
    _global__WEBPACK_IMPORTED_MODULE_3__["default"].player.inventory.addItem( new _entity_item__WEBPACK_IMPORTED_MODULE_9__["default"]( "악보2" ) );
    _global__WEBPACK_IMPORTED_MODULE_3__["default"].player.inventory.addItem( new _entity_item__WEBPACK_IMPORTED_MODULE_9__["default"]( "악보3" ) );
    _global__WEBPACK_IMPORTED_MODULE_3__["default"].player.inventory.addItem( new _entity_item__WEBPACK_IMPORTED_MODULE_9__["default"]( "악보4" ) );
    _global__WEBPACK_IMPORTED_MODULE_3__["default"].player.inventory.addItem( new _entity_item__WEBPACK_IMPORTED_MODULE_9__["default"]( "악보5" ) );

    // let nao = new Npc("나오", 100, 199);
    // nao.places["room"] = { x: 103, y: 193 };
    // nao.places["bed"] = { x: 102, y: 191 };
    // nao.places["work"] = { x: 96, y: 194 };
    // GLOBAL.world.entityManager.addEntity(nao);
    const cat = new _entity_pet__WEBPACK_IMPORTED_MODULE_7__["default"]( "고양이" );

    _global__WEBPACK_IMPORTED_MODULE_3__["default"].world.entityManager.addEntity( cat );
} );


/*[local prop1 = Prop.new("@", x + 1, y)
GLOBAL.world.addEntity(prop1)
*/

//GLOBAL.interface.autoMap.drawAll(true)


//w.addEntity(new Item(w, 6, 6, { imageCol=2, imageRow=14, drop=true, dropX=5, dropY=5 }))

//helper.playSound("sound/bgm_1.mp3", 0.2, true)

//application.setKeyboardVisibility(true)

//log("////////////////////", application.getLogicalScaleY(), application.getScreenDensity())

// console.log( application.logicalViewportScale );


// console.log( GLOBAL );


// let t = new Texture( "shadowMask.png" );
// let b = new Bitmap( t );

// // b.setBlendMode( Sprite.BlendModes.ADD );
// stage.addChild( b );



// {
//     stage.on( Event.MOUSE_DOWN,e=>{
//         let p = new Pixel( 0xffff00,1,5,5 );

//         p.xy = stage.globalToLocal( e.x,e.y );
//         stage.addChild( p );
//     } );      
// }


// Timer.delayedCall( 100,
//                    ()=>{
//                        let s = "abcdef<aaa>ddddd</aaag>dddd";

//                        console.log( TextField.splitTag( s ) );
//                    }
// );


})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzQkFBc0IsdUNBQUk7O0FBRTFCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxzQkFBc0IsdUNBQUk7O0FBRTFCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxzQkFBc0IsdUNBQUk7O0FBRTFCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUEsc0JBQXNCLHVDQUFJOztBQUUxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHlCQUF5QixXQUFXO0FBQ3BDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNCQUFzQix1Q0FBSTs7QUFFMUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx5QkFBeUIsV0FBVztBQUNwQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0JBQXNCLHVDQUFJOztBQUUxQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEseUJBQXlCLFdBQVc7QUFDcEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzQkFBc0IsdUNBQUk7O0FBRTFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx5QkFBeUIsV0FBVztBQUNwQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0JBQXNCLHVDQUFJOztBQUUxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHVDQUFJOztBQUUxQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHNEQUFzRDtBQUN0RCxtQ0FBbUMscURBQWlCO0FBQ3BEO0FBQ0E7O0FBRUEsb0NBQW9DO0FBQ3BDO0FBQ0E7O0FBRUE7QUFDQSwwRUFBMEU7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsOEJBQThCLDJDQUFNO0FBQ3BDOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIs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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsY0FBYztBQUM3QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGNBQWM7QUFDN0IsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxjQUFjO0FBQzdCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxZQUFZO0FBQzNCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFNBQVM7QUFDeEIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxhQUFhO0FBQzVCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFNBQVM7QUFDeEIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxjQUFjO0FBQzdCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFNBQVM7QUFDeEIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxjQUFjO0FBQzdCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFNBQVM7QUFDeEIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUFFOzs7Ozs7Ozs7OztBQzVRakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFD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LHFEQUFxRCxnRUFBa0I7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsbURBQUs7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7QUNudkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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ZCxvQ0FBb0MsbURBQUs7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1REFBUztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7O0FDbFdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixVQUFVO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixVQUFVO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRUFBK0U7QUFDL0U7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtFQUErRTtBQUMvRTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4QixlQUFlLFNBQVM7QUFDeEIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkZBQTJGLEVBQUUsR0FBRyxFQUFFO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixRQUFRO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLFFBQVE7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLFFBQVE7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBZSxNQUFNLEVBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDM2hCdEI7QUFDd0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGtEQUFNO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGtEQUFNO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQU07QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxp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QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELCtEQUFpQjtBQUNsRSwrQ0FBK0MsK0RBQWlCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7OztBQ3BSQTtBQUN3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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O0FBQ0E7QUFDQSwrQkFBK0Isb0RBQU0sTUFBTSxxREFBTywrQkFBK0IsUUFBUSxrRUFBb0IsR0FBRztBQUNoSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsK0VBQXNDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FB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QVk7QUFDMUM7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLGVBQWU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxlQUFlO0FBQzlCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxlQUFlO0FBQzlCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxV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O0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQSxjQUFjO0FBQ2Q7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QixvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGtKQUFrSjtBQUMvSixhQUFhLHFKQUFx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QVcscUJBQXFCO0FBQ2hDLFdBQVcscUJBQXFCO0FBQ2hDLFdBQVcscUJBQXFCO0FBQ2hDLFlBQVkscUJBQXFCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLHFCQUFxQjtBQUNoQyxXQUFXLHFCQUFxQjtBQUNoQyxXQUFXLHFCQUFxQjtBQUNoQyxZQUFZLHFCQUFxQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscUJBQXFCO0FBQ2hDLFdBQVcscUJBQXFCO0FBQ2hDLFdBQVcsUUFBUTtBQUNuQixXQUFXLHFCQUFxQjtBQUNoQyxZQUFZLHFCQUFxQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscUJBQXFCO0FBQ2hDLFdBQVcscUJBQXFCO0FBQ2hDLFdBQVcscUJBQXFCO0FBQ2hDLFdBQVcscUJBQXFCO0FBQ2hDLFlBQVkscUJBQXFCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxxQkFBcUI7QUFDaEMsV0FBVyxxQkFBcUI7QUFDaEMsV0FBVyxxQkFBcUI7QUFDaEMsWUFBWSxxQkFBcUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHFCQUFxQjtBQUNoQyxXQUFXLHFCQUFxQjtBQUNoQyxXQUFXLHFCQUFxQjtBQUNoQyxZQUFZLHFCQUFxQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxxQkFBcUI7QUFDaEMsV0FBVyxRQUFRO0FBQ25CLFdBQVcscUJBQXFCO0FB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QTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxxQkFBcUI7QUFDaEMsV0FBVyxxQkFBcUI7QUFDaEMsWUFBWSxxQkFBcUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLHFCQUFxQjtBQUNoQyxXQUFXLHFCQUFxQjtBQUNoQyxXQUFXLHFCQUFxQjtBQUNoQyxZQUFZLHFCQUFxQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxxQkFBcUI7QUFDaEMsV0FBVyxxQkFBcUI7QUFDaEMsV0FBVyxxQkFBcUI7QUFDaEMsWUFBWSxxQkFBcUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscUJBQXFCO0FBQ2hDLFdBQVcscUJBQXFCO0FBQ2hDLFlBQVkscUJBQXFCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxxQkFBcUI7QUFDaEMsV0FBVyxRQUFRO0FBQ25CLFlBQVkscUJBQXFCO0FBQ2pDLFlBQVkscUJBQXFCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLHFCQUFxQjtBQUNoQyxXQUFXLHFCQUFxQjtBQUNoQyxXQUFXLFFBQVE7QUFDbkIsV0FBVyxxQkFBcUI7QUFDaEMsWUFBWSxxQkFBcUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQjtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBLFdBQVcscUJBQXFCO0FBQ2hDLFlBQVkscUJBQXFCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkI7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQSxXQUFXLHFCQUFxQjtBQUNoQyxZQUFZLHFCQUFxQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcscUJBQXFCO0FBQ2hDLFlBQVkscUJBQXFCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscUJBQXFCO0FBQ2hDLFdBQVcscUJBQXFCO0FBQ2hDLFdBQVcscUJBQXFCO0FBQ2hDLFdBQVcscUJBQXFCO0FBQ2hDLFlBQVkscUJBQXFCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLHFCQUFxQjtBQUNoQztBQUNBLFdBQVcscUJBQXFCO0FBQ2hDLFlBQVkscUJBQXFCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxxQkFBcUI7QUFDaEMsV0FBVyxxQkFBcUI7QUFDaEM7QUFDQSxXQUFXLHFCQUFxQjtBQUNoQyxZQUFZLHFCQUFxQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLHFCQUFxQjtBQUNoQyxZQUFZLHFCQUFxQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxxQkFBcUI7QUFDaEMsV0FBVyxRQUFRO0FBQ25CLFdBQVcscUJBQXFCO0FBQ2hDLFlBQVkscUJBQXFCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcscUJBQXFCO0FBQ2hDLFlBQVkscUJBQXFCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHFCQUFxQjtBQUNoQyxXQUFXLFFBQVE7QUFDbkIsV0FBVyxxQkFBcUI7QUFDaEMsWUFBWSxxQkFBcUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxxQkFBcUI7QUFDaEMsWUFBWSxxQkFBcUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscUJBQXFCO0FBQ2hDLFdBQVcsUUFBUTtBQUNuQixXQUFXLHFCQUFxQjtBQUNoQyxZQUFZLHFCQUFxQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxxQkFBcUI7QUFDaEM7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxxQkFBcUI7QUFDaEMsWUFBWSxxQkFBcUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscUJBQXFCO0FBQ2hDLFdBQVcscUJBQXFCO0FBQ2hDO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcscUJBQXFCO0FBQ2hDLFlBQVkscUJBQXFCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQSxXQUFXLHFCQUFxQjtBQUNoQztBQUNBLFdBQVcscUJBQXFCO0FBQ2hDLFlBQVkscUJBQXFCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHlEQUF5RDtBQUN6RDtBQUNBLFdBQVcscUJBQXFCO0FBQ2hDLFdBQVcscUJBQXFCO0FBQ2hDO0FBQ0EsV0FBVyxxQkFBcUI7QUFDaEMsWUFBWSxxQkFBcUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcscUJBQXFCO0FBQ2hDLFdBQVcscUJBQXFCO0FBQ2hDLFdBQVcscUJBQXFCO0FBQ2hDLFlBQVkscUJBQXFCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHFCQUFxQjtBQUNoQyxXQUFXLHFCQUFxQjtBQUNoQyxXQUFXLHFCQUFxQjtBQUNoQyxZQUFZLHFCQUFxQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxxQkFBcUI7QUFDaEMsV0FBVyxxQkFBcUI7QUFDaEMsV0FBVyxxQkFBcUI7QUFDaEMsWUFBWSxxQkFBcUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDZCQUE2QjtBQUN6QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUIsZUFBZTtBQUNsQztBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyx1QkFBdUI7QUFDbEMsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIs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QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLG1CQUFtQjtBQUMzQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLCtFQUErRTtBQUMvRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFdBQVc7QUFDOUI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQSw2Q0FBNkM7QUFDN0MsMkNBQTJDO0FBQzNDLDJDQUEyQztBQUMzQywyQ0FBMkM7QUFDM0MsNkNBQTZDO0FBQzdDLDJDQUEyQztBQUMzQywyQ0FBMkM7QUFDM0MsMkNBQTJDO0FBQzNDLDZDQUE2QztBQUM3QywyQ0FBMkM7QUFDM0MsMkNBQTJDO0FBQzNDLDJDQUEyQztBQUMzQywyQ0FBMkM7QUFDM0MsMkNBQTJDO0FBQzNDLDJDQUEyQztBQUMzQywyQ0FBMkM7QUFDM0MsMkNBQTJDO0FBQzNDLDJDQUEyQztBQUMzQywyQ0FBMkM7QUFDM0MsMkNBQTJDO0FBQzNDLDJDQUEyQztBQUMzQywyQ0FBMkM7QUFDM0MsMkNBQTJDO0FBQzNDLDJDQUEyQztBQUMzQywyQ0FBMkM7QUFDM0MsMkNBQTJDO0FBQzNDLDJDQUEyQztBQUMzQywyQ0FBMkM7QUFDM0MsMkNBQTJDO0FBQzNDLDJDQUEyQztBQUMzQywyQ0FBMkM7QUFDM0MsMkNBQTJDO0FBQzNDLDJDQUEyQztBQUMzQywyQ0FBMkM7QUFDM0MsMkNBQTJDO0FBQzNDLDJDQUEyQztBQUMzQywyQ0FBMkM7QUFDM0MsMkNBQTJDO0FBQzNDLDJDQUEyQztBQUMzQywyQ0FBMkM7O0FBRTNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7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QSxJQUFJLDZFQUFvQztBQUN4QyxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLHNEQUFzRDtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2ZsYXRmYXN0Ly4vZW5naW5lL3NyYy9BcHBsaWNhdGlvbi5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2VuZ2luZS9zcmMvQXNzZXQuanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9lbmdpbmUvc3JjL0JpdG1hcC5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2VuZ2luZS9zcmMvQml0bWFwRm9udC5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2VuZ2luZS9zcmMvQ29tcG9uZW50LmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZW5naW5lL3NyYy9Db21wb25lbnRIb2xkZXIuanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9lbmdpbmUvc3JjL0V2ZW50LmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZW5naW5lL3NyYy9FdmVudERpc3BhdGNoZXIuanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9lbmdpbmUvc3JjL0ZvbnRCYXNlLmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZW5naW5lL3NyYy9LZXlDb2RlLmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZW5naW5lL3NyYy9MYXlvdXQuanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9lbmdpbmUvc3JjL01hdHJpeC5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2VuZ2luZS9zcmMvTWVzaC5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2VuZ2luZS9zcmMvTW92aWVDbGlwLmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZW5naW5lL3NyYy9Nc2RmRm9udC5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2VuZ2luZS9zcmMvUGFydGljbGVzLmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZW5naW5lL3NyYy9QaXhlbC5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2VuZ2luZS9zcmMvUmVuZGVyVGFyZ2V0LmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZW5naW5lL3NyYy9TY2VuZU1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9lbmdpbmUvc3JjL1NlcmlhbGl6ZXIuanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9lbmdpbmUvc3JjL1NoYWRlci5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2VuZ2luZS9zcmMvU2hhcGUuanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9lbmdpbmUvc3JjL1NvdW5kLmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZW5naW5lL3NyYy9TcGluZS5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2VuZ2luZS9zcmMvU3ByaXRlLmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZW5naW5lL3NyYy9TdGFnZS5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2VuZ2luZS9zcmMvU3RvcmFnZS5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2VuZ2luZS9zcmMvVGV4dEZpZWxkLmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZW5naW5lL3NyYy9UZXh0dXJlLmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZW5naW5lL3NyYy9UZXh0dXJlQmFzZS5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2VuZ2luZS9zcmMvVGV4dHVyZVBhY2suanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9lbmdpbmUvc3JjL1RpbGVNYXAuanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9lbmdpbmUvc3JjL1RpbWVyLmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZW5naW5lL3NyYy9UcmFuc2Zvcm0uanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9lbmdpbmUvc3JjL1RydWVUeXBlRm9udC5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2VuZ2luZS9zcmMvVHdlZW4uanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9lbmdpbmUvc3JjL1R5cGVzLmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZW5naW5lL3NyYy9VdGlscy5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2VuZ2luZS9zcmMvZWFzaW5nLmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZW5naW5lL3NyYy9mbGF0ZmFzdC5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2VuZ2luZS9zcmMvaGFuZ3VsLmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZW5naW5lL3NyYy9saWIvYS1zdGFyLmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZW5naW5lL3NyYy9saWIvYnV0dG9uMi5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2VuZ2luZS9zcmMvbGliL2NvbG9ycy5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2VuZ2luZS9zcmMvbGliL2dyaWQ5LmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZW5naW5lL3NyYy9saWIvaWNvblBhY2suanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9lbmdpbmUvc3JjL2xpYi9saXN0Vmlldy5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2VuZ2luZS9zcmMvbGliL21hYmlNTUwuanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9lbmdpbmUvc3JjL2xpYi9yYW5kb20uanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9lbmdpbmUvc3JjL2xpYi9zaGFkZXJIZWxwZXIuanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9lbmdpbmUvc3JjL2xpYi9zbGlkZVZpZXcuanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9lbmdpbmUvc3JjL2xpYi92aXNpYmlsaXR5VGlsZS5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2VuZ2luZS9zcmMvbGliL3Zpc2liaWxpdHlUaWxlTWFzay5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2dhbWVzL0F2YWxvbmlrYS9zcmMvY29uZmlnLmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZ2FtZXMvQXZhbG9uaWthL3NyYy9lZmZlY3QuanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9nYW1lcy9BdmFsb25pa2Evc3JjL2VudGl0eS9idWZmLmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZ2FtZXMvQXZhbG9uaWthL3NyYy9lbnRpdHkvY3JlYXR1cmUuanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9nYW1lcy9BdmFsb25pa2Evc3JjL2VudGl0eS9lbnRpdHkuanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9nYW1lcy9BdmFsb25pa2Evc3JjL2VudGl0eS9lbnRpdHlDb21wb25lbnRzLmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZ2FtZXMvQXZhbG9uaWthL3NyYy9lbnRpdHkvaXRlbS5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2dhbWVzL0F2YWxvbmlrYS9zcmMvZW50aXR5L21vbnN0ZXIuanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9nYW1lcy9BdmFsb25pa2Evc3JjL2VudGl0eS9ucGMuanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9nYW1lcy9BdmFsb25pa2Evc3JjL2VudGl0eS9wZXQuanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9nYW1lcy9BdmFsb25pa2Evc3JjL2VudGl0eS9wbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9nYW1lcy9BdmFsb25pa2Evc3JjL2VudGl0eS9wcm9wLmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZ2FtZXMvQXZhbG9uaWthL3NyYy9lbnRpdHkvc2tpbGwuanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9nYW1lcy9BdmFsb25pa2Evc3JjL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2dhbWVzL0F2YWxvbmlrYS9zcmMvaW50ZXJmYWNlL2FjdGlvblNlbGVjdG9yLmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZ2FtZXMvQXZhbG9uaWthL3NyYy9pbnRlcmZhY2UvYXV0b01hcC5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2dhbWVzL0F2YWxvbmlrYS9zcmMvaW50ZXJmYWNlL2N1cnNvci5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2dhbWVzL0F2YWxvbmlrYS9zcmMvaW50ZXJmYWNlL2RldGFpbEluZm9XaW5kb3cuanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9nYW1lcy9BdmFsb25pa2Evc3JjL2ludGVyZmFjZS9pbnRlcmZhY2UuanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9nYW1lcy9BdmFsb25pa2Evc3JjL2ludGVyZmFjZS9pbnZlbnRvcnkuanMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3QvLi9nYW1lcy9BdmFsb25pa2Evc3JjL2ludGVyZmFjZS90b3BNZW51LmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZ2FtZXMvQXZhbG9uaWthL3NyYy9wcm9jZWR1cmFsTWFwL2N1c3RvbUJsb2Nrcy5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2dhbWVzL0F2YWxvbmlrYS9zcmMvcHJvY2VkdXJhbE1hcC9wcm9jZWR1cmFsTWFwLmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZ2FtZXMvQXZhbG9uaWthL3NyYy9zYXZlTG9hZC5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2dhbWVzL0F2YWxvbmlrYS9zcmMvd29ybGQvZWxlbWVudGFsLmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZ2FtZXMvQXZhbG9uaWthL3NyYy93b3JsZC9lbnRpdHlNYW5hZ2VyLmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZ2FtZXMvQXZhbG9uaWthL3NyYy93b3JsZC9nYW1lTWFwLmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZ2FtZXMvQXZhbG9uaWthL3NyYy93b3JsZC9wYXRoTWFuYWdlci5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL2dhbWVzL0F2YWxvbmlrYS9zcmMvd29ybGQvc2lnaHRNYW5hZ2VyLmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZ2FtZXMvQXZhbG9uaWthL3NyYy93b3JsZC93b3JsZC5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC8uL25vZGVfbW9kdWxlcy9ldmVudGVtaXR0ZXIzL2luZGV4LmpzIiwid2VicGFjazovL2ZsYXRmYXN0Ly4vbm9kZV9tb2R1bGVzL3R3Z2wuanMvZGlzdC80LngvdHdnbC1mdWxsLm1vZHVsZS5qcyIsIndlYnBhY2s6Ly9mbGF0ZmFzdC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9mbGF0ZmFzdC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9mbGF0ZmFzdC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vZmxhdGZhc3Qvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9mbGF0ZmFzdC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2ZsYXRmYXN0Ly4vZ2FtZXMvQXZhbG9uaWthL3NyYy9tYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFzc2V0IH0gZnJvbSAnLi9Bc3NldCc7XHJcbmltcG9ydCB7IEV2ZW50RGlzcGF0Y2hlciB9IGZyb20gJy4vRXZlbnREaXNwYXRjaGVyJztcclxuaW1wb3J0IHsgU3ByaXRlIH0gZnJvbSAnLi9TcHJpdGUnO1xyXG5pbXBvcnQgeyBTdGFnZSB9IGZyb20gJy4vU3RhZ2UnO1xyXG5pbXBvcnQgeyBQb2ludCwgUmVjdCB9IGZyb20gJy4vVHlwZXMnO1xyXG5pbXBvcnQgeyBVdGlscyB9IGZyb20gJy4vVXRpbHMnO1xyXG5pbXBvcnQgeyBFdmVudCB9IGZyb20gJy4vRXZlbnQnO1xyXG5cclxuY29uc3QgTUFYX1VQREFURV9QRVJfTE9HSUNfVElDSyA9IDU7XHJcblxyXG5cclxuLyoqXHJcbiAqIFxyXG4gKlxyXG4gKiBAZXhwb3J0XHJcbiAqIEBjbGFzcyBBcHBsaWNhdGlvblxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEFwcGxpY2F0aW9uIGV4dGVuZHMgRXZlbnREaXNwYXRjaGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coIFwi8J+OriBBcHBsaWNhdGlvbiBzdGFydC5cIiApO1xyXG4gICAgICAgIHRoaXMuc3RhZ2UgPSBuZXcgU3RhZ2UoKTtcclxuICAgICAgICB0aGlzLmxhc3RVcGRhdGUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgICBvbm1lc3NhZ2UgPSB0aGlzLm9uUmVuZGVyTWVzc2FnZS5iaW5kKCB0aGlzICk7XHJcbiAgICAgICAgdGhpcy5wYXVzZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlucHV0RW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5waHlzaWNzUmVhZHkgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnBoeXNpY3NXb3JrZXIgPSBuZXcgV29ya2VyKCBcInBoeXNpY3MuanNcIiApO1xyXG4gICAgICAgIHRoaXMucGh5c2ljc1dvcmtlci5vbm1lc3NhZ2UgPSB0aGlzLm9uUGh5c2ljc01lc3NhZ2UuYmluZCggdGhpcyApO1xyXG4gICAgICAgIHRoaXMucGh5c2ljc1dvcmtlci5wb3N0TWVzc2FnZSggeyBtc2c6IFwic2V0U3RhZ2VCb3VuZFwiLGFyZ3M6IFs2NDAsNDgwLHRydWUsdHJ1ZSx0cnVlLHRydWVdIH0gKTtcclxuXHJcbiAgICAgICAgdGhpcy50b3VjaEVuYWJsZWQgPSBzZWxmLl9kZXZpY2VJbmZvLnRvdWNoRW5hYmxlZDtcclxuICAgICAgICAvKiogXHJcbiAgICAgICAgICog64W866as7KCB7J24IOu3sO2PrO2KuOulvCDslrvripTri6RcclxuICAgICAgICAgKiBwb3NpdGlvbuydgCByZW5kZXJWaWV3cG9ydOuhnOu2gO2EsOydmCDsnITsuZhcclxuICAgICAgICAgKiBzaXpl64qUIOuFvOumrCDrt7Dtj6ztirgg7YGs6riwIFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubG9naWNhbFZpZXdwb3J0ID0gbmV3IFJlY3QoIDAsMCwwLDAgKTtcclxuICAgICAgICAvKiogXHJcbiAgICAgICAgICog66CM642UIOu3sO2PrO2KuOydmCDsoozsg4Hri6gg7KeA7KCQ7JeQ7IScIOuhnOyngOy7rCDrt7Dtj6ztirjsnZgg7JuQ7KCQ6rmM7KeA7J2YIOuhnOyngOy7rCDsooztkZzqs4TroZwg6rGw66asIFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubG9naWNhbFZpZXdwb3J0T2Zmc2V0ID0gbmV3IFBvaW50KCBzZWxmLl9kZXZpY2VJbmZvLmxvZ2ljYWxWaWV3cG9ydE9mZnNldCApO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOugjOuNlCDrt7Dtj6ztirgg7YGs6riwOuuhnOyngSDrt7Dtj6ztirgg7YGs6riwXHJcbiAgICAgICAgICog66Gc7KeB7J20IOugjOuNlOuztOuLpCDtgazrqbQgMSDrr7jrp4xcclxuICAgICAgICAgKiDroIzrjZTqsIAg66Gc7KeB67O064ukIO2BrOuptCAxIOy0iOqzvCBcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmxvZ2ljYWxWaWV3cG9ydFNjYWxlID0gbmV3IFBvaW50KCBzZWxmLl9kZXZpY2VJbmZvLmxvZ2ljYWxWaWV3cG9ydFNjYWxlICk7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog65SU67CU7J207Iqk7IOB7J2YIO2VtOyDgeuPhOulvCDslrvripTri6RcclxuICAgICAgICAgKiBwb3NpdGlvbuydgCBodG1s7L2Y7YWN7Iqk7Yq4IOyDgeyXkOyEnOydmCDsooztkZxcclxuICAgICAgICAgKiBzaXplIOuUlOuwlOydtOyKpCDrt7Dtj6ztirgg7YGs6riwXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5kZXZpY2VWaWV3cG9ydCA9IG5ldyBSZWN0KCBzZWxmLl9kZXZpY2VJbmZvLmRldmljZVZpZXdwb3J0ICk7XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIHRoaXMuaW5pdCggNjQwLDQ4MCw2MCxBcHBsaWNhdGlvbi5TY2FsZU1vZGVzLkxFVFRFUkJPWCApO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoIHdpZHRoLGhlaWdodCxmcHMgPSA2MCxzY2FsZU1vZGUgPSBBcHBsaWNhdGlvbi5TY2FsZU1vZGVzLkxFVFRFUkJPWCApIHtcclxuICAgICAgICB0aGlzLmxvZ2ljYWxWaWV3cG9ydCA9IG5ldyBSZWN0KCAwLDAsd2lkdGgsaGVpZ2h0ICk7XHJcbiAgICAgICAgdGhpcy5zZXRVcGRhdGVGUFMoIGZwcyApO1xyXG4gICAgICAgIHRoaXMucG9zdE1lc3NhZ2VUb1JlbmRlciggeyBtc2c6IFwiYWRkQ29tbWFuZFwiLGNsYXNzOiBcIkFwcGxpY2F0aW9uXCIsbWV0aG9kOiBcInNldExvZ2ljYWxWaWV3cG9ydFwiLGFyZ3M6IFt0aGlzLmxvZ2ljYWxWaWV3cG9ydC54eXdoLHNjYWxlTW9kZV0gfSApO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUGh5c2ljc01lc3NhZ2UoIG1zZyApIHtcclxuICAgICAgICBjb25zdCBkYXRhID0gbXNnLmRhdGE7XHJcblxyXG4gICAgICAgIGlmICggZGF0YS5tc2cgPT0gXCJyZWFkeVwiICkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyggXCLwn5GNIFBoeXNpY3MgcmVhZHkuXCIgKTsgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMucGh5c2ljc1JlYWR5ID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2UgaWYgKCBkYXRhLm1zZyA9PSBcImRldmljZUluZm9cIiApIHtcclxuICAgICAgICAgICAgc2VsZi5fZGV2aWNlSW5mbyA9IG1zZy5kYXRhLmluZm87XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCggRXZlbnQuUkVTSVpFICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uUmVuZGVyTWVzc2FnZSggbXNnICkge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBtc2cuZGF0YTtcclxuXHJcbiAgICAgICAgaWYgKCBkYXRhLm1zZyA9PSBcInJlbmRlclwiICkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlclRpY2soKTtcclxuICAgICAgICB9IGVsc2UgaWYgKCBkYXRhLm1zZyA9PSBcImRldmljZUluZm9cIiApIHtcclxuICAgICAgICAgICAgdGhpcy5kZXZpY2VWaWV3cG9ydCA9IG5ldyBSZWN0KCBkYXRhLmluZm8uZGV2aWNlVmlld3BvcnQgKTtcclxuICAgICAgICAgICAgdGhpcy5sb2dpY2FsVmlld3BvcnRPZmZzZXQgPSBuZXcgUG9pbnQoIGRhdGEuaW5mby5sb2dpY2FsVmlld3BvcnRPZmZzZXQgKTtcclxuICAgICAgICAgICAgdGhpcy5sb2dpY2FsVmlld3BvcnRTY2FsZSA9IG5ldyBQb2ludCggZGF0YS5pbmZvLmxvZ2ljYWxWaWV3cG9ydFNjYWxlICk7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCggRXZlbnQuUkVTSVpFICk7XHJcbiAgICAgICAgfSBlbHNlIGlmICggZGF0YS5tc2cgPT0gXCJBc3NldF9sb2FkQ29tcGxldGVkXCIgKSB7XHJcbiAgICAgICAgICAgIEFzc2V0LmRpc3BhdGNoTG9hZGVkRXZlbnQoIGRhdGEuaWQgKTtcclxuICAgICAgICB9IGVsc2UgaWYgKCBkYXRhLm1zZyA9PSBcImlucHV0XCIgJiYgdGhpcy5lbmFibGVJbnB1dCApIHtcclxuICAgICAgICAgICAgdGhpcy5vbklucHV0TWVzc2FnZSggZGF0YS5pbnB1dFR5cGUsZGF0YS5zZWNvbmRseUlucHV0VHlwZSxkYXRhLmlucHV0RGF0YSApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCBcIm9uUmVuZGVyTWVzc2FnZVwiLG1zZyApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiogXHJcbiAgICAgKiDroZzsp4Eg67ew7Y+s7Yq47JeQ7ISc7J2YIOugjOuNlCDrt7Dtj6ztirjsnZgg67KU7JyEXHJcbiAgICAgKiDsnbQg67KU7JyE66GcIOuwleyKpOulvCDsg53shLHtlZjrqbQg7ZmU66m07J2EIOuqqOuRkCDqsIDrprQg7IiYIOyeiOuLpCBcclxuICAgICAqL1xyXG4gICAgZ2V0IGxvZ2ljYWxSZW5kZXJCb3VuZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZWN0KCAtdGhpcy5sb2dpY2FsVmlld3BvcnRPZmZzZXQueCwtdGhpcy5sb2dpY2FsVmlld3BvcnRPZmZzZXQueSx0aGlzLmxvZ2ljYWxWaWV3cG9ydC53aWR0aCArIHRoaXMubG9naWNhbFZpZXdwb3J0T2Zmc2V0LnggKiAyLHRoaXMubG9naWNhbFZpZXdwb3J0LmhlaWdodCArIHRoaXMubG9naWNhbFZpZXdwb3J0T2Zmc2V0LnkgKiAyICk7XHJcbiAgICB9XHJcblxyXG4gICAgb25JbnB1dE1lc3NhZ2UoIGlucHV0VHlwZSwgc2Vjb25kbHlJbnB1dFR5cGUsIGlucHV0RGF0YSApIHtcclxuICAgICAgICBjb25zdCBlID0gbmV3IEV2ZW50KCBpbnB1dFR5cGUgKTtcclxuXHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbiggZSxpbnB1dERhdGEgKTtcclxuICAgICAgICB0aGlzLnN0YWdlLmRpc3BhdGNoRXZlbnRXaXRoQ2hpbGRyZW4oIGUgKTtcclxuICAgICAgICBpZiAoICFlLnN0b3BwZWQgJiYgc2Vjb25kbHlJbnB1dFR5cGUgKSB7XHJcbiAgICAgICAgICAgIGUubmFtZSA9IHNlY29uZGx5SW5wdXRUeXBlO1xyXG4gICAgICAgICAgICB0aGlzLnN0YWdlLmRpc3BhdGNoRXZlbnRXaXRoQ2hpbGRyZW4oIGUgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyVGljaygpIHtcclxuICAgICAgICBjb25zdCBub3cgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgICBjb25zdCBkZWx0YSA9ICAoIG5vdyAtIHRoaXMubGFzdFVwZGF0ZSApIC8gKCAxMDAwIC8gdGhpcy51cGRhdGVGUFMgKTtcclxuICAgICAgICAvLyDtlITroIjsnoQg6rK96rOE7JeQ7IScIOyViOunnuydhOq5jOu0kCByb3VuZOyymOumrCDtlbTrtIRcclxuICAgICAgICBjb25zdCBudW1PZlVwZGF0ZSA9IE1hdGgucm91bmQoIGRlbHRhICk7XHJcblxyXG4gICAgICAgIGlmICggIXRoaXMucGF1c2VkICkge1xyXG4gICAgICAgICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBNYXRoLm1pbiggTUFYX1VQREFURV9QRVJfTE9HSUNfVElDSyxudW1PZlVwZGF0ZSApOyBpKysgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubGFzdFVwZGF0ZSArPSAoIDEwMDAgLyB0aGlzLnVwZGF0ZUZQUyApICogbnVtT2ZVcGRhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBzdGFnZeyXkCB1cGRhdGXrqZTsi5zsp4Drpbwg67Cc7Iah7ZWY6rOgXHJcbiAgICAgKiBzcHJpdGUg7IOB7YOc66W8IG1haW4gdGhyZWFk66GcIOuztOuCuOuLpFxyXG4gICAgICpcclxuICAgICAqIEBtZW1iZXJvZiBBcHBsaWNhdGlvblxyXG4gICAgICovXHJcbiAgICB1cGRhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCBFdmVudC5CRUZPUkVfVVBEQVRFICk7XHJcbiAgICAgICAgRXZlbnREaXNwYXRjaGVyLmRvRW50ZXJGcmFtZSgpO1xyXG4gICAgICAgIGxldCBbYnVmLHRyYW5zZmVyTGlzdF0gPSB0aGlzLnN0YWdlLmVuY29kZVJlbmRlcmluZ0luZm9XaXRoQ2hpbGRyZW4oKTtcclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coIGJ1ZixleHRyYUJ1ZixzdHJpbmdzICk7XHJcbiAgICAgICAgaWYgKCB0aGlzLnBoeXNpY3NSZWFkeSApIHtcclxuICAgICAgICAgICAgdGhpcy5waHlzaWNzV29ya2VyLnBvc3RNZXNzYWdlKCB7IG1zZzogXCJ1cGRhdGVcIiB9ICk7XHJcbiAgICAgICAgfSBcclxuICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICB0aGlzLnBvc3RNZXNzYWdlVG9SZW5kZXIoIHsgbXNnOiBcInVwZGF0ZVwiLHJlbmRlcmluZ0luZm86IGJ1ZiB9LCB0cmFuc2Zlckxpc3QgKTtcclxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoIEV2ZW50LkFGVEVSX1VQREFURSApO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVwZGF0ZUZQUyggRlBTICkge1xyXG4gICAgICAgIHRoaXMudXBkYXRlRlBTID0gRlBTO1xyXG4gICAgICAgIHRoaXMucG9zdE1lc3NhZ2VUb1JlbmRlciggeyBtc2c6IFwiYWRkQ29tbWFuZFwiLCBjbGFzczogXCJBcHBsaWNhdGlvblwiLG1ldGhvZDogXCJzZXRVcGRhdGVGUFNcIixhcmdzOiBbdGhpcy51cGRhdGVGUFNdIH0gKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDsl5Tsp4TsnYQg7JmE7KCE7Z6IIOygleyngOyLnO2CpOqxsOuCmCDri6Tsi5wg7Lyg64ukLlxyXG4gICAgICogRU5URVJfRlJBTUXqs7wg7J6F66ClIOydtOuypO2KuOulvCDrqYjstpTripQg6rKDXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHsqfSB2XHJcbiAgICAgKiBAbWVtYmVyb2YgQXBwbGljYXRpb25cclxuICAgICAqL1xyXG4gICAgc2V0UGF1c2VkKCB2ICkge1xyXG4gICAgICAgIHRoaXMucGF1c2VkID0gdjtcclxuICAgICAgICB0aGlzLmVuYWJsZUlucHV0KCAhdiApO1xyXG4gICAgfVxyXG5cclxuICAgIGVuYWJsZUlucHV0KCB2ICkge1xyXG4gICAgICAgIHRoaXMuaW5wdXRFbmFibGVkID0gdjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRCYWNrZ3JvdW5kQ29sb3IoIGMgKSB7XHJcbiAgICAgICAgdGhpcy5wb3N0TWVzc2FnZVRvUmVuZGVyKCB7IG1zZzogXCJhZGRDb21tYW5kXCIsIGNsYXNzOiBcIkFwcGxpY2F0aW9uXCIsIG1ldGhvZDogXCJzZXRCYWNrZ3JvdW5kQ29sb3JcIixhcmdzOiBbVXRpbHMuaGV4MnJnYmEoIGMgKV0gfSApO1xyXG4gICAgfVxyXG5cclxuICAgIHBvc3RNZXNzYWdlVG9SZW5kZXIoIG1zZyx0cmFuc2ZlciApIHtcclxuICAgICAgICBwb3N0TWVzc2FnZSggbXNnLHRyYW5zZmVyICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJlbG9hZCggYXNzZXRGaWxlbmFtZXMscHJvZ3Jlc3NDYWxsYmFjayApIHtcclxuICAgICAgICByZXR1cm4gQXNzZXQucHJlbG9hZCggYXNzZXRGaWxlbmFtZXMscHJvZ3Jlc3NDYWxsYmFjayApO1xyXG4gICAgfVxyXG59XHJcblxyXG5BcHBsaWNhdGlvbi5TY2FsZU1vZGVzID0ge1xyXG4gICAgTk9fU0NBTEU6ICAgXCJOT19TQ0FMRVwiLFxyXG4gICAgQ0VOVEVSOiAgICAgXCJDRU5URVJcIixcclxuICAgIENST1A6ICAgICAgIFwiQ1JPUFwiLFxyXG4gICAgTEVUVEVSQk9YOiAgXCJMRVRURVJCT1hcIixcclxuICAgIFNUUkVUQ0g6ICAgIFwiU1RSRVRDSFwiLFxyXG4gICAgRklUX1dJRFRIOiAgXCJGSVRfV0lEVEhcIixcclxuICAgIEZJVF9IRUlHSFQ6IFwiRklUX0hFSUdIVFwiLFxyXG59O1xyXG5cclxuXHJcbi8vQHRzLWlnbm9yZVxyXG5pZiAoIHNlbGYuYXBwbGljYXRpb24gPT0gbnVsbCApIHtcclxuICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgc2VsZi5hcHBsaWNhdGlvbiA9IG5ldyBBcHBsaWNhdGlvbigpO1xyXG59IFxyXG5cclxuLyoqIEB0eXBlIHtBcHBsaWNhdGlvbn0gKi9cclxuLy9AdHMtaWdub3JlXHJcbmV4cG9ydCBjb25zdCBhcHBsaWNhdGlvbiA9IHNlbGYuYXBwbGljYXRpb247XHJcbi8qKiBAdHlwZSB7U3RhZ2V9ICovXHJcbi8vQHRzLWlnbm9yZVxyXG5leHBvcnQgY29uc3Qgc3RhZ2UgPSBzZWxmLmFwcGxpY2F0aW9uLnN0YWdlO1xyXG5cclxuY29uc29sZS5hc3NlcnQoIFV0aWxzLmlzV2ViV29ya2VyKCksYEFwcGxpY2F0aW9u7J2EIOuplOyduOyTsOugiOuTnOyXkCDrp4zrk6TroKTqs6Ag7ZWY6rOgIOyeiOydjGAgKTtcclxuIiwiaW1wb3J0IHsgYXBwbGljYXRpb24gfSBmcm9tICcuL0FwcGxpY2F0aW9uJztcclxuaW1wb3J0IHsgRXZlbnREaXNwYXRjaGVyIH0gZnJvbSAnLi9FdmVudERpc3BhdGNoZXInO1xyXG5pbXBvcnQgeyBFdmVudCB9IGZyb20gJy4vRXZlbnQnO1xyXG5pbXBvcnQgeyBVdGlscyB9IGZyb20gJy4vVXRpbHMnO1xyXG5cclxuY29uc3QgZm9udEluZm9DYWNoZSA9IHt9O1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBBc3NldCBleHRlbmRzIEV2ZW50RGlzcGF0Y2hlciB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgQXNzZXRQcm94eS5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSDqtIDrpqzrkJjripQg7J2066aELiDsnbTrpoTsnbQg6rCZ7Jy866m0IOqwmeydgCDslrTshYvsnLzroZwg6rCE7KO865Cc64ukLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBhc3NldFR5cGUg7Ja07IWL7J2YIOyiheulmFxyXG4gICAgICogQG1lbWJlcm9mIEFzc2V0UHJveHlcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoIG5hbWUsIGFzc2V0VHlwZSApIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuaWQgPSBBc3NldC5sYXN0SWQrKztcclxuICAgICAgICBpZiAoIG5hbWUgIT0gbnVsbCAmJiBuYW1lLmluZGV4T2YoIFwiKlwiICkgPj0gMCApIHtcclxuICAgICAgICAgICAgdGhpcy5uYW1lID0gbmFtZS5yZXBsYWNlKCBcIipcIix0aGlzLmlkLnRvU3RyaW5nKCkgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBuYW1lID09IG51bGwgPyBcIlwiIDogbmFtZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50eXBlID0gYXNzZXRUeXBlID09IG51bGwgPyBBc3NldC5ndWVzc1R5cGUoIHRoaXMubmFtZSApIDogYXNzZXRUeXBlO1xyXG5cclxuICAgICAgICBBc3NldC5maW5hbGl6YXRpb25SZWdpc3RyeS5yZWdpc3RlciggdGhpcyx7IHRoaXNPYmpJZDogdGhpcy5pZCwgdGhpc1R5cGU6IHRoaXMudHlwZSB9ICk7XHJcblxyXG4gICAgICAgIHRoaXMubG9hZGVkID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMub25Mb2FkZWRIYW5kbGVyID0gdGhpcy5vbkxvYWRlZC5iaW5kKCB0aGlzLCBbdGhpcy5pZF0gKTtcclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLnR5cGUgPT0gQXNzZXQuQXNzZXRUeXBlcy5UcnVlVHlwZUZvbnRcclxuICAgICAgICAgICAgfHwgdGhpcy50eXBlID09IEFzc2V0LkFzc2V0VHlwZXMuQml0bWFwRm9udFxyXG4gICAgICAgICAgICB8fCB0aGlzLnR5cGUgPT0gQXNzZXQuQXNzZXRUeXBlcy5Tb3VuZFxyXG4gICAgICAgICAgICB8fCB0aGlzLnR5cGUgPT0gQXNzZXQuQXNzZXRUeXBlcy5UZXh0dXJlICkge1xyXG4gICAgICAgICAgICAvL0xPQURFRCDsnbTrsqTtirjrpbwg67Cb7JWE7JW8IO2VmOuKlCDtg4DsnoXrp4wg6rG47Ja07KSA64ukXHJcbiAgICAgICAgICAgIEFzc2V0LmxvYWRlZEV2ZW50RGlzcGF0Y2hlci5hZGRFdmVudExpc3RlbmVyKCBFdmVudC5MT0FERUQsdGhpcy5vbkxvYWRlZEhhbmRsZXIgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sb2FkRm9udEluZm8oIG5hbWUgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIO2PsO2KuOulvCDroZzrlKntlZjripQg6rK97JqwIO2PsO2KuCDsoJXrs7TqsIAg65Sw66GcIO2VhOyalO2VmOuLpFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Kn0gbmFtZVxyXG4gICAgICogQG1lbWJlcm9mIEFzc2V0XHJcbiAgICAgKi9cclxuICAgIGxvYWRGb250SW5mbyggbmFtZSApIHtcclxuICAgICAgICBpZiAoIHRoaXMudHlwZSA9PSBBc3NldC5Bc3NldFR5cGVzLlRydWVUeXBlRm9udCApIHtcclxuICAgICAgICAgICAgaWYgKCBmb250SW5mb0NhY2hlW25hbWVdICkge1xyXG4gICAgICAgICAgICAgICAgLy8g7LqQ7Iuc7JeQIOyeiOuKlCDqsr3smrBcclxuICAgICAgICAgICAgICAgIHRoaXMuZm9udEluZm8gPSBmb250SW5mb0NhY2hlW25hbWVdO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coIGDtj7DtirggJHt0aGlzLm5hbWV9IOuhnOuTnCDsmYTro4wuKOy6kOyLnClgICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoIEV2ZW50LkxPQURFRCApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZmV0Y2goIGBhc3NldC8ke25hbWV9Lmpzb25gIClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbiggcmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmFzc2VydCggcmVzcG9uc2Uub2ssYGFzc2V0LyR7bmFtZX0uanNvbiDroZzrk5ztlZjsp4Ag66q77ZaI7J2MLmAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9IClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbiggZGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9udEluZm8gPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaXMuZm9udExvYWRlZCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRJbmZvQ2FjaGVbdGhpcy5uYW1lXSA9IHRoaXMuZm9udEluZm87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggYO2PsO2KuCAke3RoaXMubmFtZX0g66Gc65OcIOyZhOujjC4oanNvbuydhCDriqbqsowg66Gc65SpKWAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCggRXZlbnQuTE9BREVEICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKCB0aGlzLnR5cGUgPT0gQXNzZXQuQXNzZXRUeXBlcy5CaXRtYXBGb250IHx8IHRoaXMudHlwZSA9PSBBc3NldC5Bc3NldFR5cGVzLk1zZGZGb250ICkge1xyXG4gICAgICAgICAgICAvLyDruYTtirjrp7Xrj4QganNvbuydhCDrlLDroZwg66Gc65Sp7ZWY64qUIOyymOumrCDtlYTsmpRcclxuICAgICAgICAgICAgY29uc3QganNvbiA9IFV0aWxzLmdldEVtYmVkZGVkRmlsZSggbmFtZSArIFwiLmpzb25cIiApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5mb250SW5mbyA9IEpTT04ucGFyc2UoIGpzb24gKTtcclxuICAgICAgICAgICAgdGhpcy5sb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWVcclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZ1bmNcclxuICAgICAqIEBwYXJhbSB7YW55PX0gY29udGV4dFxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNPbmNlPWZhbHNlXVxyXG4gICAgICogQHJldHVybnMge0Fzc2V0fVxyXG4gICAgICogQG1lbWJlcm9mIEFzc2V0XHJcbiAgICAgKi9cclxuICAgIGFkZEV2ZW50TGlzdGVuZXIoIGV2ZW50TmFtZSwgZnVuYywgY29udGV4dCA9IG51bGwsIGlzT25jZSA9IGZhbHNlICkge1xyXG4gICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIHJldHVybiBzdXBlci5hZGRFdmVudExpc3RlbmVyKCBldmVudE5hbWUsIGZ1bmMsIGNvbnRleHQsIGlzT25jZSApO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbGVhc2UoKSB7XHJcbiAgICAgICAgYXBwbGljYXRpb24ucG9zdE1lc3NhZ2VUb1JlbmRlciggeyBtc2c6IFwiYWRkQ29tbWFuZFwiLCBjbGFzczogXCJBc3NldFwiLCBtZXRob2Q6IFwicmVsZWFzZVwiLGFyZ3M6IFt0aGlzLmlkXSB9ICk7XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZCggZXh0cmFEYXRhICkge1xyXG4gICAgICAgIC8vIGFzc2V0LmV4dHJhRGF0YSA9IGV4dHJhRGF0YTtcclxuICAgICAgICBhcHBsaWNhdGlvbi5wb3N0TWVzc2FnZVRvUmVuZGVyKCB7IFxyXG4gICAgICAgICAgICBtc2c6ICAgIFwiZXhlY3V0ZUNvbW1hbmRcIixcclxuICAgICAgICAgICAgY2xhc3M6ICBcIkFzc2V0XCIsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJsb2FkXCIsXHJcbiAgICAgICAgICAgIGFyZ3M6ICAgW1xyXG4gICAgICAgICAgICAgICAgeyBcclxuICAgICAgICAgICAgICAgICAgICBpZDogICAgICAgIHRoaXMuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogICAgICB0aGlzLnR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogICAgICB0aGlzLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFEYXRhOiBleHRyYURhdGEsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF0gfSApO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSggZXh0cmFEYXRhICkge1xyXG4gICAgICAgIC8vIGFzc2V0LmV4dHJhRGF0YSA9IGV4dHJhRGF0YTtcclxuICAgICAgICBhcHBsaWNhdGlvbi5wb3N0TWVzc2FnZVRvUmVuZGVyKCB7IFxyXG4gICAgICAgICAgICBtc2c6ICAgIFwiYWRkQ29tbWFuZFwiLFxyXG4gICAgICAgICAgICBjbGFzczogIFwiQXNzZXRcIixcclxuICAgICAgICAgICAgbWV0aG9kOiBcImxvYWRcIixcclxuICAgICAgICAgICAgYXJnczogICBbXHJcbiAgICAgICAgICAgICAgICB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGlkOiAgICAgICAgdGhpcy5pZCxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAgICAgIHRoaXMudHlwZSxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAgICAgIHRoaXMubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBleHRyYURhdGE6IGV4dHJhRGF0YSxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXSB9ICk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Mb2FkZWQoIGlkLCBldmVudCApIHtcclxuICAgICAgICBpZiAoIGlkID09IGV2ZW50LmlkICkge1xyXG4gICAgICAgICAgICAvLyDrgrQg6rKD6rO8IOqwmeydgCBpZOyduCDqsr3smrDsl5Drp4wg7J2067Kk7Yq466W8IOu2gOuluOuLpFxyXG4gICAgICAgICAgICBBc3NldC5sb2FkZWRFdmVudERpc3BhdGNoZXIucmVtb3ZlRXZlbnRMaXN0ZW5lciggRXZlbnQuTE9BREVELHRoaXMub25Mb2FkZWRIYW5kbGVyICk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCBBc3NldC5sb2FkZWRFdmVudERpc3BhdGNoZXIuZXZlbnRFbWl0dGVyICk7XHJcbiAgICAgICAgICAgIGlmICggdGhpcy50eXBlID09IEFzc2V0LkFzc2V0VHlwZXMuVHJ1ZVR5cGVGb250ICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mb250TG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmICggdGhpcy5mb250SW5mbyApIHtcclxuICAgICAgICAgICAgICAgICAgICBmb250SW5mb0NhY2hlW3RoaXMubmFtZV0gPSB0aGlzLmZvbnRJbmZvO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCBg7Y+w7Yq4ICR7dGhpcy5uYW1lfSDroZzrk5wg7JmE66OMLih0dGbriqbqsowg66Gc65SpKWAgKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCBFdmVudC5MT0FERUQgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCggRXZlbnQuTE9BREVEICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGZpbmFsaXplSGFuZGxlciggb2JqICkge1xyXG4gICAgICAgIC8vIEdD7JeQIOydmO2VtCDsiJjqsbDrkJjsl4jsnLzrqbQg66a066as7KaI66W8IOuztOuCuOuLpC5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyggYEdDICR7b2JqLnRoaXNPYmpJZH1gICk7XHJcbiAgICAgICAgYXBwbGljYXRpb24ucG9zdE1lc3NhZ2VUb1JlbmRlciggeyBtc2c6IFwiYWRkQ29tbWFuZFwiLCBjbGFzczogXCJBc3NldFwiLCBtZXRob2Q6IFwicmVsZWFzZVwiLGFyZ3M6IFtvYmoudGhpc09iaklkXSB9ICk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGRpc3BhdGNoTG9hZGVkRXZlbnQoIGlkICkge1xyXG4gICAgICAgIEFzc2V0LmxvYWRlZEV2ZW50RGlzcGF0Y2hlci5kaXNwYXRjaEV2ZW50KCBFdmVudC5MT0FERUQseyBpZCB9ICk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGd1ZXNzVHlwZSggbmFtZSApIHtcclxuICAgICAgICBjb25zdCBleHRNYXRjaCA9IC9cXC5bXi5dKyQvLmV4ZWMoIG5hbWUgKTtcclxuICAgICAgICBjb25zdCBleHQgPSBleHRNYXRjaCAhPSBudWxsID8gZXh0TWF0Y2hbMF0udG9Mb3dlckNhc2UoKSA6IFwiXCI7XHJcblxyXG5cclxuICAgICAgICBpZiAoIGV4dCA9PSBcIi5wbmdcIiB8fCBleHQgPT0gXCIuanBnXCIgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBBc3NldC5Bc3NldFR5cGVzLlRleHR1cmU7XHJcbiAgICAgICAgfSBlbHNlIGlmICggZXh0ID09IFwiLndhdlwiIHx8IGV4dCA9PSBcIi5tcDNcIiApIHtcclxuICAgICAgICAgICAgcmV0dXJuIEFzc2V0LkFzc2V0VHlwZXMuU291bmQ7XHJcbiAgICAgICAgfSBlbHNlIGlmICggZXh0ID09IFwiLnR0ZlwiICkge1xyXG4gICAgICAgICAgICByZXR1cm4gQXNzZXQuQXNzZXRUeXBlcy5UcnVlVHlwZUZvbnQ7XHJcbiAgICAgICAgLy8gfSBlbHNlIGlmICggZXh0ID09IFwiLmZudFwiKSB7XHJcbiAgICAgICAgLy8gICAgIHJldHVybiBBc3NldC5Bc3NldFR5cGVzLkJpdG1hcEZvbnQ7XHJcbiAgICAgICAgLy8gfSBlbHNlIGlmICggZXh0ID09IFwiLm1zZGZcIikge1xyXG4gICAgICAgIC8vICAgICByZXR1cm4gQXNzZXQuQXNzZXRUeXBlcy5Nc2RmRm9udDtcclxuICAgICAgICB9IHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBmaW5kUHJlbG9hZGVkQXNzZXQoIG5hbWUgKSB7XHJcbiAgICAgICAgZm9yICggbGV0IGFzc2V0IG9mIEFzc2V0LnByZWxvYWRBc3NldHMgKSB7XHJcbiAgICAgICAgICAgIGlmICggYXNzZXQubmFtZSA9PSBuYW1lICkgcmV0dXJuIGFzc2V0O1xyXG4gICAgICAgIH0gXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHByZWxvYWQoIGFzc2V0RmlsZW5hbWVzLHByb2dyZXNzQ2FsbGJhY2sgKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCAoIHJlc29sdmUscmVqZWN0ICk9PntcclxuICAgICAgICAgICAgZm9yICggbGV0IG5hbWUgb2YgYXNzZXRGaWxlbmFtZXMgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhc3NldCA9IG5ldyBBc3NldCggbmFtZSApO1xyXG5cclxuICAgICAgICAgICAgICAgIGFzc2V0LmxvYWQoKTtcclxuICAgICAgICAgICAgICAgIEFzc2V0LnByZWxvYWRBc3NldHMucHVzaCggYXNzZXQgKTtcclxuICAgICAgICAgICAgICAgIEFzc2V0LnByZWxvYWRBc3NldFByb21pc2VzLnB1c2goIGFzc2V0LmV2ZW50VG9Qcm9taXNlKCBFdmVudC5MT0FERUQgKSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFByb21pc2UuYWxsKCBBc3NldC5wcmVsb2FkQXNzZXRQcm9taXNlcyApLnRoZW4oIHJlc29sdmUgKTtcclxuICAgICAgICB9ICk7XHJcbiAgICB9XHJcbn1cclxuQXNzZXQuQXNzZXRUeXBlcyA9IHtcclxuICAgIFRleHR1cmU6ICAgICAgICAgICBcIlRleHR1cmVcIixcclxuICAgIFJlbmRlclRhcmdldDogICAgICBcIlJlbmRlclRhcmdldFwiLFxyXG4gICAgU291bmQ6ICAgICAgICAgICAgIFwiU291bmRcIixcclxuICAgIFNoYWRlcjogICAgICAgICAgICBcIlNoYWRlclwiLFxyXG4gICAgVHJ1ZVR5cGVGb250OiAgICAgIFwiVHJ1ZVR5cGVGb250XCIsXHJcbiAgICBNc2RmRm9udDogICAgICAgICAgXCJNc2RmRm9udFwiLFxyXG4gICAgQml0bWFwRm9udDogICAgICAgIFwiQml0bWFwRm9udFwiLFxyXG4gICAgUG9zdFByb2Nlc3NGaWx0ZXI6IFwiUG9zdFByb2Nlc3NGaWx0ZXJcIixcclxufTtcclxuQXNzZXQubGFzdElkID0gMTtcclxuQXNzZXQuZmluYWxpemF0aW9uUmVnaXN0cnkgPSBuZXcgRmluYWxpemF0aW9uUmVnaXN0cnkoIEFzc2V0LmZpbmFsaXplSGFuZGxlciApO1xyXG5Bc3NldC5sb2FkZWRFdmVudERpc3BhdGNoZXIgPSBuZXcgRXZlbnREaXNwYXRjaGVyKCk7XHJcblxyXG5Bc3NldC5wcmVsb2FkQXNzZXRzID0gW107XHJcbkFzc2V0LnByZWxvYWRBc3NldFByb21pc2VzID0gW107XHJcbiIsImltcG9ydCB7IFNwcml0ZSB9IGZyb20gJy4vU3ByaXRlJztcclxuaW1wb3J0IHsgVGV4dHVyZUJhc2UgfSBmcm9tICcuL1RleHR1cmVCYXNlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBCaXRtYXAgZXh0ZW5kcyBTcHJpdGUge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIEJpdG1hcC5cclxuICAgICAqIEBwYXJhbSB7VGV4dHVyZUJhc2V9IHRleHR1cmVcclxuICAgICAqIEBtZW1iZXJvZiBCaXRtYXBcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoIHRleHR1cmUgKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLl8kJHNwcml0ZVR5cGUgPSBTcHJpdGUuU3ByaXRlVHlwZXMuQklUTUFQO1xyXG4gICAgICAgIHRoaXMuXyQkdXBkYXRlQ29kZSA9IFNwcml0ZS5VcGRhdGVDb2Rlcy5VUERBVEVfRVhUUkE7XHJcbiAgICAgICAgdGhpcy50ZXh0dXJlID0gdGV4dHVyZTtcclxuICAgICAgICB0aGlzLl8kJGxvY2FsQm91bmRzLnggPSAwO1xyXG4gICAgICAgIHRoaXMuXyQkbG9jYWxCb3VuZHMueSA9IDA7XHJcbiAgICAgICAgdGhpcy5fJCRsb2NhbEJvdW5kcy53aWR0aCA9IHRleHR1cmUud2lkdGg7XHJcbiAgICAgICAgdGhpcy5fJCRsb2NhbEJvdW5kcy5oZWlnaHQgPSB0ZXh0dXJlLmhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBlbmNvZGVFeHRyYVJlbmRlcmluZ0luZm8oKSB7XHJcbiAgICAgICAgbGV0IGVuY29kZWRCdWZmZXIgPSBuZXcgRmxvYXQzMkFycmF5KCA5ICk7XHJcblxyXG4gICAgICAgIGVuY29kZWRCdWZmZXJbMF0gPSB0aGlzLnRleHR1cmUuYXNzZXQuaWQ7XHJcbiAgICAgICAgZW5jb2RlZEJ1ZmZlci5zZXQoIHRoaXMudGV4dHVyZS51dlJlY3QuZ2V0Q29ybmVyUG9pbnRzKCksMSApO1xyXG4gICAgICAgIHJldHVybiBbZW5jb2RlZEJ1ZmZlcl07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDruYTtirjrp7XsnZgg7YWN7Iqk7LOQ66W8IOq1kOyytO2VnOuLpC5cclxuICAgICAqIO2FjeyKpOyzkOunjCDrsJTrgIzqs6Ag67mE7Yq466e17J2YIO2BrOq4sOuKlCDrs4DtlZjsp4Ag7JWK64qU64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7VGV4dHVyZUJhc2V9IHRleHR1cmVcclxuICAgICAqIEBtZW1iZXJvZiBCaXRtYXBcclxuICAgICAqL1xyXG4gICAgc2V0VGV4dHVyZSggdGV4dHVyZSApIHtcclxuICAgICAgICB0aGlzLnRleHR1cmUgPSB0ZXh0dXJlO1xyXG4gICAgICAgIHRoaXMuXyQkdXBkYXRlQ29kZSB8PSBTcHJpdGUuVXBkYXRlQ29kZXMuVVBEQVRFX0VYVFJBO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEFzc2V0IH0gZnJvbSAnLi9Bc3NldCc7XG5pbXBvcnQgeyBGb250QmFzZSB9IGZyb20gJy4vRm9udEJhc2UnO1xuaW1wb3J0IHsgVXRpbHMgfSBmcm9tICcuL1V0aWxzJztcblxuZXhwb3J0IGNsYXNzIEJpdG1hcEZvbnQgZXh0ZW5kcyBGb250QmFzZSB7XG4gICAgY29uc3RydWN0b3IoIGJpdG1hcEZvbnROYW1lLHJlZmVyZW5jZVNpemUsIHN0eWxlcywgZmlsdGVyICkge1xuICAgICAgICBzdXBlciggYml0bWFwRm9udE5hbWUsIHJlZmVyZW5jZVNpemUsIHN0eWxlcyApO1xuICAgICAgICAvLyBCaXRtYXBcbiAgICAgICAgdGhpcy5hc3NldCA9IG5ldyBBc3NldCggYml0bWFwRm9udE5hbWUsQXNzZXQuQXNzZXRUeXBlcy5CaXRtYXBGb250ICk7XG4gICAgICAgIC8vIO2OmOydtOyngOqwgCDsl6zrn6zqsJwg7J6I64qUIO2PsO2KuOuKlCDslYTsp4Eg7LKY66asIOuqu+2VqFxuICAgICAgICBjb25zdCBwYWdlID0gdGhpcy5hc3NldC5mb250SW5mby5wYWdlc1swXTtcbiAgICAgICAgY29uc3QgcG5nU2l6ZSA9IFV0aWxzLmdldEltYWdlU2l6ZSggcGFnZS5maWxlICk7XG5cbiAgICAgICAgdGhpcy5hc3NldC5sb2FkKCB7IFxuICAgICAgICAgICAgYml0bWFwOiAgICAgICAgcGFnZS5maWxlLCBcbiAgICAgICAgICAgIHdpZHRoOiAgICAgICAgIHBuZ1NpemUud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6ICAgICAgICBwbmdTaXplLmhlaWdodCxcbiAgICAgICAgICAgIHJlZmVyZW5jZVNpemU6IHRoaXMucmVmZXJlbmNlU2l6ZSxcbiAgICAgICAgICAgIHN0eWxlczogICAgICAgIHRoaXMuc3R5bGVzLFxuICAgICAgICAgICAgZm9udEluZm86ICAgICAgdGhpcy5hc3NldC5mb250SW5mbyxcbiAgICAgICAgICAgIGZpbHRlcjogICAgICAgIGZpbHRlclxuICAgICAgICB9ICk7XG4gICAgICAgIHRoaXMuZm9udExvYWRlZCA9IGZhbHNlO1xuICAgIH0gICAgXG5cbiAgICBtZWFzdXJlVGV4dFdpZHRoKCBzdHIsc2l6ZSApIHtcbiAgICAgICAgc3VwZXIubWVhc3VyZVRleHRXaWR0aCggc3RyLHNpemUgKTtcblxuICAgICAgICBjb25zdCBmb250SW5mbyA9IHRoaXMuYXNzZXQuZm9udEluZm87XG4gICAgICAgIGNvbnN0IHNjYWxlID0gc2l6ZSA/IHNpemUgLyBmb250SW5mby5pbmZvLnNpemUgOiAxO1xuXG4gICAgICAgIGxldCB3aWR0aCA9IDA7XG5cbiAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrICkge1xuICAgICAgICAgICAgY29uc3QgY2hhciA9IHN0ci5jaGFyQ29kZUF0KCBpICk7XG4gICAgICAgICAgICBjb25zdCBjaGFySW5mbyA9IGZvbnRJbmZvLmNoYXJzW2NoYXJdO1xuXG4gICAgICAgICAgICB3aWR0aCArPSBjaGFySW5mby54YWR2YW5jZSAqIHNjYWxlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3aWR0aDsgICAgICAgIFxuICAgIH1cbn1cblxuXG4iLCJpbXBvcnQgeyBFdmVudCB9IGZyb20gJy4vRXZlbnQnO1xyXG5pbXBvcnQgeyBFdmVudERpc3BhdGNoZXIgfSBmcm9tICcuL0V2ZW50RGlzcGF0Y2hlcic7XHJcbmltcG9ydCB7IENvbXBvbmVudEhvbGRlciB9IGZyb20gJy4vQ29tcG9uZW50SG9sZGVyJztcclxuXHJcblxyXG5cclxuLyoqXHJcbiAqIOydtCDtgbTrnpjsiqTrpbwg7IOB7IaN7ZW07IScIOq4sOuKpeydhCDqtaztmITtlZzri6QuXHJcbiAqIOy7tO2PrOuEjO2KuOuKlCBDb21wb25lbnRIb2xkZXLsl5Ag7J6Q7Jyg66Gt6rKMIGFkZCwgcmVtb3Zl7ZWgIOyImCDsnojri6QuXHJcbiAqIGFkZCDrkKAg65WM64qUIG9uQWRkKCBob2xkZXIgKeqwgCByZW1vdmUg65CgIOuVjOuKlCBvblJlbW92ZSggaG9sZGVyICnqsIAg7Zi47Lac65Cc64ukLlxyXG4gKiBcclxuICogQGNsYXNzIENvbXBvbmVudFxyXG4gKiBcclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLy8gLyoqIFxyXG4gICAgICAgIC8vICAqIOy7tO2PrOuEjO2KuOqwgCBob2xkZXLsl5Ag7LaU6rCA65CgIOuVjCDtmLjstpzrkJzri6QuXHJcbiAgICAgICAgLy8gICogQGNhbGxiYWNrXHJcbiAgICAgICAgLy8gICogQHBhcmFtIHtDb21wb25lbnRIb2xkZXI9fSBob2xkZXJcclxuICAgICAgICAvLyAgKiBAbWVtYmVyb2YgQ29tcG9uZW50XHJcbiAgICAgICAgLy8gICovXHJcbiAgICAgICAgLy8gdGhpcy5vbkFkZGVkID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIC8vIC8qKiBcclxuICAgICAgICAvLyAgKiDsu7Ttj6zrhIztirjqsIAgaG9sZGVy7JeQ7IScIOu2hOumrOuQoCDrlYwg7Zi47Lac65Cc64ukLlxyXG4gICAgICAgIC8vICAqIEBjYWxsYmFja1xyXG4gICAgICAgIC8vICAqIEBwYXJhbSB7Q29tcG9uZW50SG9sZGVyPX0gaG9sZGVyXHJcbiAgICAgICAgLy8gICogQG1lbWJlcm9mIENvbXBvbmVudFxyXG4gICAgICAgIC8vICAqL1xyXG4gICAgICAgIC8vIHRoaXMub25SZW1vdmVkID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAvKiogXHJcbiAgICAgICAgICog7J20IOy7tO2PrOuEjO2KuOqwgCDrtpnsnYAgQ29tcG9uZW50SG9sZGVyIOqwnOyytC5cclxuICAgICAgICAgKiDsnbQg6rCc7LK064qUIGFkZEV2ZW50TGlzdGVuZXLrpbwg7ZuE7YK57ZW07IScIOyggOyepe2VtOuRkOqzoCDsnojsnLzrr4DroZxcclxuICAgICAgICAgKiDrqoXsi5zsoIHsnLzroZwg67aE66as7ZWY7KeAIOyViuyVhOuPhCDsnpDrj5nsnLzroZwg7LKY66as65Cc64ukLlxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEByZWFkb25seVxyXG4gICAgICAgICAqIEB0eXBlIHtDb21wb25lbnRIb2xkZXJ9XHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5ob2xkZXIgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7T2JqZWN0LjxzdHJpbmcsW10+fSAqL1xyXG4gICAgICAgIHRoaXMuX19zYXZlZEhhbmRsZXJzID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICB0aGlzLl9fbmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZTtcclxuICAgIH1cclxuICAgXHJcbiAgICAvKipcclxuICAgICAqIOydtCDqsJzssrTsl5Ag7Yq466as6rGw66W8IOy2lOqwgO2VoCDsiJgg7J6I64+E66GdIFRyaWdnZXJhYmxlIFByb3h566W8IOuwmO2ZmO2VnOuLpFxyXG4gICAgICogXHJcbiAgICAgKiBAcmV0dXJucyB7Q29tcG9uZW50fSAtIEV2ZW50RGlzcGF0Y2hlcuydmCBQcm94eeulvCDrpqzthLTtlZzri6RcclxuICAgICAqIEBtZW1iZXJvZiBDb21wb25lbnRcclxuICAgICAqL1xyXG4gICAgdHJpZ2dlcmFibGUoKSB7XHJcbiAgICAgICAgLy8gRXZlbnREaXNwYXRjaGVy7J2YIHRyaWdnZXJhYmxl7J2EIOu5jOugpOyEnCDsk7Tri6QuXHJcbiAgICAgICAgLy8gZGlzcGF0Y2hFdmVudOulvCDqtaztmITtlojquLAg65WM66y47JeQIOu5jOugpOyNqOuPhCDqtJzssK7ri6QuXHJcbiAgICAgICAgcmV0dXJuIEV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUudHJpZ2dlcmFibGUuY2FsbCggdGhpcyApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog7J20IOqwnOyytOydmCBob2xkZXLqsIAg7IaM7Jyg7ZWcIOydtOuypO2KuOulvCDsg53shLHtlZzri6QuXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gZXh0ZW5lZFZhbHVlcyBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gZXZlbnROYW1lIFxyXG4gICAgICogQHJldHVybnMge0V2ZW50fVxyXG4gICAgICogQG1lbWJlcm9mIENvbXBvbmVudFxyXG4gICAgICovXHJcbiAgICBuZXdFdmVudCggZXh0ZW5lZFZhbHVlcyxldmVudE5hbWUgKSB7XHJcbiAgICAgICAgcmV0dXJuIEV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUubmV3RXZlbnQuY2FsbCggdGhpcy5ob2xkZXIsIGV4dGVuZWRWYWx1ZXMsIGV2ZW50TmFtZSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiDsnbQg6rCc7LK07J2YIGhvbGRlcuqwgCDshozsnKDtlZwg7Yq466as6rGw66W8IOyDneyEse2VnOuLpC5cclxuICAgICAqIO2KuOumrOqxsOuKlCDsnbQg6rCc7LK07J2YIO2KueyglSDtlITroZztjbzti7DqsJLsnbQg67CU64CUIOuVjCDsnpDrj5nsnLzroZwg7J2067Kk7Yq46rCAIOuwnOyDneuQmOuPhOuhnSDtlaAg7IiYIOyeiOuLpC5cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHByb3BzIC0g7Yq466as6rGw66W8IOqxuCDtlITroZztjbzti7DsnZgg66qp66GdLiB7IGE6dHJ1ZSwgYjpmYWxzZSB9IOuhnCDtlZjrqbQgYeyXkOuKlCDqsbjqs6AgYuyXkOuKlCDsp4DsmrTri6QuXHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uPX0gZmlsdGVyRnVuY3Rpb24gLSB0cnVl66W8IOumrO2EtO2VnCDqsr3smrDsl5Drp4wg7J2067Kk7Yq46rCAIOyLpO2WieuQnOuLpFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBldmVudE5hbWUgLSDsg53rnrXtlZjrqbQg7J6Q64+Z7Jy866GcIOydtOuypO2KuCDsnbTrpoTsnbQg67aA7Jes65Cc64ukXHJcbiAgICAgKiBAcmV0dXJucyB7RXZlbnR9XHJcbiAgICAgKiBAbWVtYmVyb2YgQ29tcG9uZW50XHJcbiAgICAgKi9cclxuICAgIG5ld1RyaWdnZXIoIHByb3BzLCBmaWx0ZXJGdW5jdGlvbiwgZXZlbnROYW1lICkge1xyXG4gICAgICAgIHJldHVybiBFdmVudERpc3BhdGNoZXIucHJvdG90eXBlLm5ld1RyaWdnZXIuY2FsbCggdGhpcywgcHJvcHMsIGZpbHRlckZ1bmN0aW9uLCBldmVudE5hbWUgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOy7tO2PrOuEjO2KuOydmCDsnbTrpoTsnYQg64+M66Ck7KSA64ukXHJcbiAgICAgKiBcclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICAgKiBAbWVtYmVyb2YgQ29tcG9uZW50XHJcbiAgICAgKi9cclxuICAgIGdldE5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX19uYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog7Lu07Y+s64SM7Yq47J2YIOydtOumhOydhCDshKTsoJXtlZzri6QuIOq4sOuzuCDqsJLsnYAg7YG0656Y7IqkIOydtOumhOydtOuLpC5cclxuICAgICAqIOydtCDqsJLsnYQg67CU6r+U7IScIOqwmeydgCDtg4DsnoXsnZgg7Lu07Y+s64SM7Yq466W8IOyXrOufrOqwnCDrtpnsnbwg7IiYIOyeiOuLpC5cclxuICAgICAqIOunjOyVvSDsnbTrpoTsnbQg6rCZ64uk66m0IOybkOuemCDsnojrjZgg7Lu07Y+s64SM7Yq464qUIOu2hOumrOuQnOuLpC5cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZcclxuICAgICAqIEBtZW1iZXJvZiBDb21wb25lbnRcclxuICAgICAqL1xyXG4gICAgc2V0TmFtZSggdiApIHtcclxuICAgICAgICB0aGlzLl9fbmFtZSA9IHY7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RXZlbnR8c3RyaW5nfSBldmVudE9yTmFtZVxyXG4gICAgICogQHBhcmFtIHtvYmplY3Q9fSBleHRlbmRlZFZhbHVlc1xyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgKiBAbWVtYmVyb2YgQ29tcG9uZW50XHJcbiAgICAgKi9cclxuICAgIGRpc3BhdGNoRXZlbnQoIGV2ZW50T3JOYW1lLCBleHRlbmRlZFZhbHVlcyApIHtcclxuICAgICAgICBjb25zb2xlLmFzc2VydCggdGhpcy5ob2xkZXIsIGDsu7Ttj6zrhIztirgg7ZmA642U6rCAIOyXhuuKlOuNsCDsnbTrsqTtirjrpbwg67Cc7IOd7Iuc7YKk66Ck6rOgIO2VnOuLpGAgKTtcclxuICAgICAgICBsZXQgZXZlbnQ7XHJcblxyXG4gICAgICAgIGlmICggdHlwZW9mIGV2ZW50T3JOYW1lID09IFwic3RyaW5nXCIgKSB7XHJcbiAgICAgICAgICAgIGV2ZW50ID0gbmV3IEV2ZW50KCBldmVudE9yTmFtZSApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGV2ZW50ID0gZXZlbnRPck5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBldmVudC50YXJnZXQgPSB0aGlzLmhvbGRlcjtcclxuICAgICAgICBldmVudC5jb21wb25lbnQgPSB0aGlzO1xyXG4gICAgICAgIE9iamVjdC5hc3NpZ24oIGV2ZW50LGV4dGVuZGVkVmFsdWVzICk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmhvbGRlci5kaXNwYXRjaEV2ZW50KCBldmVudCApO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpc0FkZGVkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhvbGRlciAhPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZUZyb21Ib2xkZXIoKSB7XHJcbiAgICAgICAgY29uc29sZS5hc3NlcnQoIHRoaXMuaG9sZGVyLCBg7Lu07Y+s64SM7Yq4IO2ZgOuNlOqwgCDsl4bripTrjbAg7KCc6rGw7ZWY66Ck6rOgIO2VnOuLpGAgKTtcclxuICAgICAgICB0aGlzLmhvbGRlci5yZW1vdmVDb21wb25lbnQoIHRoaXMgKTtcclxuICAgIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgRXZlbnREaXNwYXRjaGVyIH0gZnJvbSAnLi9FdmVudERpc3BhdGNoZXInO1xuaW1wb3J0IHsgVXRpbHMgfSBmcm9tICcuL1V0aWxzJztcblxuY29uc3Qgc2VhcmNoTWFwID0gbmV3IFdlYWtNYXAoKTtcblxuXG5leHBvcnQgY2xhc3MgQ29tcG9uZW50SG9sZGVyIGV4dGVuZHMgRXZlbnREaXNwYXRjaGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fX2NvbXBvbmVudHMgPSB7fTtcbiAgICB9XG5cbiAgICBhZGRDb21wb25lbnQoIGNvbSApIHtcbiAgICAgICAgY29uc3QgY29tTmFtZSA9IGNvbS5nZXROYW1lKCk7XG5cbiAgICAgICAgaWYgKCBjb20uaG9sZGVyICE9IG51bGwgKSB7XG4gICAgICAgICAgICAvLyDrtpnsnbTroKTripQg7Lu07Y+s64SM7Yq46rCAIOuLpOuluOuNsCDrtpnslrTsnojsl4jrjZgg6rK97JqwIOygnOqxsFxuICAgICAgICAgICAgY29tLnJlbW92ZUZyb21Ib2xkZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIHRoaXMuX19jb21wb25lbnRzW2NvbU5hbWVdICE9IG51bGwgKSB7XG4gICAgICAgICAgICAvLyDqsJnsnYAg7J2066aE7J2YIOy7tO2PrOuEjO2KuOqwgCDrtpnslrTsnojrjZgg6rK97JqwIOydtOyghCDsu7Ttj6zrhIztirjrpbwg7KCc6rGwXG4gICAgICAgICAgICB0aGlzLl9fY29tcG9uZW50c1tjb21OYW1lXS5yZW1vdmVGcm9tSG9sZGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fX2NvbXBvbmVudHNbY29tTmFtZV0gPSBjb207XG4gICAgICAgIGNvbnN0IGFyciA9IHNlYXJjaE1hcC5nZXQoIGNvbS5jb25zdHJ1Y3RvciApIHx8IFtdO1xuXG4gICAgICAgIGlmICggIWFyci5pbmNsdWRlcyggY29tICkgKSB7XG4gICAgICAgICAgICBhcnIucHVzaCggY29tICk7XG4gICAgICAgICAgICBzZWFyY2hNYXAuc2V0KCBjb20uY29uc3RydWN0b3IsYXJyICk7XG4gICAgICAgIH1cbiAgICAgICAgY29tLmhvbGRlciA9IG5ldyBQcm94eSggdGhpcywge1xuICAgICAgICAgICAgZ2V0OiAoIHQsayApID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIGsgPT0gXCJhZGRFdmVudExpc3RlbmVyXCIgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiggZXZlbnROYW1lLCBmdW5jLCBjb250ZXh0LCBpc09uY2UgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyggYCR7Y29tTmFtZX3snZggJHtldmVudE5hbWV97J2067Kk7Yq4IO2VuOuTpOufrOulvCDtm4TtgrntlbTshJwg7KCA7J6l7ZWc64ukYCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29tLl9fc2F2ZWRIYW5kbGVycyA9IGNvbS5fX3NhdmVkSGFuZGxlcnMgfHwge307XG4gICAgICAgICAgICAgICAgICAgICAgICBjb20uX19zYXZlZEhhbmRsZXJzW2V2ZW50TmFtZV0gPSBjb20uX19zYXZlZEhhbmRsZXJzW2V2ZW50TmFtZV0gfHwgW107XG4gICAgICAgICAgICAgICAgICAgICAgICBjb20uX19zYXZlZEhhbmRsZXJzW2V2ZW50TmFtZV0ucHVzaCggW2Z1bmMsY29udGV4dF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v7JuQ67O47J2EIOyLpO2Wie2VtOykgOuLpFxuICAgICAgICAgICAgICAgICAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgICAgICB0LmFkZEV2ZW50TGlzdGVuZXIoIC4uLmFyZ3VtZW50cyApO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSByZXR1cm4gdFtrXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSApO1xuICAgICAgICBpZiAoIGNvbS5vbkFkZGVkICkge1xuICAgICAgICAgICAgY29tLm9uQWRkZWQuY2FsbCggY29tLCBjb20uaG9sZGVyICk7XG4gICAgICAgIH0gZWxzZSBpZiAoIE9iamVjdC5nZXRQcm90b3R5cGVPZiggY29tICkub25BZGRlZCApIHtcbiAgICAgICAgICAgIE9iamVjdC5nZXRQcm90b3R5cGVPZiggY29tICkub25BZGRlZC5jYWxsKCBjb20sIGNvbS5ob2xkZXIgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb207XG4gICAgfVxuXG4gICAgY3JlYXRlQ29tcG9uZW50KCBjbGFzc1R5cGUsb2JqICkge1xuICAgICAgICBjb25zdCBuZXdDb20gPSBuZXcgY2xhc3NUeXBlKCk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21wb25lbnQoIE9iamVjdC5hc3NpZ24oIG5ld0NvbSxvYmogKSApO1xuXG4gICAgICAgIHJldHVybiBuZXdDb207XG4gICAgfVxuXG5cbiAgICByZW1vdmVDb21wb25lbnQoIGNvbSApIHtcbiAgICAgICAgaWYgKCB0eXBlb2YgY29tID09IFwiZnVuY3Rpb25cIiAmJiBjb20ucHJvdG90eXBlICE9IG51bGwgKSB7XG4gICAgICAgICAgICAvLyBDbGFzc1R5cGXsnLzroZwg7IKt7KCc66W8IOyLnOuPhO2VmOuKlCDqsr3smrBcbiAgICAgICAgICAgIC8vIO2VtOuLuSDtg4DsnoXsnZgg7Lu07Y+s64SM7Yq466W8IOuqqOuRkCDsgq3soJztlZzri6RcbiAgICAgICAgICAgIGZvciAoIGNvbnN0IGtleSBpbiB0aGlzLl9fY29tcG9uZW50cyApIHtcbiAgICAgICAgICAgICAgICBpZiAoIGNvbS5nZXROYW1lKCkgPT0ga2V5ICkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNvbXBvbmVudCggdGhpcy5fX2NvbXBvbmVudHNba2V5XSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbU5hbWUgPSBjb20uZ2V0TmFtZSgpO1xuXG4gICAgICAgIGlmICggY29tLm9uUmVtb3ZlZCApIHtcbiAgICAgICAgICAgIGNvbS5vblJlbW92ZWQuY2FsbCggY29tLCBjb20uaG9sZGVyICk7XG4gICAgICAgIH0gZWxzZSBpZiAoIE9iamVjdC5nZXRQcm90b3R5cGVPZiggY29tICkub25SZW1vdmVkICkge1xuICAgICAgICAgICAgT2JqZWN0LmdldFByb3RvdHlwZU9mKCBjb20gKS5vblJlbW92ZWQuY2FsbCggY29tLCBjb20uaG9sZGVyICk7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIHRoaXMuX19jb21wb25lbnRzW2NvbU5hbWVdO1xuXG4gICAgICAgIGlmICggY29tLl9fc2F2ZWRIYW5kbGVycyApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCBgJHtjb21OYW1lfeydmCDsnbTrsqTtirgg7ZW465Ok65+s66W8IOygleumrO2VnOuLpGAgKTtcbiAgICAgICAgICAgIGZvciAoIGNvbnN0IGV2ZW50TmFtZSBpbiBjb20uX19zYXZlZEhhbmRsZXJzICkge1xuICAgICAgICAgICAgICAgIGZvciAoIGNvbnN0IFtmdW5jLGNvbnRleHRdIG9mIGNvbS5fX3NhdmVkSGFuZGxlcnNbZXZlbnROYW1lXSApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIGAke2V2ZW50TmFtZX0g7J2067Kk7Yq4IO2VuOuTpOufrCDsgq3soJxgICk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lciggZXZlbnROYW1lLGZ1bmMsY29udGV4dCApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFyciA9IHNlYXJjaE1hcC5nZXQoIGNvbS5jb25zdHJ1Y3RvciApO1xuXG4gICAgICAgIGNvbnNvbGUuYXNzZXJ0KCBBcnJheS5pc0FycmF5KCBhcnIgKSApO1xuICAgICAgICBjb25zdCBpID0gYXJyLmluZGV4T2YoIGNvbSApO1xuXG4gICAgICAgIGlmICggaSA+PSAwICkge1xuICAgICAgICAgICAgYXJyLnNwbGljZSggaSwxICk7XG4gICAgICAgICAgICBpZiAoIGFyci5sZW5ndGggPiAwICkge1xuICAgICAgICAgICAgICAgIHNlYXJjaE1hcC5zZXQoIGNvbS5jb25zdHJ1Y3RvcixhcnIgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VhcmNoTWFwLmRlbGV0ZSggY29tLmNvbnN0cnVjdG9yICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYXNDb21wb25lbnQoIGNvbVR5cGUgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9fY29tcG9uZW50c1tjb21UeXBlLm5hbWVdICE9IG51bGw7XG4gICAgfVxuXG4gICAgZ2V0IGNvbXBvbmVudHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9fY29tcG9uZW50cztcbiAgICB9XG5cbiAgICBnZXRDb21wb25lbnQoIGNvbVR5cGUgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9fY29tcG9uZW50c1t0eXBlb2YgY29tVHlwZSA9PSBcInN0cmluZ1wiID8gY29tVHlwZSA6IGNvbVR5cGUubmFtZV07XG4gICAgfVxuXG4gICAgZ2V0Q29tcGF0aWJsZUNvbXBvbmVudHMoIGNvbVR5cGUgKSB7XG4gICAgICAgIGNvbnN0IHIgPSBbXTtcblxuICAgICAgICBmb3IgKCBjb25zdCBjb21OYW1lIGluIHRoaXMuX19jb21wb25lbnRzICkge1xuICAgICAgICAgICAgY29uc3QgY29tID0gdGhpcy5fX2NvbXBvbmVudHNbY29tTmFtZV07XG5cbiAgICAgICAgICAgIGlmICggY29tIGluc3RhbmNlb2YgY29tVHlwZSApIHtcbiAgICAgICAgICAgICAgICByLnB1c2goIGNvbSApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHI7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldEFsbENvbXBvbmVudHMoIGNvbVR5cGUgKSB7XG4gICAgICAgIHJldHVybiBzZWFyY2hNYXAuZ2V0KCBjb21UeXBlICk7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldEFsbENvbXBvbmVudEhvbGRlcnMoIC4uLmNvbVR5cGVzICkge1xuICAgICAgICBsZXQgYXJyO1xuXG4gICAgICAgIGFyciA9IHRoaXMuZ2V0QWxsQ29tcG9uZW50cyggY29tVHlwZXNbMF0gKTtcbiAgICAgICAgZm9yICggbGV0IGkgPSAxOyBpIDwgY29tVHlwZXMubGVuZ3RoOyBpKysgKSB7XG4gICAgICAgICAgICBjb25zdCBhcnIyID0gdGhpcy5nZXRBbGxDb21wb25lbnRzKCBjb21UeXBlc1tpXSApO1xuXG4gICAgICAgICAgICBhcnIgPSBhcnIyLmZpbHRlciggKCB2LGksYSApID0+IGFyci5pbmNsdWRlcyggdiApICk7XG4gICAgICAgIH1cbiBcbiAgICAgICAgY29uc3QgciA9IFtdO1xuXG4gICAgICAgIGZvciAoIGNvbnN0IG4gb2YgYXJyICkge1xuICAgICAgICAgICAgci5wdXNoKCBuLmhvbGRlciApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHI7XG4gICAgfVxuXG4gICAgaGFzQWxsQ29tcG9uZW50cyggLi4uY29tVHlwZXMgKSB7XG4gICAgICAgIGZvciAoIGNvbnN0IGNvbVR5cGUgb2YgY29tVHlwZXMgKSB7XG4gICAgICAgICAgICBpZiAoICF0aGlzLmhhc0NvbXBvbmVudCggY29tVHlwZSApICkgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuQ29tcG9uZW50SG9sZGVyLnJlZ2lzdGVyZWRIb2xkZXJzID0ge307XG5cbiIsIlxyXG4vKiogQHR5cGVkZWYge2ltcG9ydChcIi4vQ29tcG9uZW50XCIpLkNvbXBvbmVudH0gQ29tcG9uZW50ICovXHJcbi8qKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9TcHJpdGVcIikuU3ByaXRlfSBTcHJpdGUgKi9cclxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL0V2ZW50RGlzcGF0Y2hlclwiKS5FdmVudERpc3BhdGNoZXJ9IEV2ZW50RGlzcGF0Y2hlciAqL1xyXG5cclxuLyoqXHJcbiAqIFxyXG4gKiBAY2xhc3MgRXZlbnRcclxuICAqL1xyXG5leHBvcnQgY2xhc3MgRXZlbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKkNyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgRXZlbnQuXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWVcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gZXh0ZW5kZWRWYWx1ZXNcclxuICAgICAqIEBwYXJhbSB7RXZlbnREaXNwYXRjaGVyPX0gb3duZXJcclxuICAgICAqIEBtZW1iZXJvZiBFdmVudFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvciggbmFtZSA9IFwiQEVWRU5UXCIgKyAoICsrRXZlbnQubmV4dElkICksIGV4dGVuZGVkVmFsdWVzLG93bmVyICkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5zdG9wcGVkID0gZmFsc2U7XHJcbiAgICAgICAgLyoqIEB0eXBlIHtFdmVudERpc3BhdGNoZXJ9ICovXHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgLyoqIEB0eXBlIHtDb21wb25lbnR9ICovXHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgLyoqIEB0eXBlIHtFdmVudERpc3BhdGNoZXJ9ICovXHJcbiAgICAgICAgdGhpcy5vd25lciA9IG93bmVyO1xyXG4gICAgICAgIHRoaXMuZm9yd2FyZGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmICggZXh0ZW5kZWRWYWx1ZXMgKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oIHRoaXMsIGV4dGVuZGVkVmFsdWVzICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmdW5jXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdD19IGNvbnRleHRcclxuICAgICAqIEByZXR1cm5zIHtFdmVudH1cclxuICAgICAqIEBtZW1iZXJvZiBFdmVudFxyXG4gICAgICovXHJcbiAgICBvbiggZnVuYywgY29udGV4dCApIHtcclxuICAgICAgICBpZiAoIHRoaXMub3duZXIgPT0gbnVsbCApIHRoaXMub3duZXIgPSBuZXcgRXZlbnQuRXZlbnREaXNwYXRjaGVyKCk7XHJcbiAgICAgICAgdGhpcy5vd25lci5vbiggdGhpcy5uYW1lLCBmdW5jLCBjb250ZXh0ICk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmdW5jXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdD19IGNvbnRleHRcclxuICAgICAqIEByZXR1cm5zIHtFdmVudH1cclxuICAgICAqIEBtZW1iZXJvZiBFdmVudFxyXG4gICAgICovXHJcbiAgICBvbmNlKCBmdW5jLCBjb250ZXh0ICkge1xyXG4gICAgICAgIGlmICggdGhpcy5vd25lciA9PSBudWxsICkgdGhpcy5vd25lciA9IG5ldyBFdmVudC5FdmVudERpc3BhdGNoZXIoKTtcclxuICAgICAgICB0aGlzLm93bmVyLm9uY2UoIHRoaXMubmFtZSwgZnVuYywgY29udGV4dCApO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuY1xyXG4gICAgICogQHBhcmFtIHtvYmplY3Q9fSBjb250ZXh0XHJcbiAgICAgKiBAcGFyYW0ge1Nwcml0ZT19IHJlZlNwcml0ZVxyXG4gICAgICogQHJldHVybnMge0V2ZW50fVxyXG4gICAgICogQG1lbWJlcm9mIEV2ZW50XHJcbiAgICAgKi9cclxuICAgIG9uU3RhZ2UoIGZ1bmMsIGNvbnRleHQscmVmU3ByaXRlICkge1xyXG4gICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIGNvbnNvbGUuYXNzZXJ0KCB0aGlzLm93bmVyICYmIHRoaXMub3duZXIuYWRkQ2hpbGQsIFwiU3ByaXRl6rCAIOyVhOuLiOuptCBvblN0YWdl66W8IO2VoCDsiJgg7JeG7Iq164uI64ukLlwiICk7XHJcbiAgICAgICAgdGhpcy5vd25lci5vblN0YWdlKCB0aGlzLm5hbWUsIGZ1bmMsIGNvbnRleHQsIHJlZlNwcml0ZSApO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuY1xyXG4gICAgICogQHBhcmFtIHtvYmplY3Q9fSBjb250ZXh0XHJcbiAgICAgKiBAcmV0dXJucyB7RXZlbnR9XHJcbiAgICAgKiBAbWVtYmVyb2YgRXZlbnRcclxuICAgICAqL1xyXG4gICAgcmVtb3ZlKCBmdW5jLCBjb250ZXh0ICkge1xyXG4gICAgICAgIGlmICggdGhpcy5vd25lciA9PSBudWxsICkgdGhpcy5vd25lciA9IG5ldyBFdmVudC5FdmVudERpc3BhdGNoZXIoKTtcclxuICAgICAgICB0aGlzLm93bmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoIHRoaXMubmFtZSwgZnVuYywgY29udGV4dCApO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtvYmplY3Q9fSBleHRlbmRlZFZhbHVlc1xyXG4gICAgICogQHJldHVybnMge0V2ZW50fVxyXG4gICAgICogQG1lbWJlcm9mIEV2ZW50XHJcbiAgICAgKi9cclxuICAgIGRpc3BhdGNoKCBleHRlbmRlZFZhbHVlcyApIHtcclxuICAgICAgICBpZiAoIHRoaXMub3duZXIgPT0gbnVsbCApIHRoaXMub3duZXIgPSBuZXcgRXZlbnQuRXZlbnREaXNwYXRjaGVyKCk7XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbiggdGhpcywgZXh0ZW5kZWRWYWx1ZXMgKTtcclxuICAgICAgICB0aGlzLm93bmVyLmRpc3BhdGNoRXZlbnQoIHRoaXMgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBcclxuXHJcbiAgICBzdG9wUHJvcGFnYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5zdG9wcGVkID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUYXJnZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBpc0lucHV0RXZlbnQoIGV2ZW50TmFtZSApIHtcclxuICAgICAgICBjb25zdCBhdHQgPSBFdmVudC5ldmVudEF0dHJpYnNbZXZlbnROYW1lXTtcclxuXHJcbiAgICAgICAgaWYgKCBhdHQgIT0gbnVsbCApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF0dC5pc0lucHV0ID09IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5FdmVudC5TVEFHRV9WSVNJQkxFID0gXCJzdGFnZVZpc2libGVcIjtcclxuRXZlbnQuU1RBR0VfRk9DVVMgPSBcInN0YWdlRm9jdXNcIjtcclxuRXZlbnQuRU5URVJfRlJBTUUgPSBcImVudGVyRnJhbWVcIjtcclxuRXZlbnQuUkVOREVSID0gXCJyZW5kZXJcIjtcclxuRXZlbnQuQURERURfVE9fU1RBR0UgPSBcImFkZGVkVG9TdGFnZVwiO1xyXG5FdmVudC5SRU1PVkVEX0ZST01fU1RBR0UgPSBcInJlbW92ZWRGcm9tU3RhZ2VcIjtcclxuRXZlbnQuUE9JTlRFUl9ET1dOID0gXCJwb2ludGVyRG93blwiO1xyXG5FdmVudC5QT0lOVEVSX1VQID0gXCJwb2ludGVyVXBcIjtcclxuRXZlbnQuUE9JTlRFUl9NT1ZFID0gXCJwb2ludGVyTW92ZVwiO1xyXG5FdmVudC5NT1VTRV9ET1dOID0gXCJtb3VzZURvd25cIjtcclxuRXZlbnQuTU9VU0VfVVAgPSBcIm1vdXNlVXBcIjtcclxuRXZlbnQuTU9VU0VfTU9WRSA9IFwibW91c2VNb3ZlXCI7XHJcbkV2ZW50Lk1PVVNFX1dIRUVMID0gXCJtb3VzZVdoZWVsXCI7XHJcbkV2ZW50LlRPVUNIRVNfQkVHSU4gPSBcInRvdWNoZXNCZWdpblwiO1xyXG5FdmVudC5UT1VDSEVTX01PVkUgPSBcInRvdWNoZXNNb3ZlXCI7XHJcbkV2ZW50LlRPVUNIRVNfRU5EID0gXCJ0b3VjaGVzRW5kXCI7XHJcbkV2ZW50LlRPVUNIRVNfQ0FOQ0VMID0gXCJ0b3VjaGVzQ2FuY2VsXCI7XHJcbkV2ZW50LktFWV9VUCA9IFwia2V5VXBcIjtcclxuRXZlbnQuS0VZX0RPV04gPSBcImtleURvd25cIjtcclxuRXZlbnQuVElNRVIgPSBcInRpbWVyXCI7XHJcbkV2ZW50LlRFWFRVUkVfVVBEQVRFID0gXCJ0ZXh0dXJlVXBkYXRlXCI7XHJcbkV2ZW50LlJFU0laRSA9IFwicmVzaXplXCI7XHJcbkV2ZW50LlJFQURZID0gXCJyZWFkeVwiO1xyXG5FdmVudC5DT01QTEVURSA9IFwiY29tcGxldGVcIjtcclxuRXZlbnQuRVJST1IgPSBcImVycm9yXCI7XHJcbkV2ZW50LkJFRk9SRV9VUERBVEUgPSBcImJlZm9yZVVwZGF0ZVwiO1xyXG5FdmVudC5BRlRFUl9VUERBVEUgPSBcImFmdGVyVXBkYXRlXCI7XHJcbkV2ZW50LkxPQURFRCA9IFwibG9hZGVkXCI7XHJcbkV2ZW50LkFMTCA9IFwiKlwiO1xyXG5FdmVudC5BUFBMSUNBVElPTl9JTklUID0gXCJBUFBMSUNBVElPTl9JTklUXCI7XHJcbkV2ZW50LkFQUExJQ0FUSU9OX1NUQVJUID0gXCJBUFBMSUNBVElPTl9TVEFSVFwiO1xyXG5cclxuRXZlbnQuZXZlbnRBdHRyaWJzID0ge1xyXG4gICAgW0V2ZW50LlBPSU5URVJfRE9XTl06ICAgeyBpc0lucHV0OiB0cnVlIH0sXHJcbiAgICBbRXZlbnQuUE9JTlRFUl9VUF06ICAgICB7IGlzSW5wdXQ6IHRydWUgfSxcclxuICAgIFtFdmVudC5QT0lOVEVSX01PVkVdOiAgIHsgaXNJbnB1dDogdHJ1ZSB9LFxyXG4gICAgW0V2ZW50Lk1PVVNFX0RPV05dOiAgICAgeyBpc0lucHV0OiB0cnVlLCBkZXZpY2U6IFwibW91c2VcIiB9LFxyXG4gICAgW0V2ZW50Lk1PVVNFX1VQXTogICAgICAgeyBpc0lucHV0OiB0cnVlLCBkZXZpY2U6IFwibW91c2VcIiB9LFxyXG4gICAgW0V2ZW50Lk1PVVNFX01PVkVdOiAgICAgeyBpc0lucHV0OiB0cnVlLCBkZXZpY2U6IFwibW91c2VcIiB9LFxyXG4gICAgW0V2ZW50Lk1PVVNFX1dIRUVMXTogICAgeyBpc0lucHV0OiB0cnVlLCBkZXZpY2U6IFwibW91c2VcIiB9LFxyXG4gICAgW0V2ZW50LlRPVUNIRVNfQkVHSU5dOiAgeyBpc0lucHV0OiB0cnVlLCBkZXZpY2U6IFwidG91Y2hcIiB9LFxyXG4gICAgW0V2ZW50LlRPVUNIRVNfRU5EXTogICAgeyBpc0lucHV0OiB0cnVlLCBkZXZpY2U6IFwidG91Y2hcIiB9LFxyXG4gICAgW0V2ZW50LlRPVUNIRVNfTU9WRV06ICAgeyBpc0lucHV0OiB0cnVlLCBkZXZpY2U6IFwidG91Y2hcIiB9LFxyXG4gICAgW0V2ZW50LlRPVUNIRVNfQ0FOQ0VMXTogeyBpc0lucHV0OiB0cnVlLCBkZXZpY2U6IFwidG91Y2hcIiB9LFxyXG4gICAgW0V2ZW50LktFWV9VUF06ICAgICAgICAgeyBpc0lucHV0OiB0cnVlLCBkZXZpY2U6IFwia2V5Ym9hcmRcIiB9LFxyXG4gICAgW0V2ZW50LktFWV9ET1dOXTogICAgICAgeyBpc0lucHV0OiB0cnVlLCBkZXZpY2U6IFwia2V5Ym9hcmRcIiB9LFxyXG59O1xyXG5cclxuRXZlbnQuRXZlbnREaXNwYXRjaGVyID0gdW5kZWZpbmVkO1xyXG5FdmVudC5uZXh0SWQgPSAwO1xyXG5cclxuXHJcbiIsImltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSBcImV2ZW50ZW1pdHRlcjNcIjtcclxuaW1wb3J0IHsgRXZlbnQgfSBmcm9tICcuL0V2ZW50JztcclxuXHJcbi8vIGV2ZW50ZW1pdHRlcjPsl5DshJwgX2V2ZW50cyDtj7TrjZTsl5Ag7J2067Kk7Yq466W8IOuztOq0gO2VnOuLpOqzoCDqsIDsoJXtlZjqs6Ag7JOw7Jes7KeEIOy9lOuTnOyehFxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBFdmVudERpc3BhdGNoZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDsnbQg6rCc7LK07JeQIO2KuOumrOqxsOulvCDstpTqsIDtlaAg7IiYIOyeiOuPhOuhnSBUcmlnZ2VyYWJsZSBQcm94eeulvCDrsJjtmZjtlZzri6RcclxuICAgICAqIFxyXG4gICAgICogQHJldHVybnMge0V2ZW50RGlzcGF0Y2hlcn0gLSBFdmVudERpc3BhdGNoZXLsnZggUHJveHnrpbwg66as7YS07ZWc64ukXHJcbiAgICAgKiBAbWVtYmVyb2YgRXZlbnREaXNwYXRjaGVyXHJcbiAgICAgKi9cclxuICAgIHRyaWdnZXJhYmxlKCkge1xyXG4gICAgICAgIHRoaXMuX190cmlnZ2VycyA9IHt9O1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFByb3h5KCB0aGlzLCB7XHJcbiAgICAgICAgICAgIHNldCggdGFyZ2V0LCBrZXksIHZhbHVlLCByZWNlaXZlciApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBSZWZsZWN0LnNldCggdGFyZ2V0LCBrZXksIHZhbHVlLCByZWNlaXZlciApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJpZ2dlcnMgPSB0YXJnZXQuX190cmlnZ2Vyc1trZXldO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggdHJpZ2dlcnMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICggY29uc3QgW2V2ZW50TmFtZSwgZnVuY10gb2YgdHJpZ2dlcnMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZnVuYyA9PSBudWxsIHx8IGZ1bmMoIHRhcmdldCwga2V5ICkgKSB0YXJnZXQuZGlzcGF0Y2hFdmVudCggZXZlbnROYW1lLCB7IGtleSB9ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiByO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog7J20IOqwnOyytOqwgCDshozsnKDtlZwg7J2067Kk7Yq466W8IOyDneyEse2VnOuLpC5cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtvYmplY3Q9fSBleHRlbmVkVmFsdWVzIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBldmVudE5hbWUgXHJcbiAgICAgKiBAcmV0dXJucyB7RXZlbnR9XHJcbiAgICAgKi9cclxuICAgIG5ld0V2ZW50KCBleHRlbmVkVmFsdWVzLGV2ZW50TmFtZSApIHtcclxuICAgICAgICByZXR1cm4gbmV3IEV2ZW50KCBldmVudE5hbWUsIGV4dGVuZWRWYWx1ZXMsIHRoaXMgKTtcclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiDsnbQg6rCc7LK06rCAIOyGjOycoO2VnCDtirjrpqzqsbDrpbwg7IOd7ISx7ZWc64ukLlxyXG4gICAgICog7Yq466as6rGw64qUIOydtCDqsJzssrTsnZgg7Yq57KCVIO2UhOuhnO2NvO2LsOqwkuydtCDrsJTrgJQg65WMIOyekOuPmeycvOuhnCDsnbTrsqTtirjqsIAg67Cc7IOd65CY64+E66GdIO2VoCDsiJgg7J6I64ukLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gcHJvcHMgLSDtirjrpqzqsbDrpbwg6rG4IO2UhOuhnO2NvO2LsOydmCDrqqnroZ0uIHsgYTp0cnVlLCBiOmZhbHNlIH0g66GcIO2VmOuptCBh7JeQ64qUIOqxuOqzoCBi7JeQ64qUIOyngOyatOuLpC5cclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb249fSBmaWx0ZXJGdW5jdGlvbiAtIHRydWXrpbwg66as7YS07ZWcIOqyveyasOyXkOunjCDsnbTrsqTtirjqsIAg7Iuk7ZaJ65Cc64ukXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IGV2ZW50TmFtZSAtIOyDneuete2VmOuptCDsnpDrj5nsnLzroZwg7J2067Kk7Yq4IOydtOumhOydtCDrtoDsl6zrkJzri6RcclxuICAgICAqIEByZXR1cm5zIHtFdmVudH1cclxuICAgICAqL1xyXG4gICAgbmV3VHJpZ2dlciggcHJvcHMsIGZpbHRlckZ1bmN0aW9uLCBldmVudE5hbWUgKSB7XHJcbiAgICAgICAgY29uc29sZS5hc3NlcnQoIHRoaXMuX190cmlnZ2VycyAhPSBudWxsLCBcIuydtCDqsJzssrTripQgdHJpZ2dlcmFibGXsnbQg7JWE64uZ64uI64ukLlwiICk7XHJcbiAgICAgICAgY29uc3QgZSA9IG5ldyBFdmVudCggZXZlbnROYW1lICk7XHJcblxyXG4gICAgICAgIGZvciAoIGNvbnN0IHByb3AgaW4gcHJvcHMgKSB7XHJcbiAgICAgICAgICAgIGlmICggcHJvcHNbcHJvcF0gKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9fdHJpZ2dlcnNbcHJvcF0gPSB0aGlzLl9fdHJpZ2dlcnNbcHJvcF0gIT0gbnVsbCA/IHRoaXMuX190cmlnZ2Vyc1twcm9wXSA6IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fX3RyaWdnZXJzW3Byb3BdLnB1c2goIFtlLm5hbWUsIGZpbHRlckZ1bmN0aW9uXSApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX190cmlnZ2Vyc1twcm9wXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGU7XHJcbiAgICB9XHJcblxyXG4gICAgaGFzRXZlbnRMaXN0ZW5lciggZXZlbnROYW1lICkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50RW1pdHRlci5saXN0ZW5lcnMoIGV2ZW50TmFtZSApLmxlbmd0aCA+IDA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWVcclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZ1bmNcclxuICAgICAqIEBwYXJhbSB7YW55PX0gY29udGV4dFxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNPbmNlPWZhbHNlXVxyXG4gICAgICogQHJldHVybnMge0V2ZW50RGlzcGF0Y2hlcn1cclxuICAgICAqIEBtZW1iZXJvZiBFdmVudERpc3BhdGNoZXJcclxuICAgICAqL1xyXG4gICAgYWRkRXZlbnRMaXN0ZW5lciggZXZlbnROYW1lLCBmdW5jLCBjb250ZXh0ID0gbnVsbCwgaXNPbmNlID0gZmFsc2UgKSB7XHJcbiAgICAgICAgaWYgKCBpc09uY2UgKSB7XHJcbiAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vbmNlKCBldmVudE5hbWUsIGZ1bmMsIGNvbnRleHQgfHwgdGhpcyApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vbiggZXZlbnROYW1lLCBmdW5jLCBjb250ZXh0IHx8IHRoaXMgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggZXZlbnROYW1lID09IEV2ZW50LkVOVEVSX0ZSQU1FIHx8IGV2ZW50TmFtZSA9PSBFdmVudC5SRU5ERVIgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lciggRXZlbnQuQURERURfVE9fU1RBR0UsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgRXZlbnREaXNwYXRjaGVyLmVudGVyRnJhbWVMaXN0LnNldCggdGhpcyx0aGlzLmV2ZW50RW1pdHRlci5fZXZlbnRzW2V2ZW50TmFtZV0gIT0gbnVsbCA/IHRoaXMuZXZlbnRFbWl0dGVyLl9ldmVudHNbZXZlbnROYW1lXS5sZW5ndGggOiAxICk7XHJcbiAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCBFdmVudC5SRU1PVkVEX0ZST01fU1RBR0UsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIEV2ZW50RGlzcGF0Y2hlci5lbnRlckZyYW1lTGlzdC5kZWxldGUoIHRoaXMgKTtcclxuICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSAgIHRoaXPqsIAgc3ByaXRl66GcIOqwgOyglVxyXG4gICAgICAgICAgICBpZiAoIHRoaXMuaXNPblN0YWdlKCkgKSB7XHJcbiAgICAgICAgICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIEV2ZW50RGlzcGF0Y2hlci5lbnRlckZyYW1lTGlzdC5zZXQoIHRoaXMsdGhpcy5ldmVudEVtaXR0ZXIuX2V2ZW50c1tldmVudE5hbWVdICE9IG51bGwgPyB0aGlzLmV2ZW50RW1pdHRlci5fZXZlbnRzW2V2ZW50TmFtZV0ubGVuZ3RoIDogMSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCBFdmVudC5pc0lucHV0RXZlbnQoIGV2ZW50TmFtZSApICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oYXNJbnB1dEV2ZW50cyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lXHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmdW5jXHJcbiAgICAgKiBAcGFyYW0ge2FueT19IGNvbnRleHRcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzT25jZT1mYWxzZV1cclxuICAgICAqIEByZXR1cm5zIHtFdmVudERpc3BhdGNoZXJ9XHJcbiAgICAgKiBAbWVtYmVyb2YgRXZlbnREaXNwYXRjaGVyXHJcbiAgICAgKi9cclxuICAgIGFkZFVuaXF1ZUV2ZW50TGlzdGVuZXIoIGV2ZW50TmFtZSwgZnVuYywgY29udGV4dCwgaXNPbmNlID0gZmFsc2UgKSB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCBldmVudE5hbWUsIGZ1bmMsIGNvbnRleHQgKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoIGV2ZW50TmFtZSwgZnVuYywgY29udGV4dCwgaXNPbmNlICk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtFdmVudHxzdHJpbmd9IGV2ZW50T3JOYW1lXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdD19IGV4dGVuZGVkVmFsdWVzXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSDsnbTrsqTtirgg7ZW465Ok65+s6rCAIOyeiOycvOuptCB0cnVlXHJcbiAgICAgKiBAbWVtYmVyb2YgRXZlbnREaXNwYXRjaGVyXHJcbiAgICAgKi9cclxuICAgIGRpc3BhdGNoRXZlbnQoIGV2ZW50T3JOYW1lLGV4dGVuZGVkVmFsdWVzICkge1xyXG4gICAgICAgIGxldCBldmVudDtcclxuXHJcbiAgICAgICAgaWYgKCB0eXBlb2YgZXZlbnRPck5hbWUgPT0gXCJzdHJpbmdcIiApIHtcclxuICAgICAgICAgICAgZXZlbnQgPSBuZXcgRXZlbnQoIGV2ZW50T3JOYW1lICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZXZlbnQgPSBldmVudE9yTmFtZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGV2ZW50LnRhcmdldCA9IHRoaXM7XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbiggZXZlbnQsZXh0ZW5kZWRWYWx1ZXMgKTtcclxuXHJcbiAgICAgICAgaWYgKCAhZXZlbnQuZm9yd2FyZGVkICkgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCggXCIqXCIsZXZlbnQgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoIGV2ZW50Lm5hbWUsIGV2ZW50ICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWVcclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZ1bmNcclxuICAgICAqIEBwYXJhbSB7YW55PX0gY29udGV4dFxyXG4gICAgICogQG1lbWJlcm9mIEV2ZW50RGlzcGF0Y2hlclxyXG4gICAgICovXHJcbiAgICByZW1vdmVFdmVudExpc3RlbmVyKCBldmVudE5hbWUsIGZ1bmMsIGNvbnRleHQgKSB7XHJcbiAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoIGV2ZW50TmFtZSwgZnVuYywgY29udGV4dCB8fCB0aGlzICk7XHJcblxyXG4gICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIGlmICggKCBldmVudE5hbWUgPT0gRXZlbnQuRU5URVJfRlJBTUUgfHwgZXZlbnROYW1lID09IEV2ZW50LlJFTkRFUiApICYmICggdGhpcy5ldmVudEVtaXR0ZXIuX2V2ZW50c1tldmVudE5hbWVdID09IG51bGwgfHwgdGhpcy5ldmVudEVtaXR0ZXIuX2V2ZW50c1tldmVudE5hbWVdLmxlbmd0aCA9PSAwICkgKSB7XHJcbiAgICAgICAgICAgIEV2ZW50RGlzcGF0Y2hlci5lbnRlckZyYW1lTGlzdC5kZWxldGUoIHRoaXMgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggRXZlbnQuaXNJbnB1dEV2ZW50KCBldmVudE5hbWUgKSApIHtcclxuICAgICAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGZvciAoIGNvbnN0IGkgaW4gdGhpcy5ldmVudEVtaXR0ZXIuX2V2ZW50cyApIHtcclxuICAgICAgICAgICAgICAgIGlmICggRXZlbnQuaXNJbnB1dEV2ZW50KCBpICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNJbnB1dEV2ZW50cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gZXZlbnROYW1lXHJcbiAgICAgKiBAbWVtYmVyb2YgRXZlbnREaXNwYXRjaGVyXHJcbiAgICAgKi9cclxuICAgIHJlbW92ZUFsbEV2ZW50TGlzdGVuZXJzKCBldmVudE5hbWUgKSB7XHJcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIucmVtb3ZlQWxsTGlzdGVuZXJzKCBldmVudE5hbWUgKTtcclxuXHJcbiAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgaWYgKCAoIGV2ZW50TmFtZSA9PSBFdmVudC5FTlRFUl9GUkFNRSB8fCBldmVudE5hbWUgPT0gRXZlbnQuUkVOREVSICkgJiYgKCBldmVudE5hbWUgJiYgdGhpcy5ldmVudEVtaXR0ZXIuX2V2ZW50c1tldmVudE5hbWVdID09IG51bGwgfHwgdGhpcy5ldmVudEVtaXR0ZXIuX2V2ZW50c1tldmVudE5hbWVdLmxlbmd0aCA9PSAwICkgKSB7XHJcbiAgICAgICAgICAgIEV2ZW50RGlzcGF0Y2hlci5lbnRlckZyYW1lTGlzdC5kZWxldGUoIHRoaXMgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggZXZlbnROYW1lICYmIEV2ZW50LmlzSW5wdXRFdmVudCggZXZlbnROYW1lICkgKSB7XHJcbiAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBmb3IgKCBjb25zdCBpIGluIHRoaXMuZXZlbnRFbWl0dGVyLl9ldmVudHMgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIEV2ZW50LmlzSW5wdXRFdmVudCggaSApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzSW5wdXRFdmVudHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50XHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmdW5jXHJcbiAgICAgKiBAcGFyYW0ge2FueT19IGNvbnRleHRcclxuICAgICAqIEBwYXJhbSB7RXZlbnREaXNwYXRjaGVyfSBbcmVmU3ByaXRlPXRoaXNdXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc09uY2U9ZmFsc2VdXHJcbiAgICAgKiBAcmV0dXJucyB7RXZlbnREaXNwYXRjaGVyfVxyXG4gICAgICogQG1lbWJlcm9mIEV2ZW50RGlzcGF0Y2hlclxyXG4gICAgICovXHJcbiAgICBhZGRFdmVudExpc3RlbmVyT25TdGFnZSggZXZlbnQsIGZ1bmMsIGNvbnRleHQsIHJlZlNwcml0ZSA9IHRoaXMsIGlzT25jZSA9IGZhbHNlICkge1xyXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICBjb25zdCBvbkFkZGVkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoIGV2ZW50LCBmdW5jLCBjb250ZXh0LCBpc09uY2UgKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBvblJlbW92ZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHNlbGYucmVtb3ZlRXZlbnRMaXN0ZW5lciggZXZlbnQsIGZ1bmMsIGNvbnRleHQgKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZWZTcHJpdGUuYWRkRXZlbnRMaXN0ZW5lciggRXZlbnQuQURERURfVE9fU1RBR0UsIG9uQWRkZWQsIHRoaXMgKTtcclxuICAgICAgICByZWZTcHJpdGUuYWRkRXZlbnRMaXN0ZW5lciggRXZlbnQuUkVNT1ZFRF9GUk9NX1NUQUdFLCBvblJlbW92ZWQsIHRoaXMgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWVcclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZ1bmNcclxuICAgICAqIEBwYXJhbSB7YW55PX0gY29udGV4dFxyXG4gICAgICogQHJldHVybnMge0V2ZW50RGlzcGF0Y2hlcn1cclxuICAgICAqIEBtZW1iZXJvZiBFdmVudERpc3BhdGNoZXJcclxuICAgICAqL1xyXG4gICAgb24oIGV2ZW50TmFtZSwgZnVuYywgY29udGV4dCApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGRFdmVudExpc3RlbmVyKCBldmVudE5hbWUsIGZ1bmMsIGNvbnRleHQgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZVxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuY1xyXG4gICAgICogQHBhcmFtIHthbnk9fSBjb250ZXh0XHJcbiAgICAgKiBAcmV0dXJucyB7RXZlbnREaXNwYXRjaGVyfVxyXG4gICAgICogQG1lbWJlcm9mIEV2ZW50RGlzcGF0Y2hlclxyXG4gICAgICovXHJcbiAgICBvbmNlKCBldmVudE5hbWUsIGZ1bmMsIGNvbnRleHQgKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkRXZlbnRMaXN0ZW5lciggZXZlbnROYW1lLCBmdW5jLCBjb250ZXh0LCB0cnVlICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuY1xyXG4gICAgICogQHBhcmFtIHthbnk9fSBjb250ZXh0XHJcbiAgICAgKiBAcGFyYW0ge0V2ZW50RGlzcGF0Y2hlcn0gW3JlZlNwcml0ZT10aGlzXVxyXG4gICAgICogQHJldHVybnMge0V2ZW50RGlzcGF0Y2hlcn1cclxuICAgICAqIEBtZW1iZXJvZiBFdmVudERpc3BhdGNoZXJcclxuICAgICAqL1xyXG4gICAgb25TdGFnZSggZXZlbnQsIGZ1bmMsIGNvbnRleHQsIHJlZlNwcml0ZSA9IHRoaXMgKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkRXZlbnRMaXN0ZW5lck9uU3RhZ2UoIGV2ZW50LCBmdW5jLCBjb250ZXh0LCByZWZTcHJpdGUgKTtcclxuICAgIH1cclxuXHJcbiAgICBiZWZvcmVSZW5kZXIoIGZ1bmMsIGNvbnRleHQsIGlzVW5pcXVlID0gdHJ1ZSApIHtcclxuICAgICAgICBpZiAoIGlzVW5pcXVlICkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoIEV2ZW50LlJFTkRFUiwgZnVuYywgY29udGV4dCApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCBFdmVudC5SRU5ERVIsIGZ1bmMsIGNvbnRleHQsIHRydWUgKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGFydEZvcndhcmRFdmVudHMoIGV2ZW50TGlzdCxkc3RFdmVudERpc3BhdGNoZXIgKSB7XHJcbiAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgZXZlbnRMaXN0Lmxlbmd0aDsgaSsrICkge1xyXG4gICAgICAgICAgICBjb25zdCBldmVudCA9IGV2ZW50TGlzdFtpXTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lciggZXZlbnQsZHN0RXZlbnREaXNwYXRjaGVyLmRpc3BhdGNoRXZlbnQuYmluZCggZHN0RXZlbnREaXNwYXRjaGVyLFtldmVudF0gKSApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdG9wRm9yd2FyZEV2ZW50cyggZXZlbnRMaXN0LGRzdEV2ZW50RGlzcGF0Y2hlciApIHtcclxuICAgICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBldmVudExpc3QubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gZXZlbnRMaXN0W2ldO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCBldmVudCxkc3RFdmVudERpc3BhdGNoZXIuZGlzcGF0Y2hFdmVudC5iaW5kKCBkc3RFdmVudERpc3BhdGNoZXIsW2V2ZW50XSApICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIOydtOuypO2KuOulvCDrqqjrkZAg6riw64uk66Ck7IScIOuUse2VnOuyiCBmdW5j66W8IOyLpO2Wie2VnOuLpC5cclxuICAgICAqIOydtOuypO2KuCDrqqnroZ3snYAgPOydtOuypO2KuOydtOumhD4g7Zi57J2AIFvsnbTrsqTtirjsnbTrpoQsIOuMgOyDgSBFdmVudERpc3BhdGNoZXJdXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHthbnlbXX0gZXZlbnRzXHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmdW5jXHJcbiAgICAgKiBAcGFyYW0ge2FueT19IGNvbnRleHRcclxuICAgICAqIEBtZW1iZXJvZiBFdmVudERpc3BhdGNoZXJcclxuICAgICAqL1xyXG4gICAgd2FpdEV2ZW50cyggZXZlbnRzLCBmdW5jLCBjb250ZXh0ICkge1xyXG4gICAgICAgIGNvbnN0IGNvdW50cyA9IFtdO1xyXG4gICAgICAgIGxldCB3YWl0SGFuZGxlcjtcclxuXHJcbiAgICAgICAgY29uc3QgcmVtb3ZlQWxsID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgY291bnQgPSAwO1xyXG5cclxuICAgICAgICAgICAgZm9yICggY29uc3QgaSBpbiBldmVudHMgKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZXZlbnROYW1lO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRhcmdldCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBBcnJheS5pc0FycmF5KCBldmVudHNbaV0gKSApIHtcclxuICAgICAgICAgICAgICAgICAgICBbZXZlbnROYW1lLCB0YXJnZXRdID0gZXZlbnRzW2ldO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGV2ZW50TmFtZSA9IGV2ZW50c1tpXTtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCBldmVudE5hbWUsIHdhaXRIYW5kbGVyLCBjb3VudCApO1xyXG4gICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHdhaXRIYW5kbGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vIHRoaXProZwg67Cb7JWY7J2MXHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgY291bnRzW3RoaXMgLSAxXSsrO1xyXG5cclxuICAgICAgICAgICAgZm9yICggbGV0IGogPSAwOyBqIDwgY291bnRzLmxlbmd0aDsgaisrICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCBjb3VudHNbal0gPT0gMCApIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmVtb3ZlQWxsKCk7XHJcbiAgICAgICAgICAgIGZ1bmMuY2FsbCggY29udGV4dCApO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZvciAoIGNvbnN0IGkgaW4gZXZlbnRzICkge1xyXG4gICAgICAgICAgICBsZXQgZXZlbnROYW1lO1xyXG4gICAgICAgICAgICBsZXQgdGFyZ2V0ID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIGlmICggQXJyYXkuaXNBcnJheSggZXZlbnRzW2ldICkgKSB7XHJcbiAgICAgICAgICAgICAgICBbZXZlbnROYW1lLCB0YXJnZXRdID0gZXZlbnRzW2ldO1xyXG4gICAgICAgICAgICB9IGVsc2UgZXZlbnROYW1lID0gZXZlbnRzW2ldO1xyXG4gICAgICAgICAgICAvLyAw7J2066m0IEV2ZW50RW1pdHRlcjMg64K067aA7JeQ7IScIHx8IOuhnCDqsbjrn6zsp4DquLAg65WM66y47JeQICsxIO2VtOykgOuLpFxyXG4gICAgICAgICAgICBjb25zdCBjb3VudEluZGV4ID0gY291bnRzLmxlbmd0aCArIDE7XHJcblxyXG4gICAgICAgICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lciggZXZlbnROYW1lLCB3YWl0SGFuZGxlciwgY291bnRJbmRleCApO1xyXG4gICAgICAgICAgICBjb3VudHMucHVzaCggMCApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZVxyXG4gICAgICogQHBhcmFtIHthbnlbXX0gZXZlbnRzXHJcbiAgICAgKiBAcmV0dXJucyB7RXZlbnREaXNwYXRjaGVyfVxyXG4gICAgICogQG1lbWJlcm9mIEV2ZW50RGlzcGF0Y2hlclxyXG4gICAgICovXHJcbiAgICBhZGRDb21iaW5lZEV2ZW50cyggZXZlbnROYW1lLCBldmVudHMgKSB7XHJcbiAgICAgICAgdGhpcy53YWl0RXZlbnRzKCBldmVudHMsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCBldmVudE5hbWUgKTtcclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBldmVudFRvUHJvbWlzZSggZXZlbnROYW1lICkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSggKCByZXNvbHZlLCByZWplY3QgKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lciggZXZlbnROYW1lLCByZXNvbHZlICk7XHJcbiAgICAgICAgfSApO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBkb0VudGVyRnJhbWUoKSB7XHJcbiAgICAgICAgaWYgKCBFdmVudERpc3BhdGNoZXIuZW50ZXJGcmFtZVBhdXNlZCApIHJldHVybiAwO1xyXG4gICAgICAgIGxldCB0b3RhbEV2ZW50Q291bnQgPSAwO1xyXG5cclxuICAgICAgICBmb3IgKCBjb25zdCBbc3ByLCBjb3VudF0gb2YgRXZlbnREaXNwYXRjaGVyLmVudGVyRnJhbWVMaXN0LmVudHJpZXMoKSApIHtcclxuICAgICAgICAgICAgLy8gaWYgKHNwci5pc1Zpc2libGVEZWVwbHkoKSkge1xyXG4gICAgICAgICAgICBzcHIuZGlzcGF0Y2hFdmVudCggRXZlbnQuRU5URVJfRlJBTUUgKTtcclxuICAgICAgICAgICAgc3ByLmRpc3BhdGNoRXZlbnQoIEV2ZW50LlJFTkRFUiApO1xyXG4gICAgICAgICAgICB0b3RhbEV2ZW50Q291bnQgKz0gY291bnQ7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0b3RhbEV2ZW50Q291bnQ7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQGNhbGxiYWNrIHR3ZWVuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvblxyXG4gKiBAcGFyYW0ge29iamVjdH0gdmFsdWVzXHJcbiAqIEBwYXJhbSB7c3RyaW5nfGZ1bmN0aW9ufGltcG9ydChcIi4vdHdlZW4uanNcIikuUHJvcD19IHByb3BzXHJcbiAqIEByZXR1cm5zIHtpbXBvcnQoXCIuL3R3ZWVuLmpzXCIpLnByb3RvdHlwZX1cclxuICogQG1lbWJlcm9mIEV2ZW50RGlzcGF0Y2hlclxyXG4gKiBAdHlwZSB7dHdlZW59XHJcbiAqL1xyXG5cclxuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZS50d2VlbiA9IHVuZGVmaW5lZDtcclxuXHJcbi8qKlxyXG4gKiBAY2FsbGJhY2sgbW92ZVxyXG4gKiBAcGFyYW0ge251bWJlcn0geFxyXG4gKiBAcGFyYW0ge251bWJlcn0geVxyXG4gKiBAcGFyYW0ge251bWJlcn0gW2R1cmF0aW9uPTBdXHJcbiAqIEBwYXJhbSB7c3RyaW5nfGZ1bmN0aW9ufGltcG9ydChcIi4vdHdlZW4uanNcIikuUHJvcD19IHByb3BzXHJcbiAqIEByZXR1cm5zIHtUd2Vlbn1cclxuICogQG1lbWJlcm9mIEV2ZW50RGlzcGF0Y2hlclxyXG4gKiBAdHlwZSB7bW92ZX1cclxuICovXHJcblxyXG5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlLm1vdmUgPSB1bmRlZmluZWQ7XHJcblxyXG4vKipcclxuICogQGNhbGxiYWNrIHdhaXRcclxuICogQHBhcmFtIHtudW1iZXJ9IFtkdXJhdGlvbj0wXVxyXG4gKiBAcGFyYW0ge2Z1bmN0aW9uPX0gZnVuY1xyXG4gKiBAcGFyYW0ge29iamVjdD19IGNvbnRleHRcclxuICogQHJldHVybnMge2ltcG9ydChcIi4vdHdlZW4uanNcIikucHJvdG90eXBlfVxyXG4gKiBAbWVtYmVyb2YgRXZlbnREaXNwYXRjaGVyXHJcbiAqIEB0eXBlIHt3YWl0fVxyXG4gKi9cclxuXHJcbkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUud2FpdCA9IHVuZGVmaW5lZDtcclxuXHJcblxyXG4vKiogXHJcbiAqIEBjYWxsYmFjayBnZXRUd2VlbnNcclxuICogQHBhcmFtIHtib29sZWFuPX0gcGxheWluZ09ubHlcclxuICogQHJldHVybnMge2ltcG9ydChcIi4vdHdlZW4uanNcIikucHJvdG90eXBlW119XHJcbiAqIEBtZW1iZXJvZiBFdmVudERpc3BhdGNoZXJcclxuICogXHJcbiAqL1xyXG5cclxuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZS5nZXRUd2VlbnMgPSB1bmRlZmluZWQ7XHJcblxyXG4vKipcclxuICogQGNhbGxiYWNrIHN0b3BBbGxUd2VlbnNcclxuICogQG1lbWJlcm9mIEV2ZW50RGlzcGF0Y2hlclxyXG4gKi9cclxuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZS5zdG9wQWxsVHdlZW5zID0gdW5kZWZpbmVkO1xyXG5cclxuRXZlbnREaXNwYXRjaGVyLmVudGVyRnJhbWVQYXVzZWQgPSBmYWxzZTtcclxuXHJcblxyXG5FdmVudC5FdmVudERpc3BhdGNoZXIgPSBFdmVudERpc3BhdGNoZXI7XHJcbkV2ZW50RGlzcGF0Y2hlci5lbnRlckZyYW1lTGlzdCA9IG5ldyBNYXAoKTtcclxuXHJcblxyXG4iLCJcclxuaW1wb3J0IHsgVXRpbHMgfSBmcm9tICcuL1V0aWxzJztcclxuaW1wb3J0IHsgVGV4dHVyZSB9IGZyb20gJy4vVGV4dHVyZSc7XHJcbmltcG9ydCB7IEV2ZW50IH0gZnJvbSAnLi9FdmVudCc7XHJcbmltcG9ydCB7IEV2ZW50RGlzcGF0Y2hlciB9IGZyb20gJy4vRXZlbnREaXNwYXRjaGVyJztcclxuaW1wb3J0IHsgQXNzZXQgfSBmcm9tICcuL0Fzc2V0JztcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgRm9udEJhc2UgZXh0ZW5kcyBFdmVudERpc3BhdGNoZXIge1xyXG4gICAgY29uc3RydWN0b3IoIG5hbWUsIHJlZmVyZW5jZVNpemUsIHN0eWxlcyApIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VTaXplID0gcmVmZXJlbmNlU2l6ZSB8fCAxO1xyXG4gICAgICAgIHRoaXMuc3R5bGVzID0gc3R5bGVzO1xyXG4gICAgICAgIC8qKiBAdHlwZSB7QXNzZXR9ICovXHJcbiAgICAgICAgdGhpcy5hc3NldDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZVxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuY1xyXG4gICAgICogQHBhcmFtIHthbnk9fSBjb250ZXh0XHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc09uY2U9ZmFsc2VdXHJcbiAgICAgKiBAcmV0dXJucyB7Rm9udEJhc2V9XHJcbiAgICAgKiBAbWVtYmVyb2YgRm9udEJhc2VcclxuICAgICAqL1xyXG4gICAgYWRkRXZlbnRMaXN0ZW5lciggZXZlbnROYW1lLCBmdW5jLCBjb250ZXh0ID0gbnVsbCwgaXNPbmNlID0gZmFsc2UgKSB7XHJcbiAgICAgICAgaWYgKCBldmVudE5hbWUgPT0gRXZlbnQuTE9BREVEICkge1xyXG4gICAgICAgICAgICB0aGlzLmFzc2V0LmFkZEV2ZW50TGlzdGVuZXIoIGV2ZW50TmFtZSwgdGhpcy5kaXNwYXRjaEV2ZW50LmJpbmQoIHRoaXMsRXZlbnQuTE9BREVEICksIG51bGwsIGlzT25jZSApO1xyXG4gICAgICAgIH0gXHJcbiAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLmFkZEV2ZW50TGlzdGVuZXIoIGV2ZW50TmFtZSwgZnVuYywgY29udGV4dCwgaXNPbmNlICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QXNjZW5kZXIoIHNpemUgKSB7XHJcbiAgICAgICAgaWYgKCAhdGhpcy5hc3NldC5sb2FkZWQgKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCBg66Gc65Sp7J20IOyViOuQnCDsg4Htg5zroZwg7IKs7J207KaI66W8IOq1rO2VmOugpOqzoCDtlZzri6QuICR7dGhpcy5hc3NldC5uYW1lfWAgKTtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGZvbnRJbmZvID0gdGhpcy5hc3NldC5mb250SW5mbztcclxuXHJcbiAgICAgICAgcmV0dXJuIGZvbnRJbmZvLmFzY2VuZGVyIC8gZm9udEluZm8udW5pdHNQZXJFbSAqICggc2l6ZSB8fCB0aGlzLnJlZmVyZW5jZVNpemUgKTsgXHJcbiAgICB9XHJcblxyXG5cclxuICAgIG1lYXN1cmVUZXh0V2lkdGgoIHN0cixzaXplICkge1xyXG4gICAgICAgIGlmICggIXRoaXMuYXNzZXQubG9hZGVkICkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyggYOuhnOuUqeydtCDslYjrkJwg7IOB7YOc66GcIOyCrOydtOymiOulvCDqtaztlZjroKTqs6Ag7ZWc64ukLiAke3RoaXMuYXNzZXQubmFtZX1gICk7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDsg4Hsho0g67Cb7J2AIO2BtOuemOyKpOyXkOyEnCDqtaztmIRcclxuICAgIH1cclxufVxyXG5cclxuIiwiXHJcbmV4cG9ydCBjb25zdCBLZXlDb2RlID0ge1xyXG4gICAgRVNDOiAgICBcIkVzY2FwZVwiLFxyXG4gICAgRU5URVI6ICBcIkVudGVyXCIsXHJcbiAgICBTUEFDRTogIFwiU3BhY2VcIixcclxuICAgIExFRlQ6ICAgXCJBcnJvd0xlZnRcIixcclxuICAgIFJJR0hUOiAgXCJBcnJvd1JpZ2h0XCIsXHJcbiAgICBVUDogICAgIFwiQXJyb3dVcFwiLFxyXG4gICAgRE9XTjogICBcIkFycm93RG93blwiLFxyXG4gICAgQ1RSTDogICBcIkNvbnRyb2xMZWZ0XCIsXHJcbiAgICBBOiAgICAgIFwiS2V5QVwiLFxyXG4gICAgQjogICAgICBcIktleUJcIixcclxuICAgIEM6ICAgICAgXCJLZXlDXCIsXHJcbiAgICBEOiAgICAgIFwiS2V5RFwiLFxyXG4gICAgRTogICAgICBcIktleUVcIixcclxuICAgIEY6ICAgICAgXCJLZXlGXCIsXHJcbiAgICBHOiAgICAgIFwiS2V5R1wiLFxyXG4gICAgSDogICAgICBcIktleUhcIixcclxuICAgIEk6ICAgICAgXCJLZXlJXCIsXHJcbiAgICBKOiAgICAgIFwiS2V5SlwiLFxyXG4gICAgSzogICAgICBcIktleUtcIixcclxuICAgIEw6ICAgICAgXCJLZXlMXCIsXHJcbiAgICBNOiAgICAgIFwiS2V5TVwiLFxyXG4gICAgTjogICAgICBcIktleU5cIixcclxuICAgIE86ICAgICAgXCJLZXlPXCIsXHJcbiAgICBQOiAgICAgIFwiS2V5UFwiLFxyXG4gICAgUTogICAgICBcIktleVFcIixcclxuICAgIFI6ICAgICAgXCJLZXlSXCIsXHJcbiAgICBTOiAgICAgIFwiS2V5U1wiLFxyXG4gICAgVDogICAgICBcIktleVRcIixcclxuICAgIFU6ICAgICAgXCJLZXlVXCIsXHJcbiAgICBWOiAgICAgIFwiS2V5VlwiLFxyXG4gICAgVzogICAgICBcIktleVdcIixcclxuICAgIFg6ICAgICAgXCJLZXlYXCIsXHJcbiAgICBZOiAgICAgIFwiS2V5WVwiLFxyXG4gICAgWjogICAgICBcIktleVpcIixcclxuICAgIERpZ2l0MDogXCJEaWdpdDBcIixcclxuICAgIERpZ2l0MTogXCJEaWdpdDFcIixcclxuICAgIERpZ2l0MjogXCJEaWdpdDJcIixcclxuICAgIERpZ2l0MzogXCJEaWdpdDNcIixcclxuICAgIERpZ2l0NDogXCJEaWdpdDRcIixcclxuICAgIERpZ2l0NTogXCJEaWdpdDVcIixcclxuICAgIERpZ2l0NjogXCJEaWdpdDZcIixcclxuICAgIERpZ2l0NzogXCJEaWdpdDdcIixcclxuICAgIERpZ2l0ODogXCJEaWdpdDhcIixcclxuICAgIERpZ2l0OTogXCJEaWdpdDlcIixcclxufTtcclxuXHJcblxyXG5cclxuIiwiXHJcblxyXG5cclxuaW1wb3J0IHsgU3ByaXRlIH0gZnJvbSAnLi9TcHJpdGUnO1xyXG5pbXBvcnQgeyBFdmVudCB9IGZyb20gJy4vRXZlbnQnO1xyXG5pbXBvcnQgeyBQb2ludCB9IGZyb20gJy4vVHlwZXMnO1xyXG5pbXBvcnQgeyBhcHBsaWNhdGlvbiB9IGZyb20gJy4vQXBwbGljYXRpb24nO1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBMYXlvdXQgZXh0ZW5kcyBTcHJpdGUge1xyXG4gICAgY29uc3RydWN0b3IoIHggPSAwLHkgPSAwLHcgPSAwLGggPSAwICkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5fX2xvY2F0aW9ucyA9IHt9O1xyXG4gICAgICAgIHRoaXMuX193aWR0aCA9IHc7XHJcbiAgICAgICAgdGhpcy5fX2hlaWdodCA9IGg7XHJcbiAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2l6ZSggdywgaCApIHtcclxuICAgICAgICB0aGlzLl9fd2lkdGggPSB3O1xyXG4gICAgICAgIHRoaXMuX19oZWlnaHQgPSBoO1xyXG4gICAgICAgIHRoaXMuX29uUmVzaXplRXZlbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRSZWN0KCB4LCB5LCB3LCBoICkge1xyXG4gICAgICAgIHRoaXMueCA9IHg7XHJcbiAgICAgICAgdGhpcy55ID0geTtcclxuICAgICAgICB0aGlzLnJlc2l6ZSggdywgaCApO1xyXG4gICAgfVxyXG5cclxuICAgIF9vblJlc2l6ZUV2ZW50KCkge1xyXG4gICAgICAgIGZvciAoIGNvbnN0IGtleSBpbiB0aGlzLl9fbG9jYXRpb25zICkge1xyXG4gICAgICAgICAgICBjb25zdCBsb2NTcHIgPSB0aGlzLl9fbG9jYXRpb25zW2tleV07XHJcblxyXG4gICAgICAgICAgICBpZiAoIGtleSA9PSBcIm9yaWdpblwiICkge1xyXG4gICAgICAgICAgICAgICAgbG9jU3ByLnggPSAtdGhpcy54O1xyXG4gICAgICAgICAgICAgICAgbG9jU3ByLnkgPSAtdGhpcy55O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW3gsIHldID0ga2V5LnNwbGl0KCBcIixcIiApO1xyXG5cclxuICAgICAgICAgICAgICAgIGxvY1Nwci54ID0gdGhpcy5fX3dpZHRoICogcGFyc2VGbG9hdCggeCApO1xyXG4gICAgICAgICAgICAgICAgbG9jU3ByLnkgPSB0aGlzLl9faGVpZ2h0ICogcGFyc2VGbG9hdCggeSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoIG5ldyBFdmVudCggRXZlbnQuUkVTSVpFLCB7IHdpZHRoOiB0aGlzLl9fd2lkdGgsIGhlaWdodDogdGhpcy5fX2hlaWdodCB9ICkgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgb3JpZ2luKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxvY2F0aW9uKCBcIm9yaWdpblwiICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHRvcExlZnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYXRpb24oIDAsIDAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdG9wTWlkZGxlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxvY2F0aW9uKCAwLjUsIDAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdG9wUmlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYXRpb24oIDEsIDAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgYm90dG9tTGVmdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sb2NhdGlvbiggMCwgMSApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBib3R0b21NaWRkbGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYXRpb24oIDAuNSwgMSApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBib3R0b21SaWdodCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sb2NhdGlvbiggMSwgMSApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBsZWZ0TWlkZGxlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxvY2F0aW9uKCAwLCAwLjUgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcmlnaHRNaWRkbGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYXRpb24oIDEsIDAuNSApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjZW50ZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYXRpb24oIDAuNSwgMC41ICk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IHhcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbeT1udWxsXVxyXG4gICAgICogQHJldHVybnMge0xheW91dH1cclxuICAgICAqIEBtZW1iZXJvZiBMYXlvdXRcclxuICAgICAqL1xyXG4gICAgbG9jYXRpb24oIHgsIHkgPSBudWxsICkge1xyXG4gICAgICAgIGNvbnN0IGlkID0geSAhPSBudWxsID8geCArIFwiLFwiICsgeSA6IHg7XHJcbiAgICAgICAgbGV0IGxvY1NwciA9IHRoaXMuX19sb2NhdGlvbnNbaWRdO1xyXG5cclxuICAgICAgICBpZiAoIGxvY1NwciAhPSBudWxsICkgcmV0dXJuIGxvY1NwcjtcclxuICAgICAgICBsb2NTcHIgPSAoIHRoaXMuX19sb2NhdGlvbnNbaWRdID0gbmV3IExheW91dCgpICk7XHJcblxyXG4gICAgICAgIGlmICggeSA9PSBudWxsICkge1xyXG4gICAgICAgICAgICBpZiAoIGlkID09IFwib3JpZ2luXCIgKSB7XHJcbiAgICAgICAgICAgICAgICBsb2NTcHIueCA9IC10aGlzLng7XHJcbiAgICAgICAgICAgICAgICBsb2NTcHIueSA9IC10aGlzLnk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGxvY1Nwci54ID0gdGhpcy5fX3dpZHRoICogeDtcclxuICAgICAgICAgICAgbG9jU3ByLnkgPSB0aGlzLl9faGVpZ2h0ICogeTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYWRkQ2hpbGQoIGxvY1NwciApO1xyXG5cclxuICAgICAgICByZXR1cm4gbG9jU3ByO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB3aWR0aCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fX3dpZHRoO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCB3aWR0aCggdiApIHtcclxuICAgICAgICB0aGlzLl9fd2lkdGggPSB2O1xyXG4gICAgICAgIHRoaXMuX29uUmVzaXplRXZlbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaGVpZ2h0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9faGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBoZWlnaHQoIHYgKSB7XHJcbiAgICAgICAgdGhpcy5fX2hlaWdodCA9IHY7XHJcbiAgICAgICAgdGhpcy5fb25SZXNpemVFdmVudCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcmV0dXJucyB7UG9pbnR9XHJcbiAgICAgKiBAbWVtYmVyb2YgTGF5b3V0XHJcbiAgICAgKi9cclxuICAgIGdldCBzaXplKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUG9pbnQoIHRoaXMuX193aWR0aCwgdGhpcy5fX2hlaWdodCApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtQb2ludH0gdlxyXG4gICAgICpcclxuICAgICAqIEBtZW1iZXJvZiBMYXlvdXRcclxuICAgICAqL1xyXG4gICAgc2V0IHNpemUoIHYgKSB7XHJcbiAgICAgICAgdGhpcy5fX3dpZHRoID0gdi54O1xyXG4gICAgICAgIHRoaXMuX19oZWlnaHQgPSB2Lnk7XHJcbiAgICAgICAgdGhpcy5fb25SZXNpemVFdmVudCgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzdGF0aWMgZnJvbVJlbmRlclZpZXdwb3J0KCkge1xyXG4gICAgICAgIGNvbnN0IGxheW91dCA9IG5ldyBMYXlvdXQoIGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMueCwgYXBwbGljYXRpb24ubG9naWNhbFJlbmRlckJvdW5kcy55LGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMud2lkdGgsIGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMuaGVpZ2h0ICk7XHJcblxyXG4gICAgICAgIGFwcGxpY2F0aW9uLmFkZEV2ZW50TGlzdGVuZXIoIEV2ZW50LlJFU0laRSwgKCkgPT4ge1xyXG4gICAgICAgICAgICBsYXlvdXQueCA9IGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMueDtcclxuICAgICAgICAgICAgbGF5b3V0LnkgPSBhcHBsaWNhdGlvbi5sb2dpY2FsUmVuZGVyQm91bmRzLnk7XHJcbiAgICAgICAgICAgIGxheW91dC5yZXNpemUoIGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMud2lkdGgsIGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMuaGVpZ2h0ICk7XHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgICAgICByZXR1cm4gbGF5b3V0O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBmcm9tTG9naWNhbFZpZXdwb2VyKCkge1xyXG4gICAgICAgIGNvbnN0IGxheW91dCA9IG5ldyBMYXlvdXQoIDAsMCxhcHBsaWNhdGlvbi5sb2dpY2FsVmlld3BvcnQud2lkdGgsIGFwcGxpY2F0aW9uLmxvZ2ljYWxWaWV3cG9ydC5oZWlnaHQgKTtcclxuXHJcbiAgICAgICAgYXBwbGljYXRpb24uYWRkRXZlbnRMaXN0ZW5lciggRXZlbnQuUkVTSVpFLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxheW91dC5yZXNpemUoIGFwcGxpY2F0aW9uLmxvZ2ljYWxWaWV3cG9ydC53aWR0aCwgYXBwbGljYXRpb24ubG9naWNhbFZpZXdwb3J0LmhlaWdodCApO1xyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGxheW91dDtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbiIsIlxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBNYXRyaXgge1xyXG4gICAgY29uc3RydWN0b3IoIG0xMSA9IDEsIG0xMiA9IDAsIG0yMSA9IDAsIG0yMiA9IDEsIHR4ID0gMCwgdHkgPSAwICkge1xyXG4gICAgICAgIHRoaXMuX19waXhpID0gbmV3IFBJWEkuTWF0cml4KCBtMTEsIG0xMiwgbTIxLCBtMjIsIHR4LCB0eSApO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFNwcml0ZSB9IGZyb20gJy4vU3ByaXRlJztcclxuaW1wb3J0IHsgVGV4dHVyZSB9IGZyb20gJy4vVGV4dHVyZSc7XHJcbmltcG9ydCB7IFBvaW50LCBUeXBlZEFycmF5SGVscGVyIH0gZnJvbSAnLi9UeXBlcyc7XHJcbmltcG9ydCB7IFV0aWxzIH0gZnJvbSAnLi9VdGlscyc7XHJcblxyXG5leHBvcnQgY2xhc3MgTWVzaCBleHRlbmRzIFNwcml0ZSB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgTWVzaC5cclxuICAgICAqIEBtZW1iZXJvZiBNZXNoXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5fJCRzcHJpdGVUeXBlID0gU3ByaXRlLlNwcml0ZVR5cGVzLk1FU0g7XHJcbiAgICAgICAgdGhpcy5fJCR1cGRhdGVDb2RlID0gU3ByaXRlLlVwZGF0ZUNvZGVzLlVQREFURV9OT1RISU5HO1xyXG4gICAgICAgIHRoaXMuZGlydHkgPSB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uT2Zmc2V0OiAwLFxyXG4gICAgICAgICAgICBwb3NpdGlvbkxlbmd0aDogMCxcclxuICAgICAgICAgICAgdGV4Q29vcmRPZmZzZXQ6IDAsXHJcbiAgICAgICAgICAgIHRleENvb3JkTGVuZ3RoOiAwLFxyXG4gICAgICAgICAgICBjb2xvck9mZnNldDogICAgMCxcclxuICAgICAgICAgICAgY29sb3JMZW5ndGg6ICAgIDAsXHJcbiAgICAgICAgICAgIGluZGV4T2Zmc2V0OiAgICAwLFxyXG4gICAgICAgICAgICBpbmRleExlbmd0aDogICAgMCxcclxuICAgICAgICAgICAgdGV4dHVyZVJlc2V0OiAgIGZhbHNlLFxyXG4gICAgICAgICAgICBwb3NpdGlvblJlc2V0OiAgZmFsc2UsXHJcbiAgICAgICAgICAgIHRleENvb3JkUmVzZXQ6ICBmYWxzZSxcclxuICAgICAgICAgICAgY29sb3JSZXNldDogICAgIGZhbHNlLFxyXG4gICAgICAgICAgICBpbmRleFJlc2V0OiAgICAgZmFsc2UsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmFfcG9zaXRpb24gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5hX3RleENvb3JkID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuYV9jb2xvciA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmluZGljZXMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5hX2dlbmVyaWNBcnJheSA9IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBzZXRUZXh0dXJlKCB0ZXh0dXJlICkge1xyXG4gICAgICAgIHRoaXMudGV4dHVyZSA9IHRleHR1cmU7XHJcbiAgICAgICAgdGhpcy5fJCR1cGRhdGVDb2RlIHw9IFNwcml0ZS5VcGRhdGVDb2Rlcy5VUERBVEVfRVhUUkE7XHJcbiAgICAgICAgdGhpcy5kaXJ0eS50ZXh0dXJlUmVzZXQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFRleHR1cmVDb29yZGluYXRlQXJyYXkoIGFyciApIHtcclxuICAgICAgICB0aGlzLmRpcnR5LnRleENvb3JkUmVzZXQgPSAhKCB0aGlzLmFfdGV4Q29vcmQgJiYgdGhpcy5hX3RleENvb3JkLmxlbmd0aCA+PSBhcnIubGVuZ3RoICk7XHJcbiAgICAgICAgdGhpcy5hX3RleENvb3JkID0gbmV3IEZsb2F0MzJBcnJheSggYXJyICk7XHJcbiAgICAgICAgdGhpcy5fJCR1cGRhdGVDb2RlIHw9IFNwcml0ZS5VcGRhdGVDb2Rlcy5VUERBVEVfRVhUUkE7XHJcbiAgICAgICAgdGhpcy5kaXJ0eS50ZXhDb29yZE9mZnNldCA9IDA7XHJcbiAgICAgICAgdGhpcy5kaXJ0eS50ZXhDb29yZExlbmd0aCA9IHRoaXMuYV90ZXhDb29yZC5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gey4uLm51bWJlcn0gYXJnc1xyXG4gICAgICogQG1lbWJlcm9mIE1lc2hcclxuICAgICAqL1xyXG4gICAgc2V0VGV4dHVyZUNvb3JkaW5hdGVzKCAuLi5hcmdzICkge1xyXG4gICAgICAgIGxldCBtaW5JbmRleCA9IEluZmluaXR5O1xyXG4gICAgICAgIGxldCBtYXhJbmRleCA9IC1JbmZpbml0eTtcclxuXHJcbiAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkgKz0gMyApIHtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBhcmdzW2ldO1xyXG4gICAgICAgICAgICBjb25zdCB4ID0gYXJnc1tpICsgMV07XHJcbiAgICAgICAgICAgIGNvbnN0IHkgPSBhcmdzW2kgKyAyXTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYV90ZXhDb29yZFtpbmRleCAqIDJdID0geDtcclxuICAgICAgICAgICAgdGhpcy5hX3RleENvb3JkW2luZGV4ICogMiArIDFdID0geTtcclxuICAgICAgICAgICAgbWluSW5kZXggPSBNYXRoLm1pbiggbWluSW5kZXgsaW5kZXggKTtcclxuICAgICAgICAgICAgbWF4SW5kZXggPSBNYXRoLm1heCggbWF4SW5kZXgsaW5kZXggKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fJCR1cGRhdGVDb2RlIHw9IFNwcml0ZS5VcGRhdGVDb2Rlcy5VUERBVEVfRVhUUkE7XHJcbiAgICAgICAgdGhpcy5kaXJ0eS50ZXhDb29yZE9mZnNldCA9IE1hdGgubWluKCB0aGlzLmRpcnR5LnRleENvb3JkT2Zmc2V0IC8gMixtaW5JbmRleCApICogMjtcclxuICAgICAgICB0aGlzLmRpcnR5LnRleENvb3JkTGVuZ3RoID0gTWF0aC5tYXgoICggdGhpcy5kaXJ0eS50ZXhDb29yZE9mZnNldCArIHRoaXMuZGlydHkudGV4Q29vcmRMZW5ndGggKSAvIDIgLG1heEluZGV4ICkgKiAyO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFRleHR1cmVDb29yZGluYXRlKCBpLHgseSApIHtcclxuICAgICAgICB0aGlzLmFfdGV4Q29vcmRbaSAqIDJdID0geDtcclxuICAgICAgICB0aGlzLmFfdGV4Q29vcmRbaSAqIDIgKyAxXSA9IHk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VGV4dHVyZUNvb3JkaW5hdGUoIGkgKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQb2ludCggdGhpcy5hX3RleENvb3JkW2kgKiAyXSx0aGlzLmFfdGV4Q29vcmRbaSAqIDIgKyAxXSApO1xyXG4gICAgfVxyXG5cclxuICAgIF9jYWxjdWxhdGVMb2NhbEJvdW5kcyggc3RhcnRJbmRleCA9IDAsZW5kSW5kZXggPSB0aGlzLmFfcG9zaXRpb24ubGVuZ3RoIC8gMiApIHtcclxuICAgICAgICBsZXQgbWluWCA9IEluZmluaXR5LG1heFggPSAtSW5maW5pdHksbWluWSA9IEluZmluaXR5ICxtYXhZID0gLUluZmluaXR5O1xyXG5cclxuICAgICAgICBmb3IgKCBsZXQgaSA9IHN0YXJ0SW5kZXg7IGkgPCBlbmRJbmRleCAqIDI7IGkgKz0gMiApIHtcclxuICAgICAgICAgICAgY29uc3QgeCA9IHRoaXMuYV9wb3NpdGlvbltpXTtcclxuICAgICAgICAgICAgY29uc3QgeSA9IHRoaXMuYV9wb3NpdGlvbltpICsgMV07XHJcblxyXG4gICAgICAgICAgICBtaW5YID0gTWF0aC5taW4oIHgsbWluWCApO1xyXG4gICAgICAgICAgICBtYXhYID0gTWF0aC5tYXgoIHgsbWF4WCApO1xyXG4gICAgICAgICAgICBtaW5ZID0gTWF0aC5taW4oIHksbWluWSApO1xyXG4gICAgICAgICAgICBtYXhZID0gTWF0aC5tYXgoIHksbWF4WSApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl8kJGxvY2FsQm91bmRzLnggPSBtaW5YO1xyXG4gICAgICAgIHRoaXMuXyQkbG9jYWxCb3VuZHMueSA9IG1pblk7XHJcbiAgICAgICAgdGhpcy5fJCRsb2NhbEJvdW5kcy53aWR0aCA9IG1heFggLSBtaW5YO1xyXG4gICAgICAgIHRoaXMuXyQkbG9jYWxCb3VuZHMuaGVpZ2h0ID0gbWF4WSAtIG1pblk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VmVydGV4QXJyYXkoIGFyciApIHtcclxuICAgICAgICB0aGlzLmRpcnR5LnBvc2l0aW9uUmVzZXQgPSAhKCB0aGlzLmFfcG9zaXRpb24gJiYgdGhpcy5hX3Bvc2l0aW9uLmxlbmd0aCA+PSBhcnIubGVuZ3RoICk7XHJcbiAgICAgICAgdGhpcy5hX3Bvc2l0aW9uID0gbmV3IEZsb2F0MzJBcnJheSggYXJyICk7XHJcbiAgICAgICAgdGhpcy5fJCR1cGRhdGVDb2RlIHw9IFNwcml0ZS5VcGRhdGVDb2Rlcy5VUERBVEVfRVhUUkE7XHJcbiAgICAgICAgaWYgKCAhdGhpcy51c2VDdXN0b21Mb2NhbEJvdW5kcyApIHRoaXMuX2NhbGN1bGF0ZUxvY2FsQm91bmRzKCk7XHJcbiAgICAgICAgdGhpcy5kaXJ0eS5wb3NpdGlvbk9mZnNldCA9IDA7XHJcbiAgICAgICAgdGhpcy5kaXJ0eS5wb3NpdGlvbkxlbmd0aCA9IHRoaXMuYV9wb3NpdGlvbi5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gey4uLm51bWJlcn0gYXJnc1xyXG4gICAgICogQG1lbWJlcm9mIE1lc2hcclxuICAgICAqL1xyXG4gICAgc2V0VmVydGljZXMoIC4uLmFyZ3MgKSB7XHJcbiAgICAgICAgbGV0IG1pbkluZGV4ID0gSW5maW5pdHk7XHJcbiAgICAgICAgbGV0IG1heEluZGV4ID0gLUluZmluaXR5O1xyXG5cclxuICAgICAgICBsZXQgbWluWCA9IHRoaXMuXyQkbG9jYWxCb3VuZHMubGVmdDtcclxuICAgICAgICBsZXQgbWF4WCA9IHRoaXMuXyQkbG9jYWxCb3VuZHMucmlnaHQ7XHJcbiAgICAgICAgbGV0IG1pblkgPSB0aGlzLl8kJGxvY2FsQm91bmRzLnRvcDtcclxuICAgICAgICBsZXQgbWF4WSA9IHRoaXMuXyQkbG9jYWxCb3VuZHMuYm90dG9tO1xyXG5cclxuICAgICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSArPSAzICkge1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGFyZ3NbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IHggPSBhcmdzW2kgKyAxXTtcclxuICAgICAgICAgICAgY29uc3QgeSA9IGFyZ3NbaSArIDJdO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5hX3Bvc2l0aW9uW2luZGV4ICogMl0gPSB4O1xyXG4gICAgICAgICAgICB0aGlzLmFfcG9zaXRpb25baW5kZXggKiAyICsgMV0gPSB5O1xyXG4gICAgICAgICAgICBtaW5YID0gTWF0aC5taW4oIHgsbWluWCApO1xyXG4gICAgICAgICAgICBtYXhYID0gTWF0aC5tYXgoIHgsbWF4WCApO1xyXG4gICAgICAgICAgICBtaW5ZID0gTWF0aC5taW4oIHksbWluWSApO1xyXG4gICAgICAgICAgICBtYXhZID0gTWF0aC5taW4oIHksbWF4WSApO1xyXG4gICAgICAgICAgICBtaW5JbmRleCA9IE1hdGgubWluKCBtaW5JbmRleCxpbmRleCApO1xyXG4gICAgICAgICAgICBtYXhJbmRleCA9IE1hdGgubWF4KCBtYXhJbmRleCxpbmRleCApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl8kJHVwZGF0ZUNvZGUgfD0gU3ByaXRlLlVwZGF0ZUNvZGVzLlVQREFURV9FWFRSQTtcclxuXHJcbiAgICAgICAgaWYgKCAhdGhpcy51c2VDdXN0b21Mb2NhbEJvdW5kcyApIHtcclxuICAgICAgICAgICAgdGhpcy5fJCRsb2NhbEJvdW5kcy54ID0gbWluWDtcclxuICAgICAgICAgICAgdGhpcy5fJCRsb2NhbEJvdW5kcy55ID0gbWluWTtcclxuICAgICAgICAgICAgdGhpcy5fJCRsb2NhbEJvdW5kcy53aWR0aCA9IG1heFggLSBtaW5YO1xyXG4gICAgICAgICAgICB0aGlzLl8kJGxvY2FsQm91bmRzLmhlaWdodCA9IG1heFkgLSBtaW5ZO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5kaXJ0eS5wb3NpdGlvbk9mZnNldCA9IE1hdGgubWluKCB0aGlzLmRpcnR5LnBvc2l0aW9uT2Zmc2V0IC8gMixtaW5JbmRleCApICogMjtcclxuICAgICAgICB0aGlzLmRpcnR5LnBvc2l0aW9uTGVuZ3RoID0gTWF0aC5tYXgoICggdGhpcy5kaXJ0eS5wb3NpdGlvbk9mZnNldCArIHRoaXMuZGlydHkucG9zaXRpb25MZW5ndGggKSAvIDIsbWF4SW5kZXggKSAqIDI7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VmVydGV4KCBpLHgseSApIHtcclxuICAgICAgICB0aGlzLmFfcG9zaXRpb25baSAqIDJdID0geDtcclxuICAgICAgICB0aGlzLmFfcG9zaXRpb25baSAqIDIgKyAxXSA9IHk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VmVydGV4KCBpICkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUG9pbnQoIHRoaXMuYV9wb3NpdGlvbltpICogMl0sdGhpcy5hX3Bvc2l0aW9uW2kgKiAyICsgMV0gKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgc2V0Q29sb3JBcnJheSggYXJyICkge1xyXG4gICAgICAgIHRoaXMuZGlydHkuY29sb3JSZXNldCA9ICEoIHRoaXMuYV9jb2xvciAmJiB0aGlzLmFfY29sb3IubGVuZ3RoID49IGFyci5sZW5ndGggKiAyICk7XHJcbiAgICAgICAgdGhpcy5hX2NvbG9yID0gbmV3IFVpbnQ4QXJyYXkoIGFyci5sZW5ndGggKiAyICk7XHJcbiAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSArPSAyICkge1xyXG4gICAgICAgICAgICB0aGlzLmFfY29sb3JbaSAqIDIgKyAwXSA9ICggYXJyW2ldID4+IDE2ICkgJiAweGZmO1xyXG4gICAgICAgICAgICB0aGlzLmFfY29sb3JbaSAqIDIgKyAxXSA9ICggYXJyW2ldID4+IDggKSAmIDB4ZmY7XHJcbiAgICAgICAgICAgIHRoaXMuYV9jb2xvcltpICogMiArIDJdID0gKCBhcnJbaV0gKSAmIDB4ZmY7XHJcbiAgICAgICAgICAgIHRoaXMuYV9jb2xvcltpICogMiArIDNdID0gIGFycltpICsgMV0gKiAyNTU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuXyQkdXBkYXRlQ29kZSB8PSBTcHJpdGUuVXBkYXRlQ29kZXMuVVBEQVRFX0VYVFJBO1xyXG4gICAgICAgIHRoaXMuZGlydHkuY29sb3JPZmZzZXQgPSAwO1xyXG4gICAgICAgIHRoaXMuZGlydHkuY29sb3JMZW5ndGggPSB0aGlzLmFfY29sb3IubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHsuLi5udW1iZXJ9IGFyZ3NcclxuICAgICAqIEBtZW1iZXJvZiBNZXNoXHJcbiAgICAgKi9cclxuICAgIHNldENvbG9ycyggLi4uYXJncyApIHtcclxuICAgICAgICBsZXQgbWluSW5kZXggPSBJbmZpbml0eTtcclxuICAgICAgICBsZXQgbWF4SW5kZXggPSAtSW5maW5pdHk7XHJcblxyXG4gICAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpICs9IDMgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gYXJnc1tpXTtcclxuICAgICAgICAgICAgY29uc3QgYyA9IGFyZ3NbaSArIDFdO1xyXG4gICAgICAgICAgICBjb25zdCBhID0gYXJnc1tpICsgMl07XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFfY29sb3JbaW5kZXggKiA0XSA9ICggYyA+PiAxNiApICYgMHhmZjtcclxuICAgICAgICAgICAgdGhpcy5hX2NvbG9yW2luZGV4ICogNCArIDFdID0gKCBjID4+IDggKSAmIDB4ZmY7XHJcbiAgICAgICAgICAgIHRoaXMuYV9jb2xvcltpbmRleCAqIDQgKyAyXSA9IGMgJiAweGZmO1xyXG4gICAgICAgICAgICB0aGlzLmFfY29sb3JbaW5kZXggKiA0ICsgM10gPSBhICogMjU1O1xyXG4gICAgICAgICAgICBtaW5JbmRleCA9IE1hdGgubWluKCBtaW5JbmRleCxpbmRleCApO1xyXG4gICAgICAgICAgICBtYXhJbmRleCA9IE1hdGgubWF4KCBtYXhJbmRleCxpbmRleCApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl8kJHVwZGF0ZUNvZGUgfD0gU3ByaXRlLlVwZGF0ZUNvZGVzLlVQREFURV9FWFRSQTtcclxuICAgICAgICB0aGlzLmRpcnR5LmNvbG9yT2Zmc2V0ID0gTWF0aC5taW4oIHRoaXMuZGlydHkuY29sb3JPZmZzZXQgLyA0LG1pbkluZGV4ICkgKiA0O1xyXG4gICAgICAgIHRoaXMuZGlydHkuY29sb3JMZW5ndGggPSBNYXRoLm1heCggKCB0aGlzLmRpcnR5LmNvbG9yT2Zmc2V0ICsgdGhpcy5kaXJ0eS5jb2xvckxlbmd0aCApIC8gNCxtYXhJbmRleCApICogNDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZ2V0Q29sb3JBcnJheVNpemUoKSB7XHJcbiAgICAgICAgLy8gVXRpbHMubGVnYWN5KCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYV9jb2xvci5sZW5ndGggLyA0O1xyXG4gICAgfVxyXG5cclxuICAgIHNldFJnYmFDb2xvckFycmF5KCBhcnIgKSB7XHJcbiAgICAgICAgdGhpcy5kaXJ0eS5jb2xvclJlc2V0ID0gISggdGhpcy5hX2NvbG9yICYmIHRoaXMuYV9jb2xvci5sZW5ndGggPj0gYXJyLmxlbmd0aCApO1xyXG4gICAgICAgIHRoaXMuYV9jb2xvciA9IG5ldyBVaW50OEFycmF5KCBhcnIubWFwKCB2PT52ICogMjU1ICkgKTtcclxuICAgICAgICB0aGlzLl8kJHVwZGF0ZUNvZGUgfD0gU3ByaXRlLlVwZGF0ZUNvZGVzLlVQREFURV9FWFRSQTtcclxuICAgICAgICB0aGlzLmRpcnR5LmNvbG9yT2Zmc2V0ID0gMDtcclxuICAgICAgICB0aGlzLmRpcnR5LmNvbG9yTGVuZ3RoID0gdGhpcy5hX2NvbG9yLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBzZXRDb2xvciggaSxjLGEgKSB7XHJcbiAgICAgICAgY29uc3QgYXJyID0gVXRpbHMuaGV4MnJnYmEoIGMsYSApO1xyXG5cclxuICAgICAgICB0aGlzLmFfY29sb3JbaSAqIDRdID0gYXJyWzBdO1xyXG4gICAgICAgIHRoaXMuYV9jb2xvcltpICogNCArIDFdID0gYXJyWzFdO1xyXG4gICAgICAgIHRoaXMuYV9jb2xvcltpICogNCArIDJdID0gYXJyWzJdO1xyXG4gICAgICAgIHRoaXMuYV9jb2xvcltpICogNCArIDNdID0gYXJyWzNdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENvbG9yKCBpICkge1xyXG4gICAgICAgIGNvbnN0IGMgPSBVdGlscy5yZ2JhMmhleCggdGhpcy5hX2NvbG9yLGkgKiA0ICk7XHJcblxyXG4gICAgICAgIHJldHVybiB7IGNvbG9yOiBjICYgMHhmZmZmZmYsYWxwaGE6IHRoaXMuYV9jb2xvcltpICogNCArIDNdIH07XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHNldEluZGV4QXJyYXkoIGFyciApIHtcclxuICAgICAgICB0aGlzLmRpcnR5LmluZGV4UmVzZXQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuaW5kaWNlcyA9IG5ldyBVaW50MTZBcnJheSggTWF0aC5jZWlsKCBhcnIubGVuZ3RoIC8gMiApICogMiApOyAvLyBmbG9hdDMy66GcIOuwlOq/lOyVvCDtlZjquLAg65WM66y47JeQIOygleugrFxyXG4gICAgICAgIHRoaXMuaW5kaWNlcy5zZXQoIGFyciApO1xyXG4gICAgICAgIHRoaXMuXyQkdXBkYXRlQ29kZSB8PSBTcHJpdGUuVXBkYXRlQ29kZXMuVVBEQVRFX0VYVFJBO1xyXG4gICAgICAgIHRoaXMuZGlydHkuaW5kZXhPZmZzZXQgPSAwO1xyXG4gICAgICAgIHRoaXMuZGlydHkuaW5kZXhMZW5ndGggPSB0aGlzLmluZGljZXMubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHsuLi5udW1iZXJ9IGFyZ3NcclxuICAgICAqIEBtZW1iZXJvZiBNZXNoXHJcbiAgICAgKi9cclxuICAgIHNldEluZGljZXMoIC4uLmFyZ3MgKSB7XHJcbiAgICAgICAgbGV0IG1pbkluZGV4ID0gSW5maW5pdHk7XHJcbiAgICAgICAgbGV0IG1heEluZGV4ID0gLUluZmluaXR5O1xyXG5cclxuICAgICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSArPSAyICkge1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGFyZ3NbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IHZpID0gYXJnc1tpICsgMV07XHJcblxyXG4gICAgICAgICAgICB0aGlzLmluZGljZXNbaW5kZXhdID0gdmk7XHJcbiAgICAgICAgICAgIG1pbkluZGV4ID0gTWF0aC5taW4oIG1pbkluZGV4LGluZGV4ICk7XHJcbiAgICAgICAgICAgIG1heEluZGV4ID0gTWF0aC5tYXgoIG1heEluZGV4LGluZGV4ICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuXyQkdXBkYXRlQ29kZSB8PSBTcHJpdGUuVXBkYXRlQ29kZXMuVVBEQVRFX0VYVFJBO1xyXG4gICAgICAgIHRoaXMuZGlydHkuaW5kZXhPZmZzZXQgPSBNYXRoLm1pbiggdGhpcy5kaXJ0eS5pbmRleE9mZnNldCxtaW5JbmRleCApO1xyXG4gICAgICAgIHRoaXMuZGlydHkuaW5kZXhMZW5ndGggPSBNYXRoLm1heCggdGhpcy5kaXJ0eS5pbmRleE9mZnNldCArIHRoaXMuZGlydHkuaW5kZXhMZW5ndGgsbWF4SW5kZXggKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbmRleCggaSApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbmRpY2VzW2ldO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEluZGV4KCBpLHYgKSB7XHJcbiAgICAgICAgdGhpcy5pbmRpY2VzW2ldID0gdjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYk5hbWVcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyW119IGFyclxyXG4gICAgICogQHBhcmFtIHtNZXNoLkFycmF5VHlwZXN9IGFycmF5VHlwZVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzaXplPTFdXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtub3JtYWxpemUgPSBmYWxzZV1cclxuICAgICAqIEBtZW1iZXJvZiBNZXNoXHJcbiAgICAgKi9cclxuICAgIHNldEdlbmVyaWNBcnJheSggYXR0cmliTmFtZSwgYXJyLCBhcnJheVR5cGUgPSBNZXNoLkFycmF5VHlwZXMuRkxPQVQzMiwgc2l6ZSA9IDEsIG5vcm1hbGl6ZSA9IGZhbHNlICkge1xyXG4gICAgICAgIHRoaXMuYV9nZW5lcmljQXJyYXkgPSB0aGlzLmFfZ2VuZXJpY0FycmF5IHx8IHt9O1xyXG4gICAgICAgIHRoaXMuYV9nZW5lcmljQXJyYXlbYXR0cmliTmFtZV0gPSB7IFxyXG4gICAgICAgICAgICBkYXRhOiAgICAgICAgICBuZXcgYXJyYXlUeXBlKCBhcnIgKSxcclxuICAgICAgICAgICAgbnVtQ29tcG9uZW50czogc2l6ZSxcclxuICAgICAgICAgICAgbm9ybWFsaXplOiAgICAgbm9ybWFsaXplIFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5fJCR1cGRhdGVDb2RlIHw9IFNwcml0ZS5VcGRhdGVDb2Rlcy5VUERBVEVfRVhUUkE7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNyZWF0ZUJveCggeCwgeSwgdywgaCwgY29sb3IgPSAweGZmZmZmZiwgYWxwaGEgPSAxICkge1xyXG4gICAgICAgIGNvbnN0IG0gPSBuZXcgTWVzaCgpO1xyXG5cclxuICAgICAgICBtLnNldFZlcnRleEFycmF5KCBbeCwgeSwgeCArIHcsIHksIHgsIHkgKyBoLCB4ICsgdywgeSArIGhdICk7XHJcbiAgICAgICAgbS5zZXRDb2xvckFycmF5KCBbY29sb3IsIGFscGhhLCBjb2xvciwgYWxwaGEsIGNvbG9yLCBhbHBoYSwgY29sb3IsIGFscGhhXSApO1xyXG4gICAgICAgIG0uc2V0SW5kZXhBcnJheSggWzAsIDEsIDIsIDEsIDMsIDJdICk7XHJcblxyXG4gICAgICAgIHJldHVybiBtO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBlbmNvZGVFeHRyYVJlbmRlcmluZ0luZm8oKSB7XHJcbiAgICAgICAgY29uc3QgZW5jb2RlZEJ1ZmZlciA9IG5ldyBGbG9hdDMyQXJyYXkoIFxyXG4gICAgICAgICAgICAxNCArIFxyXG4gICAgICAgICAgICAgdGhpcy5kaXJ0eS5wb3NpdGlvbkxlbmd0aCArIFxyXG4gICAgICAgICAgICAgdGhpcy5kaXJ0eS50ZXhDb29yZExlbmd0aCArIFxyXG4gICAgICAgICAgICAgTWF0aC5jZWlsKCB0aGlzLmRpcnR5LmNvbG9yTGVuZ3RoIC8gNCApICsgXHJcbiAgICAgICAgICAgICBNYXRoLmNlaWwoIHRoaXMuZGlydHkuaW5kZXhMZW5ndGggLyAyICkgKTtcclxuXHJcbiAgICAgICAgZW5jb2RlZEJ1ZmZlci5zZXQoIFtcclxuICAgICAgICAgICAgdGhpcy50ZXh0dXJlICE9IG51bGwgPyB0aGlzLnRleHR1cmUuYXNzZXQuaWQgOiAwLFxyXG4gICAgICAgICAgICB0aGlzLmRpcnR5LnBvc2l0aW9uT2Zmc2V0LFxyXG4gICAgICAgICAgICB0aGlzLmRpcnR5LnBvc2l0aW9uTGVuZ3RoLFxyXG4gICAgICAgICAgICB0aGlzLmRpcnR5LnRleENvb3JkT2Zmc2V0LFxyXG4gICAgICAgICAgICB0aGlzLmRpcnR5LnRleENvb3JkTGVuZ3RoLFxyXG4gICAgICAgICAgICB0aGlzLmRpcnR5LmNvbG9yT2Zmc2V0LFxyXG4gICAgICAgICAgICB0aGlzLmRpcnR5LmNvbG9yTGVuZ3RoLFxyXG4gICAgICAgICAgICB0aGlzLmRpcnR5LmluZGV4T2Zmc2V0LFxyXG4gICAgICAgICAgICB0aGlzLmRpcnR5LmluZGV4TGVuZ3RoLFxyXG4gICAgICAgICAgICArdGhpcy5kaXJ0eS50ZXh0dXJlUmVzZXQsXHJcbiAgICAgICAgICAgICt0aGlzLmRpcnR5LnBvc2l0aW9uUmVzZXQsXHJcbiAgICAgICAgICAgICt0aGlzLmRpcnR5LnRleENvb3JkUmVzZXQsXHJcbiAgICAgICAgICAgICt0aGlzLmRpcnR5LmNvbG9yUmVzZXQsXHJcbiAgICAgICAgICAgICt0aGlzLmRpcnR5LmluZGV4UmVzZXQsXHJcbiAgICAgICAgXSApO1xyXG4gICAgICAgIGxldCBvZmZzZXQgPSAxNDtcclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLmRpcnR5LnBvc2l0aW9uTGVuZ3RoID4gMCApIHtcclxuICAgICAgICAgICAgZW5jb2RlZEJ1ZmZlci5zZXQoIFR5cGVkQXJyYXlIZWxwZXIuc3ViYXJyYXkoIHRoaXMuYV9wb3NpdGlvbix0aGlzLmRpcnR5LnBvc2l0aW9uT2Zmc2V0LCB0aGlzLmRpcnR5LnBvc2l0aW9uTGVuZ3RoICksb2Zmc2V0ICk7XHJcbiAgICAgICAgICAgIG9mZnNldCArPSAgdGhpcy5kaXJ0eS5wb3NpdGlvbkxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCB0aGlzLmRpcnR5LnRleENvb3JkTGVuZ3RoID4gMCApIHtcclxuICAgICAgICAgICAgZW5jb2RlZEJ1ZmZlci5zZXQoIFR5cGVkQXJyYXlIZWxwZXIuc3ViYXJyYXkoIHRoaXMuYV90ZXhDb29yZCx0aGlzLmRpcnR5LnRleENvb3JkT2Zmc2V0LCB0aGlzLmRpcnR5LnRleENvb3JkTGVuZ3RoICksb2Zmc2V0ICk7XHJcbiAgICAgICAgICAgIG9mZnNldCArPSAgdGhpcy5kaXJ0eS50ZXhDb29yZExlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCB0aGlzLmRpcnR5LmNvbG9yTGVuZ3RoID4gMCApIHtcclxuICAgICAgICAgICAgZW5jb2RlZEJ1ZmZlci5zZXQoIFR5cGVkQXJyYXlIZWxwZXIuVWludDhUb0Zsb2F0MzIoIHRoaXMuYV9jb2xvcix0aGlzLmRpcnR5LmNvbG9yT2Zmc2V0LCB0aGlzLmRpcnR5LmNvbG9yTGVuZ3RoICksb2Zmc2V0ICk7XHJcbiAgICAgICAgICAgIG9mZnNldCArPSAgdGhpcy5kaXJ0eS5jb2xvckxlbmd0aCAvIDQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggdGhpcy5kaXJ0eS5pbmRleExlbmd0aCA+IDAgKSB7XHJcbiAgICAgICAgICAgIGVuY29kZWRCdWZmZXIuc2V0KCBUeXBlZEFycmF5SGVscGVyLlVpbnQxNlRvRmxvYXQzMiggdGhpcy5pbmRpY2VzLHRoaXMuZGlydHkuaW5kZXhPZmZzZXQsIHRoaXMuZGlydHkuaW5kZXhMZW5ndGggKSxvZmZzZXQgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZGlydHkudGV4dHVyZVJlc2V0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5kaXJ0eS5wb3NpdGlvblJlc2V0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5kaXJ0eS50ZXhDb29yZFJlc2V0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5kaXJ0eS5jb2xvclJlc2V0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5kaXJ0eS5pbmRleFJlc2V0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGxldCBnZW5lcmljRGF0YTtcclxuICAgICAgICBsZXQgdHJhbnNmZXI7XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5hX2dlbmVyaWNBcnJheSApIHtcclxuICAgICAgICAgICAgZ2VuZXJpY0RhdGEgPSB0aGlzLmFfZ2VuZXJpY0FycmF5O1xyXG4gICAgICAgICAgICB0cmFuc2ZlciA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKCBsZXQgbmFtZSBpbiB0aGlzLmFfZ2VuZXJpY0FycmF5ICkge1xyXG4gICAgICAgICAgICAgICAgdHJhbnNmZXIucHVzaCggdGhpcy5hX2dlbmVyaWNBcnJheVtuYW1lXS5kYXRhLmJ1ZmZlciApO1xyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gW2VuY29kZWRCdWZmZXIsbnVsbCxnZW5lcmljRGF0YSx0cmFuc2Zlcl07XHJcbiAgICB9XHJcbn1cclxuLyoqIFxyXG4gKiBcclxuICogQGVudW0ge29iamVjdH0gXHJcbiAqL1xyXG5NZXNoLkFycmF5VHlwZXMgPSB7XHJcbiAgICBVSU5UMzI6ICBVaW50MzJBcnJheSxcclxuICAgIFVJTlQxNjogIFVpbnQxNkFycmF5LFxyXG4gICAgVUlOVDg6ICAgVWludDhBcnJheSxcclxuICAgIEZMT0FUMzI6IEZsb2F0MzJBcnJheSxcclxufTtcclxuXHJcbiIsImltcG9ydCB7IFNwcml0ZSB9IGZyb20gJy4vU3ByaXRlJztcbmltcG9ydCB7IEV2ZW50IH0gZnJvbSAnLi9FdmVudCc7XG5pbXBvcnQgeyBlYXNpbmcgfSBmcm9tICcuL2Vhc2luZyc7XG5cbmNvbnN0IEVNUFRZX0tFWSA9IFwiJFwiO1xuY29uc3QgU1RPUF9NQVJLID0gLTE7XG5cbi8qKiBcbiAqIEB0eXBlZGVmIHtvYmplY3R9IE9wdGlvbnMgXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGF1dG9QbGF5XG4qL1xuXG4vKiogQHR5cGUge09wdGlvbnN9ICovXG5jb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICBhdXRvUGxheTogdHJ1ZVxufTtcblxuLy8gXG4vKlxuICAgIOyKpO2FjOydtOyngOyXkCDrtpnslrQg7J6I7J2EIOuVjOunjCDsnpHrj5ntlZzri6QuXG4gICAg7J2867CYIOqwnOyytOydmCDqsJLsnYQg7KGw7KCV7ZWgIOuVjOuPhCDsgqzsmqntlaAg7IiYIOyeiOuLpC5cblxuICAgIFwiZWFzZVwiLFxuICAgIFswLDEwLHRhcmdldCx7eDpbMCwxMDAsZWFzZV19XVxuICAgIFswLFwiZ290b1wiLFwiZXZlbnRcIl1cbiAgICBbMCxcInN0b3BcIl1cblxuKi9cblxuLy8gICogQHR5cGVkZWYge09iamVjdC48c3RyaW5nLFJhbmdlPn0gUHJvcHNcblxuLyoqXG4gKiBAdHlwZWRlZiB7bnVtYmVyfCpbXX0gUmFuZ2VcbiAqIEB0eXBlZGVmIHtPYmplY3QuPHN0cmluZyxSYW5nZT59IFByb3BzXG4gKiBAdHlwZWRlZiB7W251bWJlcixudW1iZXIsb2JqZWN0fHN0cmluZ118W251bWJlcixudW1iZXIsb2JqZWN0fHN0cmluZyxQcm9wc118W251bWJlcixzdHJpbmcsc3RyaW5nfG51bWJlcl18W251bWJlcixzdHJpbmddfSBMaW5lXG4gKiBAdHlwZWRlZiB7TGluZVtdfSBUaW1lbGluZVxuICogQHR5cGVkZWYge09iamVjdC48c3RyaW5nLFRpbWVsaW5lPn0gVGltZWxpbmVHcm91cFxuICovXG5cbi8qKlxuICpcbiAqIEB0aGlzIE1vdmllQ2xpcFxuICogQHBhcmFtIHtFdmVudH0gZVxuICovXG5mdW5jdGlvbiBvbkVudGVyRnJhbWUoIGUgKSB7XG4gICAgLyoqIEB0eXBlIHt7dGltZWxpbmU6b2JqZWN0LGFjdGlvbjpvYmplY3QsbGFzdEZyYW1lOm51bWJlcn19ICovXG4gICAgY29uc3QgYW5pID0gdGhpcy5fX21jLmFuaW1hdGlvbnNbdGhpcy5fX21jLmN1cnJlbnRBbmltYXRpb25dO1xuXG4gICAgaWYgKCBhbmkgPT0gbnVsbCApIHJldHVybjtcbiAgICBmb3IgKCBsZXQgW3RhcmdldCwgdGltZWxpbmVdIG9mIGFuaS50aW1lbGluZS5lbnRyaWVzKCkgKSB7XG4gICAgICAgIGxldCBub0tleSA9IHRydWU7XG5cbiAgICAgICAgLy9jb25zb2xlLmFzc2VydCh0YXJnZXRTcHJpdGUgaW5zdGFuY2VvZiBTcHJpdGUpO1xuICAgICAgICBpZiAoIHR5cGVvZiB0YXJnZXQgPT0gXCJzdHJpbmdcIiApIHtcbiAgICAgICAgICAgIHRhcmdldCA9IHRoaXMuX19tYy50YXJnZXRzW3RhcmdldF07XG4gICAgICAgICAgICBjb25zb2xlLmFzc2VydCggdGFyZ2V0ICE9IG51bGwsIGBNb3ZpZUNsaXDsnZgg7YOA6rKf7J2EIOywvuydhCDsiJgg7JeG7Iq164uI64ukLmAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoIGNvbnN0IHBhcmFtIGluIHRpbWVsaW5lICkge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB0aW1lbGluZVtwYXJhbV1bdGhpcy5fX21jLmN1cnJlbnRGcmFtZV07XG5cbiAgICAgICAgICAgIGlmICggcGFyYW0gPT0gRU1QVFlfS0VZICkge1xuICAgICAgICAgICAgICAgIG5vS2V5ID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCB2YWx1ZSAhPSBudWxsICkge1xuICAgICAgICAgICAgICAgIHRhcmdldFtwYXJhbV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBub0tleSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCB0YXJnZXQgaW5zdGFuY2VvZiBTcHJpdGUgKSB7XG4gICAgICAgICAgICBpZiAoIG5vS2V5ICkge1xuICAgICAgICAgICAgICAgIGlmICggdGhpcy5jb250YWlucyggdGFyZ2V0ICkgKSB0aGlzLnJlbW92ZUNoaWxkKCB0YXJnZXQgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCAhdGhpcy5jb250YWlucyggdGFyZ2V0ICkgKSB0aGlzLmFkZENoaWxkKCB0YXJnZXQgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGFjdGlvbiA9IGFuaS5hY3Rpb25bdGhpcy5fX21jLmN1cnJlbnRGcmFtZV07XG5cbiAgICBpZiAoIGFjdGlvbiAhPSBudWxsICkge1xuICAgICAgICBpZiAoIGFjdGlvbiA9PSBTVE9QX01BUksgKSB7XG4gICAgICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgfSBlbHNlIGlmICggdHlwZW9mIGFjdGlvbiA9PSBcInN0cmluZ1wiICkge1xuICAgICAgICAgICAgY29uc3QgW2hlYWRlciwgdmFsdWUsIGV4dHJhXSA9IGFjdGlvbi5zcGxpdCggXCI6XCIgKTtcblxuICAgICAgICAgICAgaWYgKCBoZWFkZXIgPT0gXCJhbmlcIiApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdvdG9BbmRQbGF5KCBleHRyYSAhPSBudWxsID8gdmFsdWUgKyBcIjpcIiArIGV4dHJhIDogdmFsdWUgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIGhlYWRlciA9PSBcInNvdW5kXCIgKSB7XG4gICAgICAgICAgICAgICAgLy9UT0RPOlxuICAgICAgICAgICAgfSBlbHNlIGlmICggaGVhZGVyID09IFwiZXZlbnRcIiApIHtcbiAgICAgICAgICAgICAgICAvL1RPRE86XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9fbWMuY3VycmVudEZyYW1lID0gcGFyc2VJbnQoIGFjdGlvbiApO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCB0aGlzLl9fbWMucGxheWluZyA9PSBmYWxzZSB8fCB0aGlzLl9fbWMuY3VycmVudEZyYW1lID49IGFuaS5sYXN0RnJhbWUgKSB0aGlzLnN0b3AoKTtcbiAgICAgICAgZWxzZSB0aGlzLl9fbWMuY3VycmVudEZyYW1lKys7XG4gICAgfVxufVxuXG4vKipcbiAqIEB0aGlzIE1vdmllQ2xpcFxuICogQHBhcmFtIHtUaW1lbGluZX0gdGxcbiAqIEByZXR1cm5zIHt7dGltZWxpbmU6b2JqZWN0LGFjdGlvbjpvYmplY3QsbGFzdEZyYW1lOm51bWJlcn19XG4gKi9cbmZ1bmN0aW9uIHBhcnNlVGltZWxpbmUoIHRsICkge1xuICAgIGNvbnN0IHRpbWVsaW5lID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0IGFjdGlvbiA9IHt9O1xuICAgIGxldCBwYXJhbVRpbWVsaW5lO1xuICAgIGxldCBsYXN0RnJhbWUgPSAwO1xuXG4gICAgZm9yICggY29uc3QgaSBpbiB0bCApIHtcbiAgICAgICAgY29uc3QgbGluZSA9IHRsW2ldO1xuXG4gICAgICAgIGlmICggdHlwZW9mIGxpbmVbMV0gPT0gXCJzdHJpbmdcIiApIHtcbiAgICAgICAgICAgIGNvbnN0IFtmcmFtZSwgY29tbWFuZCwgbGFiZWxdID0gbGluZTtcblxuICAgICAgICAgICAgaWYgKCBjb21tYW5kID09IFwic3RvcFwiICkge1xuICAgICAgICAgICAgICAgIGFjdGlvbltmcmFtZV0gPSBTVE9QX01BUks7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCBjb21tYW5kID09IFwiZ290b1wiICkge1xuICAgICAgICAgICAgICAgIGFjdGlvbltmcmFtZV0gPSB0eXBlb2YgbGFiZWwgPT0gXCJudW1iZXJcIiA/IGxhYmVsIDogXCJhbmk6XCIgKyBsYWJlbDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIGNvbW1hbmQgPT0gXCJldmVudFwiICkge1xuICAgICAgICAgICAgICAgIGFjdGlvbltmcmFtZV0gPSBcImV2ZW50OlwiICsgbGFiZWw7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCBjb21tYW5kID09IFwic291bmRcIiApIHtcbiAgICAgICAgICAgICAgICBhY3Rpb25bZnJhbWVdID0gXCJzb3VuZDpcIiArIGxhYmVsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgW3N0YXJ0RnJhbWUsIGVuZEZyYW1lLCB0YXJnZXRPYmplY3QsIHByb3BzXSA9IGxpbmU7XG5cbiAgICAgICAgICAgIHBhcmFtVGltZWxpbmUgPSB0aW1lbGluZS5nZXQoIHRhcmdldE9iamVjdCApIHx8IHt9O1xuXG4gICAgICAgICAgICBpZiAoIHByb3BzID09IG51bGwgKSB7XG4gICAgICAgICAgICAgICAgcGFyYW1UaW1lbGluZVtFTVBUWV9LRVldID0gcGFyYW1UaW1lbGluZVtFTVBUWV9LRVldIHx8IHt9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgZm9yICggbGV0IGZyYW1lID0gc3RhcnRGcmFtZTsgZnJhbWUgPD0gZW5kRnJhbWU7IGZyYW1lKysgKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtVGltZWxpbmVbRU1QVFlfS0VZXVtmcmFtZV0gPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICBmb3IgKCBjb25zdCBrZXkgaW4gcHJvcHMgKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtVGltZWxpbmVba2V5XSA9IHBhcmFtVGltZWxpbmVba2V5XSB8fCB7fTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIEFycmF5LmlzQXJyYXkoIHByb3BzW2tleV0gKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IFtzdGFydFZhbHVlLCBlbmRWYWx1ZSwgZWFzZV0gPSBwcm9wc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWFzaW5nRnVuYyA9ICggdHlwZW9mIGVhc2UgPT0gXCJmdW5jdGlvblwiID8gZWFzZSA6IGVhc2luZ1tlYXNlXSApIHx8IGVhc2luZy5saW5lYXI7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIGxldCBmcmFtZSA9IHN0YXJ0RnJhbWU7IGZyYW1lIDw9IGVuZEZyYW1lOyBmcmFtZSsrICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1UaW1lbGluZVtrZXldW2ZyYW1lXSA9IGVhc2luZ0Z1bmMoICggZnJhbWUgLSBzdGFydEZyYW1lICkgLyAoIGVuZEZyYW1lIC0gc3RhcnRGcmFtZSApICkgKiAoIGVuZFZhbHVlIC0gc3RhcnRWYWx1ZSApICsgc3RhcnRWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcHJvcHNba2V5XTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggbGV0IGZyYW1lID0gc3RhcnRGcmFtZTsgZnJhbWUgPD0gZW5kRnJhbWU7IGZyYW1lKysgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1UaW1lbGluZVtrZXldW2ZyYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aW1lbGluZS5zZXQoIHRhcmdldE9iamVjdCwgcGFyYW1UaW1lbGluZSApO1xuICAgICAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgICAgICAgICBsYXN0RnJhbWUgPSBNYXRoLm1heCggbGFzdEZyYW1lLCBlbmRGcmFtZSApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgYWN0aW9uLHRpbWVsaW5lLGxhc3RGcmFtZSB9O1xufVxuXG5cbmV4cG9ydCBjbGFzcyBNb3ZpZUNsaXAgZXh0ZW5kcyBTcHJpdGUge1xuICAgIC8qKlxuICAgICAqIOyekOuPmeycvOuhnCDslaDri4jrqZTsnbTshZjsnYQg7ZWY64qUIE1vdmllQ2xpcCDqsJzssrTrpbwg66eM65Og64ukLlxuICAgICAqIE1vdmllQ2xpcOydgCBUd2VlbuydtOuCmCBzaG93LGhpZGXrpbwg7Iuc6rCE7Iic7JeQIOunnuqyjCDrs7Tsl6zspIQg7IiYIOyeiOuLpC5cbiAgICAgKiBcbiAgICAgKiDsmIjsoJwxKSBBcnJheeulvCDsgqzsmqntlZwg6rK97JqwXG4gICAgICogXG4gICAgICogbmV3IE1vdmllQ2xpcChbXG4gICAgICogICAgIFswLDEwLHRhcmdldFNwcix7IHg6WzAsMTAwLFwib3V0Q3ViaWNcIl0sIHk6MjAsIGFscGhhOlswLjUsMV0gfV0sXG4gICAgICogICAgIFsxMSwyMCx0YXJnZXRTcHIseyB4OlsxMDAsMCxlYXNpbmcuaW5Cb3VuY2VdIH1dXG4gICAgICogICAgIFsyMCxcImdvdG9cIiwwXSAvLyDsnbTroIfqsowg66Oo7ZSE66W8IOyLnO2CrCDsiJjrj4Qg7J6I64ukLiDsl4bsnLzrqbQg66eI7KeA66eJIO2UhOugiOyehOyXkOyEnCDrqYjstqQuIFwic3RvcFwiLCBcImV2ZW50XCIsIFwic291bmRcIiDrk7HsnYQg7JO4IOyImCDsnojri6QuXG4gICAgICogXSlcbiAgICAgKiBcbiAgICAgKiDsmIjsoJwyKSBPYmplY3Trpbwg7IKs7Jqp7ZWcIOqyveyasFxuICAgICAqIFxuICAgICAqIG5ldyBNb3ZpZUNsaXAoe1xuICAgICAqICAgICAgZGVmYXVsdDogW1xuICAgICAqICAgICAgICAgIFswLDEwLHRhcmdldFNwciwgeyB5OiAxMCB9XVxuICAgICAqICAgICAgICAgIDpcbiAgICAgKiAgICAgIF0sXG4gICAgICogICAgICBzaG93OiBbXG4gICAgICogICAgICAgICAgWzAsMjAsdGFyZ2V0U3ByLCB7IHg6IDUgfV1cbiAgICAgKiAgICAgICAgICBbMjAsXCJnb3RvXCIsXCJkZWZhdWx0XCJdXG4gICAgICogICAgICBdXG4gICAgICogfSk7XG4gICAgICogXG4gICAgICogQHBhcmFtIHtUaW1lbGluZXxUaW1lbGluZUdyb3VwPX0gdGltZWxpbmVEYXRhIC0g7ZWY64KY7J2YIO2DgOyehOudvOyduCDslaDri4jrqZTsnbTshZjsnYQgQXJyYXnroZwg64Sj6rGw64KYIOuLpOyImOydmCDslaDri4jrqZTsnbTshZjsnYQgT2JqZWN066GcIOuEo+ydhCDsiJgg7J6I64ukXG4gICAgICogQHBhcmFtIHtPcHRpb25zPX0gb3B0aW9uc1xuICAgICAqIEBtZW1iZXJvZiBNb3ZpZUNsaXBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvciggdGltZWxpbmVEYXRhLCBvcHRpb25zICApIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fX21jID0ge307XG4gICAgICAgIHRoaXMuX19tYy5jdXJyZW50RnJhbWUgPSAwO1xuICAgICAgICB0aGlzLl9fbWMuY3VycmVudEFuaW1hdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fX21jLnBsYXlpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fX21jLnRhcmdldHMgPSB7fTtcbiAgICAgICAgdGhpcy5fX21jLmFuaW1hdGlvbnMgPSB7fTtcbiAgICAgICAgdGhpcy5fX21jLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKCBkZWZhdWx0T3B0aW9ucywgb3B0aW9ucyApO1xuICAgICAgICBpZiAoIHRpbWVsaW5lRGF0YSApIHRoaXMuYWRkQW5pbWF0aW9ucyggdGltZWxpbmVEYXRhICk7XG4gICAgICAgIGlmICggdGhpcy5fX21jLm9wdGlvbnMuYXV0b1BsYXkgKSB7XG4gICAgICAgICAgICB0aGlzLnBsYXkoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmllQ2xpcOyXkCBhbmltYXRpb27snYQg7LaU6rCA7ZWc64ukLlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7VGltZWxpbmV8VGltZWxpbmVHcm91cH0gdGltZWxpbmVEYXRhIC0g7ZWY64KY7J2YIO2DgOyehOudvOyduCDslaDri4jrqZTsnbTshZjsnYQgQXJyYXnroZwg64Sj6rGw64KYIOuLpOyImOydmCDslaDri4jrqZTsnbTshZjsnYQgT2JqZWN066GcIOuEo+ydhCDsiJgg7J6I64ukXG4gICAgICogQG1lbWJlcm9mIE1vdmllQ2xpcFxuICAgICAqL1xuICAgIGFkZEFuaW1hdGlvbnMoIHRpbWVsaW5lRGF0YSApIHtcbiAgICAgICAgaWYgKCB0aW1lbGluZURhdGEgIT0gbnVsbCApIHtcbiAgICAgICAgICAgIGlmICggQXJyYXkuaXNBcnJheSggdGltZWxpbmVEYXRhICkgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fX21jLmFuaW1hdGlvbnNbXCJkZWZhdWx0XCJdID0gcGFyc2VUaW1lbGluZS5jYWxsKCB0aGlzLCB0aW1lbGluZURhdGEgKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9fbWMuY3VycmVudEFuaW1hdGlvbiA9IFwiZGVmYXVsdFwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKCBjb25zdCBsYWJlbCBpbiB0aW1lbGluZURhdGEgKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOyyq+uyiOynuCDslaDri4jrqZTsnbTshZjsnYQg65SU7Y+07Yq466GcXG4gICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5fX21jLmN1cnJlbnRBbmltYXRpb24gPT0gbnVsbCApIHRoaXMuX19tYy5jdXJyZW50QW5pbWF0aW9uID0gbGFiZWw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX19tYy5hbmltYXRpb25zW2xhYmVsXSA9IHBhcnNlVGltZWxpbmUuY2FsbCggdGhpcywgdGltZWxpbmVEYXRhW2xhYmVsXSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOuRkCDqsJzsnZggTW92aWVDbGlw7J2EIOuzke2Vqe2VnOuLpFxuICAgICAqXG4gICAgICogQHBhcmFtIHtNb3ZpZUNsaXB9IG1jXG4gICAgICogQHBhcmFtIHtib29sZWFufSByZXBsYWNlXG4gICAgICogQG1lbWJlcm9mIE1vdmllQ2xpcFxuICAgICAqL1xuICAgIG1lcmdlKCBtYyxyZXBsYWNlICkge1xuICAgICAgICBmb3IgKCBjb25zdCBsYWJlbCBpbiBtYy5fX21jLmFuaW1hdGlvbnMgKSB7XG4gICAgICAgICAgICBjb25zdCBhbmkgPSBtYy5fX21jLmFuaW1hdGlvbnNbbGFiZWxdO1xuXG4gICAgICAgICAgICBpZiAoIHJlcGxhY2UgfHwgdGhpcy5fX21jLmFuaW1hdGlvbnNbbGFiZWxdID09IG51bGwgKSB0aGlzLl9fbWMuYW5pbWF0aW9uc1tsYWJlbF0gPSBhbmk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIHNldFRhcmdldCggbmFtZSwgdGFyZ2V0ICkge1xuICAgICAgICB0aGlzLl9fbWMudGFyZ2V0c1tuYW1lXSA9IHRhcmdldDtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGZcbiAgICAgKiBAbWVtYmVyb2YgTW92aWVDbGlwXG4gICAgICovXG4gICAgZ290b0FuZFBsYXkoIGYgKSB7XG4gICAgICAgIGlmICggdHlwZW9mIGYgPT0gXCJzdHJpbmdcIiApIHtcbiAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICAgICAgY29uc3QgW2FuaW1hdGlvbk5hbWUsIGZyYW1lXSA9IGYuc3BsaXQoIFwiOlwiICk7XG5cbiAgICAgICAgICAgIHRoaXMuX19tYy5jdXJyZW50QW5pbWF0aW9uID0gYW5pbWF0aW9uTmFtZTtcbiAgICAgICAgICAgIHRoaXMuX19tYy5jdXJyZW50RnJhbWUgPSBmcmFtZSAhPSBudWxsID8gcGFyc2VJbnQoIGZyYW1lICkgOiAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5hc3NlcnQoIHR5cGVvZiBmID09IFwibnVtYmVyXCIgKTtcbiAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICAgICAgdGhpcy5fX21jLmN1cnJlbnRGcmFtZSA9IHBhcnNlSW50KCBmICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBsYXkoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZcbiAgICAgKiBAbWVtYmVyb2YgTW92aWVDbGlwXG4gICAgICovXG4gICAgZ290b0FuZFN0b3AoIGYgKSB7XG4gICAgICAgIGlmICggdHlwZW9mIGYgPT0gXCJzdHJpbmdcIiApIHtcbiAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICAgICAgY29uc3QgW2FuaW1hdGlvbk5hbWUsIGZyYW1lXSA9IGYuc3BsaXQoIFwiOlwiICk7XG5cbiAgICAgICAgICAgIHRoaXMuX19tYy5jdXJyZW50QW5pbWF0aW9uID0gYW5pbWF0aW9uTmFtZTtcbiAgICAgICAgICAgIHRoaXMuX19tYy5jdXJyZW50RnJhbWUgPSBmcmFtZSAhPSBudWxsID8gcGFyc2VJbnQoIGZyYW1lICkgOiAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5hc3NlcnQoIHR5cGVvZiBmID09IFwibnVtYmVyXCIgKTtcbiAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICAgICAgdGhpcy5fX21jLmN1cnJlbnRGcmFtZSA9IHBhcnNlSW50KCBmICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICB9XG5cbiAgICBwbGF5KCBhbmlOYW1lICkge1xuICAgICAgICBpZiAoIGFuaU5hbWUgIT0gbnVsbCApIHtcbiAgICAgICAgICAgIHRoaXMuZ290b0FuZFBsYXkoIGFuaU5hbWUgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggIXRoaXMuX19tYy5wbGF5aW5nICkge1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCBFdmVudC5FTlRFUl9GUkFNRSxvbkVudGVyRnJhbWUsdGhpcyApO1xuICAgICAgICAgICAgdGhpcy5fX21jLnBsYXlpbmcgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RvcCgpIHtcbiAgICAgICAgaWYgKCB0aGlzLl9fbWMucGxheWluZyApIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lciggRXZlbnQuRU5URVJfRlJBTUUsb25FbnRlckZyYW1lLHRoaXMgKTtcbiAgICAgICAgICAgIHRoaXMuX19tYy5wbGF5aW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGRlc3RpbmF0aW9uXG4gICAgICogQG1lbWJlcm9mIE1vdmllQ2xpcFxuICAgICAqL1xuICAgIHNldEdvdG9BY3Rpb24oIGYsIGRlc3RpbmF0aW9uICkge1xuICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgaWYgKCBwYXJzZUludCggZGVzdGluYXRpb24gKSA9PSBkZXN0aW5hdGlvbiApIGRlc3RpbmF0aW9uID0gcGFyc2VJbnQoIGRlc3RpbmF0aW9uICk7XG4gICAgICAgIHRoaXMuX19tYy5hbmltYXRpb25zW3RoaXMuX19tYy5jdXJyZW50QW5pbWF0aW9uXS5hY3Rpb25bZl0gPSBkZXN0aW5hdGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZcbiAgICAgKiBAbWVtYmVyb2YgTW92aWVDbGlwXG4gICAgICovXG4gICAgc2V0U3RvcEFjdGlvbiggZiApIHtcbiAgICAgICAgdGhpcy5fX21jLmFuaW1hdGlvbnNbdGhpcy5fX21jLmN1cnJlbnRBbmltYXRpb25dLmFjdGlvbltmXSA9IFNUT1BfTUFSSzsgLy8gc3RvcFxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogdGFyZ2V07J2EIOygnOyZuO2VmOqzoCDrqqjrk6Ag64K07Jqp7J20IOuPmeydvO2VnCBNb3ZpZUNsaXDsnYQg66eM65Og64ukLlxuICAgICAqXG4gICAgICogQHJldHVybnMge01vdmllQ2xpcH1cbiAgICAgKiBAbWVtYmVyb2YgTW92aWVDbGlwXG4gICAgICovXG4gICAgaW5zdGFuY2UoKSB7XG4gICAgICAgIGNvbnN0IG5ld09iaiA9IG5ldyBNb3ZpZUNsaXAoIG51bGwgKTtcblxuICAgICAgICBuZXdPYmouX19tYy5hbmltYXRpb25zID0gdGhpcy5fX21jLmFuaW1hdGlvbnM7XG4gICAgICAgIG5ld09iai5fX21jLmN1cnJlbnRBbmltYXRpb24gPSBPYmplY3Qua2V5cyggdGhpcy5fX21jLmFuaW1hdGlvbnMgKVswXTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbiggbmV3T2JqLl9fbWMudGFyZ2V0cywgdGhpcy5fX21jLnRhcmdldHMgKTtcbiAgICAgICAgbmV3T2JqLnBsYXkoKTtcblxuICAgICAgICByZXR1cm4gbmV3T2JqO1xuICAgIH1cbn1cblxuLy8gbGV0IGIgPSBuZXcgU3ByaXRlKCk7XG4vLyBuZXcgTW92aWVDbGlwKFtcbi8vICAgICBbMCwgMCwgYiwgeyB4OiBbMCwxLGVhc2luZy5vdXRDdWJpY10seTogWzEsMV0gfV0sXG4vLyBdKTtcblxuXG4iLCJpbXBvcnQgeyBBc3NldCB9IGZyb20gJy4vQXNzZXQnO1xuaW1wb3J0IHsgRm9udEJhc2UgfSBmcm9tICcuL0ZvbnRCYXNlJztcbmltcG9ydCB7IFV0aWxzIH0gZnJvbSAnLi9VdGlscyc7XG5cbmV4cG9ydCBjbGFzcyBNc2RmRm9udCBleHRlbmRzIEZvbnRCYXNlIHtcbiAgICBjb25zdHJ1Y3RvciggTXNkZkZvbnROYW1lLHJlZmVyZW5jZVNpemUsIHN0eWxlcyApIHtcbiAgICAgICAgc3VwZXIoIE1zZGZGb250TmFtZSwgcmVmZXJlbmNlU2l6ZSwgc3R5bGVzICk7XG4gICAgICAgIC8vIEJpdG1hcFxuICAgICAgICB0aGlzLmFzc2V0ID0gbmV3IEFzc2V0KCBNc2RmRm9udE5hbWUsQXNzZXQuQXNzZXRUeXBlcy5Nc2RmRm9udCApO1xuICAgICAgICAvLyDtjpjsnbTsp4DqsIAg7Jes65+s6rCcIOyeiOuKlCDtj7DtirjripQg7JWE7KeBIOyymOumrCDrqrvtlahcbiAgICAgICAgY29uc3QgcGFnZSA9IHRoaXMuYXNzZXQuZm9udEluZm8ucGFnZXNbMF07XG4gICAgICAgIGNvbnN0IHBuZ1NpemUgPSBVdGlscy5nZXRJbWFnZVNpemUoIHBhZ2UuZmlsZSApO1xuXG4gICAgICAgIHRoaXMuYXNzZXQubG9hZCggeyBcbiAgICAgICAgICAgIGJpdG1hcDogICAgICAgIHBhZ2UuZmlsZSwgXG4gICAgICAgICAgICB3aWR0aDogICAgICAgICBwbmdTaXplLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiAgICAgICAgcG5nU2l6ZS5oZWlnaHQsXG4gICAgICAgICAgICByZWZlcmVuY2VTaXplOiB0aGlzLnJlZmVyZW5jZVNpemUsXG4gICAgICAgICAgICBzdHlsZXM6ICAgICAgICB0aGlzLnN0eWxlcyxcbiAgICAgICAgICAgIGZvbnRJbmZvOiAgICAgIHRoaXMuYXNzZXQuZm9udEluZm8gXG4gICAgICAgIH0gKTtcbiAgICAgICAgdGhpcy5mb250TG9hZGVkID0gZmFsc2U7XG4gICAgfSAgICBcblxuICAgIG1lYXN1cmVUZXh0V2lkdGgoIHN0cixzaXplICkge1xuICAgICAgICBzdXBlci5tZWFzdXJlVGV4dFdpZHRoKCBzdHIsc2l6ZSApO1xuXG4gICAgICAgIGNvbnN0IGZvbnRJbmZvID0gdGhpcy5hc3NldC5mb250SW5mbztcbiAgICAgICAgY29uc3Qgc2NhbGUgPSBzaXplID8gc2l6ZSAvIGZvbnRJbmZvLmluZm8uc2l6ZSA6IDE7XG5cbiAgICAgICAgbGV0IHdpZHRoID0gMDtcblxuICAgICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKysgKSB7XG4gICAgICAgICAgICBjb25zdCBjaGFyID0gc3RyLmNoYXJDb2RlQXQoIGkgKTtcbiAgICAgICAgICAgIGNvbnN0IGNoYXJJbmZvID0gZm9udEluZm8uY2hhcnNbY2hhcl07XG5cbiAgICAgICAgICAgIHdpZHRoICs9IGNoYXJJbmZvLnhhZHZhbmNlICogc2NhbGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdpZHRoOyAgICAgICAgXG4gICAgfVxufVxuXG5cbiIsIlxyXG5pbXBvcnQgeyBTcHJpdGUgfSBmcm9tICcuL1Nwcml0ZSc7IFxyXG5cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgUGFydGljbGVzIGV4dGVuZHMgU3ByaXRlIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkUGFydGljbGVzKCAuLi5hcmdzICkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBzZXRUZXh0dXJlKCAuLi5hcmdzICkge1xyXG5cclxuICAgIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgU3ByaXRlIH0gZnJvbSAnLi9TcHJpdGUnO1xyXG5pbXBvcnQgeyBVdGlscyB9IGZyb20gJy4vVXRpbHMnO1xyXG5cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgUGl4ZWwgZXh0ZW5kcyBTcHJpdGUge1xyXG4gICAgY29uc3RydWN0b3IoIGNvbG9yID0gMHhmZmZmZmYsIGFscGhhID0gMSwgd2lkdGggPSAxLCBoZWlnaHQgPSAxICkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5fJCRzcHJpdGVUeXBlID0gU3ByaXRlLlNwcml0ZVR5cGVzLlBJWEVMO1xyXG4gICAgICAgIHRoaXMuXyQkdXBkYXRlQ29kZSA9IFNwcml0ZS5VcGRhdGVDb2Rlcy5VUERBVEVfRVhUUkE7XHJcbiAgICAgICAgdGhpcy5waXhlbENvbG9yID0gVXRpbHMuaGV4MnJnYmEoIGNvbG9yLGFscGhhICk7XHJcbiAgICAgICAgdGhpcy5waXhlbFdpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgdGhpcy5waXhlbEhlaWdodCA9IGhlaWdodDsgICAgXHJcbiAgICAgICAgdGhpcy5fJCRsb2NhbEJvdW5kcy54ID0gMDtcclxuICAgICAgICB0aGlzLl8kJGxvY2FsQm91bmRzLnkgPSAwO1xyXG4gICAgICAgIHRoaXMuXyQkbG9jYWxCb3VuZHMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICB0aGlzLl8kJGxvY2FsQm91bmRzLmhlaWdodCA9IGhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBzZXRDb2xvciggY29sb3IgPSAweGZmZmZmZiwgYWxwaGEgPSAxICkge1xyXG4gICAgICAgIHRoaXMucGl4ZWxDb2xvciA9IFV0aWxzLmhleDJyZ2JhKCBjb2xvcixhbHBoYSApO1xyXG4gICAgICAgIHRoaXMuXyQkdXBkYXRlQ29kZSA9IFNwcml0ZS5VcGRhdGVDb2Rlcy5VUERBVEVfRVhUUkE7XHJcbiAgICB9XHJcblxyXG4gICAgZW5jb2RlRXh0cmFSZW5kZXJpbmdJbmZvKCkge1xyXG4gICAgICAgIGxldCBlbmNvZGVkQnVmZmVyID0gbmV3IEZsb2F0MzJBcnJheSggNiApO1xyXG5cclxuICAgICAgICBlbmNvZGVkQnVmZmVyWzBdID0gdGhpcy5waXhlbFdpZHRoO1xyXG4gICAgICAgIGVuY29kZWRCdWZmZXJbMV0gPSB0aGlzLnBpeGVsSGVpZ2h0O1xyXG4gICAgICAgIGVuY29kZWRCdWZmZXIuc2V0KCB0aGlzLnBpeGVsQ29sb3IsMiApO1xyXG4gICAgICAgIHJldHVybiBbZW5jb2RlZEJ1ZmZlcl07XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsIi8vXHJcbi8vIOugjOuNlOungeqzvCDroZzsp4Eg7JOw66CI65Oc6rCAIOu2hOumrOuQmOyWtCDsnojquLAg65WM66y47JeQIFJU6rCAIOqwgOyepSDrp4zrk6TquLAg7Ja066C164ukLlxyXG4vLyBSVOulvCDsmpTssq3tlZjripQg7Iuc7KCQ7JeQ7IScIOuplOyduOyTsOugiOuTnOyXkCDsg53shLFcclxuLy8gZHJhd+2VoCDrlYwg6re466a0IOyKpO2UhOudvOydtO2KuCDtirjrpqzsnZgg7Iqk64OF7IO37J2EIOyghOyGoVxyXG4vLyBtYWlu7JeQ7ISc64qUIOuwm+ydgCDsiqTrg4Xsg7fsnYQg6rCA7KeA6rOgIGRyYXfrpbwg7KaJ7IucIOyImO2WiVxyXG4vLyBSVOuKlCDsiJjrj5nsnLzroZwg7YyM6riwIO2VtOyjvOyWtOyVvCDtlahcclxuXHJcblxyXG5pbXBvcnQgeyBhcHBsaWNhdGlvbiwgQXBwbGljYXRpb24gfSBmcm9tICcuL0FwcGxpY2F0aW9uJztcclxuaW1wb3J0IHsgVGV4dHVyZUJhc2UgfSBmcm9tICcuL1RleHR1cmVCYXNlJztcclxuaW1wb3J0IHsgU3ByaXRlIH0gZnJvbSAnLi9TcHJpdGUnO1xyXG5pbXBvcnQgeyBFdmVudCB9IGZyb20gJy4vRXZlbnQnO1xyXG5pbXBvcnQgeyBVdGlscyB9IGZyb20gJy4vVXRpbHMnO1xyXG5pbXBvcnQgeyBSZWN0IH0gZnJvbSAnLi9UeXBlcyc7XHJcbmltcG9ydCB7IEFzc2V0IH0gZnJvbSAnLi9Bc3NldCc7XHJcblxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBSZW5kZXJUYXJnZXQgZXh0ZW5kcyBUZXh0dXJlQmFzZSB7XHJcbiAgICAvKipcclxuICAgICAqQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBSZW5kZXJUYXJnZXQuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGhcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHRcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZmlsdGVyXHJcbiAgICAgKiBAbWVtYmVyb2YgUmVuZGVyVGFyZ2V0XHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKCB3aWR0aCwgaGVpZ2h0LCBmaWx0ZXIgPSBmYWxzZSApIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuYXNzZXQgPSBuZXcgQXNzZXQoIFwiPFJUOio+XCIsQXNzZXQuQXNzZXRUeXBlcy5SZW5kZXJUYXJnZXQgKTtcclxuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgdGhpcy51dlJlY3QgPSBuZXcgUmVjdCggMCwwLHRoaXMud2lkdGgsdGhpcy5oZWlnaHQgKTtcclxuXHJcbiAgICAgICAgdGhpcy5hc3NldC5sb2FkKCB7IHdpZHRoOiB0aGlzLndpZHRoLGhlaWdodDogdGhpcy5oZWlnaHQsZmlsdGVyOiBmaWx0ZXIgfSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2NvbG9yPTBdXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2FscGhhPTBdXHJcbiAgICAgKiBAbWVtYmVyb2YgUmVuZGVyVGFyZ2V0XHJcbiAgICAgKi9cclxuICAgIGNsZWFyKCBjb2xvciA9IDAgLCBhbHBoYSA9IDAgKSB7XHJcbiAgICAgICAgYXBwbGljYXRpb24ucG9zdE1lc3NhZ2VUb1JlbmRlciggeyBtc2c6IFwiYWRkQ29tbWFuZFwiLCBjbGFzczogXCJSZW5kZXJUYXJnZXRcIiwgbWV0aG9kOiBcImNsZWFyXCIsYXJnczogW3RoaXMuYXNzZXQuaWQsIFV0aWxzLmhleDJyZ2JhKCBjb2xvcixhbHBoYSApXSB9ICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3ByaXRlfSBzcHJcclxuICAgICAqIEBtZW1iZXJvZiBSZW5kZXJUYXJnZXRcclxuICAgICAqL1xyXG4gICAgZHJhdyggc3ByICkge1xyXG4gICAgICAgIGxldCBbYnVmLHRyYW5zZmVyTGlzdF0gPSBzcHIuZW5jb2RlUmVuZGVyaW5nSW5mb1dpdGhDaGlsZHJlbigpO1xyXG5cclxuICAgICAgICBhcHBsaWNhdGlvbi5wb3N0TWVzc2FnZVRvUmVuZGVyKCB7IG1zZzogXCJhZGRDb21tYW5kXCIsIGNsYXNzOiBcIlJlbmRlclRhcmdldFwiLCBtZXRob2Q6IFwiZHJhd1wiLGFyZ3M6IFt0aGlzLmFzc2V0LmlkLCBidWZdIH0sIHRyYW5zZmVyTGlzdCApO1xyXG4gICAgfVxyXG59XHJcbiIsIlxuaW1wb3J0IHsgU3ByaXRlIH0gZnJvbSAnLi9TcHJpdGUnO1xuaW1wb3J0IHsgRXZlbnQgfSBmcm9tICcuL0V2ZW50JztcbmltcG9ydCB7IFV0aWxzIH0gZnJvbSAnLi9VdGlscyc7XG5pbXBvcnQgeyBUaW1lciB9IGZyb20gJy4vVGltZXInO1xuaW1wb3J0IHsgTWVzaCB9IGZyb20gJy4vTWVzaCc7XG5pbXBvcnQgeyBSZW5kZXJUYXJnZXQgfSBmcm9tICcuL1JlbmRlclRhcmdldCc7XG4vLyBjb25zdCBTcHJpdGUgPSByZXF1aXJlKFwiLi9zcHJpdGVcIik7XG4vLyBjb25zdCBNZXNoID0gcmVxdWlyZShcIi4vbWVzaFwiKTtcbi8vIGNvbnN0IFJlbmRlclRhcmdldCA9IHJlcXVpcmUoXCIuL3JlbmRlclRhcmdldFwiKTtcbi8vIGNvbnN0IFV0aWxzID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG4vLyBjb25zdCBFdmVudCA9IHJlcXVpcmUoXCIuL2V2ZW50XCIpO1xuXG5mdW5jdGlvbiByYWQoIGQgKSB7XG4gICAgcmV0dXJuIGQgKiBNYXRoLlBJIC8gMTgwO1xufVxuXG5sZXQgX25lZWRSVDtcblxuZnVuY3Rpb24gZGVmYXVsdEVhc2UoIHJhdGlvICkge1xuICAgIHJldHVybiByYXRpbztcbn1cblxuXG5cbmV4cG9ydCBjbGFzcyBTY2VuZU1hbmFnZXIgZXh0ZW5kcyBTcHJpdGUge1xuICAgIGNvbnN0cnVjdG9yKCBhcHBsaWNhdGlvbiwgeCwgeSwgdywgaCwgbHcsIGxoICkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmFwcGxpY2F0aW9uID0gYXBwbGljYXRpb247XG4gICAgICAgIHRoaXMuc3RhZ2UgPSBhcHBsaWNhdGlvbi5zdGFnZTtcbiAgICAgICAgdGhpcy54MSA9IHg7XG4gICAgICAgIHRoaXMueTEgPSB5O1xuICAgICAgICB0aGlzLngyID0geCArIHc7XG4gICAgICAgIHRoaXMueTIgPSB5ICsgaDtcbiAgICAgICAgdGhpcy5sdyA9IGx3O1xuICAgICAgICB0aGlzLmxoID0gbGg7XG4gICAgICAgIHRoaXMudHdlZW5pbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uRXZlbnRDYXRjaGVyID0gbmV3IFNwcml0ZSgpO1xuICAgICAgICAvKiogQHR5cGUge01lc2h9ICovXG4gICAgICAgIHRoaXMuX2JsYWNrTWVzaCA9IG51bGw7XG4gICAgICAgIC8qKiBAdHlwZSB7UmVuZGVyVGFyZ2V0fSAqL1xuICAgICAgICB0aGlzLl9SVCA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8jcmVnaW9uIFtUcmFuc2l0aW9uc11cblx0XG4gICAgLy8gc2NlbmUyID09IG5ld1NjZW5lO1xuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8g7Yq4656c7KeA7IWY65OkXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG4gICAgc3RhdGljIGFjY29yZGlvbkxlZnQoIHNlbGYsIHNjZW5lMSwgc2NlbmUyLCB0LCByYXdUICkge1xuICAgICAgICBjb25zdCB3ID0gc2VsZi5sdztcbiAgICAgICAgLy9sZXQgaCA9IHNlbGYubGg7XG4gICAgICAgIGNvbnN0IHNjYWxlMSA9ICggMSAtIHQgKTtcbiAgICAgICAgY29uc3Qgc2NhbGUyID0gdDtcblxuICAgICAgICBzY2VuZTEuc2V0U2NhbGVYKCBzY2FsZTEgKTtcbiAgICAgICAgc2NlbmUyLnNldFgoIHcgKiBzY2FsZTEgKTtcbiAgICAgICAgc2NlbmUyLnNldFNjYWxlWCggc2NhbGUyICk7XG4gICAgfVxuXG4gICAgc3RhdGljIGFjY29yZGlvblJpZ2h0KCBzZWxmLCBzY2VuZTEsIHNjZW5lMiwgdCwgcmF3VCApIHtcbiAgICAgICAgY29uc3QgdyA9IHNlbGYubHc7XG4gICAgICAgIC8vbGV0IGggPSBzZWxmLmxoO1xuICAgICAgICBjb25zdCBzY2FsZTEgPSAoIDEgLSB0ICk7XG4gICAgICAgIGNvbnN0IHNjYWxlMiA9IHQ7XG5cbiAgICAgICAgc2NlbmUxLnNldFgoIHcgKiBzY2FsZTIgKTtcbiAgICAgICAgc2NlbmUxLnNldFNjYWxlWCggc2NhbGUxICk7XG4gICAgICAgIHNjZW5lMi5zZXRTY2FsZVgoIHNjYWxlMiApO1xuICAgIH1cblxuXG4gICAgc3RhdGljIHpvb21PdXQoIHNlbGYsIHNjZW5lMSwgc2NlbmUyLCB0LCByYXdUICkge1xuICAgICAgICBjb25zdCB3ID0gc2VsZi5sdztcbiAgICAgICAgY29uc3QgaCA9IHNlbGYubGg7XG4gICAgICAgIGNvbnN0IHNjYWxlMSA9IHQgKyAxO1xuICAgICAgICBjb25zdCBzY2FsZTIgPSB0O1xuICAgICAgICBjb25zdCBhbHBoYSA9IDEgLSB0ICogMS4yO1xuXG4gICAgICAgIHNjZW5lMS5zZXRBbHBoYSggYWxwaGEgKTtcbiAgICAgICAgaWYgKCBhbHBoYSA8PSAwICkgc2NlbmUxLnNldFZpc2libGUoIGZhbHNlICk7XG5cbiAgICAgICAgc2NlbmUxLnNldFNjYWxlKCBzY2FsZTEgKTtcbiAgICAgICAgc2NlbmUxLnNldFBvc2l0aW9uKCAtKCB3ICogc2NhbGUxIC0gdyApIC8gMiwgLSggaCAqIHNjYWxlMSAtIGggKSAvIDIgKTtcbiAgICAgICAgc2NlbmUyLnNldEFscGhhKCB0ICk7XG4gICAgICAgIHNjZW5lMi5zZXRTY2FsZSggc2NhbGUyICk7XG4gICAgICAgIHNjZW5lMi5zZXRQb3NpdGlvbiggLSggdyAqIHNjYWxlMiAtIHcgKSAvIDIsIC0oIGggKiBzY2FsZTIgLSBoICkgLyAyICk7XG4gICAgfVxuXG4gICAgc3RhdGljIHpvb21Jbiggc2VsZiwgc2NlbmUxLCBzY2VuZTIsIHQsIHJhd1QgKSB7XG4gICAgICAgIGNvbnN0IHcgPSBzZWxmLmx3O1xuICAgICAgICBjb25zdCBoID0gc2VsZi5saDtcbiAgICAgICAgY29uc3Qgc2NhbGUxID0gdCArIDE7XG4gICAgICAgIGNvbnN0IHNjYWxlMiA9IHQ7XG5cbiAgICAgICAgc2NlbmUxLnNldEFscGhhKCAxIC0gdCApO1xuICAgICAgICBzY2VuZTEuc2V0U2NhbGUoIHNjYWxlMSApO1xuICAgICAgICBzY2VuZTEuc2V0UG9zaXRpb24oIC0oIHcgKiBzY2FsZTEgLSB3ICkgLyAyLCAtKCBoICogc2NhbGUxIC0gaCApIC8gMiApO1xuICAgICAgICBzY2VuZTIuc2V0QWxwaGEoIHQgKTtcbiAgICAgICAgc2NlbmUyLnNldFNjYWxlKCBzY2FsZTIgKTtcbiAgICAgICAgc2NlbmUyLnNldFBvc2l0aW9uKCAtKCB3ICogc2NhbGUyIC0gdyApIC8gMiwgLSggaCAqIHNjYWxlMiAtIGggKSAvIDIgKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgem9vbU91dENyb3NzKCBzZWxmLCBzY2VuZTEsIHNjZW5lMiwgdCwgcmF3VCApIHtcbiAgICAgICAgY29uc3QgdyA9IHNlbGYubHc7XG4gICAgICAgIGNvbnN0IGggPSBzZWxmLmxoO1xuICAgICAgICBjb25zdCBzY2FsZTEgPSB0ICsgMTtcbiAgICAgICAgY29uc3Qgc2NhbGUyID0gKCAxIC0gdCApICsgMTtcbiAgICAgICAgY29uc3QgYWxwaGEgPSAxIC0gdCAqIDEuMjtcblxuICAgICAgICBzY2VuZTEuc2V0QWxwaGEoIGFscGhhICk7XG4gICAgICAgIGlmICggYWxwaGEgPD0gMCApIHNjZW5lMS5zZXRWaXNpYmxlKCBmYWxzZSApO1xuXG4gICAgICAgIHNjZW5lMS5zZXRTY2FsZSggc2NhbGUxICk7XG4gICAgICAgIHNjZW5lMS5zZXRQb3NpdGlvbiggLSggdyAqIHNjYWxlMSAtIHcgKSAvIDIsIC0oIGggKiBzY2FsZTEgLSBoICkgLyAyICk7XG4gICAgICAgIHNjZW5lMi5zZXRBbHBoYSggdCApO1xuICAgICAgICBzY2VuZTIuc2V0U2NhbGUoIHNjYWxlMiApO1xuICAgICAgICBzY2VuZTIuc2V0UG9zaXRpb24oIC0oIHcgKiBzY2FsZTIgLSB3ICkgLyAyLCAtKCBoICogc2NhbGUyIC0gaCApIC8gMiApO1xuICAgIH1cblxuICAgIHN0YXRpYyB6b29tSW5Dcm9zcyggc2VsZiwgc2NlbmUxLCBzY2VuZTIsIHQsIHJhd1QgKSB7XG4gICAgICAgIGNvbnN0IHcgPSBzZWxmLmx3O1xuICAgICAgICBjb25zdCBoID0gc2VsZi5saDtcbiAgICAgICAgY29uc3Qgc2NhbGUxID0gKCAxIC0gdCApO1xuICAgICAgICBjb25zdCBzY2FsZTIgPSB0O1xuXG4gICAgICAgIHNjZW5lMS5zZXRBbHBoYSggMSAtIHQgKTtcbiAgICAgICAgc2NlbmUxLnNldFNjYWxlKCBzY2FsZTEgKTtcbiAgICAgICAgc2NlbmUxLnNldFBvc2l0aW9uKCAtKCB3ICogc2NhbGUxIC0gdyApIC8gMiwgLSggaCAqIHNjYWxlMSAtIGggKSAvIDIgKTtcbiAgICAgICAgc2NlbmUyLnNldEFscGhhKCB0ICk7XG4gICAgICAgIHNjZW5lMi5zZXRTY2FsZSggc2NhbGUyICk7XG4gICAgICAgIHNjZW5lMi5zZXRQb3NpdGlvbiggLSggdyAqIHNjYWxlMiAtIHcgKSAvIDIsIC0oIGggKiBzY2FsZTIgLSBoICkgLyAyICk7XG4gICAgfVxuXG5cbiAgICBzdGF0aWMgc3BpbkNXKCBzZWxmLCBzY2VuZTEsIHNjZW5lMiwgdCwgcmF3VCApIHtcbiAgICAgICAgY29uc3QgdyA9IHNlbGYubHc7XG4gICAgICAgIGNvbnN0IGggPSBzZWxmLmxoO1xuICAgICAgICAvL1x0bGV0IGExID0gKDEtdCkgKiAzNjA7XG4gICAgICAgIGNvbnN0IGExID0gdCAqIDE4MDtcbiAgICAgICAgY29uc3QgYTIgPSAxODAgKyB0ICogMTgwO1xuICAgICAgICAvL2xldCBsID0gTWF0aC5zcXJ0KCh3IC8gMikgKiogMiwgKGggLyAyKSAqKiAyKTtcbiAgICAgICAgY29uc3QgW3gxLCB5MV0gPSBbTWF0aC5jb3MoIHJhZCggYTEgKSApICogdyAvIDIgLSBNYXRoLnNpbiggcmFkKCBhMSApICkgKiBoIC8gMiAtIHcgLyAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLnNpbiggcmFkKCBhMSApICkgKiB3IC8gMiArIE1hdGguY29zKCByYWQoIGExICkgKSAqIGggLyAyIC0gaCAvIDJdO1xuICAgICAgICBjb25zdCBbeDIsIHkyXSA9IFtNYXRoLmNvcyggcmFkKCBhMiApICkgKiB3IC8gMiAtIE1hdGguc2luKCByYWQoIGEyICkgKSAqIGggLyAyIC0gdyAvIDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguc2luKCByYWQoIGEyICkgKSAqIHcgLyAyICsgTWF0aC5jb3MoIHJhZCggYTIgKSApICogaCAvIDIgLSBoIC8gMl07XG5cbiAgICAgICAgc2NlbmUxLnNldEFscGhhKCAxIC0gdCApO1xuICAgICAgICBzY2VuZTIuc2V0QWxwaGEoIHQgKTtcbiAgICAgICAgc2NlbmUxLnNldFJvdGF0aW9uKCBhMSApO1xuICAgICAgICBzY2VuZTIuc2V0Um90YXRpb24oIGEyICk7XG4gICAgICAgIHNjZW5lMS5zZXRQb3NpdGlvbiggLXgxLCAteTEgKTtcbiAgICAgICAgc2NlbmUyLnNldFBvc2l0aW9uKCAteDIsIC15MiApO1xuICAgIH1cblxuICAgIHN0YXRpYyBzcGluQ0NXKCBzZWxmLCBzY2VuZTEsIHNjZW5lMiwgdCwgcmF3VCApIHtcbiAgICAgICAgY29uc3QgdyA9IHNlbGYubHc7XG4gICAgICAgIGNvbnN0IGggPSBzZWxmLmxoO1xuICAgICAgICAvL1x0bGV0IGExID0gKDEtdCkgKiAzNjA7XG4gICAgICAgIGNvbnN0IGExID0gMTgwICsgKCAxIC0gdCApICogMTgwO1xuICAgICAgICBjb25zdCBhMiA9ICggMSAtIHQgKSAqIDE4MDtcbiAgICAgICAgLy9sZXQgbCA9IE1hdGguc3FydCgodyAvIDIpICoqIDIsIChoIC8gMikgKiogMik7XG4gICAgICAgIGNvbnN0IFt4MSwgeTFdID0gW01hdGguY29zKCByYWQoIGExICkgKSAqIHcgLyAyIC0gTWF0aC5zaW4oIHJhZCggYTEgKSApICogaCAvIDIgLSB3IC8gMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5zaW4oIHJhZCggYTEgKSApICogdyAvIDIgKyBNYXRoLmNvcyggcmFkKCBhMSApICkgKiBoIC8gMiAtIGggLyAyXTtcbiAgICAgICAgY29uc3QgW3gyLCB5Ml0gPSBbTWF0aC5jb3MoIHJhZCggYTIgKSApICogdyAvIDIgLSBNYXRoLnNpbiggcmFkKCBhMiApICkgKiBoIC8gMiAtIHcgLyAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLnNpbiggcmFkKCBhMiApICkgKiB3IC8gMiArIE1hdGguY29zKCByYWQoIGEyICkgKSAqIGggLyAyIC0gaCAvIDJdO1xuXG4gICAgICAgIHNjZW5lMS5zZXRBbHBoYSggMSAtIHQgKTtcbiAgICAgICAgc2NlbmUyLnNldEFscGhhKCB0ICk7XG4gICAgICAgIHNjZW5lMS5zZXRSb3RhdGlvbiggYTEgKTtcbiAgICAgICAgc2NlbmUyLnNldFJvdGF0aW9uKCBhMiApO1xuICAgICAgICBzY2VuZTEuc2V0UG9zaXRpb24oIC14MSwgLXkxICk7XG4gICAgICAgIHNjZW5lMi5zZXRQb3NpdGlvbiggLXgyLCAteTIgKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgc3BpbkNyb3NzQ1coIHNlbGYsIHNjZW5lMSwgc2NlbmUyLCB0LCByYXdUICkge1xuICAgICAgICBjb25zdCB3ID0gc2VsZi5sdztcbiAgICAgICAgY29uc3QgaCA9IHNlbGYubGg7XG4gICAgICAgIGNvbnN0IGExID0gLXQgKiAxODA7XG4gICAgICAgIGNvbnN0IGEyID0gMTgwICsgdCAqIDE4MDtcbiAgICAgICAgLy9sZXQgbCA9IE1hdGguc3FydCgodyAvIDIpICoqIDIsIChoIC8gMikgKiogMik7XG4gICAgICAgIGNvbnN0IFt4MSwgeTFdID0gW01hdGguY29zKCByYWQoIGExICkgKSAqIHcgLyAyIC0gTWF0aC5zaW4oIHJhZCggYTEgKSApICogaCAvIDIgLSB3IC8gMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5zaW4oIHJhZCggYTEgKSApICogdyAvIDIgKyBNYXRoLmNvcyggcmFkKCBhMSApICkgKiBoIC8gMiAtIGggLyAyXTtcbiAgICAgICAgY29uc3QgW3gyLCB5Ml0gPSBbTWF0aC5jb3MoIHJhZCggYTIgKSApICogdyAvIDIgLSBNYXRoLnNpbiggcmFkKCBhMiApICkgKiBoIC8gMiAtIHcgLyAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLnNpbiggcmFkKCBhMiApICkgKiB3IC8gMiArIE1hdGguY29zKCByYWQoIGEyICkgKSAqIGggLyAyIC0gaCAvIDJdO1xuXG4gICAgICAgIHNjZW5lMS5zZXRBbHBoYSggMSAtIHQgKTtcbiAgICAgICAgc2NlbmUyLnNldEFscGhhKCB0ICk7XG4gICAgICAgIHNjZW5lMS5zZXRSb3RhdGlvbiggYTEgKTtcbiAgICAgICAgc2NlbmUyLnNldFJvdGF0aW9uKCBhMiApO1xuICAgICAgICBzY2VuZTEuc2V0UG9zaXRpb24oIC14MSwgLXkxICk7XG4gICAgICAgIHNjZW5lMi5zZXRQb3NpdGlvbiggLXgyLCAteTIgKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgc3BpbkNyb3NzQ0NXKCBzZWxmLCBzY2VuZTEsIHNjZW5lMiwgdCwgcmF3VCApIHtcbiAgICAgICAgY29uc3QgdyA9IHNlbGYubHc7XG4gICAgICAgIGNvbnN0IGggPSBzZWxmLmxoO1xuICAgICAgICBjb25zdCBhMSA9IHQgKiAxODA7XG4gICAgICAgIGNvbnN0IGEyID0gMTgwICsgLXQgKiAxODA7XG4gICAgICAgIC8vbGV0IGwgPSBNYXRoLnNxcnQoKHcgLyAyKSAqKiAyLCAoaCAvIDIpICoqIDIpO1xuICAgICAgICBjb25zdCBbeDEsIHkxXSA9IFtNYXRoLmNvcyggcmFkKCBhMSApICkgKiB3IC8gMiAtIE1hdGguc2luKCByYWQoIGExICkgKSAqIGggLyAyIC0gdyAvIDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguc2luKCByYWQoIGExICkgKSAqIHcgLyAyICsgTWF0aC5jb3MoIHJhZCggYTEgKSApICogaCAvIDIgLSBoIC8gMl07XG4gICAgICAgIGNvbnN0IFt4MiwgeTJdID0gW01hdGguY29zKCByYWQoIGEyICkgKSAqIHcgLyAyIC0gTWF0aC5zaW4oIHJhZCggYTIgKSApICogaCAvIDIgLSB3IC8gMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5zaW4oIHJhZCggYTIgKSApICogdyAvIDIgKyBNYXRoLmNvcyggcmFkKCBhMiApICkgKiBoIC8gMiAtIGggLyAyXTtcblxuICAgICAgICBzY2VuZTEuc2V0QWxwaGEoIDEgLSB0ICk7XG4gICAgICAgIHNjZW5lMi5zZXRBbHBoYSggdCApO1xuICAgICAgICBzY2VuZTEuc2V0Um90YXRpb24oIGExICk7XG4gICAgICAgIHNjZW5lMi5zZXRSb3RhdGlvbiggYTIgKTtcbiAgICAgICAgc2NlbmUxLnNldFBvc2l0aW9uKCAteDEsIC15MSApO1xuICAgICAgICBzY2VuZTIuc2V0UG9zaXRpb24oIC14MiwgLXkyICk7XG4gICAgfVxuXG5cbiAgICBzdGF0aWMgYmFsbG9vbiggc2VsZiwgc2NlbmUxLCBzY2VuZTIsIHQsIHJhd1QgKSB7XG4gICAgICAgIGNvbnN0IHcgPSBzZWxmLmx3O1xuICAgICAgICBjb25zdCBoID0gc2VsZi5saDtcbiAgICAgICAgY29uc3Qgc2NhbGUxeCA9IHQgKyAxO1xuICAgICAgICBjb25zdCBzY2FsZTJ4ID0gKCAxIC0gdCApICsgMTtcbiAgICAgICAgY29uc3Qgc2NhbGUxeSA9ICggMSAtIHQgKTtcbiAgICAgICAgY29uc3Qgc2NhbGUyeSA9IHQ7XG5cbiAgICAgICAgc2NlbmUxLnNldEFscGhhKCAxIC0gdCApO1xuICAgICAgICBzY2VuZTEuc2V0U2NhbGUoIHNjYWxlMXgsIHNjYWxlMXkgKTtcbiAgICAgICAgc2NlbmUxLnNldFBvc2l0aW9uKCAtKCB3ICogc2NhbGUxeCAtIHcgKSAvIDIsIC0oIGggKiBzY2FsZTF5IC0gaCApIC8gMiApO1xuICAgICAgICBzY2VuZTIuc2V0QWxwaGEoIHQgKTtcbiAgICAgICAgc2NlbmUyLnNldFNjYWxlKCBzY2FsZTJ4LCBzY2FsZTJ5ICk7XG4gICAgICAgIHNjZW5lMi5zZXRQb3NpdGlvbiggLSggdyAqIHNjYWxlMnggLSB3ICkgLyAyLCAtKCBoICogc2NhbGUyeSAtIGggKSAvIDIgKTtcbiAgICB9XG5cblxuICAgIHN0YXRpYyB0diggc2VsZiwgc2NlbmUxLCBzY2VuZTIsIHQsIHJhd1QgKSB7XG4gICAgICAgIGNvbnN0IHcgPSBzZWxmLmx3O1xuICAgICAgICBjb25zdCBoID0gc2VsZi5saDtcbiAgICAgICAgY29uc3Qgc2NhbGUxeCA9IHQgKiAzICsgMTtcbiAgICAgICAgY29uc3Qgc2NhbGUyeCA9IHQgKiAwLjIgKyAwLjg7Ly8xLS0oMS10KSozKzE7XG4gICAgICAgIGNvbnN0IHNjYWxlMXkgPSAoIDEgLSB0ICk7XG4gICAgICAgIGNvbnN0IHNjYWxlMnkgPSB0O1xuXG4gICAgICAgIHNjZW5lMS5zZXRBbHBoYSggMSAtIHQgKTtcbiAgICAgICAgLy9sZXQgY29sb3IgPSBNYXRoLm1heCgxLXQqMiwwKTtcbiAgICAgICAgLy9zY2VuZTEuc2V0Q29sb3JNdWx0aXBsaWVyKGNvbG9yLGNvbG9yLGNvbG9yKTtcbiAgICAgICAgc2NlbmUxLnNldFNjYWxlKCBzY2FsZTF4LCBzY2FsZTF5ICk7XG4gICAgICAgIHNjZW5lMS5zZXRQb3NpdGlvbiggLSggdyAqIHNjYWxlMXggLSB3ICkgLyAyLCAtKCBoICogc2NhbGUxeSAtIGggKSAvIDIgKTtcbiAgICAgICAgc2NlbmUyLnNldEFscGhhKCB0ICk7XG4gICAgICAgIHNjZW5lMi5zZXRTY2FsZSggc2NhbGUyeCwgc2NhbGUyeSApO1xuICAgICAgICBzY2VuZTIuc2V0UG9zaXRpb24oIC0oIHcgKiBzY2FsZTJ4IC0gdyApIC8gMiwgLSggaCAqIHNjYWxlMnkgLSBoICkgLyAyICk7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldFdpcGVyVjIoIHNlbGYsIHcsIGggKSB7XG4gICAgICAgIGNvbnN0IG0gPSBuZXcgTWVzaCgpO1xuXG4gICAgICAgIG0uc2V0VmVydGV4QXJyYXkoIFswLCAwLCB3LCAwLCAwLCBoICogMS4yLCB3LCBoLCAwLCBoICogMS40LCB3LCBoICogMS4yXSApO1xuICAgICAgICBtLnNldENvbG9yQXJyYXkoIFsweDAwMDAwMCwgMSwgMHgwMDAwMDAsIDEsIDB4MDAwMDAwLCAxLCAweDAwMDAwMCwgMSwgMHgwMDAwMDAsIDAsIDB4MDAwMDAwLCAwXSApO1xuICAgICAgICBtLnNldEluZGV4QXJyYXkoIFswLCAxLCAyLCAxLCAzLCAyLCAyLCAzLCA0LCAzLCA0LCA1XSApO1xuICAgICAgICBtLnNldENvbG9yTXVsdGlwbGllciggMCwgMCwgMCApO1xuXG4gICAgICAgIHJldHVybiBtO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRXaXBlclYoIHNlbGYsIHcsIGggKSB7XG4gICAgICAgIGNvbnN0IG0gPSBuZXcgTWVzaCgpO1xuXG4gICAgICAgIG0uc2V0VmVydGV4QXJyYXkoIFswLCAwLCB3LCAwLCAwLCBoLCB3LCBoLCAwLCBoICogMS4yLCB3LCBoICogMS4yXSApO1xuICAgICAgICBtLnNldENvbG9yQXJyYXkoIFsweDAwMDAwMCwgMSwgMHgwMDAwMDAsIDEsIDB4MDAwMDAwLCAxLCAweDAwMDAwMCwgMSwgMHgwMDAwMDAsIDAsIDB4MDAwMDAwLCAwXSApO1xuICAgICAgICBtLnNldEluZGV4QXJyYXkoIFswLCAxLCAyLCAxLCAzLCAyLCAyLCAzLCA0LCAzLCA0LCA1XSApO1xuICAgICAgICBtLnNldENvbG9yTXVsdGlwbGllciggMCwgMCwgMCApO1xuXG4gICAgICAgIHJldHVybiBtO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRXaXBlckgoIHNlbGYsIHcsIGggKSB7XG4gICAgICAgIGNvbnN0IG0gPSBuZXcgTWVzaCgpO1xuXG4gICAgICAgIG0uc2V0VmVydGV4QXJyYXkoIFswLCAwLCB3LCAwLCAwLCBoLCB3LCBoLCB3ICogMS4yLCAwLCB3ICogMS4yLCBoXSApO1xuICAgICAgICBtLnNldENvbG9yQXJyYXkoIFsweDAwMDAwMCwgMSwgMHgwMDAwMDAsIDEsIDB4MDAwMDAwLCAxLCAweDAwMDAwMCwgMSwgMHgwMDAwMDAsIDAsIDB4MDAwMDAwLCAwXSApO1xuICAgICAgICBtLnNldEluZGV4QXJyYXkoIFswLCAxLCAyLCAxLCAzLCAyLCAxLCA0LCAzLCA0LCA1LCAzXSApO1xuICAgICAgICBtLnNldENvbG9yTXVsdGlwbGllciggMCwgMCwgMCApO1xuXG4gICAgICAgIHJldHVybiBtO1xuICAgIH1cblxuICAgIHN0YXRpYyB3aXBlVXAyKCBzZWxmLCBzY2VuZTEsIHNjZW5lMiwgdCwgcmF3VCApIHtcbiAgICAgICAgY29uc3QgcGh5c2ljYWxNYXJnaW5YID0gLXNlbGYueDE7XG4gICAgICAgIGNvbnN0IHBoeXNpY2FsTWFyZ2luWSA9IC1zZWxmLnkxO1xuICAgICAgICBjb25zdCB3ID0gc2VsZi54MiAtIHNlbGYueDE7XG4gICAgICAgIGNvbnN0IGggPSBzZWxmLnkyIC0gc2VsZi55MTtcblxuICAgICAgICBpZiAoIHNlbGYuX2JsYWNrTWVzaCApIHtcbiAgICAgICAgICAgIHNlbGYuX2JsYWNrTWVzaC5yZW1vdmVGcm9tUGFyZW50KCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIHQgPCAwLjUgKSB7XG4gICAgICAgICAgICAvL2xldCB0MiA9IHQgKiAyO1xuICAgICAgICAgICAgc2NlbmUxLnNldFZpc2libGUoIHRydWUgKTtcbiAgICAgICAgICAgIHNjZW5lMi5zZXRWaXNpYmxlKCBmYWxzZSApO1xuICAgICAgICAgICAgY29uc3QgbSA9IFNjZW5lTWFuYWdlci5nZXRXaXBlclYyKCBzZWxmLHcsIGggKTtcblxuICAgICAgICAgICAgc2VsZi5fYmxhY2tNZXNoID0gbTtcbiAgICAgICAgICAgIHNlbGYuYWRkQ2hpbGQoIG0gKTtcbiAgICAgICAgICAgIG0uc2V0U2NhbGVZKCAtMSApO1xuICAgICAgICAgICAgbS5zZXRYKCAtcGh5c2ljYWxNYXJnaW5YICk7XG4gICAgICAgICAgICBtLnNldFkoIGggKiAoIDEgKyAoIDEgLSB0ICogMiApICogMS40ICkgLSBwaHlzaWNhbE1hcmdpblkgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHQyID0gKCB0IC0gMC41ICkgKiAyO1xuXG4gICAgICAgICAgICBzY2VuZTEuc2V0VmlzaWJsZSggZmFsc2UgKTtcbiAgICAgICAgICAgIHNjZW5lMi5zZXRWaXNpYmxlKCB0cnVlICk7XG4gICAgICAgICAgICBjb25zdCBtID0gU2NlbmVNYW5hZ2VyLmdldFdpcGVyVjIoIHNlbGYsdywgaCApO1xuXG4gICAgICAgICAgICBzZWxmLl9ibGFja01lc2ggPSBtO1xuICAgICAgICAgICAgbS5zZXRTY2FsZVgoIC0xICk7XG4gICAgICAgICAgICBzZWxmLmFkZENoaWxkKCBtICk7XG4gICAgICAgICAgICBtLnNldFgoIHcgLSBwaHlzaWNhbE1hcmdpblggKTtcbiAgICAgICAgICAgIG0uc2V0WSggaCAqICggLXQyICogMS40ICkgLSBwaHlzaWNhbE1hcmdpblkgKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgc3RhdGljIHdpcGVEb3duKCBzZWxmLCBzY2VuZTEsIHNjZW5lMiwgdCwgcmF3VCApIHtcbiAgICAgICAgY29uc3QgcGh5c2ljYWxNYXJnaW5YID0gLXNlbGYueDE7XG4gICAgICAgIGNvbnN0IHBoeXNpY2FsTWFyZ2luWSA9IC1zZWxmLnkxO1xuICAgICAgICBjb25zdCB3ID0gc2VsZi54MiAtIHNlbGYueDE7XG4gICAgICAgIGNvbnN0IGggPSBzZWxmLnkyIC0gc2VsZi55MTtcblxuICAgICAgICBpZiAoIHNlbGYuX2JsYWNrTWVzaCApIHtcbiAgICAgICAgICAgIHNlbGYuX2JsYWNrTWVzaC5yZW1vdmVGcm9tUGFyZW50KCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIHQgPCAwLjUgKSB7XG4gICAgICAgICAgICBjb25zdCB0MiA9IHQgKiAyO1xuXG4gICAgICAgICAgICBzY2VuZTEuc2V0VmlzaWJsZSggdHJ1ZSApO1xuICAgICAgICAgICAgc2NlbmUyLnNldFZpc2libGUoIGZhbHNlICk7XG4gICAgICAgICAgICBjb25zdCBtID0gU2NlbmVNYW5hZ2VyLmdldFdpcGVyViggc2VsZix3LCBoICk7XG5cbiAgICAgICAgICAgIHNlbGYuX2JsYWNrTWVzaCA9IG07XG4gICAgICAgICAgICBzZWxmLmFkZENoaWxkKCBtICk7XG4gICAgICAgICAgICBtLnNldFgoIC1waHlzaWNhbE1hcmdpblggKTtcbiAgICAgICAgICAgIG0uc2V0WSggLWggKiAoIDEgLSB0MiApICogMS4yIC0gcGh5c2ljYWxNYXJnaW5ZICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0MiA9ICggdCAtIDAuNSApICogMjtcblxuICAgICAgICAgICAgc2NlbmUxLnNldFZpc2libGUoIGZhbHNlICk7XG4gICAgICAgICAgICBzY2VuZTIuc2V0VmlzaWJsZSggdHJ1ZSApO1xuICAgICAgICAgICAgY29uc3QgbSA9IFNjZW5lTWFuYWdlci5nZXRXaXBlclYoIHNlbGYsdywgaCApO1xuXG4gICAgICAgICAgICBzZWxmLl9ibGFja01lc2ggPSBtO1xuICAgICAgICAgICAgc2VsZi5hZGRDaGlsZCggbSApO1xuICAgICAgICAgICAgbS5zZXRTY2FsZVkoIC0xICk7XG4gICAgICAgICAgICBtLnNldFgoIC1waHlzaWNhbE1hcmdpblggKTtcbiAgICAgICAgICAgIG0uc2V0WSggaCAqICggMSArIHQyICogMS4yICkgLSBwaHlzaWNhbE1hcmdpblkgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyB3aXBlVXAoIHNlbGYsIHNjZW5lMSwgc2NlbmUyLCB0LCByYXdUICkge1xuICAgICAgICBjb25zdCBwaHlzaWNhbE1hcmdpblggPSAtc2VsZi54MTtcbiAgICAgICAgY29uc3QgcGh5c2ljYWxNYXJnaW5ZID0gLXNlbGYueTE7XG4gICAgICAgIGNvbnN0IHcgPSBzZWxmLngyIC0gc2VsZi54MTtcbiAgICAgICAgY29uc3QgaCA9IHNlbGYueTIgLSBzZWxmLnkxO1xuXG4gICAgICAgIGlmICggc2VsZi5fYmxhY2tNZXNoICkge1xuICAgICAgICAgICAgc2VsZi5fYmxhY2tNZXNoLnJlbW92ZUZyb21QYXJlbnQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggdCA8IDAuNSApIHtcbiAgICAgICAgICAgIC8vbGV0IHQyID0gdCAqIDI7XG4gICAgICAgICAgICBzY2VuZTEuc2V0VmlzaWJsZSggdHJ1ZSApO1xuICAgICAgICAgICAgc2NlbmUyLnNldFZpc2libGUoIGZhbHNlICk7XG4gICAgICAgICAgICBjb25zdCBtID0gU2NlbmVNYW5hZ2VyLmdldFdpcGVyViggc2VsZix3LCBoICk7XG5cbiAgICAgICAgICAgIHNlbGYuX2JsYWNrTWVzaCA9IG07XG4gICAgICAgICAgICBzZWxmLmFkZENoaWxkKCBtICk7XG4gICAgICAgICAgICBtLnNldFNjYWxlWSggLTEgKTtcbiAgICAgICAgICAgIG0uc2V0WCggLXBoeXNpY2FsTWFyZ2luWCApO1xuICAgICAgICAgICAgbS5zZXRZKCBoICogKCAxICsgKCAxIC0gdCAqIDIgKSAqIDEuMiApIC0gcGh5c2ljYWxNYXJnaW5ZICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0MiA9ICggdCAtIDAuNSApICogMjtcblxuICAgICAgICAgICAgc2NlbmUxLnNldFZpc2libGUoIGZhbHNlICk7XG4gICAgICAgICAgICBzY2VuZTIuc2V0VmlzaWJsZSggdHJ1ZSApO1xuICAgICAgICAgICAgY29uc3QgbSA9IFNjZW5lTWFuYWdlci5nZXRXaXBlclYoIHNlbGYsdywgaCApO1xuXG4gICAgICAgICAgICBzZWxmLl9ibGFja01lc2ggPSBtO1xuICAgICAgICAgICAgc2VsZi5hZGRDaGlsZCggbSApO1xuICAgICAgICAgICAgbS5zZXRYKCAtcGh5c2ljYWxNYXJnaW5YICk7XG4gICAgICAgICAgICBtLnNldFkoIGggKiAoIC10MiAqIDEuMiApIC0gcGh5c2ljYWxNYXJnaW5ZICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgd2lwZVJpZ2h0KCBzZWxmLCBzY2VuZTEsIHNjZW5lMiwgdCwgcmF3VCApIHtcbiAgICAgICAgY29uc3QgcGh5c2ljYWxNYXJnaW5YID0gLXNlbGYueDE7XG4gICAgICAgIGNvbnN0IHBoeXNpY2FsTWFyZ2luWSA9IC1zZWxmLnkxO1xuICAgICAgICBjb25zdCB3ID0gc2VsZi54MiAtIHNlbGYueDE7XG4gICAgICAgIGNvbnN0IGggPSBzZWxmLnkyIC0gc2VsZi55MTtcblxuICAgICAgICBpZiAoIHNlbGYuX2JsYWNrTWVzaCApIHtcbiAgICAgICAgICAgIHNlbGYuX2JsYWNrTWVzaC5yZW1vdmVGcm9tUGFyZW50KCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIHQgPCAwLjUgKSB7XG4gICAgICAgICAgICBjb25zdCB0MiA9IHQgKiAyO1xuXG4gICAgICAgICAgICBzY2VuZTEuc2V0VmlzaWJsZSggdHJ1ZSApO1xuICAgICAgICAgICAgc2NlbmUyLnNldFZpc2libGUoIGZhbHNlICk7XG4gICAgICAgICAgICBjb25zdCBtID0gU2NlbmVNYW5hZ2VyLmdldFdpcGVySCggc2VsZix3LCBoICk7XG5cbiAgICAgICAgICAgIHNlbGYuX2JsYWNrTWVzaCA9IG07XG4gICAgICAgICAgICBzZWxmLmFkZENoaWxkKCBtICk7XG4gICAgICAgICAgICBtLnNldFgoIC13ICogKCAxIC0gdDIgKSAqIDEuMiAtIHBoeXNpY2FsTWFyZ2luWCApO1xuICAgICAgICAgICAgbS5zZXRZKCAtcGh5c2ljYWxNYXJnaW5ZICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0MiA9ICggdCAtIDAuNSApICogMjtcblxuICAgICAgICAgICAgc2NlbmUxLnNldFZpc2libGUoIGZhbHNlICk7XG4gICAgICAgICAgICBzY2VuZTIuc2V0VmlzaWJsZSggdHJ1ZSApO1xuICAgICAgICAgICAgY29uc3QgbSA9IFNjZW5lTWFuYWdlci5nZXRXaXBlckgoIHNlbGYsdywgaCApO1xuXG4gICAgICAgICAgICBzZWxmLl9ibGFja01lc2ggPSBtO1xuICAgICAgICAgICAgc2VsZi5hZGRDaGlsZCggbSApO1xuICAgICAgICAgICAgbS5zZXRTY2FsZVgoIC0xICk7XG4gICAgICAgICAgICBtLnNldFgoIHcgKiAoIDEgKyB0MiAqIDEuMiApIC0gcGh5c2ljYWxNYXJnaW5YICk7XG4gICAgICAgICAgICBtLnNldFkoIC1waHlzaWNhbE1hcmdpblkgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyB3aXBlTGVmdCggc2VsZiwgc2NlbmUxLCBzY2VuZTIsIHQsIHJhd1QgKSB7XG4gICAgICAgIGNvbnN0IHBoeXNpY2FsTWFyZ2luWCA9IC1zZWxmLngxO1xuICAgICAgICBjb25zdCBwaHlzaWNhbE1hcmdpblkgPSAtc2VsZi55MTtcbiAgICAgICAgY29uc3QgdyA9IHNlbGYueDIgLSBzZWxmLngxO1xuICAgICAgICBjb25zdCBoID0gc2VsZi55MiAtIHNlbGYueTE7XG5cbiAgICAgICAgaWYgKCBzZWxmLl9ibGFja01lc2ggKSB7XG4gICAgICAgICAgICBzZWxmLl9ibGFja01lc2gucmVtb3ZlRnJvbVBhcmVudCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCB0IDwgMC41ICkge1xuICAgICAgICAgICAgLy9sZXQgdDIgPSB0ICogMjtcbiAgICAgICAgICAgIHNjZW5lMS5zZXRWaXNpYmxlKCB0cnVlICk7XG4gICAgICAgICAgICBzY2VuZTIuc2V0VmlzaWJsZSggZmFsc2UgKTtcbiAgICAgICAgICAgIGNvbnN0IG0gPSBTY2VuZU1hbmFnZXIuZ2V0V2lwZXJIKCBzZWxmLHcsIGggKTtcblxuICAgICAgICAgICAgc2VsZi5fYmxhY2tNZXNoID0gbTtcbiAgICAgICAgICAgIHNlbGYuYWRkQ2hpbGQoIG0gKTtcbiAgICAgICAgICAgIG0uc2V0U2NhbGVYKCAtMSApO1xuICAgICAgICAgICAgbS5zZXRYKCB3ICogKCAxICsgKCAxIC0gdCAqIDIgKSAqIDEuMiApIC0gcGh5c2ljYWxNYXJnaW5YICk7XG4gICAgICAgICAgICBtLnNldFkoIC1waHlzaWNhbE1hcmdpblkgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHQyID0gKCB0IC0gMC41ICkgKiAyO1xuXG4gICAgICAgICAgICBzY2VuZTEuc2V0VmlzaWJsZSggZmFsc2UgKTtcbiAgICAgICAgICAgIHNjZW5lMi5zZXRWaXNpYmxlKCB0cnVlICk7XG4gICAgICAgICAgICBjb25zdCBtID0gU2NlbmVNYW5hZ2VyLmdldFdpcGVySCggc2VsZix3LCBoICk7XG5cbiAgICAgICAgICAgIHNlbGYuX2JsYWNrTWVzaCA9IG07XG4gICAgICAgICAgICBzZWxmLmFkZENoaWxkKCBtICk7XG4gICAgICAgICAgICBtLnNldFgoIHcgKiAoIC10MiAqIDEuMiApIC0gcGh5c2ljYWxNYXJnaW5YICk7XG4gICAgICAgICAgICBtLnNldFkoIC1waHlzaWNhbE1hcmdpblkgKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgc3RhdGljIGdldENsb2NrTWVzaCggc2VsZiwgdywgaCwgcmF0aW8gKSB7XG4gICAgICAgIGlmICggcmF0aW8gPCAwICkge1xuICAgICAgICAgICAgcmF0aW8gPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCByYXRpbyA+IDEgKSB7XG4gICAgICAgICAgICByYXRpbyA9IDE7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhbmdsZSA9IHJhdGlvICogMzYwO1xuICAgICAgICBjb25zdCBhbmdsZVpvbmUgPSBNYXRoLmZsb29yKCByYXRpbyAqIDggKSArIDE7XG4gICAgICAgIGNvbnN0IGFuZ2xlMiA9ICggYW5nbGUgJSA0NSApO1xuICAgICAgICBjb25zdCB0cmlXaWR0aCA9IE1hdGguc2luKCByYWQoIGFuZ2xlMiApICk7XG4gICAgICAgIGxldCB2ID0gW107XG4gICAgICAgIGxldCBpZHggPSBbXTtcblxuICAgICAgICBpZiAoIHJhdGlvID09IDEgKSB7XG4gICAgICAgICAgICB2ID0gWzAgKiB3LCAwICogaCwgMSAqIHcsIDAgKiBoLCAxICogdywgMSAqIGgsIDAgKiB3LCAxICogaF07XG4gICAgICAgICAgICBpZHggPSBbMCwgMSwgMiwgMiwgMywgMF07XG4gICAgICAgIH0gZWxzZSBpZiAoIGFuZ2xlWm9uZSA9PSAxICkge1xuICAgICAgICAgICAgdiA9IFswLjUgKiB3LCAwICogaCwgKCAwLjUgKyB0cmlXaWR0aCApICogdywgMCAqIGgsIDAuNSAqIHcsIDAuNSAqIGhdO1xuICAgICAgICAgICAgaWR4ID0gWzAsIDEsIDJdO1xuICAgICAgICB9IGVsc2UgaWYgKCBhbmdsZVpvbmUgPT0gMiApIHtcbiAgICAgICAgICAgIHYgPSBbMSAqIHcsIDAgKiBoLCAxICogdywgdHJpV2lkdGggKiBoLCAwLjUgKiB3LCAwLjUgKiBoLCAwLjUgKiB3LCAwICogaF07XG4gICAgICAgICAgICBpZHggPSBbMCwgMSwgMiwgMywgMCwgMl07XG4gICAgICAgIH0gZWxzZSBpZiAoIGFuZ2xlWm9uZSA9PSAzICkge1xuICAgICAgICAgICAgdiA9IFsxICogdywgMC41ICogaCwgMSAqIHcsICggMC41ICsgdHJpV2lkdGggKSAqIGgsIDAuNSAqIHcsIDAuNSAqIGgsIDAuNSAqIHcsIDAgKiBoLCAxICogdywgMCAqIGhdO1xuICAgICAgICAgICAgaWR4ID0gWzAsIDEsIDIsIDMsIDQsIDIsIDQsIDAsIDJdO1xuICAgICAgICB9IGVsc2UgaWYgKCBhbmdsZVpvbmUgPT0gNCApIHtcbiAgICAgICAgICAgIHYgPSBbMSAqIHcsIDEgKiBoLCAoIDEgLSB0cmlXaWR0aCApICogdywgMSAqIGgsIDAuNSAqIHcsIDAuNSAqIGgsIDAuNSAqIHcsIDAgKiBoLCAxICogdywgMCAqIGhdO1xuICAgICAgICAgICAgaWR4ID0gWzAsIDEsIDIsIDMsIDQsIDIsIDQsIDAsIDJdO1xuICAgICAgICB9IGVsc2UgaWYgKCBhbmdsZVpvbmUgPT0gNSApIHtcbiAgICAgICAgICAgIHYgPSBbMC41ICogdywgMSAqIGgsICggMC41IC0gdHJpV2lkdGggKSAqIHcsIDEgKiBoLCAwLjUgKiB3LCAwLjUgKiBoLCAwLjUgKiB3LCAwICogaCwgMSAqIHcsIDAgKiBoLCAxICogdywgMSAqIGhdO1xuICAgICAgICAgICAgaWR4ID0gWzAsIDEsIDIsIDMsIDQsIDAsIDQsIDUsIDBdO1xuICAgICAgICB9IGVsc2UgaWYgKCBhbmdsZVpvbmUgPT0gNiApIHtcbiAgICAgICAgICAgIHYgPSBbMCAqIHcsIDEgKiBoLCAwICogdywgKCAxIC0gdHJpV2lkdGggKSAqIGgsIDAuNSAqIHcsIDAuNSAqIGgsIDAuNSAqIHcsIDAgKiBoLCAxICogdywgMCAqIGgsIDEgKiB3LCAxICogaF07XG4gICAgICAgICAgICBpZHggPSBbMCwgMSwgMiwgMywgNCwgMiwgNCwgNSwgMF07XG4gICAgICAgIH0gZWxzZSBpZiAoIGFuZ2xlWm9uZSA9PSA3ICkge1xuICAgICAgICAgICAgdiA9IFswICogdywgMC41ICogaCwgMCAqIHcsICggMC41IC0gdHJpV2lkdGggKSAqIGgsIDAuNSAqIHcsIDAuNSAqIGgsIDAuNSAqIHcsIDAgKiBoLCAxICogdywgMCAqIGgsIDEgKiB3LCAxICogaCwgMCAqIHcsIDEgKiBoXTtcbiAgICAgICAgICAgIGlkeCA9IFswLCAxLCAyLCAzLCA0LCAyLCA0LCA1LCA2LCAwLCAyLCA2XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHYgPSBbMCAqIHcsIDAgKiBoLCB0cmlXaWR0aCAqIHcsIDAgKiBoLCAwLjUgKiB3LCAwLjUgKiBoLCAwLjUgKiB3LCAwICogaCwgMSAqIHcsIDAgKiBoLCAxICogdywgMSAqIGgsIDAgKiB3LCAxICogaF07XG4gICAgICAgICAgICBpZHggPSBbMCwgMSwgMiwgMywgNCwgMiwgNCwgNSwgNiwgMCwgMiwgNl07XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtID0gbmV3IE1lc2goKTtcblxuICAgICAgICAvL20uc2V0VGV4dHVyZSh0ZXgpO1xuICAgICAgICAvL20uc2V0VGV4dHVyZUNvb3JkaW5hdGVBcnJheSh2KTtcbiAgICAgICAgbS5zZXRWZXJ0ZXhBcnJheSggdiApO1xuICAgICAgICBtLnNldEluZGV4QXJyYXkoIGlkeCApO1xuICAgICAgICBtLnNldENvbG9yTXVsdGlwbGllciggMCwgMCwgMCApO1xuXG4gICAgICAgIHJldHVybiBtO1xuICAgIH1cblxuXG5cbiAgICBzdGF0aWMgZ2V0Q2lyY2xlTWVzaCggc2VsZiwgcmFkaXVzICkge1xuICAgICAgICBjb25zdCBzaWRlcyA9IDY0O1xuICAgICAgICBjb25zdCB2ID0gWzAsIDBdO1xuICAgICAgICBjb25zdCBpZHggPSBbXTtcbiAgICAgICAgY29uc3QgYyA9IFsweDAwMDAwMCwgMV07XG5cbiAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgc2lkZXM7IGkrKyApIHtcbiAgICAgICAgICAgIGNvbnN0IGFuZ2xlID0gKCBpIC8gc2lkZXMgKSAqIDIgKiBNYXRoLlBJO1xuXG4gICAgICAgICAgICB2WzIgKyBpICogNF0gPSBNYXRoLmNvcyggYW5nbGUgKSAqIHJhZGl1cztcbiAgICAgICAgICAgIHZbMiArIGkgKiA0ICsgMV0gPSBNYXRoLnNpbiggYW5nbGUgKSAqIHJhZGl1cztcbiAgICAgICAgICAgIHZbMiArIGkgKiA0ICsgMl0gPSBNYXRoLmNvcyggYW5nbGUgKSAqIHJhZGl1cyAqIDEuMjtcbiAgICAgICAgICAgIHZbMiArIGkgKiA0ICsgM10gPSBNYXRoLnNpbiggYW5nbGUgKSAqIHJhZGl1cyAqIDEuMjtcbiAgICAgICAgICAgIGNbMiArIGkgKiA0XSA9IDB4MDAwMDAwO1xuICAgICAgICAgICAgY1syICsgaSAqIDQgKyAxXSA9IDE7XG4gICAgICAgICAgICBjWzIgKyBpICogNCArIDJdID0gMHgwMDAwMDA7XG4gICAgICAgICAgICBjWzIgKyBpICogNCArIDNdID0gMDtcbiAgICAgICAgICAgIGlkeFsgaSAqIDldID0gMDtcdC8vb3JpZ2luO1xuICAgICAgICAgICAgaWR4WyBpICogOSArIDFdID0gKCBpICogMiApICsgMTtcbiAgICAgICAgICAgIGlkeFsgaSAqIDkgKyAyXSA9ICggaSAqIDIgKSArIDM7XG4gICAgICAgICAgICBpZHhbIGkgKiA5ICsgM10gPSAoIGkgKiAyICkgKyAxO1xuICAgICAgICAgICAgaWR4WyBpICogOSArIDRdID0gKCBpICogMiApICsgMjtcbiAgICAgICAgICAgIGlkeFsgaSAqIDkgKyA1XSA9ICggaSAqIDIgKSArIDQ7XG4gICAgICAgICAgICBpZHhbIGkgKiA5ICsgNl0gPSAoIGkgKiAyICkgKyAxO1xuICAgICAgICAgICAgaWR4WyBpICogOSArIDddID0gKCBpICogMiApICsgNDtcbiAgICAgICAgICAgIGlkeFsgaSAqIDkgKyA4XSA9ICggaSAqIDIgKSArIDM7XG5cbiAgICAgICAgICAgIGlmICggaSA9PSBzaWRlcyAtIDEgKSB7XG4gICAgICAgICAgICAgICAgaWR4WyBpICogOSArIDJdID0gMTtcbiAgICAgICAgICAgICAgICBpZHhbIGkgKiA5ICsgNV0gPSAyO1xuICAgICAgICAgICAgICAgIGlkeFsgaSAqIDkgKyA3XSA9IDI7XG4gICAgICAgICAgICAgICAgaWR4WyBpICogOSArIDhdID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vbG9nKExvZy5VSSwgdGFibGUuY29uY2F0KGlkeCxcIixcIikpO1xuICAgICAgICBjb25zdCBtID0gbmV3IE1lc2goKTtcblxuICAgICAgICBtLnNldFZlcnRleEFycmF5KCB2ICk7XG4gICAgICAgIG0uc2V0SW5kZXhBcnJheSggaWR4ICk7XG4gICAgICAgIG0uc2V0Q29sb3JBcnJheSggYyApO1xuXG4gICAgICAgIHJldHVybiBtO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRDaXJjbGVIb2xlTWVzaCggc2VsZiwgcmFkaXVzMSwgcmFkaXVzMiApIHtcbiAgICAgICAgY29uc3Qgc2lkZXMgPSAzMjtcbiAgICAgICAgY29uc3QgdiA9IFtdO1xuICAgICAgICBjb25zdCBpZHggPSBbXTtcbiAgICAgICAgY29uc3QgYyA9IFtdO1xuXG4gICAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHNpZGVzOyBpKysgKSB7XG4gICAgICAgICAgICBjb25zdCBhbmdsZSA9ICggaSAvIHNpZGVzICkgKiAyICogTWF0aC5QSTtcblxuICAgICAgICAgICAgdlsgaSAqIDZdID0gTWF0aC5jb3MoIGFuZ2xlICkgKiByYWRpdXMxIC8gMS4yO1xuICAgICAgICAgICAgdlsgaSAqIDYgKyAxXSA9IE1hdGguc2luKCBhbmdsZSApICogcmFkaXVzMSAvIDEuMjtcbiAgICAgICAgICAgIHZbIGkgKiA2ICsgMl0gPSBNYXRoLmNvcyggYW5nbGUgKSAqIHJhZGl1czE7XG4gICAgICAgICAgICB2WyBpICogNiArIDNdID0gTWF0aC5zaW4oIGFuZ2xlICkgKiByYWRpdXMxO1xuICAgICAgICAgICAgdlsgaSAqIDYgKyA0XSA9IE1hdGguY29zKCBhbmdsZSApICogcmFkaXVzMjtcbiAgICAgICAgICAgIHZbIGkgKiA2ICsgNV0gPSBNYXRoLnNpbiggYW5nbGUgKSAqIHJhZGl1czI7XG4gICAgICAgICAgICBjWyBpICogNl0gPSAweDAwMDAwMDtcbiAgICAgICAgICAgIGNbIGkgKiA2ICsgMV0gPSAwO1xuICAgICAgICAgICAgY1sgaSAqIDYgKyAyXSA9IDB4MDAwMDAwO1xuICAgICAgICAgICAgY1sgaSAqIDYgKyAzXSA9IDE7XG4gICAgICAgICAgICBjWyBpICogNiArIDRdID0gMHgwMDAwMDA7XG4gICAgICAgICAgICBjWyBpICogNiArIDVdID0gMTtcbiAgICAgICAgICAgIGlkeFsgaSAqIDEyXSA9ICggaSAqIDMgKSArIDA7XG4gICAgICAgICAgICBpZHhbIGkgKiAxMiArIDFdID0gKCBpICogMyApICsgNDtcbiAgICAgICAgICAgIGlkeFsgaSAqIDEyICsgMl0gPSAoIGkgKiAzICkgKyAzO1xuICAgICAgICAgICAgaWR4WyBpICogMTIgKyAzXSA9ICggaSAqIDMgKSArIDA7XG4gICAgICAgICAgICBpZHhbIGkgKiAxMiArIDRdID0gKCBpICogMyApICsgMTtcbiAgICAgICAgICAgIGlkeFsgaSAqIDEyICsgNV0gPSAoIGkgKiAzICkgKyA0O1xuICAgICAgICAgICAgaWR4WyBpICogMTIgKyA2XSA9ICggaSAqIDMgKSArIDE7XG4gICAgICAgICAgICBpZHhbIGkgKiAxMiArIDddID0gKCBpICogMyApICsgMjtcbiAgICAgICAgICAgIGlkeFsgaSAqIDEyICsgOF0gPSAoIGkgKiAzICkgKyA1O1xuICAgICAgICAgICAgaWR4WyBpICogMTIgKyA5XSA9ICggaSAqIDMgKSArIDE7XG4gICAgICAgICAgICBpZHhbIGkgKiAxMiArIDEwXSA9ICggaSAqIDMgKSArIDU7XG4gICAgICAgICAgICBpZHhbIGkgKiAxMiArIDExXSA9ICggaSAqIDMgKSArIDQ7XG5cbiAgICAgICAgICAgIGlmICggaSA9PSBzaWRlcyAtIDEgKSB7XG4gICAgICAgICAgICAgICAgaWR4WyBpICogMTIgKyAxXSA9IDE7XG4gICAgICAgICAgICAgICAgaWR4WyBpICogMTIgKyAyXSA9IDA7XG4gICAgICAgICAgICAgICAgaWR4WyBpICogMTIgKyA1XSA9IDE7XG4gICAgICAgICAgICAgICAgaWR4WyBpICogMTIgKyA4XSA9IDI7XG4gICAgICAgICAgICAgICAgaWR4WyBpICogMTIgKyAxMF0gPSAyO1xuICAgICAgICAgICAgICAgIGlkeFsgaSAqIDEyICsgMTFdID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vbG9nKExvZy5VSSwgdGFibGUuY29uY2F0KGlkeCxcIixcIikpO1xuICAgICAgICBjb25zdCBtID0gbmV3IE1lc2goKTtcblxuICAgICAgICBtLnNldFZlcnRleEFycmF5KCB2ICk7XG4gICAgICAgIG0uc2V0SW5kZXhBcnJheSggaWR4ICk7XG4gICAgICAgIG0uc2V0Q29sb3JBcnJheSggYyApO1xuXG4gICAgICAgIHJldHVybiBtO1xuICAgIH1cblxuICAgIHN0YXRpYyBjaXJjbGVJbk91dCggc2VsZiwgc2NlbmUxLCBzY2VuZTIsIHQsIHJhd1QgKSB7XG4gICAgICAgIGNvbnN0IHcgPSBzZWxmLngyIC0gc2VsZi54MTtcbiAgICAgICAgY29uc3QgaCA9IHNlbGYueTIgLSBzZWxmLnkxO1xuICAgICAgICBjb25zdCByYWRpdXMgPSBNYXRoLnNxcnQoICggdyAvIDIgKSAqKiAyICsgKCBoIC8gMiApICoqIDIgKTtcblxuICAgICAgICBpZiAoIHNlbGYuX2JsYWNrTWVzaCApIHtcbiAgICAgICAgICAgIHNlbGYuX2JsYWNrTWVzaC5yZW1vdmVGcm9tUGFyZW50KCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoICggdCA8IDAuNSApICkge1xuICAgICAgICAgICAgY29uc3QgdDIgPSB0ICogMjtcblxuICAgICAgICAgICAgc2NlbmUxLnNldFZpc2libGUoIHRydWUgKTtcbiAgICAgICAgICAgIHNjZW5lMi5zZXRWaXNpYmxlKCBmYWxzZSApO1xuICAgICAgICAgICAgY29uc3QgbSA9IFNjZW5lTWFuYWdlci5nZXRDaXJjbGVIb2xlTWVzaCggc2VsZixyYWRpdXMgKiAoIDEgLSB0MiApICogMS4yLCByYWRpdXMgKiAxLjIgKTtcblxuICAgICAgICAgICAgc2VsZi5fYmxhY2tNZXNoID0gbTtcbiAgICAgICAgICAgIHNlbGYuYWRkQ2hpbGQoIG0gKTtcbiAgICAgICAgICAgIC8vbS5zZXRTY2FsZSh0KTtcbiAgICAgICAgICAgIG0uc2V0WCggc2VsZi5sdyAvIDIgKTtcbiAgICAgICAgICAgIG0uc2V0WSggc2VsZi5saCAvIDIgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHQyID0gKCB0IC0gMC41ICkgKiAyO1xuXG4gICAgICAgICAgICBzY2VuZTEuc2V0VmlzaWJsZSggZmFsc2UgKTtcbiAgICAgICAgICAgIHNjZW5lMi5zZXRWaXNpYmxlKCB0cnVlICk7XG4gICAgICAgICAgICBjb25zdCBtID0gU2NlbmVNYW5hZ2VyLmdldENpcmNsZUhvbGVNZXNoKCBzZWxmLHJhZGl1cyAqIHQyICogMS4yLCByYWRpdXMgKiAxLjIgKTtcblxuICAgICAgICAgICAgc2VsZi5fYmxhY2tNZXNoID0gbTtcbiAgICAgICAgICAgIHNlbGYuYWRkQ2hpbGQoIG0gKTtcbiAgICAgICAgICAgIC8vbS5zZXRTY2FsZSh0KTtcbiAgICAgICAgICAgIG0uc2V0WCggc2VsZi5sdyAvIDIgKTtcbiAgICAgICAgICAgIG0uc2V0WSggc2VsZi5saCAvIDIgKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgc3RhdGljIGNpcmNsZU91dCggc2VsZiwgc2NlbmUxLCBzY2VuZTIsIHQsIHJhd1QgKSB7XG4gICAgICAgIGNvbnN0IHcgPSBzZWxmLngyIC0gc2VsZi54MTtcbiAgICAgICAgY29uc3QgaCA9IHNlbGYueTIgLSBzZWxmLnkxO1xuICAgICAgICBjb25zdCByYWRpdXMgPSBNYXRoLnNxcnQoICggdyAvIDIgKSAqKiAyICsgKCBoIC8gMiApICoqIDIgKTtcblxuICAgICAgICBpZiAoIHNlbGYuX2JsYWNrTWVzaCApIHtcbiAgICAgICAgICAgIHNlbGYuX2JsYWNrTWVzaC5yZW1vdmVGcm9tUGFyZW50KCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoICggdCA8IDAuNSApICkge1xuICAgICAgICAgICAgY29uc3QgdDIgPSB0ICogMjtcblxuICAgICAgICAgICAgc2NlbmUxLnNldFZpc2libGUoIHRydWUgKTtcbiAgICAgICAgICAgIHNjZW5lMi5zZXRWaXNpYmxlKCBmYWxzZSApO1xuICAgICAgICAgICAgY29uc3QgbSA9IFNjZW5lTWFuYWdlci5nZXRDaXJjbGVNZXNoKCBzZWxmLHJhZGl1cyAqIDEuMiApO1xuXG4gICAgICAgICAgICBzZWxmLl9ibGFja01lc2ggPSBtO1xuICAgICAgICAgICAgc2VsZi5hZGRDaGlsZCggbSApO1xuICAgICAgICAgICAgbS5zZXRTY2FsZSggdDIgKTtcbiAgICAgICAgICAgIG0uc2V0WCggc2VsZi5sdyAvIDIgKTtcbiAgICAgICAgICAgIG0uc2V0WSggc2VsZi5saCAvIDIgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHQyID0gKCB0IC0gMC41ICkgKiAyO1xuXG4gICAgICAgICAgICBzY2VuZTEuc2V0VmlzaWJsZSggZmFsc2UgKTtcbiAgICAgICAgICAgIHNjZW5lMi5zZXRWaXNpYmxlKCB0cnVlICk7XG4gICAgICAgICAgICBjb25zdCBtID0gU2NlbmVNYW5hZ2VyLmdldENpcmNsZUhvbGVNZXNoKCBzZWxmLHJhZGl1cyAqIHQyICogMS4yLCByYWRpdXMgKiAxLjIgKTtcblxuICAgICAgICAgICAgc2VsZi5fYmxhY2tNZXNoID0gbTtcbiAgICAgICAgICAgIHNlbGYuYWRkQ2hpbGQoIG0gKTtcbiAgICAgICAgICAgIC8vbS5zZXRTY2FsZSh0KTtcbiAgICAgICAgICAgIG0uc2V0WCggc2VsZi5sdyAvIDIgKTtcbiAgICAgICAgICAgIG0uc2V0WSggc2VsZi5saCAvIDIgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBjaXJjbGVJbiggc2VsZiwgc2NlbmUxLCBzY2VuZTIsIHQsIHJhd1QgKSB7XG4gICAgICAgIGNvbnN0IHcgPSBzZWxmLngyIC0gc2VsZi54MTtcbiAgICAgICAgY29uc3QgaCA9IHNlbGYueTIgLSBzZWxmLnkxO1xuICAgICAgICBjb25zdCByYWRpdXMgPSBNYXRoLnNxcnQoICggdyAvIDIgKSAqKiAyICsgKCBoIC8gMiApICoqIDIgKTtcblxuICAgICAgICBpZiAoIHNlbGYuX2JsYWNrTWVzaCApIHtcbiAgICAgICAgICAgIHNlbGYuX2JsYWNrTWVzaC5yZW1vdmVGcm9tUGFyZW50KCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoICggdCA8IDAuNSApICkge1xuICAgICAgICAgICAgY29uc3QgdDIgPSB0ICogMjtcblxuICAgICAgICAgICAgc2NlbmUxLnNldFZpc2libGUoIHRydWUgKTtcbiAgICAgICAgICAgIHNjZW5lMi5zZXRWaXNpYmxlKCBmYWxzZSApO1xuICAgICAgICAgICAgY29uc3QgbSA9IFNjZW5lTWFuYWdlci5nZXRDaXJjbGVIb2xlTWVzaCggc2VsZixyYWRpdXMgKiAoIDEgLSB0MiApICogMS4yLCByYWRpdXMgKiAxLjIgKTtcblxuICAgICAgICAgICAgc2VsZi5fYmxhY2tNZXNoID0gbTtcbiAgICAgICAgICAgIHNlbGYuYWRkQ2hpbGQoIG0gKTtcbiAgICAgICAgICAgIC8vbS5zZXRTY2FsZSh0KTtcbiAgICAgICAgICAgIG0uc2V0WCggc2VsZi5sdyAvIDIgKTtcbiAgICAgICAgICAgIG0uc2V0WSggc2VsZi5saCAvIDIgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHQyID0gKCB0IC0gMC41ICkgKiAyO1xuXG4gICAgICAgICAgICBzY2VuZTEuc2V0VmlzaWJsZSggZmFsc2UgKTtcbiAgICAgICAgICAgIHNjZW5lMi5zZXRWaXNpYmxlKCB0cnVlICk7XG4gICAgICAgICAgICBjb25zdCBtID0gU2NlbmVNYW5hZ2VyLmdldENpcmNsZU1lc2goIHNlbGYscmFkaXVzICogMS4yICk7XG5cbiAgICAgICAgICAgIHNlbGYuX2JsYWNrTWVzaCA9IG07XG4gICAgICAgICAgICBzZWxmLmFkZENoaWxkKCBtICk7XG4gICAgICAgICAgICBtLnNldFNjYWxlKCAxIC0gdDIgKTtcbiAgICAgICAgICAgIG0uc2V0WCggc2VsZi5sdyAvIDIgKTtcbiAgICAgICAgICAgIG0uc2V0WSggc2VsZi5saCAvIDIgKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgc3RhdGljIGNsb2NrKCBzZWxmLCBzY2VuZTEsIHNjZW5lMiwgdCwgcmF3VCApIHtcbiAgICAgICAgY29uc3QgcGh5c2ljYWxNYXJnaW5YID0gLXNlbGYueDE7XG4gICAgICAgIGNvbnN0IHBoeXNpY2FsTWFyZ2luWSA9IC1zZWxmLnkxO1xuICAgICAgICBjb25zdCB3ID0gc2VsZi54MiAtIHNlbGYueDE7XG4gICAgICAgIGNvbnN0IGggPSBzZWxmLnkyIC0gc2VsZi55MTtcblxuICAgICAgICBpZiAoIHNlbGYuX2JsYWNrTWVzaCApIHtcbiAgICAgICAgICAgIHNlbGYuX2JsYWNrTWVzaC5yZW1vdmVGcm9tUGFyZW50KCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoICggdCA8IDAuNSApICkge1xuICAgICAgICAgICAgc2NlbmUxLnNldFZpc2libGUoIHRydWUgKTtcbiAgICAgICAgICAgIHNjZW5lMi5zZXRWaXNpYmxlKCBmYWxzZSApO1xuICAgICAgICAgICAgY29uc3QgbSA9IFNjZW5lTWFuYWdlci5nZXRDbG9ja01lc2goIHNlbGYsdywgaCwgdCAqIDIgKTtcblxuICAgICAgICAgICAgbS5zZXRYKCAtcGh5c2ljYWxNYXJnaW5YICk7XG4gICAgICAgICAgICBtLnNldFkoIC1waHlzaWNhbE1hcmdpblkgKTtcbiAgICAgICAgICAgIHNlbGYuX2JsYWNrTWVzaCA9IG07XG4gICAgICAgICAgICBzZWxmLmFkZENoaWxkKCBtICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzY2VuZTEuc2V0VmlzaWJsZSggZmFsc2UgKTtcbiAgICAgICAgICAgIHNjZW5lMi5zZXRWaXNpYmxlKCB0cnVlICk7XG4gICAgICAgICAgICBjb25zdCBtID0gU2NlbmVNYW5hZ2VyLmdldENsb2NrTWVzaCggc2VsZix3LCBoLCAxIC0gKCB0IC0gMC41ICkgKiAyICk7XG5cbiAgICAgICAgICAgIG0uc2V0U2NhbGVYKCAtMSApO1xuICAgICAgICAgICAgbS5zZXRYKCB3IC0gcGh5c2ljYWxNYXJnaW5YICk7XG4gICAgICAgICAgICBtLnNldFkoIC1waHlzaWNhbE1hcmdpblkgKTtcbiAgICAgICAgICAgIHNlbGYuX2JsYWNrTWVzaCA9IG07XG4gICAgICAgICAgICBzZWxmLmFkZENoaWxkKCBtICk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIFJUIHRyYW5zaXRpb247XG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgc3RhdGljIGdldENpcmNsZU1lc2hSVCggc2VsZiwgcmFkaXVzICkge1xuICAgICAgICBjb25zdCBzaWRlcyA9IDY0O1xuICAgICAgICBjb25zdCB2ID0gWzAsIDBdO1xuICAgICAgICBjb25zdCB0ID0gWyggc2VsZi54MiAtIHNlbGYueDEgKSAvIDIsICggc2VsZi55MiAtIHNlbGYueTEgKSAvIDJdO1xuICAgICAgICBjb25zdCBpZHggPSBbXTtcbiAgICAgICAgY29uc3QgYyA9IFsweGZmZmZmZiwgMV07XG5cbiAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgc2lkZXM7IGkrKyApIHtcbiAgICAgICAgICAgIGNvbnN0IGFuZ2xlID0gKCBpIC8gc2lkZXMgKSAqIDIgKiBNYXRoLlBJO1xuXG4gICAgICAgICAgICB2WzIgKyBpICogNF0gPSBNYXRoLmNvcyggYW5nbGUgKSAqIHJhZGl1cztcbiAgICAgICAgICAgIHZbMiArIGkgKiA0ICsgMV0gPSBNYXRoLnNpbiggYW5nbGUgKSAqIHJhZGl1cztcbiAgICAgICAgICAgIHZbMiArIGkgKiA0ICsgMl0gPSBNYXRoLmNvcyggYW5nbGUgKSAqIHJhZGl1cyAqIDEuMjtcbiAgICAgICAgICAgIHZbMiArIGkgKiA0ICsgM10gPSBNYXRoLnNpbiggYW5nbGUgKSAqIHJhZGl1cyAqIDEuMjtcbiAgICAgICAgICAgIHRbMiArIGkgKiA0XSA9IHRbMV0gKyB2WzIgKyBpICogNF07XG4gICAgICAgICAgICB0WzIgKyBpICogNCArIDFdID0gdFsyXSArIHZbMiArIGkgKiA0ICsgMV07XG4gICAgICAgICAgICB0WzIgKyBpICogNCArIDJdID0gdFsxXSArIHZbMiArIGkgKiA0ICsgMl07XG4gICAgICAgICAgICB0WzIgKyBpICogNCArIDNdID0gdFsyXSArIHZbMiArIGkgKiA0ICsgM107XG4gICAgICAgICAgICBjWzIgKyBpICogNF0gPSAweGZmZmZmZjtcbiAgICAgICAgICAgIGNbMiArIGkgKiA0ICsgMV0gPSAxO1xuICAgICAgICAgICAgY1syICsgaSAqIDQgKyAyXSA9IDB4ZmZmZmZmO1xuICAgICAgICAgICAgY1syICsgaSAqIDQgKyAzXSA9IDA7XG4gICAgICAgICAgICBpZHhbaSAqIDldID0gMDtcdC8vb3JpZ2luO1xuICAgICAgICAgICAgaWR4W2kgKiA5ICsgMV0gPSAoIGkgKiAyICkgKyAxO1xuICAgICAgICAgICAgaWR4W2kgKiA5ICsgMl0gPSAoIGkgKiAyICkgKyAzO1xuICAgICAgICAgICAgaWR4W2kgKiA5ICsgM10gPSAoIGkgKiAyICkgKyAxO1xuICAgICAgICAgICAgaWR4W2kgKiA5ICsgNF0gPSAoIGkgKiAyICkgKyAyO1xuICAgICAgICAgICAgaWR4W2kgKiA5ICsgNV0gPSAoIGkgKiAyICkgKyA0O1xuICAgICAgICAgICAgaWR4W2kgKiA5ICsgNl0gPSAoIGkgKiAyICkgKyAxO1xuICAgICAgICAgICAgaWR4W2kgKiA5ICsgN10gPSAoIGkgKiAyICkgKyA0O1xuICAgICAgICAgICAgaWR4W2kgKiA5ICsgOF0gPSAoIGkgKiAyICkgKyAzO1xuXG4gICAgICAgICAgICBpZiAoIGkgPT0gc2lkZXMgLSAxICkge1xuICAgICAgICAgICAgICAgIGlkeFtpICogOSArIDJdID0gMTtcbiAgICAgICAgICAgICAgICBpZHhbaSAqIDkgKyA1XSA9IDI7XG4gICAgICAgICAgICAgICAgaWR4W2kgKiA5ICsgN10gPSAyO1xuICAgICAgICAgICAgICAgIGlkeFtpICogOSArIDhdID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vbG9nKExvZy5VSSwgdGFibGUuY29uY2F0KGlkeCxcIixcIikpO1xuICAgICAgICBjb25zdCBtID0gbmV3IE1lc2goKTtcblxuICAgICAgICBtLnNldFZlcnRleEFycmF5KCB2ICk7XG4gICAgICAgIG0uc2V0SW5kZXhBcnJheSggaWR4ICk7XG4gICAgICAgIG0uc2V0Q29sb3JBcnJheSggYyApO1xuICAgICAgICBtLnNldFRleHR1cmVDb29yZGluYXRlQXJyYXkoIHQgKTtcbiAgICAgICAgbS5zZXRUZXh0dXJlKCBzZWxmLl9SVCApO1xuXG4gICAgICAgIHJldHVybiBtO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRDaXJjbGVIb2xlTWVzaFJUKCBzZWxmLCByYWRpdXMxLCByYWRpdXMyICkge1xuICAgICAgICBjb25zdCBzaWRlcyA9IDMyO1xuICAgICAgICBjb25zdCBbY3gsIGN5XSA9IFsoIHNlbGYueDIgLSBzZWxmLngxICkgLyAyLCAoIHNlbGYueTIgLSBzZWxmLnkxICkgLyAyXTtcbiAgICAgICAgY29uc3QgdiA9IFtdO1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIGNvbnN0IGlkeCA9IFtdO1xuICAgICAgICBjb25zdCBjID0gW107XG5cbiAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgc2lkZXM7IGkrKyApIHtcbiAgICAgICAgICAgIGNvbnN0IGFuZ2xlID0gKCBpIC8gc2lkZXMgKSAqIDIgKiBNYXRoLlBJO1xuXG4gICAgICAgICAgICB2LnB1c2goXG4gICAgICAgICAgICAgICAgTWF0aC5jb3MoIGFuZ2xlICkgKiByYWRpdXMxIC8gMS4yLCBNYXRoLnNpbiggYW5nbGUgKSAqIHJhZGl1czEgLyAxLjIsXG4gICAgICAgICAgICAgICAgTWF0aC5jb3MoIGFuZ2xlICkgKiByYWRpdXMxLCBNYXRoLnNpbiggYW5nbGUgKSAqIHJhZGl1czEsXG4gICAgICAgICAgICAgICAgTWF0aC5jb3MoIGFuZ2xlICkgKiByYWRpdXMyLCBNYXRoLnNpbiggYW5nbGUgKSAqIHJhZGl1czJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0LnB1c2goXG4gICAgICAgICAgICAgICAgY3ggKyB2W2kgKiA2XSwgY3kgKyB2W2kgKiA2ICsgMV0sXG4gICAgICAgICAgICAgICAgY3ggKyB2W2kgKiA2ICsgMl0sIGN5ICsgdltpICogNiArIDNdLFxuICAgICAgICAgICAgICAgIGN4ICsgdltpICogNiArIDRdLCBjeSArIHZbaSAqIDYgKyA1XVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGMucHVzaChcbiAgICAgICAgICAgICAgICAweGZmZmZmZiwgMCxcbiAgICAgICAgICAgICAgICAweGZmZmZmZiwgMSxcbiAgICAgICAgICAgICAgICAweGZmZmZmZiwgMVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlkeC5wdXNoKFxuICAgICAgICAgICAgICAgICggaSAqIDMgKSArIDAsICggaSAqIDMgKSArIDQsICggaSAqIDMgKSArIDMsXG4gICAgICAgICAgICAgICAgKCBpICogMyApICsgMCwgKCBpICogMyApICsgMSwgKCBpICogMyApICsgNCxcbiAgICAgICAgICAgICAgICAoIGkgKiAzICkgKyAxLCAoIGkgKiAzICkgKyAyLCAoIGkgKiAzICkgKyA1LFxuICAgICAgICAgICAgICAgICggaSAqIDMgKSArIDEsICggaSAqIDMgKSArIDUsICggaSAqIDMgKSArIDRcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmICggaSA9PSBzaWRlcyAtIDEgKSB7XG4gICAgICAgICAgICAgICAgaWR4W2kgKiAxMiArIDFdID0gMTtcbiAgICAgICAgICAgICAgICBpZHhbaSAqIDEyICsgMl0gPSAwO1xuICAgICAgICAgICAgICAgIGlkeFtpICogMTIgKyA1XSA9IDE7XG4gICAgICAgICAgICAgICAgaWR4W2kgKiAxMiArIDhdID0gMjtcbiAgICAgICAgICAgICAgICBpZHhbaSAqIDEyICsgMTBdID0gMjtcbiAgICAgICAgICAgICAgICBpZHhbaSAqIDEyICsgMTFdID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vbG9nKExvZy5VSSwgdGFibGUuY29uY2F0KGlkeCxcIixcIikpO1xuICAgICAgICBjb25zdCBtID0gbmV3IE1lc2goKTtcblxuICAgICAgICBtLnNldFZlcnRleEFycmF5KCB2ICk7XG4gICAgICAgIG0uc2V0SW5kZXhBcnJheSggaWR4ICk7XG4gICAgICAgIG0uc2V0Q29sb3JBcnJheSggYyApO1xuICAgICAgICBtLnNldFRleHR1cmVDb29yZGluYXRlQXJyYXkoIHQgKTtcbiAgICAgICAgbS5zZXRUZXh0dXJlKCBzZWxmLl9SVCApO1xuXG4gICAgICAgIHJldHVybiBtO1xuICAgIH1cblxuXG4gICAgc3RhdGljIGNpcmNsZU91dFJUKCBzZWxmLCBzY2VuZTEsIHNjZW5lMiwgdCwgcmF3VCApIHtcbiAgICAgICAgY29uc3QgdyA9IHNlbGYueDIgLSBzZWxmLngxO1xuICAgICAgICBjb25zdCBoID0gc2VsZi55MiAtIHNlbGYueTE7XG5cbiAgICAgICAgaWYgKCBzZWxmLl9ibGFja01lc2ggIT0gbnVsbCApIHtcbiAgICAgICAgICAgIHNlbGYuX2JsYWNrTWVzaC5yZW1vdmVGcm9tUGFyZW50KCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByYWRpdXMgPSBNYXRoLnNxcnQoICggdyAvIDIgKSAqKiAyICsgKCBoIC8gMiApICoqIDIgKTtcblxuICAgICAgICBzY2VuZTEuc2V0VmlzaWJsZSggZmFsc2UgKTtcbiAgICAgICAgc2NlbmUyLnNldFZpc2libGUoIHRydWUgKTtcbiAgICAgICAgY29uc3QgbSA9IFNjZW5lTWFuYWdlci5nZXRDaXJjbGVIb2xlTWVzaFJUKCBzZWxmLHJhZGl1cyAqIHQgKiAxLjIsIHJhZGl1cyAqIDEuMiApO1xuXG4gICAgICAgIHNlbGYuX2JsYWNrTWVzaCA9IG07XG4gICAgICAgIHNlbGYuYWRkQ2hpbGQoIG0gKTtcbiAgICAgICAgLy9tLnNldFNjYWxlKHQpO1xuICAgICAgICBtLnNldFgoIHNlbGYubHcgLyAyICk7XG4gICAgICAgIG0uc2V0WSggc2VsZi5saCAvIDIgKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgY2lyY2xlSW5SVCggc2VsZiwgc2NlbmUxLCBzY2VuZTIsIHQsIHJhd1QgKSB7XG4gICAgICAgIGNvbnN0IHcgPSBzZWxmLngyIC0gc2VsZi54MTtcbiAgICAgICAgY29uc3QgaCA9IHNlbGYueTIgLSBzZWxmLnkxO1xuXG4gICAgICAgIGlmICggc2VsZi5fYmxhY2tNZXNoICkge1xuICAgICAgICAgICAgc2VsZi5fYmxhY2tNZXNoLnJlbW92ZUZyb21QYXJlbnQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJhZGl1cyA9IE1hdGguc3FydCggKCB3IC8gMiApICoqIDIgKyAoIGggLyAyICkgKiogMiApO1xuXG4gICAgICAgIHNjZW5lMS5zZXRWaXNpYmxlKCBmYWxzZSApO1xuICAgICAgICBzY2VuZTIuc2V0VmlzaWJsZSggdHJ1ZSApO1xuICAgICAgICBjb25zdCBtID0gU2NlbmVNYW5hZ2VyLmdldENpcmNsZU1lc2hSVCggc2VsZixyYWRpdXMgKiAoIDEgLSB0ICkgKiAxLjIgKTtcblxuICAgICAgICBzZWxmLl9ibGFja01lc2ggPSBtO1xuICAgICAgICBzZWxmLmFkZENoaWxkKCBtICk7XG4gICAgICAgIG0uc2V0WCggc2VsZi5sdyAvIDIgKTtcbiAgICAgICAgbS5zZXRZKCBzZWxmLmxoIC8gMiApO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRQYXBlck1lc2hSVCggc2VsZiwgY2xpcDEsIGNsaXAyICkge1xuICAgICAgICAvL2xldCBzaWRlcyA9IDMyO1xuICAgICAgICBjb25zdCB2ID0gW1xuICAgICAgICAgICAgc2VsZi54MSwgc2VsZi55MSxcbiAgICAgICAgICAgIHNlbGYueDIgLSBjbGlwMSAtIGNsaXAyLCBzZWxmLnkxLFxuICAgICAgICAgICAgc2VsZi54MSwgc2VsZi55MixcbiAgICAgICAgICAgIHNlbGYueDIgLSBjbGlwMSAtIGNsaXAyLCBzZWxmLnkyXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IHQgPSBbMCArIGNsaXAxLCAwLCAoIHNlbGYueDIgLSBzZWxmLngxICkgLSBjbGlwMiwgMCwgMCArIGNsaXAxLCAoIHNlbGYueTIgLSBzZWxmLnkxICksICggc2VsZi54MiAtIHNlbGYueDEgKSAtIGNsaXAyLCAoIHNlbGYueTIgLSBzZWxmLnkxICldO1xuICAgICAgICBjb25zdCBpZHggPSBbMCwgMSwgMiwgMSwgMywgMl07XG4gICAgICAgIGNvbnN0IG0gPSBuZXcgTWVzaCgpO1xuXG4gICAgICAgIG0uc2V0VmVydGV4QXJyYXkoIHYgKTtcbiAgICAgICAgbS5zZXRJbmRleEFycmF5KCBpZHggKTtcbiAgICAgICAgbS5zZXRUZXh0dXJlQ29vcmRpbmF0ZUFycmF5KCB0ICk7XG4gICAgICAgIG0uc2V0VGV4dHVyZSggc2VsZi5fUlQgKTtcblxuICAgICAgICByZXR1cm4gbTtcbiAgICB9XG5cblxuICAgIHN0YXRpYyBwYXBlckRvd25SVCggc2VsZiwgc2NlbmUxLCBzY2VuZTIsIHQsIHJhd1QgKSB7XG4gICAgICAgIGlmICggc2VsZi5fYmxhY2tNZXNoICkge1xuICAgICAgICAgICAgc2VsZi5fYmxhY2tNZXNoLnJlbW92ZUZyb21QYXJlbnQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNjZW5lMS5zZXRWaXNpYmxlKCBmYWxzZSApO1xuICAgICAgICBzY2VuZTIuc2V0VmlzaWJsZSggdHJ1ZSApO1xuICAgICAgICBjb25zdCBjbGlwMSA9IE1hdGguc2luKCByYWQoIHQgKiAxODAgKSApICogKCBzZWxmLngyIC0gc2VsZi54MSApIC8gMjtcbiAgICAgICAgY29uc3QgY2xpcDIgPSAoIHQgPCAwLjUgKSA/IDAgOiAoIDEgLSBNYXRoLmNvcyggcmFkKCAoIHQgLSAwLjUgKSAqIDE4MCApICkgKSAqICggc2VsZi54MiAtIHNlbGYueDEgKTtcbiAgICAgICAgY29uc3QgbSA9IFNjZW5lTWFuYWdlci5nZXRQYXBlck1lc2hSVCggc2VsZixjbGlwMSwgY2xpcDIgKTtcblxuICAgICAgICBzY2VuZTIuc2V0WCggTWF0aC5zaW4oIHJhZCggdCAqIDE4MCApICkgKiAoIHNlbGYueDIgLSBzZWxmLngxICkgLyAyICk7XG4gICAgICAgIG0uc2V0WCggMCApO1xuICAgICAgICBjb25zdCBiMSA9IDEgLSB0ICogMC41O1xuICAgICAgICBjb25zdCBiMiA9IE1hdGgubWF4KCAwLCB0ICogMiAtIDEgKTtcblxuICAgICAgICBzY2VuZTIuc2V0Q29sb3JNdWx0aXBsaWVyKCBiMiwgYjIsIGIyICk7XG4gICAgICAgIG0uc2V0Q29sb3JNdWx0aXBsaWVyKCBiMSwgYjEsIGIxICk7XG4gICAgICAgIHNlbGYuX2JsYWNrTWVzaCA9IG07XG4gICAgICAgIHNlbGYuYWRkQ2hpbGQoIG0gKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgcGFwZXJVcFJUKCBzZWxmLCBzY2VuZTEsIHNjZW5lMiwgdCwgcmF3VCApIHtcbiAgICAgICAgaWYgKCBzZWxmLl9ibGFja01lc2ggKSB7XG4gICAgICAgICAgICBzZWxmLl9ibGFja01lc2gucmVtb3ZlRnJvbVBhcmVudCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2NlbmUxLnNldFZpc2libGUoIGZhbHNlICk7XG4gICAgICAgIHNjZW5lMi5zZXRWaXNpYmxlKCB0cnVlICk7XG4gICAgICAgIHNjZW5lMi5zZXRYKCAtTWF0aC5zaW4oIHJhZCggdCAqIDE4MCApICkgKiAoIHNlbGYueDIgLSBzZWxmLngxICkgLyAyICk7XG4gICAgICAgIGNvbnN0IHgyID0gKCB0IDwgMC41ICkgPyBNYXRoLnNpbiggcmFkKCB0ICogMTgwICkgKSAqICggc2VsZi54MiAtIHNlbGYueDEgKSAvIDIgOiBzY2VuZTIuZ2V0WCgpICsgKCBzZWxmLngyIC0gc2VsZi54MSApO1xuICAgICAgICBjb25zdCBjbGlwMSA9ICggdCA8IDAuNSApID8gMCA6IHgyIC0gKCBzZWxmLngyIC0gc2VsZi54MSApIC8gMiAtIE1hdGguY29zKCByYWQoICggdCAtIDkwICkgKiAxODAgKSApICogKCBzZWxmLngyIC0gc2VsZi54MSApIC8gMjtcbiAgICAgICAgY29uc3QgY2xpcDIgPSB4MiAtIGNsaXAxO1xuICAgICAgICBjb25zdCBtID0gU2NlbmVNYW5hZ2VyLmdldFBhcGVyTWVzaFJUKCBzZWxmLGNsaXAxLCBjbGlwMiApO1xuXG4gICAgICAgIG0uc2V0WCggeDIgKTtcbiAgICAgICAgY29uc3QgYjEgPSAxIC0gdCAqIDAuNTtcbiAgICAgICAgY29uc3QgYjIgPSBNYXRoLm1heCggMCwgdCAqIDIgLSAxICk7XG5cbiAgICAgICAgc2NlbmUyLnNldENvbG9yTXVsdGlwbGllciggYjIsIGIyLCBiMiApO1xuICAgICAgICBtLnNldENvbG9yTXVsdGlwbGllciggYjEsIGIxLCBiMSApO1xuICAgICAgICBzZWxmLl9ibGFja01lc2ggPSBtO1xuICAgICAgICBzZWxmLmFkZENoaWxkKCBtICk7XG4gICAgfVxuXG5cblxuICAgIHN0YXRpYyBtb3ZlRnJvbVJpZ2h0KCBzZWxmLCBzY2VuZTEsIHNjZW5lMiwgdCwgcmF3VCApIHtcbiAgICAgICAgY29uc3Qgd2lkdGggPSBzZWxmLmx3ICsgLXNlbGYueDEgKiAyO1xuXG4gICAgICAgIHNjZW5lMS5zZXRYKCAtdCAqIHdpZHRoICk7XG4gICAgICAgIHNjZW5lMi5zZXRYKCAoIDEgLSB0ICkgKiB3aWR0aCApO1xuICAgIH1cblxuICAgIHN0YXRpYyBtb3ZlRnJvbUxlZnQoIHNlbGYsIHNjZW5lMSwgc2NlbmUyLCB0LCByYXdUICkge1xuICAgICAgICBjb25zdCB3aWR0aCA9IHNlbGYubHcgKyAtc2VsZi54MSAqIDI7XG5cbiAgICAgICAgc2NlbmUxLnNldFgoIHQgKiB3aWR0aCApO1xuICAgICAgICBzY2VuZTIuc2V0WCggKCB0IC0gMSApICogd2lkdGggKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgb3ZlckZyb21SaWdodCggc2VsZiwgc2NlbmUxLCBzY2VuZTIsIHQsIHJhd1QgKSB7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gc2VsZi5sdyArIC1zZWxmLngxICogMjtcblxuICAgICAgICBzY2VuZTIuc2V0WCggKCAxIC0gdCApICogd2lkdGggKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgb3ZlckZyb21MZWZ0KCBzZWxmLCBzY2VuZTEsIHNjZW5lMiwgdCwgcmF3VCApIHtcbiAgICAgICAgY29uc3Qgd2lkdGggPSBzZWxmLmx3ICsgLXNlbGYueDEgKiAyO1xuXG4gICAgICAgIHNjZW5lMi5zZXRYKCAoIHQgLSAxICkgKiB3aWR0aCApO1xuICAgIH1cblxuICAgIHN0YXRpYyBtb3ZlRnJvbVJpZ2h0V2l0aEZhZGUoIHNlbGYsIHNjZW5lMSwgc2NlbmUyLCB0LCByYXdUICkge1xuICAgICAgICBjb25zdCB3aWR0aCA9IHNlbGYubHcgKyAtc2VsZi54MSAqIDI7XG5cbiAgICAgICAgc2NlbmUxLnNldEFscGhhKCAxIC0gdCApO1xuICAgICAgICBzY2VuZTEuc2V0WCggLXQgKiB3aWR0aCApO1xuICAgICAgICBzY2VuZTIuc2V0WCggKCAxIC0gdCApICogd2lkdGggKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgbW92ZUZyb21MZWZ0V2l0aEZhZGUoIHNlbGYsIHNjZW5lMSwgc2NlbmUyLCB0LCByYXdUICkge1xuICAgICAgICBjb25zdCB3aWR0aCA9IHNlbGYubHcgKyAtc2VsZi54MSAqIDI7XG5cbiAgICAgICAgc2NlbmUxLnNldEFscGhhKCAxIC0gdCApO1xuICAgICAgICBzY2VuZTEuc2V0WCggdCAqIHdpZHRoICk7XG4gICAgICAgIHNjZW5lMi5zZXRYKCAoIHQgLSAxICkgKiB3aWR0aCApO1xuICAgIH1cblxuICAgIHN0YXRpYyBvdmVyRnJvbVJpZ2h0V2l0aEZhZGUoIHNlbGYsIHNjZW5lMSwgc2NlbmUyLCB0LCByYXdUICkge1xuICAgICAgICBjb25zdCB3aWR0aCA9IHNlbGYubHcgKyAtc2VsZi54MSAqIDI7XG5cbiAgICAgICAgc2NlbmUxLnNldEFscGhhKCAxIC0gdCApO1xuICAgICAgICBzY2VuZTIuc2V0WCggKCAxIC0gdCApICogd2lkdGggKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgb3ZlckZyb21MZWZ0V2l0aEZhZGUoIHNlbGYsIHNjZW5lMSwgc2NlbmUyLCB0LCByYXdUICkge1xuICAgICAgICBjb25zdCB3aWR0aCA9IHNlbGYubHcgKyAtc2VsZi54MSAqIDI7XG5cbiAgICAgICAgc2NlbmUxLnNldEFscGhhKCAxIC0gdCApO1xuICAgICAgICBzY2VuZTIuc2V0WCggKCB0IC0gMSApICogd2lkdGggKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgbW92ZUZyb21Cb3R0b20oIHNlbGYsIHNjZW5lMSwgc2NlbmUyLCB0LCByYXdUICkge1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBzZWxmLmxoO1xuXG4gICAgICAgIHNjZW5lMS5zZXRZKCAtdCAqIGhlaWdodCApO1xuICAgICAgICBzY2VuZTIuc2V0WSggKCAxIC0gdCApICogaGVpZ2h0ICk7XG4gICAgfVxuXG4gICAgc3RhdGljIG1vdmVGcm9tVG9wKCBzZWxmLCBzY2VuZTEsIHNjZW5lMiwgdCwgcmF3VCApIHtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gc2VsZi5saDtcblxuICAgICAgICBzY2VuZTEuc2V0WSggdCAqIGhlaWdodCApO1xuICAgICAgICBzY2VuZTIuc2V0WSggKCB0IC0gMSApICogaGVpZ2h0ICk7XG4gICAgfVxuXG4gICAgc3RhdGljIG92ZXJGcm9tQm90dG9tKCBzZWxmLCBzY2VuZTEsIHNjZW5lMiwgdCwgcmF3VCApIHtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gc2VsZi5saDtcblxuICAgICAgICBzY2VuZTIuc2V0WSggKCAxIC0gdCApICogaGVpZ2h0ICk7XG4gICAgfVxuXG4gICAgc3RhdGljIG92ZXJGcm9tVG9wKCBzZWxmLCBzY2VuZTEsIHNjZW5lMiwgdCwgcmF3VCApIHtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gc2VsZi5saDtcblxuICAgICAgICBzY2VuZTIuc2V0WSggKCB0IC0gMSApICogaGVpZ2h0ICk7XG4gICAgfVxuXG4gICAgc3RhdGljIG1vdmVGcm9tQm90dG9tV2l0aEZhZGUoIHNlbGYsIHNjZW5lMSwgc2NlbmUyLCB0LCByYXdUICkge1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBzZWxmLmxoO1xuXG4gICAgICAgIHNjZW5lMS5zZXRBbHBoYSggMSAtIHQgKTtcbiAgICAgICAgc2NlbmUxLnNldFkoIC10ICogaGVpZ2h0ICk7XG4gICAgICAgIHNjZW5lMi5zZXRZKCAoIDEgLSB0ICkgKiBoZWlnaHQgKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgbW92ZUZyb21Ub3BXaXRoRmFkZSggc2VsZiwgc2NlbmUxLCBzY2VuZTIsIHQsIHJhd1QgKSB7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IHNlbGYubGg7XG5cbiAgICAgICAgc2NlbmUxLnNldEFscGhhKCAxIC0gdCApO1xuICAgICAgICBzY2VuZTEuc2V0WSggdCAqIGhlaWdodCApO1xuICAgICAgICBzY2VuZTIuc2V0WSggKCB0IC0gMSApICogaGVpZ2h0ICk7XG4gICAgfVxuXG5cbiAgICBzdGF0aWMgb3ZlckZyb21Cb3R0b21XaXRoRmFkZSggc2VsZiwgc2NlbmUxLCBzY2VuZTIsIHQsIHJhd1QgKSB7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IHNlbGYubGg7XG5cbiAgICAgICAgc2NlbmUxLnNldEFscGhhKCAxIC0gdCApO1xuICAgICAgICBzY2VuZTIuc2V0WSggKCAxIC0gdCApICogaGVpZ2h0ICk7XG4gICAgfVxuXG4gICAgc3RhdGljIG92ZXJGcm9tVG9wV2l0aEZhZGUoIHNlbGYsIHNjZW5lMSwgc2NlbmUyLCB0LCByYXdUICkge1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBzZWxmLmxoO1xuXG4gICAgICAgIHNjZW5lMS5zZXRBbHBoYSggMSAtIHQgKTtcbiAgICAgICAgc2NlbmUyLnNldFkoICggdCAtIDEgKSAqIGhlaWdodCApO1xuICAgIH1cblxuICAgIHN0YXRpYyBmYWRlKCBzZWxmLCBzY2VuZTEsIHNjZW5lMiwgdCwgcmF3VCApIHtcbiAgICAgICAgaWYgKCB0IDwgMC41ICkge1xuICAgICAgICAgICAgc2NlbmUxLnNldEFscGhhKCAoIDAuNSAtIHQgKSAqIDIgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNjZW5lMS5zZXRBbHBoYSggMCApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCB0IDwgMC41ICkge1xuICAgICAgICAgICAgc2NlbmUyLnNldEFscGhhKCAwICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzY2VuZTIuc2V0QWxwaGEoICggdCAtIDAuNSApICogMiApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIGNyb3NzZmFkZSggc2VsZiwgc2NlbmUxLCBzY2VuZTIsIHQsIHJhd1QgKSB7XG4gICAgICAgIHNjZW5lMS5zZXRBbHBoYSggMSAtIHQgKTtcbiAgICAgICAgc2NlbmUyLnNldEFscGhhKCB0ICk7XG4gICAgfVxuXG4gICAgc3RhdGljIGZsaXAoIHNlbGYsIHNjZW5lMSwgc2NlbmUyLCB0LCByYXdUICkge1xuICAgICAgICBjb25zdCB3aWR0aCA9IHNlbGYubHc7XG5cbiAgICAgICAgaWYgKCB0IDwgMC41ICkge1xuICAgICAgICAgICAgY29uc3QgcyA9ICggMC41IC0gdCApICogMjtcblxuICAgICAgICAgICAgc2NlbmUxLnNldFNjYWxlWCggcyApO1xuICAgICAgICAgICAgc2NlbmUxLnNldFgoICggMSAtIHMgKSAqIHdpZHRoICogMC41ICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzY2VuZTEuc2V0U2NhbGVYKCAwICk7XG4gICAgICAgICAgICBzY2VuZTEuc2V0WCggd2lkdGggKiAwLjUgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggdCA8IDAuNSApIHtcbiAgICAgICAgICAgIHNjZW5lMi5zZXRTY2FsZVgoIDAgKTtcbiAgICAgICAgICAgIHNjZW5lMi5zZXRYKCB3aWR0aCAqIDAuNSApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcyA9ICggdCAtIDAuNSApICogMjtcblxuICAgICAgICAgICAgc2NlbmUyLnNldFNjYWxlWCggcyApO1xuICAgICAgICAgICAgc2NlbmUyLnNldFgoICggMSAtIHMgKSAqIHdpZHRoICogMC41ICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgZmxpcFdpdGhGYWRlKCBzZWxmLCBzY2VuZTEsIHNjZW5lMiwgdCwgcmF3VCApIHtcbiAgICAgICAgY29uc3Qgd2lkdGggPSBzZWxmLmx3O1xuXG4gICAgICAgIGlmICggdCA8IDAuNSApIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSAoIDAuNSAtIHQgKSAqIDI7XG5cbiAgICAgICAgICAgIHNjZW5lMS5zZXRTY2FsZVgoIHMgKTtcbiAgICAgICAgICAgIHNjZW5lMS5zZXRYKCAoIDEgLSBzICkgKiB3aWR0aCAqIDAuNSApO1xuICAgICAgICAgICAgc2NlbmUxLnNldEFscGhhKCBzICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzY2VuZTEuc2V0U2NhbGVYKCAwICk7XG4gICAgICAgICAgICBzY2VuZTEuc2V0WCggd2lkdGggKiAwLjUgKTtcbiAgICAgICAgICAgIHNjZW5lMS5zZXRBbHBoYSggMCApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCB0IDwgMC41ICkge1xuICAgICAgICAgICAgc2NlbmUyLnNldFNjYWxlWCggMCApO1xuICAgICAgICAgICAgc2NlbmUyLnNldFgoIHdpZHRoICogMC41ICk7XG4gICAgICAgICAgICBzY2VuZTIuc2V0QWxwaGEoIDAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSAoIHQgLSAwLjUgKSAqIDI7XG5cbiAgICAgICAgICAgIHNjZW5lMi5zZXRTY2FsZVgoIHMgKTtcbiAgICAgICAgICAgIHNjZW5lMi5zZXRYKCAoIDEgLSBzICkgKiB3aWR0aCAqIDAuNSApO1xuICAgICAgICAgICAgc2NlbmUyLnNldEFscGhhKCBzICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgZmxpcFdpdGhTaGFkZSggc2VsZiwgc2NlbmUxLCBzY2VuZTIsIHQsIHJhd1QgKSB7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gc2VsZi5sdztcblxuICAgICAgICBpZiAoIHQgPCAwLjUgKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gKCAwLjUgLSB0ICkgKiAyO1xuXG4gICAgICAgICAgICBzY2VuZTEuc2V0U2NhbGVYKCBzICk7XG4gICAgICAgICAgICBzY2VuZTEuc2V0WCggKCAxIC0gcyApICogd2lkdGggKiAwLjUgKTtcbiAgICAgICAgICAgIHNjZW5lMS5zZXRDb2xvck11bHRpcGxpZXIoIDEgLSB0LCAxIC0gdCwgMSAtIHQsIDEgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNjZW5lMS5zZXRTY2FsZVgoIDAgKTtcbiAgICAgICAgICAgIHNjZW5lMS5zZXRYKCB3aWR0aCAqIDAuNSApO1xuICAgICAgICAgICAgc2NlbmUxLnNldENvbG9yTXVsdGlwbGllciggMC41LCAwLjUsIDAuNSwgMSApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCB0IDwgMC41ICkge1xuICAgICAgICAgICAgc2NlbmUyLnNldFNjYWxlWCggMCApO1xuICAgICAgICAgICAgc2NlbmUyLnNldFgoIHdpZHRoICogMC41ICk7XG4gICAgICAgICAgICBzY2VuZTIuc2V0Q29sb3JNdWx0aXBsaWVyKCAwLjUsIDAuNSwgMC41LCAxICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBzID0gKCB0IC0gMC41ICkgKiAyO1xuXG4gICAgICAgICAgICBzY2VuZTIuc2V0U2NhbGVYKCBzICk7XG4gICAgICAgICAgICBzY2VuZTIuc2V0WCggKCAxIC0gcyApICogd2lkdGggKiAwLjUgKTtcbiAgICAgICAgICAgIHNjZW5lMi5zZXRDb2xvck11bHRpcGxpZXIoIHQsIHQsIHQsIDEgKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLy8jZW5kcmVnaW9uXG5cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vXG4gICAgLy8g66mU7J24IOy9lOuTnFxuICAgIC8vXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG4gICAgZ2V0Q3VycmVudFNjZW5lTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFNjZW5lO1xuICAgIH1cblxuICAgIGdldEN1cnJlbnRTY2VuZSgpIHtcbiAgICAgICAgaWYgKCB0aGlzLnNjZW5lMiApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNjZW5lMjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnNjZW5lMTtcbiAgICB9XG5cbiAgICBpc0NoYW5naW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2luZ1NjZW5lO1xuICAgIH1cblxuICAgIGNoYW5nZVNjZW5lKCBzcHJPckZ1bmMsIGR1cmF0aW9uLCB0cmFuc2l0aW9uLCBlYXNlLCBvcHRpb25zICkge1xuICAgICAgICBsZXQgc3ByO1xuXG4gICAgICAgIGlmICggdHlwZW9mIHNwck9yRnVuYyA9PSBcImZ1bmN0aW9uXCIgKSB7XG4gICAgICAgICAgICBzcHIgPSBzcHJPckZ1bmMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNwciA9IHNwck9yRnVuYztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vbG9nKExvZy5TQ0VORSwgXCJjaGFuZ2VTY2VuZTogXCIgLi4gKHRoaXMuY3VycmVudFNjZW5lIH49IG51bGwgYW5kIHRoaXMuY3VycmVudFNjZW5lIG9yIFwibnVsbFwiKSAuLiBcIiB0byBcIiAuLiAoc2NlbmUgfj0gbnVsbCBhbmQgc2NlbmUgb3IgXCJudWxsXCIpKTtcbiAgICAgICAgaWYgKCAhdGhpcy5hY3RpdmUgKSB7XG4gICAgICAgICAgICAvL2lmIChHTE9CQUwubGF5ZXJTaGllbGRGb3JTY2VuZUNoYW5nZSkgeyBHTE9CQUwubGF5ZXJTaGllbGRGb3JTY2VuZUNoYW5nZS5zaG93KCkgfVxuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCBFdmVudC5FTlRFUl9GUkFNRSwgdGhpcy5vbkVudGVyRnJhbWUsIHRoaXMgKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2hhbmdpbmdTY2VuZSA9IHRydWU7XHQgLy8g7IugIOyghO2ZmOyLnCDsnoXroKXsnYQg66eJ6rGw64KYIO2VoCDrlYwg7JOw66Ck6rOgLiB0d2VlbmluZ+2VmOqzoOuKlCDsi5zsoJDsnbQg7KKAIOuLpOultOuLpFxuICAgICAgICB0aGlzLmV2ZW50RmlsdGVyID0gb3B0aW9ucyAhPSBudWxsID8gb3B0aW9ucy5ldmVudEZpbHRlciA6IG51bGw7XG4gICAgICAgIHRoaXMuY3VycmVudFNjZW5lID0gc3ByO1xuXG4gICAgICAgIC8vIGhlbmplb24sIDIwMTQuMTIuMDE7XG4gICAgICAgIC8vIO2VnCDtlITroIjsnoTsl5Agb25FbnRlckZyYW1lKCkg7KCE7JeQIGNoYW5nZVNjZW5lKCkg7Jew7IaN7Jy866GcIO2YuOy2nOuQmOuptCBiZWdpbuydtOuypO2KuCDsl4bsnbQgfSDsnbTrsqTtirjqsIAg7Zi47Lac65CY64qUIOusuOygnOqwgCDsnojri6QuXG4gICAgICAgIC8vIGNoYW5nZVNjZW5lKCnsl5DshJwgdHJhbnNpdGlvbkJlZ2luIOydtOuypO2KuOulvCDrsJTroZwg7Zi47Lac7ZWgIOqyveyasCDsvZTrk5wg7Z2Q66aE7J20IOyghOqzvCDri6zrnbzsoLjshJwg7Jes65+sIOqwgOyngCDrrLjsoJzqsIAg67Cc7IOd7ZWY7JesLFxuICAgICAgICAvLyDtmLjstpwg7Iic7ISc64qUIOq3uOuMgOuhnCDsnKDsp4DtlZjrj4TroZ0g7Jes6riw7IScIHRoaXMudGltZeydtCAw7J20IOyVhOuLkOuVjOunjCDsnbTrsqTtirjrpbwg7Zi47Lac7ZWY64+E66GdIOyymOumrO2VqFxuICAgICAgICAvL1x0XHRcbiAgICAgICAgaWYgKCB0aGlzLnR3ZWVuaW5nICkge1xuICAgICAgICAgICAgaWYgKCB0aGlzLnRpbWUgIT0gMCApIHtcbiAgICAgICAgICAgICAgICAvL3JldHVybjtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoIFwidHJhbnNpdGlvbkVuZFwiICk7XG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZTEuZGlzcGF0Y2hFdmVudCggXCJleGl0RW5kXCIgKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lMi5kaXNwYXRjaEV2ZW50KCBcImVudGVyRW5kXCIgKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uVHJhbnNpdGlvbkVuZCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUxLnJlbW92ZUZyb21QYXJlbnQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lMSA9IHRoaXMuc2NlbmUyO1xuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUyID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnR3ZWVuaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2luZ1NjZW5lID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICggdGhpcy5zY2VuZTIgKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUyLnJlbW92ZUZyb21QYXJlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZTIgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggdGhpcy5zY2VuZTEgPT0gbnVsbCApIHtcbiAgICAgICAgICAgIC8v7J207KCEIOyUrOydtCDsl4bripQg6rK97Jqw7J2064ukLlxuICAgICAgICAgICAgdGhpcy5zY2VuZTEgPSBuZXcgU3ByaXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmR1cmF0aW9uID0gZHVyYXRpb247XG4gICAgICAgIHRoaXMudHJhbnNpdGlvbiA9IHRyYW5zaXRpb247XG4gICAgICAgIHRoaXMuZWFzZSA9IGVhc2UgfHwgZGVmYXVsdEVhc2U7XG4gICAgICAgIHRoaXMuc2NlbmUyID0gc3ByOyAvL3RoaXMuc2NlbmVzW3NjZW5lXS5uZXcob3B0aW9ucyBhbmQgb3B0aW9ucy51c2VyRGF0YSk7XG4gICAgICAgIHRoaXMuc2NlbmUyLnNldFZpc2libGUoIGZhbHNlICk7XG4gICAgICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMuc2NlbmUyICk7XG4gICAgICAgIHRoaXMudGltZSA9IDA7XG4gICAgICAgIHRoaXMuY3VycmVudFRpbWVyID0gVGltZXIubm93KCk7XG4gICAgICAgIHRoaXMudHdlZW5pbmcgPSB0cnVlO1xuXG4gICAgICAgIGlmICggX25lZWRSVC5nZXQoIHRyYW5zaXRpb24gKSApIHtcbiAgICAgICAgICAgIGNvbnN0IHNzID0gdGhpcy5zdGFnZS5nZXRTY2FsZSgpO1xuICAgICAgICAgICAgY29uc3QgdyA9ICggdGhpcy54MiAtIHRoaXMueDEgKTsgLy8qIHNzO1xuICAgICAgICAgICAgY29uc3QgaCA9ICggdGhpcy55MiAtIHRoaXMueTEgKTsgLy8qIHNzO1xuICAgICAgICAgICAgY29uc3Qgc3ggPSB0aGlzLnN0YWdlLmdldFgoKTtcblxuICAgICAgICAgICAgdGhpcy5zdGFnZS5zZXRTY2FsZSggMSApO1xuICAgICAgICAgICAgY29uc3QgcnQgPSBuZXcgUmVuZGVyVGFyZ2V0KCB3LCBoLCB0cnVlICk7XG5cbiAgICAgICAgICAgIHJ0LmNsZWFyKCAweDAwMDAwMCwgMSApO1xuICAgICAgICAgICAgdGhpcy5zdGFnZS5zZXRQb3NpdGlvbiggLXRoaXMueDEsIC10aGlzLnkxICk7XG4gICAgICAgICAgICBydC5kcmF3KCB0aGlzLnN0YWdlICk7XG4gICAgICAgICAgICB0aGlzLnN0YWdlLnNldFgoIHN4ICk7XG4gICAgICAgICAgICB0aGlzLnN0YWdlLnNldFNjYWxlKCBzcy54LHNzLnkgKTtcbiAgICAgICAgICAgIHRoaXMuX1JUID0gcnQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5zY2VuZTI7XG4gICAgfVxuXG4gICAgcmVzZXRDdXJyZW50U2NlbmUoIGN1cnJlbnRTY2VuZSApIHtcbiAgICAgICAgdGhpcy5zY2VuZTEgPSBjdXJyZW50U2NlbmU7XG4gICAgICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMuc2NlbmUxICk7XG4gICAgfVxuXG4gICAgZmlsdGVyVHJhbnNpdGlvbkV2ZW50cyggZXZlbnQgKSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cblxuICAgIG9uVHJhbnNpdGlvbkJlZ2luKCkge1xuICAgICAgICBpZiAoIHRoaXMuZXZlbnRGaWx0ZXIgKSB7XG4gICAgICAgICAgICB0aGlzLnN0YWdlLmFkZENoaWxkKCB0aGlzLnRyYW5zaXRpb25FdmVudENhdGNoZXIgKTtcblxuICAgICAgICAgICAgZm9yICggY29uc3QgaSBpbiB0aGlzLmV2ZW50RmlsdGVyICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5ldmVudEZpbHRlcltpXTtcblxuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvbkV2ZW50Q2F0Y2hlci5hZGRFdmVudExpc3RlbmVyKCBldmVudCwgdGhpcy5maWx0ZXJUcmFuc2l0aW9uRXZlbnRzLCB0aGlzICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvblRyYW5zaXRpb25FbmQoKSB7XG4gICAgICAgIGlmICggdGhpcy5ldmVudEZpbHRlciApIHtcbiAgICAgICAgICAgIGZvciAoIGNvbnN0IGkgaW4gdGhpcy5ldmVudEZpbHRlciApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBldmVudCA9IHRoaXMuZXZlbnRGaWx0ZXJbaV07XG5cbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25FdmVudENhdGNoZXIucmVtb3ZlRXZlbnRMaXN0ZW5lciggZXZlbnQsIHRoaXMuZmlsdGVyVHJhbnNpdGlvbkV2ZW50cywgdGhpcyApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25FdmVudENhdGNoZXIucmVtb3ZlRnJvbVBhcmVudCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25FbnRlckZyYW1lKCBldmVudCApIHtcbiAgICAgICAgLy8g7J2067Kk7Yq47ZWE7YSw66eB6rCc7LK066W8IGFsd2F5cyBvbiB0b3Ag7Iuc7YKo64ukXG4gICAgICAgIHRoaXMuc3RhZ2UuYWRkQ2hpbGQoIHRoaXMudHJhbnNpdGlvbkV2ZW50Q2F0Y2hlciApO1xuXG4gICAgICAgIC8vIO2KuOuenOyngOyFmCDsooXro4zsi5wg7J206rOz7JeQ7IScIOydvOq0hCDsspjrpqxcbiAgICAgICAgaWYgKCAhdGhpcy50d2VlbmluZyApIHtcbiAgICAgICAgICAgIC8vaWYgKEdMT0JBTC5sYXllclNoaWVsZEZvclNjZW5lQ2hhbmdlKSB7IEdMT0JBTC5sYXllclNoaWVsZEZvclNjZW5lQ2hhbmdlLmhpZGUoKSB9XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoIEV2ZW50LkVOVEVSX0ZSQU1FLCB0aGlzLm9uRW50ZXJGcmFtZSwgdGhpcyApO1xuICAgICAgICAgICAgdGhpcy5zY2VuZTEucmVtb3ZlRnJvbVBhcmVudCgpO1xuICAgICAgICAgICAgdGhpcy5zY2VuZTEgPSB0aGlzLnNjZW5lMjtcbiAgICAgICAgICAgIHRoaXMuc2NlbmUyID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdpbmdTY2VuZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAvL3dpcGVyIHJlbW92ZTtcbiAgICAgICAgICAgIGlmICggdGhpcy5fYmxhY2tNZXNoICkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2JsYWNrTWVzaC5yZW1vdmVGcm9tUGFyZW50KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fYmxhY2tNZXNoID0gbnVsbDtcbiAgICAgICAgICAgIH1cblx0XHRcbiAgICAgICAgICAgIGlmICggdGhpcy5fUlQgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fUlQgPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIHRoaXMudGltZSA9PSAwICkge1xuICAgICAgICAgICAgdGhpcy5vblRyYW5zaXRpb25CZWdpbigpO1xuICAgICAgICAgICAgdGhpcy5zY2VuZTIuc2V0VmlzaWJsZSggdHJ1ZSApO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCBcInRyYW5zaXRpb25CZWdpblwiICk7XG4gICAgICAgICAgICB0aGlzLnNjZW5lMS5kaXNwYXRjaEV2ZW50KCBcImV4aXRCZWdpblwiICk7XG4gICAgICAgICAgICB0aGlzLnNjZW5lMi5kaXNwYXRjaEV2ZW50KCBcImVudGVyQmVnaW5cIiApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGltZXIgPSBUaW1lci5ub3coKTtcbiAgICAgICAgY29uc3QgZGVsdGFUaW1lID0gMTAwMCAvIDYwOyAvLyB0aW1lciAtIHRoaXMuY3VycmVudFRpbWVyO1xuXG4gICAgICAgIHRoaXMuY3VycmVudFRpbWVyID0gdGltZXI7XG4gICAgICAgIGNvbnN0IHQgPSAoIHRoaXMuZHVyYXRpb24gPT0gMCApID8gMSA6ICggdGhpcy50aW1lIC8gdGhpcy5kdXJhdGlvbiApO1xuXG4gICAgICAgIHRoaXMudHJhbnNpdGlvbiggdGhpcywgdGhpcy5zY2VuZTEsIHRoaXMuc2NlbmUyLCB0aGlzLmVhc2UoIHQgKSwgdCApO1xuXG4gICAgICAgIGlmICggdGhpcy50aW1lID09IHRoaXMuZHVyYXRpb24gKSB7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoIFwidHJhbnNpdGlvbkVuZFwiICk7XG4gICAgICAgICAgICB0aGlzLnNjZW5lMS5kaXNwYXRjaEV2ZW50KCBcImV4aXRFbmRcIiApO1xuICAgICAgICAgICAgdGhpcy5zY2VuZTIuZGlzcGF0Y2hFdmVudCggXCJlbnRlckVuZFwiICk7XG4gICAgICAgICAgICB0aGlzLm9uVHJhbnNpdGlvbkVuZCgpO1xuICAgICAgICAgICAgdGhpcy50d2VlbmluZyA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50aW1lID0gdGhpcy50aW1lICsgZGVsdGFUaW1lO1xuXG4gICAgICAgIGlmICggdGhpcy5kdXJhdGlvbiA8IHRoaXMudGltZSApIHtcbiAgICAgICAgICAgIHRoaXMudGltZSA9IHRoaXMuZHVyYXRpb247XG4gICAgICAgIH1cbiAgICB9XG59XG5cbl9uZWVkUlQgPSBuZXcgTWFwKCBbXG4gICAgW1NjZW5lTWFuYWdlci5jaXJjbGVJblJULCB0cnVlXSxcbiAgICBbU2NlbmVNYW5hZ2VyLmNpcmNsZU91dFJULCB0cnVlXSxcbiAgICBbU2NlbmVNYW5hZ2VyLnBhcGVyRG93blJULCB0cnVlXSxcbiAgICBbU2NlbmVNYW5hZ2VyLnBhcGVyVXBSVCwgdHJ1ZV0sXG5dICk7XG5cbiIsIlxyXG4vL2ltcG9ydCBFdmVudERpc3BhdGNoZXIgZnJvbSBcIi4vZXZlbnREaXNwYXRjaGVyXCI7XHJcblxyXG5cclxuLyoqIFxyXG4gKiBAdHlwZWRlZiB7b2JqZWN0fSBDbGFzc0RlZk9wdGlvbnNcclxuICogQHBhcmFtIHtmdW5jdGlvbj19IGNvbnN0cnVjdFxyXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBmaWxsXHJcbiAqIEBwYXJhbSB7c3RyaW5nW109fSB3aGl0ZVxyXG4gKiBAcGFyYW0ge3N0cmluZ1tdPX0gYmxhY2tcclxuICogQHBhcmFtIHtzdHJpbmdbXT19IGtlZXBcclxuICogQHBhcmFtIHtib29sZWFuPX0gZGF0YU9ubHlcclxuICovXHJcblxyXG4vKipcclxuICogQHR5cGVkZWYge1tvYmplY3QsQ2xhc3NEZWZPcHRpb25zXX0gX0NsYXNzRGVmXHJcbiAqIFxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAdHlwZWRlZiB7b2JqZWN0fF9DbGFzc0RlZn0gQ2xhc3NEZWZcclxuICogXHJcbiAqL1xyXG5cclxuY29uc3QgUyA9IHtcclxuICAgIHVuZGVmaW5lZDogICAgIFwiJCRVREZcIixcclxuICAgIGZ1bmN0aW9uOiAgICAgIFwiJCRGTkNcIixcclxuICAgIHVua25vd246ICAgICAgIFwiJCRVS05cIixcclxuICAgIE5hTjogICAgICAgICAgIFwiJCROQU5cIixcclxuICAgIEluZmluaXR5OiAgICAgIFwiJCRJTkZcIixcclxuICAgIE1pbnVzSW5maW5pdHk6IFwiJCRNSUZcIixcclxuICAgIERhdGU6ICAgICAgICAgIFwiJCREQVRcIixcclxuICAgIFJlZ0V4cDogICAgICAgIFwiJCRSR1hcIixcclxuICAgIFJlZmVyZW5jZTogICAgIFwiJCRSRUZcIlxyXG59O1xyXG5cclxuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XHJcbiAgICBpZ25vcmVQcmVmaXg6ICAgICBcIl9fXCIsXHJcbiAgICBpZ25vcmVMaXN0OiAgICAgICBbXCJfX3BpeGlcIl0sXHJcbiAgICBza2lwVW5kZWZpbmVkOiAgICB0cnVlLFxyXG4gICAgc2tpcFVua25vd25DbGFzczogdHJ1ZVxyXG59O1xyXG5cclxuLyoqIFxyXG4gKiBAdHlwZWRlZiB7b2JqZWN0fSBTZXJpYWxpemVyT3B0aW9uc1xyXG4gKiBAcHJvcGVydHkge3N0cmluZz19IGlnbm9yZVByZWZpeFxyXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdPX0gaWdub3JlTGlzdFxyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW49fSBza2lwVW5kZWZpbmVkXHJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbj19IHNraXBVbmtub3duQ2xhc3NcclxuICogXHJcbiAqL1xyXG5cclxuXHJcbmZ1bmN0aW9uIGNvcHlPYmplY3QoIGRzdCwgc3JjLCBrZWVwICkge1xyXG4gICAgaWYgKCBrZWVwID09IG51bGwgKSB7XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbiggZHN0LCBzcmMgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZm9yICggY29uc3QgayBpbiBzcmMgKSB7XHJcbiAgICAgICAgICAgIGlmICggdHlwZW9mIHNyY1trXSA9PSBcIm9iamVjdFwiICYmIGRzdFtrXSAmJiBrZWVwLmluY2x1ZGVzKCBrICkgKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDrjIDsg4HsnbQg7ZSE66Gd7Iuc7J28IOqyveyasCDqt7jrg6Ug67O17IKs7ZWY66m0IO2UhOuhneyLnCDtlbjrk6Trn6zrpbwg7J6D7Ja067KE66as6riwIOuVjOusuOyXkCBcclxuICAgICAgICAgICAgICAgIC8vIGtlZXAg66as7Iqk7Yq47J2YIOqyg+uTpOydgCDso7zshozrpbwg67O07KG07Iuc7Lyc7JW87ZWc64ukLlxyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbiggZHN0W2tdLCBzcmNba10gKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRzdFtrXSA9IHNyY1trXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOqyjOyehCDsmKTruIzsoJ3tirjrpbwg7KeB66Cs7ZmU7ZWY6rOgIOuLpOyLnCDqsozsnoTsmKTruIzsoJ3tirjroZwg66eM65OkIOyImCDsnojrj4TroZ0g7ZWc64ukLlxyXG4gKiDsp4HroKztmZTtlZwg7Jik67iM7KCd7Yq464qUIOuEpO2KuOybjeycvOuhnCDrs7TrgrTqsbDrgpgg7YyM7J287JeQIOyggOyepe2VoCDsiJgg7J6I64ukLlxyXG4gKiBcclxuICog7KeB66Cs7ZmU7ZWgIOyYpOu4jOygne2KuOqwgCDsg53shLHsnpDsl5DshJwgUHJveHnrpbwg66eM65Oc64qUIOqyveyasCDso7zsnZjqsIAg7ZWE7JqU7ZWoXHJcbiAqIFByb3h56rCAIOuLpOy4teycvOuhnCDqtazshLHrkKAg6rK97JqwIFByb3h57J2YIGhhbmRsZXLrpbwg7J6D7Ja067KE66a0IOyImCDsnojri6QuXHJcbiAqIOq3uOufsCDqsoPrk6TsnYAga2VlcCDsmLXshZjsnYQg7IKs7Jqp7ZW07IScIO2DgOqynyDqsJzssrTsnZgg7ZSE66Gc7Yag7YOA7J6F7J2EIOycoOyngO2VmOuPhOuhnSDtlaAg6rKDXHJcbiAqXHJcbiAqIEBjbGFzcyBTZXJpYWxpemVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU2VyaWFsaXplciB7XHJcbiAgICAvKipcclxuICAgICAqQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBTZXJpYWxpemVyLlxyXG4gICAgICogQHBhcmFtIHtDbGFzc0RlZltdfSBjbGFzc0xpc3RcclxuICAgICAqIEBwYXJhbSB7U2VyaWFsaXplck9wdGlvbnN9IFtvcHRpb25zPXt9XVxyXG4gICAgICogQG1lbWJlcm9mIFNlcmlhbGl6ZXJcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoIGNsYXNzTGlzdCwgb3B0aW9ucyA9IGRlZmF1bHRPcHRpb25zICkge1xyXG4gICAgICAgIC8vc3VwZXIoKTtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtPYmplY3QuPHN0cmluZyxfQ2xhc3NEZWY+fSAqL1xyXG4gICAgICAgIHRoaXMuY2xhc3NMaXN0ID0ge307XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICBmb3IgKCBjb25zdCBjbGFzc0RlZiBvZiBjbGFzc0xpc3QgKSB7XHJcbiAgICAgICAgICAgIGlmICggQXJyYXkuaXNBcnJheSggY2xhc3NEZWYgKSApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0W2NsYXNzRGVmWzBdLm5hbWVdID0gW2NsYXNzRGVmLGNsYXNzRGVmWzFdXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0W2NsYXNzRGVmLm5hbWVdID0gW2NsYXNzRGVmLG51bGxdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX19vYmplY3RUb0lkID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuX19pZFRvT2JqZWN0ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuX19yZWZDb3VudCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCB0aGlzLmNsYXNzTGlzdCApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0geyp9IG9ialxyXG4gICAgICogQHJldHVybnMge29iamVjdH1cclxuICAgICAqIEBtZW1iZXJvZiBTZXJpYWxpemVyXHJcbiAgICAgKi9cclxuICAgIF9nZXRTZXJpYWxpemFibGVPYmplY3QoIG9iaiApIHtcclxuICAgICAgICBpZiAoIHRoaXMuX19vYmplY3RUb0lkLmhhcyggb2JqICkgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX19yZWZDb3VudFt0aGlzLl9fb2JqZWN0VG9JZC5nZXQoIG9iaiApXSA9ICggdGhpcy5fX3JlZkNvdW50W3RoaXMuX19vYmplY3RUb0lkLmdldCggb2JqICldIHx8IDAgKSArIDE7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUy5SZWZlcmVuY2UgKyBcIjpcIiArIHRoaXMuX19vYmplY3RUb0lkLmdldCggb2JqICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggdHlwZW9mIG9iaiA9PSBcInVuZGVmaW5lZFwiICkge1xyXG4gICAgICAgICAgICByZXR1cm4gUy51bmRlZmluZWQ7XHJcbiAgICAgICAgfSBlbHNlIGlmICggb2JqID09PSBudWxsICkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9IGVsc2UgaWYgKCBvYmogaW5zdGFuY2VvZiBSZWdFeHAgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTLlJlZ0V4cCArIFwiOlwiICsgb2JqLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICggb2JqIGluc3RhbmNlb2YgRGF0ZSApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFMuRGF0ZSArIFwiOlwiICsgb2JqLmdldFRpbWUoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKCB0eXBlb2Ygb2JqID09IFwic3RyaW5nXCIgfHwgdHlwZW9mIG9iaiA9PSBcIm51bWJlclwiIHx8IHR5cGVvZiBvYmogPT0gXCJib29sZWFuXCIgKSB7XHJcbiAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBpZiAoIE51bWJlci5pc05hTiggb2JqICkgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUy5OYU47XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIG9iaiA9PT0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFMuSW5maW5pdHk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIG9iaiA9PT0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFMuTWludXNJbmZpbml0eTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmo7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKCB0eXBlb2Ygb2JqID09IFwiZnVuY3Rpb25cIiApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFMuZnVuY3Rpb247XHJcbiAgICAgICAgfSBlbHNlIGlmICggdHlwZW9mIG9iaiA9PSBcIm9iamVjdFwiICkgIHtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLm9wdGlvbnMuc2tpcFVua25vd25DbGFzcyAmJiBvYmouY29uc3RydWN0b3IgIT09IE9iamVjdCAmJiBvYmouY29uc3RydWN0b3IgIT09IEFycmF5ICYmIHRoaXMuY2xhc3NMaXN0W29iai5jb25zdHJ1Y3Rvci5uYW1lXSA9PSBudWxsICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFMudW5rbm93bjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLl9fb2JqZWN0VG9JZC5zaXplO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fX29iamVjdFRvSWQuc2V0KCBvYmosIGlkICk7XHJcbiAgICAgICAgICAgIGxldCByZXN1bHQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoIEFycmF5LmlzQXJyYXkoIG9iaiApICkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBvYmoubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udmVydGVkT2JqID0gdGhpcy5fZ2V0U2VyaWFsaXphYmxlT2JqZWN0KCBvYmpbaV0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLm9wdGlvbnMuc2tpcFVuZGVmaW5lZCAmJiBjb252ZXJ0ZWRPYmogPT0gUy51bmRlZmluZWQgKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNvbnZlcnRlZE9iaiAhPSBTLmZ1bmN0aW9uICYmIGNvbnZlcnRlZE9iaiAhPSBTLnVua25vd24gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGNvbnZlcnRlZE9iajtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvKiogQHR5cGUge0NsYXNzRGVmT3B0aW9uc30gKi9cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNsYXNzT3B0aW9ucyA9IG9iai5jb25zdHJ1Y3RvciAhPT0gT2JqZWN0ID8gdGhpcy5jbGFzc0xpc3Rbb2JqLmNvbnN0cnVjdG9yLm5hbWVdWzFdIDogbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSAhKCBjbGFzc09wdGlvbnMgJiYgY2xhc3NPcHRpb25zLmRhdGFPbmx5ICkgJiYgb2JqLmNvbnN0cnVjdG9yICE9PSBPYmplY3QgPyB7IF9fY2xhc3M6IG9iai5jb25zdHJ1Y3Rvci5uYW1lIH0gOiB7fTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc29ydGVkS2V5ID0gT2JqZWN0LmtleXMoIG9iaiApLnNvcnQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKCBjb25zdCBrIG9mIHNvcnRlZEtleSApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmFzc2VydCggayAhPSBcImVudGl0eU1hbmFnZXJcIiApO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggIXRoaXMub3B0aW9ucy5pZ25vcmVMaXN0LmluY2x1ZGVzKCBrICkgJiYgIWsuc3RhcnRzV2l0aCggdGhpcy5vcHRpb25zLmlnbm9yZVByZWZpeCApICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGNsYXNzT3B0aW9ucyAmJiBjbGFzc09wdGlvbnMuYmxhY2sgJiYgY2xhc3NPcHRpb25zLmJsYWNrLmluY2x1ZGVzKCBrICkgKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBjbGFzc09wdGlvbnMgJiYgY2xhc3NPcHRpb25zLndoaXRlICYmICFjbGFzc09wdGlvbnMud2hpdGUuaW5jbHVkZXMoIGsgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnZlcnRlZE9iaiA9IHRoaXMuX2dldFNlcmlhbGl6YWJsZU9iamVjdCggb2JqW2tdICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy5za2lwVW5kZWZpbmVkICYmIGNvbnZlcnRlZE9iaiA9PSBTLnVuZGVmaW5lZCApIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGNvbnZlcnRlZE9iaiAhPSBTLmZ1bmN0aW9uICYmIGNvbnZlcnRlZE9iaiAhPSBTLnVua25vd24gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRba10gPSBjb252ZXJ0ZWRPYmo7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fX2lkVG9PYmplY3RbaWRdID0gcmVzdWx0O1xyXG4gICAgICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICAgICAgcmVzdWx0Ll9fcmVmSWQgPSBpZDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvciggYOyVjCDsiJgg7JeG64qUIO2DgOyehSDrsJzqsqwgJHtvYmp9YCApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNlcmlhbGl6YWJsZU9iamVjdCggb2JqICkge1xyXG4gICAgICAgIHRoaXMuX19vYmplY3RUb0lkID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuX19pZFRvT2JqZWN0ID0ge307XHJcbiAgICAgICAgdGhpcy5fX3JlZkNvdW50ID0ge307XHJcblxyXG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLl9nZXRTZXJpYWxpemFibGVPYmplY3QoIG9iaiApO1xyXG5cclxuICAgICAgICAvLyDrpqztjbzrn7DsiqQg7KCV66asXHJcblxyXG4gICAgICAgIGZvciAoIGNvbnN0IGlkIGluIHRoaXMuX19pZFRvT2JqZWN0ICkge1xyXG4gICAgICAgICAgICBpZiAoIHRoaXMuX19yZWZDb3VudFtpZF0gPT0gbnVsbCApIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9faWRUb09iamVjdFtpZF0uX19yZWZJZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGUgdGhpcy5fX29iamVjdFRvSWQ7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuX19pZFRvT2JqZWN0O1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLl9fcmVmQ291bnQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvYmpcclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICAgKiBAbWVtYmVyb2YgU2VyaWFsaXplclxyXG4gICAgICovXHJcbiAgICBzdHJpbmdpZnkoIG9iaiApIHtcclxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoIHRoaXMuZ2V0U2VyaWFsaXphYmxlT2JqZWN0KCBvYmogKSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog7KeB66Cs7ZmU65CcIOqwnOyytOulvCDrs7XqtaztlZzri6QuXHJcbiAgICAgKiBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xvYmplY3R9IHMgLSDrrLjsnpDsl7Qg7Zi57J2AIOyngeugrO2ZlCDsspjrpqzrkJwg6rCc7LK0XHJcbiAgICAgKiBAcGFyYW0ge29iamVjdD19IHBhcnNlT3B0aW9uc1xyXG4gICAgICogQHJldHVybnMge29iamVjdH1cclxuICAgICAqIEBtZW1iZXJvZiBTZXJpYWxpemVyXHJcbiAgICAgKi9cclxuICAgIHBhcnNlKCBzICwgcGFyc2VPcHRpb25zICkge1xyXG4gICAgICAgIC8qKiBAdHlwZSB7U2VyaWFsaXplcn0gKi9cclxuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgICBjb25zdCByZWNlaXZlciA9IGZ1bmN0aW9uICggaywgdiApIHtcclxuICAgICAgICAgICAgaWYgKCB2ID09IG51bGwgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICggdHlwZW9mIHYgPT0gXCJvYmplY3RcIiApIHtcclxuICAgICAgICAgICAgICAgIGlmICggQXJyYXkuaXNBcnJheSggdiApIHx8IHYuXyQkY2xhc3MgPT0gbnVsbCApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5hc3NlcnQoICFzZWxmLl9fb2JqZWN0VG9JZC5oYXMoIHYgKSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3T2JqO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuYXNzZXJ0KCBzZWxmLmNsYXNzTGlzdFt2Ll8kJGNsYXNzXSApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFtjbGFzc09iaiwgY2xhc3NEZWZPcHRpb25zXSA9IHNlbGYuY2xhc3NMaXN0W3YuXyQkY2xhc3NdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNsYXNzRGVmT3B0aW9ucyA9PSBudWxsICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmFzc2VydCggY2xhc3NPYmoubGVuZ3RoID09IDAsYCR7di5fJCRjbGFzc33snZgg7IOd7ISx7J6Q7J2YIOyduOyImOuKlCAke2NsYXNzT2JqLmxlbmd0aH3snbjrjbAg7J247IiYIOyXhuydtCDsg53shLHsnYQg7Iuc64+E7ZWY6rOgIOyeiOuLpC4gY29uc3RydWN0IOyYteyFmOydtCDtlYTsmpTtlahgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld09iaiA9IG5ldyBjbGFzc09iaigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKCBuZXdPYmosIHYgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGNsYXNzRGVmT3B0aW9ucy5jb25zdHJ1Y3QgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdPYmogPSBjbGFzc0RlZk9wdGlvbnMuY29uc3RydWN0LmNhbGwoIHNlbGYsIHYsIHBhcnNlT3B0aW9ucyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggY2xhc3NEZWZPcHRpb25zLmZpbGwgIT09IGZhbHNlICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlPYmplY3QoIG5ld09iaiwgdixjbGFzc0RlZk9wdGlvbnMua2VlcCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weU9iamVjdCggbmV3T2JqLCB2LCBjbGFzc0RlZk9wdGlvbnMua2VlcCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gdi5fX3JlZklkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGlkICE9IG51bGwgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX19vYmplY3RUb0lkLnNldCggdiwgaWQgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fX2lkVG9PYmplY3RbaWRdID0gbmV3T2JqO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgbmV3T2JqLl9fcmVmSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgbmV3T2JqLl8kJGNsYXNzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3T2JqO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCB0eXBlb2YgdiA9PSBcInN0cmluZ1wiICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCBPYmplY3QudmFsdWVzKCBTICkuaW5jbHVkZXMoIHYuc3Vic3RyKCAwLCA1ICkgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDrgrTrtoDtg4DsnoUg67Cc6rKsXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IHYuc3Vic3RyKCAwLCA1ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggdHlwZSA9PSBTLk5hTiApIHJldHVybiBOdW1iZXIuTmFOO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCB0eXBlID09IFMuSW5maW5pdHkgKSByZXR1cm4gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCB0eXBlID09IFMuTWludXNJbmZpbml0eSApIHJldHVybiBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIHR5cGUgPT0gUy5SZWdFeHAgKSByZXR1cm4gbmV3IFJlZ0V4cCggdi5zdWJzdHIoIDYgKSApO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCB0eXBlID09IFMuRGF0ZSApIHJldHVybiBuZXcgRGF0ZSggdi5zdWJzdHIoIDYgKSApO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCB0eXBlID09IFMuUmVmZXJlbmNlICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHYuc3Vic3RyKCA2ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHNlbGYuX19pZFRvT2JqZWN0W2lkXSApIHJldHVybiBzZWxmLl9faWRUb09iamVjdFtpZF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIFwi66as7Y2865+w7IqkIOqwnOyytOqwgCDrp4zrk6TslrTsp4DquLAg7KCE7JeQIOumrO2NvOufsOyKpOulvCDsl7DqsrDtlZjroKTqs6Ag7ZWoXCIgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIGBwYXJzZSDtlaAg7IiYIOyXhuuKlCDqsJzssrQgJHt2fWAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHY7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLl9fb2JqZWN0VG9JZCA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLl9faWRUb09iamVjdCA9IHt9O1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCBzICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IHI7XHJcblxyXG4gICAgICAgIGlmICggdHlwZW9mIHMgPT0gXCJvYmplY3RcIiApIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyc2VPYmplY3QgPSBmdW5jdGlvbiAoIG8gKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIG8gPT0gbnVsbCApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHR5cGVvZiBvID09IFwib2JqZWN0XCIgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IEFycmF5LmlzQXJyYXkoIG8gKSA/IFtdIDoge307XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIGNvbnN0IGsgaW4gbyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcltrXSA9IHJlY2VpdmVyLmNhbGwoIHIsIGssIHBhcnNlT2JqZWN0KCBvW2tdICkgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHIgPSBwYXJzZU9iamVjdCggcyApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIHR5cGVvZiBzID09IFwic3RyaW5nXCIgKSB7XHJcbiAgICAgICAgICAgIHIgPSBKU09OLnBhcnNlKCBzLCByZWNlaXZlciApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGVsZXRlIHRoaXMuX19pZFRvT2JqZWN0O1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLl9fb2JqZWN0VG9JZDtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coIHIgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHI7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4iLCJpbXBvcnQgeyBhcHBsaWNhdGlvbiB9IGZyb20gJy4vQXBwbGljYXRpb24nO1xyXG5pbXBvcnQgeyBBc3NldCB9IGZyb20gJy4vQXNzZXQnO1xyXG5pbXBvcnQgeyBUZXh0dXJlQmFzZSB9IGZyb20gJy4vVGV4dHVyZUJhc2UnO1xyXG5pbXBvcnQgeyBVdGlscyB9IGZyb20gJy4vVXRpbHMnO1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBTaGFkZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKkNyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgU2hhZGVyLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZlcnRleFNyY1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZyYWdtZW50U3JjXHJcbiAgICAgKiBAcGFyYW0ge1RleHR1cmVCYXNlW109fSB0ZXh0dXJlc1xyXG4gICAgICogQHBhcmFtIHtvYmplY3Q9fSBjb25zdGFudHNcclxuICAgICAqIEBtZW1iZXJvZiBTaGFkZXJcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoIHZlcnRleFNyYywgZnJhZ21lbnRTcmMsIHRleHR1cmVzLCBjb25zdGFudHMgKSB7XHJcbiAgICAgICAgdGhpcy5hc3NldCA9IG5ldyBBc3NldCggXCI8U2hhZGVyOio+XCIsQXNzZXQuQXNzZXRUeXBlcy5TaGFkZXIgKTtcclxuICAgICAgICB0aGlzLnRleHR1cmVzID0gdGV4dHVyZXMgIT0gbnVsbCA/IHRleHR1cmVzIDoge307XHJcbiAgICAgICAgdGhpcy5jb25zdGFudHMgPSBjb25zdGFudHMgIT0gbnVsbCA/IGNvbnN0YW50cyA6IHt9O1xyXG4gICAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmFzc2V0LmxvYWQoIHsgdmVydGV4U3JjOiB2ZXJ0ZXhTcmMsZnJhZ21lbnRTcmM6IGZyYWdtZW50U3JjLHRleHR1cmVzOiB0aGlzLl9nZXRUZXh0dXJlSWRzKCksY29uc3RhbnRzOiB0aGlzLmNvbnN0YW50cyB9ICk7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFRleHR1cmVJZHMoKSB7XHJcbiAgICAgICAgY29uc3QgdGV4dHVyZUlkcyA9IHt9O1xyXG5cclxuICAgICAgICBmb3IgKCBsZXQgbmFtZSBpbiB0aGlzLnRleHR1cmVzICkge1xyXG4gICAgICAgICAgICB0ZXh0dXJlSWRzW25hbWVdID0gdGhpcy50ZXh0dXJlc1tuYW1lXS5hc3NldC5pZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRleHR1cmVJZHM7XHJcbiAgICB9XHJcblxyXG4gICAgX3VwZGF0ZSgpIHtcclxuICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBmb3JjZVVwZGF0ZSgpIHtcclxuICAgICAgICBpZiAoIHRoaXMuZGlydHkgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXNzZXQudXBkYXRlKCB7IHRleHR1cmVzOiB0aGlzLl9nZXRUZXh0dXJlSWRzKCksY29uc3RhbnRzOiB0aGlzLmNvbnN0YW50cyB9ICk7XHJcbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVsZWFzZSgpIHtcclxuICAgICAgICB0aGlzLmFzc2V0LnJlbGVhc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRDb25zdGFudCggbmFtZSwgdmFsdWUgKSB7XHJcbiAgICAgICAgdGhpcy5jb25zdGFudHNbbmFtZV0gPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLl91cGRhdGUoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q29uc3RhbnRzKCBjb25zdGFudHMgKSB7XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbiggdGhpcy5jb25zdGFudHMsY29uc3RhbnRzICk7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlKCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog7IWw7J20642U7JeQIO2FjeyKpOyzkOulvCDrsJTsnbjrlKntlZzri6RcclxuICAgICAqIG5hbWXsnYQg7KeA7KCV7ZWY66m0IOyFsOydtOuNlOyViOyXkCBuYW1lU2FtcGxlcuuhnCDsnb3snYQg7IiYIOyeiOuLpC5cclxuICAgICAqIFNhbXBsZXLqsIAg67aZ64qUIOqyg+yXkCDso7zsnZjtlaAg6rKDXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcclxuICAgICAqIEBwYXJhbSB7VGV4dHVyZUJhc2V9IHRleHR1cmVcclxuICAgICAqIEByZXR1cm5zIHtTaGFkZXJ9XHJcbiAgICAgKiBAbWVtYmVyb2YgU2hhZGVyXHJcbiAgICAgKi9cclxuICAgIHNldFRleHR1cmUoIG5hbWUsIHRleHR1cmUgKSB7XHJcbiAgICAgICAgdGhpcy50ZXh0dXJlc1tuYW1lXSA9IHRleHR1cmU7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlKCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7U2hhZGVyfSBcclxuICAgICAqIEBtZW1iZXJvZiBTaGFkZXJcclxuICAgICAqL1xyXG4gICAgY2xvbmUoKSB7XHJcbiAgICAgICAgY29uc3QgbmV3U2hhZGVyID0geyB0ZXh0dXJlczoge30sY29uc3RhbnRzOiB7fSB9O1xyXG5cclxuICAgICAgICBuZXdTaGFkZXIuYXNzZXQgPSBuZXcgQXNzZXQoIFwiPFNoYWRlcjoqPlwiLEFzc2V0LkFzc2V0VHlwZXMuU2hhZGVyICk7XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbiggbmV3U2hhZGVyLnRleHR1cmVzLHRoaXMudGV4dHVyZXMgKTtcclxuICAgICAgICBPYmplY3QuYXNzaWduKCBuZXdTaGFkZXIuY29uc3RhbnRzLHRoaXMuY29uc3RhbnRzICk7XHJcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKCBuZXdTaGFkZXIsU2hhZGVyLnByb3RvdHlwZSApO1xyXG4gICAgICAgIG5ld1NoYWRlci5hc3NldC5sb2FkKCB7IGNvcHlGcm9tOiB0aGlzLmFzc2V0LmlkLCB0ZXh0dXJlczogbmV3U2hhZGVyLl9nZXRUZXh0dXJlSWRzKCksY29uc3RhbnRzOiBuZXdTaGFkZXIuY29uc3RhbnRzIH0gKTtcclxuICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICByZXR1cm4gbmV3U2hhZGVyO1xyXG4gICAgfVxyXG59XHJcblNoYWRlci5sYXN0SWQgPSAwO1xyXG4iLCJcclxuaW1wb3J0IHsgU3ByaXRlIH0gZnJvbSAnLi9TcHJpdGUnO1xyXG5pbXBvcnQgeyBVdGlscyB9IGZyb20gJy4vVXRpbHMnO1xyXG5cclxuLy8gZ2lkZXJvc+yZgCDsmYTsoITtnogg7Zi47ZmY7J2AIOyViOuQqC4gXHJcbi8vIOuMgOy2qSDrp4zrk6Ag64uk7J2M7JeQIEFQSeulvCDrsJTqv4Ag6rKDXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFNoYXBlIGV4dGVuZHMgU3ByaXRlIHtcclxuICAgIGNvbnN0cnVjdG9yKCB0ZXh0dXJlICkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5fJCRzcHJpdGVUeXBlID0gU3ByaXRlLlNwcml0ZVR5cGVzLlNIQVBFO1xyXG4gICAgICAgIHRoaXMuXyQkdXBkYXRlQ29kZSA9IFNwcml0ZS5VcGRhdGVDb2Rlcy5VUERBVEVfRVhUUkE7XHJcbiAgICAgICAgdGhpcy5iZWdpblBhdGgoKTtcclxuICAgICAgICB0aGlzLnNldExpbmVTdHlsZSggMCwweDAwMDAwMCwwICk7XHJcbiAgICAgICAgdGhpcy5zZXRGaWxsU3R5bGUoIFNoYXBlLlNPTElELDB4MDAwMDAwLDAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY3VycmVudFN1YlBhdGhQb2ludHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ViUGF0aHNbdGhpcy5zdWJQYXRocy5sZW5ndGggLSAxXTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRMaW5lU3R5bGUoIHdpZHRoLCBjb2xvciwgYWxwaGEgKSB7XHJcbiAgICAgICAgdGhpcy5saW5lV2lkdGggPSB3aWR0aDtcclxuICAgICAgICB0aGlzLmxpbmVDb2xvciA9IFV0aWxzLmhleDJyZ2JhKCBjb2xvcixhbHBoYSApO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEZpbGxTdHlsZSggdHlwZSwgLi4uYXJncyApIHtcclxuICAgICAgICBpZiAoIHR5cGUgPT0gU2hhcGUuU09MSUQgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IFtjb2xvciwgYWxwaGFdID0gYXJncztcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZmlsbENvbG9yID0gVXRpbHMuaGV4MnJnYmEoIGNvbG9yLGFscGhhICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGJlZ2luUGF0aCggd2luZGluZyApIHtcclxuICAgICAgICB0aGlzLnN0YXJ0WCA9IDA7XHJcbiAgICAgICAgdGhpcy5zdGFydFkgPSAwO1xyXG4gICAgICAgIHRoaXMubGFzdFggPSAwO1xyXG4gICAgICAgIHRoaXMubGFzdFkgPSAwO1xyXG4gICAgICAgIHRoaXMuc3ViUGF0aHMgPSBbW11dO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyKCkge1xyXG4gICAgICAgIHRoaXMuc3ViUGF0aHMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBtb3ZlVG8oIHgseSApIHtcclxuICAgICAgICB0aGlzLmVuZFBhdGgoKTtcclxuICAgICAgICBpZiAoIHRoaXMuY3VycmVudFN1YlBhdGhQb2ludHMubGVuZ3RoID09IDAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRYID0geDtcclxuICAgICAgICAgICAgdGhpcy5zdGFydFkgPSB5O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmN1cnJlbnRTdWJQYXRoUG9pbnRzLnB1c2goIHgseSApO1xyXG4gICAgICAgIHRoaXMubGFzdFggPSB4O1xyXG4gICAgICAgIHRoaXMubGFzdFkgPSB5O1xyXG4gICAgICAgIHRoaXMuXyQkbG9jYWxCb3VuZHMuZXh0ZW5kUG9pbnQoIHgseSApO1xyXG4gICAgfVxyXG5cclxuICAgIGxpbmVUbyggeCx5ICkge1xyXG4gICAgICAgIGlmICggdGhpcy5jdXJyZW50U3ViUGF0aFBvaW50cy5sZW5ndGggPT0gMCApIHJldHVybiB0aGlzLm1vdmVUbyggeCx5ICk7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50U3ViUGF0aFBvaW50cy5wdXNoKCB4LCB5ICk7XHJcbiAgICAgICAgdGhpcy5sYXN0WCA9IHg7XHJcbiAgICAgICAgdGhpcy5sYXN0WSA9IHk7XHJcbiAgICAgICAgdGhpcy5fJCRsb2NhbEJvdW5kcy5leHRlbmRQb2ludCggeCx5ICk7XHJcbiAgICB9XHJcblxyXG4gICAgZW5kUGF0aCgpIHtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZVBhdGgoKSB7XHJcbiAgICAgICAgaWYgKCB0aGlzLmN1cnJlbnRTdWJQYXRoUG9pbnRzLmxlbmd0aCA+IDAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFN1YlBhdGhQb2ludHMucHVzaCggdGhpcy5zdGFydFgsdGhpcy5zdGFydFkgKTtcclxuICAgICAgICAgICAgdGhpcy5zdWJQYXRocy5wdXNoKCBbXSApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl8kJHVwZGF0ZUNvZGUgfD0gU3ByaXRlLlVwZGF0ZUNvZGVzLlVQREFURV9FWFRSQTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgbWFrZUJveCggeCwgeSwgdywgaCwgYywgYSApIHtcclxuICAgICAgICB0aGlzLmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIHRoaXMuc2V0RmlsbFN0eWxlKCBTaGFwZS5TT0xJRCwgYywgYSApO1xyXG4gICAgICAgIHRoaXMubW92ZVRvKCB4LHkgKTtcclxuICAgICAgICB0aGlzLmxpbmVUbyggeCArIHcseSApO1xyXG4gICAgICAgIHRoaXMubGluZVRvKCB4ICsgdyx5ICsgaCApO1xyXG4gICAgICAgIHRoaXMubGluZVRvKCB4LHkgKyBoICk7XHJcbiAgICAgICAgdGhpcy5jbG9zZVBhdGgoKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgbWFrZUJveCggeCwgeSwgdywgaCwgYywgYSApIHtcclxuICAgICAgICBjb25zdCBzaCA9IG5ldyBTaGFwZSgpO1xyXG5cclxuICAgICAgICBzaC5tYWtlQm94KCB4LCB5LCB3LCBoLCBjLCBhICk7XHJcbiAgICAgICAgcmV0dXJuIHNoO1xyXG4gICAgfVxyXG5cclxuICAgIGVuY29kZUV4dHJhUmVuZGVyaW5nSW5mbygpIHtcclxuICAgICAgICBjb25zdCBnZXRBcnJheSA9ICgpPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBhcnIgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGFyci5wdXNoKCB0aGlzLnN1YlBhdGhzLmxlbmd0aCAtICggdGhpcy5jdXJyZW50U3ViUGF0aFBvaW50cy5sZW5ndGggPT0gMCA/IDEgOiAwICkgKTtcclxuICAgICAgICAgICAgdGhpcy5zdWJQYXRocy5mb3JFYWNoKCBwYXRoID0+IHtcclxuICAgICAgICAgICAgICAgIGFyci5wdXNoKCBwYXRoLmxlbmd0aCApO1xyXG4gICAgICAgICAgICAgICAgYXJyLnB1c2goIC4uLnBhdGggKTtcclxuICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICByZXR1cm4gYXJyO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxldCBhcnIyID0gZ2V0QXJyYXkoKTtcclxuICAgICAgICBsZXQgZW5jb2RlZEJ1ZmZlciA9IG5ldyBGbG9hdDMyQXJyYXkoIDkgKyBhcnIyLmxlbmd0aCApO1xyXG5cclxuICAgICAgICBlbmNvZGVkQnVmZmVyWzBdID0gdGhpcy5saW5lV2lkdGg7XHJcbiAgICAgICAgZW5jb2RlZEJ1ZmZlci5zZXQoIHRoaXMubGluZUNvbG9yLDEgKTtcclxuICAgICAgICBlbmNvZGVkQnVmZmVyLnNldCggdGhpcy5maWxsQ29sb3IsNSApO1xyXG4gICAgICAgIGVuY29kZWRCdWZmZXIuc2V0KCBhcnIyLDkgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIFtlbmNvZGVkQnVmZmVyXTtcclxuICAgIH1cclxufVxyXG5cclxuU2hhcGUuTk9ORSA9IFwibm9uZVwiO1xyXG5TaGFwZS5TT0xJRCA9IFwic29saWRcIjtcclxuU2hhcGUuVEVYVFVSRSA9IFwidGV4dHVyZVwiO1xyXG5TaGFwZS5MSU5FQVJfR1JBRElFTlQgPSBcImxpbmVhckdyYWRpZW50XCI7XHJcblNoYXBlLlJBRElBTF9HUkFESUVOVCA9IFwicmFkaWFsR3JhZGllbnRcIjtcclxuU2hhcGUuTk9OX1pFUk8gPSBcIm5vbmVaZXJvXCI7XHJcblxyXG4iLCJpbXBvcnQgeyBhcHBsaWNhdGlvbiB9IGZyb20gXCIuL0FwcGxpY2F0aW9uXCI7XHJcbmltcG9ydCB7IEFzc2V0IH0gZnJvbSBcIi4vQXNzZXRcIjtcclxuaW1wb3J0IHsgRXZlbnQgfSBmcm9tICcuL0V2ZW50JztcclxuaW1wb3J0IHsgRXZlbnREaXNwYXRjaGVyIH0gZnJvbSBcIi4vRXZlbnREaXNwYXRjaGVyXCI7XHJcblxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBTb3VuZCBleHRlbmRzIEV2ZW50RGlzcGF0Y2hlciB7XHJcbiAgICBjb25zdHJ1Y3RvciggbmFtZSApIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuYXNzZXQgPSBuZXcgQXNzZXQoIG5hbWUsQXNzZXQuQXNzZXRUeXBlcy5Tb3VuZCApO1xyXG4gICAgICAgIHRoaXMuYXNzZXQubG9hZCgpO1xyXG4gICAgICAgIHRoaXMucGxheWluZyA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lXHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmdW5jXHJcbiAgICAgKiBAcGFyYW0ge2FueT19IGNvbnRleHRcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzT25jZT1mYWxzZV1cclxuICAgICAqIEByZXR1cm5zIHtTb3VuZH1cclxuICAgICAqIEBtZW1iZXJvZiBTb3VuZFxyXG4gICAgICovXHJcbiAgICBhZGRFdmVudExpc3RlbmVyKCBldmVudE5hbWUsIGZ1bmMsIGNvbnRleHQgPSBudWxsLCBpc09uY2UgPSBmYWxzZSApIHtcclxuICAgICAgICBpZiAoIGV2ZW50TmFtZSA9PSBFdmVudC5MT0FERUQgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXNzZXQuYWRkRXZlbnRMaXN0ZW5lciggZXZlbnROYW1lLCB0aGlzLmRpc3BhdGNoRXZlbnQuYmluZCggdGhpcyxFdmVudC5MT0FERUQgKSwgbnVsbCwgaXNPbmNlICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIHJldHVybiBzdXBlci5hZGRFdmVudExpc3RlbmVyKCBldmVudE5hbWUsIGZ1bmMsIGNvbnRleHQsIGlzT25jZSApO1xyXG4gICAgfVxyXG5cclxuICAgIHBsYXkoIHN0YXJ0VGltZSxsb29waW5nLHBhdXNlZCApIHtcclxuICAgICAgICBhcHBsaWNhdGlvbi5wb3N0TWVzc2FnZVRvUmVuZGVyKCB7IG1zZzogXCJhZGRDb21tYW5kXCIsY2xhc3M6IFwiU291bmRcIiwgbWV0aG9kOiBcInBsYXlcIixhcmdzOiBbdGhpcy5hc3NldC5pZCwgc3RhcnRUaW1lLGxvb3BpbmcscGF1c2VkXSB9ICk7XHJcbiAgICAgICAgdGhpcy5wbGF5aW5nID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRWb2x1bWUoIHYgKSB7XHJcbiAgICAgICAgYXBwbGljYXRpb24ucG9zdE1lc3NhZ2VUb1JlbmRlciggeyBtc2c6IFwiYWRkQ29tbWFuZFwiLGNsYXNzOiBcIlNvdW5kXCIsbWV0aG9kOiBcInNldFZvbHVtZVwiLGFyZ3M6IFt0aGlzLmFzc2V0LmlkLCB2XSB9ICk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UGl0Y2goIHYgKSB7XHJcbiAgICAgICAgYXBwbGljYXRpb24ucG9zdE1lc3NhZ2VUb1JlbmRlciggeyBtc2c6IFwiYWRkQ29tbWFuZFwiLGNsYXNzOiBcIlNvdW5kXCIsbWV0aG9kOiBcInNldFBpdGNoXCIsYXJnczogW3RoaXMuYXNzZXQuaWQsIHZdIH0gKTtcclxuICAgIH1cclxuXHJcbiAgICBpc1BsYXlpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGxheWluZztcclxuICAgIH1cclxuXHJcbiAgICBzZXRQYXVzZWQoIHYgKSB7XHJcbiAgICAgICAgaWYgKCB2ICkge1xyXG4gICAgICAgICAgICBhcHBsaWNhdGlvbi5wb3N0TWVzc2FnZVRvUmVuZGVyKCB7IG1zZzogXCJhZGRDb21tYW5kXCIsY2xhc3M6IFwiU291bmRcIixtZXRob2Q6IFwic2V0UGF1c2VkXCIsYXJnczogW3RoaXMuYXNzZXQuaWQsIHZdIH0gKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnBsYXkoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wbGF5aW5nID0gIXY7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UG9zaXRpb24oIHYgKSB7XHJcbiAgICAgICAgYXBwbGljYXRpb24ucG9zdE1lc3NhZ2VUb1JlbmRlciggeyBtc2c6IFwiYWRkQ29tbWFuZFwiLGNsYXNzOiBcIlNvdW5kXCIsbWV0aG9kOiBcInNldFBvc2l0aW9uXCIsYXJnczogW3RoaXMuYXNzZXQuaWQsIHZdIH0gKTtcclxuICAgIH1cclxuXHJcbiAgICBzdG9wKCkge1xyXG4gICAgICAgIGFwcGxpY2F0aW9uLnBvc3RNZXNzYWdlVG9SZW5kZXIoIHsgbXNnOiBcImFkZENvbW1hbmRcIixjbGFzczogXCJTb3VuZFwiLG1ldGhvZDogXCJzdG9wXCIsYXJnczogW3RoaXMuYXNzZXQuaWRdIH0gKTtcclxuICAgICAgICB0aGlzLnBsYXlpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRMZW5ndGgoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCBcIk5vdCBpbXBsZW1lbnRlZFwiICk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHBsYXlTb3VuZCggbmFtZSApIHtcclxuICAgICAgICByZXR1cm4gKCBuZXcgU291bmQoIG5hbWUgKSApLnBsYXkoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOqwmeydgCBrZXnrpbwg7IKs7Jqp7Z6I66m0IO2VreyDgSDtlZjrgpjsnZgg7IKs7Jq065Oc66eMIOuCmOyYpOqyjCDtlZzri6QuXHJcbiAgICAgKiDrp4zslb0g6rCZ7J2AIGtleeyduOuNsCBuYW1l7J20IOuLpOulvCDqsr3smrAg7J207KCEIOyCrOyatOuTnOuKlCDspJHsp4Dsi5ztgqTqs6Ag7IOI66GcIOyXsOyjvFxyXG4gICAgICpcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBwYXJhbSB7Kn0gbmFtZVxyXG4gICAgICogQHBhcmFtIHsqfSB2b2xcclxuICAgICAqIEBwYXJhbSB7Kn0gbG9vcFxyXG4gICAgICogQHBhcmFtIHsqfSBba2V5PW5hbWVdXHJcbiAgICAgKiBAbWVtYmVyb2YgU291bmRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHBsYXlTaW5nbGVTb3VuZCggbmFtZSx2b2wsbG9vcCxrZXkgPSBuYW1lICkge1xyXG4gICAgICAgIGFwcGxpY2F0aW9uLnBvc3RNZXNzYWdlVG9SZW5kZXIoIHsgbXNnOiBcImFkZENvbW1hbmRcIixjbGFzczogXCJTb3VuZFwiLG1ldGhvZDogXCJwbGF5U2luZ2xlU291bmRcIixhcmdzOiBbbmFtZSx2b2wsbG9vcCxrZXldIH0gKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgc3RvcEFsbFNpbmdsZVNvdW5kKCkge1xyXG4gICAgICAgIGFwcGxpY2F0aW9uLnBvc3RNZXNzYWdlVG9SZW5kZXIoIHsgbXNnOiBcImFkZENvbW1hbmRcIixjbGFzczogXCJTb3VuZFwiLG1ldGhvZDogXCJzdG9wQWxsU2luZ2xlU291bmRcIixhcmdzOiBbXSB9ICk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4iLCJcclxuLy8gaW1wb3J0IHtTcGluZVBpeGkgZnJvbSBcIi4vZXh0L3NwaW5lLXBpeGlcIjtcclxuaW1wb3J0IHsgU3ByaXRlIH0gZnJvbSAnLi9TcHJpdGUnO1xyXG5pbXBvcnQgeyBUZXh0RmllbGQgfSBmcm9tICcuL1RleHRGaWVsZCc7XHJcbmltcG9ydCB7IEV2ZW50IH0gZnJvbSAnLi9FdmVudCc7XHJcbmltcG9ydCB7IFN0b3JhZ2UgfSBmcm9tICcuL1N0b3JhZ2UnO1xyXG5cclxuXHJcbi8vcGl4aS1zcGluZSBkb2NzXHJcbi8vaHR0cHM6Ly9naXRodWIuY29tL3BpeGlqcy9waXhpLXNwaW5lL2Jsb2IvbmV4dC9leGFtcGxlcy9pbmRleC5tZFxyXG5cclxuZXhwb3J0IGNsYXNzIFNwaW5lIGV4dGVuZHMgU3ByaXRlIHtcclxuICAgIGNvbnN0cnVjdG9yKCBzcGluZUZpbGVuYW1lICkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiBcclxuICAgICAgICB0aGlzLmxvYWRlciA9IG5ldyBTcGluZVBpeGkuQXNzZXRNYW5hZ2VyKCk7XHJcbiAgICAgICAgdGhpcy5sb2FkZXIubG9hZFRleHQoIHNwaW5lRmlsZW5hbWUgKyBcIi5qc29uXCIgKTtcclxuICAgICAgICAvLyB0aGlzLmxvYWRlci5sb2FkVGV4dCggc3BpbmVGaWxlbmFtZSArIFwiLmF0bGFzXCIgKTtcclxuICAgICAgICAvLyB0aGlzLmxvYWRlci5sb2FkVGV4dHVyZSggc3BpbmVGaWxlbmFtZSArIFwiLnBuZ1wiICk7XHJcbiAgICAgICAgLy8gdGhpcy5sb2FkZXIubG9hZFRleHR1cmUoIHNwaW5lRmlsZW5hbWUgKyBcIjIucG5nXCIgKTtcclxuICAgICAgICAvLyB0aGlzLmxvYWRlci5sb2FkVGV4dHVyZSggc3BpbmVGaWxlbmFtZSArIFwiMy5wbmdcIiApO1xyXG4gICAgICAgIC8vIHRoaXMubG9hZGVyLmxvYWRUZXh0dXJlKCBzcGluZUZpbGVuYW1lICsgXCI0LnBuZ1wiICk7XHJcbiAgICAgICAgdGhpcy5sb2FkZXIubG9hZFRleHQoIFwiU3BpbmVzL1NwaW5lX1BsYXllcl8zLmF0bGFzXCIgKTtcclxuICAgICAgICB0aGlzLmxvYWRlci5sb2FkVGV4dHVyZSggXCJTcGluZXMvU3BpbmVfUGxheWVyXzMucG5nXCIgKTtcclxuXHJcbiAgICAgICAgLy8gU3RvcmFnZS5sb2FkRmlsZSggc3BpbmVGaWxlbmFtZSApLm9uKCBFdmVudC5DT01QTEVURSwoIGUgKT0+e1xyXG5cclxuICAgICAgICAvLyAgICAgdGhpcy5zcGluZSA9IG5ldyBTcGluZVBpeGkoIGUuZGF0YSApO1xyXG4gICAgICAgIC8vICAgICB0aGlzLm9uKCBFdmVudC5SRUFEWSwoKT0+e1xyXG5cclxuICAgICAgICAvLyAgICAgICAgIHRoaXMub25TdGFnZSggRXZlbnQuRU5URVJfRlJBTUUsKCk9PntcclxuXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy5zcGluZS51cGRhdGUoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIC8vICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAvLyAgICAgfSApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIH0gKTtcclxuICAgICAgICB0aGlzLnNwaW5lRmlsZW5hbWUgPSBzcGluZUZpbGVuYW1lO1xyXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSggKCk9PnRoaXMubG9hZCgpICk7XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZCgpIHtcclxuICAgICAgICBpZiAoIHRoaXMubG9hZGVyLmlzTG9hZGluZ0NvbXBsZXRlKCkgKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCBcIuyZhOujjFwiICk7XHJcbiAgICAgICAgICAgIGxldCBkYXRhID0gdGhpcy5sb2FkU2tlbGV0b24oIHRoaXMuc3BpbmVGaWxlbmFtZSApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5za2VsZXRvbiA9IGRhdGEuc2tlbGV0b247XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBkYXRhLnN0YXRlO1xyXG4gICAgICAgICAgICB0aGlzLmJvdW5kcyA9IGRhdGEuYm91bmRzO1xyXG4gICAgICAgICAgICB0aGlzLnNrZWxldG9uRGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICAgIC8vIHRoaXMub25TdGFnZSggRXZlbnQuRU5URVJfRlJBTUUsKCk9PntcclxuXHJcbiAgICAgICAgICAgIC8vICAgICBzLnVwZGF0ZSggMTAwMCAvIDYwICk7XHJcbiAgICAgICAgICAgIC8vIH0gKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlciA9IG5ldyBTcGluZVBpeGkuU2tlbGV0b25SZW5kZXJlciggdGhpcy5fX3BpeGkgKTtcclxuICAgICAgICAgICAgdGhpcy5vblN0YWdlKCBFdmVudC5FTlRFUl9GUkFNRSwoKT0+e1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS51cGRhdGUoIDEgLyA2MCApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5hcHBseSggdGhpcy5za2VsZXRvbiApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5kcmF3KCB0aGlzLnNrZWxldG9uICk7XHJcbiAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX19waXhpLmVtaXQoIEV2ZW50LlJFQURZICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCAoKT0+dGhpcy5sb2FkKCkgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZFNrZWxldG9uKCBuYW1lICkge1xyXG4gICAgICAgIGxldCBiYXNlUGF0aCA9IG5hbWUuc3Vic3RyKCAwLG5hbWUubGFzdEluZGV4T2YoIFwiL1wiICkgKTtcclxuICAgICAgICAvLyAgICAgICAgbGV0IGF0bGFzID0gbmV3IFNwaW5lUGl4aS5jb3JlLlRleHR1cmVBdGxhcyggdGhpcy5sb2FkZXIuZ2V0KCBuYW1lLnJlcGxhY2UoIFwiLXByb1wiLCBcIlwiICkucmVwbGFjZSggXCItZXNzXCIsIFwiXCIgKSArIFwiLmF0bGFzXCIgKSwgKCBwYXRoICkgPT4ge1xyXG4gICAgICAgIGxldCBhdGxhcyA9IG5ldyBTcGluZVBpeGkuY29yZS5UZXh0dXJlQXRsYXMoIHRoaXMubG9hZGVyLmdldCggXCJTcGluZXMvU3BpbmVfUGxheWVyXzMuYXRsYXNcIiApLCAoIHBhdGggKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRlci5nZXQoIGJhc2VQYXRoICsgXCIvXCIgKyBwYXRoICk7XHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAvLyBDcmVhdGUgYSBBdGxhc0F0dGFjaG1lbnRMb2FkZXIsIHdoaWNoIGlzIHNwZWNpZmljIHRvIHRoZSBXZWJHTCBiYWNrZW5kLlxyXG4gICAgICAgIGxldCBhdGxhc0xvYWRlciA9IG5ldyBTcGluZVBpeGkuY29yZS5BdGxhc0F0dGFjaG1lbnRMb2FkZXIoIGF0bGFzICk7XHJcbiAgICAgICAgLy8gQ3JlYXRlIGEgU2tlbGV0b25Kc29uIGluc3RhbmNlIGZvciBwYXJzaW5nIHRoZSAuanNvbiBmaWxlLlxyXG4gICAgICAgIGxldCBza2VsZXRvbkpzb24gPSBuZXcgU3BpbmVQaXhpLmNvcmUuU2tlbGV0b25Kc29uKCBhdGxhc0xvYWRlciApO1xyXG5cclxuICAgICAgICBsZXQgc2tlbGV0b25EYXRhID0gc2tlbGV0b25Kc29uLnJlYWRTa2VsZXRvbkRhdGEoIHRoaXMubG9hZGVyLmdldCggbmFtZSArIFwiLmpzb25cIiApICk7XHJcbiAgICAgICAgbGV0IHNrZWxldG9uID0gbmV3IFNwaW5lUGl4aS5jb3JlLlNrZWxldG9uKCBza2VsZXRvbkRhdGEgKTtcclxuXHJcbiAgICAgICAgc2tlbGV0b24uZmxpcFkgPSB0cnVlO1xyXG4gICAgICAgIGxldCBib3VuZHMgPSB0aGlzLmNhbGN1bGF0ZUJvdW5kcyggc2tlbGV0b24gKTtcclxuXHJcbiAgICAgICAgc2tlbGV0b24uc2V0U2tpbkJ5TmFtZSggXCJydW5uZXJcIiApO1xyXG4gICAgICAgIC8vIENyZWF0ZSBhbiBBbmltYXRpb25TdGF0ZSwgYW5kIHNldCB0aGUgaW5pdGlhbCBhbmltYXRpb24gaW4gbG9vcGluZyBtb2RlLlxyXG4gICAgICAgIHZhciBhbmltYXRpb25TdGF0ZSA9IG5ldyBTcGluZVBpeGkuY29yZS5BbmltYXRpb25TdGF0ZSggbmV3IFNwaW5lUGl4aS5jb3JlLkFuaW1hdGlvblN0YXRlRGF0YSggc2tlbGV0b24uZGF0YSApICk7XHJcblxyXG4gICAgICAgIGFuaW1hdGlvblN0YXRlLnNldEFuaW1hdGlvbiggMCwgXCJzdGFuZGluZ1wiLCB0cnVlICk7XHJcblxyXG4gICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIGFuaW1hdGlvblN0YXRlLmFkZExpc3RlbmVyKCB7XHJcbiAgICAgICAgICAgIGV2ZW50OiBmdW5jdGlvbiggdHJhY2tJbmRleCwgZXZlbnQgKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkV2ZW50IG9uIHRyYWNrIFwiICsgdHJhY2tJbmRleCArIFwiOiBcIiArIEpTT04uc3RyaW5naWZ5KGV2ZW50KSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiggdHJhY2tJbmRleCwgbG9vcENvdW50ICkge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJBbmltYXRpb24gb24gdHJhY2sgXCIgKyB0cmFja0luZGV4ICsgXCIgY29tcGxldGVkLCBsb29wIGNvdW50OiBcIiArIGxvb3BDb3VudCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN0YXJ0OiBmdW5jdGlvbiggdHJhY2tJbmRleCApIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiQW5pbWF0aW9uIG9uIHRyYWNrIFwiICsgdHJhY2tJbmRleCArIFwiIHN0YXJ0ZWRcIik7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVuZDogZnVuY3Rpb24oIHRyYWNrSW5kZXggKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkFuaW1hdGlvbiBvbiB0cmFjayBcIiArIHRyYWNrSW5kZXggKyBcIiBlbmRlZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgLy8gUGFjayBldmVyeXRoaW5nIHVwIGFuZCByZXR1cm4gdG8gY2FsbGVyLlxyXG4gICAgICAgIHJldHVybiB7IHNrZWxldG9uOiBza2VsZXRvbiwgc3RhdGU6IGFuaW1hdGlvblN0YXRlLCBib3VuZHM6IGJvdW5kcyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNhbGN1bGF0ZUJvdW5kcyggc2tlbGV0b24gKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSBza2VsZXRvbi5kYXRhO1xyXG5cclxuICAgICAgICBza2VsZXRvbi5zZXRUb1NldHVwUG9zZSgpO1xyXG4gICAgICAgIHNrZWxldG9uLnVwZGF0ZVdvcmxkVHJhbnNmb3JtKCk7XHJcbiAgICAgICAgdmFyIG9mZnNldCA9IG5ldyBTcGluZVBpeGkuY29yZS5WZWN0b3IyKCk7XHJcbiAgICAgICAgdmFyIHNpemUgPSBuZXcgU3BpbmVQaXhpLmNvcmUuVmVjdG9yMigpO1xyXG5cclxuICAgICAgICBza2VsZXRvbi5nZXRCb3VuZHMoIG9mZnNldCwgc2l6ZSwgW10gKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHsgb2Zmc2V0OiBvZmZzZXQsIHNpemU6IHNpemUgfTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gU3BpbmXsnYAg7J6Q7LK07KCB7Jy866GcIOywqOydvOuTnOulvCDsg53shLHtlZjquLAg65WM66y47JeQIOywqOydvOuTnCDsiJjqsIAg6rys7J28IOyImCDsnojsnYxcclxuLy8g6rCZ7J2AIOyymOumrOulvCDtlZjqs6Ag7J6I64qUIFRleHRGaWVsZOydmCDqsoPsnYQg7JOw7J6QXHJcblNwaW5lLnByb3RvdHlwZS5nZXRDaGlsZEF0ID0gVGV4dEZpZWxkLnByb3RvdHlwZS5nZXRDaGlsZEF0O1xyXG5TcGluZS5wcm90b3R5cGUuZ2V0TnVtQ2hpbGRyZW4gPSBUZXh0RmllbGQucHJvdG90eXBlLmdldE51bUNoaWxkcmVuO1xyXG5TcGluZS5wcm90b3R5cGUuc29ydENoaWxkcmVuID0gVGV4dEZpZWxkLnByb3RvdHlwZS5zb3J0Q2hpbGRyZW47XHJcblNwaW5lLnByb3RvdHlwZS5yZWZyZXNoQ29sb3IgPSBUZXh0RmllbGQucHJvdG90eXBlLnJlZnJlc2hDb2xvcjtcclxuXHJcbiIsImltcG9ydCB7IG00LCB2MyB9IGZyb20gJ3R3Z2wuanMnO1xyXG5pbXBvcnQgeyBFdmVudERpc3BhdGNoZXIgfSBmcm9tICcuL0V2ZW50RGlzcGF0Y2hlcic7XHJcbmltcG9ydCB7IEV2ZW50IH0gZnJvbSAnLi9FdmVudCc7XHJcbmltcG9ydCB7IENvbXBvbmVudEhvbGRlciB9IGZyb20gJy4vQ29tcG9uZW50SG9sZGVyJztcclxuaW1wb3J0IHsgUG9pbnQsIFJlY3QsIFR5cGVkQXJyYXlIZWxwZXIgfSBmcm9tICcuL1R5cGVzJztcclxuaW1wb3J0IHsgVXRpbHMgfSBmcm9tICcuL1V0aWxzJztcclxuaW1wb3J0IHsgQXNzZXQgfSBmcm9tICcuL0Fzc2V0JztcclxuaW1wb3J0IHsgYXBwbGljYXRpb24gfSBmcm9tICcuL0FwcGxpY2F0aW9uJztcclxuaW1wb3J0IHsgZWFzaW5nIH0gZnJvbSAnLi9lYXNpbmcnO1xyXG5pbXBvcnQgeyBUcmFuc2Zvcm0gfSBmcm9tICcuL1RyYW5zZm9ybSc7XHJcbmltcG9ydCB7IFNoYWRlciB9IGZyb20gJy4vU2hhZGVyJztcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgU3ByaXRlIGV4dGVuZHMgQ29tcG9uZW50SG9sZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5fJCRpZCA9IFNwcml0ZS5sYXN0SWQrKztcclxuICAgICAgICBTcHJpdGUuZmluYWxpemF0aW9uUmVnaXN0cnkucmVnaXN0ZXIoIHRoaXMseyB0aGlzT2JqSWQ6IHRoaXMuXyQkaWQgfSApO1xyXG4gICAgICAgIHRoaXMuXyQkc3ByaXRlVHlwZSA9IFNwcml0ZS5TcHJpdGVUeXBlcy5TUFJJVEU7XHJcbiAgICAgICAgdGhpcy5fJCR1cGRhdGVDb2RlID0gU3ByaXRlLlVwZGF0ZUNvZGVzLlVQREFURV9OT1RISU5HO1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybSgpO1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtLmludmFsaWRhdGVDYWxsYmFjayA9IHRoaXMub25JbnZhbGlkYXRlVHJhbnNmb3JtLmJpbmQoIHRoaXMgKTtcclxuICAgICAgICB0aGlzLl8kJGxvY2FsQm91bmRzID0gbmV3IFJlY3QoIDAsMCwwLDAgKTtcclxuICAgICAgICB0aGlzLl8kJGJvdW5kc0RpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl8kJGJvdW5kcyA9IG5ldyBSZWN0KCAwLDAsMCwwICk7XHJcbiAgICAgICAgLyoqIEB0eXBlIHtSZWN0fSAqL1xyXG4gICAgICAgIHRoaXMuY3VzdG9tQm91bmRzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIC8vIHRoaXMuYm91bmRzRGlydHlcclxuICAgICAgICB0aGlzLnVzZUN1c3RvbUxvY2FsQm91bmRzID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy53b3JsZE1hdHJpeCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmNvbG9yT3ZlcnJpZGUgPSBbMSwxLDEsMV07XHJcbiAgICAgICAgdGhpcy5jb2xvckFkZCA9IFswLDAsMCwwXTtcclxuICAgICAgICB0aGlzLmNsaXBSZWdpb24gPSBudWxsO1xyXG4gICAgICAgIC8qKiBAdHlwZSB7U3ByaXRlW119ICovXHJcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IFtdO1xyXG4gICAgICAgIHRoaXMucGFyZW50ID0gbnVsbDtcclxuICAgICAgICB0aGlzLl8kJHZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY3VzdG9tUHJldjtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtBc3NldH0gKi9cclxuICAgICAgICB0aGlzLmFzc2V0O1xyXG5cclxuICAgICAgICB0aGlzLmNhY2hlQml0bWFwTW9kZSA9IFNwcml0ZS5DYWNoZUJpdG1hcE1vZGVzLk5PX0NBQ0hFO1xyXG4gICAgICAgIHRoaXMuY2FjaGVCaXRtYXBEc3RJZCA9IDA7XHJcbiAgICAgICAgLyoqIEB0eXBlIHtBc3NldH0gKi9cclxuICAgICAgICB0aGlzLmNhY2hlQml0bWFwQXNzZXQ7XHJcbiAgICAgICAgdGhpcy5ibGVuZE1vZGUgPSBTcHJpdGUuQmxlbmRNb2Rlcy5OT1JNQUw7XHJcbiAgICAgICAgdGhpcy5tb3Rpb25CbHVyID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtTaGFkZXJ9ICovXHJcbiAgICAgICAgdGhpcy5zaGFkZXI7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGZpbmFsaXplSGFuZGxlciggb2JqICkge1xyXG4gICAgICAgIC8vIEdD7JeQIOydmO2VtCDsiJjqsbDrkJjsl4jsnLzrqbQg66a066as7KaI66W8IOuztOuCuOuLpC5cclxuICAgICAgICBhcHBsaWNhdGlvbi5wb3N0TWVzc2FnZVRvUmVuZGVyKCB7IG1zZzogXCJhZGRDb21tYW5kXCIsY2xhc3M6IFwiU3ByaXRlXCIsIG1ldGhvZDogXCJyZWxlYXNlXCIsYXJnczogW29iai50aGlzT2JqSWRdIH0gKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcmVsZWFzZSgpIHtcclxuICAgICAgICAvLyDqsJXsoJzroZwg7IKt7KCcXHJcbiAgICAgICAgaWYgKCB0aGlzLmFzc2V0ICE9IG51bGwgKSAge1xyXG4gICAgICAgICAgICB0aGlzLmFzc2V0LnJlbGVhc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g7Iqk7ZSE65287J207Yq4IOyngOyasOudvOuKlCDrqZTsi5zsp4Ag67O064K07JW87ZWoXHJcbiAgICAgICAgZm9yICggbGV0IGtleSBpbiB0aGlzICkge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpc1trZXldO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhcHBsaWNhdGlvbi5wb3N0TWVzc2FnZVRvUmVuZGVyKCB7IG1zZzogXCJhZGRDb21tYW5kXCIsZXhlY3V0aW9uVGltaW5nOiAyLGNsYXNzOiBcIlNwcml0ZVwiLG1ldGhvZDogXCJyZWxlYXNlXCIsYXJnczogW3RoaXMuXyQkaWRdIH0gKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOyKpO2UhOudvOydtO2KuOydmCDrs7Xsgqzrs7jsnYQg66eM65Og64ukXHJcbiAgICAgKiDslpXsnYAg67O17IKs66W8IO2VmOq4sCDrlYzrrLjsl5Ag7Iqk7ZSE65287J207Yq466W8IOyDgeyGje2VnCDqsJzssrTsnbgg6rK97JqwIOqwkuydtCDslYTri4jrnbwg7LC47KGw6rCAIOuzteyCrOuQmOuKlCDqsoPsl5Ag7KO87J2YIO2VoCDqsoNcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7U3ByaXRlfSBcclxuICAgICAqIEBtZW1iZXJvZiBTcHJpdGVcclxuICAgICAqL1xyXG4gICAgY2xvbmUoKSB7XHJcbiAgICAgICAgLyoqIEB0eXBlIHtTcHJpdGV9ICovXHJcbiAgICAgICAgY29uc3QgbmV3T2JqID0ge307XHJcblxyXG4gICAgICAgIE9iamVjdC5hc3NpZ24oIG5ld09iaix0aGlzICk7XHJcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKCBuZXdPYmosT2JqZWN0LmdldFByb3RvdHlwZU9mKCB0aGlzICkgKTtcclxuICAgICAgICBuZXdPYmouXyQkaWQgPSBTcHJpdGUubGFzdElkKys7XHJcbiAgICAgICAgLy8g6rCc7LK066W8IOqzteycoO2VmOqyjCDrkJjquLAg65WM66y47JeQIGNsb25l7J2EIOuLpOyLnCDtlbTso7zslrTslbwg7ZWc64ukXHJcbiAgICAgICAgbmV3T2JqLnRyYW5zZm9ybSA9IG5ld09iai50cmFuc2Zvcm0uY2xvbmUoKTtcclxuICAgICAgICBuZXdPYmoudHJhbnNmb3JtLmludmFsaWRhdGVDYWxsYmFjayA9IG5ld09iai5vbkludmFsaWRhdGVUcmFuc2Zvcm0uYmluZCggbmV3T2JqICk7XHJcbiAgICAgICAgbmV3T2JqLl8kJGxvY2FsQm91bmRzID0gbmV3T2JqLl8kJGxvY2FsQm91bmRzLmNsb25lKCk7XHJcbiAgICAgICAgbmV3T2JqLl8kJGJvdW5kcyA9IG5ld09iai5fJCRib3VuZHMuY2xvbmUoKTtcclxuICAgICAgICBuZXdPYmoud29ybGRNYXRyaXggPSAoIG5ld09iai53b3JsZE1hdHJpeCAhPSBudWxsICkgPyBtNC5jb3B5KCBuZXdPYmoud29ybGRNYXRyaXggKSA6IG51bGw7XHJcbiAgICAgICAgbmV3T2JqLmNvbG9yT3ZlcnJpZGUgPSBbLi4ubmV3T2JqLmNvbG9yT3ZlcnJpZGVdO1xyXG4gICAgICAgIG5ld09iai5jb2xvckFkZCA9IFsuLi5uZXdPYmouY29sb3JBZGRdO1xyXG4gICAgICAgIG5ld09iai5jbGlwUmVnaW9uID0gKCBuZXdPYmouY2xpcFJlZ2lvbiAhPSBudWxsICkgPyBuZXdPYmouY2xpcFJlZ2lvbi5jbG9uZSgpIDogbnVsbDtcclxuICAgICAgICBuZXdPYmouY2hpbGRyZW4gPSBbLi4ubmV3T2JqLmNoaWxkcmVuXTtcclxuICAgICAgICBuZXdPYmouY3VzdG9tUHJldiA9ICggbmV3T2JqLmN1c3RvbVByZXYgIT0gbnVsbCApID8gKCBPYmplY3QuYXNzaWduKCB7fSxuZXdPYmouY3VzdG9tUHJldiApICkgOiBudWxsO1xyXG4gICAgICAgIG5ld09iai5fJCR1cGRhdGVDb2RlIHw9IFNwcml0ZS5VcGRhdGVDb2Rlcy5VUERBVEVfRVhUUkE7XHJcbiAgICAgICAgcmV0dXJuIG5ld09iajtcclxuICAgIH1cclxuXHJcbiAgICBvbkludmFsaWRhdGVUcmFuc2Zvcm0oKSB7XHJcbiAgICAgICAgbGV0IHNwciA9IHRoaXM7XHJcblxyXG4gICAgICAgIGRvIHtcclxuICAgICAgICAgICAgc3ByLl8kJGJvdW5kc0RpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgc3ByID0gc3ByLnBhcmVudDtcclxuICAgICAgICB9IHdoaWxlICggc3ByICE9IG51bGwgKTtcclxuICAgICAgICByZXR1cm4gc3ByO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFBhdGgoIGRldGFpbEluZm8gKSB7XHJcbiAgICAgICAgY29uc3QgcGF0aCA9IFtdO1xyXG4gICAgICAgIGxldCBzcHIgPSB0aGlzO1xyXG5cclxuICAgICAgICB3aGlsZSAoIHNwci5wYXJlbnQgIT0gbnVsbCApIHtcclxuICAgICAgICAgICAgaWYgKCBkZXRhaWxJbmZvICkge1xyXG4gICAgICAgICAgICAgICAgcGF0aC51bnNoaWZ0KCBzcHIucGFyZW50LmNoaWxkcmVuLmluZGV4T2YoIHNwciApICsgXCI6XCIgKyBzcHIuY29uc3RydWN0b3IubmFtZSApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGF0aC51bnNoaWZ0KCBzcHIucGFyZW50LmNoaWxkcmVuLmluZGV4T2YoIHNwciApICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3ByID0gc3ByLnBhcmVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgaWYgKCBzcHIuaXNTdGFnZSApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiLy9cIiArIHBhdGguam9pbiggXCIvXCIgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCI/L1wiICsgcGF0aC5qb2luKCBcIi9cIiApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyB7UG9pbnR9IFxyXG4gICAgICogQG1lbWJlcm9mIFNwcml0ZVxyXG4gICAgICovXHJcbiAgICBnZXQgcG9zaXRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQb2ludCggdGhpcy50cmFuc2Zvcm0ueCx0aGlzLnRyYW5zZm9ybS55ICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge1BvaW50fSB2XHJcbiAgICAgKiBAbWVtYmVyb2YgU3ByaXRlXHJcbiAgICAgKi9cclxuICAgIHNldCBwb3NpdGlvbiggdiApIHtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybS54ID0gdi54O1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtLnkgPSB2Lnk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UG9zaXRpb24oIHgseSApIHtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybS54ID0geDtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybS55ID0geTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQb3NpdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbjtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZ2V0IHgoKSB7IHJldHVybiB0aGlzLnRyYW5zZm9ybS54OyB9XHJcblxyXG4gICAgc2V0IHgoIHYgKSB7IHRoaXMudHJhbnNmb3JtLnggPSB2OyB9XHJcblxyXG4gICAgZ2V0WCgpIHsgcmV0dXJuIHRoaXMudHJhbnNmb3JtLng7IH1cclxuXHJcbiAgICBzZXRYKCB2ICkgeyB0aGlzLnRyYW5zZm9ybS54ID0gdjsgfSBcclxuXHJcbiAgICBnZXQgeSgpIHsgcmV0dXJuIHRoaXMudHJhbnNmb3JtLnk7IH1cclxuXHJcbiAgICBzZXQgeSggdiApIHsgdGhpcy50cmFuc2Zvcm0ueSA9IHY7IH1cclxuXHJcbiAgICBnZXRZKCkgeyByZXR1cm4gdGhpcy50cmFuc2Zvcm0ueTsgfVxyXG5cclxuICAgIHNldFkoIHYgKSB7IHRoaXMudHJhbnNmb3JtLnkgPSB2OyB9IFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogW3gseV0g7ZiV7YOc66GcIOuwmO2ZmO2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7W251bWJlcixudW1iZXJdfVxyXG4gICAgICogQG1lbWJlcm9mIFNwcml0ZVxyXG4gICAgICovXHJcbiAgICBnZXQgeHkoKSB7IHJldHVybiBbdGhpcy54LCB0aGlzLnldOyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBbeCx5XSDtmJXtg5zroZzrp4wg67Cb64qU64ukLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcltdfFBvaW50fSB2XHJcbiAgICAgKiBAbWVtYmVyb2YgU3ByaXRlXHJcbiAgICAgKi9cclxuICAgIHNldCB4eSggdiApIHtcclxuICAgICAgICBpZiAoIEFycmF5LmlzQXJyYXkoIHYgKSApIHtcclxuICAgICAgICAgICAgdGhpcy54ID0gdlswXTtcclxuICAgICAgICAgICAgdGhpcy55ID0gdlsxXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICAgICAgdGhpcy54ID0gdi54O1xyXG4gICAgICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICAgICAgdGhpcy55ID0gdi55O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICAgKiBAbWVtYmVyb2YgU3ByaXRlXHJcbiAgICAgKi9cclxuICAgIGdldFJvdGF0aW9uKCkgeyByZXR1cm4gdGhpcy50cmFuc2Zvcm0ucm90YXRpb247IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2XHJcbiAgICAgKiBAbWVtYmVyb2YgU3ByaXRlXHJcbiAgICAgKi9cclxuICAgIHNldFJvdGF0aW9uKCB2ICkgeyB0aGlzLnRyYW5zZm9ybS5yb3RhdGlvbiA9IHY7IH1cclxuXHJcbiAgICBnZXQgYW5jaG9yWCgpIHsgXHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtLmFuY2hvclggLyAoIHRoaXMuYm91bmRzLndpZHRoIHx8IDEgKTsgXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyB7UG9pbnR9XHJcbiAgICAgKiBAbWVtYmVyb2YgU3ByaXRlXHJcbiAgICAgKi9cclxuICAgIGdldCBhbmNob3JQb3NpdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBvaW50KCB0aGlzLnRyYW5zZm9ybS5hbmNob3JYLHRoaXMudHJhbnNmb3JtLmFuY2hvclkgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7UG9pbnR9IHZcclxuICAgICAqIEBtZW1iZXJvZiBTcHJpdGVcclxuICAgICAqL1xyXG4gICAgc2V0IGFuY2hvclBvc2l0aW9uKCB2ICkge1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtLmFuY2hvclggPSB2Lng7XHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0uYW5jaG9yWSA9IHYueTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgYW5jaG9yUG9zaXRpb25YKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybS5hbmNob3JYO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBhbmNob3JQb3NpdGlvblgoIHYgKSB7XHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0uYW5jaG9yWCA9IHY7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFuY2hvclBvc2l0aW9uWSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm0uYW5jaG9yWTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgYW5jaG9yUG9zaXRpb25ZKCB2ICkge1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtLmFuY2hvclkgPSB2O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzZXQgYW5jaG9yWCggdiApIHsgXHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0uYW5jaG9yWCA9IHYgKiB0aGlzLmJvdW5kcy53aWR0aDsgXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFuY2hvclkoKSB7IFxyXG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybS5hbmNob3JZIC8gKCB0aGlzLmJvdW5kcy5oZWlnaHQgfHwgMSApOyBcclxuICAgIH1cclxuXHJcbiAgICBzZXQgYW5jaG9yWSggdiApIHsgXHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0uYW5jaG9yWSA9IHYgKiB0aGlzLmJvdW5kcy5oZWlnaHQ7IFxyXG4gICAgfVxyXG5cclxuICAgIGdldEFuY2hvclBvaW50KCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUG9pbnQoIHRoaXMuYW5jaG9yWCx0aGlzLmFuY2hvclkgKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRBbmNob3JQb2ludCggYXgsYXkgKSB7XHJcbiAgICAgICAgdGhpcy5hbmNob3JYID0gYXg7XHJcbiAgICAgICAgdGhpcy5hbmNob3JZID0gYXk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNjYWxlWCgpIHsgcmV0dXJuIHRoaXMudHJhbnNmb3JtLnNjYWxlWDsgfVxyXG5cclxuICAgIHNldCBzY2FsZVgoIHYgKSB7IHRoaXMudHJhbnNmb3JtLnNjYWxlWCA9IHY7IH1cclxuXHJcbiAgICBnZXRTY2FsZVgoKSB7IHJldHVybiB0aGlzLnRyYW5zZm9ybS5zY2FsZVg7IH1cclxuXHJcbiAgICBzZXRTY2FsZVgoIHYgKSB7IHRoaXMudHJhbnNmb3JtLnNjYWxlWCA9IHY7IH1cclxuICAgIFxyXG5cclxuICAgIGdldCBzY2FsZVkoKSB7IHJldHVybiB0aGlzLnRyYW5zZm9ybS5zY2FsZVk7IH1cclxuXHJcbiAgICBzZXQgc2NhbGVZKCB2ICkgeyB0aGlzLnRyYW5zZm9ybS5zY2FsZVkgPSB2OyB9XHJcblxyXG4gICAgZ2V0U2NhbGVZKCkgeyByZXR1cm4gdGhpcy50cmFuc2Zvcm0uc2NhbGVZOyB9XHJcblxyXG4gICAgc2V0U2NhbGVZKCB2ICkgeyB0aGlzLnRyYW5zZm9ybS5zY2FsZVkgPSB2OyB9XHJcblxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm5zIHtQb2ludH1cclxuICAgICAqIEBtZW1iZXJvZiBTcHJpdGVcclxuICAgICAqL1xyXG4gICAgZ2V0IHNjYWxlKCkgeyByZXR1cm4gbmV3IFBvaW50KCB0aGlzLnRyYW5zZm9ybS5zY2FsZVgsdGhpcy50cmFuc2Zvcm0uc2NhbGVZICk7IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfFBvaW50fSB2XHJcbiAgICAgKlxyXG4gICAgICogQG1lbWJlcm9mIFNwcml0ZVxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge1tudW1iZXIsbnVtYmVyXXxGbG9hdDMyQXJyYXl8bnVtYmVyfFBvaW50fSB2XHJcbiAgICAgKiBAbWVtYmVyb2YgU3ByaXRlXHJcbiAgICAgKi9cclxuICAgIHNldCBzY2FsZSggdiApIHtcclxuICAgICAgICBpZiAoIHR5cGVvZiB2ID09PSBcIm51bWJlclwiICkge1xyXG4gICAgICAgICAgICAvLyDsiqTsvIDsnbzsnYAg64+Z7Iuc7JeQIOuEo+ydhCDsiJgg7J6I7Jy866m0IO2OuOumrFxyXG4gICAgICAgICAgICB0aGlzLnRyYW5zZm9ybS5zY2FsZVggPSB2O1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zZm9ybS5zY2FsZVkgPSB2O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHAgPSBuZXcgUG9pbnQoIHYgKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtLnNjYWxlWCA9IHAueDtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0uc2NhbGVZID0gcC55O1xyXG4gICAgICAgIH1cclxuICAgIH0gXHJcblxyXG4gICAgZ2V0U2NhbGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NhbGU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0U2NhbGUoIHgseSApIHtcclxuICAgICAgICB0aGlzLnNjYWxlWCA9IHg7XHJcbiAgICAgICAgdGhpcy5zY2FsZVkgPSB5ID09IG51bGwgPyB4IDogeTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcm90YXRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtLnJvdGF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCByb3RhdGlvbiggdiApIHtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybS5yb3RhdGlvbiA9IHY7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDsnpDsi50g7Iqk7ZSE65287J207Yq466W8IOygnOyZuO2VmOqzoCDsiJzsiJjtlZjqsowg7J6Q6riwIOyekOyLoOydmCDtgazquLBcclxuICAgICAqXHJcbiAgICAgKiBAcmVhZG9ubHlcclxuICAgICAqIEBtZW1iZXJvZiBTcHJpdGVcclxuICAgICAqL1xyXG4gICAgZ2V0IGxvY2FsQm91bmRzKCkge1xyXG4gICAgICAgIGNvbnN0IHIgPSBuZXcgUmVjdCggdGhpcy5fJCRsb2NhbEJvdW5kcyApO1xyXG5cclxuICAgICAgICByLnggLT0gdGhpcy50cmFuc2Zvcm0uYW5jaG9yWDtcclxuICAgICAgICByLnkgLT0gdGhpcy50cmFuc2Zvcm0uYW5jaG9yWTtcclxuICAgICAgICByZXR1cm4gcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOyekOyLoOqzvCDsnpDsi50g66qo65GQ66W8IO2PrO2VqO2VnCDqsr3qs4Qg7IKs6rCB7ZiV7J2EIOq1rO2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcmVhZG9ubHlcclxuICAgICAqIEBtZW1iZXJvZiBTcHJpdGVcclxuICAgICAqL1xyXG4gICAgZ2V0IGJvdW5kcygpIHtcclxuICAgICAgICBpZiAoIHRoaXMuY3VzdG9tQm91bmRzICkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdXN0b21Cb3VuZHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggIXRoaXMuXyQkYm91bmRzRGlydHkgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl8kJGJvdW5kcztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g7Jes6riwIOuKkOumrOuLpC4g64KY7KSR7JeQIOy1nOygge2ZlCDtlaAg6rKDXHJcbiAgICAgICAgLy8g7ZWY7JyEIOqwnOyytOqwgCDstpTqsIAv7IKt7KCc65CY6rGw64KYIOydtOuPme2VmOuptCDri6Tsi5wg6rOE7IKw7ZWY64+E66GdIO2VtOyVvCDtlZzri6QuXHJcbiAgICAgICAgLy8g64uk7IucIOqzhOyCsOydtCDtlYTsmpTtlZwg6rK97JqwIOyDgeychOuhnCDsoITtjIzsi5zsvJzspJjslbztlaAg6rKDIOqwmeydjFxyXG4gICAgICAgIGxldCBtYXRGcm9tID0gbTQuaWRlbnRpdHkoKTtcclxuICAgICAgICBsZXQgYm91bmRzID0gbmV3IFJlY3QoKTtcclxuICAgICAgICBsZXQgYm91bmRzUG9pbnRzID0gW107XHJcblxyXG4gICAgICAgIGNvbnN0IHNlYXJjaCA9ICggc3ByLG1hdCApPT57XHJcbiAgICAgICAgICAgIGlmICggIXNwci5fJCRib3VuZHNEaXJ0eSApIHtcclxuICAgICAgICAgICAgICAgIC8vIOyekOyLnSDsiqTtlITrnbzsnbTtirjqsIAg67CU64CQ6rKMIOyXhuycvOuptCDrs7TqtIDrkJwg7KCQ65Ok7J2EIOyCrOyaqe2VnOuLpC5cclxuICAgICAgICAgICAgICAgIGJvdW5kc1BvaW50cy5wdXNoKCAuLi4gc3ByLl8kJGJvdW5kc1BvaW50cyApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCBzcHIuc3ByaXRlVHlwZSAhPSAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFt4MSx5MSx4Mix5Mix4Myx5Myx4NCx5NF0gPSBzcHIubG9jYWxCb3VuZHMuZ2V0Q29ybmVyUG9pbnRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHgseTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgW3gseV0gPSBtNC50cmFuc2Zvcm1Qb2ludCggbWF0LFt4MSx5MSwwXSApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJvdW5kc1BvaW50cy5wdXNoKCB4LHkgKTtcclxuICAgICAgICAgICAgICAgICAgICBbeCx5XSA9IG00LnRyYW5zZm9ybVBvaW50KCBtYXQsW3gyLHkyLDBdICk7XHJcbiAgICAgICAgICAgICAgICAgICAgYm91bmRzUG9pbnRzLnB1c2goIHgseSApO1xyXG4gICAgICAgICAgICAgICAgICAgIFt4LHldID0gbTQudHJhbnNmb3JtUG9pbnQoIG1hdCxbeDMseTMsMF0gKTtcclxuICAgICAgICAgICAgICAgICAgICBib3VuZHNQb2ludHMucHVzaCggeCx5ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgW3gseV0gPSBtNC50cmFuc2Zvcm1Qb2ludCggbWF0LFt4NCx5NCwwXSApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJvdW5kc1BvaW50cy5wdXNoKCB4LHkgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvciAoIGxldCBjaGlsZCBvZiBzcHIuY2hpbGRyZW4gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGlsZC52aXNpYmxlICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2goIGNoaWxkLG00Lm11bHRpcGx5KCBtYXQsY2hpbGQudHJhbnNmb3JtLm1hdHJpeCApICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc2VhcmNoKCB0aGlzLG1hdEZyb20gKTtcclxuICAgICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBib3VuZHNQb2ludHMubGVuZ3RoOyBpICs9IDIgKSB7XHJcbiAgICAgICAgICAgIGJvdW5kcy5leHRlbmRQb2ludCggYm91bmRzUG9pbnRzW2ldLGJvdW5kc1BvaW50c1tpICsgMV0gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuXyQkYm91bmRzID0gYm91bmRzO1xyXG4gICAgICAgIHRoaXMuXyQkYm91bmRzRGlydHkgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl8kJGJvdW5kc1BvaW50cyA9IGJvdW5kc1BvaW50cztcclxuICAgICAgICByZXR1cm4gYm91bmRzOyAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGdldEJvdW5kcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ib3VuZHM7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlTG9jYWxCb3VuZHMoKSB7XHJcblxyXG4gICAgfSAgICBcclxuXHJcbiAgICBnZXQgdmlzaWJsZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fJCR2aXNpYmxlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCB2aXNpYmxlKCB2ICkge1xyXG4gICAgICAgIGlmICggIXRoaXMuXyQkdmlzaWJsZSAmJiB2ICkge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVDaGlsZHJlbiggU3ByaXRlLlVwZGF0ZUNvZGVzLlVQREFURV9DTEVBUl9QUkVWICk7IFxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl8kJHZpc2libGUgPSB2O1xyXG4gICAgfVxyXG5cclxuICAgIGlzVmlzaWJsZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52aXNpYmxlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFZpc2libGUoIHYgKSB7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlID0gdjtcclxuICAgIH1cclxuXHJcbiAgICBpc1Zpc2libGVEZWVwbHkoKSB7XHJcbiAgICAgICAgbGV0IHNwcjtcclxuXHJcbiAgICAgICAgZm9yICggc3ByID0gdGhpczsgc3ByICE9IG51bGwgJiYgIXNwci5pc1N0YWdlOyBzcHIgPSBzcHIucGFyZW50ICkge1xyXG4gICAgICAgICAgICBpZiAoICFzcHIudmlzaWJsZSApIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCBzcHIgPT0gbnVsbCApIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHJlZE11bHRpcGxpZXIoKSB7IHJldHVybiB0aGlzLmNvbG9yT3ZlcnJpZGVbMF07IH1cclxuXHJcbiAgICBzZXQgcmVkTXVsdGlwbGllciggdiApIHsgdGhpcy5jb2xvck92ZXJyaWRlWzBdID0gdjsgfVxyXG5cclxuICAgIGdldCBncmVlbk11bHRpcGxpZXIoKSB7IHJldHVybiB0aGlzLmNvbG9yT3ZlcnJpZGVbMV07IH1cclxuXHJcbiAgICBzZXQgZ3JlZW5NdWx0aXBsaWVyKCB2ICkgeyB0aGlzLmNvbG9yT3ZlcnJpZGVbMV0gPSB2OyB9XHJcblxyXG4gICAgZ2V0IGJsdWVNdWx0aXBsaWVyKCkgeyByZXR1cm4gdGhpcy5jb2xvck92ZXJyaWRlWzJdOyB9XHJcblxyXG4gICAgc2V0IGJsdWVNdWx0aXBsaWVyKCB2ICkgeyB0aGlzLmNvbG9yT3ZlcnJpZGVbMl0gPSB2OyB9XHJcblxyXG4gICAgZ2V0IGFscGhhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbG9yT3ZlcnJpZGVbM107XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGFscGhhKCB2ICkge1xyXG4gICAgICAgIHRoaXMuY29sb3JPdmVycmlkZVszXSA9IHY7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0QWxwaGEoIHYgKSB7XHJcbiAgICAgICAgdGhpcy5jb2xvck92ZXJyaWRlWzNdID0gdjtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBbHBoYSggdiApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb2xvck92ZXJyaWRlWzNdO1xyXG4gICAgfVxyXG5cclxuICAgIHNldENvbG9yTXVsdGlwbGllciggcixnLGIsYSApIHtcclxuICAgICAgICB0aGlzLmNvbG9yT3ZlcnJpZGVbMF0gPSByO1xyXG4gICAgICAgIHRoaXMuY29sb3JPdmVycmlkZVsxXSA9IGc7XHJcbiAgICAgICAgdGhpcy5jb2xvck92ZXJyaWRlWzJdID0gYjtcclxuICAgICAgICBpZiAoIGEgIT0gbnVsbCApIHRoaXMuY29sb3JPdmVycmlkZVszXSA9IGE7IFxyXG4gICAgfVxyXG5cclxuICAgIHNldE92ZXJyaWRlQ29sb3IoIGMsYSApIHtcclxuICAgICAgICBjb25zdCBhcnIgPSBVdGlscy5oZXgycmdiYSggYyxhICk7XHJcblxyXG4gICAgICAgIHRoaXMuY29sb3JPdmVycmlkZVswXSA9IGFyclswXTtcclxuICAgICAgICB0aGlzLmNvbG9yT3ZlcnJpZGVbMV0gPSBhcnJbMV07XHJcbiAgICAgICAgdGhpcy5jb2xvck92ZXJyaWRlWzJdID0gYXJyWzJdO1xyXG4gICAgICAgIGlmICggYSAhPSBudWxsICkgdGhpcy5jb2xvck92ZXJyaWRlWzNdID0gYXJyWzNdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB3aWR0aCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ib3VuZHMud2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHdpZHRoKCB2ICkge1xyXG4gICAgICAgIHRoaXMuY3VzdG9tQm91bmRzID0gdGhpcy5jdXN0b21Cb3VuZHMgfHwgdGhpcy5ib3VuZHM7XHJcbiAgICAgICAgdGhpcy5jdXN0b21Cb3VuZHMud2lkdGggPSB2O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBoZWlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYm91bmRzLmhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgaGVpZ2h0KCB2ICkge1xyXG4gICAgICAgIHRoaXMuY3VzdG9tQm91bmRzID0gdGhpcy5jdXN0b21Cb3VuZHMgfHwgdGhpcy5ib3VuZHM7XHJcbiAgICAgICAgdGhpcy5jdXN0b21Cb3VuZHMuaGVpZ2h0ID0gdjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRDdXN0b21Cb3VuZHMoIHgseSx3LGggKSB7XHJcbiAgICAgICAgdGhpcy5jdXN0b21Cb3VuZHMueCA9IHg7XHJcbiAgICAgICAgdGhpcy5jdXN0b21Cb3VuZHMueSA9IHk7XHJcbiAgICAgICAgdGhpcy5jdXN0b21Cb3VuZHMud2lkdGggPSB3O1xyXG4gICAgICAgIHRoaXMuY3VzdG9tQm91bmRzLmhlaWdodCA9IGg7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGdldFdpZHRoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndpZHRoO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEhlaWdodCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgbG9jYWxUb0dsb2JhbCggeCx5ICkge1xyXG4gICAgICAgIGxldCBtYXRBcnIgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yICggbGV0IHNwciA9IHRoaXM7IDsgc3ByID0gc3ByLnBhcmVudCApIHtcclxuICAgICAgICAgICAgbWF0QXJyLnVuc2hpZnQoIHNwci50cmFuc2Zvcm0ubWF0cml4ICk7XHJcbiAgICAgICAgICAgIGlmICggc3ByLnBhcmVudCA9PSBudWxsICkgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBtYXQgPSBtNC5pZGVudGl0eSgpO1xyXG5cclxuICAgICAgICBtYXRBcnIuZm9yRWFjaCggdj0+e1xyXG4gICAgICAgICAgICBtNC5tdWx0aXBseSggbWF0LHYsbWF0ICk7XHJcbiAgICAgICAgfSApO1xyXG4gICAgICAgIGxldCBwID0gbTQudHJhbnNmb3JtUG9pbnQoIG1hdCxbeCx5LDBdICk7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgUG9pbnQoIHBbMF0scFsxXSApO1xyXG4gICAgfVxyXG5cclxuICAgIGdsb2JhbFRvTG9jYWwoIHgseSApIHtcclxuICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICBpZiAoIHRoaXMucGFyZW50ID09IG51bGwgfHwgdGhpcy5pc1N0YWdlICkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBvaW50KCB4LHkgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g7KeA64KcIO2UhOugiOyehOyXkCDqtaztlbTrhpPsnYAgd29ybGRNYXRyaXjrpbwg7IKs7Jqp7ZWY66m0IOu5oOultOqyjCDtlaAg7IiYIOyeiOuLpC5cclxuICAgICAgICAvLyDsp4DquIjsnYAg6re464OlIOuRlOuLpFxyXG4gICAgICAgIGxldCBtYXRBcnIgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yICggbGV0IHNwciA9IHRoaXM7IDsgc3ByID0gc3ByLnBhcmVudCApIHtcclxuICAgICAgICAgICAgbWF0QXJyLnB1c2goIG00LmludmVyc2UoIHNwci50cmFuc2Zvcm0ubWF0cml4ICkgKTtcclxuICAgICAgICAgICAgaWYgKCBzcHIucGFyZW50ID09IG51bGwgKSBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IG1hdCA9IG00LmlkZW50aXR5KCk7XHJcblxyXG4gICAgICAgIG1hdEFyci5mb3JFYWNoKCB2PT57XHJcbiAgICAgICAgICAgIG00Lm11bHRpcGx5KCBtYXQsdixtYXQgKTtcclxuICAgICAgICB9ICk7XHJcbiAgICAgICAgbGV0IHAgPSBtNC50cmFuc2Zvcm1Qb2ludCggbWF0LFt4LHksMF0gKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQb2ludCggcFswXSxwWzFdICk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0QmxlbmRNb2RlKCB2ICkge1xyXG4gICAgICAgIHRoaXMuYmxlbmRNb2RlID0gdjsgICAgICAgIFxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyNyZWdpb24gYWRkQ2hpbGQgJiByZW1vdmVDaGlsZFxyXG5cclxuICAgIF91cGRhdGVDaGlsZHJlbiggdXBkYXRlQ29kZVRvT04gKSB7XHJcbiAgICAgICAgZm9yICggY29uc3QgcyBvZiB0aGlzLnNlYXJjaENoaWxkcmVuKCkgKSB7XHJcbiAgICAgICAgICAgIHMudXBkYXRlQ29kZSB8PSB1cGRhdGVDb2RlVG9PTjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3ByaXRlfSBzcHJcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gaVxyXG4gICAgICogQG1lbWJlcm9mIFNwcml0ZVxyXG4gICAgICovXHJcbiAgICBhZGRDaGlsZEF0KCBzcHIsIGkgKSB7XHJcbiAgICAgICAgaWYgKCBpID09IG51bGwgKSB7XHJcbiAgICAgICAgICAgIGkgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb2xkSW5kZXggPSB0aGlzLmNoaWxkcmVuLmluZGV4T2YoIHNwciApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB0aGlzLmNoaWxkcmVuLnNwbGljZSggaSwwLCBzcHIgKTtcclxuICAgICAgICBpZiAoIG9sZEluZGV4ID49IDAgKSB7XHJcbiAgICAgICAgICAgIC8vIOybkOuemCDsnojrjZgg6rK97JqwIOychOy5mCDsnbTrj5lcclxuICAgICAgICAgICAgaWYgKCBvbGRJbmRleCA+IGkgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoaWxkcmVuLnNwbGljZSggb2xkSW5kZXggKyAxLDEgKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICggb2xkSW5kZXggPCBpICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGlsZHJlbi5zcGxpY2UoIG9sZEluZGV4LDEgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBzcHIucGFyZW50ID0gdGhpcztcclxuICAgICAgICBpZiAoIHRoaXMuaXNPblN0YWdlKCkgKSB7XHJcbiAgICAgICAgICAgIHNwci5fdXBkYXRlQ2hpbGRyZW4oIFNwcml0ZS5VcGRhdGVDb2Rlcy5VUERBVEVfQ0xFQVJfUFJFViApOyBcclxuICAgICAgICAgICAgc3ByLmRpc3BhdGNoRXZlbnRXaXRoQ2hpbGRyZW4oIG5ldyBFdmVudCggRXZlbnQuQURERURfVE9fU1RBR0UgKSApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9uSW52YWxpZGF0ZVRyYW5zZm9ybSgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHsuLi5TcHJpdGV9IHNwcnNcclxuICAgICAqIEBtZW1iZXJvZiBTcHJpdGVcclxuICAgICAqL1xyXG4gICAgYWRkQ2hpbGQoIC4uLnNwcnMgKSB7XHJcbiAgICAgICAgZm9yICggY29uc3Qgc3ByIG9mIHNwcnMgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ2hpbGRBdCggc3ByICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZW1vdmVDaGlsZEF0KCBpICkge1xyXG4gICAgICAgIGNvbnN0IGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXTtcclxuXHJcbiAgICAgICAgY2hpbGQucGFyZW50ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuLnNwbGljZSggaSwxICk7XHJcbiAgICAgICAgaWYgKCB0aGlzLmlzT25TdGFnZSgpICkge1xyXG4gICAgICAgICAgICBjaGlsZC5kaXNwYXRjaEV2ZW50V2l0aENoaWxkcmVuKCBuZXcgRXZlbnQoIEV2ZW50LlJFTU9WRURfRlJPTV9TVEFHRSApICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub25JbnZhbGlkYXRlVHJhbnNmb3JtKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3ByaXRlfSBzcHJcclxuICAgICAqIEBtZW1iZXJvZiBTcHJpdGVcclxuICAgICAqL1xyXG4gICAgcmVtb3ZlQ2hpbGQoIHNwciApIHtcclxuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmNoaWxkcmVuLmluZGV4T2YoIHNwciApO1xyXG5cclxuICAgICAgICBpZiAoIGluZGV4ICE9IC0xICkgdGhpcy5yZW1vdmVDaGlsZEF0KCBpbmRleCApO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZUZyb21QYXJlbnQoKSB7XHJcbiAgICAgICAgaWYgKCB0aGlzLnBhcmVudCApIHtcclxuICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVtb3ZlQ2hpbGQoIHRoaXMgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXJDaGlsZHJlbigpIHtcclxuICAgICAgICBmb3IgKCBsZXQgaSA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0gKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2hpbGRBdCggaSApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRDaGlsZEluZGV4KCBzcHIgKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW4uaW5kZXhPZiggc3ByICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2hpbGRBdCggaSApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbltpXTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBnZXRTdGFnZSgpIHtcclxuICAgICAgICBsZXQgc3ByO1xyXG5cclxuICAgICAgICBmb3IgKCBzcHIgPSB0aGlzOyBzcHIgIT0gbnVsbCAmJiAhc3ByLmlzU3RhZ2U7IHNwciA9IHNwci5wYXJlbnQgKTtcclxuICAgICAgICByZXR1cm4gc3ByO1xyXG4gICAgfVxyXG5cclxuICAgIGlzT25TdGFnZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRTdGFnZSgpICE9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RXZlbnR8c3RyaW5nfSBldmVudE9yTmFtZVxyXG4gICAgICogQHBhcmFtIHtvYmplY3Q9fSBleHRlbmRlZFZhbHVlc1xyXG4gICAgICogQG1lbWJlcm9mIFNwcml0ZVxyXG4gICAgICovXHJcbiAgICBkaXNwYXRjaEV2ZW50V2l0aENoaWxkcmVuKCBldmVudE9yTmFtZSxleHRlbmRlZFZhbHVlcyApIHtcclxuICAgICAgICBsZXQgZXZlbnQ7XHJcblxyXG4gICAgICAgIGlmICggdHlwZW9mIGV2ZW50T3JOYW1lID09IFwic3RyaW5nXCIgKSB7XHJcbiAgICAgICAgICAgIGV2ZW50ID0gbmV3IEV2ZW50KCBldmVudE9yTmFtZSApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGV2ZW50ID0gZXZlbnRPck5hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIE9iamVjdC5hc3NpZ24oIGV2ZW50LGV4dGVuZGVkVmFsdWVzICk7XHJcbiAgICAgICAgLy8gY29uc3QgaW5wdXRPbmx5ID0gRXZlbnQuaXNJbnB1dEV2ZW50KCBldmVudC5uYW1lICk7XHJcblxyXG4gICAgICAgIGZvciAoIGNvbnN0IHNwciBvZiB0aGlzLnNlYXJjaENoaWxkcmVuKCB0cnVlICkgKSB7XHJcbiAgICAgICAgICAgIGlmICggZXZlbnQuc3RvcHBlZCApIHJldHVybjtcclxuICAgICAgICAgICAgc3ByLmRpc3BhdGNoRXZlbnQoIGV2ZW50ICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtib3R0b21VcD1mYWxzZV1cclxuICAgICAqL1xyXG4gICAgKnNlYXJjaENoaWxkcmVuKCBib3R0b21VcCApIHtcclxuICAgICAgICB5aWVsZCogU3ByaXRlLnNlYXJjaENoaWxkcmVuKCB0aGlzLCBib3R0b21VcCApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAcGFyYW0ge1Nwcml0ZX0gc3RhcnRPYmpcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2JvdHRvbVVwPWZhbHNlXVxyXG4gICAgICogQG1lbWJlcm9mIFNwcml0ZVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgKnNlYXJjaENoaWxkcmVuKCBzdGFydE9iaiwgYm90dG9tVXAgPSBmYWxzZSApIHtcclxuICAgICAgICBjb25zdCBzZWFyY2hSZWN1cnNpdmUgPSBmdW5jdGlvbiogKCBjdXIgKSB7XHJcbiAgICAgICAgICAgIGlmICggYm90dG9tVXAgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIGN1ci5jaGlsZHJlbi5sZW5ndGggPiAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIGxldCBpID0gY3VyLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZCA9IGN1ci5jaGlsZHJlbltpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQgKSB5aWVsZCogc2VhcmNoUmVjdXJzaXZlKCBjaGlsZCApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHlpZWxkIGN1cjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHlpZWxkIGN1cjtcclxuICAgICAgICAgICAgICAgIGlmICggY3VyLmNoaWxkcmVuLmxlbmd0aCA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgY3VyLmNoaWxkcmVuLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZCA9IGN1ci5jaGlsZHJlbltpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggY2hpbGQgKSB5aWVsZCogc2VhcmNoUmVjdXJzaXZlKCBjaGlsZCApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHlpZWxkKiBzZWFyY2hSZWN1cnNpdmUoIHN0YXJ0T2JqICk7XHJcbiAgICB9XHJcblxyXG4gICAgZmluZENoaWxkQnlJZCggaWQgKSB7XHJcbiAgICAgICAgZm9yICggbGV0IHNwciBvZiB0aGlzLnNlYXJjaENoaWxkcmVuKCApICkge1xyXG4gICAgICAgICAgICBpZiAoIHNwci5pZCA9PSBpZCApIHJldHVybiBzcHI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBnZXROdW1DaGlsZHJlbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtTcHJpdGV9XHJcbiAgICAgKiBAbWVtYmVyb2YgU3ByaXRlXHJcbiAgICAgKi9cclxuICAgIGdldFBhcmVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3ByaXRlfSBzcHJcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICogQG1lbWJlcm9mIFNwcml0ZVxyXG4gICAgICovXHJcbiAgICBjb250YWlucyggc3ByICkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLmluY2x1ZGVzKCBzcHIgKTtcclxuICAgIH1cclxuXHJcbiAgICBoaXRUZXN0UG9pbnQoIHgsIHkgKSB7XHJcbiAgICAgICAgY29uc3QgcCA9IHRoaXMuZ2xvYmFsVG9Mb2NhbCggeCx5ICk7XHJcbiAgICAgICAgY29uc3QgcmVjdCA9IHRoaXMuYm91bmRzO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVjdC5jb250YWlucyggcC54LHAueSApO1xyXG4gICAgfVxyXG5cclxuICAgIHNldENsaXAoIHgseSx3aWR0aCxoZWlnaHQgKSB7XHJcbiAgICAgICAgdGhpcy5jbGlwUmVnaW9uID0gbmV3IFJlY3QoIHgseSx3aWR0aCxoZWlnaHQgKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRTaGFkZXIoIHNoYWRlciApIHtcclxuICAgICAgICB0aGlzLnNoYWRlciA9IHNoYWRlcjtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTaGFkZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hhZGVyO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyNyZWdpb24gc2V0SW50ZXJhY3RpdmUoKSBcclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2FsbGJhY2sgQW5pbWF0aW9uSGFuZGxlclxyXG4gICAgICogQHBhcmFtIHt7eDpudW1iZXIseTpudW1iZXIsYnV0dG9uOiosdGFyZ2V0OlNwcml0ZX19IGV2ZW50XHJcbiAgICAgKiBAcGFyYW0ge3tkb3duUG9pbnRlclBvc2l0aW9uOlBvaW50LGRvd25UaGlzUG9zaXRpb246UG9pbnQsZG93bk9mZnNldDpQb2ludCxkb3duQnV0dG9uOioscHVzaGVkOmJvb2xlYW4sY2xpY2tDYW5jbGVkOmJvb2xlYW4sc3RhdGU6c3RyaW5nLG1vdmVEZWx0YVBvc2l0aW9uOlBvaW50LG1vdmVUaGlzUG9zaXRpb246UG9pbnR9fSBpbmZvXHJcbiAgICAgKiBAcmV0dXJuIHtUd2Vlbn1cclxuICAgICAqL1xyXG4gICAgLyoqXHJcbiAgICAgKiBAY2FsbGJhY2sgSW50ZXJhY3RpdmVIYW5kbGVyXHJcbiAgICAgKiBAcGFyYW0ge3t4Om51bWJlcix5Om51bWJlcixidXR0b246Kix0YXJnZXQ6U3ByaXRlfX0gZXZlbnRcclxuICAgICAqIEBwYXJhbSB7e2Rvd25Qb2ludGVyUG9zaXRpb246UG9pbnQsZG93blRoaXNQb3NpdGlvbjpQb2ludCxkb3duT2Zmc2V0OlBvaW50LGRvd25CdXR0b246KixwdXNoZWQ6Ym9vbGVhbixjbGlja0NhbmNsZWQ6Ym9vbGVhbixzdGF0ZTpzdHJpbmcsbW92ZURlbHRhUG9zaXRpb246UG9pbnQsbW92ZVRoaXNQb3NpdGlvbjpQb2ludH19IGluZm9cclxuICAgICAqL1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnNcclxuICAgICAqIEBwYXJhbSB7QW5pbWF0aW9uSGFuZGxlcj19IG9wdGlvbnMucHJlc3NBbmltYXRpb24gLSDriIzrn6zsp4DripQg7JWg64uI66mU7J207IWY7J2EIO2LgOq4sC4gdHdlZW7rpbwg66as7YS07ZW07JW87ZWc64ukLlxyXG4gICAgICogQHBhcmFtIHtBbmltYXRpb25IYW5kbGVyPX0gb3B0aW9ucy5yZWxlYXNlQW5pbWF0aW9uIC0g7Jis65287Jik64qUIOyVoOuLiOuplOydtOyFmOydhCDti4DquLAuIHR3ZWVu7J2EIOumrO2EtO2VtOyVvO2VnOuLpC5cclxuICAgICAqIEBwYXJhbSB7SW50ZXJhY3RpdmVIYW5kbGVyPX0gb3B0aW9ucy5kb3duIC0g7JiB7Jet7JWI7JeQ7IScIGRvd27tlZwg6rK97JqwXHJcbiAgICAgKiBAcGFyYW0ge0ludGVyYWN0aXZlSGFuZGxlcj19IG9wdGlvbnMubW92ZSAtIGRvd24g7ZuEIG1vdmXtlaAg6rK97JqwXHJcbiAgICAgKiBAcGFyYW0ge0ludGVyYWN0aXZlSGFuZGxlcj19IG9wdGlvbnMudXAgLSBkb3duIO2bhCB1cO2VoCDqsr3smrBcclxuICAgICAqIEBwYXJhbSB7SW50ZXJhY3RpdmVIYW5kbGVyPX0gb3B0aW9ucy5jbGljayAtIGRvd27sl5DshJwg66mA66asIOuWqOyWtOyngOyngCDslYrsnYAg7JyE7LmY7JeQ7IScIHVwXHJcbiAgICAgKiBAcGFyYW0ge0ludGVyYWN0aXZlSGFuZGxlcj19IG9wdGlvbnMucHJlc3MgLSBkb3duIO2bhCB1cO2VoCDrlYwg7JiB7JetIOyViFxyXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0aW9ucy5wcmV2ZW50UmVsZWFzZSAtIGNsaWNr7J2064KYIHByZXNz7JeQ7IScIHJlbGVhc2VBbmltYXRpb27tlZjsp4Ag7JWK64+E66GdXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRpb25zLmRpc2FibGVCYXNpY0FuaW1hdGlvbiAtIOq4sOuzuCDslaDri4jrqZTsnbTshZgg64GE6riwXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG9wdGlvbnMucHJlc3NPZmZzZXRZIC0g6riw67O4IHByZXNzQW5pbWF0aW9u7JeQ7IScIOyWvOuniOuCmCDslYTrnpjroZwg64K066Ck6rCA64qU6rCAXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG9wdGlvbnMuY2xpY2tSYWRpdXMgLSBjbGlja+ycvOuhnCDtjJDsoJXtlZjripQg67CY7KeA66aEXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRpb25zLmRyYWdYIC0g6rCA66Gc7LaV7Jy866GcIOuTnOuemOq3uFxyXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0aW9ucy5kcmFnWSAtIOyEuOuhnOy2leycvOuhnCDrk5zrnpjqt7hcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0aW9ucy5kcmFnUmVsZWFzZURpc3RhbmNlIC0g7J20IOqxsOumrOulvCDrspfslrTrgpjrqbQgZHJhZ+qwgCDst6jshozrkJzri6QuXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRpb25zLmFsbG93RHJhZ091dHNpZGUgLSDtmZTrqbQg67CW7Jy866GcIOuquyDrgYzqs6Ag64KY6rCA64+E66GdIO2VnOuLpFxyXG4gICAgICogQG1lbWJlcm9mIFNwcml0ZVxyXG4gICAgICovXHJcbiAgICBzZXRJbnRlcmFjdGl2ZSggb3B0aW9ucyA9IG51bGwgKSB7XHJcbiAgICAgICAgdGhpcy5fX2ludGVyYWN0aXZlID0gdGhpcy5fX2ludGVyYWN0aXZlIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IF9pID0gdGhpcy5fX2ludGVyYWN0aXZlO1xyXG4gICAgICAgIGNvbnN0IGNsaWNrQ2FuY2VsRGlzdGFuY2UgPSAoIG9wdGlvbnMgJiYgb3B0aW9ucy5jbGlja1JhZGl1cyAhPSBudWxsICkgPyBvcHRpb25zLmNsaWNrUmFkaXVzIDogMTA7XHJcbiAgICAgICAgY29uc3QgZGVmYXVsdFByZXNzT2Zmc2V0WSA9IDM7Ly8g7Iuk7KCcIO2UveyFgOq4sOykgOycvOuhnCDtlbTslbztlahcclxuICAgICAgICBjb25zdCBwb2ludGVyRG93biA9ICggZSApID0+IHtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLmhpdFRlc3RQb2ludCggZS54LCBlLnkgKSApIHtcclxuICAgICAgICAgICAgICAgIF9pLmRvd25Qb2ludGVyUG9zaXRpb24gPSBuZXcgUG9pbnQoIGUueCwgZS55ICk7XHJcbiAgICAgICAgICAgICAgICBfaS5kb3duVGhpc1Bvc2l0aW9uID0gdGhpcy5nZXRQb3NpdGlvbigpLmNsb25lKCk7XHJcbiAgICAgICAgICAgICAgICBfaS5kb3duT2Zmc2V0ID0gbmV3IFBvaW50KCBlLnggLSB0aGlzLngsIGUueSAtIHRoaXMueSApO1xyXG4gICAgICAgICAgICAgICAgX2kuZG93bkJ1dHRvbiA9IGUuYnV0dG9uO1xyXG4gICAgICAgICAgICAgICAgX2kucHVzaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIF9pLmNsaWNrQ2FuY2VsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIF9pLnN0YXRlID0gXCJkb3duXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAoICFvcHRpb25zLmRpc2FibGVCYXNpY0FuaW1hdGlvbiApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIF9pLnR3ZWVuICkgX2kudHdlZW4uc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9pLnR3ZWVuID0gdGhpcy5tb3ZlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaS5kb3duVGhpc1Bvc2l0aW9uLngsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pLmRvd25UaGlzUG9zaXRpb24ueSArICggb3B0aW9ucy5wcmVzc09mZnNldFkgIT0gbnVsbCA/IG9wdGlvbnMucHJlc3NPZmZzZXRZIDogZGVmYXVsdFByZXNzT2Zmc2V0WSApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAzMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZy5vdXRCYWNrICk7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIG9wdGlvbnMucHJlc3NBbmltYXRpb24gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBfaS50d2VlbiApIF9pLnR3ZWVuLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfaS50d2VlbiA9IG9wdGlvbnMucHJlc3NBbmltYXRpb24uY2FsbCggdGhpcywgZSwgX2kgKTtcclxuICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCBvcHRpb25zLmRvd24gIT0gbnVsbCApIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRvd24uY2FsbCggdGhpcywgZSwgX2kgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgcG9pbnRlck1vdmUgPSAoIGUgKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICggX2kuc3RhdGUgPT0gXCJkb3duXCIgfHwgX2kuc3RhdGUgPT0gXCJtb3ZlXCIgKSB7XHJcbiAgICAgICAgICAgICAgICBfaS5zdGF0ZSA9IFwibW92ZVwiO1xyXG4gICAgICAgICAgICAgICAgX2kubW92ZURlbHRhUG9zaXRpb24gPSBuZXcgUG9pbnQoIGUueCAtIF9pLmRvd25Qb2ludGVyUG9zaXRpb24ueCAsIGUueSAtIF9pLmRvd25Qb2ludGVyUG9zaXRpb24ueSApO1xyXG4gICAgICAgICAgICAgICAgX2kubW92ZVRoaXNQb3NpdGlvbiA9IG5ldyBQb2ludChcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRyYWdYID8gX2kuZG93blRoaXNQb3NpdGlvbi54ICsgX2kubW92ZURlbHRhUG9zaXRpb24ueCA6IF9pLmRvd25UaGlzUG9zaXRpb24ueCxcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRyYWdZID8gX2kuZG93blRoaXNQb3NpdGlvbi55ICsgX2kubW92ZURlbHRhUG9zaXRpb24ueSA6IF9pLmRvd25UaGlzUG9zaXRpb24ueSxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBpZiAoICFvcHRpb25zLmFsbG93RHJhZ091dHNpZGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2kubW92ZVRoaXNQb3NpdGlvbi54ID0gVXRpbHMuY2xhbXAoIF9pLm1vdmVUaGlzUG9zaXRpb24ueCwgYXBwbGljYXRpb24ubG9naWNhbFJlbmRlckJvdW5kcy5sZWZ0IC0gX2kuZG93bk9mZnNldC54LCBhcHBsaWNhdGlvbi5sb2dpY2FsUmVuZGVyQm91bmRzLnJpZ2h0IC0gX2kuZG93bk9mZnNldC54ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2kubW92ZVRoaXNQb3NpdGlvbi55ID0gVXRpbHMuY2xhbXAoIF9pLm1vdmVUaGlzUG9zaXRpb24ueSwgYXBwbGljYXRpb24ubG9naWNhbFJlbmRlckJvdW5kcy50b3AgLSBfaS5kb3duT2Zmc2V0LnksIGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMuYm90dG9tIC0gX2kuZG93bk9mZnNldC55ICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIG9wdGlvbnMuZHJhZ1ggfHwgb3B0aW9ucy5kcmFnWSApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIF9pLnR3ZWVuICkgX2kudHdlZW4uY2FuY2VsKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIG9wdGlvbnMuZHJhZ1ggKSB0aGlzLnggPSBfaS5tb3ZlVGhpc1Bvc2l0aW9uLng7XHJcbiAgICAgICAgICAgICAgICBpZiAoIG9wdGlvbnMuZHJhZ1kgKSB0aGlzLnkgPSBfaS5tb3ZlVGhpc1Bvc2l0aW9uLnk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIF9pLmNsaWNrQ2FuY2VsZWQgPT0gZmFsc2UgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBNYXRoLnNxcnQoIF9pLm1vdmVEZWx0YVBvc2l0aW9uLnggKiogMiArIF9pLm1vdmVEZWx0YVBvc2l0aW9uLnkgKiogMiApID4gY2xpY2tDYW5jZWxEaXN0YW5jZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2kuY2xpY2tDYW5jZWxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGlmICggb3B0aW9ucy5tb3ZlICE9IG51bGwgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5tb3ZlLmNhbGwoIHRoaXMsZSwgX2kgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICggX2kucHVzaGVkICYmICF0aGlzLmhpdFRlc3RQb2ludCggZS54LCBlLnkgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICBfaS5wdXNoZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoICFvcHRpb25zLmRpc2FibGVCYXNpY0FuaW1hdGlvbiApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBfaS50d2VlbiApIF9pLnR3ZWVuLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2kudHdlZW4gPSB0aGlzLm1vdmUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaS5tb3ZlVGhpc1Bvc2l0aW9uLngsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaS5tb3ZlVGhpc1Bvc2l0aW9uLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAyMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmcub3V0Q3ViaWMgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBvcHRpb25zLnJlbGVhc2VBbmltYXRpb24gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggX2kudHdlZW4gKSBfaS50d2Vlbi5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pLnR3ZWVuID0gb3B0aW9ucy5yZWxlYXNlQW5pbWF0aW9uLmNhbGwoIHRoaXMsIGUsIF9pICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggIV9pLnB1c2hlZCAmJiB0aGlzLmhpdFRlc3RQb2ludCggZS54LCBlLnkgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICBfaS5wdXNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggIW9wdGlvbnMuZGlzYWJsZUJhc2ljQW5pbWF0aW9uICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIF9pLnR3ZWVuICkgX2kudHdlZW4uc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaS50d2VlbiA9IHRoaXMubW92ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pLm1vdmVUaGlzUG9zaXRpb24ueCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pLm1vdmVUaGlzUG9zaXRpb24ueSArICggb3B0aW9ucy5wcmVzc09mZnNldFkgIT0gbnVsbCA/IG9wdGlvbnMucHJlc3NPZmZzZXRZIDogZGVmYXVsdFByZXNzT2Zmc2V0WSApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nLm91dEN1YmljICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggb3B0aW9ucy5wcmVzc0FuaW1hdGlvbiApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBfaS50d2VlbiApIF9pLnR3ZWVuLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2kudHdlZW4gPSBvcHRpb25zLnByZXNzQW5pbWF0aW9uLmNhbGwoIHRoaXMsIGUsIF9pICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBwb2ludGVyVXAgPSAoIGUgKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICggX2kuc3RhdGUgPT0gXCJkb3duXCIgfHwgX2kuc3RhdGUgPT0gXCJtb3ZlXCIgKSB7XHJcbiAgICAgICAgICAgICAgICBfaS5zdGF0ZSA9IFwidXBcIjtcclxuICAgICAgICAgICAgICAgIF9pLm1vdmVEZWx0YVBvc2l0aW9uID0gbmV3IFBvaW50KCBlLnggLSBfaS5kb3duUG9pbnRlclBvc2l0aW9uLnggLCBlLnkgLSBfaS5kb3duUG9pbnRlclBvc2l0aW9uLnkgKTtcclxuICAgICAgICAgICAgICAgIF9pLm1vdmVUaGlzUG9zaXRpb24gPSBuZXcgUG9pbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kcmFnWCA/IF9pLmRvd25UaGlzUG9zaXRpb24ueCArIF9pLm1vdmVEZWx0YVBvc2l0aW9uLnggOiBfaS5kb3duVGhpc1Bvc2l0aW9uLngsXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kcmFnWSA/IF9pLmRvd25UaGlzUG9zaXRpb24ueSArIF9pLm1vdmVEZWx0YVBvc2l0aW9uLnkgOiBfaS5kb3duVGhpc1Bvc2l0aW9uLnksXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgaWYgKCBvcHRpb25zLmRyYWdYICkgdGhpcy54ID0gX2kubW92ZVRoaXNQb3NpdGlvbi54O1xyXG4gICAgICAgICAgICAgICAgaWYgKCBvcHRpb25zLmRyYWdZICkgdGhpcy55ID0gX2kubW92ZVRoaXNQb3NpdGlvbi55O1xyXG4gICAgICAgICAgICAgICAgaWYgKCAhb3B0aW9ucy5hbGxvd0RyYWdPdXRzaWRlICkge1xyXG4gICAgICAgICAgICAgICAgICAgIF9pLm1vdmVUaGlzUG9zaXRpb24ueCA9IFV0aWxzLmNsYW1wKCBfaS5tb3ZlVGhpc1Bvc2l0aW9uLngsIGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMubGVmdCAtIF9pLmRvd25PZmZzZXQueCwgYXBwbGljYXRpb24ubG9naWNhbFJlbmRlckJvdW5kcy5yaWdodCAtIF9pLmRvd25PZmZzZXQueCApO1xyXG4gICAgICAgICAgICAgICAgICAgIF9pLm1vdmVUaGlzUG9zaXRpb24ueSA9IFV0aWxzLmNsYW1wKCBfaS5tb3ZlVGhpc1Bvc2l0aW9uLnksIGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMudG9wIC0gX2kuZG93bk9mZnNldC55LCBhcHBsaWNhdGlvbi5sb2dpY2FsUmVuZGVyQm91bmRzLmJvdHRvbSAtIF9pLmRvd25PZmZzZXQueSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCBfaS5jbGlja0NhbmNlbGVkID09IGZhbHNlICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggTWF0aC5zcXJ0KCBfaS5tb3ZlRGVsdGFQb3NpdGlvbi54ICoqIDIgKyBfaS5tb3ZlRGVsdGFQb3NpdGlvbi55ICoqIDIgKSA8IGNsaWNrQ2FuY2VsRGlzdGFuY2UgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggb3B0aW9ucy5jbGljayAhPSBudWxsICkgb3B0aW9ucy5jbGljay5jYWxsKCB0aGlzLCBlLCBfaSApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICggdGhpcy5oaXRUZXN0UG9pbnQoIGUueCwgZS55ICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2kucHVzaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIG9wdGlvbnMucHJlc3MgIT0gbnVsbCApIG9wdGlvbnMucHJlc3MuY2FsbCggdGhpcyxlLCBfaSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCAhb3B0aW9ucy5wcmV2ZW50UmVsZWFzZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoICFvcHRpb25zLmRpc2FibGVCYXNpY0FuaW1hdGlvbiApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBfaS50d2VlbiApIF9pLnR3ZWVuLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2kudHdlZW4gPSB0aGlzLm1vdmUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaS5tb3ZlVGhpc1Bvc2l0aW9uLngsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaS5tb3ZlVGhpc1Bvc2l0aW9uLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAzMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmcub3V0Qm91bmNlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggb3B0aW9ucy5yZWxlYXNlQW5pbWF0aW9uICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIF9pLnR3ZWVuICkgX2kudHdlZW4uc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaS50d2VlbiA9IG9wdGlvbnMucmVsZWFzZUFuaW1hdGlvbi5jYWxsKCB0aGlzLCBlLCBfaSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICggb3B0aW9ucy51cCAhPSBudWxsICkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudXAuY2FsbCggdGhpcywgZSwgX2kgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmICggb3B0aW9ucyAhPSBudWxsICkge1xyXG4gICAgICAgICAgICB0aGlzLm9uKCBFdmVudC5QT0lOVEVSX0RPV04sIHBvaW50ZXJEb3duICk7XHJcbiAgICAgICAgICAgIHRoaXMub24oIEV2ZW50LlBPSU5URVJfTU9WRSwgcG9pbnRlck1vdmUgKTtcclxuICAgICAgICAgICAgdGhpcy5vbiggRXZlbnQuUE9JTlRFUl9VUCwgcG9pbnRlclVwICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCBFdmVudC5QT0lOVEVSX0RPV04sIHBvaW50ZXJEb3duICk7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lciggRXZlbnQuUE9JTlRFUl9NT1ZFLCBwb2ludGVyTW92ZSApO1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoIEV2ZW50LlBPSU5URVJfVVAsIHBvaW50ZXJVcCApO1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fX2ludGVyYWN0aXZlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyNlbmRyZWdpb24gICAgXHJcblxyXG5cclxuICAgIGVuY29kZVJlbmRlcmluZ0luZm8oKSB7XHJcbiAgICAgICAgLy8gaWQoMSksdHlwZSgxKSx1cGRhdGVDb2RlKDEpLGNvbG9yT3ZlcnJpZGUoNCksY29sb3JBZGQoNCksYW5jaG9yKDIpLHNoYWRlcklkKDEpLG1hdHJpeCgxNiksY2xpcFJlZ2lvbig0KVxyXG4gICAgICAgIGNvbnN0IGVuY29kZWRCdWZmZXIgPSBuZXcgRmxvYXQzMkFycmF5KCAzOCApO1xyXG5cclxuICAgICAgICAvLyBlbmNvZGVkQnVmZmVyWzBdID0gdGhpcy5pZDtcclxuICAgICAgICAvLyBlbmNvZGVkQnVmZmVyWzFdID0gdGhpcy5zcHJpdGVUeXBlO1xyXG4gICAgICAgIC8vIGVuY29kZWRCdWZmZXJbMl0gPSB0aGlzLnVwZGF0ZUNvZGU7IFxyXG4gICAgICAgIC8vIC8vIGVuY29kZWRCdWZmZXIuc2V0KCB0aGlzLmNvbG9yT3ZlcnJpZGUsMyApO1xyXG4gICAgICAgIC8vIGVuY29kZWRCdWZmZXJbM10gPSB0aGlzLmNvbG9yT3ZlcnJpZGVbMF07XHJcbiAgICAgICAgLy8gZW5jb2RlZEJ1ZmZlcls0XSA9IHRoaXMuY29sb3JPdmVycmlkZVsxXTtcclxuICAgICAgICAvLyBlbmNvZGVkQnVmZmVyWzVdID0gdGhpcy5jb2xvck92ZXJyaWRlWzJdO1xyXG4gICAgICAgIC8vIGVuY29kZWRCdWZmZXJbNl0gPSB0aGlzLmNvbG9yT3ZlcnJpZGVbM107XHJcbiAgICAgICAgLy8gLy8gZW5jb2RlZEJ1ZmZlci5zZXQoIHRoaXMuY29sb3JBZGQsNyApO1xyXG4gICAgICAgIC8vIGVuY29kZWRCdWZmZXJbN10gPSB0aGlzLmNvbG9yQWRkWzBdO1xyXG4gICAgICAgIC8vIGVuY29kZWRCdWZmZXJbOF0gPSB0aGlzLmNvbG9yQWRkWzFdO1xyXG4gICAgICAgIC8vIGVuY29kZWRCdWZmZXJbOV0gPSB0aGlzLmNvbG9yQWRkWzJdO1xyXG4gICAgICAgIC8vIGVuY29kZWRCdWZmZXJbMTBdID0gdGhpcy5jb2xvckFkZFszXTtcclxuICAgICAgICAvLyBlbmNvZGVkQnVmZmVyWzExXSA9IHRoaXMudHJhbnNmb3JtLmFuY2hvclg7XHJcbiAgICAgICAgLy8gZW5jb2RlZEJ1ZmZlclsxMl0gPSB0aGlzLnRyYW5zZm9ybS5hbmNob3JZO1xyXG5cclxuICAgICAgICBlbmNvZGVkQnVmZmVyLnNldCggW3RoaXMuXyQkaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl8kJHNwcml0ZVR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl8kJHVwZGF0ZUNvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbG9yT3ZlcnJpZGVbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbG9yT3ZlcnJpZGVbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbG9yT3ZlcnJpZGVbMl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbG9yT3ZlcnJpZGVbM10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbG9yQWRkWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xvckFkZFsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sb3JBZGRbMl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbG9yQWRkWzNdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0uYW5jaG9yWCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtLmFuY2hvclldICk7XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5zaGFkZXIgIT0gbnVsbCApIHtcclxuICAgICAgICAgICAgdGhpcy5zaGFkZXIuZm9yY2VVcGRhdGUoKTtcclxuICAgICAgICAgICAgZW5jb2RlZEJ1ZmZlclsxM10gPSB0aGlzLnNoYWRlci5hc3NldC5pZDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBlbmNvZGVkQnVmZmVyWzEzXSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGZvciAoIGxldCBpID0gMDsgaSA8IDE2OyBpKysgKSB7XHJcbiAgICAgICAgLy8gICAgIGVuY29kZWRCdWZmZXJbMTQgKyBpXSA9IHRoaXMudHJhbnNmb3JtLm1hdHJpeFtpXTsgXHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIGVuY29kZWRCdWZmZXIuc2V0KCB0aGlzLnRyYW5zZm9ybS5tYXRyaXgsMTQgKTtcclxuICAgICAgICBUeXBlZEFycmF5SGVscGVyLm1lbWNweSggZW5jb2RlZEJ1ZmZlciwxNCx0aGlzLnRyYW5zZm9ybS5tYXRyaXgsMCwxNiApO1xyXG5cclxuICAgICAgICBlbmNvZGVkQnVmZmVyLnNldCggKCB0aGlzLmNsaXBSZWdpb24gIT0gbnVsbCApID8gdGhpcy5jbGlwUmVnaW9uLnh5d2ggOiBbTmFOLE5hTixOYU4sTmFOXSwzMCApO1xyXG4gICAgICAgIGVuY29kZWRCdWZmZXJbMzRdID0gdGhpcy5jYWNoZUJpdG1hcEFzc2V0ICE9IG51bGwgPyB0aGlzLmNhY2hlQml0bWFwQXNzZXQuaWQgOiAwO1xyXG4gICAgICAgIGVuY29kZWRCdWZmZXJbMzVdID0gdGhpcy5jYWNoZUJpdG1hcERzdElkO1xyXG4gICAgICAgIGVuY29kZWRCdWZmZXJbMzZdID0gdGhpcy5ibGVuZE1vZGU7XHJcbiAgICAgICAgZW5jb2RlZEJ1ZmZlclszN10gPSArdGhpcy5tb3Rpb25CbHVyO1xyXG5cclxuICAgICAgICByZXR1cm4gZW5jb2RlZEJ1ZmZlcjtcclxuICAgIH1cclxuXHJcbiAgICBlbmNvZGVDdXN0b21QcmV2KCkge1xyXG4gICAgICAgIGNvbnN0IGVuY29kZWRCdWZmZXIgPSBuZXcgRmxvYXQzMkFycmF5KCAyMiApO1xyXG5cclxuICAgICAgICBlbmNvZGVkQnVmZmVyLnNldCggW1xyXG4gICAgICAgICAgICB0aGlzLmN1c3RvbVByZXYuY29sb3JPdmVycmlkZVswXSxcclxuICAgICAgICAgICAgdGhpcy5jdXN0b21QcmV2LmNvbG9yT3ZlcnJpZGVbMV0sXHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tUHJldi5jb2xvck92ZXJyaWRlWzJdLFxyXG4gICAgICAgICAgICB0aGlzLmN1c3RvbVByZXYuY29sb3JPdmVycmlkZVszXSxcclxuICAgICAgICAgICAgdGhpcy5jdXN0b21QcmV2LmFuY2hvclBvc2l0aW9uWCxcclxuICAgICAgICAgICAgdGhpcy5jdXN0b21QcmV2LmFuY2hvclBvc2l0aW9uWV0gKTtcclxuICAgICAgICAvLyBlbmNvZGVkQnVmZmVyLnNldCggdGhpcy5jdXN0b21QcmV2LndvcmxkTWF0cml4LDYgKTtcclxuICAgICAgICBUeXBlZEFycmF5SGVscGVyLm1lbWNweSggZW5jb2RlZEJ1ZmZlciw2LHRoaXMuY3VzdG9tUHJldi53b3JsZE1hdHJpeCwwLDE2ICk7XHJcbiAgICAgICAgcmV0dXJuIGVuY29kZWRCdWZmZXI7XHJcbiAgICB9XHJcblxyXG4gICAgc29ydENoaWxkcmVuKCBwcm9wID0gXCJ5XCIgKSB7XHJcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5zb3J0KCAoIGEsIGIgKSA9PiBhW3Byb3BdIC0gYltwcm9wXSApO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzZXRDdXN0b21QcmV2KCB3b3JsZE1hdHJpeCxjb2xvck92ZXJyaWRlLGFuY2hvclBvc2l0aW9uWCxhbmNob3JQb3NpdGlvblkgKSB7XHJcbiAgICAgICAgdGhpcy5jdXN0b21QcmV2ID0ge1xyXG4gICAgICAgICAgICB3b3JsZE1hdHJpeCxcclxuICAgICAgICAgICAgY29sb3JPdmVycmlkZSxcclxuICAgICAgICAgICAgYW5jaG9yUG9zaXRpb25YLFxyXG4gICAgICAgICAgICBhbmNob3JQb3NpdGlvblksXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLl8kJHVwZGF0ZUNvZGUgfD0gU3ByaXRlLlVwZGF0ZUNvZGVzLlVQREFURV9DVVNUT01fUFJFVjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRDYWNoZU1vZGUoIG1vZGUgKSB7XHJcbiAgICAgICAgaWYgKCB0aGlzLmNhY2hlQml0bWFwTW9kZSA9PSBTcHJpdGUuQ2FjaGVCaXRtYXBNb2Rlcy5TTkFQU0hPVCApIHtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlQ2hpbGRyZW4oIFNwcml0ZS5VcGRhdGVDb2Rlcy5VUERBVEVfQ0xFQVJfUFJFViApOyAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIHRoaXMuY2FjaGVCaXRtYXBBc3NldCApIHsgICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5jYWNoZUJpdG1hcEFzc2V0LnJlbGVhc2UoKTtcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1Nwcml0ZX0gc3ByXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBjb25zdCBjbGVhckRzdElkID0gKCBzcHIgKT0+e1xyXG4gICAgICAgICAgICAgICAgaWYgKCBzcHIuY2FjaGVCaXRtYXBNb2RlID09IFNwcml0ZS5DYWNoZUJpdG1hcE1vZGVzLk5PX0NBQ0hFICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVCaXRtYXBBc3NldCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgc3ByLmNhY2hlQml0bWFwRHN0SWQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIGxldCBzcHIyIG9mIHNwci5jaGlsZHJlbiApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJEc3RJZCggc3ByMiApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gICBcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVCaXRtYXBNb2RlID0gU3ByaXRlLkNhY2hlQml0bWFwTW9kZXMuTk9fQ0FDSEU7XHJcbiAgICAgICAgICAgIGNsZWFyRHN0SWQoIHRoaXMgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jYWNoZUJpdG1hcE1vZGUgPSBtb2RlO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBlbmNvZGVSZW5kZXJpbmdJbmZvV2l0aENoaWxkcmVuKCkge1xyXG4gICAgICAgIGNvbnN0IGVuY29kZWRCdWZmZXJzID0gW107XHJcbiAgICAgICAgY29uc3QgdHJhbnNmZXJMaXN0ID0gW107XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge1Nwcml0ZX0gc3ByXHJcbiAgICAgICAgICogQHBhcmFtIHttNC5NYXQ0fSB3b3JsZE1hdHJpeFxyXG4gICAgICAgICAqIEBwYXJhbSB7W251bWJlcixudW1iZXIsbnVtYmVyLG51bWJlcl18RmxvYXQzMkFycmF5fSBjb2xvck92ZXJyaWRlXHJcbiAgICAgICAgICogQHBhcmFtIHtbbnVtYmVyLG51bWJlcixudW1iZXIsbnVtYmVyXXxGbG9hdDMyQXJyYXl8bnVsbH0gY2xpcFJlY3RcclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gY2FjaGVCaXRtYXBEc3RJZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGVuY29kZUNoaWxkcmVuKCBzcHIsd29ybGRNYXRyaXgsY29sb3JPdmVycmlkZSwgY2xpcFJlY3QsIGNhY2hlQml0bWFwRHN0SWQgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1ZiA9IHNwci5lbmNvZGVSZW5kZXJpbmdJbmZvKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1Zk1hdHJpeCA9IGJ1Zi5zdWJhcnJheSggMTQsMTQgKyAxNiApO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJDb2xvck92ZXJyaWRlID0gYnVmLnN1YmFycmF5KCAzLDMgKyA0ICk7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1ckNsaXBSZWN0ID0gYnVmLnN1YmFycmF5KCAzMCwzMCArIDQgKTtcclxuICAgICAgICAgICAgbGV0IGFzc2V0SWQgPSAwO1xyXG4gICAgICAgICAgICBsZXQgZXh0cmE7XHJcbiAgICAgICAgICAgIGxldCBzdHJzO1xyXG4gICAgICAgICAgICBsZXQgZ2VuZXJpY0RhdGE7XHJcbiAgICAgICAgICAgIGxldCBjdXN0b21QcmV2O1xyXG4gICAgICAgICAgICBsZXQgbmVlZE1ha2VSVCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLy8gY2xpcFJlZ2lvbiDtirjrnpzsiqTtj7xcclxuICAgICAgICAgICAgaWYgKCAhTnVtYmVyLmlzTmFOKCBjdXJDbGlwUmVjdFswXSApICkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNsaXBQb3MgPSBtNC50cmFuc2Zvcm1Qb2ludCggd29ybGRNYXRyaXgsW2N1ckNsaXBSZWN0WzBdLGN1ckNsaXBSZWN0WzFdLDBdICk7XHJcblxyXG4gICAgICAgICAgICAgICAgY3VyQ2xpcFJlY3RbMF0gPSBjbGlwUG9zWzBdICsgc3ByLng7XHJcbiAgICAgICAgICAgICAgICBjdXJDbGlwUmVjdFsxXSA9IGNsaXBQb3NbMV0gKyBzcHIueTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8g66ek7Yq466at7Iqk64qUIO2KuOumrCDtlZjri6jsnLzroZwg6rCIIOyImOuhnSDqs7HtlZzri6QuXHJcbiAgICAgICAgICAgIG00Lm11bHRpcGx5KCB3b3JsZE1hdHJpeCxidWZNYXRyaXgsYnVmTWF0cml4ICk7XHJcbiAgICAgICAgICAgIC8vIOyblOuTnCDrp6Ttirjrpq3siqTroZwg67O06rSALiDtlZwg7ZSE66CI7J6EIOuKpuydgCDqsJLsnbTri6QuXHJcbiAgICAgICAgICAgIC8vIGNvcHntlZjripQg7J207Jyg64qUIHBvc3RNZXNzYWdl66GcIOybkOuzuOydtCDrs7TrgrTsoLjshJwg7IKs65287KeA6riwIOuVjOusuFxyXG4gICAgICAgICAgICBzcHIud29ybGRNYXRyaXggPSBtNC5jb3B5KCBidWZNYXRyaXggKTtcclxuXHJcblxyXG4gICAgICAgICAgICBpZiAoIHNwci5jYWNoZUJpdG1hcE1vZGUgIT0gU3ByaXRlLkNhY2hlQml0bWFwTW9kZXMuTk9fQ0FDSEUgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHNwci5jYWNoZUJpdG1hcEFzc2V0ID09IG51bGwgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmVlZE1ha2VSVCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBzcHIuY2FjaGVCaXRtYXBNb2RlID09IFNwcml0ZS5DYWNoZUJpdG1hcE1vZGVzLkZJTFRFUiApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDtlYTthLDrp4Eg66qo65OcXHJcbiAgICAgICAgICAgICAgICAgICAgc3ByLmNhY2hlQml0bWFwQXNzZXQucmVsZWFzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5lZWRNYWtlUlQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCBuZWVkTWFrZVJUICkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IHNwci5ib3VuZHM7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhc3NldCA9IG5ldyBBc3NldCggXCI8UlQ6Kj5cIixBc3NldC5Bc3NldFR5cGVzLlJlbmRlclRhcmdldCApO1xyXG5cclxuICAgICAgICAgICAgICAgIGFzc2V0LmxvYWQoIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgeDogICAgICAgICAgIHJlY3QueCxcclxuICAgICAgICAgICAgICAgICAgICB5OiAgICAgICAgICAgcmVjdC55LFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAgICAgICBNYXRoLm1pbiggMjA0OCwgcmVjdC53aWR0aCApLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogICAgICBNYXRoLm1pbiggMjA0OCxyZWN0LmhlaWdodCApLCBcclxuICAgICAgICAgICAgICAgICAgICB3b3JsZE1hdHJpeDogc3ByLndvcmxkTWF0cml4ICB9ICk7XHJcbiAgICAgICAgICAgICAgICBzcHIuY2FjaGVCaXRtYXBBc3NldCA9IGFzc2V0O1xyXG4gICAgICAgICAgICAgICAgYXNzZXRJZCA9IGFzc2V0LmlkO1xyXG4gICAgICAgICAgICAgICAgc3ByLmNhY2hlQml0bWFwRHN0SWQgPSBhc3NldElkO1xyXG4gICAgICAgICAgICAgICAgY2FjaGVCaXRtYXBEc3RJZCA9IGFzc2V0SWQ7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyggYENhY2hlICR7YXNzZXRJZH0gc3JjPSR7c3ByLmNhY2hlQml0bWFwU3JjSWR9YCApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc3ByLmNhY2hlQml0bWFwRHN0SWQgPSBjYWNoZUJpdG1hcERzdElkIHx8IHNwci5jYWNoZUJpdG1hcERzdElkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJ1ZlszNV0gPSBzcHIuY2FjaGVCaXRtYXBEc3RJZDtcclxuXHJcbiAgICAgICAgICAgIC8vIOy7rOufrOuKlCBSR0JB6rCB6rCB7J2EIOqzse2VtOuCmOqwhOuLpC4gMH4xIOqwklxyXG4gICAgICAgICAgICBjdXJDb2xvck92ZXJyaWRlWzBdID0gY3VyQ29sb3JPdmVycmlkZVswXSAqIGNvbG9yT3ZlcnJpZGVbMF07XHJcbiAgICAgICAgICAgIGN1ckNvbG9yT3ZlcnJpZGVbMV0gPSBjdXJDb2xvck92ZXJyaWRlWzFdICogY29sb3JPdmVycmlkZVsxXTtcclxuICAgICAgICAgICAgY3VyQ29sb3JPdmVycmlkZVsyXSA9IGN1ckNvbG9yT3ZlcnJpZGVbMl0gKiBjb2xvck92ZXJyaWRlWzJdO1xyXG4gICAgICAgICAgICBjdXJDb2xvck92ZXJyaWRlWzNdID0gY3VyQ29sb3JPdmVycmlkZVszXSAqIGNvbG9yT3ZlcnJpZGVbM107XHJcbiAgICAgICAgICAgIC8vIGNsaXBSZWN064qUIE5hTuydtOuptCDrtoDrqqgg6rKD7J2EIOqwgOyguOyYqOuLpFxyXG4gICAgICAgICAgICBpZiAoIE51bWJlci5pc05hTiggY3VyQ2xpcFJlY3RbMF0gKSAmJiAhTnVtYmVyLmlzTmFOKCBjbGlwUmVjdFswXSApICkge1xyXG4gICAgICAgICAgICAgICAgY3VyQ2xpcFJlY3Quc2V0KCBjbGlwUmVjdCApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICggc3ByLl8kJHNwcml0ZVR5cGUgIT0gMCApIHtcclxuICAgICAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgaWYgKCAoIHNwci5fJCR1cGRhdGVDb2RlICYgU3ByaXRlLlVwZGF0ZUNvZGVzLlVQREFURV9FWFRSQSApICYmIHNwci5lbmNvZGVFeHRyYVJlbmRlcmluZ0luZm8gIT0gbnVsbCApIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdHJhbnNmZXI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgICAgIFtleHRyYSxzdHJzLGdlbmVyaWNEYXRhLHRyYW5zZmVyXSA9IHNwci5lbmNvZGVFeHRyYVJlbmRlcmluZ0luZm8oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHRyYW5zZmVyICkgdHJhbnNmZXJMaXN0LnB1c2goIC4uLnRyYW5zZmVyICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoICggc3ByLl8kJHVwZGF0ZUNvZGUgJiBTcHJpdGUuVXBkYXRlQ29kZXMuVVBEQVRFX0NVU1RPTV9QUkVWICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tUHJldiA9IHNwci5lbmNvZGVDdXN0b21QcmV2KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBSVOyXkCDqt7jrprQg6rKD7J2065287IScIHNyY0lkPTBcclxuICAgICAgICAgICAgICAgIGJ1ZlszNF0gPSAwO1xyXG4gICAgICAgICAgICAgICAgZW5jb2RlZEJ1ZmZlcnMucHVzaCggW2J1ZixleHRyYSxzdHJzLGN1c3RvbVByZXYsZ2VuZXJpY0RhdGFdICk7XHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIHNwci5jYWNoZUJpdG1hcE1vZGUgPT0gU3ByaXRlLkNhY2hlQml0bWFwTW9kZXMuU05BUFNIT1QgJiYgc3ByLmNhY2hlQml0bWFwRHN0SWQgPT0gMCApIHtcclxuICAgICAgICAgICAgICAgIC8vIOy6kOyLnOuQnCDqsr3smrBcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIOu5hO2KuOunteyXkCDsupDsi5ztlZwg6rK97Jqw6rCAIOyVhOuLiOuptCDssKjsnbzrk5zrpbwg6re466aw64ukLlxyXG4gICAgICAgICAgICAgICAgc3ByLmNoaWxkcmVuLmZvckVhY2goIGNoaWxkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNoaWxkLnZpc2libGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuY29kZUNoaWxkcmVuKCBjaGlsZCwgYnVmTWF0cml4LGN1ckNvbG9yT3ZlcnJpZGUsIGN1ckNsaXBSZWN0LCBjYWNoZUJpdG1hcERzdElkICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggc3ByLmNhY2hlQml0bWFwTW9kZSA9PSBTcHJpdGUuQ2FjaGVCaXRtYXBNb2Rlcy5TTkFQU0hPVCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkLmNhY2hlQml0bWFwRHN0SWQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgaWYgKCBzcHIuY2FjaGVCaXRtYXBNb2RlID09IFNwcml0ZS5DYWNoZUJpdG1hcE1vZGVzLlNOQVBTSE9UICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNwci5jYWNoZUJpdG1hcERzdElkID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCBzcHIuY2FjaGVCaXRtYXBBc3NldCApIHtcclxuICAgICAgICAgICAgICAgIC8vIO2FjeyKpOyzkOulvCDqt7jroKTslbwg7ZWoXHJcbiAgICAgICAgICAgICAgICBjb25zdCBidWYyID0gbmV3IEZsb2F0MzJBcnJheSggYnVmICk7XHJcblxyXG4gICAgICAgICAgICAgICAgYnVmMlszNF0gPSBhc3NldElkO1xyXG4gICAgICAgICAgICAgICAgYnVmMlszNV0gPSAwO1xyXG4gICAgICAgICAgICAgICAgZW5jb2RlZEJ1ZmZlcnMucHVzaCggW2J1ZjIsbnVsbCxudWxsLGN1c3RvbVByZXYsbnVsbF0gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzcHIuXyQkdXBkYXRlQ29kZSA9IFNwcml0ZS5VcGRhdGVDb2Rlcy5VUERBVEVfTk9USElORztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggdGhpcy52aXNpYmxlICkge1xyXG4gICAgICAgICAgICBlbmNvZGVDaGlsZHJlbiggdGhpcyxtNC5pZGVudGl0eSgpLCBbMSwxLDEsMV0sIFtOYU4sTmFOLE5hTixOYU5dLCAwICk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBlbmNvZGVkQnVmZmVycy5sZW5ndGg7IGkrKyApIHtcclxuICAgICAgICAgICAgICAgIHRyYW5zZmVyTGlzdC5wdXNoKCBlbmNvZGVkQnVmZmVyc1tpXVswXS5idWZmZXIgKTtcclxuICAgICAgICAgICAgICAgIGlmICggZW5jb2RlZEJ1ZmZlcnNbaV1bMV0gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmZXJMaXN0LnB1c2goIGVuY29kZWRCdWZmZXJzW2ldWzFdLmJ1ZmZlciApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCBlbmNvZGVkQnVmZmVyc1tpXVszXSApIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zlckxpc3QucHVzaCggZW5jb2RlZEJ1ZmZlcnNbaV1bM10uYnVmZmVyICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFtlbmNvZGVkQnVmZmVycyx0cmFuc2Zlckxpc3RdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbbnVsbCxudWxsXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblNwcml0ZS5sYXN0SWQgPSAxO1xyXG5TcHJpdGUuZmluYWxpemF0aW9uUmVnaXN0cnkgPSBuZXcgRmluYWxpemF0aW9uUmVnaXN0cnkoIFNwcml0ZS5maW5hbGl6ZUhhbmRsZXIgKTtcclxuU3ByaXRlLmxvYWRlZEV2ZW50RGlzcGF0Y2hlciA9IG5ldyBFdmVudERpc3BhdGNoZXIoKTtcclxuXHJcblxyXG5TcHJpdGUuU3ByaXRlVHlwZXMgPSB7XHJcbiAgICBTUFJJVEU6ICAgIDAsXHJcbiAgICBCSVRNQVA6ICAgIDEsXHJcbiAgICBNRVNIOiAgICAgIDIsXHJcbiAgICBURVhURklFTEQ6IDMsXHJcbiAgICBQSVhFTDogICAgIDQsXHJcbiAgICBTSEFQRTogICAgIDUsXHJcbn07XHJcblNwcml0ZS5VcGRhdGVDb2RlcyA9IHtcclxuICAgIFVQREFURV9OT1RISU5HOiAgICAgMCxcclxuICAgIFVQREFURV9FWFRSQTogICAgICAgMSxcclxuICAgIFVQREFURV9DTEVBUl9QUkVWOiAgMixcclxuICAgIFVQREFURV9DVVNUT01fUFJFVjogNCxcclxufTtcclxuU3ByaXRlLkNhY2hlQml0bWFwTW9kZXMgPSB7XHJcbiAgICBOT19DQUNIRTogMCxcclxuICAgIFNOQVBTSE9UOiAxLFxyXG4gICAgRklMVEVSOiAgIDIsXHJcbn07XHJcblxyXG5cclxuLyoqIFxyXG4gKiBAZW51bSB7bnVtYmVyfVxyXG4qL1xyXG5TcHJpdGUuQmxlbmRNb2RlcyA9IHtcclxuICAgIE5PUk1BTDogICAgIDAsIC8vW2dsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQV07XHJcbiAgICBNVUxUSVBMWTogICAxLCAvL1tnbC5EU1RfQ09MT1IsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEFdO1xyXG4gICAgQUREOiAgICAgICAgMiwgLy9bZ2wuT05FLCBnbC5EU1RfQUxQSEFdO1xyXG4gICAgU0NSRUVOOiAgICAgMywgLy9bZ2wuT05FLCBnbC5PTkVfTUlOVVNfU1JDX0NPTE9SXTtcclxuICAgIE5PUk1BTF9OUE06IDQsIC8vW2dsLlNSQ19BTFBIQSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQSwgZ2wuT05FLCBnbC5PTkVfTUlOVVNfU1JDX0FMUEhBXTtcclxuICAgIEFERF9OUE06ICAgIDUsIC8vW2dsLlNSQ19BTFBIQSwgZ2wuRFNUX0FMUEhBLCBnbC5PTkUsIGdsLkRTVF9BTFBIQV07XHJcbiAgICBTQ1JFRU5fTlBNOiA2LCAvL1tnbC5TUkNfQUxQSEEsIGdsLk9ORV9NSU5VU19TUkNfQ09MT1IsIGdsLk9ORSwgZ2wuT05FX01JTlVTX1NSQ19DT0xPUl07XHJcbn07XHJcbiIsImltcG9ydCB7IFNwcml0ZSB9IGZyb20gJy4vU3ByaXRlJztcclxuaW1wb3J0IHsgbTQgfSBmcm9tICd0d2dsLmpzJztcclxuXHJcblxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBTdGFnZSBleHRlbmRzIFNwcml0ZSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuaXNTdGFnZSA9IHRydWU7XHJcbiAgICB9XHJcbn0iLCJcclxuaW1wb3J0IHsgRXZlbnREaXNwYXRjaGVyIH0gZnJvbSAnLi9FdmVudERpc3BhdGNoZXInO1xyXG5pbXBvcnQgeyBUaW1lciB9IGZyb20gJy4vVGltZXInO1xyXG5pbXBvcnQgeyBFdmVudCB9IGZyb20gJy4vRXZlbnQnO1xyXG5cclxuXHJcbi8vIOqwgSDsiqTthqDrpqzsp4Ag7ISk66qFXHJcbi8vaHR0cHM6Ly9ibG9nLnNlc3Npb25zdGFjay5jb20vaG93LWphdmFzY3JpcHQtd29ya3Mtc3RvcmFnZS1lbmdpbmVzLWhvdy10by1jaG9vc2UtdGhlLXByb3Blci1zdG9yYWdlLWFwaS1kYTUwODc5ZWY1NzZcclxuLy8g7LqQ7IucIOuNsOydtO2EsOuKlCBDYWNoZSBBUElcclxuLy8g7Jyg7KCAIOuNsOydtO2EsOuKlCBJbmRleGVkREIg7JOw65286rOgIOq2jOqzoCDtlZjqs6Ag7J6I64ukXHJcblxyXG5leHBvcnQgY2xhc3MgU3RvcmFnZSBleHRlbmRzIEV2ZW50RGlzcGF0Y2hlciB7XHJcbiAgICBjb25zdHJ1Y3RvciggZGJOYW1lICkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgY29uc29sZS5hc3NlcnQoIHNlbGYuaW5kZXhlZERCLCBcImluZGV4ZWREQuqwgCDsp4Dsm5DrkJjsp4Ag7JWK64qUIOu4jOudvOyasOyggFwiICk7XHJcblxyXG4gICAgICAgIGNvbnN0IHZlcnNpb24gPSAxO1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBzZWxmLmluZGV4ZWREQi5vcGVuKCBkYk5hbWUsdmVyc2lvbiApO1xyXG5cclxuICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoIGV2ZW50ICkgPT4ge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIFwiaW5kZXhlZERCIOyXtOq4sCDsi6TtjKhcIiApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSAoIGV2ZW50ICkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0aGlzRGIgPSBldmVudC50YXJnZXQucmVzdWx0O1xyXG5cclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIFwidXBncmFkZVwiICk7XHJcbiAgICAgICAgICAgIHRoaXNEYi5jcmVhdGVPYmplY3RTdG9yZSggXCJmaWxlc1wiLCB7IGtleVBhdGg6IFwicGF0aFwiIH0gKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCBldmVudCApID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGIgPSByZXF1ZXN0LnJlc3VsdDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGIgPSBkYjtcclxuXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCBldmVudCApO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoIFwicmVhZHlcIiApO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZCgga2V5ICkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSggKCByZXNvbHZlLCByZWplY3QgKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZ1bmMgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5kYi50cmFuc2FjdGlvbiggXCJmaWxlc1wiLCBcInJlYWRvbmx5XCIgKS5vYmplY3RTdG9yZSggXCJmaWxlc1wiICkuZ2V0KCBrZXkgKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICggZXZlbnQgKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCBuZXcgRXZlbnQoIEV2ZW50LkNPTVBMRVRFLCB7IGNvbnRlbnQ6IGV2ZW50LnRhcmdldC5yZXN1bHQuY29udGVudCB9ICkgKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCBldmVudC50YXJnZXQucmVzdWx0LmNvbnRlbnQgKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAoIHRoaXMuZGIgKSB7XHJcbiAgICAgICAgICAgICAgICBmdW5jKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uY2UoIFwicmVhZHlcIiwgZnVuYyApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSApO1xyXG4gICAgfVxyXG5cclxuICAgIHdyaXRlKCBrZXksIHZhbHVlICkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSggKCByZXNvbHZlLCByZWplY3QgKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZ1bmMgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5kYi50cmFuc2FjdGlvbiggXCJmaWxlc1wiLCBcInJlYWR3cml0ZVwiICkub2JqZWN0U3RvcmUoIFwiZmlsZXNcIiApLnB1dCggeyBwYXRoOiBrZXksIGNvbnRlbnQ6IHZhbHVlIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICggZXZlbnQgKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCBuZXcgRXZlbnQoIEV2ZW50LkNPTVBMRVRFICkgKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKCB0aGlzLmRiICkge1xyXG4gICAgICAgICAgICAgICAgZnVuYygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbmNlKCBcInJlYWR5XCIsIGZ1bmMgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgc3RhdGljIGxvYWRGaWxlKCBmaWxlbmFtZSApIHtcclxuICAgICAgICAvLyAvKiogQHR5cGUge1BJWEkuTG9hZGVyfSAqL1xyXG4gICAgICAgIC8vIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIC8vIGNvbnN0IGxvYWRlciA9IFBJWEkuTG9hZGVyLnNoYXJlZDtcclxuICAgICAgICAvLyBjb25zdCByID0gbmV3IEV2ZW50RGlzcGF0Y2hlcigpO1xyXG5cclxuICAgICAgICAvLyBpZiAoIGxvYWRlci5yZXNvdXJjZXNbZmlsZW5hbWVdICkge1xyXG4gICAgICAgIC8vICAgICBpZiAoIGxvYWRlci5yZXNvdXJjZXNbZmlsZW5hbWVdLmlzQ29tcGxldGUgKSB7XHJcbiAgICAgICAgLy8gICAgICAgICBUaW1lci5kZWxheWVkQ2FsbCggMCwgKCk9PiByLmRpc3BhdGNoRXZlbnQoIEV2ZW50LkNPTVBMRVRFLHsgZGF0YTogbG9hZGVyLnJlc291cmNlc1tmaWxlbmFtZV0uZGF0YSB9ICkgKTtcclxuICAgICAgICAvLyAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyAgICAgICAgIGxvYWRlci5sb2FkKCAoIGxvYWRlcixyZXNvdXJjZXMgKT0+IHIuZGlzcGF0Y2hFdmVudCggRXZlbnQuQ09NUExFVEUseyBkYXRhOiByZXNvdXJjZXNbZmlsZW5hbWVdLmRhdGEgfSApICk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgICBsb2FkZXIuYWRkKCBmaWxlbmFtZSxmaWxlbmFtZSApO1xyXG4gICAgICAgIC8vICAgICBsb2FkZXIubG9hZCggKCBsb2FkZXIscmVzb3VyY2VzICk9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICBpZiAoIHJlc291cmNlc1tmaWxlbmFtZV0uZXJyb3IgKSB0aHJvdyBuZXcgRXJyb3IoIHJlc291cmNlc1tmaWxlbmFtZV0uZXJyb3IgKTtcclxuICAgICAgICAvLyAgICAgICAgIHIuZGlzcGF0Y2hFdmVudCggRXZlbnQuQ09NUExFVEUseyBkYXRhOiByZXNvdXJjZXNbZmlsZW5hbWVdLmRhdGEgfSApO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gICAgICk7XHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICAvLyByZXR1cm4gcjtcclxuICAgIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgRm9udCB9IGZyb20gXCIuL0ZvbnRCYXNlXCI7XHJcbmltcG9ydCB7IFNwcml0ZSB9IGZyb20gXCIuL1Nwcml0ZVwiO1xyXG5pbXBvcnQgeyBUcnVlVHlwZUZvbnQgfSBmcm9tIFwiLi9UcnVlVHlwZUZvbnRcIjtcclxuaW1wb3J0IHsgUmVjdCB9IGZyb20gXCIuL1R5cGVzXCI7XHJcbmltcG9ydCB7IFV0aWxzIH0gZnJvbSBcIi4vVXRpbHNcIjtcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgVGV4dEZpZWxkIGV4dGVuZHMgU3ByaXRlIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBUZXh0RmllbGQuXHJcbiAgICAgKiBAcGFyYW0ge0ZvbnR9IGZvbnRcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XHJcbiAgICAgKiBAcGFyYW0geyp9IHN0eWxlc1xyXG4gICAgICogQG1lbWJlcm9mIFRleHRGaWVsZFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvciggZm9udCwgdGV4dCwgc3R5bGVzICkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5mb250ID0gZm9udDtcclxuICAgICAgICB0aGlzLnN0eWxlcyA9IHN0eWxlcztcclxuICAgICAgICB0aGlzLnVzZUJhc2VsaW5lID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fJCRzcHJpdGVUeXBlID0gU3ByaXRlLlNwcml0ZVR5cGVzLlRFWFRGSUVMRDtcclxuICAgICAgICB0aGlzLl8kJHVwZGF0ZUNvZGUgPSBTcHJpdGUuVXBkYXRlQ29kZXMuVVBEQVRFX0VYVFJBO1xyXG4gICAgICAgIC8vIO2KuOujqO2DgOyehe2PsO2KuOulvCDsupTrsoTsiqTsl5Ag6re466C464uk6rCAIO2FjeyKpOyzkOuhnCDrsJTqvrjripTrjbAg7J20IOuVjCDslYztjIzsl5Ag6rKA7KCV7J20IOyEnuydtOuKlCDqsoPsnYQg67m866Ck66m0IOuLpOydjOqzvCDqsJnsnbQg7ZW07JW87ZWc64ukLlxyXG4gICAgICAgIHRoaXMuY29sb3JBZGQgPSAoIGZvbnQgaW5zdGFuY2VvZiBUcnVlVHlwZUZvbnQgKSA/IFsxLDEsMSwwXSA6IFswLDAsMCwwXTtcclxuICAgICAgICB0aGlzLmN1c3RvbUJvdW5kcyA9IG5ldyBSZWN0KCk7XHJcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdGV4dCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgdGV4dCggdGV4dCApIHtcclxuICAgICAgICBpZiAoIHRleHQgIT0gdGhpcy5fdGV4dCApIHtcclxuICAgICAgICAgICAgdGhpcy5jdXN0b21Cb3VuZHMud2lkdGggPSB0aGlzLmZvbnQubWVhc3VyZVRleHRXaWR0aCggdGV4dCx0aGlzLmZvbnRTaXplICk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tQm91bmRzLmhlaWdodCA9IHRoaXMuZm9udFNpemU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3RleHQgPSB0ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBmb250U2l6ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb250LnJlZmVyZW5jZVNpemU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VGV4dFdpZHRoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndpZHRoO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFRleHRDb2xvciggYyxhICkge1xyXG4gICAgICAgIC8vIHRoaXMuY29sb3JBZGQgPSBVdGlscy5oZXgycmdiYSggYyxhICk7XHJcbiAgICAgICAgdGhpcy5zZXRPdmVycmlkZUNvbG9yKCBjLGEgKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZnJvbVRleHRXcmFwKCB0ZXh0LCBhcmVhV2lkdGgsIGFyZWFIZWlnaHQsIGxpbmVTcGFjaW5nLCBmb250LCBhbGlnbiwgaWdub3JlV29yZFdyYXAgKSB7XHJcbiAgICAgICAgY29uc3Qgd29yZFdyYXBTdHlsZSA9IHtcclxuICAgICAgICAgICAgYWxpZ246ICAgICAgICAgYWxpZ24gIT0gbnVsbCA/IGFsaWduIDogXCJsZWZ0XCIsXHJcbiAgICAgICAgICAgIGxpbmVIZWlnaHQ6ICAgIGxpbmVTcGFjaW5nLFxyXG4gICAgICAgICAgICB3b3JkV3JhcDogICAgICBhcmVhV2lkdGggIT0gbnVsbCAmJiAhaWdub3JlV29yZFdyYXAsXHJcbiAgICAgICAgICAgIHdoaXRlU3BhdGU6ICAgIFwibm9ybWFsXCIsXHJcbiAgICAgICAgICAgIHRyaW06ICAgICAgICAgIHRydWUsXHJcbiAgICAgICAgICAgIGJyZWFrV29yZDogICAgIGFyZWFXaWR0aCAhPSBudWxsICYmICFpZ25vcmVXb3JkV3JhcCxcclxuICAgICAgICAgICAgd29yZFdyYXBXaWR0aDogYXJlYVdpZHRoXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgdGYgPSBuZXcgVGV4dEZpZWxkKCBmb250LCB0ZXh0LCB3b3JkV3JhcFN0eWxlICk7XHJcblxyXG4gICAgICAgIC8vc3ByLmFkZENoaWxkKCB0ZiApO1xyXG4gICAgICAgIC8vVE9ETzog7YuA66C47J2MXHJcbiAgICAgICAgdGYuYW5jaG9yWCA9ICggYWxpZ24gPT0gXCJjZW50ZXJcIiApID8gMC41IDogKCBhbGlnbiA9PSBcInJpZ2h0XCIgPyAxLjAgOiAwLjAgKTtcclxuXHJcbiAgICAgICAgLy90Zi5fX3BpeGkueCA9IChhbGlnbiA9PSBcImNlbnRlclwiKSA/IGFyZWFXaWR0aCAqIDAuNSA6IChhbGlnbiA9PSBcInJpZ2h0XCIgPyBhcmVhV2lkdGggOiAwLjApO1xyXG4gICAgICAgIGlmICggYXJlYVdpZHRoICE9IG51bGwgKSB7XHJcbiAgICAgICAgICAgIHRmLnggKz0gYXJlYVdpZHRoICogdGYuYW5jaG9yUG9zaXRpb24ueDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0ZjtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIGVuY29kZUV4dHJhUmVuZGVyaW5nSW5mbygpIHtcclxuICAgICAgICBsZXQgZW5jb2RlZEJ1ZmZlciA9IG5ldyBGbG9hdDMyQXJyYXkoIDIgKTtcclxuXHJcbiAgICAgICAgZW5jb2RlZEJ1ZmZlclswXSA9IHRoaXMuZm9udC5hc3NldC5pZDtcclxuICAgICAgICBlbmNvZGVkQnVmZmVyWzFdID0gK3RoaXMudXNlQmFzZWxpbmU7XHJcblxyXG4gICAgICAgIHJldHVybiBbZW5jb2RlZEJ1ZmZlcixbdGhpcy50ZXh0XV07XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQXNzZXQgfSBmcm9tICcuL0Fzc2V0JztcclxuaW1wb3J0IHsgVGV4dHVyZUJhc2UgfSBmcm9tICcuL1RleHR1cmVCYXNlJztcclxuaW1wb3J0IHsgUmVjdCB9IGZyb20gJy4vVHlwZXMnO1xyXG5pbXBvcnQgeyBVdGlscyB9IGZyb20gJy4vVXRpbHMnO1xyXG5pbXBvcnQgeyBFdmVudCB9IGZyb20gJy4vRXZlbnQnO1xyXG5leHBvcnQgY2xhc3MgVGV4dHVyZSBleHRlbmRzIFRleHR1cmVCYXNlIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBUZXh0dXJlLlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGVuYW1lXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGZpbHRlclxyXG4gICAgICogQHBhcmFtIHsqfSBvcHRpb25cclxuICAgICAqIEBtZW1iZXJvZiBUZXh0dXJlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKCBmaWxlbmFtZSwgZmlsdGVyID0gZmFsc2UsIG9wdGlvbiA9IHt9ICkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5hc3NldCA9IG5ldyBBc3NldCggZmlsZW5hbWUsQXNzZXQuQXNzZXRUeXBlcy5UZXh0dXJlICk7XHJcbiAgICAgICAgY29uc3Qgc2l6ZSA9IFV0aWxzLmdldEltYWdlU2l6ZSggZmlsZW5hbWUgKTtcclxuXHJcbiAgICAgICAgdGhpcy51dlJlY3QgPSBvcHRpb24ucmVjdCB8fCBuZXcgUmVjdCggMCwwLHNpemUud2lkdGgsc2l6ZS5oZWlnaHQgKTtcclxuICAgICAgICB0aGlzLndpZHRoID0gdGhpcy51dlJlY3Qud2lkdGg7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLnV2UmVjdC5oZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5hc3NldC5sb2FkKCB7IHdpZHRoOiBzaXplLndpZHRoLGhlaWdodDogc2l6ZS5oZWlnaHQsdXZSZWN0OiB0aGlzLnV2UmVjdCwgZmlsdGVyOiBmaWx0ZXIgfSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lXHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmdW5jXHJcbiAgICAgKiBAcGFyYW0ge2FueT19IGNvbnRleHRcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzT25jZT1mYWxzZV1cclxuICAgICAqIEByZXR1cm5zIHtUZXh0dXJlfVxyXG4gICAgICogQG1lbWJlcm9mIFRleHR1cmVcclxuICAgICAqL1xyXG4gICAgYWRkRXZlbnRMaXN0ZW5lciggZXZlbnROYW1lLCBmdW5jLCBjb250ZXh0ID0gbnVsbCwgaXNPbmNlID0gZmFsc2UgKSB7XHJcbiAgICAgICAgaWYgKCBldmVudE5hbWUgPT0gRXZlbnQuTE9BREVEICkge1xyXG4gICAgICAgICAgICB0aGlzLmFzc2V0LmFkZEV2ZW50TGlzdGVuZXIoIGV2ZW50TmFtZSwgdGhpcy5kaXNwYXRjaEV2ZW50LmJpbmQoIHRoaXMsRXZlbnQuTE9BREVEICksIG51bGwsIGlzT25jZSApO1xyXG4gICAgICAgIH0gXHJcbiAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLmFkZEV2ZW50TGlzdGVuZXIoIGV2ZW50TmFtZSwgZnVuYywgY29udGV4dCwgaXNPbmNlICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IEFzc2V0IH0gZnJvbSAnLi9Bc3NldCc7XHJcbmltcG9ydCB7IEV2ZW50RGlzcGF0Y2hlciB9IGZyb20gJy4vRXZlbnREaXNwYXRjaGVyJztcclxuaW1wb3J0IHsgUG9pbnQsIFJlY3QgfSBmcm9tICcuL1R5cGVzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUZXh0dXJlQmFzZSBleHRlbmRzIEV2ZW50RGlzcGF0Y2hlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSAwO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMDtcclxuICAgICAgICAvKiogQHR5cGUge0Fzc2V0fSAqL1xyXG4gICAgICAgIHRoaXMuYXNzZXQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgLyoqIEB0eXBlIHtSZWN0fSAqL1xyXG4gICAgICAgIHRoaXMudXZSZWN0ID0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzaXplKCkge1xyXG4gICAgICAgIHJldHVybiBbdGhpcy53aWR0aCx0aGlzLmhlaWdodF07XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IFRleHR1cmVCYXNlIH0gZnJvbSAnLi9UZXh0dXJlQmFzZSc7XHJcbmltcG9ydCB7IFV0aWxzIH0gZnJvbSAnLi9VdGlscyc7XHJcbmltcG9ydCB7IEV2ZW50IH0gZnJvbSAnLi9FdmVudCc7XHJcbmltcG9ydCB7IFJlY3QgfSBmcm9tICcuL1R5cGVzJztcclxuaW1wb3J0IHsgVGV4dHVyZSB9IGZyb20gJy4vVGV4dHVyZSc7XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFRleHR1cmVQYWNrIGV4dGVuZHMgVGV4dHVyZUJhc2Uge1xyXG4gICAgLyoqXHJcbiAgICAgKkNyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgVGV4dHVyZVBhY2suXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xvYmplY3R9IHR4dGZpbGVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpbWFnZWZpbGVcclxuICAgICAqIEBwYXJhbSB7VGV4dHVyZUJhc2UuRmlsdGVyc30gZmlsdGVyXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnNcclxuICAgICAqIEBtZW1iZXJvZiBUZXh0dXJlUGFja1xyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvciggdHh0ZmlsZSxpbWFnZWZpbGUsZmlsdGVyLG9wdGlvbnMgKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmZpbGVuYW1lID0gIGltYWdlZmlsZTtcclxuICAgICAgICB0aGlzLnJlZ2lvbnMgPSB7fTtcclxuXHJcbiAgICAgICAgaWYgKCB0eXBlb2YoIHR4dGZpbGUgKSA9PSBcInN0cmluZ1wiICkge1xyXG4gICAgICAgICAgICBjb25zdCBzID0gVXRpbHMuZ2V0RW1iZWRkZWRGaWxlKCB0eHRmaWxlICk7XHJcblxyXG5cclxuICAgICAgICAgICAgaWYgKCBzICE9IG51bGwgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IHMuc3BsaXQoIFwiXFxuXCIgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKCBjb25zdCBsaW5lIG9mIGxpbmVzICkge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhsaW5lKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAvKFteLF0rKSxcXHMqKFxcZCspLFxccyooXFxkKyksXFxzKihcXGQrKSxcXHMqKFxcZCspLFxccyooXFxkKyksXFxzKihcXGQrKSxcXHMqKFxcZCspLFxccyooXFxkKykvLmV4ZWMoIGxpbmUgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCByZXN1bHQgIT0gbnVsbCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgWywgbmFtZSwgeCwgeSwgd2lkdGgsIGhlaWdodF0gPSByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coYCR7bmFtZX0gJHt4fSAke3l9ICR7d2lkdGh9ICR7aGVpZ2h0fWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWN0ID0gbmV3IFJlY3QoIHBhcnNlRmxvYXQoIHggKSwgcGFyc2VGbG9hdCggeSApLCBwYXJzZUZsb2F0KCB3aWR0aCApLCBwYXJzZUZsb2F0KCBoZWlnaHQgKSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpb25zW25hbWVdID0gbmV3IFRleHR1cmUoIHRoaXMuZmlsZW5hbWUsZmFsc2UseyByZWN0IH0gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB0eHRmaWxlIOu2gOu2hOyXkCDqsJzssrTrpbwg64Sj7J2AIOqyveyasFxyXG4gICAgICAgICAgICBmb3IgKCBsZXQgbmFtZSBpbiB0eHRmaWxlICkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlY3RBcnIgPSB0eHRmaWxlW25hbWVdO1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlY3QgPSBuZXcgUmVjdCggLi4ucmVjdEFyciApO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucmVnaW9uc1tuYW1lXSA9IG5ldyBUZXh0dXJlKCB0aGlzLmZpbGVuYW1lLGZpbHRlcix7IHJlY3QgfSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFRleHR1cmVSZWdpb24oIG5hbWUgKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaW9uc1tuYW1lXTtcclxuICAgIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgU3ByaXRlIH0gZnJvbSAnLi9TcHJpdGUnO1xyXG5pbXBvcnQgeyBNZXNoIH0gZnJvbSAnLi9NZXNoJztcclxuaW1wb3J0IHsgU2hhZGVyIH0gZnJvbSAnLi9TaGFkZXInO1xyXG5pbXBvcnQgeyBUZXh0dXJlQmFzZSB9IGZyb20gJy4vVGV4dHVyZUJhc2UnO1xyXG5cclxuLypcclxuXHJcbjIwMTktMTAtMDVcclxucmVzaXpl6rCAIOuEiOustCDripDroKTshJwg7LKY7J2M7JeQIOuplOyLnOulvCDrp4zrk6TslrQg65GQ64qUIOyqveycvOuhnCDtlojri6RcclxuXHJcbjIwMjEtMTEtMjFcclxuXHJcbm1lc2jrpbwgY2hpbGTroZwg6rCA7KeA6rOgIOyeiOuKlCDqsoPsnYQg6re464OlIG1lc2jrpbwgZXh0ZW5k7ZWY6rKMIOyImOygle2VmOqxsOuCmFxyXG7siKjqsqjspJjslbztlahcclxuXHJcbiovXHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBAdGhpcyB7VGlsZU1hcH1cclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ9IHR4XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB0eVxyXG4gKiBAcmV0dXJucyB7bnVtYmVyW119XHJcbiAqL1xyXG5mdW5jdGlvbiB0aWxlVG9SZWN0KCB0eCwgdHkgKSB7XHJcbiAgICBjb25zdCB4MSA9IHR4ICogKCB0aGlzLl9fdGlsZVdpZHRoICsgdGhpcy5fX3NwYWNpbmdYICkgKyB0aGlzLl9fbWFyZ2luWDtcclxuICAgIGNvbnN0IHkxID0gdHkgKiAoIHRoaXMuX190aWxlSGVpZ2h0ICsgdGhpcy5fX3NwYWNpbmdZICkgKyB0aGlzLl9fbWFyZ2luWTtcclxuXHJcbiAgICAvLyDquLDrjbDroZzsiqTsnZggdXbsooztkZwg67OA7ZmY7IucIOyDneq4sOuKlCDrrLjsoJwg65WM66y47JeQIDAuOTk5OTnrpbwg6rOx7ZWoXHJcbiAgICAvL3JldHVybiBbeDEseTEseDEgKyB0aGlzLl9fdGlsZVdpZHRoICogMC45OTk5OSx5MSArIHRoaXMuX190aWxlSGVpZ2h0ICogMC45OTk5OV07XHJcbiAgICAvL3JldHVybiBbeDEsIHkxLCB4MSArIHRoaXMuX190aWxlV2lkdGggLHkxICsgdGhpcy5fX3RpbGVIZWlnaHRdO1xyXG4gICAgLy8gcmV0dXJuIFt4MSA+Pj4gMCwgeTEgPj4+IDAsIHgxICsgdGhpcy5fX3RpbGVXaWR0aCA+Pj4gMCwgeTEgKyB0aGlzLl9fdGlsZUhlaWdodCA+Pj4gMF07XHJcbiAgICByZXR1cm4gW3gxLCB5MSwgeDEgKyB0aGlzLl9fdGlsZVdpZHRoLCB5MSArIHRoaXMuX190aWxlSGVpZ2h0XTtcclxuICAgIC8vIGxldCBbYSwgYiwgYywgZF0gPSBbMC4wMywwLjEyNSwtMC4wMywtMC4xMjVdO1xyXG4gICAgLy8gcmV0dXJuIFt4MSArIGEsIHkxICsgYiwgeDEgKyB0aGlzLl9fdGlsZVdpZHRoICsgYywgeTEgKyB0aGlzLl9fdGlsZUhlaWdodCArIGRdO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXBsYWNlTWVzaERhdGEoIG0sIGksIHgxLCB5MSwgeDIsIHkyLCB0eDEsIHR5MSwgdHgyLCB0eTIsIGMxLCBhMSwgYzIsIGEyLCBjMywgYTMsIGM0LCBhNCApIHtcclxuICAgIGNvbnN0IFtuVnR4LCBuVXYsIG5WYywgbklkeF0gPSBbaSAqIDQsaSAqIDQsIGkgKiA0LCBpICogNl07XHJcblxyXG4gICAgbS5zZXRWZXJ0aWNlcyhcclxuICAgICAgICBuVnR4ICsgMCwgeDEsIHkxLFxyXG4gICAgICAgIG5WdHggKyAxLCB4MiwgeTEsXHJcbiAgICAgICAgblZ0eCArIDIsIHgxLCB5MixcclxuICAgICAgICBuVnR4ICsgMywgeDIsIHkyXHJcbiAgICApO1xyXG4gICAgbS5zZXRUZXh0dXJlQ29vcmRpbmF0ZXMoXHJcbiAgICAgICAgblV2ICsgMCwgdHgxLCB0eTEsXHJcbiAgICAgICAgblV2ICsgMSwgdHgyLCB0eTEsXHJcbiAgICAgICAgblV2ICsgMiwgdHgxLCB0eTIsXHJcbiAgICAgICAgblV2ICsgMywgdHgyLCB0eTJcclxuICAgICk7XHJcbiAgICBtLnNldENvbG9ycyhcclxuICAgICAgICBuVmMgKyAwLCBjMSwgYTEsXHJcbiAgICAgICAgblZjICsgMSwgYzIsIGEyLFxyXG4gICAgICAgIG5WYyArIDIsIGMzLCBhMyxcclxuICAgICAgICBuVmMgKyAzLCBjNCwgYTRcclxuICAgICk7XHJcbiAgICBtLnNldEluZGljZXMoXHJcbiAgICAgICAgbklkeCArIDAsIG5WdHggKyAwLFxyXG4gICAgICAgIG5JZHggKyAxLCBuVnR4ICsgMSxcclxuICAgICAgICBuSWR4ICsgMiwgblZ0eCArIDIsXHJcbiAgICAgICAgbklkeCArIDMsIG5WdHggKyAxLFxyXG4gICAgICAgIG5JZHggKyA0LCBuVnR4ICsgMyxcclxuICAgICAgICBuSWR4ICsgNSwgblZ0eCArIDJcclxuICAgICk7XHJcbn1cclxuXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFRpbGVNYXAgZXh0ZW5kcyBTcHJpdGUge1xyXG4gICAgLyoqXHJcbiAgICAgKkNyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgVGlsZU1hcC5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodFxyXG4gICAgICogQHBhcmFtIHtUZXh0dXJlQmFzZX0gdGV4dHVyZVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRpbGVXaWR0aFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRpbGVIZWlnaHRcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3BhY2luZ1g9MF1cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3BhY2luZ1k9MF1cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbWFyZ2luWD0wXVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFttYXJnaW5ZPTBdXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2Rpc3BsYXlXaWR0aD10aWxlV2lkdGhdXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2Rpc3BsYXlIZWlnaHQ9dGlsZUhlaWdodF1cclxuICAgICAqIEBtZW1iZXJvZiBUaWxlTWFwXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKCB3aWR0aCwgaGVpZ2h0LCB0ZXh0dXJlLCB0aWxlV2lkdGgsIHRpbGVIZWlnaHQsIHNwYWNpbmdYID0gMCwgc3BhY2luZ1kgPSAwLCBtYXJnaW5YID0gMCwgbWFyZ2luWSA9IDAsIGRpc3BsYXlXaWR0aCA9IHRpbGVXaWR0aCwgZGlzcGxheUhlaWdodCA9IHRpbGVIZWlnaHQgKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLl9fbWFwV2lkdGggPSB3aWR0aDtcclxuICAgICAgICB0aGlzLl9fbWFwSGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuX190ZXh0dXJlID0gdGV4dHVyZTtcclxuICAgICAgICB0aGlzLl9fdGlsZVdpZHRoID0gdGlsZVdpZHRoO1xyXG4gICAgICAgIHRoaXMuX190aWxlSGVpZ2h0ID0gdGlsZUhlaWdodDtcclxuICAgICAgICB0aGlzLl9fc3BhY2luZ1ggPSBzcGFjaW5nWDtcclxuICAgICAgICB0aGlzLl9fc3BhY2luZ1kgPSBzcGFjaW5nWTtcclxuICAgICAgICB0aGlzLl9fbWFyZ2luWCA9IG1hcmdpblg7XHJcbiAgICAgICAgdGhpcy5fX21hcmdpblkgPSBtYXJnaW5ZO1xyXG4gICAgICAgIHRoaXMuX19kaXNwbGF5V2lkdGggPSBkaXNwbGF5V2lkdGggfHwgdGlsZVdpZHRoO1xyXG4gICAgICAgIHRoaXMuX19kaXNwbGF5SGVpZ2h0ID0gZGlzcGxheUhlaWdodCB8fCB0aWxlSGVpZ2h0O1xyXG4gICAgICAgIGNvbnN0IG0gPSBuZXcgTWVzaCgpO1xyXG5cclxuICAgICAgICBtLnNldFRleHR1cmUoIHRleHR1cmUgKTtcclxuICAgICAgICB0aGlzLl9fbWVzaCA9IG07XHJcbiAgICAgICAgdGhpcy51c2VDdXN0b21Mb2NhbEJvdW5kcyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fJCRsb2NhbEJvdW5kcy53aWR0aCA9IHdpZHRoICogdGlsZVdpZHRoO1xyXG4gICAgICAgIHRoaXMuXyQkbG9jYWxCb3VuZHMuaGVpZ2h0ID0gaGVpZ2h0ICogdGlsZUhlaWdodDtcclxuICAgICAgICB0aGlzLmNsZWFyQWxsVGlsZXMoKTtcclxuICAgICAgICB0aGlzLmFkZENoaWxkKCBtICk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXJBbGxUaWxlcygpIHtcclxuICAgICAgICBjb25zdCBbdnR4LCBpZHgsIHV2LCB2Y10gPSBbW10sIFtdLCBbXSwgW11dO1xyXG5cclxuICAgICAgICBmb3IgKCBsZXQgeSA9IDA7IHkgPCB0aGlzLl9fbWFwSGVpZ2h0OyB5KysgKSB7XHJcbiAgICAgICAgICAgIGZvciAoIGxldCB4ID0gMDsgeCA8IHRoaXMuX19tYXBXaWR0aDsgeCsrICkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW3gxLHkxLHgyLHkyXSA9IFt4ICogdGhpcy5fX2Rpc3BsYXlXaWR0aCx5ICogdGhpcy5fX2Rpc3BsYXlIZWlnaHQsKCB4ICsgMSApICogdGhpcy5fX2Rpc3BsYXlXaWR0aCwoIHkgKyAxICkgKiB0aGlzLl9fZGlzcGxheUhlaWdodF07XHJcblxyXG4gICAgICAgICAgICAgICAgdnR4LnB1c2goIHgxLHkxLHgyLHkxLHgxLHkyLHgyLHkyICk7XHJcbiAgICAgICAgICAgICAgICB1di5wdXNoKCAwLDAsMCwwLDAsMCwwLDAgKTtcclxuICAgICAgICAgICAgICAgIHZjLnB1c2goIDAsMCwwLDAsMCwwLDAsMCApO1xyXG4gICAgICAgICAgICAgICAgaWR4LnB1c2goIDAsMCwwLCAwLDAsMCApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBtID0gdGhpcy5fX21lc2g7XHJcblxyXG4gICAgICAgIG0uc2V0VmVydGV4QXJyYXkoIHZ0eCApO1xyXG4gICAgICAgIG0uc2V0SW5kZXhBcnJheSggaWR4ICk7XHJcbiAgICAgICAgbS5zZXRUZXh0dXJlQ29vcmRpbmF0ZUFycmF5KCB1diApO1xyXG4gICAgICAgIG0uc2V0Q29sb3JBcnJheSggdmMgKTtcclxuICAgICAgICB0aGlzLl9fbWFwID0gW107XHJcbiAgICB9XHJcblx0XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHhcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdHhcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0eVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZmxpcD1mYWxzZV1cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYzE9MHhmZmZmZmZdXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2ExPTEuMF1cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYzI9YzFdXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2EyPWExXVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtjMz1jMV1cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYTM9YTFdXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2M0PWMxXVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFthND1hMV1cclxuICAgICAqIEBtZW1iZXJvZiBUaWxlTWFwXHJcbiAgICAgKi9cclxuICAgIHNldFRpbGUoIHgseSx0eCx0eSxmbGlwID0gZmFsc2UsYzEgPSAweGZmZmZmZixhMSA9IDEuMCxjMiA9IGMxLGEyID0gYTEsYzMgPSBjMSxhMyA9IGExLGM0ID0gYzEsYTQgPSBhMSApIHtcclxuICAgICAgICBpZiAoIHR4ID09IG51bGwgfHwgdHkgPT0gbnVsbCApIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhclRpbGUoIHgseSApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdyA9IHRoaXMuX19tYXBXaWR0aDtcclxuICAgICAgICBjb25zdCBbeDEseTEseDIseTJdID0gW3ggKiB0aGlzLl9fZGlzcGxheVdpZHRoLHkgKiB0aGlzLl9fZGlzcGxheUhlaWdodCwoIHggKyAxICkgKiB0aGlzLl9fZGlzcGxheVdpZHRoLCggeSArIDEgKSAqIHRoaXMuX19kaXNwbGF5SGVpZ2h0XTtcclxuICAgICAgICBjb25zdCBtID0gdGhpcy5fX21lc2g7XHJcbiAgICAgICAgY29uc3QgW3R4MSx0eTEsdHgyLHR5Ml0gPSB0aWxlVG9SZWN0LmNhbGwoIHRoaXMsdHgsdHkgKTtcclxuICAgICAgICBsZXQgdCA9IHRoaXMuX19tYXBbeSAqIHRoaXMuX19tYXBXaWR0aCArIHhdO1xyXG5cclxuICAgICAgICAvLyBpZiAoIHQgPT0gbnVsbCApIHtcclxuXHJcbiAgICAgICAgLy8gICAgIGNvbnN0IG5WdHggPSBtLmdldFZlcnRleEFycmF5U2l6ZSgpO1xyXG5cclxuICAgICAgICAvLyAgICAgbS5yZXNpemVWZXJ0ZXhBcnJheSggblZ0eCArIDQgKTtcclxuICAgICAgICAvLyAgICAgbS5yZXNpemVUZXh0dXJlQ29vcmRpbmF0ZUFycmF5KCBuVnR4ICsgNCApO1xyXG4gICAgICAgIC8vICAgICBtLnJlc2l6ZUNvbG9yQXJyYXkoIG5WdHggKyA0ICk7XHJcbiAgICAgICAgLy8gICAgIG0ucmVzaXplSW5kZXhBcnJheSggblZ0eCAvIDQgKiA2ICsgNiApO1xyXG4gICAgICAgIC8vICAgICByZXBsYWNlTWVzaERhdGEoIG0sIG5WdHggLyA0ICxcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICB4MSwgeTEsIHgyLCB5MixcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICB0eDEsIHR5MSwgdHgyLCB0eTIsXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgYzEsIGExLCBjMiwgYTIsIGMzLCBhMywgYzQsIGE0ICk7XHJcbiAgICAgICAgLy8gICAgIHQgPSBbdHgsIHR5LCBmbGlwLCBjMSwgYTEsIGMyLCBhMiwgYzMsIGEzLCBjNCwgYTQsIG5WdHggLyA0IF07XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gfSBlbHNlIHtcclxuXHJcbiAgICAgICAgcmVwbGFjZU1lc2hEYXRhKCBtLCB4ICsgeSAqIHRoaXMuX19tYXBXaWR0aCwvLyB0WzExXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHgxLHkxLHgyLHkyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgdHgxLHR5MSx0eDIsdHkyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgYzEsYTIsYzIsYTIsYzMsYTMsYzQsYTQgKTtcclxuICAgICAgICB0ID0gW3R4LCB0eSwgZmxpcCwgYzEsIGExLCBjMiwgYTIsIGMzLCBhMywgYzQsIGE0LCB4ICsgeSAqIHRoaXMuX19tYXBXaWR0aF07Ly90WzExXV07XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICB0aGlzLl9fbWFwW3kgKiB0aGlzLl9fbWFwV2lkdGggKyB4XSA9IHQ7XHJcbiAgICB9XHJcblx0XHJcbiAgICBnZXRUaWxlKCB4LHkgKSB7XHJcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuX19tYXBbeSAqIHRoaXMuX19tYXBXaWR0aCArIHhdO1xyXG5cclxuICAgICAgICBpZiAoIHQgIT0gbnVsbCApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cdFxyXG4gICAgZ2V0QXJyYXkoIHgseSApIHtcclxuICAgICAgICBjb25zdCB0ID0gdGhpcy5fX21hcFt5ICogdGhpcy5fX21hcFdpZHRoICsgeF07XHJcblxyXG4gICAgICAgIGlmICggdCA9PSBudWxsICkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBwb3MgPSB0WzExXTtcclxuICAgICAgICBjb25zdCBbblZ0eCxuSWR4XSA9IFtwb3MgKiA0LHBvcyAqIDZdO1xyXG4gICAgICAgIGNvbnN0IG0gPSB0aGlzLl9fbWVzaDtcclxuICAgICAgICBjb25zdCB2dHggPSBbXTtcclxuICAgICAgICBjb25zdCB1diA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHZjID0gW107XHJcbiAgICAgICAgY29uc3QgaWR4ID0gW107XHJcblxyXG4gICAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IDQ7IGkrKyApIHtcclxuICAgICAgICAgICAgY29uc3QgeyB4LCB5IH0gPSBtLmdldFZlcnRleCggblZ0eCArIGkgKTtcclxuXHJcbiAgICAgICAgICAgIHZ0eC5wdXNoKCB4LHkgKTtcclxuICAgICAgICAgICAgY29uc3QgeyB4OiB1LCB5OiB2IH0gPSBtLmdldFRleHR1cmVDb29yZGluYXRlKCBuVnR4ICsgaSApO1xyXG5cclxuICAgICAgICAgICAgdXYucHVzaCggdSx2ICk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgY29sb3IsIGFscGhhIH0gPSBtLmdldENvbG9yKCBuVnR4ICsgaSApO1xyXG5cclxuICAgICAgICAgICAgdmMucHVzaCggY29sb3IsYWxwaGEgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IDY7IGkrKyApIHtcclxuICAgICAgICAgICAgY29uc3QgdiA9IG0uZ2V0SW5kZXgoIG5JZHggKyBpICk7XHJcblxyXG4gICAgICAgICAgICBpZHgucHVzaCggdiApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIFt2dHgsdXYsdmMsaWR4XTtcclxuICAgIH1cclxuXHRcclxuICAgIGNsZWFyVGlsZSggeCx5ICkge1xyXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLl9fbWFwW3kgKiB0aGlzLl9fbWFwV2lkdGggKyB4XTtcclxuXHJcbiAgICAgICAgaWYgKCB0ICE9IG51bGwgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5JZHggPSB0WzExXSAqIDY7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9fbWVzaC5zZXRJbmRpY2VzKFxyXG4gICAgICAgICAgICAgICAgbklkeCArIDAsIDAsXHJcbiAgICAgICAgICAgICAgICBuSWR4ICsgMSwgMCxcclxuICAgICAgICAgICAgICAgIG5JZHggKyAyLCAwLFxyXG4gICAgICAgICAgICAgICAgbklkeCArIDMsIDAsXHJcbiAgICAgICAgICAgICAgICBuSWR4ICsgNCwgMCxcclxuICAgICAgICAgICAgICAgIG5JZHggKyA1LCAwXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9fbWFwW3kgKiB0aGlzLl9fbWFwV2lkdGggKyB4XSA9IG51bGw7XHJcbiAgICB9XHJcbiAgICAvKlxyXG5cdHNoaWZ0KG9mZnNldFgsb2Zmc2V0WSkge1xyXG5cdFxyXG5cdH1cclxuXHQqL1xyXG5cclxuXHJcbiAgICBzZXRUZXh0dXJlKCB0ZXh0dXJlICkge1xyXG4gICAgICAgIHRoaXMuX19tZXNoLnNldFRleHR1cmUoIHRleHR1cmUgKTsvLywgbWF0cml4KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U2hhZGVyfSBzaGFkZXJcclxuICAgICAqIEBtZW1iZXJvZiBUaWxlTWFwXHJcbiAgICAgKi9cclxuICAgIHNldFNoYWRlciggc2hhZGVyICkge1xyXG4gICAgICAgIHRoaXMuX19tZXNoLnNldFNoYWRlciggc2hhZGVyICk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VGlsZUNvbG9yKCB4LCB5LCBjb2xvciwgYWxwaGEsIGlzQ29ybmVyICkge1xyXG4gICAgICAgIGNvbnN0IHcgPSB0aGlzLl9fbWFwV2lkdGg7XHJcblxyXG4gICAgICAgIGlmICggIWlzQ29ybmVyICkge1xyXG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5fX21hcFt5ICogdGhpcy5fX21hcFdpZHRoICsgeF07XHJcblxyXG4gICAgICAgICAgICBpZiAoIHQgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuVmMgPSB0WzExXSAqIDQ7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5fX21lc2guc2V0Q29sb3JzKFxyXG4gICAgICAgICAgICAgICAgICAgIG5WYyArIDAsIGNvbG9yLCBhbHBoYSxcclxuICAgICAgICAgICAgICAgICAgICBuVmMgKyAxLCBjb2xvciwgYWxwaGEsXHJcbiAgICAgICAgICAgICAgICAgICAgblZjICsgMiwgY29sb3IsIGFscGhhLFxyXG4gICAgICAgICAgICAgICAgICAgIG5WYyArIDMsIGNvbG9yLCBhbHBoYVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIOy9lOuEiOydmCDsu6zrn6xcclxuICAgICAgICAgICAgLy8gMTJcclxuICAgICAgICAgICAgLy8gMzBcclxuICAgICAgICAgICAgY29uc3QgdDAgPSB0aGlzLl9fbWFwW3kgKiB0aGlzLl9fbWFwV2lkdGggKyB4XTtcclxuICAgICAgICAgICAgY29uc3QgdDEgPSAoIHkgPiAwICYmIHggPiAwICkgPyB0aGlzLl9fbWFwWyggeSAtIDEgKSAqIHRoaXMuX19tYXBXaWR0aCArIHggLSAxXSA6IG51bGw7XHJcbiAgICAgICAgICAgIGNvbnN0IHQyID0gKCB5ID4gMCApID8gdGhpcy5fX21hcFsoIHkgLSAxICkgKiB0aGlzLl9fbWFwV2lkdGggKyB4XSA6IG51bGw7XHJcbiAgICAgICAgICAgIGNvbnN0IHQzID0gKCB4ID4gMCApID8gdGhpcy5fX21hcFt5ICogdGhpcy5fX21hcFdpZHRoICsgeCAtIDFdIDogbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGlmICggdDAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9fbWVzaC5zZXRDb2xvciggdDBbMTFdICogNCArIDAsIGNvbG9yLCBhbHBoYSApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIHQxICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fX21lc2guc2V0Q29sb3IoIHQxWzExXSAqIDQgKyAzLCBjb2xvciwgYWxwaGEgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCB0MiApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX19tZXNoLnNldENvbG9yKCB0MlsxMV0gKiA0ICsgMiwgY29sb3IsIGFscGhhICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICggdDMgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9fbWVzaC5zZXRDb2xvciggdDNbMTFdICogNCArIDEsIGNvbG9yLCBhbHBoYSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblRpbGVNYXAuRkxJUF9ESUFHT05BTCA9IFwiZmxpcERpYWdvbmFsXCI7XHJcblRpbGVNYXAuRkxJUF9IT1JJWk9OVEFMID0gXCJmbGlwSG9yaXpvbnRhbFwiO1xyXG5UaWxlTWFwLkZMSVBfVkVSVElDQUwgPSBcImZsaXBWZXJ0aWNhbFwiO1xyXG5cclxuXHJcbiIsIlxyXG5pbXBvcnQgeyBFdmVudERpc3BhdGNoZXIgfSBmcm9tICcuL0V2ZW50RGlzcGF0Y2hlcic7XHJcbmltcG9ydCB7IEV2ZW50IH0gZnJvbSAnLi9FdmVudCc7XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFRpbWVyIGV4dGVuZHMgRXZlbnREaXNwYXRjaGVyIHtcclxuICAgIC8qKlxyXG4gICAgICog7YOA7J2066i4IOqwnOyytOulvCDrp4zrk6Dri6QuXHJcbiAgICAgKiDtg4DsnbTrqLjripQg67CU66GcIOyLnOyeke2VmOyngCDslYrsnLzrqbAgc3RhcnTrpbwg67aI65+s7JW8IOyLnOyeke2VnOuLpC5cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbGF5IC0gbXMg64uo7JyEXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3JlcGVhdENvdW50PTBdIC0g66qHIOuyiOydhCDrsJjrs7XtlZjripQg7YOA7J2066i47J246rCAPyAw7J2066m0IOustO2VnCDrsJjrs7VcclxuICAgICAqIEBtZW1iZXJvZiBUaW1lclxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvciggZGVsYXksIHJlcGVhdENvdW50ID0gMCApIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcclxuICAgICAgICB0aGlzLnJlcGVhdENvdW50ID0gcmVwZWF0Q291bnQ7XHJcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnQoKSB7XHJcbiAgICAgICAgdGhpcy5zdG9wKCk7XHJcbiAgICAgICAgdGhpcy5fX3RpbWVyID0gc2V0SW50ZXJ2YWwoICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jb3VudCsrO1xyXG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IEV2ZW50KCBFdmVudC5USU1FUiApO1xyXG5cclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBlLnRpbWVyID0gdGhpcztcclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCBlICk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIHRoaXMucmVwZWF0Q291bnQgIT0gMCAmJiB0aGlzLmNvdW50ID49IHRoaXMucmVwZWF0Q291bnQgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3AoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMuZGVsYXkgKTtcclxuICAgIH1cclxuXHJcbiAgICBzdG9wKCkge1xyXG4gICAgICAgIGlmICggdGhpcy5fX3RpbWVyICkge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKCB0aGlzLl9fdGltZXIgKTtcclxuICAgICAgICAgICAgdGhpcy5fX3RpbWVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q3VycmVudENvdW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvdW50O1xyXG4gICAgfVxyXG5cclxuICAgIGdldERlbGF5KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRlbGF5O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZGVsYXkg66eM7YG87J2YIOyngOyXsOyLnOqwhCDtm4Tsl5Ag7ZWo7IiY66W8IOyLpO2Wie2VnOuLpFxyXG4gICAgICpcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWxheSAtIG1zIOuLqOychC4gMOydhCDspJjrj4Qg64+Z6riw7KCB7Jy866GcIOyLpO2WieuQmOyngCDslYrripTri6QuXHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmdW5jXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdD19IGNvbnRleHRcclxuICAgICAqIEByZXR1cm5zIHtUaW1lcn1cclxuICAgICAqIEBtZW1iZXJvZiBUaW1lclxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZGVsYXllZENhbGwoIGRlbGF5LCBmdW5jLCBjb250ZXh0ICkge1xyXG4gICAgICAgIGNvbnNvbGUuYXNzZXJ0KCBmdW5jICE9IG51bGwgKTtcclxuICAgICAgICBjb25zdCB0ID0gbmV3IFRpbWVyKCBkZWxheSwgMSApO1xyXG5cclxuICAgICAgICB0LmFkZEV2ZW50TGlzdGVuZXIoIEV2ZW50LlRJTUVSLCBmdW5jLCBjb250ZXh0ICk7XHJcbiAgICAgICAgdC5zdGFydCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIO2YhOyerCDsi5zqsITsnYQg67CA66as7IS47Luo65OcIOuLqOychOuhnCDrj4zroKTspIDri6RcclxuICAgICAqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICogQG1lbWJlcm9mIFRpbWVyXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBub3coKSB7XHJcbiAgICAgICAgcmV0dXJuICggK25ldyBEYXRlICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDtjbztj6zrqLzsiqQg7YOA7J2066i464qUIFRpbWVyLm5vdygp67O064ukIOuNlCDsoJXtmZXtlZwg7Iuc6rCEIOqwhOqyqeydhCDsuKHsoJXtlaAg7IiYIOyeiOyngOunjFxyXG4gICAgICog7J206rKD7J20IO2YhOyerCDsi5zqsITsnYQg7ZGc7Iuc7ZWY6rOgIOyeiOuKlCDqsoPsnYAg7JWE64uY7JeQIOyjvOydmC4gVGltZXIubm93KCnsmYAg64uk66W4IOqwkuydtOuLpC5cclxuICAgICAqIOqwhOqyqeydgCDrp6TsmrAg7KCV7ZmV7ZWY66mwIDFtcyDsnbTsg4HsnZgg7ZW07IOB64+E66W8IOuPjOugpOykgOuLpC4g6re465+s64KYIOydtCDtmLjstpwg7J6Q7LK06rCAIOu5hOyLuOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICogQG1lbWJlcm9mIFRpbWVyXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXRQZXJmb3JtYWNlVGltZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog7YyM7J287J2066aE7J2064KYIOuhnOq3uOyXkCDstpzroKXtlaAg65WMIOyCrOyaqe2VmOq4sCDtjrjtlZwgSVNP7Y+s66mn7J2YIOyLnOqwhCDtkZzsi5zrpbwg64+M66Ck7KSA64ukXHJcbiAgICAgKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHBhcmFtIHtEYXRlfSBbZGF0ZT1uZXcgRGF0ZSgpXVxyXG4gICAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgICAqIEBtZW1iZXJvZiBUaW1lclxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0U2hvcnREYXRlKCBkYXRlID0gbmV3IERhdGUoKSApIHtcclxuICAgICAgICByZXR1cm4gZGF0ZS50b0lTT1N0cmluZygpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB3YWl0KCBtcyApIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoICggcmVzb2x2ZSxyZWplY3QgKT0+e1xyXG4gICAgICAgICAgICB0aGlzLmRlbGF5ZWRDYWxsKCBtcyxyZXNvbHZlICk7XHJcbiAgICAgICAgfSApO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB3YWl0RnJhbWUoIGZyYW1lICkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSggKCByZXNvbHZlLHJlamVjdCApPT57XHJcbiAgICAgICAgICAgIHRoaXMuZGVsYXllZENhbGwoIDEwMDAgLyA2MCAqIGZyYW1lLHJlc29sdmUgKTtcclxuICAgICAgICB9ICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IG00IH0gZnJvbSAndHdnbC5qcyc7XG5cblxuZXhwb3J0IGNsYXNzIFRyYW5zZm9ybSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX3ggPSAwO1xuICAgICAgICB0aGlzLl95ID0gMDtcbiAgICAgICAgdGhpcy5fYW5jaG9yWCA9IDA7XG4gICAgICAgIHRoaXMuX2FuY2hvclkgPSAwO1xuICAgICAgICB0aGlzLl9zY2FsZVggPSAxO1xuICAgICAgICB0aGlzLl9zY2FsZVkgPSAxO1xuICAgICAgICB0aGlzLl9yb3RhdGlvbiA9IDA7XG4gICAgICAgIHRoaXMuX21hdHJpeERpcnR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX21hdHJpeCA9IG00LmlkZW50aXR5KCk7XG4gICAgICAgIHRoaXMuaW52YWxpZGF0ZUNhbGxiYWNrID0gbnVsbDtcbiAgICB9XG5cbiAgICBnZXQgeCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3g7XG4gICAgfVxuXG4gICAgZ2V0IHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl95O1xuICAgIH1cblxuICAgIGdldCBhbmNob3JYKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYW5jaG9yWDtcbiAgICB9XG5cbiAgICBnZXQgYW5jaG9yWSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FuY2hvclk7XG4gICAgfVxuXG5cbiAgICBnZXQgc2NhbGVYKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NhbGVYO1xuICAgIH1cblxuICAgIGdldCBzY2FsZVkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zY2FsZVk7XG4gICAgfVxuXG4gICAgZ2V0IHJvdGF0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcm90YXRpb247ICAgICAgIFxuICAgIH1cblxuICAgIHNldCB4KCB2ICkge1xuICAgICAgICB0aGlzLnNldERpcnR5KCB0aGlzLl94ICE9IHYgKTtcbiAgICAgICAgdGhpcy5feCA9IHY7XG4gICAgfVxuXG4gICAgc2V0IHkoIHYgKSB7XG4gICAgICAgIHRoaXMuc2V0RGlydHkoIHRoaXMuX3kgIT0gdiApO1xuICAgICAgICB0aGlzLl95ID0gdjtcbiAgICB9XG5cbiAgICBzZXQgYW5jaG9yWCggdiApIHtcbiAgICAgICAgdGhpcy5zZXREaXJ0eSggdGhpcy5fYW5jaG9yWCAhPSB2ICk7XG4gICAgICAgIHRoaXMuX2FuY2hvclggPSB2O1xuICAgIH1cblxuICAgIHNldCBhbmNob3JZKCB2ICkge1xuICAgICAgICB0aGlzLnNldERpcnR5KCB0aGlzLl9hbmNob3JZICE9IHYgKTtcbiAgICAgICAgdGhpcy5fYW5jaG9yWSA9IHY7XG4gICAgfVxuXG4gICAgc2V0IHNjYWxlWCggdiApIHtcbiAgICAgICAgdGhpcy5zZXREaXJ0eSggdGhpcy5fc2NhbGVYICE9IHYgKTtcbiAgICAgICAgdGhpcy5fc2NhbGVYID0gdjtcbiAgICB9XG5cbiAgICBzZXQgc2NhbGVZKCB2ICkge1xuICAgICAgICB0aGlzLnNldERpcnR5KCB0aGlzLl9zY2FsZVkgIT0gdiApO1xuICAgICAgICB0aGlzLl9zY2FsZVkgPSB2O1xuICAgIH1cblxuICAgIHNldCByb3RhdGlvbiggdiApIHtcbiAgICAgICAgdGhpcy5zZXREaXJ0eSggdGhpcy5fcm90YXRpb24gIT0gdiApO1xuICAgICAgICB0aGlzLl9yb3RhdGlvbiA9IHY7XG4gICAgfVxuXG4gICAgZ2V0IG1hdHJpeCgpIHtcbiAgICAgICAgaWYgKCB0aGlzLl9tYXRyaXhEaXJ0eSApIHtcbiAgICAgICAgICAgIGNvbnN0IG1hdCA9ICBtNC50cmFuc2xhdGlvbiggW3RoaXMuX3gsdGhpcy5feSwwXSApO1xuXG4gICAgICAgICAgICAvLyDslbXsu6Trp4ztgbwg7Jet7Jy866GcIOydtOuPme2VnCDri6TsnYxcbiAgICAgICAgICAgIC8vIOyXrOq4sOqwgCDqtazrsoTsoITqs7wg64uk66W4IOygkFxuICAgICAgICAgICAgLy8gbTQudHJhbnNsYXRlKCBtYXQsIFt0aGlzLmFuY2hvclBvc2l0aW9uLngsdGhpcy5hbmNob3JQb3NpdGlvbi55LDBdLG1hdCApO1xuICAgICAgICAgICAgbTQuc2NhbGUoIG1hdCwgW3RoaXMuX3NjYWxlWCx0aGlzLl9zY2FsZVksMV0gLG1hdCApO1xuICAgICAgICAgICAgbTQucm90YXRlWiggbWF0LHRoaXMuX3JvdGF0aW9uICogTWF0aC5QSSAvIDE4MCAsbWF0ICk7ICAgICAgICBcbiAgICAgICAgICAgIC8vIOyXrOq4sOyEnCDri6Tsi5wg7JW17Luk66eM7YG8IOydtOuPme2VtOyVvCDtlZjripTrjbBcbiAgICAgICAgICAgIC8vIOydtCDsspjrpqzripQgdnPsl5DshJwg7ZWc64ukXG4gICAgICAgICAgICB0aGlzLl9tYXRyaXggPSBtYXQ7XG4gICAgICAgICAgICB0aGlzLl9tYXRyaXhEaXJ0eSA9IGZhbHNlO1xuICAgICAgICB9IFxuICAgICAgICByZXR1cm4gdGhpcy5fbWF0cml4O1xuICAgIH1cblxuICAgIHNldERpcnR5KCB2ICkge1xuICAgICAgICBpZiAoIHRoaXMuaW52YWxpZGF0ZUNhbGxiYWNrICYmIHYgKSB7XG4gICAgICAgICAgICAvLyBfbWF0cml4RGlydHnqsIAg7J2067KI7JeQIGZhbHNl7JeQ7IScIHRydWXqsIAg65CgIOuVjOunjCDtmLjstpztlZjripTqsowg7JWE64uI6rOgXG4gICAgICAgICAgICAvLyB0cnVl7JeQ7IScIHRydWXqsIAg65CgIOuVjOuPhCDtmLjstpwg7ZWc64ukLlxuICAgICAgICAgICAgLy8g6re4656Y7JW8IF9ib3VuZHNEaXJ0eeqwgCDsoJzrjIDroZwg7LKY66asIOuQmOq4sCDrlYzrrLhcbiAgICAgICAgICAgIHRoaXMuaW52YWxpZGF0ZUNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbWF0cml4RGlydHkgPSB0aGlzLl9tYXRyaXhEaXJ0eSB8fCB2O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7VHJhbnNmb3JtfSBcbiAgICAgKiBAbWVtYmVyb2YgVHJhbnNmb3JtXG4gICAgICovXG4gICAgY2xvbmUoKSB7XG4gICAgICAgIGNvbnN0IG5ld1RyYW5zZm9ybSA9IHt9O1xuXG4gICAgICAgIE9iamVjdC5hc3NpZ24oIG5ld1RyYW5zZm9ybSx0aGlzICk7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZiggbmV3VHJhbnNmb3JtLHRoaXMuY29uc3RydWN0b3IucHJvdG90eXBlICk7XG4gICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICByZXR1cm4gbmV3VHJhbnNmb3JtO1xuICAgIH1cbn1cblxuXG4iLCJcbmltcG9ydCB7IEFzc2V0IH0gZnJvbSAnLi9Bc3NldCc7XG5pbXBvcnQgeyBGb250QmFzZSB9IGZyb20gJy4vRm9udEJhc2UnO1xuaW1wb3J0IHsgVXRpbHMgfSBmcm9tICcuL1V0aWxzJztcblxuZXhwb3J0IGNsYXNzIFRydWVUeXBlRm9udCBleHRlbmRzIEZvbnRCYXNlIHtcbiAgICBjb25zdHJ1Y3RvciggdHJ1ZVR5cGVGb250TmFtZSxyZWZlcmVuY2VTaXplLCBzdHlsZXMgKSB7XG4gICAgICAgIHN1cGVyKCB0cnVlVHlwZUZvbnROYW1lLCByZWZlcmVuY2VTaXplLCBzdHlsZXMgKTtcbiAgICAgICAgLy8gVFRGXG4gICAgICAgIHRoaXMuYXNzZXQgPSBuZXcgQXNzZXQoIHRydWVUeXBlRm9udE5hbWUsQXNzZXQuQXNzZXRUeXBlcy5UcnVlVHlwZUZvbnQgKTtcbiAgICAgICAgdGhpcy5hc3NldC5sb2FkKCB7IFxuICAgICAgICAgICAgcmVmZXJlbmNlU2l6ZTogdGhpcy5yZWZlcmVuY2VTaXplLCBcbiAgICAgICAgICAgIHN0eWxlczogICAgICAgIHRoaXMuc3R5bGVzIFxuICAgICAgICB9ICk7XG4gICAgICAgIHRoaXMuZm9udExvYWRlZCA9IGZhbHNlO1xuICAgIH0gICAgXG5cbiAgICBtZWFzdXJlVGV4dFdpZHRoKCBzdHIsc2l6ZSApIHtcbiAgICAgICAgc3VwZXIubWVhc3VyZVRleHRXaWR0aCggc3RyLHNpemUgKTtcblxuICAgICAgICBjb25zdCBmb250SW5mbyA9IHRoaXMuYXNzZXQuZm9udEluZm87XG5cbiAgICAgICAgbGV0IHdpZHRoID0gMDtcblxuICAgICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKysgKSB7XG4gICAgICAgICAgICBjb25zdCBjaGFyID0gc3RyLmNoYXJDb2RlQXQoIGkgKTtcbiAgICAgICAgICAgIGNvbnN0IGNoYXJJbmZvID0gZm9udEluZm8uY2hhcnNbY2hhcl07XG5cbiAgICAgICAgICAgIGlmICggQXJyYXkuaXNBcnJheSggY2hhckluZm8gKSApIHtcbiAgICAgICAgICAgICAgICB3aWR0aCArPSBjaGFySW5mb1swXTtcbiAgICAgICAgICAgICAgICBpZiAoIGZhbHNlICkge1xuICAgICAgICAgICAgICAgIC8vIO2BrOuhrOyXkOyEnOuKlCDsnbQg7LKY66as6rCAIO2VhOyalOyXhuuKlCDqsoMg6rCZ7J2MLiDri6Trpbgg67iM65287Jqw7KCA7JeQ7IScIO2ZleyduCDtlYTsmpRcbiAgICAgICAgICAgICAgICAvLyDssqvquIDsnpDqsIAg7JWe7Jy866GcIOyCkOyguOuCmOyYqCDqsr3smrBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBpID09IDAgJiYgY2hhckluZm9bMV0gPCAwICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGggKz0gLWNoYXJJbmZvWzFdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIOuniOyngOuniSDquIDsnpDqsIAg65Kk66GcIOyCkOyguOuCmOyYqCDqsr3smrBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBpID09IHN0ci5sZW5ndGggLSAxICYmIGNoYXJJbmZvWzJdID4gMCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoICs9IGNoYXJJbmZvWzJdO1xuICAgICAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgIH0gICBcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIGNoYXJJbmZvICE9IG51bGwgKSB7XG4gICAgICAgICAgICAgICAgd2lkdGggKz0gY2hhckluZm87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIGkgPCBzdHIubGVuZ3RoIC0gMSAmJiBmb250SW5mby5rZXJuaW5nUGFpcnMgKSB7XG4gICAgICAgICAgICAvL+uniOyngOuniSDquIDsnpDqsIAg7JWE64uM6rK97JqwIGtlcm5pbmdcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFyTmV4dCA9IHN0ci5jaGFyQ29kZUF0KCBpICsgMSApO1xuXG4gICAgICAgICAgICAgICAgY29uc3Qga2VybmluZyA9IGZvbnRJbmZvLmtlcm5pbmdQYWlyc1tjaGFyICsgXCIsXCIgKyBjaGFyTmV4dF07XG5cbiAgICAgICAgICAgICAgICBpZiAoIGtlcm5pbmcgKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoICs9IGtlcm5pbmc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3aWR0aCAvIGZvbnRJbmZvLnVuaXRzUGVyRW0gKiAoIHNpemUgfHwgdGhpcy5yZWZlcmVuY2VTaXplICk7XG4gICAgfVxufVxuXG5cbiIsImltcG9ydCB7IEV2ZW50IH0gZnJvbSAnLi9FdmVudCc7XG5pbXBvcnQgeyBFdmVudERpc3BhdGNoZXIgfSBmcm9tICcuL0V2ZW50RGlzcGF0Y2hlcic7XG5pbXBvcnQgeyBTcHJpdGUgfSBmcm9tICcuL1Nwcml0ZSc7XG5pbXBvcnQgeyBlYXNpbmcgfSBmcm9tICcuL2Vhc2luZyc7XG5pbXBvcnQgeyBTdGFnZSB9IGZyb20gJy4vU3RhZ2UnO1xuaW1wb3J0IHsgYXBwbGljYXRpb24gfSBmcm9tICcuL0FwcGxpY2F0aW9uJztcblxuLyoqXG4gKiBAdHlwZWRlZiBQcm9wXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9ufHN0cmluZz19IGVhc2VcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbj19IGF1dG9QbGF5XG4gKiBAcHJvcGVydHkge2Jvb2xlYW49fSBzd2FwVmFsdWVzXG4gKiBAcHJvcGVydHkge2Jvb2xlYW49fSByZWZsZWN0XG4gKiBAcHJvcGVydHkge251bWJlcj19IGRlbGF5XG4gKiBAcHJvcGVydHkge251bWJlcj19IHJlcGVhdENvdW50XG4gKiBAcHJvcGVydHkge2Jvb2xlYW49fSBkaXNwYXRjaEV2ZW50c1xuICogQHByb3BlcnR5IHtudW1iZXI9fSB0aW1lU2NhbGVcbiAqIEBwcm9wZXJ0eSB7VHdlZW49fSBuZXh0VHdlZW5cbiAqL1xuXG5cblxuLypcbmJhc2Ugb24gR1R3ZWVuIGZvciBHaWRlcm9zO1xuVGhpcyBjb2RlIGlzIE1JVCBsaWNlbnNlZCwgc2VlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwO1xuQ29weXJpZ2h0IChjKSAyMDEwIC0gMjAxMSBHaWRlcm9zIE1vYmlsZTtcbkJhc2VkIG9uIFR3ZWVuIDIuMDEgZm9yIEFjdGlvblNjcmlwdCAzO1xuaHR0cDovL2dza2lubmVyLmNvbS9saWJyYXJpZXMvR1R3ZWVuL1xuR1R3ZWVuIDIuMDEgZm9yIEFjdGlvblNjcmlwdCAzIGlzIE1JVCBsaWNlbnNlZCwgc2VlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwO1xuQ29weXJpZ2h0IChjKSAyMDA5IEdyYW50IFNraW5uZXI7XG5Ob3RlczpcbiogRG9jdW1lbnRhdGlvbiBpcyBkZXJpdmVkIGZyb20gR1R3ZWVuIDIuMDEncyBvcmlnaW5hbCBkb2N1bWVudGF0aW9uLlxuKi9cblxuLypcblx0KiBUd2VlbiBpcyBhIGxpZ2h0LXdlaWdodCBpbnN0YW5jZSBvcmllbnRlZCB0d2VlbiBlbmdpbmUuIFRoaXMgbWVhbnMgdGhhdCB5b3UgaW5zdGFudGlhdGUgdHdlZW5zIGZvciBzcGVjaWZpYyBwdXJwb3NlcywgJiYgdGhlbiByZXVzZSwgdXBkYXRlIHx8IGRpc2NhcmQgdGhlbS5cblx0KiBUaGlzIGlzIGRpZmZlcmVudCB0aGFuIGNlbnRyYWxpemVkIHR3ZWVuIGVuZ2luZXMgd2hlcmUgeW91IFwicmVnaXN0ZXJcIiB0d2VlbnMgd2l0aCBhIGdsb2JhbCBvYmplY3QuIFRoaXMgcHJvdmlkZXMgYSBtb3JlIGZhbWlsaWFyICYmIHVzZWZ1bCBpbnRlcmZhY2U7XG5cdCogZm9yIG9iamVjdCBvcmllbnRlZCBwcm9ncmFtbWVycy5cblxuXHQqIFR3ZWVuIGJvYXN0cyBhIG51bWJlciBvZiBhZHZhbmNlZCBmZWF0dXJlczpcblx0KiAtIGZyYW1lICYmIHRpbWUgYmFzZWQgZHVyYXRpb25zL3Bvc2l0aW9ucyB3aGljaCBjYW4gYmUgc2V0IHBlciB0d2Vlbjtcblx0KiAtIHNpbXBsZSBzZXF1ZW5jZWQgdHdlZW5zIHVzaW5nIC5uZXh0VHdlZW47XG5cdCogLSBwYXVzZSAmJiByZXN1bWUgaW5kaXZpZHVhbCB0d2VlbnMgfHwgYWxsIHR3ZWVucztcblx0KiAtIGp1bXAgZGlyZWN0bHkgdG8gdGhlIH0gfHwgYmVnaW5uaW5nIG9mIGEgdHdlZW4gd2l0aCA6dG9FbmQoKSB8fCA6dG9CZWdpbm5pbmcoKTtcblx0KiAtIGp1bXAgdG8gYW55IGFyYml0cmFyeSBwb2ludCBpbiB0aGUgdHdlZW4gd2l0aCA6c2V0UG9zaXRpb24oKTtcblx0KiAtIGNvbXBsZXRlLCBpbml0LCAmJiBjaGFuZ2UgY2FsbGJhY2tzO1xuXHQqIC0gc21hcnQgZ2FyYmFnZSBjb2xsZWN0b3IgaW50ZXJhY3Rpb25zIChwcmV2ZW50cyBjb2xsZWN0aW9uIHdoaWxlIGFjdGl2ZSwgYWxsb3dzIGNvbGxlY3Rpb24gaWYgdGFyZ2V0IGlzIGNvbGxlY3RlZCk7XG5cdCogLSBlYXN5IHRvIHNldCB1cCBpbiBhIHNpbmdsZSBsaW5lIG9mIGNvZGU7XG5cdCogLSBjYW4gcmVwZWF0IHx8IHJlZmxlY3QgYSB0d2VlbiBhIHNwZWNpZmllZCBudW1iZXIgb2YgdGltZXM7XG5cdCogLSBkZXRlcm1pbmlzdGljLCBzbyBzZXR0aW5nIGEgcG9zaXRpb24gb24gYSB0d2VlbiB3aWxsIChhbG1vc3QpIGFsd2F5cyByZXN1bHQgaW4gcHJlZGljdGFibGUgcmVzdWx0cztcbiovXG5cbmZ1bmN0aW9uIGhleFRvUmdiKCBjICkge1xuICAgIHJldHVybiBbKCBjID4+IDE2ICkgLyAyNTUsICggKCBjID4+IDggKSAmIDB4ZmYgKSAvIDI1NSwgKCBjICYgMHhmZiApIC8gMjU1XTtcbn1cblxuXG5jb25zdCBjb3B5VGlja0xpc3QgPSBbXTtcblxuZXhwb3J0IGNsYXNzIFR3ZWVuIGV4dGVuZHMgRXZlbnREaXNwYXRjaGVyIHtcbiAgICAvKipcbiAgICAgKkNyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgVHdlZW4uXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHRhcmdldFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvblxuICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gdmFsdWVzXG4gICAgICogQHBhcmFtIHtzdHJpbmd8ZnVuY3Rpb258UHJvcD19IHByb3BzXG4gICAgICogQG1lbWJlcm9mIFR3ZWVuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoIHRhcmdldCwgZHVyYXRpb24sIHZhbHVlcywgcHJvcHMgKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuX2RlbGF5ID0gMDtcbiAgICAgICAgdGhpcy5fcGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fcG9zaXRpb24gPSBOdW1iZXIuTmFOO1xuICAgICAgICB0aGlzLl9pc0VuZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmF1dG9QbGF5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yZXBlYXRDb3VudCA9IDE7XG4gICAgICAgIHRoaXMudGltZVNjYWxlID0gMTtcbiAgICAgICAgdGhpcy5lYXNlID0gVHdlZW4uZGVmYXVsdEVhc2U7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudHMgPSBUd2Vlbi5kZWZhdWx0RGlzcGF0Y2hFdmVudHM7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICB0aGlzLmR1cmF0aW9uID0gZHVyYXRpb247XG4gICAgICAgIHRoaXMucmVmbGVjdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5uZXh0VHdlZW4gPSB1bmRlZmluZWQ7XG4gICAgICAgIGxldCBzd2FwID0gbnVsbDtcblxuICAgICAgICBpZiAoIHR5cGVvZiBwcm9wcyA9PSBcImZ1bmN0aW9uXCIgfHwgdHlwZW9mIHByb3BzID09IFwic3RyaW5nXCIgKSB7XG4gICAgICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgICAgIHByb3BzID0geyBlYXNlOiBwcm9wcyB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCBwcm9wcyAhPSBudWxsICkge1xuICAgICAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgICAgICAgICBzd2FwID0gcHJvcHMuc3dhcFZhbHVlcztcbiAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICAgICAgcHJvcHMuc3dhcFZhbHVlcyA9IG51bGw7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKCB0aGlzLCBwcm9wcyApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCB0eXBlb2YgdGhpcy5lYXNlID09IFwic3RyaW5nXCIgKSB7XG4gICAgICAgICAgICB0aGlzLmVhc2UgPSBlYXNpbmdbdGhpcy5lYXNlXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUuYXNzZXJ0KCB0aGlzLmVhc2UgIT0gbnVsbCApO1xuICAgICAgICB0aGlzLnJlc2V0VmFsdWVzKCB2YWx1ZXMgKTtcblxuICAgICAgICBpZiAoIHN3YXAgKSB7XG4gICAgICAgICAgICB0aGlzLnN3YXBWYWx1ZXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggdGhpcy5kdXJhdGlvbiA9PSAwICYmIHRoaXMuZ2V0RGVsYXkoKSA9PSAwICYmIHRoaXMuYXV0b1BsYXkgKSB7XG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZWRQb3NpdGlvbiA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnNldFBvc2l0aW9uKCAwICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoICFUd2Vlbi5hY3RpdmUgKSB7XG4gICAgICAgICAgICBhcHBsaWNhdGlvbi5zdGFnZS5hZGRFdmVudExpc3RlbmVyKCBFdmVudC5FTlRFUl9GUkFNRSwgVHdlZW4ub25UaWNrICk7XG4gICAgICAgICAgICBUd2Vlbi5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcblx0XHQqIFBsYXlzIG9yIHBhdXNlcyBhIHR3ZWVuLiBZb3UgY2FuIHN0aWxsIGNoYW5nZSB0aGUgcG9zaXRpb24gdmFsdWUgZXh0ZXJuYWxseSBvbiBhIHBhdXNlZDtcblx0XHQqIHR3ZWVuLCBidXQgaXQgd2lsbCAhYmUgdXBkYXRlZCBhdXRvbWF0aWNhbGx5LiBXaGlsZSBwYXVzZWQgaXMgZmFsc2UsIHRoZSB0d2VlbiBpcyBhbHNvIHByZXZlbnRlZDtcblx0XHQqIGZyb20gYmVpbmcgZ2FyYmFnZSBjb2xsZWN0ZWQgd2hpbGUgaXQgaXMgYWN0aXZlLlxuXHRcdCogVGhpcyBpcyBhY2hpZXZlZCBpbiBvbmUgb2YgdHdvIHdheXM6XG5cdFx0KiAxLiBJZiB0aGUgdGFyZ2V0IG9iamVjdCBkZXJpdmVzIGZyb20gRXZlbnREaXNwYXRjaGVyLCB0aGVuIHRoZSB0d2VlbiB3aWxsIHN1YnNjcmliZSB0byBhIGR1bW15IGV2ZW50IHVzaW5nIGEgaGFyZCByZWZlcmVuY2UuIFRoaXMgYWxsb3dzO1xuXHRcdCogdGhlIHR3ZWVuIHRvIGJlIGdhcmJhZ2UgY29sbGVjdGVkIGlmIGl0cyB0YXJnZXQgaXMgYWxzbyBjb2xsZWN0ZWQsICYmIHRoZXJlIGFyZSBubyBvdGhlciBleHRlcm5hbCByZWZlcmVuY2VzIHRvIGl0LlxuXHRcdCogMi4gSWYgdGhlIHRhcmdldCBvYmplY3QgaXMgIWFuIEV2ZW50RGlzcGF0Y2hlciwgdGhlbiB0aGUgdHdlZW4gaXMgcGxhY2VkIGluIGEgZ2xvYmFsIGxpc3QsIHRvIHByZXZlbnQgY29sbGVjdGlvbiB1bnRpbCBpdCBpcyBwYXVzZWQgfHwgY29tcGxldGVzLlxuXHRcdCogTm90ZSB0aGF0IHBhdXNpbmcgYWxsIHR3ZWVucyB2aWEgdGhlIFR3ZWVuLnBhdXNlQWxsIHN0YXRpYyBwcm9wZXJ0eSB3aWxsICFmcmVlIHRoZSB0d2VlbnMgZm9yIGNvbGxlY3Rpb24uXG5cdCovXG4gICAgLyoqXG4gICAgICpcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqIEBtZW1iZXJvZiBUd2VlblxuICAgICAqL1xuICAgIGlzUGF1c2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGF1c2VkO1xuICAgIH1cblxuXG4gICAgaXNFbmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0VuZDtcbiAgICB9XG5cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLnNldFBhdXNlZCggdHJ1ZSApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbHVlXG4gICAgICogQG1lbWJlcm9mIFR3ZWVuXG4gICAgICovXG4gICAgc2V0UGF1c2VkKCB2YWx1ZSApIHtcbiAgICAgICAgaWYgKCB2YWx1ZSA9PSB0aGlzLl9wYXVzZWQgKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9wYXVzZWQgPSB2YWx1ZTtcblxuICAgICAgICBpZiAoIHRoaXMuX3BhdXNlZCApIHtcbiAgICAgICAgICAgIFR3ZWVuLmFjdGl2ZVR3ZWVuTGlzdC5kZWxldGUoIHRoaXMgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICggTnVtYmVyLmlzTmFOKCB0aGlzLl9wb3NpdGlvbiApIHx8ICggdGhpcy5yZXBlYXRDb3VudCAhPSAwICYmIHRoaXMuX3Bvc2l0aW9uID49IHRoaXMucmVwZWF0Q291bnQgKiB0aGlzLmR1cmF0aW9uICkgKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVhY2hlZCB0aGUgZW5kLCByZXNldC5cbiAgICAgICAgICAgICAgICB0aGlzLl9pbml0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZWRQb3NpdGlvbiA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVkUG9zaXRpb25PbGQgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMucmF0aW8gPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMucmF0aW9PbGQgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb25PbGQgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gLXRoaXMuZ2V0RGVsYXkoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgVHdlZW4uYWN0aXZlVHdlZW5MaXN0LnNldCggdGhpcyx0cnVlICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdG9wQWxsKCkge1xuICAgICAgICBmb3IgKCBjb25zdCBbdHdlZW5dIG9mIFR3ZWVuLmFjdGl2ZVR3ZWVuTGlzdCApIHtcbiAgICAgICAgICAgIHR3ZWVuLnN0b3AoKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLypcblx0XHQqIEdldHMgJiYgc2V0cyB0aGUgcG9zaXRpb24gb2YgdGhlIHR3ZWVuIGluIGZyYW1lcyB8fCBzZWNvbmRzIChkZXBlbmRpbmcgb24gLnVzZUZyYW1lcykuIFRoaXMgdmFsdWUgd2lsbDtcblx0XHQqIGJlIGNvbnN0cmFpbmVkIGJldHdlZW4gLWRlbGF5ICYmIHJlcGVhdENvdW50KmR1cmF0aW9uLiBJdCB3aWxsIGJlIHJlc29sdmVkIHRvIGEgLmNhbGN1bGF0ZWRQb3NpdGlvbiBiZWZvcmU7XG5cdFx0KiBiZWluZyBhcHBsaWVkLlxuXHRcdCpcblx0XHQqIE5lZ2F0aXZlIHZhbHVlczpcblx0XHQqIFZhbHVlcyBiZWxvdyAwIHdpbGwgYWx3YXlzIHJlc29sdmUgdG8gYSBjYWxjdWxhdGVkUG9zaXRpb24gb2YgMC4gTmVnYXRpdmUgdmFsdWVzIGNhbiBiZSB1c2VkIHRvIHNldCB1cCBhIGRlbGF5IG9uIHRoZSB0d2VlbiwgYXMgdGhlIHR3ZWVuIHdpbGwgaGF2ZSB0byBjb3VudCB1cCB0byAwIGJlZm9yZSBpbml0aW5nLlxuXHRcdCpcblx0XHQqIFBvc2l0aXZlIHZhbHVlczpcblx0XHQqIFBvc2l0aXZlIHZhbHVlcyBhcmUgcmVzb2x2ZWQgYmFzZWQgb24gdGhlIGR1cmF0aW9uLCByZXBlYXRDb3VudCwgJiYgcmVmbGVjdCBwcm9wZXJ0aWVzLlxuXHQqL1xuICAgIGdldFBvc2l0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwb3NcbiAgICAgKiBAcmV0dXJucyB7VHdlZW59XG4gICAgICogQG1lbWJlcm9mIFR3ZWVuXG4gICAgICovXG4gICAgc2V0UG9zaXRpb24oIHBvcyApIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbk9sZCA9IHRoaXMuX3Bvc2l0aW9uO1xuICAgICAgICB0aGlzLnJhdGlvT2xkID0gdGhpcy5yYXRpbztcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVkUG9zaXRpb25PbGQgPSB0aGlzLmNhbGN1bGF0ZWRQb3NpdGlvbjtcbiAgICAgICAgY29uc3QgbWF4UG9zaXRpb24gPSB0aGlzLnJlcGVhdENvdW50ICogdGhpcy5kdXJhdGlvbjtcbiAgICAgICAgY29uc3QgaXNFbmQgPSBwb3MgPj0gbWF4UG9zaXRpb24gJiYgdGhpcy5yZXBlYXRDb3VudCA+IDA7XG5cbiAgICAgICAgaWYgKCBpc0VuZCApIHtcbiAgICAgICAgICAgIGlmICggdGhpcy5jYWxjdWxhdGVkUG9zaXRpb25PbGQgPT0gbWF4UG9zaXRpb24gKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IG1heFBvc2l0aW9uO1xuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVkUG9zaXRpb24gPSAoIHRoaXMucmVmbGVjdCAmJiAoIHRoaXMucmVwZWF0Q291bnQgJSAyID09IDAgKSApICYmIDAgfHwgdGhpcy5kdXJhdGlvbjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gcG9zO1xuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVkUG9zaXRpb24gPSAoIHRoaXMuX3Bvc2l0aW9uIDwgMCApID8gMCA6ICggdGhpcy5fcG9zaXRpb24gJSB0aGlzLmR1cmF0aW9uICk7XG5cbiAgICAgICAgICAgIGlmICggdGhpcy5yZWZsZWN0ICYmIE1hdGguZmxvb3IoIHRoaXMuZ2V0UG9zaXRpb24oKSAvIHRoaXMuZHVyYXRpb24gKSAlIDIgIT0gMCApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZWRQb3NpdGlvbiA9IHRoaXMuZHVyYXRpb24gLSB0aGlzLmNhbGN1bGF0ZWRQb3NpdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmF0aW8gPSAoIHRoaXMuZHVyYXRpb24gPT0gMCAmJiB0aGlzLl9wb3NpdGlvbiA+PSAwICkgPyAxIDogdGhpcy5lYXNlKCB0aGlzLmNhbGN1bGF0ZWRQb3NpdGlvbiAvIHRoaXMuZHVyYXRpb24sIDAsIDEsIDEgKTtcblxuICAgICAgICBpZiAoIHRoaXMudGFyZ2V0ICYmICggdGhpcy5fcG9zaXRpb24gPj0gMCB8fCB0aGlzLnBvc2l0aW9uT2xkID49IDAgKSAmJiB0aGlzLmNhbGN1bGF0ZWRQb3NpdGlvbiAhPSB0aGlzLmNhbGN1bGF0ZWRQb3NpdGlvbk9sZCApIHtcbiAgICAgICAgICAgIGlmICggIXRoaXMuX2luaXRlZCApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICggY29uc3QgbiBpbiB0aGlzLl9lbmRWYWx1ZXMgKSB7XG4gICAgICAgICAgICAgICAgbGV0IGluaXRWYWwsIHJhbmdlVmFsLCB2YWw7XG5cbiAgICAgICAgICAgICAgICBpZiAoIG4gPT0gXCJjb2xvclwiICkge1xuICAgICAgICAgICAgICAgICAgICAvLyDsu6zrn6zripQg7Kq86rCc7IScIO2KuOyciO2VtOyVvO2VnOuLpFxuICAgICAgICAgICAgICAgICAgICBpbml0VmFsID0gdGhpcy5faW5pdFZhbHVlc1tuXTtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2VWYWwgPSB0aGlzLl9yYW5nZVZhbHVlc1tuXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsMSAgPSBpbml0VmFsWzBdICsgcmFuZ2VWYWxbMF0gKiB0aGlzLnJhdGlvO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwyICA9IGluaXRWYWxbMV0gKyByYW5nZVZhbFsxXSAqIHRoaXMucmF0aW87XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbDMgID0gaW5pdFZhbFsyXSArIHJhbmdlVmFsWzJdICogdGhpcy5yYXRpbztcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldC5zZXRDb2xvck11bHRpcGxpZXIoIHZhbDEsIHZhbDIsIHZhbDMgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbml0VmFsID0gdGhpcy5faW5pdFZhbHVlc1tuXTtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2VWYWwgPSB0aGlzLl9yYW5nZVZhbHVlc1tuXTtcbiAgICAgICAgICAgICAgICAgICAgdmFsID0gaW5pdFZhbCArIHJhbmdlVmFsICogdGhpcy5yYXRpbztcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5hc3NlcnQoIHRoaXMudGFyZ2V0W25dICE9IG51bGwgKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXRbbl0gPSB2YWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCB0aGlzLmRpc3BhdGNoRXZlbnRzICkge1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCBcImNoYW5nZVwiICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIGlzRW5kICkge1xuICAgICAgICAgICAgdGhpcy5faXNFbmQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zZXRQYXVzZWQoIHRydWUgKTtcblxuICAgICAgICAgICAgaWYgKCB0aGlzLm5leHRUd2VlbiApIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRUd2Vlbi5zZXRQYXVzZWQoIGZhbHNlICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICggdGhpcy5kaXNwYXRjaEV2ZW50cyApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoIFwiY29tcGxldGVcIiApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG5cbiAgICAvKlxuXHRcdCogVGhlIGxlbmd0aCBvZiB0aGUgZGVsYXkgaW4gZnJhbWVzIHx8IHNlY29uZHMgKGRlcGVuZGluZyBvbiAudXNlRnJhbWVzKS5cblx0XHQqIFRoZSBkZWxheSBvY2N1cnMgYmVmb3JlIGEgdHdlZW4gcmVhZHMgaW5pdGlhbCB2YWx1ZXMgfHwgc3RhcnRzIHBsYXlpbmcuXG5cdCovXG4gICAgLyoqXG4gICAgICpcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICogQG1lbWJlcm9mIFR3ZWVuXG4gICAgICovXG4gICAgZ2V0RGVsYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAgICogQHJldHVybnMge1R3ZWVufVxuICAgICAqIEBtZW1iZXJvZiBUd2VlblxuICAgICAqL1xuICAgIHNldERlbGF5KCB2YWx1ZSApIHtcbiAgICAgICAgaWYgKCB0aGlzLl9wb3NpdGlvbiA8PSAwICkge1xuICAgICAgICAgICAgdGhpcy5fcG9zaXRpb24gPSAtdmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9kZWxheSA9IHZhbHVlO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuXG4gICAgLypcblx0XHQqIFNldHMgdGhlIG51bWVyaWMgZW5kIHZhbHVlIGZvciBhIHByb3BlcnR5IG9uIHRoZSB0YXJnZXQgb2JqZWN0IHRoYXQgeW91IHdvdWxkIGxpa2UgdG8gdHdlZW4uXG5cdFx0KiBGb3IgZXhhbXBsZSwgaWYgeW91IHdhbnRlZCB0byB0d2VlbiB0byBhIG5ldyB4IHBvc2l0aW9uLCB5b3UgY291bGQgdXNlOiBteVR3ZWVuLnNldFZhbHVlKFwieFwiLDQwMCkuXG5cdFx0KlxuXHRcdCogbmFtZTogVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIHR3ZWVuLlxuXHRcdCogdmFsdWU6IFRoZSBudW1lcmljIGVuZCB2YWx1ZSAodGhlIHZhbHVlIHRvIHR3ZWVuIHRvKS5cblx0Ki9cbiAgICAvKipcbiAgICAgKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAgICogQHJldHVybnMge1R3ZWVufVxuICAgICAqIEBtZW1iZXJvZiBUd2VlblxuICAgICAqL1xuICAgIHNldFZhbHVlKCBuYW1lLCB2YWx1ZSApIHtcbiAgICAgICAgdGhpcy5fZW5kVmFsdWVzW25hbWVdID0gdmFsdWU7XG4gICAgICAgIHRoaXMuaW52YWxpZGF0ZSgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qXG5cdFx0KiBSZXR1cm5zIHRoZSBlbmQgdmFsdWUgZm9yIHRoZSBzcGVjaWZpZWQgcHJvcGVydHkgaWYgb25lIGV4aXN0cy5cblx0XHQqXG5cdFx0KiBuYW1lOiBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gcmV0dXJuIGEgfSB2YWx1ZSBmb3IuXG5cdCovXG4gICAgZ2V0VmFsdWUoIG5hbWUgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmRWYWx1ZXNbbmFtZV07XG4gICAgfVxuXG4gICAgLypcblx0XHQqIFJlbW92ZXMgYSBlbmQgdmFsdWUgZnJvbSB0aGUgdHdlZW4uIFRoaXMgcHJldmVudHMgdGhlIFR3ZWVuIGluc3RhbmNlIGZyb20gdHdlZW5pbmcgdGhlIHByb3BlcnR5LlxuXHRcdCpcblx0XHQqIG5hbWU6IFRoZSBuYW1lIG9mIHRoZSBlbmQgcHJvcGVydHkgdG8gZGVsZXRlLlxuXHQqL1xuICAgIGRlbGV0ZVZhbHVlKCBuYW1lICkge1xuICAgICAgICB0aGlzLl9yYW5nZVZhbHVlc1tuYW1lXSA9IG51bGw7XG4gICAgICAgIHRoaXMuX2luaXRWYWx1ZXNbbmFtZV0gPSBudWxsO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9lbmRWYWx1ZXNbbmFtZV0gIT0gbnVsbDtcblxuICAgICAgICB0aGlzLl9lbmRWYWx1ZXNbbmFtZV0gPSBudWxsO1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG5cbiAgICAvKlxuXHRcdCogU2hvcnRoYW5kIG1ldGhvZCBmb3IgbWFraW5nIG11bHRpcGxlIHNldFByb3BlcnR5IGNhbGxzIHF1aWNrbHkuXG5cdFx0KiBUaGlzIGFkZHMgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzIHRvIHRoZSB2YWx1ZXMgbGlzdC5cblx0XHQqIFxuXHRcdCogRXhhbXBsZTogc2V0IHggYW5kIHkgZW5kIHZhbHVlczpcblx0XHQqIG15VHdlZW4uc2V0RW5kVmFsdWVzKHt4OjIwMCwgeTo0MDB9KTtcblx0XHQqXG5cdFx0KiBwcm9wZXJ0aWVzOiBBbiBvYmplY3QgY29udGFpbmluZyBlbmQgcHJvcGVydHkgdmFsdWVzLlxuXHQqL1xuICAgIC8qKlxuICAgICAqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gdmFsdWVzXG4gICAgICogQHJldHVybnMge1R3ZWVufVxuICAgICAqIEBtZW1iZXJvZiBUd2VlblxuICAgICAqL1xuICAgIHNldFZhbHVlcyggdmFsdWVzICkge1xuICAgICAgICBPYmplY3QuYXNzaWduKCB0aGlzLl9lbmRWYWx1ZXMsIHZhbHVlcyApO1xuICAgICAgICB0aGlzLmludmFsaWRhdGUoKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKlxuXHRcdCogU2ltaWxhciB0byAuc2V0RW5kVmFsdWVzKCksIGJ1dCBjbGVhcnMgYWxsIHByZXZpb3VzIGVuZCB2YWx1ZXM7XG5cdFx0KiBiZWZvcmUgc2V0dGluZyB0aGUgbmV3IG9uZXMuXG5cdFx0KlxuXHRcdCogcHJvcGVydGllczogQW4gb2JqZWN0IGNvbnRhaW5pbmcgZW5kIHByb3BlcnR5IHZhbHVlcy5cblx0Ki9cbiAgICAvKipcbiAgICAgKlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZXNcbiAgICAgKiBAcmV0dXJucyB7VHdlZW59XG4gICAgICogQG1lbWJlcm9mIFR3ZWVuXG4gICAgICovXG4gICAgcmVzZXRWYWx1ZXMoIHZhbHVlcyApIHtcbiAgICAgICAgdGhpcy5fZW5kVmFsdWVzID0ge307XG4gICAgICAgIHRoaXMuc2V0VmFsdWVzKCB2YWx1ZXMgKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKlxuXHRcdCogUmV0dXJucyB0aGUgdGFibGUgb2YgYWxsIGVuZCBwcm9wZXJ0aWVzICYmIHRoZWlyIHZhbHVlcy4gVGhpcyBpcyBhIGNvcHkgb2YgdmFsdWVzLCBzbyBtb2RpZnlpbmc7XG5cdFx0KiB0aGUgcmV0dXJuZWQgb2JqZWN0IHdpbGwgbm90IGFmZmVjdCB0aGUgdHdlZW4uXG5cdCovXG4gICAgLyoqXG4gICAgICpcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtvYmplY3R9XG4gICAgICogQG1lbWJlcm9mIFR3ZWVuXG4gICAgICovXG4gICAgZ2V0VmFsdWVzKCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbigge30sIHRoaXMuX2VuZFZhbHVlcyApO1xuICAgIH1cblxuICAgIC8qXG5cdFx0KiBSZXR1cm5zIHRoZSBpbml0aWFsIHZhbHVlIGZvciB0aGUgc3BlY2lmaWVkIHByb3BlcnR5LlxuXHRcdCogTm90ZSB0aGF0IHRoZSB2YWx1ZSB3aWxsIG5vdCBiZSBhdmFpbGFibGUgdW50aWwgdGhlIHR3ZWVuIGluaXRzLlxuXHQqL1xuICAgIC8qKlxuICAgICAqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAqIEBtZW1iZXJvZiBUd2VlblxuICAgICAqL1xuICAgIGdldEluaXRWYWx1ZSggbmFtZSApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2luaXRWYWx1ZXNbbmFtZV07XG4gICAgfVxuXG4gICAgLypcblx0XHQqIFN3YXBzIHRoZSBpbml0ICYmIH0gdmFsdWVzIGZvciB0aGUgdHdlZW4sIGVmZmVjdGl2ZWx5IHJldmVyc2luZyBpdC5cblx0XHQqIFRoaXMgc2hvdWxkIGdlbmVyYWxseSBvbmx5IGJlIGNhbGxlZCBiZWZvcmUgdGhlIHR3ZWVuIHN0YXJ0cyBwbGF5aW5nLlxuXHRcdCogVGhpcyB3aWxsIGZvcmNlIHRoZSB0d2VlbiB0byBpbml0IGlmIGl0IGhhc24ndCBhbHJlYWR5IGRvbmUgc28sIHdoaWNoO1xuXHRcdCogbWF5IHJlc3VsdCBpbiBhbiBvbkluaXQgY2FsbC5cblx0XHQqIEl0IHdpbGwgYWxzbyBmb3JjZSBhIHJlbmRlciAoc28gdGhlIHRhcmdldCBpbW1lZGlhdGVseSBqdW1wcyB0byB0aGUgbmV3IHZhbHVlcztcblx0XHQqIGltbWVkaWF0ZWx5KSB3aGljaCB3aWxsIHJlc3VsdCBpbiB0aGUgb25DaGFuZ2UgY2FsbGJhY2sgYmVpbmcgY2FsbGVkLlxuXHRcdCogXG5cdFx0KiBZb3UgY2FuIGFsc28gdXNlIHRoZSBzcGVjaWFsIFwic3dhcFZhbHVlc1wiIHByb3BlcnR5IG9uIHRoZSBwcm9wcyBwYXJhbWV0ZXIgb2Y7XG5cdFx0KiB0aGUgVHdlZW4gY29uc3RydWN0b3IgdG8gY2FsbCA6c3dhcFZhbHVlcygpIGFmdGVyIHRoZSB2YWx1ZXMgYXJlIHNldC5cblx0XHQqIFxuXHRcdCogVGhlIGZvbGxvd2luZyBleGFtcGxlIHdvdWxkIHR3ZWVuIHRoZSB0YXJnZXQgZnJvbSAxMDAsMTAwIHRvIGl0cyBjdXJyZW50IHBvc2l0aW9uOlxuXHRcdCogbmV3IFR3ZWVuKGJhbGwsIDIsIHt4PTEwMCwgeT0xMDB9LCB7c3dhcFZhbHVlcz10cnVlfSk7XG5cdCovXG4gICAgc3dhcFZhbHVlcygpIHtcbiAgICAgICAgaWYgKCAhdGhpcy5faW5pdGVkICkge1xuICAgICAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBvID0gdGhpcy5fZW5kVmFsdWVzO1xuXG4gICAgICAgIHRoaXMuX2VuZFZhbHVlcyA9IHRoaXMuX2luaXRWYWx1ZXM7XG4gICAgICAgIHRoaXMuX2luaXRWYWx1ZXMgPSBvO1xuXG4gICAgICAgIGZvciAoIGNvbnN0IG4gaW4gdGhpcy5fcmFuZ2VWYWx1ZXMgKSB7XG4gICAgICAgICAgICBjb25zdCB2ID0gdGhpcy5fcmFuZ2VWYWx1ZXNbbl07XG5cbiAgICAgICAgICAgIHRoaXMuX3JhbmdlVmFsdWVzW25dID0gLXY7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNhbGN1bGF0ZWRQb3NpdGlvbiA9IG51bGw7XG5cbiAgICAgICAgaWYgKCB0aGlzLl9wb3NpdGlvbiA8IDAgKSB7XG4gICAgICAgICAgICBjb25zdCBwb3MgPSB0aGlzLnBvc2l0aW9uT2xkO1xuXG4gICAgICAgICAgICB0aGlzLnNldFBvc2l0aW9uKCAwICk7XG4gICAgICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMucG9zaXRpb25PbGQ7XG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uT2xkID0gcG9zO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRQb3NpdGlvbiggdGhpcy5fcG9zaXRpb24gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG5cdFx0KiBSZWFkcyBhbGwgb2YgdGhlIGluaXRpYWwgdmFsdWVzIGZyb20gdGFyZ2V0ICYmIGNhbGxzIHRoZSBvbkluaXQgY2FsbGJhY2suXG5cdFx0KiBUaGlzIGlzIGNhbGxlZCBhdXRvbWF0aWNhbGx5IHdoZW4gYSB0d2VlbiBiZWNvbWVzIGFjdGl2ZSAoZmluaXNoZXMgZGVsYXlpbmcpO1xuXHRcdCogJiYgd2hlbiA6c3dhcFZhbHVlcygpIGlzIGNhbGxlZC4gSXQgd291bGQgcmFyZWx5IGJlIHVzZWQgZGlyZWN0bHk7XG5cdFx0KiBidXQgaXMgZXhwb3NlZCBmb3IgcG9zc2libGUgdXNlIGJ5IHBvd2VyIHVzZXJzLlxuXHQqL1xuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMuX2luaXRlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuX2luaXRWYWx1ZXMgPSB7fTtcbiAgICAgICAgdGhpcy5fcmFuZ2VWYWx1ZXMgPSB7fTtcblxuICAgICAgICBmb3IgKCBjb25zdCBrZXkgaW4gdGhpcy5fZW5kVmFsdWVzICkge1xuICAgICAgICAgICAgaWYgKCBrZXkgPT0gXCJjb2xvclwiICkge1xuICAgICAgICAgICAgICAgIC8vIGhleOuhnCDrk6TslrTsmKgg6rCS7J2EIHIsIGcsIGIg6rCS7Jy866GcIOuCmOuIoOyEnCDsoIDsnqXtlZzri6RcbiAgICAgICAgICAgICAgICB0aGlzLl9pbml0VmFsdWVzW2tleV0gPSBoZXhUb1JnYiggdGhpcy50YXJnZXQuY29sb3JNdWx0aXBsaWVyICk7XG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlO1xuXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBoZXhUb1JnYiggdGhpcy5fZW5kVmFsdWVzW2tleV0gKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9yYW5nZVZhbHVlc1trZXldID0gW1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZVswXSAtIHBhcnNlRmxvYXQoIHRoaXMuX2luaXRWYWx1ZXNba2V5XVswXSApLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZVsxXSAtIHBhcnNlRmxvYXQoIHRoaXMuX2luaXRWYWx1ZXNba2V5XVsxXSApLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZVsyXSAtIHBhcnNlRmxvYXQoIHRoaXMuX2luaXRWYWx1ZXNba2V5XVsyXSApXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy/rgpjrqLjsp4Ag7JuQ67O47Jy866GcXG4gICAgICAgICAgICAgICAgY29uc29sZS5hc3NlcnQoIHRoaXMudGFyZ2V0W2tleV0gIT0gbnVsbCwgYO2KuOyciOycvOuhnCDsobDsnpHtlZjroKTripQg6rCS7J20IG51bGzsnbTri6QuYCApO1xuICAgICAgICAgICAgICAgIHRoaXMuX2luaXRWYWx1ZXNba2V5XSA9IHRoaXMudGFyZ2V0W2tleV07XG4gICAgICAgICAgICAgICAgdGhpcy5fcmFuZ2VWYWx1ZXNba2V5XSA9IHRoaXMuX2VuZFZhbHVlc1trZXldIC0gdGhpcy5faW5pdFZhbHVlc1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCB0aGlzLmRpc3BhdGNoRXZlbnRzICkge1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCBcImluaXRcIiApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcblx0XHQqIEp1bXBzIHRoZSB0d2VlbiB0byBpdHMgYmVnaW5uaW5nICYmIHBhdXNlcyBpdC4gVGhpcyBpcyB0aGUgc2FtZSBhcyBjYWxsaW5nIC5zZXRQb3NpdGlvbigwKSBhbmQgLnNldFBhdXNlZCh0cnVlKS5cblx0Ki9cbiAgICB0b1N0YXJ0KCkge1xuICAgICAgICB0aGlzLnNldFBvc2l0aW9uKCAwICk7XG4gICAgICAgIC8vdGhpcy5zZXRQYXVzZWQodHJ1ZSk7XG4gICAgfVxuXG4gICAgY2FuY2VsKCkge1xuICAgICAgICB0aGlzLnNldFBvc2l0aW9uKCAwICk7XG4gICAgICAgIHRoaXMuc3RvcCgpO1xuICAgIH1cblxuICAgIC8qXG5cdFx0KiBKdW1wcyB0aGUgdHdlZW4gdG8gaXRzIGVuZCBhbmQgcGF1c2VzIGl0LiBUaGlzIGlzIHJvdWdobHkgdGhlIHNhbWUgYXMgY2FsbGluZyAuc2V0UG9zaXRpb24ocmVwZWF0Q291bnQqZHVyYXRpb24pLlxuXHQqL1xuICAgIHRvRW5kKCkge1xuICAgICAgICB0aGlzLnNldFBvc2l0aW9uKCAoIHRoaXMucmVwZWF0Q291bnQgPiAwICkgJiYgdGhpcy5yZXBlYXRDb3VudCAqIHRoaXMuZHVyYXRpb24gfHwgdGhpcy5kdXJhdGlvbiApO1xuICAgIH1cblxuICAgIGludmFsaWRhdGUoKSB7XG4gICAgICAgIHRoaXMuX2luaXRlZCA9IGZhbHNlO1xuXG4gICAgICAgIGlmICggdGhpcy5fcG9zaXRpb24gPiAwICkge1xuICAgICAgICAgICAgdGhpcy5fcG9zaXRpb24gPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCB0aGlzLmF1dG9QbGF5ICkge1xuICAgICAgICAgICAgdGhpcy5zZXRQYXVzZWQoIGZhbHNlICk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7VHdlZW59XG4gICAgICogQG1lbWJlcm9mIFR3ZWVuXG4gICAgICovXG4gICAgb25Db21wbGV0ZVJlbW92ZUZyb21QYXJlbnQoKSB7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lciggXCJjb21wbGV0ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXQucmVtb3ZlRnJvbVBhcmVudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSx0aGlzICk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZ1bmNcbiAgICAgKiBAcGFyYW0ge2FueT19IGRhdGFcbiAgICAgKiBAcmV0dXJucyB7VHdlZW59XG4gICAgICogQG1lbWJlcm9mIFR3ZWVuXG4gICAgICovXG4gICAgb25Db21wbGV0ZSggZnVuYyxkYXRhICkge1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoIFwiY29tcGxldGVcIixmdW5jLGRhdGEgKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuY1xuICAgICAqIEBwYXJhbSB7YW55PX0gZGF0YVxuICAgICAqIEByZXR1cm5zIHtUd2Vlbn1cbiAgICAgKiBAbWVtYmVyb2YgVHdlZW5cbiAgICAgKi9cbiAgICBvbkNoYW5nZSggZnVuYyxkYXRhICkge1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoIFwiY2hhbmdlXCIsZnVuYyxkYXRhICk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VHdlZW59IHR3ZWVuXG4gICAgICogQHJldHVybnMge1R3ZWVufVxuICAgICAqIEBtZW1iZXJvZiBUd2VlblxuICAgICAqL1xuICAgIHNldE5leHRUd2VlbiggdHdlZW4gKSB7XG4gICAgICAgIHRoaXMubmV4dFR3ZWVuID0gdHdlZW47XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvblxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSB2YWx1ZXNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xmdW5jdGlvbnxQcm9wPX0gcHJvcHNcbiAgICAgKiBAcmV0dXJucyB7VHdlZW59XG4gICAgICogQG1lbWJlcm9mIFR3ZWVuXG4gICAgICovXG4gICAgdHdlZW4oIGR1cmF0aW9uLCB2YWx1ZXMsIHByb3BzICkge1xuICAgICAgICBjb25zdCBuZXdUd2VlbiA9IG5ldyBUd2VlbiggdGhpcy50YXJnZXQsIGR1cmF0aW9uLCB2YWx1ZXMsIHByb3BzICk7XG5cbiAgICAgICAgaWYgKCAhdGhpcy5pc0VuZCgpICkge1xuICAgICAgICAgICAgbmV3VHdlZW4uc2V0UGF1c2VkKCB0cnVlICk7XG4gICAgICAgICAgICB0aGlzLnNldE5leHRUd2VlbiggbmV3VHdlZW4gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXdUd2VlbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHhcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZHVyYXRpb24gPSAwXVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfGZ1bmN0aW9ufFByb3A9fSBwcm9wc1xuICAgICAqIEByZXR1cm5zIHtUd2Vlbn1cbiAgICAgKiBAbWVtYmVyb2YgVHdlZW5cbiAgICAgKi9cbiAgICBtb3ZlKCB4LCB5LCBkdXJhdGlvbiA9IDAsIHByb3BzICkge1xuICAgICAgICBjb25zdCBuZXdUd2VlbiA9IG5ldyBUd2VlbiggdGhpcy50YXJnZXQsIGR1cmF0aW9uLCB7IHg6IHgsIHk6IHkgfSwgcHJvcHMgKTtcblxuICAgICAgICBpZiAoICF0aGlzLmlzRW5kKCkgKSB7XG4gICAgICAgICAgICBuZXdUd2Vlbi5zZXRQYXVzZWQoIHRydWUgKTtcbiAgICAgICAgICAgIHRoaXMuc2V0TmV4dFR3ZWVuKCBuZXdUd2VlbiApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ld1R3ZWVuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2R1cmF0aW9uPTBdXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbj19IGZ1bmNcbiAgICAgKiBAcGFyYW0ge29iamVjdD19IGNvbnRleHRcbiAgICAgKiBAcmV0dXJucyB7VHdlZW59XG4gICAgICogQG1lbWJlcm9mIFR3ZWVuXG4gICAgICovXG4gICAgd2FpdCggZHVyYXRpb24gPSAwLCBmdW5jLCBjb250ZXh0ICkge1xuICAgICAgICBjb25zdCBuZXdUd2VlbiA9IG5ldyBUd2VlbiggdGhpcy50YXJnZXQsIGR1cmF0aW9uICk7XG5cbiAgICAgICAgaWYgKCBmdW5jICkge1xuICAgICAgICAgICAgdGhpcy5vbkNvbXBsZXRlKCBmdW5jLCBjb250ZXh0ICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoICF0aGlzLmlzRW5kKCkgKSB7XG4gICAgICAgICAgICBuZXdUd2Vlbi5zZXRQYXVzZWQoIHRydWUgKTtcbiAgICAgICAgICAgIHRoaXMuc2V0TmV4dFR3ZWVuKCBuZXdUd2VlbiApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ld1R3ZWVuO1xuICAgIH1cblxuICAgIHN0b3BUd2VlbkNoYWluKCkge1xuICAgICAgICBUd2Vlbi5zdG9wVGFyZ2V0KCB0aGlzLnRhcmdldCApO1xuICAgIH1cblxuXG4gICAgc3RhdGljIGxpbmVhckVhc2UoIGEsIGIsIGMsIGQgKSB7XG4gICAgICAgIHJldHVybiBhO1xuICAgIH1cblxuICAgIHN0YXRpYyBvblRpY2soKSB7XG4gICAgICAgIGlmICggVHdlZW4ucGF1c2VBbGwgKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkdCA9IDEgLyA2MCAqIFR3ZWVuLnRpbWVTY2FsZUFsbCAqIDEwMDA7XG5cbiAgICAgICAgZm9yICggY29uc3QgW3R3ZWVuXSBvZiBUd2Vlbi5hY3RpdmVUd2Vlbkxpc3QgKSB7XG4gICAgICAgICAgICBjb3B5VGlja0xpc3QucHVzaCggdHdlZW4gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IGNvcHlUaWNrTGlzdC5sZW5ndGg7IGkrKyApIHtcbiAgICAgICAgICAgIGNvbnN0IHR3ZWVuID0gY29weVRpY2tMaXN0W2ldO1xuXG4gICAgICAgICAgICB0d2Vlbi5zZXRQb3NpdGlvbiggdHdlZW4uX3Bvc2l0aW9uICsgKCB0d2Vlbi51c2VGcmFtZXMgJiYgVHdlZW4udGltZVNjYWxlQWxsIHx8IGR0ICkgKiB0d2Vlbi50aW1lU2NhbGUgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggY29weVRpY2tMaXN0Lmxlbmd0aCA9PSAwICkge1xuICAgICAgICAgICAgYXBwbGljYXRpb24uc3RhZ2UucmVtb3ZlRXZlbnRMaXN0ZW5lciggRXZlbnQuRU5URVJfRlJBTUUsIFR3ZWVuLm9uVGljayApO1xuICAgICAgICAgICAgVHdlZW4uYWN0aXZlID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvcHlUaWNrTGlzdC5sZW5ndGggPSAwO1xuICAgIH1cblxuICAgIC8vIO2DgOqyn+yXkCDqsbjrprAg7Yq47JyIIOuqqOuRkCDsoJXsp4BcbiAgICBzdGF0aWMgc3RvcFRhcmdldCggdGFyZ2V0ICkge1xuICAgICAgICBmb3IgKCBjb25zdCBbdHdlZW5dIG9mIFR3ZWVuLmFjdGl2ZVR3ZWVuTGlzdCApIHtcbiAgICAgICAgICAgIGlmICggdHdlZW4udGFyZ2V0ID09IHRhcmdldCApIHtcbiAgICAgICAgICAgICAgICB0d2Vlbi5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKlxuXHQqIENvbnN0cnVjdHMgYSBuZXcgVHdlZW4gaW5zdGFuY2UuXG5cdCpcblx0KiB0YXJnZXQ6IFRoZSBvYmplY3Qgd2hvc2UgcHJvcGVydGllcyB3aWxsIGJlIHR3ZWVuZWQuXG5cdCogZHVyYXRpb246IFRoZSBsZW5ndGggb2YgdGhlIHR3ZWVuIGluIGZyYW1lcyB8fCBzZWNvbmRzIGRlcGVuZGluZyBvbiB0aGUgdGltaW5nTW9kZS5cblx0KiB2YWx1ZXM6IEFuIG9iamVjdCBjb250YWluaW5nIH0gcHJvcGVydHkgdmFsdWVzLiBGb3IgZXhhbXBsZSwgdG8gdHdlZW4gdG8geD0xMDAsIHk9MTAwLCB5b3UgY291bGQgcGFzcyB7eD0xMDAsIHk9MTAwfSBhcyB0aGUgdmFsdWVzIG9iamVjdC5cblx0KiBwcm9wczogQW4gb2JqZWN0IGNvbnRhaW5pbmcgcHJvcGVydGllcyB0byBzZXQgb24gdGhpcyB0d2Vlbi4gRm9yIGV4YW1wbGUsIHlvdSBjb3VsZCBwYXNzIHtlYXNlPW15RWFzZX0gdG8gc2V0IHRoZSBlYXNlIHByb3BlcnR5IG9mIHRoZSBuZXcgaW5zdGFuY2UuIEl0IGFsc28gc3VwcG9ydHMgYSBzaW5nbGUgc3BlY2lhbCBwcm9wZXJ0eSBcInN3YXBWYWx1ZXNcIiB0aGF0IHdpbGwgY2F1c2UgOnN3YXBWYWx1ZXMoKSB0byBiZSBjYWxsZWQgYWZ0ZXIgdGhlIHZhbHVlcyBzcGVjaWZpZWQgaW4gdGhlIHZhbHVlcyBwYXJhbWV0ZXIgYXJlIHNldC5cbiAgICAqL1xufVxuXG4vKlxuXG7tirjsnIjsnYQg7Jew6rKw7ZW07IScIOyVoOuLiOuplOydtOyFmOydhCDrp4zrk6Qg7IiYIOyeiOuPhOuhnSDtlZjquLAg7JyE7ZW07IScIOyekeyEsVxuU3ByaXRlIO2MjOydvOyXkCDtlajsiJjrpbwg7KCV7J2Y7ZWY66m0IOyDge2YuOywuOyhsCDrlYzrrLjsl5Ag7JWI65CoXG5zcHIubW92ZSgxMCwxMCwxMDApLm1vdmUoMTAwLDUwLDIwMCkuLi5cblxuKi9cblxuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZS50d2VlbiA9IGZ1bmN0aW9uICggZHVyYXRpb24sIHZhbHVlcywgcHJvcHMgKSB7XG4gICAgcmV0dXJuIG5ldyBUd2VlbiggdGhpcywgZHVyYXRpb24sIHZhbHVlcywgcHJvcHMgKTtcbn07XG5cbkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUubW92ZSA9IGZ1bmN0aW9uICggeCwgeSwgZHVyYXRpb24gPSAwLCBwcm9wcyApIHtcbiAgICByZXR1cm4gbmV3IFR3ZWVuKCB0aGlzLCBkdXJhdGlvbiwgeyB4OiB4LCB5OiB5IH0sIHByb3BzICk7XG59O1xuXG5FdmVudERpc3BhdGNoZXIucHJvdG90eXBlLndhaXQgPSBmdW5jdGlvbiAoIGR1cmF0aW9uID0gMCwgZnVuYywgY29udGV4dCApIHtcbiAgICByZXR1cm4gbmV3IFR3ZWVuKCB0aGlzLCBkdXJhdGlvbiApLm9uQ29tcGxldGUoIGZ1bmMsY29udGV4dCApO1xufTtcblxuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZS5nZXRUd2VlbnMgPSBmdW5jdGlvbiAoIHBsYXlpbmdPbmx5ICkge1xuICAgIGNvbnN0IHR3ZWVucyA9IFtdO1xuXG4gICAgZm9yICggY29uc3QgW3R3ZWVuXSBvZiBUd2Vlbi5hY3RpdmVUd2Vlbkxpc3QgKSB7XG4gICAgICAgIGlmICggdHdlZW4udGFyZ2V0ID09IHRoaXMgKSB7XG4gICAgICAgICAgICBpZiAoICFwbGF5aW5nT25seSB8fCB0d2Vlbi5wYXVzZWQgKSB7XG4gICAgICAgICAgICAgICAgdHdlZW5zLnB1c2goIHR3ZWVuICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHdlZW5zLmxlbmd0aCA+IDAgPyB0d2VlbnMgOiBudWxsO1xufTtcblxuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZS5zdG9wQWxsVHdlZW5zID0gZnVuY3Rpb24gKCkge1xuICAgIFR3ZWVuLnN0b3BUYXJnZXQoIHRoaXMgKTtcbn07XG5cblR3ZWVuLmFjdGl2ZSA9IGZhbHNlO1xuVHdlZW4uZGVmYXVsdERpc3BhdGNoRXZlbnRzID0gdHJ1ZTtcblR3ZWVuLmRlZmF1bHRFYXNlID0gVHdlZW4ubGluZWFyRWFzZTtcblR3ZWVuLnBhdXNlQWxsID0gZmFsc2U7XG5Ud2Vlbi50aW1lU2NhbGVBbGwgPSAxO1xuVHdlZW4uYWN0aXZlVHdlZW5MaXN0ID0gbmV3IE1hcCgpO1xuXG5cbiIsIlxyXG5mdW5jdGlvbiBnZXRSZWN0TGlrZSggciApIHtcclxuICAgIGlmICggQXJyYXkuaXNBcnJheSggciApIHx8IHIgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkgKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgeDogclswXSx5OiByWzFdLCB3aWR0aDogclsyXSxoZWlnaHQ6IHJbM10gfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHI7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFBvaW50TGlrZSggcCApIHtcclxuICAgIGlmICggQXJyYXkuaXNBcnJheSggcCApIHx8IHAgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkgKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgeDogcFswXSx5OiBwWzFdIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBwO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFJlY3Qge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIFJlY3QuXHJcbiAgICAgKiBAcGFyYW0ge1tudW1iZXIsbnVtYmVyLG51bWJlcixudW1iZXJdfEZsb2F0MzJBcnJheXxudW1iZXJ8UmVjdD19IHhcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0geVxyXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSB3aWR0aFxyXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBoZWlnaHRcclxuICAgICAqIEBtZW1iZXJvZiBSZWN0XHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKCB4LHksd2lkdGgsaGVpZ2h0ICkge1xyXG4gICAgICAgIGlmICggQXJyYXkuaXNBcnJheSggeCApIHx8IHggaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkgKSB7XHJcbiAgICAgICAgICAgIHRoaXMueCAgPSB4WzBdO1xyXG4gICAgICAgICAgICB0aGlzLnkgPSB4WzFdO1xyXG4gICAgICAgICAgICB0aGlzLndpZHRoID0geFsyXTtcclxuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSB4WzNdO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIHR5cGVvZiB4ID09PSBcIm9iamVjdFwiICkge1xyXG4gICAgICAgICAgICB0aGlzLnggPSB4Lng7XHJcbiAgICAgICAgICAgIHRoaXMueSA9IHgueTtcclxuICAgICAgICAgICAgdGhpcy53aWR0aCA9IHgud2lkdGg7XHJcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0geC5oZWlnaHQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy54ID0geCB8fCAwO1xyXG4gICAgICAgICAgICB0aGlzLnkgPSB5IHx8IDA7XHJcbiAgICAgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aCB8fCAwO1xyXG4gICAgICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodCB8fCAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge1JlY3R9XHJcbiAgICAgKiBAbWVtYmVyb2YgUmVjdFxyXG4gICAgICovXHJcbiAgICBjbG9uZSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFJlY3QoIHRoaXMgKTsgICAgXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGdldENvcm5lclBvaW50cygpIHtcclxuICAgICAgICBjb25zdCB7IHgseSx3aWR0aCxoZWlnaHQgfSA9IHRoaXM7XHJcblxyXG4gICAgICAgIHJldHVybiBbeCx5LHggKyB3aWR0aCx5LHgseSArIGhlaWdodCx4ICsgd2lkdGgseSArIGhlaWdodF07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QXJyYXkoKSB7XHJcbiAgICAgICAgcmV0dXJuIFt0aGlzLngsdGhpcy55LHRoaXMud2lkdGgsdGhpcy5oZWlnaHRdO1xyXG4gICAgfVxyXG5cclxuICAgIGV4dGVuZFBvaW50KCB4LHkgKSB7XHJcbiAgICAgICAgaWYgKCB0aGlzLnggPT0gbnVsbCApIHtcclxuICAgICAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICAgICAgdGhpcy55ID0geTtcclxuICAgICAgICAgICAgdGhpcy53aWR0aCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIHggPCB0aGlzLnggKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndpZHRoICs9IHRoaXMueCAtIHg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnggPSB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICggeSA8IHRoaXMueSApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGVpZ2h0ICs9IHRoaXMueSAtIHk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMud2lkdGggPSBNYXRoLm1heCggdGhpcy5yaWdodCx4ICkgLSB0aGlzLng7XHJcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gTWF0aC5tYXgoIHRoaXMuYm90dG9tLHkgKSAtIHRoaXMueTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXh0ZW5kUmVjdCggciApIHtcclxuICAgICAgICB0aGlzLmV4dGVuZFBvaW50KCByLngsci55ICk7XHJcbiAgICAgICAgdGhpcy5leHRlbmRQb2ludCggci5yaWdodCxyLnkgKTtcclxuICAgICAgICB0aGlzLmV4dGVuZFBvaW50KCByLngsci5ib3R0b20gKTtcclxuICAgICAgICB0aGlzLmV4dGVuZFBvaW50KCByLnJpZ2h0LHIuYm90dG9tICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHh5d2goKSB7XHJcbiAgICAgICAgcmV0dXJuIFt0aGlzLngsdGhpcy55LHRoaXMud2lkdGgsdGhpcy5oZWlnaHRdO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCB4eXdoKCByICkge1xyXG4gICAgICAgIGNvbnN0IHIyID0gZ2V0UmVjdExpa2UoIHIgKTtcclxuXHJcbiAgICAgICAgdGhpcy54ID0gcjIueDtcclxuICAgICAgICB0aGlzLnkgPSByMi55O1xyXG4gICAgICAgIHRoaXMud2lkdGggPSByMi53aWR0aDtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IHIyLmhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbGVmdCgpIHsgcmV0dXJuIHRoaXMueDsgfVxyXG5cclxuICAgIGdldCByaWdodCgpIHsgcmV0dXJuIHRoaXMueCArIHRoaXMud2lkdGg7IH1cclxuXHJcbiAgICBnZXQgdG9wKCkgeyByZXR1cm4gdGhpcy55OyB9XHJcblxyXG4gICAgZ2V0IGJvdHRvbSgpIHsgcmV0dXJuIHRoaXMueSArIHRoaXMuaGVpZ2h0OyB9XHJcblxyXG4gICAgY29udGFpbnMoIHgseSApIHtcclxuICAgICAgICByZXR1cm4gKCB4ID49IHRoaXMubGVmdCAmJiB4IDwgdGhpcy5yaWdodCAmJiB5ID49IHRoaXMudG9wICYmIHkgPCB0aGlzLmJvdHRvbSApO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFBvaW50IHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBQb2ludC5cclxuICAgICAqIEBwYXJhbSB7W251bWJlcixudW1iZXJdfEZsb2F0MzJBcnJheXxudW1iZXJ8UG9pbnQ9fSB4XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcj19IHlcclxuICAgICAqIEBtZW1iZXJvZiBQb2ludFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvciggeCx5ICkge1xyXG4gICAgICAgIGlmICggQXJyYXkuaXNBcnJheSggeCApIHx8IHggaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkgKSB7XHJcbiAgICAgICAgICAgIHRoaXMueCA9IHhbMF07XHJcbiAgICAgICAgICAgIHRoaXMueSA9IHhbMV07XHJcbiAgICAgICAgfSBlbHNlIGlmICggdHlwZW9mIHggPT09IFwib2JqZWN0XCIgKSB7XHJcbiAgICAgICAgICAgIHRoaXMueCA9IHgueDtcclxuICAgICAgICAgICAgdGhpcy55ID0geC55O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMueCA9IHggfHwgMDtcclxuICAgICAgICAgICAgdGhpcy55ID0geSB8fCAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge1BvaW50fVxyXG4gICAgICogQG1lbWJlcm9mIFBvaW50XHJcbiAgICAgKi9cclxuICAgIGNsb25lKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUG9pbnQoIHRoaXMgKTsgICAgXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QXJyYXkoKSB7XHJcbiAgICAgICAgcmV0dXJuIFt0aGlzLngsdGhpcy55XTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgeHkoKSB7XHJcbiAgICAgICAgcmV0dXJuIFt0aGlzLngsdGhpcy55XTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgeHkoIHAgKSB7XHJcbiAgICAgICAgY29uc3QgcDIgPSBnZXRQb2ludExpa2UoIHAgKTtcclxuXHJcbiAgICAgICAgdGhpcy54ID0gcDIueDtcclxuICAgICAgICB0aGlzLnkgPSBwMi55O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUG9pbnTrpbwg642U7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7UG9pbnR8bnVtYmVyfSBwXHJcbiAgICAgKiBAcmV0dXJucyB7UG9pbnR9XHJcbiAgICAgKiBAbWVtYmVyb2YgUG9pbnRcclxuICAgICAqL1xyXG4gICAgYWRkKCBwICkge1xyXG4gICAgICAgIGNvbnN0IHAyID0gZ2V0UG9pbnRMaWtlKCBwICk7XHJcblxyXG4gICAgICAgIHRoaXMueCArPSBwMi54O1xyXG4gICAgICAgIHRoaXMueSArPSBwMi55O1xyXG4gICAgICAgIHJldHVybiBuZXcgUG9pbnQoIHRoaXMgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFBvaW5066W8IOu6gOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1BvaW50fG51bWJlcn0gcFxyXG4gICAgICogQHJldHVybnMge1BvaW50fVxyXG4gICAgICogQG1lbWJlcm9mIFBvaW50XHJcbiAgICAgKi9cclxuICAgIHN1YnRyYWN0KCBwICkge1xyXG4gICAgICAgIGNvbnN0IHAyID0gZ2V0UG9pbnRMaWtlKCBwICk7XHJcblxyXG4gICAgICAgIHRoaXMueCAtPSBwMi54O1xyXG4gICAgICAgIHRoaXMueSAtPSBwMi55O1xyXG4gICAgICAgIHJldHVybiBuZXcgUG9pbnQoIHRoaXMgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtQb2ludHxudW1iZXJ9IHBcclxuICAgICAqIEByZXR1cm5zIHtQb2ludH1cclxuICAgICAqIEBtZW1iZXJvZiBQb2ludFxyXG4gICAgICovXHJcbiAgICBtdWwoIHAgKSB7XHJcbiAgICAgICAgY29uc3QgcDIgPSBnZXRQb2ludExpa2UoIHAgKTtcclxuXHJcbiAgICAgICAgdGhpcy54ICo9IHAyLng7XHJcbiAgICAgICAgdGhpcy55ICo9IHAyLnk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQb2ludCggdGhpcyApO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFR5cGVkQXJyYXlIZWxwZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBwYXJhbSB7VWludDhBcnJheX0gdWludDhBcnJcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBiZWdpblxyXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBsZW5ndGhcclxuICAgICAqIEByZXR1cm5zIHtGbG9hdDMyQXJyYXl9IFxyXG4gICAgICogQG1lbWJlcm9mIFR5cGVkQXJyYXlIZWxwZXJcclxuICAgICAqL1xyXG4gICAgc3RhdGljIFVpbnQ4VG9GbG9hdDMyKCB1aW50OEFycixiZWdpbiA9IDAsbGVuZ3RoID0gbnVsbCApIHtcclxuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSggdWludDhBcnIuYnVmZmVyLHVpbnQ4QXJyLmJ5dGVPZmZzZXQgKyBiZWdpbiwoIGxlbmd0aCAhPSBudWxsICkgPyBNYXRoLmNlaWwoIGxlbmd0aCAvIDQgKSA6IG51bGwgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHBhcmFtIHtVaW50MTZBcnJheX0gdWludDE2QXJyXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYmVnaW5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gbGVuZ3RoXHJcbiAgICAgKiBAcmV0dXJucyB7RmxvYXQzMkFycmF5fSBcclxuICAgICAqIEBtZW1iZXJvZiBUeXBlZEFycmF5SGVscGVyXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBVaW50MTZUb0Zsb2F0MzIoIHVpbnQxNkFycixiZWdpbiA9IDAsbGVuZ3RoID0gbnVsbCApIHtcclxuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSggdWludDE2QXJyLmJ1ZmZlcix1aW50MTZBcnIuYnl0ZU9mZnNldCArIGJlZ2luICogMixsZW5ndGggIT0gbnVsbCA/IE1hdGguY2VpbCggbGVuZ3RoIC8gMiApIDogbnVsbCApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAcGFyYW0ge0Zsb2F0MzJBcnJheX0gZmxvYXQzMkFyclxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGJlZ2luXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcj19IGxlbmd0aFxyXG4gICAgICogQHJldHVybnMge1VpbnQ4QXJyYXl9IFxyXG4gICAgICogQG1lbWJlcm9mIFR5cGVkQXJyYXlIZWxwZXJcclxuICAgICAqL1xyXG4gICAgc3RhdGljIEZsb2F0MzJUb1VpbnQ4KCBmbG9hdDMyQXJyLGJlZ2luID0gMCxsZW5ndGggPSBudWxsICkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSggZmxvYXQzMkFyci5idWZmZXIsZmxvYXQzMkFyci5ieXRlT2Zmc2V0ICsgYmVnaW4gKiA0LGxlbmd0aCAhPSBudWxsID8gbGVuZ3RoICogNCA6IG51bGwgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHBhcmFtIHtGbG9hdDMyQXJyYXl9IGZsb2F0MzJBcnJcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBiZWdpblxyXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBsZW5ndGhcclxuICAgICAqIEByZXR1cm5zIHtVaW50MTZBcnJheX0gXHJcbiAgICAgKiBAbWVtYmVyb2YgVHlwZWRBcnJheUhlbHBlclxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgRmxvYXQzMlRvVWludDE2KCBmbG9hdDMyQXJyLGJlZ2luID0gMCxsZW5ndGggPSBudWxsICkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVWludDE2QXJyYXkoIGZsb2F0MzJBcnIuYnVmZmVyLGZsb2F0MzJBcnIuYnl0ZU9mZnNldCArIGJlZ2luICogNCxsZW5ndGggIT0gbnVsbCA/IGxlbmd0aCAqIDIgOiBudWxsICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBwYXJhbSB7RmxvYXQzMkFycmF5fFVpbnQxNkFycmF5fFVpbnQ4QXJyYXl9IHR5cGVkQXJyXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYmVnaW5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gbGVuZ3RoXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gXHJcbiAgICAgKiBAbWVtYmVyb2YgVHlwZWRBcnJheUhlbHBlclxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgc3ViYXJyYXkoIHR5cGVkQXJyLGJlZ2luID0gMCxsZW5ndGggPSBudWxsICkgeyAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHR5cGVkQXJyLnN1YmFycmF5KCBiZWdpbiwgbGVuZ3RoICE9IG51bGwgPyBiZWdpbiArIGxlbmd0aCA6IG51bGwgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHBhcmFtIHtGbG9hdDMyQXJyYXl8VWludDE2QXJyYXl8VWludDhBcnJheX0gdHlwZWRBcnJcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuZXdTaXplXHJcbiAgICAgKiBAcmV0dXJucyB7RmxvYXQzMkFycmF5fFVpbnQxNkFycmF5fFVpbnQ4QXJyYXl9XHJcbiAgICAgKiBAbWVtYmVyb2YgVHlwZWRBcnJheUhlbHBlclxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgcmVzaXplKCB0eXBlZEFyciwgbmV3U2l6ZSApIHtcclxuICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICBjb25zdCBuZXdBcnIgPSBuZXcgKCB0eXBlZEFyci5jb25zdHJ1Y3RvciApKCBuZXdTaXplICk7XHJcblxyXG4gICAgICAgIG5ld0Fyci5zZXQoIHR5cGVkQXJyLDAsTWF0aC5taW4oIG5ld1NpemUsdHlwZWRBcnIubGVuZ3RoICkgKTtcclxuICAgICAgICByZXR1cm4gbmV3QXJyO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBtZW1jcHkoIGRzdCxkc3RPZmZzZXQsc3JjLHNyY09mZnNldCxzcmNMZW5ndGggKSB7XHJcbiAgICAgICAgLy8gd2VicGFjayBwb2x5ZmlsbCDsnYQg7IKs7Jqp7ZWY64qUIOy9lOuTnFxyXG4gICAgICAgIC8vIGNvbnN0IGVsZW1lbnRTaXplID0gZHN0LmNvbnN0cnVjdG9yLkJZVEVTX1BFUl9FTEVNRU5UO1xyXG5cclxuICAgICAgICAvLyBkc3RPZmZzZXQgPSBkc3QuYnl0ZU9mZnNldCArIGRzdE9mZnNldCAqIGVsZW1lbnRTaXplO1xyXG4gICAgICAgIC8vIHNyY09mZnNldCA9IHNyYy5ieXRlT2Zmc2V0ICsgc3JjT2Zmc2V0ICogZWxlbWVudFNpemU7XHJcbiAgICAgICAgLy8gc3JjTGVuZ3RoICo9IGVsZW1lbnRTaXplO1xyXG5cclxuICAgICAgICAvLyBCdWZmZXIuZnJvbSggc3JjLmJ1ZmZlciwgc3JjT2Zmc2V0LHNyY0xlbmd0aCApLmNvcHkoIEJ1ZmZlci5mcm9tKCBkc3QuYnVmZmVyLCBkc3RPZmZzZXQsIHNyY0xlbmd0aCApICk7XHJcblxyXG4gICAgICAgIGlmICggc3JjTGVuZ3RoIDwgMTAwICkge1xyXG4gICAgICAgICAgICBjb25zdCBkc3QyID0gZHN0LnN1YmFycmF5KCBkc3RPZmZzZXQgKTtcclxuICAgICAgICAgICAgY29uc3Qgc3JjMiA9IHNyYy5zdWJhcnJheSggc3JjT2Zmc2V0ICk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBzcmNMZW5ndGg7IGkrKyApIHtcclxuICAgICAgICAgICAgICAgIGRzdDJbaV0gPSBzcmMyW2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZUxlbmd0aCA9IHNyY0xlbmd0aCAqIHNyYy5CWVRFU19QRVJfRUxFTUVOVDtcclxuICAgICAgICAgICAgY29uc3QgdThkc3QgPSBuZXcgVWludDhBcnJheSggZHN0LmJ1ZmZlcixkc3QuYnl0ZU9mZnNldCArIGRzdE9mZnNldCAqIGRzdC5CWVRFU19QRVJfRUxFTUVOVCApO1xyXG4gICAgICAgICAgICBjb25zdCB1OHNyYyA9IG5ldyBVaW50OEFycmF5KCBzcmMuYnVmZmVyLHNyYy5ieXRlT2Zmc2V0ICsgc3JjT2Zmc2V0ICogc3JjLkJZVEVTX1BFUl9FTEVNRU5ULGJ5dGVMZW5ndGggKTtcclxuXHJcbiAgICAgICAgICAgIHU4ZHN0LnNldCggdThzcmMgKTtcclxuICAgICAgICB9XHJcbiAgICB9ICAgIFxyXG59XHJcbiIsIlxyXG5cclxuXHJcbmNsYXNzIEFzeW5jVmFsdWUge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSggKCByZXNvbHZlLHJlamVjdCApID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSA9IHJlc29sdmU7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlamVjdCA9IHJlamVjdDtcclxuICAgICAgICB9ICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzb2x2ZSggdiApIHtcclxuICAgICAgICB0aGlzLnZhbHVlID0gdjtcclxuICAgICAgICB0aGlzLl9yZXNvbHZlKCB2ICk7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMucHJvbWlzZTtcclxuICAgICAgICBkZWxldGUgdGhpcy5fcmVzb2x2ZTtcclxuICAgICAgICBkZWxldGUgdGhpcy5fcmVqZWN0O1xyXG4gICAgfVxyXG5cclxuICAgIHJlamVjdCggZSApIHtcclxuICAgICAgICB0aGlzLl9yZWplY3QoIGUgKTtcclxuICAgICAgICBkZWxldGUgdGhpcy5wcm9taXNlO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLl9yZXNvbHZlO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLl9yZWplY3Q7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBVdGlscyA9IHtcclxuXHJcbiAgICBBc3luY1ZhbHVlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBDdHJsLXNoaWZ0LUhcclxuICAgICAqIEFsdC1SIOyDge2DnOuhnCDri6TsnYwg7KGw6rG0IOuzgO2ZmO2VmOyXrCDsnbzqtIQg7IKt7KCc7ZWgIOyImCDsnojri6RcclxuICAgICAqIFV0aWxzXFwubnVsbFJlcGxhY2VcXCgoW14sXSspXFxzKixcXHMqKFteKV0rKVxcKVxyXG4gICAgICogJDEgIT0gbnVsbCA/ICQxIDogJDJcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHsqfSB0YXJnZXRcclxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcclxuICAgICAqIEByZXR1cm5zIHsqfVxyXG4gICAgICogQG1lbWJlcm9mIFV0aWxzXHJcbiAgICAgKi9cclxuICAgIG51bGxSZXBsYWNlKCB0YXJnZXQsIHZhbHVlICkge1xyXG4gICAgICAgIHJldHVybiB0YXJnZXQgIT0gbnVsbCA/IHRhcmdldCA6IHZhbHVlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBhXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcj19IGJcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICAgKiBAbWVtYmVyb2YgVXRpbHNcclxuICAgICAqL1xyXG4gICAgcmFuZG9tKCBhLCBiICkge1xyXG4gICAgICAgIGNvbnNvbGUuYXNzZXJ0KCAoIGEgPT0gbnVsbCAmJiBiID09IG51bGwgKSB8fCAoIGEgIT0gbnVsbCAmJiBiICE9IG51bGwgKSwgYHJhbmRvbSgke2F9LCR7Yn0pIOq1rOusuOydgCDtl4jsmqnrkJjsp4Ag7JWK7J2MLiByYW5kb20oMSxhKSDtmLnsnYAgcmFuZG9tKDAsYSnrpbwg66qF7ZmV7Z6IIOyTuCDqsoNgICk7XHJcblxyXG4gICAgICAgIGlmICggYiA9PSBudWxsICkge1xyXG4gICAgICAgICAgICAvLyBbMSxpXVxyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vciggTWF0aC5yYW5kb20oKSAqIGEgKyAxICk7XHJcbiAgICAgICAgfSBlbHNlIGlmICggYSA9PSBudWxsICkge1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yYW5kb20oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBbaSxqXVxyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vciggTWF0aC5yYW5kb20oKSAqICggYiAtIGEgKyAxICkgKyBhICk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSBhXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYlxyXG4gICAgICogQHJldHVybnMge251bWJlcn1cclxuICAgICAqIEBtZW1iZXJvZiBVdGlsc1xyXG4gICAgICovXHJcbiAgICBwcmVjaXNpb24oIGEsIGIgKSB7XHJcbiAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoIGEgKS50b1ByZWNpc2lvbiggYiApO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBiXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICogQG1lbWJlcm9mIFV0aWxzXHJcbiAgICAgKi9cclxuICAgIGlkaXYoIGEsIGIgKSB7XHJcbiAgICAgICAgLy8g7J2M7IiY7JeQIOuMgO2VtOyEnCDrsJTrpbTqsowg7LKY66as7ZWoXHJcbiAgICAgICAgcmV0dXJuIGEgLyBiID4+IDA7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdjBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2MVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICAgKiBAbWVtYmVyb2YgVXRpbHNcclxuICAgICAqL1xyXG4gICAgbGVycCggdjAsIHYxLCBhICkge1xyXG4gICAgICAgIHJldHVybiB2MCArICggdjEgLSB2MCApICogYTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4XHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICogQG1lbWJlcm9mIFV0aWxzXHJcbiAgICAgKi9cclxuICAgIGNsYW1wKCB2LCBtaW4sIG1heCApIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5taW4oIE1hdGgubWF4KCB2LCBtaW4gKSwgbWF4ICk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geDFcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5MVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHgyXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geTJcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICAgKiBAbWVtYmVyb2YgVXRpbHNcclxuICAgICAqL1xyXG4gICAgZGlzdGFuY2UoIHgxLCB5MSwgeDIsIHkyICkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoICggeDIgLSB4MSApICogKCB4MiAtIHgxICkgKyAoIHkyIC0geTEgKSAqICggeTIgLSB5MSApICk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYVxyXG4gICAgICogQHJldHVybnMge251bWJlcn1cclxuICAgICAqIEBtZW1iZXJvZiBVdGlsc1xyXG4gICAgICovXHJcbiAgICBmcmFjKCBhICkge1xyXG4gICAgICAgIHJldHVybiBhICUgMTtcclxuICAgIH0sXHJcblxyXG4gICAgbGVnYWN5KCBtc2cgPSBcIlwiICkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCBg4pmoIExlZ2FjeSBBUEkgJHttc2d9YCApO1xyXG4gICAgfSxcclxuXHJcbiAgICBub3RJbXBsZW1lbnRzKCBtc2cgPSBcIlwiICkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCBg4pmoIE5vdCBJbXBsZW1lbnRlZC4gJHttc2d9YCApO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGVuYW1lXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICAgICogQG1lbWJlcm9mIFV0aWxzXHJcbiAgICAgKi9cclxuICAgIGdldEVtYmVkZGVkRmlsZSggZmlsZW5hbWUgKSB7XHJcbiAgICAgICAgY29uc29sZS5hc3NlcnQoIHNlbGYuX2VtYmVkZGVkRmlsZXNbZmlsZW5hbWUudG9Mb3dlckNhc2UoKV0gIT0gbnVsbCApO1xyXG5cclxuICAgICAgICByZXR1cm4gc2VsZi5fZW1iZWRkZWRGaWxlc1tmaWxlbmFtZV07XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZW5hbWVcclxuICAgICAqIEByZXR1cm5zIHtVaW50OEFycmF5fVxyXG4gICAgICogQG1lbWJlcm9mIFV0aWxzXHJcbiAgICAgKi9cclxuICAgIGdldEVtYmVkZGVkQmluYXJ5RmlsZSggZmlsZW5hbWUgKSB7XHJcbiAgICAgICAgY29uc29sZS5hc3NlcnQoIHNlbGYuX2VtYmVkZGVkRmlsZXNbZmlsZW5hbWUudG9Mb3dlckNhc2UoKV0gIT0gbnVsbCApO1xyXG4gICAgICAgIGNvbnN0IGJhc2U2NERhdGEgPSBzZWxmLl9lbWJlZGRlZEZpbGVzW2ZpbGVuYW1lLnRvTG93ZXJDYXNlKCldO1xyXG4gICAgICAgIGNvbnN0IGxvb2t1cFRhYmxlID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89JztcclxuICAgICAgICBjb25zdCBhcnIgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgYmFzZTY0RGF0YS5sZW5ndGg7ICkge1xyXG4gICAgICAgICAgICBjb25zdCBkID0gbG9va3VwVGFibGUuaW5kZXhPZiggYmFzZTY0RGF0YS5jaGFyQXQoIGkrKyApICk7XHJcbiAgICAgICAgICAgIGNvbnN0IGUgPSBsb29rdXBUYWJsZS5pbmRleE9mKCBiYXNlNjREYXRhLmNoYXJBdCggaSsrICkgKTtcclxuICAgICAgICAgICAgY29uc3QgZiA9IGxvb2t1cFRhYmxlLmluZGV4T2YoIGJhc2U2NERhdGEuY2hhckF0KCBpKysgKSApO1xyXG4gICAgICAgICAgICBjb25zdCBnID0gbG9va3VwVGFibGUuaW5kZXhPZiggYmFzZTY0RGF0YS5jaGFyQXQoIGkrKyApICk7XHJcbiAgICAgICAgICAgIGNvbnN0IGEgPSAoIGQgPDwgMiApIHwgKCBlID4+IDQgKTtcclxuICAgICAgICAgICAgY29uc3QgYiA9ICggKCBlICYgMTUgKSA8PCA0ICkgfCAoIGYgPj4gMiApO1xyXG4gICAgICAgICAgICBjb25zdCBjID0gKCAoIGYgJiAzICkgPDwgNiApIHwgZztcclxuXHJcbiAgICAgICAgICAgIGFyci5wdXNoKCBhICk7XHJcbiAgICAgICAgICAgIGlmICggZiAhPSA2NCApIGFyci5wdXNoKCBiICk7XHJcbiAgICAgICAgICAgIGlmICggZyAhPSA2NCApIGFyci5wdXNoKCBjICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSggYXJyICk7XHJcbiAgICB9LFxyXG5cclxuICAgIGVtYmVkZGVkRmlsZUV4aXN0KCBmaWxlbmFtZSApIHtcclxuICAgICAgICByZXR1cm4gc2VsZi5fZW1iZWRkZWRGaWxlc1tmaWxlbmFtZV0gIT0gbnVsbDtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlbmFtZVxyXG4gICAgICogQHJldHVybnMge1hNTERvY3VtZW50fVxyXG4gICAgICogQG1lbWJlcm9mIFV0aWxzXHJcbiAgICAgKi9cclxuICAgIGdldEVtYmVkZGVkWG1sRmlsZSggZmlsZW5hbWUgKSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGNvbnN0IHhtbCA9ICggbmV3IHdpbmRvdy5ET01QYXJzZXIoKSApLnBhcnNlRnJvbVN0cmluZyggVXRpbHMuZ2V0RW1iZWRkZWRGaWxlKCBmaWxlbmFtZSApLCBcInRleHQveG1sXCIgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHhtbDtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZWRlZiB7b2JqZWN0fSBTaXplXHJcbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gd2lkdGhcclxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBoZWlnaHRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZW5hbWVcclxuICAgICAqIEByZXR1cm5zIHtTaXplfVxyXG4gICAgICogQG1lbWJlcm9mIFV0aWxzXHJcbiAgICAgKi9cclxuICAgIGdldEltYWdlU2l6ZSggZmlsZW5hbWUgKSB7XHJcbiAgICAgICAgY29uc3QgaW1hZ2VJbmZvID0gc2VsZi5faW1hZ2VTaXplc1tmaWxlbmFtZS50b0xvd2VyQ2FzZSgpXTtcclxuXHJcbiAgICAgICAgaWYgKCBpbWFnZUluZm8gKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbWFnZUluZm87XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgd2lkdGg6IDAsaGVpZ2h0OiAwIH07XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOusuOyekOyXtOyXkOyEnCA8dGFnPiA8L3RhZz4g7ZiV7YOc66W8IOy2lOy2nO2VnOuLpFxyXG4gICAgICpcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcclxuICAgICAqIEByZXR1cm5zIHsqfVxyXG4gICAgICogQG1lbWJlcm9mIFRleHRGaWVsZFxyXG4gICAgICovXHJcbiAgICBzcGxpdFN0cmluZ1dpdGhUYWcoIHN0ciApIHtcclxuICAgICAgICBjb25zdCB0YWdSZWdFeHAgPSAvPChbXj5dKyk+L2c7XHJcbiAgICAgICAgY29uc3QgdGFnU3RhY2sgPSBbXCJkZWZhdWx0XCJdO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdEFyciA9IFtdO1xyXG5cclxuICAgICAgICBsZXQgbGFzdEluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgd2hpbGUgKCB0cnVlICkge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0YWdSZWdFeHAuZXhlYyggc3RyICk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxhc3RUYWcgPSB0YWdTdGFja1t0YWdTdGFjay5sZW5ndGggLSAxXTsgXHJcblxyXG4gICAgICAgICAgICBpZiAoIHJlc3VsdCA9PSBudWxsICkge1xyXG4gICAgICAgICAgICAgICAgLy8g7YOc6re4IOuqu+ywvuydjFxyXG4gICAgICAgICAgICAgICAgaWYgKCBsYXN0SW5kZXggPCBzdHIubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdEFyci5wdXNoKCBbbGFzdFRhZyxzdHIuc3Vic3RyaW5nKCBsYXN0SW5kZXggKV0gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRBcnI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YWdOYW1lID0gcmVzdWx0WzFdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFnSW5kZXggPSByZXN1bHQuaW5kZXg7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCB0YWdOYW1lWzBdICE9ICcvJyApIHtcclxuICAgICAgICAgICAgICAgICAgICB0YWdTdGFjay5wdXNoKCB0YWdOYW1lICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBsYXN0VGFnID09IHRhZ05hbWUuc3Vic3RyaW5nKCAxICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFnU3RhY2subGVuZ3RoLS07XHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgaWYgKCBsYXN0SW5kZXggIT0gdGFnSW5kZXggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0QXJyLnB1c2goIFtsYXN0VGFnLHN0ci5zdWJzdHJpbmcoIGxhc3RJbmRleCx0YWdJbmRleCApXSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGFzdEluZGV4ID0gdGFnUmVnRXhwLmxhc3RJbmRleDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIFtyLGcsYixhXSDqsIAg64u06ri0IOyWtOugiOydtOulvCDrsJjtmZjtlZzri6QuIHIsZyxi64qUIDB+MS4w7J2YIOqwkuydtOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY1xyXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBhXHJcbiAgICAgKiBAcmV0dXJucyB7W251bWJlcixudW1iZXIsbnVtYmVyLG51bWJlcl19XHJcbiAgICAgKiBAbWVtYmVyb2YgVXRpbHNcclxuICAgICAqL1xyXG4gICAgaGV4MnJnYmEoIGMsYSApIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcclxuXHJcbiAgICAgICAgLy8gYixnLHIsYSDsiJzshJxcclxuICAgICAgICByZXN1bHRbMF0gPSAoICggYyAmIDB4ZmYwMDAwICkgPj4gMTYgKSAvIDI1NTtcclxuICAgICAgICByZXN1bHRbMV0gPSAoICggYyAmIDB4ZmYwMCApID4+IDggKSAvIDI1NTtcclxuICAgICAgICByZXN1bHRbMl0gPSAoIGMgJiAweGZmICkgLyAyNTU7XHJcbiAgICAgICAgaWYgKCBhICE9IG51bGwgKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdFszXSA9IGE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzdWx0WzNdID0gKCAoIGMgJiAweGZmMDAwMDAwICkgPj4gMjQgKSAvIDI1NTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH0sXHJcblxyXG4gICAgcmdiYTJoZXgoIGFyciwgaSApIHtcclxuICAgICAgICBjb25zdCBpZHggPSBpIHx8IDA7XHJcblxyXG4gICAgICAgIHJldHVybiAoICggYXJyW2lkeF0gKiAyNTUgKSA8PCAxNiApIHwgKCAoIGFycltpZHggKyAxXSAqIDI1NSApIDw8IDggKSB8ICggYXJyW2lkeCArIDJdICogMjU1ICkgfCAoICggYXJyW2lkeCArIDNdICogMjU1ICkgPDwgMjQgKTtcclxuICAgIH0sXHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYW5nbGVcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICAgKiBAbWVtYmVyb2YgVXRpbHNcclxuICAgICAqL1xyXG4gICAgYW5nbGVUb0RpciggYW5nbGUgKSB7XHJcbiAgICAgICAgbGV0IGRpcjtcclxuXHJcbiAgICAgICAgaWYgKCAtMTM1IDwgYW5nbGUgJiYgYW5nbGUgPD0gLTQ1ICkge1xyXG4gICAgICAgICAgICBkaXIgPSAxO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIC00NSA8IGFuZ2xlICYmIGFuZ2xlIDw9IDQ1ICkge1xyXG4gICAgICAgICAgICBkaXIgPSAyO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIDQ1IDwgYW5nbGUgJiYgYW5nbGUgPD0gMTM1ICkge1xyXG4gICAgICAgICAgICBkaXIgPSAzO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRpciA9IDQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZGlyO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRpclxyXG4gICAgICogQHJldHVybnMge1tudW1iZXIsbnVtYmVyXX1cclxuICAgICAqIEBtZW1iZXJvZiBVdGlsc1xyXG4gICAgICovXHJcbiAgICBkaXJUb09mZnNldCggZGlyICkge1xyXG4gICAgICAgIGxldCBheCwgYXk7XHJcblxyXG4gICAgICAgIGlmICggZGlyID09IDEgKSB7XHJcbiAgICAgICAgICAgIFtheCwgYXldID0gWzAsIC0xXTtcclxuICAgICAgICB9IGVsc2UgaWYgKCBkaXIgPT0gMiApIHtcclxuICAgICAgICAgICAgW2F4LCBheV0gPSBbMSwgMF07XHJcbiAgICAgICAgfSBlbHNlIGlmICggZGlyID09IDMgKSB7XHJcbiAgICAgICAgICAgIFtheCwgYXldID0gWzAsIDFdO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIGRpciA9PSA0ICkge1xyXG4gICAgICAgICAgICBbYXgsIGF5XSA9IFstMSwgMF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gW2F4LCBheV07XHJcbiAgICB9LFxyXG5cclxuXHJcblxyXG4gICAgZmlsdGVyQXR0cmliKCBhdHRyaWIsIHdoaXRlTGlzdCwgYmxhY2tMaXN0ICkge1xyXG4gICAgICAgIC8vIOyEseqzte2VmOuptCB0cnVlXHJcbiAgICAgICAgY29uc3Qgd2hpdGVMaXN0U3RyID0gd2hpdGVMaXN0ICE9IG51bGwgPyAoIEFycmF5LmlzQXJyYXkoIHdoaXRlTGlzdCApID8gXCIsXCIgKyB3aGl0ZUxpc3Quam9pbiggXCIsXCIgKSArIFwiLFwiIDogXCIsXCIgKyB3aGl0ZUxpc3QgKyBcIixcIiApIDogXCIsKixcIjtcclxuICAgICAgICBjb25zdCBibGFja0xpc3RTdHIgPSBibGFja0xpc3QgIT0gbnVsbCA/ICggQXJyYXkuaXNBcnJheSggYmxhY2tMaXN0ICkgPyBcIixcIiArIGJsYWNrTGlzdC5qb2luKCBcIixcIiApICsgXCIsXCIgOiBcIixcIiArIGJsYWNrTGlzdCArIFwiLFwiICkgOiBcIlwiO1xyXG4gICAgICAgIGNvbnN0IGF0dHJpYnMgPSBhdHRyaWIgIT0gbnVsbCA/ICggQXJyYXkuaXNBcnJheSggYXR0cmliICkgPyBhdHRyaWIgOiBhdHRyaWIuc3BsaXQoIFwiLFwiICkgKSA6IFtdO1xyXG5cclxuXHJcbiAgICAgICAgbGV0IHdoaXRlUGFzcztcclxuXHJcbiAgICAgICAgaWYgKCBibGFja0xpc3RTdHIuaW5kZXhPZiggXCIsKixcIiApID49IDAgKSB7XHJcbiAgICAgICAgICAgIC8vIGJsYWNr7J20ICog66m0IOq3uOuDpSDsi6TtjKhcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIHdoaXRlTGlzdFN0ci5pbmRleE9mKCBcIiwqLFwiICkgPj0gMCApIHtcclxuICAgICAgICAgICAgLy93aGl0ZeqwgCAqIOuptCDqt7jrg6Ug7Ya16rO8XHJcbiAgICAgICAgICAgIHdoaXRlUGFzcyA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIGlmICggYXR0cmlicy5sZW5ndGggPiAwICkge1xyXG4gICAgICAgICAgICBmb3IgKCBjb25zdCB2IG9mIGF0dHJpYnMgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHdoaXRlTGlzdFN0ci5pbmRleE9mKCBcIixcIiArIHYgKyBcIixcIiApID49IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/tmZTsnbTtirjsl5DshJwg7ZWY64KY652864+EIOyeiOycvOuptCDthrXqs7xcclxuICAgICAgICAgICAgICAgICAgICB3aGl0ZVBhc3MgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy/slrTtirjrpqzrt7DtirjqsIAg7ZWY64KY64+EIOyjvOyWtOyngOyngCDslYrslZjsnYQg6rK97JqwIOyLpO2MqFxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIHdoaXRlUGFzcyApIHtcclxuICAgICAgICAgICAgZm9yICggY29uc3QgdiBvZiBhdHRyaWJzICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCBibGFja0xpc3RTdHIuaW5kZXhPZiggXCIsXCIgKyB2ICsgXCIsXCIgKSA+PSAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v67iU656Z7JeQ7IScIO2VmOuCmOudvOuPhCDsnojsnLzrqbQg7LWc7KKFIOyLpO2MqFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICBmb3JtYXQoIHRleHQsIC4uLmFyZ3MgKSB7XHJcbiAgICAgICAgbGV0IHM7XHJcblxyXG4gICAgICAgIGlmICggYXJncy5sZW5ndGggPiAwICkge1xyXG4gICAgICAgICAgICAvLyAlcyAlZFxyXG4gICAgICAgICAgICAvLyAlMCAlMSAlMiAlMyAlNC4uLlxyXG4gICAgICAgICAgICBsZXQgY291bnQgPSAwO1xyXG5cclxuICAgICAgICAgICAgcyA9IHRleHQucmVwbGFjZSggLyVbc3xkXS9nLCBmdW5jdGlvbiAoIHMgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYCUke2NvdW50Kyt9YDtcclxuICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKyApIHtcclxuICAgICAgICAgICAgICAgIHMgPSBzLnJlcGxhY2UoIGAlJHtpfWAsIGFyZ3NbaV0gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBzID0gdGV4dDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHM7XHJcbiAgICB9LFxyXG5cclxuICAgIGlzTm9kZSgpIHtcclxuICAgICAgICByZXR1cm4gKCB0eXBlb2YgcHJvY2VzcyA9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBwcm9jZXNzLnZlcnNpb25zID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHByb2Nlc3MudmVyc2lvbnMubm9kZSAhPSBcInVuZGVmaW5lZFwiICk7XHJcbiAgICB9LFxyXG5cclxuICAgIGlzV2ViV29ya2VyKCkge1xyXG4gICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIHJldHVybiAhdGhpcy5pc05vZGUoKSBcclxuICAgICAgICAgICAgJiYgKCB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09IFwidW5kZWZpbmVkXCIgKSBcclxuICAgICAgICAgICAgJiYgKCB0eXBlb2YgaW1wb3J0U2NyaXB0cyA9PT0gXCJmdW5jdGlvblwiICkgXHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxyXG4gICAgICAgICAgICAmJiAoIG5hdmlnYXRvciBpbnN0YW5jZW9mIFdvcmtlck5hdmlnYXRvciApO1xyXG4gICAgfSxcclxuXHJcbiAgICBjbGVhck9iamVjdCggb2JqICkge1xyXG4gICAgICAgIGNvbnN0IHByb3BzID0gT2JqZWN0LmtleXMoIG9iaiApO1xyXG5cclxuICAgICAgICBmb3IgKCBsZXQgaSA9IDAsbiA9IHByb3BzLmxlbmd0aDsgaSA8IG47IGkrKyApIHtcclxuICAgICAgICAgICAgZGVsZXRlIG9ialtwcm9wc1tpXV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufTtcclxuIiwiLypcclxuRWFzaW5nIGZ1bmN0aW9ucyBhZGFwdGVkIGZyb20gUm9iZXJ0IFBlbm5lcidzIEFTMyB0d2VlbmluZyBlcXVhdGlvbnMuXHJcbiovXHJcblxyXG5leHBvcnQgY29uc3QgZWFzaW5nID0ge307XHJcblxyXG5jb25zdCBiYWNrUyA9IDEuNzAxNTg7XHJcblxyXG5lYXNpbmcuaW5CYWNrID0gZnVuY3Rpb24gKCB0ICkge1xyXG4gICAgcmV0dXJuIHQgKiB0ICogKCAoIGJhY2tTICsgMSApICogdCAtIGJhY2tTICk7XHJcbn07XHJcblxyXG5lYXNpbmcub3V0QmFjayA9IGZ1bmN0aW9uICggdCApIHtcclxuICAgIHQgPSB0IC0gMTtcclxuXHJcbiAgICByZXR1cm4gdCAqIHQgKiAoICggYmFja1MgKyAxICkgKiB0ICsgYmFja1MgKSArIDE7XHJcbn07XHJcblxyXG5lYXNpbmcuaW5PdXRCYWNrID0gZnVuY3Rpb24gKCB0ICkge1xyXG4gICAgdCA9IHQgKiAyO1xyXG5cclxuICAgIGlmICggdCA8IDEgKSByZXR1cm4gMC41ICogKCB0ICogdCAqICggKCBiYWNrUyAqIDEuNTI1ICsgMSApICogdCAtIGJhY2tTICogMS41MjUgKSApO1xyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdCA9IHQgLSAyO1xyXG5cclxuICAgICAgICByZXR1cm4gMC41ICogKCB0ICogdCAqICggKCBiYWNrUyAqIDEuNTI1ICsgMSApICogdCArIGJhY2tTICogMS41MjUgKSArIDIgKTtcclxuICAgIH1cclxufTtcclxuXHJcbmVhc2luZy5pbkJvdW5jZSA9IGZ1bmN0aW9uICggdCApIHtcclxuICAgIHJldHVybiAxIC0gZWFzaW5nLm91dEJvdW5jZSggMSAtIHQgKTtcclxufTtcclxuXHJcbmVhc2luZy5vdXRCb3VuY2UgPSBmdW5jdGlvbiAoIHQgKSB7XHJcbiAgICBpZiAoIHQgPCAxIC8gMi43NSApIHtcclxuICAgICAgICByZXR1cm4gNy41NjI1ICogdCAqIHQ7XHJcbiAgICB9IGVsc2UgaWYgKCB0IDwgMiAvIDIuNzUgKSB7XHJcbiAgICAgICAgdCA9IHQgLSAxLjUgLyAyLjc1O1xyXG5cclxuICAgICAgICByZXR1cm4gNy41NjI1ICogdCAqIHQgKyAwLjc1O1xyXG4gICAgfSBlbHNlIGlmICggdCA8IDIuNSAvIDIuNzUgKSB7XHJcbiAgICAgICAgdCA9IHQgLSAyLjI1IC8gMi43NTtcclxuXHJcbiAgICAgICAgcmV0dXJuIDcuNTYyNSAqIHQgKiB0ICsgMC45Mzc1O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0ID0gdCAtIDIuNjI1IC8gMi43NTtcclxuXHJcbiAgICAgICAgcmV0dXJuIDcuNTYyNSAqIHQgKiB0ICsgMC45ODQzNzU7XHJcbiAgICB9XHJcbn07XHJcblxyXG5lYXNpbmcuaW5PdXRCb3VuY2UgPSBmdW5jdGlvbiAoIHQgKSB7XHJcbiAgICB0ID0gdCAqIDI7XHJcbiAgICBpZiAoIHQgPCAxICkgcmV0dXJuIDAuNSAqIGVhc2luZy5pbkJvdW5jZSggdCApO1xyXG4gICAgZWxzZSByZXR1cm4gMC41ICogZWFzaW5nLm91dEJvdW5jZSggdCAtIDEgKSArIDAuNTtcclxufTtcclxuXHJcbmVhc2luZy5pbkNpcmN1bGFyID0gZnVuY3Rpb24gKCB0ICkge1xyXG4gICAgcmV0dXJuIC0oIE1hdGguc3FydCggMSAtIHQgKiB0ICkgLSAxICk7XHJcbn07XHJcblxyXG5lYXNpbmcub3V0Q2lyY3VsYXIgPSBmdW5jdGlvbiAoIHQgKSB7XHJcbiAgICByZXR1cm4gTWF0aC5zcXJ0KCAxIC0gKCB0IC0gMSApICogKCB0IC0gMSApICk7XHJcbn07XHJcblxyXG5lYXNpbmcuaW5PdXRDaXJjdWxhciA9IGZ1bmN0aW9uICggdCApIHtcclxuICAgIHQgPSB0ICogMjtcclxuXHJcbiAgICBpZiAoIHQgPCAxICkgcmV0dXJuIC0wLjUgKiAoIE1hdGguc3FydCggMSAtIHQgKiB0ICkgLSAxICk7XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0ID0gdCAtIDI7XHJcblxyXG4gICAgICAgIHJldHVybiAwLjUgKiAoIE1hdGguc3FydCggMSAtIHQgKiB0ICkgKyAxICk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5lYXNpbmcuaW5DdWJpYyA9IGZ1bmN0aW9uICggdCApIHtcclxuICAgIHJldHVybiB0ICogdCAqIHQ7XHJcbn07XHJcblxyXG5lYXNpbmcub3V0Q3ViaWMgPSBmdW5jdGlvbiAoIHQgKSB7XHJcbiAgICB0ID0gdCAtIDE7XHJcblxyXG4gICAgcmV0dXJuIHQgKiB0ICogdCArIDE7XHJcbn07XHJcblxyXG5lYXNpbmcuaW5PdXRDdWJpYyA9IGZ1bmN0aW9uICggdCApIHtcclxuICAgIGlmICggdCA8IDAuNSApIHJldHVybiA0ICogdCAqIHQgKiB0O1xyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdCA9IHQgLSAxO1xyXG5cclxuICAgICAgICByZXR1cm4gNCAqIHQgKiB0ICogdCArIDE7XHJcbiAgICB9XHJcbn07XHJcblxyXG52YXIgZWxhc3RpY0EgPSAxO1xyXG52YXIgZWxhc3RpY1AgPSAwLjM7XHJcbnZhciBlbGFzdGljUyA9IGVsYXN0aWNQIC8gNDtcclxuXHJcbmVhc2luZy5pbkVsYXN0aWMgPSBmdW5jdGlvbiAoIHQgKSB7XHJcbiAgICBpZiAoIHQgPT0gMCB8fCB0ID09IDEgKSByZXR1cm4gdDtcclxuICAgIHQgPSB0IC0gMTtcclxuXHJcbiAgICByZXR1cm4gLSggZWxhc3RpY0EgKiBNYXRoLnBvdyggMiwgMTAgKiB0ICkgKiBNYXRoLnNpbiggKCB0IC0gZWxhc3RpY1MgKSAqICggMiAqIE1hdGguUEkgKSAvIGVsYXN0aWNQICkgKTtcclxufTtcclxuXHJcbmVhc2luZy5vdXRFbGFzdGljID0gZnVuY3Rpb24gKCB0ICkge1xyXG4gICAgaWYgKCB0ID09IDAgfHwgdCA9PSAxICkgcmV0dXJuIHQ7XHJcblxyXG4gICAgcmV0dXJuIGVsYXN0aWNBICogTWF0aC5wb3coIDIsIC0xMCAqIHQgKSAqIE1hdGguc2luKCAoIHQgLSBlbGFzdGljUyApICogKCAyICogTWF0aC5QSSApIC8gZWxhc3RpY1AgKSArIDE7XHJcbn07XHJcblxyXG5lYXNpbmcuaW5PdXRFbGFzdGljID0gZnVuY3Rpb24gKCB0ICkge1xyXG4gICAgaWYgKCB0ID09IDAgfHwgdCA9PSAxICkgcmV0dXJuIHQ7XHJcbiAgICB0ID0gdCAqIDIgLSAxO1xyXG4gICAgaWYgKCB0IDwgMCApIHJldHVybiAtMC41ICogKCBlbGFzdGljQSAqIE1hdGgucG93KCAyLCAxMCAqIHQgKSAqIE1hdGguc2luKCAoIHQgLSBlbGFzdGljUyAqIDEuNSApICogKCAyICogTWF0aC5QSSApIC8gKCBlbGFzdGljUCAqIDEuNSApICkgKTtcclxuXHJcbiAgICByZXR1cm4gMC41ICogZWxhc3RpY0EgKiBNYXRoLnBvdyggMiwgLTEwICogdCApICogTWF0aC5zaW4oICggdCAtIGVsYXN0aWNTICogMS41ICkgKiAoIDIgKiBNYXRoLlBJICkgLyAoIGVsYXN0aWNQICogMS41ICkgKSArIDE7XHJcbn07XHJcblxyXG5lYXNpbmcuaW5FeHBvbmVudGlhbCA9IGZ1bmN0aW9uICggdCApIHtcclxuICAgIGlmICggdCA9PSAwICkgcmV0dXJuIDA7XHJcblxyXG4gICAgcmV0dXJuIE1hdGgucG93KCAyLCAxMCAqICggdCAtIDEgKSApO1xyXG59O1xyXG5cclxuZWFzaW5nLm91dEV4cG9uZW50aWFsID0gZnVuY3Rpb24gKCB0ICkge1xyXG4gICAgaWYgKCB0ID09IDEgKSByZXR1cm4gMTtcclxuXHJcbiAgICByZXR1cm4gMSAtIE1hdGgucG93KCAyLCAtMTAgKiB0ICk7XHJcbn07XHJcblxyXG5lYXNpbmcuaW5PdXRFeHBvbmVudGlhbCA9IGZ1bmN0aW9uICggdCApIHtcclxuICAgIGlmICggdCA9PSAwIHx8IHQgPT0gMSApIHJldHVybiB0O1xyXG4gICAgdCA9IHQgKiAyIC0gMTtcclxuICAgIGlmICggdCA8IDAgKSByZXR1cm4gMC41ICogTWF0aC5wb3coIDIsIDEwICogdCApO1xyXG5cclxuICAgIHJldHVybiAxIC0gMC41ICogTWF0aC5wb3coIDIsIC0xMCAqIHQgKTtcclxufTtcclxuXHJcbmVhc2luZy5saW5lYXIgPSBmdW5jdGlvbiAoIHQgKSB7XHJcbiAgICByZXR1cm4gdDtcclxufTtcclxuXHJcbmVhc2luZy5pblF1YWRyYXRpYyA9IGZ1bmN0aW9uICggdCApIHtcclxuICAgIHJldHVybiB0ICogdDtcclxufTtcclxuXHJcbmVhc2luZy5vdXRRdWFkcmF0aWMgPSBmdW5jdGlvbiAoIHQgKSB7XHJcbiAgICByZXR1cm4gLXQgKiAoIHQgLSAyICk7XHJcbn07XHJcblxyXG5lYXNpbmcuaW5PdXRRdWFkcmF0aWMgPSBmdW5jdGlvbiAoIHQgKSB7XHJcbiAgICBpZiAoIHQgPCAwLjUgKSByZXR1cm4gMiAqIHQgKiB0O1xyXG5cclxuICAgIHJldHVybiAtMiAqIHQgKiAoIHQgLSAyICkgLSAxO1xyXG59O1xyXG5cclxuZWFzaW5nLmluUXVhcnRpYyA9IGZ1bmN0aW9uICggdCApIHtcclxuICAgIHJldHVybiB0ICogdCAqIHQgKiB0O1xyXG59O1xyXG5cclxuZWFzaW5nLm91dFF1YXJ0aWMgPSBmdW5jdGlvbiAoIHQgKSB7XHJcbiAgICB0ID0gdCAtIDE7XHJcblxyXG4gICAgcmV0dXJuIDEgLSB0ICogdCAqIHQgKiB0O1xyXG59O1xyXG5cclxuZWFzaW5nLmluT3V0UXVhcnRpYyA9IGZ1bmN0aW9uICggdCApIHtcclxuICAgIGlmICggdCA8IDAuNSApIHJldHVybiA4ICogdCAqIHQgKiB0ICogdDtcclxuICAgIHQgPSB0IC0gMTtcclxuXHJcbiAgICByZXR1cm4gLTggKiB0ICogdCAqIHQgKiB0ICsgMTtcclxufTtcclxuXHJcbmVhc2luZy5pblF1aW50aWMgPSBmdW5jdGlvbiAoIHQgKSB7XHJcbiAgICByZXR1cm4gdCAqIHQgKiB0ICogdCAqIHQ7XHJcbn07XHJcblxyXG5lYXNpbmcub3V0UXVpbnRpYyA9IGZ1bmN0aW9uICggdCApIHtcclxuICAgIHQgPSB0IC0gMTtcclxuXHJcbiAgICByZXR1cm4gMSArIHQgKiB0ICogdCAqIHQgKiB0O1xyXG59O1xyXG5cclxuZWFzaW5nLmluT3V0UXVpbnRpYyA9IGZ1bmN0aW9uICggdCApIHtcclxuICAgIGlmICggdCA8IDAuNSApIHJldHVybiAxNiAqIHQgKiB0ICogdCAqIHQgKiB0O1xyXG4gICAgdCA9IHQgLSAxO1xyXG5cclxuICAgIHJldHVybiAxNiAqIHQgKiB0ICogdCAqIHQgKiB0ICsgMTtcclxufTtcclxuXHJcbmVhc2luZy5pblNpbmUgPSBmdW5jdGlvbiAoIHQgKSB7XHJcbiAgICByZXR1cm4gMSAtIE1hdGguY29zKCB0ICogKCBNYXRoLlBJIC8gMiApICk7XHJcbn07XHJcblxyXG5lYXNpbmcub3V0U2luZSA9IGZ1bmN0aW9uICggdCApIHtcclxuICAgIHJldHVybiBNYXRoLnNpbiggdCAqICggTWF0aC5QSSAvIDIgKSApO1xyXG59O1xyXG5cclxuZWFzaW5nLmluT3V0U2luZSA9IGZ1bmN0aW9uICggdCApIHtcclxuICAgIHJldHVybiAtMC41ICogKCBNYXRoLmNvcyggdCAqIE1hdGguUEkgKSAtIDEgKTtcclxufTtcclxuXHJcbmVhc2luZy5vdXRFbGFzdGljU21vb3RoID0gZnVuY3Rpb24gKCB0ICkge1xyXG4gICAgaWYgKCB0ID09IDAgfHwgdCA9PSAxICkgcmV0dXJuIHQ7XHJcbiAgICB2YXIgZWxhc3RpY0EgPSAxLCBlbGFzdGljUCA9IDAuMzg7XHJcbiAgICB2YXIgZWxhc3RpY1MgPSBlbGFzdGljUCAvIDQ7XHJcblxyXG4gICAgcmV0dXJuIGVsYXN0aWNBICogTWF0aC5wb3coIDIuNSwgLTEwICogdCApICogTWF0aC5zaW4oICggdCAtIGVsYXN0aWNTICkgKiAoIDIgKiBNYXRoLlBJICkgLyBlbGFzdGljUCApICsgMTtcclxufTtcclxuXHJcbmVhc2luZy5pbkVsYXN0aWNTbW9vdGgyID0gZnVuY3Rpb24gKCB0ICkge1xyXG4gICAgaWYgKCB0ID09IDAgfHwgdCA9PSAxICkgcmV0dXJuIHQ7XHJcbiAgICB0ID0gdCAtIDE7XHJcbiAgICB2YXIgZWxhc3RpY0EgPSAxLCBlbGFzdGljUCA9IDAuNTc7XHJcbiAgICB2YXIgZWxhc3RpY1MgPSBlbGFzdGljUCAvIDQ7XHJcblxyXG4gICAgcmV0dXJuIC0oIGVsYXN0aWNBICogTWF0aC5wb3coIDIuNiwgMTAgKiB0ICkgKiBNYXRoLnNpbiggKCB0IC0gZWxhc3RpY1MgKSAqICggMiAqIE1hdGguUEkgKSAvIGVsYXN0aWNQICkgKTtcclxufTtcclxuXHJcbmVhc2luZy5vdXRFbGFzdGljU21vb3RoMiA9IGZ1bmN0aW9uICggdCApIHtcclxuICAgIGlmICggdCA9PSAwIHx8IHQgPT0gMSApIHJldHVybiB0O1xyXG4gICAgdmFyIGVsYXN0aWNBID0gMSwgZWxhc3RpY1AgPSAwLjU3O1xyXG4gICAgdmFyIGVsYXN0aWNTID0gZWxhc3RpY1AgLyA0O1xyXG5cclxuICAgIHJldHVybiBlbGFzdGljQSAqIE1hdGgucG93KCAyLjYsIC0xMCAqIHQgKSAqIE1hdGguc2luKCAoIHQgLSBlbGFzdGljUyApICogKCAyICogTWF0aC5QSSApIC8gZWxhc3RpY1AgKSArIDE7XHJcbn07XHJcblxyXG5lYXNpbmcub3V0RWxhc3RpY1dhdmUgPSBmdW5jdGlvbiAoIHQgKSB7XHJcbiAgICBpZiAoIHQgPT0gMCB8fCB0ID09IDEgKSByZXR1cm4gdDtcclxuICAgIHZhciBlbGFzdGljUCA9IDAuMTk7XHJcbiAgICB2YXIgZWxhc3RpY1MgPSBlbGFzdGljUCAvIDQ7XHJcbiAgICB2YXIgdFBvdyA9IE1hdGgucG93KCB0LCA0ICk7XHJcbiAgICB2YXIgdiA9IE1hdGgucG93KCAyMjAsIC0wLjcgKiBNYXRoLnBvdyggdCwgMC40ICkgKSAqIE1hdGguc2luKCAoIE1hdGgucG93KCB0LCAwLjk1ICkgLSBlbGFzdGljUyApICogKCAyICogTWF0aC5QSSApIC8gZWxhc3RpY1AgKSArIDE7XHJcblxyXG4gICAgcmV0dXJuIHYgKiAoIDEgLSB0UG93ICkgKyB0UG93O1xyXG59O1xyXG5cclxuXHJcbiIsImV4cG9ydCB7IEFwcGxpY2F0aW9uLGFwcGxpY2F0aW9uLHN0YWdlIH0gZnJvbSBcIi4vQXBwbGljYXRpb24uanNcIjtcclxuZXhwb3J0IHsgQml0bWFwIH0gZnJvbSBcIi4vQml0bWFwLmpzXCI7XHJcbmV4cG9ydCB7IENvbXBvbmVudCB9IGZyb20gXCIuL0NvbXBvbmVudC5qc1wiO1xyXG5leHBvcnQgeyBDb21wb25lbnRIb2xkZXIgfSBmcm9tIFwiLi9Db21wb25lbnRIb2xkZXIuanNcIjtcclxuZXhwb3J0IHsgRXZlbnQgfSBmcm9tIFwiLi9FdmVudC5qc1wiO1xyXG5leHBvcnQgeyBFdmVudERpc3BhdGNoZXIgfSBmcm9tIFwiLi9FdmVudERpc3BhdGNoZXIuanNcIjtcclxuZXhwb3J0IHsgVHJ1ZVR5cGVGb250IH0gZnJvbSBcIi4vVHJ1ZVR5cGVGb250LmpzXCI7XHJcbmV4cG9ydCB7IEJpdG1hcEZvbnQgfSBmcm9tIFwiLi9CaXRtYXBGb250LmpzXCI7XHJcbmV4cG9ydCB7IE1zZGZGb250IH0gZnJvbSBcIi4vTXNkZkZvbnQuanNcIjtcclxuZXhwb3J0IHsgS2V5Q29kZSB9IGZyb20gXCIuL0tleUNvZGUuanNcIjtcclxuZXhwb3J0IHsgTGF5b3V0IH0gZnJvbSBcIi4vTGF5b3V0LmpzXCI7XHJcbmV4cG9ydCB7IE1hdHJpeCB9IGZyb20gXCIuL01hdHJpeC5qc1wiO1xyXG5leHBvcnQgeyBNZXNoIH0gZnJvbSBcIi4vTWVzaC5qc1wiO1xyXG5leHBvcnQgeyBNb3ZpZUNsaXAgfSBmcm9tIFwiLi9Nb3ZpZUNsaXAuanNcIjtcclxuZXhwb3J0IHsgUGFydGljbGVzIH0gZnJvbSBcIi4vUGFydGljbGVzLmpzXCI7XHJcbmV4cG9ydCB7IFBpeGVsIH0gZnJvbSBcIi4vUGl4ZWwuanNcIjtcclxuZXhwb3J0IHsgUmVuZGVyVGFyZ2V0IH0gZnJvbSBcIi4vUmVuZGVyVGFyZ2V0LmpzXCI7XHJcbmV4cG9ydCB7IFNjZW5lTWFuYWdlciB9IGZyb20gXCIuL1NjZW5lTWFuYWdlci5qc1wiO1xyXG5leHBvcnQgeyBTaGFkZXIgfSBmcm9tIFwiLi9TaGFkZXIuanNcIjtcclxuZXhwb3J0IHsgU2hhcGUgfSBmcm9tIFwiLi9TaGFwZS5qc1wiO1xyXG5leHBvcnQgeyBTb3VuZCB9IGZyb20gXCIuL1NvdW5kLmpzXCI7XHJcbmV4cG9ydCB7IFNwaW5lIH0gZnJvbSBcIi4vU3BpbmUuanNcIjtcclxuZXhwb3J0IHsgU3ByaXRlIH0gZnJvbSBcIi4vU3ByaXRlLmpzXCI7XHJcbmV4cG9ydCB7IFN0YWdlIH0gZnJvbSBcIi4vU3RhZ2UuanNcIjtcclxuZXhwb3J0IHsgU3RvcmFnZSB9IGZyb20gXCIuL1N0b3JhZ2UuanNcIjtcclxuZXhwb3J0IHsgVGV4dEZpZWxkIH0gZnJvbSBcIi4vVGV4dEZpZWxkLmpzXCI7XHJcbmV4cG9ydCB7IFRleHR1cmUgfSBmcm9tIFwiLi9UZXh0dXJlLmpzXCI7XHJcbmV4cG9ydCB7IFRleHR1cmVCYXNlIH0gZnJvbSBcIi4vVGV4dHVyZUJhc2UuanNcIjtcclxuZXhwb3J0IHsgVGV4dHVyZVBhY2sgfSBmcm9tIFwiLi9UZXh0dXJlUGFjay5qc1wiO1xyXG5leHBvcnQgeyBUaWxlTWFwIH0gZnJvbSBcIi4vVGlsZU1hcC5qc1wiO1xyXG5leHBvcnQgeyBUaW1lciB9IGZyb20gXCIuL1RpbWVyLmpzXCI7XHJcbmV4cG9ydCB7IFR3ZWVuIH0gZnJvbSBcIi4vVHdlZW4uanNcIjtcclxuZXhwb3J0IHsgVXRpbHMgfSBmcm9tIFwiLi9VdGlscy5qc1wiO1xyXG5leHBvcnQgeyBlYXNpbmcgfSBmcm9tIFwiLi9lYXNpbmcuanNcIjtcclxuZXhwb3J0IHsgaGFuZ3VsIH0gZnJvbSBcIi4vaGFuZ3VsLmpzXCI7XHJcbmV4cG9ydCB7IFBvaW50LCBSZWN0IH0gZnJvbSBcIi4vVHlwZXMuanNcIjtcclxuZXhwb3J0IHsgU2VyaWFsaXplciB9IGZyb20gXCIuL1NlcmlhbGl6ZXIuanNcIjtcclxuIiwiXG5jb25zdCBjaG9TdW5nVGFibGUgPSBbXCLjhLFcIiwgXCLjhLJcIiwgXCLjhLRcIiwgXCLjhLdcIiwgXCLjhLhcIiwgXCLjhLlcIiwgXCLjhYFcIiwgXCLjhYJcIiwgXCLjhYNcIiwgXCLjhYVcIiwgXCLjhYZcIiwgXCLjhYdcIiwgXCLjhYhcIiwgXCLjhYlcIiwgXCLjhYpcIiwgXCLjhYtcIiwgXCLjhYxcIiwgXCLjhY1cIiwgXCLjhY5cIl07XG5jb25zdCBqdW5nU3VuZ1RhYmxlID0gW1xuICAgIFwi44WPXCIsIFwi44WQXCIsIFwi44WRXCIsIFwi44WSXCIsIFwi44WTXCIsIC8vIDB+NDtcbiAgICBcIuOFlFwiLCBcIuOFlVwiLCBcIuOFllwiLCBcIuOFl1wiLCBcIuOFmFwiLCAvLyA1fjk7XG4gICAgXCLjhZlcIiwgXCLjhZpcIiwgXCLjhZtcIiwgXCLjhZxcIiwgXCLjhZ1cIiwgLy8gMTB+MTQ7XG4gICAgXCLjhZ5cIiwgXCLjhZ9cIiwgXCLjhaBcIiwgXCLjhaFcIiwgXCLjhaJcIiwgLy8gMTV+MTk7XG4gICAgXCLjhaNcIl07XG5jb25zdCBqb25nU3VuZ1RhYmxlID0gW1wiIFwiLCBcIuOEsVwiLCBcIuOEslwiLCBcIuOEs1wiLCBcIuOEtFwiLCBcIuOEtVwiLCBcIuOEtlwiLCBcIuOEt1wiLCBcIuOEuVwiLCBcIuOEulwiLCBcIuOEu1wiLCBcIuOEvFwiLCBcIuOEvVwiLCBcIuOEvlwiLCBcIuOEv1wiLCBcIuOFgFwiLCBcIuOFgVwiLCBcIuOFglwiLCBcIuOFhFwiLCBcIuOFhVwiLCBcIuOFhlwiLCBcIuOFh1wiLCBcIuOFiFwiLCBcIuOFilwiLCBcIuOFi1wiLCBcIuOFjFwiLCBcIuOFjVwiLCBcIuOFjlwiXTtcblxuY29uc3QgY2hvU3VuZ1RvQ29kZSA9IHt9O1xuY29uc3QganVuZ1N1bmdUb0NvZGUgPSB7XG4gICAgW1wi44WP44WjXCJdOiAgMSxcbiAgICBbXCLjhaPjhY9cIl06ICAyLFxuICAgIFtcIuOFkeOFo1wiXTogIDMsXG4gICAgW1wi44WT44WjXCJdOiAgNSxcbiAgICBbXCLjhaPjhZNcIl06ICA2LFxuICAgIFtcIuOFleOFo1wiXTogIDcsXG4gICAgW1wi44WX44WPXCJdOiAgOSxcbiAgICBbXCLjhZfjhZBcIl06ICAxMCxcbiAgICBbXCLjhZfjhY/jhaNcIl06IDEwLFxuICAgIFtcIuOFl+OFo1wiXTogIDExLFxuICAgIFtcIuOFo+OFl1wiXTogIDEyLFxuICAgIFtcIuOFnOOFk1wiXTogIDE0LFxuICAgIFtcIuOFnOOFlFwiXTogIDE1LFxuICAgIFtcIuOFnOOFk+OFo1wiXTogMTUsXG4gICAgW1wi44Wc44WjXCJdOiAgMTYsXG4gICAgW1wi44Wh44WcXCJdOiAgMTcsXG4gICAgW1wi44Wh44WjXCJdOiAgMTksXG59O1xuY29uc3Qgam9uZ1N1bmdUb0NvZGUgPSB7fTtcblxuZm9yICggbGV0IGkgPSAwOyBpIDwgY2hvU3VuZ1RhYmxlLmxlbmd0aDsgaSsrICkge1xuICAgIGNvbnN0IHYgPSBjaG9TdW5nVGFibGVbaV07XG5cbiAgICBjaG9TdW5nVG9Db2RlW3ZdID0gaTtcbn1cblxuZm9yICggbGV0IGkgPSAwOyBpIDwganVuZ1N1bmdUYWJsZS5sZW5ndGg7IGkrKyApIHtcbiAgICBjb25zdCB2ID0ganVuZ1N1bmdUYWJsZVtpXTtcblxuICAgIGp1bmdTdW5nVG9Db2RlW3ZdID0gaTtcbn1cblxuZm9yICggbGV0IGkgPSAwOyBpIDwgam9uZ1N1bmdUYWJsZS5sZW5ndGg7IGkrKyApIHtcbiAgICBjb25zdCB2ID0gam9uZ1N1bmdUYWJsZVtpXTtcblxuICAgIGpvbmdTdW5nVG9Db2RlW3ZdID0gaTtcbn1cblxuY29uc3QgdW5pQ29kZUhhbmd1bEJhc2UgPSAweGFjMDA7XG5jb25zdCB1bmlDb2RlSGFuZ3VsTGFzdCA9IDB4ZDc5ZjtcblxuZXhwb3J0IGNvbnN0IGhhbmd1bCA9IHt9O1xuXG5mdW5jdGlvbiB1Y2hhclRvTnVtYmVyKCB1Y2hhciApIHtcbiAgICByZXR1cm4gdWNoYXIuY2hhckNvZGVBdCggMCApO1xufVxuXG5jb25zdCByYW5nZUhhbmd1bCA9IFt1Y2hhclRvTnVtYmVyKCBcIuqwgFwiICksIHVjaGFyVG9OdW1iZXIoIFwi7Z6jXCIgKV07XG5cbmhhbmd1bC5pc1ZhbGlkVW5pY29kZSA9IGZ1bmN0aW9uICggdWNoYXIgKSB7XG4gICAgLy9b6rCALe2eo10g6rKA7IKsLCBcbiAgICBjb25zdCBudW0gPSB1Y2hhclRvTnVtYmVyKCB1Y2hhciApO1xuXG4gICAgcmV0dXJuIG51bSA+PSByYW5nZUhhbmd1bFswXSAmJiBudW0gPD0gcmFuZ2VIYW5ndWxbMV07XG59O1xuXG5jb25zdCByYW5nZUhhbmd1bEphID0gW3VjaGFyVG9OdW1iZXIoIFwi44SxXCIgKSwgdWNoYXJUb051bWJlciggXCLjhY5cIiApXTtcbmNvbnN0IHJhbmdlSGFuZ3VsTW8gPSBbdWNoYXJUb051bWJlciggXCLjhY9cIiApLCB1Y2hhclRvTnVtYmVyKCBcIuOFo1wiICldO1xuXG5oYW5ndWwuaXNKYW1vID0gZnVuY3Rpb24gKCB1Y2hhciApIHtcbiAgICAvL+yekOuqqCDsl6zrtoAg6rKA7IKsIOqygOyCrFxuICAgIGNvbnN0IG51bSA9IHVjaGFyVG9OdW1iZXIoIHVjaGFyICk7XG5cbiAgICByZXR1cm4gKCBudW0gPj0gcmFuZ2VIYW5ndWxKYVswXSAmJiBudW0gPD0gcmFuZ2VIYW5ndWxKYVsxXSApIHx8XG5cdFx0KCBudW0gPj0gcmFuZ2VIYW5ndWxNb1swXSAmJiBudW0gPD0gcmFuZ2VIYW5ndWxNb1sxXSApO1xufTtcblxuLy8g66eI7KeA66eJ7J20IOyiheyEseydtCDqsoDsgqxcbmhhbmd1bC5pc0pvbmdTdW5nID0gZnVuY3Rpb24gKCBzdHIgKSB7XG4gICAgY29uc3QgY2hhciA9IHN0ci5zdWJzdHIoIHN0ci5sZW5ndGggLSAxICk7XG4gICAgY29uc3QgY29kZSA9IGNoYXIuY2hhckNvZGVBdCggMCApO1xuXG4gICAgaWYgKCBjb2RlIDwgdW5pQ29kZUhhbmd1bEJhc2UgfHwgY29kZSA+IHVuaUNvZGVIYW5ndWxMYXN0ICkge1xuICAgICAgICBjb25zdCBjaG9TdW5nID0gY2hvU3VuZ1RvQ29kZVtjaGFyXTtcblxuICAgICAgICBpZiAoIGNob1N1bmcgKSB7XG4gICAgICAgICAgICAvLyDsnpDsnYzsnYAg66qo65GQIOuwm+y5qOydtCDsnojqsowg67Cc7J2M65Cc64ukXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggXCJiY2RmZ2hqa2xtbnBxcnN0dnd4ejEzNjc4MFwiLmluZGV4T2YoIGNoYXIgKSA+PSAwICkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8g67aE7ZW07ZW07IScIOuwm+y5qOydtCDsnojripTsp4Ag67O464ukXG4gICAgbGV0IHVjID0gY29kZSAtIHVuaUNvZGVIYW5ndWxCYXNlO1xuXG4gICAgLy9jb25zdCBjaG9TdW5nID0gTWF0aC5mbG9vcih1YyAvICgyMSAqIDI4KSk7XG4gICAgdWMgPSB1YyAlICggMjEgKiAyOCApO1xuICAgIC8vY29uc3QganVuZ1N1bmcgPSBNYXRoLmZsb29yKHVjIC8gMjgpO1xuICAgIHVjID0gdWMgJSAyODtcbiAgICBjb25zdCBqb25nU3VuZyA9IHVjO1xuXG4gICAgcmV0dXJuIGpvbmdTdW5nID4gMDtcbn07XG5cblxuXG5cbi8vIOuMgO2VnOuvvOq1rXvrpbx9IOqwgOugpOuptCBb67mE7ZaJ6riwXXvsnYR9IO2DgOudvFxuXG5oYW5ndWwucmVwbGFjZUpvU2EgPSBmdW5jdGlvbiAoIGlucHV0VGV4dCApIHtcbiAgICBpZiAoIGlucHV0VGV4dCA9PSBudWxsIHx8IGlucHV0VGV4dCA9PSBcIlwiICkgcmV0dXJuIGlucHV0VGV4dDtcblxuICAgIC8vbGV0IHdvcmRzID0gaW5wdXRUZXh0Lm1hdGNoKC9cXHMqKFtcXFNdKyl7KFteL31dKyl9L2cpO1xuICAgIGNvbnN0IHJlID0gL30/KFtefV0qKXsoW14vfV0qKX0vZztcbiAgICBsZXQgcmVzdWx0ID0gcmUuZXhlYyggaW5wdXRUZXh0ICk7XG4gICAgLy9jb25zdCB3b3JkcyA9IFtdO1xuICAgIGxldCBsYXN0SW5kZXggPSAwO1xuICAgIGxldCBzID0gXCJcIjtcblxuICAgIHdoaWxlICggcmVzdWx0ICE9IG51bGwgKSB7XG4gICAgICAgIGxhc3RJbmRleCA9IHJlLmxhc3RJbmRleDtcbiAgICAgICAgY29uc3QgW3ByZSwgam9TYSwgbGFzdENoYXJdID0gW1xuICAgICAgICAgICAgLy9SZWdFeHAubGFzdE1hdGNoLFxuICAgICAgICAgICAgUmVnRXhwLiQxLFxuICAgICAgICAgICAgUmVnRXhwLiQyLFxuICAgICAgICAgICAgUmVnRXhwLiQxLm1hdGNoKCAvLlsnXCJgXigpW1xcXV0/JC8gKVswXS5zdWJzdHIoIDAsIDEgKSwgLy8g66eI7KeA66eJIOq4gOyekFxuICAgICAgICBdO1xuICAgICAgICBjb25zdCBpc0pvbmdTdW5nID0gaGFuZ3VsLmlzSm9uZ1N1bmcoIGxhc3RDaGFyICk7XG4gICAgICAgIGNvbnN0IGpvbmdTdW5nID0gaXNKb25nU3VuZyA/IGhhbmd1bC5kaXZpZGVKYVNvKCBsYXN0Q2hhciApWzJdIDogbnVsbDtcbiAgICAgICAgbGV0IG5ld0pvU2E7XG5cbiAgICAgICAgaWYgKCBqb1NhID09IFwi7J2EXCIgfHwgam9TYSA9PSBcIuulvFwiICkge1xuICAgICAgICAgICAgbmV3Sm9TYSA9IGlzSm9uZ1N1bmcgPyBcIuydhFwiIDogXCLrpbxcIjtcbiAgICAgICAgfSBlbHNlIGlmICggam9TYSA9PSBcIuydtFwiIHx8IGpvU2EgPT0gXCLqsIBcIiApIHtcbiAgICAgICAgICAgIG5ld0pvU2EgPSBpc0pvbmdTdW5nID8gXCLsnbRcIiA6IFwi6rCAXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoIGpvU2EgPT0gXCLqs7xcIiB8fCBqb1NhID09IFwi7JmAXCIgKSB7XG4gICAgICAgICAgICBuZXdKb1NhID0gaXNKb25nU3VuZyA/IFwi6rO8XCIgOiBcIuyZgFwiO1xuICAgICAgICB9IGVsc2UgaWYgKCBqb1NhID09IFwi7J2AXCIgfHwgam9TYSA9PSBcIuuKlFwiICkge1xuICAgICAgICAgICAgbmV3Sm9TYSA9IGlzSm9uZ1N1bmcgPyBcIuydgFwiIDogXCLripRcIjtcbiAgICAgICAgfSBlbHNlIGlmICggam9TYSA9PSBcIuydtOuKlFwiICkge1xuICAgICAgICAgICAgbmV3Sm9TYSA9IGlzSm9uZ1N1bmcgPyBcIuydtOuKlFwiIDogXCLripRcIjtcbiAgICAgICAgfSBlbHNlIGlmICggam9TYSA9PSBcIuydtOyZgFwiICkge1xuICAgICAgICAgICAgbmV3Sm9TYSA9IGlzSm9uZ1N1bmcgPyBcIuydtOyZgFwiIDogXCLsmYBcIjtcbiAgICAgICAgfSBlbHNlIGlmICggam9TYSA9PSBcIuyXrFwiIHx8IGpvU2EgPT0gXCLsnbTsl6xcIiApIHtcbiAgICAgICAgICAgIG5ld0pvU2EgPSBpc0pvbmdTdW5nID8gXCLsnbTsl6xcIiA6IFwi7JesXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoIGpvU2EgPT0gXCLsnLzroZxcIiB8fCBqb1NhID09IFwi66GcXCIgKSB7XG4gICAgICAgICAgICBuZXdKb1NhID0gKCBpc0pvbmdTdW5nICYmIGpvbmdTdW5nICE9IFwi44S5XCIgKSA/IFwi7Jy866GcXCIgOiBcIuuhnFwiO1xuICAgICAgICB9IGVsc2UgaWYgKCBqb1NhID09IFwi7J2064SkXCIgfHwgam9TYSA9PSBcIuuEpFwiICkge1xuICAgICAgICAgICAgbmV3Sm9TYSA9IGlzSm9uZ1N1bmcgPyBcIuydtOuEpFwiIDogXCLrhKRcIjtcbiAgICAgICAgfSBlbHNlIGlmICggam9TYSA9PSBcIuydtOuekVwiIHx8IGpvU2EgPT0gXCLrnpFcIiApIHtcbiAgICAgICAgICAgIG5ld0pvU2EgPSBpc0pvbmdTdW5nID8gXCLsnbTrnpFcIiA6IFwi656RXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoIGpvU2EgPT0gXCLrnbxcIiApIHtcbiAgICAgICAgICAgIG5ld0pvU2EgPSBpc0pvbmdTdW5nID8gXCLsnbTrnbxcIiA6IFwi6528XCI7XG4gICAgICAgIH1cblxuICAgICAgICBzID0gcyArIHByZSArIG5ld0pvU2E7XG5cbiAgICAgICAgcmVzdWx0ID0gcmUuZXhlYyggaW5wdXRUZXh0ICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHMgKyBpbnB1dFRleHQuc3Vic3RyKCBsYXN0SW5kZXggKTtcbn07XG5cbmhhbmd1bC5mb3JtYXQgPSBmdW5jdGlvbiAoIHRleHQsIC4uLmFyZ3MgKSB7XG4gICAgbGV0IHM7XG5cbiAgICBpZiAoIGFyZ3MubGVuZ3RoID4gMCApIHtcbiAgICAgICAgLy8gJXMgJWRcbiAgICAgICAgLy8gJTAgJTEgJTIgJTMgJTQuLi5cbiAgICAgICAgbGV0IGNvdW50ID0gMDtcblxuICAgICAgICBzID0gdGV4dC5yZXBsYWNlKCAvJVtzfGRdL2csIGZ1bmN0aW9uICggcyApIHtcbiAgICAgICAgICAgIHJldHVybiBgJSR7Y291bnQrK31gO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKyApIHtcbiAgICAgICAgICAgIHMgPSBzLnJlcGxhY2UoIGAlJHtpfWAsIGFyZ3NbaV0gKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBzID0gdGV4dDtcblxuICAgIHJldHVybiBoYW5ndWwucmVwbGFjZUpvU2EoIHMgKTtcbn07XG5cbi8vIOyekOyGjOulvCDtlansuZzri6Rcbmhhbmd1bC5tZXJnZUphU28gPSBmdW5jdGlvbiAoIGNob1N1bmcsIGp1bmdTdW5nLCBqb25nU3VuZyApIHtcbiAgICAvL2xvZyhjaG9TdW5nLGp1bmdTdW5nLGpvbmdTdW5nKTtcbiAgICBjb25zdCBjaG9TdW5nUG9zID0gY2hvU3VuZ1RvQ29kZVtjaG9TdW5nXTtcbiAgICBjb25zdCBqdW5nU3VuZ1BvcyA9IGp1bmdTdW5nVG9Db2RlW2p1bmdTdW5nXTtcbiAgICBjb25zdCBqb25nU3VuZ1BvcyA9IGpvbmdTdW5nID8gam9uZ1N1bmdUb0NvZGVbam9uZ1N1bmddIDogMDtcbiAgICBjb25zdCBjb2RlID0gdW5pQ29kZUhhbmd1bEJhc2UgKyAoIGNob1N1bmdQb3MgKiAyMSArIGp1bmdTdW5nUG9zICkgKiAyOCArIGpvbmdTdW5nUG9zO1xuXG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoIGNvZGUgKTtcbn07XG5cbi8vIOq4gOyekO2VmOuCmOulvCDsnpDshozroZwg67aE66as7ZWc64ukXG5oYW5ndWwuZGl2aWRlSmFTbyA9IGZ1bmN0aW9uICggY2hhciApIHtcbiAgICBjb25zdCBjb2RlID0gY2hhci5jaGFyQ29kZUF0KCAwICk7XG5cbiAgICBpZiAoIGNvZGUgPCB1bmlDb2RlSGFuZ3VsQmFzZSB8fCBjb2RlID4gdW5pQ29kZUhhbmd1bExhc3QgKSB7XG4gICAgICAgIGNvbnN0IGNob1N1bmcgPSBjaG9TdW5nVG9Db2RlW2NoYXJdO1xuXG4gICAgICAgIGlmICggY2hvU3VuZyApIHtcbiAgICAgICAgICAgIHJldHVybiBbY2hvU3VuZ1RhYmxlW2Nob1N1bmddXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGp1bmdTdW5nID0ganVuZ1N1bmdUb0NvZGVbY2hhcl07XG5cbiAgICAgICAgaWYgKCBqdW5nU3VuZyApIHtcbiAgICAgICAgICAgIHJldHVybiBbbnVsbCwganVuZ1N1bmdUYWJsZVtqdW5nU3VuZ11dO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGxldCB1YyA9IGNvZGUgLSB1bmlDb2RlSGFuZ3VsQmFzZTtcbiAgICBjb25zdCBjaG9TdW5nID0gTWF0aC5mbG9vciggdWMgLyAoIDIxICogMjggKSApO1xuXG4gICAgdWMgPSB1YyAlICggMjEgKiAyOCApO1xuICAgIGNvbnN0IGp1bmdTdW5nID0gTWF0aC5mbG9vciggdWMgLyAyOCApO1xuXG4gICAgdWMgPSB1YyAlIDI4O1xuICAgIGNvbnN0IGpvbmdTdW5nID0gdWM7XG5cbiAgICByZXR1cm4gW1xuICAgICAgICBjaG9TdW5nVGFibGVbY2hvU3VuZ10sXG4gICAgICAgIGp1bmdTdW5nVGFibGVbanVuZ1N1bmddLFxuICAgICAgICAoIGpvbmdTdW5nID4gMCAmJiBqb25nU3VuZ1RhYmxlW2pvbmdTdW5nXSB8fCBudWxsIClcbiAgICBdO1xufTtcblxuLy8g7J20IOy6kOumre2EsOqwgCDsnpDshozspJHsl5Ag7ZWY64KY7J247KeAIOqygOyCrFxuaGFuZ3VsLmdldFR5cGVPZkphU28gPSBmdW5jdGlvbiAoIGNoYXIgKSB7XG4gICAgbGV0IFtmMSwgZjIsIGYzXSA9IFtmYWxzZSwgZmFsc2UsIGZhbHNlXTtcbiAgICBjb25zdCBjaG9TdW5nID0gY2hvU3VuZ1RvQ29kZVtjaGFyXTtcblxuICAgIGlmICggY2hvU3VuZyApIHtcbiAgICAgICAgZjEgPSB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IGp1bmdTdW5nID0ganVuZ1N1bmdUb0NvZGVbY2hhcl07XG5cbiAgICBpZiAoIGp1bmdTdW5nICkge1xuICAgICAgICBmMiA9IHRydWU7XG4gICAgfVxuXG4gICAgY29uc3Qgam9uZ1N1bmcgPSBqb25nU3VuZ1RvQ29kZVtjaGFyXTtcblxuICAgIGlmICggam9uZ1N1bmcgKSB7XG4gICAgICAgIGYzID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gW2YxLCBmMiwgZjNdO1xufTtcblxuLy8gY29uc29sZS5sb2coaGFuZ3VsLmRpdmlkZUphU28oXCLtlZxcIikpO1xuLy8gY29uc29sZS5sb2coaGFuZ3VsLm1lcmdlSmFTbyguLi5oYW5ndWwuZGl2aWRlSmFTbyhcIuq4gFwiKSkpO1xuLy8gY29uc29sZS5sb2coaGFuZ3VsLmlzSmFtbyhcIu2VnFwiKSk7XG4vLyBjb25zb2xlLmxvZyhoYW5ndWwuaXNKYW1vKFwi44WPXCIpKTtcbi8vIGNvbnNvbGUubG9nKGhhbmd1bC5pc0pvbmdTdW5nKFwi6rCEXCIpKTtcbi8vIGNvbnNvbGUubG9nKGhhbmd1bC5pc0pvbmdTdW5nKFwi6rCAXCIpKTtcbi8vIGNvbnNvbGUubG9nKGhhbmd1bC5pc0pvbmdTdW5nKFwiYm9iXCIpKTtcbi8vIGNvbnNvbGUubG9nKGhhbmd1bC5yZXBsYWNlSm9TYShcIuuMgO2VnOuvvOq1rXvrpbx9IOqwgOugpOuptCAn67mE7ZaJ6riwJ3vsnYR9IO2DgOudvCAzMjN766GcfVwiKSk7XG4iLCIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIENvcHlyaWdodCAoYykgMjAxMiBSYXBpZEZpcmUgU3R1ZGlvIExpbWl0ZWQ7XHJcbi8vIEFsbCBSaWdodHMgUmVzZXJ2ZWQuIFxyXG4vLyBodHRwOi8vd3d3LnJhcGlkZmlyZXN0dWRpby5jb207XHJcbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZztcclxuLy8gYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgJiYgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGU7XHJcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZztcclxuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxyXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvfHwgc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCAmJiB0bztcclxuLy8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvO1xyXG4vLyB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XHJcblxyXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSAmJiB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlO1xyXG4vLyBpbmNsdWRlZCBpbiBhbGwgY29waWVzIHx8IHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuXHJcbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXHJcbi8vIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRjtcclxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULlxyXG4vLyBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWTtcclxuLy8gQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCxcclxuLy8gVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEU7XHJcbi8vIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vL21vZHVsZSAoIFwiYXN0YXJcIiwgcGFja2FnZS5zZWVhbGwgKTtcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyBsZXQgdmFyaWFibGVzO1xyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5sZXQgSU5GID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xyXG5sZXQgY2FjaGVkUGF0aHMgPSBudWxsO1xyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vIGxldCBzdGF0aWNzO1xyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5cclxuY2xhc3MgYXN0YXIge1xyXG5cclxuXHJcbiAgICBzdGF0aWMgZGlzdCggeDEsIHkxLCB4MiwgeTIgKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCggTWF0aC5wb3coIHgyIC0geDEsIDIgKSArIE1hdGgucG93KCB5MiAtIHkxLCAyICkgKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZGlzdF9iZXR3ZWVuICggbm9kZUEsIG5vZGVCICkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRpc3QoIG5vZGVBLngsIG5vZGVBLnksIG5vZGVCLngsIG5vZGVCLnkgKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgaGV1cmlzdGljX2Nvc3RfZXN0aW1hdGUgKCBub2RlQSwgbm9kZUIgKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzdCggbm9kZUEueCwgbm9kZUEueSwgbm9kZUIueCwgbm9kZUIueSApO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBpc192YWxpZF9ub2RlICggbm9kZSwgbmVpZ2hib3IgKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGxvd2VzdF9mX3Njb3JlICggc2V0LCBmX3Njb3JlICkge1xyXG4gICAgICAgIGxldCBbbG93ZXN0LCBiZXN0Tm9kZV0gPSBbSU5GLCBudWxsXTtcclxuICAgICAgICBmb3IgKGxldCBpIGluIHNldCkge1xyXG4gICAgICAgICAgICBsZXQgbm9kZSA9IHNldFtpXTtcclxuICAgICAgICAgICAgbGV0IHNjb3JlID0gZl9zY29yZSBbIG5vZGUgXTtcclxuICAgICAgICAgICAgaWYgKHNjb3JlIDwgbG93ZXN0KSB7XHJcbiAgICAgICAgICAgICAgICBbbG93ZXN0LCBiZXN0Tm9kZV0gPSBbc2NvcmUsIG5vZGVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBiZXN0Tm9kZTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgbmVpZ2hib3Jfbm9kZXMgKCB0aGVOb2RlLCBub2RlcyApIHtcclxuICAgICAgICBsZXQgbmVpZ2hib3JzID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSBpbiBub2Rlcykge1xyXG4gICAgICAgICAgICBsZXQgbm9kZSA9IG5vZGVzW2ldO1xyXG4gICAgICAgICAgICBpZiAodGhlTm9kZSAhPSBub2RlICYmIHRoaXMuaXNfdmFsaWRfbm9kZSggdGhlTm9kZSwgbm9kZSApKSB7XHJcbiAgICAgICAgICAgICAgICBuZWlnaGJvcnMucHVzaChub2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmVpZ2hib3JzO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBub3RfaW4gKCBzZXQsIHRoZU5vZGUgKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSBpbiBzZXQpIHtcclxuICAgICAgICAgICAgbGV0IG5vZGUgPSBzZXRbaV07XHJcbiAgICAgICAgICAgIGlmIChub2RlID09IHRoZU5vZGUpIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHJlbW92ZV9ub2RlICggc2V0LCB0aGVOb2RlICkge1xyXG4gICAgICAgIGZvciAobGV0IGkgaW4gc2V0KSB7XHJcbiAgICAgICAgICAgIGxldCBub2RlID0gc2V0W2ldO1xyXG4gICAgICAgICAgICBpZiAobm9kZSA9PSB0aGVOb2RlKSB7IFxyXG4gICAgICAgICAgICAgICAgc2V0W2ldID0gc2V0W3NldC5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgICAgIHNldFtzZXQubGVuZ3RoIC0gMV0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHRcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgdW53aW5kX3BhdGggKCBmbGF0X3BhdGgsIG1hcCwgY3VycmVudF9ub2RlICkge1xyXG4gICAgICAgIGlmIChtYXAgWyBjdXJyZW50X25vZGUgXSkge1xyXG4gICAgICAgICAgICBmbGF0X3BhdGgudW5zaGlmdChtYXBbIGN1cnJlbnRfbm9kZSBdICk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVud2luZF9wYXRoKCBmbGF0X3BhdGgsIG1hcCwgbWFwIFsgY3VycmVudF9ub2RlIF0gKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmxhdF9wYXRoO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyBwYXRoZmluZGluZyBzdGF0aWNzO1xyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHN0YXRpYyBhX3N0YXIgKCBzdGFydCwgZ29hbCwgbm9kZXMsIHZhbGlkX25vZGVfZnVuYyApIHtcclxuICAgICAgICBsZXQgY2xvc2Vkc2V0ID0gW107XHJcbiAgICAgICAgbGV0IG9wZW5zZXQgPSBbIHN0YXJ0IF07XHJcbiAgICAgICAgbGV0IGNhbWVfZnJvbSA9IFtdO1xyXG5cclxuICAgICAgICBpZiAodmFsaWRfbm9kZV9mdW5jKSB0aGlzLmlzX3ZhbGlkX25vZGUgPSB2YWxpZF9ub2RlX2Z1bmM7XHJcblxyXG4gICAgICAgIGxldCBbZ19zY29yZSwgZl9zY29yZV0gPSBbW10sIFtdXTtcclxuICAgICAgICBnX3Njb3JlIFsgc3RhcnQgXSA9IDA7XHJcbiAgICAgICAgZl9zY29yZVtzdGFydF0gPSBnX3Njb3JlW3N0YXJ0XSArIHRoaXMuaGV1cmlzdGljX2Nvc3RfZXN0aW1hdGUoIHN0YXJ0LCBnb2FsICk7XHJcbiAgICAgICAgd2hpbGUgKG9wZW5zZXQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBsZXQgY3VycmVudCA9IHRoaXMubG93ZXN0X2Zfc2NvcmUoIG9wZW5zZXQsIGZfc2NvcmUgKTtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnQgPT0gZ29hbCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhdGggPSB0aGlzLnVud2luZF9wYXRoKCBbXSwgY2FtZV9mcm9tLCBnb2FsICk7XHJcbiAgICAgICAgICAgICAgICBwYXRoLnB1c2goZ29hbCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGF0aDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVfbm9kZSggb3BlbnNldCwgY3VycmVudCApO1xyXG4gICAgICAgICAgICBjbG9zZWRzZXQucHVzaChjdXJyZW50KTtcclxuICAgICAgICAgICAgbGV0IG5laWdoYm9ycyA9IHRoaXMubmVpZ2hib3Jfbm9kZXMoIGN1cnJlbnQsIG5vZGVzICk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgaW4gbmVpZ2hib3JzKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbmVpZ2hib3IgPSBuZWlnaGJvcnNbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ub3RfaW4oIGNsb3NlZHNldCwgbmVpZ2hib3IgKSkge1xyXG5cdFx0XHRcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGVudGF0aXZlX2dfc2NvcmUgPSBnX3Njb3JlW2N1cnJlbnRdICsgdGhpcy5kaXN0X2JldHdlZW4oIGN1cnJlbnQsIG5laWdoYm9yICk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubm90X2luKCBvcGVuc2V0LCBuZWlnaGJvciApIHx8IHRlbnRhdGl2ZV9nX3Njb3JlIDwgZ19zY29yZSBbIG5laWdoYm9yIF0pIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbWVfZnJvbSBcdFsgbmVpZ2hib3IgXSA9IGN1cnJlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdfc2NvcmUgXHRbIG5laWdoYm9yIF0gPSB0ZW50YXRpdmVfZ19zY29yZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZl9zY29yZVtuZWlnaGJvcl0gPSBnX3Njb3JlW25laWdoYm9yXSArIHRoaXMuaGV1cmlzdGljX2Nvc3RfZXN0aW1hdGUoIG5laWdoYm9yLCBnb2FsICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm5vdF9pbiggb3BlbnNldCwgbmVpZ2hib3IgKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlbnNldC5wdXNoKG5laWdoYm9yICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7IC8vIG5vIHZhbGlkIHBhdGg7XHJcbiAgICB9XHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gZXhwb3NlZCBzdGF0aWNzO1xyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHN0YXRpYyBjbGVhcl9jYWNoZWRfcGF0aHMgKCkge1xyXG4gICAgICAgIGNhY2hlZFBhdGhzID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZGlzdGFuY2UgKCB4MSwgeTEsIHgyLCB5MiApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kaXN0KCB4MSwgeTEsIHgyLCB5MiApO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBwYXRoICggc3RhcnQsIGdvYWwsIG5vZGVzLCBpZ25vcmVfY2FjaGUsIHZhbGlkX25vZGVfZnVuYyApIHtcclxuICAgICAgICBpZiAoIWNhY2hlZFBhdGhzKSB7IGNhY2hlZFBhdGhzID0ge307IH1cclxuICAgICAgICBpZiAoIWNhY2hlZFBhdGhzW3N0YXJ0XSkge1xyXG4gICAgICAgICAgICBjYWNoZWRQYXRoc1tzdGFydF0gPSB7fTtcclxuICAgICAgICB9IGVsc2UgaWYoY2FjaGVkUGF0aHNbc3RhcnRdW2dvYWxdICYmICFpZ25vcmVfY2FjaGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFBhdGhzW3N0YXJ0XVtnb2FsXTtcclxuICAgICAgICB9XHJcblx0XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYV9zdGFyKHN0YXJ0LCBnb2FsLCBub2RlcywgdmFsaWRfbm9kZV9mdW5jKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gYXN0YXI7XHJcbiIsImltcG9ydCB7IFR3ZWVuLCBTaGFwZSwgVXRpbHMsIFRleHRGaWVsZCwgZWFzaW5nLCBFdmVudCwgQml0bWFwLCBTcHJpdGUgfSBmcm9tIFwiQGVuZ2luZS9mbGF0ZmFzdFwiO1xyXG5cclxuLypcclxuXHJcbiAgICAqIO2RnOyLnOuKlCDslaDri4jrqZTsnbTshZgg6rCA64ql7ZWcIOyduOyekFxyXG4gICAgXHJcbiAgICB1cC5pbWFnZTtcclxuICAgIHVwLmZvbnQ7XHJcbiAgICB1cC50ZXh0O1xyXG4gICAgdXAudGV4dENvbG9yICAgICAgICpcclxuICAgIHVwLnRleHRBbGlnbkxlZnQ7XHJcbiAgICB1cC50ZXh0WCAgICAgICAgICAgKlxyXG4gICAgdXAudGV4dFkgICAgICAgICAgICpcclxuICAgIHVwLmljb247XHJcbiAgICB1cC5pY29uQ2hlY2tlZDtcclxuICAgIHVwLmljb25Db2xvcjtcclxuICAgIHVwLmljb25TY2FsZTtcclxuICAgIHVwLmljb25YICAgICAgICAgICAqXHJcbiAgICB1cC5pY29uWSAgICAgICAgICAgKlxyXG4gICAgdXAuY29sb3IgICAgICAgICAgICpcclxuICAgIHVwLmFscGhhICAgICAgICAgICAqXHJcbiAgICB1cC5zY2FsZSAgICAgICAgICAgKiAgICAgICAgc2NhbGVYLCBzY2FsZVnrpbwg7ZWc6rq867KI7JeQIOyngOyglVxyXG4gICAgdXAuc2NhbGVYICAgICAgICAgICpcclxuICAgIHVwLnNjYWxlWSAgICAgICAgICAqXHJcbiAgICB1cC53aWR0aDtcclxuICAgIHVwLmhlaWdodDtcclxuICAgIHVwLnggICAgICAgICAgICAgICAqXHJcbiAgICB1cC55ICAgICAgICAgICAgICAgKlxyXG4gICAgXHJcbiAgICB1cC5lYXNlO1xyXG4gICAgdXAuZHVyYXRpb247XHJcbiAgICB0ZXh0TWF4V2lkdGggICAgICAgICAgICAgICAg6riA7J6Q7J2YIOqwgOuhnCDstZzrjIAg7YGs6riw66W8IOyngOyglSjrhJjsuZjrqbQg7Iqk7LyA7J2866eB7ZW07IScIOykhOyehCk7XHJcbiAgICBjaGVja0JveDtcclxuICAgIGNoZWNrID0gZmFsc2U7XHJcbiAgICBob2xkRG93bk9uQ2xpY2sgPSBmYWxzZSAgICAgICAg7YG066at65CY7JeI7J2E65WMIOuIjOufrOyguOyeiOuKlOqwgFxyXG4gICAgY2xpY2tPbkRvd24gPSBmYWxzZSAgICAgICAgICAgIOuniOyasOyKpCDri6TsmrTsl5DshJwg7YG066at7J20IOuwnOyDne2VmOuKlOqwgFxyXG4gICAgXHJcbiAgICB0ZXh0dXJlVHlwZUltYWdlID0gdHJ1ZSAgICAgICAgICAgIOydtOuvuOyngCDtg4DsnoXsnbQgVGV4dHVyZeyduOqwgCjsnpDrj5kg7YyQ7KCVKTtcclxuICAgIHNpbmdsZVNwcml0ZVR5cGUgPSBmYWxzZSAgICAgICAg7Iqk7ZSE65287J207Yq4IO2VmOuCmOunjCDsgqzsmqntlZjripQg67KE7Yq87J246rCAKGRvd24uaW1hZ2Xrpbwg65Sw66GcIOyngOygle2VmOyngCDslYrqs6Ag7IKs7JqpLiDsnbTrr7jsp4Ag7YOA7J6F7J20IFRleHV0cmXqsIAg7JWE64uMIOqyveyasCk7XHJcbiAgICB1c2VTcHJpdGVBbmNob3JQb2ludCA9IGZhbHNlICAgIOydtOuvuOyngOulvCDsiqTtlITrnbzsnbTtirjroZwg7KeA7KCV7ZWY64qUIOqyveyasCwg6riw7KG0IOyVtey7pO2PrOyduO2KuOulvCDqt7jrjIDroZwg7IKs7Jqp7ZWg7KeAIOyXrOu2gC5cclxuICAgIHNwcml0ZVR5cGVJY29uID0gZmFsc2UgICAgICAgICAgICDslYTsnbTsvZjsnYQg7Iqk7ZSE65287J207Yq4IO2DgOyeheycvOuhnCDqsJbri6Qg7JO4IOqyg+yduOqwgC4gKOq4sOuzuOydgCBUZXh1dHVyZeudvOyEnCBuZXcgQml0bWFwKCnroZwg66eM65Ok7Ja07IScIOyCrOyaqSk7XHJcbiAgICAvLy1cclxuICAgIFxyXG4gICAgMjAxNC4wNjtcclxuICAgICAgICAtIGltYWdl7JeQIFNwcml0ZeuPhCDsp4DsoJXtlaAg7IiYIOyeiOqyjCDsiJjsoJUuICjri6gsIFNwcml0ZeulvCDsgqzsmqntlaAg65WM64qUIGRvd24uaW1hZ2Xrj4Qg67CY65Oc7IucIOyngOygle2VtOyVvCDtlagpO1xyXG4gICAgICAgIC0g7YWN7Iqk7Yq4IOygleugrO2VoCDrlYwg7JW17Luk7Y+s7J247Yq4IOqzhOyCsOydhCDrsJTsmrTrlKnrsJXsiqQg6riw7KSA7Jy866GcIOygleuwgO2VmOqyjCDqs4TsgrDtlZjrj4TroZ0g7IiY7KCVLlxyXG4gICAgICAgIC0gVVAvRE9XTiDtirjsnITri53snbQg7KSR6rCE7JeQIOuBiuq4uCDrlYwgdG9FbmQg64yA7IugIHNldFBhdXNl66GcIOyImOygle2VtOyEnCDrtoDrk5zrn73qsowg7KCE7ZmY65CY64+E66GdIOyImOyglS4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgMjAxNC4wNy4wNztcclxuICAgICAgICAtIHNpbmdsZVNwcml0ZVR5cGUg7IKs7Jqp7ZWgIOyImCDsnojqsowg65CoLiDsiqTtlITrnbzsnbTtirgg7ZWY64KY66eM7Jy866GcIOuyhO2KvCDrp4zrk6TquLAg6rCA64qlLlxyXG4gICAgICAgIC0gdXNlU3ByaXRlQW5jaG9yUG9pbnQg7LaU6rCALiDsiqTtlITrnbzsnbTtirjroZwg67KE7Yq8IOunjOuTpCDrlYwg6riw7KG07J2YIOyVtey7pO2PrOyduO2KuOulvCDqt7jrjIDroZwg7IKs7JqpLlxyXG4gICAgICAgIFxyXG4gICAgMjAxNC4wNy4xODtcclxuICAgICAgICAtIHRleHRNYXhXaWR0aCDstpTqsIAuIOy2nOugpeuQmOuKlCDquIDsnpDqsIAg7J20IOq4uOydtOulvCDrhJjslrTqsIDrqbQgc2NhbGVY66W8IOykhOyXrOykjC5cclxuICAgICAgICBcclxuICAgIDIwMTQuMDcuMjE7XHJcbiAgICAgICAgLSBkaXNhYmxlLmFscGhhIOy2lOqwgC4g67mE7Zmc7ISx7ZmUIOuQmOyXiOydhCDrlYzsnZgg7JWM7YyM66W8IOuwlOq+uOqzoCDsi7bsnYQg65WMIOyCrOyaqS5cclxuICAgICAgICAtIGljb25TY2FsZSDstpTqsIAuXHJcbiAgICAgICAgXHJcbiAgICAyMDE0LjA4LjAxO1xyXG4gICAgICAgIC0gYnV0dG9uQ2hpbGQg7LaU6rCALiDthY3siqTtirjrnpEg6rCZ7J2AIOugiOuyqOyXkCDsmbjrtoAg6rCd7LK066W8IOywqOydvOuTnOuhnCDrhKPsnYQg7IiYIOyeiOydjC5cclxuICAgICAgICAtIOyCrOyLpOyDgSDthY3siqTtirjrpbwg7Jm467aA7JeQ7IScIOyhsOumve2VtOyEnCDrhKPripTqsbDrgpgg66eI7LCs6rCA7KeAKOyVoOuLiOuplOydtOyFmOuPhCDsnpDsl7DsiqTrn73qsowg65Sw65286rCQKTtcclxuICAgIDIwMTQuMDguMjc7XHJcbiAgICAgICAgLSBoaXRCb3gg7LaU6rCALiB1cC5zcHJpdGUg64yA7IugIOuyhO2KvOyYgeyXreydhCDshKTsoJXtlZjripQg7Jqp64+ELiDquLDsmrjslrTsp4Dsp4Ag7JWK7J2AIOyCrOqwge2YlSDtmJXtg5zrp4wg7IKs7Jqp6rCA64qlLlxyXG4gICAgXHJcbiovXHJcblxyXG5cclxuZnVuY3Rpb24gc3BsaXRIZXhDb2xvciggYyApIHtcclxuICAgIGxldCByID0gTWF0aC5mbG9vciggYyAvIDY1NTM2ICkgJSA2NTUzNiAvIDI1NTtcclxuICAgIGxldCBnID0gTWF0aC5mbG9vciggYyAvIDI1NiApICUgMjU2IC8gMjU1O1xyXG4gICAgbGV0IGIgPSBjICUgMjU2IC8gMjU1O1xyXG5cclxuICAgIHJldHVybiBbciwgZywgYl07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpcmVDbGlja0V2ZW50KCBzZWxmICkge1xyXG4gICAgaWYgKCBzZWxmLmlzVmlzaWJsZSgpID09IGZhbHNlICkgeyByZXR1cm47IH1cclxuXHJcbiAgICBzZWxmLmNsaWNrZWQgPSB0cnVlO1xyXG4gICAgaWYgKCBzZWxmLnNvdW5kICkge1xyXG4gICAgICAgIHBsYXlTb3VuZCggc2VsZi5zb3VuZCApO1xyXG4gICAgfVxyXG4gICAgbGV0IGUgPSBuZXcgRXZlbnQoIFwiY2xpY2tcIiApO1xyXG5cclxuICAgIGUuY2hlY2tlZCA9IHNlbGYuY2hlY2tlZDtcclxuICAgIHNlbGYuZGlzcGF0Y2hFdmVudCggZSApO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gc2V0SWNvblRleHR1cmUoIGljb25TcHJpdGUsIGljb24gKSB7XHJcbiAgICBpZiAoIGljb24uZ2V0UmVnaW9uICkge1xyXG4gICAgICAgIGljb25TcHJpdGUuc2V0VGV4dHVyZVJlZ2lvbiggaWNvbiApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpY29uU3ByaXRlLnNldFRleHR1cmUoIGljb24gKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8g6riw7KG0IO2KuOyciCDrqqjrkZAg7KCc6rGwXHJcbmZ1bmN0aW9uIGRlbGV0ZUFsbFR3ZWVucyggc2VsZiApIHtcclxuICAgIHNlbGYuX3R3ZWVuID0gbnVsbDtcclxuICAgIHNlbGYuX3R3ZWVuU3ByaXRlID0gbnVsbDtcclxuICAgIHNlbGYuX3R3ZWVuVGV4dCA9IG51bGw7XHJcbiAgICBzZWxmLl90d2Vlbkljb24gPSBudWxsO1xyXG59XHJcblxyXG4vLyDquLDsobQg7Yq47JyIIOuqqOuRkCDrqYjstqRcclxuZnVuY3Rpb24gc3RvcEFsbFR3ZWVucyggc2VsZiApIHtcclxuICAgIGlmICggc2VsZi5fdHdlZW4gKSB7IHNlbGYuX3R3ZWVuLnN0b3AoKTsgfVxyXG4gICAgaWYgKCBzZWxmLl90d2VlblNwcml0ZSApIHsgc2VsZi5fdHdlZW5TcHJpdGUuc3RvcCgpOyB9XHJcbiAgICBpZiAoIHNlbGYuX3R3ZWVuVGV4dCApIHsgc2VsZi5fdHdlZW5UZXh0LnN0b3AoKTsgfVxyXG4gICAgaWYgKCBzZWxmLl90d2Vlbkljb24gKSB7IHNlbGYuX3R3ZWVuSWNvbi5zdG9wKCk7IH1cclxuICAgIGRlbGV0ZUFsbFR3ZWVucyggc2VsZiApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvblBvaW50ZXJEb3duKCBlLCBjYW5jZWwgKSB7XHJcbiAgICBpZiAoIHRoaXMuaXNWaXNpYmxlRGVlcGx5KCkgPT0gZmFsc2UgKSB7IHJldHVybjsgfVxyXG5cclxuICAgIC8vaWYgKHRoaXMudXBTcHJpdGUuaGl0VGVzdFBvaW50KGUueCwgZS55KSB8fCBjYW5jZWwpIHtcclxuICAgIGlmICggKCB0aGlzLmhpdEJveCB8fCB0aGlzLnVwU3ByaXRlICkuaGl0VGVzdFBvaW50KCBlLngsIGUueSApIHx8IGNhbmNlbCApIHtcclxuICAgICAgICB0aGlzLnBvaW50ZXJIb2xkID0gdHJ1ZTsgICAgLy8gbW92ZSDsnbTrsqTtirjrpbwg7ZWt7IOBIOyymOumrO2VmOyngCDslYrquLAg7JyE7ZW07IScIO2RnOyLnOulvCDrgqjquYBcclxuICAgICAgICBpZiAoICF0aGlzLmNsaWNrZWQgKSB7XHJcbiAgICAgICAgICAgIHN0b3BBbGxUd2VlbnMoIHRoaXMgKTtcclxuICAgICAgICAgICAgdGhpcy50d2VlbiA9IG5ldyBUd2VlbihcclxuICAgICAgICAgICAgICAgIHRoaXMudXBTcHJpdGUsIHRoaXMuZG93bi5kdXJhdGlvbixcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzY2FsZVg6IHRoaXMuZG93bi5zY2FsZVgsXHJcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVZOiB0aGlzLmRvd24uc2NhbGVZLFxyXG4gICAgICAgICAgICAgICAgICAgIHg6ICAgICAgdGhpcy5kb3duLngsXHJcbiAgICAgICAgICAgICAgICAgICAgeTogICAgICB0aGlzLmRvd24ueSxcclxuICAgICAgICAgICAgICAgICAgICBhbHBoYTogIHRoaXMuZG93bi5hbHBoYSxcclxuICAgICAgICAgICAgICAgIH0sIHsgZWFzZTogdGhpcy5kb3duLmVhc2UgfSApO1xyXG4gICAgICAgICAgICB0aGlzLnR3ZWVuLmFkZEV2ZW50TGlzdGVuZXIoIFwiY29tcGxldGVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZUFsbFR3ZWVucyggdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ29tcGxldGVseURvd25TdGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggIXRoaXMuc2luZ2xlU3ByaXRlVHlwZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBTcHJpdGUuc2V0VmlzaWJsZSggZmFsc2UgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZG93blNwcml0ZS5zZXRWaXNpYmxlKCB0cnVlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaXMuYnV0dG9uQ2hpbGQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kb3duU3ByaXRlLmFkZENoaWxkKCB0aGlzLmJ1dHRvbkNoaWxkICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5jaGVja0JveCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5jaGVja2VkICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCBcIuyytO2BrOuwleyKpOy8nOq4sFwiLCB0aGlzLnVwU3ByaXRlLmljb24sIHRoaXMudXAuaWNvbkNoZWNrZWQgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJY29uVGV4dHVyZSggdGhpcy51cFNwcml0ZS5pY29uLCB0aGlzLnVwLmljb25DaGVja2VkICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SWNvblRleHR1cmUoIHRoaXMuZG93blNwcml0ZS5pY29uLCB0aGlzLmRvd24uaWNvbkNoZWNrZWQgfHwgdGhpcy51cC5pY29uQ2hlY2tlZCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggXCLssrTtgazrsJXsiqTrgYTquLBcIiwgdGhpcy51cFNwcml0ZS5pY29uLCB0aGlzLnVwLmljb24gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJY29uVGV4dHVyZSggdGhpcy51cFNwcml0ZS5pY29uLCB0aGlzLnVwLmljb24gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJY29uVGV4dHVyZSggdGhpcy5kb3duU3ByaXRlLmljb24sIHRoaXMuZG93bi5pY29uIHx8IHRoaXMudXAuaWNvbiApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBpZiAoIHRoaXMuY2hlY2tCb3ggKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWQgPSAhdGhpcy5jaGVja2VkO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnR3ZWVuU3ByaXRlID0gbmV3IFR3ZWVuKFxyXG4gICAgICAgICAgICAgICAgdGhpcy51cFNwcml0ZS5pbWFnZSwgdGhpcy5kb3duLmR1cmF0aW9uLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZE11bHRpcGxpZXI6ICAgdGhpcy5kb3duLmNvbG9yUixcclxuICAgICAgICAgICAgICAgICAgICBncmVlbk11bHRpcGxpZXI6IHRoaXMuZG93bi5jb2xvckcsXHJcbiAgICAgICAgICAgICAgICAgICAgYmx1ZU11bHRpcGxpZXI6ICB0aGlzLmRvd24uY29sb3JCLFxyXG4gICAgICAgICAgICAgICAgfSwgeyBlYXNlOiB0aGlzLmRvd24uZWFzZSB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGlmICggdGhpcy51cFNwcml0ZS50ZXh0ICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50d2VlblRleHQgPSBuZXcgVHdlZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cFNwcml0ZS50ZXh0LCB0aGlzLmRvd24uZHVyYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4OiAgICAgICAgICAgICAgIHRoaXMuZG93bi50ZXh0WCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeTogICAgICAgICAgICAgICB0aGlzLmRvd24udGV4dFksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZE11bHRpcGxpZXI6ICAgdGhpcy5kb3duLnRleHRDb2xvclIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyZWVuTXVsdGlwbGllcjogdGhpcy5kb3duLnRleHRDb2xvckcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsdWVNdWx0aXBsaWVyOiAgdGhpcy5kb3duLnRleHRDb2xvckIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFscGhhOiAgICAgICAgICAgdGhpcy5kb3duLmFscGhhLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sIHsgZWFzZTogdGhpcy5kb3duLmVhc2UgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIHRoaXMudXBTcHJpdGUuaWNvbiApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHdlZW5JY29uID0gbmV3IFR3ZWVuKFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBTcHJpdGUuaWNvbiwgdGhpcy5kb3duLmR1cmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeDogdGhpcy5kb3duLmljb25YLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5OiB0aGlzLmRvd24uaWNvblksXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgeyBlYXNlOiB0aGlzLmRvd24uZWFzZSB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICggdGhpcy5idXR0b25DaGlsZCApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHdlZW5DaGlsZCA9IG5ldyBUd2VlbihcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1dHRvbkNoaWxkLCB0aGlzLmRvd24uZHVyYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWRNdWx0aXBsaWVyOiAgIHRoaXMuZG93bi50ZXh0Q29sb3JSLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBncmVlbk11bHRpcGxpZXI6IHRoaXMuZG93bi50ZXh0Q29sb3JHLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBibHVlTXVsdGlwbGllcjogIHRoaXMuZG93bi50ZXh0Q29sb3JCLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHBoYTogICAgICAgICAgIHRoaXMuZG93bi5hbHBoYSxcclxuICAgICAgICAgICAgICAgICAgICB9LCB7IGVhc2U6IHRoaXMuZG93bi5lYXNlIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICggIWNhbmNlbCAmJiB0aGlzLmNsaWNrT25Eb3duICkge1xyXG4gICAgICAgICAgICAgICAgZmlyZUNsaWNrRXZlbnQoIHRoaXMgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICggdGhpcy5kb3duLnNvdW5kICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXlTb3VuZCggdGhpcy5kb3duLnNvdW5kICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXBCdXR0b24oIHNlbGYgKSB7XHJcbiAgICBzZWxmLmlzQ29tcGxldGVseURvd25TdGF0ZSA9IGZhbHNlO1xyXG4gICAgaWYgKCAhc2VsZi5zaW5nbGVTcHJpdGVUeXBlICkge1xyXG4gICAgICAgIHNlbGYudXBTcHJpdGUuc2V0VmlzaWJsZSggdHJ1ZSApO1xyXG4gICAgICAgIHNlbGYuZG93blNwcml0ZS5zZXRWaXNpYmxlKCBmYWxzZSApO1xyXG4gICAgICAgIGlmICggc2VsZi5idXR0b25DaGlsZCApIHtcclxuICAgICAgICAgICAgc2VsZi51cFNwcml0ZS5hZGRDaGlsZCggc2VsZi5idXR0b25DaGlsZCApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZWxmLl90d2VlbiA9IG5ldyBUd2VlbihcclxuICAgICAgICBzZWxmLnVwU3ByaXRlLCBzZWxmLnVwLmR1cmF0aW9uLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc2NhbGVYOiBzZWxmLnVwLnNjYWxlWCxcclxuICAgICAgICAgICAgc2NhbGVZOiBzZWxmLnVwLnNjYWxlWSxcclxuICAgICAgICAgICAgeDogICAgICBzZWxmLnVwLngsXHJcbiAgICAgICAgICAgIHk6ICAgICAgc2VsZi51cC55LFxyXG4gICAgICAgICAgICBhbHBoYTogIHNlbGYudXAuYWxwaGEsXHJcbiAgICAgICAgfSwgeyBlYXNlOiBzZWxmLnVwLmVhc2UgfSApO1xyXG4gICAgc2VsZi5fdHdlZW4uYWRkRXZlbnRMaXN0ZW5lciggXCJjb21wbGV0ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCkgPT4geyBkZWxldGVBbGxUd2VlbnMoIHNlbGYgKTsgfVxyXG4gICAgKTtcclxuICAgIHNlbGYuX3R3ZWVuU3ByaXRlID0gbmV3IFR3ZWVuKFxyXG4gICAgICAgIHNlbGYudXBTcHJpdGUuaW1hZ2UsIHNlbGYudXAuZHVyYXRpb24sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZWRNdWx0aXBsaWVyOiAgIHNlbGYudXAuY29sb3JSLFxyXG4gICAgICAgICAgICBncmVlbk11bHRpcGxpZXI6IHNlbGYudXAuY29sb3JHLFxyXG4gICAgICAgICAgICBibHVlTXVsdGlwbGllcjogIHNlbGYudXAuY29sb3JCLFxyXG4gICAgICAgIH0sIHsgZWFzZTogc2VsZi5kb3duLmVhc2UgfVxyXG4gICAgKTtcclxuICAgIGlmICggc2VsZi51cFNwcml0ZS50ZXh0ICkge1xyXG4gICAgICAgIHNlbGYuX3R3ZWVuVGV4dCA9IG5ldyBUd2VlbihcclxuICAgICAgICAgICAgc2VsZi51cFNwcml0ZS50ZXh0LCBzZWxmLnVwLmR1cmF0aW9uLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB4OiAgICAgICAgICAgICAgIHNlbGYudXAudGV4dFgsXHJcbiAgICAgICAgICAgICAgICB5OiAgICAgICAgICAgICAgIHNlbGYudXAudGV4dFksXHJcbiAgICAgICAgICAgICAgICByZWRNdWx0aXBsaWVyOiAgIHNlbGYudXAudGV4dENvbG9yUixcclxuICAgICAgICAgICAgICAgIGdyZWVuTXVsdGlwbGllcjogc2VsZi51cC50ZXh0Q29sb3JHLFxyXG4gICAgICAgICAgICAgICAgYmx1ZU11bHRpcGxpZXI6ICBzZWxmLnVwLnRleHRDb2xvckIsXHJcbiAgICAgICAgICAgICAgICBhbHBoYTogICAgICAgICAgIHNlbGYudXAuYWxwaGEsXHJcbiAgICAgICAgICAgIH0sIHsgZWFzZTogc2VsZi51cC5lYXNlIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG4gICAgaWYgKCBzZWxmLnVwU3ByaXRlLmljb24gKSB7XHJcbiAgICAgICAgc2VsZi5fdHdlZW5JY29uID0gbmV3IFR3ZWVuKFxyXG4gICAgICAgICAgICBzZWxmLnVwU3ByaXRlLmljb24sIHNlbGYudXAuZHVyYXRpb24sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHg6IHNlbGYudXAuaWNvblgsXHJcbiAgICAgICAgICAgICAgICB5OiBzZWxmLnVwLmljb25ZLFxyXG4gICAgICAgICAgICB9LCB7IGVhc2U6IHNlbGYudXAuZWFzZSB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuICAgIGlmICggc2VsZi5idXR0b25DaGlsZCApIHtcclxuICAgICAgICBzZWxmLl90d2VlbkNoaWxkID0gbmV3IFR3ZWVuKFxyXG4gICAgICAgICAgICBzZWxmLmJ1dHRvbkNoaWxkLCBzZWxmLnVwLmR1cmF0aW9uLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZWRNdWx0aXBsaWVyOiAgIHNlbGYudXAudGV4dENvbG9yUixcclxuICAgICAgICAgICAgICAgIGdyZWVuTXVsdGlwbGllcjogc2VsZi51cC50ZXh0Q29sb3JHLFxyXG4gICAgICAgICAgICAgICAgYmx1ZU11bHRpcGxpZXI6ICBzZWxmLnVwLnRleHRDb2xvckIsXHJcbiAgICAgICAgICAgICAgICBhbHBoYTogICAgICAgICAgIHNlbGYudXAuYWxwaGEsXHJcbiAgICAgICAgICAgIH0sIHsgZWFzZTogc2VsZi51cC5lYXNlIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbGYuY2xpY2tlZCA9IGZhbHNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvblBvaW50ZXJVcCggZSwgY2FuY2VsICkge1xyXG4gICAgaWYgKCB0aGlzLmlzVmlzaWJsZSgpID09IGZhbHNlICkgeyByZXR1cm47IH1cclxuXHJcbiAgICBpZiAoICF0aGlzLnBvaW50ZXJIb2xkICkgeyByZXR1cm47IH1cclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICBpZiAoICFjYW5jZWwgKSB7IHRoaXMucG9pbnRlckhvbGQgPSBmYWxzZTsgfSAvLyDrspTsnIQg67KX7Ja064KY7IScIO2KgOyWtOuCmOyYpOuKlCDqsr3smrDqsIAgY2FuY2VsO1xyXG4gICAgc3RvcEFsbFR3ZWVucyggdGhpcyApO1xyXG4gICAgbGV0IFt4LCB5LCB3LCBoXSA9IHRoaXMuY2FuY2VsQm91bmQ7XHJcbiAgICBsZXQgcG9zID0gdGhpcy5nbG9iYWxUb0xvY2FsKCBlLngsIGUueSApO1xyXG4gICAgbGV0IHgyID0gcG9zLng7XHJcbiAgICBsZXQgeTIgPSBwb3MueTtcclxuXHJcbiAgICAvL2xldCBjbGlja2VkID0gZmFsc2U7XHJcbiAgICBpZiAoICF0aGlzLmNsaWNrZWQgJiYgIXRoaXMuY2xpY2tPbkRvd24gJiYgIWNhbmNlbCAmJiB4IDw9IHgyICYmIHgyIDwgeCArIHcgJiYgeSA8PSB5MiAmJiB5MiA8IHkgKyBoICkge1xyXG4gICAgICAgIGZpcmVDbGlja0V2ZW50KCB0aGlzICk7XHJcbiAgICB9XHJcbiAgICBpZiAoICEoIHRoaXMuY2xpY2tlZCAmJiB0aGlzLmhvbGREb3duT25DbGljayApICkge1xyXG4gICAgICAgIC8vIGRvd25PbkNsaWNr7J20IOyVhOuLiOuptCBcclxuICAgICAgICBpZiAoIGNhbmNlbCAmJiB0aGlzLnVwLnNvdW5kICkge1xyXG4gICAgICAgICAgICBwbGF5U291bmQoIHRoaXMudXAuc291bmQgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHVwQnV0dG9uKCB0aGlzICk7XHJcbiAgICAgICAgaWYgKCBjYW5jZWwgJiYgdGhpcy5jaGVja0JveCApIHtcclxuICAgICAgICAgICAgdGhpcy5jaGVja2VkID0gIXRoaXMuY2hlY2tlZDtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLmNoZWNrZWQgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggXCLsupTsiqzroZwg7LK07YGs67CV7Iqk7Lyc6riwXCIgKTtcclxuICAgICAgICAgICAgICAgIHNldEljb25UZXh0dXJlKCB0aGlzLnVwU3ByaXRlLmljb24sIHRoaXMudXAuaWNvbkNoZWNrZWQgKTtcclxuICAgICAgICAgICAgICAgIHNldEljb25UZXh0dXJlKCB0aGlzLmRvd25TcHJpdGUuaWNvbiwgdGhpcy5kb3duLmljb25DaGVja2VkIHx8IHRoaXMudXAuaWNvbkNoZWNrZWQgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCBcIuy6lOyKrOuhnCDssrTtgazrsJXsiqTrgYTquLBcIiApO1xyXG4gICAgICAgICAgICAgICAgc2V0SWNvblRleHR1cmUoIHRoaXMudXBTcHJpdGUuaWNvbiwgdGhpcy51cC5pY29uICk7XHJcbiAgICAgICAgICAgICAgICBzZXRJY29uVGV4dHVyZSggdGhpcy5kb3duU3ByaXRlLmljb24sIHRoaXMuZG93bi5pY29uIHx8IHRoaXMudXAuaWNvbiApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBvblBvaW50ZXJNb3ZlKCBlICkge1xyXG4gICAgaWYgKCB0aGlzLmlzVmlzaWJsZSgpID09IGZhbHNlICkgeyByZXR1cm47IH1cclxuXHJcbiAgICBpZiAoIHRoaXMucG9pbnRlckhvbGQgKSB7XHJcbiAgICAgICAgbGV0IFt4LCB5LCB3LCBoXSA9IHRoaXMuY2FuY2VsQm91bmQ7XHJcbiAgICAgICAgbGV0IHsgeDogeDIsIHk6IHkyIH0gPSB0aGlzLmdsb2JhbFRvTG9jYWwoIGUueCwgZS55ICk7XHJcblxyXG4gICAgICAgIGlmICggeCA8PSB4MiAmJiB4MiA8IHggKyB3ICYmIHkgPD0geTIgJiYgeTIgPCB5ICsgaCApIHtcclxuICAgICAgICAgICAgaWYgKCAhdGhpcy5pc0NvbXBsZXRlbHlEb3duU3RhdGUgJiYgdGhpcy50d2VlbiA9PSBudWxsICkge1xyXG4gICAgICAgICAgICAgICAgb25Qb2ludGVyRG93bi5jYWxsKCB0aGlzLGUsIHRydWUgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICggdGhpcy5pc0NvbXBsZXRlbHlEb3duU3RhdGUgJiYgdGhpcy50d2VlbiA9PSBudWxsICkge1xyXG4gICAgICAgICAgICAgICAgb25Qb2ludGVyVXAuY2FsbCggdGhpcyxlLCB0cnVlICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8g7KCE64us67Cb7J2AIOydtOuvuOyngOulvCDtg4DsnoXsl5Ag65Sw6528IOq1rOu2hO2VtOyEnCDsiqTtlITrnbzsnbTtirjroZwg67CY7ZmYKFRleHR1cmXsnbjsp4AgU3ByaXRl7J247KeAKTtcclxuZnVuY3Rpb24gaW1hZ2VUb1Nwcml0ZSggaW1hZ2UgKSB7XHJcbiAgICBpZiAoIGltYWdlLlJHQkE1NTUxICkge1xyXG4gICAgICAgIHJldHVybiBbbmV3IEJpdG1hcCggaW1hZ2UgKSwgdHJ1ZV07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBbaW1hZ2UsIGZhbHNlXTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnV0dG9uMiBleHRlbmRzIFNwcml0ZSB7XHJcbiAgICBjb25zdHJ1Y3RvciggcCApIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHAgPSBwIHx8IHsgfTtcclxuICAgICAgICB0aGlzLmNoZWNrQm94ID0gcC5jaGVja0JveDtcclxuICAgICAgICB0aGlzLmNoZWNrZWQgPSBwLmNoZWNrZWQ7XHJcbiAgICAgICAgdGhpcy5ob2xkRG93bk9uQ2xpY2sgPSBwLmhvbGREb3duT25DbGljaztcclxuICAgICAgICB0aGlzLmNsaWNrT25Eb3duID0gcC5jbGlja09uRG93bjtcclxuICAgICAgICB0aGlzLnNvdW5kID0gcC5zb3VuZDtcclxuICAgICAgICB0aGlzLnRleHR1cmVUeXBlSW1hZ2UgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc2luZ2xlU3ByaXRlVHlwZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaXNDb21wbGV0ZWx5RG93blN0YXRlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy50ZXh0TWF4V2lkdGggPSBwLnRleHRNYXhXaWR0aDtcclxuICAgICAgICB0aGlzLmJ1dHRvbkNoaWxkID0gcC5idXR0b25DaGlsZDtcclxuICAgICAgICB0aGlzLmJ1dHRvbkNoaWxkUG9zID0gcC5idXR0b25DaGlsZFBvcyB8fCB7IHg6IDAsIHk6IDAgfTtcclxuICAgICAgICB0aGlzLmhpdEJveCA9IHAuaGl0Qm94O1xyXG4gICAgICAgIHRoaXMuaGl0Qm94UG9zID0gcC5oaXRCb3hQb3MgfHwgeyB4OiAwLCB5OiAwIH07XHJcbiAgICAgICAgdGhpcy5zcHJpdGVUeXBlSWNvbiA9IHAuc3ByaXRlVHlwZUljb247XHJcbiAgICAgICAgbGV0IHVwID0gcC51cDtcclxuICAgICAgICBsZXQgZG93biA9IHAuZG93biB8fCB7fTtcclxuICAgICAgICBsZXQgZGlzYWJsZSA9IHAuZGlzYWJsZSB8fCB7fTtcclxuXHJcbiAgICAgICAgZG93bi53aWR0aCA9IHVwLndpZHRoO1xyXG4gICAgICAgIGRvd24uaGVpZ2h0ID0gdXAuaGVpZ2h0O1xyXG4gICAgICAgIC8v7JWg64uI66mU7J207IWYIOqwgOuKpe2VnCDrtoDrtoTsnYAg6riw67O46rCS7J20IO2VhOyalO2VmOuLpFxyXG4gICAgICAgIHVwLnRleHRDb2xvciA9IHVwLnRleHRDb2xvciB8fCAweDAwMDAwMDtcclxuICAgICAgICB1cC50ZXh0WCA9IHVwLnRleHRYIHx8IDA7XHJcbiAgICAgICAgdXAudGV4dFkgPSB1cC50ZXh0WSB8fCAwO1xyXG4gICAgICAgIHVwLmljb25YID0gdXAuaWNvblggfHwgMDtcclxuICAgICAgICB1cC5pY29uWSA9IHVwLmljb25ZIHx8IDA7XHJcbiAgICAgICAgdXAuaWNvbkNvbG9yID0gdXAuaWNvbkNvbG9yIHx8IDB4ZmZmZmZmO1xyXG4gICAgICAgIHVwLmljb25TY2FsZSA9IHVwLmljb25TY2FsZSB8fCAxO1xyXG4gICAgICAgIHVwLmNvbG9yID0gdXAuY29sb3IgfHwgMHhmZmZmZmY7XHJcbiAgICAgICAgdXAuYWxwaGEgPSB1cC5hbHBoYSB8fCAxLjA7XHJcbiAgICAgICAgdXAuc2NhbGVYID0gdXAuc2NhbGVYIHx8IHVwLnNjYWxlIHx8IDEuMDtcclxuICAgICAgICB1cC5zY2FsZVkgPSB1cC5zY2FsZVkgfHwgdXAuc2NhbGUgfHwgMS4wO1xyXG4gICAgICAgIHVwLnggPSB1cC54IHx8IDA7XHJcbiAgICAgICAgdXAueSA9IHVwLnkgfHwgMDtcclxuICAgICAgICB1cC5lYXNlID0gdXAuZWFzZSB8fCBlYXNpbmcub3V0QmFjaztcclxuICAgICAgICB1cC5kdXJhdGlvbiA9IHVwLmR1cmF0aW9uIHx8IDE1MDtcclxuICAgICAgICB1cC51c2VTcHJpdGVBbmNob3JQb2ludCA9IHVwLnVzZVNwcml0ZUFuY2hvclBvaW50IHx8IGZhbHNlO1xyXG4gICAgICAgIGRvd24udGV4dCA9IGRvd24udGV4dCB8fCB1cC50ZXh0O1xyXG4gICAgICAgIGRvd24udGV4dENvbG9yID0gZG93bi50ZXh0Q29sb3IgfHwgdXAudGV4dENvbG9yO1xyXG4gICAgICAgIGRvd24udGV4dFggPSBkb3duLnRleHRYIHx8IHVwLnRleHRYO1xyXG4gICAgICAgIGRvd24udGV4dFkgPSBkb3duLnRleHRZIHx8IHVwLnRleHRZO1xyXG4gICAgICAgIGRvd24uaWNvblggPSBkb3duLmljb25YIHx8IHVwLmljb25YO1xyXG4gICAgICAgIGRvd24uaWNvblkgPSBkb3duLmljb25ZIHx8IHVwLmljb25ZO1xyXG4gICAgICAgIGRvd24uaWNvbkNvbG9yID0gZG93bi5pY29uQ29sb3IgfHwgdXAuaWNvbkNvbG9yO1xyXG4gICAgICAgIGRvd24uaWNvblNjYWxlID0gZG93bi5pY29uU2NhbGUgfHwgdXAuaWNvblNjYWxlO1xyXG4gICAgICAgIGRvd24uY29sb3IgPSBkb3duLmNvbG9yIHx8IHVwLmNvbG9yO1xyXG4gICAgICAgIGRvd24uYWxwaGEgPSBkb3duLmFscGhhIHx8IHVwLmFscGhhO1xyXG4gICAgICAgIGRvd24uc2NhbGVYID0gZG93bi5zY2FsZVggfHwgZG93bi5zY2FsZSB8fCB1cC5zY2FsZVg7XHJcbiAgICAgICAgZG93bi5zY2FsZVkgPSBkb3duLnNjYWxlWSB8fCBkb3duLnNjYWxlIHx8IHVwLnNjYWxlWTtcclxuICAgICAgICBkb3duLnggPSBkb3duLnggfHwgdXAueDtcclxuICAgICAgICBkb3duLnkgPSBkb3duLnkgfHwgdXAueTtcclxuICAgICAgICBkb3duLmVhc2UgPSBkb3duLmVhc2UgfHwgdXAuZWFzZTtcclxuICAgICAgICBkb3duLmR1cmF0aW9uID0gZG93bi5kdXJhdGlvbiB8fCB1cC5kdXJhdGlvbjtcclxuICAgICAgICBkaXNhYmxlLmNvbG9yID0gZGlzYWJsZS5jb2xvciB8fCAweDgwODA4MDtcclxuICAgICAgICBkaXNhYmxlLmFscGhhID0gZGlzYWJsZS5hbHBoYSB8fCAxO1xyXG4gICAgICAgIGRpc2FibGUuc3ByaXRlVHlwZUFscGhhID0gZGlzYWJsZS5zcHJpdGVUeXBlQWxwaGEgfHwgMC42O1xyXG4gICAgICAgIHRoaXMudXAgPSB1cDtcclxuICAgICAgICB0aGlzLmRvd24gPSBkb3duO1xyXG4gICAgICAgIHRoaXMuZGlzYWJsZSA9IGRpc2FibGU7XHJcbiAgICAgICAgLy8g7Lus65+s66W8IOyqvOqwnOyVvCDtirjsnIgg6rCA64qlXHJcbiAgICAgICAgW3VwLmNvbG9yUiwgdXAuY29sb3JHLCB1cC5jb2xvckJdID0gc3BsaXRIZXhDb2xvciggdXAuY29sb3IgKTtcclxuICAgICAgICBbZG93bi5jb2xvclIsIGRvd24uY29sb3JHLCBkb3duLmNvbG9yQl0gPSBzcGxpdEhleENvbG9yKCBkb3duLmNvbG9yICk7XHJcbiAgICAgICAgW3VwLnRleHRDb2xvclIsIHVwLnRleHRDb2xvckcsIHVwLnRleHRDb2xvckJdID0gc3BsaXRIZXhDb2xvciggdXAudGV4dENvbG9yICk7XHJcbiAgICAgICAgW2Rvd24udGV4dENvbG9yUiwgZG93bi50ZXh0Q29sb3JHLCBkb3duLnRleHRDb2xvckJdID0gc3BsaXRIZXhDb2xvciggZG93bi50ZXh0Q29sb3IgKTtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMudXBTcHJpdGUgPSBuZXcgU3ByaXRlKCk7XHJcbiAgICAgICAgICAgIGxldCBiO1xyXG4gICAgICAgICAgICBsZXQgYXAgPSB7IHg6IDAuNSwgeTogMC41IH07XHJcblxyXG4gICAgICAgICAgICBpZiAoIHVwLmltYWdlICkge1xyXG4gICAgICAgICAgICAgICAgW2IsIHRoaXMudGV4dHVyZVR5cGVJbWFnZV0gPSBpbWFnZVRvU3ByaXRlKCB1cC5pbWFnZSApO1xyXG4gICAgICAgICAgICAgICAgaWYgKCAhdGhpcy50ZXh0dXJlVHlwZUltYWdlICYmIHVwLnVzZVNwcml0ZUFuY2hvclBvaW50ICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwID0gYi5nZXRBbmNob3JQb2ludCgpO1xyXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYiA9IE1lc2guY3JlYXRlQm94KCAwLCAwLCB1cC53aWR0aCwgdXAuaGVpZ2h0LCAweGZmZmZmZiApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICggYi5zZXRBbmNob3JQb2ludCApIHtcclxuICAgICAgICAgICAgICAgIGIuc2V0QW5jaG9yUG9pbnQoIGFwLngsIGFwLnkgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGIuc2V0UG9zaXRpb24oIC1hcC54ICogYi5nZXRXaWR0aCgpLC1hcC55ICogYi5nZXRIZWlnaHQoKSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGIuc2V0Q29sb3JNdWx0aXBsaWVyKCB1cC5jb2xvclIsIHVwLmNvbG9yRywgdXAuY29sb3JCICk7XHJcbiAgICAgICAgICAgIHRoaXMudXBTcHJpdGUuYWRkQ2hpbGQoIGIgKTtcclxuICAgICAgICAgICAgaWYgKCB1cC50ZXh0ICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cFNwcml0ZS50ZXh0SW5mbyA9XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9udDogICAgICB1cC5mb250LFxyXG4gICAgICAgICAgICAgICAgICAgIHg6ICAgICAgICAgdXAudGV4dFgsXHJcbiAgICAgICAgICAgICAgICAgICAgeTogICAgICAgICB1cC50ZXh0WSxcclxuICAgICAgICAgICAgICAgICAgICByOiAgICAgICAgIHVwLnRleHRDb2xvclIsXHJcbiAgICAgICAgICAgICAgICAgICAgZzogICAgICAgICB1cC50ZXh0Q29sb3JHLFxyXG4gICAgICAgICAgICAgICAgICAgIGI6ICAgICAgICAgdXAudGV4dENvbG9yQixcclxuICAgICAgICAgICAgICAgICAgICBhbGlnbkxlZnQ6IHVwLnRleHRBbGlnbkxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICAgICB1cC50ZXh0Q29sb3JcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbG9yID0gMHgwMDAwMDA7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgaWNvbjtcclxuXHJcbiAgICAgICAgICAgIGlmICggdXAuaWNvbiApIHtcclxuICAgICAgICAgICAgICAgIGlmICggdGhpcy5jaGVja0JveCAmJiB0aGlzLmNoZWNrZWQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLnNwcml0ZVR5cGVJY29uICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uID0gdXAuaWNvbkNoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbiA9IG5ldyBCaXRtYXAoIHVwLmljb25DaGVja2VkICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaXMuc3ByaXRlVHlwZUljb24gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb24gPSB1cC5pY29uO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb24gPSBuZXcgQml0bWFwKCB1cC5pY29uICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWNvbi5zZXRTY2FsZSggdXAuaWNvblNjYWxlICk7XHJcbiAgICAgICAgICAgICAgICBpY29uLnNldEFuY2hvclBvaW50KCAwLjUsIDAuNSApO1xyXG4gICAgICAgICAgICAgICAgaWNvbi5zZXRQb3NpdGlvbiggdXAuaWNvblgsIHVwLmljb25ZICk7XHJcbiAgICAgICAgICAgICAgICBpY29uLnNldE92ZXJyaWRlQ29sb3IoIHVwLmljb25Db2xvciApO1xyXG4gICAgICAgICAgICAgICAgLy9pY29uLnNldFNjYWxlKHVwLmljb25TY2FsZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwU3ByaXRlLmFkZENoaWxkKCBpY29uICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICggdGhpcy5idXR0b25DaGlsZCApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uQ2hpbGQuc2V0UG9zaXRpb24oIHRoaXMuYnV0dG9uQ2hpbGRQb3MueCwgdGhpcy5idXR0b25DaGlsZFBvcy55ICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ1dHRvbkNoaWxkLnNldENvbG9yTXVsdGlwbGllckJ5SGV4KCB1cC50ZXh0Q29sb3IgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBTcHJpdGUuYWRkQ2hpbGQoIHRoaXMuYnV0dG9uQ2hpbGQgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy51cFNwcml0ZS5zZXRYKCB1cC54ICk7XHJcbiAgICAgICAgICAgIHRoaXMudXBTcHJpdGUuc2V0WSggdXAueSApO1xyXG4gICAgICAgICAgICB0aGlzLnVwU3ByaXRlLnNldFNjYWxlWCggdXAuc2NhbGVYICk7XHJcbiAgICAgICAgICAgIHRoaXMudXBTcHJpdGUuc2V0U2NhbGVZKCB1cC5zY2FsZVkgKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRDaGlsZCggdGhpcy51cFNwcml0ZSApO1xyXG4gICAgICAgICAgICB0aGlzLnVwU3ByaXRlLmltYWdlID0gYjtcclxuICAgICAgICAgICAgdGhpcy51cFNwcml0ZS5pY29uID0gaWNvbjtcclxuICAgICAgICAgICAgdGhpcy51cFNwcml0ZS5zZXRBbHBoYSggdXAuYWxwaGEgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5kb3duU3ByaXRlID0gbmV3IFNwcml0ZSgpO1xyXG4gICAgICAgICAgICBsZXQgYjtcclxuXHJcbiAgICAgICAgICAgIGlmICggZG93bi5pbWFnZSApIHsgICAgXHJcbiAgICAgICAgICAgICAgICBiID0gaW1hZ2VUb1Nwcml0ZSggZG93bi5pbWFnZSApO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCAhdGhpcy50ZXh0dXJlVHlwZUltYWdlICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaW5nbGVTcHJpdGVUeXBlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGIgPSBuZXcgU3ByaXRlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIHVwLmltYWdlICkge1xyXG4gICAgICAgICAgICAgICAgYiA9IGltYWdlVG9TcHJpdGUoIHVwLmltYWdlICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBiID0gbmV3IFNoYXBlKCk7XHJcbiAgICAgICAgICAgICAgICBiLm1ha2VCb3goIDAsIDAsIGRvd24ud2lkdGgsIGRvd24uaGVpZ2h0LCAweGZmZmZmZiApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGIuc2V0QW5jaG9yUG9pbnQoIDAuNSwgMC41ICk7XHJcbiAgICAgICAgICAgIGIuc2V0Q29sb3JNdWx0aXBsaWVyKCBkb3duLmNvbG9yUiwgZG93bi5jb2xvckcsIGRvd24uY29sb3JCICk7XHJcbiAgICAgICAgICAgIHRoaXMuZG93blNwcml0ZS5hZGRDaGlsZCggYiApO1xyXG4gICAgICAgICAgICBpZiAoIGRvd24udGV4dCApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZG93blNwcml0ZS50ZXh0SW5mbyA9XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9udDogICAgICBkb3duLmZvbnQgfHwgdXAuZm9udCxcclxuICAgICAgICAgICAgICAgICAgICB4OiAgICAgICAgIGRvd24udGV4dFgsXHJcbiAgICAgICAgICAgICAgICAgICAgeTogICAgICAgICBkb3duLnRleHRZLFxyXG4gICAgICAgICAgICAgICAgICAgIHI6ICAgICAgICAgZG93bi50ZXh0Q29sb3JSLFxyXG4gICAgICAgICAgICAgICAgICAgIGc6ICAgICAgICAgZG93bi50ZXh0Q29sb3JHLFxyXG4gICAgICAgICAgICAgICAgICAgIGI6ICAgICAgICAgZG93bi50ZXh0Q29sb3JCLFxyXG4gICAgICAgICAgICAgICAgICAgIGFsaWduTGVmdDogZG93bi50ZXh0QWxpZ25MZWZ0IHx8IHVwLnRleHRBbGlnbkxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICAgICBkb3duLnRleHRDb2xvclxyXG4gICAgICAgICAgICAgICAgICAgIC8vY29sb3IgPSAweDAwMDAwMDtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBpY29uO1xyXG5cclxuICAgICAgICAgICAgaWYgKCBkb3duLmljb24gfHwgdXAuaWNvbiApIHtcclxuICAgICAgICAgICAgICAgIGlmICggdGhpcy5jaGVja0JveCAmJiB0aGlzLmNoZWNrZWQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLnNwcml0ZVR5cGVJY29uICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uID0gZG93bi5pY29uQ2hlY2tlZCB8fCB1cC5pY29uQ2hlY2tlZDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uID0gbmV3IEJpdG1hcCggZG93bi5pY29uQ2hlY2tlZCB8fCB1cC5pY29uQ2hlY2tlZCApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLnNwcml0ZVR5cGVJY29uICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uID0gZG93bi5pY29uIHx8IHVwLmljb247XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbiA9IG5ldyBCaXRtYXAoIGRvd24uaWNvbiB8fCB1cC5pY29uICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWNvbi5zZXRTY2FsZSggZG93bi5pY29uU2NhbGUgKTtcclxuICAgICAgICAgICAgICAgIGljb24uc2V0QW5jaG9yUG9pbnQoIDAuNSwgMC41ICk7XHJcbiAgICAgICAgICAgICAgICBpY29uLnNldE92ZXJyaWRlQ29sb3IoIGRvd24uaWNvbkNvbG9yICk7XHJcbiAgICAgICAgICAgICAgICBpY29uLnNldFBvc2l0aW9uKCBkb3duLmljb25YLCBkb3duLmljb25ZICk7XHJcbiAgICAgICAgICAgICAgICAvL2ljb24uc2V0U2NhbGUoZG93bi5pY29uU2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kb3duU3ByaXRlLmFkZENoaWxkKCBpY29uICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuZG93blNwcml0ZS5zZXRYKCBkb3duLnggKTtcclxuICAgICAgICAgICAgdGhpcy5kb3duU3ByaXRlLnNldFkoIGRvd24ueSApO1xyXG4gICAgICAgICAgICB0aGlzLmRvd25TcHJpdGUuc2V0U2NhbGVYKCBkb3duLnNjYWxlWCApO1xyXG4gICAgICAgICAgICB0aGlzLmRvd25TcHJpdGUuc2V0U2NhbGVZKCBkb3duLnNjYWxlWSApO1xyXG4gICAgICAgICAgICB0aGlzLmRvd25TcHJpdGUuc2V0VmlzaWJsZSggZmFsc2UgKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRDaGlsZCggdGhpcy5kb3duU3ByaXRlICk7XHJcbiAgICAgICAgICAgIHRoaXMuZG93blNwcml0ZS5pY29uID0gaWNvbjtcclxuICAgICAgICAgICAgdGhpcy5kb3duU3ByaXRlLnNldEFscGhhKCBkb3duLmFscGhhICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNldFRleHQoIHVwLnRleHQsIGRvd24udGV4dCApO1xyXG4gICAgICAgIC8vIO2EsOy5mCDsmIHsl60g6rSA66CoXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIHRoaXMuaGl0Qm94ICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaXRCb3guc2V0QWxwaGEoIDAgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGl0Qm94LnNldFBvc2l0aW9uKCB0aGlzLmhpdEJveFBvcy54LCB0aGlzLmhpdEJveFBvcy55ICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZENoaWxkKCB0aGlzLmhpdEJveCApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvL3gsIHksIHcsIGggPSB0aGlzLmdldEJvdW5kcyh0aGlzLnVwU3ByaXRlKTtcclxuICAgICAgICAgICAgbGV0IHsgeCwgeSwgd2lkdGg6dywgaGVpZ2h0OmggfSA9ICggdGhpcy5oaXRCb3ggfHwgdGhpcy51cFNwcml0ZSApLmdldEJvdW5kcyggdGhpcyApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jYW5jZWxCb3VuZCA9IFt4IC0gQnV0dG9uMi5jYW5jZWxNYXJnaW4sIHkgLSBCdXR0b24yLmNhbmNlbE1hcmdpbiwgdyArIEJ1dHRvbjIuY2FuY2VsTWFyZ2luICogMiwgaCArIEJ1dHRvbjIuY2FuY2VsTWFyZ2luICogMl07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNldEVuYWJsZWQoIHRydWUgKTtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0VGV4dCggYnRuU3ByLCB0eHQgKSB7XHJcbiAgICAgICAgbGV0IHRpID0gYnRuU3ByLnRleHRJbmZvO1xyXG4gICAgICAgIGxldCB0ID0gbmV3IFRleHRGaWVsZCggdGkuZm9udCwgdHh0ICk7XHJcblxyXG4gICAgICAgIHQuc2V0VGV4dENvbG9yKCAweGZmZmZmZiApO1xyXG4gICAgICAgIHQuc2V0Q29sb3JNdWx0aXBsaWVyKCB0aS5yLCB0aS5nLCB0aS5iICk7XHJcbiAgICAgICAgLy8g7KKM7ZGcIOyhsOyglVxyXG4gICAgICAgIC8vIOyVtey7pO2PrOyduO2KuOulvCDrsJTsmrTrlKnrsJXsiqQg6riw7KSA7Jy866GcIOunnuy2sOyVvCDsoJzrjIDroZwg65CcIOyijO2RnOyXkCDrgpjsmKjri6QuXHJcbiAgICAgICAgLy8g7Iir7J6QIFwiMFwi7J2YIOuwlOyatOuUqeuwleyKpCDtlZjri6jsnYQgQmFzZWxpbmXsnLzroZwg67O06rOgIOyEuOuhnCDsoJXroKzsnYQg7ZWY6rOgLFxyXG4gICAgICAgIC8vIHR4dOydmCDrsJTsmrTrlKnrsJXsiqQg7KCE7LK066W8IOqwgOyngOqzoCDqsIDroZzsoJXroKzsnYQg7ZWc64ukLiAgICBcclxuICAgICAgICBsZXQgWyAsIGJ5LCAsIGJoXSA9IHRpLmZvbnQuZ2V0Qm91bmRzMCgpO1xyXG4gICAgICAgIGxldCBbdHgsICAsIHR3LCBdID0gdGkuZm9udC5nZXRCb3VuZHMoIHR4dCApO1xyXG4gICAgICAgIGxldCBbaCwgdl0gPSBbMC41LCAwLjVdO1xyXG5cclxuICAgICAgICBpZiAoIHRpLmFsaWduTGVmdCApIHsgaCA9IDA7IH1cclxuICAgICAgICBcclxuICAgICAgICAvLyDquLjsnbTsoJztlZzsnbQg7J6I7Jy866m0IOuovOyggCDrp57strDspIDri6RcclxuICAgICAgICBsZXQgc3ggPSAxO1xyXG5cclxuICAgICAgICBpZiAoIHRoaXMudGV4dE1heFdpZHRoICYmIHR3ID4gdGhpcy50ZXh0TWF4V2lkdGggKSB7ICAgICAgICBcclxuICAgICAgICAgICAgc3ggPSB0aGlzLnRleHRNYXhXaWR0aCAvIHR3O1xyXG4gICAgICAgICAgICB0LnNldFNjYWxlWCggc3ggKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaCA9ICggdHggKyB0dyAqIGggKSAvIHQuZ2V0V2lkdGgoKSAqIHN4O1xyXG4gICAgICAgIHYgPSAoIGJ5ICsgYmggKiB2ICkgLyB0LmdldEhlaWdodCgpO1xyXG4gICAgICAgIHQuc2V0QW5jaG9yUG9pbnQoIGgsIHYgKTtcclxuICAgICAgICB0LnNldFBvc2l0aW9uKCB0aS54LCB0aS55ICk7XHJcbiAgICAgICAgYnRuU3ByLmFkZENoaWxkKCB0ICk7XHJcbiAgICAgICAgYnRuU3ByLnRleHQgPSB0O1xyXG4gICAgICAgIGJ0blNwci50ZXh0U3RyID0gdHh0O1xyXG4gICAgfVxyXG5cclxuICAgIHNldFRleHQoIHVwVGV4dCwgZG93blRleHQgKSB7XHJcbiAgICAgICAgdGhpcy51cC50ZXh0ID0gdXBUZXh0O1xyXG4gICAgICAgIHRoaXMuZG93bi50ZXh0ID0gZG93blRleHQ7XHJcbiAgICAgICAgaWYgKCB0aGlzLnVwU3ByaXRlLnRleHQgKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBTcHJpdGUudGV4dC5yZW1vdmVGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgICAgIHRoaXMudXBTcHJpdGUudGV4dCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIHRoaXMuZG93blNwcml0ZS50ZXh0ICkge1xyXG4gICAgICAgICAgICB0aGlzLmRvd25TcHJpdGUudGV4dC5yZW1vdmVGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgICAgIHRoaXMuZG93blNwcml0ZS50ZXh0ID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggdXBUZXh0ICAmJiB0aGlzLnVwU3ByaXRlLnRleHRJbmZvICkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRUZXh0KCB0aGlzLnVwU3ByaXRlLCB1cFRleHQgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggZG93blRleHQgICYmIHRoaXMuZG93blNwcml0ZS50ZXh0SW5mbyApIHtcclxuICAgICAgICAgICAgdGhpcy5fc2V0VGV4dCggdGhpcy5kb3duU3ByaXRlLCBkb3duVGV4dCApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRJY29uU2NhbGUoIHNjeCwgc2N5ICkge1xyXG4gICAgICAgIGlmICggdGhpcy51cFNwcml0ZS5pY29uICkge1xyXG4gICAgICAgICAgICB0aGlzLnVwU3ByaXRlLmljb24uc2V0U2NhbGUoIHNjeCwgc2N5ICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICggdGhpcy5kb3duU3ByaXRlLmljb24gKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZG93blNwcml0ZS5pY29uLnNldFNjYWxlKCBzY3gsIHNjeSApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRUZXh0U2NhbGUoIHNjeCwgc2N5ICkge1xyXG4gICAgICAgIGlmICggdGhpcy51cFNwcml0ZS50ZXh0ICkge1xyXG4gICAgICAgICAgICB0aGlzLnVwU3ByaXRlLnRleHQuc2V0U2NhbGUoIHNjeCwgc2N5ICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIHRoaXMuZG93blNwcml0ZS50ZXh0ICkge1xyXG4gICAgICAgICAgICB0aGlzLmRvd25TcHJpdGUudGV4dC5zZXRTY2FsZSggc2N4LCBzY3kgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VGV4dENvbG9yKCBoZXhDb2xvciApIHtcclxuICAgICAgICBpZiAoIHRoaXMudXBTcHJpdGUudGV4dCApIHtcclxuICAgICAgICAgICAgdGhpcy51cFNwcml0ZS50ZXh0LnNldFRleHRDb2xvciggaGV4Q29sb3IgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5kb3duU3ByaXRlLnRleHQgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZG93blNwcml0ZS50ZXh0LnNldFRleHRDb2xvciggaGV4Q29sb3IgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCB0aGlzLnVwU3ByaXRlLnRleHRJbmZvICkge1xyXG4gICAgICAgICAgICB0aGlzLnVwU3ByaXRlLnRleHRJbmZvLmNvbG9yID0gaGV4Q29sb3I7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICggdGhpcy5kb3duU3ByaXRlLnRleHRJbmZvICkge1xyXG4gICAgICAgICAgICB0aGlzLmRvd25TcHJpdGUudGV4dEluZm8uY29sb3IgPSBoZXhDb2xvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0QnV0dG9uQ29sb3IoIGhleENvbG9yICkge1xyXG4gICAgICAgIHRoaXMudXAuY29sb3IgPSBoZXhDb2xvcjtcclxuICAgICAgICB0aGlzLmRvd24uY29sb3IgPSBoZXhDb2xvcjtcclxuICAgICAgICBsZXQgcixnLGIgPSBzcGxpdEhleENvbG9yKCBoZXhDb2xvciApO1xyXG5cclxuICAgICAgICB0aGlzLnVwLmNvbG9yUiwgdGhpcy51cC5jb2xvckcsIHRoaXMudXAuY29sb3JCID0gcixnLGI7XHJcbiAgICAgICAgdGhpcy5kb3duLmNvbG9yUiwgdGhpcy5kb3duLmNvbG9yRywgdGhpcy5kb3duLmNvbG9yQiA9IHIsZyxiO1xyXG4gICAgICAgIHRoaXMudXBTcHJpdGUuaW1hZ2Uuc2V0Q29sb3JNdWx0aXBsaWVyKCByLGcsYiApO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEVuYWJsZWQoIGJPcHQgKSB7XHJcbiAgICAgICAgaWYgKCBiT3B0ICE9IHRoaXMuZW5hYmxlZCApIHtcclxuICAgICAgICAgICAgaWYgKCBiT3B0ID09IHRydWUgKSB7XHJcbiAgICAgICAgICAgICAgICBzdG9wQWxsVHdlZW5zKCB0aGlzICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwU3ByaXRlLmFkZEV2ZW50TGlzdGVuZXIoIEV2ZW50LlBPSU5URVJfRE9XTiwgb25Qb2ludGVyRG93biwgdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kb3duU3ByaXRlLmFkZEV2ZW50TGlzdGVuZXIoIEV2ZW50LlBPSU5URVJfRE9XTiwgb25Qb2ludGVyRG93biwgdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cFNwcml0ZS5hZGRFdmVudExpc3RlbmVyKCBFdmVudC5QT0lOVEVSX1VQLCBvblBvaW50ZXJVcCwgdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kb3duU3ByaXRlLmFkZEV2ZW50TGlzdGVuZXIoIEV2ZW50LlBPSU5URVJfVVAsIG9uUG9pbnRlclVwLCB0aGlzICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwU3ByaXRlLmFkZEV2ZW50TGlzdGVuZXIoIEV2ZW50LlBPSU5URVJfTU9WRSwgb25Qb2ludGVyTW92ZSwgdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kb3duU3ByaXRlLmFkZEV2ZW50TGlzdGVuZXIoIEV2ZW50LlBPSU5URVJfTU9WRSwgb25Qb2ludGVyTW92ZSwgdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50ZXh0dXJlVHlwZUltYWdlID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENvbG9yTXVsdGlwbGllcigxLCAxLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEFscGhhKDEpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEFscGhhKDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29sb3JNdWx0aXBsaWVyKCAxLCAxLCAxICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEFscGhhKCAxICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzdG9wQWxsVHdlZW5zKCB0aGlzICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwU3ByaXRlLnJlbW92ZUV2ZW50TGlzdGVuZXIoIEV2ZW50LlBPSU5URVJfRE9XTiwgb25Qb2ludGVyRG93biwgdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kb3duU3ByaXRlLnJlbW92ZUV2ZW50TGlzdGVuZXIoIEV2ZW50LlBPSU5URVJfRE9XTiwgb25Qb2ludGVyRG93biwgdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cFNwcml0ZS5yZW1vdmVFdmVudExpc3RlbmVyKCBFdmVudC5QT0lOVEVSX1VQLCBvblBvaW50ZXJVcCwgdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kb3duU3ByaXRlLnJlbW92ZUV2ZW50TGlzdGVuZXIoIEV2ZW50LlBPSU5URVJfVVAsIG9uUG9pbnRlclVwLCB0aGlzICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwU3ByaXRlLnJlbW92ZUV2ZW50TGlzdGVuZXIoIEV2ZW50LlBPSU5URVJfTU9WRSwgb25Qb2ludGVyTW92ZSwgdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kb3duU3ByaXRlLnJlbW92ZUV2ZW50TGlzdGVuZXIoIEV2ZW50LlBPSU5URVJfTU9WRSwgb25Qb2ludGVyTW92ZSwgdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMudGV4dHVyZVR5cGVJbWFnZSA9PSB0cnVlICkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vdGhpcy5zZXRDb2xvck11bHRpcGxpZXIoMC41LCAwLjUsIDAuNSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRPdmVycmlkZUNvbG9yKCB0aGlzLmRpc2FibGUuY29sb3IgKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEFscGhhKCB0aGlzLmRpc2FibGUuYWxwaGEgKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwU3ByaXRlLnNldENvbG9yTXVsdGlwbGllciggdGhpcy51cC5jb2xvclIsIHRoaXMudXAuY29sb3JHLCB0aGlzLnVwLmNvbG9yQiApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldE92ZXJyaWRlQ29sb3IoIHRoaXMuZGlzYWJsZS5jb2xvciApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0QWxwaGEoIHRoaXMuZGlzYWJsZS5zcHJpdGVUeXBlQWxwaGEgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwU3ByaXRlLnNldFZpc2libGUoIHRydWUgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZG93blNwcml0ZS5zZXRWaXNpYmxlKCBmYWxzZSApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cFNwcml0ZS5zZXRQb3NpdGlvbiggdGhpcy51cC54LCB0aGlzLnVwLnkgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBTcHJpdGUuc2V0U2NhbGUoIHRoaXMudXAuc2NhbGVYLCB0aGlzLnVwLnNjYWxlWSApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cFNwcml0ZS5zZXRBbHBoYSggdGhpcy51cC5hbHBoYSApO1xyXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLnVwU3ByaXRlLnRleHQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cFNwcml0ZS50ZXh0LnNldFBvc2l0aW9uKCB0aGlzLnVwLnRleHRYLCB0aGlzLnVwLnRleHRZICk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cFNwcml0ZS50ZXh0LnNldENvbG9yTXVsdGlwbGllciggdGhpcy51cC50ZXh0Q29sb3JSLCB0aGlzLnVwLnRleHRDb2xvckcsIHRoaXMudXAudGV4dENvbG9yQiwgdGhpcy51cC5hbHBoYSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMudXBTcHJpdGUuaWNvbiApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwU3ByaXRlLmljb24uc2V0UG9zaXRpb24oIHRoaXMudXAuaWNvblgsIHRoaXMudXAuaWNvblkgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSAgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHNldENhbmNlbGVkKCkge1xyXG4gICAgICAgIGxldCBlID0gbmV3IEV2ZW50KCBcImNhbmNlbFwiICk7XHJcblxyXG4gICAgICAgIGUueCA9IDA7XHJcbiAgICAgICAgZS55ID0gMDtcclxuICAgICAgICBvblBvaW50ZXJVcCggdGhpcywgZSwgdHJ1ZSApO1xyXG4gICAgfVxyXG5cclxuICAgIGZvcmNlVXAoKSB7XHJcbiAgICAgICAgdXBCdXR0b24oIHRoaXMgKTtcclxuICAgIH1cclxufVxyXG5cclxuQnV0dG9uMi5jYW5jZWxNYXJnaW4gPSAzMDtcclxuXHJcbiIsImNvbnN0IENvbG9ycyA9IHtcclxuICAgIEFsaWNlQmx1ZTogICAgICAgICAgICAweEYwRjhGRixcclxuICAgIEFudGlxdWVXaGl0ZTogICAgICAgICAweEZBRUJENyxcclxuICAgIEFxdWE6ICAgICAgICAgICAgICAgICAweDAwRkZGRixcclxuICAgIEFxdWFtYXJpbmU6ICAgICAgICAgICAweDdGRkZENCxcclxuICAgIEF6dXJlOiAgICAgICAgICAgICAgICAweEYwRkZGRixcclxuICAgIEJlaWdlOiAgICAgICAgICAgICAgICAweEY1RjVEQyxcclxuICAgIEJpc3F1ZTogICAgICAgICAgICAgICAweEZGRTRDNCxcclxuICAgIEJsYWNrOiAgICAgICAgICAgICAgICAweDAwMDAwMCxcclxuICAgIEJsYW5jaGVkQWxtb25kOiAgICAgICAweEZGRUJDRCxcclxuICAgIEJsdWU6ICAgICAgICAgICAgICAgICAweDAwMDBGRixcclxuICAgIEJsdWVWaW9sZXQ6ICAgICAgICAgICAweDhBMkJFMixcclxuICAgIEJyb3duOiAgICAgICAgICAgICAgICAweEE1MkEyQSxcclxuICAgIEJ1cmx5V29vZDogICAgICAgICAgICAweERFQjg4NyxcclxuICAgIENhZGV0Qmx1ZTogICAgICAgICAgICAweDVGOUVBMCxcclxuICAgIENoYXJ0cmV1c2U6ICAgICAgICAgICAweDdGRkYwMCxcclxuICAgIENob2NvbGF0ZTogICAgICAgICAgICAweEQyNjkxRSxcclxuICAgIENvcmFsOiAgICAgICAgICAgICAgICAweEZGN0Y1MCxcclxuICAgIENvcm5mbG93ZXJCbHVlOiAgICAgICAweDY0OTVFRCxcclxuICAgIENvcm5zaWxrOiAgICAgICAgICAgICAweEZGRjhEQyxcclxuICAgIENyaW1zb246ICAgICAgICAgICAgICAweERDMTQzQyxcclxuICAgIEN5YW46ICAgICAgICAgICAgICAgICAweDAwRkZGRixcclxuICAgIERhcmtCbHVlOiAgICAgICAgICAgICAweDAwMDA4QixcclxuICAgIERhcmtDeWFuOiAgICAgICAgICAgICAweDAwOEI4QixcclxuICAgIERhcmtHb2xkZW5yb2Q6ICAgICAgICAweEI4ODYwQixcclxuICAgIERhcmtHcmF5OiAgICAgICAgICAgICAweEE5QTlBOSxcclxuICAgIERhcmtHcmVlbjogICAgICAgICAgICAweDAwNjQwMCxcclxuICAgIERhcmtLaGFraTogICAgICAgICAgICAweEJEQjc2QixcclxuICAgIERhcmtNYWdlbnRhOiAgICAgICAgICAweDhCMDA4QixcclxuICAgIERhcmtPbGl2ZUdyZWVuOiAgICAgICAweDU1NkIyRixcclxuICAgIERhcmtPcmFuZ2U6ICAgICAgICAgICAweEZGOEMwMCxcclxuICAgIERhcmtPcmNoaWQ6ICAgICAgICAgICAweDk5MzJDQyxcclxuICAgIERhcmtSZWQ6ICAgICAgICAgICAgICAweDhCMDAwMCxcclxuICAgIERhcmtTYWxtb246ICAgICAgICAgICAweEU5OTY3QSxcclxuICAgIERhcmtTZWFHcmVlbjogICAgICAgICAweDhGQkM4RixcclxuICAgIERhcmtTbGF0ZUJsdWU6ICAgICAgICAweDQ4M0Q4QixcclxuICAgIERhcmtTbGF0ZUdyYXk6ICAgICAgICAweDJGNEY0RixcclxuICAgIERhcmtUdXJxdW9pc2U6ICAgICAgICAweDAwQ0VEMSxcclxuICAgIERhcmtWaW9sZXQ6ICAgICAgICAgICAweDk0MDBEMyxcclxuICAgIERlZXBQaW5rOiAgICAgICAgICAgICAweEZGMTQ5MyxcclxuICAgIERlZXBTa3lCbHVlOiAgICAgICAgICAweDAwQkZGRixcclxuICAgIERpbUdyYXk6ICAgICAgICAgICAgICAweDY5Njk2OSxcclxuICAgIERvZGdlckJsdWU6ICAgICAgICAgICAweDFFOTBGRixcclxuICAgIEZpcmVCcmljazogICAgICAgICAgICAweEIyMjIyMixcclxuICAgIEZsb3JhbFdoaXRlOiAgICAgICAgICAweEZGRkFGMCxcclxuICAgIEZvcmVzdEdyZWVuOiAgICAgICAgICAweDIyOEIyMixcclxuICAgIEZ1Y2hzaWE6ICAgICAgICAgICAgICAweEZGMDBGRixcclxuICAgIEdhaW5zYm9ybzogICAgICAgICAgICAweERDRENEQyxcclxuICAgIEdob3N0V2hpdGU6ICAgICAgICAgICAweEY4RjhGRixcclxuICAgIEdvbGQ6ICAgICAgICAgICAgICAgICAweEZGRDcwMCxcclxuICAgIEdvbGRlbnJvZDogICAgICAgICAgICAweERBQTUyMCxcclxuICAgIEdyYXk6ICAgICAgICAgICAgICAgICAweDgwODA4MCxcclxuICAgIEdyZWVuOiAgICAgICAgICAgICAgICAweDAwODAwMCxcclxuICAgIEdyZWVuWWVsbG93OiAgICAgICAgICAweEFERkYyRixcclxuICAgIEhvbmV5ZGV3OiAgICAgICAgICAgICAweEYwRkZGMCxcclxuICAgIEhvdFBpbms6ICAgICAgICAgICAgICAweEZGNjlCNCxcclxuICAgIEluZGlhblJlZDogICAgICAgICAgICAweENENUM1QyxcclxuICAgIEluZGlnbzogICAgICAgICAgICAgICAweDRCMDA4MixcclxuICAgIEl2b3J5OiAgICAgICAgICAgICAgICAweEZGRkZGMCxcclxuICAgIEtoYWtpOiAgICAgICAgICAgICAgICAweEYwRTY4QyxcclxuICAgIExhdmVuZGVyOiAgICAgICAgICAgICAweEU2RTZGQSxcclxuICAgIExhdmVuZGVyQmx1c2g6ICAgICAgICAweEZGRjBGNSxcclxuICAgIExhd25HcmVlbjogICAgICAgICAgICAweDdDRkMwMCxcclxuICAgIExlbW9uQ2hpZmZvbjogICAgICAgICAweEZGRkFDRCxcclxuICAgIExpZ2h0Qmx1ZTogICAgICAgICAgICAweEFERDhFNixcclxuICAgIExpZ2h0Q29yYWw6ICAgICAgICAgICAweEYwODA4MCxcclxuICAgIExpZ2h0Q3lhbjogICAgICAgICAgICAweEUwRkZGRixcclxuICAgIExpZ2h0R29sZGVucm9kWWVsbG93OiAweEZBRkFEMixcclxuICAgIExpZ2h0R3JlZW46ICAgICAgICAgICAweDkwRUU5MCxcclxuICAgIExpZ2h0R3JheTogICAgICAgICAgICAweEQzRDNEMyxcclxuICAgIExpZ2h0UGluazogICAgICAgICAgICAweEZGQjZDMSxcclxuICAgIExpZ2h0U2FsbW9uOiAgICAgICAgICAweEZGQTA3QSxcclxuICAgIExpZ2h0U2VhR3JlZW46ICAgICAgICAweDIwQjJBQSxcclxuICAgIExpZ2h0U2t5Qmx1ZTogICAgICAgICAweDg3Q0VGQSxcclxuICAgIExpZ2h0U2xhdGVHcmF5OiAgICAgICAweDc3ODg5OSxcclxuICAgIExpZ2h0U3RlZWxCbHVlOiAgICAgICAweEIwQzRERSxcclxuICAgIExpZ2h0WWVsbG93OiAgICAgICAgICAweEZGRkZFMCxcclxuICAgIExpbWU6ICAgICAgICAgICAgICAgICAweDAwRkYwMCxcclxuICAgIExpbWVHcmVlbjogICAgICAgICAgICAweDMyQ0QzMixcclxuICAgIExpbmVuOiAgICAgICAgICAgICAgICAweEZBRjBFNixcclxuICAgIE1hZ2VudGE6ICAgICAgICAgICAgICAweEZGMDBGRixcclxuICAgIE1hcm9vbjogICAgICAgICAgICAgICAweDgwMDAwMCxcclxuICAgIE1lZGl1bUFxdWFtYXJpbmU6ICAgICAweDY2Q0RBQSxcclxuICAgIE1lZGl1bUJsdWU6ICAgICAgICAgICAweDAwMDBDRCxcclxuICAgIE1lZGl1bU9yY2hpZDogICAgICAgICAweEJBNTVEMyxcclxuICAgIE1lZGl1bVB1cnBsZTogICAgICAgICAweDkzNzBEQixcclxuICAgIE1lZGl1bVNlYUdyZWVuOiAgICAgICAweDNDQjM3MSxcclxuICAgIE1lZGl1bVNsYXRlQmx1ZTogICAgICAweDdCNjhFRSxcclxuICAgIE1lZGl1bVNwcmluZ0dyZWVuOiAgICAweDAwRkE5QSxcclxuICAgIE1lZGl1bVR1cnF1b2lzZTogICAgICAweDQ4RDFDQyxcclxuICAgIE1lZGl1bVZpb2xldFJlZDogICAgICAweEM3MTU4NSxcclxuICAgIE1pZG5pZ2h0Qmx1ZTogICAgICAgICAweDE5MTk3MCxcclxuICAgIE1pbnRDcmVhbTogICAgICAgICAgICAweEY1RkZGQSxcclxuICAgIE1pc3R5Um9zZTogICAgICAgICAgICAweEZGRTRFMSxcclxuICAgIE1vY2Nhc2luOiAgICAgICAgICAgICAweEZGRTRCNSxcclxuICAgIE5hdmFqb1doaXRlOiAgICAgICAgICAweEZGREVBRCxcclxuICAgIE5hdnk6ICAgICAgICAgICAgICAgICAweDAwMDA4MCxcclxuICAgIE9sZExhY2U6ICAgICAgICAgICAgICAweEZERjVFNixcclxuICAgIE9saXZlOiAgICAgICAgICAgICAgICAweDgwODAwMCxcclxuICAgIE9saXZlRHJhYjogICAgICAgICAgICAweDZCOEUyMyxcclxuICAgIE9yYW5nZTogICAgICAgICAgICAgICAweEZGQTUwMCxcclxuICAgIE9yYW5nZVJlZDogICAgICAgICAgICAweEZGNDUwMCxcclxuICAgIE9yY2hpZDogICAgICAgICAgICAgICAweERBNzBENixcclxuICAgIFBhbGVHb2xkZW5yb2Q6ICAgICAgICAweEVFRThBQSxcclxuICAgIFBhbGVHcmVlbjogICAgICAgICAgICAweDk4RkI5OCxcclxuICAgIFBhbGVUdXJxdW9pc2U6ICAgICAgICAweEFGRUVFRSxcclxuICAgIFBhbGVWaW9sZXRSZWQ6ICAgICAgICAweERCNzA5MyxcclxuICAgIFBhcGF5YVdoaXA6ICAgICAgICAgICAweEZGRUZENSxcclxuICAgIFBlYWNoUHVmZjogICAgICAgICAgICAweEZGREFCOSxcclxuICAgIFBlcnU6ICAgICAgICAgICAgICAgICAweENEODUzRixcclxuICAgIFBpbms6ICAgICAgICAgICAgICAgICAweEZGQzBDQixcclxuICAgIFBsdW06ICAgICAgICAgICAgICAgICAweEREQTBERCxcclxuICAgIFBvd2RlckJsdWU6ICAgICAgICAgICAweEIwRTBFNixcclxuICAgIFB1cnBsZTogICAgICAgICAgICAgICAweDgwMDA4MCxcclxuICAgIFJlZDogICAgICAgICAgICAgICAgICAweEZGMDAwMCxcclxuICAgIFJvc3lCcm93bjogICAgICAgICAgICAweEJDOEY4RixcclxuICAgIFJveWFsQmx1ZTogICAgICAgICAgICAweDQxNjlFMSxcclxuICAgIFNhZGRsZUJyb3duOiAgICAgICAgICAweDhCNDUxMyxcclxuICAgIFNhbG1vbjogICAgICAgICAgICAgICAweEZBODA3MixcclxuICAgIFNhbmR5QnJvd246ICAgICAgICAgICAweEY0QTQ2MCxcclxuICAgIFNlYUdyZWVuOiAgICAgICAgICAgICAweDJFOEI1NyxcclxuICAgIFNlYXNoZWxsOiAgICAgICAgICAgICAweEZGRjVFRSxcclxuICAgIFNpZW5uYTogICAgICAgICAgICAgICAweEEwNTIyRCxcclxuICAgIFNpbHZlcjogICAgICAgICAgICAgICAweEMwQzBDMCxcclxuICAgIFNreUJsdWU6ICAgICAgICAgICAgICAweDg3Q0VFQixcclxuICAgIFNsYXRlQmx1ZTogICAgICAgICAgICAweDZBNUFDRCxcclxuICAgIFNsYXRlR3JheTogICAgICAgICAgICAweDcwODA5MCxcclxuICAgIFNub3c6ICAgICAgICAgICAgICAgICAweEZGRkFGQSxcclxuICAgIFNwcmluZ0dyZWVuOiAgICAgICAgICAweDAwRkY3RixcclxuICAgIFN0ZWVsQmx1ZTogICAgICAgICAgICAweDQ2ODJCNCxcclxuICAgIFRhbjogICAgICAgICAgICAgICAgICAweEQyQjQ4QyxcclxuICAgIFRlYWw6ICAgICAgICAgICAgICAgICAweDAwODA4MCxcclxuICAgIFRoaXN0bGU6ICAgICAgICAgICAgICAweEQ4QkZEOCxcclxuICAgIFRvbWF0bzogICAgICAgICAgICAgICAweEZGNjM0NyxcclxuICAgIFR1cnF1b2lzZTogICAgICAgICAgICAweDQwRTBEMCxcclxuICAgIFZpb2xldDogICAgICAgICAgICAgICAweEVFODJFRSxcclxuICAgIFdoZWF0OiAgICAgICAgICAgICAgICAweEY1REVCMyxcclxuICAgIFdoaXRlOiAgICAgICAgICAgICAgICAweEZGRkZGRixcclxuICAgIFdoaXRlU21va2U6ICAgICAgICAgICAweEY1RjVGNSxcclxuICAgIFllbGxvdzogICAgICAgICAgICAgICAweEZGRkYwMCxcclxuICAgIFllbGxvd0dyZWVuOiAgICAgICAgICAweDlBQ0QzMixcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IENvbG9yczsiLCJpbXBvcnQgeyBSZWN0LCBTcHJpdGUsIE1lc2gsIFRleHR1cmVCYXNlLCBUZXh0dXJlIH0gZnJvbSBcIkBlbmdpbmUvZmxhdGZhc3RcIjtcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHcmlkOSBleHRlbmRzIE1lc2gge1xyXG4gICAgLyoqXHJcbiAgICAgKkNyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgR3JpZDkuXHJcbiAgICAgKiBAcGFyYW0ge1RleHR1cmVCYXNlfSB0ZXh0dXJlXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcj19IHhcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0geVxyXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSB3XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcj19IGhcclxuICAgICAqIEBtZW1iZXJvZiBHcmlkOVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvciggdGV4dHVyZSwgeCwgeSwgdywgaCApIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuX190ZXh0dXJlID0gdGV4dHVyZTtcclxuICAgICAgICBpZiAoIHggIT0gbnVsbCAmJiB5ICE9IG51bGwgJiYgdyAhPSBudWxsICYmIGggIT0gbnVsbCApIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRSZWN0KCB4LCB5LCB3LCBoICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHlcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaFxyXG4gICAgICogQG1lbWJlcm9mIEdyaWQ5XHJcbiAgICAgKi9cclxuICAgIHNldFJlY3QoIHgsIHksIHcsIGggKSB7XHJcbiAgICAgICAgbGV0IFt0dywgdGhdID0gW3RoaXMuX190ZXh0dXJlLndpZHRoLHRoaXMuX190ZXh0dXJlLmhlaWdodF07XHJcbiAgICAgICAgbGV0IGEgPSBNYXRoLmNlaWwoIHR3IC8gMyApO1xyXG4gICAgICAgIGxldCBiID0gTWF0aC5mbG9vciggdGggLyAzICk7XHJcblxyXG4gICAgICAgIHRoaXMuX19yZWN0ID0gbmV3IFJlY3QoIHgsIHksIHcsIGggKTtcclxuICAgICAgICB0aGlzLnNldFZlcnRleEFycmF5KCBbXHJcbiAgICAgICAgICAgIHgsIHksIHggKyBhLCB5LCB4ICsgdyAtIGEsIHksIHggKyB3LCB5LFxyXG4gICAgICAgICAgICB4LCB5ICsgYiwgeCArIGEsIHkgKyBiLCB4ICsgdyAtIGEsIHkgKyBiLCB4ICsgdywgeSArIGIsXHJcbiAgICAgICAgICAgIHgsIHkgKyBoIC0gYiwgeCArIGEsIHkgKyBoIC0gYiwgeCArIHcgLSBhLCB5ICsgaCAtIGIsIHggKyB3LCB5ICsgaCAtIGIsXHJcbiAgICAgICAgICAgIHgsIHkgKyBoLCB4ICsgYSwgeSArIGgsIHggKyB3IC0gYSwgeSArIGgsIHggKyB3LCB5ICsgaFxyXG4gICAgICAgIF0gKTtcclxuICAgICAgICB0aGlzLnNldFRleHR1cmVDb29yZGluYXRlQXJyYXkoIFtcclxuICAgICAgICAgICAgMCwgMCwgYSwgMCwgdHcgLSBhLCAwLCB0dywgMCxcclxuICAgICAgICAgICAgMCwgYiwgYSwgYiwgdHcgLSBhLCBiLCB0dywgYixcclxuICAgICAgICAgICAgMCwgdGggLSBiLCBhLCB0aCAtIGIsIHR3IC0gYSwgdGggLSBiLCB0dywgdGggLSBiLFxyXG4gICAgICAgICAgICAwLCB0aCwgYSwgdGgsIHR3IC0gYSwgdGgsIHR3LCB0aFxyXG4gICAgICAgIF0gKTtcclxuICAgICAgICAvLyAxIDIgMyA0O1xyXG4gICAgICAgIC8vIDUgNiA3IDg7XHJcbiAgICAgICAgLy8gOSAxMDExMTI7XHJcbiAgICAgICAgLy8gMTMxNDE1MTY7XHJcbiAgICAgICAgdGhpcy5zZXRJbmRleEFycmF5KCBbXHJcbiAgICAgICAgICAgIDAsIDEsIDQsIDEsIDUsIDQsIDEsIDIsIDUsIDIsIDYsIDUsIDIsIDMsIDYsIDMsIDcsIDYsXHJcbiAgICAgICAgICAgIDQsIDUsIDgsIDUsIDksIDgsIDUsIDYsIDksIDYsIDEwLCA5LCA2LCA3LCAxMCwgNywgMTEsIDEwLFxyXG4gICAgICAgICAgICA4LCA5LCAxMiwgOSwgMTMsIDEyLCA5LCAxMCwgMTMsIDEwLCAxNCwgMTMsIDEwLCAxMSwgMTQsIDExLCAxNSwgMTRdICk7XHJcbiAgICAgICAgdGhpcy5zZXRDb2xvckFycmF5KCBbXHJcbiAgICAgICAgICAgIDB4ZmZmZmZmLCAxLCAweGZmZmZmZiwgMSwgMHhmZmZmZmYsIDEsIDB4ZmZmZmZmLCAxLFxyXG4gICAgICAgICAgICAweGZmZmZmZiwgMSwgMHhmZmZmZmYsIDEsIDB4ZmZmZmZmLCAxLCAweGZmZmZmZiwgMSxcclxuICAgICAgICAgICAgMHhmZmZmZmYsIDEsIDB4ZmZmZmZmLCAxLCAweGZmZmZmZiwgMSwgMHhmZmZmZmYsIDEsXHJcbiAgICAgICAgICAgIDB4ZmZmZmZmLCAxLCAweGZmZmZmZiwgMSwgMHhmZmZmZmYsIDEsIDB4ZmZmZmZmLCAxXSApO1xyXG4gICAgICAgIHRoaXMuc2V0VGV4dHVyZSggdGhpcy5fX3RleHR1cmUgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgd2lkdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX19yZWN0LndpZHRoO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBoZWlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX19yZWN0LmhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRMb2NhbEJvdW5kcyggcmVjdCApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fX3JlY3Q7XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IFRleHR1cmVCYXNlLCBNZXNoLFV0aWxzIH0gZnJvbSBcIkBlbmdpbmUvZmxhdGZhc3RcIjtcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJY29uUGFjayBleHRlbmRzIE1lc2gge1xyXG4gICAgLyoqXHJcbiAgICAgKkNyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgSWNvblBhY2suXHJcbiAgICAgKiBAcGFyYW0ge1RleHR1cmVCYXNlfSB0ZXh0dXJlXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY29sXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcm93XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdHdcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0aFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtjb2xvcj0weGZmZmZmZl1cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYWxwaGE9MV1cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3BhY2luZz0wXVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFttYXJnaW49MF1cclxuICAgICAqIEBtZW1iZXJvZiBJY29uUGFja1xyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvciggdGV4dHVyZSwgY29sLCByb3csIHR3LCB0aCwgY29sb3IgPSAweGZmZmZmZiwgYWxwaGEgPSAxLCBzcGFjaW5nID0gMCwgbWFyZ2luID0gMCApIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuX19pc0ljb25QYWNrID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9fc3BhY2luZyA9IHNwYWNpbmc7XHJcbiAgICAgICAgdGhpcy5fX21hcmdpbiA9IG1hcmdpbjtcclxuICAgICAgICB0aGlzLl9fd2lkdGggPSB0dztcclxuICAgICAgICB0aGlzLl9faGVpZ2h0ID0gdGg7XHJcbiAgICAgICAgdGhpcy5fX3RleHR1cmUgPSB0ZXh0dXJlO1xyXG4gICAgICAgIHRoaXMuX19wZXJSb3cgPSBNYXRoLmZsb29yKCAoIHRleHR1cmUud2lkdGggLyB0dyAtIHRoaXMuX19tYXJnaW4gKiAyICkgLyAoIHR3ICsgdGhpcy5fX3NwYWNpbmcgKSApO1xyXG4gICAgICAgIHRoaXMuc2V0VGV4dHVyZSggdGV4dHVyZSApO1xyXG4gICAgICAgIHRoaXMuXyQkY29sb3IgPSBjb2xvcjtcclxuICAgICAgICB0aGlzLl9fYWxwaGEgPSBhbHBoYTtcclxuICAgICAgICB0aGlzLnNldENvbG9yQXJyYXkoIFtjb2xvcixhbHBoYSxjb2xvcixhbHBoYSxjb2xvcixhbHBoYSxjb2xvcixhbHBoYV0gKTtcclxuICAgICAgICB0aGlzLnNldFZlcnRleEFycmF5KCBbLXR3IC8gMiwtdGggLyAyLCB0dyAvIDIsLXRoIC8gMiwgLXR3IC8gMix0aCAvIDIsIHR3IC8gMix0aCAvIDJdICk7XHJcbiAgICAgICAgdGhpcy5zZXRJbmRleEFycmF5KCBbMCwxLDIsMSwzLDJdICk7XHJcbiAgICAgICAgdGhpcy5zZXRDb2xSb3coIGNvbCxyb3cgKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgc2V0Q29sUm93KCBjb2wscm93ICkge1xyXG4gICAgICAgIGxldCB0dyA9IHRoaXMuX193aWR0aDtcclxuICAgICAgICBsZXQgdGggPSB0aGlzLl9faGVpZ2h0O1xyXG4gICAgICAgIGxldCB0eCA9ICggY29sIC0gMSApICogKCB0dyArIHRoaXMuX19zcGFjaW5nICkgKyB0aGlzLl9fbWFyZ2luO1xyXG4gICAgICAgIGxldCB0eSA9ICggcm93IC0gMSApICogKCB0aCArIHRoaXMuX19zcGFjaW5nICkgKyB0aGlzLl9fbWFyZ2luO1xyXG5cclxuICAgICAgICB0aGlzLnNldFRleHR1cmVDb29yZGluYXRlQXJyYXkoIFt0eCx0eSx0eCArIHR3LHR5LHR4LHR5ICsgdGgsdHggKyB0dyx0eSArIHRoXSApO1xyXG4gICAgICAgIHRoaXMuXyQkY29sID0gY29sO1xyXG4gICAgICAgIHRoaXMuX19yb3cgPSByb3c7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0QnlJZCggaWQgKSB7XHJcbiAgICAgICAgbGV0IGNvbCA9ICggKCBpZCAtIDEgKSAlIHRoaXMuX19wZXJSb3cgKSArIDE7XHJcbiAgICAgICAgbGV0IHJvdyA9IE1hdGguZmxvb3IoIGlkIC8gdGhpcy5fX3BlclJvdyApICsgMTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRDb2xSb3coIGNvbCxyb3cgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fJCRjb2wgKyAoIHRoaXMuX19yb3cgLSAxICkgKiB0aGlzLl9fcGVyUm93O1xyXG4gICAgfVxyXG5cclxuICAgIGdldENvbFJvdygpIHtcclxuICAgICAgICByZXR1cm4gW3RoaXMuXyQkY29sLHRoaXMuX19yb3ddO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb25lKCBjb2wscm93ICkge1xyXG4gICAgICAgIHJldHVybiBuZXcgSWNvblBhY2soIHRoaXMuX190ZXh0dXJlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbCAhPSBudWxsID8gY29sIDogdGhpcy5fJCRjb2wsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93ICE9IG51bGwgPyByb3cgOiB0aGlzLl9fcm93LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX193aWR0aCwgdGhpcy5fX2hlaWdodCwgdGhpcy5fJCRjb2xvciwgdGhpcy5fX2FscGhhLCB0aGlzLl9fc3BhY2luZywgdGhpcy5fX21hcmdpbiApO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0geFxyXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0geVxyXG4gICAgICogQG1lbWJlcm9mIEljb25QYWNrXHJcbiAgICAgKi9cclxuICAgIHNldEZsaXAoIHgseSApIHtcclxuICAgICAgICBsZXQgdHcgPSB0aGlzLl9fd2lkdGg7XHJcbiAgICAgICAgbGV0IHRoID0gdGhpcy5fX2hlaWdodDtcclxuICAgICAgICBsZXQgdHggPSAoIHRoaXMuXyQkY29sIC0gMSApICogKCB0dyArIHRoaXMuX19zcGFjaW5nICkgKyB0aGlzLl9fbWFyZ2luO1xyXG4gICAgICAgIGxldCB0eSA9ICggdGhpcy5fX3JvdyAtIDEgKSAqICggdGggKyB0aGlzLl9fc3BhY2luZyApICsgdGhpcy5fX21hcmdpbjtcclxuXHJcbiAgICAgICAgaWYgKCB4ICYmIHkgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VGV4dHVyZUNvb3JkaW5hdGVzKCAzLHR4LHR5LDIsdHggKyB0dyx0eSwxLHR4LHR5ICsgdGgsMCx0eCArIHR3LHR5ICsgdGggKTtcclxuICAgICAgICB9IGVsc2UgaWYgKCB4ICkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFRleHR1cmVDb29yZGluYXRlcyggMSx0eCx0eSwwLHR4ICsgdHcsdHksMyx0eCx0eSArIHRoLDIsdHggKyB0dyx0eSArIHRoICk7XHJcbiAgICAgICAgfSBlbHNlIGlmICggeSApIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRUZXh0dXJlQ29vcmRpbmF0ZXMoIDIsdHgsdHksMyx0eCArIHR3LHR5LDAsdHgsdHkgKyB0aCwxLHR4ICsgdHcsdHkgKyB0aCApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VGV4dHVyZUNvb3JkaW5hdGVzKCAwLHR4LHR5LDEsdHggKyB0dyx0eSwyLHR4LHR5ICsgdGgsMyx0eCArIHR3LHR5ICsgdGggKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g7J6E7J2Y7J2YIDTsobDqsIHsnLzroZwg7Kq86rCg64ukXHJcbiAgICBzbGljZU1lc2goIHBoeXNpY3MgKSB7XHJcbiAgICAgICAgbGV0IGNvbCA9IHRoaXMuXyQkY29sO1xyXG4gICAgICAgIGxldCByb3cgPSB0aGlzLl9fcm93O1xyXG4gICAgICAgIGxldCB0dyA9IHRoaXMuX193aWR0aDtcclxuICAgICAgICBsZXQgdGggPSB0aGlzLl9faGVpZ2h0O1xyXG4gICAgICAgIGxldCB0eCA9ICggY29sIC0gMSApICogKCB0dyArIHRoaXMuX19zcGFjaW5nICkgKyB0aGlzLl9fbWFyZ2luO1xyXG4gICAgICAgIGxldCB0eSA9ICggcm93IC0gMSApICogKCB0aCArIHRoaXMuX19zcGFjaW5nICkgKyB0aGlzLl9fbWFyZ2luO1xyXG4gICAgICAgIGxldCBjeCA9IFV0aWxzLnJhbmRvbSggTWF0aC5mbG9vciggdHcgKiAwLjQ1ICksTWF0aC5mbG9vciggdHcgKiAwLjU1ICkgKSAtIDE7XHJcbiAgICAgICAgbGV0IGN5ID0gVXRpbHMucmFuZG9tKCBNYXRoLmZsb29yKCB0aCAqIDAuNDUgKSxNYXRoLmZsb29yKCB0aCAqIDAuNTUgKSApIC0gMTtcclxuICAgICAgICBsZXQgeDEgPSBVdGlscy5yYW5kb20oIE1hdGguZmxvb3IoIHR3ICogMC4zICksTWF0aC5mbG9vciggdHcgKiAwLjcgKSApIC0gMTtcclxuICAgICAgICBsZXQgeTEgPSBVdGlscy5yYW5kb20oIE1hdGguZmxvb3IoIHRoICogMC4zICksTWF0aC5mbG9vciggdGggKiAwLjcgKSApIC0gMTtcclxuICAgICAgICBsZXQgeDIgPSBVdGlscy5yYW5kb20oIE1hdGguZmxvb3IoIHR3ICogMC4zICksTWF0aC5mbG9vciggdHcgKiAwLjcgKSApIC0gMTtcclxuICAgICAgICBsZXQgeTIgPSBVdGlscy5yYW5kb20oIE1hdGguZmxvb3IoIHRoICogMC4zICksTWF0aC5mbG9vciggdGggKiAwLjcgKSApIC0gMTtcclxuICAgICAgICAvL2xvZyh0eCx0eSx0dyx0aCxjeCxjeSk7XHJcbiAgICAgICAgbGV0IG0xID0gbmV3IE1lc2goKTtcclxuICAgICAgICBsZXQgdnR4MSA9IFstdHcgLyAyLCAtdGggLyAyLCB4MSAtIHR3IC8gMiwgLXRoIC8gMiwgY3ggLSB0dyAvIDIsIGN5IC0gdGggLyAyLCAtdHcgLyAyLCB5MSAtIHRoIC8gMl07XHJcblxyXG4gICAgICAgIG0xLnNldFZlcnRleEFycmF5KCB2dHgxICk7XHJcbiAgICAgICAgbTEuc2V0VGV4dHVyZUNvb3JkaW5hdGVBcnJheSggW3R4LHR5LHR4ICsgeDEsdHksdHggKyBjeCx0eSArIGN5LHR4LHR5ICsgeTFdICk7XHJcbiAgICAgICAgbTEuc2V0SW5kZXhBcnJheSggWzAsMSwyLDAsMiwzXSApO1xyXG4gICAgICAgIG0xLnNldFRleHR1cmUoIHRoaXMuX190ZXh0dXJlICk7XHJcbiAgICAgICAgbGV0IG0yID0gbmV3IE1lc2goKTtcclxuICAgICAgICBsZXQgdnR4MiA9IFt4MSAtIHR3IC8gMiwgLXRoIC8gMiwgdHcgLSB0dyAvIDIsIC10aCAvIDIsIHR3IC0gdHcgLyAyLCB5MiAtIHRoIC8gMiwgY3ggLSB0dyAvIDIsIGN5IC0gdGggLyAyXTtcclxuXHJcbiAgICAgICAgbTIuc2V0VmVydGV4QXJyYXkoIHZ0eDIgKTtcclxuICAgICAgICBtMi5zZXRUZXh0dXJlQ29vcmRpbmF0ZUFycmF5KCBbdHggKyB4MSx0eSx0eCArIHR3LHR5LHR4ICsgdHcsdHkgKyB5Mix0eCArIGN4LHR5ICsgY3ldICk7XHJcbiAgICAgICAgbTIuc2V0SW5kZXhBcnJheSggWzAsMSwyLDAsMiwzXSApO1xyXG4gICAgICAgIG0yLnNldFRleHR1cmUoIHRoaXMuX190ZXh0dXJlICk7XHJcbiAgICAgICAgbGV0IG0zID0gbmV3IE1lc2goKTtcclxuICAgICAgICBsZXQgdnR4MyA9IFstdHcgLyAyLCB5MSAtIHRoIC8gMiwgY3ggLSB0dyAvIDIsIGN5IC0gdGggLyAyLCB4MiAtIHR3IC8gMiwgdGggLSB0aCAvIDIsIC10dyAvIDIsIHRoIC0gdGggLyAyXTtcclxuXHJcbiAgICAgICAgbTMuc2V0VmVydGV4QXJyYXkoIHZ0eDMgKTtcclxuICAgICAgICBtMy5zZXRUZXh0dXJlQ29vcmRpbmF0ZUFycmF5KCBbdHgsdHkgKyB5MSx0eCArIGN4LHR5ICsgY3ksdHggKyB4Mix0eSArIHRoLHR4LHR5ICsgdGhdICk7XHJcbiAgICAgICAgbTMuc2V0SW5kZXhBcnJheSggWzAsMSwyLDAsMiwzXSApO1xyXG4gICAgICAgIG0zLnNldFRleHR1cmUoIHRoaXMuX190ZXh0dXJlICk7XHJcbiAgICAgICAgbGV0IG00ID0gbmV3IE1lc2goKTtcclxuICAgICAgICBsZXQgdnR4NCA9IFtjeCAtIHR3IC8gMiwgY3kgLSB0aCAvIDIsIHR3IC0gdHcgLyAyLCB5MiAtIHRoIC8gMiwgdHcgLSB0dyAvIDIsIHRoIC0gdGggLyAyLCB4MiAtIHR3IC8gMiwgdGggLSB0aCAvIDJdO1xyXG5cclxuICAgICAgICBtNC5zZXRWZXJ0ZXhBcnJheSggdnR4NCApO1xyXG4gICAgICAgIG00LnNldFRleHR1cmVDb29yZGluYXRlQXJyYXkoIFt0eCArIGN4LHR5ICsgY3ksdHggKyB0dyx0eSArIHkyLHR4ICsgdHcsdHkgKyB0aCx0eCArIHgyLHR5ICsgdGhdICk7XHJcbiAgICAgICAgbTQuc2V0SW5kZXhBcnJheSggWzAsMSwyLDAsMiwzXSApO1xyXG4gICAgICAgIG00LnNldFRleHR1cmUoIHRoaXMuX190ZXh0dXJlICk7XHJcbiAgICAgICAgaWYgKCB0aGlzLl8kJGNvbG9yICkge1xyXG4gICAgICAgICAgICBsZXQgY29sb3IgPSB0aGlzLl8kJGNvbG9yO1xyXG4gICAgICAgICAgICBsZXQgYWxwaGEgPSB0aGlzLl9fYWxwaGE7XHJcblxyXG4gICAgICAgICAgICBtMS5zZXRDb2xvckFycmF5KCBbY29sb3IsYWxwaGEgfHwgMSxjb2xvcixhbHBoYSB8fCAxLGNvbG9yLGFscGhhIHx8IDEsY29sb3IsYWxwaGEgfHwgMV0gKTtcclxuICAgICAgICAgICAgbTIuc2V0Q29sb3JBcnJheSggW2NvbG9yLGFscGhhIHx8IDEsY29sb3IsYWxwaGEgfHwgMSxjb2xvcixhbHBoYSB8fCAxLGNvbG9yLGFscGhhIHx8IDFdICk7XHJcbiAgICAgICAgICAgIG0zLnNldENvbG9yQXJyYXkoIFtjb2xvcixhbHBoYSB8fCAxLGNvbG9yLGFscGhhIHx8IDEsY29sb3IsYWxwaGEgfHwgMSxjb2xvcixhbHBoYSB8fCAxXSApO1xyXG4gICAgICAgICAgICBtNC5zZXRDb2xvckFycmF5KCBbY29sb3IsYWxwaGEgfHwgMSxjb2xvcixhbHBoYSB8fCAxLGNvbG9yLGFscGhhIHx8IDEsY29sb3IsYWxwaGEgfHwgMV0gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBbbTEsbTIsbTMsbTRdO1xyXG4gICAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgeyBzdGFnZSxUaW1lciwgVHdlZW4sIE1lc2gsIGVhc2luZywgU2hhcGUsIEV2ZW50LCBUZXh0RmllbGQsIFV0aWxzLFNwcml0ZSwgYXBwbGljYXRpb24gfSBmcm9tIFwiQGVuZ2luZS9mbGF0ZmFzdFwiO1xyXG5pbXBvcnQgR3JpZDkgZnJvbSBcIi4vZ3JpZDlcIjtcclxuXHJcbi8qXHJcblxyXG5MaXN0Vmlldztcclxu65OA7Ja87JeQIOyCrOyaqe2VnCDqsoPsl5DshJwg66eO7J20IOuwlOuAjOyXiOydjFxyXG5cclxucGFyYW1zID0gXHJcblxyXG5zdGlja09uQm9yZGVyID0gZmFsc2U7XHJcbmJhY2tncm91bmQgPSB7aW1hZ2UsY29sb3J9ICAvLyDqtazquIDsiqTrn6zsmrQg7Iqk7YOA7J28XHJcbmFuaW1hdGlvbkZ1bmMgPSBmdW5jKHRoaXMsaXRlbSxpbmRleCk7XHJcbmNsaXAgPSB0cnVlO1xyXG5maXRIaXRBcmVhVG9TY3JlZW5XaWR0aCAvLyDtmZTrqbQg64ukIOuNruuKlOuLpC4g66qo64us7LKY65+8LiBDT05GSUcg7JeG7Jy866m0IOuPmeyekeyViOuQqFxyXG5hbGlnbiA9IFwidG9wXCIgLCBcImJvdHRvbVwiXHJcblx0XHRcdFx0XHRcdFx0Ym90dG9tIOydgCBzZXRJdGVtc+ulvCDtlaAg65WMIOymieyLnCDsnITroZwg67CA7Ja07Jis66as6rKMIOuQmOyWtOyeiOuLpC5cclxuXHRcdFx0XHRcdFx0XHRhZGTroZwg7ZWY64KY7JSpIOy2lOqwgO2VmOuptCDsnITsuZjqsIAg7J6YIOyViOunnuydhCDsiJgg7J6I7J2MXHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5FeGFtcGxlKTtcclxuXHQvLyDrp4zrk6TrlYxcclxuXHQvLyDssqvrsojsp7gg7J247J6Q6rCAIGl0ZW1z7J2064ukLlxyXG5cdGxpc3RWaWV3MSA9IG5ldyBMaXN0Vmlldyh7fSwgd2lkdGgsIGhlaWdodCwgc3ByaXRlRnVuYywgXHJcblx0XHR7XHJcblx0XHRcdHBhZGRpbmcgPSAwLFxyXG5cdFx0XHRjdXRPZmZzZXRCb3R0b20gPSAwLFxyXG5cdFx0XHRmaXRIaXRBcmVhVG9TY3JlZW5XaWR0aCA9IHRydWUsXHJcblx0XHRcdGJhY2tncm91bmQgPSB7Y29sb3I9MHhmMGYwZjAsaW1hZ2UgPSBkZWNrSW1hZ2UsaGVhZGVySGVpZ2h0ID0gMTgwfSxcclxuXHRcdH0pO1xyXG5cdGxpc3RWaWV3MS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb25DbGljaywgdGhpcyk7XHJcblx0bGlzdFZpZXcxLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3ZlUG9zaXRpb25cIixmdW5jdGlvbihlKTtcclxuXHRcdC8vIGUuYmFja2dyb3VuZFkg66GcIO2PrOyngOyFmCDqsJLsnbQg64SY7Ja07Jio64ukXHJcblx0ZW5kKTtcclxuXHRsaXN0VmlldzEuYWRkKGl0ZW0pO1xyXG5cdGxpc3RWaWV3MS5zZXRJdGVtcyhpdGVtcywgZm9yY2VVcGRhdGUsIGZvcmNlUmVmcmVzaCk7XHJcblx0aXRlbSA9IHt0ZXh0ID0gaXRlbU5hbWUsIGRhdGEgPSB7fSB9XHJcblx0XHJcblNwcml0ZSBGdW5jKTtcclxuZnVuY3Rpb24gc3ByaXRlRnVuY19leGFtcGxlKGxpc3RWaWV3LGl0ZW0saW5kZXgsbGlzdFZpZXdPd25lcikge1xyXG5cdGxldCB0ZXh0ID0gaXRlbS50ZXh0O1xyXG5cdGxldCBkID0gaXRlbS5kYXRhO1xyXG5cdGxldCBzcHIgPSBuZXcgU3ByaXRlKCk7XHJcblx0OlxyXG5cdHJldHJ1biBzcHI7XHJcbn1cclxuXHJcblxyXG5SZWZyZXNoIOyymOumrCk7XHJcblx0XHRsaXN0VmlldzEuYWRkRXZlbnRMaXN0ZW5lcihcInJlZnJlc2hSZWFkeVwiLCBmdW5jLCBkYXRhKTtcclxuXHRcdGxpc3RWaWV3MS5hZGRFdmVudExpc3RlbmVyKFwicmVmcmVzaENhbmNlbFwiLCBmdW5jLCBkYXRhKTtcclxuXHRcdGxpc3RWaWV3MS5hZGRFdmVudExpc3RlbmVyKFwicmVmcmVzaFwiLCBmdW5jLCBkYXRhKTtcclxuXHRcdGUuc3ByaXRl66GcIOumrO2UhOuemOyLnCDsiqTtlITrnbzsnbTtirjqsIAg64SY7Ja07Ji0XHJcblx0XHRcclxuXHJcblxyXG5cclxuXHJcbiovXHJcblxyXG5jb25zdCBJVEVNX1BBRERJTkcgPSAxO1xyXG5cclxuLy9sZXQgTElTVF9UT1BfTUFSR0lOID0gMDtcclxuLyoqXHJcbiAqIEB0aGlzIExpc3RWaWV3XHJcbiAqXHJcbiAqIEBwYXJhbSB7Kn0gaXRlbVxyXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcclxuICogQHBhcmFtIHsqfSBvd25lclxyXG4gKiBAcmV0dXJucyB7W1Nwcml0ZSwqLG51bWJlcl19XHJcbiAqL1xyXG5mdW5jdGlvbiBkZWZhdWx0U3ByaXRlRnVuYyggaXRlbSwgaW5kZXgsIG93bmVyICkge1xyXG4gICAgY29uc3Qgc3ByID0gbmV3IFNwcml0ZSgpO1xyXG4gICAgY29uc3QgYmFjazEgPSBNZXNoLmNyZWF0ZUJveCggLU1hdGguZmxvb3IoIHRoaXMud2lkdGggLyAyICksIC0xMCwgdGhpcy53aWR0aCwgMjAsIDB4ZmZmZmZmICk7XHJcbiAgICBjb25zdCBiYWNrMiA9IE1lc2guY3JlYXRlQm94KCAtTWF0aC5mbG9vciggdGhpcy53aWR0aCAvIDIgKSArIDEsIC05LCB0aGlzLndpZHRoIC0gNCwgMTgsIDB4ZmYwMDAwICk7XHJcblxyXG4gICAgc3ByLmFkZENoaWxkKCBiYWNrMSApO1xyXG4gICAgc3ByLmFkZENoaWxkKCBiYWNrMiApO1xyXG4gICAgY29uc3QgdDEgPSBuZXcgVGV4dEZpZWxkKCBudWxsICwgaXRlbS50ZXh0ICk7XHJcblxyXG4gICAgdDEuc2V0UG9zaXRpb24oIE1hdGguZmxvb3IoIC10MS5nZXRXaWR0aCgpIC8gMiApLCBNYXRoLmZsb29yKCAtdDEuZ2V0SGVpZ2h0KCkgLyAyICsgRm9udC5nZXREZWZhdWx0KCkuZ2V0QXNjZW5kZXIoKSApICk7XHJcbiAgICB0MS5zZXRUZXh0Q29sb3IoIDB4ZmZmZmZmICk7XHJcbiAgICBzcHIuYWRkQ2hpbGQoIHQxICk7XHJcblxyXG4gICAgcmV0dXJuIFtzcHIsIG51bGwgLCAyMF07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAdGhpcyBMaXN0Vmlld1xyXG4gKlxyXG4gKiBAcGFyYW0ge251bWJlcn0geVxyXG4gKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0Q2xpcHBlZFkoIHkgKSB7XHJcbiAgICBpZiAoIHRoaXMuYWxpZ24gPT0gXCJ0b3BcIiApIHtcclxuICAgICAgICBpZiAoIHkgPCB0aGlzLnRvcFBvc2l0aW9uICkge1xyXG4gICAgICAgICAgICBpZiAoIHRoaXMuaXRlbUhlaWdodCA8IHRoaXMuaGVpZ2h0ICkge1xyXG4gICAgICAgICAgICAgICAgeSA9IHRoaXMudG9wUG9zaXRpb247XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIHkgKyB0aGlzLml0ZW1IZWlnaHQgPCB0aGlzLmhlaWdodCApIHtcclxuICAgICAgICAgICAgICAgIHkgPSB0aGlzLmhlaWdodCAtIHRoaXMuaXRlbUhlaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICggdGhpcy5pdGVtSGVpZ2h0IDwgdGhpcy5oZWlnaHQgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHkgKyB0aGlzLml0ZW1IZWlnaHQgPiAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHkgPSB0aGlzLnRvcFBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLmhlaWdodCA8IHkgKyB0aGlzLml0ZW1IZWlnaHQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeSA9IHRoaXMudG9wUG9zaXRpb247XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKCB0aGlzLmFsaWduID09IFwiYm90dG9tXCIgKSB7XHJcbiAgICAgICAgaWYgKCB5ICsgdGhpcy5pdGVtSGVpZ2h0ID4gdGhpcy50b3BQb3NpdGlvbiArIHRoaXMuaGVpZ2h0ICkge1xyXG4gICAgICAgICAgICAvLyDtlZjri6gg7JWE656Y66GcIOuTpOyWtOqwhCDqsr3smrBcclxuICAgICAgICAgICAgaWYgKCB0aGlzLml0ZW1IZWlnaHQgPCB0aGlzLmhlaWdodCApIHtcclxuICAgICAgICAgICAgICAgIHkgPSB0aGlzLmhlaWdodCAtIHRoaXMuaXRlbUhlaWdodCAtIDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIHkgPiAwICkge1xyXG4gICAgICAgICAgICAgICAgeSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIHRoaXMuaXRlbUhlaWdodCA8IHRoaXMuaGVpZ2h0ICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCB5ICsgdGhpcy5pdGVtSGVpZ2h0IDwgdGhpcy5oZWlnaHQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeSA9IHRoaXMuaGVpZ2h0IC0gdGhpcy5pdGVtSGVpZ2h0IC0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICggeSArIHRoaXMuaXRlbUhlaWdodCA8IHRoaXMudG9wUG9zaXRpb24gKyB0aGlzLmhlaWdodCApIHtcclxuICAgICAgICAgICAgICAgICAgICB5ID0gdGhpcy5oZWlnaHQgLSB0aGlzLml0ZW1IZWlnaHQgLSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB5O1xyXG59XHJcblxyXG4vKipcclxuICogQHRoaXMgTGlzdFZpZXdcclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ9IGluZGV4XHJcbiAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gKi9cclxuZnVuY3Rpb24gZXhpc3RJdGVtU3ByaXRlKCBpbmRleCApIHtcclxuICAgIGlmICggaW5kZXggPj0gdGhpcy5wYXJlbnRTcHJpdGUuZ2V0TnVtQ2hpbGRyZW4oKSAgfHwgaW5kZXggPCAwICkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEB0aGlzIExpc3RWaWV3XHJcbiAqXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleFxyXG4gKiBAcmV0dXJucyB7W2Jvb2xlYW4sb2JqZWN0P119XHJcbiAqL1xyXG5mdW5jdGlvbiBpc0l0ZW1WaXNpYmxlKCBpbmRleCApIHtcclxuICAgIGlmICggIWV4aXN0SXRlbVNwcml0ZS5jYWxsKCB0aGlzLCBpbmRleCApIHx8IGluZGV4ID49IHRoaXMucGFyZW50U3ByaXRlLmdldE51bUNoaWxkcmVuKCkgKSB7XHJcbiAgICAgICAgcmV0dXJuIFtmYWxzZSwgbnVsbF07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaXRlbVNwcml0ZSA9IHRoaXMucGFyZW50U3ByaXRlLmdldENoaWxkQXQoIGluZGV4ICk7XHJcbiAgICBjb25zdCBoZWlnaHQgPSBpdGVtU3ByaXRlLl9oZWlnaHQgIT0gbnVsbCA/IGl0ZW1TcHJpdGUuX2hlaWdodCA6IGl0ZW1TcHJpdGUuZ2V0SGVpZ2h0KCk7XHJcbiAgICBsZXQgeSwgaXNWaXNpYmxlO1xyXG4gICAgbGV0IHRvcCA9IDAgKyB0aGlzLmN1dE9mZnNldFRvcDtcclxuICAgIGxldCBib3R0b20gPSB0aGlzLmhlaWdodCArIHRoaXMuY3V0T2Zmc2V0Qm90dG9tO1xyXG5cclxuICAgIGlmICggdGhpcy5jbGlwICkge1xyXG4gICAgICAgIHRvcCA9IHRoaXMuY2xpcC50b3AgIT0gbnVsbCA/IHRoaXMuY2xpcC50b3AgOiB0b3A7XHJcbiAgICAgICAgYm90dG9tID0gdGhpcy5jbGlwLmJvdHRvbSAhPSBudWxsID8gdGhpcy5jbGlwLmJvdHRvbSA6IGJvdHRvbTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIHRoaXMuZG9udEhpZGUgKSB7XHJcbiAgICAgICAgaXNWaXNpYmxlID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgeSA9IGl0ZW1TcHJpdGUuZ2V0WSgpICsgdGhpcy5wYXJlbnRTcHJpdGUuZ2V0WSgpO1xyXG4gICAgICAgIGlzVmlzaWJsZSA9IHkgKyBoZWlnaHQgLyAyID4gdG9wICYmIHkgLSBoZWlnaHQgLyAyIDwgYm90dG9tO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBbaXNWaXNpYmxlLCBpdGVtU3ByaXRlXTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEB0aGlzIExpc3RWaWV3XHJcbiAqXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBpXHJcbiAqIEBwYXJhbSB7Kn0gdlxyXG4gKiBAcGFyYW0geyp9IG9sZFRhYmxlXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVDaGlsZFNwcml0ZSggaSwgdiwgb2xkVGFibGUgKSB7XHJcbiAgICAvLyBUT0RPOiDrrZDrrZDrpbwgdGhpcyDsnZgg67OA7IiY66GcIOu5vOyVvO2VmOuCmFxyXG4gICAgbGV0IHkgPSB0aGlzLnkxO1xyXG4gICAgLy9sZXQgY29sID0gMTtcclxuICAgIGxldCBzcHI7XHJcbiAgICAvLyDsiqTtlITrnbzsnbTtirgg7J6s7IKs7JqpXHJcbiAgICBsZXQgY3VzdG9tV2lkdGgsIGN1c3RvbUhlaWdodDtcclxuXHJcbiAgICBpZiAoIG9sZFRhYmxlICkge1xyXG4gICAgICAgIC8vbG9nKExvZy5VSSwgdi50ZXh0LG9sZFRhYmxlW3ZdLFwi7J6s7Zmc7JqpXCIpO1xyXG4gICAgICAgIHNwciA9IG9sZFRhYmxlW3ZdO1xyXG4gICAgICAgIFtjdXN0b21XaWR0aCwgY3VzdG9tSGVpZ2h0XSA9IFtzcHIuXyQkY3VzdG9tV2lkdGgsIHNwci5fJCRjdXN0b21IZWlnaHRdO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggc3ByICkge1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBbc3ByLCBjdXN0b21XaWR0aCwgY3VzdG9tSGVpZ2h0XSA9IHRoaXMuc3ByaXRlRnVuYyggdGhpcyx2LCBpLCB0aGlzLm93bmVyICk7XHJcbiAgICAgICAgc3ByLl8kJGN1c3RvbVdpZHRoID0gIGN1c3RvbVdpZHRoICAhPSBudWxsID8gIGN1c3RvbVdpZHRoICA6IHNwci5fJCRjdXN0b21XaWR0aDtcclxuICAgICAgICBzcHIuXyQkY3VzdG9tSGVpZ2h0ID0gIGN1c3RvbUhlaWdodCAgIT0gbnVsbCA/ICBjdXN0b21IZWlnaHQgIDogc3ByLl8kJGN1c3RvbUhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICB2LnRhcmdldFBvc1kgPSB5O1xyXG4gICAgY29uc3QgaCA9ICBjdXN0b21IZWlnaHQgICE9IG51bGwgPyAgY3VzdG9tSGVpZ2h0ICA6IHNwci5nZXRIZWlnaHQoICk7XHJcbiAgICBjb25zdCB3ID0gIGN1c3RvbVdpZHRoICAhPSBudWxsID8gIGN1c3RvbVdpZHRoICA6IHNwci5nZXRXaWR0aCggKTtcclxuXHJcbiAgICBpZiAoIGkgPT0gMCAmJiB0aGlzLnBhcmFtcy5wdWxsVG9SZWZyZXNoICkge1xyXG4gICAgICAgIHRoaXMucHVsbExlbmd0aCA9IGggKyB0aGlzLnBhcmFtcy5wYWRkaW5nOy8vICogMi41OyAtLSDsobDquIjrp4wg64u56rKo64+EIOumrO2UhOugiOyLnOqwgCDsnbzslrTrgpjshJwg7KKAIOuNlCDripjroKTrhpPsnYwgYnkg7IS466+47L2c66Gg66eoXHJcbiAgICAgICAgeSA9IHkgLSB0aGlzLnB1bGxMZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCAhIHRoaXMuYW5pbWF0aW9uRnVuYyApIHtcclxuICAgICAgICBzcHIuc2V0UG9zaXRpb24oIHRoaXMud2lkdGggLyAyICsgKCBzcHIuZ2V0V2lkdGgoKSAtIHcgKSAvIDIsIHkgKyBNYXRoLmZsb29yKCBoIC8gMiApICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNwci5zZXRQb3NpdGlvbiggdGhpcy53aWR0aCAvIDIgKyAoIHNwci5nZXRXaWR0aCgpIC0gdyApIC8gMiwgeSArIE1hdGguZmxvb3IoIGggLyAyICkgKTtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbkZ1bmMoIHRoaXMsIHNwciwgaSApO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucGFyZW50U3ByaXRlLmFkZENoaWxkKCBzcHIgKTtcclxuXHJcbiAgICBpZiAoICEgc3ByLl9za2lwTGluZUZlZWQgfHwgaSA9PSB0aGlzLml0ZW1zLmxlbmd0aCAtIDEgKSB7XHJcbiAgICAgICAgdGhpcy55MSA9IHRoaXMueTEgKyBoICsgdGhpcy5wYXJhbXMucGFkZGluZztcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLml0ZW1zW2ldLnNwcml0ZSA9IHNwcjtcclxuICAgIHNwci5zZXRWaXNpYmxlKCBmYWxzZSApO1xyXG59XHJcblxyXG4vKipcclxuICogQHRoaXMgTGlzdFZpZXdcclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0XHJcbiAqIEBwYXJhbSB7Kn0gb2xkVGFibGVcclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZUNoaWxkU3ByaXRlcyggc3RhcnQsIG9sZFRhYmxlICkge1xyXG4gICAgaWYgKCB0aGlzLml0ZW1zID09IG51bGwgfHwgdGhpcy5pdGVtcy5sZW5ndGggPT0gMCApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnQgPSBzdGFydCB8fCAwO1xyXG5cclxuICAgIGZvciAoIGxldCBpID0gc3RhcnQ7IGkgPCB0aGlzLml0ZW1zLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICAgIGNvbnN0IHYgPSB0aGlzLml0ZW1zW2ldO1xyXG5cclxuICAgICAgICBpZiAoICFleGlzdEl0ZW1TcHJpdGUuY2FsbCggdGhpcywgaSApICkge1xyXG4gICAgICAgICAgICBjcmVhdGVDaGlsZFNwcml0ZS5jYWxsKCB0aGlzLCBpLCB2LCBvbGRUYWJsZSApO1xyXG5cclxuICAgICAgICAgICAgaWYgKCB0aGlzLnNwckR5bmFtaWMgIT0gbnVsbCApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXRlbUhlaWdodCA9IE1hdGgubWF4KCB0aGlzLnkxLCB0aGlzLnkyICkgLSB0aGlzLnBhcmFtcy5wYWRkaW5nIC0gdGhpcy5wYXJhbXMudG9wTWFyZ2luO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggdGhpcy5pdGVtSGVpZ2h0ID4gdGhpcy5oZWlnaHQgLSB0aGlzLnRhcmdldFBvc1kgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAdGhpcyBMaXN0Vmlld1xyXG4gKlxyXG4gKi9cclxuZnVuY3Rpb24gaW52YWxpZGF0ZVZpc2libGUoKSB7XHJcbiAgICBpZiAoIHRoaXMubG93ZXJib3VuZCAmJiB0aGlzLnVwcGVyYm91bmQgKSB7XHJcbiAgICAgICAgaWYgKCBpc0l0ZW1WaXNpYmxlLmNhbGwoIHRoaXMsIHRoaXMubG93ZXJib3VuZCApICYmIGlzSXRlbVZpc2libGUuY2FsbCggdGhpcywgdGhpcy51cHBlcmJvdW5kICkgJiZcclxuXHRcdFx0IWlzSXRlbVZpc2libGUuY2FsbCggdGhpcywgdGhpcy5sb3dlcmJvdW5kIC0gMSApICYmXHJcblx0XHRcdCFpc0l0ZW1WaXNpYmxlLmNhbGwoIHRoaXMsIHRoaXMudXBwZXJib3VuZCArIDEgKSApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmxvd2VyYm91bmQgPSBudWxsO1xyXG4gICAgdGhpcy51cHBlcmJvdW5kID0gbnVsbDtcclxuXHJcbiAgICBpZiAoIHRoaXMuaXRlbXMgKSB7XHJcbiAgICAgICAgZm9yICggY29uc3QgaSBpbiB0aGlzLml0ZW1zICkge1xyXG4gICAgICAgICAgICBjb25zdCB2ID0gdGhpcy5pdGVtc1tpXTtcclxuXHJcbiAgICAgICAgICAgIGlmICggdGhpcy5zcHJEeW5hbWljICE9IG51bGwgJiYgIWV4aXN0SXRlbVNwcml0ZS5jYWxsKCB0aGlzLCBpICkgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMudXBwZXJib3VuZCApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB1cHBlcmJvdW5kIOqwgCDshKTsoJXrkJwg7J207ZuE7JeQ64qUIOumrOyKpO2KuCDtla3rqqnsnYQg66eM65Ok7KeAIOyViuuKlOuLpCjrs7TsnbTsp4Ag7JWK64qUIOu2gOu2hOydtOuvgOuhnCDsg53shLHtlZjsp4Ag7JWK64qU64ukKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyDrs7TsnbTripQg67aA67aE7JeQIOuMgO2VtOyEnCDrpqzsiqTtirgg7ZWt66qpIOy2lOqwgCDsg53shLFcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUNoaWxkU3ByaXRlcy5jYWxsKCB0aGlzLCBpICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IFtpc1Zpc2libGUsIGl0ZW1TcHJpdGVdID0gaXNJdGVtVmlzaWJsZS5jYWxsKCB0aGlzLCBpICk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIGl0ZW1TcHJpdGUgIT0gbnVsbCAmJiBpdGVtU3ByaXRlLmlzVmlzaWJsZSgpICE9IGlzVmlzaWJsZSApIHtcclxuICAgICAgICAgICAgICAgIC8vbG9nKHYudGV4dCxcIuuztOydtOq4sFwiLGlzVmlzaWJsZSk7XHJcbiAgICAgICAgICAgICAgICBpdGVtU3ByaXRlLnNldFZpc2libGUoIGlzVmlzaWJsZSApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBFdmVudCggXCJzZXRWaXNpYmxlXCIgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBlLnZpc2libGUgPSBpc1Zpc2libGU7XHJcbiAgICAgICAgICAgICAgICBpdGVtU3ByaXRlLmRpc3BhdGNoRXZlbnQoIGUgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCB0aGlzLmxvd2VyYm91bmQgIT0gbnVsbCApIHtcclxuICAgICAgICAgICAgICAgIGlmICggaXNWaXNpYmxlICkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vbG93ZXJib3VuZOuKlCDqsIDsnqUg66i87KCAIOuwnOqyrOuQnCDrs7TsnbTripQg7J24642x7IqkXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLmxvd2VyYm91bmQgIT0gaSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBFdmVudCggXCJtb3ZlZFwiICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLmxvd2VyYm91bmQgPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoIGUgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG93ZXJib3VuZCA9IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIHRoaXMudXBwZXJib3VuZCAhPSBudWxsICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCAhIGlzVmlzaWJsZSApIHtcclxuICAgICAgICAgICAgICAgICAgICAvL3VwcGVyYm91bmTripQg67O07J207KeAIOyViuuKlCDsnbjrjbHsiqQgLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBwZXJib3VuZCA9IHBhcnNlSW50KCBpICkgLSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudXBwZXJib3VuZCA9IHRoaXMudXBwZXJib3VuZCAhPSBudWxsID8gdGhpcy51cHBlcmJvdW5kIDogdGhpcy5pdGVtcy5sZW5ndGg7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAdGhpcyBMaXN0Vmlld1xyXG4gKlxyXG4gKi9cclxuZnVuY3Rpb24gb25FbnRlckZyYW1lKCkge1xyXG4gICAgLy9pZiAodGhpcyAubG9ja2VkKSB7IHJldHVybiB9XHJcbiAgICBsZXQgZHN0WTtcclxuXHJcbiAgICBpZiAoIHRoaXMubG9ja2VkID09IHRydWUgKSB7XHJcbiAgICAgICAgZHN0WSA9IHRoaXMucHVsbExlbmd0aCB8fCAwO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBkc3RZID0gdGhpcy50YXJnZXRQb3NZO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggdGhpcy5kcmFnICkge1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCB5ID0gKCBkc3RZICogMC41ICsgdGhpcy5jdXJyZW50UG9zWSAqIDQuNSApIC8gNTtcclxuICAgICAgICBjb25zdCBkZWx0YSA9IE1hdGguYWJzKCB0aGlzLmN1cnJlbnRQb3NZIC0geSApO1xyXG5cclxuICAgICAgICBpZiAoIGRlbHRhID4gMC4xICkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQb3NZID0geTtcclxuICAgICAgICAgICAgdGhpcy5wYXJlbnRTcHJpdGUuc2V0WSggeSApO1xyXG4gICAgICAgICAgICBpbnZhbGlkYXRlVmlzaWJsZS5jYWxsKCB0aGlzICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wYXJlbnRTcHJpdGUuc2V0WSggdGhpcy50YXJnZXRQb3NZICk7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lciggRXZlbnQuRU5URVJfRlJBTUUsIG9uRW50ZXJGcmFtZSwgdGhpcyApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9lLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIHRoaXMuc2V0QmFja2dyb3VuZFkoIHkgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBlID0gbmV3IEV2ZW50KCBcIm1vdmVQb3NpdGlvblwiICk7XHJcblxyXG4gICAgZS55ID0gdGhpcy5wYXJlbnRTcHJpdGUuZ2V0WSgpO1xyXG4gICAgZS5iYWNrZ3JvdW5kWSA9IGUueSAqIDAuOTtcclxuICAgIHRoaXMuZGlzcGF0Y2hFdmVudCggZSApO1xyXG59XHJcblxyXG4vKipcclxuICogQHRoaXMgTGlzdFZpZXdcclxuICpcclxuICogQHBhcmFtIHsqfSBlXHJcbiAqL1xyXG5mdW5jdGlvbiBvblBvaW50ZXJEb3duKCBlICkge1xyXG4gICAgLy9sb2coTG9nLlVJLCBcInBvaW50ZXJEb3duOlwiLCB0aGlzIC5sb2NrZWQsIHRoaXMgLmlzVmlzaWJsZSgpKTtcclxuXHJcbiAgICBpZiAoICEgdGhpcy5sb2NrZWQgJiYgdGhpcy5pc1Zpc2libGUoKSApIHtcclxuICAgICAgICBjb25zdCB7IHg6IGV4LCB5OiBleSB9ID0gdGhpcy5nbG9iYWxUb0xvY2FsKCBlLngsIGUueSApO1xyXG4gICAgICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpcy5oaXRBcmVhLmdsb2JhbFRvTG9jYWwoIGUueCwgZS55ICk7XHJcbiAgICAgICAgY29uc3QgW3csIGhdID0gW3RoaXMuaGl0QXJlYS5nZXRXaWR0aCgpLCB0aGlzLmhpdEFyZWEuZ2V0SGVpZ2h0KCldO1xyXG5cclxuICAgICAgICAvLyDsobDsnpHqsJAg7KKL6rKMIO2VtOyjvOugpOqzoCDslb3qsIQg7Jes7Jyg7J6I6rKMIO2VtOykjC5cclxuICAgICAgICAvL2lmICh0aGlzIC5oaXRBcmVhLmhpdFRlc3RQb2ludChlLngsIGUueSkpIHtcclxuICAgICAgICBjb25zdCBtaW5YID0gTWF0aC5taW4oIDAsICggdGhpcy53aWR0aCAtIHcgKSAvIDIgKTtcclxuICAgICAgICBsZXQgbWluWTtcclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLnBhcmFtcy5iYWNrZ3JvdW5kICkge1xyXG4gICAgICAgICAgICBtaW5ZID0gdGhpcy5jdXJyZW50UG9zWSAqIDAuOSAtIDEwOy8vKHRoaXMgLnRvcFBvc2l0aW9uIHx8IDEwKSAtIDEwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG1pblkgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCB4ID4gbWluWCAmJiB4IDwgdyAmJiB5ID4gbWluWSAtIHRoaXMucGFyYW1zLm1hcmdpbiAmJiB5IDwgaCArIHRoaXMucGFyYW1zLm1hcmdpbiApIHtcclxuICAgICAgICAgICAgbGV0IHNlbGVjdGVkSW5kZXg7XHJcblxyXG4gICAgICAgICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCB0aGlzLnBhcmVudFNwcml0ZS5nZXROdW1DaGlsZHJlbigpOyBpKysgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcHIgPSB0aGlzLnBhcmVudFNwcml0ZS5nZXRDaGlsZEF0KCBpICk7XHJcbiAgICAgICAgICAgICAgICAvL2xvZyhMb2cuVUksIGksIGUueCwgZS55LCBzcHIuaGl0VGVzdFBvaW50KGUueCwgZS55KSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBzcHIuaGl0VGVzdFBvaW50KCBlLngsIGUueSApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkSW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNsaWNrSW5kZXggPSBzZWxlY3RlZEluZGV4O1xyXG4gICAgICAgICAgICAvKlxyXG5cdFx0XHRpZiAoISBzZWxlY3RlZEluZGV4KSB7XHJcblx0XHRcdFxyXG5cdFx0XHRcdGxldCBldmVudCA9IG5ldyBFdmVudChcImNsb3NlXCIpO1xyXG5cdFx0XHRcdGV2ZW50LnggPSBlLng7XHJcblx0XHRcdFx0ZXZlbnQueSA9IGUueTtcclxuXHRcdFx0XHR0aGlzIC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuXHRcdFx0ZW5kKi9cclxuICAgICAgICAgICAgW3RoaXMuc3RhcnRQb3NYLCB0aGlzLnN0YXJ0UG9zWV0gPSBbZXgsIGV5XTtcclxuICAgICAgICAgICAgdGhpcy5vcmlnaW5hbFBvc1kgPSB0aGlzLnBhcmVudFNwcml0ZS5nZXRZKCk7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdFBvc1kgPSBleTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50UG9zWSA9IHRoaXMub3JpZ2luYWxQb3NZICsgZXkgLSB0aGlzLnN0YXJ0UG9zWTtcclxuICAgICAgICAgICAgdGhpcy52ZWxZID0gMDtcclxuICAgICAgICAgICAgdGhpcy5wb2ludGVyVGltZSA9IFRpbWVyLm5vdygpO1xyXG4gICAgICAgICAgICB0aGlzLmRyYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmlzQ2xpY2sgPSB0cnVlO1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEV2ZW50KCBcImNsb3NlXCIgKTtcclxuXHJcbiAgICAgICAgICAgIGV2ZW50LnggPSBlLng7XHJcbiAgICAgICAgICAgIGV2ZW50LnkgPSBlLnk7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCggZXZlbnQgKTtcclxuICAgICAgICAgICAgLypcclxuXHRcdFx0aWYgKHRoaXMgLnBhcmFtcy5tb3JlVGhhbk9uZSA9PSBudWxsICkge1xyXG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0Ki9cclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAdGhpcyBMaXN0Vmlld1xyXG4gKlxyXG4gKiBAcGFyYW0geyp9IGVcclxuICovXHJcbmZ1bmN0aW9uIG9uUG9pbnRlclVwKCBlICkge1xyXG4gICAgaWYgKCB0aGlzLmRyYWcgJiYgdGhpcy5pc1Zpc2libGUoKSApIHtcclxuICAgICAgICBjb25zdCB7IHk6IGV5IH0gPSB0aGlzLmdsb2JhbFRvTG9jYWwoIGUueCwgZS55ICk7XHJcblxyXG4gICAgICAgIHRoaXMuZHJhZyA9IGZhbHNlO1xyXG4gICAgICAgIGNvbnN0IGRlbHRhVGltZSA9IFRpbWVyLm5vdygpIC0gdGhpcy5wb2ludGVyVGltZTsgIC8vIOyLnOqwhOydtCDquLjsiJjroZ0g7LKc7LKc7Z6IIOybgOyngeyduCDqsoNcclxuXHJcbiAgICAgICAgdGhpcy52ZWxZID0gdGhpcy52ZWxZIC8gTWF0aC5wb3coIDMsICggZGVsdGFUaW1lIC8gMTAwMCAqIDMwICkgKTtcclxuICAgICAgICBjb25zdCBkZWx0YVkgPSBleSAtIHRoaXMuc3RhcnRQb3NZO1xyXG4gICAgICAgIGNvbnN0IGRlbHRhWTIgPSB0aGlzLnZlbFkgKiAxMDtcclxuXHJcbiAgICAgICAgdGhpcy50YXJnZXRQb3NZID0gZ2V0Q2xpcHBlZFkuY2FsbCggdGhpcywgdGhpcy5vcmlnaW5hbFBvc1kgKyBkZWx0YVkgKyBkZWx0YVkyICk7XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5wdWxsZWQgKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCBcIuuLueqyvOydjFwiICk7XHJcbiAgICAgICAgICAgIHRoaXMucHVsbGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgRXZlbnQoIFwicmVmcmVzaFwiICk7XHJcblxyXG4gICAgICAgICAgICBlLnNwcml0ZSA9IHRoaXMucGFyZW50U3ByaXRlLmdldENoaWxkQXQoIDEgKTtcclxuICAgICAgICAgICAgZS5pdGVtID0gdGhpcy5pdGVtc1sxXTtcclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCBlICk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TG9ja2VkKCB0cnVlICk7XHJcbiAgICAgICAgfSBlbHNlIGlmICggdGhpcy5pc0NsaWNrICYmIHRoaXMuaXRlbVRvdWNoRW5hYmxlICkge1xyXG4gICAgICAgICAgICAvL2ZvciAobGV0IGk9MTtpPD10aGlzIDtpKyspIHtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLmNsaWNrSW5kZXggPT0gbnVsbCApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEV2ZW50KCBcImNsb3NlXCIgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBldmVudC54ID0gZS54O1xyXG4gICAgICAgICAgICAgICAgZXZlbnQueSA9IGUueTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCggZXZlbnQgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHRoaXMuaXRlbXMubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9sZXQgc3ByID0gdGhpcyAucGFyZW50U3ByaXRlLmdldENoaWxkQXQoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ByID0gdGhpcy5pdGVtc1tpXS5zcHJpdGU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggc3ByICYmIHNwci5oaXRUZXN0UG9pbnQoIGUueCwgZS55ICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBleCwgZXkgPSB0aGlzLmdsb2JhbFRvTG9jYWwoIGUueCwgZS55ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IF9lID0gbmV3IEV2ZW50KCBcImNsaWNrXCIgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZS5kYXRhID0ge2luZGV4PWksaXRlbT10aGlzIC5pdGVtc1tpXX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2UuaW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZS5pdGVtID0gdGhpcy5pdGVtc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2UuaXRlbS5fdGFyZ2V0ID0gc3ByO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZS54ID0gZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9lLnkgPSBleTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9sb2coTG9nLlVJLCBlLmluZGV4LGUuaXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCggX2UgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoIEV2ZW50LkVOVEVSX0ZSQU1FLCBvbkVudGVyRnJhbWUsIHRoaXMgKTtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vL+uniOyasOyKpCDrk5zrnpjqt7gg64+Z7J6R7J2EIOyggeuLue2eiCDrtpnsl6zrhKPslrTshJwg7Zyg7J20IOuPmeyeke2VmOqyjCDsspjrpqztlaguXHJcbi8qKlxyXG4gKiBAdGhpcyBMaXN0Vmlld1xyXG4gKlxyXG4gKiBAcGFyYW0geyp9IGVcclxuICogQHJldHVybnNcclxuICovXHJcbmZ1bmN0aW9uIG9uUG9pbnRlcldoZWVsKCBlICkge1xyXG4gICAgaWYgKCB0aGlzLmRyYWcgKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggIXRoaXMuaXNWaXNpYmxlKCkgKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB7IHg6IGV4LCB5OiBleSB9ID0gdGhpcy5nbG9iYWxUb0xvY2FsKCBlLngsIGUueSApO1xyXG4gICAgLy9mcm9tIHBvaW50ZXIgZG93biwg7Z6I7Yq4IOyYgeyXrSDqsoDsgqwg67aA67aEXHJcbiAgICBsZXQgeyB4LCB5IH0gPSB0aGlzLmhpdEFyZWEuZ2xvYmFsVG9Mb2NhbCggZS54LCBlLnkgKTtcclxuICAgIGNvbnN0IFt3LCBoXSA9IFt0aGlzLmhpdEFyZWEuZ2V0V2lkdGgoKSwgdGhpcyAuaGl0QXJlYS5nZXRIZWlnaHQoKV07XHJcblxyXG4gICAgLy8g7KGw7J6R6rCQIOyii+qyjCDtlbTso7zroKTqs6Ag7JW96rCEIOyXrOycoOyeiOqyjCDtlbTspIwuXHJcbiAgICBjb25zdCBtaW5YID0gTWF0aC5taW4oIDAsICggdGhpcy53aWR0aCAtIHcgKSAvIDIgKTtcclxuICAgIGxldCBtaW5ZO1xyXG5cclxuICAgIGlmICggdGhpcy5wYXJhbXMuYmFja2dyb3VuZCApIHtcclxuICAgICAgICBtaW5ZID0gdGhpcy5jdXJyZW50UG9zWSAqIDAuOSAtIDEwO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBtaW5ZID0gMDtcclxuICAgIH1cclxuXHJcbiAgICAvL+2eiO2KuCDsmIHsl60g6rKA7IKsXHJcbiAgICBpZiAoICEoIHggPiBtaW5YICYmIHggPCB3ICYmIHkgPiBtaW5ZIC0gdGhpcy5wYXJhbXMubWFyZ2luICYmIHkgPCBoICsgdGhpcy5wYXJhbXMubWFyZ2luICkgKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vZnJvbSBwb2ludGVyIGRvd24sIOuniOyasOyKpCDri6TsmrTsi5wg7LKY66asXHJcbiAgICBbdGhpcy5zdGFydFBvc1gsIHRoaXMuc3RhcnRQb3NZXSA9IFtleCwgZXldO1xyXG4gICAgdGhpcy5vcmlnaW5hbFBvc1kgPSB0aGlzLnBhcmVudFNwcml0ZS5nZXRZKCk7XHJcbiAgICB0aGlzLmxhc3RQb3NZID0gZXk7XHJcbiAgICB0aGlzLmN1cnJlbnRQb3NZID0gdGhpcy5vcmlnaW5hbFBvc1kgKyBleSAtIHRoaXMuc3RhcnRQb3NZO1xyXG4gICAgdGhpcy52ZWxZID0gMDtcclxuICAgIHRoaXMucG9pbnRlclRpbWUgPSBUaW1lci5ub3coKTtcclxuICAgIC8vZnJvbSBwb2ludGVyIG1vdmUsIOuTnOuemOq3uCDsspjrpqwg67aA67aEXHJcbiAgICBjb25zdCBXaGVlbFNwZWVkID0gMTsvL+2coCDsho3rj4Qg7LKY66asIOu2gOu2hFxyXG5cclxuICAgICggeyAgeTogZXkgfSA9IHRoaXMuZ2xvYmFsVG9Mb2NhbCggZS54LCBlLnkgKSApO1xyXG4gICAgeSA9IHRoaXMub3JpZ2luYWxQb3NZICsgZXkgLSB0aGlzLnN0YXJ0UG9zWTtcclxuXHJcbiAgICBpZiAoIHRoaXMucGFyZW50U3ByaXRlLmdldFkoKSAhPSB5ICkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFBvc1kgPSB5O1xyXG4gICAgICAgIHRoaXMucGFyZW50U3ByaXRlLnNldFkoIHkgKTtcclxuICAgICAgICBpbnZhbGlkYXRlVmlzaWJsZS5jYWxsKCB0aGlzICk7XHJcbiAgICAgICAgdGhpcy5zZXRCYWNrZ3JvdW5kWSggeSApO1xyXG4gICAgICAgIGNvbnN0IGUgPSBuZXcgRXZlbnQoIFwibW92ZVBvc2l0aW9uXCIgKTtcclxuXHJcbiAgICAgICAgZS55ID0gdGhpcy5wYXJlbnRTcHJpdGUuZ2V0WSgpO1xyXG4gICAgICAgIGUuYmFja2dyb3VuZFkgPSBlLnkgKiAwLjk7XHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCBlICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy52ZWxZID0gdGhpcy52ZWxZICsgKCBleSAtIHRoaXMubGFzdFBvc1kgKTtcclxuICAgIGxldCBkZWx0YVRpbWUgPSBUaW1lci5ub3coKSAtIHRoaXMucG9pbnRlclRpbWU7ICAvLyDsi5zqsITsnbQg6ri47IiY66GdIOyynOyynO2eiCDsm4Dsp4Hsnbgg6rKDXHJcblxyXG4gICAgZGVsdGFUaW1lID0gTWF0aC5tYXgoIGRlbHRhVGltZSwgMTAwICk7XHJcbiAgICB0aGlzLnZlbFkgPSB0aGlzLnZlbFkgLyBNYXRoLnBvdyggMywgKCBkZWx0YVRpbWUgLyAxMDAwICogMzAgKSApO1xyXG4gICAgdGhpcy5wb2ludGVyVGltZSA9IFRpbWVyLm5vdygpO1xyXG4gICAgLy9mcm9tIHBvaW50ZXIgdXAsIOuTnOuemOq3uCDtm4Qg66eI7Jqw7IqkIOyXhe2VmOuKlCDrtoDrtoRcclxuICAgIGNvbnN0IGRlbHRhWSA9IGV5IC0gdGhpcy5zdGFydFBvc1k7XHJcbiAgICBjb25zdCBkZWx0YVkyID0gdGhpcy52ZWxZICogMTA7XHJcblxyXG4gICAgdGhpcy50YXJnZXRQb3NZID0gZ2V0Q2xpcHBlZFkuY2FsbCggdGhpcywgdGhpcy5vcmlnaW5hbFBvc1kgKyBkZWx0YVkgKyBkZWx0YVkyICk7XHJcbiAgICAvL+yVoOuLiOuplOydtOyFmCDsspjrpqxcclxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lciggRXZlbnQuRU5URVJfRlJBTUUsIG9uRW50ZXJGcmFtZSwgdGhpcyApO1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEB0aGlzIExpc3RWaWV3XHJcbiAqXHJcbiAqIEBwYXJhbSB7Kn0gZVxyXG4gKi9cclxuZnVuY3Rpb24gb25Qb2ludGVyTW92ZSggZSApIHtcclxuICAgIGlmICggdGhpcy5kcmFnICYmIHRoaXMuaXNWaXNpYmxlKCkgKSB7XHJcbiAgICAgICAgY29uc3QgeyB4OiBleCwgeTogZXkgfSA9IHRoaXMuZ2xvYmFsVG9Mb2NhbCggZS54LCBlLnkgKTtcclxuICAgICAgICBsZXQgeSA9IHRoaXMub3JpZ2luYWxQb3NZICsgZXkgLSB0aGlzLnN0YXJ0UG9zWTtcclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLnN0aWNrT25Cb3JkZXIgKSB7XHJcbiAgICAgICAgICAgIHkgPSBnZXRDbGlwcGVkWS5jYWxsKCB0aGlzLCB5ICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIHRoaXMucGFyZW50U3ByaXRlLmdldFkoKSAhPSB5ICkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQb3NZID0geTtcclxuICAgICAgICAgICAgdGhpcy5wYXJlbnRTcHJpdGUuc2V0WSggeSApO1xyXG4gICAgICAgICAgICBpbnZhbGlkYXRlVmlzaWJsZS5jYWxsKCB0aGlzICk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QmFja2dyb3VuZFkoIHkgKTtcclxuICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBFdmVudCggXCJtb3ZlUG9zaXRpb25cIiApO1xyXG5cclxuICAgICAgICAgICAgZS55ID0gdGhpcy5wYXJlbnRTcHJpdGUuZ2V0WSgpO1xyXG4gICAgICAgICAgICBlLmJhY2tncm91bmRZID0gZS55ICogMC45O1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoIGUgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudmVsWSA9IHRoaXMudmVsWSArICggZXkgLSB0aGlzLmxhc3RQb3NZICk7XHJcbiAgICAgICAgY29uc3QgZGVsdGFUaW1lID0gVGltZXIubm93KCkgLSB0aGlzLnBvaW50ZXJUaW1lOyAgLy8g7Iuc6rCE7J20IOq4uOyImOuhnSDsspzsspztnogg7JuA7KeB7J24IOqyg1xyXG5cclxuICAgICAgICB0aGlzLnZlbFkgPSB0aGlzLnZlbFkgLyBNYXRoLnBvdyggMywgKCBkZWx0YVRpbWUgKiAzMCApICk7XHJcbiAgICAgICAgdGhpcy5wb2ludGVyVGltZSA9IFRpbWVyLm5vdygpO1xyXG5cclxuICAgICAgICBpZiAoIE1hdGguYWJzKCB0aGlzLnN0YXJ0UG9zWCAtIGV4ICkgPiAxMCB8fCBNYXRoLmFicyggdGhpcy5zdGFydFBvc1kgLSBleSApID4gMTAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNDbGljayA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCAhIHRoaXMucHVsbGVkICYmIHRoaXMucHVsbExlbmd0aCAmJiB0aGlzLnB1bGxMZW5ndGggPD0geSApIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coIFwi64u56riw6riwIOykgOu5hFwiICk7XHJcbiAgICAgICAgICAgIHRoaXMucHVsbGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBFdmVudCggXCJyZWZyZXNoUmVhZHlcIiApO1xyXG5cclxuICAgICAgICAgICAgZS5zcHJpdGUgPSB0aGlzLnBhcmVudFNwcml0ZS5nZXRDaGlsZEF0KCAxICk7XHJcbiAgICAgICAgICAgIGUuaXRlbSA9IHRoaXMuaXRlbXNbMV07XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCggZSApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIHRoaXMucHVsbGVkICYmIHRoaXMucHVsbExlbmd0aCAmJiB5IDwgdGhpcy5wdWxsTGVuZ3RoICkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyggXCLri7nquLDquLAg7Leo7IaMXCIgKTtcclxuICAgICAgICAgICAgdGhpcy5wdWxsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBFdmVudCggXCJyZWZyZXNoQ2FuY2VsXCIgKTtcclxuXHJcbiAgICAgICAgICAgIGUuc3ByaXRlID0gdGhpcy5wYXJlbnRTcHJpdGUuZ2V0Q2hpbGRBdCggMSApO1xyXG4gICAgICAgICAgICBlLml0ZW0gPSB0aGlzLml0ZW1zWzFdO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoIGUgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vbG9nKExvZy5VSSwgdGhpcyAuY3VycmVudFBvc1kpO1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5sYXN0UG9zWSA9IGV5O1xyXG4gICAgfVxyXG59XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8gTGlzdFZpZXcuYWRkKGl0ZW0pO1xyXG4vLyBMaXN0Vmlldy5pbnNlcnQoaXRlbSwgcG9zKTtcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4vKipcclxuICogQHRoaXMgTGlzdFZpZXdcclxuICpcclxuICogQHBhcmFtIHsqfSB2XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBwb3NcclxuICovXHJcbmZ1bmN0aW9uIGluc2VydEl0ZW0oIHYsIHBvcyApIHtcclxuICAgIHBvcyA9IHBvcyAhPSBudWxsID8gcG9zIDogdGhpcy5pdGVtcy5sZW5ndGg7XHJcblxyXG4gICAgaWYgKCB0eXBlb2YgdiA9PSBcIm9iamVjdFwiICkge1xyXG4gICAgICAgIHRoaXMuaXRlbXMuc3BsaWNlKCBwb3MsIDAsIHsgdGV4dDogdlswXSwgZGF0YTogdlsxXSB9ICk7XHJcbiAgICB9IGVsc2UgaWYgKCB0eXBlb2YgdiA9PSBcInN0cmluZ1wiICkge1xyXG4gICAgICAgIHRoaXMuaXRlbXMuc3BsaWNlKCBwb3MsIDAsIHsgdGV4dDogdiB9ICk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGlzdFZpZXcgZXh0ZW5kcyBTcHJpdGUge1xyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyBMaXN0Vmlldy5jb25zdHJ1Y3RvcihpdGVtVGFibGUsIGhlaWdodCwgcGFyYW1zKTtcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKCBpdGVtVGFibGUsIHdpZHRoLCBoZWlnaHQsIHBhcmFtcyApIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHBhcmFtcyA9IHBhcmFtcyAgIT0gbnVsbCA/IHBhcmFtcyAgOiB7fTtcclxuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcclxuICAgICAgICBwYXJhbXMudG9wTWFyZ2luID0gcGFyYW1zLnRvcE1hcmdpbiAhPSBudWxsID8gcGFyYW1zLnRvcE1hcmdpbiA6IDA7XHJcbiAgICAgICAgcGFyYW1zLmJvdHRvbU1hcmdpbiA9IHBhcmFtcy5ib3R0b21NYXJnaW4gICE9IG51bGwgPyBwYXJhbXMuYm90dG9tTWFyZ2luICA6IDA7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQgIT0gbnVsbCA/IGhlaWdodCA6IGFwcGxpY2F0aW9uLmxvZ2ljYWxWaWV3cG9ydC5oZWlnaHQ7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoICE9IG51bGwgPyB3aWR0aCA6IGFwcGxpY2F0aW9uLmxvZ2ljYWxWaWV3cG9ydC53aWR0aDtcclxuICAgICAgICB0aGlzLmRvbnRIaWRlID0gcGFyYW1zLmRvbnRIaWRlO1xyXG4gICAgICAgIHRoaXMubG9ja0NvbHVtbiA9IHBhcmFtcy5sb2NrQ29sdW1uO1xyXG4gICAgICAgIHRoaXMub3duZXIgPSBwYXJhbXMub3duZXI7XHJcbiAgICAgICAgdGhpcy5zcHJEeW5hbWljID0gcGFyYW1zLnNwckR5bmFtaWM7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25GdW5jID0gcGFyYW1zLmFuaW1hdGlvbkZ1bmM7XHJcbiAgICAgICAgdGhpcy5hbGlnbiA9IHBhcmFtcy5hbGlnbiAhPSBudWxsID8gcGFyYW1zLmFsaWduIDogXCJ0b3BcIjtcclxuICAgICAgICB0aGlzLnN0aWNrT25Cb3JkZXIgPSBwYXJhbXMuc3RpY2tPbkJvcmRlcjtcclxuICAgICAgICAvLyDsg4HtlZgg7J6Y66as64qUIOuylOychCDsmLXshYsg7KeA7KCVXHJcbiAgICAgICAgdGhpcy5jdXRPZmZzZXRUb3AgPSBwYXJhbXMuY3V0T2Zmc2V0VG9wICE9IG51bGwgPyBwYXJhbXMuY3V0T2Zmc2V0VG9wIDogMDtcclxuICAgICAgICB0aGlzLmN1dE9mZnNldEJvdHRvbSA9IHBhcmFtcy5jdXRPZmZzZXRCb3R0b20gICE9IG51bGwgPyBwYXJhbXMuY3V0T2Zmc2V0Qm90dG9tICA6IDA7XHJcbiAgICAgICAgdGhpcy50b3BQb3NpdGlvbiA9IDA7XHJcblxyXG4gICAgICAgIC8vIGJhY2tncm91bmQ7XHJcbiAgICAgICAgaWYgKCBwYXJhbXMuYmFja2dyb3VuZCApIHtcclxuICAgICAgICAgICAgdGhpcy50b3BQb3NpdGlvbiA9IHBhcmFtcy5iYWNrZ3JvdW5kLmhlYWRlckhlaWdodDtcclxuICAgICAgICAgICAgdGhpcy5tYWtlQmFja2dyb3VuZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbWFyZ2luID0gdGhpcy5jdXRPZmZzZXRUb3AgKyB0aGlzLmN1dE9mZnNldEJvdHRvbSArIHBhcmFtcy50b3BNYXJnaW4gKyBwYXJhbXMuYm90dG9tTWFyZ2luO1xyXG5cclxuICAgICAgICB0aGlzLnNldEN1c3RvbUJvdW5kcyggMCwgMCwgd2lkdGgsIGhlaWdodCArIG1hcmdpbiApO1xyXG4gICAgICAgIHRoaXMucmVmcmVzaEhpdEFyZWEoKTtcclxuXHJcbiAgICAgICAgLy8g66as7Iqk7Yq47JWE7J207YWc7J20IOydtCDslYTrnpjsl5Ag65Ok7Ja06rCQXHJcbiAgICAgICAgdGhpcy5zb3VuZFRpbWVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMucGFyZW50U3ByaXRlID0gbmV3IFNwcml0ZSgpO1xyXG4gICAgICAgIHRoaXMucGFyZW50U3ByaXRlLnNldFkoIHRoaXMudG9wUG9zaXRpb24gKTtcclxuICAgICAgICB0aGlzLmFkZENoaWxkKCB0aGlzLnBhcmVudFNwcml0ZSApO1xyXG4gICAgICAgIHRoaXMuc3ByaXRlRnVuYyA9IHBhcmFtcy5zcHJpdGVGdW5jICE9IG51bGwgPyBwYXJhbXMuc3ByaXRlRnVuYyA6IGRlZmF1bHRTcHJpdGVGdW5jO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0UG9zWSA9IDA7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50UG9zWSA9IDA7XHJcbiAgICAgICAgcGFyYW1zLnBhZGRpbmcgPSBwYXJhbXMucGFkZGluZyAhPSBudWxsID8gcGFyYW1zLnBhZGRpbmcgOiBJVEVNX1BBRERJTkc7XHJcbiAgICAgICAgLy9wYXJhbXMudG9wTWFyZ2luID0gcGFyYW1zLnRvcE1hcmdpbiB8fCBMSVNUX1RPUF9NQVJHSU47XHJcbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuc2V0SXRlbXMoIGl0ZW1UYWJsZSApO1xyXG4gICAgICAgIHRoaXMuaXRlbVRvdWNoRW5hYmxlID0gdHJ1ZTtcclxuICAgICAgICBwYXJhbXMubWFyZ2luID0gIHBhcmFtcy5tYXJnaW4gIT0gbnVsbCA/ICBwYXJhbXMubWFyZ2luIDogMDtcclxuICAgICAgICB0aGlzLmNsaXAgPSBwYXJhbXMuY2xpcDtcclxuICAgICAgICB0aGlzLnVwZGF0ZUNsaXAoKTtcclxuICAgICAgICB0aGlzLnB1bGxMZW5ndGggPSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQ2xpcCgpIHtcclxuICAgICAgICBpZiAoIHRoaXMuY2xpcCApIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRDbGlwKCAwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gTGlzdFZpZXcuc2V0TG9ja2VkKHYpO1xyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgc2V0TG9ja2VkKCB2ICkge1xyXG4gICAgICAgIGlmICggdGhpcy5sb2NrZWQgJiYgdiA9PSBudWxsICkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQb3NZID0gdGhpcy5wdWxsTGVuZ3RoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5sb2NrZWQgPSB2O1xyXG4gICAgfVxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gTGlzdFZpZXcucmVmcmVzaEhpdEFyZWEoKTtcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHJlZnJlc2hIaXRBcmVhKCkge1xyXG4gICAgICAgIGxldCBtO1xyXG5cclxuICAgICAgICBpZiAoIHRoaXMucGFyYW1zLmZpdEhpdEFyZWFUb1NjcmVlbldpZHRoICkge1xyXG4gICAgICAgICAgICBtID0gTWVzaC5jcmVhdGVCb3goIGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMubGVmdCwgMCwgYXBwbGljYXRpb24ubG9naWNhbFJlbmRlckJvdW5kcy53aWR0aCwgdGhpcy5oZWlnaHQsIDB4ZmYwMDAwICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbSA9IE1lc2guY3JlYXRlQm94KCAwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCwgMHhmZjAwMDAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG0uc2V0QWxwaGEoIDAuMiApO1xyXG4gICAgICAgIG0uc2V0VmlzaWJsZSggZmFsc2UgKTtcclxuICAgICAgICB0aGlzLmFkZENoaWxkKCBtICk7XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5oaXRBcmVhICkge1xyXG4gICAgICAgICAgICB0aGlzLmhpdEFyZWEucmVtb3ZlRnJvbVBhcmVudCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5oaXRBcmVhID0gbTtcclxuICAgICAgICB0aGlzLmhpdEFyZWEuYWRkRXZlbnRMaXN0ZW5lciggRXZlbnQuUE9JTlRFUl9ET1dOLCBvblBvaW50ZXJEb3duLCB0aGlzICk7XHJcbiAgICAgICAgdGhpcy5oaXRBcmVhLmFkZEV2ZW50TGlzdGVuZXIoIEV2ZW50LlBPSU5URVJfVVAsIG9uUG9pbnRlclVwLCB0aGlzICk7XHJcbiAgICAgICAgdGhpcy5oaXRBcmVhLmFkZEV2ZW50TGlzdGVuZXIoIEV2ZW50LlBPSU5URVJfTU9WRSwgb25Qb2ludGVyTW92ZSwgdGhpcyApO1xyXG4gICAgICAgIC8vdGhpcy5oaXRBcmVhLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnQuUE9JTlRFUl9XSEVFTCwgb25Qb2ludGVyV2hlZWwsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gTGlzdFZpZXcuc2V0Q3VyWSh5LCBzdG9wU2Nyb2xsKTtcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcj19IFt5PW51bGxdXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtzdG9wU2Nyb2xsPWZhbHNlXVxyXG4gICAgICogQG1lbWJlcm9mIExpc3RWaWV3XHJcbiAgICAgKi9cclxuICAgIHNldEN1clkoIHkgPSBudWxsLCBzdG9wU2Nyb2xsID0gZmFsc2UgKSB7XHJcbiAgICAgICAgaWYgKCB5ID09IG51bGwgKSB5ID0gdGhpcy5jdXJyZW50UG9zWTsgXHJcblxyXG4gICAgICAgIHRoaXMudGFyZ2V0UG9zWSA9IHk7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCBFdmVudC5FTlRFUl9GUkFNRSwgb25FbnRlckZyYW1lLCB0aGlzICk7XHJcblxyXG4gICAgICAgIGlmICggc3RvcFNjcm9sbCApIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50UG9zWSA9IHk7XHJcbiAgICAgICAgICAgIHRoaXMucGFyZW50U3ByaXRlLnNldFkoIHkgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvL2xvZyhMb2cuVUksIHRoaXMuY3VycmVudFBvc1ksdGhpcy50YXJnZXRQb3NZKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCBFdmVudC5FTlRFUl9GUkFNRSwgb25FbnRlckZyYW1lLCB0aGlzICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnZhbGlkYXRlVmlzaWJsZS5jYWxsKCB0aGlzICk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGFkZCggaXRlbSApIHtcclxuICAgICAgICBpbnNlcnRJdGVtLmNhbGwoIHRoaXMsIGl0ZW0gKTtcclxuICAgICAgICB0aGlzLnNldEl0ZW1zKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5zZXJ0KCBpdGVtLCBwb3MgKSB7XHJcbiAgICAgICAgaW5zZXJ0SXRlbS5jYWxsKCB0aGlzLCBpdGVtLCBwb3MgKTtcclxuICAgICAgICB0aGlzLnNldEl0ZW1zKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyBMaXN0Vmlldy5nZXRJbmRleChpdGVtKTtcclxuICAgIC8vIExpc3RWaWV3LmdldEl0ZW0oaW5kZXgpO1xyXG4gICAgLy8gTGlzdFZpZXcuc2V0SXRlbShpdGVtLCBpbmRleCk7XHJcbiAgICAvLyBMaXN0Vmlldy5nZXROdW1PZkl0ZW1zKCk7XHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBnZXRJbmRleCggaXRlbSApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pdGVtcy5pbmRleE9mKCBpdGVtICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SXRlbSggaW5kZXggKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXNbaW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEl0ZW0oIGl0ZW0sIGluZGV4ICkge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlQXQoIGluZGV4ICk7XHJcbiAgICAgICAgdGhpcy5pbnNlcnQoIGl0ZW0sIGluZGV4ICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TnVtT2ZJdGVtcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pdGVtcy5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gTGlzdFZpZXcucmVmcmVzaCgpO1xyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8g66as7Iqk7Yq4IOyKpO2UhOudvOydtO2KuOulvCDri6Tsi5zqt7jrprDri6QuXHJcbiAgICByZWZyZXNoKCkge1xyXG4gICAgICAgIHRoaXMuc2V0SXRlbXMoIG51bGwgLCBmYWxzZSwgdHJ1ZSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gTGlzdFZpZXcuc2V0SXRlbXMoaXRlbVRhYmxlLCBmb3JjZVVwZGF0ZSwgZm9yY2VSZWZyZXNoKTtcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1tdPX0gW2l0ZW1UYWJsZSA9IG51bGxdXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmb3JjZVVwZGF0ZSA9IGZhbHNlXVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZm9yY2VSZWZyZXNoID0gZmFsc2VdXHJcbiAgICAgKiBAbWVtYmVyb2YgTGlzdFZpZXdcclxuICAgICAqL1xyXG4gICAgc2V0SXRlbXMoIGl0ZW1UYWJsZSA9IG51bGwsIGZvcmNlVXBkYXRlID0gZmFsc2UsIGZvcmNlUmVmcmVzaCA9IGZhbHNlICkge1xyXG4gICAgICAgIGlmICggdGhpcy55MSA9PSBudWxsIHx8IHRoaXMueTIgPT0gbnVsbCB8fCBmb3JjZVVwZGF0ZSB8fCBpdGVtVGFibGUgIT0gbnVsbCB8fCB0aGlzLnNwckR5bmFtaWMgPT0gbnVsbCApIHtcclxuICAgICAgICAgICAgdGhpcy55MSA9IDAgKyB0aGlzLnBhcmFtcy50b3BNYXJnaW47XHJcbiAgICAgICAgICAgIHRoaXMueTIgPSAwICsgdGhpcy5wYXJhbXMudG9wTWFyZ2luO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG9sZFRhYmxlLCBvbGRQYXJlbnRTcHJpdGU7XHJcblxyXG4gICAgICAgIGlmICggZm9yY2VVcGRhdGUgfHwgaXRlbVRhYmxlICE9IG51bGwgKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFyZW50U3ByaXRlLmNsZWFyQ2hpbGRyZW4oKTtcclxuICAgICAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgLy9rLHYg7YWM7J2067iU66GcIOuwlOq/iFxyXG4gICAgICAgICAgICBpZiAoIGl0ZW1UYWJsZSAhPSBudWxsICkge1xyXG4gICAgICAgICAgICAgICAgZm9yICggY29uc3QgaSBpbiBpdGVtVGFibGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdiA9IGl0ZW1UYWJsZVtpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaW5zZXJ0SXRlbS5jYWxsKCB0aGlzLCB2ICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKCBmb3JjZVJlZnJlc2ggKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpcy5wYXJlbnRTcHJpdGUuZ2V0UG9zaXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucGFyZW50U3ByaXRlLmNsZWFyQ2hpbGRyZW4oKTtcclxuICAgICAgICAgICAgdGhpcy5wYXJlbnRTcHJpdGUuc2V0UG9zaXRpb24oIHgsIHkgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBvbGRQYXJlbnRTcHJpdGUgPSB0aGlzLnBhcmVudFNwcml0ZTtcclxuICAgICAgICAgICAgb2xkVGFibGUgPSB0aGlzLl9sYXN0U3ByaXRlcztcclxuICAgICAgICAgICAgb2xkUGFyZW50U3ByaXRlLnJlbW92ZUZyb21QYXJlbnQoKTtcclxuICAgICAgICAgICAgdGhpcy5wYXJlbnRTcHJpdGUgPSBuZXcgU3ByaXRlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMucGFyZW50U3ByaXRlICk7XHJcbiAgICAgICAgICAgIHRoaXMucGFyZW50U3ByaXRlLnBvc2l0aW9uID0gb2xkUGFyZW50U3ByaXRlLmdldFBvc2l0aW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmxvd2VyYm91bmQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMudXBwZXJib3VuZCA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5pdGVtcyAhPSBudWxsICkge1xyXG4gICAgICAgICAgICAvLyDrpqzsiqTtirgg7ZWt66qp7J2EIOyymOydjCDrtoDthLAg7LaU6rCAXHJcbiAgICAgICAgICAgIGNyZWF0ZUNoaWxkU3ByaXRlcy5jYWxsKCB0aGlzLCAwLCBvbGRUYWJsZSApO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8v7KCE7LK0IOyVhOydtO2FnOydmCDshLjroZwg7IKs7J207KaIXHJcbiAgICAgICAgLy90aGlzLml0ZW1IZWlnaHQgPSB5IC0gdGhpcy5wYXJhbXMucGFkZGluZztcclxuICAgICAgICBpZiAoIHRoaXMuc3ByRHluYW1pYyA9PSBudWxsICkge1xyXG4gICAgICAgICAgICB0aGlzLml0ZW1IZWlnaHQgPSBNYXRoLm1heCggdGhpcy55MSwgdGhpcy55MiApIC0gdGhpcy5wYXJhbXMucGFkZGluZyAtIHRoaXMucGFyYW1zLnRvcE1hcmdpbiArIHRoaXMucGFyYW1zLmJvdHRvbU1hcmdpbjtcclxuXHJcbiAgICAgICAgICAgIC8v67OA6rK965CcIOyCrOydtOymiCDsspjrpqxcclxuICAgICAgICAgICAgaWYgKCB0aGlzLml0ZW1IZWlnaHQgPCB0aGlzLmhlaWdodCApIHtcclxuICAgICAgICAgICAgICAgIGlmICggdGhpcy50YXJnZXRQb3NZICsgdGhpcy5pdGVtSGVpZ2h0IDwgMCApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldFBvc1kgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lciggRXZlbnQuRU5URVJfRlJBTUUsIG9uRW50ZXJGcmFtZSwgdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIHRoaXMuaXRlbXMgIT0gbnVsbCApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xhc3RTcHJpdGVzID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICggY29uc3QgaSBpbiB0aGlzLml0ZW1zICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLml0ZW1zW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGkgPCB0aGlzLnBhcmVudFNwcml0ZS5nZXROdW1DaGlsZHJlbigpICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9sYXN0U3ByaXRlc1t2XSA9IHRoaXMucGFyZW50U3ByaXRlLmdldENoaWxkQXQoIGkgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9sYXN0U3ByaXRlc1t2XSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGFzdFNwcml0ZXMgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIHRoaXMuYWxpZ24gPT0gXCJib3R0b21cIiApIHtcclxuICAgICAgICAgICAgdGhpcy5wYXJlbnRTcHJpdGUuc2V0WSggdGhpcy5oZWlnaHQgLSB0aGlzLml0ZW1IZWlnaHQgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludmFsaWRhdGVWaXNpYmxlLmNhbGwoIHRoaXMgKTtcclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLmFsaWduID09IFwiYm90dG9tXCIgKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0UG9zWSA9IHRoaXMuaGVpZ2h0IC0gdGhpcy5pdGVtSGVpZ2h0IC0gMTtcclxuICAgICAgICAgICAgdGhpcy5wYXJlbnRTcHJpdGUuc2V0WSggdGhpcy50YXJnZXRQb3NZICk7XHJcbiAgICAgICAgICAgIC8vdGhpcy5hZGRFdmVudExpc3RlbmVyKEV2ZW50LkVOVEVSX0ZSQU1FLCBvbkVudGVyRnJhbWUsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIExpc3RWaWV3LmNsZWFyKCk7XHJcbiAgICAvLyBMaXN0Vmlldy5yZW1vdmUoaXRlbSk7XHJcbiAgICAvLyBMaXN0Vmlldy5yZW1vdmVBdChpbmRleCk7XHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICBmb3IgKCBjb25zdCBpIGluIHRoaXMuc291bmRUaW1lcnMgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnNvdW5kVGltZXJzW2ldO1xyXG5cclxuICAgICAgICAgICAgdC5zdG9wKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNvdW5kVGltZXJzID0gW107XHJcblxyXG4gICAgICAgIHRoaXMuaXRlbXMgPSBbXTtcclxuICAgICAgICB0aGlzLnNldEl0ZW1zKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlKCBpdGVtICkge1xyXG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLml0ZW1zLmluZGV4T2YoIGl0ZW0gKTtcclxuXHJcbiAgICAgICAgY29uc29sZS5hc3NlcnQoIGkgPj0gMCApO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlQXQoIGkgKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVBdCggaW5kZXggKSB7XHJcbiAgICAgICAgdGhpcy5pdGVtcy5zcGxpY2UoIGluZGV4LCAxICk7XHJcbiAgICAgICAgdGhpcy5zZXRJdGVtcygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gTGlzdFZpZXcubW92ZVRvKGluZGV4KTtcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIG1vdmVUbyggaW5kZXggKSB7XHJcbiAgICAgICAgaW5kZXggPSBpbmRleCB8fCAxO1xyXG5cclxuICAgICAgICBpZiAoIHRoaXMuaXRlbXMgJiYgdGhpcy5pdGVtcy5sZW5ndGggPiAwICkge1xyXG4gICAgICAgICAgICBpZiAoIGluZGV4ID4gdGhpcy5pdGVtcy5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuaXRlbXMubGVuZ3RoO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRhcmdldFBvc1kgPSAtdGhpcy5pdGVtc1tpbmRleF0udGFyZ2V0UG9zWTtcclxuXHJcbiAgICAgICAgICAgIGlmICggdGhpcy50YXJnZXRQb3NZIDwgMCApIHtcclxuICAgICAgICAgICAgICAgIGlmICggdGhpcy5pdGVtSGVpZ2h0IDwgdGhpcy5oZWlnaHQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXRQb3NZID0gdGhpcy50b3BQb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHRoaXMudGFyZ2V0UG9zWSArIHRoaXMuaXRlbUhlaWdodCA8IHRoaXMuaGVpZ2h0ICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0UG9zWSA9IHRoaXMuaGVpZ2h0IC0gdGhpcy5pdGVtSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXRQb3NZID0gdGhpcy50b3BQb3NpdGlvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5jdXJyZW50UG9zWSAhPSB0aGlzLnRhcmdldFBvc1kgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lciggRXZlbnQuRU5URVJfRlJBTUUsIG9uRW50ZXJGcmFtZSwgdGhpcyApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIExpc3RWaWV3LnNldEl0ZW1zVG91Y2hEaXNhYmxlZCgpO1xyXG4gICAgLy8gTGlzdFZpZXcuc2V0SXRlbXNUb3VjaEVuYWJsZWQoKTtcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIOuyhO2KvCDthLDsuZgg6rCA64qlL+u2iOqwgOuKpe2VmOqyjFxyXG4gICAgc2V0SXRlbXNUb3VjaERpc2FibGVkKCkge1xyXG4gICAgICAgIHRoaXMuaXRlbVRvdWNoRW5hYmxlID0gZmFsc2U7XHJcbiAgICAgICAgY29uc3QgZSA9IG5ldyBFdmVudCggXCJpdGVtc1RvdWNoRGlzYWJsZWRcIiApO1xyXG5cclxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoIGUgKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRJdGVtc1RvdWNoRW5hYmxlZCgpIHtcclxuICAgICAgICB0aGlzLml0ZW1Ub3VjaEVuYWJsZSA9IHRydWU7XHJcbiAgICAgICAgY29uc3QgZSA9IG5ldyBFdmVudCggXCJpdGVtc1RvdWNoRW5hYmxlZFwiICk7XHJcblxyXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCggZSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gTGlzdFZpZXcubWFrZUJhY2tncm91bmQoKTtcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIG1ha2VCYWNrZ3JvdW5kKCkge1xyXG4gICAgICAgIGlmICggdGhpcy5wYXJhbXMuYmFja2dyb3VuZC5pbWFnZSApIHtcclxuICAgICAgICAgICAgY29uc3QgaW1nID0gdGhpcy5wYXJhbXMuYmFja2dyb3VuZC5pbWFnZTtcclxuICAgICAgICAgICAgY29uc3QgW3csIGhdID0gW2ltZy5nZXRXaWR0aCgpIC8gaW1nLmdldFNjYWxlWCgpLCBpbWcuZ2V0SGVpZ2h0KCkgLyBpbWcuZ2V0U2NhbGVZKCldO1xyXG4gICAgICAgICAgICBjb25zdCBbc3gsIHN5XSA9IFthcHBsaWNhdGlvbi5sb2dpY2FsUmVuZGVyQm91bmRzLndpZHRoIC8gdywoIHRoaXMudG9wUG9zaXRpb24gLSAxMCApIC8gaF07XHJcbiAgICAgICAgICAgIGNvbnN0IG1pblNjYWxlID0gTWF0aC5tYXgoIHN4LCBzeSApO1xyXG4gICAgICAgICAgICBjb25zdCBtYXhTY2FsZSA9IE1hdGgubWF4KCBzeCwgYXBwbGljYXRpb24ubG9naWNhbFJlbmRlckJvdW5kcy5oZWlnaHQgLyBoICk7Ly8qMS4yO1xyXG4gICAgICAgICAgICBjb25zdCBtaW5ZID0gKCB0aGlzLnRvcFBvc2l0aW9uIC0gMTAgKSAvIDI7XHJcbiAgICAgICAgICAgIGNvbnN0IG1heFkgPSBhcHBsaWNhdGlvbi5sb2dpY2FsUmVuZGVyQm91bmRzLmhlaWdodCAvIDI7XHJcblxyXG4gICAgICAgICAgICAvL2xvZyAoTG9nLlVJLCBcIu2VtOuNlOydtOuvuOyngFwiLHcsaCxtaW5TY2FsZSxtYXhTY2FsZSxcIuusvOumrOqwgOuhnO2PrVwiLENPTkZJRy5QVyk7XHJcbiAgICAgICAgICAgIGltZy5zZXRTY2FsZSggbWluU2NhbGUgKTtcclxuICAgICAgICAgICAgaW1nLnNldFBvc2l0aW9uKCB0aGlzLndpZHRoIC8gMiAtIHcgKiBtaW5TY2FsZSAvIDIsIG1pblkgLSBoICogbWluU2NhbGUgLyAyICk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ2hpbGQoIGltZyApO1xyXG4gICAgICAgICAgICB0aGlzLmhlYWRlckltYWdlID0gaW1nO1xyXG4gICAgICAgICAgICB0aGlzLmhlYWRlckltYWdlTWluU2NhbGUgPSBtaW5TY2FsZTtcclxuICAgICAgICAgICAgdGhpcy5oZWFkZXJJbWFnZU1heFNjYWxlID0gbWF4U2NhbGU7XHJcbiAgICAgICAgICAgIHRoaXMuaGVhZGVySW1hZ2VNaW5ZID0gbWluWTtcclxuICAgICAgICAgICAgdGhpcy5oZWFkZXJJbWFnZU1heFkgPSBtYXhZO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcyA9IG5ldyBTaGFwZSgpO1xyXG5cclxuICAgICAgICBzLm1ha2VCb3goIGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMubGVmdCxcclxuICAgICAgICAgICAgICAgICAgIC0xMCxcclxuICAgICAgICAgICAgICAgICAgIGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMud2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbi5sb2dpY2FsUmVuZGVyQm91bmRzLmhlaWdodCArIDEwLC8vIC0gdGhpcy5nZXRZKCkgKyAxMCwgXHJcbiAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmFtcy5iYWNrZ3JvdW5kLmNvbG9yIHx8IDB4ZmZmZmZmICk7XHJcbiAgICAgICAgdGhpcy5hZGRDaGlsZCggcyApO1xyXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZCA9IHM7XHJcbiAgICAgICAgdGhpcy5zZXRCYWNrZ3JvdW5kWSggdGhpcy50b3BQb3NpdGlvbiApO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIExpc3RWaWV3LnNldEJhY2tncm91bmRZKHkpO1xyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgc2V0QmFja2dyb3VuZFkoIHkgKSB7XHJcbiAgICAgICAgaWYgKCAhIHRoaXMuYmFja2dyb3VuZCApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgeSA9IFV0aWxzLmNsYW1wKCB5LCAwLCBhcHBsaWNhdGlvbi5sb2dpY2FsUmVuZGVyQm91bmRzLmhlaWdodCAvIDAuOSApO1xyXG5cclxuICAgICAgICBpZiAoIHRoaXMucGFyYW1zLmJhY2tncm91bmQuaW1hZ2UgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGltZyA9IHRoaXMuaGVhZGVySW1hZ2U7XHJcbiAgICAgICAgICAgIGNvbnN0IFt3LCBoXSA9IFtpbWcuZ2V0V2lkdGgoKSAvIGltZy5nZXRTY2FsZVgoKSwgaW1nLmdldEhlaWdodCgpIC8gaW1nLmdldFNjYWxlWSgpXTtcclxuICAgICAgICAgICAgY29uc3QgdiA9IHkgLyBhcHBsaWNhdGlvbi5sb2dpY2FsUmVuZGVyQm91bmRzLmhlaWdodDtcclxuICAgICAgICAgICAgY29uc3Qgc2NhbGUgPSBVdGlscy5sZXJwKCB0aGlzLmhlYWRlckltYWdlTWluU2NhbGUsIHRoaXMuaGVhZGVySW1hZ2VNYXhTY2FsZSwgdiApO1xyXG5cclxuICAgICAgICAgICAgeSA9IFV0aWxzLmxlcnAoIHRoaXMuaGVhZGVySW1hZ2VNaW5ZLCB0aGlzLmhlYWRlckltYWdlTWF4WSwgZWFzaW5nLmxpbmVhciggdiApICk7XHJcbiAgICAgICAgICAgIHRoaXMuaGVhZGVySW1hZ2Uuc2V0U2NhbGUoIHNjYWxlICk7XHJcbiAgICAgICAgICAgIHRoaXMuaGVhZGVySW1hZ2Uuc2V0UG9zaXRpb24oIHRoaXMud2lkdGggLyAyIC0gdyAqIHNjYWxlIC8gMiwgeSAtIGggKiBzY2FsZSAvIDIgKTtcclxuICAgICAgICAgICAgY29uc3QgdjIgPSBVdGlscy5sZXJwKCB0aGlzLnBhcmFtcy5iYWNrZ3JvdW5kLmRhcmtMZXZlbCB8fCAwLjUsIDEuMCwgZWFzaW5nLmxpbmVhciggdiApICk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmhlYWRlckltYWdlLnNldENvbG9yTXVsdGlwbGllciggdjIsIHYyLCB2MiApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kLnNldFkoIHkgKiAwLjkgPiAwICYmIHkgKiAwLjkgfHwgMCApO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIExpc3RWaWV3LmZhZGVJbihkdXIpO1xyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgZmFkZUluKCBkdXIgKSB7XHJcbiAgICAgICAgLy9sb2coTG9nLlVJLCBcIu2OmOydtOuTnOyduO2aqOqzvFwiKTtcclxuICAgICAgICB0aGlzLnBhcmVudFNwcml0ZS5zZXRBbHBoYSggMCApO1xyXG4gICAgICAgIG5ldyBUd2VlbiggdGhpcy5wYXJlbnRTcHJpdGUsIGR1ciB8fCAxMDAwLCB7IGFscGhhOiAxIH0gKTtcclxuICAgIH1cclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIExpc3RWaWV3LmdldFZpc2libGVJdGVtU3ByaXRlcygpO1xyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgZ2V0VmlzaWJsZUl0ZW1TcHJpdGVzKCkge1xyXG4gICAgICAgIGNvbnN0IHQgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yICggbGV0IGkgPSB0aGlzLmxvd2VyYm91bmQ7IGkgPD0gdGhpcy51cHBlcmJvdW5kOyBpKysgKSB7XHJcbiAgICAgICAgICAgIHQucHVzaCggdGhpcy5pdGVtc1tpXS5zcHJpdGUgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgeyBFdmVudERpc3BhdGNoZXIsIFNvdW5kLCBVdGlscywgRXZlbnQsIFRpbWVyIH0gZnJvbSBcIkBlbmdpbmUvZmxhdGZhc3RcIjtcclxuXHJcblxyXG5cclxuXHJcbmNvbnN0IGRlc3RpbnkgPSBgXHJcbk1NTEB0MTA2TDhyMTZHIy5BQkI+QzE2Qy4mQzxFLkYjLiZGI0EuQi4+RDxCLkJCMTZCMTZCMTZCQUFHMTZHRiMuci5EIzE2QUdHQTE2Qi5HI0FCQj5DMTZDLiZDcjE2RS5EQ0M8QjE2Qi4mQkYjRTE2RUIxNkIxNkIxNkJBMTZBLkdHRiNBRzE2RzE2RTI+RiMuRS48Qj5HLkYjLiZGI0EuRy48QTE2PmUxNkYuRS48QT5GLkUuPEE+Ry5GLiZGPEczMj5DIzMyRTMyQTQuJkEzMnI8RkZGMTZGLjxBQi0+Q0M8Qi0xNj5GLiZGckItLkItMTZEMTZFMTZGRkZGMTZGLkdFRERFMTZDLiZDckcuQS5GRERFMTZGLkRFRkRBMTZBLiZBckYuQTE2RjE2RzE2QUFBQTE2QS5CLUdGMTZHLiZHcjRBND5FNEY8RkZGMTZGLjxBQi0+Q0M8Qi0xNj5GLiZGPkM8QS5CLTE2RDE2RTE2RkZGRjE2Ri5FRkcxNkEyJkExNnJBQi1GI28xQj5CPEI+QjxCLT5CLTxCLT5CLTxBPkE8QT5BRD5EPEQ+RDxHIz5HIzxHIz5HIzxBPkE8QT5BPEQ0PkQ8RDRBPkQ8REcuPkQxNkc0PENHPkM8Q0YuPkMxNkY8RjxCLT5GQi08Qi1CLkIxNnI0Qi4+QkIuRT5FPEYjPkYjPEcjPkcjPEU0bzRCPkMxNkMuJkNyPEYjR0FBQjE2Qi4mQnI0cjE2QjE2QjE2QjE2QkFBRzE2R0YjLnIuRCMxNkFHR0ExNkIuRyNBQkI+QzE2Qy4mQ3IxNkUuRENDPEIxNkIuJkJyNHIxNkIxNkIxNkIxNkJBMTZBLkdHRiNBRzE2RzE2bzJFPkU8RT5FPEQ+RDxEPkQ8Qz5DPEM+Qzw8Qj5CPEI+QkQ+RDxEPkQ8Qz5DPEM+QzxCLT5CLTxCLT5CLTxBMkwzMkRBMS5yNC5yMTYuLFxyXG52MTRyMTZMOEQuREVHIy5HLiZHQy5DLiZDRiMuRiMuckcuRy4mR0U0RTREIzRGIzRyMTZFLkVEI0Q0RDQ8PEEuPkFFMTY8QUQuPkQuPERHLj5HRDE2PEdDRz5DPENGIzQ+RiM8RiM8Qi4+Qi48Qj5FPkU8RT5FPEQ+RDxEPkQ8Qz5DPEM+Qzw8Qj5CPEI+QkQ+RDxEPkQ8Qz5DPEM+Qzw8Qi0+Qi08Qi0+Qi08QTI+RDQ+RDQ8REE+RDQ8RzQ+Ry5EMTY8Rz5ERzxHQzQ+Qy48RzE2QzQ+QzQ8RjQ+Ri5DMTY8Rj5DRjQ8PEItND5CLTQ8Qi0+RkItPEItQjQ+QjQ8QkI+QjRDND5DLjxHMTZDND5DNDxDIzQ+QyMuPEExNkMjQT5DIzxDI0Q0PkQ0PERBPkQ0PEc0PkcuLkQxNjxHPkRHPEdDND5DLjxHMTZDND5DNDxFLTQ+RS0uPEUtMTZERD5EPEQ+PnYxNUEuRy5HckdBRUcuRi5GNC5ERUZGMTZFLkVGRUdGMTZGMTZEMnJBQi1GI0EuRy5HckdBRUcuRi5GNEZHRkUuRS5FRCMuQi5BQUcjRyNBMTZCRyMuQUJvMUE0PkE0REE+RDxERzQ+RzxHQ0c+QzxDRiM0PkYjNDw8QjQ+QjRFMTY+RTxFMTY+RTxGI0cjPkVHIzxHIzxBND5BNERBPkQ8REY0PkY8RkVCPkU8RTxBLj5FMTZBNDxCPkYjQjxCbzVGIy5FLjxCPkYjLkUuPEI+Ry5GIy4mRiNBLkcuPEExNj5FMTZGLkUuPEE+Ri5FLjxBPkcuRi4mRkwzMnJDI0VBNC4mQXJyPDxGI0E+Q0UxJkU0LnI0LnJycixcclxudjE0cjE2PEw4RS5GI0cjPEEyPkQ0LjxGI0cyPkMyPEYjNC5BQjJyMTZFLkVGI0cjLj5FLiZFPkw0RUdGI0FBR0w4PEFHMTZHLiZHPkUuRTxBLj5FNEQjND5GIy5FLjxCQi5CLkdCLkIuJkI+RCMuRCMucjxBLkEuckEuQS5yQS5BLiZBcjI8QS4+QzRyLkYuQS5CLS5EMTZyNC5GLkYuPEItLkItMTZyNC4+RC48Qi0uPkMyckMuRS5DLjxBMTZyNC4+QTQuRjJyRC5ELkYuQzE2cjQuRy5GLkItLkMxNnI0RTRBNEE0cjQuPkMuPEEuQi0yckYuRi5EMnI8Qi0uPkUtLkYuRC0xNnI0RiM0QzQ+QS5HLiZHQS5CLS4mQi0+Qy48Ri4mRkUuRi4mRkYuRS4mRUYuRS4mRUQuPEEuQS5CLS4+PEY0TDJEREUtRDxBQj5FPEI0PkU0TDhFLS5HLkNFLS5FLS5DRS5GIy4+RDxCNEU0RS5DQy48Qi4+RC5yRTE2PkUuRUQjRDxFLkcuRC5HLkNGIy5GIy5EQS5GLkFBLkcjLiZHI0U0RUNEIzxCLkIuTDI+R0dCQUFBQUc7XHJcbmA7XHJcbmNvbnN0IGFoY2hvbyA9IGBcclxuTU1MQHQxMjh2MTU+Pkw0RjJFMkQuTDhDMTY8Qi0xNj5DPEItQUdHPkM8RjJFQ0QyPENEREQxNkUxNnYxNG8xRz5HTDE2PkVGR0FyR0Q8Qi1HRDxCLUdMOD5DMkMjMnJBPkRFRkE+QzRMMTZydjE1Rkc+QzxGRz5MMzJDLjxDLkZHPkNGRz5DPENGRz5DRkc+QzImQzgmQyZDMkw4cm80RkY0djE0bzFCLTQ+Qi08Qi1CLT5CLXJDNC4+QzxDckNCLTQ8QTQ+QTxBQTQ+QTREND5EPERyRD5ENDw8Qi00PkItPEItQi0+Qi1yQzQuPkM8Q3JDPkM0PEMjND5DIzxDI0MjND5DIzxEND5ENDxBRD5EPEQ0PEI0PkI8QkI0PkI0PEItND5CLTxCLUItND5CLTQ8QTQ+QTxBQTQ+QTREND5EPEREND5ENDw8Rz5HPEdBNEE+QTQ8Qi0+Qi08Qi1CNEI+QjRDND5DPEdDRz5DPENyPkM8QzRyND5DPEM8Qi00Qi00PkM0QzRELTRELUEtPkUtNDxFLS48QS0uPkEtPEEtNEEtPkEtPEEtNEEtPkEtPEEtNEEtPkEtPEEtNEc+RzxHNEc+RzxHPkM0PkM8Qz5DPEM+QzxDPkM8Rj5GPEY+RjxGPkY8RkUtND5FLTxFLT5FLTxFLT5FLTxFLUQ0PkQ8REYjND5GIzxGI0c0Pkc8Ry00RjQ8Qi0uQS0uPkEtPEEtNEEtPkEtPEEtNEEtPkEtPEEtNEEtPkEtPEEtNEc+RzxHNEc+RzxHPkM0PkM8Qz5DPEM+QzxDPkM8Rj5GPEY+RjxGPkY8RkUtND5FLTxFLT5FLTxFLT5FLTxFLUQ0PkQ8REYjND5GIzxGI0Y0PkY8Qi0+Qi1DNDxCNHYxNW81QyM0QyM+QyM0PDxFRUVFRCNEIz5DI0MjPEJCQSMxNkIuJkJCPkI8QkEjQj5DI0REQyNDIzE2PEcjLkdHIz5DIzE2PEIuQTRyQUcjQUIxNj5DIy4mQyNyNC5DI0QjRTRFRUVEIzxBIz5EI0MjNDxCQjRBIzRCLj5DIy4mQyM8RyMuRyMxNnJFRUVFRCNEIz5DI0MjPEJCQSMxNkIuJkJCLkIxNkJBI0I+QyNEREMjQyMxNjxHIy5HRyM+QyMxNjxCLkFBLkExNkFHI0FCMTY+QyMuJkMjckMjQyNDI0QjRTRFRUVEIzxBIz5EI0MjNDxCQjRCNEI0dDc2TDE2Pj5DIy48QyMuRiNCLjxCLj5FQS48QS4+RUwzMm8zckYjQT4+Q0cjMi4mRyMmRyMxNi5vMkUuQi4+RUYjLkcjMTYmRyM2NCZHIzIuJkcjMi4sXHJcbnYxND5CLTJHMkYuci5yQ3IyPEdGMnIydjE1RjJFMkQyRS5FMTZGMTZHMkYuRThDMS4mJkMyTDhyQ0M0ckVFRkY0ckVGNEE0RTRGNHI0R0ZGRUVERENDNEc0RjRyRUVGRjRyRUY0QTRFNEY0ckItQi1CLUItQUFHR0ZGNEVFRjRBNEEuQTE2QUdGMTZHMTZHNHJFRUVHPkRDNC5DLkMxNkM8Qi1BRzRBRjQuQUFBRjQuRzQuckYxNkcxNkFHRkc0QTRCLTQucjRBR0ZHNC5yMi5GNEU0RjRHNEEtNEc0QS00Qi0uPkMuJkM8Ry5HMTZyRS1FLUUtRS1ERD5DQzxCLUItQTE2Qi0uJkItQi0uQi0xNkItQUItPkNELUQtQ0MxNjxHLkYjRz5DMTY8Qi0uQS1BLS5BLTE2QS1HQS1CLTE2PkMuJkM8QS0uQS0xNnI+Q0RFLTRFLUUtRS1EPEE+REM0PEItQi00QS00Qi0uPkMuJkM8Ry5HMTZyRS1FLUUtRS1ERD5DQzxCLUItQTE2Qi0uJkItQi0uQi0xNkItQUItPkNELUQtQ0MxNjxHLkYjRz5DMTY8Qi0uQS1BLS5BLTE2QS1HQS1CLTE2PkMuJkNyQ0NDREUtNEUtRS1FLUQ8QT5EQzQ8Qi1CLTJCLj5DIzE2djE0TDRvMkExQTFHIzE+QyM8QyNDI0MjOD5DIzE2PEYjOC5GI0YjRiM4RiM4RUVFRThFOEQjPkw4RCM8RCNHND5HPEdHIzQ+RyM8RzRGIzQ8Qi5BLj5BPEE0QT5BPEE0QT5BPEE0QT5BPEE0RyM+RyM8RyM0RyM+RyM8RyM+QyM0PkMjPEMjPkMjPEMjPkMjPEMjPkMjPEYjPkYjPEYjPkYjPEYjPkYjPEYjRTQ+RTxFPkU8RT5FPEVEIzQ+RCM8RCNHND5HPEdGIzRGI0YjNEJGIzxCNEwxNj4+QS4+RS5BPEcjLj5FLkYjPEYjLj5DIy5FPDxCMUwzMnI4ci5yLj4+RXQ1NDxCPkcjQj5FPkUxJkU0LixcclxudjE0PEItMUMxPEEyPkYyPEItPkY4Qi0uJkItQi0yQi0yRjJBMjxEMSZEMSZEMUw4ckREND4+ckMyLkNyQzRDQzRDNHJDMi5BckItNEFENEM0ckMyLkNyQzRDQzRDNHJFMi5ERDRDNEMyRjJyRDRFNC5HLkcxNnI+RDQ8RzQuRzRyPkNDRjQuRi5GMTZyRkVDPEQ0LkUyckQ0LkQyckY0LkY0REQ8Qi1yMUw0Qi1CLUItQi0+RC1ELUQtTDhELS5FLS4mRS1DNHJHR0Y0LkYuRi5yRi5GLiZGRi5GLkZGRjQuRTRGNEUuRS0uJkUtQzRyQ0NDNC5FLTRyQS1HRiMyTDRBckYuRy1FLUw4Ri5HLiZHQzRyQ0M8Qi00Lj5GLkYuckYuRi4mRkY0ckZGRjQuRTRELTRFLkUtLiZFLUMuQy5FLUUtRS00LkEtLkEtLkEtR0YjMkE0cjRMNEUtLkZHckUuPkcjci48PEIuci5yQi4+PkYjLnI8RiNGRCNGOC5FMiZFMTZMOHJFRUUycjRBRyNHMkEjNHI0RiM0Lkc0RTRGIy5HIy4mRyNDIzRyRyNHI0YjNC5yMkYjLkYjMi5yLkYjNC5GNEQjNEYuRS4mRUU0LkVFRTQuQTQuQUcjRzJBIzRyNEE0RUU0RiM0RiM0O1xyXG5gO1xyXG5cclxuXHJcbmNvbnN0IHN0ZXBzID0ge1xyXG4gICAgQTogMCxcclxuICAgIEI6IDIsXHJcbiAgICBDOiAtOSxcclxuICAgIEQ6IC03LFxyXG4gICAgRTogLTUsXHJcbiAgICBGOiAtNCxcclxuICAgIEc6IC0yXHJcbn07XHJcblxyXG5jb25zdCBSRUZfRlJFUSA9IDQ0MDsgLy8gQTQ7XHJcbmNvbnN0IFJFRl9PQ1RBVkUgPSA0O1xyXG5jb25zdCBST09UX01VTFQgPSAyICoqICggMSAvIDEyICk7IC8vIEEgY29uc3RhbnQ6IHRoZSB0d2VsZnRoIHJvb3Qgb2YgdHdvLlxyXG5cclxuXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZU5vdGVGcmVxdWVuY3koIG4gKSB7XHJcbiAgICByZXR1cm4gUkVGX0ZSRVEgKiAoIFJPT1RfTVVMVCAqKiBuICk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZU5vdGVTdGVwcyggc3RyICkge1xyXG4gICAgY29uc3QgW18sIG5vdGUsIHNoYXJwLCBvY3RhdmVdID0gLyhbYS16XSkoWyMtXT8pKFxcZCkvaS5leGVjKCBzdHIgKTtcclxuXHJcbiAgICBpZiAoIG5vdGUgPT0gXCJOXCIgKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KCBvY3RhdmUgKSAtIDEzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gKCBwYXJzZUludCggb2N0YXZlICkgLSBSRUZfT0NUQVZFICkgKiAxMiArIHN0ZXBzW25vdGVdICsgKCBzaGFycCA9PSBcIiNcIiA/IDEgOiAwICkgKyAoIHNoYXJwID09IFwiLVwiID8gLSAxIDogMCApO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjYWxjdWxhdGVOb3RlKCBub3RlICkge1xyXG4gICAgY29uc3Qgc3RlcHMgPSBjYWxjdWxhdGVOb3RlU3RlcHMoIG5vdGUgKTtcclxuXHJcbiAgICByZXR1cm4gY2FsY3VsYXRlTm90ZUZyZXF1ZW5jeSggc3RlcHMgKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEB0aGlzIE1hYmlNTUxcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IG1tbFxyXG4gKiBAcmV0dXJucyB7W2FueSxhbnldfVxyXG4gKi9cclxuZnVuY3Rpb24gbW1sMm5vdGUoIG1tbCApIHtcclxuICAgIGNvbnN0IG5vdGVSZXN1bHQgPSBbXTtcclxuICAgIGNvbnN0IHRlbXBvUmVzdWx0ID0gW107IC8vIGZvciB0ZW1wbztcclxuICAgIGxldCB0ZW1wbyA9IDEyMDtcclxuICAgIGxldCBvY3RhdmUgPSA0O1xyXG4gICAgbGV0IG5vdGVsZW5ndGggPSA0O1xyXG4gICAgbGV0IHZvbHVtZSA9IDE1O1xyXG4gICAgbGV0IHRpbWUgPSAwO1xyXG4gICAgbGV0IHBvcyA9IDA7XHJcbiAgICBsZXQgZmluaXNoZWQgPSBmYWxzZTtcclxuXHJcbiAgICBkbyB7XHJcbiAgICAgICAgLy9zdHJpbmcubWF0Y2goc3RyaW5nLnN1YihtbWwsIHBvcyksIFwiXiglJiopKFslYTw+XSkoJUEtKSgpWyUmJWE8Pl1cIik7XHJcbiAgICAgICAgY29uc3QgciA9IC9eKCYqKShbYS16PD5dKShbXmEtejw+XSopWyZhLXo8Pl0vaS5leGVjKCBtbWwuc3Vic3RyKCBwb3MgKSApO1xyXG4gICAgICAgIGxldCBmb3VuZCwgbGluaywgYywgYXJncztcclxuXHJcbiAgICAgICAgaWYgKCByID09IG51bGwgKSB7XHJcbiAgICAgICAgICAgIFtmb3VuZCwgbGluaywgYywgYXJnc10gPSAvXigmKikoW2Etejw+XSkoW15hLXo8Pl0qKS9pLmV4ZWMoIG1tbC5zdWJzdHIoIHBvcyApICk7XHJcbiAgICAgICAgICAgIGZpbmlzaGVkID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBbZm91bmQsIGxpbmssIGMsIGFyZ3NdID0gcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHBvcyA9IHBvcyArIGZvdW5kLmxlbmd0aCAtIDE7XHJcblxyXG4gICAgICAgIGlmICggYyA9PSBcIk9cIiApIHsgLy8gU2V0IG9jdGF2ZTtcclxuICAgICAgICAgICAgb2N0YXZlID0gcGFyc2VGbG9hdCggYXJncyApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIGMgPT0gXCJUXCIgKSB7IC8vIFNldCB0ZW1wbztcclxuICAgICAgICAgICAgdGVtcG8gPSBwYXJzZUZsb2F0KCBhcmdzICk7XHJcbiAgICAgICAgICAgIHRlbXBvUmVzdWx0LnB1c2goIFt0aW1lLCB0ZW1wb10gKTtcclxuICAgICAgICB9IGVsc2UgaWYgKCBjID09IFwiVlwiICkgeyAvLyBTZXQgdm9sdW1lO1xyXG4gICAgICAgICAgICB2b2x1bWUgPSBwYXJzZUZsb2F0KCBhcmdzICk7XHJcbiAgICAgICAgfSBlbHNlIGlmICggYyA9PSBcIlJcIiApIHsgLy8gUmVzdDtcclxuICAgICAgICAgICAgbGV0IG5vdGV0aW1lO1xyXG5cclxuICAgICAgICAgICAgaWYgKCAvXFxkKy8udGVzdCggYXJncyApICkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW2xlbl0gPSBhcmdzLm1hdGNoKCAvXFxkKy8gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBub3RldGltZSA9IHBhcnNlRmxvYXQoIGxlbiApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbm90ZXRpbWUgPSBub3RlbGVuZ3RoO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIC9cXC4vLnRlc3QoIGFyZ3MgKSApIHtcclxuICAgICAgICAgICAgICAgIG5vdGV0aW1lID0gbm90ZXRpbWUgLyAxLjU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5vdGVSZXN1bHQucHVzaCggW3RpbWUsIDAsIDBdICk7XHJcbiAgICAgICAgICAgIHRpbWUgPSB0aW1lICsgMjQwIC8gbm90ZXRpbWU7XHJcbiAgICAgICAgfSBlbHNlIGlmICggYyA9PSBcIkxcIiApIHsgLy8gU2V0IG5vdGUgbGVuZ3RoO1xyXG4gICAgICAgICAgICBub3RlbGVuZ3RoID0gcGFyc2VGbG9hdCggYXJncyApO1xyXG5cclxuICAgICAgICAgICAgaWYgKCAvXFwuLy50ZXN0KCBhcmdzICkgKSB7XHJcbiAgICAgICAgICAgICAgICBub3RlbGVuZ3RoID0gbm90ZWxlbmd0aCAvIDEuNTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoIGMgPT0gXCI+XCIgKSB7XHJcbiAgICAgICAgICAgIC8vIEluY3JlYXNlIG9jdGF2ZTtcclxuICAgICAgICAgICAgb2N0YXZlID0gTWF0aC5tYXgoIDAsIG9jdGF2ZSArIDEgKTtcclxuICAgICAgICB9IGVsc2UgaWYgKCBjID09IFwiPFwiICkge1xyXG4gICAgICAgICAgICAvLyBEZWNyZWFzZSBvY3RhdmU7XHJcbiAgICAgICAgICAgIG9jdGF2ZSA9IE1hdGgubWF4KCAwLCBvY3RhdmUgLSAxICk7XHJcbiAgICAgICAgfSBlbHNlIGlmICggL1tBLUdOXS8udGVzdCggYyApICkge1xyXG4gICAgICAgICAgICAvLyBQbGF5IG5vdGU7XHJcbiAgICAgICAgICAgIGxldCBub3RlO1xyXG5cclxuICAgICAgICAgICAgaWYgKCAvWysjLV0vLnRlc3QoIGFyZ3MgKSApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IFttb2RdID0gYXJncy5tYXRjaCggL1srIy1dLyApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggbW9kID09IFwiI1wiIHx8IG1vZCA9PSBcIitcIiApIHtcclxuICAgICAgICAgICAgICAgICAgICBub3RlID0gYyArIFwiI1wiICsgb2N0YXZlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbW9kID09IFwiLVwiICkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vdGUgPSBjICsgXCItXCIgKyBvY3RhdmU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBub3RlID0gYyArIG9jdGF2ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IG5vdGV0aW1lO1xyXG5cclxuICAgICAgICAgICAgaWYgKCAvXFxkKy8udGVzdCggYXJncyApICkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW2xlbl0gPSBhcmdzLm1hdGNoKCAvXFxkKy8gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBub3RldGltZSA9IHBhcnNlRmxvYXQoIGxlbiApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbm90ZXRpbWUgPSBub3RlbGVuZ3RoO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIC9cXC4vLnRlc3QoIGFyZ3MgKSApIHtcclxuICAgICAgICAgICAgICAgIG5vdGV0aW1lID0gbm90ZXRpbWUgLyAxLjU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmtGbGFnID0gbGluayAhPSBcIlwiO1xyXG4gICAgICAgICAgICBjb25zdCBwaXRjaCA9IGNhbGN1bGF0ZU5vdGUoIG5vdGUgKTtcclxuXHJcbiAgICAgICAgICAgIG5vdGVSZXN1bHQucHVzaCggW3RpbWUsIHBpdGNoLCB2b2x1bWUsIGxpbmtGbGFnXSApO1xyXG4gICAgICAgICAgICB0aW1lID0gdGltZSArIDI0MCAvIG5vdGV0aW1lO1xyXG4gICAgICAgIH1cclxuICAgIH0gd2hpbGUgKCAhZmluaXNoZWQgKTtcclxuXHJcbiAgICBub3RlUmVzdWx0LnB1c2goIFt0aW1lLCAwLCAwXSApO1xyXG5cclxuICAgIHJldHVybiBbbm90ZVJlc3VsdCwgdGVtcG9SZXN1bHRdO1xyXG59XHJcblxyXG4vKipcclxuICogQHRoaXMgTWFiaU1NTFxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbW1sXHJcbiAqIEByZXR1cm5zIHtbbnVtYmVyW10sbnVtYmVyW11dfVxyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VNTUwoIG1tbCApIHtcclxuICAgIC8vXCIuKk1NTEAoLiopOy1cIlxyXG4gICAgY29uc29sZS5hc3NlcnQoIC9NTUxAKFtcXHNcXFNdKik7L20udGVzdCggbW1sICksXCJDYW4ndCBmb3VuZCBNTUwgdGFnLlwiICk7XHJcbiAgICBsZXQgW18sIHNdID0gL01NTEAoW1xcc1xcU10qKTsvbS5leGVjKCBtbWwgKTtcclxuICAgIGxldCBjaE5vdGVzID0gW107XHJcbiAgICBjb25zdCBub3RlUmVzdWx0ID0gW107XHJcblxyXG4gICAgaWYgKCBzICkge1xyXG4gICAgICAgIHMgPSBzLnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgLy9zID0gc3RyaW5nLmdzdWIocyxcIlteQUJDREVGRyMrJS0lLk8+PFRWTE5SMC05JixdXCIsXCJcIik7XHJcbiAgICAgICAgcyA9IHMucmVwbGFjZSggL1xccy9nLFwiXCIgKTtcclxuICAgICAgICBjaE5vdGVzID0gcy5zcGxpdCggXCIsXCIgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0ZW1wbyA9IFtdO1xyXG5cclxuICAgIGZvciAoIGNvbnN0IGkgaW4gY2hOb3RlcyApIHtcclxuICAgICAgICBjb25zdCBjaE5vdGUgPSBjaE5vdGVzW2ldO1xyXG4gICAgICAgIC8vbG9nKHYpO1xyXG4gICAgICAgIGxldCB0ZW1wb1Jlc3VsdDtcclxuXHJcbiAgICAgICAgW25vdGVSZXN1bHRbaV0sIHRlbXBvUmVzdWx0XSA9IG1tbDJub3RlLmNhbGwoIHRoaXMsIGNoTm90ZSApO1xyXG5cclxuICAgICAgICBmb3IgKCBjb25zdCBqIGluIHRlbXBvUmVzdWx0ICkge1xyXG4gICAgICAgICAgICBjb25zdCB2MiA9IHRlbXBvUmVzdWx0W2pdO1xyXG5cclxuICAgICAgICAgICAgdGVtcG8ucHVzaCggdjIgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGVtcG8uc29ydCggKCBhLCBiICkgPT4gYVswXSAtIGJbMF0gKTtcclxuXHJcbiAgICBmb3IgKCBsZXQgaSA9IHRlbXBvLmxlbmd0aCAtIDE7IGkgPiAxOyBpLS0gKSB7XHJcbiAgICAgICAgaWYgKCB0ZW1wb1tpXSA9PSB0ZW1wb1tpIC0gMV0gKSB7XHJcbiAgICAgICAgICAgIHRlbXBvLnNwbGljZSggaSwgMSApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gW25vdGVSZXN1bHQsIHRlbXBvXTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEB0aGlzIE1hYmlNTUxcclxuICpcclxuICovXHJcbmZ1bmN0aW9uIHBsYXlOb3RlKCkge1xyXG4gICAgbGV0IG5leHRQbGF5VGltZSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcclxuICAgIGxldCBkdXJhdGlvbjtcclxuXHJcbiAgICBpZiAoIHRoaXMudGVtcG9Qb3NpdGlvbiA8IHRoaXMudGVtcG9zLmxlbmd0aCAmJiB0aGlzLnRlbXBvc1t0aGlzLnRlbXBvUG9zaXRpb25dWzBdIDw9IHRoaXMudGltZSApIHtcclxuICAgICAgICB0aGlzLnRlbXBvID0gdGhpcy50ZW1wb3NbdGhpcy50ZW1wb1Bvc2l0aW9uXVsxXTtcclxuICAgICAgICB0aGlzLnRlbXBvUG9zaXRpb24gPSB0aGlzLnRlbXBvUG9zaXRpb24gKyAxO1xyXG5cclxuICAgICAgICBpZiAoIHRoaXMudGVtcG9Qb3NpdGlvbiA8IHRoaXMudGVtcG9zLmxlbmd0aCApIHtcclxuICAgICAgICAgICAgbmV4dFBsYXlUaW1lID0gTWF0aC5taW4oIG5leHRQbGF5VGltZSwgdGhpcy50ZW1wb3NbdGhpcy50ZW1wb1Bvc2l0aW9uXVswXSApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsZXQgbm90ZVBsYXllZDtcclxuXHJcbiAgICBmb3IgKCBjb25zdCBjaGFubmVsSW5kZXggaW4gdGhpcy5jaGFubmVscyApIHtcclxuICAgICAgICBjb25zdCBjaGFubmVsID0gdGhpcy5jaGFubmVsc1tjaGFubmVsSW5kZXhdO1xyXG5cclxuICAgICAgICBpZiAoIHRoaXMucG9zaXRpb25zW2NoYW5uZWxJbmRleF0gPCBjaGFubmVsLmxlbmd0aCApIHtcclxuICAgICAgICAgICAgY29uc3QgW3RpbWUsIHBpdGNoLCB2b2x1bWUsIGxpbmtdID0gY2hhbm5lbFt0aGlzLnBvc2l0aW9uc1tjaGFubmVsSW5kZXhdXTtcclxuXHJcbiAgICAgICAgICAgIGlmICggdGltZSA8PSB0aGlzLnRpbWUgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzYyA9IHRoaXMuc291bmRbY2hhbm5lbEluZGV4XTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIHBpdGNoID4gMCApIHtcclxuICAgICAgICAgICAgICAgICAgICBzYy5zZXRWb2x1bWUoIE1hdGgucG93KCBNYXRoLm1pbiggMSwgdm9sdW1lIC8gMTUgKSwgMiApICogdGhpcy52b2x1bWUgKTtcclxuICAgICAgICAgICAgICAgICAgICBzYy5zZXRQaXRjaCggcGl0Y2ggLyA0NDAgKiB0aGlzLnBpdGNoTW9kICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggIWxpbmsgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2MucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub3RlUGxheWVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzYy5zZXRQYXVzZSggdHJ1ZSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzYy5zZXRQYXVzZSggZmFsc2UgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9wbGF5ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzYyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Muc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjW2NoYW5uZWxJbmRleF0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uc1tjaGFubmVsSW5kZXhdID0gdGhpcy5wb3NpdGlvbnNbY2hhbm5lbEluZGV4XSArIDE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICggdGhpcy5wb3NpdGlvbnNbY2hhbm5lbEluZGV4XSA8IGNoYW5uZWwubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgbmV4dFBsYXlUaW1lID0gTWF0aC5taW4oIG5leHRQbGF5VGltZSwgY2hhbm5lbFt0aGlzLnBvc2l0aW9uc1tjaGFubmVsSW5kZXhdXVswXSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICggbmV4dFBsYXlUaW1lIDwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZICkge1xyXG4gICAgICAgIGxldCByZW1haW4gPSBVdGlscy5jbGFtcCggVGltZXIubm93KCkgLSB0aGlzLm1zLCAtMTAwLCAxMDAgKTtcclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLnRpbWUgPT0gMCApIHtcclxuICAgICAgICAgICAgcmVtYWluID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGR1cmF0aW9uID0gKCBuZXh0UGxheVRpbWUgLSB0aGlzLnRpbWUgKSAvIHRoaXMudGVtcG8gKiAxMDAwIC8gdGhpcy5zcGVlZDtcclxuICAgICAgICB0aGlzLnRpbWVyID0gVGltZXIuZGVsYXllZENhbGwoIGR1cmF0aW9uIC0gcmVtYWluICogMC41LCBwbGF5Tm90ZSwgdGhpcyApO1xyXG4gICAgICAgIHRoaXMudGltZSA9IG5leHRQbGF5VGltZTtcclxuICAgICAgICB0aGlzLm1zID0gVGltZXIubm93KCkgICsgZHVyYXRpb247XHJcblxyXG4gICAgICAgIGlmICggbm90ZVBsYXllZCApIHtcclxuICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBFdmVudCggXCJub3RlXCIsIHsgZHVyYXRpb246IGR1cmF0aW9uIH0gKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCggZSApO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coIFwiRW5kIG9mIHNvbmdcIiApO1xyXG4gICAgICAgIHRoaXMuc3RvcCgpO1xyXG4gICAgICAgIGNvbnN0IGUgPSBuZXcgRXZlbnQoIFwiY29tcGxldGVcIiApO1xyXG5cclxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoIGUgKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYWJpTU1MIGV4dGVuZHMgRXZlbnREaXNwYXRjaGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCBtbWwsIGluc3RydW1lbnQgKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmluc3RydW1lbnQgPSBpbnN0cnVtZW50O1xyXG4gICAgICAgIHRoaXMuY2hhbm5lbHMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy50ZW1wb3MgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgW3RoaXMuY2hhbm5lbHMsIHRoaXMudGVtcG9zXSA9IHBhcnNlTU1MLmNhbGwoIHRoaXMsbW1sICk7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbnMgPSBbXTtcclxuICAgICAgICB0aGlzLnRlbXBvUG9zaXRpb24gPSAwO1xyXG4gICAgICAgIHRoaXMudGVtcG8gPSAxMjA7XHJcbiAgICAgICAgdGhpcy5zb3VuZCA9IFtdO1xyXG4gICAgICAgIHRoaXMuc2MgPSBbXTtcclxuICAgICAgICB0aGlzLnNwZWVkID0gMS4wO1xyXG4gICAgICAgIHRoaXMucGl0Y2hNb2QgPSAxLjA7XHJcbiAgICAgICAgdGhpcy52b2x1bWUgPSAxLjA7XHJcbiAgICAgICAgY29uc29sZS5sb2coIHRoaXMuY2hhbm5lbHMgKTtcclxuICAgICAgICBmb3IgKCBjb25zdCBpIGluIHRoaXMuY2hhbm5lbHMgKSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25zW2ldID0gMDtcclxuXHJcbiAgICAgICAgICAgIGlmICggdHlwZW9mIGluc3RydW1lbnQgPT0gXCJvYmplY3RcIiApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc291bmRbaV0gPSBuZXcgU291bmQoIGluc3RydW1lbnRbaV0gKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc291bmRbaV0gPSBuZXcgU291bmQoIGluc3RydW1lbnQgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRTcGVlZCggdiApIHtcclxuICAgICAgICB0aGlzLnNwZWVkID0gdjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRQaXRjaCggdiApIHtcclxuICAgICAgICB0aGlzLnBpdGNoTW9kID0gdjtcclxuICAgIH1cclxuXHJcbiAgICBwbGF5KCkge1xyXG4gICAgICAgIHRoaXMudGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5tcyA9IFRpbWVyLm5vdygpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCBcIkJlZ2luIHNvbmdcIiApO1xyXG4gICAgICAgIHBsYXlOb3RlLmNhbGwoIHRoaXMgKTtcclxuICAgIH1cclxuXHJcbiAgICBzdG9wKCkge1xyXG4gICAgICAgIGlmICggdGhpcy50aW1lciApIHtcclxuICAgICAgICAgICAgdGhpcy50aW1lci5zdG9wKCk7XHJcbiAgICAgICAgICAgIHRoaXMudGltZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yICggY29uc3QgaSBpbiB0aGlzLmNoYW5uZWxzICkge1xyXG4gICAgICAgICAgICBpZiAoIHRoaXMuc2NbaV0gKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjW2ldLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NbaV0gPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldFZvbHVtZSggdiApIHtcclxuICAgICAgICB0aGlzLnZvbHVtZSA9IHY7XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsIi8qXHJcblxyXG7ruYTtirjsl7DsgrAg67KE7KCE7Jy866GcIOuwlOq+vCDrnpzrjaRcclxuXHJcbmwxID0gbGNnKDApIC8vIExpbmVhciBjb25ncnVlbnRpYWwgZ2VuZXJhdG9yIChBbnNpIEMgcGFyYW1zKTtcclxubDIgPSBsY2coMCwgJ25yJykgLy9MaW5lYXIgY29uZ3J1ZW50aWFsIGdlbmVyYXRvciAoTnVtZXJpY2FsIHJlY2lwZXMgcGFyYW1zKTtcclxubDMgPSBsY2coMCwgJ212YycpIC8vIExpbmVhciBjb25ncnVlbnRpYWwgZ2VuZXJhdG9yIChNaWNyb3NvZnQgVmlzdWFsIEMgcGFyYW1zKTtcclxuYzEgPSBtd2MoMCkgLy8gTXVsdGlwbHktd2l0aC1jYXJyeSAoQW5zaSBDIHBhcmFtcyk7XHJcbmMyID0gbXdjKDAsICducicpIC8vIE11bHRpcGx5LXdpdGgtY2FycnkgKE51bWVyaWNhbCByZWNpcGVzIHBhcmFtcyk7XHJcbmMzID0gbXdjKDAsICdtdmMnKSAvLyBNdWx0aXBseS13aXRoLWNhcnJ5IChNaWNyb3NvZnQgVmlzdWFsIEMgcGFyYW1zKTtcclxubSA9IHR3aXN0ZXIoMCkgLy8gTWVyc2VubmUgdHdpc3RlcjtcclxuXHJcbiovXHJcblxyXG5jb25zdCBfcmFuZG9tID0ge1xyXG4gICAgcmFuZG9tOiBmdW5jdGlvbiAoIGksIGogKSB7XHJcblxyXG4gICAgICAgIGlmICggaSA9PSBudWxsICkge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgfSBlbHNlIGlmICggaiA9PSBudWxsICkge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoIE1hdGgucmFuZG9tKCkgKiBpICsgMSApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vciggTWF0aC5yYW5kb20oKSAqICggaiAtIGkgKSArIDEgKSArIGk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICB9XHJcbn07XHJcblxyXG5mdW5jdGlvbiBub3JtYWxpemUoIG4gKSB7IC8va2VlcCBudW1iZXJzIGF0IDMyIGJpdHM7XHJcblxyXG4gICAgLy9yZXR1cm4gbiAlIDB4MTAwMDAwMDAwO1xyXG4gICAgcmV0dXJuIG4gJiAweGZmZmZmZmZmO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gc2VlZCgpIHtcclxuXHJcbiAgICAvL3JldHVybiBub3JtYWxpemUodG9udW1iZXIodG9zdHJpbmcob3MudGltZSgpKTpyZXZlcnNlKCkpKTtcclxuICAgIHJldHVybiBub3JtYWxpemUoICtuZXcgRGF0ZSgpICk7XHJcblxyXG59XHJcblxyXG4vL01lcnNlbm5lIHR3aXN0ZXI7XHJcbmNsYXNzIG1lcnNlbm5lX3R3aXN0ZXIge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCBzICkge1xyXG5cclxuICAgICAgICB0aGlzLm10ID0gW107XHJcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XHJcbiAgICAgICAgdGhpcy5yYW5kb21zZWVkKCBzICk7XHJcbiAgICBcclxuICAgIH1cclxuXHJcbiAgICByYW5kb21zZWVkKCBzICkge1xyXG5cclxuICAgICAgICBpZiAoIHMgPT0gbnVsbCApIHMgPSBzZWVkKCk7XHJcbiAgICAgICAgdGhpcy5tdFswXSA9IG5vcm1hbGl6ZSggcyApO1xyXG4gICAgICAgIGZvciAoIGxldCBpID0gMTsgaSA8PSA2MjM7IGkrKyApIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubXRbaV0gPSBub3JtYWxpemUoIDB4NmMwNzg5NjUgKiAoIHRoaXMubXRbaSAtIDFdIF4gKCAoIHRoaXMubXRbaSAtIDFdIC8gMHg0MDAwMDAwMCApID4+IDAgKSArIGkgKSApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHJhbmRvbSggYSwgYiApIHtcclxuXHJcbiAgICAgICAgbGV0IHk7XHJcbiAgICAgICAgaWYgKCB0aGlzLmluZGV4ID09IDAgKSB7XHJcblxyXG4gICAgICAgICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPD0gNjIzOyBpKysgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgLy95ID0gYml0X29yKG1hdGhfZmxvb3IodGhpcy5tdFtpXSAvIDB4ODAwMDAwMDApICogMHg4MDAwMDAwMCwgdGhpcy5tdFsoaSArIDEpICUgNjI0XSAlIDB4ODAwMDAwMDApO1xyXG4gICAgICAgICAgICAgICAgeSA9IHRoaXMubXRbKCBpICsgMSApICUgNjI0XSAmIDB4N2ZmZmZmZmY7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm10W2ldID0gdGhpcy5tdFsoIGkgKyAzOTcgKSAlIDYyNF0gXiAoIHkgPj4gMSApO1xyXG4gICAgICAgICAgICAgICAgaWYgKCAoIHkgJiAxICkgIT0gMCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tdFtpXSA9IHRoaXMubXRbaV0gXiAweDk5MDhiMGRmOyBcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICB5ID0gdGhpcy5tdFt0aGlzLmluZGV4XTtcclxuICAgICAgICB5ID0geSBeICggeSAvIDB4ODAwICk7XHJcbiAgICAgICAgeSA9IHkgXiAoIG5vcm1hbGl6ZSggeSA8PCA3ICkgJiAweDlkMmM1NjgwICk7XHJcbiAgICAgICAgeSA9IHkgXiAoIG5vcm1hbGl6ZSggeSA8PCAxNSApICYgMHhlZmM2MDAwMCApO1xyXG4gICAgICAgIHkgPSB5IF4gKCB5ID4+IDE0ICk7XHJcbiAgICAgICAgeSA9IHkgPj4+IDA7XHJcbiAgICAgICAgdGhpcy5pbmRleCA9ICggdGhpcy5pbmRleCArIDEgKSAlIDYyNDtcclxuICAgICAgICBpZiAoIGEgPT0gbnVsbCApIHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB5IC8gMHgxMDAwMDAwMDA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgfSBlbHNlIGlmICggYiA9PSBudWxsICkge1xyXG5cclxuICAgICAgICAgICAgaWYgKCBhID09IDAgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiAxICsgKCB5ICUgYSApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYSArICggeSAlICggYiAtIGEgKyAxICkgKTtcclxuICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbi8vTGluZWFyIENvbmdydWVudGlhbCBHZW5lcmF0b3I7XHJcbmNsYXNzIGxpbmVhcl9jb25ncnVlbnRpYWxfZ2VuZXJhdG9yIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvciggcyxyICkge1xyXG5cclxuICAgICAgICB0aGlzLmEgPSAxMTAzNTE1MjQ1O1xyXG4gICAgICAgIHRoaXMuYyA9IDEyMzQ1O1xyXG4gICAgICAgIHRoaXMubSA9IDB4MTAwMDAwMDAwOyAgLy9mcm9tIEFuc2kgQztcclxuICAgICAgICBpZiAoIHIgKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIHIgPT0gXCJuclwiICkge1xyXG5cclxuICAgICAgICAgICAgICAgIFt0aGlzLmEsIHRoaXMuYywgdGhpcy5tXSA9IFsxNjY0NTI1LCAxMDEzOTA0MjIzLCAweDEwMDAwMDAwMF07IC8vZnJvbSBOdW1lcmljYWwgUmVjaXBlcy5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIHIgPT0gXCJtdmNcIiApIHtcclxuXHJcbiAgICAgICAgICAgICAgICBbdGhpcy5hLCB0aGlzLmMsIHRoaXMubV0gPSBbMjE0MDEzLCAyNTMxMDExLCAweDEwMDAwMDAwMF07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9Ly9mcm9tIE1WQztcclxuICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yYW5kb21zZWVkKCBzICk7XHJcbiAgICBcclxuICAgIH1cclxuXHJcbiAgICByYW5kb20oIGEsIGIgKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHkgPSAoIHRoaXMuYSAqIHRoaXMueCArIHRoaXMuYyApICUgdGhpcy5tO1xyXG5cclxuICAgICAgICB0aGlzLnggPSB5O1xyXG4gICAgICAgIGlmICggYSA9PSBudWxsICkge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHkgLyAweDEwMDAwMDAwMDtcclxuICAgICAgICBcclxuICAgICAgICB9IGVsc2UgaWYgKCBiID09IG51bGwgKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIGEgPT0gMCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4geTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDEgKyAoIHkgJSBhICk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhICsgKCB5ICUgKCBiIC0gYSArIDEgKSApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHJhbmRvbXNlZWQoIHMgKSB7XHJcblxyXG4gICAgICAgIGlmICggcyA9PSBudWxsICkgcyA9IHNlZWQoKTtcclxuICAgICAgICB0aGlzLnggPSBub3JtYWxpemUoIHMgKTtcclxuICAgIFxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuLy8gTXVsdGlwbHktd2l0aC1jYXJyeTtcclxuY2xhc3MgbXVsdGlwbHlfd2l0aF9jYXJyeSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoIHMsciApIHtcclxuXHJcbiAgICAgICAgdGhpcy5hID0gMTEwMzUxNTI0NTtcclxuICAgICAgICB0aGlzLmMgPSAxMjM0NTtcclxuICAgICAgICB0aGlzLm0gPSAweDEwMDAwMDAwMDsgIC8vZnJvbSBBbnNpIEM7XHJcbiAgICAgICAgaWYgKCByICkge1xyXG5cclxuICAgICAgICAgICAgaWYgKCByID09IFwibnJcIiApIHtcclxuXHJcbiAgICAgICAgICAgICAgICBbdGhpcy5hLCB0aGlzLmMsIHRoaXMubV0gPSBbMTY2NDUyNSwgMTAxMzkwNDIyMywgMHgxMDAwMDAwMDBdOyAvL2Zyb20gTnVtZXJpY2FsIFJlY2lwZXMuXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCByID09IFwibXZjXCIgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgW3RoaXMuYSwgdGhpcy5jLCB0aGlzLm1dID0gWzIxNDAxMywgMjUzMTAxMSwgMHgxMDAwMDAwMDBdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgfS8vZnJvbSBNVkM7XHJcbiAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaWMgPSB0aGlzLmM7XHJcbiAgICAgICAgdGhpcy5yYW5kb21zZWVkKCBzICk7XHJcbiAgICBcclxuICAgIH1cclxuXHJcbiAgICByYW5kb20oIGEsIGIgKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IG0gPSB0aGlzLm07XHJcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuYSAqIHRoaXMueCArIHRoaXMuYztcclxuICAgICAgICBjb25zdCB5ID0gdCAlIG07XHJcblxyXG4gICAgICAgIHRoaXMueCA9IHk7XHJcbiAgICAgICAgdGhpcy5jID0gdCAvIG0gPj4gMDtcclxuICAgICAgICBpZiAoIGEgPT0gbnVsbCApIHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB5IC8gMHgxMDAwMDAwMDA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgfSBlbHNlIGlmICggYiA9PSBudWxsICkge1xyXG5cclxuICAgICAgICAgICAgaWYgKCBhID09IDAgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiAxICsgKCB5ICUgYSApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYSArICggeSAlICggYiAtIGEgKyAxICkgKTtcclxuICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgIH1cclxuXHJcbiAgICByYW5kb21zZWVkKCBzICkge1xyXG5cclxuICAgICAgICBpZiAoIHMgPT0gbnVsbCApIHMgPSBzZWVkKCk7XHJcbiAgICAgICAgdGhpcy5jID0gdGhpcy5pYztcclxuICAgICAgICB0aGlzLnggPSBub3JtYWxpemUoIHMgKTtcclxuICAgIFxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIEB0aGlzIFJhbmRvbVxyXG4gKlxyXG4gKiBAcGFyYW0ge251bWJlcn0gYmFsYW5jZVxyXG4gKiBAcGFyYW0ge251bWJlcn0gYmlhc1xyXG4gKiBAcGFyYW0ge251bWJlcn0gbWluXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhcclxuICogQHJldHVybnMge251bWJlcn1cclxuICovXHJcbmZ1bmN0aW9uIF9nZXREYW1hZ2UoIGJhbGFuY2UsIGJpYXMsIG1pbiwgbWF4ICkge1xyXG5cclxuICAgIGNvbnN0IGdlbmVyYXRvciA9IHRoaXMuZ2VuZXJhdG9yIHx8IF9yYW5kb207XHJcblxyXG4gICAgZnVuY3Rpb24gY3VydmVGdW5jKCBhLCBiICkge1xyXG5cclxuICAgICAgICByZXR1cm4gTWF0aC5wb3coIGEsIDEgLyAoIGIgKiAwLjY2ICsgMC4zNCApICk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGxldCByO1xyXG4gICAgZG8ge1xyXG5cclxuICAgICAgICBjb25zdCByMCA9IGdlbmVyYXRvci5yYW5kb20oKTtcclxuICAgICAgICBjb25zdCByMSA9IGdlbmVyYXRvci5yYW5kb20oKTtcclxuXHJcbiAgICAgICAgaWYgKCByMCA8IDAuNSApIHtcclxuXHJcbiAgICAgICAgICAgIGlmICggYmlhcyA8IDAuNSApIHtcclxuXHJcbiAgICAgICAgICAgICAgICByID0gY3VydmVGdW5jKCByMSwgYmFsYW5jZSApICogKCAxIC0gYmlhcyApIC0gMSArIGJpYXMgKyBiaWFzO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICByID0gY3VydmVGdW5jKCByMSwgYmFsYW5jZSApICogYmlhcztcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGlmICggYmlhcyA8IDAuNSApIHtcclxuXHJcbiAgICAgICAgICAgICAgICByID0gKCAxIC0gY3VydmVGdW5jKCAxIC0gcjEsIGJhbGFuY2UgKSApICogKCAxIC0gYmlhcyApICsgYmlhcztcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgciA9ICggMSAtIGN1cnZlRnVuYyggMSAtIHIxLCBiYWxhbmNlICkgKSAqIGJpYXMgKyBiaWFzO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfSB3aGlsZSAoIHIgPCAwIHx8IHIgPj0gMSApO1xyXG4gICAgaWYgKCBtYXggKSB7XHJcblxyXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKCBtaW4gKyAoIG1heCArIDEgLSBtaW4gKSAqIHIgKTtcclxuXHJcbiAgICB9IGVsc2UgaWYgKCBtaW4gKSB7XHJcblxyXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKCAxICsgbWF4ICogciApO1xyXG5cclxuICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgIHJldHVybiByO1xyXG5cclxuICAgIH1cclxuXHJcbn1cclxuXHJcblxyXG5jbGFzcyBSYW5kb20ge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCBzZWVkLCBtZXRob2QsIGFyZyApIHtcclxuXHJcbiAgICAgICAgc2VlZCA9IHNlZWQgIT0gbnVsbCA/IHNlZWQgOiAoICtuZXcgRGF0ZSgpICk7XHJcbiAgICAgICAgdGhpcy5zZWVkID0gc2VlZDtcclxuICAgICAgICB0aGlzLm1ldGhvZCA9IG1ldGhvZDtcclxuICAgICAgICB0aGlzLmFyZyA9IGFyZztcclxuICAgICAgICBpZiAoIG1ldGhvZCA9PSBcIm13Y1wiICkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5nZW5lcmF0b3IgPSBuZXcgbXVsdGlwbHlfd2l0aF9jYXJyeSggc2VlZCwgYXJnICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgfSBlbHNlIGlmICggbWV0aG9kID09IFwibGNnXCIgKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRvciA9IG5ldyBsaW5lYXJfY29uZ3J1ZW50aWFsX2dlbmVyYXRvciggc2VlZCwgYXJnICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdG9yID0gbmV3IG1lcnNlbm5lX3R3aXN0ZXIoIHNlZWQgKTtcclxuICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcj99IGFcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyP30gYlxyXG4gICAgICogQHJldHVybnMge251bWJlcn1cclxuICAgICAqIEBtZW1iZXJvZiBSYW5kb21cclxuICAgICAqL1xyXG4gICAgcmFuZG9tKCBhLCBiICkge1xyXG5cclxuICAgICAgICBjb25zb2xlLmFzc2VydCggKCBhID09IG51bGwgJiYgYiA9PSBudWxsICkgfHwgKCBhICE9IG51bGwgJiYgYiAhPSBudWxsICksYHJhbmRvbSgke2F9LCR7Yn0pIOq1rOusuOydgCDtl4jsmqnrkJjsp4Ag7JWK7J2MLiByYW5kb20oMSxhKSDtmLnsnYAgcmFuZG9tKDAsYSnrpbwg66qF7ZmV7Z6IIOyTuCDqsoNgICk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvci5yYW5kb20oIGEsIGIgKTtcclxuICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGdldFJhbmRvbUZ1bmMoKSB7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvci5yYW5kb20uYmluZCggdGhpcy5nZW5lcmF0b3IgKTsgXHJcbiAgICBcclxuICAgIH1cclxuXHJcbiAgICByYW5kb21zZWVkKCBzICkge1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0b3IucmFuZG9tc2VlZCggcyApO1xyXG4gICAgXHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIO2FjOydtOu4lOydhCDshJ7slrTshJwg64+M66Ck7KSMXHJcbiAgICBzaHVmZmxlKCB0ICkge1xyXG5cclxuICAgICAgICBjb25zdCBnZW5lcmF0b3IgPSB0aGlzLmdlbmVyYXRvciB8fCBfcmFuZG9tO1xyXG4gICAgICAgIGNvbnN0IHQxID0gW107XHJcbiAgICAgICAgY29uc3QgdDIgPSBbXTtcclxuICAgICAgICBmb3IgKCBsZXQgaSA9IDE7IGkgPD0gdDsgaSsrICkge1xyXG5cclxuICAgICAgICAgICAgdDFbaV0gPSB0W2ldO1xyXG4gICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKCBsZXQgaSA9IDE7IGkgPD0gdDsgaSsrICkge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcGljayA9IGdlbmVyYXRvci5yYW5kb20oIHQxLmxlbmd0aCApO1xyXG5cclxuICAgICAgICAgICAgdDJbdDIubGVuZ3RoICsgMV0gPSB0MVtwaWNrXTtcclxuICAgICAgICAgICAgdDEuc3BsaWNlKCBwaWNrLCAxICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdDI7XHJcbiAgICBcclxuICAgIH1cclxuXHJcbiAgICBib29sKCkge1xyXG5cclxuICAgICAgICBjb25zdCBnZW5lcmF0b3IgPSB0aGlzLmdlbmVyYXRvciB8fCBfcmFuZG9tO1xyXG5cclxuICAgICAgICByZXR1cm4gZ2VuZXJhdG9yLnJhbmRvbSggMiApID09IDEgPyB0cnVlIDogZmFsc2U7XHJcbiAgICBcclxuICAgIH1cclxuXHJcbiAgICByYW5nZWkoIGEsIGIgKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGdlbmVyYXRvciA9IHRoaXMuZ2VuZXJhdG9yIHx8IF9yYW5kb207XHJcblxyXG4gICAgICAgIHJldHVybiBnZW5lcmF0b3IucmFuZG9tKCBNYXRoLmZsb29yKCBhICksIE1hdGguZmxvb3IoIGIgKSApO1xyXG4gICAgXHJcbiAgICB9XHJcblxyXG4gICAgcmFuZ2VmKCBhLCBiICkge1xyXG5cclxuICAgICAgICBjb25zdCBnZW5lcmF0b3IgPSB0aGlzLmdlbmVyYXRvciB8fCBfcmFuZG9tO1xyXG4gICAgICAgIGlmICggYSAhPSBudWxsICYmIGIgIT0gbnVsbCApIHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBnZW5lcmF0b3IucmFuZG9tKCkgKiAoIGIgLSBhICkgKyBhO1xyXG4gICAgICAgIFxyXG4gICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZ2VuZXJhdG9yLnJhbmRvbSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHBpY2soIGEsIGIsIG4gKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGdlbmVyYXRvciA9IHRoaXMuZ2VuZXJhdG9yIHx8IF9yYW5kb207XHJcbiAgICAgICAgY29uc3QgdCA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHQyID0gW107XHJcblxyXG4gICAgICAgIGNvbnNvbGUuYXNzZXJ0KCBiIC0gYSArIDEgPj0gbiwgXCLrspTsnITrs7Tri6Qg66eO7J2AIOuenOuNpCDqsK/siJjrpbwg7JqU6rWs7ZWoXCIgKTtcclxuICAgICAgICBmb3IgKCBsZXQgaSA9IDE7IGkgPD0gbjsgaSsrICkge1xyXG5cclxuICAgICAgICAgICAgbGV0IHBpY2s7XHJcbiAgICAgICAgICAgIGRvIHtcclxuXHJcbiAgICAgICAgICAgICAgICBwaWNrID0gZ2VuZXJhdG9yLnJhbmRvbSggYSwgYiApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgfSB3aGlsZSAoIHRbcGlja10gKTtcclxuICAgICAgICAgICAgdFtwaWNrXSA9IHRydWU7XHJcbiAgICAgICAgICAgIHQyLnB1c2goIHBpY2sgKTtcclxuICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0MjtcclxuICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGdldERhbWFnZSggYmFsYW5jZSwgYmlhcywgbWluLCBtYXggKSB7XHJcblxyXG4gICAgICAgIHJldHVybiBfZ2V0RGFtYWdlLmNhbGwoIHRoaXMsIGJhbGFuY2UsIGJpYXMsIG1pbiwgbWF4ICk7XHJcbiAgICBcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0RGFtYWdlKCBiYWxhbmNlLCBiaWFzLCBtaW4sIG1heCApIHtcclxuXHJcbiAgICAgICAgX2dldERhbWFnZS5jYWxsKCB0aGlzLCBiYWxhbmNlLCBiaWFzLCBtaW4sIG1heCApO1xyXG4gICAgXHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZSgpIHtcclxuXHJcbiAgICAgICAgY29uc3QgdCA9IEpTT04ucGFyc2UoIEpTT04uc3RyaW5naWZ5KCB0aGlzICkgKTtcclxuICAgICAgICBpZiAoIHQuZ2VuZXJhdG9yLm10ICkge1xyXG5cclxuICAgICAgICAgICAgZm9yICggY29uc3QgayBpbiB0LmdlbmVyYXRvci5tdCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB2ID0gdC5nZW5lcmF0b3IubXRba107XHJcblxyXG4gICAgICAgICAgICAgICAgdC5nZW5lcmF0b3IubXRba10gPSB2O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICBcclxuICAgIH1cclxuXHJcbiAgICBsb2FkKCB0ICkge1xyXG5cclxuICAgICAgICBpZiAoIHQubWV0aG9kID09IFwibXdjXCIgKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRvciA9IG5ldyBtdWx0aXBseV93aXRoX2NhcnJ5KCB0LnNlZWQsIHQuYXJnICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgfSBlbHNlIGlmICggdC5tZXRob2QgPT0gXCJsY2dcIiApIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdG9yID0gbmV3IGxpbmVhcl9jb25ncnVlbnRpYWxfZ2VuZXJhdG9yKCB0LnNlZWQsIHQuYXJnICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdG9yID0gbmV3IG1lcnNlbm5lX3R3aXN0ZXIoIHQuc2VlZCApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKCBjb25zdCBrIGluIHQgKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB2ID0gdFtrXTtcclxuICAgICAgICAgICAgaWYgKCBrID09IFwiZ2VuZXJhdG9yXCIgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICggY29uc3QgazIgaW4gdiApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdjIgPSB2W2syXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiB2MiA9PSBcIm9iamVjdFwiICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbiggdGhpc1trXVtrMl0sdjIgKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1trXVtrMl0gPSB2MjtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIHR5cGVvZiB2ID09IFwib2JqZWN0XCIgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbiggdGhpc1trXSwgdiApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzW2tdID0gdjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgIH1cclxuXHJcbn1cclxuXHJcblJhbmRvbS5wcm90b3R5cGUuZ2V0ID0gUmFuZG9tLnByb3RvdHlwZS5yYW5kb207XHJcblxyXG5leHBvcnQgZGVmYXVsdCBSYW5kb207XHJcbiIsIlxyXG5pbXBvcnQgeyBTaGFkZXIgfSBmcm9tICdAZW5naW5lL1NoYWRlcic7XHJcbi8vQHRzLWlnbm9yZVxyXG4vLyBpbXBvcnQgZGVmYXVsdFZlcnRleFNyYyBmcm9tIFwiQGVuZ2luZS9yZW5kZXIvc2hhZGVycy9kZWZhdWx0LnZzXCI7XHJcblxyXG4vLyB1bmlmb3JtIG1hdDMgdHJhbnNsYXRpb25NYXRyaXg7XHJcbi8vIHVuaWZvcm0gbWF0MyBwcm9qZWN0aW9uTWF0cml4O1xyXG5cclxuXHJcbmNsYXNzIFNoYWRlckhlbHBlciB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNoYWRlck5hbWVcclxuICAgICAqIEByZXR1cm5zIHtTaGFkZXJ9XHJcbiAgICAgKiBAbWVtYmVyb2YgU2hhZGVySGVscGVyXHJcbiAgICAgKi9cclxuICAgIGdldFNoYWRlciggc2hhZGVyTmFtZSApIHtcclxuICAgICAgICByZXR1cm4gU2hhZGVySGVscGVyLnNoYWRlcnNbc2hhZGVyTmFtZV07XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5jb25zdCBkZWZhdWx0VmVydGV4U3JjID0gYFxyXG4gICAgcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XHJcblxyXG4gICAgYXR0cmlidXRlIHZlYzIgYV9wb3NpdGlvbjtcclxuICAgIGF0dHJpYnV0ZSB2ZWM0IGFfY29sb3I7XHJcbiAgICBhdHRyaWJ1dGUgdmVjMiBhX3RleENvb3JkO1xyXG5cclxuICAgIHVuaWZvcm0gbWF0NCB1X3ZpZXdNYXRyaXg7XHJcbiAgICB1bmlmb3JtIG1hdDQgdV93b3JsZE1hdHJpeDtcclxuICAgIHVuaWZvcm0gdmVjMiB1X2FuY2hvcjtcclxuXHJcbiAgICB2YXJ5aW5nIG1lZGl1bXAgdmVjMiB2X3RleENvb3JkO1xyXG4gICAgdmFyeWluZyBtZWRpdW1wIHZlYzIgdl9wb3NpdGlvbjtcclxuICAgIHZhcnlpbmcgbG93cCB2ZWM0IHZfY29sb3JPdmVycmlkZTtcclxuXHJcbiAgICB2b2lkIG1haW4oKSB7XHJcbiAgICAgICAgbWF0NCBhbmNob3JNYXQgPSBtYXQ0KDEpO1xyXG5cclxuICAgICAgICBhbmNob3JNYXRbM10ueHkgPSB1X2FuY2hvcjtcclxuICAgICAgICBnbF9Qb3NpdGlvbiA9IHZlYzQoKHVfdmlld01hdHJpeCAqIHVfd29ybGRNYXRyaXggKiBhbmNob3JNYXQgKiB2ZWM0KGFfcG9zaXRpb24sIDAuMCwxLjApKS54eSwgMCwgMSk7XHJcbiAgICAgICAgdl9wb3NpdGlvbiA9IGdsX1Bvc2l0aW9uLnh5O1xyXG4gICAgICAgIHZfY29sb3JPdmVycmlkZSA9IHZlYzQoYV9jb2xvci54eXoqYV9jb2xvci53d3csMS4wKTtcclxuICAgICAgICB2X3RleENvb3JkID0gYV90ZXhDb29yZDtcclxuICAgIH1cclxuYDtcclxuXHJcblxyXG5TaGFkZXJIZWxwZXIuc2hhZGVycyA9IHtcclxuICAgIFwibWFza1wiOiBuZXcgU2hhZGVyKFxyXG4gICAgICAgIGBcclxuICAgICAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcclxuXHJcbiAgICAgICAgYXR0cmlidXRlIHZlYzIgYV9wb3NpdGlvbjtcclxuICAgICAgICBhdHRyaWJ1dGUgdmVjNCB1dnV2O1xyXG4gICAgICAgIGF0dHJpYnV0ZSB2ZWMyIGFfdGV4Q29vcmQ7XHJcblxyXG4gICAgICAgIHVuaWZvcm0gbWF0NCB1X3ZpZXdNYXRyaXg7XHJcbiAgICAgICAgdW5pZm9ybSBtYXQ0IHVfd29ybGRNYXRyaXg7XHJcbiAgICAgICAgdW5pZm9ybSB2ZWMyIHVfYW5jaG9yO1xyXG5cclxuICAgICAgICB2YXJ5aW5nIG1lZGl1bXAgdmVjMiB2X3RleENvb3JkO1xyXG4gICAgICAgIHZhcnlpbmcgbWVkaXVtcCB2ZWMyIHZfcG9zaXRpb247XHJcblxyXG4gICAgICAgIHZhcnlpbmcgbWVkaXVtcCB2ZWMyIHZfdGV4Q29vcmQxO1xyXG4gICAgICAgIHZhcnlpbmcgbWVkaXVtcCB2ZWMyIHZfdGV4Q29vcmQyO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZvaWQgbWFpbigpIHtcclxuICAgICAgICAgICAgbWF0NCBhbmNob3JNYXQgPSBtYXQ0KDEpO1xyXG5cclxuICAgICAgICAgICAgYW5jaG9yTWF0WzNdLnh5ID0gdV9hbmNob3I7XHJcbiAgICAgICAgICAgIGdsX1Bvc2l0aW9uID0gdmVjNCgodV92aWV3TWF0cml4ICogdV93b3JsZE1hdHJpeCAqIGFuY2hvck1hdCAqIHZlYzQoYV9wb3NpdGlvbiwgMC4wLDEuMCkpLnh5LCAwLCAxKTtcclxuXHJcbiAgICAgICAgICAgIHZfcG9zaXRpb24gPSBnbF9Qb3NpdGlvbi54eTtcclxuICAgICAgICAgICAgLy8yNTYqMTI4XHJcbiAgICAgICAgICAgIHZlYzQgdXZ1djIgPSB1dnV2Lnd6eXg7XHJcbiAgICAgICAgICAgIC8vIHZfdGV4Q29vcmQxID0gKCh1dnV2Mi53eiAqIHZlYzIoMi4wLDIuMCozLjAvMi4wKSAgKSp2ZWMyKDE4LjAvMTYuMCwyNi4wLzI0LjApKSAvIHZlYzIoNTEyLjAsMjU2LjApO1xyXG4gICAgICAgICAgICAvLyB2X3RleENvb3JkMiA9ICgodXZ1djIueXggKiB2ZWMyKDIuMCwyLjAqMy4wLzIuMCkgICkqdmVjMigxOC4wLzE2LjAsMjYuMC8yNC4wKSkgLyB2ZWMyKDUxMi4wLDI1Ni4wKTtcclxuICAgICAgICAgICAgdl90ZXhDb29yZDEgPSB1dnV2Mi53eiAvIHZlYzIoNTEyLjAsMjU2LjApO1xyXG4gICAgICAgICAgICB2X3RleENvb3JkMiA9IHV2dXYyLnl4IC8gdmVjMig1MTIuMCwyNTYuMCk7XHJcblxyXG4gICAgICAgICAgICB2X3RleENvb3JkID0gYV90ZXhDb29yZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgYCwgYFxyXG4gICAgICAgIHZhcnlpbmcgbWVkaXVtcCB2ZWMyIHZfcG9zaXRpb247XHJcbiAgICAgICAgdmFyeWluZyBtZWRpdW1wIHZlYzIgdl90ZXhDb29yZDtcclxuICAgICAgICB2YXJ5aW5nIG1lZGl1bXAgdmVjMiB2X3RleENvb3JkMTtcclxuICAgICAgICB2YXJ5aW5nIG1lZGl1bXAgdmVjMiB2X3RleENvb3JkMjtcclxuXHJcbiAgICAgICAgdW5pZm9ybSBsb3dwIHNhbXBsZXIyRCBtYXNrU2FtcGxlcjtcclxuICAgICAgICB1bmlmb3JtIGxvd3Agc2FtcGxlcjJEIGJhc2VTYW1wbGVyO1xyXG5cclxuICAgICAgICB1bmlmb3JtIG1lZGl1bXAgZmxvYXQgbWFzaztcclxuICAgICAgICB1bmlmb3JtIG1lZGl1bXAgdmVjMiB0ZXhTaXplO1xyXG5cclxuXHJcbiAgICAgICAgdm9pZCBtYWluKCkge1xyXG4gICAgICAgICAgICBoaWdocCB2ZWMyIHV2ID0gdl90ZXhDb29yZDtcclxuXHJcbiAgICAgICAgICAgIGxvd3AgdmVjNCB0aWxlID0gdGV4dHVyZTJEKGJhc2VTYW1wbGVyLCBmbG9vcih2X3RleENvb3JkKS90ZXhTaXplKTtcclxuICAgICAgICAgICAgbG93cCB2ZWM0IG1hc2sxID0gdGV4dHVyZTJEKG1hc2tTYW1wbGVyLCB2X3RleENvb3JkMSk7XHJcbiAgICAgICAgICAgIGxvd3AgdmVjNCBtYXNrMiA9IHRleHR1cmUyRChtYXNrU2FtcGxlciwgdl90ZXhDb29yZDIpO1xyXG5cclxuICAgICAgICAgICAgbG93cCB2ZWM0IGM7XHJcbiAgICAgICAgICAgIGxvd3AgdmVjMyBtYXNrMCA9IHZlYzMobWFzazEuZywxLjAsbWFzazIuZyk7XHJcbiAgICAgICAgICAgIGMueHl6ID0gbWl4KCB2ZWMzKDAuMCwxLjAsMS4wKSwgbWFzazAueHl6ICwgc3RlcCgxLjAvMjU2LjAsdGlsZS5nICsgbWFzaykgKTtcclxuICAgICAgICAgICAgYy5hID0gMS4wO1xyXG4gICAgICAgICAgICBnbF9GcmFnQ29sb3IgPSBjO1xyXG5cclxuICAgICAgICAgICAgZ2xfRnJhZ0NvbG9yLnh5eiAqPSBnbF9GcmFnQ29sb3IuYTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYCxcclxuICAgICAgICBudWxsLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbWFzazogMFxyXG4gICAgICAgIH1cclxuICAgICksXHJcbiAgICBcInNoYWRvd1wiOiBuZXcgU2hhZGVyKFxyXG4gICAgICAgIGBcclxuICAgICAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcclxuXHJcbiAgICAgICAgYXR0cmlidXRlIHZlYzIgYV9wb3NpdGlvbjtcclxuICAgICAgICBhdHRyaWJ1dGUgdmVjMyBjdXN0b207XHJcbiAgICAgICAgYXR0cmlidXRlIHZlYzQgYV9jb2xvcjtcclxuXHJcbiAgICAgICAgdW5pZm9ybSBtYXQ0IHVfdmlld01hdHJpeDtcclxuICAgICAgICB1bmlmb3JtIG1hdDQgdV93b3JsZE1hdHJpeDtcclxuICAgICAgICB1bmlmb3JtIHZlYzIgdV9hbmNob3I7XHJcblxyXG4gICAgICAgIHVuaWZvcm0gdmVjNCBleWVQb3M7XHJcblxyXG5cclxuICAgICAgICB2YXJ5aW5nIG1lZGl1bXAgdmVjMiB2X3Bvc2l0aW9uO1xyXG4gICAgICAgIHZhcnlpbmcgbG93cCB2ZWM0IHZfY29sb3JPdmVycmlkZTtcclxuXHJcbiAgICAgICAgdm9pZCBtYWluKCkge1xyXG4gICAgICAgICAgICBtYXQ0IGFuY2hvck1hdCA9IG1hdDQoMSk7XHJcblxyXG4gICAgICAgICAgICBhbmNob3JNYXRbM10ueHkgPSB1X2FuY2hvcjtcclxuICAgICAgICAgICAgZ2xfUG9zaXRpb24gPSB2ZWM0KCh1X3ZpZXdNYXRyaXggKiB1X3dvcmxkTWF0cml4ICogYW5jaG9yTWF0ICogdmVjNChjdXN0b20ueHksIDAuMCwxLjApKS54eSwgMCwgMSk7XHJcblxyXG4gICAgICAgICAgICBtZWRpdW1wIGZsb2F0IHNjYWxlO1xyXG4gICAgICAgICAgICBtZWRpdW1wIHZlYzIgcztcclxuICAgICAgICAgICAgbWVkaXVtcCB2ZWMyIGRlbHRhID0gZ2xfUG9zaXRpb24ueHkgLSBleWVQb3MueHk7XHJcbiAgICAgICAgICAgIHMgPSBhYnMoZGVsdGEpO1xyXG4gICAgICAgICAgICBzY2FsZSA9IG1heChzLngscy55KTtcclxuXHJcbiAgICAgICAgICAgIGdsX1Bvc2l0aW9uLnh5ICs9IGRlbHRhICogY3VzdG9tLnogLyAoc2NhbGUrMC4wMDEpO1xyXG4gICAgICAgICAgICB2X3Bvc2l0aW9uID0gZ2xfUG9zaXRpb24ueHk7XHJcbiAgICAgICAgICAgIHZfY29sb3JPdmVycmlkZSA9IHZlYzQoMCwxLDEsMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGAsIGBcclxuICAgICAgICB2YXJ5aW5nIG1lZGl1bXAgdmVjMiB2X3Bvc2l0aW9uO1xyXG4gICAgICAgIHZhcnlpbmcgbG93cCB2ZWM0IHZfY29sb3JPdmVycmlkZTtcclxuXHJcbiAgICAgICAgdm9pZCBtYWluKCkge1xyXG4gICAgICAgICAgICBnbF9GcmFnQ29sb3IgPSB2X2NvbG9yT3ZlcnJpZGU7XHJcbiAgICAgICAgICAgIGdsX0ZyYWdDb2xvci54eXogKj0gZ2xfRnJhZ0NvbG9yLmE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGAsXHJcbiAgICAgICAgbnVsbCxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGV5ZVBvczogWzAsIDAsIDAsIDBdXHJcbiAgICAgICAgfVxyXG4gICAgKSxcclxuICAgIFwidGlsZU1hcFwiOiBuZXcgU2hhZGVyKFxyXG4gICAgICAgIGRlZmF1bHRWZXJ0ZXhTcmMsIGBcclxuICAgICAgICB2YXJ5aW5nIG1lZGl1bXAgdmVjMiB2X3Bvc2l0aW9uO1xyXG4gICAgICAgIHZhcnlpbmcgbWVkaXVtcCB2ZWMyIHZfdGV4Q29vcmQ7XHJcbiAgICAgICAgdmFyeWluZyBsb3dwIHZlYzQgdl9jb2xvck92ZXJyaWRlO1xyXG5cclxuICAgICAgICB1bmlmb3JtIGxvd3Agc2FtcGxlcjJEIGZvZ1NhbXBsZXI7XHJcbiAgICAgICAgdW5pZm9ybSBsb3dwIHNhbXBsZXIyRCBiYXNlU2FtcGxlcjtcclxuXHJcbiAgICAgICAgdW5pZm9ybSBoaWdocCB2ZWM0IG9mZnNldDtcclxuICAgICAgICB1bmlmb3JtIGhpZ2hwIHZlYzQgdmlld0luZm87XHJcbiAgICAgICAgdW5pZm9ybSBsb3dwIHZlYzQgY29sb3IxO1xyXG4gICAgICAgIHVuaWZvcm0gbG93cCB2ZWM0IGNvbG9yMjtcclxuICAgICAgICB1bmlmb3JtIGxvd3AgdmVjNCBnbG9zc3k7XHJcbiAgICAgICAgdW5pZm9ybSBtZWRpdW1wIHZlYzIgdGV4U2l6ZTtcclxuXHJcbiAgICAgICAgdm9pZCBtYWluKCkge1xyXG4gICAgICAgICAgICBtZWRpdW1wIHZlYzIgdmlld1BvcyA9IHZpZXdJbmZvLnh5O1xyXG4gICAgICAgICAgICBtZWRpdW1wIHZlYzIgdmlld1NpemUgPSB2aWV3SW5mby56dztcclxuICAgICAgICAgICAgbWVkaXVtcCB2ZWMyIHV2ID0gdl90ZXhDb29yZDtcclxuICAgICAgICAgICAgbWVkaXVtcCB2ZWMyIGE7XHJcblxyXG4gICAgICAgICAgICBoaWdocCB2ZWMyIHV2MjtcclxuICAgICAgICAgICAgbWVkaXVtcCB2ZWMyIGRlbHRhID0gKC1nbG9zc3kueHkrdl9wb3NpdGlvbi54eSowLjUtdmlld1Bvcy54eSkqZ2xvc3N5Lnp3O1xyXG4gICAgICAgICAgICBsb3dwIGZsb2F0IGZhbGxPZmYgPSBtYXgoMC4wLCgxLjAtZG90KGRlbHRhLGRlbHRhKSkpKmNvbG9yMS5hO1xyXG5cclxuICAgICAgICAgICAgdXYyLnggPSAodl9wb3NpdGlvbi54KjAuNSswLjUpKnZpZXdTaXplLngrdmlld1Bvcy54O1xyXG4gICAgICAgICAgICB1djIueSA9ICh2X3Bvc2l0aW9uLnkqMC41KzAuNSkqdmlld1NpemUueSt2aWV3UG9zLnk7XHJcbiAgICAgICAgICAgIHV2Lz10ZXhTaXplO1xyXG4gICAgICAgICAgICBpZiAodXYueT49NDA4LjAvNTEyLjApIHV2ICs9IG9mZnNldC54eTsgXHJcblxyXG4gICAgICAgICAgICBsb3dwIHZlYzQgYyA9IFx0dGV4dHVyZTJEKGJhc2VTYW1wbGVyLCB1dikgKiB2X2NvbG9yT3ZlcnJpZGU7XHJcbiAgICAgICAgICAgIGxvd3AgdmVjNCBmb2cgPSB0ZXh0dXJlMkQoZm9nU2FtcGxlciwgdXYyKTtcclxuXHJcbiAgICAgICAgICAgIGxvd3AgdmVjMyBmYWxsT2ZmQ29sb3IgPSBmYWxsT2ZmKmNvbG9yMS54eXoqKDEuMC1taW4oMS4wLGMuZyoxMDAwLjApKTtcclxuXHJcbiAgICAgICAgICAgIGxvd3AgZmxvYXQgZ3JheSA9IGRvdChjLnh5eix2ZWMzKDAuMywwLjYsMC4xKSowLjUpO1xyXG4gICAgICAgICAgICBjLnh5eiA9IGMueHl6ICsgZmFsbE9mZkNvbG9yLnh5ejtcclxuICAgICAgICAgICAgZ2xfRnJhZ0NvbG9yLnh5eiA9ICBtaXgoY29sb3IyLnh5eipncmF5LGMueHl6LGZvZy5yKmNvbG9yMi5hKSAqIGMuYSAqIGZvZy5iO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZ2xfRnJhZ0NvbG9yLmEgPSBjLmE7XHJcbiAgICAgICAgICAgIGdsX0ZyYWdDb2xvci54eXogKj0gZ2xfRnJhZ0NvbG9yLmE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGAsXHJcbiAgICAgICAgbnVsbCxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG9mZnNldDogICBbMCwgMCwgMCwgMF0sXHJcbiAgICAgICAgICAgIHZpZXdJbmZvOiBbMCwgMCwgMCwgMF0sXHJcbiAgICAgICAgICAgIGNvbG9yMTogICBbMCwgMCwgMCwgMF0sXHJcbiAgICAgICAgICAgIGNvbG9yMjogICBbMCwgMCwgMCwgMF0sXHJcbiAgICAgICAgICAgIGdsb3NzeTogICBbMCwwLDAsMF1cclxuICAgICAgICB9XHJcbiAgICApLFxyXG4gICAgXCJsaWdodFwiOiBuZXcgU2hhZGVyKFxyXG4gICAgICAgIGRlZmF1bHRWZXJ0ZXhTcmMsIGBcclxuICAgICAgICB2YXJ5aW5nIG1lZGl1bXAgdmVjMiB2X3Bvc2l0aW9uO1xyXG4gICAgICAgIHZhcnlpbmcgbWVkaXVtcCB2ZWMyIHZfdGV4Q29vcmQ7XHJcbiAgICAgICAgdmFyeWluZyBsb3dwIHZlYzQgdl9jb2xvck92ZXJyaWRlO1xyXG5cclxuICAgICAgICB1bmlmb3JtIHNhbXBsZXIyRCBmb2dTYW1wbGVyO1xyXG4gICAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIGJhc2VTYW1wbGVyO1xyXG5cclxuICAgICAgICB1bmlmb3JtIG1lZGl1bXAgdmVjNCB2aWV3SW5mbztcclxuXHJcbiAgICAgICAgdm9pZCBtYWluKCkge1xyXG4gICAgICAgICAgICBtZWRpdW1wIHZlYzIgdmlld1BvcyA9IHZpZXdJbmZvLnh5O1xyXG4gICAgICAgICAgICBtZWRpdW1wIHZlYzIgdmlld1NpemUgPSB2aWV3SW5mby56dztcclxuICAgICAgICAgICAgbWVkaXVtcCB2ZWMyIHV2ID0gdl90ZXhDb29yZDtcclxuICAgICAgICAgICAgbWVkaXVtcCB2ZWMyIGE7XHJcblxyXG4gICAgICAgICAgICBtZWRpdW1wIHZlYzIgdXYyO1xyXG4gICAgICAgICAgICB1djIueCA9ICh2X3Bvc2l0aW9uLngqMC41KzAuNSkqdmlld1NpemUueCt2aWV3UG9zLng7XHJcbiAgICAgICAgICAgIHV2Mi55ID0gKHZfcG9zaXRpb24ueSowLjUrMC41KSp2aWV3U2l6ZS55K3ZpZXdQb3MueTtcclxuXHJcbiAgICAgICAgICAgIGxvd3AgdmVjNCBjID0gdGV4dHVyZTJEKGJhc2VTYW1wbGVyLCB1dik7XHJcbiAgICAgICAgICAgIGxvd3AgdmVjNCBmb2cgPSB0ZXh0dXJlMkQoZm9nU2FtcGxlciwgdXYyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxvd3AgZmxvYXQgZ3JheSA9IGRvdChjLnh5eix2ZWMzKDAuMywwLjYsMC4xKSkqMC4wNTtcclxuXHJcbiAgICAgICAgICAgIGMgKj0gdl9jb2xvck92ZXJyaWRlO1xyXG4gICAgICAgICAgICBnbF9GcmFnQ29sb3IgPSBtaXgodmVjNChncmF5LGdyYXksZ3JheSwxKSxjLGZvZy54KTtcclxuICAgICAgICAgICAgZ2xfRnJhZ0NvbG9yLmEgPSBjLmE7XHJcbiAgICAgICAgICAgIGdsX0ZyYWdDb2xvci54eXogKj0gZ2xfRnJhZ0NvbG9yLmE7XHJcbiAgICAgICAgICAgIC8vIGdsX0ZyYWdDb2xvciA9IHZlYzQoYy53d3csMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGAsXHJcbiAgICAgICAgbnVsbCxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZpZXdJbmZvOiBbMCwwLDAsMF1cclxuICAgICAgICB9XHJcbiAgICApLFxyXG59O1xyXG5cclxuXHJcbmNvbnN0IHNoYWRlckhlbHBlciA9IG5ldyBTaGFkZXJIZWxwZXIoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHNoYWRlckhlbHBlcjtcclxuXHJcbiIsImltcG9ydCB7IE1lc2gsIFRpbWVyLCBVdGlscywgRXZlbnQsIFNwcml0ZSwgQml0bWFwIH0gZnJvbSBcIkBlbmdpbmUvZmxhdGZhc3RcIjtcclxuXHJcbi8qXHJcblxyXG7tmZTrqbTsnYQg6rCA66Gc66GcIOyKrOudvOydtOuTnO2VtOyEnCDrhJjqsqjrs7TripQg67ewXHJcbuy1nOq3vOyXkCDsp6AgVUkg7L2U65Oc6528IOydtOyqveydhCDssLjqs6DtlbTshJwg64uk7J2MIOyekeyEseydhCDtlZjrj4TroZ0g7ZWY7J6QLlxyXG5cclxuXHJcblwiY2xpY2tcIiDtgbTrpq3tlZjrqbQg67Cc7IOdXHJcblwiaW5kZXhDaGFuZ2VkXCIg7J2066+47KeAIOuLpOuluOqxuOuhnCDrhJjslrTqsJTsnYQg65WMIOuwnOyDnVxyXG5cImluZGV4Q2hhbmdpbmdcIiDsnbTrr7jsp4Ag64uk66W46rG466GcIOuEmOyWtOqwlOydhCDrlYwg7IaQ7J2EIOuWvOuptCDsponsi5wg67Cc7IOdXHJcblxyXG5cclxub3B0aW9ucztcclxuYmFja2dyb3VuZCA9IHtpbWFnZSxjb2xvcn1cclxuYXV0b1JvdGF0aW9uVGltZSA9IOy0iFxyXG5cclxuKi9cclxuXHJcbmZ1bmN0aW9uIG9uSW5kZXhDaGFuZ2luZyggc2VsZiApIHtcclxuICAgIGxldCBlID0gbmV3IEV2ZW50KCBcImluZGV4Q2hhbmdpbmdcIiApO1xyXG5cclxuICAgIGUuaW5kZXggPSBzZWxmLmdldEluZGV4KCk7XHJcbiAgICBzZWxmLmRpc3BhdGNoRXZlbnQoIGUgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25JbmRleENoYW5nZWQoIHNlbGYgKSB7XHJcbiAgICBsZXQgZSA9IG5ldyBFdmVudCggXCJpbmRleENoYW5nZWRcIiApO1xyXG5cclxuICAgIGUuaW5kZXggPSBzZWxmLmdldEluZGV4KCk7XHJcbiAgICBzZWxmLmRpc3BhdGNoRXZlbnQoIGUgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25DbGljayggc2VsZiApIHtcclxuICAgIGxldCBlID0gbmV3IEV2ZW50KCBcImNsaWNrXCIgKTtcclxuXHJcbiAgICBlLmluZGV4ID0gc2VsZi5nZXRJbmRleCgpO1xyXG4gICAgc2VsZi5kaXNwYXRjaEV2ZW50KCBlICk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uRW50ZXJGcmFtZSggc2VsZiApIHtcclxuICAgIGlmICggTWF0aC5hYnMoIHNlbGYucG9zWCAtIHNlbGYudGFyZ2V0UG9zWCApIDwgMC4xICkge1xyXG4gICAgICAgIHNlbGYucG9zWCA9IHNlbGYudGFyZ2V0UG9zWDtcclxuICAgICAgICBzZWxmLnVwZGF0ZVZpc3VhbCgpO1xyXG4gICAgICAgIHNlbGYuaGl0QXJlYS5yZW1vdmVFdmVudExpc3RlbmVyKCBFdmVudC5FTlRFUl9GUkFNRSwgb25FbnRlckZyYW1lLCBzZWxmICk7XHJcbiAgICAgICAgaWYgKCBzZWxmLnRpbWVyICkge1xyXG4gICAgICAgICAgICBzZWxmLnRpbWVyLnN0YXJ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG9uSW5kZXhDaGFuZ2VkKCBzZWxmICk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgc2VsZi52ZWxYID0gKCBzZWxmLnRhcmdldFBvc1ggLSBzZWxmLnBvc1ggKSAvIDg7IC8vIOyDgeyImFxyXG4gICAgc2VsZi5wb3NYID0gc2VsZi5wb3NYICsgc2VsZi52ZWxYO1xyXG4gICAgc2VsZi51cGRhdGVWaXN1YWwoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25Nb3VzZURvd24oIHNlbGYsIGUgKSB7XHJcbiAgICBpZiAoIHNlbGYuaGl0QXJlYS5oaXRUZXN0UG9pbnQoIGUueCwgZS55ICkgKSB7XHJcbiAgICAgICAgaWYgKCBzZWxmLmhpdEFyZWEuaGFzRXZlbnRMaXN0ZW5lciggRXZlbnQuRU5URVJfRlJBTUUgKSApIHtcclxuICAgICAgICAgICAgc2VsZi5oaXRBcmVhLnJlbW92ZUV2ZW50TGlzdGVuZXIoIEV2ZW50LkVOVEVSX0ZSQU1FLCBvbkVudGVyRnJhbWUsIHNlbGYgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IFtleCwgZXldID0gc2VsZi5nZXRQYXJlbnQoKS5nbG9iYWxUb0xvY2FsKCBlLngsIGUueSApO1xyXG5cclxuICAgICAgICBzZWxmLm1vdXNlID0ge307XHJcbiAgICAgICAgc2VsZi5tb3VzZS54ID0gZXg7XHJcbiAgICAgICAgc2VsZi5tb3VzZS55ID0gZXk7XHJcbiAgICAgICAgc2VsZi5tb3VzZS5wb3NYID0gc2VsZi5wb3NYO1xyXG4gICAgICAgIHNlbGYubW91c2UubGFzdFggPSBleDtcclxuICAgICAgICBzZWxmLm1vdXNlLnRpbWUgPSBUaW1lci5ub3coKTtcclxuICAgICAgICBzZWxmLm1vdXNlLmlzQ2xpY2sgPSB0cnVlO1xyXG4gICAgICAgIHNlbGYudmVsWCA9IDA7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBpZiAoIHNlbGYudGltZXIgKSB7XHJcbiAgICAgICAgICAgIHNlbGYudGltZXIuc3RvcCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gb25Nb3VzZU1vdmUoIHNlbGYsIGUgKSB7XHJcbiAgICBpZiAoIHNlbGYubW91c2UgKSB7XHJcbiAgICAgICAgbGV0IFtleCwgZXldID0gc2VsZi5nZXRQYXJlbnQoKS5nbG9iYWxUb0xvY2FsKCBlLngsIGUueSApO1xyXG4gICAgICAgIGxldCBkeCA9IGV4IC0gc2VsZi5tb3VzZS54O1xyXG4gICAgICAgIGxldCBjdXJyZW50VGltZSA9IFRpbWVyLm5vdygpO1xyXG4gICAgICAgIGxldCBheCA9IGV4IC0gc2VsZi5tb3VzZS5sYXN0WDtcdC8v6rCA7IaN64+EXHJcblxyXG4gICAgICAgIHNlbGYudmVsWCA9IHNlbGYudmVsWCAvIE1hdGgucG93KCAzLCAoICggY3VycmVudFRpbWUgLSBzZWxmLm1vdXNlLnRpbWUgKSAvIDEwMDAgKiAyMCApICk7XHQvLyDqsJDsh4RcclxuICAgICAgICBzZWxmLnZlbFggPSBzZWxmLnZlbFggKyBheDtcclxuICAgICAgICBzZWxmLm1vdXNlLnRpbWUgPSBjdXJyZW50VGltZTtcclxuICAgICAgICBzZWxmLm1vdXNlLmxhc3RYID0gZXg7XHJcbiAgICAgICAgc2VsZi5wb3NYID0gc2VsZi5tb3VzZS5wb3NYICsgZHg7XHJcbiAgICAgICAgc2VsZi51cGRhdGVWaXN1YWwoKTtcclxuICAgICAgICBpZiAoIE1hdGguYWJzKCBzZWxmLm1vdXNlLnggLSBleCApID4gMjAgfHwgTWF0aC5hYnMoIHNlbGYubW91c2UueSAtIGV5ICkgPiAyMCApIHtcclxuICAgICAgICAgICAgc2VsZi5tb3VzZS5pc0NsaWNrID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uTW91c2VVcCggc2VsZiwgZSApIHtcclxuICAgIGlmICggc2VsZi5tb3VzZSApIHtcclxuICAgICAgICBsZXQgW2V4LCBfXSA9IHNlbGYuZ2V0UGFyZW50KCkuZ2xvYmFsVG9Mb2NhbCggZS54LCBlLnkgKTtcclxuICAgICAgICAvL2xldCBkeCA9IGV4IC0gc2VsZi5tb3VzZS54O1xyXG4gICAgICAgIGxldCBjdXJyZW50VGltZSA9IFRpbWVyLm5vdygpO1xyXG4gICAgICAgIGxldCBheCA9IGV4IC0gc2VsZi5tb3VzZS5sYXN0WDtcdC8v6rCA7IaN64+EXHJcblxyXG4gICAgICAgIHNlbGYudmVsWCA9IHNlbGYudmVsWCAvIE1hdGgucG93KCAzLCAoICggY3VycmVudFRpbWUgLSBzZWxmLm1vdXNlLnRpbWUgKSAvIDEwMDAgKiAyMCApICk7XHQvLyDqsJDsh4RcclxuICAgICAgICBzZWxmLnZlbFggPSBzZWxmLnZlbFggKyBheDtcclxuICAgICAgICAvL3NlbGYudGFyZ2V0UG9zWCA9IHNlbGYucG9zWCArIHNlbGYudmVsWCAqIDM7XHJcbiAgICAgICAgc2VsZi50YXJnZXRQb3NYID0gTWF0aC5mbG9vciggKCBzZWxmLnBvc1ggKyBzZWxmLnZlbFggKiA0ICkgLyBzZWxmLndpZHRoICsgMC41ICkgKiBzZWxmLndpZHRoO1xyXG4gICAgICAgIG9uSW5kZXhDaGFuZ2luZyggc2VsZiApO1xyXG4gICAgICAgIGlmICggIXNlbGYuaGl0QXJlYS5oYXNFdmVudExpc3RlbmVyKCBFdmVudC5FTlRFUl9GUkFNRSApICkge1xyXG4gICAgICAgICAgICBzZWxmLmhpdEFyZWEuYWRkRXZlbnRMaXN0ZW5lciggRXZlbnQuRU5URVJfRlJBTUUsIG9uRW50ZXJGcmFtZSwgc2VsZiApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIHNlbGYubW91c2UuaXNDbGljayApIHtcclxuICAgICAgICAgICAgb25DbGljayggc2VsZiApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLm1vdXNlID0gbnVsbDtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBvbkF1dG9Sb3RhdGlvbiggc2VsZiApIHtcclxuICAgIHNlbGYudGFyZ2V0UG9zWCA9IE1hdGguZmxvb3IoIHNlbGYucG9zWCAvIHNlbGYud2lkdGggKyAwLjUgLSAxICkgKiBzZWxmLndpZHRoO1xyXG4gICAgaWYgKCAhc2VsZi5oaXRBcmVhLmhhc0V2ZW50TGlzdGVuZXIoIEV2ZW50LkVOVEVSX0ZSQU1FICkgKSB7XHJcbiAgICAgICAgc2VsZi5oaXRBcmVhLmFkZEV2ZW50TGlzdGVuZXIoIEV2ZW50LkVOVEVSX0ZSQU1FLCBvbkVudGVyRnJhbWUsIHNlbGYgKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2xpZGVWaWV3IGV4dGVuZHMgU3ByaXRlIHtcclxuICAgIGNvbnN0cnVjdG9yKCB3aWR0aCwgaGVpZ2h0LCBpbWFnZUxpc3QsIG9wdGlvbnMgKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmltYWdlTGlzdCA9IGltYWdlTGlzdDtcclxuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuICAgICAgICB0aGlzLm51bU9mSW1hZ2UgPSB0aGlzLmltYWdlTGlzdC5sZW5ndGg7XHJcbiAgICAgICAgdGhpcy50b3RhbFdpZHRoID0gdGhpcy5pbWFnZUxpc3QubGVuZ3RoICogdGhpcy53aWR0aDtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICggdGhpcy5vcHRpb25zLmJhY2tncm91bmQgJiYgdGhpcy5vcHRpb25zLmJhY2tncm91bmQuaW1hZ2UgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuYmFja2dyb3VuZC5pbWFnZS5zZXRBbmNob3JQb2ludCggMC41LCAwLjUgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kLmltYWdlLnNldFBvc2l0aW9uKCB0aGlzLndpZHRoIC8gMiwgdGhpcy5oZWlnaHQgLyAyICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZENoaWxkKCB0aGlzLm9wdGlvbnMuYmFja2dyb3VuZC5pbWFnZSApO1xyXG4gICAgICAgICAgICAgICAgLy/qs6DtlbTsg4Hrj4Qg67Cw6rK97J20IOyjvOyWtOyniCDqsr3smrAg7Iqk7LyA7J28XHJcbiAgICAgICAgICAgICAgICBsZXQgcmF0aW8gPSB0aGlzLm9wdGlvbnMuYmFja2dyb3VuZC5pbWFnZS5nZXRXaWR0aCgpIC8gdGhpcy5vcHRpb25zLmJhY2tncm91bmQuaW1hZ2UuZ2V0SGVpZ2h0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCByYXRpbyA+IDEuMCApIHtcclxuICAgICAgICAgICAgICAgICAgICAvL+qwgOuhnOqwgCDshLjroZzrs7Tri6Qg7YGwIOqyveyasCDshLjroZzsl5Ag66ee7Law7IScIOyKpOy8gOydvFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kLmltYWdlLnNldFNjYWxlKCB0aGlzLmhlaWdodCAvIHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kLmltYWdlLmdldEhlaWdodCgpICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kLmltYWdlLnNldFNjYWxlKCB0aGlzLndpZHRoIC8gdGhpcy5vcHRpb25zLmJhY2tncm91bmQuaW1hZ2UuZ2V0V2lkdGgoKSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbG9yID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kICYmIHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kLmNvbG9yICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yID0gdGhpcy5vcHRpb25zLmJhY2tncm91bmQuY29sb3I7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsZXQgbSA9IE1lc2guY3JlYXRlQm94KCAwLCAwLCB3aWR0aCwgaGVpZ2h0LCBjb2xvciApO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkQ2hpbGQoIG0gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvL2hpdEFyZWE7XHJcbiAgICAgICAgICAgIGxldCBtID0gTWVzaC5jcmVhdGVCb3goIDAsIDAsIHdpZHRoLCBoZWlnaHQsIDAgKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ2hpbGQoIG0gKTtcclxuICAgICAgICAgICAgbS5zZXRWaXNpYmxlKCBmYWxzZSApO1xyXG4gICAgICAgICAgICBtLmFkZEV2ZW50TGlzdGVuZXIoIEV2ZW50Lk1PVVNFX0RPV04sIG9uTW91c2VEb3duLCB0aGlzICk7XHJcbiAgICAgICAgICAgIG0uYWRkRXZlbnRMaXN0ZW5lciggRXZlbnQuTU9VU0VfTU9WRSwgb25Nb3VzZU1vdmUsIHRoaXMgKTtcclxuICAgICAgICAgICAgbS5hZGRFdmVudExpc3RlbmVyKCBFdmVudC5NT1VTRV9VUCwgb25Nb3VzZVVwLCB0aGlzICk7XHJcbiAgICAgICAgICAgIHRoaXMuaGl0QXJlYSA9IG07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCBiID0gbmV3IFNwcml0ZSgpO1xyXG5cclxuICAgICAgICAgICAgZm9yICggbGV0IGsgaW4gaW1hZ2VMaXN0ICkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHYgPSBpbWFnZUxpc3Rba107XHJcbiAgICAgICAgICAgICAgICBsZXQgaSA9IHBhcnNlSW50KCBrICk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCB2ICkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vdi5zZXRBbmNob3JQb2ludCgwLjUsMC41KTtcclxuICAgICAgICAgICAgICAgICAgICAvL3Yuc2V0UG9zaXRpb24oKGktMC41KSp3aWR0aC12LmdldFdpZHRoKCkvMixoZWlnaHQvMi12LmdldEhlaWdodCgpLzIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHYuc2V0UG9zaXRpb24oICggaSAtIDAuNSApICogd2lkdGggLSB2LmdldFdpZHRoKCkgLyAyLCBoZWlnaHQgLyAyIC0gdi5nZXRIZWlnaHQoKSAvIDIgKTtcclxuICAgICAgICAgICAgICAgICAgICBiLmFkZENoaWxkKCB2ICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5wYXJlbnRTcHIgPSBiO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFkZENoaWxkKCB0aGlzLnBhcmVudFNwciApO1xyXG4gICAgICAgIHRoaXMucG9zWCA9IDA7XHJcbiAgICAgICAgdGhpcy50YXJnZXRQb3NYID0gMDtcclxuICAgICAgICBUaW1lci5kZWxheWVkQ2FsbCggMSwgb25JbmRleENoYW5naW5nLCB0aGlzICk7XHJcbiAgICAgICAgLy8g7YOA7J2066i4IOydtOuypO2KuOulvCDsnpgg7LKY66as7ZWY6riwIOychO2VtOyEnCDtmZTrqbTsl5Ag7J6I7J2E65WM66eMIOu2meyehFxyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lciggRXZlbnQuQURERURfVE9fU1RBR0UsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLm9wdGlvbnMuYXV0b1JvdGF0aW9uVGltZSApIHtcclxuICAgICAgICAgICAgICAgIGlmICggdGhpcy50aW1lciApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWVyLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoIEV2ZW50LlRJTUVSLCBvbkF1dG9Sb3RhdGlvbiwgdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGltZXIgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lciA9IG5ldyBUaW1lciggdGhpcy5vcHRpb25zLmF1dG9Sb3RhdGlvblRpbWUgKiAxMDAwLCAwICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVyLmFkZEV2ZW50TGlzdGVuZXIoIEV2ZW50LlRJTUVSLCBvbkF1dG9Sb3RhdGlvbiwgdGhpcyApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lci5zdGFydCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSApO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lciggRXZlbnQuUkVNT1ZFRF9GUk9NX1NUQUdFLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICggdGhpcy5vcHRpb25zLmF1dG9Sb3RhdGlvblRpbWUgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMudGltZXIgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lci5yZW1vdmVFdmVudExpc3RlbmVyKCBFdmVudC5USU1FUiwgb25BdXRvUm90YXRpb24sIHRoaXMgKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWVyLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWVyID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIHVwZGF0ZVZpc3VhbCgpIHtcclxuICAgICAgICB0aGlzLnBhcmVudFNwci5zZXRYKCB0aGlzLnBvc1ggLSB0aGlzLmdldFdpZHRoKCkgLyAyICk7XHJcbiAgICAgICAgbGV0IGlubmVyWCA9IC10aGlzLnBvc1ggJSB0aGlzLndpZHRoO1xyXG4gICAgICAgIGxldCBpMSA9IE1hdGguY2VpbCggLXRoaXMucG9zWCAvIHRoaXMud2lkdGggKTtcclxuICAgICAgICBsZXQgaTIgPSBpMSAtIDE7XHJcbiAgICAgICAgbGV0IGkwID0gaTE7XHJcblxyXG4gICAgICAgIGkxID0gaTEgJSB0aGlzLm51bU9mSW1hZ2U7XHJcbiAgICAgICAgaTIgPSBpMiAlIHRoaXMubnVtT2ZJbWFnZTtcclxuICAgICAgICBmb3IgKCBsZXQgaSBpbiB0aGlzLmltYWdlTGlzdCApIHtcclxuICAgICAgICAgICAgbGV0IHYgPSB0aGlzLmltYWdlTGlzdFtpXTtcclxuXHJcbiAgICAgICAgICAgIGlmICggdiApIHtcclxuICAgICAgICAgICAgICAgIHYuc2V0VmlzaWJsZSggZmFsc2UgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHRcdFxyXG4gICAgICAgIGlmICggdGhpcy5pbWFnZUxpc3RbaTEgKyAxXSApIHtcclxuICAgICAgICAgICAgdGhpcy5pbWFnZUxpc3RbaTEgKyAxXS5zZXRWaXNpYmxlKCB0cnVlICk7XHJcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VMaXN0W2kxICsgMV0uc2V0WCggKCBpMCArIDAuNSApICogdGhpcy53aWR0aCApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIHRoaXMuaW1hZ2VMaXN0W2kyICsgMV0gKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VMaXN0W2kyICsgMV0uc2V0WCggKCBpMCAtIDAuNSApICogdGhpcy53aWR0aCApO1xyXG4gICAgICAgICAgICBpZiAoIGlubmVyWCA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlTGlzdFtpMiArIDFdLnNldFZpc2libGUoIHRydWUgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRJbmRleCgpIHtcclxuICAgICAgICBsZXQgaW5kZXggPSBNYXRoLmZsb29yKCAtdGhpcy50YXJnZXRQb3NYICAvIHRoaXMud2lkdGggKyAwLjUgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuICggaW5kZXggJSB0aGlzLm51bU9mSW1hZ2UgKSArIDE7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0SW5kZXgoIHYgKSB7XHJcbiAgICAgICAgaWYgKCAhdGhpcy5tb3VzZSApIHtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXRQb3NYID0gLXYgKiB0aGlzLndpZHRoO1xyXG4gICAgICAgICAgICBpZiAoICF0aGlzLmhpdEFyZWEuaGFzRXZlbnRMaXN0ZW5lciggRXZlbnQuRU5URVJfRlJBTUUgKSApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGl0QXJlYS5hZGRFdmVudExpc3RlbmVyKCBFdmVudC5FTlRFUl9GUkFNRSxvbkVudGVyRnJhbWUsdGhpcyApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFdpZHRoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndpZHRoICogdGhpcy5nZXRTY2FsZVgoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRIZWlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGVpZ2h0ICogdGhpcy5nZXRTY2FsZVkoKTtcclxuICAgIH1cclxufVxyXG5cclxuIiwiXHJcbmltcG9ydCB7IFNwcml0ZSB9IGZyb20gJ0BlbmdpbmUvU3ByaXRlJztcclxuLy9jb25zdCBHYW1lTWFwID0gcmVxdWlyZShcIi4uL2F2YWxvbmlrYS93b3JsZC9nYW1lTWFwXCIpO1xyXG5cclxuY29uc3QgX0JMT0NLX1ZJU0lPTiA9IDI7XHJcblxyXG5mdW5jdGlvbiogcmF5Q2hlY2tJdGVyYXRvciggeFN0YXJ0LCB5U3RhcnQsIHhFbmQsIHlFbmQgKSB7XHJcbiAgICAvLyBjaGFuZ2UgZnJvbSBzdGVwIHRvIHN0ZXA7XHJcbiAgICBsZXQgdFZhbHVlLCB4R3JpZCwgeUdyaWQsIHRGb3JOZXh0Qm9yZGVyWCwgdEZvck5leHRCb3JkZXJZO1xyXG4gICAgLy9wcmludChcImlucHV0XCIseFN0YXJ0LCB5U3RhcnQsIHhFbmQsIHlFbmQpO1xyXG4gICAgLy8gY29uc3RhbnQgdGhyb3VnaG91dCByYXljYXN0O1xyXG4gICAgbGV0IHhEaXJlY3Rpb24sIHlEaXJlY3Rpb24sIHRGb3JPbmVYLCB0Rm9yT25lWSwgeFN0ZXAsIHlTdGVwO1xyXG5cclxuICAgIHhEaXJlY3Rpb24gPSB4RW5kIC0geFN0YXJ0O1xyXG4gICAgeURpcmVjdGlvbiA9IHlFbmQgLSB5U3RhcnQ7XHJcbiAgICB0Rm9yT25lWCA9IE1hdGguYWJzKCAxLjAgLyB4RGlyZWN0aW9uICk7XHJcbiAgICB0Rm9yT25lWSA9IE1hdGguYWJzKCAxLjAgLyB5RGlyZWN0aW9uICk7XHJcbiAgICB5U3RlcCA9ICggeURpcmVjdGlvbiA+PSAwICkgPyAxIDogLSAxO1xyXG4gICAgeFN0ZXAgPSAoIHhEaXJlY3Rpb24gPj0gMCApID8gMSA6IC0gMTtcclxuICAgIGNvbnN0IHhTaWduID0gKCB4RGlyZWN0aW9uID49IDAgKSA/IDAgOiAxO1xyXG4gICAgY29uc3QgeVNpZ24gPSAoIHlEaXJlY3Rpb24gPj0gMCApID8gMCA6IDE7XHJcblxyXG4gICAgdFZhbHVlID0gMDtcclxuICAgIHhHcmlkID0gTWF0aC5mbG9vciggeFN0YXJ0ICk7XHJcbiAgICB5R3JpZCA9IE1hdGguZmxvb3IoIHlTdGFydCApO1xyXG4gICAgY29uc3QgZnJhY1N0YXJ0UG9zWCA9IHhTdGFydCAtIE1hdGguZmxvb3IoIHhTdGFydCApO1xyXG5cclxuICAgIGlmICggeERpcmVjdGlvbiA+IDAgKSB7XHJcbiAgICAgICAgdEZvck5leHRCb3JkZXJYID0gKCAxIC0gZnJhY1N0YXJ0UG9zWCApICogdEZvck9uZVg7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRGb3JOZXh0Qm9yZGVyWCA9IGZyYWNTdGFydFBvc1ggKiB0Rm9yT25lWDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmcmFjU3RhcnRQb3NZID0geVN0YXJ0IC0gTWF0aC5mbG9vciggeVN0YXJ0ICk7XHJcblxyXG4gICAgaWYgKCB5RGlyZWN0aW9uID4gMCApIHtcclxuICAgICAgICB0Rm9yTmV4dEJvcmRlclkgPSAoIDEgLSBmcmFjU3RhcnRQb3NZICkgKiB0Rm9yT25lWTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdEZvck5leHRCb3JkZXJZID0gZnJhY1N0YXJ0UG9zWSAqIHRGb3JPbmVZO1xyXG4gICAgfVxyXG4gICAgbGV0IGc7XHJcblxyXG4gICAgaWYgKCB4RW5kID09IHhTdGFydCApIHtcclxuICAgICAgICBnID0gKCB5RW5kIC0geVN0YXJ0ICkgLyAoIHhFbmQgLSB4U3RhcnQgKyAwLjAwMDAxICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGcgPSAoIHlFbmQgLSB5U3RhcnQgKSAvICggeEVuZCAtIHhTdGFydCApO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYSA9IHlTdGFydCAtIGcgKiB4U3RhcnQ7XHJcblxyXG4gICAgd2hpbGUgKCB0cnVlICkge1xyXG4gICAgICAgIGxldCB0aWxlWCwgdGlsZVksIGNvbGxpZGVYLCBjb2xsaWRlWSwgaXNMYXN0O1xyXG5cclxuICAgICAgICBpZiAoIE1hdGguYWJzKCB0Rm9yTmV4dEJvcmRlclggLSB0Rm9yTmV4dEJvcmRlclkgKSA8IDAuMDAwMDAxICkge1xyXG4gICAgICAgICAgICAvLyBkaWFnb25hbCBzdGVwIChub3JtYWxseSBub3QgaW5jbHVkZWQgaW4gYSByYXljYXN0KTtcclxuICAgICAgICAgICAgdFZhbHVlID0gdEZvck5leHRCb3JkZXJYO1xyXG4gICAgICAgICAgICB0Rm9yTmV4dEJvcmRlclggPSB0Rm9yTmV4dEJvcmRlclggKyB0Rm9yT25lWDtcclxuICAgICAgICAgICAgdEZvck5leHRCb3JkZXJZID0gdEZvck5leHRCb3JkZXJZICsgdEZvck9uZVk7XHJcbiAgICAgICAgICAgIHhHcmlkID0geEdyaWQgKyB4U3RlcDtcclxuICAgICAgICAgICAgeUdyaWQgPSB5R3JpZCArIHlTdGVwO1xyXG4gICAgICAgICAgICBjb2xsaWRlWCA9IHhHcmlkICsgeFNpZ247XHJcbiAgICAgICAgICAgIGNvbGxpZGVZID0geUdyaWQgKyB5U2lnbjtcclxuICAgICAgICB9IGVsc2UgaWYgKCB0Rm9yTmV4dEJvcmRlclggPD0gdEZvck5leHRCb3JkZXJZICkge1xyXG4gICAgICAgICAgICAvLyBzdGVwIGluIHg7XHJcbiAgICAgICAgICAgIHRWYWx1ZSA9IHRGb3JOZXh0Qm9yZGVyWDtcclxuICAgICAgICAgICAgdEZvck5leHRCb3JkZXJYID0gdEZvck5leHRCb3JkZXJYICsgdEZvck9uZVg7XHJcbiAgICAgICAgICAgIHhHcmlkID0geEdyaWQgKyB4U3RlcDtcclxuICAgICAgICAgICAgY29sbGlkZVggPSB4R3JpZCArIHhTaWduO1xyXG4gICAgICAgICAgICBjb2xsaWRlWSA9IGcgKiAoIHhHcmlkICsgeFNpZ24gKSArIGE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gc3RlcCBpbiB5O1xyXG4gICAgICAgICAgICB0VmFsdWUgPSB0Rm9yTmV4dEJvcmRlclk7XHJcbiAgICAgICAgICAgIHRGb3JOZXh0Qm9yZGVyWSA9IHRGb3JOZXh0Qm9yZGVyWSArIHRGb3JPbmVZO1xyXG4gICAgICAgICAgICB5R3JpZCA9IHlHcmlkICsgeVN0ZXA7XHJcbiAgICAgICAgICAgIGNvbGxpZGVYID0gKCAoIHlHcmlkICsgeVNpZ24gKSAtIGEgKSAvIGc7XHJcbiAgICAgICAgICAgIGNvbGxpZGVZID0geUdyaWQgKyB5U2lnbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaXNMYXN0ID0gdFZhbHVlID4gMS4wO1xyXG4gICAgICAgIGlmICggIWlzTGFzdCApIHtcclxuICAgICAgICAgICAgLy9wcmludChcImNvbnRpbnVlXCIsdGlsZVgsdGlsZVksY29sbGlkZVgsY29sbGlkZVkpO1xyXG4gICAgICAgICAgICBbdGlsZVgsIHRpbGVZXSA9IFt4R3JpZCwgeUdyaWRdO1xyXG4gICAgICAgICAgICB5aWVsZCBbdGlsZVgsIHRpbGVZLCBjb2xsaWRlWCwgY29sbGlkZVldO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiogYnJlc2VuaGFtSXRlcmF0b3IoIHhTdGFydCwgeVN0YXJ0LCB4RW5kLCB5RW5kICkge1xyXG4gICAgY29uc3QgZGVsdGFYID0gTWF0aC5mbG9vciggTWF0aC5hYnMoIHhFbmQgLSB4U3RhcnQgKSApO1xyXG4gICAgY29uc3QgZGVsdGFZID0gTWF0aC5mbG9vciggTWF0aC5hYnMoIHlFbmQgLSB5U3RhcnQgKSApO1xyXG4gICAgY29uc3QgeFN0ZXAgPSB4RW5kID49IHhTdGFydCA/IDEgOiAtIDE7XHJcbiAgICBjb25zdCB5U3RlcCA9IHlFbmQgPj0geVN0YXJ0ID8gMSA6IC0gMTtcclxuICAgIGxldCBlcnJvciA9IGRlbHRhWCAtIGRlbHRhWTtcclxuICAgIGxldCBbeEdyaWQsIHlHcmlkXSA9IFt4U3RhcnQsIHlTdGFydF07XHJcblxyXG4gICAgd2hpbGUgKCB4R3JpZCAhPSB4RW5kIHx8IHlHcmlkICE9IHlFbmQgKSB7XHJcbiAgICAgICAgLy9sZXQgcngsIHJ5ID0geEdyaWQsIHlHcmlkO1xyXG4gICAgICAgIGNvbnN0IHR3b0Vycm9yID0gMiAqIGVycm9yO1xyXG5cclxuICAgICAgICBpZiAoIHR3b0Vycm9yID4gKCAtMSAqIGRlbHRhWSApICkge1xyXG4gICAgICAgICAgICBlcnJvciA9IGVycm9yIC0gZGVsdGFZO1xyXG4gICAgICAgICAgICB4R3JpZCA9IHhHcmlkICsgeFN0ZXA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggdHdvRXJyb3IgPCBkZWx0YVggKSB7XHJcbiAgICAgICAgICAgIGVycm9yID0gZXJyb3IgKyBkZWx0YVg7XHJcbiAgICAgICAgICAgIHlHcmlkID0geUdyaWQgKyB5U3RlcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgeWllbGQgW3hHcmlkLCB5R3JpZF07XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaXNpYmlsaXR5VGlsZSBleHRlbmRzIFNwcml0ZSB7XHJcbiAgICBjb25zdHJ1Y3Rvciggd2lkdGgsIGhlaWdodCwgd2FsbFRhYmxlICkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5zZXRXYWxsVGFibGUoIHdpZHRoLCBoZWlnaHQsIHdhbGxUYWJsZSApO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFdhbGxUYWJsZSggd2lkdGgsIGhlaWdodCwgd2FsbFRhYmxlICkge1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICB0aGlzLndhbGxUYWJsZSA9IHdhbGxUYWJsZTtcclxuICAgICAgICB0aGlzLmlzQ2xlYXJlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5yZXN1bHRUYWJsZSA9IG5ldyBBcnJheSggd2lkdGggKiBoZWlnaHQgKTtcclxuICAgICAgICB0aGlzLnJlc3VsdFRhYmxlLmZpbGwoIC0xICk7XHJcbiAgICB9XHJcblxyXG4gICAgY2FuQmVTZWVuKCB4LCB5LCB0YXJnZXRYLCB0YXJnZXRZLCB3YWxsLCBjaGVja0Z1bmMgKSB7XHJcbiAgICAgICAgd2FsbCA9ICggd2FsbCAhPSBudWxsICkgPyB3YWxsIDogMjtcclxuICAgICAgICBsZXQgW2xhc3RYLCBsYXN0WV0gPSBbeCwgeV07XHJcblxyXG4gICAgICAgIGZvciAoIGNvbnN0IFt4MywgeTNdIG9mIGJyZXNlbmhhbUl0ZXJhdG9yKCB4LCB5LCB0YXJnZXRYLCB0YXJnZXRZICkgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLndhbGxUYWJsZVt5MyAqIHRoaXMud2lkdGggKyB4M10ud2FsbDtcclxuXHJcbiAgICAgICAgICAgIGlmICggKCB2ICYgd2FsbCApICE9IDAgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHRhcmdldFggPT0geDMgJiYgdGFyZ2V0WSA9PSB5MyApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1Zpc2liaWxpdHlUaWxlLkJMT0NLX1ZJU0lPTiwgbGFzdFgsIGxhc3RZXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g67K97JeQIOqwgOumvFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbVmlzaWJpbGl0eVRpbGUuU0hBRE9XLCBsYXN0WCwgbGFzdFldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCBjaGVja0Z1bmMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjaGVja0Z1bmMoIHgzLCB5MyApICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1Zpc2liaWxpdHlUaWxlLkJMT0NLX1ZJU0lPTiwgbGFzdFgsIGxhc3RZXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgW2xhc3RYLCBsYXN0WV0gPSBbeDMsIHkzXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBbVmlzaWJpbGl0eVRpbGUuRU1QVFksIHRhcmdldFgsIHRhcmdldFldO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyUmVzdWx0KCkge1xyXG4gICAgICAgIHRoaXMuaXNDbGVhcmVkID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSZXN1bHQoIGN4ID0gdGhpcy5jeCwgY3kgPSB0aGlzLmN5LHJhZGl1cyA9IHRoaXMucmFkaXVzICkge1xyXG4gICAgICAgIGlmICggdGhpcy5pc0NsZWFyZWQgfHwgdGhpcy5jeCAhPSBjeCB8fCB0aGlzLmN5ICE9IGN5IHx8IHRoaXMucmFkaXVzICE9IHJhZGl1cyApIHtcclxuICAgICAgICAgICAgLy8g7Iuc7KCQ7J20IOuLrOudvOyngOuptCDri6Tsi5wg6rOE7IKw7ZW07JW87ZWc64ukLlxyXG4gICAgICAgICAgICB0aGlzLnJlc3VsdFRhYmxlLmZpbGwoIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSApO1xyXG4gICAgICAgICAgICB0aGlzLmZpbGxSZXN1bHRRdWljayggY3gsIGN5LCByYWRpdXMgKTtcclxuICAgICAgICAgICAgdGhpcy5pc0NsZWFyZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucmVzdWx0VGFibGU7XHJcblxyXG4gICAgICAgIHRoaXMuY3ggPSBjeDtcclxuICAgICAgICB0aGlzLmN5ID0gY3k7XHJcbiAgICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXM7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gaWYgKHgxID49IGN4IC0gMTUgJiYgeDIgPD0gY3ggKyAxNSAmJiB5MSA+PSBjeSAtIDE1ICYmIHkyIDw9IGN5ICsgMTUpIHtcclxuICAgICAgICAvLyAgICAgLy9xdWlja+yXkOyEnCBtYXNr66GcIOydtOuvuCDqtaztlZwg67aA67aEXHJcbiAgICAgICAgLy8gICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgLy8gfVxyXG5cdFx0XHJcbiAgICAgICAgLy8gZm9yIChsZXQgeSA9IHkxO3kgPD0geTI7eSsrKSB7XHJcbiAgICAgICAgLy8gICAgIGZvciAobGV0IHggPSB4MTt4IDw9IHgyO3grKykge1xyXG4gICAgICAgIC8vICAgICAgICAgaWYgKHJlc3VsdFt4ICsgXCIsXCIgKyB5XSA9PSBudWxsICYmICh4IC0gY3gpICoqIDIgKyAoeSAtIGN5KSAqKiAyIDw9IHJhZGl1cyAqKiAyKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgcmVzdWx0W3ggKyBcIixcIiArIHldID0gdGhpcy5jYW5CZVNlZW4oY3gsY3kseCx5KVswXTtcclxuICAgICAgICAvLyAgICAgICAgIH1cclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH1cclxuXHRcdFxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGlzVmlzaWJsZSggeCwgeSApIHtcclxuICAgICAgICBsZXQgdiA9IHRoaXMuaXNDbGVhcmVkID8gbnVsbCA6IHRoaXMucmVzdWx0VGFibGVbeSAqIHRoaXMud2lkdGggKyB4XTtcclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLmN4ID09IG51bGwgfHwgdGhpcy5jeSA9PSBudWxsIHx8IHggPCAwIHx8IHggPj0gdGhpcy53aWR0aCB8fCB5IDwgMCB8fCB5ID49IHRoaXMuaGVpZ2h0ICkge1xyXG4gICAgICAgICAgICByZXR1cm4gMjtcclxuICAgICAgICB9IGVsc2UgaWYgKCB2ID09IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSApIHtcclxuICAgICAgICAgICAgaWYgKCAoICggeCAtIHRoaXMuY3ggKSAqKiAyICsgKCB5IC0gdGhpcy5jeSApICoqIDIgKSA8PSAoIHRoaXMucmFkaXVzICoqIDIgKSApIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCBg7Iuc7JW87LK07YGs7KSRIOyXhuuKlCDrjbDsnbTthLAg67Cc6rKsICR7eH0sICR7eX1gICk7XHJcbiAgICAgICAgICAgICAgICB2ID0gdGhpcy5jYW5CZVNlZW4oIHRoaXMuY3gsIHRoaXMuY3ksIHgsIHkgKVswXTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0VGFibGVbeSAqIHRoaXMud2lkdGggKyB4XSA9IHY7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHY7XHJcbiAgICB9XHJcblxyXG4gICAgZmlsbFJlc3VsdFF1aWNrKCBjZW50ZXJYLCBjZW50ZXJZLCByYWRpdXMgKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yZXN1bHRUYWJsZTtcclxuICAgICAgICBjb25zdCB3dCA9IHRoaXMud2FsbFRhYmxlO1xyXG4gICAgICAgIGNvbnN0IFt3LCBoXSA9IFt0aGlzLndpZHRoLCB0aGlzLmhlaWdodF07XHJcbiAgICAgICAgY29uc3QgbWFzayA9IFZpc2liaWxpdHlUaWxlLm1hc2s7XHJcbiAgICAgICAgY29uc3QgciA9IE1hdGgubWluKCAxNSwgTWF0aC5jZWlsKCByYWRpdXMgKSApO1xyXG4gICAgICAgIGNvbnN0IHN1bW1lZE1hc2sgPSBuZXcgVWludDMyQXJyYXkoIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSApO1xyXG4gICAgICAgIGxldCB5MSA9IE1hdGgubWF4KCAwLCBjZW50ZXJZIC0gciApO1xyXG4gICAgICAgIGxldCB5MiA9IE1hdGgubWluKCBoIC0gMSwgY2VudGVyWSArIHIgKTtcclxuICAgICAgICBsZXQgeDEgPSBNYXRoLm1heCggMCwgY2VudGVyWCAtIHIgKTtcclxuICAgICAgICBsZXQgeDIgPSBNYXRoLm1pbiggdyAtIDEsIGNlbnRlclggKyByICk7XHJcblxyXG4gICAgICAgIGZvciAoIGxldCB5ID0geTE7IHkgPD0geTI7IHkrKyApIHtcclxuICAgICAgICAgICAgZm9yICggbGV0IHggPSB4MTsgeCA8PSB4MjsgeCsrICkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd2FsbCA9IHd0W3kgKiB3ICsgeF0ud2FsbDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoICggd2FsbCAmIF9CTE9DS19WSVNJT04gKSAhPSAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIO2VtOuLueychOy5mOqwgCDqsIDroKTsoLjsnojsnLzrqbQg6re4IOu4lOuhneydgCDqsIDroKTsoYzri6Tqs6Ag7ZGc7Iuc7ZWoXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3kgKiB3ICsgeF0gPSBWaXNpYmlsaXR5VGlsZS5CTE9DS19WSVNJT047XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOuniOyKpO2BrOulvCDrp4zrk6Dri6RcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9ICggKCBjZW50ZXJZIC0geSApICsgMTYgLSAxICkgKiAzMSArICggY2VudGVyWCAtIHggKSArIDE2IC0gMTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFydEluZGV4ID0gbWFzay5zdGFydEluZGV4W2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBza2lwID0gbWFzay5za2lwW2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3VudCA9IG1hc2suY291bnRbaW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHN0YXJ0SW5kZXggPiAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDrp4jsiqTtgazsnZgg7LKrIOqwkuydgCB57LaVIOyLnOyekSDsnITsuZguIDHrtoDthLAg7Iuc7J6R7ZWoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIGxldCBqID0gMDsgaiA8IGNvdW50OyBqKysgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDrp4jsiqTtgawg6rCS7J2EIOuqqOuRkCBPUu2VtOyEnCDtlanss5DrkZTri6RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1bW1lZE1hc2tbc2tpcCArIGpdIHw9IG1hc2suZGF0YVtzdGFydEluZGV4IC0gMSArIGpdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRbeSAqIHcgKyB4XSA9IFZpc2liaWxpdHlUaWxlLkVNUFRZO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGZvciAoIGNvbnN0IGkgaW4gc3VtbWVkTWFzayApIHtcclxuICAgICAgICAvLyAgICAgY29uc29sZS5sb2coIHN1bW1lZE1hc2tbaV0udG9TdHJpbmcoIDIgKSApO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyDsnbQg64uo6rOE7JeQ7IScIHTsl5DripQg7JWI67O07Jes7JW8IO2VmOuKlCDqs7PsnbQgMeu5hO2KuOydtOqzoCDrs7Tsl6zslbztlZjripQg6rOz7J20IDDruYTtirhcclxuICAgICAgICB5MSA9IE1hdGgubWF4KCAwLCBjZW50ZXJZIC0gMTUgKTtcclxuICAgICAgICB5MiA9IE1hdGgubWluKCBoIC0gMSwgY2VudGVyWSArIDE1ICk7XHJcbiAgICAgICAgeDEgPSBNYXRoLm1heCggMCwgY2VudGVyWCAtIDE1ICk7XHJcbiAgICAgICAgeDIgPSBNYXRoLm1pbiggdyAtIDEsIGNlbnRlclggKyAxNSApO1xyXG4gICAgICAgIGZvciAoIGxldCB5ID0geTE7IHkgPD0geTI7IHkrKyApIHtcclxuICAgICAgICAgICAgZm9yICggbGV0IHggPSB4MTsgeCA8PSB4MjsgeCsrICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCAoICggeCAtIGNlbnRlclggKSAqKiAyICsgKCB5IC0gY2VudGVyWSApICoqIDIgKSA8PSByYWRpdXMgKiogMiApIHtcclxuICAgICAgICAgICAgICAgICAgICAvL3RbeSsxNl3sl5DshJwgMOyduCDruYTtirjsl5Ag7Lmg7ZW07JW87ZWoIFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrVGFyZ2V0ID0gfiggc3VtbWVkTWFza1soIGNlbnRlclkgLSB5ICkgKyAxNV0gKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGVja0JpdCA9ICggMSA8PCAoIGNlbnRlclggLSB4ICsgMTUgKSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoICggY2hlY2tUYXJnZXQgJiBjaGVja0JpdCApID09IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFt5ICogdyArIHhdID0gVmlzaWJpbGl0eVRpbGUuU0hBRE9XO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3kgKiB3ICsgeF0gPSBWaXNpYmlsaXR5VGlsZS5TSEFET1c7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5sb2coIGDsi5zslbzrjbDsnbTthLAgJHtjZW50ZXJYfSwke2NlbnRlcll9ICR7d30gJHtofSBYOiR7TWF0aC5tYXgoIDAsIGNlbnRlclggLSAxNSApfX4ke01hdGgubWluKCB3IC0gMSwgY2VudGVyWCArIDE1ICl9IFk6JHtNYXRoLm1heCggMCwgY2VudGVyWSAtIDE1ICl9fiR7TWF0aC5taW4oIGggLSAxLCBjZW50ZXJZICsgMTUgKX0gYCApO1xyXG4gICAgfVxyXG5cclxuICAgIHRyYWNlUmF5KCB4MSwgeTEsIHgyLCB5MiwgZ3JpZFdpZHRoLCBncmlkSGVpZ2h0LCB3YWxsLCBjaGVja0Z1bmMgKSB7XHJcbiAgICAgICAgLy8g7YOA7J286rOE7J2YIOyijO2RnOulvCDtlL3shYDqs4Qg7KKM7ZGc66GcIOuwlOq/lOykmOyVvO2VnOuLpC5cclxuICAgICAgICB3YWxsID0gd2FsbCAhPSBudWxsID8gd2FsbCA6IDE7XHJcbiAgICAgICAgZm9yICggY29uc3QgW3R4LCB0eSwgY3gsIGN5XSBvZiByYXlDaGVja0l0ZXJhdG9yKCB4MSAvIGdyaWRXaWR0aCwgeTEgLyBncmlkSGVpZ2h0LCB4MiAvIGdyaWRXaWR0aCwgeTIgLyBncmlkSGVpZ2h0ICkgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHcgPSB0aGlzLndhbGxUYWJsZVt0eSAqIHRoaXMud2lkdGggKyB0eF0ud2FsbDtcclxuXHJcbiAgICAgICAgICAgIGlmICggY2hlY2tGdW5jICYmIGNoZWNrRnVuYyggdHgsIHR5ICkgKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIHR4ID09IE1hdGguZmxvb3IoIHgyIC8gZ3JpZFdpZHRoICkgJiYgdHkgPT0gTWF0aC5mbG9vciggeTIgLyBncmlkSGVpZ2h0ICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g7Lap64+M7ZaI7KeA66eMIOqxsOq4sOqwgCDrqqnsoIHsp4DsnoRcclxuICAgICAgICAgICAgICAgICAgICByID0gVmlzaWJpbGl0eVRpbGUuRU1QVFk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOustOyWuOqwgOyXkCDsnZjtlbQg66eJ7ZiU7J2MXHJcbiAgICAgICAgICAgICAgICAgICAgciA9IFZpc2liaWxpdHlUaWxlLkNSRUFUVVJFO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vbG9nKGN4LGN5KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbciwgdHgsIHR5LCBjeCAqIGdyaWRXaWR0aCwgY3kgKiBncmlkSGVpZ2h0XTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICggKCB3ICYgd2FsbCApICE9IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDrsr3sl5Ag7Lap64+MXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW1Zpc2liaWxpdHlUaWxlLkJMT0NLX1ZJU0lPTiwgdHgsIHR5LCBjeCAqIGdyaWRXaWR0aCwgY3kgKiBncmlkSGVpZ2h0XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIFtWaXNpYmlsaXR5VGlsZS5FTVBUWSwgTWF0aC5mbG9vciggeDIgLyBncmlkV2lkdGggKSwgTWF0aC5mbG9vciggeTIgLyBncmlkSGVpZ2h0ICksIHgyLCB5Ml07XHJcbiAgICB9XHJcbn1cclxuXHJcblZpc2liaWxpdHlUaWxlLkVNUFRZID0gMDtcclxuVmlzaWJpbGl0eVRpbGUuQkxPQ0tfVklTSU9OID0gMTtcclxuVmlzaWJpbGl0eVRpbGUuU0hBRE9XID0gMjtcclxuVmlzaWJpbGl0eVRpbGUuQ1JFQVRVUkUgPSA0O1xyXG5WaXNpYmlsaXR5VGlsZS5tYXNrID0gcmVxdWlyZSggXCIuL3Zpc2liaWxpdHlUaWxlTWFza1wiICk7XHJcblxyXG4iLCJcclxuLy8gMzLruYTtirhcclxuLy8g7KKM7JqwIDE167mE7Yq47JSpXHJcblxyXG4vKlxyXG4vLyBmdW5jdGlvbiBidWlsZE1hc2soKSB7XHJcbi8vICAgICBsZXQgd3QgPSBbXTtcclxuLy8gICAgIGxldCB2dCA9IG5ldyBWaXNpYmlsaXR5VGlsZSgzMSwzMSx3dCk7XHJcbi8vICAgICBmb3IgKGxldCB5ID0gMTt5IDw9IDMxO2krKykge1xyXG4vLyAgICAgICAgIGZvciAobGV0IHggPSAxO3ggPD0gMzE7aSsrKSB7XHJcbi8vICAgICAgICAgICAgIGxldCB0ID0gW107XHJcbi8vICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxO2kgPD0gMzE7aSsrKSB7XHJcbi8vICAgICAgICAgICAgICAgICB3dFtpXSA9IHsgd2FsbDogMCB9O1xyXG4vLyAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgICAgIHd0Wyh5IC0gMSkgKiAzMSArIHhdLndhbGwgPSAyO1xyXG4vLyAgICAgICAgICAgICB2dC5jbGVhclJlc3VsdCgpO1xyXG4vLyAgICAgICAgICAgICBsZXQgcnQgPSB2dC5nZXRSZXN1bHQyKDE2LDE2LDEsMSwzMSwzMSx0cnVlKTtcclxuLy8gICAgICAgICAgICAgZm9yIChsZXQgeXkgPSAxO3l5IDw9IDMxO3l5KyspIHtcclxuLy8gICAgICAgICAgICAgICAgIGxldCB2ID0gMDtcclxuLy8gICAgICAgICAgICAgICAgIGZvciAobGV0IHh4ID0gMTt4eCA8PSAzMTt4eCsrKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgaWYgKHJ0Wyh5eSAtIDEpICogMzEgKyB4eF0gJiYgcnRbKHl5IC0gMSkgKiAzMSArIHh4XSA+PSAyKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSB2IHwgKDEgPDwgKHh4IC0gMSkpO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgICAgICAgIHRbeXldID0gdjtcclxuLy8gICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgICBsZXQgcyA9IFwiXCI7XHJcbi8vICAgICAgICAgICAgIGxldCBub3RaZXJvID0gMDtcclxuLy8gICAgICAgICAgICAgZm9yIChsZXQgaSBpbiB0KSB7XHJcbi8vICAgICAgICAgICAgICAgICBsZXQgdiA9IHRbaV07XHJcbi8vICAgICAgICAgICAgICAgICBpZiAodiAhPSAwKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgbm90WmVybyA9IHBhcnNlSW50KGkpO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4vLyAgICAgICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgICAgIGlmIChub3RaZXJvID09IDApIHtcclxuLy8gICAgICAgICAgICAgICAgIHMgPSBcIm51bGwsXCI7XHJcbi8vICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzKTtcclxuLy8gICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgICBlbHNlIHtcclxuLy8gICAgICAgICAgICAgICAgIHMgPSBcIntcIiArIG5vdFplcm8gKyBcIiwgXCI7XHJcbi8vICAgICAgICAgICAgICAgICBsZXQgbGFzdE5vdFplcm87XHJcbi8vICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gdC5sZW5ndGg7IGogPj0gbm90WmVybztqLS0pIHtcclxuLy8gICAgICAgICAgICAgICAgICAgICBpZiAodFtqXSAhPSAwKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3ROb3RaZXJvID0gajtcclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IG5vdFplcm87ayA8PSBsYXN0Tm90WmVybztrKyspIHtcclxuLy8gICAgICAgICAgICAgICAgICAgICBzID0gcyArIHRba10gKyBcIixcIjtcclxuLy8gICAgICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHMuc3Vic3RyKDAscy5sZW5ndGgpICsgXCJ9LFwiKTtcclxuLy8gICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgIH1cclxuLy8gICAgIH1cclxuLy8gfVxyXG4vLyAqL1xyXG5cclxuXHJcblxyXG4vLyAvL2J1aWxkTWFzaygpO1xyXG5cclxuXHJcbi8vIGNvbnN0IFZpc2liaWxpdHlUaWxlX21hc2sgPSBbXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDE2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAzMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgNjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDM4NF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgNTEyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxMDI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAyMDQ4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCA0MDk2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCA4MTkyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxNjM4NF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMzI3NjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDY1NTM2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxMzEwNzJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDI2MjE0NF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgNTI0Mjg4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxMDQ4NTc2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAyMDk3MTUyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxMjU4MjkxMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTY3NzcyMTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDMzNTU0NDMyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCA2NzEwODg2NF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTM0MjE3NzI4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAyNjg0MzU0NTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDUzNjg3MDkxMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyLCAxXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxLCAyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAyLCA0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCA0LCA4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAyNCwgMTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDMyLCAzMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgNjQsIDY0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxMjgsIDEyOF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMjU2LCA3NjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDUxMiwgMTAyNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTAyNCwgMjA0OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgNjE0NCwgNDA5Nl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgODE5MiwgODE5Ml0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTYzODQsIDE2Mzg0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAzMjc2OCwgMzI3NjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDY1NTM2LCA2NTUzNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTMxMDcyLCAxMzEwNzJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDc4NjQzMiwgMjYyMTQ0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxMDQ4NTc2LCA1MjQyODhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDIwOTcxNTIsIDEwNDg1NzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDQxOTQzMDQsIDYyOTE0NTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDgzODg2MDgsIDgzODg2MDhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDE2Nzc3MjE2LCAxNjc3NzIxNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMzM1NTQ0MzIsIDMzNTU0NDMyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAyMDEzMjY1OTIsIDY3MTA4ODY0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAyNjg0MzU0NTYsIDEzNDIxNzcyOF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgNTM2ODcwOTEyLCAyNjg0MzU0NTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDEwNzM3NDE4MjQsIDUzNjg3MDkxMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMiwgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAzLCAxXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyLCAxLCAyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxLCAyLCA0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAyLCA0LCA4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxMiwgOCwgMTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDE2LCA0OCwgMzJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDMyLCA2NCwgNjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDY0LCAxMjgsIDEyOF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMzg0LCAyNTYsIDc2OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgNTEyLCA1MTIsIDEwMjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDEwMjQsIDEwMjQsIDIwNDhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDIwNDgsIDYxNDQsIDQwOTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDEyMjg4LCA4MTkyLCA4MTkyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxNjM4NCwgMTYzODQsIDE2Mzg0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAzMjc2OCwgMzI3NjgsIDMyNzY4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCA2NTUzNiwgNjU1MzYsIDY1NTM2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAzOTMyMTYsIDEzMTA3MiwgMTMxMDcyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCA1MjQyODgsIDc4NjQzMiwgMjYyMTQ0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxMDQ4NTc2LCAxMDQ4NTc2LCA1MjQyODhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDIwOTcxNTIsIDIwOTcxNTIsIDEwNDg1NzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDEyNTgyOTEyLCA0MTk0MzA0LCA2MjkxNDU2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxNjc3NzIxNiwgODM4ODYwOCwgODM4ODYwOF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMzM1NTQ0MzIsIDE2Nzc3MjE2LCAxNjc3NzIxNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgNjcxMDg4NjQsIDEwMDY2MzI5NiwgMzM1NTQ0MzJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDQwMjY1MzE4NCwgMTM0MjE3NzI4LCA2NzEwODg2NF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgNTM2ODcwOTEyLCAyNjg0MzU0NTYsIDEzNDIxNzcyOF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTA3Mzc0MTgyNCwgNTM2ODcwOTEyLCAyNjg0MzU0NTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIsIDEwNzM3NDE4MjQsIDUzNjg3MDkxMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMywgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA0LCAxXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAzLCAxLCAyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyLCAxLCAyLCA0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxLCAyLCA0LCA4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCA2LCA0LCA4LCAxNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgOCwgMjQsIDE2LCAzMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTYsIDMyLCA5NiwgNjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDk2LCA2NCwgMTI4LCAxMjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDEyOCwgMTI4LCAyNTYsIDI1Nl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMjU2LCA3NjgsIDUxMiwgMTUzNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTUzNiwgMTAyNCwgMTAyNCwgMjA0OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMjA0OCwgMjA0OCwgNjE0NCwgNDA5Nl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgNDA5NiwgMTIyODgsIDgxOTIsIDgxOTJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDI0NTc2LCAxNjM4NCwgMTYzODQsIDE2Mzg0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAzMjc2OCwgMzI3NjgsIDMyNzY4LCAzMjc2OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTk2NjA4LCA2NTUzNiwgNjU1MzYsIDY1NTM2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAyNjIxNDQsIDM5MzIxNiwgMTMxMDcyLCAxMzEwNzJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDUyNDI4OCwgNTI0Mjg4LCA3ODY0MzIsIDI2MjE0NF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMzE0NTcyOCwgMTA0ODU3NiwgMTA0ODU3NiwgNTI0Mjg4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCA0MTk0MzA0LCA2MjkxNDU2LCAyMDk3MTUyLCAzMTQ1NzI4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCA4Mzg4NjA4LCA4Mzg4NjA4LCA0MTk0MzA0LCA0MTk0MzA0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCA1MDMzMTY0OCwgMTY3NzcyMTYsIDgzODg2MDgsIDgzODg2MDhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDY3MTA4ODY0LCAzMzU1NDQzMiwgNTAzMzE2NDgsIDE2Nzc3MjE2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxMzQyMTc3MjgsIDIwMTMyNjU5MiwgNjcxMDg4NjQsIDMzNTU0NDMyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCA4MDUzMDYzNjgsIDI2ODQzNTQ1NiwgMTM0MjE3NzI4LCA2NzEwODg2NF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTA3Mzc0MTgyNCwgNTM2ODcwOTEyLCAyNjg0MzU0NTYsIDEzNDIxNzcyOF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMiwgMTA3Mzc0MTgyNCwgNTM2ODcwOTEyLCAyNjg0MzU0NTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMsIDEwNzM3NDE4MjQsIDUzNjg3MDkxMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgNCwgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA1LCAxXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA0LCAxLCAzXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAzLCAxLCAzLCA0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyLCAxLCAzLCA0LCA4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxLCAyLCA0LCA4LCAxNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgNiwgMTIsIDgsIDE2LCAzMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgOCwgMTYsIDQ4LCAzMiwgNjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDQ4LCAzMiwgNjQsIDE5MiwgMTI4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCA2NCwgMTkyLCAxMjgsIDI1NiwgMjU2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAzODQsIDI1NiwgNzY4LCA1MTIsIDE1MzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDUxMiwgMTUzNiwgMTAyNCwgMTAyNCwgMjA0OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMzA3MiwgMjA0OCwgMjA0OCwgMjA0OCwgNDA5Nl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgNDA5NiwgNDA5NiwgMTIyODgsIDEyMjg4LCA4MTkyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAyNDU3NiwgMjQ1NzYsIDE2Mzg0LCAxNjM4NCwgMTYzODRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDMyNzY4LCAzMjc2OCwgMzI3NjgsIDMyNzY4LCAzMjc2OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTk2NjA4LCAxOTY2MDgsIDY1NTM2LCA2NTUzNiwgNjU1MzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDI2MjE0NCwgMjYyMTQ0LCAzOTMyMTYsIDM5MzIxNiwgMTMxMDcyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxNTcyODY0LCA1MjQyODgsIDUyNDI4OCwgNTI0Mjg4LCAyNjIxNDRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDIwOTcxNTIsIDMxNDU3MjgsIDEwNDg1NzYsIDEwNDg1NzYsIDUyNDI4OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTI1ODI5MTIsIDQxOTQzMDQsIDYyOTE0NTYsIDIwOTcxNTIsIDMxNDU3MjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDE2Nzc3MjE2LCAyNTE2NTgyNCwgODM4ODYwOCwgNDE5NDMwNCwgNDE5NDMwNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTAwNjYzMjk2LCAzMzU1NDQzMiwgMTY3NzcyMTYsIDI1MTY1ODI0LCA4Mzg4NjA4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxMzQyMTc3MjgsIDY3MTA4ODY0LCAxMDA2NjMyOTYsIDMzNTU0NDMyLCAxNjc3NzIxNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgODA1MzA2MzY4LCA0MDI2NTMxODQsIDEzNDIxNzcyOCwgNjcxMDg4NjQsIDMzNTU0NDMyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxMDczNzQxODI0LCA1MzY4NzA5MTIsIDI2ODQzNTQ1NiwgMTM0MjE3NzI4LCA2NzEwODg2NF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMiwgMTA3Mzc0MTgyNCwgMTYxMDYxMjczNiwgMjY4NDM1NDU2LCAxMzQyMTc3MjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMsIDEwNzM3NDE4MjQsIDE2MTA2MTI3MzYsIDI2ODQzNTQ1Nl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgNCwgMTA3Mzc0MTgyNCwgMTYxMDYxMjczNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgNSwgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA2LCAxXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA2LCAzXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA1LCAzLCA2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA0LCAzLCA2LCA4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyLCAxLCAzLCA2LCA4LCAxNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMSwgMiwgNCwgOCwgMTYsIDMyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCA2LCAxMiwgMjQsIDE2LCAzMiwgNjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDI0LCAxNiwgMzIsIDk2LCAxOTIsIDEyOF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMzIsIDk2LCAxOTIsIDEyOCwgMjU2LCAyNTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDE5MiwgMTI4LCAyNTYsIDI1NiwgNTEyLCA1MTJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDc2OCwgNzY4LCA1MTIsIDE1MzYsIDEwMjQsIDMwNzJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDEwMjQsIDMwNzIsIDMwNzIsIDIwNDgsIDIwNDgsIDQwOTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDYxNDQsIDQwOTYsIDQwOTYsIDQwOTYsIDEyMjg4LCA4MTkyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAyNDU3NiwgMjQ1NzYsIDI0NTc2LCAyNDU3NiwgMTYzODQsIDE2Mzg0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAzMjc2OCwgMzI3NjgsIDMyNzY4LCAzMjc2OCwgMzI3NjgsIDMyNzY4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxOTY2MDgsIDE5NjYwOCwgMTk2NjA4LCAxOTY2MDgsIDY1NTM2LCA2NTUzNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgNzg2NDMyLCAyNjIxNDQsIDI2MjE0NCwgMjYyMTQ0LCAzOTMyMTYsIDEzMTA3Ml0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTA0ODU3NiwgMTU3Mjg2NCwgMTU3Mjg2NCwgNTI0Mjg4LCA1MjQyODgsIDI2MjE0NF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgNjI5MTQ1NiwgNjI5MTQ1NiwgMjA5NzE1MiwgMzE0NTcyOCwgMTA0ODU3NiwgMTU3Mjg2NF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMjUxNjU4MjQsIDgzODg2MDgsIDQxOTQzMDQsIDQxOTQzMDQsIDIwOTcxNTIsIDIwOTcxNTJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDMzNTU0NDMyLCA1MDMzMTY0OCwgMjUxNjU4MjQsIDgzODg2MDgsIDQxOTQzMDQsIDQxOTQzMDRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDIwMTMyNjU5MiwgNjcxMDg4NjQsIDMzNTU0NDMyLCA1MDMzMTY0OCwgMjUxNjU4MjQsIDgzODg2MDhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDgwNTMwNjM2OCwgNDAyNjUzMTg0LCAyMDEzMjY1OTIsIDY3MTA4ODY0LCAzMzU1NDQzMiwgMTY3NzcyMTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDEwNzM3NDE4MjQsIDUzNjg3MDkxMiwgMjY4NDM1NDU2LCAxMzQyMTc3MjgsIDY3MTA4ODY0LCAzMzU1NDQzMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMiwgMTA3Mzc0MTgyNCwgMTYxMDYxMjczNiwgODA1MzA2MzY4LCAxMzQyMTc3MjgsIDY3MTA4ODY0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA0LCAxNjEwNjEyNzM2LCA4MDUzMDYzNjgsIDEzNDIxNzcyOF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgNSwgMTYxMDYxMjczNiwgODA1MzA2MzY4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA2LCAxNjEwNjEyNzM2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA2LCAxMDczNzQxODI0XSksXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDcsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDcsIDNdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDYsIDEsIDZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDUsIDEsIDYsIDEyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA0LCAxLCA2LCAxMiwgMTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIsIDEsIDMsIDYsIDEyLCAxNiwgMzJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDEsIDIsIDQsIDgsIDE2LCAzMiwgNjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDYsIDEyLCAyNCwgNDgsIDk2LCA2NCwgMTI4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAyNCwgNDgsIDk2LCA2NCwgMTI4LCAzODQsIDI1Nl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgOTYsIDE5MiwgMTI4LCAzODQsIDI1NiwgNTEyLCA1MTJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDM4NCwgMjU2LCA3NjgsIDUxMiwgMTUzNiwgMTAyNCwgMzA3Ml0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTUzNiwgMTUzNiwgMTAyNCwgMzA3MiwgMjA0OCwgMjA0OCwgNDA5Nl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgNjE0NCwgNjE0NCwgNjE0NCwgNDA5NiwgNDA5NiwgMTIyODgsIDgxOTJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDI0NTc2LCAyNDU3NiwgMjQ1NzYsIDI0NTc2LCAyNDU3NiwgMTYzODQsIDE2Mzg0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAzMjc2OCwgMzI3NjgsIDMyNzY4LCAzMjc2OCwgMzI3NjgsIDMyNzY4LCAzMjc2OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTk2NjA4LCAxOTY2MDgsIDE5NjYwOCwgMTk2NjA4LCAxOTY2MDgsIDY1NTM2LCA2NTUzNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgNzg2NDMyLCA3ODY0MzIsIDc4NjQzMiwgMjYyMTQ0LCAyNjIxNDQsIDM5MzIxNiwgMTMxMDcyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAzMTQ1NzI4LCAzMTQ1NzI4LCAxMDQ4NTc2LCAxNTcyODY0LCA1MjQyODgsIDUyNDI4OCwgMjYyMTQ0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxMjU4MjkxMiwgNDE5NDMwNCwgNjI5MTQ1NiwgMjA5NzE1MiwgMzE0NTcyOCwgMTA0ODU3NiwgMTU3Mjg2NF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgNTAzMzE2NDgsIDI1MTY1ODI0LCA4Mzg4NjA4LCAxMjU4MjkxMiwgNDE5NDMwNCwgMjA5NzE1MiwgMjA5NzE1Ml0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMjAxMzI2NTkyLCAxMDA2NjMyOTYsIDUwMzMxNjQ4LCAxNjc3NzIxNiwgODM4ODYwOCwgMTI1ODI5MTIsIDQxOTQzMDRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDgwNTMwNjM2OCwgNDAyNjUzMTg0LCAyMDEzMjY1OTIsIDEwMDY2MzI5NiwgNTAzMzE2NDgsIDE2Nzc3MjE2LCA4Mzg4NjA4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxMDczNzQxODI0LCA1MzY4NzA5MTIsIDI2ODQzNTQ1NiwgMTM0MjE3NzI4LCA2NzEwODg2NCwgMzM1NTQ0MzIsIDE2Nzc3MjE2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyLCAxMDczNzQxODI0LCAxNjEwNjEyNzM2LCA4MDUzMDYzNjgsIDQwMjY1MzE4NCwgNjcxMDg4NjQsIDMzNTU0NDMyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA0LCAxMDczNzQxODI0LCA4MDUzMDYzNjgsIDQwMjY1MzE4NCwgNjcxMDg4NjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDUsIDEwNzM3NDE4MjQsIDgwNTMwNjM2OCwgNDAyNjUzMTg0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA2LCAxMDczNzQxODI0LCA4MDUzMDYzNjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDcsIDE2MTA2MTI3MzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDcsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgOCwgMSwgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgOCwgM10pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgNywgMSwgNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgNiwgMSwgMywgMTJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDUsIDEsIDMsIDEyLCAyNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgNCwgMSwgMywgMTIsIDI0LCA0OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMiwgMSwgMywgNiwgMTIsIDI0LCA0OCwgNjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDMsIDMsIDQsIDgsIDE2LCAzMiwgNjQsIDEyOF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTIsIDEyLCAyNCwgNDgsIDk2LCAxOTIsIDEyOCwgMjU2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCA0OCwgNDgsIDk2LCAxOTIsIDEyOCwgMjU2LCA3NjgsIDUxMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTkyLCAxOTIsIDM4NCwgMjU2LCA3NjgsIDUxMiwgMTAyNCwgMTAyNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgNzY4LCA3NjgsIDE1MzYsIDE1MzYsIDMwNzIsIDMwNzIsIDIwNDgsIDYxNDRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDMwNzIsIDMwNzIsIDYxNDQsIDYxNDQsIDQwOTYsIDQwOTYsIDEyMjg4LCA4MTkyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxMjI4OCwgMTIyODgsIDI0NTc2LCAyNDU3NiwgMjQ1NzYsIDI0NTc2LCAxNjM4NCwgMTYzODRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDExNDY4OCwgMTE0Njg4LCAzMjc2OCwgMzI3NjgsIDMyNzY4LCAzMjc2OCwgMzI3NjgsIDMyNzY4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAzOTMyMTYsIDM5MzIxNiwgMTk2NjA4LCAxOTY2MDgsIDE5NjYwOCwgMTk2NjA4LCA2NTUzNiwgNjU1MzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDE1NzI4NjQsIDE1NzI4NjQsIDc4NjQzMiwgNzg2NDMyLCAyNjIxNDQsIDI2MjE0NCwgMzkzMjE2LCAxMzEwNzJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDYyOTE0NTYsIDYyOTE0NTYsIDMxNDU3MjgsIDMxNDU3MjgsIDE1NzI4NjQsIDE1NzI4NjQsIDUyNDI4OCwgNzg2NDMyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAyNTE2NTgyNCwgMjUxNjU4MjQsIDEyNTgyOTEyLCA0MTk0MzA0LCA2MjkxNDU2LCAyMDk3MTUyLCAxMDQ4NTc2LCAxMDQ4NTc2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxMDA2NjMyOTYsIDEwMDY2MzI5NiwgNTAzMzE2NDgsIDI1MTY1ODI0LCA4Mzg4NjA4LCA0MTk0MzA0LCA2MjkxNDU2LCAyMDk3MTUyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCA0MDI2NTMxODQsIDQwMjY1MzE4NCwgMjAxMzI2NTkyLCAxMDA2NjMyOTYsIDUwMzMxNjQ4LCAyNTE2NTgyNCwgODM4ODYwOCwgNDE5NDMwNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTYxMDYxMjczNiwgMTYxMDYxMjczNiwgMjY4NDM1NDU2LCAxMzQyMTc3MjgsIDY3MTA4ODY0LCAzMzU1NDQzMiwgMTY3NzcyMTYsIDgzODg2MDhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIsIDEwNzM3NDE4MjQsIDE2MTA2MTI3MzYsIDgwNTMwNjM2OCwgNDAyNjUzMTg0LCAyMDEzMjY1OTIsIDEwMDY2MzI5NiwgMTY3NzcyMTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDQsIDEwNzM3NDE4MjQsIDE2MTA2MTI3MzYsIDQwMjY1MzE4NCwgMjAxMzI2NTkyLCAxMDA2NjMyOTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDUsIDEwNzM3NDE4MjQsIDE2MTA2MTI3MzYsIDQwMjY1MzE4NCwgMjAxMzI2NTkyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA2LCAxMDczNzQxODI0LCAxNjEwNjEyNzM2LCA0MDI2NTMxODRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDcsIDEwNzM3NDE4MjQsIDgwNTMwNjM2OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgOCwgMTYxMDYxMjczNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgOCwgMTA3Mzc0MTgyNCwgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxMCwgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgOSwgMywgMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgOCwgMSwgNywgNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgOCwgMywgMTJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDcsIDMsIDYsIDI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA2LCAzLCA2LCAxMiwgNDhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDQsIDEsIDMsIDYsIDEyLCA0OCwgOTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMsIDMsIDcsIDEyLCAyNCwgNDgsIDk2LCAxMjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDMsIDcsIDE0LCAxMiwgMTYsIDMyLCA2NCwgMTI4LCAyNTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDEyLCAyNCwgNDgsIDQ4LCA5NiwgMTkyLCAzODQsIDI1NiwgNTEyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxMTIsIDk2LCAxOTIsIDE5MiwgMzg0LCA3NjgsIDUxMiwgMTUzNiwgMTAyNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMzg0LCA4OTYsIDc2OCwgNzY4LCAxNTM2LCAxMDI0LCAzMDcyLCAyMDQ4LCA2MTQ0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAzNTg0LCAzMDcyLCAzMDcyLCAzMDcyLCA2MTQ0LCA2MTQ0LCA0MDk2LCA0MDk2LCA4MTkyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxMjI4OCwgMTIyODgsIDEyMjg4LCAxMjI4OCwgMjQ1NzYsIDI0NTc2LCAyNDU3NiwgMjQ1NzYsIDE2Mzg0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxMTQ2ODgsIDExNDY4OCwgMTE0Njg4LCAxMTQ2ODgsIDMyNzY4LCAzMjc2OCwgMzI3NjgsIDMyNzY4LCAzMjc2OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMzkzMjE2LCAzOTMyMTYsIDM5MzIxNiwgMzkzMjE2LCAxOTY2MDgsIDE5NjYwOCwgMTk2NjA4LCAxOTY2MDgsIDY1NTM2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAzNjcwMDE2LCAxNTcyODY0LCAxNTcyODY0LCAxNTcyODY0LCA3ODY0MzIsIDc4NjQzMiwgMjYyMTQ0LCAyNjIxNDQsIDEzMTA3Ml0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTI1ODI5MTIsIDE0NjgwMDY0LCA2MjkxNDU2LCA2MjkxNDU2LCAzMTQ1NzI4LCAxMDQ4NTc2LCAxNTcyODY0LCA1MjQyODgsIDc4NjQzMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTE3NDQwNTEyLCA1MDMzMTY0OCwgMjUxNjU4MjQsIDI1MTY1ODI0LCAxMjU4MjkxMiwgNjI5MTQ1NiwgMjA5NzE1MiwgMzE0NTcyOCwgMTA0ODU3Nl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgNDAyNjUzMTg0LCAyMDEzMjY1OTIsIDEwMDY2MzI5NiwgMTAwNjYzMjk2LCA1MDMzMTY0OCwgMjUxNjU4MjQsIDEyNTgyOTEyLCA0MTk0MzA0LCAyMDk3MTUyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxNjEwNjEyNzM2LCAxODc5MDQ4MTkyLCA5Mzk1MjQwOTYsIDQwMjY1MzE4NCwgNjcxMDg4NjQsIDMzNTU0NDMyLCAxNjc3NzIxNiwgODM4ODYwOCwgNDE5NDMwNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMywgMTYxMDYxMjczNiwgMTg3OTA0ODE5MiwgNDAyNjUzMTg0LCAyMDEzMjY1OTIsIDEwMDY2MzI5NiwgNTAzMzE2NDgsIDgzODg2MDhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDQsIDEwNzM3NDE4MjQsIDE2MTA2MTI3MzYsIDgwNTMwNjM2OCwgNDAyNjUzMTg0LCAxMDA2NjMyOTYsIDUwMzMxNjQ4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA2LCAxNjEwNjEyNzM2LCA4MDUzMDYzNjgsIDQwMjY1MzE4NCwgMTAwNjYzMjk2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA3LCAxNjEwNjEyNzM2LCA4MDUzMDYzNjgsIDIwMTMyNjU5Ml0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgOCwgMTYxMDYxMjczNiwgNDAyNjUzMTg0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA4LCAxMDczNzQxODI0LCAxODc5MDQ4MTkyLCAyNjg0MzU0NTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDksIDE2MTA2MTI3MzYsIDUzNjg3MDkxMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTAsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTEsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEwLCAxLCAyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxMCwgMywgNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgOSwgMywgMTQsIDhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDgsIDEsIDcsIDI4LCAxNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgNywgMSwgMywgMTIsIDQ4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA2LCAxLCAzLCAxNCwgMjQsIDk2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA1LCAzLCA3LCAxMiwgMjQsIDk2LCAxOTJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMsIDEsIDMsIDE0LCAyOCwgNDgsIDk2LCAxOTIsIDI1Nl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMywgNywgMTQsIDI4LCA1NiwgNDgsIDY0LCAxMjgsIDI1NiwgNTEyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAyOCwgNTYsIDQ4LCA5NiwgMTkyLCAxOTIsIDM4NCwgNzY4LCAxNTM2LCAxMDI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAyMjQsIDE5MiwgNDQ4LCAzODQsIDc2OCwgNzY4LCAxNTM2LCAxMDI0LCAyMDQ4LCAyMDQ4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxNzkyLCAxNzkyLCAzNTg0LCAzNTg0LCAzMDcyLCAzMDcyLCA2MTQ0LCA2MTQ0LCA0MDk2LCAxMjI4OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTQzMzYsIDE0MzM2LCAxMjI4OCwgMTIyODgsIDEyMjg4LCAxMjI4OCwgMjQ1NzYsIDI0NTc2LCAyNDU3NiwgMTYzODRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDExNDY4OCwgMTE0Njg4LCAxMTQ2ODgsIDExNDY4OCwgMTE0Njg4LCAxMTQ2ODgsIDMyNzY4LCAzMjc2OCwgMzI3NjgsIDMyNzY4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCA5MTc1MDQsIDkxNzUwNCwgMzkzMjE2LCAzOTMyMTYsIDM5MzIxNiwgMzkzMjE2LCAxOTY2MDgsIDE5NjYwOCwgMTk2NjA4LCA2NTUzNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgNzM0MDAzMiwgNzM0MDAzMiwgMzY3MDAxNiwgMzY3MDAxNiwgMTU3Mjg2NCwgMTU3Mjg2NCwgNzg2NDMyLCA3ODY0MzIsIDI2MjE0NCwgMzkzMjE2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCA1ODcyMDI1NiwgMjUxNjU4MjQsIDI5MzYwMTI4LCAxMjU4MjkxMiwgNjI5MTQ1NiwgNjI5MTQ1NiwgMzE0NTcyOCwgMTA0ODU3NiwgNTI0Mjg4LCA1MjQyODhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDQ2OTc2MjA0OCwgMjM0ODgxMDI0LCAxMDA2NjMyOTYsIDUwMzMxNjQ4LCAyNTE2NTgyNCwgMjUxNjU4MjQsIDEyNTgyOTEyLCA2MjkxNDU2LCAzMTQ1NzI4LCAxMDQ4NTc2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxNjEwNjEyNzM2LCAxODc5MDQ4MTkyLCA5Mzk1MjQwOTYsIDQ2OTc2MjA0OCwgMjM0ODgxMDI0LCAxMDA2NjMyOTYsIDE2Nzc3MjE2LCA4Mzg4NjA4LCA0MTk0MzA0LCAyMDk3MTUyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAzLCAxMDczNzQxODI0LCAxNjEwNjEyNzM2LCA5Mzk1MjQwOTYsIDQ2OTc2MjA0OCwgMTAwNjYzMjk2LCA1MDMzMTY0OCwgMjUxNjU4MjQsIDQxOTQzMDRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDUsIDE2MTA2MTI3MzYsIDE4NzkwNDgxOTIsIDQwMjY1MzE4NCwgMjAxMzI2NTkyLCA1MDMzMTY0OCwgMjUxNjU4MjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDYsIDEwNzM3NDE4MjQsIDE2MTA2MTI3MzYsIDkzOTUyNDA5NiwgMjAxMzI2NTkyLCA1MDMzMTY0OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgNywgMTA3Mzc0MTgyNCwgMTYxMDYxMjczNiwgNDAyNjUzMTg0LCAxMDA2NjMyOTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDgsIDEwNzM3NDE4MjQsIDE4NzkwNDgxOTIsIDQ2OTc2MjA0OCwgNjcxMDg4NjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDksIDE2MTA2MTI3MzYsIDkzOTUyNDA5NiwgMTM0MjE3NzI4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxMCwgMTYxMDYxMjczNiwgMjY4NDM1NDU2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxMCwgMTA3Mzc0MTgyNCwgNTM2ODcwOTEyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxMSwgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxMiwgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTEsIDEsIDJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDExLCAzLCA0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxMCwgMSwgNywgOF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTAsIDMsIDE0LCAxNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgOSwgMywgMTUsIDU2LCAzMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgOCwgMSwgNywgMjgsIDExMiwgNjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDcsIDMsIDcsIDI4LCA0OCwgMTkyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA1LCAxLCAzLCAxNSwgMjgsIDQ4LCAyMjQsIDM4NF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMywgMSwgMywgNywgMTQsIDU2LCAxMTIsIDE5MiwgMzg0LCA3NjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDMsIDcsIDE0LCAyOCwgNTYsIDExMiwgMjI0LCAxOTIsIDI1NiwgNTEyLCAxMDI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCA2MCwgMTIwLCAxMTIsIDIyNCwgNDQ4LCAzODQsIDc2OCwgNzY4LCAxNTM2LCAzMDcyLCAyMDQ4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCA5NjAsIDg5NiwgMTkyMCwgMTc5MiwgMTUzNiwgMzU4NCwgMzA3MiwgMzA3MiwgNjE0NCwgNDA5NiwgMTIyODhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDE1MzYwLCAxNTM2MCwgMTQzMzYsIDE0MzM2LCAxNDMzNiwgMTIyODgsIDEyMjg4LCAxMjI4OCwgMjQ1NzYsIDI0NTc2LCAxNjM4NF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMTE0Njg4LCAxMTQ2ODgsIDExNDY4OCwgMTE0Njg4LCAxMTQ2ODgsIDExNDY4OCwgMTE0Njg4LCAxMTQ2ODgsIDMyNzY4LCAzMjc2OCwgMzI3NjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDE5NjYwODAsIDE5NjYwODAsIDkxNzUwNCwgOTE3NTA0LCA5MTc1MDQsIDM5MzIxNiwgMzkzMjE2LCAzOTMyMTYsIDE5NjYwOCwgMTk2NjA4LCA2NTUzNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMzE0NTcyODAsIDE0NjgwMDY0LCAxNTcyODY0MCwgNzM0MDAzMiwgMzE0NTcyOCwgMzY3MDAxNiwgMTU3Mjg2NCwgMTU3Mjg2NCwgNzg2NDMyLCAyNjIxNDQsIDM5MzIxNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgNTAzMzE2NDgwLCAyNTE2NTgyNDAsIDExNzQ0MDUxMiwgNTg3MjAyNTYsIDI5MzYwMTI4LCAxMjU4MjkxMiwgNjI5MTQ1NiwgNjI5MTQ1NiwgMzE0NTcyOCwgMTU3Mjg2NCwgNTI0Mjg4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxNjEwNjEyNzM2LCAxODc5MDQ4MTkyLCA5Mzk1MjQwOTYsIDQ2OTc2MjA0OCwgMjM0ODgxMDI0LCAxMTc0NDA1MTIsIDU4NzIwMjU2LCAyNTE2NTgyNCwgNDE5NDMwNCwgMjA5NzE1MiwgMTA0ODU3Nl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMywgMTA3Mzc0MTgyNCwgMTYxMDYxMjczNiwgMTg3OTA0ODE5MiwgOTM5NTI0MDk2LCAyMzQ4ODEwMjQsIDExNzQ0MDUxMiwgMjUxNjU4MjQsIDEyNTgyOTEyLCA2MjkxNDU2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA1LCAxMDczNzQxODI0LCAxNjEwNjEyNzM2LCAyMDEzMjY1OTIwLCA0Njk3NjIwNDgsIDEwMDY2MzI5NiwgNTg3MjAyNTYsIDEyNTgyOTEyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA3LCAxNjEwNjEyNzM2LCAxODc5MDQ4MTkyLCA0Njk3NjIwNDgsIDEwMDY2MzI5NiwgMjUxNjU4MjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDgsIDEwNzM3NDE4MjQsIDE4NzkwNDgxOTIsIDQ2OTc2MjA0OCwgMTE3NDQwNTEyLCAxNjc3NzIxNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgOSwgMTYxMDYxMjczNiwgMjAxMzI2NTkyMCwgMjM0ODgxMDI0LCAzMzU1NDQzMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTAsIDE2MTA2MTI3MzYsIDkzOTUyNDA5NiwgNjcxMDg4NjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEwLCAxMDczNzQxODI0LCAxODc5MDQ4MTkyLCAxMzQyMTc3MjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDExLCAxNjEwNjEyNzM2LCAyNjg0MzU0NTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDExLCAxMDczNzQxODI0LCA1MzY4NzA5MTJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEyLCAxMDczNzQxODI0XSksXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEzLCAxXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxMiwgMSwgM10pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTIsIDMsIDZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEyLCA3LCAxMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTEsIDEsIDE1LCAxNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTEsIDcsIDMwLCAzMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTAsIDMsIDE1LCA1NiwgNjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDksIDMsIDE1LCA2MCwgMjQwLCAxMjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDgsIDMsIDE1LCAzMCwgMTEyLCA0NDgsIDI1Nl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgNiwgMSwgNywgMTUsIDYwLCAxMTIsIDE5MiwgNzY4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAzLCAxLCAzLCA3LCAxNSwgMzAsIDU2LCAyNDAsIDQ0OCwgNzY4LCAxNTM2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCA3LCAxNSwgMzEsIDMwLCA2MCwgMTEyLCAyMjQsIDQ0OCwgODk2LCA3NjgsIDEwMjQsIDIwNDhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDI0OCwgMjQwLCA0ODAsIDQ4MCwgOTYwLCA4OTYsIDE3OTIsIDE1MzYsIDMwNzIsIDMwNzIsIDYxNDQsIDQwOTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDc5MzYsIDc5MzYsIDc2ODAsIDc2ODAsIDE1MzYwLCAxNTM2MCwgMTQzMzYsIDE0MzM2LCAxMjI4OCwgMTIyODgsIDI0NTc2LCAyNDU3Nl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMjUzOTUyLCAyNTM5NTIsIDI1Mzk1MiwgMjUzOTUyLCAxMTQ2ODgsIDExNDY4OCwgMTE0Njg4LCAxMTQ2ODgsIDExNDY4OCwgMTE0Njg4LCAzMjc2OCwgMzI3NjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDgxMjY0NjQsIDgxMjY0NjQsIDM5MzIxNjAsIDM5MzIxNjAsIDE5NjYwODAsIDE5NjYwODAsIDkxNzUwNCwgOTE3NTA0LCAzOTMyMTYsIDM5MzIxNiwgMTk2NjA4LCAxOTY2MDhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDI2MDA0Njg0OCwgMTI1ODI5MTIwLCA2MjkxNDU2MCwgNjI5MTQ1NjAsIDMxNDU3MjgwLCAxNDY4MDA2NCwgNzM0MDAzMiwgMzE0NTcyOCwgMTU3Mjg2NCwgMTU3Mjg2NCwgNzg2NDMyLCAyNjIxNDRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDE4NzkwNDgxOTIsIDIwMTMyNjU5MjAsIDIwODAzNzQ3ODQsIDEwMDY2MzI5NjAsIDUwMzMxNjQ4MCwgMTE3NDQwNTEyLCA1ODcyMDI1NiwgMjkzNjAxMjgsIDE0NjgwMDY0LCA2MjkxNDU2LCAxMDQ4NTc2LCA1MjQyODhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMsIDEwNzM3NDE4MjQsIDE2MTA2MTI3MzYsIDE4NzkwNDgxOTIsIDIwMTMyNjU5MjAsIDEwMDY2MzI5NjAsIDIzNDg4MTAyNCwgMTI1ODI5MTIwLCAyOTM2MDEyOCwgNjI5MTQ1NiwgMzE0NTcyOF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgNiwgMTA3Mzc0MTgyNCwgMTg3OTA0ODE5MiwgMjAxMzI2NTkyMCwgNTAzMzE2NDgwLCAxMTc0NDA1MTIsIDI1MTY1ODI0LCA2MjkxNDU2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA4LCAxNjEwNjEyNzM2LCAyMDEzMjY1OTIwLCAxMDA2NjMyOTYwLCAxMTc0NDA1MTIsIDI5MzYwMTI4LCA0MTk0MzA0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA5LCAxNjEwNjEyNzM2LCAyMDEzMjY1OTIwLCA1MDMzMTY0ODAsIDEyNTgyOTEyMCwgODM4ODYwOF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTAsIDE2MTA2MTI3MzYsIDIwMTMyNjU5MjAsIDIzNDg4MTAyNCwgMTY3NzcyMTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDExLCAxODc5MDQ4MTkyLCAxMDA2NjMyOTYwLCAzMzU1NDQzMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTEsIDEwNzM3NDE4MjQsIDIwMTMyNjU5MjAsIDY3MTA4ODY0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxMiwgMTg3OTA0ODE5MiwgNDAyNjUzMTg0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxMiwgMTYxMDYxMjczNiwgODA1MzA2MzY4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxMiwgMTA3Mzc0MTgyNCwgMTYxMDYxMjczNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTMsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTQsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE0LCAzXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxMywgMSwgN10pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTMsIDMsIDE0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxMywgMTUsIDI4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxMiwgMSwgMzEsIDQ4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxMiwgNywgNjMsIDk2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxMSwgMywgMTUsIDEyNCwgMTkyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxMCwgMSwgMTUsIDYzLCAyNDAsIDI1Nl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgOSwgMywgMTUsIDYzLCAyNTIsIDk2MCwgNTEyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA3LCAxLCA3LCAxNSwgNjMsIDI1MiwgNDgwLCAxNzkyLCAxMDI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA0LCAxLCAzLCAxNSwgMzEsIDYzLCAxMjQsIDI0MCwgOTYwLCAxNzkyLCAzMDcyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxLCAxNSwgMzEsIDYzLCA2MywgMTI2LCAyNTIsIDQ5NiwgNDgwLCA5NjAsIDE3OTIsIDM1ODQsIDMwNzIsIDQwOTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDQwODAsIDQwNjQsIDQwMzIsIDQwMzIsIDgwNjQsIDc5MzYsIDc2ODAsIDc2ODAsIDE1MzYwLCAxNDMzNiwgMTIyODgsIDEyMjg4LCAyNDU3Nl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgNTIwMTkyLCA1MjAxOTIsIDUyMDE5MiwgNTIwMTkyLCAyNTM5NTIsIDI1Mzk1MiwgMjUzOTUyLCAyNTM5NTIsIDExNDY4OCwgMTE0Njg4LCAxMTQ2ODgsIDExNDY4OCwgMzI3NjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDEzMzY5MzQ0MCwgNjY1ODQ1NzYsIDMzMDMwMTQ0LCAzMzAzMDE0NCwgMTY1MTUwNzIsIDgxMjY0NjQsIDM5MzIxNjAsIDM5MzIxNjAsIDE5NjYwODAsIDkxNzUwNCwgMzkzMjE2LCAzOTMyMTYsIDE5NjYwOF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMjAxMzI2NTkyMCwgMjA4MDM3NDc4NCwgMjExMzkyOTIxNiwgMjExMzkyOTIxNiwgMTA1Njk2NDYwOCwgNTI4NDgyMzA0LCAxMzAwMjM0MjQsIDYyOTE0NTYwLCAzMTQ1NzI4MCwgNzM0MDAzMiwgMzY3MDAxNiwgMTU3Mjg2NCwgMjYyMTQ0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA0LCAxMDczNzQxODI0LCAxNjEwNjEyNzM2LCAyMDEzMjY1OTIwLCAyMDgwMzc0Nzg0LCAyMTEzOTI5MjE2LCA1MjAwOTM2OTYsIDEyNTgyOTEyMCwgMzE0NTcyODAsIDczNDAwMzIsIDE1NzI4NjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDcsIDEwNzM3NDE4MjQsIDE4NzkwNDgxOTIsIDIwMTMyNjU5MjAsIDIxMTM5MjkyMTYsIDUyODQ4MjMwNCwgNjI5MTQ1NjAsIDczNDAwMzIsIDEwNDg1NzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDksIDE2MTA2MTI3MzYsIDIwMTMyNjU5MjAsIDIxMTM5MjkyMTYsIDUyODQ4MjMwNCwgMzE0NTcyODAsIDIwOTcxNTJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEwLCAxMDczNzQxODI0LCAyMDEzMjY1OTIwLCAyMTEzOTI5MjE2LCAxMjU4MjkxMjAsIDQxOTQzMDRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDExLCAxNjEwNjEyNzM2LCAyMDEzMjY1OTIwLCA1MjAwOTM2OTYsIDI1MTY1ODI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxMiwgMTg3OTA0ODE5MiwgMjExMzkyOTIxNiwgNTAzMzE2NDhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEyLCAxMDczNzQxODI0LCAyMDgwMzc0Nzg0LCAxMDA2NjMyOTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEzLCAyMDEzMjY1OTIwLCA0Njk3NjIwNDhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEzLCAxNjEwNjEyNzM2LCA5Mzk1MjQwOTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEzLCAxMDczNzQxODI0LCAxODc5MDQ4MTkyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxNCwgMTYxMDYxMjczNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTQsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTUsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE1LCAzXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxNSwgN10pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTQsIDEsIDE1XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxNCwgMywgMzFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE0LCAxNSwgNjNdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE0LCAzMSwgMTI3XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxMywgMywgNjMsIDI1Ml0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTMsIDE1LCAyNTUsIDQ5Nl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTIsIDMsIDYzLCA1MTEsIDk2MF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTEsIDMsIDMxLCAyNTUsIDEwMjMsIDE3OTJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDksIDMsIDE1LCA2MywgMjU1LCAxMDIzLCA0MDgwLCAzMDcyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA1LCAxLCAzLCAxNSwgMzEsIDYzLCAyNTUsIDUxMSwgMTAyMywgNDA4MCwgNzkzNiwgNDA5Nl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMSwgMjU1LCAyNTUsIDUxMSwgNTExLCAxMDIzLCAxMDIzLCAyMDQ3LCAyMDQ3LCA0MDkyLCA0MDgwLCA4MTI4LCA3OTM2LCAxNTM2MCwgMTIyODhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDgzODgzNTIsIDgzODgzNTIsIDQxOTM3OTIsIDQxOTM3OTIsIDIwOTYxMjgsIDIwOTYxMjgsIDEwNDY1MjgsIDEwNDY1MjgsIDUyMDE5MiwgNTIwMTkyLCAyNTM5NTIsIDI1Mzk1MiwgMTE0Njg4LCAxMTQ2ODhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEsIDIxMzkwOTUwNDAsIDIxMzkwOTUwNDAsIDIxNDMyODkzNDQsIDIxNDMyODkzNDQsIDIxNDUzODY0OTYsIDIxNDUzODY0OTYsIDIxNDY0MzUwNzIsIDIxNDY0MzUwNzIsIDUzNjM0NjYyNCwgMTMzNjkzNDQwLCAzMzI5MjI4OCwgODEyNjQ2NCwgMTk2NjA4MCwgMzkzMjE2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyA1LCAxMDczNzQxODI0LCAxNjEwNjEyNzM2LCAyMDEzMjY1OTIwLCAyMDgwMzc0Nzg0LCAyMTEzOTI5MjE2LCAyMTM5MDk1MDQwLCAyMTQzMjg5MzQ0LCAyMTQ1Mzg2NDk2LCAxMzM2OTM0NDAsIDgxMjY0NjQsIDI2MjE0NF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgOSwgMTYxMDYxMjczNiwgMjAxMzI2NTkyMCwgMjExMzkyOTIxNiwgMjEzOTA5NTA0MCwgMjE0NTM4NjQ5NiwgMTMzNjkzNDQwLCAxNTcyODY0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxMSwgMTYxMDYxMjczNiwgMjA4MDM3NDc4NCwgMjEzOTA5NTA0MCwgMjE0NTM4NjQ5NiwgNzM0MDAzMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTIsIDE2MTA2MTI3MzYsIDIxMTM5MjkyMTYsIDIxNDMyODkzNDQsIDMxNDU3MjgwXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxMywgMjAxMzI2NTkyMCwgMjEzOTA5NTA0MCwgMTMwMDIzNDI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxMywgMTYxMDYxMjczNiwgMjExMzkyOTIxNiwgNTI4NDgyMzA0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxNCwgMjA4MDM3NDc4NCwgMjEzMDcwNjQzMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTQsIDIwMTMyNjU5MjAsIDIxMTM5MjkyMTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE0LCAxNjEwNjEyNzM2LCAyMDgwMzc0Nzg0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxNCwgMTA3Mzc0MTgyNCwgMjAxMzI2NTkyMF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTUsIDE4NzkwNDgxOTJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE1LCAxNjEwNjEyNzM2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxNSwgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxNiwgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTYsIDNdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE2LCA3XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxNiwgMTVdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE2LCAzMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTYsIDYzXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxNiwgMTI3XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxNSwgMywgMjU1LCAzXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxNSwgMTUsIDUxMSwgMTVdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE1LCA2MywgMTAyMywgNjNdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE1LCAyNTUsIDIwNDcsIDI1NV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTQsIDE1LCAxMDIzLCA0MDk1LCAxMDIzLCAxNV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTMsIDE1LCAyNTUsIDQwOTUsIDgxOTEsIDQwOTUsIDI1NSwgMTVdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDksIDMsIDE1LCA2MywgMjU1LCAxMDIzLCA0MDk1LCAxNjM4MywgMTYzODMsIDE2MzgzLCA0MDk1LCAxMDIzLCAyNTUsIDYzLCAxNSwgM10pLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDksIDE2MTA2MTI3MzYsIDIwMTMyNjU5MjAsIDIxMTM5MjkyMTYsIDIxMzkwOTUwNDAsIDIxNDUzODY0OTYsIDIxNDY5NTkzNjAsIDIxNDczNTI1NzYsIDIxNDczNTI1NzYsIDIxNDczNTI1NzYsIDIxNDY5NTkzNjAsIDIxNDUzODY0OTYsIDIxMzkwOTUwNDAsIDIxMTM5MjkyMTYsIDIwMTMyNjU5MjAsIDE2MTA2MTI3MzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDEzLCAyMDEzMjY1OTIwLCAyMTM5MDk1MDQwLCAyMTQ2OTU5MzYwLCAyMTQ3MjIxNTA0LCAyMTQ2OTU5MzYwLCAyMTM5MDk1MDQwLCAyMDEzMjY1OTIwXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxNCwgMjAxMzI2NTkyMCwgMjE0NTM4NjQ5NiwgMjE0Njk1OTM2MCwgMjE0NTM4NjQ5NiwgMjAxMzI2NTkyMF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTUsIDIxMzkwOTUwNDAsIDIxNDY0MzUwNzIsIDIxMzkwOTUwNDBdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE1LCAyMTEzOTI5MjE2LCAyMTQ1Mzg2NDk2LCAyMTEzOTI5MjE2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxNSwgMjAxMzI2NTkyMCwgMjE0MzI4OTM0NCwgMjAxMzI2NTkyMF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTUsIDE2MTA2MTI3MzYsIDIxMzkwOTUwNDAsIDE2MTA2MTI3MzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE2LCAyMTMwNzA2NDMyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxNiwgMjExMzkyOTIxNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTYsIDIwODAzNzQ3ODRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE2LCAyMDEzMjY1OTIwXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxNiwgMTg3OTA0ODE5Ml0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTYsIDE2MTA2MTI3MzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE2LCAxMDczNzQxODI0XSksXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE3LCAxXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxNywgM10pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTcsIDddKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE3LCAxNSwgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTcsIDMxLCAzXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxNywgNjMsIDE1XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxNywgMTI3LCAzMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTcsIDI1MiwgNjMsIDNdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE3LCA0OTYsIDI1NSwgMTVdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE3LCA5NjAsIDUxMSwgNjMsIDNdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE3LCAxNzkyLCAxMDIzLCAyNTUsIDMxLCAzXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxNywgMzA3MiwgNDA4MCwgMTAyMywgMjU1LCA2MywgMTUsIDNdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE3LCA0MDk2LCA3OTM2LCA0MDgwLCAxMDIzLCA1MTEsIDI1NSwgNjMsIDMxLCAxNSwgMywgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTgsIDEyMjg4LCAxNTM2MCwgNzkzNiwgODEyOCwgNDA4MCwgNDA5MiwgMjA0NywgMjA0NywgMTAyMywgMTAyMywgNTExLCA1MTEsIDI1NSwgMjU1XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxOCwgMTE0Njg4LCAxMTQ2ODgsIDI1Mzk1MiwgMjUzOTUyLCA1MjAxOTIsIDUyMDE5MiwgMTA0NjUyOCwgMTA0NjUyOCwgMjA5NjEyOCwgMjA5NjEyOCwgNDE5Mzc5MiwgNDE5Mzc5MiwgODM4ODM1MiwgODM4ODM1Ml0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTgsIDM5MzIxNiwgMTk2NjA4MCwgODEyNjQ2NCwgMzMyOTIyODgsIDEzMzY5MzQ0MCwgNTM2MzQ2NjI0LCAyMTQ2NDM1MDcyLCAyMTQ2NDM1MDcyLCAyMTQ1Mzg2NDk2LCAyMTQ1Mzg2NDk2LCAyMTQzMjg5MzQ0LCAyMTQzMjg5MzQ0LCAyMTM5MDk1MDQwLCAyMTM5MDk1MDQwXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxNywgMjYyMTQ0LCA4MTI2NDY0LCAxMzM2OTM0NDAsIDIxNDUzODY0OTYsIDIxNDMyODkzNDQsIDIxMzkwOTUwNDAsIDIxMTM5MjkyMTYsIDIwODAzNzQ3ODQsIDIwMTMyNjU5MjAsIDE2MTA2MTI3MzYsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE3LCAxNTcyODY0LCAxMzM2OTM0NDAsIDIxNDUzODY0OTYsIDIxMzkwOTUwNDAsIDIxMTM5MjkyMTYsIDIwMTMyNjU5MjAsIDE2MTA2MTI3MzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE3LCA3MzQwMDMyLCAyMTQ1Mzg2NDk2LCAyMTM5MDk1MDQwLCAyMDgwMzc0Nzg0LCAxNjEwNjEyNzM2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxNywgMzE0NTcyODAsIDIxNDMyODkzNDQsIDIxMTM5MjkyMTYsIDE2MTA2MTI3MzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE3LCAxMzAwMjM0MjQsIDIxMzkwOTUwNDAsIDIwMTMyNjU5MjBdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE3LCA1Mjg0ODIzMDQsIDIxMTM5MjkyMTYsIDE2MTA2MTI3MzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE3LCAyMTMwNzA2NDMyLCAyMDgwMzc0Nzg0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxNywgMjExMzkyOTIxNiwgMjAxMzI2NTkyMF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTcsIDIwODAzNzQ3ODQsIDE2MTA2MTI3MzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE3LCAyMDEzMjY1OTIwLCAxMDczNzQxODI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxNywgMTg3OTA0ODE5Ml0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTcsIDE2MTA2MTI3MzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE3LCAxMDczNzQxODI0XSksXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE4LCAxXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxOCwgM10pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTgsIDcsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE4LCAxNCwgM10pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTgsIDI4LCAxNV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTgsIDQ4LCAzMSwgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTgsIDk2LCA2MywgN10pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTgsIDE5MiwgMTI0LCAxNSwgM10pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTgsIDI1NiwgMjQwLCA2MywgMTUsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE4LCA1MTIsIDk2MCwgMjUyLCA2MywgMTUsIDNdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE4LCAxMDI0LCAxNzkyLCA0ODAsIDI1MiwgNjMsIDE1LCA3LCAxXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxOSwgMzA3MiwgMTc5MiwgOTYwLCAyNDAsIDEyNCwgNjMsIDMxLCAxNSwgMywgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTksIDQwOTYsIDMwNzIsIDM1ODQsIDE3OTIsIDk2MCwgNDgwLCA0OTYsIDI1MiwgMTI2LCA2MywgNjMsIDMxLCAxNV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTksIDI0NTc2LCAxMjI4OCwgMTIyODgsIDE0MzM2LCAxNTM2MCwgNzY4MCwgNzY4MCwgNzkzNiwgODA2NCwgNDAzMiwgNDAzMiwgNDA2NCwgNDA4MF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTksIDMyNzY4LCAxMTQ2ODgsIDExNDY4OCwgMTE0Njg4LCAxMTQ2ODgsIDI1Mzk1MiwgMjUzOTUyLCAyNTM5NTIsIDI1Mzk1MiwgNTIwMTkyLCA1MjAxOTIsIDUyMDE5MiwgNTIwMTkyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxOSwgMTk2NjA4LCAzOTMyMTYsIDM5MzIxNiwgOTE3NTA0LCAxOTY2MDgwLCAzOTMyMTYwLCAzOTMyMTYwLCA4MTI2NDY0LCAxNjUxNTA3MiwgMzMwMzAxNDQsIDMzMDMwMTQ0LCA2NjU4NDU3NiwgMTMzNjkzNDQwXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxOSwgMjYyMTQ0LCAxNTcyODY0LCAzNjcwMDE2LCA3MzQwMDMyLCAzMTQ1NzI4MCwgNjI5MTQ1NjAsIDEzMDAyMzQyNCwgNTI4NDgyMzA0LCAxMDU2OTY0NjA4LCAyMTEzOTI5MjE2LCAyMTEzOTI5MjE2LCAyMDgwMzc0Nzg0LCAyMDEzMjY1OTIwXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxOSwgMTU3Mjg2NCwgNzM0MDAzMiwgMzE0NTcyODAsIDEyNTgyOTEyMCwgNTIwMDkzNjk2LCAyMTEzOTI5MjE2LCAyMDgwMzc0Nzg0LCAyMDEzMjY1OTIwLCAxNjEwNjEyNzM2LCAxMDczNzQxODI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxOCwgMTA0ODU3NiwgNzM0MDAzMiwgNjI5MTQ1NjAsIDUyODQ4MjMwNCwgMjExMzkyOTIxNiwgMjAxMzI2NTkyMCwgMTg3OTA0ODE5MiwgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTgsIDIwOTcxNTIsIDMxNDU3MjgwLCA1Mjg0ODIzMDQsIDIxMTM5MjkyMTYsIDIwMTMyNjU5MjAsIDE2MTA2MTI3MzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE4LCA0MTk0MzA0LCAxMjU4MjkxMjAsIDIxMTM5MjkyMTYsIDIwMTMyNjU5MjAsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE4LCAyNTE2NTgyNCwgNTIwMDkzNjk2LCAyMDEzMjY1OTIwLCAxNjEwNjEyNzM2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxOCwgNTAzMzE2NDgsIDIxMTM5MjkyMTYsIDE4NzkwNDgxOTJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE4LCAxMDA2NjMyOTYsIDIwODAzNzQ3ODQsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE4LCA0Njk3NjIwNDgsIDIwMTMyNjU5MjBdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE4LCA5Mzk1MjQwOTYsIDE2MTA2MTI3MzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE4LCAxODc5MDQ4MTkyLCAxMDczNzQxODI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxOCwgMTYxMDYxMjczNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTgsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTksIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE5LCAzLCAxXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxOSwgNiwgM10pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTksIDEyLCA3XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxOSwgMTYsIDE1LCAxXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxOSwgMzIsIDMwLCA3XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxOSwgNjQsIDU2LCAxNSwgM10pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTksIDEyOCwgMjQwLCA2MCwgMTUsIDNdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE5LCAyNTYsIDQ0OCwgMTEyLCAzMCwgMTUsIDNdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIwLCA3NjgsIDE5MiwgMTEyLCA2MCwgMTUsIDcsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIwLCAxNTM2LCA3NjgsIDQ0OCwgMjQwLCA1NiwgMzAsIDE1LCA3LCAzLCAxXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMCwgMjA0OCwgMTAyNCwgNzY4LCA4OTYsIDQ0OCwgMjI0LCAxMTIsIDYwLCAzMCwgMzEsIDE1LCA3XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMCwgNDA5NiwgNjE0NCwgMzA3MiwgMzA3MiwgMTUzNiwgMTc5MiwgODk2LCA5NjAsIDQ4MCwgNDgwLCAyNDAsIDI0OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjAsIDI0NTc2LCAyNDU3NiwgMTIyODgsIDEyMjg4LCAxNDMzNiwgMTQzMzYsIDE1MzYwLCAxNTM2MCwgNzY4MCwgNzY4MCwgNzkzNiwgNzkzNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjAsIDMyNzY4LCAzMjc2OCwgMTE0Njg4LCAxMTQ2ODgsIDExNDY4OCwgMTE0Njg4LCAxMTQ2ODgsIDExNDY4OCwgMjUzOTUyLCAyNTM5NTIsIDI1Mzk1MiwgMjUzOTUyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMCwgMTk2NjA4LCAxOTY2MDgsIDM5MzIxNiwgMzkzMjE2LCA5MTc1MDQsIDkxNzUwNCwgMTk2NjA4MCwgMTk2NjA4MCwgMzkzMjE2MCwgMzkzMjE2MCwgODEyNjQ2NCwgODEyNjQ2NF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjAsIDI2MjE0NCwgNzg2NDMyLCAxNTcyODY0LCAxNTcyODY0LCAzMTQ1NzI4LCA3MzQwMDMyLCAxNDY4MDA2NCwgMzE0NTcyODAsIDYyOTE0NTYwLCA2MjkxNDU2MCwgMTI1ODI5MTIwLCAyNjAwNDY4NDhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIwLCA1MjQyODgsIDEwNDg1NzYsIDYyOTE0NTYsIDE0NjgwMDY0LCAyOTM2MDEyOCwgNTg3MjAyNTYsIDExNzQ0MDUxMiwgNTAzMzE2NDgwLCAxMDA2NjMyOTYwLCAyMDgwMzc0Nzg0LCAyMDEzMjY1OTIwLCAxODc5MDQ4MTkyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMCwgMzE0NTcyOCwgNjI5MTQ1NiwgMjkzNjAxMjgsIDEyNTgyOTEyMCwgMjM0ODgxMDI0LCAxMDA2NjMyOTYwLCAyMDEzMjY1OTIwLCAxODc5MDQ4MTkyLCAxNjEwNjEyNzM2LCAxMDczNzQxODI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMCwgNjI5MTQ1NiwgMjUxNjU4MjQsIDExNzQ0MDUxMiwgNTAzMzE2NDgwLCAyMDEzMjY1OTIwLCAxODc5MDQ4MTkyLCAxMDczNzQxODI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxOSwgNDE5NDMwNCwgMjkzNjAxMjgsIDExNzQ0MDUxMiwgMTAwNjYzMjk2MCwgMjAxMzI2NTkyMCwgMTYxMDYxMjczNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTksIDgzODg2MDgsIDEyNTgyOTEyMCwgNTAzMzE2NDgwLCAyMDEzMjY1OTIwLCAxNjEwNjEyNzM2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxOSwgMTY3NzcyMTYsIDIzNDg4MTAyNCwgMjAxMzI2NTkyMCwgMTYxMDYxMjczNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMTksIDMzNTU0NDMyLCAxMDA2NjMyOTYwLCAxODc5MDQ4MTkyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxOSwgNjcxMDg4NjQsIDIwMTMyNjU5MjAsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE5LCA0MDI2NTMxODQsIDE4NzkwNDgxOTJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE5LCA4MDUzMDYzNjgsIDE2MTA2MTI3MzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDE5LCAxNjEwNjEyNzM2LCAxMDczNzQxODI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAxOSwgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMCwgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjAsIDIsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIwLCA0LCAzXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMCwgOCwgNywgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjAsIDE2LCAxNCwgM10pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjAsIDMyLCA1NiwgMTUsIDNdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIwLCA2NCwgMTEyLCAyOCwgNywgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjEsIDE5MiwgNDgsIDI4LCA3LCAzXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMSwgMzg0LCAyMjQsIDQ4LCAyOCwgMTUsIDMsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIxLCA3NjgsIDM4NCwgMTkyLCAxMTIsIDU2LCAxNCwgNywgMywgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjEsIDEwMjQsIDUxMiwgMjU2LCAxOTIsIDIyNCwgMTEyLCA1NiwgMjgsIDE0LCA3LCAzXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMSwgMjA0OCwgMzA3MiwgMTUzNiwgNzY4LCA3NjgsIDM4NCwgNDQ4LCAyMjQsIDExMiwgMTIwLCA2MF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjEsIDEyMjg4LCA0MDk2LCA2MTQ0LCAzMDcyLCAzMDcyLCAzNTg0LCAxNTM2LCAxNzkyLCAxOTIwLCA4OTYsIDk2MF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjEsIDE2Mzg0LCAyNDU3NiwgMjQ1NzYsIDEyMjg4LCAxMjI4OCwgMTIyODgsIDE0MzM2LCAxNDMzNiwgMTQzMzYsIDE1MzYwLCAxNTM2MF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjEsIDMyNzY4LCAzMjc2OCwgMzI3NjgsIDExNDY4OCwgMTE0Njg4LCAxMTQ2ODgsIDExNDY4OCwgMTE0Njg4LCAxMTQ2ODgsIDExNDY4OCwgMTE0Njg4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMSwgNjU1MzYsIDE5NjYwOCwgMTk2NjA4LCAzOTMyMTYsIDM5MzIxNiwgMzkzMjE2LCA5MTc1MDQsIDkxNzUwNCwgOTE3NTA0LCAxOTY2MDgwLCAxOTY2MDgwXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMSwgMzkzMjE2LCAyNjIxNDQsIDc4NjQzMiwgMTU3Mjg2NCwgMTU3Mjg2NCwgMzY3MDAxNiwgMzE0NTcyOCwgNzM0MDAzMiwgMTU3Mjg2NDAsIDE0NjgwMDY0LCAzMTQ1NzI4MF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjEsIDUyNDI4OCwgMTU3Mjg2NCwgMzE0NTcyOCwgNjI5MTQ1NiwgNjI5MTQ1NiwgMTI1ODI5MTIsIDI5MzYwMTI4LCA1ODcyMDI1NiwgMTE3NDQwNTEyLCAyNTE2NTgyNDAsIDUwMzMxNjQ4MF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjEsIDEwNDg1NzYsIDIwOTcxNTIsIDQxOTQzMDQsIDI1MTY1ODI0LCA1ODcyMDI1NiwgMTE3NDQwNTEyLCAyMzQ4ODEwMjQsIDQ2OTc2MjA0OCwgOTM5NTI0MDk2LCAxODc5MDQ4MTkyLCAxNjEwNjEyNzM2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMSwgNjI5MTQ1NiwgMTI1ODI5MTIsIDI1MTY1ODI0LCAxMTc0NDA1MTIsIDIzNDg4MTAyNCwgOTM5NTI0MDk2LCAxODc5MDQ4MTkyLCAxNjEwNjEyNzM2LCAxMDczNzQxODI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMSwgMTI1ODI5MTIsIDU4NzIwMjU2LCAxMDA2NjMyOTYsIDQ2OTc2MjA0OCwgMjAxMzI2NTkyMCwgMTYxMDYxMjczNiwgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjEsIDI1MTY1ODI0LCAxMDA2NjMyOTYsIDQ2OTc2MjA0OCwgMTg3OTA0ODE5MiwgMTYxMDYxMjczNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjAsIDE2Nzc3MjE2LCAxMTc0NDA1MTIsIDQ2OTc2MjA0OCwgMTg3OTA0ODE5MiwgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjAsIDMzNTU0NDMyLCAyMzQ4ODEwMjQsIDIwMTMyNjU5MjAsIDE2MTA2MTI3MzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIwLCA2NzEwODg2NCwgOTM5NTI0MDk2LCAxNjEwNjEyNzM2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMCwgMTM0MjE3NzI4LCAxODc5MDQ4MTkyLCAxMDczNzQxODI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMCwgMjY4NDM1NDU2LCAxNjEwNjEyNzM2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMCwgNTM2ODcwOTEyLCAxMDczNzQxODI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMCwgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMSwgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjEsIDIsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIxLCA0LCAzXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMSwgOCwgMTQsIDNdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIxLCAxNiwgMjgsIDcsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIyLCA0OCwgMTIsIDMsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIyLCA5NiwgMjQsIDE0LCAzLCAxXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMiwgMTkyLCA5NiwgMjQsIDEyLCA3LCAzXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMiwgMjU2LCAxOTIsIDk2LCA0OCwgMjgsIDE0LCAzLCAxXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMiwgNTEyLCAyNTYsIDEyOCwgNjQsIDQ4LCA1NiwgMjgsIDE0LCA3LCAzXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMiwgMTAyNCwgMTUzNiwgNzY4LCAzODQsIDE5MiwgMTkyLCA5NiwgNDgsIDU2LCAyOF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjIsIDIwNDgsIDIwNDgsIDEwMjQsIDE1MzYsIDc2OCwgNzY4LCAzODQsIDQ0OCwgMTkyLCAyMjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIyLCAxMjI4OCwgNDA5NiwgNjE0NCwgNjE0NCwgMzA3MiwgMzA3MiwgMzU4NCwgMzU4NCwgMTc5MiwgMTc5Ml0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjIsIDE2Mzg0LCAyNDU3NiwgMjQ1NzYsIDI0NTc2LCAxMjI4OCwgMTIyODgsIDEyMjg4LCAxMjI4OCwgMTQzMzYsIDE0MzM2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMiwgMzI3NjgsIDMyNzY4LCAzMjc2OCwgMzI3NjgsIDExNDY4OCwgMTE0Njg4LCAxMTQ2ODgsIDExNDY4OCwgMTE0Njg4LCAxMTQ2ODhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIyLCA2NTUzNiwgMTk2NjA4LCAxOTY2MDgsIDE5NjYwOCwgMzkzMjE2LCAzOTMyMTYsIDM5MzIxNiwgMzkzMjE2LCA5MTc1MDQsIDkxNzUwNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjIsIDM5MzIxNiwgMjYyMTQ0LCA3ODY0MzIsIDc4NjQzMiwgMTU3Mjg2NCwgMTU3Mjg2NCwgMzY3MDAxNiwgMzY3MDAxNiwgNzM0MDAzMiwgNzM0MDAzMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjIsIDUyNDI4OCwgNTI0Mjg4LCAxMDQ4NTc2LCAzMTQ1NzI4LCA2MjkxNDU2LCA2MjkxNDU2LCAxMjU4MjkxMiwgMjkzNjAxMjgsIDI1MTY1ODI0LCA1ODcyMDI1Nl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjIsIDEwNDg1NzYsIDMxNDU3MjgsIDYyOTE0NTYsIDEyNTgyOTEyLCAyNTE2NTgyNCwgMjUxNjU4MjQsIDUwMzMxNjQ4LCAxMDA2NjMyOTYsIDIzNDg4MTAyNCwgNDY5NzYyMDQ4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMiwgMjA5NzE1MiwgNDE5NDMwNCwgODM4ODYwOCwgMTY3NzcyMTYsIDEwMDY2MzI5NiwgMjM0ODgxMDI0LCA0Njk3NjIwNDgsIDkzOTUyNDA5NiwgMTg3OTA0ODE5MiwgMTYxMDYxMjczNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjIsIDQxOTQzMDQsIDI1MTY1ODI0LCA1MDMzMTY0OCwgMTAwNjYzMjk2LCA0Njk3NjIwNDgsIDkzOTUyNDA5NiwgMTYxMDYxMjczNiwgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjIsIDI1MTY1ODI0LCA1MDMzMTY0OCwgMjAxMzI2NTkyLCA0MDI2NTMxODQsIDE4NzkwNDgxOTIsIDE2MTA2MTI3MzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIyLCA1MDMzMTY0OCwgMjAxMzI2NTkyLCA5Mzk1MjQwOTYsIDE2MTA2MTI3MzYsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIyLCAxMDA2NjMyOTYsIDQwMjY1MzE4NCwgMTYxMDYxMjczNiwgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjEsIDY3MTA4ODY0LCA0Njk3NjIwNDgsIDE4NzkwNDgxOTIsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIxLCAxMzQyMTc3MjgsIDkzOTUyNDA5NiwgMTYxMDYxMjczNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjEsIDI2ODQzNTQ1NiwgMTYxMDYxMjczNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjEsIDUzNjg3MDkxMiwgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjEsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjIsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIyLCAyLCAzXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMiwgNCwgNywgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjMsIDEyLCAzXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMywgMjQsIDYsIDNdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIzLCA0OCwgMTIsIDYsIDNdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIzLCA5NiwgNDgsIDEyLCA2LCAzLCAxXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMywgMTI4LCA5NiwgNDgsIDI0LCAxMiwgNywgM10pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjMsIDI1NiwgMTI4LCA2NCwgMzIsIDE2LCAxMiwgMTQsIDcsIDNdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIzLCA1MTIsIDI1NiwgMzg0LCAxOTIsIDk2LCA0OCwgNDgsIDI0LCAxMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjMsIDEwMjQsIDE1MzYsIDUxMiwgNzY4LCAzODQsIDE5MiwgMTkyLCA5NiwgMTEyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMywgNjE0NCwgMjA0OCwgMzA3MiwgMTAyNCwgMTUzNiwgNzY4LCA3NjgsIDg5NiwgMzg0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMywgODE5MiwgNDA5NiwgNDA5NiwgNjE0NCwgNjE0NCwgMzA3MiwgMzA3MiwgMzA3MiwgMzU4NF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjMsIDE2Mzg0LCAyNDU3NiwgMjQ1NzYsIDI0NTc2LCAyNDU3NiwgMTIyODgsIDEyMjg4LCAxMjI4OCwgMTIyODhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIzLCAzMjc2OCwgMzI3NjgsIDMyNzY4LCAzMjc2OCwgMzI3NjgsIDExNDY4OCwgMTE0Njg4LCAxMTQ2ODgsIDExNDY4OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjMsIDY1NTM2LCAxOTY2MDgsIDE5NjYwOCwgMTk2NjA4LCAxOTY2MDgsIDM5MzIxNiwgMzkzMjE2LCAzOTMyMTYsIDM5MzIxNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjMsIDEzMTA3MiwgMjYyMTQ0LCAyNjIxNDQsIDc4NjQzMiwgNzg2NDMyLCAxNTcyODY0LCAxNTcyODY0LCAxNTcyODY0LCAzNjcwMDE2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMywgNzg2NDMyLCA1MjQyODgsIDE1NzI4NjQsIDEwNDg1NzYsIDMxNDU3MjgsIDYyOTE0NTYsIDYyOTE0NTYsIDE0NjgwMDY0LCAxMjU4MjkxMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjMsIDEwNDg1NzYsIDMxNDU3MjgsIDIwOTcxNTIsIDYyOTE0NTYsIDEyNTgyOTEyLCAyNTE2NTgyNCwgMjUxNjU4MjQsIDUwMzMxNjQ4LCAxMTc0NDA1MTJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIzLCAyMDk3MTUyLCA0MTk0MzA0LCAxMjU4MjkxMiwgMjUxNjU4MjQsIDUwMzMxNjQ4LCAxMDA2NjMyOTYsIDEwMDY2MzI5NiwgMjAxMzI2NTkyLCA0MDI2NTMxODRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIzLCA0MTk0MzA0LCA4Mzg4NjA4LCAxNjc3NzIxNiwgMzM1NTQ0MzIsIDY3MTA4ODY0LCA0MDI2NTMxODQsIDkzOTUyNDA5NiwgMTg3OTA0ODE5MiwgMTYxMDYxMjczNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjMsIDgzODg2MDgsIDUwMzMxNjQ4LCAxMDA2NjMyOTYsIDIwMTMyNjU5MiwgNDAyNjUzMTg0LCAxODc5MDQ4MTkyLCAxNjEwNjEyNzM2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMywgNTAzMzE2NDgsIDEwMDY2MzI5NiwgNDAyNjUzMTg0LCA4MDUzMDYzNjgsIDE2MTA2MTI3MzYsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIzLCAxMDA2NjMyOTYsIDQwMjY1MzE4NCwgODA1MzA2MzY4LCAxNjEwNjEyNzM2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMywgMjAxMzI2NTkyLCA4MDUzMDYzNjgsIDE2MTA2MTI3MzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIzLCA0MDI2NTMxODQsIDE2MTA2MTI3MzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIyLCAyNjg0MzU0NTYsIDE4NzkwNDgxOTIsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIyLCA1MzY4NzA5MTIsIDE2MTA2MTI3MzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIyLCAxMDczNzQxODI0XSksXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDIzLCAxLCAxXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNCwgM10pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjQsIDYsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI0LCAxMiwgMywgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjQsIDI0LCAxMiwgMywgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjQsIDQ4LCAyNCwgMTIsIDMsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI0LCA2NCwgNDgsIDI0LCAxMiwgNiwgMywgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjQsIDEyOCwgNjQsIDMyLCAxNiwgOCwgNCwgMywgM10pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjQsIDI1NiwgMTI4LCAxOTIsIDk2LCA0OCwgMjQsIDEyLCAxMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjQsIDUxMiwgNzY4LCAyNTYsIDEyOCwgMTkyLCA5NiwgNDgsIDQ4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNCwgMTAyNCwgMTAyNCwgNTEyLCA3NjgsIDI1NiwgMzg0LCAxOTIsIDE5Ml0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjQsIDYxNDQsIDIwNDgsIDMwNzIsIDMwNzIsIDE1MzYsIDE1MzYsIDc2OCwgNzY4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNCwgODE5MiwgMTIyODgsIDQwOTYsIDQwOTYsIDYxNDQsIDYxNDQsIDMwNzIsIDMwNzJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI0LCAxNjM4NCwgMTYzODQsIDI0NTc2LCAyNDU3NiwgMjQ1NzYsIDI0NTc2LCAxMjI4OCwgMTIyODhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI0LCAzMjc2OCwgMzI3NjgsIDMyNzY4LCAzMjc2OCwgMzI3NjgsIDMyNzY4LCAxMTQ2ODgsIDExNDY4OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjQsIDY1NTM2LCA2NTUzNiwgMTk2NjA4LCAxOTY2MDgsIDE5NjYwOCwgMTk2NjA4LCAzOTMyMTYsIDM5MzIxNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjQsIDEzMTA3MiwgMzkzMjE2LCAyNjIxNDQsIDI2MjE0NCwgNzg2NDMyLCA3ODY0MzIsIDE1NzI4NjQsIDE1NzI4NjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI0LCA3ODY0MzIsIDUyNDI4OCwgMTU3Mjg2NCwgMTU3Mjg2NCwgMzE0NTcyOCwgMzE0NTcyOCwgNjI5MTQ1NiwgNjI5MTQ1Nl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjQsIDEwNDg1NzYsIDEwNDg1NzYsIDIwOTcxNTIsIDYyOTE0NTYsIDQxOTQzMDQsIDEyNTgyOTEyLCAyNTE2NTgyNCwgMjUxNjU4MjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI0LCAyMDk3MTUyLCA2MjkxNDU2LCA0MTk0MzA0LCA4Mzg4NjA4LCAyNTE2NTgyNCwgNTAzMzE2NDgsIDEwMDY2MzI5NiwgMTAwNjYzMjk2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNCwgNDE5NDMwNCwgODM4ODYwOCwgMjUxNjU4MjQsIDUwMzMxNjQ4LCAxMDA2NjMyOTYsIDIwMTMyNjU5MiwgNDAyNjUzMTg0LCA0MDI2NTMxODRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI0LCA4Mzg4NjA4LCAxNjc3NzIxNiwgMzM1NTQ0MzIsIDY3MTA4ODY0LCAxMzQyMTc3MjgsIDI2ODQzNTQ1NiwgMTYxMDYxMjczNiwgMTYxMDYxMjczNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjQsIDE2Nzc3MjE2LCAxMDA2NjMyOTYsIDIwMTMyNjU5MiwgNDAyNjUzMTg0LCA4MDUzMDYzNjgsIDE2MTA2MTI3MzYsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI0LCAxMDA2NjMyOTYsIDIwMTMyNjU5MiwgNDAyNjUzMTg0LCAxNjEwNjEyNzM2LCAxMDczNzQxODI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNCwgMjAxMzI2NTkyLCA0MDI2NTMxODQsIDE2MTA2MTI3MzYsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI0LCA0MDI2NTMxODQsIDE2MTA2MTI3MzYsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI0LCA4MDUzMDYzNjgsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI0LCAxNjEwNjEyNzM2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyMywgMTA3Mzc0MTgyNCwgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNSwgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjUsIDNdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI1LCA2LCAxXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNSwgMTIsIDYsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI1LCAxNiwgMTIsIDYsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI1LCAzMiwgMTYsIDEyLCA2LCAzLCAxXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNSwgNjQsIDMyLCAxNiwgOCwgNCwgMiwgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjUsIDEyOCwgNjQsIDk2LCA0OCwgMjQsIDEyLCA2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNSwgMjU2LCAzODQsIDEyOCwgNjQsIDk2LCA0OCwgMjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI1LCA1MTIsIDUxMiwgMjU2LCAzODQsIDEyOCwgMTkyLCA5Nl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjUsIDMwNzIsIDEwMjQsIDE1MzYsIDUxMiwgNzY4LCAyNTYsIDM4NF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjUsIDQwOTYsIDIwNDgsIDIwNDgsIDMwNzIsIDEwMjQsIDE1MzYsIDE1MzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI1LCA4MTkyLCAxMjI4OCwgNDA5NiwgNDA5NiwgNjE0NCwgNjE0NCwgNjE0NF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjUsIDE2Mzg0LCAxNjM4NCwgMjQ1NzYsIDI0NTc2LCAyNDU3NiwgMjQ1NzYsIDI0NTc2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNSwgMzI3NjgsIDMyNzY4LCAzMjc2OCwgMzI3NjgsIDMyNzY4LCAzMjc2OCwgMzI3NjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI1LCA2NTUzNiwgNjU1MzYsIDE5NjYwOCwgMTk2NjA4LCAxOTY2MDgsIDE5NjYwOCwgMTk2NjA4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNSwgMTMxMDcyLCAzOTMyMTYsIDI2MjE0NCwgMjYyMTQ0LCA3ODY0MzIsIDc4NjQzMiwgNzg2NDMyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNSwgMjYyMTQ0LCA1MjQyODgsIDUyNDI4OCwgMTU3Mjg2NCwgMTA0ODU3NiwgMzE0NTcyOCwgMzE0NTcyOF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjUsIDE1NzI4NjQsIDEwNDg1NzYsIDMxNDU3MjgsIDIwOTcxNTIsIDYyOTE0NTYsIDQxOTQzMDQsIDEyNTgyOTEyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNSwgMjA5NzE1MiwgMjA5NzE1MiwgNDE5NDMwNCwgMTI1ODI5MTIsIDgzODg2MDgsIDI1MTY1ODI0LCA1MDMzMTY0OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjUsIDQxOTQzMDQsIDEyNTgyOTEyLCA4Mzg4NjA4LCAxNjc3NzIxNiwgNTAzMzE2NDgsIDEwMDY2MzI5NiwgMjAxMzI2NTkyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNSwgODM4ODYwOCwgMTY3NzcyMTYsIDUwMzMxNjQ4LCAxMDA2NjMyOTYsIDIwMTMyNjU5MiwgNDAyNjUzMTg0LCA4MDUzMDYzNjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI1LCAxNjc3NzIxNiwgMzM1NTQ0MzIsIDY3MTA4ODY0LCAxMzQyMTc3MjgsIDI2ODQzNTQ1NiwgNTM2ODcwOTEyLCAxMDczNzQxODI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNSwgMzM1NTQ0MzIsIDY3MTA4ODY0LCA0MDI2NTMxODQsIDgwNTMwNjM2OCwgMTYxMDYxMjczNiwgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjUsIDY3MTA4ODY0LCA0MDI2NTMxODQsIDgwNTMwNjM2OCwgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjUsIDQwMjY1MzE4NCwgODA1MzA2MzY4LCAxMDczNzQxODI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNSwgODA1MzA2MzY4LCAxMDczNzQxODI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNSwgMTYxMDYxMjczNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjUsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjYsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI2LCAzXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNiwgNiwgM10pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjYsIDgsIDYsIDNdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI2LCAxNiwgOCwgNiwgMywgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjYsIDMyLCAxNiwgOCwgNCwgMiwgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjYsIDY0LCAzMiwgMTYsIDI0LCAxMiwgNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjYsIDEyOCwgMTkyLCA5NiwgMzIsIDE2LCAyNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjYsIDI1NiwgMjU2LCAxMjgsIDE5MiwgOTYsIDMyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNiwgNTEyLCA1MTIsIDI1NiwgMjU2LCAxMjgsIDE5Ml0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjYsIDMwNzIsIDEwMjQsIDE1MzYsIDUxMiwgNzY4LCA3NjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI2LCA0MDk2LCAyMDQ4LCAyMDQ4LCAzMDcyLCAzMDcyLCAxMDI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNiwgODE5MiwgMTIyODgsIDQwOTYsIDQwOTYsIDQwOTYsIDYxNDRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI2LCAxNjM4NCwgMTYzODQsIDI0NTc2LCAyNDU3NiwgMjQ1NzYsIDI0NTc2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNiwgMzI3NjgsIDMyNzY4LCAzMjc2OCwgMzI3NjgsIDMyNzY4LCAzMjc2OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjYsIDY1NTM2LCA2NTUzNiwgMTk2NjA4LCAxOTY2MDgsIDE5NjYwOCwgMTk2NjA4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNiwgMTMxMDcyLCAzOTMyMTYsIDI2MjE0NCwgMjYyMTQ0LCAyNjIxNDQsIDc4NjQzMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjYsIDI2MjE0NCwgNTI0Mjg4LCA1MjQyODgsIDE1NzI4NjQsIDE1NzI4NjQsIDEwNDg1NzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI2LCAxNTcyODY0LCAxMDQ4NTc2LCAzMTQ1NzI4LCAyMDk3MTUyLCA2MjkxNDU2LCA2MjkxNDU2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNiwgMjA5NzE1MiwgMjA5NzE1MiwgNDE5NDMwNCwgNDE5NDMwNCwgODM4ODYwOCwgMjUxNjU4MjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI2LCA0MTk0MzA0LCA0MTk0MzA0LCA4Mzg4NjA4LCAyNTE2NTgyNCwgNTAzMzE2NDgsIDMzNTU0NDMyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNiwgODM4ODYwOCwgMjUxNjU4MjQsIDUwMzMxNjQ4LCAzMzU1NDQzMiwgNjcxMDg4NjQsIDIwMTMyNjU5Ml0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjYsIDE2Nzc3MjE2LCAzMzU1NDQzMiwgNjcxMDg4NjQsIDIwMTMyNjU5MiwgNDAyNjUzMTg0LCA4MDUzMDYzNjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI2LCAzMzU1NDQzMiwgNjcxMDg4NjQsIDEzNDIxNzcyOCwgMjY4NDM1NDU2LCA1MzY4NzA5MTIsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI2LCA2NzEwODg2NCwgMTM0MjE3NzI4LCA4MDUzMDYzNjgsIDE2MTA2MTI3MzYsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI2LCAxMzQyMTc3MjgsIDgwNTMwNjM2OCwgMTYxMDYxMjczNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjYsIDgwNTMwNjM2OCwgMTYxMDYxMjczNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjYsIDE2MTA2MTI3MzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI2LCAxMDczNzQxODI0XSksXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI3LCAxXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNywgMywgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjcsIDQsIDMsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI3LCA4LCA0LCAzLCAxXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNywgMTYsIDgsIDQsIDIsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI3LCAzMiwgMTYsIDgsIDEyLCA2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNywgNjQsIDMyLCA0OCwgMTYsIDhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI3LCAxMjgsIDE5MiwgNjQsIDMyLCA0OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjcsIDI1NiwgMjU2LCAxMjgsIDE5MiwgNjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI3LCAxNTM2LCA1MTIsIDc2OCwgMjU2LCAzODRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI3LCAyMDQ4LCAxMDI0LCAxMDI0LCAxNTM2LCA1MTJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI3LCA0MDk2LCAyMDQ4LCAyMDQ4LCAyMDQ4LCAzMDcyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNywgODE5MiwgMTIyODgsIDEyMjg4LCA0MDk2LCA0MDk2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNywgMTYzODQsIDE2Mzg0LCAxNjM4NCwgMjQ1NzYsIDI0NTc2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNywgMzI3NjgsIDMyNzY4LCAzMjc2OCwgMzI3NjgsIDMyNzY4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNywgNjU1MzYsIDY1NTM2LCA2NTUzNiwgMTk2NjA4LCAxOTY2MDhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI3LCAxMzEwNzIsIDM5MzIxNiwgMzkzMjE2LCAyNjIxNDQsIDI2MjE0NF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjcsIDI2MjE0NCwgNTI0Mjg4LCA1MjQyODgsIDUyNDI4OCwgMTU3Mjg2NF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjcsIDUyNDI4OCwgMTA0ODU3NiwgMTA0ODU3NiwgMzE0NTcyOCwgMjA5NzE1Ml0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjcsIDMxNDU3MjgsIDIwOTcxNTIsIDYyOTE0NTYsIDQxOTQzMDQsIDEyNTgyOTEyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNywgNDE5NDMwNCwgNDE5NDMwNCwgODM4ODYwOCwgMjUxNjU4MjQsIDE2Nzc3MjE2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNywgODM4ODYwOCwgMjUxNjU4MjQsIDE2Nzc3MjE2LCAzMzU1NDQzMiwgMTAwNjYzMjk2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNywgMTY3NzcyMTYsIDMzNTU0NDMyLCAxMDA2NjMyOTYsIDY3MTA4ODY0LCAxMzQyMTc3MjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI3LCAzMzU1NDQzMiwgNjcxMDg4NjQsIDEzNDIxNzcyOCwgNDAyNjUzMTg0LCA4MDUzMDYzNjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI3LCA2NzEwODg2NCwgMTM0MjE3NzI4LCAyNjg0MzU0NTYsIDUzNjg3MDkxMiwgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjcsIDEzNDIxNzcyOCwgMjY4NDM1NDU2LCAxNjEwNjEyNzM2LCAxMDczNzQxODI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNywgMjY4NDM1NDU2LCAxNjEwNjEyNzM2LCAxMDczNzQxODI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyNywgMTYxMDYxMjczNiwgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjcsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjgsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI4LCAyLCAxXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyOCwgNCwgMiwgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjgsIDgsIDQsIDIsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI4LCAxNiwgOCwgNCwgNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjgsIDMyLCAxNiwgMjQsIDhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI4LCA2NCwgOTYsIDMyLCAxNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjgsIDEyOCwgMTI4LCA2NCwgOTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI4LCAyNTYsIDI1NiwgMTI4LCAxMjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI4LCAxNTM2LCA1MTIsIDc2OCwgMjU2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyOCwgMjA0OCwgMTAyNCwgMTAyNCwgMTUzNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjgsIDQwOTYsIDYxNDQsIDIwNDgsIDIwNDhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI4LCA4MTkyLCA4MTkyLCAxMjI4OCwgNDA5Nl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjgsIDE2Mzg0LCAxNjM4NCwgMTYzODQsIDI0NTc2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyOCwgMzI3NjgsIDMyNzY4LCAzMjc2OCwgMzI3NjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI4LCA2NTUzNiwgNjU1MzYsIDY1NTM2LCAxOTY2MDhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI4LCAxMzEwNzIsIDEzMTA3MiwgMzkzMjE2LCAyNjIxNDRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI4LCAyNjIxNDQsIDc4NjQzMiwgNTI0Mjg4LCA1MjQyODhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI4LCA1MjQyODgsIDEwNDg1NzYsIDEwNDg1NzYsIDMxNDU3MjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI4LCAzMTQ1NzI4LCAyMDk3MTUyLCA2MjkxNDU2LCA0MTk0MzA0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyOCwgNDE5NDMwNCwgNDE5NDMwNCwgODM4ODYwOCwgODM4ODYwOF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjgsIDgzODg2MDgsIDgzODg2MDgsIDE2Nzc3MjE2LCA1MDMzMTY0OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjgsIDE2Nzc3MjE2LCA1MDMzMTY0OCwgMzM1NTQ0MzIsIDY3MTA4ODY0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyOCwgMzM1NTQ0MzIsIDY3MTA4ODY0LCAyMDEzMjY1OTIsIDEzNDIxNzcyOF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjgsIDY3MTA4ODY0LCAxMzQyMTc3MjgsIDI2ODQzNTQ1NiwgODA1MzA2MzY4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyOCwgMTM0MjE3NzI4LCAyNjg0MzU0NTYsIDUzNjg3MDkxMiwgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjgsIDI2ODQzNTQ1NiwgNTM2ODcwOTEyLCAxMDczNzQxODI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyOCwgNTM2ODcwOTEyLCAxMDczNzQxODI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyOCwgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyOSwgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjksIDIsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI5LCA0LCAyLCAxXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyOSwgOCwgNCwgMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjksIDE2LCA4LCAxMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjksIDMyLCA0OCwgMTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI5LCA2NCwgNjQsIDMyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyOSwgMTI4LCAxMjgsIDY0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyOSwgNzY4LCAyNTYsIDM4NF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjksIDEwMjQsIDUxMiwgNTEyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyOSwgMjA0OCwgMTAyNCwgMTAyNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjksIDQwOTYsIDYxNDQsIDIwNDhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI5LCA4MTkyLCA4MTkyLCAxMjI4OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjksIDE2Mzg0LCAxNjM4NCwgMTYzODRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI5LCAzMjc2OCwgMzI3NjgsIDMyNzY4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyOSwgNjU1MzYsIDY1NTM2LCA2NTUzNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjksIDEzMTA3MiwgMTMxMDcyLCAzOTMyMTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI5LCAyNjIxNDQsIDc4NjQzMiwgNTI0Mjg4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyOSwgNTI0Mjg4LCAxMDQ4NTc2LCAxMDQ4NTc2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyOSwgMTA0ODU3NiwgMjA5NzE1MiwgMjA5NzE1Ml0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMjksIDYyOTE0NTYsIDQxOTQzMDQsIDEyNTgyOTEyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyOSwgODM4ODYwOCwgODM4ODYwOCwgMTY3NzcyMTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI5LCAxNjc3NzIxNiwgMTY3NzcyMTYsIDMzNTU0NDMyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyOSwgMzM1NTQ0MzIsIDEwMDY2MzI5NiwgNjcxMDg4NjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI5LCA2NzEwODg2NCwgMTM0MjE3NzI4LCA0MDI2NTMxODRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI5LCAxMzQyMTc3MjgsIDI2ODQzNTQ1NiwgNTM2ODcwOTEyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAyOSwgMjY4NDM1NDU2LCA1MzY4NzA5MTIsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI5LCA1MzY4NzA5MTIsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDI5LCAxMDczNzQxODI0XSksXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMwLCAxXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAzMCwgMiwgMV0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMzAsIDQsIDJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMwLCA4LCA0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAzMCwgMTYsIDI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAzMCwgMzIsIDMyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAzMCwgNjQsIDY0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAzMCwgMTI4LCAxMjhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMwLCA3NjgsIDI1Nl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMzAsIDEwMjQsIDUxMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMzAsIDIwNDgsIDEwMjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMwLCA0MDk2LCA2MTQ0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAzMCwgODE5MiwgODE5Ml0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMzAsIDE2Mzg0LCAxNjM4NF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMzAsIDMyNzY4LCAzMjc2OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMzAsIDY1NTM2LCA2NTUzNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMzAsIDEzMTA3MiwgMTMxMDcyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAzMCwgMjYyMTQ0LCA3ODY0MzJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMwLCA1MjQyODgsIDEwNDg1NzZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMwLCAxMDQ4NTc2LCAyMDk3MTUyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAzMCwgNjI5MTQ1NiwgNDE5NDMwNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMzAsIDgzODg2MDgsIDgzODg2MDhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMwLCAxNjc3NzIxNiwgMTY3NzcyMTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMwLCAzMzU1NDQzMiwgMzM1NTQ0MzJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMwLCA2NzEwODg2NCwgMjAxMzI2NTkyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAzMCwgMTM0MjE3NzI4LCAyNjg0MzU0NTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMwLCAyNjg0MzU0NTYsIDUzNjg3MDkxMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMzAsIDUzNjg3MDkxMiwgMTA3Mzc0MTgyNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMzAsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMzEsIDFdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMxLCAyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAzMSwgNF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMzEsIDhdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMxLCAxNl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMzEsIDMyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAzMSwgNjRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMxLCAzODRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMxLCA1MTJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMxLCAxMDI0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAzMSwgMjA0OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMzEsIDQwOTZdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMxLCA4MTkyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAzMSwgMTYzODRdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMxLCAzMjc2OF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMzEsIDY1NTM2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAzMSwgMTMxMDcyXSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAzMSwgMjYyMTQ0XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAzMSwgNTI0Mjg4XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAzMSwgMTA0ODU3Nl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMzEsIDIwOTcxNTJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMxLCAxMjU4MjkxMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMzEsIDE2Nzc3MjE2XSksXHJcbi8vICAgICBuZXcgVWludDMyQXJyYXkoWyAzMSwgMzM1NTQ0MzJdKSxcclxuLy8gICAgIG5ldyBVaW50MzJBcnJheShbIDMxLCA2NzEwODg2NF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMzEsIDEzNDIxNzcyOF0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMzEsIDI2ODQzNTQ1Nl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMzEsIDUzNjg3MDkxMl0pLFxyXG4vLyAgICAgbmV3IFVpbnQzMkFycmF5KFsgMzEsIDEwNzM3NDE4MjRdKSxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyAgICAgbnVsbCxcclxuLy8gICAgIG51bGwsXHJcbi8vICAgICBudWxsLFxyXG4vLyBdO1xyXG5cclxuLy8gbGV0IHNpbmRleCA9IFtdO1xyXG4vLyBsZXQgc2tpcCA9IFtdO1xyXG4vLyBsZXQgY291bnQgPSBbXTtcclxuLy8gbGV0IGJ1ZiA9IFtdO1xyXG4vLyBsZXQgY3VyID0gMDtcclxuLy8gZm9yIChsZXQgaSBpbiBWaXNpYmlsaXR5VGlsZV9tYXNrKSB7XHJcbi8vICAgICBsZXQgdiA9IFZpc2liaWxpdHlUaWxlX21hc2tbaV07XHJcbi8vICAgICBpZiAodiAhPSBudWxsKSB7XHJcbi8vICAgICAgICAgc2luZGV4W2ldID0gY3VyICsgMTtcclxuLy8gICAgICAgICBza2lwW2ldID0gdlswXSAtIDE7XHJcbi8vICAgICAgICAgY291bnRbaV0gPSB2Lmxlbmd0aCAtIDE7XHJcbi8vICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCB2Lmxlbmd0aDsgaisrKSB7XHJcbi8vICAgICAgICAgICAgIGJ1Zi5wdXNoKFwiMHhcIiArIHZbal0udG9TdHJpbmcoMTYpKTtcclxuLy8gICAgICAgICAgICAgY3VyKys7XHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgICBzaW5kZXhbaV0gPSAwO1xyXG4vLyAgICAgICAgIHNraXBbaV0gPSAwO1xyXG4vLyAgICAgICAgIGNvdW50W2ldID0gMDtcclxuLy8gICAgIH1cclxuLy8gfVxyXG4vLyBjb25zb2xlLmxvZyhzaW5kZXguam9pbigpKTtcclxuLy8gY29uc29sZS5sb2coc2tpcC5qb2luKCkpO1xyXG4vLyBjb25zb2xlLmxvZyhjb3VudC5qb2luKCkpO1xyXG4vLyBjb25zb2xlLmxvZyhidWYuam9pbigpKTtcclxuXHJcblxyXG5jb25zdCBWaXNpYmlsaXR5VGlsZV9tYXNrID0ge1xyXG4gICAgc3RhcnRJbmRleDogbmV3IFVpbnQxNkFycmF5KFtcclxuICAgICAgICAwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMSwyLDMsNCw1LDYsNyw4LDksMTAsMTEsMTIsMTMsMTQsMTUsMTYsMTcsMTgsMTksMjAsMjEsMjIsMjMsMjQsMjUsMjYsMjcsMjgsMjksMCwwLDMwLDMxLDMzLDM1LDM3LDM5LDQxLDQzLDQ1LDQ3LDQ5LDUxLDUzLDU1LDU3LDU5LDYxLDYzLDY1LDY3LDY5LDcxLDczLDc1LDc3LDc5LDgxLDgzLDg1LDAsMCw4Niw4Nyw4OSw5Miw5NSw5OCwxMDEsMTA0LDEwNywxMTAsMTEzLDExNiwxMTksMTIyLDEyNSwxMjgsMTMxLDEzNCwxMzcsMTQwLDE0MywxNDYsMTQ5LDE1MiwxNTUsMTU4LDE2MSwxNjQsMTY2LDAsMCwxNjcsMTY4LDE3MCwxNzMsMTc3LDE4MSwxODUsMTg5LDE5MywxOTcsMjAxLDIwNSwyMDksMjEzLDIxNywyMjEsMjI1LDIyOSwyMzMsMjM3LDI0MSwyNDUsMjQ5LDI1MywyNTcsMjYxLDI2NSwyNjgsMjcwLDAsMCwyNzEsMjcyLDI3NCwyNzcsMjgxLDI4NiwyOTEsMjk2LDMwMSwzMDYsMzExLDMxNiwzMjEsMzI2LDMzMSwzMzYsMzQxLDM0NiwzNTEsMzU2LDM2MSwzNjYsMzcxLDM3NiwzODEsMzg2LDM5MCwzOTMsMzk1LDAsMCwzOTYsMzk3LDM5OCw0MDAsNDAzLDQwOCw0MTQsNDIwLDQyNiw0MzIsNDM4LDQ0NCw0NTAsNDU2LDQ2Miw0NjgsNDc0LDQ4MCw0ODYsNDkyLDQ5OCw1MDQsNTEwLDUxNiw1MjIsNTI3LDUzMCw1MzIsNTMzLDAsMCw1MzQsNTM1LDUzNiw1MzgsNTQxLDU0NSw1NTEsNTU4LDU2NSw1NzIsNTc5LDU4Niw1OTMsNjAwLDYwNyw2MTQsNjIxLDYyOCw2MzUsNjQyLDY0OSw2NTYsNjYzLDY3MCw2NzYsNjgwLDY4Myw2ODUsNjg2LDAsMCw2ODcsNjg5LDY5MCw2OTIsNjk1LDY5OSw3MDQsNzExLDcxOSw3MjcsNzM1LDc0Myw3NTEsNzU5LDc2Nyw3NzUsNzgzLDc5MSw3OTksODA3LDgxNSw4MjMsODMxLDgzOCw4NDMsODQ3LDg1MCw4NTIsODUzLDAsMCw4NTUsODU2LDg1OCw4NjEsODYzLDg2Niw4NzAsODc2LDg4Myw4OTIsOTAxLDkxMCw5MTksOTI4LDkzNyw5NDYsOTU1LDk2NCw5NzMsOTgyLDk5MSwxMDAwLDEwMDcsMTAxMywxMDE3LDEwMjAsMTAyMiwxMDI1LDEwMjcsMCwwLDEwMjgsMTAyOSwxMDMxLDEwMzMsMTAzNiwxMDQwLDEwNDQsMTA0OSwxMDU1LDEwNjMsMTA3MywxMDgzLDEwOTMsMTEwMywxMTEzLDExMjMsMTEzMywxMTQzLDExNTMsMTE2MywxMTczLDExODEsMTE4NywxMTkyLDExOTYsMTIwMCwxMjAzLDEyMDUsMTIwNywwLDAsMTIwOCwxMjA5LDEyMTEsMTIxMywxMjE2LDEyMTksMTIyMywxMjI4LDEyMzMsMTI0MCwxMjQ5LDEyNjAsMTI3MSwxMjgyLDEyOTMsMTMwNCwxMzE1LDEzMjYsMTMzNywxMzQ4LDEzNTcsMTM2NCwxMzY5LDEzNzQsMTM3OCwxMzgxLDEzODQsMTM4NiwxMzg4LDAsMCwxMzg5LDEzOTAsMTM5MiwxMzk0LDEzOTYsMTM5OSwxNDAyLDE0MDYsMTQxMSwxNDE3LDE0MjQsMTQzNCwxNDQ2LDE0NTgsMTQ3MCwxNDgyLDE0OTQsMTUwNiwxNTE4LDE1MjgsMTUzNSwxNTQxLDE1NDYsMTU1MCwxNTUzLDE1NTYsMTU1OCwxNTYwLDE1NjIsMCwwLDE1NjMsMTU2NCwxNTY1LDE1NjcsMTU2OSwxNTcxLDE1NzQsMTU3NywxNTgxLDE1ODYsMTU5MiwxNjAwLDE2MTAsMTYyMywxNjM2LDE2NDksMTY2MiwxNjc1LDE2ODUsMTY5MywxNjk5LDE3MDQsMTcwOCwxNzExLDE3MTQsMTcxNiwxNzE4LDE3MjAsMTcyMSwwLDAsMTcyMiwxNzIzLDE3MjQsMTcyNSwxNzI3LDE3MjksMTczMSwxNzMzLDE3MzYsMTczOSwxNzQzLDE3NDgsMTc1NSwxNzY2LDE3ODAsMTc5NCwxODA4LDE4MTksMTgyNiwxODMxLDE4MzUsMTgzOCwxODQxLDE4NDMsMTg0NSwxODQ3LDE4NDksMTg1MCwxODUxLDAsMCwxODUyLDE4NTMsMTg1NCwxODU1LDE4NTYsMTg1NywxODU4LDE4NTksMTg2MiwxODY1LDE4NjgsMTg3MSwxODc2LDE4ODMsMCwxODk4LDE5MTMsMTkyMCwxOTI1LDE5MjgsMTkzMSwxOTM0LDE5MzcsMTkzOCwxOTM5LDE5NDAsMTk0MSwxOTQyLDE5NDMsMCwwLDE5NDQsMTk0NSwxOTQ2LDE5NDcsMTk0OSwxOTUxLDE5NTMsMTk1NSwxOTU4LDE5NjEsMTk2NSwxOTcwLDE5NzcsMTk4OCwyMDAyLDIwMTYsMjAzMCwyMDQxLDIwNDgsMjA1MywyMDU3LDIwNjAsMjA2MywyMDY1LDIwNjcsMjA2OSwyMDcxLDIwNzIsMjA3MywwLDAsMjA3NCwyMDc1LDIwNzYsMjA3OCwyMDgwLDIwODIsMjA4NSwyMDg4LDIwOTIsMjA5NywyMTAzLDIxMTEsMjEyMSwyMTM0LDIxNDcsMjE2MCwyMTczLDIxODYsMjE5NiwyMjA0LDIyMTAsMjIxNSwyMjE5LDIyMjIsMjIyNSwyMjI3LDIyMjksMjIzMSwyMjMyLDAsMCwyMjMzLDIyMzQsMjIzNiwyMjM4LDIyNDAsMjI0MywyMjQ2LDIyNTAsMjI1NSwyMjYxLDIyNjgsMjI3OCwyMjkwLDIzMDIsMjMxNCwyMzI2LDIzMzgsMjM1MCwyMzYyLDIzNzIsMjM3OSwyMzg1LDIzOTAsMjM5NCwyMzk3LDI0MDAsMjQwMiwyNDA0LDI0MDYsMCwwLDI0MDcsMjQwOCwyNDEwLDI0MTIsMjQxNSwyNDE4LDI0MjIsMjQyNywyNDMyLDI0MzksMjQ0OCwyNDU5LDI0NzAsMjQ4MSwyNDkyLDI1MDMsMjUxNCwyNTI1LDI1MzYsMjU0NywyNTU2LDI1NjMsMjU2OCwyNTczLDI1NzcsMjU4MCwyNTgzLDI1ODUsMjU4NywwLDAsMjU4OCwyNTg5LDI1OTEsMjU5MywyNTk2LDI2MDAsMjYwNCwyNjA5LDI2MTUsMjYyMywyNjMzLDI2NDMsMjY1MywyNjYzLDI2NzMsMjY4MywyNjkzLDI3MDMsMjcxMywyNzIzLDI3MzMsMjc0MSwyNzQ3LDI3NTIsMjc1NiwyNzYwLDI3NjMsMjc2NSwyNzY3LDAsMCwyNzY4LDI3NjksMjc3MSwyNzc0LDI3NzYsMjc3OSwyNzgzLDI3ODksMjc5NiwyODA1LDI4MTQsMjgyMywyODMyLDI4NDEsMjg1MCwyODU5LDI4NjgsMjg3NywyODg2LDI4OTUsMjkwNCwyOTEzLDI5MjAsMjkyNiwyOTMwLDI5MzMsMjkzNSwyOTM4LDI5NDAsMCwwLDI5NDEsMjk0MywyOTQ0LDI5NDYsMjk0OSwyOTUzLDI5NTgsMjk2NSwyOTczLDI5ODEsMjk4OSwyOTk3LDMwMDUsMzAxMywzMDIxLDMwMjksMzAzNywzMDQ1LDMwNTMsMzA2MSwzMDY5LDMwNzcsMzA4NSwzMDkyLDMwOTcsMzEwMSwzMTA0LDMxMDYsMzEwNywwLDAsMzEwOSwzMTEwLDMxMTEsMzExMywzMTE2LDMxMjAsMzEyNiwzMTMzLDMxNDAsMzE0NywzMTU0LDMxNjEsMzE2OCwzMTc1LDMxODIsMzE4OSwzMTk2LDMyMDMsMzIxMCwzMjE3LDMyMjQsMzIzMSwzMjM4LDMyNDUsMzI1MSwzMjU1LDMyNTgsMzI2MCwzMjYxLDAsMCwzMjYyLDMyNjMsMzI2NCwzMjY2LDMyNjksMzI3NCwzMjgwLDMyODYsMzI5MiwzMjk4LDMzMDQsMzMxMCwzMzE2LDMzMjIsMzMyOCwzMzM0LDMzNDAsMzM0NiwzMzUyLDMzNTgsMzM2NCwzMzcwLDMzNzYsMzM4MiwzMzg4LDMzOTMsMzM5NiwzMzk4LDMzOTksMCwwLDM0MDAsMzQwMSwzNDAzLDM0MDYsMzQxMCwzNDE1LDM0MjAsMzQyNSwzNDMwLDM0MzUsMzQ0MCwzNDQ1LDM0NTAsMzQ1NSwzNDYwLDM0NjUsMzQ3MCwzNDc1LDM0ODAsMzQ4NSwzNDkwLDM0OTUsMzUwMCwzNTA1LDM1MTAsMzUxNSwzNTE5LDM1MjIsMzUyNCwwLDAsMzUyNSwzNTI2LDM1MjgsMzUzMSwzNTM1LDM1MzksMzU0MywzNTQ3LDM1NTEsMzU1NSwzNTU5LDM1NjMsMzU2NywzNTcxLDM1NzUsMzU3OSwzNTgzLDM1ODcsMzU5MSwzNTk1LDM1OTksMzYwMywzNjA3LDM2MTEsMzYxNSwzNjE5LDM2MjMsMzYyNiwzNjI4LDAsMCwzNjI5LDM2MzAsMzYzMiwzNjM1LDM2MzgsMzY0MSwzNjQ0LDM2NDcsMzY1MCwzNjUzLDM2NTYsMzY1OSwzNjYyLDM2NjUsMzY2OCwzNjcxLDM2NzQsMzY3NywzNjgwLDM2ODMsMzY4NiwzNjg5LDM2OTIsMzY5NSwzNjk4LDM3MDEsMzcwNCwzNzA3LDM3MDksMCwwLDM3MTAsMzcxMSwzNzEzLDM3MTUsMzcxNywzNzE5LDM3MjEsMzcyMywzNzI1LDM3MjcsMzcyOSwzNzMxLDM3MzMsMzczNSwzNzM3LDM3MzksMzc0MSwzNzQzLDM3NDUsMzc0NywzNzQ5LDM3NTEsMzc1MywzNzU1LDM3NTcsMzc1OSwzNzYxLDM3NjMsMzc2NSwwLDAsMzc2NiwzNzY3LDM3NjgsMzc2OSwzNzcwLDM3NzEsMzc3MiwzNzczLDM3NzQsMzc3NSwzNzc2LDM3NzcsMzc3OCwzNzc5LDM3ODAsMzc4MSwzNzgyLDM3ODMsMzc4NCwzNzg1LDM3ODYsMzc4NywzNzg4LDM3ODksMzc5MCwzNzkxLDM3OTIsMzc5MywzNzk0LDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMFxyXG4gICAgXSksXHJcbiAgICBza2lwOiBuZXcgVWludDhBcnJheShbXHJcbiAgICAgICAgMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMSwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwxLDAsMCwyLDEsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwxLDIsMCwwLDMsMiwxLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwxLDIsMywwLDAsNCwzLDIsMSwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwxLDIsMyw0LDAsMCw1LDUsNCwzLDEsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwxLDMsNCw1LDUsMCwwLDYsNiw1LDQsMywxLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwxLDMsNCw1LDYsNiwwLDAsNyw3LDYsNSw0LDMsMSwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwxLDMsNCw1LDYsNyw3LDAsMCw5LDgsNyw3LDYsNSwzLDIsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwyLDMsNSw2LDcsNyw4LDksMCwwLDEwLDksOSw4LDcsNiw1LDQsMiwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMiw0LDUsNiw3LDgsOSw5LDEwLDAsMCwxMSwxMCwxMCw5LDksOCw3LDYsNCwyLDAsMCwwLDAsMCwwLDAsMCwwLDIsNCw2LDcsOCw5LDksMTAsMTAsMTEsMCwwLDEyLDExLDExLDExLDEwLDEwLDksOCw3LDUsMiwwLDAsMCwwLDAsMCwwLDIsNSw3LDgsOSwxMCwxMCwxMSwxMSwxMSwxMiwwLDAsMTMsMTMsMTIsMTIsMTIsMTEsMTEsMTAsOSw4LDYsMywwLDAsMCwwLDAsMyw2LDgsOSwxMCwxMSwxMSwxMiwxMiwxMiwxMywxMywwLDAsMTQsMTQsMTQsMTMsMTMsMTMsMTMsMTIsMTIsMTEsMTAsOCw0LDAsMCwwLDQsOCwxMCwxMSwxMiwxMiwxMywxMywxMywxMywxNCwxNCwxNCwwLDAsMTUsMTUsMTUsMTUsMTUsMTUsMTUsMTQsMTQsMTQsMTQsMTMsMTIsOCwwLDgsMTIsMTMsMTQsMTQsMTQsMTQsMTUsMTUsMTUsMTUsMTUsMTUsMTUsMCwwLDE2LDE2LDE2LDE2LDE2LDE2LDE2LDE2LDE2LDE2LDE2LDE2LDE2LDE3LDE3LDE3LDE2LDE2LDE2LDE2LDE2LDE2LDE2LDE2LDE2LDE2LDE2LDE2LDE2LDAsMCwxNywxNywxNywxNywxNywxNywxNywxNywxNywxNywxNywxOCwxOCwxOCwxOCwxOCwxOCwxOCwxNywxNywxNywxNywxNywxNywxNywxNywxNywxNywxNywwLDAsMTgsMTgsMTgsMTgsMTgsMTgsMTgsMTgsMTgsMTksMTksMTksMTksMTksMTksMTksMTksMTksMTksMTksMTgsMTgsMTgsMTgsMTgsMTgsMTgsMTgsMTgsMCwwLDE5LDE5LDE5LDE5LDE5LDE5LDE5LDIwLDIwLDIwLDIwLDIwLDIwLDIwLDIwLDIwLDIwLDIwLDIwLDIwLDIwLDIwLDE5LDE5LDE5LDE5LDE5LDE5LDE5LDAsMCwyMCwyMCwyMCwyMCwyMCwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMSwyMCwyMCwyMCwyMCwyMCwwLDAsMjEsMjEsMjEsMjIsMjIsMjIsMjIsMjIsMjIsMjIsMjIsMjIsMjIsMjIsMjIsMjIsMjIsMjIsMjIsMjIsMjIsMjIsMjIsMjIsMjIsMjIsMjEsMjEsMjEsMCwwLDIyLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIyLDAsMCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwyNCwwLDAsMjUsMjUsMjUsMjUsMjUsMjUsMjUsMjUsMjUsMjUsMjUsMjUsMjUsMjUsMjUsMjUsMjUsMjUsMjUsMjUsMjUsMjUsMjUsMjUsMjUsMjUsMjUsMjUsMjUsMCwwLDI2LDI2LDI2LDI2LDI2LDI2LDI2LDI2LDI2LDI2LDI2LDI2LDI2LDI2LDI2LDI2LDI2LDI2LDI2LDI2LDI2LDI2LDI2LDI2LDI2LDI2LDI2LDI2LDI2LDAsMCwyNywyNywyNywyNywyNywyNywyNywyNywyNywyNywyNywyNywyNywyNywyNywyNywyNywyNywyNywyNywyNywyNywyNywyNywyNywyNywyNywyNywyNywwLDAsMjgsMjgsMjgsMjgsMjgsMjgsMjgsMjgsMjgsMjgsMjgsMjgsMjgsMjgsMjgsMjgsMjgsMjgsMjgsMjgsMjgsMjgsMjgsMjgsMjgsMjgsMjgsMjgsMjgsMCwwLDI5LDI5LDI5LDI5LDI5LDI5LDI5LDI5LDI5LDI5LDI5LDI5LDI5LDI5LDI5LDI5LDI5LDI5LDI5LDI5LDI5LDI5LDI5LDI5LDI5LDI5LDI5LDI5LDI5LDAsMCwzMCwzMCwzMCwzMCwzMCwzMCwzMCwzMCwzMCwzMCwzMCwzMCwzMCwzMCwzMCwzMCwzMCwzMCwzMCwzMCwzMCwzMCwzMCwzMCwzMCwzMCwzMCwzMCwzMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDBcclxuICAgIF0pLFxyXG4gICAgY291bnQ6IG5ldyBVaW50OEFycmF5KFtcclxuICAgICAgICAwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDAsMCwxLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDEsMCwwLDEsMiwzLDMsMywzLDMsMywzLDMsMywzLDMsMywzLDMsMywzLDMsMywzLDMsMywzLDMsMywzLDIsMSwwLDAsMSwyLDMsNCw0LDQsNCw0LDQsNCw0LDQsNCw0LDQsNCw0LDQsNCw0LDQsNCw0LDQsNCw0LDMsMiwxLDAsMCwxLDIsMyw0LDUsNSw1LDUsNSw1LDUsNSw1LDUsNSw1LDUsNSw1LDUsNSw1LDUsNSw1LDQsMywyLDEsMCwwLDEsMSwyLDMsNSw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDUsMywyLDEsMSwwLDAsMSwxLDIsMyw0LDYsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDYsNCwzLDIsMSwxLDAsMCwyLDEsMiwzLDQsNSw3LDgsOCw4LDgsOCw4LDgsOCw4LDgsOCw4LDgsOCw4LDcsNSw0LDMsMiwxLDIsMCwwLDEsMiwzLDIsMyw0LDYsNyw5LDksOSw5LDksOSw5LDksOSw5LDksOSw5LDcsNiw0LDMsMiwzLDIsMSwwLDAsMSwyLDIsMyw0LDQsNSw2LDgsMTAsMTAsMTAsMTAsMTAsMTAsMTAsMTAsMTAsMTAsMTAsOCw2LDUsNCw0LDMsMiwyLDEsMCwwLDEsMiwyLDMsMyw0LDUsNSw3LDksMTEsMTEsMTEsMTEsMTEsMTEsMTEsMTEsMTEsOSw3LDUsNSw0LDMsMywyLDIsMSwwLDAsMSwyLDIsMiwzLDMsNCw1LDYsNywxMCwxMiwxMiwxMiwxMiwxMiwxMiwxMiwxMCw3LDYsNSw0LDMsMywyLDIsMiwxLDAsMCwxLDEsMiwyLDIsMywzLDQsNSw2LDgsMTAsMTMsMTMsMTMsMTMsMTMsMTAsOCw2LDUsNCwzLDMsMiwyLDIsMSwxLDAsMCwxLDEsMSwyLDIsMiwyLDMsMyw0LDUsNywxMSwxNCwxNCwxNCwxMSw3LDUsNCwzLDMsMiwyLDIsMiwxLDEsMSwwLDAsMSwxLDEsMSwxLDEsMSwzLDMsMywzLDUsNywxNSwwLDE1LDcsNSwzLDMsMywzLDEsMSwxLDEsMSwxLDEsMCwwLDEsMSwxLDIsMiwyLDIsMywzLDQsNSw3LDExLDE0LDE0LDE0LDExLDcsNSw0LDMsMywyLDIsMiwyLDEsMSwxLDAsMCwxLDEsMiwyLDIsMywzLDQsNSw2LDgsMTAsMTMsMTMsMTMsMTMsMTMsMTAsOCw2LDUsNCwzLDMsMiwyLDIsMSwxLDAsMCwxLDIsMiwyLDMsMyw0LDUsNiw3LDEwLDEyLDEyLDEyLDEyLDEyLDEyLDEyLDEwLDcsNiw1LDQsMywzLDIsMiwyLDEsMCwwLDEsMiwyLDMsMyw0LDUsNSw3LDksMTEsMTEsMTEsMTEsMTEsMTEsMTEsMTEsMTEsOSw3LDUsNSw0LDMsMywyLDIsMSwwLDAsMSwyLDIsMyw0LDQsNSw2LDgsMTAsMTAsMTAsMTAsMTAsMTAsMTAsMTAsMTAsMTAsMTAsOCw2LDUsNCw0LDMsMiwyLDEsMCwwLDEsMiwzLDIsMyw0LDYsNyw5LDksOSw5LDksOSw5LDksOSw5LDksOSw5LDcsNiw0LDMsMiwzLDIsMSwwLDAsMiwxLDIsMyw0LDUsNyw4LDgsOCw4LDgsOCw4LDgsOCw4LDgsOCw4LDgsOCw3LDUsNCwzLDIsMSwyLDAsMCwxLDEsMiwzLDQsNiw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNyw3LDcsNiw0LDMsMiwxLDEsMCwwLDEsMSwyLDMsNSw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDYsNiw2LDUsMywyLDEsMSwwLDAsMSwyLDMsNCw1LDUsNSw1LDUsNSw1LDUsNSw1LDUsNSw1LDUsNSw1LDUsNSw1LDUsNSw0LDMsMiwxLDAsMCwxLDIsMyw0LDQsNCw0LDQsNCw0LDQsNCw0LDQsNCw0LDQsNCw0LDQsNCw0LDQsNCw0LDQsMywyLDEsMCwwLDEsMiwzLDMsMywzLDMsMywzLDMsMywzLDMsMywzLDMsMywzLDMsMywzLDMsMywzLDMsMywzLDIsMSwwLDAsMSwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwxLDAsMCwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwXHJcbiAgICBdKSxcclxuICAgIGRhdGE6IG5ldyBVaW50MzJBcnJheShbXHJcbiAgICAgICAgMHgxLDB4MiwweDQsMHg4LDB4MTAsMHgyMCwweDQwLDB4MTgwLDB4MjAwLDB4NDAwLDB4ODAwLDB4MTAwMCwweDIwMDAsMHg0MDAwLDB4ODAwMCwweDEwMDAwLDB4MjAwMDAsMHg0MDAwMCwweDgwMDAwLDB4MTAwMDAwLDB4MjAwMDAwLDB4YzAwMDAwLDB4MTAwMDAwMCwweDIwMDAwMDAsMHg0MDAwMDAwLDB4ODAwMDAwMCwweDEwMDAwMDAwLDB4MjAwMDAwMDAsMHg0MDAwMDAwMCwweDEsMHgxLDB4MiwweDIsMHg0LDB4NCwweDgsMHgxOCwweDEwLDB4MjAsMHgyMCwweDQwLDB4NDAsMHg4MCwweDgwLDB4MTAwLDB4MzAwLDB4MjAwLDB4NDAwLDB4NDAwLDB4ODAwLDB4MTgwMCwweDEwMDAsMHgyMDAwLDB4MjAwMCwweDQwMDAsMHg0MDAwLDB4ODAwMCwweDgwMDAsMHgxMDAwMCwweDEwMDAwLDB4MjAwMDAsMHgyMDAwMCwweGMwMDAwLDB4NDAwMDAsMHgxMDAwMDAsMHg4MDAwMCwweDIwMDAwMCwweDEwMDAwMCwweDQwMDAwMCwweDYwMDAwMCwweDgwMDAwMCwweDgwMDAwMCwweDEwMDAwMDAsMHgxMDAwMDAwLDB4MjAwMDAwMCwweDIwMDAwMDAsMHhjMDAwMDAwLDB4NDAwMDAwMCwweDEwMDAwMDAwLDB4ODAwMDAwMCwweDIwMDAwMDAwLDB4MTAwMDAwMDAsMHg0MDAwMDAwMCwweDIwMDAwMDAwLDB4NDAwMDAwMDAsMHgxLDB4MSwweDIsMHgxLDB4MiwweDQsMHgyLDB4NCwweDgsMHhjLDB4OCwweDEwLDB4MTAsMHgzMCwweDIwLDB4MjAsMHg0MCwweDQwLDB4NDAsMHg4MCwweDgwLDB4MTgwLDB4MTAwLDB4MzAwLDB4MjAwLDB4MjAwLDB4NDAwLDB4NDAwLDB4NDAwLDB4ODAwLDB4ODAwLDB4MTgwMCwweDEwMDAsMHgzMDAwLDB4MjAwMCwweDIwMDAsMHg0MDAwLDB4NDAwMCwweDQwMDAsMHg4MDAwLDB4ODAwMCwweDgwMDAsMHgxMDAwMCwweDEwMDAwLDB4MTAwMDAsMHg2MDAwMCwweDIwMDAwLDB4MjAwMDAsMHg4MDAwMCwweGMwMDAwLDB4NDAwMDAsMHgxMDAwMDAsMHgxMDAwMDAsMHg4MDAwMCwweDIwMDAwMCwweDIwMDAwMCwweDEwMDAwMCwweGMwMDAwMCwweDQwMDAwMCwweDYwMDAwMCwweDEwMDAwMDAsMHg4MDAwMDAsMHg4MDAwMDAsMHgyMDAwMDAwLDB4MTAwMDAwMCwweDEwMDAwMDAsMHg0MDAwMDAwLDB4NjAwMDAwMCwweDIwMDAwMDAsMHgxODAwMDAwMCwweDgwMDAwMDAsMHg0MDAwMDAwLDB4MjAwMDAwMDAsMHgxMDAwMDAwMCwweDgwMDAwMDAsMHg0MDAwMDAwMCwweDIwMDAwMDAwLDB4MTAwMDAwMDAsMHg0MDAwMDAwMCwweDIwMDAwMDAwLDB4NDAwMDAwMDAsMHgxLDB4MSwweDIsMHgxLDB4MiwweDQsMHgxLDB4MiwweDQsMHg4LDB4NiwweDQsMHg4LDB4MTAsMHg4LDB4MTgsMHgxMCwweDIwLDB4MTAsMHgyMCwweDYwLDB4NDAsMHg2MCwweDQwLDB4ODAsMHg4MCwweDgwLDB4ODAsMHgxMDAsMHgxMDAsMHgxMDAsMHgzMDAsMHgyMDAsMHg2MDAsMHg2MDAsMHg0MDAsMHg0MDAsMHg4MDAsMHg4MDAsMHg4MDAsMHgxODAwLDB4MTAwMCwweDEwMDAsMHgzMDAwLDB4MjAwMCwweDIwMDAsMHg2MDAwLDB4NDAwMCwweDQwMDAsMHg0MDAwLDB4ODAwMCwweDgwMDAsMHg4MDAwLDB4ODAwMCwweDMwMDAwLDB4MTAwMDAsMHgxMDAwMCwweDEwMDAwLDB4NDAwMDAsMHg2MDAwMCwweDIwMDAwLDB4MjAwMDAsMHg4MDAwMCwweDgwMDAwLDB4YzAwMDAsMHg0MDAwMCwweDMwMDAwMCwweDEwMDAwMCwweDEwMDAwMCwweDgwMDAwLDB4NDAwMDAwLDB4NjAwMDAwLDB4MjAwMDAwLDB4MzAwMDAwLDB4ODAwMDAwLDB4ODAwMDAwLDB4NDAwMDAwLDB4NDAwMDAwLDB4MzAwMDAwMCwweDEwMDAwMDAsMHg4MDAwMDAsMHg4MDAwMDAsMHg0MDAwMDAwLDB4MjAwMDAwMCwweDMwMDAwMDAsMHgxMDAwMDAwLDB4ODAwMDAwMCwweGMwMDAwMDAsMHg0MDAwMDAwLDB4MjAwMDAwMCwweDMwMDAwMDAwLDB4MTAwMDAwMDAsMHg4MDAwMDAwLDB4NDAwMDAwMCwweDQwMDAwMDAwLDB4MjAwMDAwMDAsMHgxMDAwMDAwMCwweDgwMDAwMDAsMHg0MDAwMDAwMCwweDIwMDAwMDAwLDB4MTAwMDAwMDAsMHg0MDAwMDAwMCwweDIwMDAwMDAwLDB4NDAwMDAwMDAsMHgxLDB4MSwweDMsMHgxLDB4MywweDQsMHgxLDB4MywweDQsMHg4LDB4MSwweDIsMHg0LDB4OCwweDEwLDB4NiwweGMsMHg4LDB4MTAsMHgyMCwweDgsMHgxMCwweDMwLDB4MjAsMHg0MCwweDMwLDB4MjAsMHg0MCwweGMwLDB4ODAsMHg0MCwweGMwLDB4ODAsMHgxMDAsMHgxMDAsMHgxODAsMHgxMDAsMHgzMDAsMHgyMDAsMHg2MDAsMHgyMDAsMHg2MDAsMHg0MDAsMHg0MDAsMHg4MDAsMHhjMDAsMHg4MDAsMHg4MDAsMHg4MDAsMHgxMDAwLDB4MTAwMCwweDEwMDAsMHgzMDAwLDB4MzAwMCwweDIwMDAsMHg2MDAwLDB4NjAwMCwweDQwMDAsMHg0MDAwLDB4NDAwMCwweDgwMDAsMHg4MDAwLDB4ODAwMCwweDgwMDAsMHg4MDAwLDB4MzAwMDAsMHgzMDAwMCwweDEwMDAwLDB4MTAwMDAsMHgxMDAwMCwweDQwMDAwLDB4NDAwMDAsMHg2MDAwMCwweDYwMDAwLDB4MjAwMDAsMHgxODAwMDAsMHg4MDAwMCwweDgwMDAwLDB4ODAwMDAsMHg0MDAwMCwweDIwMDAwMCwweDMwMDAwMCwweDEwMDAwMCwweDEwMDAwMCwweDgwMDAwLDB4YzAwMDAwLDB4NDAwMDAwLDB4NjAwMDAwLDB4MjAwMDAwLDB4MzAwMDAwLDB4MTAwMDAwMCwweDE4MDAwMDAsMHg4MDAwMDAsMHg0MDAwMDAsMHg0MDAwMDAsMHg2MDAwMDAwLDB4MjAwMDAwMCwweDEwMDAwMDAsMHgxODAwMDAwLDB4ODAwMDAwLDB4ODAwMDAwMCwweDQwMDAwMDAsMHg2MDAwMDAwLDB4MjAwMDAwMCwweDEwMDAwMDAsMHgzMDAwMDAwMCwweDE4MDAwMDAwLDB4ODAwMDAwMCwweDQwMDAwMDAsMHgyMDAwMDAwLDB4NDAwMDAwMDAsMHgyMDAwMDAwMCwweDEwMDAwMDAwLDB4ODAwMDAwMCwweDQwMDAwMDAsMHg0MDAwMDAwMCwweDYwMDAwMDAwLDB4MTAwMDAwMDAsMHg4MDAwMDAwLDB4NDAwMDAwMDAsMHg2MDAwMDAwMCwweDEwMDAwMDAwLDB4NDAwMDAwMDAsMHg2MDAwMDAwMCwweDQwMDAwMDAwLDB4MSwweDMsMHgzLDB4NiwweDMsMHg2LDB4OCwweDEsMHgzLDB4NiwweDgsMHgxMCwweDEsMHgyLDB4NCwweDgsMHgxMCwweDIwLDB4NiwweGMsMHgxOCwweDEwLDB4MjAsMHg0MCwweDE4LDB4MTAsMHgyMCwweDYwLDB4YzAsMHg4MCwweDIwLDB4NjAsMHhjMCwweDgwLDB4MTAwLDB4MTAwLDB4YzAsMHg4MCwweDEwMCwweDEwMCwweDIwMCwweDIwMCwweDMwMCwweDMwMCwweDIwMCwweDYwMCwweDQwMCwweGMwMCwweDQwMCwweGMwMCwweGMwMCwweDgwMCwweDgwMCwweDEwMDAsMHgxODAwLDB4MTAwMCwweDEwMDAsMHgxMDAwLDB4MzAwMCwweDIwMDAsMHg2MDAwLDB4NjAwMCwweDYwMDAsMHg2MDAwLDB4NDAwMCwweDQwMDAsMHg4MDAwLDB4ODAwMCwweDgwMDAsMHg4MDAwLDB4ODAwMCwweDgwMDAsMHgzMDAwMCwweDMwMDAwLDB4MzAwMDAsMHgzMDAwMCwweDEwMDAwLDB4MTAwMDAsMHhjMDAwMCwweDQwMDAwLDB4NDAwMDAsMHg0MDAwMCwweDYwMDAwLDB4MjAwMDAsMHgxMDAwMDAsMHgxODAwMDAsMHgxODAwMDAsMHg4MDAwMCwweDgwMDAwLDB4NDAwMDAsMHg2MDAwMDAsMHg2MDAwMDAsMHgyMDAwMDAsMHgzMDAwMDAsMHgxMDAwMDAsMHgxODAwMDAsMHgxODAwMDAwLDB4ODAwMDAwLDB4NDAwMDAwLDB4NDAwMDAwLDB4MjAwMDAwLDB4MjAwMDAwLDB4MjAwMDAwMCwweDMwMDAwMDAsMHgxODAwMDAwLDB4ODAwMDAwLDB4NDAwMDAwLDB4NDAwMDAwLDB4YzAwMDAwMCwweDQwMDAwMDAsMHgyMDAwMDAwLDB4MzAwMDAwMCwweDE4MDAwMDAsMHg4MDAwMDAsMHgzMDAwMDAwMCwweDE4MDAwMDAwLDB4YzAwMDAwMCwweDQwMDAwMDAsMHgyMDAwMDAwLDB4MTAwMDAwMCwweDQwMDAwMDAwLDB4MjAwMDAwMDAsMHgxMDAwMDAwMCwweDgwMDAwMDAsMHg0MDAwMDAwLDB4MjAwMDAwMCwweDQwMDAwMDAwLDB4NjAwMDAwMDAsMHgzMDAwMDAwMCwweDgwMDAwMDAsMHg0MDAwMDAwLDB4NjAwMDAwMDAsMHgzMDAwMDAwMCwweDgwMDAwMDAsMHg2MDAwMDAwMCwweDMwMDAwMDAwLDB4NjAwMDAwMDAsMHg0MDAwMDAwMCwweDEsMHgzLDB4MSwweDYsMHgxLDB4NiwweGMsMHgxLDB4NiwweGMsMHgxMCwweDEsMHgzLDB4NiwweGMsMHgxMCwweDIwLDB4MSwweDIsMHg0LDB4OCwweDEwLDB4MjAsMHg0MCwweDYsMHhjLDB4MTgsMHgzMCwweDYwLDB4NDAsMHg4MCwweDE4LDB4MzAsMHg2MCwweDQwLDB4ODAsMHgxODAsMHgxMDAsMHg2MCwweGMwLDB4ODAsMHgxODAsMHgxMDAsMHgyMDAsMHgyMDAsMHgxODAsMHgxMDAsMHgzMDAsMHgyMDAsMHg2MDAsMHg0MDAsMHhjMDAsMHg2MDAsMHg2MDAsMHg0MDAsMHhjMDAsMHg4MDAsMHg4MDAsMHgxMDAwLDB4MTgwMCwweDE4MDAsMHgxODAwLDB4MTAwMCwweDEwMDAsMHgzMDAwLDB4MjAwMCwweDYwMDAsMHg2MDAwLDB4NjAwMCwweDYwMDAsMHg2MDAwLDB4NDAwMCwweDQwMDAsMHg4MDAwLDB4ODAwMCwweDgwMDAsMHg4MDAwLDB4ODAwMCwweDgwMDAsMHg4MDAwLDB4MzAwMDAsMHgzMDAwMCwweDMwMDAwLDB4MzAwMDAsMHgzMDAwMCwweDEwMDAwLDB4MTAwMDAsMHhjMDAwMCwweGMwMDAwLDB4YzAwMDAsMHg0MDAwMCwweDQwMDAwLDB4NjAwMDAsMHgyMDAwMCwweDMwMDAwMCwweDMwMDAwMCwweDEwMDAwMCwweDE4MDAwMCwweDgwMDAwLDB4ODAwMDAsMHg0MDAwMCwweGMwMDAwMCwweDQwMDAwMCwweDYwMDAwMCwweDIwMDAwMCwweDMwMDAwMCwweDEwMDAwMCwweDE4MDAwMCwweDMwMDAwMDAsMHgxODAwMDAwLDB4ODAwMDAwLDB4YzAwMDAwLDB4NDAwMDAwLDB4MjAwMDAwLDB4MjAwMDAwLDB4YzAwMDAwMCwweDYwMDAwMDAsMHgzMDAwMDAwLDB4MTAwMDAwMCwweDgwMDAwMCwweGMwMDAwMCwweDQwMDAwMCwweDMwMDAwMDAwLDB4MTgwMDAwMDAsMHhjMDAwMDAwLDB4NjAwMDAwMCwweDMwMDAwMDAsMHgxMDAwMDAwLDB4ODAwMDAwLDB4NDAwMDAwMDAsMHgyMDAwMDAwMCwweDEwMDAwMDAwLDB4ODAwMDAwMCwweDQwMDAwMDAsMHgyMDAwMDAwLDB4MTAwMDAwMCwweDQwMDAwMDAwLDB4NjAwMDAwMDAsMHgzMDAwMDAwMCwweDE4MDAwMDAwLDB4NDAwMDAwMCwweDIwMDAwMDAsMHg0MDAwMDAwMCwweDMwMDAwMDAwLDB4MTgwMDAwMDAsMHg0MDAwMDAwLDB4NDAwMDAwMDAsMHgzMDAwMDAwMCwweDE4MDAwMDAwLDB4NDAwMDAwMDAsMHgzMDAwMDAwMCwweDYwMDAwMDAwLDB4NDAwMDAwMDAsMHgxLDB4MSwweDMsMHgxLDB4NiwweDEsMHgzLDB4YywweDEsMHgzLDB4YywweDE4LDB4MSwweDMsMHhjLDB4MTgsMHgzMCwweDEsMHgzLDB4NiwweGMsMHgxOCwweDMwLDB4NDAsMHgzLDB4MywweDQsMHg4LDB4MTAsMHgyMCwweDQwLDB4ODAsMHhjLDB4YywweDE4LDB4MzAsMHg2MCwweGMwLDB4ODAsMHgxMDAsMHgzMCwweDMwLDB4NjAsMHhjMCwweDgwLDB4MTAwLDB4MzAwLDB4MjAwLDB4YzAsMHhjMCwweDE4MCwweDEwMCwweDMwMCwweDIwMCwweDQwMCwweDQwMCwweDMwMCwweDMwMCwweDYwMCwweDYwMCwweGMwMCwweGMwMCwweDgwMCwweDE4MDAsMHhjMDAsMHhjMDAsMHgxODAwLDB4MTgwMCwweDEwMDAsMHgxMDAwLDB4MzAwMCwweDIwMDAsMHgzMDAwLDB4MzAwMCwweDYwMDAsMHg2MDAwLDB4NjAwMCwweDYwMDAsMHg0MDAwLDB4NDAwMCwweDFjMDAwLDB4MWMwMDAsMHg4MDAwLDB4ODAwMCwweDgwMDAsMHg4MDAwLDB4ODAwMCwweDgwMDAsMHg2MDAwMCwweDYwMDAwLDB4MzAwMDAsMHgzMDAwMCwweDMwMDAwLDB4MzAwMDAsMHgxMDAwMCwweDEwMDAwLDB4MTgwMDAwLDB4MTgwMDAwLDB4YzAwMDAsMHhjMDAwMCwweDQwMDAwLDB4NDAwMDAsMHg2MDAwMCwweDIwMDAwLDB4NjAwMDAwLDB4NjAwMDAwLDB4MzAwMDAwLDB4MzAwMDAwLDB4MTgwMDAwLDB4MTgwMDAwLDB4ODAwMDAsMHhjMDAwMCwweDE4MDAwMDAsMHgxODAwMDAwLDB4YzAwMDAwLDB4NDAwMDAwLDB4NjAwMDAwLDB4MjAwMDAwLDB4MTAwMDAwLDB4MTAwMDAwLDB4NjAwMDAwMCwweDYwMDAwMDAsMHgzMDAwMDAwLDB4MTgwMDAwMCwweDgwMDAwMCwweDQwMDAwMCwweDYwMDAwMCwweDIwMDAwMCwweDE4MDAwMDAwLDB4MTgwMDAwMDAsMHhjMDAwMDAwLDB4NjAwMDAwMCwweDMwMDAwMDAsMHgxODAwMDAwLDB4ODAwMDAwLDB4NDAwMDAwLDB4NjAwMDAwMDAsMHg2MDAwMDAwMCwweDEwMDAwMDAwLDB4ODAwMDAwMCwweDQwMDAwMDAsMHgyMDAwMDAwLDB4MTAwMDAwMCwweDgwMDAwMCwweDQwMDAwMDAwLDB4NjAwMDAwMDAsMHgzMDAwMDAwMCwweDE4MDAwMDAwLDB4YzAwMDAwMCwweDYwMDAwMDAsMHgxMDAwMDAwLDB4NDAwMDAwMDAsMHg2MDAwMDAwMCwweDE4MDAwMDAwLDB4YzAwMDAwMCwweDYwMDAwMDAsMHg0MDAwMDAwMCwweDYwMDAwMDAwLDB4MTgwMDAwMDAsMHhjMDAwMDAwLDB4NDAwMDAwMDAsMHg2MDAwMDAwMCwweDE4MDAwMDAwLDB4NDAwMDAwMDAsMHgzMDAwMDAwMCwweDYwMDAwMDAwLDB4NDAwMDAwMDAsMHg0MDAwMDAwMCwweDEsMHgzLDB4MiwweDEsMHg3LDB4NCwweDMsMHhjLDB4MywweDYsMHgxOCwweDMsMHg2LDB4YywweDMwLDB4MSwweDMsMHg2LDB4YywweDMwLDB4NjAsMHgzLDB4NywweGMsMHgxOCwweDMwLDB4NjAsMHg4MCwweDMsMHg3LDB4ZSwweGMsMHgxMCwweDIwLDB4NDAsMHg4MCwweDEwMCwweGMsMHgxOCwweDMwLDB4MzAsMHg2MCwweGMwLDB4MTgwLDB4MTAwLDB4MjAwLDB4NzAsMHg2MCwweGMwLDB4YzAsMHgxODAsMHgzMDAsMHgyMDAsMHg2MDAsMHg0MDAsMHgxODAsMHgzODAsMHgzMDAsMHgzMDAsMHg2MDAsMHg0MDAsMHhjMDAsMHg4MDAsMHgxODAwLDB4ZTAwLDB4YzAwLDB4YzAwLDB4YzAwLDB4MTgwMCwweDE4MDAsMHgxMDAwLDB4MTAwMCwweDIwMDAsMHgzMDAwLDB4MzAwMCwweDMwMDAsMHgzMDAwLDB4NjAwMCwweDYwMDAsMHg2MDAwLDB4NjAwMCwweDQwMDAsMHgxYzAwMCwweDFjMDAwLDB4MWMwMDAsMHgxYzAwMCwweDgwMDAsMHg4MDAwLDB4ODAwMCwweDgwMDAsMHg4MDAwLDB4NjAwMDAsMHg2MDAwMCwweDYwMDAwLDB4NjAwMDAsMHgzMDAwMCwweDMwMDAwLDB4MzAwMDAsMHgzMDAwMCwweDEwMDAwLDB4MzgwMDAwLDB4MTgwMDAwLDB4MTgwMDAwLDB4MTgwMDAwLDB4YzAwMDAsMHhjMDAwMCwweDQwMDAwLDB4NDAwMDAsMHgyMDAwMCwweGMwMDAwMCwweGUwMDAwMCwweDYwMDAwMCwweDYwMDAwMCwweDMwMDAwMCwweDEwMDAwMCwweDE4MDAwMCwweDgwMDAwLDB4YzAwMDAsMHg3MDAwMDAwLDB4MzAwMDAwMCwweDE4MDAwMDAsMHgxODAwMDAwLDB4YzAwMDAwLDB4NjAwMDAwLDB4MjAwMDAwLDB4MzAwMDAwLDB4MTAwMDAwLDB4MTgwMDAwMDAsMHhjMDAwMDAwLDB4NjAwMDAwMCwweDYwMDAwMDAsMHgzMDAwMDAwLDB4MTgwMDAwMCwweGMwMDAwMCwweDQwMDAwMCwweDIwMDAwMCwweDYwMDAwMDAwLDB4NzAwMDAwMDAsMHgzODAwMDAwMCwweDE4MDAwMDAwLDB4NDAwMDAwMCwweDIwMDAwMDAsMHgxMDAwMDAwLDB4ODAwMDAwLDB4NDAwMDAwLDB4NjAwMDAwMDAsMHg3MDAwMDAwMCwweDE4MDAwMDAwLDB4YzAwMDAwMCwweDYwMDAwMDAsMHgzMDAwMDAwLDB4ODAwMDAwLDB4NDAwMDAwMDAsMHg2MDAwMDAwMCwweDMwMDAwMDAwLDB4MTgwMDAwMDAsMHg2MDAwMDAwLDB4MzAwMDAwMCwweDYwMDAwMDAwLDB4MzAwMDAwMDAsMHgxODAwMDAwMCwweDYwMDAwMDAsMHg2MDAwMDAwMCwweDMwMDAwMDAwLDB4YzAwMDAwMCwweDYwMDAwMDAwLDB4MTgwMDAwMDAsMHg0MDAwMDAwMCwweDcwMDAwMDAwLDB4MTAwMDAwMDAsMHg2MDAwMDAwMCwweDIwMDAwMDAwLDB4NDAwMDAwMDAsMHgxLDB4MSwweDIsMHgzLDB4NCwweDMsMHhlLDB4OCwweDEsMHg3LDB4MWMsMHgxMCwweDEsMHgzLDB4YywweDMwLDB4MSwweDMsMHhlLDB4MTgsMHg2MCwweDMsMHg3LDB4YywweDE4LDB4NjAsMHhjMCwweDEsMHgzLDB4ZSwweDFjLDB4MzAsMHg2MCwweGMwLDB4MTAwLDB4MywweDcsMHhlLDB4MWMsMHgzOCwweDMwLDB4NDAsMHg4MCwweDEwMCwweDIwMCwweDFjLDB4MzgsMHgzMCwweDYwLDB4YzAsMHhjMCwweDE4MCwweDMwMCwweDYwMCwweDQwMCwweGUwLDB4YzAsMHgxYzAsMHgxODAsMHgzMDAsMHgzMDAsMHg2MDAsMHg0MDAsMHg4MDAsMHg4MDAsMHg3MDAsMHg3MDAsMHhlMDAsMHhlMDAsMHhjMDAsMHhjMDAsMHgxODAwLDB4MTgwMCwweDEwMDAsMHgzMDAwLDB4MzgwMCwweDM4MDAsMHgzMDAwLDB4MzAwMCwweDMwMDAsMHgzMDAwLDB4NjAwMCwweDYwMDAsMHg2MDAwLDB4NDAwMCwweDFjMDAwLDB4MWMwMDAsMHgxYzAwMCwweDFjMDAwLDB4MWMwMDAsMHgxYzAwMCwweDgwMDAsMHg4MDAwLDB4ODAwMCwweDgwMDAsMHhlMDAwMCwweGUwMDAwLDB4NjAwMDAsMHg2MDAwMCwweDYwMDAwLDB4NjAwMDAsMHgzMDAwMCwweDMwMDAwLDB4MzAwMDAsMHgxMDAwMCwweDcwMDAwMCwweDcwMDAwMCwweDM4MDAwMCwweDM4MDAwMCwweDE4MDAwMCwweDE4MDAwMCwweGMwMDAwLDB4YzAwMDAsMHg0MDAwMCwweDYwMDAwLDB4MzgwMDAwMCwweDE4MDAwMDAsMHgxYzAwMDAwLDB4YzAwMDAwLDB4NjAwMDAwLDB4NjAwMDAwLDB4MzAwMDAwLDB4MTAwMDAwLDB4ODAwMDAsMHg4MDAwMCwweDFjMDAwMDAwLDB4ZTAwMDAwMCwweDYwMDAwMDAsMHgzMDAwMDAwLDB4MTgwMDAwMCwweDE4MDAwMDAsMHhjMDAwMDAsMHg2MDAwMDAsMHgzMDAwMDAsMHgxMDAwMDAsMHg2MDAwMDAwMCwweDcwMDAwMDAwLDB4MzgwMDAwMDAsMHgxYzAwMDAwMCwweGUwMDAwMDAsMHg2MDAwMDAwLDB4MTAwMDAwMCwweDgwMDAwMCwweDQwMDAwMCwweDIwMDAwMCwweDQwMDAwMDAwLDB4NjAwMDAwMDAsMHgzODAwMDAwMCwweDFjMDAwMDAwLDB4NjAwMDAwMCwweDMwMDAwMDAsMHgxODAwMDAwLDB4NDAwMDAwLDB4NjAwMDAwMDAsMHg3MDAwMDAwMCwweDE4MDAwMDAwLDB4YzAwMDAwMCwweDMwMDAwMDAsMHgxODAwMDAwLDB4NDAwMDAwMDAsMHg2MDAwMDAwMCwweDM4MDAwMDAwLDB4YzAwMDAwMCwweDMwMDAwMDAsMHg0MDAwMDAwMCwweDYwMDAwMDAwLDB4MTgwMDAwMDAsMHg2MDAwMDAwLDB4NDAwMDAwMDAsMHg3MDAwMDAwMCwweDFjMDAwMDAwLDB4NDAwMDAwMCwweDYwMDAwMDAwLDB4MzgwMDAwMDAsMHg4MDAwMDAwLDB4NjAwMDAwMDAsMHgxMDAwMDAwMCwweDQwMDAwMDAwLDB4MjAwMDAwMDAsMHg0MDAwMDAwMCwweDEsMHgxLDB4MiwweDMsMHg0LDB4MSwweDcsMHg4LDB4MywweGUsMHgxMCwweDMsMHhmLDB4MzgsMHgyMCwweDEsMHg3LDB4MWMsMHg3MCwweDQwLDB4MywweDcsMHgxYywweDMwLDB4YzAsMHgxLDB4MywweGYsMHgxYywweDMwLDB4ZTAsMHgxODAsMHgxLDB4MywweDcsMHhlLDB4MzgsMHg3MCwweGMwLDB4MTgwLDB4MzAwLDB4MywweDcsMHhlLDB4MWMsMHgzOCwweDcwLDB4ZTAsMHhjMCwweDEwMCwweDIwMCwweDQwMCwweDNjLDB4NzgsMHg3MCwweGUwLDB4MWMwLDB4MTgwLDB4MzAwLDB4MzAwLDB4NjAwLDB4YzAwLDB4ODAwLDB4M2MwLDB4MzgwLDB4NzgwLDB4NzAwLDB4NjAwLDB4ZTAwLDB4YzAwLDB4YzAwLDB4MTgwMCwweDEwMDAsMHgzMDAwLDB4M2MwMCwweDNjMDAsMHgzODAwLDB4MzgwMCwweDM4MDAsMHgzMDAwLDB4MzAwMCwweDMwMDAsMHg2MDAwLDB4NjAwMCwweDQwMDAsMHgxYzAwMCwweDFjMDAwLDB4MWMwMDAsMHgxYzAwMCwweDFjMDAwLDB4MWMwMDAsMHgxYzAwMCwweDFjMDAwLDB4ODAwMCwweDgwMDAsMHg4MDAwLDB4MWUwMDAwLDB4MWUwMDAwLDB4ZTAwMDAsMHhlMDAwMCwweGUwMDAwLDB4NjAwMDAsMHg2MDAwMCwweDYwMDAwLDB4MzAwMDAsMHgzMDAwMCwweDEwMDAwLDB4MWUwMDAwMCwweGUwMDAwMCwweGYwMDAwMCwweDcwMDAwMCwweDMwMDAwMCwweDM4MDAwMCwweDE4MDAwMCwweDE4MDAwMCwweGMwMDAwLDB4NDAwMDAsMHg2MDAwMCwweDFlMDAwMDAwLDB4ZjAwMDAwMCwweDcwMDAwMDAsMHgzODAwMDAwLDB4MWMwMDAwMCwweGMwMDAwMCwweDYwMDAwMCwweDYwMDAwMCwweDMwMDAwMCwweDE4MDAwMCwweDgwMDAwLDB4NjAwMDAwMDAsMHg3MDAwMDAwMCwweDM4MDAwMDAwLDB4MWMwMDAwMDAsMHhlMDAwMDAwLDB4NzAwMDAwMCwweDM4MDAwMDAsMHgxODAwMDAwLDB4NDAwMDAwLDB4MjAwMDAwLDB4MTAwMDAwLDB4NDAwMDAwMDAsMHg2MDAwMDAwMCwweDcwMDAwMDAwLDB4MzgwMDAwMDAsMHhlMDAwMDAwLDB4NzAwMDAwMCwweDE4MDAwMDAsMHhjMDAwMDAsMHg2MDAwMDAsMHg0MDAwMDAwMCwweDYwMDAwMDAwLDB4NzgwMDAwMDAsMHgxYzAwMDAwMCwweDYwMDAwMDAsMHgzODAwMDAwLDB4YzAwMDAwLDB4NjAwMDAwMDAsMHg3MDAwMDAwMCwweDFjMDAwMDAwLDB4NjAwMDAwMCwweDE4MDAwMDAsMHg0MDAwMDAwMCwweDcwMDAwMDAwLDB4MWMwMDAwMDAsMHg3MDAwMDAwLDB4MTAwMDAwMCwweDYwMDAwMDAwLDB4NzgwMDAwMDAsMHhlMDAwMDAwLDB4MjAwMDAwMCwweDYwMDAwMDAwLDB4MzgwMDAwMDAsMHg0MDAwMDAwLDB4NDAwMDAwMDAsMHg3MDAwMDAwMCwweDgwMDAwMDAsMHg2MDAwMDAwMCwweDEwMDAwMDAwLDB4NDAwMDAwMDAsMHgyMDAwMDAwMCwweDQwMDAwMDAwLDB4MSwweDEsMHgzLDB4MywweDYsMHg3LDB4YywweDEsMHhmLDB4MTAsMHg3LDB4MWUsMHgyMCwweDMsMHhmLDB4MzgsMHg0MCwweDMsMHhmLDB4M2MsMHhmMCwweDgwLDB4MywweGYsMHgxZSwweDcwLDB4MWMwLDB4MTAwLDB4MSwweDcsMHhmLDB4M2MsMHg3MCwweGMwLDB4MzAwLDB4MSwweDMsMHg3LDB4ZiwweDFlLDB4MzgsMHhmMCwweDFjMCwweDMwMCwweDYwMCwweDcsMHhmLDB4MWYsMHgxZSwweDNjLDB4NzAsMHhlMCwweDFjMCwweDM4MCwweDMwMCwweDQwMCwweDgwMCwweGY4LDB4ZjAsMHgxZTAsMHgxZTAsMHgzYzAsMHgzODAsMHg3MDAsMHg2MDAsMHhjMDAsMHhjMDAsMHgxODAwLDB4MTAwMCwweDFmMDAsMHgxZjAwLDB4MWUwMCwweDFlMDAsMHgzYzAwLDB4M2MwMCwweDM4MDAsMHgzODAwLDB4MzAwMCwweDMwMDAsMHg2MDAwLDB4NjAwMCwweDNlMDAwLDB4M2UwMDAsMHgzZTAwMCwweDNlMDAwLDB4MWMwMDAsMHgxYzAwMCwweDFjMDAwLDB4MWMwMDAsMHgxYzAwMCwweDFjMDAwLDB4ODAwMCwweDgwMDAsMHg3YzAwMDAsMHg3YzAwMDAsMHgzYzAwMDAsMHgzYzAwMDAsMHgxZTAwMDAsMHgxZTAwMDAsMHhlMDAwMCwweGUwMDAwLDB4NjAwMDAsMHg2MDAwMCwweDMwMDAwLDB4MzAwMDAsMHhmODAwMDAwLDB4NzgwMDAwMCwweDNjMDAwMDAsMHgzYzAwMDAwLDB4MWUwMDAwMCwweGUwMDAwMCwweDcwMDAwMCwweDMwMDAwMCwweDE4MDAwMCwweDE4MDAwMCwweGMwMDAwLDB4NDAwMDAsMHg3MDAwMDAwMCwweDc4MDAwMDAwLDB4N2MwMDAwMDAsMHgzYzAwMDAwMCwweDFlMDAwMDAwLDB4NzAwMDAwMCwweDM4MDAwMDAsMHgxYzAwMDAwLDB4ZTAwMDAwLDB4NjAwMDAwLDB4MTAwMDAwLDB4ODAwMDAsMHg0MDAwMDAwMCwweDYwMDAwMDAwLDB4NzAwMDAwMDAsMHg3ODAwMDAwMCwweDNjMDAwMDAwLDB4ZTAwMDAwMCwweDc4MDAwMDAsMHgxYzAwMDAwLDB4NjAwMDAwLDB4MzAwMDAwLDB4NDAwMDAwMDAsMHg3MDAwMDAwMCwweDc4MDAwMDAwLDB4MWUwMDAwMDAsMHg3MDAwMDAwLDB4MTgwMDAwMCwweDYwMDAwMCwweDYwMDAwMDAwLDB4NzgwMDAwMDAsMHgzYzAwMDAwMCwweDcwMDAwMDAsMHgxYzAwMDAwLDB4NDAwMDAwLDB4NjAwMDAwMDAsMHg3ODAwMDAwMCwweDFlMDAwMDAwLDB4NzgwMDAwMCwweDgwMDAwMCwweDYwMDAwMDAwLDB4NzgwMDAwMDAsMHhlMDAwMDAwLDB4MTAwMDAwMCwweDcwMDAwMDAwLDB4M2MwMDAwMDAsMHgyMDAwMDAwLDB4NDAwMDAwMDAsMHg3ODAwMDAwMCwweDQwMDAwMDAsMHg3MDAwMDAwMCwweDE4MDAwMDAwLDB4NjAwMDAwMDAsMHgzMDAwMDAwMCwweDQwMDAwMDAwLDB4NjAwMDAwMDAsMHg0MDAwMDAwMCwweDEsMHgzLDB4MSwweDcsMHgzLDB4ZSwweGYsMHgxYywweDEsMHgxZiwweDMwLDB4NywweDNmLDB4NjAsMHgzLDB4ZiwweDdjLDB4YzAsMHgxLDB4ZiwweDNmLDB4ZjAsMHgxMDAsMHgzLDB4ZiwweDNmLDB4ZmMsMHgzYzAsMHgyMDAsMHgxLDB4NywweGYsMHgzZiwweGZjLDB4MWUwLDB4NzAwLDB4NDAwLDB4MSwweDMsMHhmLDB4MWYsMHgzZiwweDdjLDB4ZjAsMHgzYzAsMHg3MDAsMHhjMDAsMHhmLDB4MWYsMHgzZiwweDNmLDB4N2UsMHhmYywweDFmMCwweDFlMCwweDNjMCwweDcwMCwweGUwMCwweGMwMCwweDEwMDAsMHhmZjAsMHhmZTAsMHhmYzAsMHhmYzAsMHgxZjgwLDB4MWYwMCwweDFlMDAsMHgxZTAwLDB4M2MwMCwweDM4MDAsMHgzMDAwLDB4MzAwMCwweDYwMDAsMHg3ZjAwMCwweDdmMDAwLDB4N2YwMDAsMHg3ZjAwMCwweDNlMDAwLDB4M2UwMDAsMHgzZTAwMCwweDNlMDAwLDB4MWMwMDAsMHgxYzAwMCwweDFjMDAwLDB4MWMwMDAsMHg4MDAwLDB4N2Y4MDAwMCwweDNmODAwMDAsMHgxZjgwMDAwLDB4MWY4MDAwMCwweGZjMDAwMCwweDdjMDAwMCwweDNjMDAwMCwweDNjMDAwMCwweDFlMDAwMCwweGUwMDAwLDB4NjAwMDAsMHg2MDAwMCwweDMwMDAwLDB4NzgwMDAwMDAsMHg3YzAwMDAwMCwweDdlMDAwMDAwLDB4N2UwMDAwMDAsMHgzZjAwMDAwMCwweDFmODAwMDAwLDB4N2MwMDAwMCwweDNjMDAwMDAsMHgxZTAwMDAwLDB4NzAwMDAwLDB4MzgwMDAwLDB4MTgwMDAwLDB4NDAwMDAsMHg0MDAwMDAwMCwweDYwMDAwMDAwLDB4NzgwMDAwMDAsMHg3YzAwMDAwMCwweDdlMDAwMDAwLDB4MWYwMDAwMDAsMHg3ODAwMDAwLDB4MWUwMDAwMCwweDcwMDAwMCwweDE4MDAwMCwweDQwMDAwMDAwLDB4NzAwMDAwMDAsMHg3ODAwMDAwMCwweDdlMDAwMDAwLDB4MWY4MDAwMDAsMHgzYzAwMDAwLDB4NzAwMDAwLDB4MTAwMDAwLDB4NjAwMDAwMDAsMHg3ODAwMDAwMCwweDdlMDAwMDAwLDB4MWY4MDAwMDAsMHgxZTAwMDAwLDB4MjAwMDAwLDB4NDAwMDAwMDAsMHg3ODAwMDAwMCwweDdlMDAwMDAwLDB4NzgwMDAwMCwweDQwMDAwMCwweDYwMDAwMDAwLDB4NzgwMDAwMDAsMHgxZjAwMDAwMCwweDE4MDAwMDAsMHg3MDAwMDAwMCwweDdlMDAwMDAwLDB4MzAwMDAwMCwweDQwMDAwMDAwLDB4N2MwMDAwMDAsMHg2MDAwMDAwLDB4NzgwMDAwMDAsMHgxYzAwMDAwMCwweDYwMDAwMDAwLDB4MzgwMDAwMDAsMHg0MDAwMDAwMCwweDcwMDAwMDAwLDB4NjAwMDAwMDAsMHg0MDAwMDAwMCwweDEsMHgzLDB4NywweDEsMHhmLDB4MywweDFmLDB4ZiwweDNmLDB4MWYsMHg3ZiwweDMsMHgzZiwweGZjLDB4ZiwweGZmLDB4MWYwLDB4MywweDNmLDB4MWZmLDB4M2MwLDB4MywweDFmLDB4ZmYsMHgzZmYsMHg3MDAsMHgzLDB4ZiwweDNmLDB4ZmYsMHgzZmYsMHhmZjAsMHhjMDAsMHgxLDB4MywweGYsMHgxZiwweDNmLDB4ZmYsMHgxZmYsMHgzZmYsMHhmZjAsMHgxZjAwLDB4MTAwMCwweGZmLDB4ZmYsMHgxZmYsMHgxZmYsMHgzZmYsMHgzZmYsMHg3ZmYsMHg3ZmYsMHhmZmMsMHhmZjAsMHgxZmMwLDB4MWYwMCwweDNjMDAsMHgzMDAwLDB4N2ZmZjAwLDB4N2ZmZjAwLDB4M2ZmZTAwLDB4M2ZmZTAwLDB4MWZmYzAwLDB4MWZmYzAwLDB4ZmY4MDAsMHhmZjgwMCwweDdmMDAwLDB4N2YwMDAsMHgzZTAwMCwweDNlMDAwLDB4MWMwMDAsMHgxYzAwMCwweDdmODAwMDAwLDB4N2Y4MDAwMDAsMHg3ZmMwMDAwMCwweDdmYzAwMDAwLDB4N2ZlMDAwMDAsMHg3ZmUwMDAwMCwweDdmZjAwMDAwLDB4N2ZmMDAwMDAsMHgxZmY4MDAwMCwweDdmODAwMDAsMHgxZmMwMDAwLDB4N2MwMDAwLDB4MWUwMDAwLDB4NjAwMDAsMHg0MDAwMDAwMCwweDYwMDAwMDAwLDB4NzgwMDAwMDAsMHg3YzAwMDAwMCwweDdlMDAwMDAwLDB4N2Y4MDAwMDAsMHg3ZmMwMDAwMCwweDdmZTAwMDAwLDB4N2Y4MDAwMCwweDdjMDAwMCwweDQwMDAwLDB4NjAwMDAwMDAsMHg3ODAwMDAwMCwweDdlMDAwMDAwLDB4N2Y4MDAwMDAsMHg3ZmUwMDAwMCwweDdmODAwMDAsMHgxODAwMDAsMHg2MDAwMDAwMCwweDdjMDAwMDAwLDB4N2Y4MDAwMDAsMHg3ZmUwMDAwMCwweDcwMDAwMCwweDYwMDAwMDAwLDB4N2UwMDAwMDAsMHg3ZmMwMDAwMCwweDFlMDAwMDAsMHg3ODAwMDAwMCwweDdmODAwMDAwLDB4N2MwMDAwMCwweDYwMDAwMDAwLDB4N2UwMDAwMDAsMHgxZjgwMDAwMCwweDdjMDAwMDAwLDB4N2YwMDAwMDAsMHg3ODAwMDAwMCwweDdlMDAwMDAwLDB4NjAwMDAwMDAsMHg3YzAwMDAwMCwweDQwMDAwMDAwLDB4NzgwMDAwMDAsMHg3MDAwMDAwMCwweDYwMDAwMDAwLDB4NDAwMDAwMDAsMHgxLDB4MywweDcsMHhmLDB4MWYsMHgzZiwweDdmLDB4MywweGZmLDB4MywweGYsMHgxZmYsMHhmLDB4M2YsMHgzZmYsMHgzZiwweGZmLDB4N2ZmLDB4ZmYsMHhmLDB4M2ZmLDB4ZmZmLDB4M2ZmLDB4ZiwweGYsMHhmZiwweGZmZiwweDFmZmYsMHhmZmYsMHhmZiwweGYsMHgzLDB4ZiwweDNmLDB4ZmYsMHgzZmYsMHhmZmYsMHgzZmZmLDB4M2ZmZiwweDNmZmYsMHhmZmYsMHgzZmYsMHhmZiwweDNmLDB4ZiwweDMsMHg2MDAwMDAwMCwweDc4MDAwMDAwLDB4N2UwMDAwMDAsMHg3ZjgwMDAwMCwweDdmZTAwMDAwLDB4N2ZmODAwMDAsMHg3ZmZlMDAwMCwweDdmZmUwMDAwLDB4N2ZmZTAwMDAsMHg3ZmY4MDAwMCwweDdmZTAwMDAwLDB4N2Y4MDAwMDAsMHg3ZTAwMDAwMCwweDc4MDAwMDAwLDB4NjAwMDAwMDAsMHg3ODAwMDAwMCwweDdmODAwMDAwLDB4N2ZmODAwMDAsMHg3ZmZjMDAwMCwweDdmZjgwMDAwLDB4N2Y4MDAwMDAsMHg3ODAwMDAwMCwweDc4MDAwMDAwLDB4N2ZlMDAwMDAsMHg3ZmY4MDAwMCwweDdmZTAwMDAwLDB4NzgwMDAwMDAsMHg3ZjgwMDAwMCwweDdmZjAwMDAwLDB4N2Y4MDAwMDAsMHg3ZTAwMDAwMCwweDdmZTAwMDAwLDB4N2UwMDAwMDAsMHg3ODAwMDAwMCwweDdmYzAwMDAwLDB4NzgwMDAwMDAsMHg2MDAwMDAwMCwweDdmODAwMDAwLDB4NjAwMDAwMDAsMHg3ZjAwMDAwMCwweDdlMDAwMDAwLDB4N2MwMDAwMDAsMHg3ODAwMDAwMCwweDcwMDAwMDAwLDB4NjAwMDAwMDAsMHg0MDAwMDAwMCwweDEsMHgzLDB4NywweGYsMHgxLDB4MWYsMHgzLDB4M2YsMHhmLDB4N2YsMHgxZiwweGZjLDB4M2YsMHgzLDB4MWYwLDB4ZmYsMHhmLDB4M2MwLDB4MWZmLDB4M2YsMHgzLDB4NzAwLDB4M2ZmLDB4ZmYsMHgxZiwweDMsMHhjMDAsMHhmZjAsMHgzZmYsMHhmZiwweDNmLDB4ZiwweDMsMHgxMDAwLDB4MWYwMCwweGZmMCwweDNmZiwweDFmZiwweGZmLDB4M2YsMHgxZiwweGYsMHgzLDB4MSwweDMwMDAsMHgzYzAwLDB4MWYwMCwweDFmYzAsMHhmZjAsMHhmZmMsMHg3ZmYsMHg3ZmYsMHgzZmYsMHgzZmYsMHgxZmYsMHgxZmYsMHhmZiwweGZmLDB4MWMwMDAsMHgxYzAwMCwweDNlMDAwLDB4M2UwMDAsMHg3ZjAwMCwweDdmMDAwLDB4ZmY4MDAsMHhmZjgwMCwweDFmZmMwMCwweDFmZmMwMCwweDNmZmUwMCwweDNmZmUwMCwweDdmZmYwMCwweDdmZmYwMCwweDYwMDAwLDB4MWUwMDAwLDB4N2MwMDAwLDB4MWZjMDAwMCwweDdmODAwMDAsMHgxZmY4MDAwMCwweDdmZjAwMDAwLDB4N2ZmMDAwMDAsMHg3ZmUwMDAwMCwweDdmZTAwMDAwLDB4N2ZjMDAwMDAsMHg3ZmMwMDAwMCwweDdmODAwMDAwLDB4N2Y4MDAwMDAsMHg0MDAwMCwweDdjMDAwMCwweDdmODAwMDAsMHg3ZmUwMDAwMCwweDdmYzAwMDAwLDB4N2Y4MDAwMDAsMHg3ZTAwMDAwMCwweDdjMDAwMDAwLDB4NzgwMDAwMDAsMHg2MDAwMDAwMCwweDQwMDAwMDAwLDB4MTgwMDAwLDB4N2Y4MDAwMCwweDdmZTAwMDAwLDB4N2Y4MDAwMDAsMHg3ZTAwMDAwMCwweDc4MDAwMDAwLDB4NjAwMDAwMDAsMHg3MDAwMDAsMHg3ZmUwMDAwMCwweDdmODAwMDAwLDB4N2MwMDAwMDAsMHg2MDAwMDAwMCwweDFlMDAwMDAsMHg3ZmMwMDAwMCwweDdlMDAwMDAwLDB4NjAwMDAwMDAsMHg3YzAwMDAwLDB4N2Y4MDAwMDAsMHg3ODAwMDAwMCwweDFmODAwMDAwLDB4N2UwMDAwMDAsMHg2MDAwMDAwMCwweDdmMDAwMDAwLDB4N2MwMDAwMDAsMHg3ZTAwMDAwMCwweDc4MDAwMDAwLDB4N2MwMDAwMDAsMHg2MDAwMDAwMCwweDc4MDAwMDAwLDB4NDAwMDAwMDAsMHg3MDAwMDAwMCwweDYwMDAwMDAwLDB4NDAwMDAwMDAsMHgxLDB4MywweDcsMHgxLDB4ZSwweDMsMHgxYywweGYsMHgzMCwweDFmLDB4MSwweDYwLDB4M2YsMHg3LDB4YzAsMHg3YywweGYsMHgzLDB4MTAwLDB4ZjAsMHgzZiwweGYsMHgxLDB4MjAwLDB4M2MwLDB4ZmMsMHgzZiwweGYsMHgzLDB4NDAwLDB4NzAwLDB4MWUwLDB4ZmMsMHgzZiwweGYsMHg3LDB4MSwweGMwMCwweDcwMCwweDNjMCwweGYwLDB4N2MsMHgzZiwweDFmLDB4ZiwweDMsMHgxLDB4MTAwMCwweGMwMCwweGUwMCwweDcwMCwweDNjMCwweDFlMCwweDFmMCwweGZjLDB4N2UsMHgzZiwweDNmLDB4MWYsMHhmLDB4NjAwMCwweDMwMDAsMHgzMDAwLDB4MzgwMCwweDNjMDAsMHgxZTAwLDB4MWUwMCwweDFmMDAsMHgxZjgwLDB4ZmMwLDB4ZmMwLDB4ZmUwLDB4ZmYwLDB4ODAwMCwweDFjMDAwLDB4MWMwMDAsMHgxYzAwMCwweDFjMDAwLDB4M2UwMDAsMHgzZTAwMCwweDNlMDAwLDB4M2UwMDAsMHg3ZjAwMCwweDdmMDAwLDB4N2YwMDAsMHg3ZjAwMCwweDMwMDAwLDB4NjAwMDAsMHg2MDAwMCwweGUwMDAwLDB4MWUwMDAwLDB4M2MwMDAwLDB4M2MwMDAwLDB4N2MwMDAwLDB4ZmMwMDAwLDB4MWY4MDAwMCwweDFmODAwMDAsMHgzZjgwMDAwLDB4N2Y4MDAwMCwweDQwMDAwLDB4MTgwMDAwLDB4MzgwMDAwLDB4NzAwMDAwLDB4MWUwMDAwMCwweDNjMDAwMDAsMHg3YzAwMDAwLDB4MWY4MDAwMDAsMHgzZjAwMDAwMCwweDdlMDAwMDAwLDB4N2UwMDAwMDAsMHg3YzAwMDAwMCwweDc4MDAwMDAwLDB4MTgwMDAwLDB4NzAwMDAwLDB4MWUwMDAwMCwweDc4MDAwMDAsMHgxZjAwMDAwMCwweDdlMDAwMDAwLDB4N2MwMDAwMDAsMHg3ODAwMDAwMCwweDYwMDAwMDAwLDB4NDAwMDAwMDAsMHgxMDAwMDAsMHg3MDAwMDAsMHgzYzAwMDAwLDB4MWY4MDAwMDAsMHg3ZTAwMDAwMCwweDc4MDAwMDAwLDB4NzAwMDAwMDAsMHg0MDAwMDAwMCwweDIwMDAwMCwweDFlMDAwMDAsMHgxZjgwMDAwMCwweDdlMDAwMDAwLDB4NzgwMDAwMDAsMHg2MDAwMDAwMCwweDQwMDAwMCwweDc4MDAwMDAsMHg3ZTAwMDAwMCwweDc4MDAwMDAwLDB4NDAwMDAwMDAsMHgxODAwMDAwLDB4MWYwMDAwMDAsMHg3ODAwMDAwMCwweDYwMDAwMDAwLDB4MzAwMDAwMCwweDdlMDAwMDAwLDB4NzAwMDAwMDAsMHg2MDAwMDAwLDB4N2MwMDAwMDAsMHg0MDAwMDAwMCwweDFjMDAwMDAwLDB4NzgwMDAwMDAsMHgzODAwMDAwMCwweDYwMDAwMDAwLDB4NzAwMDAwMDAsMHg0MDAwMDAwMCwweDYwMDAwMDAwLDB4NDAwMDAwMDAsMHgxLDB4MywweDEsMHg2LDB4MywweGMsMHg3LDB4MTAsMHhmLDB4MSwweDIwLDB4MWUsMHg3LDB4NDAsMHgzOCwweGYsMHgzLDB4ODAsMHhmMCwweDNjLDB4ZiwweDMsMHgxMDAsMHgxYzAsMHg3MCwweDFlLDB4ZiwweDMsMHgzMDAsMHhjMCwweDcwLDB4M2MsMHhmLDB4NywweDEsMHg2MDAsMHgzMDAsMHgxYzAsMHhmMCwweDM4LDB4MWUsMHhmLDB4NywweDMsMHgxLDB4ODAwLDB4NDAwLDB4MzAwLDB4MzgwLDB4MWMwLDB4ZTAsMHg3MCwweDNjLDB4MWUsMHgxZiwweGYsMHg3LDB4MTAwMCwweDE4MDAsMHhjMDAsMHhjMDAsMHg2MDAsMHg3MDAsMHgzODAsMHgzYzAsMHgxZTAsMHgxZTAsMHhmMCwweGY4LDB4NjAwMCwweDYwMDAsMHgzMDAwLDB4MzAwMCwweDM4MDAsMHgzODAwLDB4M2MwMCwweDNjMDAsMHgxZTAwLDB4MWUwMCwweDFmMDAsMHgxZjAwLDB4ODAwMCwweDgwMDAsMHgxYzAwMCwweDFjMDAwLDB4MWMwMDAsMHgxYzAwMCwweDFjMDAwLDB4MWMwMDAsMHgzZTAwMCwweDNlMDAwLDB4M2UwMDAsMHgzZTAwMCwweDMwMDAwLDB4MzAwMDAsMHg2MDAwMCwweDYwMDAwLDB4ZTAwMDAsMHhlMDAwMCwweDFlMDAwMCwweDFlMDAwMCwweDNjMDAwMCwweDNjMDAwMCwweDdjMDAwMCwweDdjMDAwMCwweDQwMDAwLDB4YzAwMDAsMHgxODAwMDAsMHgxODAwMDAsMHgzMDAwMDAsMHg3MDAwMDAsMHhlMDAwMDAsMHgxZTAwMDAwLDB4M2MwMDAwMCwweDNjMDAwMDAsMHg3ODAwMDAwLDB4ZjgwMDAwMCwweDgwMDAwLDB4MTAwMDAwLDB4NjAwMDAwLDB4ZTAwMDAwLDB4MWMwMDAwMCwweDM4MDAwMDAsMHg3MDAwMDAwLDB4MWUwMDAwMDAsMHgzYzAwMDAwMCwweDdjMDAwMDAwLDB4NzgwMDAwMDAsMHg3MDAwMDAwMCwweDMwMDAwMCwweDYwMDAwMCwweDFjMDAwMDAsMHg3ODAwMDAwLDB4ZTAwMDAwMCwweDNjMDAwMDAwLDB4NzgwMDAwMDAsMHg3MDAwMDAwMCwweDYwMDAwMDAwLDB4NDAwMDAwMDAsMHg2MDAwMDAsMHgxODAwMDAwLDB4NzAwMDAwMCwweDFlMDAwMDAwLDB4NzgwMDAwMDAsMHg3MDAwMDAwMCwweDQwMDAwMDAwLDB4NDAwMDAwLDB4MWMwMDAwMCwweDcwMDAwMDAsMHgzYzAwMDAwMCwweDc4MDAwMDAwLDB4NjAwMDAwMDAsMHg4MDAwMDAsMHg3ODAwMDAwLDB4MWUwMDAwMDAsMHg3ODAwMDAwMCwweDYwMDAwMDAwLDB4MTAwMDAwMCwweGUwMDAwMDAsMHg3ODAwMDAwMCwweDYwMDAwMDAwLDB4MjAwMDAwMCwweDNjMDAwMDAwLDB4NzAwMDAwMDAsMHg0MDAwMDAwLDB4NzgwMDAwMDAsMHg0MDAwMDAwMCwweDE4MDAwMDAwLDB4NzAwMDAwMDAsMHgzMDAwMDAwMCwweDYwMDAwMDAwLDB4NjAwMDAwMDAsMHg0MDAwMDAwMCwweDQwMDAwMDAwLDB4MSwweDIsMHgxLDB4NCwweDMsMHg4LDB4NywweDEsMHgxMCwweGUsMHgzLDB4MjAsMHgzOCwweGYsMHgzLDB4NDAsMHg3MCwweDFjLDB4NywweDEsMHhjMCwweDMwLDB4MWMsMHg3LDB4MywweDE4MCwweGUwLDB4MzAsMHgxYywweGYsMHgzLDB4MSwweDMwMCwweDE4MCwweGMwLDB4NzAsMHgzOCwweGUsMHg3LDB4MywweDEsMHg0MDAsMHgyMDAsMHgxMDAsMHhjMCwweGUwLDB4NzAsMHgzOCwweDFjLDB4ZSwweDcsMHgzLDB4ODAwLDB4YzAwLDB4NjAwLDB4MzAwLDB4MzAwLDB4MTgwLDB4MWMwLDB4ZTAsMHg3MCwweDc4LDB4M2MsMHgzMDAwLDB4MTAwMCwweDE4MDAsMHhjMDAsMHhjMDAsMHhlMDAsMHg2MDAsMHg3MDAsMHg3ODAsMHgzODAsMHgzYzAsMHg0MDAwLDB4NjAwMCwweDYwMDAsMHgzMDAwLDB4MzAwMCwweDMwMDAsMHgzODAwLDB4MzgwMCwweDM4MDAsMHgzYzAwLDB4M2MwMCwweDgwMDAsMHg4MDAwLDB4ODAwMCwweDFjMDAwLDB4MWMwMDAsMHgxYzAwMCwweDFjMDAwLDB4MWMwMDAsMHgxYzAwMCwweDFjMDAwLDB4MWMwMDAsMHgxMDAwMCwweDMwMDAwLDB4MzAwMDAsMHg2MDAwMCwweDYwMDAwLDB4NjAwMDAsMHhlMDAwMCwweGUwMDAwLDB4ZTAwMDAsMHgxZTAwMDAsMHgxZTAwMDAsMHg2MDAwMCwweDQwMDAwLDB4YzAwMDAsMHgxODAwMDAsMHgxODAwMDAsMHgzODAwMDAsMHgzMDAwMDAsMHg3MDAwMDAsMHhmMDAwMDAsMHhlMDAwMDAsMHgxZTAwMDAwLDB4ODAwMDAsMHgxODAwMDAsMHgzMDAwMDAsMHg2MDAwMDAsMHg2MDAwMDAsMHhjMDAwMDAsMHgxYzAwMDAwLDB4MzgwMDAwMCwweDcwMDAwMDAsMHhmMDAwMDAwLDB4MWUwMDAwMDAsMHgxMDAwMDAsMHgyMDAwMDAsMHg0MDAwMDAsMHgxODAwMDAwLDB4MzgwMDAwMCwweDcwMDAwMDAsMHhlMDAwMDAwLDB4MWMwMDAwMDAsMHgzODAwMDAwMCwweDcwMDAwMDAwLDB4NjAwMDAwMDAsMHg2MDAwMDAsMHhjMDAwMDAsMHgxODAwMDAwLDB4NzAwMDAwMCwweGUwMDAwMDAsMHgzODAwMDAwMCwweDcwMDAwMDAwLDB4NjAwMDAwMDAsMHg0MDAwMDAwMCwweGMwMDAwMCwweDM4MDAwMDAsMHg2MDAwMDAwLDB4MWMwMDAwMDAsMHg3ODAwMDAwMCwweDYwMDAwMDAwLDB4NDAwMDAwMDAsMHgxODAwMDAwLDB4NjAwMDAwMCwweDFjMDAwMDAwLDB4NzAwMDAwMDAsMHg2MDAwMDAwMCwweDEwMDAwMDAsMHg3MDAwMDAwLDB4MWMwMDAwMDAsMHg3MDAwMDAwMCwweDQwMDAwMDAwLDB4MjAwMDAwMCwweGUwMDAwMDAsMHg3ODAwMDAwMCwweDYwMDAwMDAwLDB4NDAwMDAwMCwweDM4MDAwMDAwLDB4NjAwMDAwMDAsMHg4MDAwMDAwLDB4NzAwMDAwMDAsMHg0MDAwMDAwMCwweDEwMDAwMDAwLDB4NjAwMDAwMDAsMHgyMDAwMDAwMCwweDQwMDAwMDAwLDB4NDAwMDAwMDAsMHgxLDB4MiwweDEsMHg0LDB4MywweDgsMHhlLDB4MywweDEwLDB4MWMsMHg3LDB4MSwweDMwLDB4YywweDMsMHgxLDB4NjAsMHgxOCwweGUsMHgzLDB4MSwweGMwLDB4NjAsMHgxOCwweGMsMHg3LDB4MywweDEwMCwweGMwLDB4NjAsMHgzMCwweDFjLDB4ZSwweDMsMHgxLDB4MjAwLDB4MTAwLDB4ODAsMHg0MCwweDMwLDB4MzgsMHgxYywweGUsMHg3LDB4MywweDQwMCwweDYwMCwweDMwMCwweDE4MCwweGMwLDB4YzAsMHg2MCwweDMwLDB4MzgsMHgxYywweDgwMCwweDgwMCwweDQwMCwweDYwMCwweDMwMCwweDMwMCwweDE4MCwweDFjMCwweGMwLDB4ZTAsMHgzMDAwLDB4MTAwMCwweDE4MDAsMHgxODAwLDB4YzAwLDB4YzAwLDB4ZTAwLDB4ZTAwLDB4NzAwLDB4NzAwLDB4NDAwMCwweDYwMDAsMHg2MDAwLDB4NjAwMCwweDMwMDAsMHgzMDAwLDB4MzAwMCwweDMwMDAsMHgzODAwLDB4MzgwMCwweDgwMDAsMHg4MDAwLDB4ODAwMCwweDgwMDAsMHgxYzAwMCwweDFjMDAwLDB4MWMwMDAsMHgxYzAwMCwweDFjMDAwLDB4MWMwMDAsMHgxMDAwMCwweDMwMDAwLDB4MzAwMDAsMHgzMDAwMCwweDYwMDAwLDB4NjAwMDAsMHg2MDAwMCwweDYwMDAwLDB4ZTAwMDAsMHhlMDAwMCwweDYwMDAwLDB4NDAwMDAsMHhjMDAwMCwweGMwMDAwLDB4MTgwMDAwLDB4MTgwMDAwLDB4MzgwMDAwLDB4MzgwMDAwLDB4NzAwMDAwLDB4NzAwMDAwLDB4ODAwMDAsMHg4MDAwMCwweDEwMDAwMCwweDMwMDAwMCwweDYwMDAwMCwweDYwMDAwMCwweGMwMDAwMCwweDFjMDAwMDAsMHgxODAwMDAwLDB4MzgwMDAwMCwweDEwMDAwMCwweDMwMDAwMCwweDYwMDAwMCwweGMwMDAwMCwweDE4MDAwMDAsMHgxODAwMDAwLDB4MzAwMDAwMCwweDYwMDAwMDAsMHhlMDAwMDAwLDB4MWMwMDAwMDAsMHgyMDAwMDAsMHg0MDAwMDAsMHg4MDAwMDAsMHgxMDAwMDAwLDB4NjAwMDAwMCwweGUwMDAwMDAsMHgxYzAwMDAwMCwweDM4MDAwMDAwLDB4NzAwMDAwMDAsMHg2MDAwMDAwMCwweDQwMDAwMCwweDE4MDAwMDAsMHgzMDAwMDAwLDB4NjAwMDAwMCwweDFjMDAwMDAwLDB4MzgwMDAwMDAsMHg2MDAwMDAwMCwweDQwMDAwMDAwLDB4MTgwMDAwMCwweDMwMDAwMDAsMHhjMDAwMDAwLDB4MTgwMDAwMDAsMHg3MDAwMDAwMCwweDYwMDAwMDAwLDB4MzAwMDAwMCwweGMwMDAwMDAsMHgzODAwMDAwMCwweDYwMDAwMDAwLDB4NDAwMDAwMDAsMHg2MDAwMDAwLDB4MTgwMDAwMDAsMHg2MDAwMDAwMCwweDQwMDAwMDAwLDB4NDAwMDAwMCwweDFjMDAwMDAwLDB4NzAwMDAwMDAsMHg0MDAwMDAwMCwweDgwMDAwMDAsMHgzODAwMDAwMCwweDYwMDAwMDAwLDB4MTAwMDAwMDAsMHg2MDAwMDAwMCwweDIwMDAwMDAwLDB4NDAwMDAwMDAsMHg0MDAwMDAwMCwweDEsMHgyLDB4MywweDQsMHg3LDB4MSwweGMsMHgzLDB4MTgsMHg2LDB4MywweDMwLDB4YywweDYsMHgzLDB4NjAsMHgzMCwweGMsMHg2LDB4MywweDEsMHg4MCwweDYwLDB4MzAsMHgxOCwweGMsMHg3LDB4MywweDEwMCwweDgwLDB4NDAsMHgyMCwweDEwLDB4YywweGUsMHg3LDB4MywweDIwMCwweDEwMCwweDE4MCwweGMwLDB4NjAsMHgzMCwweDMwLDB4MTgsMHhjLDB4NDAwLDB4NjAwLDB4MjAwLDB4MzAwLDB4MTgwLDB4YzAsMHhjMCwweDYwLDB4NzAsMHgxODAwLDB4ODAwLDB4YzAwLDB4NDAwLDB4NjAwLDB4MzAwLDB4MzAwLDB4MzgwLDB4MTgwLDB4MjAwMCwweDEwMDAsMHgxMDAwLDB4MTgwMCwweDE4MDAsMHhjMDAsMHhjMDAsMHhjMDAsMHhlMDAsMHg0MDAwLDB4NjAwMCwweDYwMDAsMHg2MDAwLDB4NjAwMCwweDMwMDAsMHgzMDAwLDB4MzAwMCwweDMwMDAsMHg4MDAwLDB4ODAwMCwweDgwMDAsMHg4MDAwLDB4ODAwMCwweDFjMDAwLDB4MWMwMDAsMHgxYzAwMCwweDFjMDAwLDB4MTAwMDAsMHgzMDAwMCwweDMwMDAwLDB4MzAwMDAsMHgzMDAwMCwweDYwMDAwLDB4NjAwMDAsMHg2MDAwMCwweDYwMDAwLDB4MjAwMDAsMHg0MDAwMCwweDQwMDAwLDB4YzAwMDAsMHhjMDAwMCwweDE4MDAwMCwweDE4MDAwMCwweDE4MDAwMCwweDM4MDAwMCwweGMwMDAwLDB4ODAwMDAsMHgxODAwMDAsMHgxMDAwMDAsMHgzMDAwMDAsMHg2MDAwMDAsMHg2MDAwMDAsMHhlMDAwMDAsMHhjMDAwMDAsMHgxMDAwMDAsMHgzMDAwMDAsMHgyMDAwMDAsMHg2MDAwMDAsMHhjMDAwMDAsMHgxODAwMDAwLDB4MTgwMDAwMCwweDMwMDAwMDAsMHg3MDAwMDAwLDB4MjAwMDAwLDB4NDAwMDAwLDB4YzAwMDAwLDB4MTgwMDAwMCwweDMwMDAwMDAsMHg2MDAwMDAwLDB4NjAwMDAwMCwweGMwMDAwMDAsMHgxODAwMDAwMCwweDQwMDAwMCwweDgwMDAwMCwweDEwMDAwMDAsMHgyMDAwMDAwLDB4NDAwMDAwMCwweDE4MDAwMDAwLDB4MzgwMDAwMDAsMHg3MDAwMDAwMCwweDYwMDAwMDAwLDB4ODAwMDAwLDB4MzAwMDAwMCwweDYwMDAwMDAsMHhjMDAwMDAwLDB4MTgwMDAwMDAsMHg3MDAwMDAwMCwweDYwMDAwMDAwLDB4MzAwMDAwMCwweDYwMDAwMDAsMHgxODAwMDAwMCwweDMwMDAwMDAwLDB4NjAwMDAwMDAsMHg0MDAwMDAwMCwweDYwMDAwMDAsMHgxODAwMDAwMCwweDMwMDAwMDAwLDB4NjAwMDAwMDAsMHhjMDAwMDAwLDB4MzAwMDAwMDAsMHg2MDAwMDAwMCwweDE4MDAwMDAwLDB4NjAwMDAwMDAsMHgxMDAwMDAwMCwweDcwMDAwMDAwLDB4NDAwMDAwMDAsMHgyMDAwMDAwMCwweDYwMDAwMDAwLDB4NDAwMDAwMDAsMHgxLDB4MSwweDMsMHg2LDB4MSwweGMsMHgzLDB4MSwweDE4LDB4YywweDMsMHgxLDB4MzAsMHgxOCwweGMsMHgzLDB4MSwweDQwLDB4MzAsMHgxOCwweGMsMHg2LDB4MywweDEsMHg4MCwweDQwLDB4MjAsMHgxMCwweDgsMHg0LDB4MywweDMsMHgxMDAsMHg4MCwweGMwLDB4NjAsMHgzMCwweDE4LDB4YywweGMsMHgyMDAsMHgzMDAsMHgxMDAsMHg4MCwweGMwLDB4NjAsMHgzMCwweDMwLDB4NDAwLDB4NDAwLDB4MjAwLDB4MzAwLDB4MTAwLDB4MTgwLDB4YzAsMHhjMCwweDE4MDAsMHg4MDAsMHhjMDAsMHhjMDAsMHg2MDAsMHg2MDAsMHgzMDAsMHgzMDAsMHgyMDAwLDB4MzAwMCwweDEwMDAsMHgxMDAwLDB4MTgwMCwweDE4MDAsMHhjMDAsMHhjMDAsMHg0MDAwLDB4NDAwMCwweDYwMDAsMHg2MDAwLDB4NjAwMCwweDYwMDAsMHgzMDAwLDB4MzAwMCwweDgwMDAsMHg4MDAwLDB4ODAwMCwweDgwMDAsMHg4MDAwLDB4ODAwMCwweDFjMDAwLDB4MWMwMDAsMHgxMDAwMCwweDEwMDAwLDB4MzAwMDAsMHgzMDAwMCwweDMwMDAwLDB4MzAwMDAsMHg2MDAwMCwweDYwMDAwLDB4MjAwMDAsMHg2MDAwMCwweDQwMDAwLDB4NDAwMDAsMHhjMDAwMCwweGMwMDAwLDB4MTgwMDAwLDB4MTgwMDAwLDB4YzAwMDAsMHg4MDAwMCwweDE4MDAwMCwweDE4MDAwMCwweDMwMDAwMCwweDMwMDAwMCwweDYwMDAwMCwweDYwMDAwMCwweDEwMDAwMCwweDEwMDAwMCwweDIwMDAwMCwweDYwMDAwMCwweDQwMDAwMCwweGMwMDAwMCwweDE4MDAwMDAsMHgxODAwMDAwLDB4MjAwMDAwLDB4NjAwMDAwLDB4NDAwMDAwLDB4ODAwMDAwLDB4MTgwMDAwMCwweDMwMDAwMDAsMHg2MDAwMDAwLDB4NjAwMDAwMCwweDQwMDAwMCwweDgwMDAwMCwweDE4MDAwMDAsMHgzMDAwMDAwLDB4NjAwMDAwMCwweGMwMDAwMDAsMHgxODAwMDAwMCwweDE4MDAwMDAwLDB4ODAwMDAwLDB4MTAwMDAwMCwweDIwMDAwMDAsMHg0MDAwMDAwLDB4ODAwMDAwMCwweDEwMDAwMDAwLDB4NjAwMDAwMDAsMHg2MDAwMDAwMCwweDEwMDAwMDAsMHg2MDAwMDAwLDB4YzAwMDAwMCwweDE4MDAwMDAwLDB4MzAwMDAwMDAsMHg2MDAwMDAwMCwweDQwMDAwMDAwLDB4NjAwMDAwMCwweGMwMDAwMDAsMHgxODAwMDAwMCwweDYwMDAwMDAwLDB4NDAwMDAwMDAsMHhjMDAwMDAwLDB4MTgwMDAwMDAsMHg2MDAwMDAwMCwweDQwMDAwMDAwLDB4MTgwMDAwMDAsMHg2MDAwMDAwMCwweDQwMDAwMDAwLDB4MzAwMDAwMDAsMHg0MDAwMDAwMCwweDYwMDAwMDAwLDB4NDAwMDAwMDAsMHg0MDAwMDAwMCwweDEsMHgzLDB4NiwweDEsMHhjLDB4NiwweDEsMHgxMCwweGMsMHg2LDB4MSwweDIwLDB4MTAsMHhjLDB4NiwweDMsMHgxLDB4NDAsMHgyMCwweDEwLDB4OCwweDQsMHgyLDB4MSwweDgwLDB4NDAsMHg2MCwweDMwLDB4MTgsMHhjLDB4NiwweDEwMCwweDE4MCwweDgwLDB4NDAsMHg2MCwweDMwLDB4MTgsMHgyMDAsMHgyMDAsMHgxMDAsMHgxODAsMHg4MCwweGMwLDB4NjAsMHhjMDAsMHg0MDAsMHg2MDAsMHgyMDAsMHgzMDAsMHgxMDAsMHgxODAsMHgxMDAwLDB4ODAwLDB4ODAwLDB4YzAwLDB4NDAwLDB4NjAwLDB4NjAwLDB4MjAwMCwweDMwMDAsMHgxMDAwLDB4MTAwMCwweDE4MDAsMHgxODAwLDB4MTgwMCwweDQwMDAsMHg0MDAwLDB4NjAwMCwweDYwMDAsMHg2MDAwLDB4NjAwMCwweDYwMDAsMHg4MDAwLDB4ODAwMCwweDgwMDAsMHg4MDAwLDB4ODAwMCwweDgwMDAsMHg4MDAwLDB4MTAwMDAsMHgxMDAwMCwweDMwMDAwLDB4MzAwMDAsMHgzMDAwMCwweDMwMDAwLDB4MzAwMDAsMHgyMDAwMCwweDYwMDAwLDB4NDAwMDAsMHg0MDAwMCwweGMwMDAwLDB4YzAwMDAsMHhjMDAwMCwweDQwMDAwLDB4ODAwMDAsMHg4MDAwMCwweDE4MDAwMCwweDEwMDAwMCwweDMwMDAwMCwweDMwMDAwMCwweDE4MDAwMCwweDEwMDAwMCwweDMwMDAwMCwweDIwMDAwMCwweDYwMDAwMCwweDQwMDAwMCwweGMwMDAwMCwweDIwMDAwMCwweDIwMDAwMCwweDQwMDAwMCwweGMwMDAwMCwweDgwMDAwMCwweDE4MDAwMDAsMHgzMDAwMDAwLDB4NDAwMDAwLDB4YzAwMDAwLDB4ODAwMDAwLDB4MTAwMDAwMCwweDMwMDAwMDAsMHg2MDAwMDAwLDB4YzAwMDAwMCwweDgwMDAwMCwweDEwMDAwMDAsMHgzMDAwMDAwLDB4NjAwMDAwMCwweGMwMDAwMDAsMHgxODAwMDAwMCwweDMwMDAwMDAwLDB4MTAwMDAwMCwweDIwMDAwMDAsMHg0MDAwMDAwLDB4ODAwMDAwMCwweDEwMDAwMDAwLDB4MjAwMDAwMDAsMHg0MDAwMDAwMCwweDIwMDAwMDAsMHg0MDAwMDAwLDB4MTgwMDAwMDAsMHgzMDAwMDAwMCwweDYwMDAwMDAwLDB4NDAwMDAwMDAsMHg0MDAwMDAwLDB4MTgwMDAwMDAsMHgzMDAwMDAwMCwweDQwMDAwMDAwLDB4MTgwMDAwMDAsMHgzMDAwMDAwMCwweDQwMDAwMDAwLDB4MzAwMDAwMDAsMHg0MDAwMDAwMCwweDYwMDAwMDAwLDB4NDAwMDAwMDAsMHgxLDB4MywweDYsMHgzLDB4OCwweDYsMHgzLDB4MTAsMHg4LDB4NiwweDMsMHgxLDB4MjAsMHgxMCwweDgsMHg0LDB4MiwweDEsMHg0MCwweDIwLDB4MTAsMHgxOCwweGMsMHg2LDB4ODAsMHhjMCwweDYwLDB4MjAsMHgxMCwweDE4LDB4MTAwLDB4MTAwLDB4ODAsMHhjMCwweDYwLDB4MjAsMHgyMDAsMHgyMDAsMHgxMDAsMHgxMDAsMHg4MCwweGMwLDB4YzAwLDB4NDAwLDB4NjAwLDB4MjAwLDB4MzAwLDB4MzAwLDB4MTAwMCwweDgwMCwweDgwMCwweGMwMCwweGMwMCwweDQwMCwweDIwMDAsMHgzMDAwLDB4MTAwMCwweDEwMDAsMHgxMDAwLDB4MTgwMCwweDQwMDAsMHg0MDAwLDB4NjAwMCwweDYwMDAsMHg2MDAwLDB4NjAwMCwweDgwMDAsMHg4MDAwLDB4ODAwMCwweDgwMDAsMHg4MDAwLDB4ODAwMCwweDEwMDAwLDB4MTAwMDAsMHgzMDAwMCwweDMwMDAwLDB4MzAwMDAsMHgzMDAwMCwweDIwMDAwLDB4NjAwMDAsMHg0MDAwMCwweDQwMDAwLDB4NDAwMDAsMHhjMDAwMCwweDQwMDAwLDB4ODAwMDAsMHg4MDAwMCwweDE4MDAwMCwweDE4MDAwMCwweDEwMDAwMCwweDE4MDAwMCwweDEwMDAwMCwweDMwMDAwMCwweDIwMDAwMCwweDYwMDAwMCwweDYwMDAwMCwweDIwMDAwMCwweDIwMDAwMCwweDQwMDAwMCwweDQwMDAwMCwweDgwMDAwMCwweDE4MDAwMDAsMHg0MDAwMDAsMHg0MDAwMDAsMHg4MDAwMDAsMHgxODAwMDAwLDB4MzAwMDAwMCwweDIwMDAwMDAsMHg4MDAwMDAsMHgxODAwMDAwLDB4MzAwMDAwMCwweDIwMDAwMDAsMHg0MDAwMDAwLDB4YzAwMDAwMCwweDEwMDAwMDAsMHgyMDAwMDAwLDB4NDAwMDAwMCwweGMwMDAwMDAsMHgxODAwMDAwMCwweDMwMDAwMDAwLDB4MjAwMDAwMCwweDQwMDAwMDAsMHg4MDAwMDAwLDB4MTAwMDAwMDAsMHgyMDAwMDAwMCwweDQwMDAwMDAwLDB4NDAwMDAwMCwweDgwMDAwMDAsMHgzMDAwMDAwMCwweDYwMDAwMDAwLDB4NDAwMDAwMDAsMHg4MDAwMDAwLDB4MzAwMDAwMDAsMHg2MDAwMDAwMCwweDMwMDAwMDAwLDB4NjAwMDAwMDAsMHg2MDAwMDAwMCwweDQwMDAwMDAwLDB4MSwweDMsMHgxLDB4NCwweDMsMHgxLDB4OCwweDQsMHgzLDB4MSwweDEwLDB4OCwweDQsMHgyLDB4MSwweDIwLDB4MTAsMHg4LDB4YywweDYsMHg0MCwweDIwLDB4MzAsMHgxMCwweDgsMHg4MCwweGMwLDB4NDAsMHgyMCwweDMwLDB4MTAwLDB4MTAwLDB4ODAsMHhjMCwweDQwLDB4NjAwLDB4MjAwLDB4MzAwLDB4MTAwLDB4MTgwLDB4ODAwLDB4NDAwLDB4NDAwLDB4NjAwLDB4MjAwLDB4MTAwMCwweDgwMCwweDgwMCwweDgwMCwweGMwMCwweDIwMDAsMHgzMDAwLDB4MzAwMCwweDEwMDAsMHgxMDAwLDB4NDAwMCwweDQwMDAsMHg0MDAwLDB4NjAwMCwweDYwMDAsMHg4MDAwLDB4ODAwMCwweDgwMDAsMHg4MDAwLDB4ODAwMCwweDEwMDAwLDB4MTAwMDAsMHgxMDAwMCwweDMwMDAwLDB4MzAwMDAsMHgyMDAwMCwweDYwMDAwLDB4NjAwMDAsMHg0MDAwMCwweDQwMDAwLDB4NDAwMDAsMHg4MDAwMCwweDgwMDAwLDB4ODAwMDAsMHgxODAwMDAsMHg4MDAwMCwweDEwMDAwMCwweDEwMDAwMCwweDMwMDAwMCwweDIwMDAwMCwweDMwMDAwMCwweDIwMDAwMCwweDYwMDAwMCwweDQwMDAwMCwweGMwMDAwMCwweDQwMDAwMCwweDQwMDAwMCwweDgwMDAwMCwweDE4MDAwMDAsMHgxMDAwMDAwLDB4ODAwMDAwLDB4MTgwMDAwMCwweDEwMDAwMDAsMHgyMDAwMDAwLDB4NjAwMDAwMCwweDEwMDAwMDAsMHgyMDAwMDAwLDB4NjAwMDAwMCwweDQwMDAwMDAsMHg4MDAwMDAwLDB4MjAwMDAwMCwweDQwMDAwMDAsMHg4MDAwMDAwLDB4MTgwMDAwMDAsMHgzMDAwMDAwMCwweDQwMDAwMDAsMHg4MDAwMDAwLDB4MTAwMDAwMDAsMHgyMDAwMDAwMCwweDQwMDAwMDAwLDB4ODAwMDAwMCwweDEwMDAwMDAwLDB4NjAwMDAwMDAsMHg0MDAwMDAwMCwweDEwMDAwMDAwLDB4NjAwMDAwMDAsMHg0MDAwMDAwMCwweDYwMDAwMDAwLDB4NDAwMDAwMDAsMHg0MDAwMDAwMCwweDEsMHgyLDB4MSwweDQsMHgyLDB4MSwweDgsMHg0LDB4MiwweDEsMHgxMCwweDgsMHg0LDB4NiwweDIwLDB4MTAsMHgxOCwweDgsMHg0MCwweDYwLDB4MjAsMHgxMCwweDgwLDB4ODAsMHg0MCwweDYwLDB4MTAwLDB4MTAwLDB4ODAsMHg4MCwweDYwMCwweDIwMCwweDMwMCwweDEwMCwweDgwMCwweDQwMCwweDQwMCwweDYwMCwweDEwMDAsMHgxODAwLDB4ODAwLDB4ODAwLDB4MjAwMCwweDIwMDAsMHgzMDAwLDB4MTAwMCwweDQwMDAsMHg0MDAwLDB4NDAwMCwweDYwMDAsMHg4MDAwLDB4ODAwMCwweDgwMDAsMHg4MDAwLDB4MTAwMDAsMHgxMDAwMCwweDEwMDAwLDB4MzAwMDAsMHgyMDAwMCwweDIwMDAwLDB4NjAwMDAsMHg0MDAwMCwweDQwMDAwLDB4YzAwMDAsMHg4MDAwMCwweDgwMDAwLDB4ODAwMDAsMHgxMDAwMDAsMHgxMDAwMDAsMHgzMDAwMDAsMHgzMDAwMDAsMHgyMDAwMDAsMHg2MDAwMDAsMHg0MDAwMDAsMHg0MDAwMDAsMHg0MDAwMDAsMHg4MDAwMDAsMHg4MDAwMDAsMHg4MDAwMDAsMHg4MDAwMDAsMHgxMDAwMDAwLDB4MzAwMDAwMCwweDEwMDAwMDAsMHgzMDAwMDAwLDB4MjAwMDAwMCwweDQwMDAwMDAsMHgyMDAwMDAwLDB4NDAwMDAwMCwweGMwMDAwMDAsMHg4MDAwMDAwLDB4NDAwMDAwMCwweDgwMDAwMDAsMHgxMDAwMDAwMCwweDMwMDAwMDAwLDB4ODAwMDAwMCwweDEwMDAwMDAwLDB4MjAwMDAwMDAsMHg0MDAwMDAwMCwweDEwMDAwMDAwLDB4MjAwMDAwMDAsMHg0MDAwMDAwMCwweDIwMDAwMDAwLDB4NDAwMDAwMDAsMHg0MDAwMDAwMCwweDEsMHgyLDB4MSwweDQsMHgyLDB4MSwweDgsMHg0LDB4MiwweDEwLDB4OCwweGMsMHgyMCwweDMwLDB4MTAsMHg0MCwweDQwLDB4MjAsMHg4MCwweDgwLDB4NDAsMHgzMDAsMHgxMDAsMHgxODAsMHg0MDAsMHgyMDAsMHgyMDAsMHg4MDAsMHg0MDAsMHg0MDAsMHgxMDAwLDB4MTgwMCwweDgwMCwweDIwMDAsMHgyMDAwLDB4MzAwMCwweDQwMDAsMHg0MDAwLDB4NDAwMCwweDgwMDAsMHg4MDAwLDB4ODAwMCwweDEwMDAwLDB4MTAwMDAsMHgxMDAwMCwweDIwMDAwLDB4MjAwMDAsMHg2MDAwMCwweDQwMDAwLDB4YzAwMDAsMHg4MDAwMCwweDgwMDAwLDB4MTAwMDAwLDB4MTAwMDAwLDB4MTAwMDAwLDB4MjAwMDAwLDB4MjAwMDAwLDB4NjAwMDAwLDB4NDAwMDAwLDB4YzAwMDAwLDB4ODAwMDAwLDB4ODAwMDAwLDB4MTAwMDAwMCwweDEwMDAwMDAsMHgxMDAwMDAwLDB4MjAwMDAwMCwweDIwMDAwMDAsMHg2MDAwMDAwLDB4NDAwMDAwMCwweDQwMDAwMDAsMHg4MDAwMDAwLDB4MTgwMDAwMDAsMHg4MDAwMDAwLDB4MTAwMDAwMDAsMHgyMDAwMDAwMCwweDEwMDAwMDAwLDB4MjAwMDAwMDAsMHg0MDAwMDAwMCwweDIwMDAwMDAwLDB4NDAwMDAwMDAsMHg0MDAwMDAwMCwweDEsMHgyLDB4MSwweDQsMHgyLDB4OCwweDQsMHgxMCwweDE4LDB4MjAsMHgyMCwweDQwLDB4NDAsMHg4MCwweDgwLDB4MzAwLDB4MTAwLDB4NDAwLDB4MjAwLDB4ODAwLDB4NDAwLDB4MTAwMCwweDE4MDAsMHgyMDAwLDB4MjAwMCwweDQwMDAsMHg0MDAwLDB4ODAwMCwweDgwMDAsMHgxMDAwMCwweDEwMDAwLDB4MjAwMDAsMHgyMDAwMCwweDQwMDAwLDB4YzAwMDAsMHg4MDAwMCwweDEwMDAwMCwweDEwMDAwMCwweDIwMDAwMCwweDYwMDAwMCwweDQwMDAwMCwweDgwMDAwMCwweDgwMDAwMCwweDEwMDAwMDAsMHgxMDAwMDAwLDB4MjAwMDAwMCwweDIwMDAwMDAsMHg0MDAwMDAwLDB4YzAwMDAwMCwweDgwMDAwMDAsMHgxMDAwMDAwMCwweDEwMDAwMDAwLDB4MjAwMDAwMDAsMHgyMDAwMDAwMCwweDQwMDAwMDAwLDB4NDAwMDAwMDAsMHgxLDB4MiwweDQsMHg4LDB4MTAsMHgyMCwweDQwLDB4MTgwLDB4MjAwLDB4NDAwLDB4ODAwLDB4MTAwMCwweDIwMDAsMHg0MDAwLDB4ODAwMCwweDEwMDAwLDB4MjAwMDAsMHg0MDAwMCwweDgwMDAwLDB4MTAwMDAwLDB4MjAwMDAwLDB4YzAwMDAwLDB4MTAwMDAwMCwweDIwMDAwMDAsMHg0MDAwMDAwLDB4ODAwMDAwMCwweDEwMDAwMDAwLDB4MjAwMDAwMDAsMHg0MDAwMDAwMFxyXG4gICAgXSksXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFZpc2liaWxpdHlUaWxlX21hc2s7XHJcblxyXG4iLCIvKlxyXG5cclxuICAgIOKWhOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiCAg4paE4paIICAgIOKWiOKWhCAgICAg4paE4paI4paI4paI4paI4paI4paI4paI4paIICDiloTiloggICAgICAgIOKWhOKWiOKWiOKWiOKWiOKWiOKWiOKWhCAg4paI4paI4paI4paE4paE4paE4paEICAgIOKWhOKWiCAgICAg4paE4paIICAg4paE4paI4paEICAgIOKWhOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiFxyXG4gICAg4paI4paI4paIICAgIOKWiOKWiOKWiCDilojilojiloggICAg4paI4paI4paIICAg4paI4paI4paIICAgIOKWiOKWiOKWiCDilojilojiloggICAgICAg4paI4paI4paIICAgIOKWiOKWiOKWiCDilojilojilojiloDiloDiloDilojilojiloQg4paI4paI4paIICAgIOKWiOKWiOKWiCDiloTilojilojilojiloAgICDilojilojiloggICAg4paI4paI4paIXHJcbiAgICDilojilojiloggICAg4paI4paI4paIIOKWiOKWiOKWiCAgICDilojilojiloggICDilojilojiloggICAg4paI4paI4paIIOKWiOKWiOKWiCAgICAgICDilojilojiloggICAg4paI4paI4paIIOKWiOKWiOKWiCAgIOKWiOKWiOKWiCDilojilojilojilowgICDilojilojilojilpDilojilojiloAgICAgIOKWiOKWiOKWiCAgICDilojilojilohcclxuICAgIOKWiOKWiOKWiCAgICDilojilojilogg4paI4paI4paIICAgIOKWiOKWiOKWiCAgIOKWiOKWiOKWiCAgICDilojilojilogg4paI4paI4paIICAgICAgIOKWiOKWiOKWiCAgICDilojilojilogg4paI4paI4paIICAg4paI4paI4paIIOKWiOKWiOKWiOKWjCAg4paE4paI4paI4paI4paI4paI4paAICAgICAg4paI4paI4paIICAgIOKWiOKWiOKWiFxyXG4gIOKWgOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiCDilojilojiloggICAg4paI4paI4paIIOKWgOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiCDilojilojiloggICAgICAg4paI4paI4paIICAgIOKWiOKWiOKWiCDilojilojiloggICDilojilojilogg4paI4paI4paI4paMIOKWgOKWgOKWiOKWiOKWiOKWiOKWiOKWhCAgICDiloDilojilojilojilojilojilojilojilojilojilojilohcclxuICAgIOKWiOKWiOKWiCAgICDilojilojilogg4paI4paI4paIICAgIOKWiOKWiOKWiCAgIOKWiOKWiOKWiCAgICDilojilojilogg4paI4paI4paIICAgICAgIOKWiOKWiOKWiCAgICDilojilojilogg4paI4paI4paIICAg4paI4paI4paIIOKWiOKWiOKWiCAgICDilojilojilojilpDilojilojiloQgICAgIOKWiOKWiOKWiCAgICDilojilojilohcclxuICAgIOKWiOKWiOKWiCAgICDilojilojilogg4paI4paI4paIICAgIOKWiOKWiOKWiCAgIOKWiOKWiOKWiCAgICDilojilojilogg4paI4paI4paI4paMICAgIOKWhCDilojilojiloggICAg4paI4paI4paIIOKWiOKWiOKWiCAgIOKWiOKWiOKWiCDilojilojiloggICAg4paI4paI4paIIOKWgOKWiOKWiOKWiOKWhCAgIOKWiOKWiOKWiCAgICDilojilojilohcclxuICAgIOKWiOKWiOKWiCAgICDilojiloAgICDiloDilojilojilojilojilojilojiloAgICAg4paI4paI4paIICAgIOKWiOKWgCAg4paI4paI4paI4paI4paI4paE4paE4paI4paIICDiloDilojilojilojilojilojilojiloAgICDiloDiloggICDilojiloAgIOKWiOKWgCAgICAg4paI4paI4paIICAg4paA4paI4paAICAg4paI4paI4paIICAgIOKWiOKWgFxyXG4gICAg4paAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKWgFxyXG5cclxuICAgIOKWiOKWiOKWiCDiloDiloQgICAg4paEICAgICDilojilojiloQgICAgIOKWhCAgICAgIOKWhCAgICAg4paE4paAICDiloTilojilojilojiloQgICDilojilojilojilojiloQgICAg4paEICAg4paIICDilojiloAg4paE4paIIOKWiOKWgOKWhOKWgOKWiFxyXG4gICAg4paIICDiloggIOKWiCAg4paIICAgICAg4paIICDiloggICAgIOKWiCAgICAgIOKWiCAg4paE4paAICAgIOKWiOKWgCAgIOKWgCAg4paIICAg4paIICAgICDiloggIOKWiOKWhOKWiCAgIOKWiOKWiCDilogg4paIIOKWiFxyXG4gICAg4paIIOKWgCDiloQgIOKWgOKWiCAgICAgICDiloggICDilogg4paIICAg4paIIOKWiOKWiCAgIOKWiCDilogg4paA4paEICDilojilojiloTiloQgICAg4paIICAg4paIIOKWiOKWiCAgIOKWiCDilojiloDiloQgICDilojilogg4paIIOKWhCDilohcclxuICAgIOKWiCAg4paE4paAICDiloggICAgICAgIOKWiCAg4paIICDiloggICDilogg4paIIOKWiCAg4paIIOKWiCAgIOKWiCDilojiloQgICDiloTiloAg4paA4paI4paI4paI4paIIOKWiCDiloggIOKWiCDiloggIOKWiCAg4paQ4paIIOKWiCAgIOKWiFxyXG4gICAg4paI4paI4paIICDiloTiloAgICAgICAgICDilojilojilojiloAgIOKWiOKWhCDiloTilogg4paIICDilogg4paIICDilojilojiloggIOKWgOKWiOKWiOKWiOKWgCAgICAgICAgIOKWiCAg4paIIOKWiCAgIOKWiCAgICDilpAgICAg4paIXHJcbiAgICDiloDiloDiloAgIOKWiCAgIOKWiOKWiCAgICAgICAgICAgICDiloggICDilojiloggIOKWgCAgICAgICAgIOKWgCAgICAgICAgICAgICAgICDiloBcclxuXHJcbiovXHJcblxyXG5pbXBvcnQgeyBhcHBsaWNhdGlvbiB9IGZyb20gXCJAZW5naW5lL2ZsYXRmYXN0XCI7XHJcblxyXG5cclxuY2xhc3MgQXBwRGF0YSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLl9SQU5ET00gPSAwO1xyXG5cclxuICAgICAgICB0aGlzLldvcmxkID0ge1xyXG4gICAgICAgICAgICB0aWxlV2lkdGg6ICAgICAgICAgICAgICAgICAgMTYsXHJcbiAgICAgICAgICAgIHRpbGVIZWlnaHQ6ICAgICAgICAgICAgICAgICAyNCxcclxuICAgICAgICAgICAgdGlsZVBlclJvdzogICAgICAgICAgICAgICAgIDE2LFxyXG4gICAgICAgICAgICBzaGFkb3dTY2FsZTogICAgICAgICAgICAgICAgMiwgICAgICAvLyDsi5zslbwg6re466a87J6Q7J2YIO2VtOyDgeuPhDrtg4DsnbzsnZgg7ZW07IOB64+EIOu5hOycqFxyXG4gICAgICAgICAgICBzaGFkb3dXaWR0aDogICAgICAgICAgICAgICAgMTAyNCxcclxuICAgICAgICAgICAgc2hhZG93SGVpZ2h0OiAgICAgICAgICAgICAgIDEwMjQsXHJcbiAgICAgICAgICAgIHRleHR1cmVUb1NjcmVlbk1hZ2ljTnVtYmVyOiAwLjk1OTQ3MjYsXHQvLyDsnbTqsowg7JmcIO2VhOyalO2VnOyngCDrgpjrj4Qg66qo66W464ukLiDtlL3shYDtjbztjpntirjtlZjquLAg7JyE7ZW07IScIOuztOygle2VmOuLpCDslYzslYTrgrgg6rCSXHJcbiAgICAgICAgICAgIHpvb21NaW46ICAgICAgICAgICAgICAgICAgICAxLjAsXHJcbiAgICAgICAgICAgIHpvb21NYXg6ICAgICAgICAgICAgICAgICAgICAxLjgsXHJcbiAgICAgICAgICAgIHR1cm5QZXJEYXk6ICAgICAgICAgICAgICAgICAyMDAsXHJcblxyXG4gICAgICAgICAgICB0aWxlVGV4dHVyZU5hbWU6ICAgICAgIFwidGlsZTE2MjQucG5nXCIsXHJcbiAgICAgICAgICAgIGxpZ2h0VGV4dHVyZU5hbWU6ICAgICAgXCJMaWdodC5wbmdcIixcclxuICAgICAgICAgICAgc2hhZG93TWFza1RleHR1cmVOYW1lOiBcInNoYWRvd01hc2sxNjI0LnBuZ1wiLFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGltZVRhYmxlOiBbXHJcbiAgICAgICAgICAgICAgICB7IHRpbWU6IDAsIHJhZGl1czogMywgYzE6IFswLjEsIDAuMywgMSwgMC4xXSwgYzI6IFswLjI1LCAwLjQsIDEsIDAuN10gfSxcclxuICAgICAgICAgICAgICAgIHsgdGltZTogMywgcmFkaXVzOiAzLCBjMTogWzAuMSwgMC4zLCAxLCAwLjEyXSwgYzI6IFswLjUsIDAuNzUsIDEsIDFdIH0sXHJcbiAgICAgICAgICAgICAgICB7IHRpbWU6IDUsIHJhZGl1czogNiwgYzE6IFswLjUsIDAuNSwgMS4wLCAwLjE1XSwgYzI6IFswLjUsIDEsIDEsIDFdIH0sXHJcbiAgICAgICAgICAgICAgICB7IHRpbWU6IDEwLCByYWRpdXM6IDE0LCBjMTogWzAuNCwgMC43LCAwLjksIDAuMTZdLCBjMjogWzEsIDEsIDEsIDFdIH0sXHJcbiAgICAgICAgICAgICAgICB7IHRpbWU6IDExLCByYWRpdXM6IDE1LCBjMTogWzEsIDEsIDAuOCwgMC4yMV0sIGMyOiBbMSwgMSwgMSwgMV0gfSxcclxuICAgICAgICAgICAgICAgIHsgdGltZTogMTgsIHJhZGl1czogMTUsIGMxOiBbMSwgMC42LCAwLjUsIDAuMjFdLCBjMjogWzEsIDAuNywgMC43LCAxXSB9LFxyXG4gICAgICAgICAgICAgICAgeyB0aW1lOiAxOSwgcmFkaXVzOiAxNCwgYzE6IFsxLCAwLCAwLjIsIDAuMTZdLCBjMjogWzEsIDEsIDAuNSwgMV0gfSxcclxuICAgICAgICAgICAgICAgIHsgdGltZTogMjEsIHJhZGl1czogNiwgYzE6IFsxLCAwLCAxLCAwLjJdLCBjMjogWzEuMCwgMC42LCAwLjIsIDFdIH0sXHJcbiAgICAgICAgICAgICAgICB7IHRpbWU6IDI0LCByYWRpdXM6IDMsIGMxOiBbMC4xLCAwLjMsIDEsIDAuMV0sIGMyOiBbMC4yNSwgMC40LCAxLCAwLjddIH0sXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuRW50aXR5ID0ge1xyXG4gICAgICAgICAgICB3aWR0aDogICAgIDE2LFxyXG4gICAgICAgICAgICBoZWlnaHQ6ICAgIDI0LFxyXG4gICAgICAgICAgICB3YWxrU3BlZWQ6IDIyMCxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLkludGVyZmFjZSA9IHtcclxuICAgICAgICAgICAgbWFyZ2luOiA4XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgUEFSVElDTEVfU0NBTEUoKSB7XHJcbiAgICAgICAgcmV0dXJuIGFwcGxpY2F0aW9uLmRldmljZVZpZXdwb3J0LndpZHRoIC8gYXBwbGljYXRpb24uZGV2aWNlVmlld3BvcnQuaGVpZ2h0O1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBDT05GSUcgPSBuZXcgQXBwRGF0YSgpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ09ORklHO1xyXG4iLCJpbXBvcnQgeyBUd2VlbiwgaGFuZ3VsLCBNZXNoLCBUZXh0RmllbGQsIGVhc2luZywgQml0bWFwLCBzdGFnZSwgU2NlbmVNYW5hZ2VyLCBhcHBsaWNhdGlvbiwgU291bmQsIFJlbmRlclRhcmdldCwgVXRpbHMsIE1vdmllQ2xpcCwgVGV4dHVyZSwgVGV4dHVyZUJhc2UsIFNwcml0ZSwgRXZlbnQsIFRpbWVyIH0gZnJvbSBcIkBlbmdpbmUvZmxhdGZhc3RcIjtcclxuXHJcblxyXG5pbXBvcnQgR0xPQkFMIGZyb20gXCIuL2dsb2JhbFwiO1xyXG5cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFZmZlY3QgZXh0ZW5kcyBTcHJpdGUge1xyXG4gICAgY29uc3RydWN0b3IoIHR5cGUsIC4uLmFyZ3MgKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnJldHVyblZhbHVlID0gRWZmZWN0LmZ1bmNUYWJsZVt0eXBlXSggdGhpcywgLi4uYXJncyApO1xyXG4gICAgICAgIFRpbWVyLmRlbGF5ZWRDYWxsKCB0aGlzLnJldHVyblZhbHVlWzBdLCB0aGlzLnJlbW92ZUZyb21QYXJlbnQsIHRoaXMgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREdXJhdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXR1cm5WYWx1ZTtcclxuICAgIH1cclxufVxyXG5cclxuRWZmZWN0LmZ1bmNUYWJsZSA9IHt9O1xyXG5sZXQgX0ZUID0gRWZmZWN0LmZ1bmNUYWJsZTtcclxuXHJcbl9GVFtcImFycm93XCJdID0gKCBzZWxmLHgxLHkxLHgyLHkyLGlzSGl0ICkgPT4ge1xyXG4gICAgbGV0IGIgPSBuZXcgQml0bWFwKCBuZXcgVGV4dHVyZSggXCJBcnJvdy5wbmdcIix0cnVlLHsgZm9ybWF0OiBUZXh0dXJlQmFzZS5SR0JBNTU1MSB9ICkgKTtcclxuICAgIGxldCBhbmdsZSA9IE1hdGguYXRhbjIoIHkyIC0geTEseDIgLSB4MSApIC8gTWF0aC5QSSAqIDE4MDtcclxuICAgIGxldCBkaXN0ID0gR0xPQkFMLndvcmxkLmdldERpc3RhbmNlKCB4MSx5MSx4Mix5MiApO1xyXG5cclxuICAgIGIuc2V0QW5jaG9yUG9pbnQoIDAuNSwwLjUgKTtcclxuICAgIGIuc2V0Um90YXRpb24oIGFuZ2xlICk7XHJcbiAgICBiLnNldENvbG9yTXVsdGlwbGllciggMSwxLDEgKTtcclxuICAgIGIuc2V0UG9zaXRpb24oIHgxLHkxICk7XHJcbiAgICBzZWxmLmFkZENoaWxkKCBiICk7XHJcbiAgICBHTE9CQUwud29ybGQuZW50aXR5TGF5ZXIuYWRkQ2hpbGQoIHNlbGYgKTtcclxuICAgIHgyID0geDIgLSAoIHgyIC0geDEgKSAvIGRpc3QgKiA2O1xyXG4gICAgeTIgPSB5MiAtICggeTIgLSB5MSApIC8gZGlzdCAqIDY7XHJcbiAgICBTb3VuZC5wbGF5U291bmQoIFwic291bmQvYm93X3Nob290LndhdlwiICk7XHJcbiAgICBsZXQgZHVyID0gZGlzdCAqIDI7XHJcblxyXG4gICAgbmV3IFR3ZWVuKCBiLGR1cix7IHg6IHgyLHk6IHkyIH0seyBlYXNlOiBlYXNpbmcub3V0Q3ViaWMgfSApXHJcbiAgICAgICAgLm9uQ29tcGxldGUoICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKCAhaXNIaXQgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggXCLtmZTsgrTtipXquYBcIiApO1xyXG4gICAgICAgICAgICAgICAgbmV3IFR3ZWVuKCBiLCAyMDAsIHtcclxuICAgICAgICAgICAgICAgICAgICB4OiAgICAgICAgeDIgKyBVdGlscy5yYW5kb20oIC0xNSwgMTUgKSxcclxuICAgICAgICAgICAgICAgICAgICB5OiAgICAgICAgeTIgKyBVdGlscy5yYW5kb20oIC0xNSwgMTUgKSxcclxuICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogYW5nbGUgKyAzNjBcclxuICAgICAgICAgICAgICAgIH0sIHsgZWFzZTogZWFzaW5nLm91dEN1YmljIH0gKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNvbXBsZXRlUmVtb3ZlRnJvbVBhcmVudCgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYi5yZW1vdmVGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ICk7XHJcbiAgICBpZiAoICFpc0hpdCApIHtcclxuICAgICAgICBkdXIgPSBkdXIgKyAyMDA7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIFtkdXJdO1xyXG59O1xyXG5cclxuX0ZUW1wic3dpbmdcIl0gPSAoIHNlbGYseDEseTEseDIseTIsaXNIaXQsd2VhcG9uSW1hZ2UsYXR0YWNrZXIgKSA9PiB7XHJcbiAgICBsZXQgYiA9IG5ldyBCaXRtYXAoIG5ldyBUZXh0dXJlKCBcInN3b3JkU3dpbmcucG5nXCIsdHJ1ZSx7IGZvcm1hdDogVGV4dHVyZUJhc2UuUkdCQTU1NTEgfSApICk7XHJcbiAgICBsZXQgYW5nbGUgPSAoIE1hdGguYXRhbjIoIHkyIC0geTEseDIgLSB4MSApICkgLyBNYXRoLlBJICogMTgwO1xyXG4gICAgbGV0IGRpc3QgPSBHTE9CQUwud29ybGQuZ2V0RGlzdGFuY2UoIHgxLHkxLHgyLHkyICk7XHJcblxyXG4gICAgYi5zZXRBbmNob3JQb2ludCggLTAuNCwwLjUgKTtcclxuICAgIHNlbGYuYWRkQ2hpbGQoIGIgKTtcclxuICAgIGIuc2V0Um90YXRpb24oIGFuZ2xlICsgNzAgKTtcclxuICAgIGIuc2V0Q29sb3JNdWx0aXBsaWVyKCAxLDEsMSApO1xyXG4gICAgYi5zZXRQb3NpdGlvbiggeDEseTEgKTtcclxuICAgIGIuc2V0QWxwaGEoIDAuNSApO1xyXG4gICAgc2VsZi5hZGRDaGlsZCggYiApO1xyXG4gICAgR0xPQkFMLndvcmxkLmVudGl0eUxheWVyLmFkZENoaWxkKCBzZWxmICk7XHJcbiAgICBTb3VuZC5wbGF5U291bmQoIFwic291bmQvc3dpbmdfMC53YXZcIiApO1xyXG4gICAgbGV0IGR1ciA9IDMwMDtcclxuICAgIGxldCBoaXREdXI7XHJcblxyXG4gICAgaWYgKCBhdHRhY2tlci5fX2VmZmVjdFR3ZWVuICkge1xyXG4gICAgICAgIGF0dGFja2VyLl9fZWZmZWN0VHdlZW4uc3RvcCgpO1xyXG4gICAgICAgIGF0dGFja2VyLnJlc2V0UG9zaXRpb25BbmRDb2xvcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBhdHRYID0geDEgKyAoIHgyIC0geDEgKSAvIGRpc3QgKiA1O1xyXG4gICAgbGV0IGF0dFkgPSB5MSArICggeTIgLSB5MSApIC8gZGlzdCAqIDU7XHJcbiAgICBsZXQgYXR0WDAgPSBhdHRhY2tlci5nZXRYKCk7XHJcbiAgICBsZXQgYXR0WTAgPSBhdHRhY2tlci5nZXRZKCk7XHJcblxyXG4gICAgaGl0RHVyID0gMTAwO1xyXG4gICAgbGV0IHR3ID0gbmV3IFR3ZWVuKCBhdHRhY2tlciwxMDAseyB4OiBhdHRYLHk6IGF0dFkgfSx7IGVhc2U6IGVhc2luZy5pbkJhY2sgfSApXHJcbiAgICAgICAgLm9uQ29tcGxldGUoICgpID0+IHtcclxuICAgICAgICAgICAgbmV3IFR3ZWVuKCBhdHRhY2tlciwgZHVyIC0gMTAwLCB7IHg6IGF0dFgwLCB5OiBhdHRZMCB9LCB7IGVhc2U6IGVhc2luZy5pbkN1YmljIH0gKTtcclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgYXR0YWNrZXIuX19lZmZlY3RUd2VlbiA9IHR3O1xyXG4gICAgbGV0IHdlYXBvblNwciA9IG5ldyBTcHJpdGUoKTtcclxuXHJcbiAgICB3ZWFwb25JbWFnZS5zZXRSb3RhdGlvbiggMTM1ICk7XHJcbiAgICB3ZWFwb25JbWFnZS5zZXRQb3NpdGlvbiggMTIsMCApO1xyXG4gICAgd2VhcG9uU3ByLmFkZENoaWxkKCB3ZWFwb25JbWFnZSApO1xyXG4gICAgc2VsZi5hZGRDaGlsZCggd2VhcG9uU3ByICk7XHJcbiAgICB3ZWFwb25TcHIuc2V0Um90YXRpb24oIGFuZ2xlICsgMTYwICk7XHJcbiAgICB3ZWFwb25TcHIuc2V0UG9zaXRpb24oIHgxLHkxICk7XHJcbiAgICBuZXcgVHdlZW4oIGIsZHVyLHsgYmx1ZU11bHRpcGxpZXI6IDEscm90YXRpb246IGFuZ2xlIC0gOTAsYWxwaGE6IDAgfSx7IGVhc2U6IGVhc2luZy5vdXRDdWJpYyB9IClcclxuICAgICAgICAub25Db21wbGV0ZVJlbW92ZUZyb21QYXJlbnQoKTtcclxuICAgIG5ldyBUd2Vlbiggd2VhcG9uU3ByLGR1ciAtIDEwMCx7IHJvdGF0aW9uOiBhbmdsZSAtIDEzMCB9LHsgZWFzZTogZWFzaW5nLm91dEN1YmljIH0gKVxyXG4gICAgICAgIC5vbkNvbXBsZXRlKCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG5ldyBUd2Vlbiggd2VhcG9uU3ByLCAxMDAsIHsgcm90YXRpb246IGFuZ2xlIC0gMTUwLCBzY2FsZVg6IDAuNSwgc2NhbGVZOiAwLjUgfSApXHJcbiAgICAgICAgICAgICAgICAub25Db21wbGV0ZVJlbW92ZUZyb21QYXJlbnQoKTtcclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgcmV0dXJuIFtkdXIsaGl0RHVyXTtcclxufTtcclxuXHJcbl9GVFtcInBpY2theGVcIl0gPSAoIHNlbGYseDEseTEseDIseTIsaXNIaXQsd2VhcG9uSW1hZ2UsYXR0YWNrZXIgKSA9PiB7XHJcbiAgICBsZXQgYW5nbGUgPSAoIE1hdGguYXRhbjIoIHkyIC0geTEsIHgyIC0geDEgKSApIC8gTWF0aC5QSSAqIDE4MDtcclxuICAgIGxldCBkaXN0ID0gR0xPQkFMLndvcmxkLmdldERpc3RhbmNlKCB4MSx5MSx4Mix5MiApO1xyXG4gICAgbGV0IGRpclggPSB4MiAtIHgxID4gMCA/IDEgOiAtMTtcclxuXHJcbiAgICBHTE9CQUwud29ybGQuZW50aXR5TGF5ZXIuYWRkQ2hpbGQoIHNlbGYgKTtcclxuICAgIFNvdW5kLnBsYXlTb3VuZCggXCJzb3VuZC9zd2luZ18wLndhdlwiICk7XHJcbiAgICBsZXQgZHVyID0gNDAwO1xyXG4gICAgbGV0IGhpdER1cjtcclxuXHJcbiAgICBpZiAoIGF0dGFja2VyLl9fZWZmZWN0VHdlZW4gKSB7XHJcbiAgICAgICAgYXR0YWNrZXIuX19lZmZlY3RUd2Vlbi5zdG9wKCk7XHJcbiAgICAgICAgYXR0YWNrZXIucmVzZXRQb3NpdGlvbkFuZENvbG9yKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGF0dFggPSB4MSArICggeDIgLSB4MSApIC8gZGlzdCAqIDU7XHJcbiAgICBsZXQgYXR0WSA9IHkxICsgKCB5MiAtIHkxICkgLyBkaXN0ICogNTtcclxuICAgIGxldCBhdHRYMCA9IGF0dGFja2VyLmdldFgoKTtcclxuICAgIGxldCBhdHRZMCA9IGF0dGFja2VyLmdldFkoKTtcclxuXHJcbiAgICBoaXREdXIgPSBkdXIgLSAxMDA7XHJcbiAgICBsZXQgdHcgPSBuZXcgVHdlZW4oIGF0dGFja2VyLDEwMCx7IHg6IGF0dFgseTogYXR0WSB9LHsgZWFzZTogZWFzaW5nLmluQmFjayB9IClcclxuICAgICAgICAub25Db21wbGV0ZSggKCkgPT4ge1xyXG4gICAgICAgICAgICBuZXcgVHdlZW4oIGF0dGFja2VyLCBkdXIgLSAxMDAsIHsgeDogYXR0WDAsIHk6IGF0dFkwIH0sIHsgZWFzZTogZWFzaW5nLmluQ3ViaWMgfSApO1xyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICBhdHRhY2tlci5fX2VmZmVjdFR3ZWVuID0gdHc7XHJcbiAgICBsZXQgd2VhcG9uU3ByID0gbmV3IFNwcml0ZSgpO1xyXG5cclxuICAgIHdlYXBvbkltYWdlLnNldFJvdGF0aW9uKCAxMzUgKTtcclxuICAgIHdlYXBvbkltYWdlLnNldFBvc2l0aW9uKCAxMiwwICk7XHJcbiAgICB3ZWFwb25TcHIuYWRkQ2hpbGQoIHdlYXBvbkltYWdlICk7XHJcbiAgICBzZWxmLmFkZENoaWxkKCB3ZWFwb25TcHIgKTtcclxuICAgIHdlYXBvblNwci5zZXRSb3RhdGlvbiggYW5nbGUgLSAyMDAgKiBkaXJYICk7XHJcbiAgICB3ZWFwb25TcHIuc2V0UG9zaXRpb24oIHgxLHkxICk7XHJcbiAgICBuZXcgVHdlZW4oIHdlYXBvblNwcixkdXIgLSAxMDAseyByb3RhdGlvbjogYW5nbGUgKyA1ICogZGlyWCx4OiB4MSArIDIgKiBkaXJYLHk6IHkxICsgNSB9LHsgZWFzZTogZWFzaW5nLmluQ3ViaWMgfSApXHJcbiAgICAgICAgLm9uQ29tcGxldGUoICgpID0+IHtcclxuICAgICAgICAgICAgbmV3IFR3ZWVuKCB3ZWFwb25TcHIsMTAwLHsgcm90YXRpb246IGFuZ2xlICsgNSAqIGRpclgseTogeTEgfSApXHJcbiAgICAgICAgICAgICAgICAub25Db21wbGV0ZVJlbW92ZUZyb21QYXJlbnQoKTtcclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgcmV0dXJuIFtkdXIsaGl0RHVyXTtcclxufTtcclxuXHJcblxyXG5fRlRbXCJzdGFiXCJdID0gKCBzZWxmLHgxLHkxLHgyLHkyLGlzSGl0LHdlYXBvbkltYWdlLGF0dGFja2VyICkgPT4ge1xyXG4gICAgbGV0IGFuZ2xlID0gKCBNYXRoLmF0YW4yKCB5MiAtIHkxLCB4MiAtIHgxICkgKSAvIE1hdGguUEkgKiAxODA7XHJcbiAgICBsZXQgZGlzdCA9IEdMT0JBTC53b3JsZC5nZXREaXN0YW5jZSggeDEseTEseDIseTIgKTtcclxuXHJcbiAgICBHTE9CQUwud29ybGQuZW50aXR5TGF5ZXIuYWRkQ2hpbGQoIHNlbGYgKTtcclxuICAgIFNvdW5kLnBsYXlTb3VuZCggXCJzb3VuZC9zd2luZ18wLndhdlwiICk7XHJcbiAgICBsZXQgZHVyID0gMzAwO1xyXG4gICAgbGV0IGhpdER1cjtcclxuICAgIGxldCB3ZWFwb25TcHIgPSBuZXcgU3ByaXRlKCk7XHJcblxyXG4gICAgd2VhcG9uSW1hZ2Uuc2V0Um90YXRpb24oIDEzNSApO1xyXG4gICAgd2VhcG9uSW1hZ2Uuc2V0UG9zaXRpb24oIDEyLDAgKTtcclxuICAgIHdlYXBvblNwci5hZGRDaGlsZCggd2VhcG9uSW1hZ2UgKTtcclxuICAgIHNlbGYuYWRkQ2hpbGQoIHdlYXBvblNwciApO1xyXG4gICAgd2VhcG9uU3ByLnNldFJvdGF0aW9uKCBhbmdsZSApO1xyXG4gICAgd2VhcG9uU3ByLnNldFBvc2l0aW9uKCB4MSx5MSApO1xyXG4gICAgbGV0IHggPSB4MSArICggeDIgLSB4MSApIC8gZGlzdCAqIDM7XHJcbiAgICBsZXQgeSA9IHkxICsgKCB5MiAtIHkxICkgLyBkaXN0ICogMztcclxuXHJcbiAgICBpZiAoIGF0dGFja2VyLl9fZWZmZWN0VHdlZW4gKSB7XHJcbiAgICAgICAgYXR0YWNrZXIuX19lZmZlY3RUd2Vlbi5zdG9wKCk7XHJcbiAgICAgICAgYXR0YWNrZXIucmVzZXRQb3NpdGlvbkFuZENvbG9yKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGF0dFggPSB4MSArICggeDIgLSB4MSApIC8gZGlzdCAqIDU7XHJcbiAgICBsZXQgYXR0WSA9IHkxICsgKCB5MiAtIHkxICkgLyBkaXN0ICogNTtcclxuICAgIGxldCBhdHRYMCA9IGF0dGFja2VyLmdldFgoKTtcclxuICAgIGxldCBhdHRZMCA9IGF0dGFja2VyLmdldFkoKTtcclxuXHJcbiAgICBoaXREdXIgPSAxMDA7XHJcbiAgICBsZXQgdHcgPSBuZXcgVHdlZW4oIGF0dGFja2VyLDEwMCx7IHg6IGF0dFgseTogYXR0WSB9LHsgZWFzZTogZWFzaW5nLmluQmFjayB9IClcclxuICAgICAgICAub25Db21wbGV0ZSggKCkgPT4ge1xyXG4gICAgICAgICAgICBuZXcgVHdlZW4oIGF0dGFja2VyLGR1ciAtIDEwMCx7IHg6IGF0dFgwLHk6IGF0dFkwIH0seyBlYXNlOiBlYXNpbmcuaW5DdWJpYyB9ICk7XHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgIGF0dGFja2VyLl9fZWZmZWN0VHdlZW4gPSB0dztcclxuICAgIG5ldyBUd2Vlbiggd2VhcG9uU3ByLGR1ciAtIDEwMCx7IHg6IHggKyAoIHkyID09IHkxID8gMCA6IDMgKSx5OiB5IH0seyBlYXNlOiBlYXNpbmcub3V0Qm91bmNlIH0gKVxyXG4gICAgICAgIC5vbkNvbXBsZXRlKCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG5ldyBUd2Vlbiggd2VhcG9uU3ByLDEwMCx7IHg6IHgxICsgKCB5MiA9PSB5MSA/IDAgOiAzICkseTogeTEscm90YXRpb246IGFuZ2xlLHNjYWxlWDogMC41LHNjYWxlWTogMC41IH0gKVxyXG4gICAgICAgICAgICAgICAgLm9uQ29tcGxldGVSZW1vdmVGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgIHJldHVybiBbZHVyLGhpdER1cl07XHJcbn07XHJcblxyXG5fRlRbXCJoYW5kXCJdID0gKCBzZWxmLHgxLHkxLHgyLHkyLGlzSGl0LHdlYXBvbkltYWdlLGF0dGFja2VyICkgPT4ge1xyXG4gICAgbGV0IGFuZ2xlID0gKCBNYXRoLmF0YW4yKCB5MiAtIHkxLCB4MiAtIHgxICkgKSAvIE1hdGguUEkgKiAxODA7XHJcbiAgICBsZXQgZGlzdCA9IEdMT0JBTC53b3JsZC5nZXREaXN0YW5jZSggeDEseTEseDIseTIgKTtcclxuXHJcbiAgICBHTE9CQUwud29ybGQuZW50aXR5TGF5ZXIuYWRkQ2hpbGQoIHNlbGYgKTtcclxuICAgIFNvdW5kLnBsYXlTb3VuZCggXCJzb3VuZC9zd2luZ18wLndhdlwiICk7XHJcbiAgICBsZXQgZHVyID0gMzAwO1xyXG4gICAgbGV0IGhpdER1cjtcclxuICAgIGxldCB3ZWFwb25TcHIgPSBuZXcgU3ByaXRlKCk7XHJcblxyXG4gICAgd2VhcG9uSW1hZ2Uuc2V0Um90YXRpb24oIDkwICk7XHJcbiAgICB3ZWFwb25JbWFnZS5zZXRQb3NpdGlvbiggMTIsMCApO1xyXG4gICAgd2VhcG9uSW1hZ2Uuc2V0U2NhbGUoIDAuNSApO1xyXG4gICAgd2VhcG9uU3ByLmFkZENoaWxkKCB3ZWFwb25JbWFnZSApO1xyXG4gICAgc2VsZi5hZGRDaGlsZCggd2VhcG9uU3ByICk7XHJcbiAgICB3ZWFwb25TcHIuc2V0Um90YXRpb24oIGFuZ2xlICk7XHJcbiAgICB3ZWFwb25TcHIuc2V0UG9zaXRpb24oIHgxLHkxICk7XHJcbiAgICBsZXQgeCA9IHgxICsgKCB4MiAtIHgxICkgLyBkaXN0ICogMiArICggeTIgPT0geTEgPyAwIDogMyApO1xyXG4gICAgbGV0IHkgPSB5MSArICggeTIgLSB5MSApIC8gZGlzdCAqIDI7XHJcblxyXG4gICAgaWYgKCBhdHRhY2tlci5fX2VmZmVjdFR3ZWVuICkge1xyXG4gICAgICAgIGF0dGFja2VyLl9fZWZmZWN0VHdlZW4uc3RvcCgpO1xyXG4gICAgICAgIGF0dGFja2VyLnJlc2V0UG9zaXRpb25BbmRDb2xvcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBhdHRYID0geDEgKyAoIHgyIC0geDEgKSAvIGRpc3QgKiA1O1xyXG4gICAgbGV0IGF0dFkgPSB5MSArICggeTIgLSB5MSApIC8gZGlzdCAqIDU7XHJcbiAgICBsZXQgYXR0WDAgPSBhdHRhY2tlci5nZXRYKCk7XHJcbiAgICBsZXQgYXR0WTAgPSBhdHRhY2tlci5nZXRZKCk7XHJcblxyXG4gICAgaGl0RHVyID0gMTAwO1xyXG4gICAgbGV0IHR3ID0gbmV3IFR3ZWVuKCBhdHRhY2tlciwxMDAseyB4OiBhdHRYLHk6IGF0dFkgfSx7IGVhc2U6IGVhc2luZy5pbkJhY2sgfSApXHJcbiAgICAgICAgLm9uQ29tcGxldGUoICgpID0+IHtcclxuICAgICAgICAgICAgbmV3IFR3ZWVuKCBhdHRhY2tlcixkdXIgLSAxMDAseyB4OiBhdHRYMCx5OiBhdHRZMCB9LHsgZWFzZTogZWFzaW5nLmluQ3ViaWMgfSApO1xyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICBhdHRhY2tlci5fX2VmZmVjdFR3ZWVuID0gdHc7XHJcbiAgICBuZXcgVHdlZW4oIHdlYXBvblNwcixkdXIgLSAxMDAseyB4OiB4LHk6IHkgfSx7IGVhc2U6IGVhc2luZy5pbk91dEJhY2sgfSApXHJcbiAgICAgICAgLm9uQ29tcGxldGUoICgpID0+IHtcclxuICAgICAgICAgICAgbmV3IFR3ZWVuKCB3ZWFwb25TcHIsMTAwLHsgeDogeDEseTogeTEgfSx7IGVhc2U6IGVhc2luZy5pbkN1YmljIH0gKVxyXG4gICAgICAgICAgICAgICAgLm9uQ29tcGxldGVSZW1vdmVGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgIHJldHVybiBbZHVyLGhpdER1cl07XHJcbn07XHJcblxyXG5fRlRbXCJjbGF3XCJdID0gKCBzZWxmLHgxLHkxLHgyLHkyLGlzSGl0LHdlYXBvbkltYWdlLGF0dGFja2VyICkgPT4ge1xyXG4gICAgbGV0IGFuZ2xlID0gKCBNYXRoLmF0YW4yKCB5MiAtIHkxLCB4MiAtIHgxICkgKSAvIE1hdGguUEkgKiAxODA7XHJcbiAgICBsZXQgZGlzdCA9IEdMT0JBTC53b3JsZC5nZXREaXN0YW5jZSggeDEseTEseDIseTIgKTtcclxuXHJcbiAgICBHTE9CQUwud29ybGQuZW50aXR5TGF5ZXIuYWRkQ2hpbGQoIHNlbGYgKTtcclxuICAgIFNvdW5kLnBsYXlTb3VuZCggXCJzb3VuZC9zd2luZ18wLndhdlwiICk7XHJcbiAgICBsZXQgZHVyID0gMzAwO1xyXG4gICAgbGV0IGhpdER1cjtcclxuICAgIGxldCBiID0gbmV3IEJpdG1hcCggbmV3IFRleHR1cmUoIFwiQ2xhdy5wbmdcIixmYWxzZSx7IGZvcm1hdDogVGV4dHVyZUJhc2UuUkdCQTU1NTEgfSApICk7XHJcblxyXG4gICAgYi5zZXRBbmNob3JQb2ludCggMC41LDAuNSApO1xyXG4gICAgYi5zZXRTY2FsZSggMC44ICk7XHJcbiAgICBiLnNldE92ZXJyaWRlQ29sb3IoIDB4ZmYwMDAwICk7XHJcbiAgICBiLnNldFBvc2l0aW9uKCB4MiArIDEwLHkyIC0gMTAgKTtcclxuICAgIGxldCB4ID0geDEgKyAoIHgyIC0geDEgKSAvIGRpc3QgKiAxO1xyXG4gICAgbGV0IHkgPSB5MSArICggeTIgLSB5MSApIC8gZGlzdCAqIDE7XHJcblxyXG4gICAgaWYgKCBhdHRhY2tlci5fX2VmZmVjdFR3ZWVuICkge1xyXG4gICAgICAgIGF0dGFja2VyLl9fZWZmZWN0VHdlZW4uc3RvcCgpO1xyXG4gICAgICAgIGF0dGFja2VyLnJlc2V0UG9zaXRpb25BbmRDb2xvcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBhdHRYID0geDEgKyAoIHgyIC0geDEgKSAvIGRpc3QgKiA3O1xyXG4gICAgbGV0IGF0dFkgPSB5MSArICggeTIgLSB5MSApIC8gZGlzdCAqIDc7XHJcbiAgICBsZXQgYXR0WDAgPSBhdHRhY2tlci5nZXRYKCk7XHJcbiAgICBsZXQgYXR0WTAgPSBhdHRhY2tlci5nZXRZKCk7XHJcblxyXG4gICAgaGl0RHVyID0gMTAwO1xyXG4gICAgbGV0IHR3ID0gbmV3IFR3ZWVuKCBhdHRhY2tlciwxMDAseyB4OiBhdHRYLHk6IGF0dFkgfSx7IGVhc2U6IGVhc2luZy5pbk91dEJhY2sgfSApXHJcbiAgICAgICAgLm9uQ29tcGxldGUoICgpID0+IHtcclxuICAgICAgICAgICAgc2VsZi5hZGRDaGlsZCggYiApO1xyXG4gICAgICAgICAgICBuZXcgVHdlZW4oIGIsMTAwLHsgeDogeDIgLSA1LHk6IHkyICsgNSxhbHBoYTogMC41IH0seyBlYXNlOiBlYXNpbmcub3V0Q3ViaWMgfSApXHJcbiAgICAgICAgICAgICAgICAub25Db21wbGV0ZVJlbW92ZUZyb21QYXJlbnQoKTtcclxuICAgICAgICAgICAgbmV3IFR3ZWVuKCBhdHRhY2tlcixkdXIgLSAxMDAseyB4OiBhdHRYMCx5OiBhdHRZMCB9LHsgZWFzZTogZWFzaW5nLmluQ3ViaWMgfSApO1xyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICBhdHRhY2tlci5fX2VmZmVjdFR3ZWVuID0gdHc7XHJcblxyXG4gICAgcmV0dXJuIFtkdXIsaGl0RHVyXTtcclxufTtcclxuXHJcbl9GVFtcImRhbWFnZVwiXSA9ICggc2VsZix4MSx5MSx4Mix5Mix0YXJnZXQsYXR0YWNrZXIsaGl0RHVyICkgPT4ge1xyXG4gICAgeDIgPSB4MiAhPSBudWxsID8geDIgOiB0YXJnZXQuZ2V0WCgpO1xyXG4gICAgeTIgPSB5MiAhPSBudWxsID8geTIgOiAgdGFyZ2V0LmdldFkoKTtcclxuICAgIHgxID0geDEgIT0gbnVsbCA/IHgxIDogIHgyO1xyXG4gICAgeTEgPSB5MSAhPSBudWxsID8geTEgOiAgeTI7XHJcbiAgICBhdHRhY2tlciA9IGF0dGFja2VyICE9IG51bGwgPyBhdHRhY2tlciA6IHRhcmdldDtcclxuICAgIGhpdER1ciA9IGhpdER1ciB8fCAwO1xyXG4gICAgbGV0IGFuZ2xlID0gKCBNYXRoLmF0YW4yKCB5MiAtIHkxLCB4MiAtIHgxICkgKSAvIE1hdGguUEkgKiAxODA7XHJcbiAgICBsZXQgZGlzdCA9IEdMT0JBTC53b3JsZC5nZXREaXN0YW5jZSggeDEseTEseDIseTIgKTtcclxuXHJcbiAgICBHTE9CQUwud29ybGQuZW50aXR5TGF5ZXIuYWRkQ2hpbGQoIHNlbGYgKTtcclxuICAgIGxldCBkdXIgPSAzMDA7XHJcbiAgICBsZXQgdGFyZ2V0WCA9IHRhcmdldC5nZXRYKCk7XHJcbiAgICBsZXQgdGFyZ2V0WSA9IHRhcmdldC5nZXRZKCk7XHJcbiAgICBsZXQgeCA9IHRhcmdldFggKyAoIHgyIC0geDEgKSAvIGRpc3QgKiAwO1xyXG4gICAgbGV0IHkgPSB0YXJnZXRZICsgKCB5MiAtIHkxICkgLyBkaXN0ICogMDtcclxuXHJcbiAgICBpZiAoIHRhcmdldC5fX2VmZmVjdFR3ZWVuICkge1xyXG4gICAgICAgIHRhcmdldC5fX2VmZmVjdFR3ZWVuLnN0b3AoKTtcclxuICAgICAgICB0YXJnZXQucmVzZXRQb3NpdGlvbkFuZENvbG9yKCk7XHJcbiAgICB9XHJcbiAgICBsZXQgdGljayA9IDA7XHJcblxyXG4gICAgVGltZXIuZGVsYXllZENhbGwoIGhpdER1ciwgKCkgPT4ge1xyXG4gICAgICAgIHRhcmdldC5zZXRPdmVycmlkZUNvbG9yKCAweGZmMDAwMCApO1xyXG4gICAgICAgIHRhcmdldC5zZXRTY2FsZSggMS41ICk7XHJcbiAgICAgICAgbGV0IHR3ID0gbmV3IFR3ZWVuKCB0YXJnZXQsMTAwLHsgY29sb3I6IDB4YTAwMDAwIH0seyBlYXNlOiBlYXNpbmcub3V0Qm91bmNlIH0gKVxyXG4gICAgICAgICAgICAub25DaGFuZ2UoICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5zZXRTY2FsZSggMS41ICsgTWF0aC5mbG9vciggdGljayAvIDIgKSAqIDAuMyApO1xyXG4gICAgICAgICAgICAgICAgdGljayA9ICggdGljayArIDEgKSAlIDQ7XHJcbiAgICAgICAgICAgIH0gKVxyXG4gICAgICAgICAgICAub25Db21wbGV0ZSggKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbmV3IFR3ZWVuKCB0YXJnZXQsZHVyIC0gaGl0RHVyIC0gNTAseyBzY2FsZVg6IDEsc2NhbGVZOiAxLGNvbG9yOiAweGZmZmZmZiB9LHsgZWFzZTogZWFzaW5nLmluQ3ViaWMgfSApO1xyXG4gICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgIHRhcmdldC5fX2VmZmVjdFR3ZWVuID0gdHc7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgcmV0dXJuIFtkdXIsaGl0RHVyXTtcclxufTtcclxuXHJcbl9GVFtcImRlYXRoXCJdID0gKCBzZWxmLHgxLHkxLHgyLHkyLHRhcmdldCxhdHRhY2tlcixoaXREdXIgKSA9PiB7XHJcbiAgICB4MiA9IHgyICE9IG51bGwgPyB4MiA6IHRhcmdldC5nZXRYKCk7XHJcbiAgICB5MiA9IHkyICE9IG51bGwgPyB5MiA6IHRhcmdldC5nZXRZKCk7XHJcbiAgICB4MSA9IHgxICE9IG51bGwgPyB4MSA6IHgyO1xyXG4gICAgeTEgPSB5MSAhPSBudWxsID8geTEgOiB5MjtcclxuICAgIGF0dGFja2VyID0gYXR0YWNrZXIgIT0gbnVsbCA/IGF0dGFja2VyIDogdGFyZ2V0O1xyXG4gICAgaGl0RHVyID0gaGl0RHVyIHx8IDA7XHJcbiAgICBsZXQgYW5nbGUgPSAoIE1hdGguYXRhbjIoIHkyIC0geTEsIHgyIC0geDEgKSApIC8gTWF0aC5QSSAqIDE4MDtcclxuICAgIGxldCBkaXN0ID0gR0xPQkFMLndvcmxkLmdldERpc3RhbmNlKCB4MSx5MSx4Mix5MiApO1xyXG5cclxuICAgIEdMT0JBTC53b3JsZC5lbnRpdHlMYXllci5hZGRDaGlsZCggc2VsZiApO1xyXG4gICAgbGV0IGR1ciA9IDEwMDA7XHJcbiAgICBsZXQgdGFyZ2V0WCA9IHRhcmdldC5nZXRYKCk7XHJcbiAgICBsZXQgdGFyZ2V0WSA9IHRhcmdldC5nZXRZKCk7XHJcbiAgICBsZXQgc3BlZWQgPSBVdGlscy5yYW5kb20oIDEwLDE0ICk7XHJcblxyXG4gICAgYW5nbGUgPSBhbmdsZSArIFV0aWxzLnJhbmRvbSggLTUsNSApO1xyXG4gICAgbGV0IHggPSB0YXJnZXRYICsgTWF0aC5jb3MoICggYW5nbGUgLyAxODAgKiBNYXRoLlBJICkgKSAqIHNwZWVkO1xyXG4gICAgbGV0IHkgPSB0YXJnZXRZICsgTWF0aC5zaW4oICggYW5nbGUgLyAxODAgKiBNYXRoLlBJICkgKSAqIHNwZWVkICsgNTtcclxuXHJcbiAgICBpZiAoIHRhcmdldC5fX2VmZmVjdFR3ZWVuICkge1xyXG4gICAgICAgIHRhcmdldC5fX2VmZmVjdFR3ZWVuLnN0b3AoKTtcclxuICAgICAgICB0YXJnZXQucmVzZXRQb3NpdGlvbkFuZENvbG9yKCk7XHJcbiAgICB9XHJcbiAgICBsZXQgdGFyZ2V0QW5nbGUgPSBNYXRoLnNpZ24oIHgyIC0geDEgKSAqIDkwO1xyXG5cclxuICAgIGlmICggeTIgLSB5MSA+IDAgKSB7XHJcbiAgICAgICAgdGFyZ2V0QW5nbGUgPSAxODA7XHJcbiAgICB9XHJcbiAgICBUaW1lci5kZWxheWVkQ2FsbCggaGl0RHVyLCAoKSA9PiB7XHJcbiAgICAgICAgdGFyZ2V0LnNldE92ZXJyaWRlQ29sb3IoIDB4ZmYwMDAwICk7XHJcbiAgICAgICAgLy90YXJnZXQuc2V0U2NhbGUoMS41KTtcclxuICAgICAgICB0YXJnZXQuc2V0Um90YXRpb24oIHRhcmdldEFuZ2xlICk7XHJcbiAgICAgICAgdGFyZ2V0LnNldFBvc2l0aW9uKCB0YXJnZXRYLHRhcmdldFkgKyA1ICk7XHJcbiAgICAgICAgaWYgKCB0YXJnZXQuX19hbmltYXRpb25UaW1lciApIHtcclxuICAgICAgICAgICAgdGFyZ2V0Ll9fYW5pbWF0aW9uVGltZXIuc3RvcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgdHcgPSBuZXcgVHdlZW4oIHRhcmdldCwyMDAseyBjb2xvcjogMHhhMDAwMDAseDogeCx5OiB5IH0seyBlYXNlOiBlYXNpbmcub3V0Q3ViaWMgfSApXHJcbiAgICAgICAgICAgIC5vbkNvbXBsZXRlKCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBuZXcgVHdlZW4oIHRhcmdldCxkdXIgLSBoaXREdXIgLSA1MCx7IGFscGhhOiAwIH0seyBlYXNlOiBlYXNpbmcuaW5DdWJpYyB9ICk7XHJcbiAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgdGFyZ2V0Ll9fZWZmZWN0VHdlZW4gPSB0dztcclxuICAgIH0gKTtcclxuXHJcbiAgICByZXR1cm4gW2R1cixoaXREdXJdO1xyXG59O1xyXG5cclxuX0ZUW1wiYm9vbVwiXSA9ICggc2VsZix4LHksc2NhbGUsZHVyLGhpdER1cixjb2xvciApID0+IHtcclxuICAgIGhpdER1ciA9IGhpdER1ciB8fCAwO1xyXG4gICAgR0xPQkFMLndvcmxkLmVudGl0eUxheWVyLmFkZENoaWxkKCBzZWxmICk7XHJcbiAgICBsZXQgdGV4ID0gbmV3IFRleHR1cmUoIFwiYm9vbS5wbmdcIixmYWxzZSx7IGZvcm1hdDogVGV4dHVyZUJhc2UuUkdCQTU1NTEgfSApO1xyXG4gICAgbGV0IGIgPSBuZXcgQml0bWFwKCB0ZXggKTtcclxuICAgIGxldCBzYzEgPSBzY2FsZSAvICggdGV4LndpZHRoIC8gMiApO1xyXG5cclxuICAgIGIuc2V0QW5jaG9yUG9pbnQoIDAuNSwwLjUgKTtcclxuICAgIGIuc2V0T3ZlcnJpZGVDb2xvciggY29sb3IgIT0gbnVsbCA/IGNvbG9yIDogMHhmZmZmZmYgKTtcclxuICAgIGIuc2V0UG9zaXRpb24oIHgseSApO1xyXG4gICAgYi5zZXRCbGVuZE1vZGUoIFNwcml0ZS5CbGVuZE1vZGVzLkFERCApO1xyXG4gICAgVGltZXIuZGVsYXllZENhbGwoIGhpdER1ciwgKCkgPT4ge1xyXG4gICAgICAgIHNlbGYuYWRkQ2hpbGQoIGIgKTtcclxuICAgICAgICBiLnNldFNjYWxlKCAwLjAgKTtcclxuICAgICAgICBuZXcgVHdlZW4oIGIsZHVyICogMC42LHsgc2NhbGVYOiBzYzEgKiAwLjk1LHNjYWxlWTogc2MxICogMC45NSxhbHBoYTogMC40IH0seyBlYXNlOiBlYXNpbmcub3V0Q2lyY3VsYXIgfSApXHJcbiAgICAgICAgICAgIC5vbkNvbXBsZXRlKCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBuZXcgVHdlZW4oIGIsZHVyICogMC40LHsgc2NhbGVYOiBzYzEsc2NhbGVZOiBzYzEsYWxwaGE6IDAuMCB9LHsgZWFzZTogZWFzaW5nLm91dEN1YmljIH0gKTtcclxuICAgICAgICAgICAgfSApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIHJldHVybiBbZHVyLGhpdER1cl07XHJcbn07XHJcblxyXG4vLyDtlITrno3snYQg67aA7IiY64qUIOydtO2Ome2KuFxyXG4vLyDtlbTri7kg7ZSE656N7J2066+47KeA7J2YIDEz67KIfjE267KI6rmM7KeA64qUIO2MjO2LsO2BtOydtOudvOqzoCDqsIDsoJXtlZzri6QuXHJcbl9GVFtcImJyZWFrUHJvcFwiXSA9ICggc2VsZix4MSx5MSx4Mix5Mix0YXJnZXQsYXR0YWNrZXIsaGl0RHVyICkgPT4ge1xyXG4gICAgeDIgPSB4MiAhPSBudWxsID8geDIgOiB0YXJnZXQuZ2V0WCgpO1xyXG4gICAgeTIgPSB5MiAhPSBudWxsID8geTIgOiB0YXJnZXQuZ2V0WSgpO1xyXG4gICAgeDEgPSB4MSAhPSBudWxsID8geDEgOiB4MjtcclxuICAgIHkxID0geTEgIT0gbnVsbCA/IHkxIDogeTI7XHJcbiAgICBhdHRhY2tlciA9IGF0dGFja2VyICE9IG51bGwgPyBhdHRhY2tlciA6IHRhcmdldDtcclxuICAgIGhpdER1ciA9IGhpdER1ciB8fCAwO1xyXG4gICAgbGV0IGFuZ2xlID0gKCBNYXRoLmF0YW4yKCB5MiAtIHkxLCB4MiAtIHgxICkgKSAvIE1hdGguUEkgKiAxODA7XHJcbiAgICBsZXQgZGlzdCA9IEdMT0JBTC53b3JsZC5nZXREaXN0YW5jZSggeDEseTEseDIseTIgKTtcclxuXHJcbiAgICBHTE9CQUwud29ybGQuZW50aXR5TGF5ZXIuYWRkQ2hpbGQoIHNlbGYgKTtcclxuICAgIGxldCB0YXJnZXRYID0gdGFyZ2V0LmdldFgoKTtcclxuICAgIGxldCB0YXJnZXRZID0gdGFyZ2V0LmdldFkoKTtcclxuICAgIGxldCBkdXIgPSAyMDAwO1xyXG4gICAgbGV0IHNwZWVkID0gVXRpbHMucmFuZG9tKCAxMCwxNCApO1xyXG5cclxuICAgIGFuZ2xlID0gYW5nbGUgKyBVdGlscy5yYW5kb20oIC0yLDIgKTtcclxuICAgIGxldCB4ID0gdGFyZ2V0WCArIE1hdGguY29zKCAoIGFuZ2xlIC8gMTgwICogTWF0aC5QSSApICkgKiBzcGVlZDtcclxuICAgIGxldCB5ID0gdGFyZ2V0WSArIE1hdGguc2luKCAoIGFuZ2xlIC8gMTgwICogTWF0aC5QSSApICkgKiBzcGVlZDtcclxuICAgIGxldCBmeCA9IE1hdGguY29zKCAoIGFuZ2xlIC8gMTgwICogTWF0aC5QSSApICkgKiAxMDtcclxuICAgIGxldCBmeSA9IE1hdGguc2luKCAoIGFuZ2xlIC8gMTgwICogTWF0aC5QSSApICkgKiAxMDtcclxuXHJcbiAgICBpZiAoIHRhcmdldC5fX2VmZmVjdFR3ZWVuICkge1xyXG4gICAgICAgIHRhcmdldC5fX2VmZmVjdFR3ZWVuLnN0b3AoKTtcclxuICAgICAgICB0YXJnZXQucmVzZXRQb3NpdGlvbkFuZENvbG9yKCk7XHJcbiAgICB9XHJcbiAgICBsZXQgbSA9IFtdO1xyXG5cclxuICAgIGlmICggdGFyZ2V0LnByb3BlcnR5LnNsaWNlICE9IGZhbHNlICkge1xyXG4gICAgICAgIFttWzBdLG1bMV0sbVsyXSxtWzNdXSA9IHRhcmdldC5tZXNoLnNsaWNlTWVzaCgpO1xyXG4gICAgfVxyXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgKCB0YXJnZXQucHJvcGVydHkucGFydGljbGUgIT0gbnVsbCA/IHRhcmdldC5wcm9wZXJ0eS5wYXJ0aWNsZSA6IDQgKTsgaSsrICkge1xyXG4gICAgICAgIGxldCBbY29sLHJvd10gPSB0YXJnZXQubWVzaC5nZXRDb2xSb3coKTtcclxuXHJcbiAgICAgICAgbS5wdXNoKCB0YXJnZXQubWVzaC5jbG9uZSggVXRpbHMucmFuZG9tKCAxMywxNiApLHJvdyApICk7XHJcbiAgICB9XHJcbiAgICBsZXQgdCA9IFtdO1xyXG5cclxuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IG0ubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgICAgbGV0IGYxID0gVXRpbHMucmFuZG9tKCAyMDAsMzAwICk7XHJcbiAgICAgICAgbGV0IGYyID0gVXRpbHMucmFuZG9tKCAxMCw0MCApO1xyXG4gICAgICAgIGxldCBoMSA9IFV0aWxzLnJhbmRvbSggLTE0LC0yICk7XHJcbiAgICAgICAgbGV0IGgyID0gVXRpbHMucmFuZG9tKCA0LDcgKTtcclxuXHJcbiAgICAgICAgdC5wdXNoKCBbMCwgZjEsIG1baV0sIHsgeDogWyAwLCBVdGlscy5yYW5kb20oIC0xNSAtIGZ4ICogMywgMTUgKSwgXCJvdXRDdWJpY1wiXSB9XSApO1xyXG4gICAgICAgIHQucHVzaCggWzAsIGYyLCBtW2ldLHsgeTogWyAwLCBoMSwgXCJvdXRDdWJpY1wiIF0gfV0gKTtcclxuICAgICAgICB0LnB1c2goIFtmMiArIDEsIGYyICogMywgbVtpXSwgeyB5OiBbIGgxLCBoMiwgXCJvdXRCb3VuY2VcIl0gfV0gKTtcclxuICAgICAgICB0LnB1c2goIFswLCBmMiAqIDIsIG1baV0sIHsgcm90YXRpb246IFsgMCwgVXRpbHMucmFuZG9tKCAtNzIwLCA3MjAgKSwgXCJvdXRDdWJpY1wiXSB9XSApO1xyXG4gICAgfVxyXG4gICAgVGltZXIuZGVsYXllZENhbGwoIGhpdER1ciwgKCkgPT4ge1xyXG4gICAgICAgIGxldCBtYyA9IG5ldyBNb3ZpZUNsaXAoIHQgKTtcclxuXHJcbiAgICAgICAgc2VsZi5hZGRDaGlsZCggbWMgKTtcclxuICAgICAgICBtYy5zZXRQb3NpdGlvbiggdGFyZ2V0WCx0YXJnZXRZICk7XHJcbiAgICAgICAgdGFyZ2V0LnNldFZpc2libGUoIGZhbHNlICk7XHJcbiAgICAgICAgaWYgKCB0YXJnZXQuX19hbmltYXRpb25UaW1lciApIHtcclxuICAgICAgICAgICAgdGFyZ2V0Ll9fYW5pbWF0aW9uVGltZXIuc3RvcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgdHcgPSBuZXcgVHdlZW4oIG1jLDMwMCx7IHg6IHRhcmdldFggKyBmeCx5OiB0YXJnZXRZICsgZnksc2NhbGVYOiAwLjksc2NhbGVZOiAwLjkgfSx7IGVhc2U6IGVhc2luZy5saW5lYXIgfSApXHJcbiAgICAgICAgICAgIC5vbkNvbXBsZXRlKCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBuZXcgVHdlZW4oIG1jLGR1ciAtIGhpdER1ciAtIDUwLHsgc2NhbGVYOiAxLjAsc2NhbGVZOiAxLjAsYWxwaGE6IDAgfSx7IGVhc2U6IGVhc2luZy5pbkN1YmljIH0gKTtcclxuICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICB0YXJnZXQuX19lZmZlY3RUd2VlbiA9IHR3O1xyXG4gICAgfSApO1xyXG5cclxuICAgIHJldHVybiBbZHVyLGhpdER1cl07XHJcbn07XHJcblxyXG5cclxuX0ZUW1wiaGl0UHJvcFwiXSA9ICggc2VsZix4MSx5MSx4Mix5Mix0YXJnZXQsYXR0YWNrZXIsaGl0RHVyICkgPT4ge1xyXG4gICAgeDIgPSB4MiAhPSBudWxsID8geDIgOiB0YXJnZXQuZ2V0WCgpO1xyXG4gICAgeTIgPSB5MiAhPSBudWxsID8geTIgOiB0YXJnZXQuZ2V0WSgpO1xyXG4gICAgeDEgPSB4MSAhPSBudWxsID8geDEgOiB4MjtcclxuICAgIHkxID0geTEgIT0gbnVsbCA/IHkxIDogeTI7XHJcbiAgICBhdHRhY2tlciA9IGF0dGFja2VyICE9IG51bGwgPyBhdHRhY2tlciA6IHRhcmdldDtcclxuICAgIGhpdER1ciA9IGhpdER1ciB8fCAwO1xyXG4gICAgbGV0IGFuZ2xlID0gKCBNYXRoLmF0YW4yKCB5MiAtIHkxLCB4MiAtIHgxICkgKSAvIE1hdGguUEkgKiAxODA7XHJcbiAgICBsZXQgZGlzdCA9IEdMT0JBTC53b3JsZC5nZXREaXN0YW5jZSggeDEseTEseDIseTIgKTtcclxuXHJcbiAgICBHTE9CQUwud29ybGQuZW50aXR5TGF5ZXIuYWRkQ2hpbGQoIHNlbGYgKTtcclxuICAgIGxldCBkdXIgPSAzMDA7XHJcbiAgICBsZXQgdGFyZ2V0WCA9IHRhcmdldC5nZXRYKCk7XHJcbiAgICBsZXQgdGFyZ2V0WSA9IHRhcmdldC5nZXRZKCk7XHJcbiAgICBsZXQgeCA9IHRhcmdldFggKyAoIHgyIC0geDEgKSAvIGRpc3QgKiAwO1xyXG4gICAgbGV0IHkgPSB0YXJnZXRZICsgKCB5MiAtIHkxICkgLyBkaXN0ICogMDtcclxuXHJcbiAgICBpZiAoIHRhcmdldC5fX2VmZmVjdFR3ZWVuICkge1xyXG4gICAgICAgIHRhcmdldC5fX2VmZmVjdFR3ZWVuLnN0b3AoKTtcclxuICAgICAgICB0YXJnZXQucmVzZXRQb3NpdGlvbkFuZENvbG9yKCk7XHJcbiAgICB9XHJcbiAgICBsZXQgdGljayA9IDA7XHJcblxyXG4gICAgVGltZXIuZGVsYXllZENhbGwoIGhpdER1ciwgKCkgPT4ge1xyXG4gICAgICAgIHRhcmdldC5zZXRPdmVycmlkZUNvbG9yKCAweDgwODA4MCApO1xyXG4gICAgICAgIGxldCB0dyA9IG5ldyBUd2VlbiggdGFyZ2V0LDEwMCx7IGNvbG9yOiAweGZmZmZmZiB9LHsgZWFzZTogZWFzaW5nLm91dEJvdW5jZSB9IClcclxuICAgICAgICAgICAgLm9uQ2hhbmdlKCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQuc2V0WCggeCArIE1hdGguZmxvb3IoIHRpY2sgKSAqIDQgLSAyICk7XHJcbiAgICAgICAgICAgICAgICB0aWNrID0gKCB0aWNrICsgMC41ICkgJSAyO1xyXG4gICAgICAgICAgICB9IClcclxuICAgICAgICAgICAgLm9uQ29tcGxldGUoICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5zZXRYKCB4ICk7XHJcbiAgICAgICAgICAgICAgICBuZXcgVHdlZW4oIHRhcmdldCxkdXIgLSBoaXREdXIgLSA1MCx7IGNvbG9yOiAweGZmZmZmZiB9LHsgZWFzZTogZWFzaW5nLmluQ3ViaWMgfSApO1xyXG4gICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgIHRhcmdldC5fX2VmZmVjdFR3ZWVuID0gdHc7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgcmV0dXJuIFtkdXIsaGl0RHVyXTtcclxufTtcclxuXHJcbiIsImltcG9ydCB7IE1vdmllQ2xpcCwgZWFzaW5nLCBNZXNoLCBUZXh0dXJlUGFjaywgVXRpbHMsIE1hdHJpeCwgU2hhcGUsIFRpbWVyLCBUZXh0RmllbGQsIEV2ZW50LCBFdmVudERpc3BhdGNoZXIsXHJcbiAgICAgICAgIFNwcml0ZSwgU3RhZ2UsIEJpdG1hcCwgVGV4dHVyZSwgVGV4dHVyZUJhc2UsIEFwcGxpY2F0aW9uLCBhcHBsaWNhdGlvbiwgc3RhZ2UgfSBmcm9tIFwiQGVuZ2luZS9mbGF0ZmFzdFwiO1xyXG5cclxuaW1wb3J0IFJhbmRvbSBmcm9tIFwiQGxpYi9yYW5kb21cIjtcclxuaW1wb3J0IEljb25QYWNrIGZyb20gXCJAbGliL2ljb25QYWNrXCI7XHJcblxyXG5pbXBvcnQgR0xPQkFMIGZyb20gXCIuLi9nbG9iYWxcIjtcclxuaW1wb3J0IENPTkZJRyBmcm9tIFwiLi4vY29uZmlnXCI7XHJcblxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJ1ZmYge1xyXG4gICAgY29uc3RydWN0b3IoIHR5cGUsIHBvd2VyLCBjciApIHtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMuY3JlYXR1cmUgPSBjcjtcclxuICAgICAgICB0aGlzLnBvd2VyID0gcG93ZXI7XHJcbiAgICAgICAgY29uc3QgYiA9IG5ldyBJY29uUGFjayggQnVmZi50ZXh0dXJlLCBCdWZmLmRhdGFbdGhpcy50eXBlXS5pY29uQ29sLCBCdWZmLmRhdGFbdGhpcy50eXBlXS5pY29uUm93LCAxNiwgMTYsIEJ1ZmYuZGF0YVt0aGlzLnR5cGVdLmljb25Db2xvciApO1xyXG5cclxuICAgICAgICB0aGlzLmljb24gPSBuZXcgTW92aWVDbGlwKCBbXHJcbiAgICAgICAgICAgIFswLCAzMCwgYiwgeyByZWRNdWx0aXBsaWVyOiBbMSwgMCwgXCJsaW5lYXJcIl0sIGdyZWVuTXVsdGlwbGllcjogWzEsIDAsIFwibGluZWFyXCJdLCBibHVlTXVsdGlwbGllcjogWzEsIDAsIFwibGluZWFyXCJdIH1dLFxyXG4gICAgICAgICAgICBbMCxcImdvdG9cIiwwXVxyXG4gICAgICAgIF0gKTtcclxuICAgICAgICBHTE9CQUwud29ybGQuYWRkTG9nKCBCdWZmLmRhdGFbdGhpcy50eXBlXS5hZGRMb2csIHRoaXMuY3JlYXR1cmVOYW1lKCkgKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5ldyggcG93ZXIgKSB7XHJcbiAgICAgICAgdGhpcy5wb3dlciA9IHBvd2VyO1xyXG4gICAgICAgIEdMT0JBTC53b3JsZC5hZGRMb2coIEJ1ZmYuZGF0YVt0aGlzLnR5cGVdLnJlbmV3TG9nLCB0aGlzLmNyZWF0dXJlTmFtZSgpICk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHN0YXRpYyBhZGRCdWZmKCBjciwgdHlwZSwgcG93ZXIgKSB7XHJcbiAgICAgICAgbGV0IGJ1ZmY7XHJcblxyXG4gICAgICAgIGlmICggY3IuYnVmZnNbdHlwZV0gKSB7XHJcbiAgICAgICAgICAgIGJ1ZmYgPSBjci5idWZmc1t0eXBlXTtcclxuICAgICAgICAgICAgYnVmZi5yZW5ldyggcG93ZXIgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBidWZmID0gbmV3IEJ1ZmYoIHR5cGUsIHBvd2VyLCBjciApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGJ1ZmY7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvY2VzcygpIHtcclxuICAgICAgICBpZiAoIEJ1ZmYuZGF0YVt0aGlzLnR5cGVdLnByb2Nlc3NGdW5jICkge1xyXG4gICAgICAgICAgICBCdWZmLmRhdGFbdGhpcy50eXBlXS5wcm9jZXNzRnVuYyggdGhpcyApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIEJ1ZmYuZGF0YVt0aGlzLnR5cGVdLnJlbW92ZUZ1bmMgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHIgPSBCdWZmLmRhdGFbdGhpcy50eXBlXS5yZW1vdmVGdW5jKCB0aGlzICk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIHIgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRlY3JlYXNlUG93ZXIoKSB7XHJcbiAgICAgICAgdGhpcy5wb3dlciA9IHRoaXMucG93ZXIgLSAxO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5wb3dlciA8PSAwO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZSgpIHtcclxuICAgICAgICBHTE9CQUwud29ybGQuYWRkTG9nKCBCdWZmLmRhdGFbdGhpcy50eXBlXS5yZW1vdmVMb2csIHRoaXMuY3JlYXR1cmVOYW1lKCkgKTtcclxuICAgICAgICB0aGlzLmNyZWF0dXJlLmJ1ZmZzW3RoaXMudHlwZV0gPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dQcm9jZXNzTG9nKCAuLi5hcmdzICkge1xyXG4gICAgICAgIEdMT0JBTC53b3JsZC5hZGRMb2coIEJ1ZmYuZGF0YVt0aGlzLnR5cGVdLnByb2Nlc3NMb2csIC4uLmFyZ3MgKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdHVyZU5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXR1cmUuZ2V0TmFtZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGRhbWFnZSggZG1nICkge1xyXG4gICAgICAgIHRoaXMuY3JlYXR1cmUuZGFtYWdlKCBkbWcsIHRoaXMuY3JlYXR1cmUsIHRoaXMuY3JlYXR1cmUuZ2V0WCgpLCB0aGlzLmNyZWF0dXJlLmdldFkoKSwgMCwgQnVmZi5kYXRhW3RoaXMudHlwZV0ucHJvY2Vzc1NvdW5kICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkJ1ZmYudGV4dHVyZSA9IG5ldyBUZXh0dXJlKCBcImJ1ZmYucG5nXCIsIGZhbHNlLCB7IGZvcm1hdDogVGV4dHVyZUJhc2UuUkdCQTU1NTEgfSApO1xyXG5CdWZmLkZJUkUgPSBcIkZcIjtcclxuQnVmZi5QT0lTT04gPSBcIlBcIjtcclxuQnVmZi5GUk9aRU4gPSBcImZcIjtcclxuQnVmZi5CTElORCA9IFwiQlwiO1xyXG5CdWZmLlNJTEVOQ0UgPSBcIlNcIjtcclxuQnVmZi5TVE9ORSA9IFwiT1wiO1xyXG5CdWZmLkNVUlNFID0gXCJjXCI7XHJcbkJ1ZmYuQkxFU1MgPSBcImJcIjtcclxuQnVmZi5CTEVFRCA9IFwiTFwiO1xyXG5CdWZmLkNPTkZVU0UgPSBcIkNcIjtcclxuQnVmZi5TVFVOID0gXCJUXCI7XHJcbkJ1ZmYuQkVSU0VSSyA9IFwiS1wiO1xyXG5CdWZmLldFQUtFTiA9IFwiV1wiO1xyXG5CdWZmLlNIT0NLID0gXCJFXCI7XHJcblxyXG5CdWZmLmRhdGEgPSB7XHJcblxyXG4gICAgW0J1ZmYuRklSRV06IHtcclxuICAgICAgICBpY29uQ29sOiAgICAxLCBpY29uUm93OiAgICAxLCBpY29uQ29sb3I6ICAweGZmMDAwMCxcclxuICAgICAgICBhZGRMb2c6ICAgICBcIiVz7JeQ6rKMIOu2iOydtCDrtpnsl4jri6QhXCIsXHJcbiAgICAgICAgcmVuZXdMb2c6ICAgXCIlc+yXkOqyjCDrtojsnbQg65iQIOu2meyXiOuLpCFcIixcclxuICAgICAgICByZW1vdmVMb2c6ICBcIiVz7JeQ6rKMIOu2meydgCDrtojsnbQg6rq87KGM64ukIVwiLFxyXG4gICAgICAgIHJlbW92ZUZ1bmM6IGZ1bmN0aW9uICggc2VsZiApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuZGVjcmVhc2VQb3dlcigpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcHJvY2Vzc0xvZzogICBcIiVze+uKlH0g67aI66GcIOyduO2VtCAlZCDrjIDrr7jsp4Drpbwg7J6F7JeI64ukIVwiLFxyXG4gICAgICAgIHByb2Nlc3NTb3VuZDogXCJzb3VuZC9kYW1hZ2VfZmlyZS53YXZcIixcclxuICAgICAgICBwcm9jZXNzRnVuYzogIGZ1bmN0aW9uICggc2VsZiApIHtcclxuICAgICAgICAgICAgY29uc3QgZG1nID0gR0xPQkFMLndvcmxkLnJhbmRvbSggMSwgMyApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zaG93UHJvY2Vzc0xvZyggdGhpcy5jcmVhdHVyZU5hbWUoKSwgZG1nICk7XHJcbiAgICAgICAgICAgIHRoaXMuZGFtYWdlKCBkbWcgKTtcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuICAgIFtCdWZmLlBPSVNPTl06IHtcclxuICAgICAgICBpY29uQ29sOiAgICAyLCBpY29uUm93OiAgICAxLCBpY29uQ29sb3I6ICAweGZmMDBmZixcclxuICAgICAgICBhZGRMb2c6ICAgICBcIiVze+uKlH0g64+F7JeQIOqxuOuguOuLpCFcIixcclxuICAgICAgICByZW5ld0xvZzogICBcIiVze+uKlH0g64+F7JeQIOuYkCDrhbjstpzrkJDri6QhXCIsXHJcbiAgICAgICAgcmVtb3ZlTG9nOiAgXCIlc+ydmCDrqrjsl5DshJwg64+F7J20IOyCrOudvOyhjOuLpCFcIixcclxuICAgICAgICByZW1vdmVGdW5jOiBmdW5jdGlvbiAoIHNlbGYgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBHTE9CQUwud29ybGQucmFuZG9tKCA1ICkgPT0gMTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHByb2Nlc3NMb2c6ICAgXCIlc3vripR9IOuPheycvOuhnCDsnbjtlbQgJWQg64yA66+47KeA66W8IOyeheyXiOuLpCFcIixcclxuICAgICAgICBwcm9jZXNzU291bmQ6IFwic291bmQvZGFtYWdlX3BvaXNvbi53YXZcIixcclxuICAgICAgICBwcm9jZXNzRnVuYzogIGZ1bmN0aW9uICggc2VsZiApIHtcclxuICAgICAgICAgICAgY29uc3QgZG1nID0gR0xPQkFMLndvcmxkLnJhbmRvbSggMSwgMiApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zaG93UHJvY2Vzc0xvZyggdGhpcy5jcmVhdHVyZU5hbWUoKSwgZG1nICk7XHJcbiAgICAgICAgICAgIHRoaXMuZGFtYWdlKCBkbWcgKTtcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuICAgIFtCdWZmLkZST1pFTl06ICB7fSxcclxuICAgIFtCdWZmLkJMSU5EXTogICB7fSxcclxuICAgIFtCdWZmLlNJTEVOQ0VdOiB7fSxcclxuICAgIFtCdWZmLlNUT05FXTogICB7fSxcclxuICAgIFtCdWZmLkNVUlNFXTogICB7fSxcclxuICAgIFtCdWZmLkJMRVNTXTogICB7fSxcclxuICAgIFtCdWZmLkJMRUVEXTogICB7fSxcclxuICAgIFtCdWZmLkNPTkZVU0VdOiB7fSxcclxuICAgIFtCdWZmLlNUVU5dOiAgICB7fSxcclxuICAgIFtCdWZmLkJFUlNFUktdOiB7fSxcclxuICAgIFtCdWZmLldFQUtFTl06ICB7fSxcclxuICAgIFtCdWZmLlNIT0NLXTogICB7fSxcclxuXHJcbn07XHJcblxyXG4iLCJpbXBvcnQgeyBUd2VlbiwgUGl4ZWwsIFV0aWxzLGVhc2luZyxNb3ZpZUNsaXAsVGV4dHVyZSwgVGV4dHVyZUJhc2UsIFNwcml0ZSwgRXZlbnQsIFRpbWVyIH0gZnJvbSBcIkBlbmdpbmUvZmxhdGZhc3RcIjtcclxuXHJcbmltcG9ydCBFbnRpdHkgZnJvbSBcIi4vZW50aXR5XCI7XHJcbmltcG9ydCBHYW1lTWFwIGZyb20gXCIuLi93b3JsZC9nYW1lTWFwXCI7XHJcbmltcG9ydCBCdWZmIGZyb20gXCIuL2J1ZmZcIjtcclxuaW1wb3J0IEljb25QYWNrIGZyb20gXCJAbGliL2ljb25QYWNrXCI7XHJcblxyXG5pbXBvcnQgR0xPQkFMIGZyb20gXCIuLi9nbG9iYWxcIjtcclxuaW1wb3J0IENPTkZJRyBmcm9tIFwiLi4vY29uZmlnXCI7XHJcblxyXG5cclxuY29uc3QgbW9vZFRvTnVtYmVyID0ge1xyXG4gICAgW1wiIVwiXTogICAgICAgICAxLFxyXG4gICAgW1wiP1wiXTogICAgICAgICAyLFxyXG4gICAgW1wi4pmlXCJdOiAgICAgICAgIDMsXHJcbiAgICBbXCJmZWFyXCJdOiAgICAgIDQsXHJcbiAgICBbXCJuZWFyRGVhdGhcIl06IDUsXHJcbn07XHJcblxyXG5cclxuLyoqXHJcbiAqXHJcbiAqXHJcbiAqIEBjbGFzcyBDcmVhdHVyZVxyXG4gKiBAZXh0ZW5kcyB7RW50aXR5fVxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ3JlYXR1cmUgZXh0ZW5kcyBFbnRpdHkge1xyXG4gICAgY29uc3RydWN0b3IoIG5hbWUsIHRpbGVYLCB0aWxlWSwgb3B0aW9ucyApIHtcclxuICAgICAgICBzdXBlciggbmFtZSwgdGlsZVgsIHRpbGVZLCBvcHRpb25zICk7XHJcbiAgICAgICAgdGhpcy5pc0NyZWF0dXJlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmZvbGxvdyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5ocCA9IDE7XHJcbiAgICAgICAgdGhpcy5tYXhIcCA9IDE7XHJcbiAgICAgICAgaWYgKCB0aWxlWSAmJiBHTE9CQUwud29ybGQuZW50aXR5TWFuYWdlci5nZXRFbnRpdHkoIHRpbGVYLHRpbGVZICkgKSB7XHJcbiAgICAgICAgICAgIC8vIO2VtOuLuSDsnITsuZjsl5Ag64uk66W4IOyYpOu4jOygne2KuOqwgCDsnojri6QuXHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSBHTE9CQUwud29ybGQucGF0aE1hbmFnZXIuZ2V0U3VtbW9uRmxvb3IoIHRpbGVYLHRpbGVZLDEgKTtcclxuXHJcbiAgICAgICAgICAgIGlmICggdC5sZW5ndGggPT0gMCApIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCBcIuyGjO2ZmO2VoCDsnpDrpqzqsIAg7JeG7J2MXCIsIHRpbGVYLCB0aWxlWSApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGlsZVggPSB0WzBdLng7XHJcbiAgICAgICAgICAgICAgICB0aWxlWSA9IHRbMF0ueTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgeDogd3gsIHk6IHd5IH0gPSBHTE9CQUwud29ybGQudGlsZUNlbnRlclRvV29ybGQoIHRpbGVYLCB0aWxlWSApO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0UG9zaXRpb24oIHd4LHd5ICk7XHJcbiAgICAgICAgICAgICAgICBbdGhpcy50aWxlWCx0aGlzLnRpbGVZXSA9IFt0aWxlWCx0aWxlWV07XHJcbiAgICAgICAgICAgICAgICBbdGhpcy5sYXN0VGlsZVgsdGhpcy5sYXN0VGlsZVldID0gW3RpbGVYLHRpbGVZXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBvc3RJbml0KCBDcmVhdHVyZSApO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEJ1ZmYoIHR5cGUscG93ZXIgKSB7XHJcbiAgICAgICAgdGhpcy5idWZmc1t0eXBlXSA9IEJ1ZmYuYWRkQnVmZiggdGhpcyx0eXBlLHBvd2VyICk7XHJcbiAgICAgICAgdGhpcy5idWZmTGF5ZXIuY2xlYXJDaGlsZHJlbigpO1xyXG4gICAgICAgIGxldCBudW1PZkFjdGl2ZUJ1ZmYgPSAwO1xyXG5cclxuICAgICAgICBmb3IgKCBjb25zdCBrIGluIHRoaXMuYnVmZnMgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLmJ1ZmZzW2tdO1xyXG5cclxuICAgICAgICAgICAgbnVtT2ZBY3RpdmVCdWZmID0gbnVtT2ZBY3RpdmVCdWZmICsgMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGkgPSAwO1xyXG5cclxuICAgICAgICBmb3IgKCBjb25zdCBrIGluIHRoaXMuYnVmZnMgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLmJ1ZmZzW2tdO1xyXG5cclxuICAgICAgICAgICAgdi5pY29uLnNldFBvc2l0aW9uKCAtKCBudW1PZkFjdGl2ZUJ1ZmYgLSAxICkgKiAxNiAvIDIgKyBpICogMTYsLTI1ICk7XHJcbiAgICAgICAgICAgIHRoaXMuYnVmZkxheWVyLmFkZENoaWxkKCB2Lmljb24gKTtcclxuICAgICAgICAgICAgaSA9IGkgKyAxO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJvY2Vzc0J1ZmYoKSB7XHJcbiAgICAgICAgZm9yICggY29uc3QgayBpbiB0aGlzLmJ1ZmZzICkge1xyXG4gICAgICAgICAgICBjb25zdCB2ID0gdGhpcy5idWZmc1trXTtcclxuXHJcbiAgICAgICAgICAgIHYucHJvY2VzcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmJ1ZmZMYXllci5jbGVhckNoaWxkcmVuKCk7XHJcbiAgICAgICAgbGV0IG51bU9mQWN0aXZlQnVmZiA9IDA7XHJcblxyXG4gICAgICAgIGZvciAoIGNvbnN0IGsgaW4gdGhpcy5idWZmcyApIHtcclxuICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMuYnVmZnNba107XHJcblxyXG4gICAgICAgICAgICBudW1PZkFjdGl2ZUJ1ZmYgPSBudW1PZkFjdGl2ZUJ1ZmYgKyAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgaSA9IDA7XHJcblxyXG4gICAgICAgIGZvciAoIGNvbnN0IGsgaW4gdGhpcy5idWZmcyApIHtcclxuICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMuYnVmZnNba107XHJcblxyXG4gICAgICAgICAgICB2Lmljb24uc2V0UG9zaXRpb24oIC0oIG51bU9mQWN0aXZlQnVmZiAtIDEgKSAqIDE2IC8gMiArIGkgKiAxNiwtMjUgKTtcclxuICAgICAgICAgICAgdGhpcy5idWZmTGF5ZXIuYWRkQ2hpbGQoIHYuaWNvbiApO1xyXG4gICAgICAgICAgICBpID0gaSArIDE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNob3dNb29kKCBtb29kICkge1xyXG4gICAgICAgIGlmICggdGhpcy5fX21vb2RTcHJpdGUgIT0gbnVsbCApIHRoaXMuX19tb29kU3ByaXRlLnJlbW92ZUZyb21QYXJlbnQoKTtcclxuICAgICAgICBpZiAoIG1vb2QgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vb2ROdW0gPSBtb29kVG9OdW1iZXJbbW9vZF07XHJcbiAgICAgICAgICAgIGNvbnN0IGIgPSBuZXcgSWNvblBhY2soIG5ldyBUZXh0dXJlKCBcImZ4LnBuZ1wiLGZhbHNlLHsgZm9ybWF0OiBUZXh0dXJlQmFzZS5SR0JBNTU1MSB9ICksbW9vZE51bSw1LDE2LDI0ICk7XHJcblxyXG4gICAgICAgICAgICBiLnNldFkoIHRoaXMuZ2F1Z2VMYXllci5pc1Zpc2libGUoKSAmJiAtMjQgfHwgLTE2ICk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1jID0gbmV3IE1vdmllQ2xpcCggW1xyXG4gICAgICAgICAgICAgICAgWzAsMTUsYix7IHNjYWxlWDogWzEsMC43LFwib3V0Q3ViaWNcIl0sc2NhbGVZOiBbMSwwLjcsXCJvdXRDdWJpY1wiXSB9XSxcclxuICAgICAgICAgICAgICAgIFsxNiwgMzAsIGIsIHsgc2NhbGVYOiBbMC43LCAxLCBcImluQ3ViaWNcIl0sIHNjYWxlWTogWzAuNywgMSwgXCJpbkN1YmljXCJdIH1dLFxyXG4gICAgICAgICAgICAgICAgWzMwLFwiZ290b1wiLDBdXHJcbiAgICAgICAgICAgIF0gKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ2hpbGQoIG1jICk7XHJcbiAgICAgICAgICAgIHRoaXMuX19tb29kU3ByaXRlID0gbWM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZWZyZXNoR2F1Z2UoKSB7XHJcbiAgICAgICAgY29uc3QgdiA9IFV0aWxzLmNsYW1wKCB0aGlzLmhwIC8gdGhpcy5ocE1heCwwLDEgKTtcclxuXHJcbiAgICAgICAgaWYgKCB2ID09IDEgfHwgdiA9PSAwIHx8IHRoaXMuaXNQbGF5ZXIgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2F1Z2VMYXllci5zZXRWaXNpYmxlKCBmYWxzZSApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2F1Z2VMYXllci5zZXRWaXNpYmxlKCB0cnVlICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHcgPSB0aGlzLm1lc2guZ2V0V2lkdGgoKTtcclxuICAgICAgICBjb25zdCBoID0gdGhpcy5tZXNoLmdldEhlaWdodCgpO1xyXG5cclxuICAgICAgICBpZiAoICF0aGlzLl9fZ2F1Z2VCYWNrU3ByaXRlICkge1xyXG4gICAgICAgICAgICBjb25zdCBiYWNrID0gbmV3IFBpeGVsKCAweDAwMDAwMCwxLHcsNCApO1xyXG5cclxuICAgICAgICAgICAgYmFjay5zZXRQb3NpdGlvbiggLXcgLyAyLC1oIC8gMiAtIDcgKTtcclxuICAgICAgICAgICAgdGhpcy5nYXVnZUxheWVyLmFkZENoaWxkKCBiYWNrICk7XHJcbiAgICAgICAgICAgIHRoaXMuX19nYXVnZUJhY2tTcHJpdGUgPSBiYWNrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoICF0aGlzLl9fZ2F1Z2VTcHJpdGUgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdhdWdlID0gbmV3IFBpeGVsKCAweGZmMDAwMCwxLHcgLSAyLDIgKTtcclxuXHJcbiAgICAgICAgICAgIGdhdWdlLnNldFBvc2l0aW9uKCAxLDEgKTtcclxuICAgICAgICAgICAgdGhpcy5fX2dhdWdlQmFja1Nwcml0ZS5hZGRDaGlsZCggZ2F1Z2UgKTtcclxuICAgICAgICAgICAgdGhpcy5fX2dhdWdlU3ByaXRlID0gZ2F1Z2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggdGhpcy5fX2dhdWdlTGFzdFZhbHVlICE9IHYgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdhdWdlRGVsdGEgPSBuZXcgUGl4ZWwoIDB4YTAwMDAwLDEsdyAtIDIsMiApO1xyXG5cclxuICAgICAgICAgICAgZ2F1Z2VEZWx0YS5zZXRTY2FsZVgoICggdGhpcy5fX2dhdWdlTGFzdFZhbHVlIHx8IDEgKSAtIHYgKTtcclxuICAgICAgICAgICAgZ2F1Z2VEZWx0YS5zZXRQb3NpdGlvbiggMSArIHYgKiAoIHcgLSAyICksMSApO1xyXG4gICAgICAgICAgICBuZXcgVHdlZW4oIGdhdWdlRGVsdGEsMTAwMCx7IHNjYWxlWDogMCxhbHBoYTogMCB9LHsgZWFzZTogZWFzaW5nLmluQ3ViaWMgfSApXHJcbiAgICAgICAgICAgICAgICAub25Db21wbGV0ZVJlbW92ZUZyb21QYXJlbnQoKTtcclxuICAgICAgICAgICAgdGhpcy5fX2dhdWdlQmFja1Nwcml0ZS5hZGRDaGlsZCggZ2F1Z2VEZWx0YSApO1xyXG4gICAgICAgICAgICB0aGlzLl9fZ2F1Z2VTcHJpdGUuc2V0U2NhbGVYKCB2ICk7XHJcbiAgICAgICAgICAgIHRoaXMuX19nYXVnZUxhc3RWYWx1ZSA9IHY7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBnZXRGYWN0aW9uUmVsYXRpb24oIHRhcmdldCApIHtcclxuICAgICAgICBjb25zdCBteUZhY3Rpb24gPSB0aGlzLnByb3BlcnR5LmZhY3Rpb24gfHwgXCJNXCI7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0RmFjdGlvbiA9IHRhcmdldC5wcm9wZXJ0eS5mYWN0aW9uIHx8IFwiTVwiO1xyXG5cdFxyXG4gICAgICAgIGNvbnN0IGZ0ID0gQ3JlYXR1cmUuZmFjdGlvblRhYmxlW215RmFjdGlvbl1bMF07XHJcbiAgICAgICAgY29uc3QgaSA9IENyZWF0dXJlLmZhY3Rpb25UYWJsZVt0YXJnZXRGYWN0aW9uXVsxXSAqIDI7XHJcblxyXG4gICAgICAgIHJldHVybiBmdC5zdWJzdHIoIGksIDEgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDrspTsnIQg7JWI7J2YIO2DgOqyn+ydhCDssL7snYxcclxuICAgIC8vIEY+Uj5mPnIg7J2YIOyInOyEnOuhnCDssL7ripTri6RcclxuICAgIC8vIGYscuydgCBzZW5zZURpc3RhbmNl7J2YIOygiOuwmOyXkCDrk6TslrTsmKwg6rK97JqwIOuPmeyeke2VqFxyXG4gICAgLy8g66as7YS06rCS7J2AIHvqtIDqs4Qs6rCc7LK0LOykkeyalOuPhH0g7Iic7Jy866Gc65CcIOyWtOugiOydtCAx67KI7J2EIOydveycvOuptCDrkJzri6QuXHJcblxyXG4gICAgc2VhcmNoVGFyZ2V0KCByYW5nZSApIHtcclxuICAgICAgICBpZiAoICFyYW5nZSApIHtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLmlzUGxheWVyICkge1xyXG4gICAgICAgICAgICAgICAgcmFuZ2UgPSBHTE9CQUwud29ybGQudmlld1JhZGl1cztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJhbmdlID0gdGhpcy5zZW5zZURpc3RhbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cdFxyXG4gICAgICAgIC8vIOyYpOu4jOygne2KuCDrqqnroZ3snYQg7Ja77Ja07Jio64ukXHJcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZ2V0TmVhckVudGl0aWVzKCByYW5nZSApO1xyXG4gICAgICAgIGNvbnN0IHQyID0gW107XHJcblx0XHJcbiAgICAgICAgZm9yICggY29uc3QgaSBpbiB0ICkge1xyXG4gICAgICAgICAgICBjb25zdCB2ID0gdFtpXTtcclxuXHJcbiAgICAgICAgICAgIGlmICggdi5pc0NyZWF0dXJlICYmIHRoaXMuZm9sbG93ICE9IHYgJiYgdGhpcy5jYW5TZWUoIHYudGlsZVgsIHYudGlsZVksIEdhbWVNYXAuQkxPQ0tfVklTSU9OIClbMF0gKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZWxhdGlvbiA9IHRoaXMuZ2V0RmFjdGlvblJlbGF0aW9uKCB2ICk7XHJcbiAgICAgICAgICAgICAgICAvL2xvZyhyZWxhdGlvbik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbXBvcnRhbnRQb2ludCA9IHJlbGF0aW9uID09IFwiRlwiID8gNCA6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRpb24gPT0gXCJSXCIgPyAzIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb24gPT0gXCJmXCIgPyAyIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uID09IFwiclwiID8gMSA6IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgdDJbdDIubGVuZ3RoICsgMV0gPSBbcmVsYXRpb24sIHYsIGltcG9ydGFudFBvaW50IC0gR0xPQkFMLndvcmxkLmdldERpc3RhbmNlQmV0d2VlbkVudGl0aWVzKCB0aGlzLCB2ICkgKiAwLjAwMV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdDIuc29ydCggKCBhLCBiICk9PiAgYlszXSAtIGFbM10gKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIFt0MlsxXSx0Ml07XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyDtjqvsl5Dqsowg66qF66C57J2EIOyghOuLrO2VnOuLpC5cclxuICAgIC8vIO2DgOqyn+ydhCDsg53rnrXtlZjrqbQg66qo65OgIO2Oq1xyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgY29tbWFuZEZvbGxvd2VyKCBjb21tYW5kLG9wdGlvbnMsdGFyZ2V0ICkge1xyXG4gICAgICAgIGlmICggdGFyZ2V0ICkge1xyXG4gICAgICAgICAgICBpZiAoIHRoaXMgPT0gdGFyZ2V0LmZvbGxvdyApIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5yZWNlaXZlQ29tbWFuZCggY29tbWFuZCwgb3B0aW9ucyApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCBcIuyekOyLoOydmCDtjqvsnbQg7JWE64uM642wIOuqheugueydhCDsoITri6ztlZjroKTtlahcIiApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgdCA9IEdMT0JBTC53b3JsZC5lbnRpdHlNYW5hZ2VyLmdldEFsbEVudGl0aWVzKCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKCBjb25zdCBpIGluIHQgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2ID0gdFtpXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMgPT0gdi5mb2xsb3cgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIHRoaXMuZ2V0TmFtZSgpLGNvbW1hbmQsXCLrqoXroLnsnYQg7KCE64us7ZWoXCIsdi5nZXROYW1lKCkgKTtcclxuICAgICAgICAgICAgICAgICAgICB2LnJlY2VpdmVDb21tYW5kKCBjb21tYW5kLG9wdGlvbnMgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZWNlaXZlQ29tbWFuZCggY29tbWFuZCxvcHRpb25zICkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCB0aGlzLmdldE5hbWUoKSxjb21tYW5kLFwi66qF66C57J2EIOuwm+ydjFwiICk7XHJcbiAgICAgICAgaWYgKCBjb21tYW5kID09IFwiZGFuY2VcIiApIHtcclxuICAgICAgICAgICAgdGhpcy5lbmFibGVEZWZhdWx0QW5pbWF0aW9uKCBmYWxzZSApO1xyXG4gICAgICAgICAgICBvcHRpb25zLm1tbFxyXG4gICAgICAgICAgICAgICAgLm9uKCBcIm5vdGVcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFt0dywgdGhdID0gW3RoaXMudGlsZVdpZHRoLCB0aGlzLnRpbGVIZWlnaHRdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9fYW5pbWF0aW9uVGljayA9ICggdGhpcy5fX2FuaW1hdGlvblRpY2sgKyAxICkgJSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFt0eCwgdHldID0gW3RoaXMuX3RleHR1cmVYLHRoaXMuX3RleHR1cmVZICsgdGhpcy5fX2FuaW1hdGlvblRpY2sgKiB0aF07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgW3csIGhdID0gW0NPTkZJRy5FbnRpdHkud2lkdGgsIENPTkZJRy5FbnRpdHkuaGVpZ2h0XTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNoLnNldFRleHR1cmVDb29yZGluYXRlQXJyYXkoIFt0eCwgdHksIHR4ICsgdHcsIHR5LCB0eCwgdHkgKyB0aCwgdHggKyB0dywgdHkgKyB0aF0gKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYWRvd01lc2guc2V0VGV4dHVyZUNvb3JkaW5hdGVBcnJheSggWyB0eCwgdHkgKyBoLCB0eCArIHcsIHR5ICsgaCwgdHgsIHR5LCB0eCArIHcsIHR5IF0gKTtcclxuICAgICAgICAgICAgICAgIH0gKVxyXG4gICAgICAgICAgICAgICAgLm9uKCBcImNvbXBsZXRlXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZURlZmF1bHRBbmltYXRpb24oIHRydWUgKTtcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5DcmVhdHVyZS50ZXh0dXJlID0gbmV3IFRleHR1cmUoIFwiQ2hhcmFjdGVyLnBuZ1wiLCBmYWxzZSwgeyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKTtcclxuQ3JlYXR1cmUud2lkdGggPSAxODtcclxuQ3JlYXR1cmUuaGVpZ2h0ID0gMjQ7XHJcbkNyZWF0dXJlLnRpbGVXaWR0aCA9IDE4O1xyXG5DcmVhdHVyZS50aWxlSGVpZ2h0ID0gMjQ7XHJcbkNyZWF0dXJlLndhbGtTcGVlZCA9IDIwMDtcclxuQ3JlYXR1cmUucGVyUm93ID0gTWF0aC5mbG9vciggQ3JlYXR1cmUudGV4dHVyZS53aWR0aCAvIENyZWF0dXJlLnRpbGVXaWR0aCApO1xyXG5DcmVhdHVyZS5mYWN0aW9uVGFibGUgPSB7XHJcbiAgICAvKlxyXG5cdFxyXG5cdFx0ZmFjdGlvbjtcclxuXHRcdE8gT3JkZXI7XHJcblx0XHRDIENoYW9zO1xyXG5cdFx0TCBMaWJlcnR5O1xyXG5cdFx0SCBIdW1hbjtcclxuXHRcdEcgR3VhcmQ7XHJcblx0XHRSIFJhaWRlcjtcclxuXHRcdEEgQW5pbWFsO1xyXG5cdFx0UCBQcmVkZXRvciBBbmltYWw7XHJcblx0XHRNIE1vbnN0ZXI7XHJcblx0XHRWIFZhbXBpcmU7XHJcblx0XHRVIE91dHRlciB1bml2ZXJzZTtcclxuXHRcdFx07IS466Gc7LaV7J2AIOyekOyLoCwg6rCA66Gc7LaV7J2AIOuMgOyDgVxyXG5cdFx0XHRGIOyggeq3ueyggSDsoITtiKwsIGYg7IaM6re57KCBIOyghO2IrCBcclxuXHRcdFx0UiDsoIHqt7nsoIEg64+E66edLCByIOyGjOq3ueyggSDrj4Trp51cclxuXHRcdFx0T+qwgCBB66W8IOunjOuCmOuptCBm7IaM6re57KCB7Jy866GcIOyLuOybgFxyXG5cdCovXHJcbiAgICAvL08gQyBMIEggRyBSIEEgUCBNIFYgVTtcclxuICAgIE86IFsgXCI6IGYgICAgICAgRiBmICAgRiAgIFJcIiwgMF0sXHJcbiAgICBDOiBbIFwiRiA6IGYgICAgICAgZiAgIGYgICBSXCIsIDFdLFxyXG4gICAgTDogWyBcIiAgICA6ICAgICBmICAgICBmIGYgUlwiLCAyXSxcclxuICAgIEg6IFsgXCIgICAgICA6ICAgZiBmIHIgZiAgIFJcIiwgM10sXHJcbiAgICBHOiBbIFwiICAgICAgICA6IEYgICBmIEYgICBSXCIsIDRdLFxyXG4gICAgUjogWyBcIkYgZiBGIEYgciA6IGYgciBmIHIgUlwiLCA1XSxcclxuICAgIEE6IFsgXCIgICAgICAgICAgICA6IFIgciByIFJcIiwgNl0sXHJcbiAgICBQOiBbIFwiZiBmIGYgZiAgIGYgRiA6IHIgciBSXCIsIDddLFxyXG4gICAgTTogWyBcIkYgRiBGIEYgRiBmICAgZiA6IHIgUlwiLCA4XSxcclxuICAgIFY6IFsgXCJmIGYgZiBGICAgZiBmICAgICA6IHJcIiwgOV0sXHJcbiAgICBVOiBbIFwiRiBGIEYgZiBmIGYgZiBmIGYgZiA6XCIsIDEwXSxcclxuXHJcbn07XHJcblxyXG4iLCIvKlxyXG5cclxuXHTsm5Trk5zsl5Ag7Jis65286rCA64qUIOqwnOyytOuKlCDsoITrtoAgRW50aXR5O1xyXG5cdEVudGl0eeuKlCDquLDrjbDroZzsiqTqsIAg7IKs7Jqp7ZWY6riwIOuVjOusuOyXkCBFbnRpdHnrnbzqs6Ag7ZWc64ukXHJcblxyXG5cdEVudGl0eTtcclxuXHR8XHJcblx0Ky1DcmVhdHVyZS0tLS0tUGxheWVyO1xyXG5cdHwgICAgICAgfFxyXG5cdHxcdFx0Ky0tLS0tLU1vbnN0ZXItLS0tLS0tUGV0O1xyXG5cdHxcdFx0ICAgICAgICAgICAgfFxyXG5cdHxcdFx0XHRcdFx0Ky0tLS0tLS0tTnBjO1xyXG5cdCstUHJvcDtcclxuICAgIHxcclxuXHQrLUl0ZW07XHJcbiAgICB8XHJcblx0Ky1Ta2lsbDtcclxuKi9cclxuXHJcbmltcG9ydCB7IFR3ZWVuLE1lc2gsVGV4dHVyZUJhc2UsVXRpbHMsZWFzaW5nLCBNb3ZpZUNsaXAsIFNwcml0ZSxFdmVudCxUaW1lciB9IGZyb20gXCJAZW5naW5lL2ZsYXRmYXN0XCI7XHJcbmltcG9ydCBJY29uUGFjayBmcm9tIFwiQGxpYi9pY29uUGFja1wiO1xyXG5cclxuaW1wb3J0IEdMT0JBTCBmcm9tIFwiLi4vZ2xvYmFsXCI7XHJcbmltcG9ydCBDT05GSUcgZnJvbSBcIi4uL2NvbmZpZ1wiO1xyXG5cclxuY29uc3QgZ29sZEFuaSA9IG5ldyBNb3ZpZUNsaXAoIFtcclxuICAgIFswLCAxMCwgXCJAdFwiLCB7IHJlZE11bHRpcGxpZXI6IFsxLCAxLCBcImxpbmVhclwiXSwgZ3JlZW5NdWx0aXBsaWVyOiBbMSwgMC44LCBcImxpbmVhclwiXSwgYmx1ZU11bHRpcGxpZXI6IFswLCAwLCBcImxpbmVhclwiXSB9XSxcclxuICAgIFsxMCwgXCJnb3RvXCIsIDBdXHJcbl0gKTtcclxuXHJcbmNvbnN0IGRyb3BBbmkgPSBuZXcgTW92aWVDbGlwKCB7XHJcbiAgICBkZWZhdWx0OiBbWzAsIDAsIFwiQHRcIl1dLFxyXG4gICAgaGlkZTogICAgW1swLCAwLCBcIkB0XCIsIHsgYWxwaGE6IDAgfV1dLFxyXG4gICAgZHJvcDogICAgW1xyXG4gICAgICAgIFswLCAzMCwgXCJAdFwiLCB7IGFscGhhOiAxLCB5OiBbMCwgLTEwLCBcIm91dEN1YmljXCJdLCByb3RhdGlvbjogWy0zNjAgKiAyLCAwLCBcImxpbmVhclwiXSB9XSxcclxuICAgICAgICBbMzEsIDYwLCBcIkB0XCIsIHsgeTogWy0xMCwgMCwgXCJvdXRCb3VuY2VcIl0gfV1cclxuICAgIF0sXHJcbn0gKTtcclxuXHJcblxyXG4vLyDsiKjsiazquLAg7JWg64uI66mU7J207IWYXHJcbi8vIOydtO2bhOyXkCDri6Trpbgg6rKD7Jy866GcIOq1kOyytOuQoCDsiJgg7J6I7Jy866+A66GcIOujqOymiO2VmOqyjCDrkZTri6QuXHJcblxyXG5cclxuLyoqXHJcbiAqIEB0aGlzIEVudGl0eVxyXG4gKi9cclxuZnVuY3Rpb24gb25UaW1lcigpIHtcclxuICAgIGNvbnN0IFt0dywgdGhdID0gW3RoaXMudGlsZVdpZHRoLCB0aGlzLnRpbGVIZWlnaHRdO1xyXG5cclxuICAgIHRoaXMuX19hbmltYXRpb25UaWNrID0gKCB0aGlzLl9fYW5pbWF0aW9uVGljayArIDEgKSAlIDI7XHJcbiAgICBjb25zdCBbdHgsIHR5XSA9IFt0aGlzLl90ZXh0dXJlWCwgdGhpcy5fdGV4dHVyZVkgKyB0aGlzLl9fYW5pbWF0aW9uVGljayAqIHRoXTtcclxuICAgIGNvbnN0IFt3LCBoXSA9IFtDT05GSUcuRW50aXR5LndpZHRoLCBDT05GSUcuRW50aXR5LmhlaWdodF07XHJcblxyXG4gICAgLy90aGlzLm1lc2guc2V0VGV4dHVyZUNvb3JkaW5hdGVzKDAsIHR4LCB0eSwgMSwgdHggKyB0dywgdHksIDIsIHR4LCB0eSArIHRoLCAzLCB0eCArIHR3LCB0eSArIHRoKTtcclxuICAgIHRoaXMubWVzaC5zZXRUZXh0dXJlQ29vcmRpbmF0ZUFycmF5KCBbdHgsIHR5LCB0eCArIHR3LCB0eSwgdHgsIHR5ICsgdGgsIHR4ICsgdHcsIHR5ICsgdGhdICk7XHJcbiAgICBpZiAoIHRoaXMuc2hhZG93TWVzaCApIHtcclxuICAgICAgICB0aGlzLnNoYWRvd01lc2guc2V0VGV4dHVyZUNvb3JkaW5hdGVBcnJheSggWyB0eCwgdHkgKyBoLCB0eCArIHcsIHR5ICsgaCwgdHgsIHR5LCB0eCArIHcsIHR5IF0gKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEB0aGlzIEVudGl0eVxyXG4gKi9cclxuZnVuY3Rpb24gb25FbnRlckZyYW1lKCkge1xyXG4gICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLmdldFBvc2l0aW9uKCk7XHJcblxyXG4gICAgdGhpcy5zaGFkb3dNZXNoLnNldFBvc2l0aW9uKCB4LHkgKTtcclxuICAgIHRoaXMuc2hhZG93TWVzaC5zZXRBbHBoYSggdGhpcy5nZXRBbHBoYSgpICk7XHJcbiAgICB0aGlzLnNoYWRvd01lc2guc2V0VmlzaWJsZSggdGhpcy5pc1Zpc2libGUoKSApO1xyXG59XHJcblxyXG4vKiogXHJcbiAqIEB0eXBlZGVmIHtvYmplY3R8dW5kZWZpbmVkfSBFbnRpdHlQcm9wZXJ0eVxyXG4gKiBAcHJvcGVydHkge251bWJlcltdPX0gaW1hZ2VcclxuICogQHByb3BlcnR5IHtbW251bWJlcixudW1iZXJdXT19IGltYWdlc1xyXG4gKiBAcHJvcGVydHkge251bWJlcj19IGNvbG9yXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nPX0gZGVzY1xyXG4gKiBAcHJvcGVydHkge3N0cmluZz19IHR5cGVcclxuICogKi9cclxuXHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW50aXR5IGV4dGVuZHMgU3ByaXRlIHtcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIOy0iOq4sO2ZlFxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLyoqXHJcbiAgICAgKkNyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgRW50aXR5LlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfG9iamVjdD19IHRpbGVYXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcj19IHRpbGVZXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnNcclxuICAgICAqIEBtZW1iZXJvZiBFbnRpdHlcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoIG5hbWUsIHRpbGVYLCB0aWxlWSwgb3B0aW9ucyApIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIGlmICggdHlwZW9mIHRpbGVYID09IFwib2JqZWN0XCIgJiYgdGlsZVkgPT0gbnVsbCAmJiBvcHRpb25zID09IG51bGwgKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSB0aWxlWDtcclxuICAgICAgICAgICAgdGlsZVggPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDsnKDri4jtgawgSUQgXHJcbiAgICAgICAgICogQHR5cGUge251bWJlcn0gXHJcbiAgICAgICAgICogQHJlYWRvbmx5XHJcbiAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmlkID0gRW50aXR5LmdlbmVyYXRlTmV3SWQoKTtcclxuICAgICAgICB0aGlzLmlzRW50aXR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLndhbGtTcGVlZCA9IENPTkZJRy5FbnRpdHkud2Fsa1NwZWVkO1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgIT0gbnVsbCA/IG9wdGlvbnMgOiB7fTtcclxuXHJcbiAgICAgICAgaWYgKCB0eXBlb2YgdGlsZVggPT0gXCJudW1iZXJcIiApIHtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IEdMT0JBTC53b3JsZC50aWxlQ2VudGVyVG9Xb3JsZCggdGlsZVgsIHRpbGVZICk7XHJcbiAgICAgICAgICAgIHRoaXMudGlsZVggPSB0aWxlWDtcclxuICAgICAgICAgICAgdGhpcy50aWxlWSA9IHRpbGVZO1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RUaWxlWCA9IHRpbGVYO1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RUaWxlWSA9IHRpbGVZO1xyXG4gICAgICAgIH1cclxuXHRcdFxyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgLyoqIEB0eXBlIHtFbnRpdHlQcm9wZXJ0eX0gKi9cclxuICAgICAgICB0aGlzLnByb3BlcnR5ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIC8qKiBAdHlwZSB7TWVzaH0gKi9cclxuICAgICAgICB0aGlzLm1lc2ggPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgLyoqIEB0eXBlIHtNb3ZpZUNsaXB9ICovXHJcbiAgICAgICAgdGhpcy5tb3ZpZUNsaXAgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgLyoqIEB0eXBlIHtib29sZWFufSAqL1xyXG4gICAgICAgIHRoaXMuYWRkZWRUb1dvcmxkID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xyXG4gICAgICAgIHRoaXMudGlsZVdpZHRoID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xyXG4gICAgICAgIHRoaXMudGlsZUhlaWdodCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAvKiogQHR5cGUge2Jvb2xlYW59ICovXHJcbiAgICAgICAgdGhpcy5pc0l0ZW0gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgLyoqIEB0eXBlIHtib29sZWFufSAqL1xyXG4gICAgICAgIHRoaXMuaXNDcmVhdHVyZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAvKiogQHR5cGUge2Jvb2xlYW59ICovXHJcbiAgICAgICAgdGhpcy5pc1Byb3AgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgLyoqIEB0eXBlIHtib29sZWFufSAqL1xyXG4gICAgICAgIHRoaXMuaXNTa2lsbCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAvKiogQHR5cGUge2Jvb2xlYW59ICovXHJcbiAgICAgICAgdGhpcy5pc1BsYXllciA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtUZXh0dXJlQmFzZX0gKi9cclxuICAgICAgICB0aGlzLnRleHR1cmUgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIHRoaXMuaW1hZ2VOdW0gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5pbWFnZUNvbCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmltYWdlUm93ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuY29sb3JOdW0gPSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gYmFzZVRhYmxlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5XHJcbiAgICAgKiBAbWVtYmVyb2YgRW50aXR5XHJcbiAgICAgKi9cclxuICAgIGZpbGxQcm9wZXJ0aWVzKCBiYXNlVGFibGUsIGtleSApIHtcclxuICAgICAgICB0aGlzLl9fa2V5ID0ga2V5O1xyXG4gICAgICAgIGNvbnNvbGUuYXNzZXJ0KCBiYXNlVGFibGVba2V5XSwgYOuyoOydtOyKpO2FjOydtOu4lOyXkCDtgqTqsIAg7JeG7J2MICR7YmFzZVRhYmxlfSwke2tleX1gICk7XHJcbiAgICAgICAgdGhpcy5wcm9wZXJ0eSA9IG5ldyBQcm94eSgge30sIHtcclxuICAgICAgICAgICAgZ2V0OiAoIHRhcmdldCwgbmFtZSApID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuYW1lIGluIHRhcmdldCA/IHRhcmdldFtuYW1lXSA6IGJhc2VUYWJsZVtrZXldW25hbWVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSApO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwb3N0SW5pdCggY3VycmVudENsYXNzICkge1xyXG4gICAgICAgIGlmICggdGhpcy5jb25zdHJ1Y3RvciAhPSBjdXJyZW50Q2xhc3MgKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcclxuICAgICAgICBjb25zdCBwciA9IHRoaXMucHJvcGVydHk7XHJcbiAgICAgICAgY29uc3QgW3RpbGVYLCB0aWxlWV0gPSBbdGhpcy50aWxlWCwgdGhpcy50aWxlWV07XHJcbiAgICAgICAgbGV0IGltYWdlQ29sLCBpbWFnZVJvdztcclxuXHJcbiAgICAgICAgaWYgKCBwci5pbWFnZSApIHtcclxuICAgICAgICAgICAgW2ltYWdlQ29sLCBpbWFnZVJvd10gPSBwci5pbWFnZTtcclxuICAgICAgICB9IGVsc2UgaWYgKCBwci5pbWFnZXMgKSB7XHJcbiAgICAgICAgICAgIFtpbWFnZUNvbCwgaW1hZ2VSb3ddID0gcHIuaW1hZ2VzW3RoaXMuaW1hZ2VOdW1dO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgW3RoaXMuaW1hZ2VDb2wsIHRoaXMuaW1hZ2VSb3ddID0gW2ltYWdlQ29sLCBpbWFnZVJvd107XHJcbiAgICAgICAgdGhpcy5jb2xvciA9IHRoaXMuY29sb3IgfHwgdGhpcy5vcHRpb25zLmNvbG9yIHx8IHByLmNvbG9yO1xyXG4gICAgICAgIGlmICggcHIuY29sb3JzICYmIHRoaXMuY29sb3IgPT0gbnVsbCApIHtcclxuICAgICAgICAgICAgdGhpcy5jb2xvciA9IHByLmNvbG9yc1t0aGlzLmNvbG9yTnVtXTtcclxuICAgICAgICB9IGVsc2UgaWYgKCAhdGhpcy5jb2xvciApIHtcclxuICAgICAgICAgICAgdGhpcy5jb2xvciA9IDB4ZmZmZmZmO1xyXG4gICAgICAgIH1cclxuXHRcdFxyXG4gICAgICAgIGlmICggdGhpcy5pc0NyZWF0dXJlICkge1xyXG4gICAgICAgICAgICBpbWFnZVJvdyA9IGltYWdlUm93ICogMiAtIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBbdywgaF0gPSBbQ09ORklHLkVudGl0eS53aWR0aCwgQ09ORklHLkVudGl0eS5oZWlnaHRdO1xyXG4gICAgICAgIGNvbnN0IFt0dywgdGhdID0gW3RoaXMudGlsZVdpZHRoLCB0aGlzLnRpbGVIZWlnaHRdO1xyXG4gICAgICAgIGNvbnN0IFt0eCwgdHldID0gWyggaW1hZ2VDb2wgLSAxICkgKiB0dywgKCBpbWFnZVJvdyAtIDEgKSAqIHRoXTtcclxuICAgICAgICBsZXQgbSA9IG5ldyBJY29uUGFjayggdGhpcy50ZXh0dXJlLCBpbWFnZUNvbCwgaW1hZ2VSb3csIHR3LCB0aCwgdGhpcy5jb2xvciwgMSApO1xyXG5cclxuICAgICAgICB0aGlzLm1lc2ggPSBtO1xyXG4gICAgICAgIG0uc2V0RmxpcCggb3B0aW9ucy5mbGlwICk7XHJcbiAgICAgICAgaWYgKCB0aWxlWCAmJiB0aWxlWSAmJiBHTE9CQUwud29ybGQubWFwLmdldFZpc2liaWxpdHkoIHRpbGVYLCB0aWxlWSApID4gMCApIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlKCBmYWxzZSApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZSggdHJ1ZSApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLmlzUHJvcCB8fCB0aGlzLmlzQ3JlYXR1cmUgfHwgdGhpcy5pc1NraWxsICkge1xyXG4gICAgICAgICAgICB0aGlzLmFkZENoaWxkKCBtICk7XHJcbiAgICAgICAgICAgIGNvbnN0IG0zID0gbS5jbG9uZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBzaCA9IGggKiAwLjg7XHJcblxyXG4gICAgICAgICAgICBtMy5zZXRWZXJ0ZXhBcnJheSggW1xyXG4gICAgICAgICAgICAgICAgMCAtIHcgLyAyLCAwIC0gaCAvIDIgKyBzaCxcclxuICAgICAgICAgICAgICAgIHcgLSB3IC8gMiwgMCAtIGggLyAyICsgc2gsXHJcbiAgICAgICAgICAgICAgICAwIC0gdyAvIDIsIGggLSBoIC8gMiArIHNoLFxyXG4gICAgICAgICAgICAgICAgdyAtIHcgLyAyLCBoIC0gaCAvIDIgKyBzaFxyXG4gICAgICAgICAgICBdICk7XHJcbiAgICAgICAgICAgIG0zLnNldFRleHR1cmVDb29yZGluYXRlQXJyYXkoIFt0eCwgdHkgKyBoLCB0eCArIHcsIHR5ICsgaCwgdHgsIHR5LCB0eCArIHcsIHR5XSApO1xyXG4gICAgICAgICAgICBtMy5zZXRDb2xvckFycmF5KCBbMHgwMDAwMDAsIDAuNSwgMHgwMDAwMDAsIDAuNSwgMHgwMDAwMDAsIDAuNSwgMHgwMDAwMDAsIDAuNV0gKTtcclxuICAgICAgICAgICAgdGhpcy5zaGFkb3dNZXNoID0gbTM7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lck9uU3RhZ2UoIEV2ZW50LkVOVEVSX0ZSQU1FLCBvbkVudGVyRnJhbWUsIHRoaXMgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCB0aGlzLmlzQ3JlYXR1cmUgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RleHR1cmVYID0gdHg7XHJcbiAgICAgICAgICAgIHRoaXMuX3RleHR1cmVZID0gdHk7XHJcbiAgICAgICAgICAgIHRoaXMuX19hbmltYXRpb25UaWNrID0gMDtcclxuICAgICAgICAgICAgdGhpcy5fX2FuaW1hdGlvblRpbWVyID0gbmV3IFRpbWVyKCA1MDAsIDAgKTtcclxuICAgICAgICAgICAgdGhpcy5fX2FuaW1hdGlvblRpbWVyLnN0YXJ0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX19hbmltYXRpb25UaW1lci5hZGRFdmVudExpc3RlbmVyT25TdGFnZSggRXZlbnQuVElNRVIsIG9uVGltZXIsIHRoaXMsIHRoaXMgKTtcclxuICAgICAgICAgICAgdGhpcy5idWZmcyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmJ1ZmZMYXllciA9IG5ldyBTcHJpdGUoKTtcclxuICAgICAgICAgICAgdGhpcy5nYXVnZUxheWVyID0gbmV3IFNwcml0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZENoaWxkKCB0aGlzLmdhdWdlTGF5ZXIgKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRDaGlsZCggdGhpcy5idWZmTGF5ZXIgKTtcclxuICAgICAgICB9XHJcblx0XHRcclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICAvLyDslYTsnbTthZwg7KCE7JqpXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgICAgIGlmICggdGhpcy5pc0l0ZW0gKSB7XHJcbiAgICAgICAgICAgIGlmICggdGhpcy5wcm9wZXJ0eS5lZmZlY3QgPT0gXCJnb2xkXCIgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYyA9IGdvbGRBbmkuaW5zdGFuY2UoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtYy5zZXRUYXJnZXQoIFwiQHRcIiwgbSApO1xyXG4gICAgICAgICAgICAgICAgLy9tYy5zZXRHb3RvQWN0aW9uKDEwLCAwKTtcclxuICAgICAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgbSA9IG1jO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IG1jID0gZHJvcEFuaS5pbnN0YW5jZSgpO1xyXG5cclxuICAgICAgICAgICAgbWMuc2V0VGFyZ2V0KCBcIkB0XCIsIG0gKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRDaGlsZCggbWMgKTtcclxuICAgICAgICAgICAgdGhpcy5tb3ZpZUNsaXAgPSBtYztcclxuICAgICAgICAgICAgaWYgKCB0aWxlWCApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgeCwgeSB9ID0gR0xPQkFMLndvcmxkLnRpbGVDZW50ZXJUb1dvcmxkKCB0aWxlWCwgdGlsZVkgKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFBvc2l0aW9uKCB4LHkgKTtcclxuICAgICAgICAgICAgICAgIFt0aGlzLnRpbGVYLCB0aGlzLnRpbGVZXSA9IFt0aWxlWCwgdGlsZVldO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIG9wdGlvbnMuZHJvcCA9PSB0cnVlICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCBvcHRpb25zLmRyb3BYICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgeDogdHgsIHk6IHR5IH0gPSBHTE9CQUwud29ybGQudGlsZUNlbnRlclRvV29ybGQoIG9wdGlvbnMuZHJvcFgsIG9wdGlvbnMuZHJvcFkgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbWMuc2V0UG9zaXRpb24oIHR4IC0gdGhpcy5nZXRYKCksIHR5IC0gdGhpcy5nZXRZKCkgKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgVHdlZW4oIG1jLCAzMDAsIHsgeDogMCwgeTogMCB9ICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIG9wdGlvbnMuZHJvcERlbGF5ICkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1jLmdvdG9BbmRQbGF5KCBcImhpZGVcIiApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHJvcEFuaW1hdGlvblRpbWVyID0gVGltZXIuZGVsYXllZENhbGwoIG9wdGlvbnMuZHJvcERlbGF5LCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJvcEFuaW1hdGlvblRpbWVyID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dEcm9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RHJvcCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIHRoaXMucHJvcGVydHkuYnVuZGxlICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hbW91bnQgPSBvcHRpb25zLmFtb3VudCB8fCAxO1xyXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLnByb3BlcnR5LmJ1bmRsZSA9PSBcImdvbGRcIiApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaXMuYW1vdW50IDw9IDUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlSW1hZ2UoIDEsIDE0ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggdGhpcy5hbW91bnQgPD0gMjAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlSW1hZ2UoIDIsIDE0ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggdGhpcy5hbW91bnQgPD0gMTAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUltYWdlKCAzLCAxNCApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlSW1hZ2UoIDQsIDE0ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNoYW5nZUltYWdlKCBjb2wsIHJvdyApIHtcclxuICAgICAgICBjb25zdCBbdywgaF0gPSBbQ09ORklHLkVudGl0eS53aWR0aCwgQ09ORklHLkVudGl0eS5oZWlnaHRdO1xyXG4gICAgICAgIGNvbnN0IFt0eCwgdHldID0gWyggY29sIC0gMSApICogdGhpcy50aWxlV2lkdGgsICggcm93IC0gMSApICogdGhpcy50aWxlSGVpZ2h0XTtcclxuICAgICAgICBjb25zdCBtID0gdGhpcy5tZXNoO1xyXG5cclxuICAgICAgICBtLnNldFRleHR1cmVDb29yZGluYXRlQXJyYXkoIFt0eCwgdHksIHR4ICsgdywgdHksIHR4LCB0eSArIGgsIHR4ICsgdywgdHkgKyBoXSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIOyblOuTnOuCtOu2gOydmCDsnITsuZjrsJTqvrjquLBcclxuICAgIC8vIHRpbGVYLHRpbGVZ64qUIOqwgeyihSDsg4HtmLjsnpHsmqnsl5DshJwg7LC46rOg7ZWY64qUIOychOy5mOydtOuLpC4gXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gSXRlbeydgCDri6Trpbgg7Jik67iM7KCd7Yq47JmAIOqwmeydgCDsnITsuZjsl5Ag7J6I7J2EIOyImCDsnojsnLzrr4DroZxcclxuICAgIC8vIOyVhOuemOydmCDrqZTshozrk5zrpbwg7Jik67KE65287J2065Oc7ZWc64ukLlxyXG4gICAgc2V0VGlsZVh5KCB0aWxlWCwgdGlsZVkgKSB7XHJcbiAgICAgICAgaWYgKCB0aGlzLmxhc3RUaWxlWCAhPSB0aGlzLnRpbGVYICYmIHRoaXMubGFzdFRpbGVZICE9IHRoaXMudGlsZVkgKSB7XHJcbiAgICAgICAgICAgIFt0aGlzLmxhc3RUaWxlWCwgdGhpcy5sYXN0VGlsZVldID0gW3RoaXMudGlsZVgsIHRoaXMudGlsZVldOyAvLyDsnbTrj5nrsKntlqUg7Lih7KCV7J2EIOychO2VtOyEnCDrs7TqtIDtlahcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCB0aGlzLmFkZGVkVG9Xb3JsZCApIHtcclxuICAgICAgICAgICAgZGVsZXRlIEdMT0JBTC53b3JsZC5lbnRpdHlNYW5hZ2VyLmVudGl0aWVzQnlYeVt0aGlzLnRpbGVYICsgXCIsXCIgKyB0aGlzLnRpbGVZXTtcclxuICAgICAgICAgICAgW3RoaXMudGlsZVgsIHRoaXMudGlsZVldID0gW3RpbGVYLCB0aWxlWV07XHJcbiAgICAgICAgICAgIGlmICggR0xPQkFMLndvcmxkLmVudGl0eU1hbmFnZXIuZW50aXRpZXNCeVh5W3RpbGVYICsgXCIsXCIgKyB0aWxlWV0gIT0gbnVsbCApIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciggXCLimJ7imJ7imJ4g7Jik67iM7KCd7Yq46rCAIOyeiOuKlCDsnITsuZjsl5Ag7Jik67iM7KCd7Yq466W8IOydtOuPme2VmOugpO2VqFwiICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgR0xPQkFMLndvcmxkLmVudGl0eU1hbmFnZXIuZW50aXRpZXNCeVh5W3RpbGVYICsgXCIsXCIgKyB0aWxlWV0gPSB0aGlzO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIFt0aGlzLnRpbGVYLCB0aGlzLnRpbGVZXSA9IFt0aWxlWCwgdGlsZVldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBlbmFibGVEZWZhdWx0QW5pbWF0aW9uKCB2ICkge1xyXG4gICAgICAgIGlmICggdGhpcy5fX2FuaW1hdGlvblRpbWVyICkge1xyXG4gICAgICAgICAgICBpZiAoIHYgKSB7XHJcbiAgICAgICAgICAgICAgICBvblRpbWVyLmNhbGwoIHRoaXMgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX19hbmltYXRpb25UaW1lci5zdGFydCgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fX2FuaW1hdGlvblRpbWVyLnN0b3AoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdG9wUHJldmlvdXNBY3Rpb24oIHJlYXNvbiApIHtcclxuICAgICAgICB0aGlzLmVuYWJsZURlZmF1bHRBbmltYXRpb24oIHRydWUgKTtcclxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoIG5ldyBFdmVudCggXCJzdG9wQWN0aW9uXCIsIHsgcmVhc29uIH0gKSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIOyVoOuLiOuplOydtOyFmO2VmOuptOyEnCDsnbTrj5ntlZjquLBcclxuICAgIC8vIOyZuOu2gOyXkOyEnOuKlCDsnbTqsbgg67aI65+s7IScIOydtOuPme2VnOuLpFxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIG1vdmVUbyggdGlsZVgsIHRpbGVZICkge1xyXG4gICAgICAgIGlmICggR0xPQkFMLndvcmxkLmVudGl0eU1hbmFnZXIuZ2V0RW50aXR5KCB0aWxlWCwgdGlsZVkgKSApIHtcclxuICAgICAgICAgICAgLy8g64uk66W4IOyYpOu4jOygne2KuOqwgCDsnojri6QuXHJcbiAgICAgICAgICAgIC8vIOuyveyduOyngOuPhCDqsoDsgqztlbTslbztlZjrgpg/XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcFByZXZpb3VzQWN0aW9uKCBcIm1vdmVcIiApO1xyXG4gICAgICAgICAgICBpZiAoIHRoaXMuX193YWxrVHdlZW4gKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9fd2Fsa1R3ZWVuLnN0b3AoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCB7IHgsIHkgfSA9IEdMT0JBTC53b3JsZC50aWxlQ2VudGVyVG9Xb3JsZCggdGlsZVgsIHRpbGVZICk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldFRpbGVYeSggdGlsZVgsIHRpbGVZICk7XHJcbiAgICAgICAgICAgIGNvbnN0IHR3ID0gbmV3IFR3ZWVuKCB0aGlzLCB0aGlzLndhbGtTcGVlZCwgeyB4LCB5IH0sIHsgZWFzZTogZWFzaW5nLmluT3V0Q3ViaWMgfSApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fX3dhbGtUd2VlbiA9IHR3O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHR3O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDsg4HrjIDsooztkZzrpbwg7IKs7Jqp7ZWY64qUIO2DgOyehVxyXG4gICAgbW92ZVRvUmVsKCBheCwgYXkgKSB7XHJcbiAgICAgICAgdGhpcy5tb3ZlVG8oIHRoaXMudGlsZVggKyBheCwgdGhpcy50aWxlWSArIGF5ICk7XHJcbiAgICB9XHJcblxyXG4gICAgc3dhcExvY2F0aW9uKCB0YXJnZXQgKSB7XHJcbiAgICAgICAgY29uc29sZS5hc3NlcnQoIHRoaXMuYWRkZWRUb1dvcmxkICYmIHRhcmdldC5hZGRlZFRvV29ybGQsIFwi4pie4pie4pieIOyblOuTnOyXkCDsl4bripQg7Jik67iM7KCd7Yq47J2YIOychOy5mOulvCDrsJTqvrjroKTtlahcIiApO1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLl9fd2Fsa1R3ZWVuICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fX3dhbGtUd2Vlbi5zdG9wKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgeyB4LCB5IH0gPSBHTE9CQUwud29ybGQudGlsZUNlbnRlclRvV29ybGQoIHRhcmdldC50aWxlWCwgdGFyZ2V0LnRpbGVZICk7XHJcbiAgICAgICAgICAgIC8vdGhpcy5zZXRUaWxlWHkodGlsZVgsdGlsZVkpO1xyXG4gICAgICAgICAgICBjb25zdCB0dyA9IG5ldyBUd2VlbiggdGhpcywgdGhpcy53YWxrU3BlZWQsIHsgeCwgeSB9LCB7IGVhc2U6IGVhc2luZy5pbk91dEN1YmljIH0gKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX193YWxrVHdlZW4gPSB0dztcclxuICAgICAgICB9XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIHRhcmdldC5fX3dhbGtUd2VlbiApIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5fX3dhbGtUd2Vlbi5zdG9wKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgeyB4LCB5IH0gPSBHTE9CQUwud29ybGQudGlsZUNlbnRlclRvV29ybGQoIHRoaXMudGlsZVgsIHRoaXMudGlsZVkgKTtcclxuICAgICAgICAgICAgLy90aGlzLnNldFRpbGVYeSh0aWxlWCx0aWxlWSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHR3ID0gbmV3IFR3ZWVuKCB0YXJnZXQsIHRhcmdldC53YWxrU3BlZWQsIHsgeCwgeSB9LCB7IGVhc2U6IGVhc2luZy5pbk91dEN1YmljIH0gKTtcclxuXHJcbiAgICAgICAgICAgIHRhcmdldC5fX3dhbGtUd2VlbiA9IHR3O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgR0xPQkFMLndvcmxkLmVudGl0eU1hbmFnZXIuZW50aXRpZXNCeVh5W3RoaXMudGlsZVggKyBcIixcIiArIHRoaXMudGlsZVldID0gdGFyZ2V0O1xyXG4gICAgICAgIEdMT0JBTC53b3JsZC5lbnRpdHlNYW5hZ2VyLmVudGl0aWVzQnlYeVt0YXJnZXQudGlsZVggKyBcIixcIiArIHRhcmdldC50aWxlWV0gPSB0aGlzO1xyXG4gICAgICAgIFt0aGlzLnRpbGVYLCB0aGlzLnRpbGVZLCB0YXJnZXQudGlsZVgsIHRhcmdldC50aWxlWV0gPSBbdGFyZ2V0LnRpbGVYLCB0YXJnZXQudGlsZVksIHRoaXMudGlsZVgsIHRoaXMudGlsZVldO1xyXG4gICAgfVxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIOunteygleuztCDsnb3quLBcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBnZXRQcm9wZXJ0eVJlbCggYXgsIGF5ICkge1xyXG4gICAgICAgIHJldHVybiBHTE9CQUwud29ybGQuZ2V0UHJvcGVydHkoIHRoaXMudGlsZVggKyBheCwgdGhpcy50aWxlWSArIGF5ICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8g7Jik67iM7KCd7Yq4IOygleuztCDsnb3quLBcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBnZXRFbnRpdHlSZWwoIGF4LCBheSApIHtcclxuICAgICAgICByZXR1cm4gR0xPQkFMLndvcmxkLmVudGl0eU1hbmFnZXIuZ2V0RW50aXR5KCB0aGlzLnRpbGVYICsgYXgsIHRoaXMudGlsZVkgKyBheSApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEVudGl0eVByb3BlcnR5UmVsKCBheCwgYXkgKSB7XHJcbiAgICAgICAgY29uc3QgZW50aXR5ID0gR0xPQkFMLndvcmxkLmVudGl0eU1hbmFnZXIuZ2V0RW50aXR5KCB0aGlzLnRpbGVYICsgYXgsIHRoaXMudGlsZVkgKyBheSApO1xyXG5cclxuICAgICAgICByZXR1cm4gZW50aXR5ICE9IG51bGwgPyBlbnRpdHkucHJvcGVydHkgOiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIOyekOq4sOyekOyLoOydhCDsgq3soJztlZjquLBcclxuICAgIC8vIOyKpO2UhOudvOydtO2KuOuPhCDsponsi5wg7IKs65287KeQXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgcmVtb3ZlRnJvbVdvcmxkKCkge1xyXG4gICAgICAgIEdMT0JBTC53b3JsZC5lbnRpdHlNYW5hZ2VyLnJlbW92ZUVudGl0eSggdGhpcyApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIOyekOq4sOyekOyLoOydhCDsgq3soJztlZjripTrjbAg7Iqk7ZSE65287J207Yq464qUIOq3uOuMgOuhnCDrkZTri6RcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBkZXRhY2hGcm9tV29ybGQoKSB7XHJcbiAgICAgICAgR0xPQkFMLndvcmxkLmVudGl0eU1hbmFnZXIuZGV0YWNoRW50aXR5KCB0aGlzICk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIOyLnOyVvOqygOyCrFxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0geyo9fSB3YWxsXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyW119XHJcbiAgICAgKiBAbWVtYmVyb2YgRW50aXR5XHJcbiAgICAgKi9cclxuICAgIGNhbkJlU2Vlbiggd2FsbCApIHtcclxuICAgICAgICByZXR1cm4gR0xPQkFMLndvcmxkLnNpZ2h0TWFuYWdlci5jYW5CZVNlZW4oIHRoaXMudGlsZVgsIHRoaXMudGlsZVksIHdhbGwgKTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5TZWUoIHgsIHksIHdhbGwgKSB7XHJcbiAgICAgICAgaWYgKCB0eXBlb2YgeCA9PSBcIm51bWJlclwiICkge1xyXG4gICAgICAgICAgICByZXR1cm4gR0xPQkFMLndvcmxkLnNpZ2h0TWFuYWdlci5jYW5TZWUoIHRoaXMudGlsZVgsIHRoaXMudGlsZVksIHgsIHksIHdhbGwgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvL3jqsIAgZW50aXR565286rOgIOqwgOyglVxyXG4gICAgICAgICAgICAvL2l0ZW3rj4Qg6rCA64ql7ZWY64ukXHJcbiAgICAgICAgICAgIC8vbG9nKFwi67O06riw7LK07YGsXCIsdGhpcy50aWxlWCx0aGlzLnRpbGVZLHgudGlsZVgseC50aWxlWSx5KTtcclxuICAgICAgICAgICAgLy9sb2coR0xPQkFMLndvcmxkLmNhblNlZSh0aGlzLnRpbGVYLHRoaXMudGlsZVkseC50aWxlWCx4LnRpbGVZLHkpKTtcclxuICAgICAgICAgICAgcmV0dXJuIEdMT0JBTC53b3JsZC5zaWdodE1hbmFnZXIuY2FuU2VlKCB0aGlzLnRpbGVYLCB0aGlzLnRpbGVZLCB4LnRpbGVYLCB4LnRpbGVZLCB5ICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIO2KuOyciCDslaDri4jrqZTsnbTshZjsnYQg7KSR64uoXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgcmVzZXRQb3NpdGlvbkFuZENvbG9yKCkge1xyXG4gICAgICAgIC8vaWYgKHRoaXMuX193YWxrVHdlZW4pIHtcclxuICAgICAgICAvL3RoaXMuX193YWxrVHdlZW4uc3RvcCgpO1xyXG4gICAgICAgIC8vfVxyXG4gICAgICAgIFR3ZWVuLnN0b3BUYXJnZXQoIHRoaXMgKTtcclxuICAgICAgICBjb25zdCB7IHgsIHkgfSA9IEdMT0JBTC53b3JsZC50aWxlQ2VudGVyVG9Xb3JsZCggdGhpcy50aWxlWCwgdGhpcy50aWxlWSApO1xyXG5cclxuICAgICAgICB0aGlzLnNldFBvc2l0aW9uKCB4LHkgKTtcclxuICAgICAgICB0aGlzLnNldE92ZXJyaWRlQ29sb3IoIDB4ZmZmZmZmICk7XHJcbiAgICAgICAgdGhpcy5zZXRTY2FsZSggMSApO1xyXG4gICAgICAgIHRoaXMuc2V0QWxwaGEoIDEgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyDqt7zsspjsnZgg7IOB7Zi47J6R7JqpIOuMgOyDgSDrqqnroZ3snYQg7Ja76riwXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXNcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gYW5nbGVMaW1pdFxyXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSB0YXJnZXRYXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcj19IHRhcmdldFlcclxuICAgICAqIEByZXR1cm5zIHtFbnRpdHlbXX1cclxuICAgICAqIEBtZW1iZXJvZiBFbnRpdHlcclxuICAgICAqL1xyXG4gICAgZ2V0TmVhckVudGl0aWVzKCByYWRpdXMsIGFuZ2xlTGltaXQsIHRhcmdldFgsIHRhcmdldFkgKSB7XHJcbiAgICAgICAgY29uc3QgW3R4LCB0eV0gPSBbdGhpcy50aWxlWCwgdGhpcy50aWxlWV07XHJcbiAgICAgICAgLy8g67KU7JyE7JWI7J2YIOyXlO2LsO2LsOulvCDsnbzri6gg66qo65GQIOyWu+yWtOyYtFxyXG4gICAgICAgIGNvbnN0IGVudGl0aWVzID0gR0xPQkFMLndvcmxkLmVudGl0eU1hbmFnZXIuZ2V0RW50aXRpZXNJblJlY3QoIHR4IC0gcmFkaXVzLCB0eSAtIHJhZGl1cywgdHggKyByYWRpdXMsIHR5ICsgcmFkaXVzICk7XHJcbiAgICAgICAgY29uc3QgZW50aXR5SW5mb3MgPSBbXTtcclxuICAgICAgICBsZXQgYW5nbGUwO1xyXG5cclxuICAgICAgICBpZiAoIHRhcmdldFggIT0gbnVsbCAmJiB0YXJnZXRZICE9IG51bGwgKSB7XHJcbiAgICAgICAgICAgIGFuZ2xlMCA9ICggTWF0aC5hdGFuMiggdGFyZ2V0WSAtIHRoaXMueSwgdGFyZ2V0WCAtIHRoaXMueCApIC8gTWF0aC5QSSAqIDE4MCApICsgMzYwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFuZ2xlMCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vbG9nKFwi67Cc6rKs7ZWcIO2BrOumrOyzkOyImFwiLHQubGVuZ3RoLHgseSxhbmdsZTApO1xyXG4gICAgICAgIGZvciAoIGNvbnN0IGkgaW4gZW50aXRpZXMgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVudGl0eSA9IGVudGl0aWVzW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBkaXN0ID0gR0xPQkFMLndvcmxkLmdldERpc3RhbmNlQmV0d2VlbkVudGl0aWVzKCB0aGlzLCBlbnRpdHkgKTtcclxuXHJcbiAgICAgICAgICAgIGlmICggdGhpcyAhPSBlbnRpdHkgJiYgZGlzdCA8PSByYWRpdXMgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhbmdsZSA9IE1hdGguZmxvb3IoIE1hdGguYWJzKCAoIE1hdGguYXRhbjIoIGVudGl0eS50aWxlWSAtIHRoaXMudGlsZVksIGVudGl0eS50aWxlWCAtIHRoaXMudGlsZVggKSAvIE1hdGguUEkgKiAxODAgKSArIDM2MCAtIGFuZ2xlMCApICk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBhbmdsZUxpbWl0ID09IG51bGwgfHwgYW5nbGUgPD0gYW5nbGVMaW1pdCApIHtcclxuICAgICAgICAgICAgICAgICAgICBlbnRpdHlJbmZvcy5wdXNoKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3Q6ICAgZGlzdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGU6ICBhbmdsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5OiBlbnRpdHlcclxuICAgICAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL2xvZyhcIu2BrOumrOyzkFwiLHYudGlsZVgsdi50aWxlWSxkaXN0LGFuZ2xlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbnRpdHlJbmZvcy5zb3J0KCAoIGEsIGIgKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICggYS5kaXN0ID09IGIuZGlzdCApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhLmFuZ2xlIC0gYi5hbmdsZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhLmRpc3QgLSBiLmRpc3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ICk7XHJcbiAgICAgICAgaWYgKCBlbnRpdGllcy5sZW5ndGggPiAwICkge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHRFbnRpdGllcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgZm9yICggY29uc3QgaSBpbiBlbnRpdHlJbmZvcyApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHYgPSBlbnRpdHlJbmZvc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXN1bHRFbnRpdGllcy5wdXNoKCB2LmVudGl0eSApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0RW50aXRpZXM7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyDsnbTrpoTqs7wg7ISk66qFIOyWu+q4sFxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGdldE5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZSB8fCBcIuydtOumhCDsl4bripQg66y07Ja46rCAXCI7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGdldERlc2MoKSB7XHJcbiAgICAgICAgbGV0IGRlc2M7XHJcblxyXG4gICAgICAgIGRlc2MgPSB0aGlzLnByb3BlcnR5LmRlc2M7XHJcbiAgICAgICAgaWYgKCAhZGVzYyApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwi7ISk66qF7J20IOyXhuyKteuLiOuLpFwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkZXNjO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgc3RhdGljIGdlbmVyYXRlTmV3SWQoKSB7XHJcbiAgICAgICAgcmV0dXJuICsrdGhpcy5uZXh0SWQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbkVudGl0eS5uZXh0SWQgPSAwO1xyXG5cclxuIiwiaW1wb3J0IHsgQmFzaWNDb21wb25lbnRzLCBDb21wb25lbnQsIFR3ZWVuLCBNZXNoLCBUZXh0dXJlQmFzZSwgVXRpbHMsIGVhc2luZywgTW92aWVDbGlwLCBTcHJpdGUsIEV2ZW50LCBUaW1lciB9IGZyb20gXCJAZW5naW5lL2ZsYXRmYXN0XCI7XHJcblxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9wcyBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICAvKipcclxuICAgICAqQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBQcm9wcy5cclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBEQlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleVxyXG4gICAgICogQG1lbWJlcm9mIFByb3BzXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKCBEQiwga2V5ICkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuaWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy50aWxlWCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnRpbGVZID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFByb3h5KCB0aGlzLHtcclxuICAgICAgICAgICAgZ2V0OiAoIHQsayApID0+IHtcclxuICAgICAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRba10gIT09IHVuZGVmaW5lZCA/IHRba10gOiBEQltrZXldW2tdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgV29ybGRFbnRpdHkgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IoIHdvcmxkLHByb3BzICkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy53b3JsZCA9IHdvcmxkO1xyXG4gICAgICAgIHRoaXMuZW50aXR5TWFuYWdlciA9IHdvcmxkLmdldENvbXBvbmVudCggXCJFbnRpdHlNYW5hZ2VyXCIgKTtcclxuICAgICAgICB0aGlzLnByb3BzID0gcHJvcHM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VGlsZVh5KCB4LHkgKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG1vdmVUbyggeCx5ICkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBzd2FwTG9jYXRpb24oIHRhcmdldCApIHtcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuIiwiaW1wb3J0IHsgU291bmQsQml0bWFwLCBUZXh0dXJlLCBUZXh0dXJlQmFzZSwgU3ByaXRlLCBFdmVudCwgVGltZXIgfSBmcm9tIFwiQGVuZ2luZS9mbGF0ZmFzdFwiO1xyXG5cclxuaW1wb3J0IEVudGl0eSBmcm9tIFwiLi9lbnRpdHlcIjtcclxuaW1wb3J0IFJhbmRvbSBmcm9tIFwiQGxpYi9yYW5kb21cIjtcclxuaW1wb3J0IEljb25QYWNrIGZyb20gXCJAbGliL2ljb25QYWNrXCI7XHJcbmltcG9ydCBHTE9CQUwgZnJvbSBcIi4uL2dsb2JhbFwiO1xyXG5jb25zdCBFbnRpdHlDb21wb25lbnRzID0gcmVxdWlyZSggXCIuL2VudGl0eUNvbXBvbmVudHNcIiApO1xyXG5cclxuXHJcbi8qXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVudGl0eSB7XHJcbiAgICBFbnRpdHlMb2dpY1xyXG4gICAgV29ybGRcclxufVxyXG5cclxuKi9cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEl0ZW0gZXh0ZW5kcyBFbnRpdHkge1xyXG4gICAgY29uc3RydWN0b3IoIG5hbWUsdGlsZVgsdGlsZVksb3B0aW9ucyApIHtcclxuICAgICAgICBzdXBlciggbmFtZSx0aWxlWCx0aWxlWSxvcHRpb25zICk7XHJcbiAgICAgICAgdGhpcy5pc0l0ZW0gPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZmlsbFByb3BlcnRpZXMoIEl0ZW0ucHJvcGVydHksbmFtZSApO1xyXG5cclxuICAgICAgICB0aGlzLnByb3BzID0gdGhpcy5hZGRDb21wb25lbnQoIG5ldyBFbnRpdHlDb21wb25lbnRzLlByb3BzKCBJdGVtLnByb3BlcnR5LCBuYW1lICkgKTtcclxuICAgICAgICB0aGlzLmNvbnRyb2xsZXIgPSB0aGlzLmFkZENvbXBvbmVudCggbmV3IEVudGl0eUNvbXBvbmVudHMuV29ybGRFbnRpdHkoIEdMT0JBTC53b3JsZCx0aGlzLnByb3BzICkgKTtcclxuICAgICAgICBjb25zdCBwciA9IHRoaXMucHJvcGVydHk7XHJcblxyXG4gICAgICAgIHRoaXMubmFtZSA9IHByLm5hbWUgfHwgbmFtZTtcclxuICAgICAgICB0aGlzLnJhcml0eSA9IHRoaXMub3B0aW9ucy5yYXJpdHkgfHwgdGhpcy5wcm9wZXJ0eS5yYXJpdHkgfHwgMDtcclxuICAgICAgICB0aGlzLmNvbG9yID0gKCB0aGlzLm9wdGlvbnMuY29sb3IgIT0gbnVsbCApID8gdGhpcy5vcHRpb25zLmNvbG9yIDogSXRlbS5yYXJpdHlDb2xvclt0aGlzLnJhcml0eV07XHJcbiAgICAgICAgdGhpcy50ZXh0dXJlID0gdGhpcy5vcHRpb25zLmZpbHRlcmluZyA/IEl0ZW0udGV4dHVyZUZpbHRlcmVkIDogSXRlbS50ZXh0dXJlO1xyXG4gICAgICAgIHRoaXMudGlsZVdpZHRoID0gSXRlbS50aWxlV2lkdGg7XHJcbiAgICAgICAgdGhpcy50aWxlSGVpZ2h0ID0gSXRlbS50aWxlSGVpZ2h0O1xyXG5cclxuICAgICAgICB0aGlzLnBvc3RJbml0KCBJdGVtICk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHNob3dEcm9wKCkge1xyXG4gICAgICAgIHRoaXMubW92aWVDbGlwLmdvdG9BbmRQbGF5KCBcImRyb3BcIiApO1xyXG4gICAgICAgIGlmICggdGhpcy5wcm9wZXJ0eS5kcm9wU291bmRJbW0gKSB7XHJcbiAgICAgICAgICAgIGlmICggdGhpcy5wcm9wZXJ0eS5kcm9wU291bmQgKSB7XHJcbiAgICAgICAgICAgICAgICBTb3VuZC5wbGF5U291bmQoIFwic291bmQvXCIgKyB0aGlzLnByb3BlcnR5LmRyb3BTb3VuZCApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgU291bmQucGxheVNvdW5kKCBcInNvdW5kL2Ryb3BfZGVmYXVsdC53YXZcIiApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgU291bmQucGxheVNvdW5kKCBcInNvdW5kL2Ryb3Bfc3Bpbi53YXZcIiApO1xyXG4gICAgICAgICAgICBpZiAoIHRoaXMucHJvcGVydHkuZHJvcFNvdW5kICkge1xyXG4gICAgICAgICAgICAgICAgVGltZXIuZGVsYXllZENhbGwoIDkwMCwgKCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLmdldFBhcmVudCgpICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTb3VuZC5wbGF5U291bmQoIFwic291bmQvXCIgKyB0aGlzLnByb3BlcnR5LmRyb3BTb3VuZCApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIFRpbWVyLmRlbGF5ZWRDYWxsKCA5MDAsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaXMuZ2V0UGFyZW50KCkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNvdW5kLnBsYXlTb3VuZCggXCJzb3VuZC9kcm9wX2RlZmF1bHQud2F2XCIgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICAvLyBJdGVt7J2AIOuLpOuluCDsmKTruIzsoJ3tirjsmYAg6rCZ7J2AIOychOy5mOyXkCDsnojsnYQg7IiYIOyeiOuLpFxyXG4gICAgc2V0VGlsZVh5KCB0aWxlWCx0aWxlWSApIHtcclxuICAgICAgICBpZiAoIHRoaXMubGFzdFRpbGVYICE9ICB0aGlzLnRpbGVYICYmIHRoaXMubGFzdFRpbGVZICE9ICB0aGlzLnRpbGVZICkge1xyXG4gICAgICAgICAgICBbdGhpcy5sYXN0VGlsZVgsIHRoaXMubGFzdFRpbGVZXSA9IFt0aGlzLnRpbGVYLCB0aGlzLnRpbGVZXTsgLy8g7J2064+Z67Cp7ZalIOy4oeygleydhCDsnITtlbTshJwg67O06rSA7ZWoXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggdGhpcy5hZGRlZFRvV29ybGQgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHgxID0gdGhpcy50aWxlWDtcclxuICAgICAgICAgICAgY29uc3QgeTEgPSB0aGlzLnRpbGVZO1xyXG5cclxuICAgICAgICAgICAgR0xPQkFMLndvcmxkLmVudGl0eU1hbmFnZXIucmVtb3ZlRW50aXR5KCB0aGlzICk7XHJcbiAgICAgICAgICAgIHRoaXMudGlsZVggPSB0aWxlWDtcclxuICAgICAgICAgICAgdGhpcy50aWxlWSA9IHRpbGVZO1xyXG4gICAgICAgICAgICBHTE9CQUwud29ybGQuZW50aXR5TWFuYWdlci5hZGRFbnRpdHkoIHRoaXMgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBbdGhpcy50aWxlWCwgdGhpcy50aWxlWV0gPSBbdGlsZVgsIHRpbGVZXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SWNvbiggZmlsdGVyaW5nLGZsaXAgKSB7XHJcbiAgICAgICAgY29uc3QgaXRlbSA9IG5ldyBJdGVtKCB0aGlzLl9fa2V5LHsgZmlsdGVyaW5nOiBmaWx0ZXJpbmcsZmxpcDogZmxpcCB9ICk7XHJcblxyXG4gICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFR5cGVJY29uKCkge1xyXG4gICAgICAgIGNvbnN0IHR5cGUgPSB0aGlzLnByb3BlcnR5LnR5cGUgfHwgXCJldGNcIjtcclxuICAgICAgICBjb25zdCBbY29sLHJvd10gPSBJdGVtLnR5cGVUb0ljb25bdHlwZV07XHJcbiAgICAgICAgY29uc3QgaXRlbSA9IG5ldyBJY29uUGFjayggSXRlbS50ZXh0dXJlRXF1aXBTbG90LGNvbCxyb3csMTYsMTYgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICB9XHJcblxyXG4gICAgZHJvcCggeCx5ICkge1xyXG4gICAgICAgIHRoaXMuZXF1aXBwZWQgPSBmYWxzZTtcclxuICAgICAgICBjb25zdCB7IHg6IHB4LCB5OiBweSB9ID0gR0xPQkFMLndvcmxkLnRpbGVDZW50ZXJUb1dvcmxkKCB4LCB5ICk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0UG9zaXRpb24oIHB4LHB5ICk7XHJcbiAgICAgICAgdGhpcy50aWxlWCA9IHg7XHJcbiAgICAgICAgdGhpcy50aWxlWSA9IHk7XHJcbiAgICAgICAgR0xPQkFMLndvcmxkLmVudGl0eU1hbmFnZXIuYWRkRW50aXR5KCB0aGlzICk7XHJcbiAgICAgICAgdGhpcy5zaG93RHJvcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzRXF1aXBwYWJsZSgpIHtcclxuICAgICAgICBjb25zdCB0eXBlID0gdGhpcy5wcm9wZXJ0eS50eXBlO1xyXG5cclxuICAgICAgICBpZiAoIEl0ZW0udHlwZUVxdWlwTWF4W3R5cGVdICYmIEl0ZW0udHlwZUVxdWlwTWF4W3R5cGVdID4gMCApIHtcclxuICAgICAgICAgICAgcmV0dXJuIEl0ZW0udHlwZUVxdWlwTWF4W3R5cGVdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaXNSYW5nZWQoKSB7XHJcbiAgICAgICAgaWYgKCB0aGlzLnByb3BlcnR5LnR5cGUgPT0gXCJyYW5nZWRcIiApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIGVxdWlwKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCBcIuyepeu5hOyepeywqVwiLHRoaXMubmFtZSApO1xyXG4gICAgICAgIHRoaXMuZXF1aXBwZWQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHVuZXF1aXAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coIFwi7J6l67mE7ZW07KCcXCIsdGhpcy5uYW1lICk7XHJcbiAgICAgICAgdGhpcy5lcXVpcHBlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEludmVudG9yeVNwcml0ZSgpIHtcclxuICAgICAgICBjb25zdCBzcHIgPSBuZXcgU3ByaXRlKCk7XHJcbiAgICAgICAgY29uc3QgYiA9IG5ldyBCaXRtYXAoIG5ldyBUZXh0dXJlKCBcIml0ZW1QYW5lbC5wbmdcIixmYWxzZSx7IGZvcm1hdDogVGV4dHVyZUJhc2UuUkdCQTU1NTEgfSApICk7XHJcblxyXG4gICAgICAgIGIuc2V0QW5jaG9yUG9pbnQoIDAuNSwwLjUgKTtcclxuICAgICAgICBjb25zdCBpY29uID0gdGhpcy5nZXRJY29uKCk7XHJcblxyXG4gICAgICAgIGljb24uc2V0UG9zaXRpb24oIC02MCArIDE2LDEgKTtcclxuICAgICAgICBiLmFkZENoaWxkKCBpY29uICk7XHJcbiAgICAgICAgYi5zZXRPdmVycmlkZUNvbG9yKCB0aGlzLmNvbG9yICk7XHJcbiAgICAgICAgY29uc3QgdHcgPSBHTE9CQUwuaW50ZXJmYWNlLmdldEhpcmVzVGV4dFdyYXAoIHRoaXMubmFtZSApO1xyXG5cclxuICAgICAgICB0dy5zZXRQb3NpdGlvbiggLTYwICsgMjksLTcgKTtcclxuICAgICAgICB0dy5zZXRUZXh0Q29sb3IoIHRoaXMuY29sb3IgKTtcclxuICAgICAgICBzcHIuYWRkQ2hpbGQoIGIgKTtcclxuICAgICAgICBzcHIuYWRkQ2hpbGQoIHR3ICk7XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5pc0VxdWlwcGFibGUoKSApIHtcclxuICAgICAgICAgICAgc3ByLnVwZGF0ZUVxdWlwID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCBzcHIuZXF1aXBJY29uICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNwci5lcXVpcEljb24ucmVtb3ZlRnJvbVBhcmVudCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgYjEgPSBuZXcgQml0bWFwKCBuZXcgVGV4dHVyZSggXCJpdGVtVHlwZUJhY2sucG5nXCIsIGZhbHNlLCB7IGZvcm1hdDogVGV4dHVyZUJhc2UuUkdCQTU1NTEgfSApICk7XHJcblxyXG4gICAgICAgICAgICAgICAgYjEuc2V0QW5jaG9yUG9pbnQoIDAuNSwgMC41ICk7XHJcbiAgICAgICAgICAgICAgICBiMS5zZXRQb3NpdGlvbiggNjAgLSAxNiwgMCApO1xyXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLmVxdWlwcGVkICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGIxLnNldE92ZXJyaWRlQ29sb3IoIDB4ZmZmZmZmICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGIxLnNldE92ZXJyaWRlQ29sb3IoIDB4MjAyMDIwICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0eXBlSWNvbiA9IHRoaXMuZ2V0VHlwZUljb24oKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0eXBlSWNvbi5zZXRPdmVycmlkZUNvbG9yKCAweDAwMDAwMCApO1xyXG4gICAgICAgICAgICAgICAgYjEuYWRkQ2hpbGQoIHR5cGVJY29uICk7XHJcbiAgICAgICAgICAgICAgICBzcHIuYWRkQ2hpbGQoIGIxICk7XHJcbiAgICAgICAgICAgICAgICBzcHIuZXF1aXBJY29uID0gYjE7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHNwci51cGRhdGVFcXVpcCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHR5cGVJY29uID0gdGhpcy5nZXRUeXBlSWNvbigpO1xyXG5cclxuICAgICAgICAgICAgdHlwZUljb24uc2V0T3ZlcnJpZGVDb2xvciggMHgyMDIwMjAgKTtcclxuICAgICAgICAgICAgdHlwZUljb24uc2V0UG9zaXRpb24oIDYwIC0gMTYsMCApO1xyXG4gICAgICAgICAgICBzcHIuYWRkQ2hpbGQoIHR5cGVJY29uICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gc3ByO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKlxyXG5cclxuXHTrjIDrr7jsp4Ag7Iqk7Yq466eBXHJcblx07LWc7IaM6rCSW37stZzrjIDqsJJdW+uwuOufsOyKpF1b67CU7J207JWE7IqkXSBbLyDrjIDtmJXrjIDsg4HstZzshozqsJJbfuy1nOuMgOqwkl1b67C465+w7IqkXVvrsJTsnbTslYTsiqRdIF1cclxuXHJcblx0MX4xMEIrLzJ+MTBDLVxyXG5cdOyGjO2YleyXkCDrjIDtlbTshJwgMX4xMOuMgOuvuOyngCDrsLjrn7DsiqTripQgQig9PTIuMCnsnbTqs6AgYmlhc+uKlCAwLjY7XHJcblx064yA7ZiV7JeQIOuMgO2VtOyEnCAyfjEw64yA66+47KeAIOuwuOufsOyKpOuKlCBDKD09MS43NSnsnbTqs6AgYmlhc+uKlCAwLjQ7XHJcblx0Ki9cclxuICAgIHN0YXRpYyBwYXJzZURhbWFnZVN0cmluZyggc3RyICkge1xyXG4gICAgICAgIC8vc3RyaW5nLm1hdGNoKHN0ciwgXCIoW14vXSspLz8oLiopXCJcclxuICAgICAgICBsZXQgWywgc21hbGwsIGJpZ10gPSAvKFteL10rKVxcLz8oLiopLy5leGVjKCBzdHIgKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcGFyc2UoIHMgKSB7XHJcbiAgICAgICAgICAgIC8vbGV0IG1pbixtYXgsYmFsLGJpID0gc3RyaW5nLm1hdGNoKHMsXCIoJWQrKX4/KCVkKikoJWE/KShbJSslLV0qKVwiKTtcclxuICAgICAgICAgICAgbGV0IFssIG1pbiwgbWF4LCBiYWwsIGJpXSA9IC8oXFxkKyl+PyhcXGQqKShbQS1FXT8pKFsrLV0qKS8uZXhlYyggcyApO1xyXG4gICAgICAgICAgICBjb25zdCBiYWxUYWJsZSA9IHtcclxuICAgICAgICAgICAgICAgIFtcIkFcIl06IDMuMCxcclxuICAgICAgICAgICAgICAgIFtcIkJcIl06IDIuMCxcclxuICAgICAgICAgICAgICAgIFtcIkNcIl06IDEuNzUsXHJcbiAgICAgICAgICAgICAgICBbXCJEXCJdOiAxLjUsXHJcbiAgICAgICAgICAgICAgICBbXCJFXCJdOiAxLjI1LFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgYmFsID0gYmFsID8gYmFsVGFibGVbYmFsLnRvVXBwZXJDYXNlKCldIDogMS4wO1xyXG4gICAgICAgICAgICBjb25zdCBiaVRhYmxlID0ge1xyXG4gICAgICAgICAgICAgICAgW1wiKysrXCJdOiAxLjAsXHJcbiAgICAgICAgICAgICAgICBbXCIrK1wiXTogIDAuNzUsXHJcbiAgICAgICAgICAgICAgICBbXCIrXCJdOiAgIDAuNixcclxuICAgICAgICAgICAgICAgIFtcIi8vLVwiXTogMC4wLFxyXG4gICAgICAgICAgICAgICAgW1wiLy9cIl06ICAwLjI1LFxyXG4gICAgICAgICAgICAgICAgW1wiLVwiXTogICAwLjQsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBiaSA9IGJpVGFibGVbYmldICE9IG51bGwgPyBiaVRhYmxlW2JpXSA6IDAuNTtcclxuICAgICAgICAgICAgY29uc3QgX21pbiA9IHBhcnNlRmxvYXQoIG1pbiApO1xyXG4gICAgICAgICAgICBjb25zdCBfbWF4ID0gbWF4ID09IFwiXCIgPyBtaW4gOiBwYXJzZUZsb2F0KCBtYXggKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBbX21pbixfbWF4LGJhbCxiaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJpZyA9IGJpZyA9PSBcIlwiID8gc21hbGwgOiBiaWc7XHJcbiAgICAgICAgY29uc3QgW21pbixtYXgsYmFsLGJpXSA9IHBhcnNlKCBzbWFsbCApO1xyXG5cclxuICAgICAgICByZXR1cm4gW21pbixtYXgsYmFsLGJpLC4uLnBhcnNlKCBiaWcgKV07XHJcbiAgICB9XHJcblxyXG4gICAgY2FsY3VsYXRlRGFtYWdlKCkge1xyXG4gICAgICAgIGNvbnN0IFttaW4sbWF4LGJhbCxiaSxtaW4yLG1heDIsYmFsMixiaTJdID0gSXRlbS5wYXJzZURhbWFnZVN0cmluZyggdGhpcy5wcm9wZXJ0eS5hdHRhY2sgKTtcclxuICAgICAgICBjb25zdCBkYW1hZ2UgPSBHTE9CQUwud29ybGQucmFuZG9tR2VuZXJhdG9yLmdldERhbWFnZSggYmFsLGJpLG1pbixtYXggKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRhbWFnZTtcclxuICAgIH1cclxufVxyXG5cclxuLypcclxuLy/thYzsiqTtirhcclxuVGltZXIuZGVsYXllZENhbGwoMTAwLGZ1bmN0aW9uKCk7XHJcblx0bG9nKEl0ZW0ucGFyc2VEYW1hZ2VTdHJpbmcoXCIxfjMwWisrXCIpKTtcclxuZW5kKTtcclxuKi9cclxuXHJcbkl0ZW0ucHJvcGVydHkgPSB7XHJcblxyXG4gICAgW1wi66Gx7IaM65OcXCJdOiB7XHJcbiAgICAgICAgaW1hZ2U6ICBbMSwgMV0sIHR5cGU6ICAgXCJtZWxlZVwiLFxyXG4gICAgICAgIGF0dGFjazogXCI0fjhCLzR+OUNcIixcclxuICAgIH0sXHJcbiAgICBbXCLruIzroZzrk5zshozrk5xcIl06IHtcclxuICAgICAgICBpbWFnZTogIFsyLCAxXSwgdHlwZTogICBcIm1lbGVlXCIsXHJcbiAgICAgICAgYXR0YWNrOiBcIjR+OUMvNH45QlwiLFxyXG4gICAgfSxcclxuICAgIFtcIuuPhOuBvFwiXToge1xyXG4gICAgICAgIGltYWdlOiAgWzMsIDFdLCB0eXBlOiAgIFwibWVsZWVcIixcclxuICAgICAgICBhdHRhY2s6IFwiM34xMEUvM34xMERcIixcclxuICAgIH0sXHJcbiAgICBbXCLtgazroZzsmrDrsJRcIl06IHtcclxuICAgICAgICBpbWFnZTogIFs0LCAxXSwgdHlwZTogICBcIm1lbGVlXCIsXHJcbiAgICAgICAgYXR0YWNrOiBcIjJ+NlwiLFxyXG4gICAgfSxcclxuICAgIFtcIuyIj+yGjOuTnFwiXToge1xyXG4gICAgICAgIGltYWdlOiAgWzUsIDFdLCB0eXBlOiAgIFwibWVsZWVcIixcclxuICAgICAgICBhdHRhY2s6IFwiM342QlwiLFxyXG4gICAgfSxcclxuICAgIFtcIuyZhOuTnFwiXToge1xyXG4gICAgICAgIGltYWdlOiAgWzYsIDFdLCB0eXBlOiAgIFwibWVsZWVcIixcclxuICAgICAgICBhdHRhY2s6IFwiMn41XCIsXHJcbiAgICB9LFxyXG4gICAgW1wi7JmE65OcMlwiXToge1xyXG4gICAgICAgIGltYWdlOiAgWzcsIDFdLCB0eXBlOiAgIFwibWVsZWVcIixcclxuICAgICAgICBhdHRhY2s6IFwiMn41XCIsXHJcbiAgICB9LFxyXG4gICAgW1wi7KCE7Yis64+E64G8XCJdOiB7XHJcbiAgICAgICAgaW1hZ2U6ICBbOCwgMV0sIHR5cGU6ICAgXCJtZWxlZVwiLFxyXG4gICAgICAgIGF0dGFjazogXCIzfjExRS8zfjExRFwiLFxyXG4gICAgfSxcclxuICAgIFtcIuyGkOuPhOuBvFwiXToge1xyXG4gICAgICAgIGltYWdlOiAgWzEwLCAxXSwgdHlwZTogICBcIm1lbGVlXCIsXHJcbiAgICAgICAgYXR0YWNrOiBcIjN+MTFFLzN+MTBEXCIsXHJcbiAgICB9LFxyXG4gICAgW1wi66q965Gl7J20XCJdOiB7XHJcbiAgICAgICAgaW1hZ2U6ICBbMTEsIDFdLCB0eXBlOiAgIFwibWVsZWVcIixcclxuICAgICAgICBhdHRhY2s6IFwiMn44LzJ+N1wiLFxyXG4gICAgfSxcclxuICAgIFtcIuunney5mFwiXToge1xyXG4gICAgICAgIGltYWdlOiAgWzEyLCAxXSwgdHlwZTogICBcIm1lbGVlXCIsXHJcbiAgICAgICAgYXR0YWNrOiBcIjJ+OS8xfjEwXCIsXHJcbiAgICB9LFxyXG4gICAgW1wi64KY7J207ZSEXCJdOiB7XHJcbiAgICAgICAgaW1hZ2U6ICBbMTMsIDFdLCB0eXBlOiAgIFwibWVsZWVcIiwgYW5pbTogICBcInN0YWJcIixcclxuICAgICAgICBhdHRhY2s6IFwiM343Q1wiLFxyXG4gICAgICAgIGRlc2M6ICAgXCLrkZAg67yYIOygleuPhCDquLjsnbTsnZgg7Lm8LiDthLHsnbTrgpgg7JiG6rWs66asIOuTseydmCDsoIHsnZgg6riJ7IaM66W8IOywjOultOq4sCDsoovrj4TroZ0g65CY7Ja07J6I64ukLlwiLFxyXG4gICAgfSxcclxuICAgIFtcIuyCvOyngOywvVwiXToge1xyXG4gICAgICAgIGltYWdlOiAgWzE0LCAxXSwgdHlwZTogICBcIm1lbGVlXCIsIGFuaW06ICAgXCJzdGFiXCIsXHJcbiAgICAgICAgYXR0YWNrOiBcIjN+OUMvMn4xMEJcIixcclxuICAgIH0sXHJcbiAgICBbXCLrjIDtmJXrp53suZhcIl06IHtcclxuICAgICAgICBpbWFnZTogIFsxNSwgMV0sIHR5cGU6ICAgXCJtZWxlZVwiLFxyXG4gICAgICAgIGF0dGFjazogXCIzfjkvMn4xMFwiLFxyXG4gICAgfSxcclxuICAgIFtcIuyGkOyXkOuBvOuKlFwiXToge1xyXG4gICAgICAgIGltYWdlOiAgWzE2LCAxXSwgdHlwZTogICBcIm1lbGVlXCIsIGFuaW06ICAgXCJoYW5kXCIsXHJcbiAgICAgICAgYXR0YWNrOiBcIjF+NlwiLFxyXG4gICAgfSxcclxuICAgIFtcIuyZhOuTnDNcIl06IHtcclxuICAgICAgICBpbWFnZTogIFsxNywgMV0sIHR5cGU6ICAgXCJtZWxlZVwiLFxyXG4gICAgICAgIGF0dGFjazogXCIyfjVcIixcclxuICAgIH0sXHJcbiAgICBbXCLsiI/rs7TsmrBcIl06IHtcclxuICAgICAgICBpbWFnZTogIFsxOCwgMV0sIHR5cGU6ICAgXCJyYW5nZWRcIixcclxuICAgICAgICBhdHRhY2s6IFwiMn43RC8xfjdDXCIsXHJcbiAgICAgICAgZGVzYzogICBcIuuCmOustOyZgCDtmZzsi5zsnITsnZgg7YOE7ISx7J2EIOydtOyaqe2VtCDrqYDrpqwg7J6I64qUIOyggeydhCDrp57stpTripQg66y06riwLiDshJzshJwg67mg66W06rKMIOyPoCDsiJgg7J6I7J2EIOygleuPhOydmCDsoIHri7ntlZwg7YGs6riw7J2YIO2ZnOydtOuLpC5cIixcclxuICAgIH0sXHJcbiAgICBbXCLsi63snpDqtoFcIl06IHtcclxuICAgICAgICBpbWFnZTogIFsxOSwgMV0sIHR5cGU6ICAgXCJyYW5nZWRcIixcclxuICAgICAgICBhdHRhY2s6IFwiMn43Qy8xfjZCXCIsXHJcbiAgICB9LFxyXG4gICAgW1wi7JmE65OcNFwiXToge1xyXG4gICAgICAgIGltYWdlOiAgWzIsIDJdLCB0eXBlOiAgIFwibWVsZWVcIixcclxuICAgICAgICBhdHRhY2s6IFwiMn41XCIsXHJcbiAgICB9LFxyXG4gICAgW1wi7Zes67KE65OcXCJdOiB7XHJcbiAgICAgICAgaW1hZ2U6ICBbNCwgMl0sIHR5cGU6ICAgXCJtZWxlZVwiLFxyXG4gICAgICAgIGF0dGFjazogXCIxfjExQy8yfjEyQlwiLFxyXG4gICAgfSxcclxuICAgIFtcIuyngO2MoeydtDJcIl06IHtcclxuICAgICAgICBpbWFnZTogIFs1LCAyXSwgdHlwZTogICBcIm1lbGVlXCIsXHJcbiAgICAgICAgYXR0YWNrOiBcIjF+OFwiLFxyXG4gICAgfSxcclxuICAgIFtcIuyDiOy0nVwiXToge1xyXG4gICAgICAgIGltYWdlOiAgWzYsIDJdLCB0eXBlOiAgIFwicmFuZ2VkXCIsXHJcbiAgICAgICAgYXR0YWNrOiBcIjF+NFwiLFxyXG4gICAgfSxcclxuICAgIFtcIuywvVwiXToge1xyXG4gICAgICAgIGltYWdlOiAgWzcsIDJdLCB0eXBlOiAgIFwibWVsZWVcIiwgYW5pbTogICBcInN0YWJcIixcclxuICAgICAgICBhdHRhY2s6IFwiMn4xMEMvMn4xMENcIixcclxuICAgIH0sXHJcbiAgICBbXCLssL0yXCJdOiB7XHJcbiAgICAgICAgaW1hZ2U6ICBbOCwgMl0sIHR5cGU6ICAgXCJtZWxlZVwiLCBhbmltOiAgIFwic3RhYlwiLFxyXG4gICAgICAgIGF0dGFjazogXCIyfjEwQy8zfjExQ1wiLFxyXG4gICAgfSxcclxuICAgIFtcIuugjOyKpFwiXToge1xyXG4gICAgICAgIGltYWdlOiAgWzksIDJdLCB0eXBlOiAgIFwibWVsZWVcIiwgYW5pbTogICBcInN0YWJcIixcclxuICAgICAgICBhdHRhY2s6IFwiNH4xMEQvNX4xMUNcIixcclxuICAgIH0sXHJcbiAgICBbXCLsi5zrr7jthLBcIl06IHtcclxuICAgICAgICBpbWFnZTogIFsxMCwgMl0sIHR5cGU6ICAgXCJtZWxlZVwiLFxyXG4gICAgICAgIGF0dGFjazogXCI1fjhCXCIsXHJcbiAgICB9LFxyXG4gICAgW1wi7YyU7Iuc7JioXCJdOiB7XHJcbiAgICAgICAgaW1hZ2U6ICBbMTEsIDJdLCB0eXBlOiAgIFwibWVsZWVcIixcclxuICAgICAgICBhdHRhY2s6IFwiNH45QlwiLFxyXG4gICAgfSxcclxuICAgIFtcIuuqqOuLneyKpO2DgFwiXToge1xyXG4gICAgICAgIGltYWdlOiAgWzEyLCAyXSwgdHlwZTogICBcIm1lbGVlXCIsXHJcbiAgICAgICAgYXR0YWNrOiBcIjJ+OVwiLFxyXG4gICAgfSxcclxuICAgIFtcIuyyoO2HtFwiXToge1xyXG4gICAgICAgIGltYWdlOiAgWzEzLCAyXSwgdHlwZTogICBcIm1lbGVlXCIsXHJcbiAgICAgICAgYXR0YWNrOiBcIjN+OVwiLFxyXG4gICAgfSxcclxuICAgIFtcIuyxhOywjVwiXToge1xyXG4gICAgICAgIGltYWdlOiAgWzE0LCAyXSwgdHlwZTogICBcIm1lbGVlXCIsXHJcbiAgICAgICAgYXR0YWNrOiBcIjF+MTAvMX4xMlwiLFxyXG4gICAgfSxcclxuICAgIFtcIu2UhOugiOydvFwiXToge1xyXG4gICAgICAgIGltYWdlOiAgWzE1LCAyXSwgdHlwZTogICBcIm1lbGVlXCIsXHJcbiAgICAgICAgYXR0YWNrOiBcIjF+MTEvMn4xM1wiLFxyXG4gICAgfSxcclxuICAgIFtcIuuMgO2Yle2RnOywvVwiXToge1xyXG4gICAgICAgIGltYWdlOiAgWzE2LCAyXSwgdHlwZTogICBcIm1lbGVlXCIsXHJcbiAgICAgICAgYXR0YWNrOiBcIjF+NUUvMX40RFwiLFxyXG4gICAgfSxcclxuICAgIFtcIu2RnOywvVwiXToge1xyXG4gICAgICAgIGltYWdlOiAgWzE3LCAyXSwgdHlwZTogICBcIm1lbGVlXCIsXHJcbiAgICAgICAgYXR0YWNrOiBcIjF+NEUvMX4zXCIsXHJcbiAgICB9LFxyXG4gICAgW1wi67aA66mU656RXCJdOiB7XHJcbiAgICAgICAgaW1hZ2U6ICBbMTgsIDJdLCB0eXBlOiAgIFwibWVsZWVcIixcclxuICAgICAgICBhdHRhY2s6IFwiMX42LzF+NVwiLFxyXG4gICAgfSxcclxuICAgIFtcIuyngO2MoeydtFwiXToge1xyXG4gICAgICAgIGltYWdlOiAgWzE5LCAyXSwgdHlwZTogICBcIm1lbGVlXCIsXHJcbiAgICAgICAgYXR0YWNrOiBcIjF+OFwiLFxyXG4gICAgfSxcclxuICAgIFtcIuunqOyGkFwiXToge1xyXG4gICAgICAgIGltYWdlOiAgWzUsIDNdLCB0eXBlOiAgIFwiaGFuZFwiLCBhbmltOiAgIFwiaGFuZFwiLFxyXG4gICAgICAgIGF0dGFjazogXCIxfjIvMVwiLFxyXG4gICAgfSxcclxuICAgIFtcIuyxhOq0keyCvVwiXToge1xyXG4gICAgICAgIGltYWdlOiBbMTYsIDVdLCB0eXBlOiBcInBpY2theGVcIiwgYW5pbTogXCJwaWNrYXhlXCIsIGhpdFNvdW5kOiBcInBpY2theGVfMC53YXZcIixcclxuICAgIH0sXHJcbiAgICBbXCLqs6HqtK3snbRcIl06IHtcclxuICAgICAgICBpbWFnZTogICAgWzIwLCA1XSwgdHlwZTogICAgIFwicGlja2F4ZVwiLCBhbmltOiAgICAgXCJwaWNrYXhlXCIsIGhpdFNvdW5kOiBcInBpY2theGVfMC53YXZcIixcclxuICAgICAgICBkZXNjOiAgICAgXCLqtJHshJ3snYQg67aA7Ii07IScIOy6kOuCvCDsiJgg7J6I64+E66GdIOunjOuTpOyWtOynhCDrj4TqtawuIOydtOqyg+ydtCDsnojsnLzrqbQg6rSR66y87J2EIOu5qOumrCDsupgg7IiYIOyeiOuLpC5cIixcclxuICAgIH0sXHJcbiAgICBbXCLrp4zrj4zrprBcIl06IHtcclxuICAgICAgICBpbWFnZTogICAgICBbMSwgMTVdLCB0eXBlOiAgICAgICBcImluc3RydW1lbnRcIixcclxuICAgICAgICBkZXNjOiAgICAgICBcIuydjOycoOyLnOyduOuTpOydtCDrp47snbQg7IKs7Jqp7ZWY64qUIOyGjO2YleydmCDslYXquLDsnbTri6QuIOyauOumvO2GteydtCDrkaXquIDqs6AgOOykhOydmCDtmITsnYQg6rCA7KGM64ukLlwiLFxyXG4gICAgICAgIGluc3RydW1lbnQ6IFwic291bmQvbW1sX21hbmRvbGluLWE0LndhdlwiLFxyXG4gICAgfSxcclxuICAgIFtcIu2VmO2UhFwiXToge1xyXG4gICAgICAgIGltYWdlOiAgICAgIFsxLCAxNV0sIHR5cGU6ICAgICAgIFwiaW5zdHJ1bWVudFwiLFxyXG4gICAgICAgIGRlc2M6ICAgICAgIFwi7LyI7YuxIO2VmO2UhCwg7J2066+47KeA64qUIOyXhuyWtOyEnCDsnbzri6gg66eM64+M66aw7LKY65+8IOyDneq4tOqxuOuhnCDtlZjsnpAuXCIsXHJcbiAgICAgICAgaW5zdHJ1bWVudDogXCJzb3VuZC9tbWxfY2VsdGljLWhhcnAtYTQud2F2XCIsXHJcbiAgICB9LFxyXG4gICAgW1wi66CI7Yq466GcTVNYXCJdOiB7XHJcbiAgICAgICAgaW1hZ2U6ICAgICAgWzEsIDE1XSwgdHlwZTogICAgICAgXCJpbnN0cnVtZW50XCIsXHJcbiAgICAgICAgZGVzYzogICAgICAgXCI4Qml0IEZNIOyCrOyatOuTnOqwgCDrgpjripQg7Iug66yY7ZWcIOyVheq4sFwiLFxyXG4gICAgICAgIGluc3RydW1lbnQ6IFwic291bmQvbW1sX3JldHJvLWE0LndhdlwiLFxyXG4gICAgfSxcclxuICAgIFtcIuugiO2KuOuhnEFQUExFXCJdOiB7XHJcbiAgICAgICAgaW1hZ2U6ICAgICAgWzEsIDE1XSwgdHlwZTogICAgICAgXCJpbnN0cnVtZW50XCIsXHJcbiAgICAgICAgZGVzYzogICAgICAgXCJBUFBMRSBdW+ydmCDsgqzsmrTrk5zqsIAg7Jew7IOB65CY64qUIOyVheq4sFwiLFxyXG4gICAgICAgIGluc3RydW1lbnQ6IFwic291bmQvbW1sX3JldHJvLWFwcGxlLWE0LndhdlwiLFxyXG4gICAgfSxcclxuICAgIFtcIuyVheuztDFcIl06IHtcclxuICAgICAgICBpbWFnZTogWzIsIDE1XSwgdHlwZTogIFwibm90ZVwiLFxyXG4gICAgICAgIG5hbWU6ICAn7JWF67O0IFwi7JWE7LaUXCInLFxyXG4gICAgICAgIGRlc2M6ICBcIuyerOyxhOq4sOyZgCDsp53sgqzrnpHsnYAg7Iio6ri4IOyImCDsl4bri6TripQg64K07Jqp7J2YIOqwgOyCrOqwgCDri7TquLQg64W4656Y7J2YIOyVheuztFwiLFxyXG4gICAgICAgIG1tbDogICBgXHJcblx0XHRcdE1NTEB0MTI4djE1Pj5MNEYyRTJELkw4QzE2PEItMTY+QzxCLUFHRz5DPEYyRUNEMjxDREREMTZFMTZ2MTRvMUc+R0wxNj5FRkdBckdEPEItR0Q8Qi1HTDg+QzJDIzJyQT5ERUZBPkM0TDE2cnYxNUZHPkM8Rkc+TDMyQy48Qy5GRz5DRkc+QzxDRkc+Q0ZHPkMyJkM4JkMmQzJMOHJvNEZGNHYxNG8xQi00PkItPEItQi0+Qi1yQzQuPkM8Q3JDQi00PEE0PkE8QUE0PkE0RDQ+RDxEckQ+RDQ8PEItND5CLTxCLUItPkItckM0Lj5DPENyQz5DNDxDIzQ+QyM8QyNDIzQ+QyM8RDQ+RDQ8QUQ+RDxENDxCND5CPEJCND5CNDxCLTQ+Qi08Qi1CLTQ+Qi00PEE0PkE8QUE0PkE0RDQ+RDxERDQ+RDQ8PEc+RzxHQTRBPkE0PEItPkItPEItQjRCPkI0QzQ+QzxHQ0c+QzxDcj5DPEM0cjQ+QzxDPEItNEItND5DNEM0RC00RC1BLT5FLTQ8RS0uPEEtLj5BLTxBLTRBLT5BLTxBLTRBLT5BLTxBLTRBLT5BLTxBLTRHPkc8RzRHPkc8Rz5DND5DPEM+QzxDPkM8Qz5DPEY+RjxGPkY8Rj5GPEZFLTQ+RS08RS0+RS08RS0+RS08RS1END5EPERGIzQ+RiM8RiNHND5HPEctNEY0PEItLkEtLj5BLTxBLTRBLT5BLTxBLTRBLT5BLTxBLTRBLT5BLTxBLTRHPkc8RzRHPkc8Rz5DND5DPEM+QzxDPkM8Qz5DPEY+RjxGPkY8Rj5GPEZFLTQ+RS08RS0+RS08RS0+RS08RS1END5EPERGIzQ+RiM8RiNGND5GPEItPkItQzQ8QjR2MTVvNUMjNEMjPkMjNDw8RUVFRUQjRCM+QyNDIzxCQkEjMTZCLiZCQj5CPEJBI0I+QyNEREMjQyMxNjxHIy5HRyM+QyMxNjxCLkE0ckFHI0FCMTY+QyMuJkMjcjQuQyNEI0U0RUVFRCM8QSM+RCNDIzQ8QkI0QSM0Qi4+QyMuJkMjPEcjLkcjMTZyRUVFRUQjRCM+QyNDIzxCQkEjMTZCLiZCQi5CMTZCQSNCPkMjRERDI0MjMTY8RyMuR0cjPkMjMTY8Qi5BQS5BMTZBRyNBQjE2PkMjLiZDI3JDI0MjQyNEI0U0RUVFRCM8QSM+RCNDIzQ8QkI0QjRCNHQ3NkwxNj4+QyMuPEMjLkYjQi48Qi4+RUEuPEEuPkVMMzJvM3JGI0E+PkNHIzIuJkcjJkcjMTYubzJFLkIuPkVGIy5HIzE2JkcjNjQmRyMyLiZHIzIuLFxyXG5cdFx0XHR2MTQ+Qi0yRzJGLnIuckNyMjxHRjJyMnYxNUYyRTJEMkUuRTE2RjE2RzJGLkU4QzEuJiZDMkw4ckNDNHJFRUZGNHJFRjRBNEU0RjRyNEdGRkVFRERDQzRHNEY0ckVFRkY0ckVGNEE0RTRGNHJCLUItQi1CLUFBR0dGRjRFRUY0QTRBLkExNkFHRjE2RzE2RzRyRUVFRz5EQzQuQy5DMTZDPEItQUc0QUY0LkFBQUY0Lkc0LnJGMTZHMTZBR0ZHNEE0Qi00LnI0QUdGRzQucjIuRjRFNEY0RzRBLTRHNEEtNEItLj5DLiZDPEcuRzE2ckUtRS1FLUUtREQ+Q0M8Qi1CLUExNkItLiZCLUItLkItMTZCLUFCLT5DRC1ELUNDMTY8Ry5GI0c+QzE2PEItLkEtQS0uQS0xNkEtR0EtQi0xNj5DLiZDPEEtLkEtMTZyPkNERS00RS1FLUUtRDxBPkRDNDxCLUItNEEtNEItLj5DLiZDPEcuRzE2ckUtRS1FLUUtREQ+Q0M8Qi1CLUExNkItLiZCLUItLkItMTZCLUFCLT5DRC1ELUNDMTY8Ry5GI0c+QzE2PEItLkEtQS0uQS0xNkEtR0EtQi0xNj5DLiZDckNDQ0RFLTRFLUUtRS1EPEE+REM0PEItQi0yQi4+QyMxNnYxNEw0bzJBMUExRyMxPkMjPEMjQyNDIzg+QyMxNjxGIzguRiNGI0YjOEYjOEVFRUU4RThEIz5MOEQjPEQjRzQ+RzxHRyM0PkcjPEc0RiM0PEIuQS4+QTxBNEE+QTxBNEE+QTxBNEE+QTxBNEcjPkcjPEcjNEcjPkcjPEcjPkMjND5DIzxDIz5DIzxDIz5DIzxDIz5DIzxGIz5GIzxGIz5GIzxGIz5GIzxGI0U0PkU8RT5FPEU+RTxFRCM0PkQjPEQjRzQ+RzxHRiM0RiNGIzRCRiM8QjRMMTY+PkEuPkUuQTxHIy4+RS5GIzxGIy4+QyMuRTw8QjFMMzJyOHIuci4+PkV0NTQ8Qj5HI0I+RT5FMSZFNC4sXHJcblx0XHRcdHYxNDxCLTFDMTxBMj5GMjxCLT5GOEItLiZCLUItMkItMkYyQTI8RDEmRDEmRDFMOHJERDQ+PnJDMi5DckM0Q0M0QzRyQzIuQXJCLTRBRDRDNHJDMi5DckM0Q0M0QzRyRTIuREQ0QzRDMkYyckQ0RTQuRy5HMTZyPkQ0PEc0Lkc0cj5DQ0Y0LkYuRjE2ckZFQzxENC5FMnJENC5EMnJGNC5GNEREPEItcjFMNEItQi1CLUItPkQtRC1ELUw4RC0uRS0uJkUtQzRyR0dGNC5GLkYuckYuRi4mRkYuRi5GRkY0LkU0RjRFLkUtLiZFLUM0ckNDQzQuRS00ckEtR0YjMkw0QXJGLkctRS1MOEYuRy4mR0M0ckNDPEItNC4+Ri5GLnJGLkYuJkZGNHJGRkY0LkU0RC00RS5FLS4mRS1DLkMuRS1FLUUtNC5BLS5BLS5BLUdGIzJBNHI0TDRFLS5GR3JFLj5HI3IuPDxCLnIuckIuPj5GIy5yPEYjRkQjRjguRTImRTE2TDhyRUVFMnI0QUcjRzJBIzRyNEYjNC5HNEU0RiMuRyMuJkcjQyM0ckcjRyNGIzQucjJGIy5GIzIuci5GIzQuRjREIzRGLkUuJkVFNC5FRUU0LkE0LkFHI0cyQSM0cjRBNEVFNEYjNEYjNDtcclxuXHRcdFx0YFxyXG4gICAgfSxcclxuICAgIFtcIuyVheuztDJcIl06IHtcclxuICAgICAgICBpbWFnZTogWzIsIDE1XSwgdHlwZTogIFwibm90ZVwiLFxyXG4gICAgICAgIG5hbWU6ICAn7JWF67O0IFwi642w7Iqk7Yuw64uIXCInLFxyXG4gICAgICAgIGRlc2M6ICBcIuyXkOumsOydhCDrsJTrnbzrs7TquLDrp4ztlZjripQg7J207Juo7Lm07J2YIOyViO2DgOq5jOybgOydtCDri7TquLQg64W4656Y7J2YIOyVheuztFwiLFxyXG4gICAgICAgIG1tbDogICBgXHJcblx0XHRcdE1NTEB0MTA2djE1TDhyMTZHIy5BQkI+QzE2Qy4mQzxFLkYjLiZGI0EuQi4+RDxCLkJCMTZCMTZCMTZCQUFHMTZHRiMuci5EIzE2QUdHQTE2Qi5HI0FCQj5DMTZDLiZDcjE2RS5EQ0M8QjE2Qi4mQkYjRTE2RUIxNkIxNkIxNkJBMTZBLkdHRiNBRzE2RzE2RTI+RiMuRS48Qj5HLkYjLiZGI0EuRy48QTE2PmUxNkYuRS48QT5GLkUuPEE+Ry5GLiZGPEczMj5DIzMyRTMyQTQuJkEzMnI8RkZGMTZGLjxBQi0+Q0M8Qi0xNj5GLiZGckItLkItMTZEMTZFMTZGRkZGMTZGLkdFRERFMTZDLiZDckcuQS5GRERFMTZGLkRFRkRBMTZBLiZBckYuQTE2RjE2RzE2QUFBQTE2QS5CLUdGMTZHLiZHcjRBND5FNEY8RkZGMTZGLjxBQi0+Q0M8Qi0xNj5GLiZGPkM8QS5CLTE2RDE2RTE2RkZGRjE2Ri5FRkcxNkEyJkExNnJBQi1GI28xQj5CPEI+QjxCLT5CLTxCLT5CLTxBPkE8QT5BRD5EPEQ+RDxHIz5HIzxHIz5HIzxBPkE8QT5BPEQ0PkQ8RDRBPkQ8REcuPkQxNkc0PENHPkM8Q0YuPkMxNkY8RjxCLT5GQi08Qi1CLkIxNnI0Qi4+QkIuRT5FPEYjPkYjPEcjPkcjPEU0bzRCPkMxNkMuJkNyPEYjR0FBQjE2Qi4mQnI0cjE2QjE2QjE2QjE2QkFBRzE2R0YjLnIuRCMxNkFHR0ExNkIuRyNBQkI+QzE2Qy4mQ3IxNkUuRENDPEIxNkIuJkJyNHIxNkIxNkIxNkIxNkJBMTZBLkdHRiNBRzE2RzE2bzJFPkU8RT5FPEQ+RDxEPkQ8Qz5DPEM+Qzw8Qj5CPEI+QkQ+RDxEPkQ8Qz5DPEM+QzxCLT5CLTxCLT5CLTxBMkwzMkRBMS5yNC5yMTYuLFxyXG5cdFx0XHR2MTRyMTZMOEQuREVHIy5HLiZHQy5DLiZDRiMuRiMuckcuRy4mR0U0RTREIzRGIzRyMTZFLkVEI0Q0RDQ8PEEuPkFFMTY8QUQuPkQuPERHLj5HRDE2PEdDRz5DPENGIzQ+RiM8RiM8Qi4+Qi48Qj5FPkU8RT5FPEQ+RDxEPkQ8Qz5DPEM+Qzw8Qj5CPEI+QkQ+RDxEPkQ8Qz5DPEM+Qzw8Qi0+Qi08Qi0+Qi08QTI+RDQ+RDQ8REE+RDQ8RzQ+Ry5EMTY8Rz5ERzxHQzQ+Qy48RzE2QzQ+QzQ8RjQ+Ri5DMTY8Rj5DRjQ8PEItND5CLTQ8Qi0+RkItPEItQjQ+QjQ8QkI+QjRDND5DLjxHMTZDND5DNDxDIzQ+QyMuPEExNkMjQT5DIzxDI0Q0PkQ0PERBPkQ0PEc0PkcuLkQxNjxHPkRHPEdDND5DLjxHMTZDND5DNDxFLTQ+RS0uPEUtMTZERD5EPEQ+PnYxNUEuRy5HckdBRUcuRi5GNC5ERUZGMTZFLkVGRUdGMTZGMTZEMnJBQi1GI0EuRy5HckdBRUcuRi5GNEZHRkUuRS5FRCMuQi5BQUcjRyNBMTZCRyMuQUJvMUE0PkE0REE+RDxERzQ+RzxHQ0c+QzxDRiM0PkYjNDw8QjQ+QjRFMTY+RTxFMTY+RTxGI0cjPkVHIzxHIzxBND5BNERBPkQ8REY0PkY8RkVCPkU8RTxBLj5FMTZBNDxCPkYjQjxCbzVGIy5FLjxCPkYjLkUuPEI+Ry5GIy4mRiNBLkcuPEExNj5FMTZGLkUuPEE+Ri5FLjxBPkcuRi4mRkwzMnJDI0VBNC4mQXJyPDxGI0E+Q0UxJkU0LnI0LnJycixcclxuXHRcdFx0djE0cjE2PEw4RS5GI0cjPEEyPkQ0LjxGI0cyPkMyPEYjNC5BQjJyMTZFLkVGI0cjLj5FLiZFPkw0RUdGI0FBR0w4PEFHMTZHLiZHPkUuRTxBLj5FNEQjND5GIy5FLjxCQi5CLkdCLkIuJkI+RCMuRCMucjxBLkEuckEuQS5yQS5BLiZBcjI8QS4+QzRyLkYuQS5CLS5EMTZyNC5GLkYuPEItLkItMTZyNC4+RC48Qi0uPkMyckMuRS5DLjxBMTZyNC4+QTQuRjJyRC5ELkYuQzE2cjQuRy5GLkItLkMxNnI0RTRBNEE0cjQuPkMuPEEuQi0yckYuRi5EMnI8Qi0uPkUtLkYuRC0xNnI0RiM0QzQ+QS5HLiZHQS5CLS4mQi0+Qy48Ri4mRkUuRi4mRkYuRS4mRUYuRS4mRUQuPEEuQS5CLS4+PEY0TDJEREUtRDxBQj5FPEI0PkU0TDhFLS5HLkNFLS5FLS5DRS5GIy4+RDxCNEU0RS5DQy48Qi4+RC5yRTE2PkUuRUQjRDxFLkcuRC5HLkNGIy5GIy5EQS5GLkFBLkcjLiZHI0U0RUNEIzxCLkIuTDI+R0dCQUFBQUc7XHJcblx0XHRcdGBcclxuICAgIH0sXHJcbiAgICBbXCLslYXrs7QzXCJdOiB7XHJcbiAgICAgICAgaW1hZ2U6IFsyLCAxNV0sIHR5cGU6ICBcIm5vdGVcIixcclxuICAgICAgICBuYW1lOiAgJ+yVheuztCBcIuyViOuFlVwiJyxcclxuICAgICAgICBkZXNjOiAgXCLslrjsoJzrgpgg64SI7J2YIOuSpOyXkOyEnCDrqrDrnpgg67CU652867Sk64uk64qUIOuFuOuemOydmCDslYXrs7RcIixcclxuICAgICAgICBtbWw6ICAgYFxyXG5cdFx0XHRNTUxAdDkwdDEyNT5MNEdGTDhFLS5HLkM0Lj5DNC48RkdBLTImQS0+QzI8QzQuPEIxNj5DMTZEQ0RFLTQuR0Y0LkNENC5GRS00RzRBLTImQS1BLUdFLTxCLTImQi1yPEItTDE2PkUtRkdCLXYxM0w4bzFBLXJBLT5BLTxBLT5BLTxBLT5BLTxCLT5CLTxCLT5CLTxCLT5CLTxCLUEtRz5HPEc+RzxHPkc8Rz5HQz5DPEM+QzxDPkM8QzxCLUEtPkEtPEEtPkEtPEEtPkEtPEEtPkEtPEItPkItPEItPkItPEItPkItPEItPkItQz5DPEM+QzxDPkM8Qz5DPDxHPkc8Rz5HPEc+RzxHPkc8QS0+QS08QS0+QS08QS0+QS08QS0+QS08Qi0+Qi08Qi0+Qi08Qi0+Qi08Qi1BLUc+RzxHPkc8Rz5HPEc+R0M+QzxDPkM8Qz5DPEM8Qi1BLT5BLTxBLT5BLTxBLT5BLTxBLT5BLTxCLT5CLTxCLT5CLTxCLT5CLTxCLT5CLUM+QzxDPkM8Qz5DPEM+Qzw8Rz5HPEc+RzxHPkc8Rz5HPEEtNEEtNEEtPkEtR0Y0LkY0RkNGQzQuQzRDNEM0PEItNC4+Q3JDPkM0PEY0Rj5GPEY+RjxGNDxCLT5CLTxCLT5CLTxCLT5CLTxCLTQ+RT5FPEU+RTxFPkU8RUE0QTxBPkE8QUI+Qys8QT5ENEQ8QjQ+QjxCPkM0LkM8QTQ+QTxBRzQ+RzxHPkc8Rz5HPEc+QzQ+QzxDPkM8Qz5DPEM+QzxGNEY+RjxGPkY8RjQ8Qi0+Qi08Qi0+Qi08Qi0+Qi08Qi00PkU+RTxFPkU8RT5FPEVBNEE8QT5BPEFCPkMrPEE+RDREPEI0PkI8Qj5DNC5DPEE0PkE8QUc0Pkc8Rz5HPEc+RzxHPkM0PkM8Qz5DPEM+QzxDPkM8PEItPkItPEItPkItPEItPkItMTY8Qi0uPkItPEItPkItPEItPkZCLTQ8Qi00QT5BPEE+QTxBPkExNjxBLj5BPEEtPkEtPEEtPkZBLTQ8QS00Rz5HPEdBND5BPEFCLTQ+QjxCLUI0PkI8Qj5DNC4+QzxDPkM8Qz5DPEM0LnIyLm81djE0RjRBQ0FDQUItMiZCLUItNC5FNDxHPkVCLTJENDxBPkQ8RzQuTDE2QUI+Q0VGNEw0QThHREUuRzhGPkM4PEE4Qi0uJkItPkQuPDxMMTZ2MTJDOC48Qj5DREVERUZHRkdBPkM0djE0bzJMOD48RjRGPkY8Rj5GPEY0PEItPkItPEItPkItPEItPkItPEItND5FPkU8RT5FPEU+RTxFQTRBPEE+QTxBQj5DKzxBPkQ0RDxCND5CPEI+QzQuQzxBND5BPEFHND5HPEc+RzxHPkc8Rz5DND5DPEMxNj5DPEMxNj5DPEcxNj5DMTY8QzRvNnYxNURFRkNFRjxCPkVGPEItMiZCLTxBMSZBNEYxLiZGMSZGMXIxLFxyXG5cdFx0XHR2MTRCLUEtTDhHLkItLkUtNC4+QzQucjRDMiZDRjI8RjJGRS1GRzQuR0Y0LkNCLTQuRkItNEItND5DMiZDPEEtR0UtPEItMiZCLTxCLTxCLT5CLTE2RjE2PEItbzVFLXJ2MTU8Qi00Qi00QS1HR0ZFLTE2Ri5yNEUtRkdBLUdGckUtRS1GR0UtRjRHNEItNEItckItQi1CLTRCLUItQi1BLUc0cjRGRS1HNEdBLUdGRjRyNEUtRkdFLUUtND5FLXI8Qi1CLUItNEItQi1CLTRCLTRyNEUtRkdBLUdGRkUtRS1FLT5DNDxHNEY0RzRCLXJCLUItQi00Qi0+RS1EQzxCLTRyNEUtRkdBLUdGRjRFLUUtPkUtNERDQzRENEc0PEItPkUtNEQ8QS1BLTQuQS0+RS00RDxHRzQuRz5FLTREPEZGNC5yRjRHNC4+PkM0PDxBQUFBQi0+QzRDPEItQi1BQi0xNkFGRy4mR0dHR0dBQi00Qi1CLT5DPEFHRkY0LkFHNEQ0RTQuR0Y0PkM8QUItMiZCLTxCLT5ERkItNEItQUFHRkdHQTRBQUFBQi0+QzRDPEItQi1BQi0xNkFGRy4mR0dHR0dBQi00Qi1CLT5DPEE+REVFRjQ8QUdHND5GRUU0PEdGND5FQ0NENHIxNkQuREM8Qi1BNEItRzI8Qi00Pj5GNDxBQUE0QUItQUdHND5DNDxGRkFBQUItQUdHRkY0RzRFLTRGNERFRkY0R0FBNEdGRnI+RDxBRzImR0ZHPkQ8RjQucjIuPkM0PEFBQUFCLT5DNEM8Qi1CLUFCLTE2QUZHLnJHR0dHQUItNEItQi0+QzxBR0ZGNC5BRzRENEU0LkdGND5DPEFCLTImQi08Qi0+REZCLTRCLUFBR0ZHR0E0QUFBQUItPkM0QzxCLUItQUItMTZBRkcuJkdHR0dHQUItNEItQi0+QzxBPkRFRUY0PEFHNC4+RkU0LjxHRjQ+RUNDRDRyMTZEPEYxNj5EQzxCLUE0Qi1HND5DMm8zTDRCLS5BLkEtLkcuJkdDMSZDPEYxLiZGMSZGMSxcclxuXHRcdFx0djE0PEw4RS0yLiZFLUUtMUQxJkQ8RzE+QzQuPEEyQi0yRzJGMiZGPkY0LjxCLTImQi1yMj4+Qi1yRS0yLnI8Qi0yLnJCLXJCLXJCLTJyQi0yLnI+RS1yRS0yLnJFLTIuckUtckUtMi5yPEItMnI+Qi00Qi1yRS0yLnJFLTIuckUtckUtNDxCLTJyPkdyMkItNEUtckUtMi5yRS0yLnJFLTFyRjIucj5DNC5BLTJGMSZGPEUtMTxMNEItLj5DQy4+QTI8Ri4+Ri5EQ3I4Ry4mRzxELj5ELiZEQTJGLkdERTJGMkItLnIxNkQ4LkQuPkMucjE2PEY4LkYyPkMyLnI4PEYuREMuRy4mRzxEPkQyJkRBMjxBLj5HRDxHMj5GMkItLnIycjg+Qy5yMTY8RjguRnJBMiZBLkcuJkc+QzxBRzImRy48Qy5EcjI8Qi0uPkMyRDJEMj5DMUMucjIubzJGbzRGMkM4PEItPkdHLiZHbzJFci5yPkEuJkEyLjxELjxCMj4+Qzg8Qy48QTI+Rzg8Rz5HTDhHQUItPkM8QzRyNC5DMTZHMTY+QzRvNkw0QzI8PEYuPkYuREMuRzFELnJBMjxBLj5HRDxHMj5GMkItLnI8Qi0uPkItLiZCLT5DMjxGLkYuRi5ELiZEPEUxcjxBMS47XHJcblx0XHRcdGBcclxuXHRcclxuICAgIH0sXHJcbiAgICBbXCLslYXrs7Q0XCJdOiB7XHJcbiAgICAgICAgaW1hZ2U6IFsyLCAxNV0sIHR5cGU6ICBcIm5vdGVcIixcclxuICAgICAgICBuYW1lOiAgJ+yVheuztCBcIuuEiOustOuEiOustOuEiOustFwiJyxcclxuICAgICAgICBkZXNjOiAgXCLrhIjrrLTrhIjrrLTrhIjrrLQg7J6Q6r647J6Q6r647J6Q6r64IOuztOqzoCDsi7bslrTsp4DrnbzripQg7Je87JuQ7J2EIOuLtOydgCDrhbjrnpjsnZgg7JWF67O0XCIsXHJcbiAgICAgICAgbW1sOiAgIGBcclxuXHRcdFx0TU1MQHQxOTB2MTI8Y2VnZWw4Y2VnZWMycjIuYjRnZ2dnZ2dyMmdnZ2dnZ2dnZ2dnZ3IyZzQuZ2dnYmJhYWdnZitmK2VlPGJiYWFsNGdnYWI+ZWQxNmVsOCZlLnI0YmJnZ2dnZ2dyMmdnZ2dnZ2dnZ2dnZ3IyZzQuZ2dnYmJhYWdnZitmK2VlPGJiYWFsNGdnYWI+ZWQxNmVsOCZlLnIyLmYrZ2dnZzRnZWU0cjRnZ2dlbDRlcmU4ZDhlZ2Jhcmw4ZWYrZitmK2YrNGYrZGw0ZHJkOGQ4ZGVnZ2dhbDhhZ2c0cjRmK2dnZ2dnZ2VlNHI0Z2dnZWw0ZXJlOGQ4ZWdiYXJsOGVmK2YrZitmKzRmK2RsNGRyZDhkOGJiK2JiYWc4Zis4ZitncmJnZ2w4Z2dnZ2dnYTRhNC5icjFyNGdnZitkNGRyNGdnZitkNGRyNGRkbDRiYitiYmFnZitnZDE2YjguPmJnZ2w4Z2dnZ2dnbDRhYS5iYThyMWc8Yy0zMmYrOCZmKzE2Lj5kOGQ4cmdmK2Q4ZDhyZDhkOGJiK2JiYWdmK2dsODxnZ2dnZ2dyMmdnZ2dnZ2dnZ2dnZ3IyZzQuZ2dnYmJhYWdnZitmK2VlPGJiYWFsNGdnYWI+ZWQxNmVsOCZlLnI0YmJnZ2dnZ2dyMmdnZ2dnZ2dnZ2dnZ3IyZzQuZ2dnYmJhYWdnZitmK2VlPGJiYWFsNGdnYWI+ZWQxNmUyLiZlOC4sXHJcblx0XHRcdGwxNjw8YyZjJmMmYyZjJmMmYyZjJmMmYyZjJmMmYyZjJmMmYyZjJmMmYyZjJmMmYyZjJmMmYyZjJmMmYyZjJmMmYyZjcjJsNHIudjk8PGU4PmMuPmcuYzxjMmNjPGEuPj5lLjxhPGEyYWFiLj4+ZisuPGI8YjI+YmRlMmVlZWVlZThlOGMyPmc4YzhyPGMyPmdjPDxhMj4+ZThjOHI8PGEyYWFiMm4zMD5iPGIyPmJkZTJlZWVlZWw4ZWU+Y2diMi5nMmc0YzQ8PGE0Lj4+ZTQ8YT5lcjxhPmVnZWI0YTRjLWYrYTIuZis0LjxiYmw0Yy0uZWJkKz5kKzg8ZCs4ZGFjKz5jKzg8Yys4YzgucjE2Yz5nMmcyZ2M8PGEuPj5lPGE4PmU4cjhuOWU8YS4+YTg8PGJiPj5mKzJsNC5mKzxiOGI4Yy1lYmw4PmU8ZWViPmU0LmU8ZTQ+Y2dsMmIuPGNsND5lZTw8YTMyPmEmYTE2Lj5lMzJnJmcxNi48YTxhLj5hLnJnMT5kYWdmK2w4PGViPmUyZ2VsNC48ZT5lYy04ZTg8Yz5nbDRjPGNjYzI8YTMyPmEmYTE2Lj5lMzJnJmcxNi48YTxhOD5hPmUzMmc4JmcxNi48YXI4ZzI+Zzg8Zy48ZzI+PmYrOGQ4PGc8ZS4+PmUuPGVlZWVlOGU4Yy4+ZS5jPGMyY2M8YS4+PmUuPGE8YTJhYWIuPj5mKy48YjxiMj5iZGUyZWVlZWVlYzI+ZzhjOHI8YzI+Z2M8PGEyPj5lOGM4cjw8YTJhYXYxMmw4bzRiYmFhZ2dmK2YrZWU8YmJhYWw0Z2dhYj5lZDE2ZTIuJmU4LixcclxuXHRcdFx0cjEucjFydjEwPDxiODxlOD5jLmIucmMyY2M8YS4+Zy5yPGEyYWFiLj5hLnJjLTJmK2RlMmVlZWVlPmU4ZTg8YzJiOHIuYzJicjxhMj5hOHIuPGEyYWFiMj5hcmMtMmYrZGUyZWVlZWVsOGVlcjQ+ZGVlcjQuPGIyYjRyNDxhPj5jYzxnNHJncmw0PmNjZWNyMTxhLnIyci5lcjIuZHIyYzgucjE2YzMybDE2Lj5kZThjLTMyZXI0LjxiMmI0cjQ8YTg+PmM4Yzg8ZzRyOGczMmIrcjg8YTMyPj5jOCZjPGczMj5jOCZjbDQ8YmE8YmI+YTJhLnIxZS5yYjMyPmU4JmUxNi48YmFicj5lZWU8YzJnZ3IxcjFmKzFyMT5kZGRkZGRkZDxjMzJsOD5lJmUxNi5iYy1nNGc0Z2dnZ2dnbDRhYS5iYThyMWc8Zz5kOGQ4cmdmK2Q4ZDhyZGJiK2JiYWdmK2dsOGNjY2NjY2w0cjxjPmM4Yzg8Y2M8YS4+Zzg+YzhjOHI8PGFuMzZhYWIuPmEucmMtMmYrZGUyZWVlZWVsOD4+YmJnZ2dnZ2dyNDw8YzQ+PmdnZ2dnZ2dnZ2dnZ2w0cm4yMWcuZzhnOGc4bzBiMm4zMD5iPGIyPmJkZTJlZWVlZTI7XHJcblx0XHRgXHJcbiAgICB9LFxyXG4gICAgW1wi7JWF67O0NVwiXToge1xyXG4gICAgICAgIGltYWdlOiBbMiwgMTVdLCB0eXBlOiAgXCJub3RlXCIsXHJcbiAgICAgICAgbmFtZTogICfslYXrs7QgXCLtlL3rr7hcIicsXHJcbiAgICAgICAgZGVzYzogIFwi66eO7J2AIOyCrOuejOuTpCDspJHsl5DshJwg64KY66W8IOu9keyVhCDri6zrnbzripQg64K07Jqp7J2YIOuFuOuemOydmCDslYXrs7RcIixcclxuICAgICAgICBtbWw6ICAgYFxyXG5cdFx0XHRNTUxAdDkwdjE1TDMyRSZFJkUmRSZFJkUmRSZFJkUmRSZFJkUmRSZFJkUmRSZFJkUmRSZFJkUmRSZFJkUmRSZFJkUmRSZFJkUmRSZFJkUmRSZFJkUmRSZFJkUmRXQxMjh2MTRMOHJFbzJFPkVyRXJFckVyRXJFckVyRTxFPkVyRXJFckVyRXJFckVyRTxFPkU8RT5FPEU+RTxFPkU8RT5FPEU+RTxFPkU8RT5FPEU+RTxFPkU8RT5FPEU+RTxFcjIuckU+RTxFPkU8RT5FPEU+RTxFPkU8RT5FPEU+RTxFMTZCMTY+RTxFPkU8RT5FPEU+RTxFPkU8RT5FPEU+RTxFPkU8RTE2QjE2PkU8RT5FPEU+RTxFPkU8RT5FPEU+RTxFPkU8RT5FPEUxNkIxNj5FPEU+RTxFPkU8RT5FPEU+RTxFPkU8RT5FPEU+RTxFMTZCMTY+RTxFPkU8RT5FPEU+RTxFPkU8RT5FPEU+RTxFPkU8RTE2QjE2PkU8RT5FPEU+RTxFPkU8RT5FPEU+RTxFPkU8RT5FPEUxNkIxNj5FPEU+RTxFPkU8RT5FPEU+RTxFPkU8RT5FPEU+RTxFMTZCMTY+RTxFPkU8RT5FPEU+RTxFPkU8RT5FPEUxNj5FLjxFckU0TDhFRUVFRUVFRTxBQUFBQkJMMTZCPkI8Qj5CTDhFRUVFRUVFRTxBQUFBQkJMMTZCPkI8Qj5CRThFOEU+RTxFPkU8RThFOEU+RTxFPkU8PEE+QTxBPkE8QT5BPEE+QTxCPkI8Qj5CQjRFPkU8RT5FPEU+RTxFPkU8RT5FPEU+RTxFPkU8RT5FPHIxTDhFPkU8RT5FPEU+RTxFMTZCMTY+RTxFPkU8RT5FPEU+RTxFMTZCMTY+RTxFPkU8RT5FPEU+RTxFMTZCMTY+RTxFPkU8RT5FPEU+RXJFPEU+RTxFPkU8RT5FPEUxNkIxNj5FPEU+RTxFPkU8RT5FPEUxNkIxNj5FPEU+RTxFPkU8RT5FPEUxNkIxNj5FcjE8RiNGI0dHRyNHI0FBQUFBI0EjQkI+Q0MjREQjRUZGI0dHI0FyMUw0PEVFRUVFRUVFRUVFRUVFRUVMOEU+RTxFPkU8RT5FPEU+RTxFPkU8RT5FPEU+RTxFPkU8TDE2RT5FPEU+RTxFPkU8RT5FPEU+RTxFPkU8RT5FPEU+RTxyMUw4RT5FPEU+RTxFPkU8RT5FPEU+RTxFPkU8RT5FPEU+RTxFPkU8RT5FPEU+RTxFPkU8RT5FPEU+RTxFPkU8RT5FPEU+RTxFPkU8RT5FPEU+RTxFPkU8RT5FPEU+RTxFPkU8TDE2RT5FPEU+RTxFPkU8RT5FPEwzMkU+RTxFPkU8RT5FPEU+RTxFPkU8RT5FPEU+RTxFPkU8TDhFLFxyXG5cdFx0XHRyMS52MTVMOEJHI0JHI0JHI0JHI0JHI0JHI0JHI0JHI0JHI0JHI0JHI0JHI0JHI0JHI0JHI0JHI0JHI0JHI0JHI0JHI0JHI0JHI0JHI0JHI0JHI0JHI0JHI0JHI3IxckJCQkJCQUcjQUI0QnI0LkVyQkJCQkJBRyNBQjRCcjQuRXJCQkJCQkFHI0FCNEJyQkFCRyM0QjRCQjRCckI0QkJCQjRyQkJCQkJBRyNBQjRCcjQuRXJCQkJCQkFHI0FCNEJyNC5FckJCQkJCQUcjQUI0QjRCQUJHIzRCNEJCNEJyQjRCQkJCNEU0RiM0RyNFRUE0QTRHI0FCQjRFNEYjNEcjRUVBNEE0RyNBQkI0RTRGIzRHI0VFQTRBNEcjQTRCRyNHIzJyQnJCckVFRUcjRUU0QkcjQkcjRUYjRyM0QkcjQkcjRUYjRyM0QkcjQkcjQkcjQkcjQkcjQkcjRUYjRyM0QkcjQkcjRUYjRyM0QkcjQkcjRUYjRyM0QkcjQkcjQkcjQkcjckJCQUE0QkcjdjE0QyNDI0RERCNEI0VFRUVGRkYjRiNHRyNBQSNCPkNDI0REI0V2MTVyPEJCQUE0QjRFNEU0RS5FLkVyRTRFRS5FLiZFRTRFNEUuRS5FPkU0RTRGIzRFRiM8RTRFNEUuRS5FckU0RUUuRS4mRUU0RTRFLkUuRXJCQkJBNEI0RT5FPEU+RTxFLj5FLjxFckVFPkU8RS4+RS48RUU+RTxFPkU8RS4+RS48RT5FNEU0RiM0RUYjPEU+RTxGPkY8RiMuPkcuPEdHIz5HIzxBPkE8QSMuPkIuPEI+Qz5DPEMjPkMjPEQuPkQjLjxEI3I8QkJCQTRCNEw0RyNyRyNyRyNydjEzRyNydjExRyNydjlHI3J2N0cjcnY1RyNyMi4sXHJcblx0XHRcdHIxLnYxNHIxLnJFOEU4cjEuci5FOHIxLnJFOEU4cjEucjFyLkU4cjEuci5FOHIxLnIuRThyMnIuRThyMnIuRThyMnIuRThyLkU4ci5FOHIuRThyLkU4ci5FOHIuRThyLkU4cjJyLkU4ci5FOHIuRThyLkU4ci5FOHIuRThyLkU4cjJMOHI+RXJFckVyRXJFckVyRXJFckVyRXJFckVyRXJFckVyRXJFckVyRXJFckVyRXJFckVyRXJFckVyRXIxPHJFckVyRXJFckVyRXJFckVyRXJFckVyRXJFckVyRXJFckVyRXJFckVyRXJFckVyRXJFckVyRXJFcjF2MTVMNEcjckFyQnI+QyNyTDhERCNFRkYjR0cjQXIxPDxCNEI0Qi5CLkJyQjRCQi5CLiZCQjRCNEIuQi5CPkw0R0dBQjxCQkw4Qi5CLkJyQjRCQi5CLiZCQjRCNEIuQi5CcjFyMnIuPkUucjJyLnJFLnIyci5yRS5yRzRHNEE0Qj5DcjJGIy48Ry5yMnI+QSMuPEIucjJyPj5ELjxEIy5ycjE7XHJcblx0XHRgXHJcbiAgICB9LFxyXG4gICAgW1wi6rOo65OcXCJdOiAgICAgICAgeyBpbWFnZTogWzEsIDE0XSwgZWZmZWN0OiBcImdvbGRcIiwgZHJvcFNvdW5kOiBcImRyb3BfZ29sZC53YXZcIiwgZHJvcFNvdW5kSW1tOiB0cnVlLCBnZXRTb3VuZDogXCJnZXRfZ29sZC53YXZcIiwgYnVuZGxlOiBcImdvbGRcIiB9LFxyXG4gICAgW1wi66y8XCJdOiAgICAgICAgIHsgaW1hZ2U6IFsxLCAxXSwgdHlwZTogXCJwb3Rpb25cIiwgZGVzYzogXCLtiKzrqoXtlZwg7JWh7LK07J2064ukLlwiLCB1bmFtZTogXCLtiKzrqoXtlZwg66y87JW9XCIgfSxcclxuICAgIFtcIu2MjOydtOyWtOuzvO2KuCDsiqTtgazroaRcIl06IHsgaW1hZ2U6IFsxLCAxXSwgdHlwZTogXCJzY3JvbGxcIiwgZGVzYzogXCLtiKzrqoXtlZwg7JWh7LK07J2064ukLlwiLCB1bmFtZTogJ+yKpO2BrOuhpDpcIuygnOyYpOyKpOudvFwiJyB9LFxyXG4gICAgW1wi7YyM7J207Ja067O87Yq4IOyngO2MoeydtFwiXTogeyBpbWFnZTogWzEsIDFdLCB0eXBlOiBcIm1lbGVlXCIsIGRlc2M6IFwi7Yis66qF7ZWcIOyVoeyytOydtOuLpC5cIiwgdW5hbWU6IFwi7Luk67iM6rCAIOyDiOqyqOynhCDsp4DtjKHsnbRcIiB9LFxyXG4gICAgW1wi7YyM7J207Ja067O87Yq4IOuniOuyleyxhVwiXTogeyBpbWFnZTogWzEsIDFdLCB0eXBlOiBcImJvb2tcIiwgZGVzYzogXCLtiKzrqoXtlZwg7JWh7LK07J2064ukLlwiLCB1bmFtZTogXCLtmZTroKTtlZwg7Luk67KE7J2YIOyxhVwiIH0sXHJcblxyXG59O1xyXG5cclxuXHJcbkl0ZW0udGV4dHVyZSA9IG5ldyBUZXh0dXJlKCBcIkl0ZW1zLnBuZ1wiLCBmYWxzZSwgeyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKTtcclxuSXRlbS50ZXh0dXJlRmlsdGVyZWQgPSBuZXcgVGV4dHVyZSggXCJJdGVtcy5wbmdcIiwgdHJ1ZSwgeyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKTtcclxuSXRlbS50ZXh0dXJlRXF1aXBTbG90ID0gbmV3IFRleHR1cmUoIFwiZXF1aXBTbG90LnBuZ1wiLCBmYWxzZSwgeyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKTtcclxuSXRlbS53aWR0aCA9IDE2O1xyXG5JdGVtLmhlaWdodCA9IDI0O1xyXG5JdGVtLnRpbGVXaWR0aCA9IDE2O1xyXG5JdGVtLnRpbGVIZWlnaHQgPSAyNDtcclxuSXRlbS5wZXJSb3cgPSBNYXRoLmZsb29yKCBJdGVtLnRleHR1cmUud2lkdGggLyBJdGVtLnRpbGVXaWR0aCApO1xyXG5JdGVtLnJhcml0eUNvbG9yID0gW1xyXG4gICAgMHhmZmZmZmYsICBcdC8vIO2ajOyDiVxyXG4gICAgMHgwMGE2NTEsXHQvLyDrhbnsg4lcclxuICAgIDB4MDBhZWVmLFx0Ly8g7YyM656RXHJcbiAgICAweDllMDA1ZCxcdC8vIOuztOudvOyDiVxyXG4gICAgMHhmZmYyMDAsXHQvLyDrhbjrnpHsg4lcclxuXTtcclxuXHJcbkl0ZW0udHlwZVRvSWNvbiA9IHtcclxuICAgIGFtbW9yOiAgICAgIFsxLCAxXSxcclxuICAgIGhlbG06ICAgICAgIFsyLCAxXSxcclxuICAgIGJvb3RzOiAgICAgIFszLCAxXSxcclxuICAgIHBhbnRzOiAgICAgIFs0LCAxXSxcclxuICAgIG1lbGVlOiAgICAgIFs1LCAxXSxcclxuICAgIHJhbmdlZDogICAgIFs2LCAxXSxcclxuICAgIHNoaWVsZDogICAgIFs3LCAxXSxcclxuICAgIGJlbHQ6ICAgICAgIFs4LCAxXSxcclxuICAgIGFjY2Vzc29yeTogIFs5LCAxXSxcclxuICAgIHJpbmc6ICAgICAgIFsxMCwgMV0sXHJcbiAgICBwaWNrYXhlOiAgICBbMTEsIDFdLFxyXG4gICAgaW5zdHJ1bWVudDogWzEyLCAxXSxcclxuICAgIG5vdGU6ICAgICAgIFsxMywgMV0sXHJcbiAgICBmb29kOiAgICAgICBbMTIsIDFdLFxyXG4gICAgcG90aW9uOiAgICAgWzEzLCAxXSxcclxuICAgIHNjcm9sbDogICAgIFsxNCwgMV0sXHJcbiAgICBrZXk6ICAgICAgICBbMTUsIDFdLFxyXG4gICAgYm9vazogICAgICAgWzE2LCAxXSxcclxuICAgIHVzYWJsZTogICAgIFsxLCAyXSxcclxuICAgIGV0YzogICAgICAgIFsyLCAyXSxcclxuICAgIGhhbmQ6ICAgICAgIFszLCAyXSxcclxufTtcclxuXHJcbkl0ZW0udHlwZUVxdWlwTWF4ID0ge1xyXG4gICAgYW1tb3I6ICAgICAgMSxcclxuICAgIGhlbG06ICAgICAgIDEsXHJcbiAgICBib290czogICAgICAxLFxyXG4gICAgcGFudHM6ICAgICAgMSxcclxuICAgIG1lbGVlOiAgICAgIDEsXHJcbiAgICByYW5nZWQ6ICAgICAxLFxyXG4gICAgc2hpZWxkOiAgICAgMSxcclxuICAgIGJlbHQ6ICAgICAgIDEsXHJcbiAgICBhY2Nlc3Nvcnk6ICAxLFxyXG4gICAgcmluZzogICAgICAgMixcclxuICAgIHBpY2theGU6ICAgIDEsXHJcbiAgICBpbnN0cnVtZW50OiAxLFxyXG4gICAgbm90ZTogICAgICAgMSxcclxufTtcclxuXHJcblxyXG5cclxuSXRlbS5nb2xkID0gXCLqs6jrk5xcIjtcclxuSXRlbS5iYXJlSGFuZCA9IFwi66eo7IaQXCI7XHJcblxyXG5cclxuXHJcblxyXG5JdGVtLnZhbGlkSWRMaXN0ID0gW107XHJcbmZvciAoIGNvbnN0IGsgaW4gSXRlbS5wcm9wZXJ0eSApIHtcclxuICAgIGNvbnN0IHYgPSBJdGVtLnByb3BlcnR5W2tdO1xyXG5cclxuICAgIGlmICggayApIHtcclxuICAgICAgICBJdGVtLnZhbGlkSWRMaXN0LnB1c2goIGsgKTtcclxuICAgIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgUGFydGljbGVzLCBTb3VuZCxVdGlscywgTW92aWVDbGlwLCBUZXh0dXJlLCBUZXh0dXJlQmFzZSwgU3ByaXRlLCBFdmVudCwgVGltZXIgfSBmcm9tIFwiQGVuZ2luZS9mbGF0ZmFzdFwiO1xyXG5cclxuaW1wb3J0IEdhbWVNYXAgZnJvbSBcIi4uL3dvcmxkL2dhbWVNYXBcIjtcclxuaW1wb3J0IEVmZmVjdCBmcm9tIFwiLi4vZWZmZWN0XCI7XHJcbmltcG9ydCBFbGVtZW50YWwgZnJvbSBcIi4uL3dvcmxkL2VsZW1lbnRhbFwiO1xyXG5pbXBvcnQgSWNvblBhY2sgZnJvbSBcIkBsaWIvaWNvblBhY2tcIjtcclxuaW1wb3J0IE1hYmlNTUwgZnJvbSBcIkBsaWIvbWFiaU1NTFwiO1xyXG5pbXBvcnQgUmFuZG9tIGZyb20gXCJAbGliL3JhbmRvbVwiO1xyXG5pbXBvcnQgQ29sb3JzIGZyb20gXCJAbGliL2NvbG9yc1wiO1xyXG5pbXBvcnQgQ3JlYXR1cmUgZnJvbSBcIi4vY3JlYXR1cmVcIjtcclxuXHJcbmltcG9ydCBFbnRpdHkgZnJvbSBcIi4vZW50aXR5XCI7XHJcbmltcG9ydCBJdGVtIGZyb20gXCIuL2l0ZW1cIjtcclxuXHJcbmltcG9ydCBHTE9CQUwgZnJvbSBcIi4uL2dsb2JhbFwiO1xyXG5cclxuXHJcbi8vIOuqrOyKpO2EsOulvCDsg4Hsho3tlZwg7YG0656Y7Iqk65Ok7J20IOuqqOuRkCBBSeulvCDsgqzsmqntlZzri6QuXHJcbmNvbnN0IEFJID0ge307XHJcblxyXG4vKipcclxuICogQHRoaXMgTW9uc3RlclxyXG4gKlxyXG4gKiBAcGFyYW0ge0VudGl0eX0gdGFyZ2V0XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBkaXN0XHJcbiAqL1xyXG5mdW5jdGlvbiBkZWNpZGVGb2xsb3coIHRhcmdldCwgZGlzdCApIHtcclxuICAgIC8vIOuCnCDrlLDrnbzri6Tri4jripQg7KSR7J2064ukXHJcbiAgICBjb25zdCBmb2xsb3dEaXN0ID0gR0xPQkFMLndvcmxkLmdldERpc3RhbmNlQmV0d2VlbkVudGl0aWVzKCB0aGlzLCB0aGlzLmZvbGxvdyApO1xyXG5cclxuICAgIGlmICggZm9sbG93RGlzdCA+IHRoaXMuc2Vuc2VEaXN0YW5jZSApIHtcclxuICAgICAgICAvLyDrhIjrrLQg66i464uI6rmMIOygle2Zle2eiCDrlLDrnbzqsIDslbztlbRcclxuICAgICAgICBjb25zb2xlLmxvZyggdGhpcy5tb2RlICk7XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5tb2RlICE9IFwiZm9sbG93RXhhdGx5XCIgKSB7XHJcbiAgICAgICAgICAgIEdMT0JBTC53b3JsZC5hZGRMb2coIFwiJXN76rCAfSAlc3vrpbx9IOywvuyVhCDrgpjshLDri6QuXCIsIHRoaXMuZ2V0TmFtZSgpLCB0aGlzLmZvbGxvdy5nZXROYW1lKCkgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubW9kZSA9IFwiZm9sbG93RXhhdGx5XCI7XHJcbiAgICB9IGVsc2UgaWYgKCBmb2xsb3dEaXN0ID4gdGhpcy5zZW5zZURpc3RhbmNlICogMC41ICkge1xyXG4gICAgICAgIC8vIOuEiOustCDrqLjri4jquYwg65Sw65286rCA7JW87ZW0XHJcbiAgICAgICAgaWYgKCB0aGlzLm1vZGUgIT0gXCJmb2xsb3dGYXN0XCIgKSB7XHJcbiAgICAgICAgICAgIEdMT0JBTC53b3JsZC5hZGRMb2coIFwiJXN76rCAfSAlc3vrpbx9IOuUsOudvOyYqOuLpC5cIiwgdGhpcy5nZXROYW1lKCksIHRoaXMuZm9sbG93LmdldE5hbWUoKSApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5tb2RlID0gXCJmb2xsb3dGYXN0XCI7XHJcbiAgICB9IGVsc2UgaWYgKCBmb2xsb3dEaXN0ID4gMSApIHtcclxuICAgICAgICAvLyDrlLDrnbzqsIDslbztlbRcclxuICAgICAgICB0aGlzLm1vZGUgPSBcImZvbGxvd1Nsb3dcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8g7JWE64uI66m0IOuwqe2ZqVxyXG4gICAgICAgIHRoaXMubW9kZSA9IFwicm9hbWluZ1wiO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICpcclxuICpcclxuICogQHRoaXMgTW9uc3RlclxyXG4gKiBAcGFyYW0ge0VudGl0eX0gdGFyZ2V0XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBkaXN0XHJcbiAqL1xyXG5mdW5jdGlvbiBkZWNpZGVTY2hlZHVsZSggdGFyZ2V0LCBkaXN0ICkge1xyXG4gICAgY29uc3Qgc2MgPSB0aGlzLmdldFNjaGR1bGUoKTtcclxuICAgIGxldCBwbGFjZSA9IHRoaXMucGxhY2VzW3NjLnBsYWNlXTtcclxuXHJcbiAgICBpZiAoICFwbGFjZSApIHtcclxuICAgICAgICAvLyDrqrvssL7slZjsnLzrqbQg7JuU65Oc7JeQ7IScIOywvuyVhOuzuOuLpFxyXG4gICAgICAgIHBsYWNlID0gR0xPQkFMLndvcmxkLnBsYWNlc1tzYy5wbGFjZV07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCAhcGxhY2UgKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coIHRoaXMucGxhY2VzICk7XHJcbiAgICAgICAgY29uc29sZS5sb2coIFwi7J6l7IaM66W8IOywvuydhCDsiJjqsIAg7JeG64ukLlwiLCBzYy5wbGFjZSApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggdGhpcy5tb2RlICE9IFwibW92ZVRvUGxhY2VcIiApIHtcclxuICAgICAgICBjb25zdCBkaXN0ID0gR0xPQkFMLndvcmxkLmdldERpc3RhbmNlKCB0aGlzLnRpbGVYLCB0aGlzLnRpbGVZLCBwbGFjZS54LCBwbGFjZS55ICk7XHJcblxyXG4gICAgICAgIGlmICggZGlzdCA8PSAoIHNjLnJhZGl1cyB8fCB0aGlzLnNlbnNlRGlzdGFuY2UgKiAwLjUgKSAmJiB0aGlzLmNhblNlZSggcGxhY2UueCwgcGxhY2UueSApWzBdICkge1xyXG4gICAgICAgICAgICAvLyDrj4TssKlcclxuICAgICAgICAgICAgdGhpcy5tb2RlID0gc2MuYWN0aW9uO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCBzYy5wbGFjZSwgXCLroZwg7J2064+Z7Iuc7J6RXCIgKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RlID0gXCJtb3ZlVG9QbGFjZVwiO1xyXG5cclxuICAgICAgICAgICAgaWYgKCB0aGlzLnBhdGggPT0gbnVsbCB8fCB0aGlzLnBhdGgubGVuZ3RoID09IDAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhdGggPSBHTE9CQUwud29ybGQucGF0aE1hbmFnZXIuZmluZFBhdGgoIHRoaXMudGlsZVgsIHRoaXMudGlsZVksIHBsYWNlLngsIHBsYWNlLnksIHRydWUgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vbnN0ZXIgZXh0ZW5kcyBDcmVhdHVyZSB7XHJcbiAgICBjb25zdHJ1Y3RvciggbmFtZSwgdGlsZVgsIHRpbGVZLCBvcHRpb25zICkge1xyXG4gICAgICAgIHN1cGVyKCBuYW1lLCB0aWxlWCwgdGlsZVksIG9wdGlvbnMgKTtcclxuICAgICAgICB0aGlzLmlzTW9uc3RlciA9IHRydWU7XHJcbiAgICAgICAgY29uc29sZS5hc3NlcnQoIE1vbnN0ZXIucHJvcGVydHlbbmFtZV0sYCR7bmFtZX3snbTrnbzripQg66qs7Iqk7YSw7J2YIOygleuztOqwgCDsl4bri6QuYCApO1xyXG4gICAgICAgIHRoaXMuZmlsbFByb3BlcnRpZXMoIE1vbnN0ZXIucHJvcGVydHksIG5hbWUgKTtcclxuICAgICAgICBjb25zdCBwciA9IHRoaXMucHJvcGVydHk7XHJcblxyXG4gICAgICAgIHRoaXMuc2Vuc2VEaXN0YW5jZSA9IHByLnNlbnNlRGlzdGFuY2UgfHwgNjtcclxuICAgICAgICB0aGlzLndlYXBvblJhbmdlID0gcHIud2VhcG9uUmFuZ2UgfHwgMTtcclxuICAgICAgICB0aGlzLkFJID0gcHIuQUkgfHwgXCJkZWZhdWx0XCI7XHJcbiAgICAgICAgdGhpcy5ocE1heCA9IHByLmhwIHx8IDE7XHJcbiAgICAgICAgdGhpcy5ocCA9IHRoaXMuaHBNYXg7XHJcbiAgICAgICAgdGhpcy50ZXh0dXJlID0gQ3JlYXR1cmUudGV4dHVyZTtcclxuICAgICAgICB0aGlzLnRpbGVXaWR0aCA9IENyZWF0dXJlLnRpbGVXaWR0aDtcclxuICAgICAgICB0aGlzLnRpbGVIZWlnaHQgPSBDcmVhdHVyZS50aWxlSGVpZ2h0O1xyXG4gICAgICAgIHRoaXMubW9kZSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgdGhpcy5wb3N0SW5pdCggTW9uc3RlciApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFdlYXBvbkltYWdlKCBmbGlwWCxmbGlwWSApIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJvY2Vzc0FJKCkge1xyXG4gICAgICAgIGlmICggdGhpcy50YXJnZXQgJiYgIXRoaXMudGFyZ2V0LmFkZGVkVG9Xb3JsZCApIHtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLmZvbGxvdyAmJiAhdGhpcy5mb2xsb3cuYWRkZWRUb1dvcmxkICkge1xyXG4gICAgICAgICAgICB0aGlzLmZvbGxvdyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBkaXN0ID0gdGhpcy50YXJnZXQgJiYgR0xPQkFMLndvcmxkLmdldERpc3RhbmNlQmV0d2VlbkVudGl0aWVzKCB0aGlzLCB0aGlzLnRhcmdldCApO1xyXG4gICAgICAgIC8vIO2DgOqyn+qzvCDqsbDrpqzrpbwg66+466asIOqzhOyCsO2VtOyEnCDrhKPslrTspIDri6QuXHJcbiAgICAgICAgY29uc3QgbW9kZSA9IHRoaXMubW9kZTtcclxuXHJcbiAgICAgICAgQUlbdGhpcy5BSV0oIHRoaXMsIHRoaXMudGFyZ2V0LCBkaXN0ICk7XHJcbiAgICAgICAgdGhpcy5sYXN0TW9kZSA9IG1vZGU7XHJcbiAgICB9XHJcblxyXG4gICAgY2FsY3VsYXRlRGFtYWdlKCkge1xyXG4gICAgICAgIGNvbnN0IFttaW4sIG1heCwgYmFsLCBiaSwgbWluMiwgbWF4MiwgYmFsMiwgYmkyXSA9IEl0ZW0ucGFyc2VEYW1hZ2VTdHJpbmcoIHRoaXMucHJvcGVydHkuYXR0YWNrICk7XHJcbiAgICAgICAgY29uc3QgZGFtYWdlID0gR0xPQkFMLndvcmxkLnJhbmRvbUdlbmVyYXRvci5nZXREYW1hZ2UoIGJhbCwgYmksIG1pbiwgbWF4ICk7XHJcblxyXG4gICAgICAgIHJldHVybiBkYW1hZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgc3RvcCgpIHtcclxuXHRcdFxyXG4gICAgfVxyXG5cclxuICAgIGF0dGFjayggY3IsIGRtZyApIHtcclxuICAgICAgICB0aGlzLnN0b3BQcmV2aW91c0FjdGlvbiggXCJhdHRhY2tcIiApO1xyXG4gICAgICAgIGNvbnN0IHsgeDogeDEsIHk6IHkxIH0gPSBHTE9CQUwud29ybGQudGlsZUNlbnRlclRvV29ybGQoIHRoaXMudGlsZVgsIHRoaXMudGlsZVkgKTtcclxuICAgICAgICBjb25zdCB7IHg6IHgyLCB5OiB5MiB9ID0gR0xPQkFMLndvcmxkLnRpbGVDZW50ZXJUb1dvcmxkKCBjci50aWxlWCwgY3IudGlsZVkgKTtcclxuICAgICAgICBjb25zdCBbZHVyLCBoaXREdXJdID0gbmV3IEVmZmVjdCggXCJjbGF3XCIsIHgxLCB5MSwgeDIsIHkyLCB0cnVlLCB0aGlzLmdldFdlYXBvbkltYWdlKCB0cnVlLCB0cnVlICksIHRoaXMgKS5nZXREdXJhdGlvbigpO1xyXG5cclxuICAgICAgICBjci5zdG9wKCk7XHJcbiAgICAgICAgY3IuZGFtYWdlKCBkbWcsIHRoaXMsIHgxLCB5MSwgaGl0RHVyIHx8IGR1ciApO1xyXG4gICAgICAgIEdMT0JBTC53b3JsZC5lbnRpdHlNYW5hZ2VyLndhaXQoIDMwMCApO1xyXG4gICAgfVxyXG5cclxuICAgIGRlYXRoKCBkbWcsIGF0dGFja2VyLCBmcm9tWCwgZnJvbVksIGhpdER1ciwgc291bmQgKSB7XHJcbiAgICAgICAgaGl0RHVyID0gaGl0RHVyIHx8IDA7XHJcbiAgICAgICAgLy9kbWfripQg7J2066+4IGhw7JeQIOyggeyaqeydtCDrkJwg7IOB7YOcXHJcbiAgICAgICAgdGhpcy5lbmFibGVEZWZhdWx0QW5pbWF0aW9uKCBmYWxzZSApO1xyXG4gICAgICAgIHRoaXMuc2hhZG93TWVzaC5yZW1vdmVGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgdGhpcy5kZXRhY2hGcm9tV29ybGQoKTtcclxuICAgICAgICBuZXcgRWZmZWN0KCBcImRlYXRoXCIsIGZyb21YLCBmcm9tWSwgdGhpcy5nZXRYKCksIHRoaXMuZ2V0WSgpLCB0aGlzLCBhdHRhY2tlciwgaGl0RHVyICk7XHJcbiAgICAgICAgVGltZXIuZGVsYXllZENhbGwoIGhpdER1ciwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BQcmV2aW91c0FjdGlvbiggXCJkZWF0aFwiICk7XHJcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlRGVmYXVsdEFuaW1hdGlvbiggZmFsc2UgKTtcclxuICAgICAgICAgICAgR0xPQkFMLmludGVyZmFjZS5hZGRMb2coIFwiJXN766W8fSDqs7XqsqntlZjsl6wgPHllbGxvdz4lZDwveWVsbG93PiDrjIDrr7jsp4AhXCIsIHRoaXMuZ2V0TmFtZSgpLCBkbWcgKTtcclxuICAgICAgICAgICAgR0xPQkFMLmludGVyZmFjZS5hZGRMb2coIFwiJXN766W8fSDsk7Drn6zrnKjroLjri6QhXCIsIHRoaXMuZ2V0TmFtZSgpICk7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaEdhdWdlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHAgPSBuZXcgUGFydGljbGVzKCk7XHJcblxyXG4gICAgICAgICAgICBwLnNldFRleHR1cmUoIG5ldyBUZXh0dXJlKCBcIkJsb29kLnBuZ1wiLCBmYWxzZSApICk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCBcIuyCrOunnVwiLCB0aGlzLmdldFBvc2l0aW9uKCkgKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoIGxldCBpID0gMTsgaSA8PSAxMDsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgLy9wLmFkZFBhcnRpY2xlcygwLDAsNTAsOTAsNjAsMTAsMTApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYW5nbGUgPSBVdGlscy5yYW5kb20oIDAsMzU5ICk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcGVlZCA9IFV0aWxzLnJhbmRvbSggMSw2ICk7XHJcbiAgICAgICAgICAgICAgICBsZXQgeCwgeSA9IHRoaXMuZ2V0UG9zaXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL3ggPSB4OyAvLyBHTE9CQUwud29ybGQudmlld1dpZHRoLzI7XHJcbiAgICAgICAgICAgICAgICAvL3kgPSB5OyAvLyBHTE9CQUwud29ybGQudmlld0hlaWdodC8yO1xyXG4gICAgICAgICAgICAgICAgcC5hZGRQYXJ0aWNsZXMoIFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6ICAgICAgICAgICAgeCwgeTogICAgICAgICAgICB5LCBzaXplOiAgICAgICAgIFV0aWxzLnJhbmRvbSggNCwgMzAgKSwvL3RoaXMuZ2V0WCgpLHk9dGhpcy5nZXRZKCksc2l6ZT0yMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGU6ICAgICAgICBhbmdsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHRsOiAgICAgICAgICA2MCArIFV0aWxzLnJhbmRvbSggMSwxMDAgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BlZWRYOiAgICAgICBNYXRoLmNvcyggYW5nbGUgKSAqIHNwZWVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGVlZFk6ICAgICAgIE1hdGguc2luKCBhbmdsZSApICogc3BlZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwZWVkQW5ndWxhcjogVXRpbHMucmFuZG9tKCAxLDMwICkgLSAxNSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVjYXk6ICAgICAgICAwLjUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAgICAgICAgMHg0MDAwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFscGhhOiAgICAgICAgMS4wLFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEdMT0JBTC53b3JsZC5mbG9vckxheWVyLmFkZENoaWxkKCBwICk7XHJcbiAgICAgICAgICAgIFNvdW5kLnBsYXlTb3VuZCggc291bmQgfHwgXCJzb3VuZC9kYW1hZ2VfMC53YXZcIiApO1xyXG4gICAgICAgICAgICBTb3VuZC5wbGF5U291bmQoIFwic291bmQvZmluaXNoXzEud2F2XCIgKTtcclxuICAgICAgICAgICAgVGltZXIuZGVsYXllZENhbGwoIDUwMDAsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHAucmVtb3ZlRnJvbVBhcmVudCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVGcm9tV29ybGQoKTtcclxuICAgICAgICAgICAgfSApO1xyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLnByb3BlcnR5LmV4cGxvc2lvbiApIHtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLnByb3BlcnR5LmV4cGxvc2lvbiA9PSBcIndhdGVyXCIgKSB7XHJcbiAgICAgICAgICAgICAgICBTb3VuZC5wbGF5U291bmQoIFwic291bmQvZXhwbG9zaW9uX3dhdGVyLndhdlwiICk7XHJcbiAgICAgICAgICAgICAgICBuZXcgRWZmZWN0KCBcImJvb21cIiwgdGhpcy5nZXRYKCksIHRoaXMuZ2V0WSgpLCAyMCwgMzUwLCBoaXREdXIsIDB4MDAwMGZmICk7XHJcbiAgICAgICAgICAgICAgICBHTE9CQUwud29ybGQuZWxlbWVudGFsLmFkZEVsZW1lbnRhbCggRWxlbWVudGFsLldBVEVSLCB0aGlzLnRpbGVYLCB0aGlzLnRpbGVZLCAxMCApO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCB0aGlzLnByb3BlcnR5LmV4cGxvc2lvbiA9PSBcImZpcmVcIiApIHtcclxuICAgICAgICAgICAgICAgIFNvdW5kLnBsYXlTb3VuZCggXCJzb3VuZC9leHBsb3Npb25fZmlyZS53YXZcIiApO1xyXG4gICAgICAgICAgICAgICAgbmV3IEVmZmVjdCggXCJib29tXCIsIHRoaXMuZ2V0WCgpLCB0aGlzLmdldFkoKSwgNTAsIDMwMCwgaGl0RHVyLCAweGZmOTAwMCApO1xyXG4gICAgICAgICAgICAgICAgR0xPQkFMLndvcmxkLmVsZW1lbnRhbC5hZGRFbGVtZW50YWwoIEVsZW1lbnRhbC5GSVJFLCB0aGlzLnRpbGVYLCB0aGlzLnRpbGVZLCAxMCApO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCB0aGlzLnByb3BlcnR5LmV4cGxvc2lvbiA9PSBcInBvaXNvblwiICkge1xyXG4gICAgICAgICAgICAgICAgU291bmQucGxheVNvdW5kKCBcInNvdW5kL2V4cGxvc2lvbl9nYXMud2F2XCIgKTtcclxuICAgICAgICAgICAgICAgIG5ldyBFZmZlY3QoIFwiYm9vbVwiLCB0aGlzLmdldFgoKSwgdGhpcy5nZXRZKCksIDMwLCA0MDAsIGhpdER1ciwgMHhmZjAwZmYgKTtcclxuICAgICAgICAgICAgICAgIEdMT0JBTC53b3JsZC5lbGVtZW50YWwuYWRkRWxlbWVudGFsKCBFbGVtZW50YWwuUE9JU09OLCB0aGlzLnRpbGVYLCB0aGlzLnRpbGVZLCAxMCApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDsnbTqsbgg7Jik67KE65287J2065Oc7ZW07IScIOyTtOuLpFxyXG4gICAgICAgIHRoaXMuYWZ0ZXJEZWF0aCggZG1nLCBhdHRhY2tlciwgZnJvbVgsIGZyb21ZLCBoaXREdXIsIHNvdW5kICk7XHJcbiAgICB9XHJcblxyXG4gICAgYWZ0ZXJEZWF0aCggZG1nLCBhdHRhY2tlciwgZnJvbVgsIGZyb21ZLCBoaXREdXIsIHNvdW5kICkge1xyXG4gICAgICAgIEdMT0JBTC5wbGF5ZXIuZXhwID0gR0xPQkFMLnBsYXllci5leHAgKyAxO1xyXG4gICAgICAgIGNvbnN0IG51bU9mRHJvcCA9IEdMT0JBTC53b3JsZC5yYW5kb20oIDEsNCApO1xyXG4gICAgICAgIGNvbnN0IGZsb29yTGlzdCA9IEdMT0JBTC53b3JsZC5wYXRoTWFuYWdlci5nZXRTcGxhc2hGbG9vciggdGhpcy50aWxlWCwgdGhpcy50aWxlWSwgbnVtT2ZEcm9wICk7XHJcblxyXG4gICAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IG51bU9mRHJvcDsgaSsrICkge1xyXG4gICAgICAgICAgICBHTE9CQUwud29ybGQuZW50aXR5TWFuYWdlci5hZGRFbnRpdHkoIG5ldyBJdGVtKCBJdGVtLmdvbGQsIGZsb29yTGlzdFtpXS54LCBmbG9vckxpc3RbaV0ueSwge1xyXG4gICAgICAgICAgICAgICAgYW1vdW50OiAgICBHTE9CQUwud29ybGQucmFuZG9tKCAxLDMwICksXHJcbiAgICAgICAgICAgICAgICBkcm9wOiAgICAgIHRydWUsIGRyb3BYOiAgICAgdGhpcy50aWxlWCwgZHJvcFk6ICAgICB0aGlzLnRpbGVZLFxyXG4gICAgICAgICAgICAgICAgZHJvcERlbGF5OiAoIG51bU9mRHJvcCAtIGkgKSAqIDEwMCArIGhpdER1cixcclxuICAgICAgICAgICAgfSApICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIEdMT0JBTC53b3JsZC5yYW5kb20oIDEsMyApID09IDEgKSB7XHJcbiAgICAgICAgICAgIEdMT0JBTC53b3JsZC5lbnRpdHlNYW5hZ2VyLmFkZEVudGl0eShcclxuICAgICAgICAgICAgICAgIG5ldyBJdGVtKCBJdGVtLnZhbGlkSWRMaXN0W0dMT0JBTC53b3JsZC5yYW5kb20oIDAsSXRlbS52YWxpZElkTGlzdC5sZW5ndGggLSAxICldLCB0aGlzLnRpbGVYLCB0aGlzLnRpbGVZLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcDogICAgICB0cnVlLCBkcm9wWDogICAgIHRoaXMudGlsZVgsIGRyb3BZOiAgICAgdGhpcy50aWxlWSxcclxuICAgICAgICAgICAgICAgICAgICBkcm9wRGVsYXk6IDEwMCArIGhpdER1cixcclxuICAgICAgICAgICAgICAgIH0gKSApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgZGFtYWdlKCBkbWcsIGF0dGFja2VyLCBmcm9tWCwgZnJvbVksIGhpdER1ciwgc291bmQgKSB7XHJcbiAgICAgICAgaGl0RHVyID0gaGl0RHVyIHx8IDA7XHJcbiAgICAgICAgdGhpcy5ocCA9IHRoaXMuaHAgLSBkbWc7XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5ocCA8PSAwICkge1xyXG4gICAgICAgICAgICB0aGlzLmRlYXRoKCBkbWcsIGF0dGFja2VyLCBmcm9tWCwgZnJvbVksIGhpdER1ciwgc291bmQgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgbW9vZDtcclxuXHJcbiAgICAgICAgICAgIGlmICggIXRoaXMudGFyZ2V0ICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXQgPSBhdHRhY2tlcjtcclxuICAgICAgICAgICAgICAgIG1vb2QgPSBcIiFcIjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICggR0xPQkFMLndvcmxkLnJhbmRvbSggMSxNYXRoLmZsb29yKCB0aGlzLmhwIC8gMTAgKSArIDEgKSA9PSAxICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXQgPSBhdHRhY2tlcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbmV3IEVmZmVjdCggXCJkYW1hZ2VcIiwgZnJvbVgsIGZyb21ZLCB0aGlzLmdldFgoKSwgdGhpcy5nZXRZKCksIHRoaXMsIGF0dGFja2VyLCBoaXREdXIgKTtcclxuICAgICAgICAgICAgVGltZXIuZGVsYXllZENhbGwoIGhpdER1ciwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93TW9vZCggbW9vZCApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wUHJldmlvdXNBY3Rpb24oIFwiZGFtYWdlXCIgKTtcclxuICAgICAgICAgICAgICAgIEdMT0JBTC5pbnRlcmZhY2UuYWRkTG9nKCBcIiVze+ulvH0g6rO16rKp7ZWY7JesIDx5ZWxsb3c+JWQ8L3llbGxvdz4g64yA66+47KeAIVwiLCB0aGlzLmdldE5hbWUoKSwgZG1nICk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBhdHRhY2tlciA9PSB0aGlzLmZvbGxvdyApIHtcclxuICAgICAgICAgICAgICAgICAgICBHTE9CQUwud29ybGQuYWRkTG9nKCBcIiVze+qwgH0gJXPsnZgg6rO16rKp7J2EIOuwm+qzoCDtmZTqsIAg64Ks64ukIVwiLCB0aGlzLmdldE5hbWUoKSwgYXR0YWNrZXIuZ2V0TmFtZSgpICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoR2F1Z2UoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIHNvdW5kICkge1xyXG4gICAgICAgICAgICAgICAgICAgIFNvdW5kLnBsYXlTb3VuZCggXCJzb3VuZC9cIiArIHNvdW5kICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCBcIuyCrOyatOuTnCDsp4DsoJUg7JWI65CoXCIgKTtcclxuICAgICAgICAgICAgICAgICAgICBTb3VuZC5wbGF5U291bmQoIHNvdW5kIHx8IFwic291bmQvZGFtYWdlXzAud2F2XCIgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBnZXRTY2hkdWxlKCBob3VyLCBtaW4gKSB7XHJcbiAgICAgICAgaWYgKCB0aGlzLnByb3BlcnR5LnNjaGVkdWxlID09IG51bGwgKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB0aTtcclxuXHJcbiAgICAgICAgaWYgKCBob3VyICkge1xyXG4gICAgICAgICAgICB0aSA9IHsgaG91cjogaG91ciwgbWluOiBtaW4gfHwgMCB9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRpID0gR0xPQkFMLndvcmxkLmdldERhdGVUaW1lKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc2M7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCBg6rKM7J6EIOuCtOydmCDsi5zqsIQgJHt0aS5ob3VyfeyLnCAke3RpLm1pbn3rtoRgICk7XHJcblxyXG4gICAgICAgIGZvciAoIGxldCBpID0gdGhpcy5wcm9wZXJ0eS5zY2hlZHVsZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSApIHtcclxuICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMucHJvcGVydHkuc2NoZWR1bGVbaV07XHJcblxyXG4gICAgICAgICAgICBpZiAoIHYuaG91ciA8IHRpLmhvdXIgfHwgKCB2LmhvdXIgPT0gdGkuaG91ciAmJiB2Lm1pbiA8PSB0aS5taW4gKSApIHtcclxuICAgICAgICAgICAgICAgIC8vIOyVveyGjeyLnOqwhFxyXG4gICAgICAgICAgICAgICAgc2MgPSB2O1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coIFwi7Iqk7LyA7KW0IOqysOyglVwiLCBzYy5ob3VyLCBzYy5taW4sIFwi67aA7YSwXCIsIHNjLnBsYWNlLCBcIuyXkCDsnojslrTslbwg7ZWc64ukLlwiICk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCBzYyA9PSBudWxsICkge1xyXG4gICAgICAgICAgICBzYyA9IHRoaXMucHJvcGVydHkuc2NoZWR1bGVbdGhpcy5wcm9wZXJ0eS5zY2hlZHVsZS5sZW5ndGggLSAxXTtcclxuXHJcbiAgICAgICAgICAgIGlmICggc2MgPT0gbnVsbCApIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCBcIuyKpOy8gOyltOydhCDssL7snYQg7IiY6rCAIOyXhuuLpC4g7J206rG0IOuNsOydtO2EsOulvCDsnpjrqrsg7J6R7ISx7ZWcIOqyg+yehC5cIiApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gc2M7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIOqwgOuKpe2VnCDrqqzsiqTthLAg66qp66GdXHJcbiAgICBzdGF0aWMgcGlja01vbnN0ZXJzKCBhdHRyaWIgKSB7XHJcbiAgICAgICAgY29uc3QgdCA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKCBjb25zdCBrIGluIE1vbnN0ZXIucHJvcGVydHkgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHYgPSBNb25zdGVyLnByb3BlcnR5W2tdO1xyXG5cclxuICAgICAgICAgICAgaWYgKCBVdGlscy5maWx0ZXJBdHRyaWIoIGF0dHJpYiwgdi53aGl0ZUF0dHJpYiwgdi5ibGFja0F0dHJpYiApICkge1xyXG4gICAgICAgICAgICAgICAgdC5wdXNoKCBrICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBwYXJzZU1vbnN0ZXJMaXN0KCBzdHIgKSB7XHJcbiAgICAgICAgY29uc3QgdCA9IHN0ci5zcGxpdCggXCIsXCIgKTtcclxuICAgICAgICBsZXQgbXVzdENvdW50ID0gMDtcclxuXHJcbiAgICAgICAgZm9yICggY29uc3QgaSBpbiB0ICkge1xyXG4gICAgICAgICAgICBjb25zdCB2ID0gdFtpXTtcclxuICAgICAgICAgICAgLy9sZXQgWyx0eXBlLCBuYW1lXSA9IHN0cmluZy5tYXRjaCh2LCBcIihbJWElP10/KSguKilcIik7XHJcbiAgICAgICAgICAgIGNvbnN0IFssIHR5cGUsIG5hbWVdID0gLyhbYS16QS1aP10/KSguKikvLmV4ZWMoIHYgKTtcclxuXHJcbiAgICAgICAgICAgIHRbaV0gPSB7IG5hbWU6IG5hbWUsIHR5cGU6ICggdHlwZSA9PSBcIlwiID8gbnVsbCA6IHR5cGUgKSB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKCB0eXBlICE9IFwiP1wiICkge1xyXG4gICAgICAgICAgICAgICAgbXVzdENvdW50ID0gbXVzdENvdW50ICsgMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIFt0LCBtdXN0Q291bnRdO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuXHJcbkFJLnRyYWNrRmFzdCA9IGZ1bmN0aW9uICggc2VsZiwgdGFyZ2V0LCBkaXN0LCBkaXIgKSB7XHJcbiAgICBkaXIgPSBkaXIgfHwgMTtcclxuICAgIC8vIOunpO2EtCDstpTsoIFcclxuICAgIGxldCBbYXgsIGF5XSA9IFtNYXRoLnNpZ24oIHRhcmdldC50aWxlWCAtIHNlbGYudGlsZVggKSwgTWF0aC5zaWduKCB0YXJnZXQudGlsZVkgLSBzZWxmLnRpbGVZICldO1xyXG4gICAgY29uc3QgbXBIID0gc2VsZi5nZXRQcm9wZXJ0eVJlbCggYXgsIDAgKTtcclxuICAgIGNvbnN0IGNwSCA9IHNlbGYuZ2V0RW50aXR5UHJvcGVydHlSZWwoIGF4LCAwICk7XHJcbiAgICBjb25zdCBtcFYgPSBzZWxmLmdldFByb3BlcnR5UmVsKCAwLCBheSApO1xyXG4gICAgY29uc3QgY3BWID0gc2VsZi5nZXRFbnRpdHlQcm9wZXJ0eVJlbCggMCwgYXkgKTtcclxuXHJcbiAgICBpZiAoIG1wSC53YWxsID4gMCB8fCBjcEggKSB7IC8vIOqwgOyVvOuQmOuKlOuNsCDrp4ntnowg6rK97JqwXHJcbiAgICAgICAgaWYgKCBheSA9PSAwICkgeyAvLyDqsJnsnYAg7KSE7J2066m0IOuenOuNpO2VmOqyjCDsmrDtmoxcclxuICAgICAgICAgICAgYXkgPSAoIEdMT0JBTC53b3JsZC5yYW5kb20oIDEsMiApIC0gMSApICogMiAtIDE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICggbXBWLndhbGwgPiAwIHx8IGNwViApIHtcclxuICAgICAgICBpZiAoIGF4ID09IDAgKSB7IC8vIOqwmeydgCDspITsnbTrqbQg656c642k7ZWY6rKMIOyasO2ajFxyXG4gICAgICAgICAgICBheCA9ICggR0xPQkFMLndvcmxkLnJhbmRvbSggMSwyICkgLSAxICkgKiAyIC0gMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBheCA9PSAwIHx8IGF5ID09IDAgKSB7XHJcbiAgICAgICAgLy9cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKCBHTE9CQUwud29ybGQucmFuZG9tKCAxLDIgKSA9PSAxICkge1xyXG4gICAgICAgICAgICBheCA9IDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYXkgPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBtcCA9IHNlbGYuZ2V0UHJvcGVydHlSZWwoIGF4ICogZGlyLCBheSAqIGRpciApO1xyXG4gICAgY29uc3QgY3AgPSBzZWxmLmdldEVudGl0eVByb3BlcnR5UmVsKCBheCAqIGRpciwgYXkgKiBkaXIgKTtcclxuXHJcbiAgICBpZiAoIG1wLndhbGwgPiAwIHx8IGNwICkge1xyXG4gICAgICAgIC8vbG9nKFwibW92ZVwiLGF4LGF5LFwiYmxvY2tlZFwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2VsZi5tb3ZlVG9SZWwoIGF4ICogZGlyLCBheSAqIGRpciApO1xyXG4gICAgfVxyXG59O1xyXG5cclxuQUkudHJhY2tTbG93ID0gZnVuY3Rpb24oIHNlbGYsdGFyZ2V0LGRpc3QsZGlyICkge1xyXG4gICAgLy8g7KKAIOyynOyynO2eiCDtirjrnpntlahcclxuICAgIGlmICggR0xPQkFMLndvcmxkLnJhbmRvbSggMSw0ICkgPiAxICkge1xyXG4gICAgICAgIEFJLnRyYWNrRmFzdCggc2VsZix0YXJnZXQsZGlzdCxkaXIgKTtcclxuICAgIH1cclxufTtcclxuXHJcbkFJLnRyYWNrRXhhY3RseSA9IGZ1bmN0aW9uKCBzZWxmLHRhcmdldCxkaXN0LGRpciApIHtcclxuICAgIGlmICggZGlzdCA8PSBzZWxmLnNlbnNlRGlzdGFuY2UgJiYgc2VsZi5jYW5TZWUoIHRhcmdldC50aWxlWCwgdGFyZ2V0LnRpbGVZICkgKSB7XHJcbiAgICAgICAgLy8g67O07J2064qUIOqxsOumrOydtOuvgOuhnCDsl6zquLDquYzsp4BcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKCAhc2VsZi5wYXRoIHx8IHNlbGYucGF0aC5sZW5ndGggPT0gMCApIHtcclxuICAgICAgICAgICAgc2VsZi5wYXRoID0gR0xPQkFMLndvcmxkLnBhdGhNYW5hZ2VyLmZpbmRQYXRoKCBzZWxmLnRpbGVYLHNlbGYudGlsZVksdGFyZ2V0LnRpbGVYLHRhcmdldC50aWxlWSx0cnVlICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIHNlbGYucGF0aCAmJiBzZWxmLnBhdGgubGVuZ3RoID4gMCApIHtcclxuICAgICAgICAgICAgY29uc3QgW3R4LCB0eV0gPSBbc2VsZi5wYXRoWzBdLngsIHNlbGYucGF0aFswXS55XTtcclxuXHJcbiAgICAgICAgICAgIHNlbGYucGF0aC5zaGlmdCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCBzZWxmLnBhdGgubGVuZ3RoID09IDAgKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnBhdGggPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoICFzZWxmLm1vdmVUbyggdHgsIHR5ICkgKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDrqrvssL7snYxcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCBzZWxmLmdldE5hbWUoKSwgXCLquLjsnbQg66eJ7ZiU7J2MXCIsIHRhcmdldC5nZXROYW1lKCkgKTtcclxuICAgICAgICAgICAgICAgIHNlbGYucGF0aCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyDsnbTrj5kg66q77ZWoXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCBzZWxmLmdldE5hbWUoKSxcIu2DgOqyn+yXkCDsnbTrpbTripQg6ri47J2EIOuqu+ywvuydjFwiLHRhcmdldC5nZXROYW1lKCkgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG5BSS5mb2xsb3dGYXN0ID0gZnVuY3Rpb24oIHNlbGYsdGFyZ2V0LGRpc3QsZGlyICkge1xyXG4gICAgQUkudHJhY2tGYXN0KCBzZWxmLHNlbGYuZm9sbG93LGRpc3QsZGlyICk7XHJcbn07XHJcblxyXG5BSS5mb2xsb3dTbG93ID0gZnVuY3Rpb24oIHNlbGYsdGFyZ2V0LGRpc3QsZGlyICkge1xyXG4gICAgaWYgKCBHTE9CQUwud29ybGQucmFuZG9tKCAxLDQgKSA+IDEgKSB7XHJcbiAgICAgICAgQUkudHJhY2tGYXN0KCBzZWxmLHNlbGYuZm9sbG93LGRpc3QsZGlyICk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5BSS5mb2xsb3dFeGF0bHkgPSBmdW5jdGlvbiggc2VsZix0YXJnZXQsZGlzdCxkaXIgKSB7XHJcbiAgICBkaXN0ID0gR0xPQkFMLndvcmxkLmdldERpc3RhbmNlQmV0d2VlbkVudGl0aWVzKCBzZWxmLHNlbGYuZm9sbG93ICk7XHJcbiAgICBBSS50cmFja0V4YWN0bHkoIHNlbGYsc2VsZi5mb2xsb3csZGlzdCxkaXIgKTtcclxufTtcclxuXHJcbkFJLnJldHJlYXRTbG93ID0gZnVuY3Rpb24oIHNlbGYsdGFyZ2V0LGRpc3QgKSB7XHJcbiAgICAvLyB0cmFja1Nsb3fsnZgg67CY64yAXHJcbiAgICByZXR1cm4gQUkudHJhY2tTbG93KCBzZWxmLHRhcmdldCxkaXN0LC0xICk7XHJcbn07XHJcblxyXG5BSS5yZXRyZWF0RmFzdCA9IGZ1bmN0aW9uKCBzZWxmLHRhcmdldCxkaXN0ICkge1xyXG4gICAgLy8gdHJhY2tGYXN07J2YIOuwmOuMgFxyXG4gICAgcmV0dXJuIEFJLnRyYWNrRmFzdCggc2VsZix0YXJnZXQsZGlzdCwtMSApO1xyXG59O1xyXG5cclxuQUkubW92ZVRvUGxhY2UgPSBmdW5jdGlvbiggc2VsZix0YXJnZXQsZGlzdCApIHtcclxuICAgIGlmICggc2VsZi5wYXRoICYmIHNlbGYucGF0aC5sZW5ndGggPiAwICkge1xyXG4gICAgICAgIC8vIOydtOuPme2VnOuLpC5cclxuICAgICAgICBjb25zdCBbdHgsIHR5XSA9IFtzZWxmLnBhdGhbMF0ueCwgc2VsZi5wYXRoWzBdLnldO1xyXG5cclxuICAgICAgICBzZWxmLnBhdGguc2hpZnQoKTtcclxuXHJcbiAgICAgICAgaWYgKCBzZWxmLnBhdGgubGVuZ3RoID09IDAgKSB7XHJcbiAgICAgICAgICAgIHNlbGYucGF0aCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoICFzZWxmLm1vdmVUbyggdHgsIHR5ICkgKSB7XHJcbiAgICAgICAgICAgIC8vIOydtOuPmeydhCDrqrvtlZjrqbQuIO2UjOugiOydtOyWtOudvOuToOqwgCDtlITrno3snbTrnbzrk6DqsIAg6rCB7KKFIOyXrOufrCDsnbTsnKDroZwg66q76rCQXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCBzZWxmLmdldE5hbWUoKSwgXCLquLjsnbQg66eJ7ZiU7J2MXCIgKTtcclxuICAgICAgICAgICAgc2VsZi5wYXRoID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIO2VnOuyiCDrjZQg65SU7IKs7J2065Oc66W8IOu2iOufrOyjvOuptCBhY3Rpb27snYQg7IiY7ZaJ7ZWgIOqyg+ydtOuLpC5cclxuICAgICAgICBzZWxmLm1vZGUgPSBudWxsO1xyXG4gICAgICAgIGRlY2lkZVNjaGVkdWxlLmNhbGwoIHNlbGYsdGFyZ2V0LGRpc3QgKTtcclxuXHJcbiAgICAgICAgaWYgKCAhc2VsZi5tb2RlICkge1xyXG4gICAgICAgICAgICBzZWxmLm1vZGUgPSBcInJvYW1pbmdcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCBzZWxmLmdldE5hbWUoKSxcInBhdGjqsIAg64Gd64Ks7J2MLiDri6TsnYzsnYAgXCIsc2VsZi5tb2RlICk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5BSS5yb2FtaW5nID0gZnVuY3Rpb24oIHNlbGYsdGFyZ2V0LGRpc3QgKSB7XHJcbiAgICAvLyDsnZjrr7gg7JeG7J20IOuPjOyVhCDri6Tri5hcclxuICAgIC8vIOuyveydtCDsnojsnLzrqbQg6re464OlIOyViOqwkFxyXG4gICAgY29uc3QgW2F4LGF5XSA9IFV0aWxzLmRpclRvT2Zmc2V0KCBHTE9CQUwud29ybGQucmFuZG9tKCAxLDQgKSApO1xyXG4gICAgY29uc3QgbXAgPSBzZWxmLmdldFByb3BlcnR5UmVsKCBheCxheSApO1xyXG4gICAgY29uc3QgY3IgPSBzZWxmLmdldEVudGl0eVByb3BlcnR5UmVsKCBheCwgYXkgKTtcclxuXHJcbiAgICBpZiAoIG1wLndhbGwgPiAwIHx8IGNyICkge1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBzZWxmLm1vdmVUb1JlbCggYXgsYXkgKTtcclxuICAgIH1cclxufTtcclxuXHRcclxuQUkuc3RvcCA9IGZ1bmN0aW9uKCBzZWxmLHRhcmdldCxkaXN0ICkge1xyXG4gICAgLy8g7JWE66y0IOqyg+uPhCDslYjtlahcclxufTtcclxuXHJcbkFJLmF0dGFjayA9IGZ1bmN0aW9uKCBzZWxmLHRhcmdldCxkaXN0ICkge1xyXG4gICAgLy8g6re464OlIOyggeydhCDrlYzrprxcclxuICAgIHNlbGYuYXR0YWNrKCB0YXJnZXQsc2VsZi5jYWxjdWxhdGVEYW1hZ2UoKSApO1xyXG59O1xyXG5cclxuQUkuc2VhcmNoVGFyZ2V0ID0gZnVuY3Rpb24oIHNlbGYsdGFyZ2V0LGRpc3QgKSB7XHJcbiAgICAvLyDtg4Dqsp/snYQg7IiY7IOJXHJcbiAgICBBSS5yb2FtaW5nKCBzZWxmLHRhcmdldCxkaXN0ICk7XHJcbn07XHJcblxyXG5BSS5zbGVlcCA9IGZ1bmN0aW9uKCBzZWxmLHRhcmdldCxkaXN0ICkge1xyXG4gICAgaWYgKCBzZWxmLmxhc3RNb2RlID09IHNlbGYubW9kZSApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgc2VsZi5lbmFibGVEZWZhdWx0QW5pbWF0aW9uKCBmYWxzZSApO1xyXG4gICAgLy9zZWxmLmNoYW5nZUltYWdlKDE0LDIzKTtcclxuICAgIGNvbnN0IHRpbWVyID0gbmV3IFRpbWVyKCAxMDAwICk7XHJcblxyXG4gICAgdGltZXIuc3RhcnQoKTtcclxuICAgIHRpbWVyLm9uKCBFdmVudC5USU1FUiwgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGIgPSBuZXcgSWNvblBhY2soIG5ldyBUZXh0dXJlKCBcImZ4LnBuZ1wiLCBmYWxzZSwgeyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKSwgMTEsIDQsIDE2LCAyNCApO1xyXG4gICAgICAgIGNvbnN0IG1jID0gbmV3IE1vdmllQ2xpcCggW1xyXG4gICAgICAgICAgICBbMCwgNjAsIGIsIHsgeTogWy00LCBVdGlscy5yYW5kb20oIC0zMCwgLTE1ICksIFwib3V0Q3ViaWNcIl0sIHNjYWxlWDogWzAuMiwgMV0sIHNjYWxlWTogWzAuMiwgMV0gfV0sXHJcbiAgICAgICAgICAgIFs1MCwgNjAsIGIsIHsgYWxwaGE6IFsxLCAwLCBcIm91dEN1YmljXCJdIH1dLFxyXG4gICAgICAgIF0gKTtcclxuXHJcbiAgICAgICAgc2VsZi5hZGRDaGlsZCggbWMgKTtcclxuICAgICAgICBUaW1lci5kZWxheWVkQ2FsbCggMTAwMCwgKCkgPT4ge1xyXG4gICAgICAgICAgICBtYy5yZW1vdmVGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgfSApO1xyXG4gICAgfSApO1xyXG4gICAgc2VsZi5vbmNlKCBcInN0b3BBY3Rpb25cIiwgKCkgPT4ge1xyXG4gICAgICAgIHRpbWVyLnN0b3AoKTtcclxuICAgIH0gKTtcclxufTtcclxuXHJcbkFJLnNob3AgPSBmdW5jdGlvbiggc2VsZix0YXJnZXQsZGlzdCApIHtcclxuICAgIEFJLnJvYW1pbmcoIHNlbGYsdGFyZ2V0LGRpc3QgKTtcclxufTtcclxuXHJcbkFJLnBsYXlNdXNpYyA9IGZ1bmN0aW9uKCBzZWxmLHRhcmdldCxkaXN0ICkge1xyXG4gICAgaWYgKCBzZWxmLmxhc3RNb2RlID09IHNlbGYubW9kZSApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgR0xPQkFMLmludGVyZmFjZS5hZGRMb2coIFwiJXN764qUfSDrhbjrnpjrpbwg67aA66W06riwIOyLnOyeke2WiOuLpC5cIixzZWxmLmdldE5hbWUoKSApO1xyXG4gICAgc2VsZi5lbmFibGVEZWZhdWx0QW5pbWF0aW9uKCBmYWxzZSApO1xyXG4gICAgLy9zZWxmLmNoYW5nZUltYWdlKDEsNSk7XHJcbiAgICBjb25zdCBpbnN0cnVtZW50ID0gXCJzb3VuZC9tbWxfY2VsdGljLWhhcnAtYTQud2F2XCI7XHJcbiAgICBjb25zdCBhaGNob28gPSBgXHJcblx0TU1MQHQxMjh2MTU+Pkw0RjJFMkQuTDhDMTY8Qi0xNj5DPEItQUdHPkM8RjJFQ0QyPENEREQxNkUxNnYxNG8xRz5HTDE2PkVGR0FyR0Q8Qi1HRDxCLUdMOD5DMkMyckEubGVuZ3RoPkRFRkE+QzRMMTZydjE1Rkc+QzxGRz5MMzJDLjxDLkZHPkNGRz5DPENGRz5DRkc+QzImQzgmQyZDMkw4cm80RkY0djE0bzFCLTQ+Qi08Qi1CLT5CLXJDNC4+QzxDckNCLTQ8QTQ+QTxBQTQ+QTREND5EPERyRD5ENDw8Qi00PkItPEItQi0+Qi1yQzQuPkM8Q3JDPkM0PEM0Lmxlbmd0aD5DIzxDQy5sZW5ndGg0Lmxlbmd0aD5DIzxEND5ENDxBRD5EPEQ0PEI0PkI8QkI0PkI0PEItND5CLTxCLUItND5CLTQ8QTQ+QTxBQTQ+QTREND5EPEREND5ENDw8Rz5HPEdBNEE+QTQ8Qi0+Qi08Qi1CNEI+QjRDND5DPEdDRz5DPENyPkM8QzRyND5DPEM8Qi00Qi00PkM0QzRELTRELUEtPkUtNDxFLS48QS0uPkEtPEEtNEEtPkEtPEEtNEEtPkEtPEEtNEEtPkEtPEEtNEc+RzxHNEc+RzxHPkM0PkM8Qz5DPEM+QzxDPkM8Rj5GPEY+RjxGPkY8RkUtND5FLTxFLT5FLTxFLT5FLTxFLUQ0PkQ8REY0Lmxlbmd0aD5GIzxGRzQubGVuZ3RoPkc8Ry00RjQ8Qi0uQS0uPkEtPEEtNEEtPkEtPEEtNEEtPkEtPEEtNEEtPkEtPEEtNEc+RzxHNEc+RzxHPkM0PkM8Qz5DPEM+QzxDPkM8Rj5GPEY+RjxGPkY8RkUtND5FLTxFLT5FLTxFLT5FLTxFLUQ0PkQ8REY0Lmxlbmd0aD5GIzxGRjQubGVuZ3RoPkY8Qi0+Qi1DNDxCNHYxNW81QzRDLmxlbmd0aCM+QzQubGVuZ3RoPDxFRUVFREQubGVuZ3RoIz5DQy5sZW5ndGgjPEJCQTE2Qi5sZW5ndGguJkJCPkI8QkFCLmxlbmd0aD5DRERDLmxlbmd0aEMubGVuZ3RoMTYubGVuZ3RoPEcjLkdHIz5DMTYubGVuZ3RoPEIuQTRyQUdBQjE2Lmxlbmd0aD5DIy4mQ3I0LkNELmxlbmd0aC5sZW5ndGhFNEVFRUQubGVuZ3RoIzxBIz5EQy5sZW5ndGg0Lmxlbmd0aDxCQjRBNEIubGVuZ3RoLj5DIy4mQyM8RyMuRzE2ckVFRUVELmxlbmd0aEQubGVuZ3RoIz5DQy5sZW5ndGgjPEJCQTE2Qi5sZW5ndGguJkJCLkIxNkJBQi5sZW5ndGg+Q0REQy5sZW5ndGhDLmxlbmd0aDE2Lmxlbmd0aDxHIy5HRyM+QzE2Lmxlbmd0aDxCLkFBLkExNkFHQUIxNi5sZW5ndGg+QyMuJkNyQy5sZW5ndGhDLmxlbmd0aEMubGVuZ3RoRC5sZW5ndGhFNEVFRUQubGVuZ3RoIzxBIz5EQy5sZW5ndGg0Lmxlbmd0aDxCQjRCNEI0dDc2TDE2Pj5DIy48QyMuRkIubGVuZ3RoLjxCLj5FQS48QS4+RUwzMm8zckZBLmxlbmd0aD4+Q0cyLmxlbmd0aC4mRyMmRzE2Lm8yRS5sZW5ndGguQi4+RUYjLkcxNi5sZW5ndGgmRzY0Lmxlbmd0aCZHMi5sZW5ndGguJkcyLmxlbmd0aC4sXHJcblx0djE0PkItMkcyRi5yLnJDcjI8R0YycjJ2MTVGMkUyRDJFLkUxNkYxNkcyRi5FOEMxLiYmQzJMOHJDQzRyRUVGRjRyRUY0QTRFNEY0cjRHRkZFRUREQ0M0RzRGNHJFRUZGNHJFRjRBNEU0RjRyQi1CLUItQi1BQUdHRkY0RUVGNEE0QS5BMTZBR0YxNkcxNkc0ckVFRUc+REM0LkMuQzE2QzxCLUFHNEFGNC5BQUFGNC5HNC5yRjE2RzE2QUdGRzRBNEItNC5yNEFHRkc0LnIyLkY0RTRGNEc0QS00RzRBLTRCLS4+Qy4mQzxHLkcxNnJFLUUtRS1FLUREPkNDPEItQi1BMTZCLS4mQi1CLS5CLTE2Qi1BQi0+Q0QtRC1DQzE2PEcuRkcubGVuZ3RoPkMxNjxCLS5BLUEtLkEtMTZBLUdBLUItMTY+Qy4mQzxBLS5BLTE2cj5DREUtNEUtRS1FLUQ8QT5EQzQ8Qi1CLTRBLTRCLS4+Qy4mQzxHLkcxNnJFLUUtRS1FLUREPkNDPEItQi1BMTZCLS4mQi1CLS5CLTE2Qi1BQi0+Q0QtRC1DQzE2PEcuRkcubGVuZ3RoPkMxNjxCLS5BLUEtLkEtMTZBLUdBLUItMTY+Qy4mQ3JDQ0NERS00RS1FLUUtRDxBPkRDNDxCLUItMkIuPkMxNnYxNEw0bzJBMUExRy5sZW5ndGgxLmxlbmd0aD5DIzxDQy5sZW5ndGhDLmxlbmd0aDgubGVuZ3RoPkMxNi5sZW5ndGg8RjguRkYubGVuZ3RoLmxlbmd0aEYubGVuZ3RoOEYubGVuZ3RoOEVFRUU4RThELmxlbmd0aCM+TDhEIzxERzQubGVuZ3RoPkc8R0c0Lmxlbmd0aD5HIzxHNEY0Lmxlbmd0aDxCLkEuPkE8QTRBPkE8QTRBPkE8QTRBPkE8QTRHIz5HIzxHNEcubGVuZ3RoIz5HIzxHIz5DNC5sZW5ndGg+QyM8QyM+QyM8QyM+QyM8QyM+QyM8RiM+RiM8RiM+RiM8RiM+RiM8RkU0Lmxlbmd0aD5FPEU+RTxFPkU8RUQ0Lmxlbmd0aD5EIzxERzQubGVuZ3RoPkc8R0Y0Ri5sZW5ndGhGLmxlbmd0aDRCRi5sZW5ndGgjPEI0TDE2Pj5BLj5FLkE8RyMuPkUuRiM8RiMuPkMjLkU8PEIxTDMycjhyLnIuPj5FdDU0PEI+R0IubGVuZ3RoPkU+RTEmRTQuLFxyXG5cdHYxNDxCLTFDMTxBMj5GMjxCLT5GOEItLiZCLUItMkItMkYyQTI8RDEmRDEmRDFMOHJERDQ+PnJDMi5DckM0Q0M0QzRyQzIuQXJCLTRBRDRDNHJDMi5DckM0Q0M0QzRyRTIuREQ0QzRDMkYyckQ0RTQuRy5HMTZyPkQ0PEc0Lkc0cj5DQ0Y0LkYuRjE2ckZFQzxENC5FMnJENC5EMnJGNC5GNEREPEItcjFMNEItQi1CLUItPkQtRC1ELUw4RC0uRS0uJkUtQzRyR0dGNC5GLkYuckYuRi4mRkYuRi5GRkY0LkU0RjRFLkUtLiZFLUM0ckNDQzQuRS00ckEtR0YyTDRBckYuRy5sZW5ndGgtRS1MOEYuRy4mR0M0ckNDPEItNC4+Ri5GLnJGLkYuJkZGNHJGRkY0LkU0RC00RS5FLS4mRS1DLkMuRS1FLUUtNC5BLS5BLS5BLUdGMkE0cjRMNEUubGVuZ3RoLS5GR3JFLj5Hci5sZW5ndGguPDxCLnIuckIuPj5GIy5yPEZGRC5sZW5ndGhGOC5FMi5sZW5ndGgmRTE2TDhyRUVFMnI0QUdHMkEubGVuZ3RoNHI0Ri5sZW5ndGg0Lkc0RTRGLmxlbmd0aCMuRyMuJkdDLmxlbmd0aDRyRy5sZW5ndGhHLmxlbmd0aEYubGVuZ3RoNC5yMkYubGVuZ3RoIy5GMi5yLmxlbmd0aC5GNC5GNEQ0Ri5sZW5ndGgubGVuZ3RoLkUuJkVFNC5FRUU0LkE0LkFHRzJBLmxlbmd0aDRyNEE0RUU0Ri5sZW5ndGg0Ri5sZW5ndGg0Lmxlbmd0aDtcclxuXHRgO1xyXG5cclxuICAgIGNvbnN0IG1tbCA9IG5ldyBNYWJpTU1MKCBhaGNob28saW5zdHJ1bWVudCApO1xyXG5cclxuICAgIHNlbGYuY29tbWFuZEZvbGxvd2VyKCBcImRhbmNlXCIseyBtbWw6IG1tbCB9ICk7XHJcbiAgICBjb25zdCB7IHgsIHkgfSA9IEdMT0JBTC53b3JsZC53b3JsZFRvVGlsZSggR0xPQkFMLndvcmxkLnZpZXdYLEdMT0JBTC53b3JsZC52aWV3WSApO1xyXG5cclxuICAgIGRpc3QgPSBHTE9CQUwud29ybGQuZ2V0RGlzdGFuY2UoIHgseSxzZWxmLnRpbGVYLHNlbGYudGlsZVkgKTtcclxuICAgIG1tbC5zZXRWb2x1bWUoIDAuNSAtIFV0aWxzLmNsYW1wKCBkaXN0IC8gMTYsMCwxICkgKiAwLjUgKTtcclxuICAgIG1tbC5wbGF5KCk7XHJcbiAgICBtbWwub24oIFwibm90ZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgc2VsZi5fX2FuaW1hdGlvblRpY2sgPSAoIHNlbGYuX19hbmltYXRpb25UaWNrICsgMSApICUgMjtcclxuICAgICAgICBzZWxmLmNoYW5nZUltYWdlKCBzZWxmLmltYWdlQ29sLCBzZWxmLmltYWdlUm93ICsgc2VsZi5fX2FuaW1hdGlvblRpY2sgKTtcclxuICAgICAgICBjb25zdCBiID0gbmV3IEljb25QYWNrKCBuZXcgVGV4dHVyZSggXCJmeC5wbmdcIiwgZmFsc2UsIHsgZm9ybWF0OiBUZXh0dXJlQmFzZS5SR0JBNTU1MSB9ICksIFV0aWxzLnJhbmRvbSggOSwgMTAgKSwgNCwgMTYsIDI0ICk7XHJcbiAgICAgICAgY29uc3QgbWMgPSBuZXcgTW92aWVDbGlwKCBbXHJcbiAgICAgICAgICAgIFswLCA2MCwgYiwgeyB5OiBbLTIsIFV0aWxzLnJhbmRvbSggLTMwLCAtMTUgKSwgXCJvdXRCYWNrXCJdLCB4OiBbNywgVXRpbHMucmFuZG9tKCAtNSwgMjAgKSwgXCJpbk91dFNpbmVcIl0gfV0sXHJcbiAgICAgICAgICAgIFs1MCwgNjAsIGIsIHsgYWxwaGE6IFsxLCAwLCBcIm91dEN1YmljXCJdIH1dLFxyXG4gICAgICAgIF0gKTtcclxuXHJcbiAgICAgICAgc2VsZi5hZGRDaGlsZCggbWMgKTtcclxuICAgICAgICBUaW1lci5kZWxheWVkQ2FsbCggMTAwMCwgKCkgPT4ge1xyXG4gICAgICAgICAgICBtYy5yZW1vdmVGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgfSApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIOqxsOumrOqwgCDrqYDrqbQg7IaM66as66W8IOykhOyduOuLpFxyXG4gICAgZnVuY3Rpb24gb25WaWV3Q2hhbmdlZCggZSApIHtcclxuICAgICAgICBjb25zdCB7IHgsIHkgfSA9IEdMT0JBTC53b3JsZC53b3JsZFRvVGlsZSggZS52aWV3WCxlLnZpZXdZICk7XHJcbiAgICAgICAgY29uc3QgZGlzdCA9IEdMT0JBTC53b3JsZC5nZXREaXN0YW5jZSggeCx5LHNlbGYudGlsZVgsc2VsZi50aWxlWSApO1xyXG5cclxuICAgICAgICBtbWwuc2V0Vm9sdW1lKCAwLjUgLSBVdGlscy5jbGFtcCggZGlzdCAvIDE2LDAsMSApICogMC41ICk7XHJcbiAgICB9XHJcblxyXG4gICAgR0xPQkFMLndvcmxkLm9uKCBcInZpZXdDaGFuZ2VkXCIsb25WaWV3Q2hhbmdlZCApO1xyXG4gICAgbW1sLm9uKCBcImNvbXBsZXRlXCIsICgpID0+IHtcclxuICAgICAgICBHTE9CQUwud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lciggXCJ2aWV3Q2hhbmdlZFwiLCBvblZpZXdDaGFuZ2VkICk7XHJcbiAgICB9ICk7XHJcbiAgICBzZWxmLm9uY2UoIFwic3RvcEFjdGlvblwiLCAoKSA9PiB7XHJcbiAgICAgICAgbW1sLnN0b3AoKTtcclxuICAgICAgICBHTE9CQUwud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lciggXCJ2aWV3Q2hhbmdlZFwiLCBvblZpZXdDaGFuZ2VkICk7XHJcbiAgICB9ICk7XHJcbn07XHJcblxyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8g6riw67O4IEFJO1xyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuQUkuZGVmYXVsdCA9IGZ1bmN0aW9uKCBzZWxmLHRhcmdldCxkaXN0LGRpciApIHtcclxuICAgIGlmICggIXRhcmdldCApIHtcclxuICAgICAgICAvLyDrgpwg7JWE7KeBIO2DgOqyn+ydtCDsl4bslrRcclxuICAgICAgICBjb25zdCB0ID0gc2VsZi5zZWFyY2hUYXJnZXQoKTtcclxuXHJcbiAgICAgICAgaWYgKCB0ICkge1xyXG4gICAgICAgICAgICBjb25zdCBbcmVsYXRpb24sIHRhcmdldF0gPSB0O1xyXG5cclxuICAgICAgICAgICAgaWYgKCByZWxhdGlvbiA9PSBcImZcIiApIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2hvd01vb2QoIFwiIVwiICk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnRhcmdldCA9IHRhcmdldDtcclxuICAgICAgICAgICAgICAgIHNlbGYubW9kZSA9IFwidHJhY2tTbG93XCI7XHJcbiAgICAgICAgICAgICAgICBHTE9CQUwud29ybGQuYWRkTG9nKCBcIiVze+qwgH0gJXPsl5Dqsowg7KCB64yA6rCQ7J2EIOuTnOufrOuDiOuLpCFcIiwgc2VsZi5nZXROYW1lKCksIHNlbGYudGFyZ2V0LmdldE5hbWUoKSApO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCByZWxhdGlvbiA9PSBcIkZcIiApIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2hvd01vb2QoIFwiIVwiICk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnRhcmdldCA9IHRhcmdldDtcclxuICAgICAgICAgICAgICAgIHNlbGYubW9kZSA9IFwidHJhY2tGYXN0XCI7XHJcbiAgICAgICAgICAgICAgICBHTE9CQUwud29ybGQuYWRkTG9nKCBcIiVze+qwgH0gJXPsl5Dqsowg6rCV7ZWcIOyggeuMgOqwkOydhCDrk5zrn6zrg4jri6QhXCIsIHNlbGYuZ2V0TmFtZSgpLCBzZWxmLnRhcmdldC5nZXROYW1lKCkgKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICggcmVsYXRpb24gPT0gXCJyXCIgKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNob3dNb29kKCBcImZlYXJcIiApO1xyXG4gICAgICAgICAgICAgICAgc2VsZi50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICBzZWxmLm1vZGUgPSBcInJldHJlYXRTbG93XCI7XHJcbiAgICAgICAgICAgICAgICBHTE9CQUwud29ybGQuYWRkTG9nKCBcIiVze+qwgH0gJXN766W8fSDrs7Tqs6Ag65K36rG47J2M7KeI7LmY6riwIOyLnOyeke2WiOuLpCFcIiwgc2VsZi5nZXROYW1lKCksIHNlbGYudGFyZ2V0LmdldE5hbWUoKSApO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCByZWxhdGlvbiA9PSBcIlJcIiApIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2hvd01vb2QoIFwiZmVhclwiICk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnRhcmdldCA9IHRhcmdldDtcclxuICAgICAgICAgICAgICAgIHNlbGYubW9kZSA9IFwicmV0cmVhdEZhc3RcIjtcclxuICAgICAgICAgICAgICAgIEdMT0JBTC53b3JsZC5hZGRMb2coIFwiJXN76rCAfSAlc3vrpbx9IOuztOqzoCDrj4Trp53suZjquLAg7Iuc7J6R7ZaI64ukIVwiLCBzZWxmLmdldE5hbWUoKSwgc2VsZi50YXJnZXQuZ2V0TmFtZSgpICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIHJlbGF0aW9uID09IFwiPVwiICkge1xyXG4gICAgICAgICAgICAgICAgLy8g64+Z7KGxXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggIXNlbGYudGFyZ2V0ICkge1xyXG4gICAgICAgICAgICBpZiAoIHNlbGYuZm9sbG93ICkge1xyXG4gICAgICAgICAgICAgICAgZGVjaWRlRm9sbG93LmNhbGwoIHNlbGYsIHRhcmdldCwgZGlzdCApO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCBzZWxmLnByb3BlcnR5LnNjaGVkdWxlICkge1xyXG4gICAgICAgICAgICAgICAgZGVjaWRlU2NoZWR1bGUuY2FsbCggc2VsZiwgdGFyZ2V0LCBkaXN0ICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggIXNlbGYubW9kZSApIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coIFwi7JWE66y06rKD64+EIOqysOygleuQmOyngCDslYrslYTshJwg66Gc67CNXCIgKTtcclxuICAgICAgICAgICAgc2VsZi5tb2RlID0gXCJyb2FtaW5nXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyDtg4Dqsp/snbQg7J6I7Ja0XHJcbiAgICAgICAgaWYgKCBzZWxmLm1vZGUgPT0gXCJzZWFyY2hUYXJnZXRcIiApIHtcclxuICAgICAgICAgICAgLy8g6rK96rOEXHJcbiAgICAgICAgICAgIGlmICggZGlzdCA8PSBzZWxmLnNlbnNlRGlzdGFuY2UgJiYgc2VsZi5jYW5TZWUoIHRhcmdldC50aWxlWCwgc2VsZi50aWxlWSApICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCB0YXJnZXQgPT0gR0xPQkFMLnBsYXllciApIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dNb29kKCBcIiFcIiApO1xyXG4gICAgICAgICAgICAgICAgICAgIEdMT0JBTC5pbnRlcmZhY2UuYWRkTG9nKCBcIiVze+qwgH0gJXN766W8fSDrsJzqsqztlojri6QhXCIsIHRhcmdldC5nZXROYW1lKCksIHNlbGYuZ2V0TmFtZSgpICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc2VsZi5tb2RlID0gXCJ0cmFja0Zhc3RcIjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICggR0xPQkFMLndvcmxkLnJhbmRvbSggMSwyMCApID09IDEgKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnRhcmdldCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBzZWxmLm1vZGUgPSBcInJvYW1pbmdcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoIGRpc3QgPj0gc2VsZi5zZW5zZURpc3RhbmNlICogMS41ICkge1xyXG4gICAgICAgICAgICAvLyDripDrgbzripQg6rGw66as7J2YIDE1MCUg67O064ukIOupgOyWtOyngOuptCDrhpPsuZzri6QuXHJcbiAgICAgICAgICAgIGlmICggdGFyZ2V0ID09IEdMT0JBTC5wbGF5ZXIgKSB7XHJcbiAgICAgICAgICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmFkZExvZyggXCIlc3vripR9ICVz7J2YIOy2lOyggeyXkOyEnCDrspfslrTrgqzri6QuXCIsIHRhcmdldC5nZXROYW1lKCksIHNlbGYuZ2V0TmFtZSgpICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNlbGYubW9kZSA9IFwic2VhcmNoVGFyZ2V0XCI7XHJcbiAgICAgICAgfSBlbHNlIGlmICggZGlzdCA8PSBzZWxmLndlYXBvblJhbmdlICkge1xyXG4gICAgICAgICAgICAvLyDqs7XqsqntlZjsnpBcclxuICAgICAgICAgICAgaWYgKCBzZWxmLm1vZGUgPT0gXCJyZXRyZWF0RmFzdFwiICYmIEdMT0JBTC53b3JsZC5yYW5kb20oIDEsNiApID09IDEgKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLm1vZGUgPSBcImF0dGFja1wiO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCBzZWxmLm1vZGUgPT0gXCJyZXRyZWF0U2xvd1wiICYmIEdMT0JBTC53b3JsZC5yYW5kb20oIDEsMyApID09IDEgKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLm1vZGUgPSBcImF0dGFja1wiO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5tb2RlID0gXCJhdHRhY2tcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoICFzZWxmLmNhblNlZSggdGFyZ2V0LnRpbGVYLCB0YXJnZXQudGlsZVkgKSApIHtcclxuICAgICAgICAgICAgY29uc3QgZGljZSA9IEdMT0JBTC53b3JsZC5yYW5kb20oIDEsMTAgKTtcclxuXHJcbiAgICAgICAgICAgIGlmICggZGljZSA9PSAxMCApIHtcclxuICAgICAgICAgICAgICAgIC8vIOyLnOyVvOuwluyXkCDsnojsnLzrqbQg64aT7LmoXHJcbiAgICAgICAgICAgICAgICBpZiAoIHRhcmdldCA9PSBHTE9CQUwucGxheWVyICkge1xyXG4gICAgICAgICAgICAgICAgICAgIEdMT0JBTC5pbnRlcmZhY2UuYWRkTG9nKCBcIiVze+uKlH0gJXPsnZgg7LaU7KCB7JeQ7IScIOuyl+yWtOuCrOuLpC5cIiwgdGFyZ2V0LmdldE5hbWUoKSwgc2VsZi5nZXROYW1lKCkgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzZWxmLm1vZGUgPSBcInNlYXJjaFRhcmdldFwiO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCBkaWNlIDw9IDUgKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnBhdGggPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5tb2RlID0gXCJ0cmFja0V4YWN0bHlcIjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICggc2VsZi5tb2RlICE9IFwidHJhY2tGYXN0XCIgfHwgc2VsZi5tb2RlICE9IFwidHJhY2tTbG93XCIgKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLm1vZGUgPSBHTE9CQUwud29ybGQucmFuZG9tKCAxLDIgKSA9PSAxID8gXCJ0cmFja1Nsb3dcIiA6IFwidHJhY2tGYXN0XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIHNlbGYuaHAgLyBzZWxmLmhwTWF4IDw9IDAuMiApIHtcclxuICAgICAgICAgICAgICAgIGlmICggc2VsZi5tb2RlICE9IFwicmV0cmVhdFNsb3dcIiApIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNob3dNb29kKCBcImZlYXJcIiApO1xyXG4gICAgICAgICAgICAgICAgICAgIEdMT0JBTC53b3JsZC5hZGRMb2coIFwiJXN76rCAfSDrj4Trp53suZjquLAg7Iuc7J6R7ZaI64ukIVwiLCBzZWxmLmdldE5hbWUoKSApO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubW9kZSA9IFwicmV0cmVhdFNsb3dcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNlbGYubW9kZSA9IFwidHJhY2tTbG93XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBzZWxmLm1vZGUgPT0gbnVsbCApIHtcclxuICAgICAgICBjb25zb2xlLmxvZyggc2VsZi5nZXROYW1lKCksc2VsZi5tb2RlLHNlbGYudGFyZ2V0ICk7XHJcbiAgICAgICAgY29uc29sZS5sb2coIFwi66qo65Oc7ISk7KCV7J20IOyemOuqu+uQmOyXiOydjFwiLHNlbGYuZ2V0TmFtZSgpICk7XHJcbiAgICB9XHJcblxyXG4gICAgQUlbc2VsZi5tb2RlXSggc2VsZixzZWxmLnRhcmdldCxkaXN0ICk7XHJcblxyXG4gICAgLy8g7ZSM66CI7J207Ja06rCAIOyLpOyImOuhnCDrlYzrprAg6rK97JqwIOygleyLoOywqOumrOq4sFxyXG4gICAgaWYgKCBzZWxmLmZvbGxvdyAmJiBzZWxmLmZvbGxvdyA9PSB0YXJnZXQgKSB7XHJcbiAgICAgICAgaWYgKCBHTE9CQUwud29ybGQucmFuZG9tKCAxLDUgKSA9PSAxICkge1xyXG4gICAgICAgICAgICBHTE9CQUwud29ybGQuYWRkTG9nKCBcIiVze+qwgH0g7KCV7Iug7J2EIOywqOuguOuLpC5cIixzZWxmLmdldE5hbWUoKSApO1xyXG4gICAgICAgICAgICBzZWxmLnRhcmdldCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxuQUkuY2l0aXplbiA9IGZ1bmN0aW9uICggc2VsZiwgdGFyZ2V0LCBkaXN0LCBkaXIgKSB7XHJcbiAgICBBSS5kZWZhdWx0KCBzZWxmLCB0YXJnZXQsIGRpc3QgKTtcclxufTtcclxuXHJcbkFJLmNhdCA9IGZ1bmN0aW9uICggc2VsZiwgdGFyZ2V0LCBkaXN0LGRpciApIHtcclxuICAgIEFJLmRlZmF1bHQoIHNlbGYsIHRhcmdldCwgZGlzdCxkaXIgKTtcclxufTtcclxuXHJcblxyXG5Nb25zdGVyLnByb3BlcnR5ID0ge1xyXG4gICAgW1wi7KWQXCJdOiB7XHJcbiAgICAgICAgaW1hZ2U6ICAgICAgIFsyLCAzXSwgY29sb3I6ICAgICAgIENvbG9ycy5PcmFuZ2UsXHJcbiAgICAgICAgZmFjdGlvbjogICAgIFwiQVwiLCBhdHRhY2s6ICAgICAgXCIxfjNcIiwgaHA6ICAgICAgICAgIDUsIHdoaXRlQXR0cmliOiBcIipcIiwgYmxhY2tBdHRyaWI6IFwiXCIsXHJcbiAgICB9LFxyXG5cclxuICAgIFtcIuylkOqwgOyhsVwiXToge1xyXG4gICAgICAgIGxpc3Q6ICAgICAgICBcIkvspZAs7KWQLOylkCzspZAsP+ylkCw/7KWQXCIsXHJcbiAgICAgICAgd2hpdGVBdHRyaWI6IFwiY2F2ZSxkdW5nZW9uXCIsIGJsYWNrQXR0cmliOiBcIlwiLFxyXG4gICAgfSxcclxuXHJcbn07XHJcblxyXG5Nb25zdGVyLkFJID0gQUk7XHJcblxyXG5cclxuXHJcbiIsImltcG9ydCB7IFNvdW5kLFV0aWxzLCBNb3ZpZUNsaXAsIFRleHR1cmUsIFRleHR1cmVCYXNlLCBTcHJpdGUsIEV2ZW50LCBUaW1lciwgUGFydGljbGVzIH0gZnJvbSBcIkBlbmdpbmUvZmxhdGZhc3RcIjtcclxuXHJcbmltcG9ydCBHYW1lTWFwIGZyb20gXCIuLi93b3JsZC9nYW1lTWFwXCI7XHJcbmltcG9ydCBFbGVtZW50YWwgZnJvbSBcIi4uL3dvcmxkL2VsZW1lbnRhbFwiO1xyXG5pbXBvcnQgUmFuZG9tIGZyb20gXCJAbGliL3JhbmRvbVwiO1xyXG5pbXBvcnQgQ29sb3JzIGZyb20gXCJAbGliL2NvbG9yc1wiO1xyXG5pbXBvcnQgQ3JlYXR1cmUgZnJvbSBcIi4vY3JlYXR1cmVcIjtcclxuaW1wb3J0IE1vbnN0ZXIgZnJvbSBcIi4vbW9uc3RlclwiO1xyXG5pbXBvcnQgSXRlbSBmcm9tIFwiLi9pdGVtXCI7XHJcblxyXG5pbXBvcnQgR0xPQkFMIGZyb20gXCIuLi9nbG9iYWxcIjtcclxuaW1wb3J0IEVmZmVjdCBmcm9tIFwiLi4vZWZmZWN0XCI7XHJcblxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5wYyBleHRlbmRzIE1vbnN0ZXIge1xyXG4gICAgY29uc3RydWN0b3IoIG5hbWUsIHRpbGVYLCB0aWxlWSwgb3B0aW9ucyApIHtcclxuICAgICAgICBzdXBlciggbmFtZSwgdGlsZVgsIHRpbGVZLCBvcHRpb25zICk7XHJcbiAgICAgICAgdGhpcy5pc05wYyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5BSSA9IFwicm9hbWluZ1wiO1xyXG5cclxuICAgICAgICB0aGlzLmZpbGxQcm9wZXJ0aWVzKCBOcGMucHJvcGVydHksIG5hbWUgKTtcclxuICAgICAgICBsZXQgcHIgPSB0aGlzLnByb3BlcnR5O1xyXG5cclxuICAgICAgICAvLyDsiqTsvIDspbTsnbQg7J6I64qUIE5QQ+uKlCDslYTrnpjsnZgg7J6l7IaM66W8IOywuOqzoO2VnOuLpC5cclxuICAgICAgICB0aGlzLnBsYWNlcyA9IFtdO1xyXG5cclxuICAgICAgICB0aGlzLnNlbnNlRGlzdGFuY2UgPSBwci5zZW5zZURpc3RhbmNlIHx8IDY7XHJcbiAgICAgICAgdGhpcy53ZWFwb25SYW5nZSA9IHByLndlYXBvblJhbmdlIHx8IDE7XHJcbiAgICAgICAgdGhpcy5BSSA9IHByLkFJIHx8IFwiZGVmYXVsdFwiO1xyXG4gICAgICAgIHRoaXMuaHBNYXggPSBwci5ocCB8fCAxO1xyXG4gICAgICAgIHRoaXMuaHAgPSB0aGlzLmhwTWF4O1xyXG4gICAgICAgIHRoaXMudGV4dHVyZSA9IENyZWF0dXJlLnRleHR1cmU7XHJcbiAgICAgICAgdGhpcy50aWxlV2lkdGggPSBDcmVhdHVyZS50aWxlV2lkdGg7XHJcbiAgICAgICAgdGhpcy50aWxlSGVpZ2h0ID0gQ3JlYXR1cmUudGlsZUhlaWdodDtcclxuXHJcbiAgICAgICAgdGhpcy5wb3N0SW5pdCggTnBjICk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGF0dGFjayggY3IsIGRtZyApIHtcclxuICAgICAgICBsZXQgeyB4OiB4MSwgeTogeTEgfSA9IEdMT0JBTC53b3JsZC50aWxlQ2VudGVyVG9Xb3JsZCggdGhpcy50aWxlWCwgdGhpcy50aWxlWSApO1xyXG4gICAgICAgIGxldCB7IHg6IHgyLCB5OiB5MiB9ID0gR0xPQkFMLndvcmxkLnRpbGVDZW50ZXJUb1dvcmxkKCBjci50aWxlWCwgY3IudGlsZVkgKTtcclxuICAgICAgICBsZXQgW2R1ciwgaGl0RHVyXSA9IG5ldyBFZmZlY3QoIFwiY2xhd1wiLCB4MSwgeTEsIHgyLCB5MiwgdHJ1ZSwgdGhpcy5nZXRXZWFwb25JbWFnZSggdHJ1ZSwgdHJ1ZSApLCB0aGlzICkuZ2V0RHVyYXRpb24oKTtcclxuXHJcbiAgICAgICAgY3Iuc3RvcCgpO1xyXG4gICAgICAgIGNyLmRhbWFnZSggZG1nLCB0aGlzLCB4MSwgeTEsIGhpdER1ciB8fCBkdXIgKTtcclxuICAgICAgICBHTE9CQUwud29ybGQuZW50aXR5TWFuYWdlci53YWl0KCAzMDAgKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZGFtYWdlKCBkbWcsIGF0dGFja2VyLCBmcm9tWCwgZnJvbVksIGhpdER1ciwgc291bmQgKSB7XHJcbiAgICAgICAgaGl0RHVyID0gaGl0RHVyIHx8IDA7XHJcbiAgICAgICAgdGhpcy5ocCA9IHRoaXMuaHAgLSBkbWc7XHJcbiAgICAgICAgaWYgKCB0aGlzLmhwIDw9IDAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRnJvbVdvcmxkKCk7XHJcbiAgICAgICAgICAgIG5ldyBFZmZlY3QoIFwiZGVhdGhcIiwgZnJvbVgsIGZyb21ZLCB0aGlzLmdldFgoKSwgdGhpcy5nZXRZKCksIHRoaXMsIGF0dGFja2VyLCBoaXREdXIgKTtcclxuICAgICAgICAgICAgVGltZXIuZGVsYXllZENhbGwoIGhpdER1ciwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IHAgPSBuZXcgUGFydGljbGVzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcC5zZXRUZXh0dXJlKCBuZXcgVGV4dHVyZSggXCJCbG9vZC5wbmdcIiApICk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggXCLsgqzrp51cIiwgdGhpcy5nZXRQb3NpdGlvbigpICk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKCBsZXQgaSA9IDE7IGkgPD0gMTA7IGkrKyApIHtcclxuICAgICAgICAgICAgICAgICAgICAvL3AuYWRkUGFydGljbGVzKDAsMCw1MCw5MCw2MCwxMCwxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFuZ2xlID0gVXRpbHMucmFuZG9tKCAzNjAgKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc3BlZWQgPSBVdGlscy5yYW5kb20oIDYgKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgeyB4LCB5IH0gPSB0aGlzLmdldFBvc2l0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHggPSB4OyAvLyBHTE9CQUwud29ybGQudmlld1dpZHRoLzI7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8geSA9IHk7IC8vIEdMT0JBTC53b3JsZC52aWV3SGVpZ2h0LzI7XHJcbiAgICAgICAgICAgICAgICAgICAgcC5hZGRQYXJ0aWNsZXMoIFt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6ICAgICAgICAgICAgeCwgeTogICAgICAgICAgICB5LCBzaXplOiAgICAgICAgIFV0aWxzLnJhbmRvbSggNCwgMzAgKSwvL3RoaXMuZ2V0WCgpLHk9dGhpcy5nZXRZKCksc2l6ZT0yMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGU6ICAgICAgICBhbmdsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHRsOiAgICAgICAgICA2MCArIFV0aWxzLnJhbmRvbSggMTAwICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwZWVkWDogICAgICAgVXRpbHMuY29zKCBhbmdsZSApICogc3BlZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwZWVkWTogICAgICAgVXRpbHMuc2luKCBhbmdsZSApICogc3BlZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwZWVkQW5ndWxhcjogVXRpbHMucmFuZG9tKCAzMCApIC0gMTUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlY2F5OiAgICAgICAgMC41LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogICAgICAgIDB4NDAwMDAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHBoYTogICAgICAgIDEuMCxcclxuICAgICAgICAgICAgICAgICAgICB9XSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgR0xPQkFMLndvcmxkLmZsb29yTGF5ZXIuYWRkQ2hpbGQoIHAgKTtcclxuICAgICAgICAgICAgICAgIFNvdW5kLnBsYXlTb3VuZCggc291bmQgfHwgXCJzb3VuZC9kYW1hZ2VfMC53YXZcIiApO1xyXG4gICAgICAgICAgICAgICAgU291bmQucGxheVNvdW5kKCBcInNvdW5kL2ZpbmlzaF8xLndhdlwiICk7XHJcbiAgICAgICAgICAgICAgICBUaW1lci5kZWxheWVkQ2FsbCggNTAwMCwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHAucmVtb3ZlRnJvbVBhcmVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRnJvbVdvcmxkKCk7XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgR0xPQkFMLmludGVyZmFjZS5hZGRMb2coIFwiJXN766W8fSDqs7XqsqntlZjsl6wgJWQg64yA66+47KeAIVwiLCB0aGlzLmdldE5hbWUoKSwgZG1nICk7XHJcbiAgICAgICAgICAgIEdMT0JBTC5pbnRlcmZhY2UuYWRkTG9nKCBcIiVze+ulvH0g7JOw65+s65yo66C464ukIVwiLCB0aGlzLmdldE5hbWUoKSApO1xyXG4gICAgICAgICAgICBHTE9CQUwucGxheWVyLmV4cCA9IEdMT0JBTC5wbGF5ZXIuZXhwICsgMTtcclxuICAgICAgICAgICAgbGV0IG51bU9mRHJvcCA9IFV0aWxzLnJhbmRvbSggNCApO1xyXG4gICAgICAgICAgICBsZXQgZmxvb3JMaXN0ID0gR0xPQkFMLndvcmxkLnBhdGhNYW5hZ2VyLmdldFNwbGFzaEZsb29yKCB0aGlzLnRpbGVYLCB0aGlzLnRpbGVZLCBudW1PZkRyb3AgKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoIGxldCBpID0gMTsgaSA8PSBudW1PZkRyb3A7IGkrKyApIHtcclxuICAgICAgICAgICAgICAgIEdMT0JBTC53b3JsZC5lbnRpdHlNYW5hZ2VyLmFkZEVudGl0eSggbmV3IEl0ZW0oIGZsb29yTGlzdFtpXS54LCBmbG9vckxpc3RbaV0ueSwge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiAgICAgICAgSXRlbS5nb2xkLFxyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogICAgVXRpbHMucmFuZG9tKCAzMCApLFxyXG4gICAgICAgICAgICAgICAgICAgIGRyb3A6ICAgICAgdHJ1ZSwgZHJvcFg6ICAgICB0aGlzLnRpbGVYLCBkcm9wWTogICAgIHRoaXMudGlsZVksXHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcERlbGF5OiAoIG51bU9mRHJvcCAtIGkgKSAqIDEwMCxcclxuICAgICAgICAgICAgICAgIH0gKSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICggVXRpbHMucmFuZG9tKCAzICkgPT0gMSApIHtcclxuICAgICAgICAgICAgICAgIEdMT0JBTC53b3JsZC5lbnRpdHlNYW5hZ2VyLmFkZEVudGl0eSggbmV3IEl0ZW0oIHRoaXMudGlsZVgsIHRoaXMudGlsZVksIHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogICAgICAgIEl0ZW0udmFsaWRJZExpc3RbVXRpbHMucmFuZG9tKCBJdGVtLnZhbGlkSWRMaXN0Lmxlbmd0aCApXSxcclxuICAgICAgICAgICAgICAgICAgICAvL2Ftb3VudDpNYXRoLnJhbmRvbSgzMCksXHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcDogICAgICB0cnVlLCBkcm9wWDogICAgIHRoaXMudGlsZVgsIGRyb3BZOiAgICAgdGhpcy50aWxlWSxcclxuICAgICAgICAgICAgICAgICAgICBkcm9wRGVsYXk6IDEwMCxcclxuICAgICAgICAgICAgICAgIH0gKSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICggdGhpcy5wcm9wZXJ0eS5leHBsb3Npb24gKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMucHJvcGVydHkuZXhwbG9zaW9uID09IFwid2F0ZXJcIiApIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgRWZmZWN0KCBcImJvb21cIiwgdGhpcy5nZXRYKCksIHRoaXMuZ2V0WSgpLCAyMCwgMzUwLCBoaXREdXIsIDB4MDAwMGZmICk7XHJcbiAgICAgICAgICAgICAgICAgICAgR0xPQkFMLndvcmxkLmVsZW1lbnRhbC5hZGRFbGVtZW50YWwoIEVsZW1lbnRhbC5XQVRFUiwgdGhpcy50aWxlWCwgdGhpcy50aWxlWSwgMTAgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHRoaXMucHJvcGVydHkuZXhwbG9zaW9uID09IFwiZmlyZVwiICkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBFZmZlY3QoIFwiYm9vbVwiLCB0aGlzLmdldFgoKSwgdGhpcy5nZXRZKCksIDUwLCAzMDAsIGhpdER1ciwgMHhmZjkwMDAgKTtcclxuICAgICAgICAgICAgICAgICAgICBHTE9CQUwud29ybGQuZWxlbWVudGFsLmFkZEVsZW1lbnRhbCggRWxlbWVudGFsLkZJUkUsIHRoaXMudGlsZVgsIHRoaXMudGlsZVksIDEwICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCB0aGlzLnByb3BlcnR5LmV4cGxvc2lvbiA9PSBcInBvaXNvblwiICkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBFZmZlY3QoIFwiYm9vbVwiLCB0aGlzLmdldFgoKSwgdGhpcy5nZXRZKCksIDMwLCA0MDAsIGhpdER1ciwgMHhmZjAwZmYgKTtcclxuICAgICAgICAgICAgICAgICAgICBHTE9CQUwud29ybGQuZWxlbWVudGFsLmFkZEVsZW1lbnRhbCggRWxlbWVudGFsLlBPSVNPTiwgdGhpcy50aWxlWCwgdGhpcy50aWxlWSwgMTAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG5ldyBFZmZlY3QoIFwiZGFtYWdlXCIsIGZyb21YLCBmcm9tWSwgdGhpcy5nZXRYKCksIHRoaXMuZ2V0WSgpLCB0aGlzLCBhdHRhY2tlciwgaGl0RHVyICk7XHJcbiAgICAgICAgICAgIFRpbWVyLmRlbGF5ZWRDYWxsKCBoaXREdXIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIFNvdW5kLnBsYXlTb3VuZCggc291bmQgfHwgXCJzb3VuZC9kYW1hZ2VfMC53YXZcIiApO1xyXG4gICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgIEdMT0JBTC5pbnRlcmZhY2UuYWRkTG9nKCBcIiVze+ulvH0g6rO16rKp7ZWY7JesICVkIOuMgOuvuOyngCFcIiwgdGhpcy5nZXROYW1lKCksIGRtZyApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy8g7IOB7IaN67Cb7JWY6riwIOuVjOusuOyXkCBNb25zdGVyLnByb3BlcnR566W8IO2MjOq0tO2VoCDsiJgg7J6I7J2MXHJcbk9iamVjdC5hc3NpZ24oIE5wYy5wcm9wZXJ0eSwge1xyXG4gICAgW1wi64KY7JikXCJdOiB7XHJcbiAgICAgICAgaW1hZ2U6ICAgIFsxNywgMV0sIGNvbG9yOiAgICBDb2xvcnMuWWVsbG93LFxyXG4gICAgICAgIGZhY3Rpb246ICBcIkhcIiwgYXR0YWNrOiAgIFwiMn41XCIsIGhwOiAgICAgICAyNSwgQUk6ICAgICAgIFwiY2l0aXplblwiLFxyXG4gICAgICAgIHNjaGVkdWxlOiBbXHJcbiAgICAgICAgICAgIHsgaG91cjogNywgbWluOiAwLCBwbGFjZTogXCJyb29tXCIgfSxcclxuICAgICAgICAgICAgeyBob3VyOiA4LCBtaW46IDMwLCBwbGFjZTogXCJ3b3JrXCIsIGFjdGlvbjogXCJwbGF5TXVzaWNcIiB9LFxyXG4gICAgICAgICAgICB7IGhvdXI6IDE3LCBtaW46IDAsIHBsYWNlOiBcInJvb21cIiB9LFxyXG4gICAgICAgICAgICB7IGhvdXI6IDIxLCBtaW46IDAsIHBsYWNlOiBcImJlZFwiLCByYWRpdXM6IDAsIGFjdGlvbjogXCJzbGVlcFwiIH0sXHJcbiAgICAgICAgXSxcclxuICAgIH1cclxufSApO1xyXG5cclxuXHJcblxyXG5cclxuXHJcbiIsImltcG9ydCB7IFV0aWxzLCBNb3ZpZUNsaXAsIFRleHR1cmUsIFRleHR1cmVCYXNlLCBTcHJpdGUsIEV2ZW50LCBUaW1lciB9IGZyb20gXCJAZW5naW5lL2ZsYXRmYXN0XCI7XHJcblxyXG5pbXBvcnQgR2FtZU1hcCBmcm9tIFwiLi4vd29ybGQvZ2FtZU1hcFwiO1xyXG5pbXBvcnQgUmFuZG9tIGZyb20gXCJAbGliL3JhbmRvbVwiO1xyXG5pbXBvcnQgQ29sb3JzIGZyb20gXCJAbGliL2NvbG9yc1wiO1xyXG5pbXBvcnQgQ3JlYXR1cmUgZnJvbSBcIi4vY3JlYXR1cmVcIjtcclxuaW1wb3J0IE1vbnN0ZXIgZnJvbSBcIi4vbW9uc3RlclwiO1xyXG5pbXBvcnQgSXRlbSBmcm9tIFwiLi9pdGVtXCI7XHJcblxyXG5pbXBvcnQgR0xPQkFMIGZyb20gXCIuLi9nbG9iYWxcIjtcclxuXHJcblxyXG4vKlxyXG5cclxuUGV07J2AIOuqrOyKpO2EsOydmCDsnbzsooXsnbTri6RcclxuXHJcbu2UjOugiOydtOyWtOyZgCDsoIHsoIjtlZwg6rGw66as66W8IOycoOyngO2VmOuptOyEnCDqs7XqsqntlahcclxuXHJcbnBldF9jYXQgPSDshKDqs7XtlZjsp4Ag7JWK7J2MLiDsnpDsi6DsnbQg6rO16rKpIOuwm+qxsOuCmCDtlIzroIjsnbTslrQg6rO16rKpIOuwm+ycvOuptCDqs7XqsqntlaguIOudvOydtO2UhOqwgCDspITslrTrk6TrqbQg64+E66ed7LmoLiBcclxucGV0X2RvZyA9IOyEoOqzte2VmOyngCDslYrsnYwuIOyekOyLoOydtCDqs7Xqsqkg67Cb6rGw64KYIO2UjOugiOydtOyWtCDqs7Xqsqkg67Cb7Jy866m0IOqzteqyqe2VqC4gXHJcbnBldF93b2xmID0g7ISg6rO17ZWoLlxyXG5cclxuXHJcbuuCqOydgCDsnpHsl4VcclxuZm9sbG936rCAIOqzteqyqSDrsJvsnYQg65WMIOqzteqyqe2VmOq4sFxyXG7tlITrno3snbQg6rCA66Gc66eJ7JWEIO2DgOqyn+yXkCDrj4Tri6ztlZjsp4Ag66q77ZWgIOuVjCDtlITrno3snYQg6rO16rKp7ZWY6riwXHJcblxyXG4qL1xyXG5cclxuXHJcblxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBldCBleHRlbmRzIE1vbnN0ZXIge1xyXG4gICAgY29uc3RydWN0b3IoIG5hbWUsIHRpbGVYLCB0aWxlWSwgb3B0aW9ucyApIHtcclxuICAgICAgICBzdXBlciggbmFtZSwgdGlsZVgsIHRpbGVZLCBvcHRpb25zICk7XHJcbiAgICAgICAgdGhpcy5pc1BldCA9IHRydWU7XHJcbiAgICAgICAgLy90aGlzLmlzTW9uc3RlciA9IGZhbHNlO1xyXG4gICAgICAgIGlmICggdGlsZVkgPT0gbnVsbCApIHtcclxuICAgICAgICAgICAgLy8gcGV07J2AIOychOy5mOulvCDsp4DsoJXtlZjsp4Ag7JWK7Jy866m0IO2UjOugiOydtOyWtCDrsJTroZwg7JiG7JeQIOyGjO2ZmO2VnOuLpC5cclxuICAgICAgICAgICAgY29uc3QgdCA9IEdMT0JBTC53b3JsZC5wYXRoTWFuYWdlci5nZXRTdW1tb25GbG9vciggR0xPQkFMLnBsYXllci50aWxlWCwgR0xPQkFMLnBsYXllci50aWxlWSwgMSApO1xyXG5cclxuICAgICAgICAgICAgaWYgKCB0Lmxlbmd0aCA9PSAwICkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coIFwi7IaM7ZmY7ZWgIOyekOumrOqwgCDsl4bsnYxcIiApO1xyXG4gICAgICAgICAgICAgICAgLy8g66qs7Iqk7YSw6rCAIO2UjOugiOydtOyWtCDrsJTroZwg7JiG6rmM7KeAIOyGjO2ZmOuQnCDqsr3smrBcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRpbGVYID0gdFswXS54O1xyXG4gICAgICAgICAgICAgICAgdGlsZVkgPSB0WzBdLnk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0gR0xPQkFMLndvcmxkLnRpbGVDZW50ZXJUb1dvcmxkKCB0aWxlWCwgdGlsZVkgKTtcclxuICAgICAgICAgICAgICAgIFt0aGlzLnRpbGVYLCB0aGlzLnRpbGVZXSA9IFt0aWxlWCwgdGlsZVldO1xyXG4gICAgICAgICAgICAgICAgW3RoaXMubGFzdFRpbGVYLCB0aGlzLmxhc3RUaWxlWV0gPSBbdGlsZVgsIHRpbGVZXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5maWxsUHJvcGVydGllcyggUGV0LnByb3BlcnR5LCBuYW1lICk7XHJcbiAgICAgICAgY29uc3QgcHIgPSB0aGlzLnByb3BlcnR5O1xyXG5cclxuICAgICAgICB0aGlzLnNlbnNlRGlzdGFuY2UgPSBwci5zZW5zZURpc3RhbmNlIHx8IDY7XHJcbiAgICAgICAgdGhpcy53ZWFwb25SYW5nZSA9IHByLndlYXBvblJhbmdlIHx8IDE7XHJcbiAgICAgICAgdGhpcy5mb2xsb3cgPSBHTE9CQUwucGxheWVyOyAvLyDtjqvsnbTri4jquYxcclxuXHJcbiAgICAgICAgdGhpcy5BSSA9IHByLkFJIHx8IFwiZGVmYXVsdFwiO1xyXG4gICAgICAgIHRoaXMuaHBNYXggPSBwci5ocCB8fCAxO1xyXG4gICAgICAgIHRoaXMuaHAgPSB0aGlzLmhwTWF4O1xyXG4gICAgICAgIHRoaXMudGV4dHVyZSA9IENyZWF0dXJlLnRleHR1cmU7XHJcbiAgICAgICAgdGhpcy50aWxlV2lkdGggPSBDcmVhdHVyZS50aWxlV2lkdGg7XHJcbiAgICAgICAgdGhpcy50aWxlSGVpZ2h0ID0gQ3JlYXR1cmUudGlsZUhlaWdodDtcclxuICAgICAgICB0aGlzLnBvc3RJbml0KCBQZXQgKTtcclxuICAgIH1cclxuXHJcbiAgICBjYWxsZWQoIGZyb20gKSB7XHJcbiAgICAgICAgY29uc3QgZGlzdCA9IEdMT0JBTC53b3JsZC5nZXREaXN0YW5jZUJldHdlZW5FbnRpdGllcyggdGhpcywgZnJvbSApO1xyXG5cclxuICAgICAgICBpZiAoIGRpc3QgPT0gMSApIHtcclxuICAgICAgICAgICAgaWYgKCBHTE9CQUwud29ybGQucmFuZG9tKCAxLDIgKSA9PSAxICkge1xyXG4gICAgICAgICAgICAgICAgR0xPQkFMLmludGVyZmFjZS5hZGRMb2coIFwiJXN764qUfSDtkoDsqY0g65uw7Ja0IOyYrOuekOuLpC5cIiwgdGhpcy5nZXROYW1lKCkgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3dhcExvY2F0aW9uKCBmcm9tICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmFkZExvZyggXCIlc3vripR9IOunpOyasCDsoovslYTtlojri6QuXCIsIHRoaXMuZ2V0TmFtZSgpICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmFkZExvZyggXCIlc3vripR9IOyauOydjCDshozrpqzrpbwg64OI64ukLlwiLCB0aGlzLmdldE5hbWUoKSApO1xyXG4gICAgICAgICAgICAvLyDrtojrn6zshJwg64+M7JWE6rCA7JW87ZWoXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFmdGVyRGVhdGgoIGRtZywgYXR0YWNrZXIsIGZyb21YLCBmcm9tWSwgaGl0RHVyLCBzb3VuZCApIHtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5PYmplY3QuYXNzaWduKCBQZXQucHJvcGVydHksIHtcclxuICAgIFtcIuqzoOyWkeydtFwiXToge1xyXG4gICAgICAgIGltYWdlOiAgIFsgMTIsIDNdLCBjb2xvcjogICBDb2xvcnMuWWVsbG93LFxyXG4gICAgICAgIGZhY3Rpb246IFwiUFwiLCBhdHRhY2s6ICBcIjJ+NVwiLCBocDogICAgICAxMywgQUk6ICAgICAgXCJjYXRcIixcclxuICAgIH0sXHJcbn0gKTtcclxuXHJcblBldC5tYXhQZXQgPSA1OyAvLyDtlIzroIjsnbTslrTqsIAg6rCA7KeIIOyImCDsnojripQg7LWc64yAIO2Oq+ydmCDsiJguIOydtCDsiKvsnpDrp4ztgbwg6rOE64uoIOyYhuydhCDruYTsm4zslbztlZzri6QuXHJcblxyXG4iLCJcclxuaW1wb3J0IHsgU291bmQsIFV0aWxzLCBNb3ZpZUNsaXAsIFRleHR1cmUsVGV4dHVyZUJhc2UsU3ByaXRlLCBFdmVudCwgVGltZXIgfSBmcm9tIFwiQGVuZ2luZS9mbGF0ZmFzdFwiO1xyXG5cclxuaW1wb3J0IEVmZmVjdCBmcm9tIFwiLi4vZWZmZWN0XCI7XHJcbmltcG9ydCBJbnZlbnRvcnkgZnJvbSBcIi4uL2ludGVyZmFjZS9pbnZlbnRvcnlcIjtcclxuaW1wb3J0IEVsZW1lbnRhbCBmcm9tIFwiLi4vd29ybGQvZWxlbWVudGFsXCI7XHJcbmltcG9ydCBTa2lsbCBmcm9tIFwiLi9za2lsbFwiO1xyXG5pbXBvcnQgSXRlbSBmcm9tIFwiLi9pdGVtXCI7XHJcbmltcG9ydCBWaXNpYmlsaXR5VGlsZSBmcm9tIFwiQGxpYi92aXNpYmlsaXR5VGlsZVwiO1xyXG5pbXBvcnQgR2FtZU1hcCBmcm9tIFwiLi4vd29ybGQvZ2FtZU1hcFwiO1xyXG5pbXBvcnQgQ3JlYXR1cmUgZnJvbSBcIi4vY3JlYXR1cmVcIjtcclxuaW1wb3J0IE1hYmlNTUwgZnJvbSBcIkBsaWIvbWFiaU1NTFwiO1xyXG5pbXBvcnQgSWNvblBhY2sgZnJvbSBcIkBsaWIvaWNvblBhY2tcIjtcclxuXHJcbmltcG9ydCBHTE9CQUwgZnJvbSBcIi4uL2dsb2JhbFwiO1xyXG5pbXBvcnQgQ09ORklHIGZyb20gXCIuLi9jb25maWdcIjtcclxuaW1wb3J0IFBldCBmcm9tIFwiLi9wZXRcIjtcclxuaW1wb3J0IE1vbnN0ZXIgZnJvbSBcIi4vbW9uc3RlclwiO1xyXG5pbXBvcnQgUHJvcCBmcm9tIFwiLi9wcm9wXCI7XHJcblxyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyBQbGF5ZXLripQgR0xPQkFMLnBsYXllciDquIDroZzrsowg67OA7IiY7JeQIO2VoOuLueuQnOuLpFxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vIOydtOuPmeyymOumrFxyXG4vLyBHTE9CQUwucGxheWVyLmZpbmRQYXRoQW5kTW92ZVRvIOunjCDsi6Dqsr3sk7DrqbQg65Cc64ukXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbmZ1bmN0aW9uIGVuZE1vdmUoIHNlbGYgKSB7XHJcbiAgICBzZWxmLnBhdGggPSBudWxsO1xyXG4gICAgaWYgKCBzZWxmLmludGVyYWN0WCApIHtcclxuICAgICAgICAvLyDsnbTrj5ntm4Qg7J247YSw656Z7IWYXHJcbiAgICAgICAgaWYgKCBHTE9CQUwud29ybGQuZ2V0RGlzdGFuY2UoIHNlbGYudGlsZVgsIHNlbGYudGlsZVksIHNlbGYuaW50ZXJhY3RYLCBzZWxmLmludGVyYWN0WSApID09IDEgKSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW50ZXJhY3QoIHNlbGYuaW50ZXJhY3RYLCBzZWxmLmludGVyYWN0WSApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmludGVyYWN0WCA9IG51bGw7XHJcbiAgICAgICAgc2VsZi5pbnRlcmFjdFkgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgR0xPQkFMLmludGVyZmFjZS5jdXJzb3Iuc25hcFRvUGxheWVyKCk7XHJcbiAgICBHTE9CQUwud29ybGQuc2hvd01hcEluZm8oIHNlbGYudGlsZVgsIHNlbGYudGlsZVkgKTtcclxuICAgIHNlbGYudGFyZ2V0WCA9IG51bGw7XHJcbiAgICBzZWxmLnRhcmdldFkgPSBudWxsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtb3ZlUGF0aFN0ZXAoIHNlbGYgKSB7XHJcbiAgICBpZiAoIHNlbGYucGF0aCAmJiBzZWxmLnBhdGgubGVuZ3RoID4gMCApIHtcclxuICAgICAgICBjb25zdCB7IHg6IG5leHRYLCB5OiBuZXh0WSB9ID0gc2VsZi5wYXRoWzBdO1xyXG5cclxuICAgICAgICBzZWxmLnBhdGguc2hpZnQoKTtcclxuICAgICAgICBjb25zdCBjID0gR0xPQkFMLndvcmxkLmVudGl0eU1hbmFnZXIuZ2V0RW50aXR5KCBuZXh0WCwgbmV4dFkgKTtcclxuXHJcbiAgICAgICAgaWYgKCBjICkge1xyXG4gICAgICAgICAgICAvLyDtgazrpqzss5Dsl5Ag7J2Y7ZW07IScIOuPhOykkeyXkCDquLjsnbQg66eJ7ZiU64ukXHJcbiAgICAgICAgICAgIC8vIOuqqeyggeyngOulvCDri6Tsi5wg7LC+64qU64ukLlxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyggXCLtlZzrsojrjZQg7LC+6riwXCIgKTtcclxuICAgICAgICAgICAgc2VsZi5zdG9wKCk7XHJcbiAgICAgICAgICAgIHNlbGYuZmluZFBhdGhBbmRNb3ZlVG8oIHNlbGYudGFyZ2V0WCwgc2VsZi50YXJnZXRZLCBzZWxmLmludGVyYWN0WCwgc2VsZi5pbnRlcmFjdFkgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLmRvVHVybiggKCk9PntcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCBg7J2064+ZICR7R0xPQkFMLndvcmxkLnR1cm59LCAke25leHRYfSwgJHtuZXh0WX0sICR7c2VsZi50YXJnZXRYfSwgJHtzZWxmLnRhcmdldFl9YCApO1xyXG4gICAgICAgICAgICAgICAgLy8g7KCB7YS07J2EIOyymOumrO2VtOyEnCDsnbTrj5nsnbQg66eJ7Z6QIOqwgOuKpeyEseydtCDsnojri6RcclxuICAgICAgICAgICAgICAgIGlmICggR0xPQkFMLndvcmxkLmVudGl0eU1hbmFnZXIuZ2V0RW50aXR5KCBuZXh0WCwgbmV4dFkgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHNlbGYudGFyZ2V0WCAhPSBudWxsICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZpbmRQYXRoQW5kTW92ZVRvKCBzZWxmLnRhcmdldFgsIHNlbGYudGFyZ2V0WSwgc2VsZi5pbnRlcmFjdFgsIHNlbGYuaW50ZXJhY3RZICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLm1vdmVUbyggbmV4dFgsIG5leHRZIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHgsIHkgfSA9IHNlbGYuZ2V0UG9zaXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBHTE9CQUwud29ybGQuc2lnaHRNYW5hZ2VyLm1vdmVFeWVUbyggeCx5ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnBpY2tVcEdvbGQoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwciA9IEdMT0JBTC53b3JsZC5tYXAuZ2V0UHJvcGVydHkoIG5leHRYLCBuZXh0WSApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvb3RzdGVwID0gcHIuc291bmQgfHwgMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgU291bmQucGxheVNvdW5kKCBcInNvdW5kL2Zvb3RzdGVwX1wiICsgZm9vdHN0ZXAgKyBcIi53YXZcIiApO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucGxheVBvc2l0aW9uU291bmQoIG5leHRYLCBuZXh0WSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBbQ3JlYXR1cmUud2Fsa1NwZWVkLCAxXTtcclxuICAgICAgICAgICAgfSApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc3RhcnRNb3ZlKCBzZWxmICkge1xyXG4gICAgbW92ZVBhdGhTdGVwKCBzZWxmICk7XHJcbn1cclxuXHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vIOqzteqyqTogaW50ZXJhY3Tsl5DshJwg7Zi47Lac7ZW07KO86riwIOuVjOusuOyXkCDsnbTqsbgg7KeB7KCRIOu2gOultOuptCDslYjrkJzri6QuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBAdGhpcyBQbGF5ZXJcclxuICogXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB4XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB5XHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNSYW5nZWRcclxuICogQHBhcmFtIHtudW1iZXJ9IHB4XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBweVxyXG4gKi9cclxuZnVuY3Rpb24gYXR0YWNrKCB4LCB5LCBpc1JhbmdlZCwgcHgsIHB5ICkge1xyXG4gICAgbGV0IGNyO1xyXG5cclxuICAgIGlmICggaXNSYW5nZWQgKSB7XHJcbiAgICAgICAgY29uc3QgeyB4OiB4MSwgeTogeTEgfSA9IEdMT0JBTC53b3JsZC50aWxlQ2VudGVyVG9Xb3JsZCggdGhpcy50aWxlWCwgdGhpcy50aWxlWSApO1xyXG4gICAgICAgIGNvbnN0IFt4MiwgeTJdID0gW3B4LCBweV07XHJcbiAgICAgICAgY29uc3QgW3IsIHR4LCB0eSwgY3gsIGN5XSA9IEdMT0JBTC53b3JsZC5tYXAudmlzaWJpbGl0eVRpbGVDaGVja2VyLnRyYWNlUmF5KCB4MSwgeTEsIHgyLCB5MixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENPTkZJRy5Xb3JsZC50aWxlV2lkdGgsIENPTkZJRy5Xb3JsZC50aWxlSGVpZ2h0LCBHYW1lTWFwLkJMT0NLX1ZJU0lPTiB8IEdhbWVNYXAuQkxPQ0tfQVJST1csICggeCwgeSApID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gR0xPQkFMLndvcmxkLmVudGl0eU1hbmFnZXIuZ2V0RW50aXR5KCB4LCB5ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCB4MiwgeTIsIHIsIHR4LCB0eSwgY3gsIGN5LCBHTE9CQUwud29ybGQuc3RhZ2VUb1dvcmxkKCAuLi50aGlzLmdldFBvc2l0aW9uKCkueHkgKSApO1xyXG4gICAgICAgIGlmICggciA9PSBWaXNpYmlsaXR5VGlsZS5FTVBUWSB8fCByID09IFZpc2liaWxpdHlUaWxlLkNSRUFUVVJFICkge1xyXG4gICAgICAgICAgICBjciA9IEdMT0JBTC53b3JsZC5lbnRpdHlNYW5hZ2VyLmdldEVudGl0eSggdHgsIHR5ICk7XHJcbiAgICAgICAgICAgIFtweCwgcHldID0gW2N4LCBjeV07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY3IgPSBudWxsO1xyXG4gICAgICAgICAgICBbcHgsIHB5XSA9IFtjeCwgY3ldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vR0xPQkFMLmludGVyZmFjZS5oaWRlSW5mbygpO1xyXG4gICAgY29uc29sZS5sb2coIFwiIO2UjOugiOydtOyWtCDqs7XqsqlcIiApO1xyXG4gICAgLy/rp7XqsoDthqDqsIAg7Jes6riw7JeQIOuTpOyWtOqwgOyVvO2VnOuLpFxyXG4gICAgY29uc3QgYW5nbGUgPSAoIE1hdGguYXRhbjIoIHkgLSB0aGlzLnRpbGVZLCB4IC0gdGhpcy50aWxlWCApICkgLyBNYXRoLlBJICogMTgwO1xyXG4gICAgY29uc3QgZGlyID0gVXRpbHMuYW5nbGVUb0RpciggYW5nbGUgKTtcclxuICAgIGxldCBheCwgYXk7XHJcbiAgICBsZXQgZHVyLCBoaXREdXI7XHJcbiAgICBsZXQgd2VhcG9uID0gdGhpcy5nZXRTZWxlY3RlZFdlYXBvbigpWzBdO1xyXG4gICAgbGV0IGRhbWFnZSA9IHdlYXBvbi5jYWxjdWxhdGVEYW1hZ2UoKTtcclxuXHJcbiAgICBpZiAoIGlzUmFuZ2VkICkge1xyXG4gICAgICAgIGlmICggY3IgKSB7XHJcbiAgICAgICAgICAgIFtkdXIsIGhpdER1cl0gPSBuZXcgRWZmZWN0KCBcImFycm93XCIsIHRoaXMuZ2V0WCgpLCB0aGlzLmdldFkoKSwgcHgsIHB5LCB0cnVlICkuZ2V0RHVyYXRpb24oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBbZHVyLCBoaXREdXJdID0gbmV3IEVmZmVjdCggXCJhcnJvd1wiLCB0aGlzLmdldFgoKSwgdGhpcy5nZXRZKCksIHB4LCBweSwgZmFsc2UgKS5nZXREdXJhdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZyggXCLtmZTsgrTrsJzsgqxcIiwgcHgsIHB5ICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIFtheCwgYXldID0gVXRpbHMuZGlyVG9PZmZzZXQoIGRpciApO1xyXG4gICAgICAgIGNyID0gdGhpcy5nZXRFbnRpdHlSZWwoIGF4LCBheSApO1xyXG4gICAgICAgIGxldCB3ZWFwb25BbmltYXRpb247XHJcblxyXG4gICAgICAgIGlmICggY3IgJiYgY3IuaXNQcm9wICYmIGNyLnByb3BlcnR5Lm5lZWRQaWNrQXhlICkge1xyXG4gICAgICAgICAgICBjb25zdCBwaWNrYXhlID0gdGhpcy5nZXRFcXVpcHBlZEl0ZW0oIFwicGlja2F4ZVwiICk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIHBpY2theGUgKSB7XHJcbiAgICAgICAgICAgICAgICB3ZWFwb24gPSBwaWNrYXhlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdlYXBvbkFuaW1hdGlvbiA9IHdlYXBvbi5wcm9wZXJ0eS5hbmltIHx8IFwic3dpbmdcIjtcclxuICAgICAgICBjb25zdCB7IHg6IHgxLCB5OiB5MSB9ID0gR0xPQkFMLndvcmxkLnRpbGVDZW50ZXJUb1dvcmxkKCB0aGlzLnRpbGVYLCB0aGlzLnRpbGVZICk7XHJcblxyXG4gICAgICAgIGlmICggY3IgKSB7XHJcbiAgICAgICAgICAgIFtkdXIsIGhpdER1cl0gPSBuZXcgRWZmZWN0KFxyXG4gICAgICAgICAgICAgICAgd2VhcG9uQW5pbWF0aW9uLFxyXG4gICAgICAgICAgICAgICAgeDEsIHkxLCB4MSArIGF4ICogQ09ORklHLldvcmxkLnRpbGVXaWR0aCwgeTEgKyBheSAqIENPTkZJRy5Xb3JsZC50aWxlSGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHdlYXBvbi5nZXRJY29uKCB0cnVlLCB0cnVlICksXHJcbiAgICAgICAgICAgICAgICB0aGlzICkuZ2V0RHVyYXRpb24oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBbZHVyLCBoaXREdXJdID0gbmV3IEVmZmVjdChcclxuICAgICAgICAgICAgICAgIHdlYXBvbkFuaW1hdGlvbixcclxuICAgICAgICAgICAgICAgIHgxLCB5MSwgeDEgKyBheCAqIENPTkZJRy5Xb3JsZC50aWxlV2lkdGgsIHkxICsgYXkgKiBDT05GSUcuV29ybGQudGlsZUhlaWdodCxcclxuICAgICAgICAgICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgd2VhcG9uLmdldEljb24oIHRydWUsIHRydWUgKSxcclxuICAgICAgICAgICAgICAgIHRoaXMgKS5nZXREdXJhdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vbG9nKFwiYW5nbGVcIixhbmdsZSxkaXIsYXgsYXkpO1xyXG4gICAgLy9sb2coXCJ0YXJnZXRcIixjKTtcclxuICAgIGhpdER1ciA9IGhpdER1ciB8fCBkdXI7XHJcbiAgICBpZiAoIGNyICkge1xyXG4gICAgICAgIGlmICggY3IuaXNQcm9wICkge1xyXG4gICAgICAgICAgICBpZiAoIHdlYXBvbi5wcm9wZXJ0eS50eXBlID09IFwicGlja2F4ZVwiICkge1xyXG4gICAgICAgICAgICAgICAgZGFtYWdlID0gNTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRhbWFnZSA9IDE7IC8vIO2UhOuejSDrlYzrprQg65WM64qUIOustOyhsOqxtCAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEdMT0JBTC5pbnRlcmZhY2UuY3Vyc29yLmxvY2soIGhpdER1ciB8fCBkdXIgKTtcclxuICAgICAgICBjb25zdCB7IHg6IHgxLCB5OiB5MSB9ID0gR0xPQkFMLndvcmxkLnRpbGVDZW50ZXJUb1dvcmxkKCB0aGlzLnRpbGVYLCB0aGlzLnRpbGVZICk7XHJcbiAgICAgICAgY29uc3QgeyB4OiB4MiwgeTogeTIgfSA9IEdMT0JBTC53b3JsZC50aWxlQ2VudGVyVG9Xb3JsZCggY3IudGlsZVgsIGNyLnRpbGVZICk7XHJcblxyXG4gICAgICAgIGlmICggY3IgaW5zdGFuY2VvZiBNb25zdGVyIHx8IGNyIGluc3RhbmNlb2YgUHJvcCApIHtcclxuICAgICAgICAgICAgY3IuZGFtYWdlKCBkYW1hZ2UsIHRoaXMsIHgxLCB5MSwgaGl0RHVyICk7XHJcbiAgICAgICAgICAgIFRpbWVyLmRlbGF5ZWRDYWxsKCBNYXRoLm1heCggMCwgaGl0RHVyIC0gNTAgKSwgKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyDqs7XqsqntlaAg65WMIOuCmOuKlCDrrLTquLAg7IaM66asXHJcbiAgICAgICAgICAgICAgICBTb3VuZC5wbGF5U291bmQoIFwic291bmQvXCIgKyAoIHdlYXBvbi5wcm9wZXJ0eS5oaXRTb3VuZCB8fCBcImRhbWFnZV8wLndhdlwiICkgKTtcclxuICAgICAgICAgICAgfSApO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgR0xPQkFMLmludGVyZmFjZS5jdXJzb3IubG9jayggMTAwICk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vIO2Oq+u2gOultOq4sFxyXG4vLyDqsbDrpqzqsIAg66mA66m0IOu2gOuluOuLpFxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4vKipcclxuICogQHRoaXMgUGxheWVyXHJcbiAqXHJcbiAqIEBwYXJhbSB7UGV0fSB0YXJnZXRcclxuICogQHBhcmFtIHtudW1iZXJ9IGRpc3RcclxuICovXHJcbmZ1bmN0aW9uIGNhbGxQZXQoIHRhcmdldCwgZGlzdCApIHtcclxuICAgIGlmICggZGlzdCA9PSAxICkge1xyXG4gICAgICAgIEdMT0JBTC5pbnRlcmZhY2UuYWRkTG9nKCBcIiVze+uKlH0gJXN766W8fSDsk7Dri6Trk6zsl4jri6QuXCIsdGhpcy5nZXROYW1lKCksdGFyZ2V0LmdldE5hbWUoKSApO1xyXG4gICAgICAgIHRhcmdldC5jYWxsZWQoIHRoaXMgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgR0xPQkFMLmludGVyZmFjZS5hZGRMb2coIFwiJXN764qUfSAlc3vrpbx9IOu2iOuggOuLpC5cIiwgdGhpcy5nZXROYW1lKCksdGFyZ2V0LmdldE5hbWUoKSApO1xyXG4gICAgICAgIHRhcmdldC5jYWxsZWQoIHRoaXMgKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG4vKipcclxuICpcclxuICpcclxuICogQGNsYXNzIFBsYXllclxyXG4gKiBAZXh0ZW5kcyB7Q3JlYXR1cmV9XHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5ZXIgZXh0ZW5kcyBDcmVhdHVyZSB7XHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8g7ZSM66CI7J207Ja0IOy0iOq4sO2ZlFxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBjb25zdHJ1Y3RvciggbmFtZSwgdGlsZVgsIHRpbGVZLCBvcHRpb25zICkge1xyXG4gICAgICAgIHN1cGVyKCBuYW1lLCB0aWxlWCwgdGlsZVksIG9wdGlvbnMgKTtcclxuICAgICAgICB0aGlzLmlzUGxheWVyID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmZhY3Rpb24gPSBcInBsYXllclwiO1xyXG5cclxuICAgICAgICB0aGlzLnRleHR1cmUgPSBQbGF5ZXIudGV4dHVyZTtcclxuICAgICAgICB0aGlzLnRpbGVXaWR0aCA9IFBsYXllci50aWxlV2lkdGg7XHJcbiAgICAgICAgdGhpcy50aWxlSGVpZ2h0ID0gUGxheWVyLnRpbGVIZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5wcm9wZXJ0eSA9IHsgaW1hZ2U6IFsgMSwgMV0sIGZhY3Rpb246IFwiT1wiIH07XHJcbiAgICAgICAgdGhpcy5uYW1lID0gXCLrgpjtgaxcIjtcclxuICAgICAgICB0aGlzLmhwID0gMzA7XHJcbiAgICAgICAgdGhpcy5ocE1heCA9IDMwO1xyXG4gICAgICAgIHRoaXMubXAgPSAyMDtcclxuICAgICAgICB0aGlzLm1wTWF4ID0gMjA7XHJcbiAgICAgICAgdGhpcy5sZXZlbCA9IDE7XHJcbiAgICAgICAgdGhpcy5leHAgPSAwO1xyXG4gICAgICAgIHRoaXMuZXhwTWF4ID0gMzA7XHJcbiAgICAgICAgdGhpcy5nb2xkID0gMDtcclxuICAgICAgICB0aGlzLmludmVudG9yeSA9IG5ldyBJbnZlbnRvcnkoIDIwICk7XHJcbiAgICAgICAgdGhpcy5zdHIgPSAwO1x0Ly8g7Z6YXHJcbiAgICAgICAgdGhpcy5kZXggPSAwO1x0Ly8g7Iac7JSoXHJcbiAgICAgICAgdGhpcy5pbnQgPSAwO1x0Ly8g7KeA64qlXHJcbiAgICAgICAgdGhpcy5sdWNrID0gMDtcdC8vIO2WieyatFxyXG4gICAgICAgIC8vIGhwID0g66CI67KoIHN0cjtcclxuICAgICAgICAvLyBtcCA9IOugiOuyqCBpbnQ7XHJcbiAgICAgICAgLy8gbWF0ayA9IGludDtcclxuICAgICAgICAvLyBub3JtYWwgPSBzdHIgKyBkZXg7XHJcbiAgICAgICAgLy8gaGVhdnkgd2VhcG9uID0gc3RyO1xyXG4gICAgICAgIC8vIHRlY2huaWNhbCB3ZWFwb24gPSBkZXg7XHJcbiAgICAgICAgLy8gc2hpZWxkID0gc3RyICsgZGV4O1xyXG4gICAgICAgIC8vIGRvZGdlID0gZGV4O1xyXG4gICAgICAgIC8vIGNyaXRpY2FsID0gaW50K2xjaztcclxuICAgICAgICAvLyB0cmFwIGRvZGdlID0gbGNrO1xyXG4gICAgICAgIC8vIHVudHJhcCA9IGRleCtsY2s7XHJcbiAgICAgICAgdGhpcy5za2lsbHMgPSBbXHJcbiAgICAgICAgICAgIG5ldyBTa2lsbCggXCLqt7zsoJHrrLTquLBcIiApLFxyXG4gICAgICAgICAgICBuZXcgU2tpbGwoIFwi7JuQ6rGw66as66y06riwXCIgKSxcclxuICAgICAgICBdO1xyXG4gICAgICAgIHRoaXMuYmFzZVdlYXBvbiA9IG5ldyBJdGVtKCBJdGVtLmJhcmVIYW5kICk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZEFjdGlvbiA9IHRoaXMuYmFzZVdlYXBvbjtcclxuXHJcbiAgICAgICAgdGhpcy5zdGFydFggPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5zdGFydFkgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5wb3N0SW5pdCggUGxheWVyICk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHNlbGVjdEFjdGlvbiggc2tpbGwgKSB7XHJcbiAgICAgICAgR0xPQkFMLmludGVyZmFjZS5hY3Rpb25TZWxlY3Rvci5zZWxlY3QoIHNraWxsICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U2VsZWN0ZWRXZWFwb24oKSB7XHJcbiAgICAgICAgY29uc3Qgc2EgPSB0aGlzLnNlbGVjdGVkQWN0aW9uO1xyXG4gICAgICAgIGxldCBpdGVtO1xyXG5cclxuICAgICAgICBpZiAoIHNhLnByb3BlcnR5LnR5cGUgPT0gXCJtZWxlZVwiICkge1xyXG4gICAgICAgICAgICBpdGVtID0gdGhpcy5pbnZlbnRvcnkuZmluZEVxdWlwcGVkSXRlbUJ5VHlwZSggXCJtZWxlZVwiICk7XHJcbiAgICAgICAgfSBlbHNlIGlmICggc2EucHJvcGVydHkudHlwZSA9PSBcInJhbmdlZFwiICkge1xyXG4gICAgICAgICAgICBpdGVtID0gdGhpcy5pbnZlbnRvcnkuZmluZEVxdWlwcGVkSXRlbUJ5VHlwZSggXCJyYW5nZWRcIiApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGl0ZW0gfHwgdGhpcy5iYXNlV2VhcG9uO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgc2VsZWN0U2tpbGxCeVR5cGUoIHR5cGUgKSB7XHJcbiAgICAgICAgbGV0IHNraWxsO1xyXG5cdFx0XHJcbiAgICAgICAgZm9yICggY29uc3QgaSBpbiB0aGlzLnNraWxscyApIHtcclxuICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMuc2tpbGxzW2ldO1xyXG5cclxuICAgICAgICAgICAgaWYgKCB2LnByb3BlcnR5LnR5cGUgPT0gdHlwZSApIHtcclxuICAgICAgICAgICAgICAgIHNraWxsID0gdjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggR0xPQkFMLmludGVyZmFjZSApIHtcclxuICAgICAgICAgICAgR0xPQkFMLmludGVyZmFjZS5hY3Rpb25TZWxlY3Rvci5zZWxlY3QoIHNraWxsICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNlbGVjdFNraWxsKCBuYW1lICkge1xyXG4gICAgICAgIGxldCBza2lsbDtcclxuXHJcbiAgICAgICAgZm9yICggY29uc3QgaSBpbiB0aGlzLnNraWxscyApIHtcclxuICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMuc2tpbGxzW2ldO1xyXG5cclxuICAgICAgICAgICAgaWYgKCB2Lm5hbWUgPT0gbmFtZSApIHtcclxuICAgICAgICAgICAgICAgIHNraWxsID0gdjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggR0xPQkFMLmludGVyZmFjZSApIHtcclxuICAgICAgICAgICAgR0xPQkFMLmludGVyZmFjZS5hY3Rpb25TZWxlY3Rvci5zZWxlY3QoIHNraWxsICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFNlbGVjdGVkQWN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkQWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFdlYXBvbkltYWdlKCBmaWx0ZXJpbmcsZmxpcCApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZEFjdGlvbi5nZXRJY29uKCBmaWx0ZXJpbmcsZmxpcCApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEVxdWlwcGVkSXRlbSggdHlwZSApIHtcclxuICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5pbnZlbnRvcnkuZmluZEVxdWlwcGVkSXRlbUJ5VHlwZSggdHlwZSApO1xyXG5cclxuICAgICAgICByZXR1cm4gaXRlbVswXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRFcXVpcHBlZEl0ZW1JbWFnZSggdHlwZSApIHtcclxuICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5nZXRFcXVpcHBlZEl0ZW0oIHR5cGUgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGl0ZW0gIT0gbnVsbCA/IGl0ZW0uZ2V0SWNvbigpIDogbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwcm9jZXNzQXV0b01vdmUoKSB7XHJcbiAgICAgICAgaWYgKCB0aGlzLnBhdGggJiYgdGhpcy5wYXRoLmxlbmd0aCA+IDAgKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCBcIuyekOuPmeydtOuPmSDrgqjsnYAg7Iir7J6QXCIsIHRoaXMucGF0aC5sZW5ndGggKTtcclxuICAgICAgICAgICAgbW92ZVBhdGhTdGVwKCB0aGlzICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLnRhcmdldFggIT0gbnVsbCAmJiAoIHRoaXMudGFyZ2V0WCAhPSB0aGlzLnRpbGVYIHx8IHRoaXMudGFyZ2V0WSAhPSB0aGlzLnRpbGVZICkgKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDqt7gg7IKs7J207JeQIOq4uOydtCDrgqzsnYQg7IiY64+EIOyeiOycvOuLiOq5jCDri6Tsi5wg7J2064+Z7ZWc64ukXHJcbiAgICAgICAgICAgICAgICAvL2xvZyhcIu2VnOuyiOuNlCDssL7quLBcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRQYXRoQW5kTW92ZVRvKCB0aGlzLnRhcmdldFgsdGhpcy50YXJnZXRZLHRoaXMuaW50ZXJhY3RYLHRoaXMuaW50ZXJhY3RZICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCAhKCB0aGlzLnBhdGggJiYgdGhpcy5wYXRoLmxlbmd0aCA+IDAgKSApIHtcclxuICAgICAgICAgICAgICAgIGVuZE1vdmUoIHRoaXMgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gR0xPQkFMLnBsYXllci5maW5kUGF0aEFuZE1vdmVUbztcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmaW5kUGF0aEFuZE1vdmVUbyggeCx5LGludGVyYWN0WCxpbnRlcmFjdFkgKSB7XHJcbiAgICAgICAgR0xPQkFMLmludGVyZmFjZS5oaWRlSW5mbygpO1xyXG4gICAgICAgIGxldCBtb3Zpbmc7XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5wYXRoICYmIHRoaXMucGF0aC5sZW5ndGggPiAwICkge1xyXG4gICAgICAgICAgICBtb3ZpbmcgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIHRoaXMudGlsZVggPT0geCAmJiB0aGlzLnRpbGVZID09IHkgKSB7XHJcbiAgICAgICAgICAgIC8vIOydtOuPme2VoCDtlYTsmpTqsIAg7JeG7J2MXHJcbiAgICAgICAgICAgIGVuZE1vdmUoIHRoaXMgKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g7J2064+ZIOykkeyduCDqsr3smrAg66mI7LakXHJcbiAgICAgICAgdGhpcy5zdG9wKCk7XHJcbiAgICAgICAgW3RoaXMuc3RhcnRYLCB0aGlzLnN0YXJ0WV0gPSBbdGhpcy50aWxlWCwgdGhpcy50aWxlWV07XHJcbiAgICAgICAgW3RoaXMudGFyZ2V0WCwgdGhpcy50YXJnZXRZXSA9IFt4LHldO1xyXG4gICAgICAgIHRoaXMuaW50ZXJhY3RYID0gaW50ZXJhY3RYO1xyXG4gICAgICAgIHRoaXMuaW50ZXJhY3RZID0gaW50ZXJhY3RZO1xyXG4gICAgICAgIGNvbnN0IHBhdGggPSBHTE9CQUwud29ybGQucGF0aE1hbmFnZXIuZmluZFBhdGgoIHRoaXMudGlsZVgsdGhpcy50aWxlWSx4LHkgKTtcclxuXHJcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcclxuICAgICAgICAvL2xvZyhcIuywvuq4sCDqsrDqs7xcIixwYXRoLHBhdGggYW5kIHBhdGgubGVuZ3RoKTtcclxuICAgICAgICBpZiAoIG1vdmluZyApIHtcclxuICAgICAgICAgICAgLy9cclxuICAgICAgICB9IGVsc2UgaWYgKCBwYXRoICYmIHBhdGgubGVuZ3RoID4gMCApIHtcclxuICAgICAgICAgICAgc3RhcnRNb3ZlKCB0aGlzICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZW5kTW92ZSggdGhpcyApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdG9wKCkge1xyXG4gICAgICAgIHRoaXMucGF0aCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy50YXJnZXRYID0gdGhpcy50aWxlWDtcclxuICAgICAgICB0aGlzLnRhcmdldFkgPSB0aGlzLnRpbGVZO1xyXG4gICAgfVxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIO2EtOydhCDslYjrqLnripQg7ZaJ64+ZXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgcGlja1VwR29sZCgpIHtcclxuICAgICAgICAvLyDqs6jrk5wg7KSN6riw64qUIO2EtOydhCDslYjrqLnsnYxcclxuICAgICAgICBjb25zdCBpdGVtcyA9IEdMT0JBTC53b3JsZC5lbnRpdHlNYW5hZ2VyLmdldEl0ZW1zKCB0aGlzLnRpbGVYLHRoaXMudGlsZVkgKTtcclxuXHJcbiAgICAgICAgaWYgKCBpdGVtcyAhPSBudWxsICkge1xyXG4gICAgICAgICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKyApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBpdGVtc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIGl0ZW0ucHJvcGVydHkuYnVuZGxlID09IFwiZ29sZFwiICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGlja1VwSXRlbSggaXRlbSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyDthLTsnYQg66i564qUIO2WieuPmVxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIGRvVHVybuycvOuhnCDqsJDsi7jshJwg7LKY66as7ZWY66m0IO2EtOydtCDrkJzri6RcclxuXHJcbiAgICBkb1R1cm4oIGZ1bmMsZGF0YSApIHtcclxuICAgICAgICBsZXQgW2RlbGF5LHR1cm5dID0gWzAsIDFdO1xyXG5cclxuICAgICAgICBHTE9CQUwud29ybGQuZW50aXR5TWFuYWdlci5kb0RlbGF5ZWRFbmVteVR1cm5JZkV4aXN0KCAoKSA9PiB7XHJcbiAgICAgICAgICAgIEdMT0JBTC53b3JsZC5lbnRpdHlNYW5hZ2VyLmNsZWFyTW9uc3Rlck1vb2QoKTtcclxuICAgICAgICAgICAgaWYgKCBmdW5jICkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coIGDilrbtlIzroIjsnbTslrTthLQgJHtHTE9CQUwud29ybGQudHVybn1gICk7XHJcbiAgICAgICAgICAgICAgICBbZGVsYXksIHR1cm5dID0gZnVuYyggZGF0YSApO1xyXG4gICAgICAgICAgICAgICAgLy8g7ZSM66CI7J207Ja07J2YIO2WieuPmeydmCBkZWxheS4g6re466as6rOgIOyggeydgCDrqocg7YS0IO2WieuPmeydhCDtlZjqsowg65CY64qU6rCAXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggYOKWtu2UjOugiOydtOyWtO2EtCjslYTrrLQg6rKD64+EIOyViO2VqCkgJHtHTE9CQUwud29ybGQudHVybn1gICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgdHVybjsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQnVmZigpO1xyXG4gICAgICAgICAgICAgICAgR0xPQkFMLndvcmxkLnR1cm4gPSBHTE9CQUwud29ybGQudHVybiArIDE7XHJcbiAgICAgICAgICAgICAgICBHTE9CQUwud29ybGQuZW50aXR5TWFuYWdlci5kb0VuZW15VHVybiggZGVsYXkgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcGlja1VwSXRlbSggaXRlbSApIHtcclxuICAgICAgICBpZiAoIGl0ZW0ucHJvcGVydHkuYnVuZGxlID09IFwiZ29sZFwiICkge1xyXG4gICAgICAgICAgICBHTE9CQUwud29ybGQuZW50aXR5TWFuYWdlci5yZW1vdmVFbnRpdHkoIGl0ZW0gKTtcclxuICAgICAgICAgICAgdGhpcy5nb2xkID0gdGhpcy5nb2xkICsgaXRlbS5hbW91bnQ7XHJcbiAgICAgICAgICAgIEdMT0JBTC53b3JsZC5hZGRMb2coIFwiPHllbGxvdz4lZCDqs6jrk5w8L3llbGxvdz7rpbwg7KO87Jug64ukLlwiLCBpdGVtLmFtb3VudCApO1xyXG4gICAgICAgICAgICBTb3VuZC5wbGF5U291bmQoIFwic291bmQvXCIgKyBpdGVtLnByb3BlcnR5LmdldFNvdW5kICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLmludmVudG9yeS5pc0Z1bGwoKSApIHtcclxuICAgICAgICAgICAgICAgIEdMT0JBTC53b3JsZC5lbnRpdHlNYW5hZ2VyLnJlbW92ZUVudGl0eSggaXRlbSApO1xyXG4gICAgICAgICAgICAgICAgR0xPQkFMLndvcmxkLmFkZExvZyggXCLshozsp4DtkojsnbQg6rCA65Od7LCo7IScICVze+ulvH0g7KO87J2EIOyImCDsl4bsl4jri6QuXCIsIGl0ZW0ubmFtZSApO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5kcm9wKCBpdGVtLnRpbGVYLCBpdGVtLnRpbGVZICk7XHJcbiAgICAgICAgICAgICAgICBHTE9CQUwud29ybGQuc2hvd01hcEluZm8oIHRoaXMudGlsZVgsIHRoaXMudGlsZVkgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZG9UdXJuKCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgR0xPQkFMLndvcmxkLmVudGl0eU1hbmFnZXIucmVtb3ZlRW50aXR5KCBpdGVtICk7XHJcbiAgICAgICAgICAgICAgICAgICAgR0xPQkFMLndvcmxkLmFkZExvZyggXCIlc3vrpbx9IOyjvOyboOuLpC5cIiwgaXRlbS5uYW1lICk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZlbnRvcnkuYWRkSXRlbSggaXRlbSApO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggaXRlbS5wcm9wZXJ0eS5nZXRTb3VuZCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU291bmQucGxheVNvdW5kKCBcInNvdW5kL1wiICsgaXRlbS5wcm9wZXJ0eS5nZXRTb3VuZCApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNvdW5kLnBsYXlTb3VuZCggXCJzb3VuZC9nZXRfZGVmYXVsdC53YXZcIiApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFswLCAxXTtcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvcGVuRG9vciggeCx5ICkge1xyXG4gICAgICAgIHRoaXMuZG9UdXJuKCAoKSA9PiB7XHJcbiAgICAgICAgICAgIEdMT0JBTC53b3JsZC5vcGVuRG9vciggeCwgeSApO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFszMDAsIDFdO1xyXG4gICAgICAgIH0gKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZG9Ob3RoaW5nKCB0ZXh0ICkge1xyXG4gICAgICAgIGlmICggdGV4dCApIHtcclxuICAgICAgICAgICAgR0xPQkFMLmludGVyZmFjZS5hZGRMb2coIHRleHQgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kb1R1cm4oKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8g7IOB7Zi47J6R7JqpXHJcbiAgICAvLyDtlbTri7kg7JyE7LmY7JeQIOuMgO2VtCDslYzrp57ripQg7IOB7Zi47J6R7Jqp7J2EIO2VnOuLpC5cclxuICAgIC8vIOychOy5mOyXkCDsl6zrn6wg7IOB7Zi47J6R7Jqp7J20IOqwgOuKpe2VnCDqsr3smrDripQg7JeG7J2MXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5cclxuICAgIGludGVyYWN0KCB0eCx0eSxpc1JhbmdlZCxweCxweSApIHtcclxuICAgICAgICB0aGlzLmRvVHVybiggKCkgPT4ge1xyXG4gICAgICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmhpZGVJbmZvKCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCBcIuyduO2EsOuemeyFmFwiLCBHTE9CQUwud29ybGQudHVybiApO1xyXG4gICAgICAgICAgICAvL+unteqygO2GoOqwgCDsl6zquLDsl5Ag65Ok7Ja06rCA7JW87ZWc64ukXHJcbiAgICAgICAgICAgIHRoaXMuc3RvcCgpO1xyXG4gICAgICAgICAgICBjb25zdCBjciA9IEdMT0JBTC53b3JsZC5lbnRpdHlNYW5hZ2VyLmdldEVudGl0eSggdHgsIHR5ICk7XHJcbiAgICAgICAgICAgIGNvbnN0IHByID0gR0xPQkFMLndvcmxkLmdldFByb3BlcnR5KCB0eCwgdHkgKTtcclxuICAgICAgICAgICAgY29uc3QgZGlzdCA9IEdMT0JBTC53b3JsZC5nZXREaXN0YW5jZSggdHgsIHR5LCB0aGlzLnRpbGVYLCB0aGlzLnRpbGVZICk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIGRpc3QgPT0gMSAmJiBwci5jaGFyID09IFwiRVwiICkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coIFwi66y47Je06riwIOyLnOuPhFwiICk7XHJcbiAgICAgICAgICAgICAgICBHTE9CQUwud29ybGQub3BlbkRvb3IoIHR4LCB0eSApO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCBjciAmJiBjci5pc1BldCAmJiBjci5mb2xsb3cgPT0gdGhpcyApIHtcclxuICAgICAgICAgICAgICAgIGNhbGxQZXQuY2FsbCggdGhpcywgY3IsIGRpc3QgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGF0dGFjay5jYWxsKCB0aGlzLCB0eCwgdHksIGlzUmFuZ2VkLCBweCwgcHkgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFszMDAsIDFdO1xyXG4gICAgICAgIH0gKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIOuMgOuvuOyngOulvCDsnoXripQg7Jew7LacXHJcbiAgICAvLyDsi6TsoJzroZwgaHDrj4Qg7Jes6riw7IScIOyhsOyeke2VnOuLpFxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGRhbWFnZSggZG1nLGF0dGFja2VyLGZyb21YLGZyb21ZLGhpdER1cixzb3VuZCApIHtcclxuICAgICAgICBoaXREdXIgPSBoaXREdXIgfHwgMDtcclxuICAgICAgICBUaW1lci5kZWxheWVkQ2FsbCggaGl0RHVyLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIEdMT0JBTC5pbnRlcmZhY2UuYWRkTG9nKCBcIiVz66Gc67aA7YSwIDx5ZWxsb3c+JWQ8L3llbGxvdz4g64yA66+47KeA66W8IOuwm+yVmOuLpCFcIiwgYXR0YWNrZXIuZ2V0TmFtZSgpLCBkbWcgKTtcclxuICAgICAgICAgICAgaWYgKCBzb3VuZCApIHtcclxuICAgICAgICAgICAgICAgIFNvdW5kLnBsYXlTb3VuZCggXCJzb3VuZC9cIiArIHNvdW5kICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggXCLsgqzsmrTrk5wg7KeA7KCVIOyViOuQqFwiICk7XHJcbiAgICAgICAgICAgICAgICBTb3VuZC5wbGF5U291bmQoIHNvdW5kIHx8IFwic291bmQvZGFtYWdlXzAud2F2XCIgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gKTtcclxuICAgICAgICB0aGlzLmhwID0gdGhpcy5ocCAtIGRtZztcclxuICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmN1cnNvci5zbmFwVG9QbGF5ZXIoKTtcclxuICAgICAgICBuZXcgRWZmZWN0KCBcImRhbWFnZVwiLGZyb21YLGZyb21ZLHRoaXMuZ2V0WCgpLHRoaXMuZ2V0WSgpLHRoaXMsYXR0YWNrZXIsaGl0RHVyICk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIOychOy5mOyXkCDrlLDrpbgg7IKs7Jq065Oc66W8IO2LgOyWtOykgOuLpFxyXG4gICAgLy8g7JuU65Oc6rCAIO2YuOy2nO2VqCDsp4HsoJEg67aI65+s7KSEIO2VhOyalCDsl4bsnYxcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBwbGF5UG9zaXRpb25Tb3VuZCggeCx5ICkge1xyXG4gICAgICAgIGNvbnN0IHByID0gR0xPQkFMLndvcmxkLm1hcC5nZXRQcm9wZXJ0eSggeCx5ICk7XHJcbiAgICAgICAgY29uc3QgbCA9IEdMT0JBTC53b3JsZC5nZXRQcm9wZXJ0eSggeCAtIDEseSApO1xyXG4gICAgICAgIGNvbnN0IHIgPSBHTE9CQUwud29ybGQuZ2V0UHJvcGVydHkoIHggKyAxLHkgKTtcclxuICAgICAgICBjb25zdCB1ID0gR0xPQkFMLndvcmxkLmdldFByb3BlcnR5KCB4LHkgLSAxICk7XHJcbiAgICAgICAgY29uc3QgZCA9IEdMT0JBTC53b3JsZC5nZXRQcm9wZXJ0eSggeCx5ICsgMSApO1xyXG4gICAgICAgIGNvbnN0IGMgPSBHTE9CQUwud29ybGQuZ2V0UHJvcGVydHkoIHgseSApO1xyXG4gICAgICAgIGNvbnN0IGxlID0gR0xPQkFMLndvcmxkLmVsZW1lbnRhbC5nZXRFbGVtZW50YWwoIHggLSAxLHkgKTtcclxuICAgICAgICBjb25zdCByZSA9IEdMT0JBTC53b3JsZC5lbGVtZW50YWwuZ2V0RWxlbWVudGFsKCB4ICsgMSx5ICk7XHJcbiAgICAgICAgY29uc3QgdWUgPSBHTE9CQUwud29ybGQuZWxlbWVudGFsLmdldEVsZW1lbnRhbCggeCx5IC0gMSApO1xyXG4gICAgICAgIGNvbnN0IGRlID0gR0xPQkFMLndvcmxkLmVsZW1lbnRhbC5nZXRFbGVtZW50YWwoIHgseSArIDEgKTtcclxuICAgICAgICBjb25zdCBjZSA9IEdMT0JBTC53b3JsZC5lbGVtZW50YWwuZ2V0RWxlbWVudGFsKCB4LHkgKTtcclxuICAgICAgICBjb25zdCB0b3JjaCA9ICggbC5maXJlIHx8IDAgKSArICggci5maXJlIHx8IDAgKSArICggdS5maXJlIHx8IDAgKSArICggZC5maXJlIHx8IDAgKSArICggYy5maXJlIHx8IDAgKTtcclxuICAgICAgICBjb25zdCBmaXJlID0gICggKCBsZSAmJiBsZS50eXBlID09IEVsZW1lbnRhbC5GSVJFICkgPyAxIDogMCApO1xyXG5cclxuICAgICAgICArICggKCByZSAmJiByZS50eXBlID09IEVsZW1lbnRhbC5GSVJFICkgPyAxIDogMCApO1xyXG4gICAgICAgICsgKCAoIHVlICYmIHVlLnR5cGUgPT0gRWxlbWVudGFsLkZJUkUgKSA/IDEgOiAwICk7XHJcbiAgICAgICAgKyAoICggZGUgJiYgZGUudHlwZSA9PSBFbGVtZW50YWwuRklSRSApID8gMSA6IDAgKTtcclxuICAgICAgICArICggKCBjZSAmJiBjZS50eXBlID09IEVsZW1lbnRhbC5GSVJFICkgPyAxIDogMCApO1xyXG4gICAgICAgIFNvdW5kLnBsYXlTaW5nbGVTb3VuZCggXCJzb3VuZC9sb29wX3RvcmNoLndhdlwiLE1hdGgubWluKCAxLHRvcmNoICogMC43ICksdHJ1ZSApO1xyXG4gICAgICAgIFNvdW5kLnBsYXlTaW5nbGVTb3VuZCggXCJzb3VuZC9sb29wX2ZpcmUud2F2XCIsTWF0aC5taW4oIDEsZmlyZSApLHRydWUgKTtcclxuICAgICAgICBpZiAoIGNlICYmIGNlLnR5cGUgPT0gRWxlbWVudGFsLldBVEVSICkge1xyXG4gICAgICAgICAgICBTb3VuZC5wbGF5U291bmQoIFwic291bmQvZW52X3dhdGVyLndhdlwiICk7XHJcbiAgICAgICAgfVxyXG5cdFx0XHJcbiAgICAgICAgZm9yICggY29uc3QgaSBpbiBHTE9CQUwud29ybGQubWFwLmVudlNvdW5kcyApIHtcclxuICAgICAgICAgICAgY29uc3QgdiA9IEdMT0JBTC53b3JsZC5tYXAuZW52U291bmRzW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBkaXN0ID0gR0xPQkFMLndvcmxkLmdldERpc3RhbmNlKCB2Lngsdi55LHgseSApIC8gMTAgKyAxO1xyXG4gICAgICAgICAgICBjb25zdCB2b2wgPSAxIC8gKCBkaXN0ICogZGlzdCApO1xyXG5cclxuICAgICAgICAgICAgLy9sb2codi54LHYueSx4LHksZGlzdCx2b2wpO1xyXG4gICAgICAgICAgICBTb3VuZC5wbGF5U2luZ2xlU291bmQoIFwic291bmQvbG9vcF9cIiArIHYuc291bmQgKyBcIi53YXZcIix2b2wsdHJ1ZSx2ICk7XHJcbiAgICAgICAgfVxyXG5cdFx0XHJcbiAgICAgICAgVGltZXIuZGVsYXllZENhbGwoIFBsYXllci53YWxrU3BlZWQsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgd2F0ZXJWb2wgPSBHTE9CQUwud29ybGQud2F0ZXJBbW91bnQgLyAxMDtcclxuXHJcbiAgICAgICAgICAgIC8vbG9nKFwi66y867O866WoXCIsd2F0ZXJWb2wpO1xyXG4gICAgICAgICAgICBTb3VuZC5wbGF5U2luZ2xlU291bmQoIFwic291bmQvbG9vcF93YXRlci53YXZcIiwgTWF0aC5taW4oIDEsIHdhdGVyVm9sICksIHRydWUgKTtcclxuICAgICAgICB9ICk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyDsnYzslYXsnYQg7Jew7KO87ZWc64ukXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgcGxheU11c2ljKCBtbWwgKSB7XHJcbiAgICAgICAgR0xPQkFMLmludGVyZmFjZS5jdXJzb3IuaGlkZUF1dG9BY3Rpb24oKTtcclxuICAgICAgICB0aGlzLmVuYWJsZURlZmF1bHRBbmltYXRpb24oIGZhbHNlICk7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VJbWFnZSggMSw1ICk7XHJcbiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuZ2V0RXF1aXBwZWRJdGVtKCBcImluc3RydW1lbnRcIiApO1xyXG4gICAgICAgIGxldCBpbnN0cnVtZW50O1xyXG5cclxuICAgICAgICBpZiAoIGl0ZW0gKSB7XHJcbiAgICAgICAgICAgIGluc3RydW1lbnQgPSBpdGVtLnByb3BlcnR5Lmluc3RydW1lbnQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5zdHJ1bWVudCA9IFwic291bmQvbW1sX2NlbHRpYy1oYXJwLWE0LndhdlwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtbWwgPSBuZXcgTWFiaU1NTCggbW1sLGluc3RydW1lbnQgKTtcclxuICAgICAgICB0aGlzLmNvbW1hbmRGb2xsb3dlciggXCJkYW5jZVwiLHsgbW1sOiBtbWwgfSApO1xyXG4gICAgICAgIG1tbC5zZXRWb2x1bWUoIDAuNSApO1xyXG4gICAgICAgIG1tbC5vbiggXCJub3RlXCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fX2FuaW1hdGlvblRpY2sgPSAoIHRoaXMuX19hbmltYXRpb25UaWNrICsgMSApICUgMjtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VJbWFnZSggMSwgNSArIHRoaXMuX19hbmltYXRpb25UaWNrICk7XHJcbiAgICAgICAgICAgIGNvbnN0IGIgPSBuZXcgSWNvblBhY2soIG5ldyBUZXh0dXJlKCBcImZ4LnBuZ1wiLCBmYWxzZSwgeyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKSwgVXRpbHMucmFuZG9tKCA5LCAxMCApLCA0LCAxNiwgMjQgKTtcclxuICAgICAgICAgICAgY29uc3QgbWMgPSBuZXcgTW92aWVDbGlwKCBbXHJcbiAgICAgICAgICAgICAgICBbMCwgNjAsIGIsIHsgeTogWy0yLCBVdGlscy5yYW5kb20oIC0zMCwgLTE1ICksIFwib3V0QmFja1wiXSwgeDogWzcsIFV0aWxzLnJhbmRvbSggLTUsIDIwICksIFwiaW5PdXRTaW5lXCJdIH1dLFxyXG4gICAgICAgICAgICAgICAgWzUwLCA2MCwgYiwgeyBhbHBoYTogWzEsIDAsIFwib3V0Q3ViaWNcIl0gfV0sXHJcbiAgICAgICAgICAgIF0gKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ2hpbGQoIG1jICk7XHJcbiAgICAgICAgICAgIFRpbWVyLmRlbGF5ZWRDYWxsKCAxMDAwLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBtYy5yZW1vdmVGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgICAgIH0gKTtcclxuICAgICAgICB9ICk7XHJcbiAgICAgICAgbW1sLnBsYXkoKTtcclxuICAgICAgICBHTE9CQUwud29ybGQub25jZSggXCJlbmVteVR1cm5cIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBtbWwuc3RvcCgpO1xyXG4gICAgICAgICAgICB0aGlzLmVuYWJsZURlZmF1bHRBbmltYXRpb24oIHRydWUgKTtcclxuICAgICAgICB9ICk7XHJcbiAgICB9XHJcbn1cclxuXHJcblBsYXllci50ZXh0dXJlID0gbmV3IFRleHR1cmUoIFwiUGxheWVyLnBuZ1wiLCBmYWxzZSwgeyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKTtcclxuUGxheWVyLndpZHRoID0gMTg7XHJcblBsYXllci5oZWlnaHQgPSAyNDtcclxuXHJcbiIsImltcG9ydCB7IFBhcnRpY2xlcywgU291bmQsIFV0aWxzLCBUZXh0dXJlLCBUZXh0dXJlQmFzZSwgU3ByaXRlLCBFdmVudCwgVGltZXIgfSBmcm9tIFwiQGVuZ2luZS9mbGF0ZmFzdFwiO1xyXG5cclxuaW1wb3J0IEVudGl0eSBmcm9tIFwiLi9lbnRpdHlcIjtcclxuaW1wb3J0IEl0ZW0gZnJvbSBcIi4vaXRlbVwiO1xyXG5pbXBvcnQgR2FtZU1hcCBmcm9tIFwiLi4vd29ybGQvZ2FtZU1hcFwiO1xyXG5pbXBvcnQgRWZmZWN0IGZyb20gXCIuLi9lZmZlY3RcIjtcclxuaW1wb3J0IEVsZW1lbnRhbCBmcm9tIFwiLi4vd29ybGQvZWxlbWVudGFsXCI7XHJcblxyXG5pbXBvcnQgR0xPQkFMIGZyb20gXCIuLi9nbG9iYWxcIjtcclxuLypcclxuXHJcbu2UhOuejeydgCDqs7XqsITsnYQg7LCo7KeA7ZWY66m0IOyYpOu4jOygne2KuOydtOuptOyEnCDsg53rrLzsnbQg7JWE64uMIOqyg+ydtOuLpC5cclxuQUnrj4Qg7JeG6rOgIGJ1Zmbrj4Qg7JeG64ukLlxyXG5cclxuKi9cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb3AgZXh0ZW5kcyBFbnRpdHkge1xyXG4gICAgY29uc3RydWN0b3IoIG5hbWUsIHRpbGVYLCB0aWxlWSwgb3B0aW9ucyApIHtcclxuICAgICAgICBzdXBlciggbmFtZSwgdGlsZVgsIHRpbGVZLCBvcHRpb25zICk7XHJcbiAgICAgICAgdGhpcy5pc1Byb3AgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY2hhciA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5maWxsUHJvcGVydGllcyggUHJvcC5wcm9wZXJ0eSwgbmFtZSApO1xyXG4gICAgICAgIGNvbnN0IHByID0gdGhpcy5wcm9wZXJ0eTtcclxuXHJcbiAgICAgICAgdGhpcy5uYW1lID0gcHIubmFtZTtcclxuICAgICAgICB0aGlzLmltYWdlTnVtID0gR0xPQkFMLndvcmxkLnJhbmRvbSggMCxwci5pbWFnZXMubGVuZ3RoIC0gMSApO1xyXG4gICAgICAgIHRoaXMuY29sb3JOdW0gPSBHTE9CQUwud29ybGQucmFuZG9tKCAwLHByLmNvbG9ycy5sZW5ndGggLSAxICk7XHJcbiAgICAgICAgdGhpcy5ocCA9IHByLmhwO1xyXG4gICAgICAgIHRoaXMuaHBNYXggPSB0aGlzLmhwO1xyXG4gICAgICAgIHRoaXMudGV4dHVyZSA9IFByb3AudGV4dHVyZTtcclxuICAgICAgICB0aGlzLnRpbGVXaWR0aCA9IFByb3AudGlsZVdpZHRoO1xyXG4gICAgICAgIHRoaXMudGlsZUhlaWdodCA9IFByb3AudGlsZUhlaWdodDtcclxuXHJcbiAgICAgICAgdGhpcy5wb3N0SW5pdCggUHJvcCApO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBkYW1hZ2UoIGRtZywgYXR0YWNrZXIsIGZyb21YLCBmcm9tWSwgaGl0RHVyLCBzb3VuZCApIHtcclxuICAgICAgICBoaXREdXIgPSBoaXREdXIgfHwgMDtcclxuICAgICAgICB0aGlzLmhwID0gdGhpcy5ocCAtIGRtZztcclxuICAgICAgICBpZiAoIHRoaXMuaHAgPD0gMCApIHtcclxuICAgICAgICAgICAgdGhpcy5kZXRhY2hGcm9tV29ybGQoKTtcclxuICAgICAgICAgICAgbmV3IEVmZmVjdCggXCJicmVha1Byb3BcIiwgZnJvbVgsIGZyb21ZLCB0aGlzLmdldFgoKSwgdGhpcy5nZXRZKCksIHRoaXMsIGF0dGFja2VyLCBoaXREdXIgKTtcclxuICAgICAgICAgICAgVGltZXIuZGVsYXllZENhbGwoIGhpdER1ciwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcCA9IG5ldyBQYXJ0aWNsZXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBwLnNldFRleHR1cmUoIG5ldyBUZXh0dXJlKCBcIkJsb29kLnBuZ1wiLCBmYWxzZSApICk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggXCLsgqzrp51cIiwgdGhpcy5nZXRQb3NpdGlvbigpICk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKCBsZXQgaSA9IDE7IGkgPD0gMTA7IGkrKyApIHtcclxuICAgICAgICAgICAgICAgICAgICAvL3AuYWRkUGFydGljbGVzKDAsMCw1MCw5MCw2MCwxMCwxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYW5nbGUgPSBVdGlscy5yYW5kb20oIDAsMzU5ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlZWQgPSBVdGlscy5yYW5kb20oIDEsNiApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpcy5nZXRQb3NpdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL3ggPSB4OyAvLyBHTE9CQUwud29ybGQudmlld1dpZHRoLzI7XHJcbiAgICAgICAgICAgICAgICAgICAgLy95ID0geTsgLy8gR0xPQkFMLndvcmxkLnZpZXdIZWlnaHQvMjtcclxuICAgICAgICAgICAgICAgICAgICBwLmFkZFBhcnRpY2xlcyggW3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgeDogICAgICAgICAgICB4LCB5OiAgICAgICAgICAgIHksIHNpemU6ICAgICAgICAgVXRpbHMucmFuZG9tKCA0LCAzMCApLC8vdGhpcy5nZXRYKCkseT10aGlzLmdldFkoKSxzaXplPTIwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmdsZTogICAgICAgIGFuZ2xlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0dGw6ICAgICAgICAgIDYwICsgVXRpbHMucmFuZG9tKCAxLDEwMCApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGVlZFg6ICAgICAgIE1hdGguY29zKCBhbmdsZSApICogc3BlZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwZWVkWTogICAgICAgTWF0aC5zaW4oIGFuZ2xlICkgKiBzcGVlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BlZWRBbmd1bGFyOiBVdGlscy5yYW5kb20oIDEsMzAgKSAtIDE1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNheTogICAgICAgIDAuNSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICAgICAgICAweDQwNDA0MCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGE6ICAgICAgICAxLjAsXHJcbiAgICAgICAgICAgICAgICAgICAgfV0gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIEdMT0JBTC53b3JsZC5mbG9vckxheWVyLmFkZENoaWxkKCBwICk7XHJcbiAgICAgICAgICAgICAgICBTb3VuZC5wbGF5U291bmQoIFwic291bmQvXCIgKyB0aGlzLnByb3BlcnR5LmJyZWFrU291bmQgKTtcclxuICAgICAgICAgICAgICAgIFRpbWVyLmRlbGF5ZWRDYWxsKCA1MDAwLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcC5yZW1vdmVGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVGcm9tV29ybGQoKTtcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmFkZExvZyggXCIlc3vrpbx9IOu2gOyJiOuLpCFcIiwgdGhpcy5uYW1lICk7XHJcbiAgICAgICAgICAgIEdMT0JBTC5wbGF5ZXIuZXhwID0gR0xPQkFMLnBsYXllci5leHAgKyAxO1xyXG4gICAgICAgICAgICBjb25zdCBudW1PZkRyb3AgPSBHTE9CQUwud29ybGQucmFuZG9tKCAxLDQgKTtcclxuICAgICAgICAgICAgY29uc3QgZmxvb3JMaXN0ID0gR0xPQkFMLndvcmxkLnBhdGhNYW5hZ2VyLmdldFNwbGFzaEZsb29yKCB0aGlzLnRpbGVYLCB0aGlzLnRpbGVZLCBudW1PZkRyb3AgKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IG51bU9mRHJvcDsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgR0xPQkFMLndvcmxkLmVudGl0eU1hbmFnZXIuYWRkRW50aXR5KFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBJdGVtKCBJdGVtLmdvbGQsIGZsb29yTGlzdFtpXS54LCBmbG9vckxpc3RbaV0ueSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6ICAgIEdMT0JBTC53b3JsZC5yYW5kb20oIDEsMzAgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcDogICAgICB0cnVlLCBkcm9wWDogICAgIHRoaXMudGlsZVgsIGRyb3BZOiAgICAgdGhpcy50aWxlWSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcERlbGF5OiAoIG51bU9mRHJvcCAtIGkgKSAqIDEwMCArIGhpdER1cixcclxuICAgICAgICAgICAgICAgICAgICB9ICkgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIEdMT0JBTC53b3JsZC5yYW5kb20oIDEsMyApID09IDEgKSB7XHJcbiAgICAgICAgICAgICAgICBHTE9CQUwud29ybGQuZW50aXR5TWFuYWdlci5hZGRFbnRpdHkoXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IEl0ZW0oIEl0ZW0udmFsaWRJZExpc3RbR0xPQkFMLndvcmxkLnJhbmRvbSggMCxJdGVtLnZhbGlkSWRMaXN0Lmxlbmd0aCAtIDEgKV0sIHRoaXMudGlsZVgsIHRoaXMudGlsZVksIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcDogICAgICB0cnVlLCBkcm9wWDogICAgIHRoaXMudGlsZVgsIGRyb3BZOiAgICAgdGhpcy50aWxlWSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcERlbGF5OiAxMDAgKyBoaXREdXIsXHJcbiAgICAgICAgICAgICAgICAgICAgfSApICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCB0aGlzLnByb3BlcnR5LmV4cGxvc2lvbiApIHtcclxuICAgICAgICAgICAgICAgIGlmICggdGhpcy5wcm9wZXJ0eS5leHBsb3Npb24gPT0gXCJ3YXRlclwiICkge1xyXG4gICAgICAgICAgICAgICAgICAgIFNvdW5kLnBsYXlTb3VuZCggXCJzb3VuZC9leHBsb3Npb25fd2F0ZXIud2F2XCIgKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgRWZmZWN0KCBcImJvb21cIiwgdGhpcy5nZXRYKCksIHRoaXMuZ2V0WSgpLCAyMCwgMzUwLCBoaXREdXIsIDB4MDAwMGZmICk7XHJcbiAgICAgICAgICAgICAgICAgICAgR0xPQkFMLndvcmxkLmVsZW1lbnRhbC5hZGRFbGVtZW50YWwoIEVsZW1lbnRhbC5XQVRFUiwgdGhpcy50aWxlWCwgdGhpcy50aWxlWSwgMTAgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHRoaXMucHJvcGVydHkuZXhwbG9zaW9uID09IFwiZmlyZVwiICkge1xyXG4gICAgICAgICAgICAgICAgICAgIFNvdW5kLnBsYXlTb3VuZCggXCJzb3VuZC9leHBsb3Npb25fZmlyZS53YXZcIiApO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBFZmZlY3QoIFwiYm9vbVwiLCB0aGlzLmdldFgoKSwgdGhpcy5nZXRZKCksIDUwLCAzMDAsIGhpdER1ciwgMHhmZjkwMDAgKTtcclxuICAgICAgICAgICAgICAgICAgICBHTE9CQUwud29ybGQuZWxlbWVudGFsLmFkZEVsZW1lbnRhbCggRWxlbWVudGFsLkZJUkUsIHRoaXMudGlsZVgsIHRoaXMudGlsZVksIDEwICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCB0aGlzLnByb3BlcnR5LmV4cGxvc2lvbiA9PSBcInBvaXNvblwiICkge1xyXG4gICAgICAgICAgICAgICAgICAgIFNvdW5kLnBsYXlTb3VuZCggXCJzb3VuZC9leHBsb3Npb25fZ2FzLndhdlwiICk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IEVmZmVjdCggXCJib29tXCIsIHRoaXMuZ2V0WCgpLCB0aGlzLmdldFkoKSwgMzAsIDQwMCwgaGl0RHVyLCAweGZmMDBmZiApO1xyXG4gICAgICAgICAgICAgICAgICAgIEdMT0JBTC53b3JsZC5lbGVtZW50YWwuYWRkRWxlbWVudGFsKCBFbGVtZW50YWwuUE9JU09OLCB0aGlzLnRpbGVYLCB0aGlzLnRpbGVZLCAxMCApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbmV3IEVmZmVjdCggXCJoaXRQcm9wXCIsIGZyb21YLCBmcm9tWSwgdGhpcy5nZXRYKCksIHRoaXMuZ2V0WSgpLCB0aGlzLCBhdHRhY2tlciwgaGl0RHVyICk7XHJcbiAgICAgICAgICAgIEdMT0JBTC5pbnRlcmZhY2UuYWRkTG9nKCBcIiVze+ulvH0g6rO16rKp7ZWY7JesICVkIOuMgOuvuOyngCFcIiwgdGhpcy5nZXROYW1lKCksIGRtZyApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuUHJvcC50ZXh0dXJlID0gbmV3IFRleHR1cmUoIFwicHJvcC5wbmdcIiwgZmFsc2UsIHsgZm9ybWF0OiBUZXh0dXJlQmFzZS5SR0JBNTU1MSB9ICk7XHJcblByb3Aud2lkdGggPSAxNjtcclxuUHJvcC5oZWlnaHQgPSAyNDtcclxuUHJvcC50aWxlV2lkdGggPSAxNjtcclxuUHJvcC50aWxlSGVpZ2h0ID0gMjQ7XHJcblByb3AucGVyUm93ID0gTWF0aC5mbG9vciggUHJvcC50ZXh0dXJlLndpZHRoIC8gUHJvcC50aWxlV2lkdGggKTtcclxuXHJcblByb3AucHJvcGVydHkgPSB7XHJcbiAgICBbXCJAXCJdOiB7XHJcbiAgICAgICAgbmFtZTogICAgICAgXCLtla3slYTrpqxcIiwgIGhwOiAgICAgICAgIDEsIGhpdFNvdW5kOiAgIG51bGwsIGJyZWFrU291bmQ6IFwiYnJlYWtfMi53YXZcIixcclxuICAgICAgICBjb2xvcnM6ICAgICBbMHhjZmI3OGFdLFxyXG4gICAgICAgIGltYWdlczogICAgIFtbIDEsIDEgXSwgWyAyLCAxIF0sIFsgMywgMSBdLCBbIDQsIDEgXSwgWyA1LCAxIF0sIFsgNiwgMSBdLCBbIDcsIDEgXV0gXHJcbiAgICB9LFxyXG4gICAgW1wiI1wiXToge1xyXG4gICAgICAgIG5hbWU6ICAgICAgIFwi64KY66y07IOB7J6QXCIsIGhwOiAgICAgICAgIDEsIGhpdFNvdW5kOiAgIG51bGwsIGJyZWFrU291bmQ6IFwiYnJlYWtfMS53YXZcIixcclxuICAgICAgICBjb2xvcnM6ICAgICBbMHg5MTQ1MWNdLFxyXG4gICAgICAgIGltYWdlczogICAgIFsgWyAxLCAyIF0sIFsgMiwgMiBdLCBbIDMsIDIgXSBdXHJcbiAgICB9LFxyXG4gICAgW1wiJlwiXToge1xyXG4gICAgICAgIG5hbWU6ICAgICAgICBcIuq0keusvFwiLCBocDogICAgICAgICAgNSwgaGl0U291bmQ6ICAgIG51bGwsIGJyZWFrU291bmQ6ICBcImJyZWFrXzEud2F2XCIsIHNsaWNlOiAgICAgICBmYWxzZSwgcGFydGljbGU6ICAgIDE1LCBuZWVkUGlja0F4ZTogdHJ1ZSxcclxuICAgICAgICBjb2xvcnM6ICAgICAgWzB4NGMyMzQ4XSxcclxuICAgICAgICBpbWFnZXM6ICAgICAgWyBbIDEsIDMgXSwgWyAyLCAzIF0sIFsgMywgMyBdLCBbIDQsIDMgXSBdXHJcbiAgICB9LFxyXG59O1xyXG5cclxuXHJcbiIsImltcG9ydCB7IEJpdG1hcCxUZXh0dXJlLCBUZXh0dXJlQmFzZSwgU3ByaXRlLCBFdmVudCwgVGltZXIgfSBmcm9tIFwiQGVuZ2luZS9mbGF0ZmFzdFwiO1xyXG5cclxuaW1wb3J0IEVudGl0eSBmcm9tIFwiLi9lbnRpdHlcIjtcclxuaW1wb3J0IEdhbWVNYXAgZnJvbSBcIi4uL3dvcmxkL2dhbWVNYXBcIjtcclxuXHJcbmltcG9ydCBHTE9CQUwgZnJvbSBcIi4uL2dsb2JhbFwiO1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNraWxsIGV4dGVuZHMgRW50aXR5IHtcclxuICAgIGNvbnN0cnVjdG9yKCBuYW1lLCB0aWxlWCwgdGlsZVksIG9wdGlvbnMgKSB7XHJcbiAgICAgICAgc3VwZXIoIG5hbWUsIHRpbGVYLCB0aWxlWSwgb3B0aW9ucyApO1xyXG4gICAgICAgIHRoaXMuaXNTa2lsbCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5maWxsUHJvcGVydGllcyggU2tpbGwucHJvcGVydHksbmFtZSApO1xyXG4gICAgICAgIGNvbnN0IHByID0gdGhpcy5wcm9wZXJ0eTtcclxuXHJcbiAgICAgICAgdGhpcy5uYW1lID0gcHIubmFtZSB8fCBuYW1lO1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBTa2lsbC5jb2xvcltwci50eXBlXTtcclxuXHJcbiAgICAgICAgdGhpcy50ZXh0dXJlID0gdGhpcy5vcHRpb25zLmZpbHRlcmluZyA/IFNraWxsLnRleHR1cmVGaWx0ZXJlZCA6IFNraWxsLnRleHR1cmU7XHJcbiAgICAgICAgdGhpcy50aWxlV2lkdGggPSBTa2lsbC50aWxlV2lkdGg7XHJcbiAgICAgICAgdGhpcy50aWxlSGVpZ2h0ID0gU2tpbGwudGlsZUhlaWdodDtcclxuICAgICAgICB0aGlzLnBvc3RJbml0KCBTa2lsbCApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEljb24oIGZpbHRlcmluZyxmbGlwICkge1xyXG4gICAgICAgIGxldCBpY29uO1xyXG5cclxuICAgICAgICBpZiAoIHRoaXMucHJvcGVydHkudHlwZSA9PSBcIm1lbGVlXCIgKSB7XHJcbiAgICAgICAgICAgIGljb24gPSBHTE9CQUwucGxheWVyLmdldEVxdWlwcGVkSXRlbSggXCJtZWxlZVwiICk7XHJcbiAgICAgICAgICAgIGlmICggIWljb24gKSB7XHJcbiAgICAgICAgICAgICAgICBpY29uID0gR0xPQkFMLnBsYXllci5iYXNlV2VhcG9uLmdldEljb24oKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGljb24gPSBpY29uLmdldEljb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoIHRoaXMucHJvcGVydHkudHlwZSA9PSBcInJhbmdlZFwiICkge1xyXG4gICAgICAgICAgICBpY29uID0gR0xPQkFMLnBsYXllci5nZXRFcXVpcHBlZEl0ZW0oIFwicmFuZ2VkXCIgKTtcclxuICAgICAgICAgICAgaWYgKCAhaWNvbiApIHtcclxuICAgICAgICAgICAgICAgIGljb24gPSBHTE9CQUwucGxheWVyLmJhc2VXZWFwb24uZ2V0SWNvbigpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWNvbiA9IGljb24uZ2V0SWNvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWNvbiA9IG5ldyBTa2lsbCggdGhpcy5fX2tleSx7IGZpbHRlcmluZzogZmlsdGVyaW5nLGZsaXA6IGZsaXAgfSApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGljb247XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SW52ZW50b3J5U3ByaXRlKCkge1xyXG4gICAgICAgIGNvbnN0IGJhc2UgPSBuZXcgU3ByaXRlKCk7XHJcbiAgICAgICAgY29uc3QgYiA9IG5ldyBCaXRtYXAoIG5ldyBUZXh0dXJlKCBcInNraWxsUGFuZWwucG5nXCIsZmFsc2UseyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKSApO1xyXG4gICAgICAgIGNvbnN0IGNvbG9yID0gdGhpcy5jb2xvcjtcclxuXHJcbiAgICAgICAgYi5zZXRPdmVycmlkZUNvbG9yKCBjb2xvciApO1xyXG4gICAgICAgIGIuc2V0QW5jaG9yUG9pbnQoIDAuNSwwLjUgKTtcclxuICAgICAgICBiYXNlLmFkZENoaWxkKCBiICk7XHJcbiAgICAgICAgY29uc3QgaWNvbiA9IHRoaXMuZ2V0SWNvbigpO1xyXG5cclxuICAgICAgICBpY29uLnNldFBvc2l0aW9uKCAtNjAgKyAxNiwxICk7XHJcbiAgICAgICAgYmFzZS5hZGRDaGlsZCggaWNvbiApO1xyXG4gICAgICAgIGNvbnN0IHR3ID0gR0xPQkFMLmludGVyZmFjZS5nZXRIaXJlc1RleHRXcmFwKCB0aGlzLm5hbWUgKTtcclxuXHJcbiAgICAgICAgdHcuc2V0UG9zaXRpb24oIC02MCArIDM1LC03ICk7XHJcbiAgICAgICAgdHcuc2V0VGV4dENvbG9yKCB0aGlzLmNvbG9yICk7XHJcbiAgICAgICAgYmFzZS5hZGRDaGlsZCggdHcgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGJhc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaXNFcXVpcHBhYmxlKCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblNraWxsLnByb3BlcnR5ID0ge1xyXG4gICAgW1wi6re87KCR66y06riwXCJdOiAgeyBpbWFnZTogWzEsMV0sIHR5cGU6IFwibWVsZWVcIiwgIH0sXHJcbiAgICBbXCLsm5DqsbDrpqzrrLTquLBcIl06IHsgaW1hZ2U6IFsxLDFdLCB0eXBlOiBcInJhbmdlZFwiLCB9LFxyXG4gICAgW1wi7Iqk66ek7IucXCJdOiAgIHsgaW1hZ2U6IFsxLDFdLCB0eXBlOiBcImFjdGl2ZVwiLCAgfSxcclxuICAgIFtcIuyMjeqygOuCnO2DgFwiXTogIHsgaW1hZ2U6IFsyLCAxXSwgdHlwZTogXCJtYWdpY1wiLCB9LFxyXG5cclxufTtcclxuXHJcblNraWxsLnRleHR1cmUgPSBuZXcgVGV4dHVyZSggXCJTa2lsbHMucG5nXCIsIGZhbHNlLCB7IGZvcm1hdDogVGV4dHVyZUJhc2UuUkdCQTU1NTEgfSApO1xyXG5Ta2lsbC50ZXh0dXJlRmlsdGVyZWQgPSBuZXcgVGV4dHVyZSggXCJTa2lsbHMucG5nXCIsIHRydWUsIHsgZm9ybWF0OiBUZXh0dXJlQmFzZS5SR0JBNTU1MSB9ICk7XHJcblNraWxsLndpZHRoID0gMzI7XHJcblNraWxsLmhlaWdodCA9IDMyO1xyXG5Ta2lsbC50aWxlV2lkdGggPSAzMjtcclxuU2tpbGwudGlsZUhlaWdodCA9IDMyO1xyXG5Ta2lsbC5wZXJSb3cgPSBNYXRoLmZsb29yKCBTa2lsbC50ZXh0dXJlLndpZHRoIC8gU2tpbGwud2lkdGggKTtcclxuU2tpbGwuY29sb3IgPSB7XHJcbiAgICBtZWxlZTogXHQgMHhlZTE0NWIsICBcdC8vIOq3vOygkVxyXG4gICAgcmFuZ2VkOiBcdDB4ZWUxNDViLCAgXHQvLyDsm5DqsbDrpqxcclxuICAgIGFjdGl2ZTogXHQweGVlMTQ1YiwgIFx0Ly8g7JWh7Yuw67iMXHJcbiAgICBwYXNzaXZlOiAweGEwYTBhMCxcdC8vIO2MqOyLnOu4jFxyXG4gICAgbWFnaWM6IFx0IDB4MDBhZWVmLFx0Ly8g66eI67KVXHJcbn07XHJcblxyXG5cclxuIiwiaW1wb3J0IHsgU2NlbmVNYW5hZ2VyIH0gZnJvbSBcIkBlbmdpbmUvU2NlbmVNYW5hZ2VyXCI7XHJcbmltcG9ydCB7IFN0YWdlIH0gZnJvbSBcIkBlbmdpbmUvU3RhZ2VcIjtcclxuaW1wb3J0IEludGVyZmFjZSBmcm9tIFwiLi9pbnRlcmZhY2UvaW50ZXJmYWNlXCI7XHJcbmltcG9ydCBTYXZlTG9hZCBmcm9tIFwiLi9zYXZlTG9hZFwiO1xyXG5pbXBvcnQgV29ybGQgZnJvbSBcIi4vd29ybGQvd29ybGRcIjtcclxuaW1wb3J0IFBsYXllciBmcm9tIFwiLi9lbnRpdHkvcGxheWVyXCI7XHJcblxyXG5jbGFzcyBBcHBEYXRhIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8qKiBAdHlwZSB7V29ybGR9ICovXHJcbiAgICAgICAgdGhpcy53b3JsZCA9IG51bGw7XHJcbiAgICAgICAgLyoqIEB0eXBlIHtJbnRlcmZhY2V9ICovXHJcbiAgICAgICAgdGhpcy5pbnRlcmZhY2UgPSBudWxsO1xyXG4gICAgICAgIC8qKiBAdHlwZSB7U3RhZ2V9ICovXHJcbiAgICAgICAgdGhpcy5zdGFnZSA9IG51bGw7XHJcbiAgICAgICAgLyoqIEB0eXBlIHtTY2VuZU1hbmFnZXJ9ICovXHJcbiAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIgPSBudWxsO1xyXG4gICAgICAgIC8qKiBAdHlwZSB7U2F2ZUxvYWR9ICovXHJcbiAgICAgICAgdGhpcy5zYXZlTG9hZCA9IG51bGw7XHJcbiAgICAgICAgLyoqIEB0eXBlIHtQbGF5ZXJ9ICovXHJcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBudWxsO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBHTE9CQUwgPSBuZXcgQXBwRGF0YSgpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgR0xPQkFMO1xyXG4iLCJpbXBvcnQgeyBUd2VlbiwgUGl4ZWwsIGhhbmd1bCwgTWVzaCwgVGV4dEZpZWxkLCBlYXNpbmcsIEJpdG1hcCwgc3RhZ2UsIFNjZW5lTWFuYWdlciwgYXBwbGljYXRpb24sIFNvdW5kLCBSZW5kZXJUYXJnZXQsIFV0aWxzLCBNb3ZpZUNsaXAsIFRleHR1cmUsIFRleHR1cmVCYXNlLCBTcHJpdGUsIEV2ZW50LCBUaW1lciB9IGZyb20gXCJAZW5naW5lL2ZsYXRmYXN0XCI7XHJcblxyXG5pbXBvcnQgR2FtZU1hcCBmcm9tIFwiLi4vd29ybGQvZ2FtZU1hcFwiO1xyXG5pbXBvcnQgQXV0b01hcCBmcm9tIFwiLi9hdXRvTWFwXCI7XHJcbmltcG9ydCBDdXJzb3IgZnJvbSBcIi4vY3Vyc29yXCI7XHJcbmltcG9ydCBJbnRlcmZhY2UgZnJvbSBcIi4vaW50ZXJmYWNlXCI7XHJcbmltcG9ydCBJY29uUGFjayBmcm9tIFwiQGxpYi9pY29uUGFja1wiO1xyXG5pbXBvcnQgQnV0dG9uMiBmcm9tIFwiQGxpYi9idXR0b24yXCI7XHJcbmltcG9ydCBSYW5kb20gZnJvbSBcIkBsaWIvcmFuZG9tXCI7XHJcbmltcG9ydCBDb2xvcnMgZnJvbSBcIkBsaWIvY29sb3JzXCI7XHJcbmltcG9ydCBHcmlkOSBmcm9tIFwiQGxpYi9ncmlkOVwiO1xyXG5pbXBvcnQgTGlzdFZpZXcgZnJvbSBcIkBsaWIvbGlzdFZpZXdcIjtcclxuaW1wb3J0IFByb3AgZnJvbSBcIi4uL2VudGl0eS9wcm9wXCI7XHJcbmltcG9ydCBNb25zdGVyIGZyb20gXCIuLi9lbnRpdHkvbW9uc3RlclwiO1xyXG5pbXBvcnQgTnBjIGZyb20gXCIuLi9lbnRpdHkvbnBjXCI7XHJcbmltcG9ydCBJdGVtIGZyb20gXCIuLi9lbnRpdHkvaXRlbVwiO1xyXG5cclxuaW1wb3J0IEdMT0JBTCBmcm9tIFwiLi4vZ2xvYmFsXCI7XHJcbmltcG9ydCBDT05GSUcgZnJvbSBcIi4uL2NvbmZpZ1wiO1xyXG5cclxuXHJcbi8qXHJcblxyXG7siqTtgqzqs7wg7JWE7J207YWc7J2EIOqzoOuluOuLpC5cclxuXHJcbiovXHJcblxyXG5cclxuZnVuY3Rpb24gc3ByaXRlRnVuYyggbHYsIGx2SXRlbSwgaW5kZXgsIG93bmVyICkge1xyXG4gICAgbGV0IF93b3JsZCA9IG93bmVyO1xyXG4gICAgbGV0IGl0ZW0gPSBsdkl0ZW0uZGF0YS5pdGVtO1xyXG4gICAgbGV0IHNwciA9IGl0ZW0uZ2V0SW52ZW50b3J5U3ByaXRlKCk7XHJcblxyXG4gICAgLy8gc3ByLmVuYWJsZU1vdXNlRHJhZyh0cnVlLCB7XHJcbiAgICAvLyAgICAgdmVydGljYWxMb2NrOiAgICAgIHRydWUsXHJcbiAgICAvLyAgICAgbW91c2VEb3duQ2FsbGJhY2s6ICh0aGlzLCBlKSA9PiB7XHJcbiAgICAvLyAgICAgICAgIGUuZHJhZy5jYW5jZWwgPSB0cnVlO1xyXG4gICAgLy8gICAgIH0sXHJcbiAgICAvLyAgICAgbW91c2VNb3ZlQ2FsbGJhY2s6ICh0aGlzLCBlKSA9PiB7XHJcbiAgICAvLyAgICAgICAgIGlmIChpdGVtLmlzSXRlbSAmJiBpdGVtICE9IEdMT0JBTC5wbGF5ZXIuYmFzZVdlYXBvbikge1xyXG4gICAgLy8gICAgICAgICAgICAgZS5kcmFnLnggPSBNYXRoLm1heChlLmRyYWcueCwgZS5kcmFnLm94KTtcclxuICAgIC8vICAgICAgICAgICAgIGlmIChlLmRyYWcuZHggPiA2MCkgeyAvLyDrsoTrpqzquLBcclxuICAgIC8vICAgICAgICAgICAgICAgICBzcHIuc2V0QWxwaGEoMC41KTtcclxuICAgIC8vICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgc3ByLnNldEFscGhhKDEpO1xyXG4gICAgLy8gICAgICAgICAgICAgfVxyXG4gICAgLy8gICAgICAgICB9IGVsc2Uge1xyXG4gICAgLy8gICAgICAgICAgICAgZS5kcmFnLnggPSBVdGlscy5jbGFtcChlLmRyYWcueCwgZS5kcmFnLm94LCBlLmRyYWcub3ggKyAxMCk7XHJcbiAgICAvLyAgICAgICAgIH1cclxuICAgIC8vICAgICAgICAgZS5kcmFnLmNhbmNlbCA9IHRydWU7XHJcbiAgICAvLyAgICAgfSxcclxuICAgIC8vICAgICBtb3VzZVVwQ2FsbGJhY2s6ICh0aGlzLCBlKSA9PiB7XHJcbiAgICAvLyAgICAgICAgIGlmIChpdGVtLmlzSXRlbSAmJiBpdGVtICE9IEdMT0JBTC5wbGF5ZXIuYmFzZVdlYXBvbikge1xyXG4gICAgLy8gICAgICAgICAgICAgZS5kcmFnLnggPSBNYXRoLm1heChlLmRyYWcueCwgZS5kcmFnLm94KTtcclxuICAgIC8vICAgICAgICAgICAgIGlmIChlLmRyYWcuZHggPiA2MCkgeyAvLyDrsoTrpqzquLBcclxuICAgIC8vICAgICAgICAgICAgICAgICBfd29ybGQuYWRkTG9nKFwiJXN77J2EfSDrsJTri6Xsl5Ag67KE66C464ukLlwiLCBpdGVtLm5hbWUpO1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIEdMT0JBTC5pbnRlcmZhY2UuYWN0aW9uU2VsZWN0b3IudW5zZWxlY3QoaXRlbSk7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgbHYucmVtb3ZlKGx2SXRlbSk7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgR0xPQkFMLnBsYXllci5pbnZlbnRvcnkucmVtb3ZlSXRlbShpdGVtKTtcclxuICAgIC8vICAgICAgICAgICAgICAgICBpdGVtLmRyb3AoR0xPQkFMLnBsYXllci50aWxlWCwgR0xPQkFMLnBsYXllci50aWxlWSk7XHJcbiAgICAvLyAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIG5ldyBUd2VlbihzcHIsIDEwMCwgeyB4OiBlLmRyYWcub3ggfSwgeyBlYXNlOiBlYXNpbmcub3V0Q3ViaWMgfSk7XHJcbiAgICAvLyAgICAgICAgICAgICB9XHJcbiAgICAvLyAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAvLyAgICAgICAgICAgICBlLmRyYWcueCA9IFV0aWxzLmNsYW1wKGUuZHJhZy54LCBlLmRyYWcub3gsIGUuZHJhZy5veCArIDEwKTtcclxuICAgIC8vICAgICAgICAgICAgIG5ldyBUd2VlbihzcHIsIDEwMCwgeyB4OiBlLmRyYWcub3ggfSwgeyBlYXNlOiBlYXNpbmcub3V0Q3ViaWMgfSk7XHJcbiAgICAvLyAgICAgICAgIH1cclxuICAgIC8vICAgICAgICAgZS5kcmFnLmNhbmNlbCA9IHRydWU7XHJcbiAgICAvLyAgICAgfSxcclxuICAgIC8vIH0pO1xyXG4gICAgcmV0dXJuIFtzcHIsYXBwbGljYXRpb24ubG9naWNhbFZpZXdwb3J0LndpZHRoLHNwci5nZXRIZWlnaHQoKSAtIDNdO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEB0aGlzIEFjdGlvblNlbGVjdG9yXHJcbiAqXHJcbiAqIEBwYXJhbSB7Kn0gZVxyXG4gKi9cclxuZnVuY3Rpb24gb25DbGljayggZSApIHtcclxuICAgIGxldCBpdGVtID0gZS5pdGVtLmRhdGEuaXRlbTtcclxuXHJcbiAgICBpZiAoIGl0ZW0uaXNFcXVpcHBhYmxlKCkgKSB7XHJcbiAgICAgICAgR0xPQkFMLnBsYXllci5pbnZlbnRvcnkudHJ5RXF1aXAoIGl0ZW0sdHJ1ZSApO1xyXG4gICAgfVxyXG4gICAgU291bmQucGxheVNvdW5kKCBcInNvdW5kL2NoYW5nZXJfc2VsZWN0LndhdlwiICk7XHJcbiAgICB0aGlzLnNlbGVjdCggaXRlbSApO1xyXG4gICAgdGhpcy5jbG9zZSgpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEB0aGlzIEFjdGlvblNlbGVjdG9yXHJcbiAqXHJcbiAqL1xyXG5mdW5jdGlvbiBzaG93RXF1aXBzKCkge1xyXG4gICAgbGV0IGl0ZW1zID0gW107XHJcblxyXG4gICAgLy90W3QubGVuZ3RoKzFdID0gR0xPQkFMLnBsYXllci5iYXNlV2VhcG9uO1xyXG4gICAge1xyXG4gICAgICAgIGxldCB0MCA9IEdMT0JBTC5wbGF5ZXIuc2tpbGxzO1xyXG5cclxuICAgICAgICBpZiAoIHQwLmxlbmd0aCA+IDAgKSB7XHJcbiAgICAgICAgICAgIGZvciAoIGxldCBpIGluIHQwICkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHYgPSB0MFtpXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKCB2ICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKlxyXG4gICAgaWYgKGZhbHNlKSB7XHJcbiAgICAgICAgbGV0IHQwID0gW0dMT0JBTC5wbGF5ZXIuaW52ZW50b3J5LmZpbmRFcXVpcHBlZEl0ZW1CeVR5cGUoXCJyYW5nZWRcIildO1xyXG4gICAgICAgIGlmICh0MC5sZW5ndGggPiAwKSB7IFxyXG4gICAgICAgICAgICBmb3IgKGxldCBpIGluIHQwKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdiA9IHQwW2ldO1xyXG4gICAgICAgICAgICAgICAgdC5wdXNoKHYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGZhbHNlKSB7XHJcbiAgICAgICAgbGV0IHQwID0gW0dMT0JBTC5wbGF5ZXIuaW52ZW50b3J5LmZpbmRFcXVpcHBlZEl0ZW1CeVR5cGUoXCJtZWxlZVwiKV07XHJcbiAgICAgICAgaWYgKHQwLmxlbmd0aCA+IDApIHsgXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgaW4gdDApIHtcclxuICAgICAgICAgICAgICAgIGxldCB2ID0gdDBbaV07XHJcbiAgICAgICAgICAgICAgICB0LnB1c2godik7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2Lm5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cdCovXHJcbiAgICBmb3IgKCBsZXQgaSBpbiBpdGVtcyApIHtcclxuICAgICAgICBsZXQgdiA9IGl0ZW1zW2ldO1xyXG5cclxuICAgICAgICBpZiAoICF0aGlzLmFjdGlvbnMuaW5jbHVkZXMoIHYgKSApIHtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zLnVuc2hpZnQoIHYgKTsgLy8g7JeG64qUIOqyg+ydtOuptCDrp6jsnITsl5Ag7LaU6rCAXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yICggbGV0IGkgPSB0aGlzLmFjdGlvbnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0gKSB7XHJcbiAgICAgICAgaWYgKCAhaXRlbXMuaW5jbHVkZXMoIHRoaXMuYWN0aW9uc1tpXSApICkge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnMuc3BsaWNlKCBpLDEgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblx0XHJcbiAgICAvL3RoaXMuc2VsZWN0KCkgLS0g7KO866i57J20652864+EIOyEoO2DnVxyXG5cdFxyXG4gICAgbGV0IGx2SXRlbXMgPSBbXTtcclxuXHJcbiAgICBmb3IgKCBsZXQgaSBpbiB0aGlzLmFjdGlvbnMgKSB7XHJcbiAgICAgICAgbGV0IHYgPSB0aGlzLmFjdGlvbnNbaV07XHJcblxyXG4gICAgICAgIGx2SXRlbXMucHVzaCggW3YubmFtZSwgeyBpdGVtOiB2IH1dICk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGx2ID0gbmV3IExpc3RWaWV3KFxyXG4gICAgICAgIGx2SXRlbXMsXHJcbiAgICAgICAgYXBwbGljYXRpb24ubG9naWNhbFZpZXdwb3J0LndpZHRoLFxyXG4gICAgICAgIGFwcGxpY2F0aW9uLmxvZ2ljYWxWaWV3cG9ydC5oZWlnaHQgLSA0MCxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG93bmVyOiAgICAgICAgIEdMT0JBTC53b3JsZCxcclxuICAgICAgICAgICAgYWxpZ246ICAgICAgICAgXCJib3R0b21cIixcclxuICAgICAgICAgICAgLy9jbGlwOiAgICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgICAvL2N1dE9mZnNldEJvdHRvbSA9IDQwLFxyXG4gICAgICAgICAgICBzdGlja09uQm9yZGVyOiB0cnVlLFxyXG4gICAgICAgICAgICBzcHJpdGVGdW5jOiAgICBzcHJpdGVGdW5jLFxyXG4gICAgICAgICAgICBhbmltYXRpb25GdW5jOiAoIHNlbGYsIHNwciwgaSApID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBpMiA9IHNlbGYuZ2V0TnVtT2ZJdGVtcygpIC0gaSArIDE7XHJcbiAgICAgICAgICAgICAgICBsZXQgeCA9IHNwci5nZXRYKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgc3ByLnNldFgoIHggLSAxMCApO1xyXG4gICAgICAgICAgICAgICAgc3ByLnNldEFscGhhKCAwICk7XHJcbiAgICAgICAgICAgICAgICBuZXcgVHdlZW4oIHNwciwgMTAwLCB7IHg6IHgsIGFscGhhOiAxIH0sIHsgZGVsYXk6IGkyICogMC4wMiwgZWFzZTogZWFzaW5nLm91dEN1YmljIH0gKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9XHJcbiAgICApO1xyXG5cclxuICAgIGx2LnNldFBvc2l0aW9uKCBDT05GSUcuSW50ZXJmYWNlLm1hcmdpbiwwICk7XHJcbiAgICBsdi5hZGRFdmVudExpc3RlbmVyKCBcImNsaWNrXCIsb25DbGljayx0aGlzICk7XHJcbiAgICBsdi5hZGRFdmVudExpc3RlbmVyKCBcImNsb3NlXCIsdGhpcy5jbG9zZSx0aGlzICk7XHJcbiAgICB0aGlzLmJhc2VTcHIuYWRkQ2hpbGQoIGx2ICk7XHJcbiAgICB0aGlzLmxpc3RWaWV3ID0gbHY7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFjdGlvblNlbGVjdG9yIGV4dGVuZHMgU3ByaXRlIHtcclxuICAgIGNvbnN0cnVjdG9yKCBzZWxlY3RlZEljb24gKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmxpc3RWaWV3ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRJY29uID0gc2VsZWN0ZWRJY29uO1xyXG4gICAgICAgIHRoaXMuYWN0aW9ucyA9IFtdO1xyXG4gICAgICAgIGxldCBbeCwgeSwgdywgaF0gPSBbYXBwbGljYXRpb24ubG9naWNhbFJlbmRlckJvdW5kcy5sZWZ0LCBhcHBsaWNhdGlvbi5sb2dpY2FsUmVuZGVyQm91bmRzLnRvcCwgYXBwbGljYXRpb24ubG9naWNhbFJlbmRlckJvdW5kcy53aWR0aCwgYXBwbGljYXRpb24ubG9naWNhbFJlbmRlckJvdW5kcy5oZWlnaHRdO1xyXG4gICAgICAgIGxldCBtID0gbmV3IFNwcml0ZSgpOy8vaGVscGVyLmNyZWF0ZUJveCh4LHksdyxoLDB4ZmYwMDAwLDAuNSk7XHJcblxyXG4gICAgICAgIG0uYWRkRXZlbnRMaXN0ZW5lciggRXZlbnQuUE9JTlRFUl9ET1dOLCAoIGUgKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICggdGhpcy5pc1Zpc2libGUoKSApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ICk7XHJcbiAgICAgICAgdGhpcy5hZGRDaGlsZCggbSApO1xyXG4gICAgICAgIHRoaXMuc2V0VmlzaWJsZSggZmFsc2UgKTtcclxuICAgICAgICB0aGlzLmJhc2VTcHIgPSBtO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZnJlc2goKSB7XHJcbiAgICAgICAgbGV0IGFjdGlvbiA9IEdMT0JBTC5wbGF5ZXIuc2VsZWN0ZWRBY3Rpb247XHJcblxyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRJY29uLnNldENvbFJvdyggMSwgMSApO1xyXG4gICAgICAgIGxldCBpY29uID0gYWN0aW9uLmdldEljb24oKTtcclxuXHJcbiAgICAgICAgaWYgKCBhY3Rpb24ucHJvcGVydHkudHlwZSA9PSBcIm1lbGVlXCIgfHxcclxuXHRcdFx0YWN0aW9uLnByb3BlcnR5LnR5cGUgPT0gXCJyYW5nZWRcIiApIHtcclxuICAgICAgICAgICAgR0xPQkFMLmludGVyZmFjZS5jdXJzb3Iuc2V0TW9kZSggaWNvbi5wcm9wZXJ0eS50eXBlICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgR0xPQkFMLmludGVyZmFjZS5jdXJzb3Iuc2V0TW9kZSggYWN0aW9uLnByb3BlcnR5LnR5cGUgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZEljb24uY2xlYXJDaGlsZHJlbigpO1xyXG4gICAgICAgIGljb24uc2V0WCggLTggKTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkSWNvbi5hZGRDaGlsZCggaWNvbiApO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbGVjdCggYWN0aW9uICkge1xyXG4gICAgICAgIGFjdGlvbiA9IGFjdGlvbiB8fCBHTE9CQUwucGxheWVyLnNlbGVjdGVkQWN0aW9uO1xyXG4gICAgICAgIEdMT0JBTC5wbGF5ZXIuc2VsZWN0ZWRBY3Rpb24gPSBhY3Rpb247XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XHJcbiAgICAgICAgLy8g66eI7KeA66eJ7JeQIOyTtOqxuCDrp6jslYTrnpjroZxcclxuICAgICAgICBsZXQgaWR4O1xyXG5cclxuICAgICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCB0aGlzLmFjdGlvbnMubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgICAgICAgIGxldCB2ID0gdGhpcy5hY3Rpb25zW2ldO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coIHYubmFtZSApO1xyXG4gICAgICAgICAgICBpZiAoIHYgPT0gYWN0aW9uICkge1xyXG4gICAgICAgICAgICAgICAgaWR4ID0gaTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYWN0aW9ucy5zcGxpY2UoIGlkeCApO1xyXG4gICAgICAgIHRoaXMuYWN0aW9ucy5wdXNoKCBhY3Rpb24gKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8g7J6l67mE7KSR7J24IOyVhOydtO2FnOydhCDrsoTrpqzqsbDrgpgg7ZWgIOqyveyasFxyXG4gICAgdW5zZWxlY3QoIGl0ZW0gKSB7XHJcbiAgICAgICAgaWYgKCBpdGVtID09IEdMT0JBTC5wbGF5ZXIuc2VsZWN0ZWRBY3Rpb24gKSB7XHJcbiAgICAgICAgICAgIGlmICggR0xPQkFMLmludGVyZmFjZS5jdXJzb3IubW9kZSA9PSBcImh5YnJpZFwiICkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGVxdWlwUmFuZ2VkID0gR0xPQkFMLnBsYXllciAmJiBHTE9CQUwucGxheWVyLmludmVudG9yeS5maW5kRXF1aXBwZWRJdGVtQnlUeXBlKCBcInJhbmdlZFwiICk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZXF1aXBNZWxlZSA9IEdMT0JBTC5wbGF5ZXIgJiYgR0xPQkFMLnBsYXllci5pbnZlbnRvcnkuZmluZEVxdWlwcGVkSXRlbUJ5VHlwZSggXCJtZWxlZVwiICk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBlcXVpcFJhbmdlZCApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdCggZXF1aXBSYW5nZWQgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QoIGVxdWlwTWVsZWUgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KCBHTE9CQUwucGxheWVyLmJhc2VXZWFwb24gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlZnJlc2goKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKCkge1xyXG4gICAgICAgIEdMT0JBTC5pbnRlcmZhY2UuaHVkTGF5ZXIuYWRkQ2hpbGQoIHRoaXMgKTtcclxuICAgICAgICBTb3VuZC5wbGF5U291bmQoIFwic291bmQvY2hhbmdlcl9vcGVuLndhdlwiICk7XHJcbiAgICAgICAgR0xPQkFMLmludGVyZmFjZS5oaWRlSW5mbygpO1xyXG4gICAgICAgIHNob3dFcXVpcHMuY2FsbCggdGhpcyApO1xyXG4gICAgICAgIHRoaXMuc2V0VmlzaWJsZSggdHJ1ZSApO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIFNvdW5kLnBsYXlTb3VuZCggXCJzb3VuZC9jaGFuZ2VyX2Nsb3NlLndhdlwiICk7XHJcbiAgICAgICAgdGhpcy5zZXRWaXNpYmxlKCBmYWxzZSApO1xyXG4gICAgICAgIHRoaXMuYmFzZVNwci5jbGVhckNoaWxkcmVuKCk7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgR0xPQkFMLndvcmxkLnNob3dNYXBJbmZvKCBHTE9CQUwucGxheWVyLnRpbGVYLCBHTE9CQUwucGxheWVyLnRpbGVZICk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNPcGVuKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzVmlzaWJsZSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuIiwiaW1wb3J0IHsgVHdlZW4sIHN0YWdlLGFwcGxpY2F0aW9uLCBQaXhlbCwgUmVuZGVyVGFyZ2V0LCBLZXlDb2RlLCBNb3ZpZUNsaXAsIFNoYXBlLCBVdGlscywgVGV4dHVyZUJhc2UsIFRleHR1cmUsIFRpbWVyLCBNZXNoLCBUZXh0RmllbGQsIGVhc2luZywgRXZlbnQsIEJpdG1hcCwgU3ByaXRlIH0gZnJvbSBcIkBlbmdpbmUvZmxhdGZhc3RcIjtcclxuaW1wb3J0IEdMT0JBTCBmcm9tIFwiLi4vZ2xvYmFsXCI7XHJcbmltcG9ydCBJY29uUGFjayBmcm9tIFwiQGxpYi9pY29uUGFja1wiO1xyXG5pbXBvcnQgR3JpZDkgZnJvbSBcIkBsaWIvZ3JpZDlcIjtcclxuaW1wb3J0IFdvcmxkIGZyb20gXCIuLi93b3JsZC93b3JsZFwiO1xyXG5pbXBvcnQgR2FtZU1hcCBmcm9tIFwiLi4vd29ybGQvZ2FtZU1hcFwiO1xyXG5pbXBvcnQgVmlzaWJpbGl0eVRpbGUgZnJvbSBcIkBsaWIvdmlzaWJpbGl0eVRpbGVcIjtcclxuXHJcblxyXG5cclxuXHJcblxyXG5sZXQgY2xpcFdpZHRoID0gMTAwO1xyXG5sZXQgY2xpcEhlaWdodCA9IDEwMDtcclxuLy8g6re466as6riw7JqpXHJcbmxldCBwMCA9IG5ldyBQaXhlbCggMHhmZmZmZmYsMSwxLDEgKTtcclxubGV0IHAxID0gbmV3IFBpeGVsKCAweGZmZmZmZiwxLDEsMSApO1xyXG5sZXQgcDIgPSBuZXcgUGl4ZWwoIDB4ZmZmZmZmLDEsMSwxICk7XHJcbmxldCBwMyA9IG5ldyBQaXhlbCggMHhmZmZmZmYsMSwxLDEgKTtcclxubGV0IHA0ID0gbmV3IFBpeGVsKCAweGZmZmZmZiwxLDEsMSApO1xyXG5cclxucDEuc2V0UG9zaXRpb24oIDAsLTEgKTtcclxucDIuc2V0UG9zaXRpb24oIDEsMCApO1xyXG5wMy5zZXRQb3NpdGlvbiggMCwxICk7XHJcbnA0LnNldFBvc2l0aW9uKCAtMSwwICk7XHJcbnAwLmFkZENoaWxkKCBwMSApO1xyXG5wMC5hZGRDaGlsZCggcDIgKTtcclxucDAuYWRkQ2hpbGQoIHAzICk7XHJcbnAwLmFkZENoaWxkKCBwNCApO1xyXG5cclxuLyoqXHJcbiAqIEB0aGlzIEF1dG9NYXBcclxuICpcclxuICogQHBhcmFtIHtFdmVudH0gZVxyXG4gKi9cclxuZnVuY3Rpb24gb25Qb2ludGVyRG93biggZSApIHtcclxuICAgIGlmICggdGhpcy5oaXRUZXN0UG9pbnRQaXhlbCggZS54LGUueSApICkge1xyXG4gICAgICAgIGxldCB7IHg6IGV4LCB5OiBleSB9ID0gdGhpcy5nZXRQYXJlbnQoKS5nbG9iYWxUb0xvY2FsKCBlLngsIGUueSApOy8vc3RhZ2VTcHJpdGUuZ2xvYmFsVG9Mb2NhbChlLngsZS55KTtcclxuXHJcbiAgICAgICAgdGhpcy5fX2RyYWcgPSB7IG94OiB0aGlzLmdldFgoKSwgb3k6IHRoaXMuZ2V0WSgpLCBleDogZXgsIGV5OiBleSB9O1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAdGhpcyBBdXRvTWFwXHJcbiAqXHJcbiAqIEBwYXJhbSB7RXZlbnR9IGVcclxuICovXHJcbmZ1bmN0aW9uIG9uUG9pbnRlclVwKCBlICkge1xyXG4gICAgaWYgKCB0aGlzLl9fZHJhZyApIHtcclxuICAgICAgICBsZXQgeyB4OiBleCwgeTogZXkgfSA9IHRoaXMuZ2V0UGFyZW50KCkuZ2xvYmFsVG9Mb2NhbCggZS54LCBlLnkgKTsvL3N0YWdlU3ByaXRlLmdsb2JhbFRvTG9jYWwoZS54LGUueSk7XHJcbiAgICAgICAgbGV0IHggPSBleCArIHRoaXMuX19kcmFnLm94IC0gdGhpcy5fX2RyYWcuZXg7XHJcbiAgICAgICAgbGV0IHkgPSBleSArIHRoaXMuX19kcmFnLm95IC0gdGhpcy5fX2RyYWcuZXk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0UG9zaXRpb24oIHgseSApO1xyXG4gICAgICAgIHRoaXMuX19kcmFnID0gbnVsbDtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQHRoaXMgQXV0b01hcFxyXG4gKlxyXG4gKiBAcGFyYW0ge0V2ZW50fSBlXHJcbiAqL1xyXG5mdW5jdGlvbiBvblBvaW50ZXJNb3ZlKCBlICkge1xyXG4gICAgaWYgKCB0aGlzLl9fZHJhZyApIHtcclxuICAgICAgICBsZXQgeyB4OiBleCwgeTogZXkgfSA9IHRoaXMuZ2V0UGFyZW50KCkuZ2xvYmFsVG9Mb2NhbCggZS54LCBlLnkgKTsvL3N0YWdlU3ByaXRlLmdsb2JhbFRvTG9jYWwoZS54LGUueSk7XHJcbiAgICAgICAgbGV0IHggPSBleCArIHRoaXMuX19kcmFnLm94IC0gdGhpcy5fX2RyYWcuZXg7XHJcbiAgICAgICAgbGV0IHkgPSBleSArIHRoaXMuX19kcmFnLm95IC0gdGhpcy5fX2RyYWcuZXk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0UG9zaXRpb24oIHgseSApO1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKlxyXG4gKlxyXG4gKiBAY2xhc3MgQXV0b01hcFxyXG4gKiBAZXh0ZW5kcyB7U3ByaXRlfVxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXV0b01hcCBleHRlbmRzIFNwcml0ZSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMubWFwU2NhbGUgPSAyO1xyXG4gICAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgICAgICBsZXQgcCA9IG5ldyBQaXhlbCggMHhmZmZmZmYsMSApO1xyXG5cclxuICAgICAgICBwLnNldFNjYWxlKCB0aGlzLm1hcFNjYWxlICk7XHJcbiAgICAgICAgbGV0IG1jID0gbmV3IE1vdmllQ2xpcCggW1xyXG4gICAgICAgICAgICBbMCwzMCxwLHsgYWxwaGE6ICBbMSwwXSxcclxuICAgICAgICAgICAgICAgICAgICAgIHNjYWxlWDogW3RoaXMubWFwU2NhbGUgKiAyLHRoaXMubWFwU2NhbGVdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgc2NhbGVZOiBbdGhpcy5tYXBTY2FsZSAqIDIsdGhpcy5tYXBTY2FsZV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICB4OiAgICAgIFstdGhpcy5tYXBTY2FsZSwtdGhpcy5tYXBTY2FsZSAvIDJdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgeTogICAgICBbLXRoaXMubWFwU2NhbGUsIC10aGlzLm1hcFNjYWxlIC8gMl1cclxuICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgIFszMCxcImdvdG9cIiwwXVxyXG4gICAgICAgIF0gKTtcclxuXHJcbiAgICAgICAgdGhpcy5tYXBMYXllciA9IG5ldyBTcHJpdGUoKTtcclxuICAgICAgICB0aGlzLm1hcExheWVyLmFkZENoaWxkKCBtYyApO1xyXG4gICAgICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMubWFwTGF5ZXIgKTtcclxuICAgICAgICB0aGlzLnJlbFggPSAwO1xyXG4gICAgICAgIHRoaXMucmVsWSA9IDA7XHJcbiAgICAgICAgdGhpcy54TWluID0gTnVtYmVyLk1BWF9WQUxVRTtcclxuICAgICAgICB0aGlzLnhNYXggPSBOdW1iZXIuTUlOX1ZBTFVFO1xyXG4gICAgICAgIHRoaXMueU1pbiA9IE51bWJlci5NQVhfVkFMVUU7XHJcbiAgICAgICAgdGhpcy55TWF4ID0gTnVtYmVyLk1JTl9WQUxVRTtcclxuICAgICAgICB0aGlzLm1hcExheWVyXHJcbiAgICAgICAgICAgIC5vbiggRXZlbnQuUE9JTlRFUl9ET1dOLG9uUG9pbnRlckRvd24sdGhpcyApXHJcbiAgICAgICAgICAgIC5vbiggRXZlbnQuUE9JTlRFUl9VUCxvblBvaW50ZXJVcCx0aGlzIClcclxuICAgICAgICAgICAgLm9uKCBFdmVudC5QT0lOVEVSX01PVkUsb25Qb2ludGVyTW92ZSx0aGlzICk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgaWYgKCB0aGlzLmJpdG1hcCApIHRoaXMuYml0bWFwLnJlbW92ZUZyb21QYXJlbnQoKTtcclxuICAgICAgICBpZiAoIEdMT0JBTC53b3JsZCAmJiBHTE9CQUwud29ybGQubWFwICkge1xyXG4gICAgICAgICAgICB0aGlzLnJ0dCA9IG5ldyBSZW5kZXJUYXJnZXQoIEdMT0JBTC53b3JsZC5tYXAud2lkdGgsIEdMT0JBTC53b3JsZC5tYXAuaGVpZ2h0ICk7XHJcbiAgICAgICAgICAgIHRoaXMuYml0bWFwID0gbmV3IEJpdG1hcCggdGhpcy5ydHQgKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRDaGlsZEF0KCB0aGlzLmJpdG1hcCwgMCApO1xyXG4gICAgICAgICAgICB0aGlzLmJpdG1hcC5zZXRTY2FsZSggdGhpcy5tYXBTY2FsZSApO1xyXG4gICAgICAgICAgICB0aGlzLmJpdG1hcC5zZXRCbGVuZE1vZGUoIFNwcml0ZS5CbGVuZE1vZGVzLlNDUkVFTiApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIHNldFBsYXllclBvc2l0aW9uKCB4LCB5ICkge1xyXG4gICAgICAgIHRoaXMuYml0bWFwLnNldFBvc2l0aW9uKCBNYXRoLmZsb29yKCAteCAqIHRoaXMubWFwU2NhbGUgKyAxICksTWF0aC5mbG9vciggLXkgKiB0aGlzLm1hcFNjYWxlICsgMSApICk7XHJcbiAgICAgICAgW3RoaXMucmVsWCwgdGhpcy5yZWxZXSA9IFt4LCB5XTtcclxuICAgICAgICB0aGlzLnNldENsaXAoIC1jbGlwV2lkdGggLyAyLCAtY2xpcEhlaWdodCAvIDIsIGNsaXBXaWR0aCwgY2xpcEhlaWdodCApO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdUaWxlKCB4LHksZm9yY2VSZXZlYWwgKSB7XHJcbiAgICAgICAgbGV0IHByID0gR0xPQkFMLndvcmxkLmdldFByb3BlcnR5KCB4LHkgKTtcclxuXHJcbiAgICAgICAgcDEuc2V0Q29sb3IoIDB4ZmYwMDAwLDAgKTtcclxuICAgICAgICBwMi5zZXRDb2xvciggMHhmZjAwMDAsMCApO1xyXG4gICAgICAgIHAzLnNldENvbG9yKCAweGZmMDAwMCwwICk7XHJcbiAgICAgICAgcDQuc2V0Q29sb3IoIDB4ZmYwMDAwLDAgKTtcclxuICAgICAgICBpZiAoIGZvcmNlUmV2ZWFsIHx8IHByLnJldmVhbGVkICkge1xyXG4gICAgICAgICAgICBpZiAoICggcHIud2FsbCAmIEdhbWVNYXAuQkxPQ0tfUEFTUyApICE9IDAgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIGZvcmNlUmV2ZWFsICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggcHIuY2hhciA9PSBcIkVcIiApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcDAuc2V0Q29sb3IoIDB4YTAwMDAwLDEgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwMC5zZXRDb2xvciggcHIubWFwQ29sb3IgIT0gbnVsbCA/IHByLm1hcENvbG9yIDogMHg2MDYwNjAsMSApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBwci5jaGFyID09IFwiRVwiICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwMC5zZXRDb2xvciggMHhmZjQwMDAsMSApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHAwLnNldENvbG9yKCBwci5tYXBDb2xvciAhPSBudWxsID8gcHIubWFwQ29sb3IgOiAweDgwODA4MCwxICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcDAuc2V0Q29sb3IoIHByLm1hcENvbG9yICE9IG51bGwgPyBwci5tYXBDb2xvciA6IDB4MjAyMDIwLDEgKTtcclxuICAgICAgICAgICAgICAgIGlmICggIWZvcmNlUmV2ZWFsICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggIUdMT0JBTC53b3JsZC5nZXRQcm9wZXJ0eSggeCx5IC0gMSApLnJldmVhbGVkICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwMS5zZXRDb2xvciggMHhmZjQwMDAsMSApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoICFHTE9CQUwud29ybGQuZ2V0UHJvcGVydHkoIHggKyAxLHkgKS5yZXZlYWxlZCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcDIuc2V0Q29sb3IoIDB4ZmY0MDAwLDEgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhR0xPQkFMLndvcmxkLmdldFByb3BlcnR5KCB4LHkgKyAxICkucmV2ZWFsZWQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHAzLnNldENvbG9yKCAweGZmNDAwMCwxICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggIUdMT0JBTC53b3JsZC5nZXRQcm9wZXJ0eSggeCAtIDEseSApLnJldmVhbGVkICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwNC5zZXRDb2xvciggMHhmZjQwMDAsMSApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwMC5zZXRQb3NpdGlvbiggeCAtIDEseSAtIDEgKTtcclxuICAgICAgICAgICAgdGhpcy5ydHQuZHJhdyggcDAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy54TWluID0gTWF0aC5taW4oIHRoaXMueE1pbix4ICk7XHJcbiAgICAgICAgdGhpcy54TWF4ID0gTWF0aC5tYXgoIHRoaXMueE1heCx4ICk7XHJcbiAgICAgICAgdGhpcy55TWluID0gTWF0aC5taW4oIHRoaXMueU1pbix5ICk7XHJcbiAgICAgICAgdGhpcy55TWF4ID0gTWF0aC5tYXgoIHRoaXMueU1heCx5ICk7XHJcbiAgICAgICAgbGV0IG13ID0gdGhpcy54TWF4IC0gdGhpcy54TWluO1xyXG4gICAgICAgIGxldCBtaCA9IHRoaXMueU1heCAtIHRoaXMueU1pbjtcclxuXHJcbiAgICAgICAgdGhpcy5tYXBTY2FsZSA9IFV0aWxzLmNsYW1wKCA1MCAvIE1hdGgubWF4KCBtdyxtaCApLDEsMiApO1xyXG4gICAgICAgIHRoaXMuYml0bWFwLnNldFNjYWxlKCB0aGlzLm1hcFNjYWxlICk7XHJcbiAgICAgICAgdGhpcy5iaXRtYXAuc2V0UG9zaXRpb24oIE1hdGguZmxvb3IoIC10aGlzLnJlbFggKiB0aGlzLm1hcFNjYWxlICsgMSApLE1hdGguZmxvb3IoIC10aGlzLnJlbFkgKiB0aGlzLm1hcFNjYWxlICsgMSApICk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0FsbCggZm9yY2VSZXZlYWwgKSB7XHJcbiAgICAgICAgdGhpcy5ydHQuY2xlYXIoIDB4MDAwMDAwLDEgKTtcclxuICAgICAgICBmb3IgKCBsZXQgeSA9IDA7IHkgPCBHTE9CQUwud29ybGQubWFwLmhlaWdodDsgeSsrICkge1xyXG4gICAgICAgICAgICBmb3IgKCBsZXQgeCA9IDA7IHggPCBHTE9CQUwud29ybGQubWFwLndpZHRoOyB4KysgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdUaWxlKCB4LHksZm9yY2VSZXZlYWwgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYml0bWFwO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgaGl0VGVzdFBvaW50UGl4ZWwoIHgsIHkgKSB7XHJcbiAgICAgICAgaWYgKCAhdGhpcy5oaXRUZXN0UG9pbnQoIHgsIHkgKSApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCB7IHg6IGV4LCB5OiBleSB9ID0gdGhpcy5iaXRtYXAuZ2xvYmFsVG9Mb2NhbCggeCwgeSApO1xyXG4gICAgICAgICAgICBsZXQgdHggPSBNYXRoLmZsb29yKCBleCApO1xyXG4gICAgICAgICAgICBsZXQgdHkgPSBNYXRoLmZsb29yKCBleSApO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coIHgseSxleCxleSx0aGlzLnJlbFgsdGhpcy5yZWxZICk7XHJcbiAgICAgICAgICAgIGlmICggdHggPj0gdGhpcy5yZWxYIC0gNSAmJiB0eCA8PSB0aGlzLnJlbFggKyA1ICYmIHR5ID49IHRoaXMucmVsWSAtIDUgJiYgdHkgPD0gdGhpcy5yZWxZICsgNSApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCBleCA8IHRoaXMucmVsWCAtIGNsaXBXaWR0aCAvIDIgfHwgZXggPiB0aGlzLnJlbFggKyBjbGlwV2lkdGggLyAyIHx8XHJcblx0XHRcdFx0ZXkgPCB0aGlzLnJlbFkgLSBjbGlwSGVpZ2h0IC8gMiB8fCBleSA+IHRoaXMucmVsWSArIGNsaXBIZWlnaHQgLyAyICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCBHTE9CQUwud29ybGQuZ2V0UHJvcGVydHkoIHR4LCB0eSApLnJldmVhbGVkICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuIiwiaW1wb3J0IHsgVHdlZW4sIHN0YWdlLFNvdW5kLEtleUNvZGUsIE1vdmllQ2xpcCwgU2hhcGUsIFV0aWxzLCBUZXh0dXJlQmFzZSwgVGV4dHVyZSwgVGltZXIsTWVzaCwgVGV4dEZpZWxkLCBlYXNpbmcsIEV2ZW50LCBCaXRtYXAsIFNwcml0ZSwgYXBwbGljYXRpb24gfSBmcm9tIFwiQGVuZ2luZS9mbGF0ZmFzdFwiO1xyXG5pbXBvcnQgR0xPQkFMIGZyb20gXCIuLi9nbG9iYWxcIjtcclxuaW1wb3J0IENPTkZJRyBmcm9tIFwiLi4vY29uZmlnXCI7XHJcbmltcG9ydCBJY29uUGFjayBmcm9tIFwiQGxpYi9pY29uUGFja1wiO1xyXG5pbXBvcnQgR3JpZDkgZnJvbSBcIkBsaWIvZ3JpZDlcIjtcclxuaW1wb3J0IFdvcmxkIGZyb20gXCIuLi93b3JsZC93b3JsZFwiO1xyXG5pbXBvcnQgR2FtZU1hcCBmcm9tIFwiLi4vd29ybGQvZ2FtZU1hcFwiO1xyXG5pbXBvcnQgVmlzaWJpbGl0eVRpbGUgZnJvbSBcIkBsaWIvdmlzaWJpbGl0eVRpbGVcIjtcclxuaW1wb3J0IE1vbnN0ZXIgZnJvbSBcIi4uL2VudGl0eS9tb25zdGVyXCI7XHJcbmltcG9ydCBQZXQgZnJvbSBcIi4uL2VudGl0eS9wZXRcIjtcclxuaW1wb3J0IE5wYyBmcm9tIFwiLi4vZW50aXR5L25wY1wiO1xyXG5cclxuLypcclxuXHJcbuqyjOyehOydmCDsobDsnpHqs4Tsl5Ag7ZW064u57ZWY64qUIOu2gOu2hFxyXG7tlIzroIjsnbTslrQg7LqQ66at7YSw7JeQ6rKMIGludGVyYWN064KYIG1vdmVUbyDrk7HsnYQg67aI65+s7KO86rKMIOuQnOuLpC5cclxuXHJcbuyXrOq4sCDsvZTrk5wg65WMIOuQmOuptCDrjIDsiJjsiKAg7KCV66asIO2VtOyVvO2VoCDqsoMg6rCZ64ukLlxyXG7sspjsnYzsl5Qg7Luk7ISc7JiA64qU642wIOuqqOuToCDsobDsnpHsnbQg7Jes6riw7JeQIOydmOyhtO2VmOqzoCDsnojsnYwuXHJcbl9jb250cm9sbGVyIOqwmeydgOqyjCDrkJjslrTslbwg7ZWY7KeAIOyViuydhOq5jCDsi7bsnYAg7IOd6rCB7J20IOuTrFxyXG5cclxuKi9cclxuXHJcblxyXG5cclxuY29uc3QgdHlwZVRvQ29sID0ge1xyXG4gICAgW1widGlsZVwiXTogICAgIDEsXHJcbiAgICBbXCJkb29yXCJdOiAgICAgMixcclxuICAgIFtcImludGVyYWN0XCJdOiAzLFxyXG4gICAgW1widGFsa1wiXTogICAgIDQsXHJcbiAgICBbXCJhdHRhY2tcIl06ICAgNSxcclxuICAgIFtcImFpbVwiXTogICAgICA2LFxyXG4gICAgW1wicGxheWVyXCJdOiAgIDcsXHJcbiAgICBbXCJ0YXJnZXRcIl06ICAgOCxcclxufTtcclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyDrp4jsmrDsiqQg7J2067Kk7Yq4IOyymOumrFxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbi8qKlxyXG4gKiBAdGhpcyBDdXJzb3JcclxuICpcclxuICogQHBhcmFtIHsqfSBlXHJcbiAqL1xyXG5mdW5jdGlvbiBvbk1vdXNlV2hlZWwoIGUgKSB7XHJcbiAgICAvL2xvZyhlLndoZWVsKTtcclxuICAgIGlmICggdGhpcy5pc1Zpc2libGVEZWVwbHkoKSApIHtcclxuICAgICAgICBHTE9CQUwud29ybGQuc2lnaHRNYW5hZ2VyLnNldFpvb20oIEdMT0JBTC53b3JsZC5zaWdodE1hbmFnZXIuZ2V0Wm9vbSgpIC0gZS53aGVlbCAvIDEwMDAgKTtcclxuICAgIH1cclxuICAgIC8vdGhpcy5zZXRUeXBlKFwidGlsZVwiKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEB0aGlzIEN1cnNvclxyXG4gKlxyXG4gKiBAcGFyYW0ge251bWJlcn0gZXhcclxuICogQHBhcmFtIHtudW1iZXJ9IGV5XHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaW1tZWRpYXRseVxyXG4gKi9cclxuZnVuY3Rpb24gb25Qb2ludGVySG9sZCggZXgsZXksaW1tZWRpYXRseSApIHtcclxuICAgIHRoaXMuaG9sZFRpbWVyID0gbnVsbDtcclxuXHJcbiAgICBpZiAoIHRoaXMuX19kcmFnICkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCBcIu2ZgOuTnFwiICk7XHJcbiAgICAgICAgdGhpcy5fX2RyYWcuZHJhZ0N1cnNvciA9IHRydWU7XHJcbiAgICAgICAgY29uc3QgeyB4OiB0eCwgeTogdHkgfSA9IEdMT0JBTC53b3JsZC5zdGFnZVRvVGlsZSggZXgsZXkgKTtcclxuICAgICAgICBsZXQgeyB4OiBleDIsIHk6IGV5MiB9ID0gR0xPQkFMLndvcmxkLnRpbGVDZW50ZXJUb1N0YWdlKCB0eCx0eSApO1xyXG4gICAgICAgIGNvbnN0IHN4ID0gMSAvIEdMT0JBTC53b3JsZC56b29tO1xyXG4gICAgICAgIGNvbnN0IHN5ID0gMSAvIEdMT0JBTC53b3JsZC56b29tO1xyXG5cclxuICAgICAgICBbZXgyLGV5Ml0gPSBbZXgyICogc3gsZXkyICogc3ldO1xyXG4gICAgICAgIHRoaXMuX19kcmFnLmV4ID0gKCBhcHBsaWNhdGlvbi5sb2dpY2FsVmlld3BvcnQud2lkdGggLyAyIC0gZXgyICsgZXggKTtcclxuICAgICAgICB0aGlzLl9fZHJhZy5leSA9ICggYXBwbGljYXRpb24ubG9naWNhbFZpZXdwb3J0LmhlaWdodCAvIDIgLSBleTIgKyBleSApO1xyXG5cclxuICAgICAgICBpZiAoIHRoaXMudHdDdXJzb3IgKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHdDdXJzb3Iuc3RvcCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCBpbW1lZGlhdGx5ICkge1xyXG4gICAgICAgICAgICB0aGlzLnggPSBleDI7XHJcbiAgICAgICAgICAgIHRoaXMueSA9IGV5MjtcclxuICAgICAgICAgICAgdGhpcy50d0N1cnNvciA9IG51bGw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50d0N1cnNvciA9IG5ldyBUd2VlbiggdGhpcywgMzAwLCB7IHg6IGV4MiwgeTogZXkyIH0sIHsgZWFzZTogZWFzaW5nLm91dEN1YmljIH0gKVxyXG4gICAgICAgICAgICAgICAgLm9uQ29tcGxldGUoICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnR3Q3Vyc29yID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX19kcmFnLmNsaWNrID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fX2RyYWcuaG9sZGVkID0gdHJ1ZTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG4vKipcclxuICogQHRoaXMgQ3Vyc29yXHJcbiAqIEBwYXJhbSB7Kn0gZSBcclxuICovXHJcbmZ1bmN0aW9uIG9uUG9pbnRlckRvd24oIGUgKSB7XHJcbiAgICBpZiAoICF0aGlzLmlzVmlzaWJsZURlZXBseSgpICkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZyggXCLsu6TshJxcIiArIHRoaXMuZ2V0UGF0aCggdHJ1ZSApICk7XHJcbiAgICB0aGlzLmhpZGVBdXRvQWN0aW9uKCk7XHJcbiAgICBjb25zdCB7IHg6IGV4LCB5OiBleSB9ID0gR0xPQkFMLnN0YWdlLmdsb2JhbFRvTG9jYWwoIGUueCxlLnkgKTtcclxuXHJcbiAgICB0aGlzLl9fZHJhZyA9IHsgb3g6IEdMT0JBTC53b3JsZC52aWV3WCwgb3k6IEdMT0JBTC53b3JsZC52aWV3WSwgZXg6IGV4LCBleTogZXksIGNsaWNrOiB0cnVlLCBjeDogdGhpcy54LCBjeTogdGhpcy55IH07XHJcblxyXG4gICAgaWYgKCAhdGhpcy5sb2NrZWQgKSB7XHJcbiAgICAgICAgaWYgKCBlLnR5cGUgPT0gRXZlbnQuTU9VU0VfRE9XTiApIHtcclxuICAgICAgICAgICAgdGhpcy5fX2RyYWcuZHJhZ0N1cnNvciA9IHRydWU7XHJcbiAgICAgICAgICAgIG9uUG9pbnRlckhvbGQuY2FsbCggdGhpcyxleCwgZXksdHJ1ZSApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICggdGhpcy5tZXNoLmhpdFRlc3RQb2ludCggZS54LCBlLnkgKSApIHtcclxuICAgICAgICAgICAgICAgIC8vbG9nKFwi7Luk7IScIOuIjOumvFwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX19kcmFnLmRyYWdDdXJzb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmhvbGRUaW1lciA9IG5ldyBUaW1lciggNTAwLCAxICkub24oIEV2ZW50LlRJTUVSLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBvblBvaW50ZXJIb2xkLmNhbGwoIHRoaXMsIGV4LCBleSApO1xyXG4gICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgIHRoaXMuaG9sZFRpbWVyLnN0YXJ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQHRoaXMgQ3Vyc29yXHJcbiAqIEBwYXJhbSB7Kn0gZSBcclxuICovXHJcbmZ1bmN0aW9uIG9uUG9pbnRlck1vdmUoIGUgKSB7XHJcbiAgICBpZiAoIHRoaXMuX19kcmFnICkge1xyXG4gICAgICAgIGlmICggdGhpcy5haW1MaW5lICkge1xyXG4gICAgICAgICAgICB0aGlzLmFpbUxpbmUucmVtb3ZlRnJvbVBhcmVudCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgeyB4OiBleCwgeTogZXkgfSA9IEdMT0JBTC5zdGFnZS5nbG9iYWxUb0xvY2FsKCBlLngsZS55ICk7XHJcbiAgICAgICAgLy8gY29uc3QgeyB4OiBleCwgeTogZXkgfSA9IHsgeDogZS54LHk6IGUueSB9Oy8vIEdMT0JBTC5zdGFnZS5nbG9iYWxUb0xvY2FsKCBlLngsZS55ICk7XHJcbiAgICAgICAgY29uc3Qgc3ggPSAxIC8gR0xPQkFMLndvcmxkLnpvb207XHJcbiAgICAgICAgY29uc3Qgc3kgPSAxIC8gR0xPQkFMLndvcmxkLnpvb207XHJcbiAgICAgICAgY29uc3QgZHggPSAoIHRoaXMuX19kcmFnLmV4IC0gZXggKSAvIHN4O1xyXG4gICAgICAgIGNvbnN0IGR5ID0gKCB0aGlzLl9fZHJhZy5leSAtIGV5ICkgLyBzeTtcclxuICAgICAgICBjb25zdCB4ID0gdGhpcy5fX2RyYWcub3ggKyB0aGlzLm1vdmVEaXIgKiBkeDtcclxuICAgICAgICBjb25zdCB5ID0gdGhpcy5fX2RyYWcub3kgKyB0aGlzLm1vdmVEaXIgKiBkeTtcclxuICAgICAgICBjb25zdCB7IHg6IHgxLCB5OiB5MSB9ID0gR0xPQkFMLndvcmxkLnN0YWdlVG9Xb3JsZCggdGhpcy5fX2RyYWcuZXgsIHRoaXMuX19kcmFnLmV5ICk7XHJcbiAgICAgICAgY29uc3QgcG9zID0gdGhpcy5nZXRQb3NpdGlvbigpO1xyXG4gICAgICAgIGNvbnN0IHsgeDogeDIsIHk6IHkyIH0gPSBHTE9CQUwud29ybGQuc3RhZ2VUb1dvcmxkKCBwb3MueCxwb3MueSApO1xyXG5cclxuICAgICAgICBpZiAoICF0aGlzLmxvY2tlZCApIHtcclxuICAgICAgICAgICAgdGhpcy5zdG9wU25hcCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCB0aGlzLl9fZHJhZy5kcmFnQ3Vyc29yICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLnR3Q3Vyc29yID09IG51bGwgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQb3NpdGlvbiggdGhpcy5fX2RyYWcuY3ggLSBkeCAqIHRoaXMubWVzaC5nZXRTY2FsZVgoKSx0aGlzLl9fZHJhZy5jeSAtIGR5ICogdGhpcy5tZXNoLmdldFNjYWxlWSgpICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBHTE9CQUwud29ybGQuc2lnaHRNYW5hZ2VyLm1vdmVWaWV3VG8oIHgseSApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIE1hdGguYWJzKCBkeCApID4gQ09ORklHLldvcmxkLnRpbGVXaWR0aCAvIDIgfHxcclxuICAgICAgICAgICAgICAgIE1hdGguYWJzKCBkeSApID4gQ09ORklHLldvcmxkLnRpbGVIZWlnaHQgLyAyICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fX2RyYWcuY2xpY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIEdMT0JBTC5pbnRlcmZhY2UuaGlkZUluZm8oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMuaG9sZFRpbWVyICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaG9sZFRpbWVyLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhvbGRUaW1lciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ2dpbmcoIHgxLHkxLHgyLHkyICk7XHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coIFwi6529XCIgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAdGhpcyBDdXJzb3JcclxuICogQHBhcmFtIHsqfSBlIFxyXG4gKi9cclxuZnVuY3Rpb24gb25Qb2ludGVyVXAoIGUgKSB7XHJcbiAgICBjb25zb2xlLmxvZyggXCLsu6TshJxVUCBcIiArIHRoaXMuZ2V0UGF0aCggdHJ1ZSApICk7XHJcblxyXG4gICAgaWYgKCB0aGlzLmhvbGRUaW1lciApIHtcclxuICAgICAgICB0aGlzLmhvbGRUaW1lci5zdG9wKCk7XHJcbiAgICAgICAgdGhpcy5ob2xkVGltZXIgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggdGhpcy5fX2RyYWcgKSB7XHJcbiAgICAgICAgaWYgKCB0aGlzLmFpbUxpbmUgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWltTGluZS5yZW1vdmVGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB7IHg6IGV4LCB5OiBleSB9ID0gR0xPQkFMLnN0YWdlLmdsb2JhbFRvTG9jYWwoIGUueCxlLnkgKTtcclxuICAgICAgICBjb25zdCBzeCA9IDEgLyBHTE9CQUwud29ybGQuem9vbTtcclxuICAgICAgICBjb25zdCBzeSA9IDEgLyBHTE9CQUwud29ybGQuem9vbTtcclxuICAgICAgICBjb25zdCBkeCA9ICggdGhpcy5fX2RyYWcuZXggLSBleCApIC8gc3g7XHJcbiAgICAgICAgY29uc3QgZHkgPSAoIHRoaXMuX19kcmFnLmV5IC0gZXkgKSAvIHN5O1xyXG4gICAgICAgIGNvbnN0IHggPSB0aGlzLl9fZHJhZy5veCArIHRoaXMubW92ZURpciAqIGR4O1xyXG4gICAgICAgIGNvbnN0IHkgPSB0aGlzLl9fZHJhZy5veSArIHRoaXMubW92ZURpciAqIGR5O1xyXG4gICAgICAgIGNvbnN0IHsgeDogeDEsIHk6IHkxIH0gPSBHTE9CQUwud29ybGQuc3RhZ2VUb1dvcmxkKCB0aGlzLl9fZHJhZy5leCwgdGhpcy5fX2RyYWcuZXkgKTtcclxuICAgICAgICBjb25zdCBwb3MgPSB0aGlzLmdldFBvc2l0aW9uKCk7XHJcbiAgICAgICAgY29uc3QgeyB4OiB4MiwgeTogeTIgfSA9IEdMT0JBTC53b3JsZC5zdGFnZVRvV29ybGQoIHBvcy54LHBvcy55ICk7XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5sb2NrZWQgKSB7XHJcbiAgICAgICAgICAgIGlmICggdGhpcy5fX2RyYWcuY2xpY2sgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHg6IHJjeCwgeTogcmN5IH0gPSBHTE9CQUwud29ybGQuc3RhZ2VUb1dvcmxkKCBleCxleSApO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucmVzZXJ2ZWRDbGljay5wdXNoKCBbcmN4LCByY3ksIFRpbWVyLm5vdygpXSApO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coIFwi7ISg7J6F66ClIOyggOyepVwiLHRoaXMucmVzZXJ2ZWRDbGljay5sZW5ndGggKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICggdGhpcy5fX2RyYWcuZHJhZ0N1cnNvciApIHtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIEdMT0JBTC53b3JsZC5zaWdodE1hbmFnZXIubW92ZVZpZXdUbyggeCx5ICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICggIXRoaXMuX19kcmFnLmhvbGRlZCApIHRoaXMuc25hcFRvV29ybGQoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICggdGhpcy5fX2RyYWcuY2xpY2sgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9fZHJhZyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHg6IHR4LCB5OiB0eSB9ID0gR0xPQkFMLndvcmxkLnN0YWdlVG9Xb3JsZCggZXgsIGV5ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGljayggdHgsdHkgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX19kcmFnID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhZyggeDEseTEseDIseTIgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vIO2EsOy5mCDtlbjrk6Trn6xcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4vKipcclxuICogQHRoaXMgQ3Vyc29yXHJcbiAqIEBwYXJhbSB7Kn0gZSBcclxuICovXHJcbmZ1bmN0aW9uIG9uVG91Y2hlc0JlZ2luKCBlICkge1xyXG4gICAgY29uc3QgdGUgPSBlLnRvdWNoZXM7XHJcblxyXG4gICAgaWYgKCB0ZS5sZW5ndGggPT0gMiAmJiB0aGlzLmlzVmlzaWJsZURlZXBseSgpICkge1xyXG4gICAgICAgIGlmICggdGhpcy5haW1MaW5lICkge1xyXG4gICAgICAgICAgICB0aGlzLmFpbUxpbmUucmVtb3ZlRnJvbVBhcmVudCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fX2RyYWcgPSBudWxsO1xyXG4gICAgICAgIGNvbnN0IFt4MSx5MSx4Mix5Ml0gPSBbdGVbMF0ueCx0ZVswXS55LHRlWzFdLngsdGVbMV0ueV07XHJcblxyXG4gICAgICAgIHRoaXMuX190b3VjaGVzID0geyBkaXN0OiBNYXRoLnNxcnQoICggeDIgLSB4MSApICogKCB4MiAtIHgxICkgKyAoIHkyIC0geTEgKSAqICggeTIgLSB5MSApICksIHpvb206IEdMT0JBTC53b3JsZC5zaWdodE1hbmFnZXIuZ2V0Wm9vbSgpIH07XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAvKlx0fSBlbHNlIGlmICh0ZS5sZW5ndGg9PTEpIHtcclxuXHRcdGUueCwgZS55ID0gZS50b3VjaC54LCBlLnRvdWNoLnk7XHJcblx0XHRvbk1vdXNlRG93bihzZWxmLGUpKi9cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEB0aGlzIEN1cnNvclxyXG4gKiBAcGFyYW0geyp9IGUgXHJcbiAqL1xyXG5mdW5jdGlvbiBvblRvdWNoZXNNb3ZlKCBlICkge1xyXG4gICAgY29uc3QgdGUgPSBlLnRvdWNoZXM7XHJcblxyXG4gICAgaWYgKCB0aGlzLl9fdG91Y2hlcyAmJiB0ZS5sZW5ndGggPT0gMiApIHtcclxuICAgICAgICBjb25zdCBbeDEseTEseDIseTJdID0gW3RlWzBdLngsdGVbMF0ueSx0ZVsxXS54LHRlWzFdLnldO1xyXG4gICAgICAgIGNvbnN0IGRpc3QgPSBNYXRoLnNxcnQoICggeDIgLSB4MSApICogKCB4MiAtIHgxICkgKyAoIHkyIC0geTEgKSAqICggeTIgLSB5MSApICk7XHJcbiAgICAgICAgY29uc3QgZGVsdGEgPSB0aGlzLl9fdG91Y2hlcy5kaXN0IC8gKCBkaXN0ICsgMC4wMDAwMSApO1xyXG5cclxuICAgICAgICAvL2xvZyhcIu2VgOy5mOykjOuNuO2DgFwiLGRlbHRhKTtcclxuICAgICAgICBHTE9CQUwud29ybGQuc2lnaHRNYW5hZ2VyLnNldFpvb20oIHRoaXMuX190b3VjaGVzLnpvb20gKiAgZGVsdGEgKTtcclxuICAgICAgICB0aGlzLnNldFR5cGUoIFwidGlsZVwiICk7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAvKlx0fSBlbHNlIGlmICh0ZS5sZW5ndGg9PTEpIHtcclxuXHRcdGUueCwgZS55ID0gZS50b3VjaC54LCBlLnRvdWNoLnk7XHJcblx0XHRvbk1vdXNlTW92ZShzZWxmLGUpKi9cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEB0aGlzIEN1cnNvclxyXG4gKiBAcGFyYW0geyp9IGUgXHJcbiAqL1xyXG5mdW5jdGlvbiBvblRvdWNoZXNFbmQoIGUgKSB7XHJcbiAgICBjb25zdCB0ZSA9IGUuYWxsVG91Y2hlcztcclxuXHJcbiAgICBpZiAoIHRoaXMuX190b3VjaGVzICkge1xyXG4gICAgICAgIHRoaXMuX190b3VjaGVzID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNuYXBUb1BsYXllcigpO1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgLypcdH0gZWxzZSBpZiAodGUubGVuZ3RoPT0xKSB7XHJcblx0XHRlLngsIGUueSA9IGUudG91Y2gueCwgZS50b3VjaC55O1xyXG5cdFx0b25Nb3VzZVVwKHNlbGYsZSkqL1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEB0aGlzIEN1cnNvclxyXG4gKiBAcGFyYW0geyp9IGUgXHJcbiAqL1xyXG5mdW5jdGlvbiBvbktleURvd24oIGUgKSB7XHJcbiAgICBpZiAoIHRoaXMubG9ja2VkICkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZyggZS5rZXlDb2RlICk7XHJcbiAgICBjb25zdCBbcngscnldID0gW0dMT0JBTC5wbGF5ZXIudGlsZVgsIEdMT0JBTC5wbGF5ZXIudGlsZVldO1xyXG5cclxuICAgIHRoaXMuX19kcmFnID0gbnVsbDtcclxuICAgIGxldCBheCxheTtcclxuXHJcbiAgICBpZiAoIGUua2V5Q29kZSA9PSBLZXlDb2RlLkxFRlQgKSB7XHJcbiAgICAgICAgW2F4LCBheV0gPSBbLTEsIDBdO1xyXG4gICAgfSBlbHNlIGlmICggZS5rZXlDb2RlID09IEtleUNvZGUuUklHSFQgKSB7XHJcbiAgICAgICAgW2F4LCBheV0gPSBbMSwgMF07XHJcbiAgICB9IGVsc2UgaWYgKCBlLmtleUNvZGUgPT0gS2V5Q29kZS5VUCApIHtcclxuICAgICAgICBbYXgsIGF5XSA9IFswLCAtMV07XHJcbiAgICB9IGVsc2UgaWYgKCBlLmtleUNvZGUgPT0gS2V5Q29kZS5ET1dOICkge1xyXG4gICAgICAgIFtheCwgYXldID0gWzAsIDFdO1xyXG4gICAgfSBlbHNlIGlmICggZS5rZXlDb2RlID09IEtleUNvZGUuUyApIHtcclxuICAgICAgICBHTE9CQUwud29ybGQuZW50aXR5TWFuYWdlci5zYWZlRXhlY3V0ZSggKCkgPT4ge1xyXG4gICAgICAgICAgICBHTE9CQUwuc2F2ZUxvYWQuc2F2ZSgpO1xyXG4gICAgICAgIH0gKTtcclxuICAgIH0gZWxzZSBpZiAoIGUua2V5Q29kZSA9PSBLZXlDb2RlLkwgKSB7XHJcbiAgICAgICAgR0xPQkFMLndvcmxkLmVudGl0eU1hbmFnZXIuc2FmZUV4ZWN1dGUoICgpID0+IHtcclxuICAgICAgICAgICAgR0xPQkFMLnNhdmVMb2FkLmxvYWQoKTtcclxuICAgICAgICB9ICk7XHJcbiAgICB9IGVsc2UgaWYgKCBlLmtleUNvZGUgPT0gS2V5Q29kZS5QICkge1xyXG4gICAgICAgIC8vIEdMT0JBTC5wbGF5ZXIucGxheU11c2ljKCBgXHJcbiAgICAgICAgLy8gTU1MQHQxMDZ2MTVMOHIxNkcjLkFCQj5DMTZDLiZDPEUuRiMuJkYjQS5CLj5EPEIuLFxyXG4gICAgICAgIC8vIHYwcjE2TDhELkRFRyMuRy4mR0MuQy4mQ0YjLkYjLnJHLkcuJkdFNEU0RCM0RiM0LFxyXG4gICAgICAgIC8vIHYwcjE2PEw4RS5GI0cjPEEyPkQ0LjxGI0cyPkMyPEYjNC5BQjJyMTZFLkVGI0cjLjtcclxuICAgICAgICAvLyBgICk7XHJcbiAgICAgICAgR0xPQkFMLnBsYXllci5wbGF5TXVzaWMoIGBcclxuICAgICAgICBNTUxAdDEwNkw4cjE2RyMuQUJCPkMxNkMuJkM8RS5GIy4mRiNBLkIuPkQ8Qi5CQjE2QjE2QjE2QkFBRzE2R0YjLnIuRCMxNkFHR0ExNkIuRyNBQkI+QzE2Qy4mQ3IxNkUuRENDPEIxNkIuJkJGI0UxNkVCMTZCMTZCMTZCQTE2QS5HR0YjQUcxNkcxNkUyPkYjLkUuPEI+Ry5GIy4mRiNBLkcuPEExNj5lMTZGLkUuPEE+Ri5FLjxBPkcuRi4mRjxHMzI+QyMzMkUzMkE0LiZBMzJyPEZGRjE2Ri48QUItPkNDPEItMTY+Ri4mRnJCLS5CLTE2RDE2RTE2RkZGRjE2Ri5HRURERTE2Qy4mQ3JHLkEuRkRERTE2Ri5ERUZEQTE2QS4mQXJGLkExNkYxNkcxNkFBQUExNkEuQi1HRjE2Ry4mR3I0QTQ+RTRGPEZGRjE2Ri48QUItPkNDPEItMTY+Ri4mRj5DPEEuQi0xNkQxNkUxNkZGRkYxNkYuRUZHMTZBMiZBMTZyQUItRiNvMUI+QjxCPkI8Qi0+Qi08Qi0+Qi08QT5BPEE+QUQ+RDxEPkQ8RyM+RyM8RyM+RyM8QT5BPEE+QTxEND5EPEQ0QT5EPERHLj5EMTZHNDxDRz5DPENGLj5DMTZGPEY8Qi0+RkItPEItQi5CMTZyNEIuPkJCLkU+RTxGIz5GIzxHIz5HIzxFNG80Qj5DMTZDLiZDcjxGI0dBQUIxNkIuJkJyNHIxNkIxNkIxNkIxNkJBQUcxNkdGIy5yLkQjMTZBR0dBMTZCLkcjQUJCPkMxNkMuJkNyMTZFLkRDQzxCMTZCLiZCcjRyMTZCMTZCMTZCMTZCQTE2QS5HR0YjQUcxNkcxNm8yRT5FPEU+RTxEPkQ8RD5EPEM+QzxDPkM8PEI+QjxCPkJEPkQ8RD5EPEM+QzxDPkM8Qi0+Qi08Qi0+Qi08QTJMMzJEQTEucjQucjE2LixcclxuICAgICAgICB2MTRyMTZMOEQuREVHIy5HLiZHQy5DLiZDRiMuRiMuckcuRy4mR0U0RTREIzRGIzRyMTZFLkVEI0Q0RDQ8PEEuPkFFMTY8QUQuPkQuPERHLj5HRDE2PEdDRz5DPENGIzQ+RiM8RiM8Qi4+Qi48Qj5FPkU8RT5FPEQ+RDxEPkQ8Qz5DPEM+Qzw8Qj5CPEI+QkQ+RDxEPkQ8Qz5DPEM+Qzw8Qi0+Qi08Qi0+Qi08QTI+RDQ+RDQ8REE+RDQ8RzQ+Ry5EMTY8Rz5ERzxHQzQ+Qy48RzE2QzQ+QzQ8RjQ+Ri5DMTY8Rj5DRjQ8PEItND5CLTQ8Qi0+RkItPEItQjQ+QjQ8QkI+QjRDND5DLjxHMTZDND5DNDxDIzQ+QyMuPEExNkMjQT5DIzxDI0Q0PkQ0PERBPkQ0PEc0PkcuLkQxNjxHPkRHPEdDND5DLjxHMTZDND5DNDxFLTQ+RS0uPEUtMTZERD5EPEQ+PnYxNUEuRy5HckdBRUcuRi5GNC5ERUZGMTZFLkVGRUdGMTZGMTZEMnJBQi1GI0EuRy5HckdBRUcuRi5GNEZHRkUuRS5FRCMuQi5BQUcjRyNBMTZCRyMuQUJvMUE0PkE0REE+RDxERzQ+RzxHQ0c+QzxDRiM0PkYjNDw8QjQ+QjRFMTY+RTxFMTY+RTxGI0cjPkVHIzxHIzxBND5BNERBPkQ8REY0PkY8RkVCPkU8RTxBLj5FMTZBNDxCPkYjQjxCbzVGIy5FLjxCPkYjLkUuPEI+Ry5GIy4mRiNBLkcuPEExNj5FMTZGLkUuPEE+Ri5FLjxBPkcuRi4mRkwzMnJDI0VBNC4mQXJyPDxGI0E+Q0UxJkU0LnI0LnJycixcclxuICAgICAgICB2MTRyMTY8TDhFLkYjRyM8QTI+RDQuPEYjRzI+QzI8RiM0LkFCMnIxNkUuRUYjRyMuPkUuJkU+TDRFR0YjQUFHTDg8QUcxNkcuJkc+RS5FPEEuPkU0RCM0PkYjLkUuPEJCLkIuR0IuQi4mQj5EIy5EIy5yPEEuQS5yQS5BLnJBLkEuJkFyMjxBLj5DNHIuRi5BLkItLkQxNnI0LkYuRi48Qi0uQi0xNnI0Lj5ELjxCLS4+QzJyQy5FLkMuPEExNnI0Lj5BNC5GMnJELkQuRi5DMTZyNC5HLkYuQi0uQzE2cjRFNEE0QTRyNC4+Qy48QS5CLTJyRi5GLkQycjxCLS4+RS0uRi5ELTE2cjRGIzRDND5BLkcuJkdBLkItLiZCLT5DLjxGLiZGRS5GLiZGRi5FLiZFRi5FLiZFRC48QS5BLkItLj48RjRMMkRERS1EPEFCPkU8QjQ+RTRMOEUtLkcuQ0UtLkUtLkNFLkYjLj5EPEI0RTRFLkNDLjxCLj5ELnJFMTY+RS5FRCNEPEUuRy5ELkcuQ0YjLkYjLkRBLkYuQUEuRyMuJkcjRTRFQ0QjPEIuQi5MMj5HR0JBQUFBRztcclxuICAgICAgICBgICk7XHJcbiAgICAgICAgLy8gR0xPQkFMLnBsYXllci5wbGF5TXVzaWMoIGBcclxuICAgICAgICAvLyBNTUxAdDEwNnYxMGNyPmQsdjEwZXI+ZSx2MTBncj5hO2AgKTtcclxuICAgICAgICAvLyBHTE9CQUwucGxheWVyLnBsYXlNdXNpYyggYE1NTEB0MTA2djE1Y2RlZmdhYj5jLD5jPGJhZmVkYztgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBheCAhPSBudWxsICkge1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgY29uc3QgaXNJbnRlcmFjdFRpbGUgPSBHTE9CQUwud29ybGQuZ2V0UHJvcGVydHkoIHJ4ICsgYXgscnkgKyBheSApLmNoYXIgPT0gXCJFXCI7XHJcbiBcclxuICAgICAgICBpZiAoIGlzSW50ZXJhY3RUaWxlIHx8IEdMT0JBTC53b3JsZC5lbnRpdHlNYW5hZ2VyLmdldEVudGl0eSggcnggKyBheCxyeSArIGF5ICkgKSB7XHJcbiAgICAgICAgICAgIEdMT0JBTC5wbGF5ZXIuaW50ZXJhY3QoIHJ4ICsgYXgscnkgKyBheSApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIEdMT0JBTC5wbGF5ZXIuZmluZFBhdGhBbmRNb3ZlVG8oIHJ4ICsgYXgscnkgKyBheSApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEB0aGlzIEN1cnNvclxyXG4gKiBAcGFyYW0ge251bWJlcn0geFxyXG4gKiBAcGFyYW0ge251bWJlcn0geVxyXG4gKi9cclxuZnVuY3Rpb24gc25hcFRvWHkoIHgsIHkgKSB7XHJcbiAgICBpZiAoIEdMT0JBTC5pbnRlcmZhY2UuaXNTaWRlUGFuZWxPcGVuZWQoKSApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCB0aGlzLnR3ICkge1xyXG4gICAgICAgIHRoaXMudHcuc3RvcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggdGhpcy50d0N1cnNvciApIHtcclxuICAgICAgICB0aGlzLnR3Q3Vyc29yLnN0b3AoKTtcclxuICAgIH1cclxuXHJcbiAgICAvL2xvZyhcIlNuYXBcIix4LHkpO1xyXG4gICAgdGhpcy50d0N1cnNvciA9IG5ldyBUd2VlbiggdGhpcywgNTAwLCB7IHg6IEdMT0JBTC53b3JsZC52aWV3V2lkdGggLyAyLCB5OiBHTE9CQUwud29ybGQudmlld0hlaWdodCAvIDIgfSwgeyBlYXNlOiBlYXNpbmcub3V0Q3ViaWMgfSApO1xyXG4gICAgY29uc3QgdHcgPSBuZXcgVHdlZW4oIEdMT0JBTC53b3JsZCwgNTAwLCB7IHZpZXdYOiB4LCB2aWV3WTogeSB9LCB7IGVhc2U6IGVhc2luZy5vdXRDdWJpYyB9IClcclxuICAgICAgICAub25DaGFuZ2UoICgpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5hc3NlcnQoICFOdW1iZXIuaXNOYU4oIEdMT0JBTC53b3JsZC52aWV3WCApICk7XHJcblxyXG4gICAgICAgICAgICBpZiAoICFHTE9CQUwuaW50ZXJmYWNlLmlzU2lkZVBhbmVsT3BlbmVkKCkgKSB7XHJcbiAgICAgICAgICAgICAgICBHTE9CQUwud29ybGQuc2lnaHRNYW5hZ2VyLm1vdmVWaWV3VG8oIEdMT0JBTC53b3JsZC52aWV3WCArIEdMT0JBTC53b3JsZC5nZXRYKCkgLyAyLCBHTE9CQUwud29ybGQudmlld1kgKyBHTE9CQUwud29ybGQuZ2V0WSgpIC8gMiApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSApXHJcbiAgICAgICAgLm9uQ29tcGxldGUoICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy50dyA9IG51bGw7XHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgIHRoaXMudHcgPSB0dztcclxufVxyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEB0aGlzIEN1cnNvclxyXG4gKiBAcGFyYW0ge1Nwcml0ZX0gaWNvbjFcclxuICogQHBhcmFtIHtTcHJpdGV9IGljb24yXHJcbiAqIEByZXR1cm5zIHtTcHJpdGV9XHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBY3Rpb25Cb3goIGljb24xLCBpY29uMiApIHtcclxuICAgIGNvbnN0IG0gPSBuZXcgTWVzaCgpO1xyXG4gICAgY29uc3Qgd2YgPSBuZXcgR3JpZDkoIG5ldyBUZXh0dXJlKCBcIkJsYWNrRnJhbWUucG5nXCIsIGZhbHNlLCB7IGZvcm1hdDogVGV4dHVyZUJhc2UuUkdCQTU1NTEgfSApICk7XHJcbiAgICBjb25zdCB3ID0gaWNvbjEuZ2V0V2lkdGgoKSArIGljb24yLmdldFdpZHRoKCkgKyA0MDtcclxuICAgIGNvbnN0IGggPSBNYXRoLm1heCggaWNvbjEuZ2V0SGVpZ2h0KCksIGljb24yLmdldEhlaWdodCgpICkgKyAxMDtcclxuICAgIGNvbnN0IGJhc2VTcHIgPSBuZXcgU3ByaXRlKCk7XHJcblxyXG4gICAgd2Yuc2V0UmVjdCggLXcgLyAyLCAtaCAvIDIsIHcsIGggKTtcclxuICAgIHdmLnNldEFscGhhKCAwLjggKTtcclxuICAgIGNvbnN0IGIgPSBuZXcgQml0bWFwKCBuZXcgVGV4dHVyZSggXCJ1c2VUby5wbmdcIiwgZmFsc2UsIHsgZm9ybWF0OiBUZXh0dXJlQmFzZS5SR0JBNTU1MSB9ICkgKTtcclxuXHJcbiAgICBiLnNldE92ZXJyaWRlQ29sb3IoIDB4ZmY5MDAwICk7XHJcbiAgICBiLnNldEFuY2hvclBvaW50KCAwLjUsIDAuNSApO1xyXG4gICAgYi5zZXRQb3NpdGlvbiggMCwgMCApO1xyXG4gICAgYi5zZXRCbGVuZE1vZGUoIFNwcml0ZS5CbGVuZE1vZGVzLkFERCApO1xyXG4gICAgY29uc3QgbWMgPSBuZXcgTW92aWVDbGlwKCBbXHJcbiAgICAgICAgWyAwLCA2MCwgYix7IGFscGhhOiBbIDAsIDFdIH1dLFxyXG4gICAgICAgIFs2MSwgMTIwLCBiLCB7IGFscGhhOiBbMSwgMF0gfV0sXHJcbiAgICAgICAgWzEyMCxcImdvdG9cIiwwXVxyXG4gICAgXSApO1xyXG5cclxuICAgIGJhc2VTcHIuYWRkQ2hpbGQoIHdmICk7XHJcbiAgICBiYXNlU3ByLmFkZENoaWxkKCBtYyApO1xyXG4gICAgaWNvbjEuc2V0UG9zaXRpb24oIC13IC8gMiAvIDIuMSwgLTIgKTtcclxuICAgIGJhc2VTcHIuYWRkQ2hpbGQoIGljb24xICk7XHJcbiAgICBpY29uMi5zZXRQb3NpdGlvbiggdyAvIDIgLyAyLjEsIC0yICk7XHJcblxyXG4gICAgYmFzZVNwci5hZGRDaGlsZCggaWNvbjIgKTtcclxuXHJcbiAgICByZXR1cm4gYmFzZVNwcjtcclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEN1cnNvciBleHRlbmRzIFNwcml0ZSB7XHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyDstIjquLDtmZRcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLm1lc2ggPSBuZXcgSWNvblBhY2soIG5ldyBUZXh0dXJlKCBcImN1cnNvcnMucG5nXCIsZmFsc2UseyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE0NDQ0IH0gKSwxLDEsMzIsMzIgKTtcclxuICAgICAgICB0aGlzLmFkZENoaWxkKCB0aGlzLm1lc2ggKTtcclxuICAgICAgICB0aGlzLnNldFR5cGUoIFwicGxheWVyXCIgKTtcclxuICAgICAgICB0aGlzLm1vdmVEaXIgPSAxO1xyXG4gICAgICAgIHRoaXMubW9kZSA9IFwibWVsZWVcIjtcclxuICAgICAgICB0aGlzLnJlc2VydmVkQ2xpY2sgPSBbXTtcclxuICAgICAgICB0aGlzLl9fdG91Y2hlcyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zZXRQb3NpdGlvbiggR0xPQkFMLndvcmxkLnZpZXdXaWR0aCAvIDIsR0xPQkFMLndvcmxkLnZpZXdIZWlnaHQgLyAyICk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCBFdmVudC5QT0lOVEVSX0RPV04sb25Qb2ludGVyRG93bix0aGlzICk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCBFdmVudC5QT0lOVEVSX1VQLG9uUG9pbnRlclVwLHRoaXMgKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoIEV2ZW50LlBPSU5URVJfTU9WRSxvblBvaW50ZXJNb3ZlLHRoaXMgKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoIEV2ZW50LktFWV9ET1dOLCBvbktleURvd24sIHRoaXMgKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoIEV2ZW50Lk1PVVNFX1dIRUVMLG9uTW91c2VXaGVlbCx0aGlzICk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCBFdmVudC5UT1VDSEVTX0JFR0lOLG9uVG91Y2hlc0JlZ2luLHRoaXMgKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoIEV2ZW50LlRPVUNIRVNfRU5ELG9uVG91Y2hlc0VuZCx0aGlzICk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCBFdmVudC5UT1VDSEVTX01PVkUsb25Ub3VjaGVzTW92ZSx0aGlzICk7XHJcbiAgICB9XHJcblxyXG5cdFxyXG4gICAgaG9sZGVkKCkge1xyXG4gICAgICAgIGlmICggdGhpcy5fX2RyYWcgJiYgdGhpcy5fX2RyYWcuaG9sZGVkICkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2FuY2VsSG9sZCgpIHtcclxuICAgICAgICBpZiAoIHRoaXMuaG9sZFRpbWVyICkge1xyXG4gICAgICAgICAgICB0aGlzLmhvbGRUaW1lci5zdG9wKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaG9sZFRpbWVyID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX19kcmFnID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBzZXRUeXBlKCB0eXBlLGNvbG9yICkge1xyXG4gICAgICAgIHRoaXMubWVzaC5zZXRDb2xSb3coIHR5cGVUb0NvbFt0eXBlXSwxICk7XHJcblxyXG4gICAgICAgIGlmICggY29sb3IgKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzaC5zZXRPdmVycmlkZUNvbG9yKCBjb2xvciApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzaC5zZXRPdmVycmlkZUNvbG9yKCAweGZmZmZmZiwxICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0U2NhbGUoKSB7XHJcbiAgICAgICAgY29uc3Qgc3ggPSAxIC8gR0xPQkFMLndvcmxkLnpvb207XHJcbiAgICAgICAgY29uc3Qgc3kgPSAxIC8gR0xPQkFMLndvcmxkLnpvb207XHJcblxyXG4gICAgICAgIHRoaXMubWVzaC5zZXRTY2FsZSggc3gsc3kgKTtcclxuICAgIH1cclxuXHJcbiAgICBzbmFwVG9Xb3JsZCgpIHtcclxuICAgICAgICBjb25zdCBwb3MgPSB0aGlzLmdldFBvc2l0aW9uKCk7XHJcbiAgICAgICAgY29uc3QgeyB4OiB0eCwgeTogdHkgfSA9IEdMT0JBTC53b3JsZC5zdGFnZVRvVGlsZSggcG9zLngscG9zLnkgKTtcclxuXHJcbiAgICAgICAgaWYgKCAhdGhpcy50dyApIHtcclxuICAgICAgICAgICAgY29uc3QgeyB4OiBweCwgeTogcHkgfSA9IEdMT0JBTC53b3JsZC50aWxlQ2VudGVyVG9Xb3JsZCggdHgsdHkgKTtcclxuXHJcbiAgICAgICAgICAgIHNuYXBUb1h5LmNhbGwoIHRoaXMscHgscHkgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBbdHgsdHldO1xyXG4gICAgfVxyXG5cclxuICAgIHNuYXBUb1BsYXllcigpIHtcclxuICAgICAgICBjb25zdCBbdHgsdHldID0gW0dMT0JBTC5wbGF5ZXIudGlsZVgsIEdMT0JBTC5wbGF5ZXIudGlsZVldO1xyXG5cclxuICAgICAgICBpZiAoICF0aGlzLl9fZHJhZyApIHtcclxuICAgICAgICAgICAgY29uc3QgeyB4OiBweCwgeTogcHkgfSA9IEdMT0JBTC53b3JsZC50aWxlQ2VudGVyVG9Xb3JsZCggdHgsdHkgKTtcclxuXHJcbiAgICAgICAgICAgIHNuYXBUb1h5LmNhbGwoIHRoaXMscHgscHkgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2V0VHlwZSggXCJwbGF5ZXJcIiApO1xyXG5cclxuICAgICAgICByZXR1cm4gW3R4LHR5XTtcclxuICAgIH1cclxuXHJcbiAgICBzdG9wU25hcCgpIHtcclxuICAgICAgICBpZiAoIHRoaXMudHcgKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHcuc3RvcCgpO1xyXG4gICAgICAgICAgICB0aGlzLnR3ID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggIXRoaXMuaG9sZGVkKCkgJiYgdGhpcy50d0N1cnNvciApIHtcclxuICAgICAgICAgICAgdGhpcy50d0N1cnNvci5zdG9wKCk7XHJcbiAgICAgICAgICAgIHRoaXMudHdDdXJzb3IgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRUaWxlWHkoIHgseSApIHtcclxuICAgICAgICBjb25zdCB7IHg6IHR4LCB5OiB0eSB9ID0gR0xPQkFMLndvcmxkLnRpbGVDZW50ZXJUb1N0YWdlKCB4LHkgKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRQb3NpdGlvbiggdHgsdHkgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUaWxlWHkoKSB7XHJcbiAgICAgICAgY29uc3QgeyB4OiB0eCwgeTogdHkgfSA9IHRoaXMuZ2V0UG9zaXRpb24oKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIEdMT0JBTC53b3JsZC5zdGFnZVRvVGlsZSggdHgsdHkgKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgbG9jayggdGltZSApIHtcclxuICAgICAgICBpZiAoIHRoaXMudW5sb2NrVGltZXIgKSB7XHJcbiAgICAgICAgICAgIHRoaXMudW5sb2NrVGltZXIuc3RvcCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5sb2NrZWQgPSB0cnVlO1xyXG4gICAgICAgIC8vdGhpcy5fX2RyYWcgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2V0VmlzaWJsZSggZmFsc2UgKTtcclxuXHJcbiAgICAgICAgaWYgKCB0aW1lICkge1xyXG4gICAgICAgICAgICB0aGlzLnVubG9ja1RpbWVyID0gVGltZXIuZGVsYXllZENhbGwoIHRpbWUsdGhpcy51bmxvY2ssdGhpcyApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1bmxvY2soKSB7XHJcbiAgICAgICAgaWYgKCB0aGlzLnVubG9ja1RpbWVyICkge1xyXG4gICAgICAgICAgICB0aGlzLnVubG9ja1RpbWVyLnN0b3AoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudW5sb2NrVGltZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMubG9ja2VkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zZXRWaXNpYmxlKCB0cnVlICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvY2Vzc1Jlc2VydmVkQ2xpY2soKSB7XHJcbiAgICAgICAgd2hpbGUgKCB0aGlzLnJlc2VydmVkQ2xpY2subGVuZ3RoID4gMCAmJiB0aGlzLnJlc2VydmVkQ2xpY2tbMF1bMl0gPCBUaW1lci5ub3coKSAtIDUwMCApIHtcclxuICAgICAgICAgICAgLy9sb2coXCIwLjXstIgg7KCEIO2BtOumrSDrsoTrprxcIix0aGlzLnJlc2VydmVkQ2xpY2tbMV1bM10sb3MudGltZXIoKSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXJ2ZWRDbGljay5zaGlmdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLnJlc2VydmVkQ2xpY2subGVuZ3RoID4gMCApIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coIFwi7ISg7J6F66Cl7LKY66asXCIsIHRoaXMucmVzZXJ2ZWRDbGljay5sZW5ndGggKTtcclxuICAgICAgICAgICAgdGhpcy5jbGljayggdGhpcy5yZXNlcnZlZENsaWNrWzBdWzBdLHRoaXMucmVzZXJ2ZWRDbGlja1swXVsxXSApO1xyXG4gICAgICAgICAgICB0aGlzLnJlc2VydmVkQ2xpY2suc2hpZnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TW9kZSggbW9kZSApIHtcclxuICAgICAgICB0aGlzLm1vZGUgPSBtb2RlO1xyXG4gICAgfVxyXG5cclxuICAgIGNsaWNrKCB4LHkgKSB7XHJcbiAgICAgICAgbGV0IHsgeDogdHgsIHk6IHR5IH0gPSBHTE9CQUwud29ybGQud29ybGRUb1RpbGUoIHgseSApO1xyXG4gICAgICAgIGxldCBjID0gR0xPQkFMLndvcmxkLmVudGl0eU1hbmFnZXIuZ2V0RW50aXR5KCB0eCx0eSApO1xyXG4gICAgICAgIGNvbnN0IGlzQXR0YWNrYWJsZUNyZWF0dXJlID0gYyAmJiAoIGMgaW5zdGFuY2VvZiBNb25zdGVyICYmICEoIGMgaW5zdGFuY2VvZiBQZXQgKSAmJiAhKCBjIGluc3RhbmNlb2YgTnBjICkgKSAmJiBjLmNhbkJlU2VlbigpO1xyXG4gICAgICAgIGNvbnN0IGlzUHJvcCA9IGMgJiYgYy5pc1Byb3AgJiYgYy5jYW5CZVNlZW4oKTtcclxuICAgICAgICBjb25zdCBpc05vcm1hbFByb3AgPSBpc1Byb3AgJiYgIWMucHJvcGVydHkubmVlZFBpY2tBeGU7XHJcbiAgICAgICAgY29uc3QgaXNTdG9uZVByb3AgPSBpc1Byb3AgJiYgYy5wcm9wZXJ0eS5uZWVkUGlja0F4ZTtcclxuICAgICAgICBjb25zdCBkaXN0ID0gIEdMT0JBTC53b3JsZC5nZXREaXN0YW5jZSggR0xPQkFMLnBsYXllci50aWxlWCxHTE9CQUwucGxheWVyLnRpbGVZLHR4LHR5ICk7XHJcblxyXG4gICAgICAgIC8vbG9nKHR4LHR5LHgseSk7XHJcbiAgICAgICAgR0xPQkFMLnBsYXllci5zdG9wKCk7XHJcbiAgICAgICAgLy/tlIzroIjsnbTslrQg7YG066atID0g7Ims6riwXHJcbiAgICAgICAgLy/rqqzsiqTthLDtgbTrpq0gPSDroIjsnbjsp4DsnbTrqbQg66CI7J247KeAIOqzteqyqVxyXG4gICAgICAgIC8vICAgICAgICAgPSDrsIDrpqwg67KU7JyE7J2066m0IOuwgOumrCDqs7XqsqlcclxuICAgICAgICAvL+uVhe2BtOumrSA9IOq3vOqxsOumrCDsoIHsnojsnLzrqbQg67CA66asIOqzteqyqVxyXG4gICAgICAgIC8vICAgICAgPSDroIjsnbjsp4AsIOuylOychOyXkCDsoIHsnojsnLzrqbQg66CI7J247KeAIOqzteqyqVxyXG4gICAgICAgIC8vICAgICAgPSDrlqjslrTsp4Qg7JWE7J207YWc7J20IOyeiOycvOuptCDqsbjslrTqsIDshJwg7KeR6riwXHJcbiAgICAgICAgLy8gICAgICA9IOyXhuycvOuptCDsiazquLBcclxuXHJcbiAgICAgICAgaWYgKCBjID09IEdMT0JBTC5wbGF5ZXIgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VHlwZSggXCJwbGF5ZXJcIiApO1xyXG4gICAgICAgICAgICBHTE9CQUwucGxheWVyLmRvTm90aGluZyggXCLslYTrrLQg7ZaJ64+Z64+EIO2VmOyngCDslYrqs6Ag6riw64uk66C464ukLlwiICk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIC8vIO2DiOy2nFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBtb2RlID0gdGhpcy5tb2RlO1xyXG5cclxuICAgICAgICAgICAgaWYgKCBpc0F0dGFja2FibGVDcmVhdHVyZSAmJiB0aGlzLm1vZGUgPT0gXCJtZWxlZVwiICYmIGRpc3QgPT0gMSApIHtcclxuICAgICAgICAgICAgICAgIG1vZGUgPSBcIm1lbGVlXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIGlzQXR0YWNrYWJsZUNyZWF0dXJlICYmIHRoaXMubW9kZSA9PSBcInJhbmdlZFwiICkge1xyXG4gICAgICAgICAgICAgICAgbW9kZSA9IFwicmFuZ2VkXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIGlzUHJvcCAmJiBkaXN0ID09IDEgKSB7XHJcbiAgICAgICAgICAgICAgICBtb2RlID0gXCJtZWxlZVwiO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCBpc05vcm1hbFByb3AgJiYgZGlzdCA+IDEgJiYgdGhpcy5tb2RlID09IFwicmFuZ2VkXCIgKSB7XHJcbiAgICAgICAgICAgICAgICBtb2RlID0gXCJyYW5nZWRcIjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8v6rKA7IOJXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gR0xPQkFMLnBsYXllci5nZXROZWFyRW50aXRpZXMoIDUsNDUseCx5ICk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZG9Ob3RoaW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKCBjb25zdCBpIGluIHQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdiA9IHRbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNBdHRhY2thYmxlQ3JlYXR1cmUgPSB2ICYmICggdiBpbnN0YW5jZW9mIE1vbnN0ZXIgJiYgISggdiBpbnN0YW5jZW9mIFBldCApICYmICEoIHYgaW5zdGFuY2VvZiBOcGMgKSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGlzQXR0YWNrYWJsZUNyZWF0dXJlICYmIHYuY2FuQmVTZWVuKClbMF0gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSB2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBbdHgsdHldID0gW2MudGlsZVgsYy50aWxlWV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICggeyB4LCB5IH0gPSBHTE9CQUwud29ybGQudGlsZUNlbnRlclRvV29ybGQoIHR4LHR5ICkgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9Ob3RoaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHYgJiYgdi5pc1Byb3AgJiYgIXYucHJvcGVydHkubmVlZFBpY2tBeGUgJiYgdi5jYW5CZVNlZW4oKVswXSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFt0eCx0eV0gPSBbYy50aWxlWCxjLnRpbGVZXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgW3gsIHkgXSA9IEdMT0JBTC53b3JsZC50aWxlQ2VudGVyVG9Xb3JsZCggdHgsdHkgKS54eTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9Ob3RoaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHYgJiYgdi5pc1Byb3AgJiYgdi5wcm9wZXJ0eS5uZWVkUGlja0F4ZSAmJiBHTE9CQUwud29ybGQuZ2V0RGlzdGFuY2VCZXR3ZWVuRW50aXRpZXMoIHYsR0xPQkFMLnBsYXllciApID09IDEgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSB2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBbdHgsdHldID0gW2MudGlsZVgsYy50aWxlWV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFt4LHldID0gR0xPQkFMLndvcmxkLnRpbGVDZW50ZXJUb1dvcmxkKCB0eCx0eSApLnh5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb05vdGhpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIOyVhOustOqyg+uPhCDslYjtlahcclxuICAgICAgICAgICAgICAgIGlmICggZG9Ob3RoaW5nICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gR0xPQkFMLndvcmxkLmVudGl0eU1hbmFnZXIuZ2V0SXRlbXMoIHR4LHR5ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggaXRlbXMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCBcIuyVhOydtO2FnCDsp5HquLBcIiApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2tpcDtcclxuICAgICAgICAgICAgICAgICAgICBHTE9CQUwucGxheWVyLmludGVyYWN0KCB0eCx0eSxmYWxzZSx4LHkgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldFR5cGUoIFwiYWltXCIgKTtcclxuICAgICAgICAgICAgR0xPQkFMLnBsYXllci5pbnRlcmFjdCggdHgsdHksbW9kZSA9PSBcInJhbmdlZFwiLHgseSApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkcmFnKCB4MSx5MSx4Mix5MiApIHtcclxuICAgICAgICBjb25zdCB7IHg6IHR4LCB5OiB0eSB9ID0gR0xPQkFMLndvcmxkLndvcmxkVG9UaWxlKCB4Mix5MiApO1xyXG4gICAgICAgIGNvbnN0IFtwdHgscHR5XSA9IFtHTE9CQUwucGxheWVyLnRpbGVYLEdMT0JBTC5wbGF5ZXIudGlsZVldO1xyXG4gICAgICAgIGNvbnN0IGMgPSBHTE9CQUwud29ybGQuZW50aXR5TWFuYWdlci5nZXRFbnRpdHkoIHR4LHR5ICk7XHJcbiAgICAgICAgY29uc3QgaXNBdHRhY2thYmxlQ3JlYXR1cmUgPSBjICYmICggYyBpbnN0YW5jZW9mIE1vbnN0ZXIgJiYgISggYyBpbnN0YW5jZW9mIFBldCApICYmICEoIGMgaW5zdGFuY2VvZiBOcGMgKSApICYmIGMuY2FuQmVTZWVuKCk7XHJcbiAgICAgICAgY29uc3QgaXNQcm9wID0gYyAmJiBjLmlzUHJvcCAmJiBjLmNhbkJlU2VlbigpO1xyXG4gICAgICAgIGNvbnN0IGlzTm9ybWFsUHJvcCA9IGlzUHJvcCAmJiAhYy5wcm9wZXJ0eS5uZWVkUGlja0F4ZTtcclxuICAgICAgICBjb25zdCBpc1N0b25lUHJvcCA9IGlzUHJvcCAmJiBjLnByb3BlcnR5Lm5lZWRQaWNrQXhlO1xyXG4gICAgICAgIGNvbnN0IHByID0gR0xPQkFMLndvcmxkLmdldFByb3BlcnR5KCB0eCx0eSApO1xyXG4gICAgICAgIC8vIOuLpOuluCDsmKTruIzsoJ3tirjroZwg7ZmV7J6l7ZW07JW87ZWoXHJcbiAgICAgICAgY29uc3QgaXNJbnRlcmFjdFRpbGUgPSAhYyAmJiBwci5jaGFyID09IFwiRVwiOyBcclxuICAgICAgICBjb25zdCBkaXN0RnJvbVBsYXllciA9IEdMT0JBTC53b3JsZC5nZXREaXN0YW5jZSggcHR4LHB0eSx0eCx0eSApO1xyXG4gICAgICAgIGNvbnN0IG1vZGUgPSB0aGlzLm1vZGU7XHJcbiAgICAgICAgbGV0IHNraXA7XHJcblxyXG4gICAgICAgIC8vIOqzteqyqeydtCDsmrDshKBcclxuICAgICAgICBpZiAoIGlzQXR0YWNrYWJsZUNyZWF0dXJlIHx8IGlzUHJvcCApIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRUeXBlKCBcImFpbVwiICk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIG1vZGUgPT0gXCJyYW5nZWRcIiApIHtcclxuICAgICAgICAgICAgICAgIC8vIOyggeyXkOqyjCDrk5zrnpjqt7jtlojsnLzrqbQg67Cc7IKsXHJcbiAgICAgICAgICAgICAgICBpZiAoIGlzUHJvcCApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDtmZzsnYQg65Ok7Ja064+EIDHsubgg6rGw66as66m0IOq3vOygkeqzteqyqVxyXG4gICAgICAgICAgICAgICAgICAgIEdMT0JBTC5wbGF5ZXIuaW50ZXJhY3QoIHR4LHR5LGRpc3RGcm9tUGxheWVyID4gMSx4Mix5MiApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBHTE9CQUwucGxheWVyLmludGVyYWN0KCB0eCx0eSx0cnVlLHgyLHkyICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc2tpcCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIGRpc3RGcm9tUGxheWVyID09IDEgKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDtlZzsubgg7JiG7JeQIOyeiOycvOuptCDqt7jrg6Ug6re4IOuGiCDqs7XqsqlcclxuICAgICAgICAgICAgICAgIEdMT0JBTC5wbGF5ZXIuaW50ZXJhY3QoIHR4LHR5LGZhbHNlLHgyLHkyICk7XHJcbiAgICAgICAgICAgICAgICBza2lwID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL3RoaXMuc2V0VHlwZShcInRpbGVcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoICFza2lwICkge1xyXG4gICAgICAgICAgICBpZiAoICFwci5yZXZlYWxlZCApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgeDogYWltX3gxLCB5OiBhaW1feTEgfSA9IEdMT0JBTC53b3JsZC50aWxlQ2VudGVyVG9Xb3JsZCggcHR4LHB0eSApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW3IsdHgyLHR5MixjeCxjeV0gPSBHTE9CQUwud29ybGQubWFwLnZpc2liaWxpdHlUaWxlQ2hlY2tlci50cmFjZVJheSggYWltX3gxLGFpbV95MSx4Mix5MixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENPTkZJRy5Xb3JsZC50aWxlV2lkdGgsQ09ORklHLldvcmxkLnRpbGVIZWlnaHQsR2FtZU1hcC5CTE9DS19QQVNTIHwgR2FtZU1hcC5CTE9DS19WSVNJT04gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIEdMT0JBTC53b3JsZC5nZXRQcm9wZXJ0eSggdHgyLHR5MiApLmNoYXIgPT0gXCJFXCIgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g7J2064+ZIO2bhOyXkCDrrLjsnYQg7Jew64ukXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUeXBlKCBcImRvb3JcIiApO1xyXG4gICAgICAgICAgICAgICAgICAgIEdMT0JBTC5wbGF5ZXIuZmluZFBhdGhBbmRNb3ZlVG8oIHR4Mix0eTIsdHgyLHR5MiApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDslYTri4jrqbQg7J2064+ZXHJcbiAgICAgICAgICAgICAgICAgICAgR0xPQkFMLnBsYXllci5maW5kUGF0aEFuZE1vdmVUbyggdHgsdHkgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmICggaXNJbnRlcmFjdFRpbGUgJiYgZGlzdEZyb21QbGF5ZXIgPT0gMSApIHtcclxuICAgICAgICAgICAgICAgIEdMT0JBTC5wbGF5ZXIuaW50ZXJhY3QoIHR4LHR5ICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHByLmNoYXIgPT0gXCJFXCIgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g7J2064+ZIO2bhOyXkCDrrLjsnYQg7Jew64ukXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUeXBlKCBcImRvb3JcIiApO1xyXG4gICAgICAgICAgICAgICAgICAgIEdMT0JBTC5wbGF5ZXIuZmluZFBhdGhBbmRNb3ZlVG8oIHR4LHR5LHR4LHR5ICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOyVhOuLiOuptCDsnbTrj5lcclxuICAgICAgICAgICAgICAgICAgICBHTE9CQUwucGxheWVyLmZpbmRQYXRoQW5kTW92ZVRvKCB0eCx0eSx0eCx0eSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRyYWdnaW5nKCB4MSx5MSx4Mix5MiApIHtcclxuICAgICAgICBjb25zdCB7IHg6IHR4LCB5OiB0eSB9ID0gR0xPQkFMLndvcmxkLndvcmxkVG9UaWxlKCB4Mix5MiApO1xyXG4gICAgICAgIGNvbnN0IFtwdHgscHR5XSA9IFtHTE9CQUwucGxheWVyLnRpbGVYLEdMT0JBTC5wbGF5ZXIudGlsZVldO1xyXG4gICAgICAgIGNvbnN0IGMgPSBHTE9CQUwud29ybGQuZW50aXR5TWFuYWdlci5nZXRFbnRpdHkoIHR4LHR5ICk7XHJcbiAgICAgICAgY29uc3QgaXNBdHRhY2thYmxlQ3JlYXR1cmUgPSBjICYmICggYyBpbnN0YW5jZW9mIE1vbnN0ZXIgJiYgISggYyBpbnN0YW5jZW9mIFBldCApICYmICEoIGMgaW5zdGFuY2VvZiBOcGMgKSApICYmIGMuY2FuQmVTZWVuKClbMF07XHJcbiAgICAgICAgY29uc3QgaXNQcm9wID0gYyAmJiBjLmlzUHJvcCAmJiBjLmNhbkJlU2VlbigpWzBdO1xyXG4gICAgICAgIGNvbnN0IGlzTm9ybWFsUHJvcCA9IGlzUHJvcCAmJiAhYy5wcm9wZXJ0eS5uZWVkUGlja0F4ZTtcclxuICAgICAgICBjb25zdCBpc1N0b25lUHJvcCA9IGlzUHJvcCAmJiBjLnByb3BlcnR5Lm5lZWRQaWNrQXhlO1xyXG4gICAgICAgIGNvbnN0IHByID0gR0xPQkFMLndvcmxkLmdldFByb3BlcnR5KCB0eCx0eSApO1xyXG4gICAgICAgIGNvbnN0IGlzSW50ZXJhY3RUaWxlID0gYyAhPSBudWxsICYmIHByLmNoYXIgPT0gXCJFXCI7IFxyXG4gICAgICAgIGNvbnN0IGRpc3RGcm9tUGxheWVyID0gR0xPQkFMLndvcmxkLmdldERpc3RhbmNlKCBwdHgscHR5LHR4LHR5ICk7XHJcblxyXG4gICAgICAgIGlmICggdHggPT0gcHR4ICYmIHR5ID09IHB0eSApIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRUeXBlKCBcInBsYXllclwiICk7XHJcbiAgICAgICAgfSBlbHNlIGlmICggdGhpcy5tb2RlID09IFwicmFuZ2VkXCIgKSB7XHJcbiAgICAgICAgICAgIGlmICggKCBpc0F0dGFja2FibGVDcmVhdHVyZSB8fCBpc05vcm1hbFByb3AgKSAmJlxyXG5cdFx0XHRcdCggZGlzdEZyb21QbGF5ZXIgPiAxIHx8ICggZGlzdEZyb21QbGF5ZXIgPT0gMSAmJiB0aGlzLm1vZGUgPT0gXCJyYW5nZWRcIiApICkgKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDrqqzsiqTthLDsl5Ag7Luk7ISc66W8IOuMgOqzoCDsnojsnYxcclxuICAgICAgICAgICAgICAgIGlmICggIXRoaXMuX19kcmFnLmFpbWVkICkge1xyXG4gICAgICAgICAgICAgICAgICAgIFNvdW5kLnBsYXlTb3VuZCggXCJzb3VuZC9ib3dfYWltLndhdlwiICk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX2RyYWcuYWltZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cdFx0XHRcdFxyXG4gICAgICAgICAgICAgICAgY29uc3QgeyB4OiBveCwgeTogb3kgfSA9IEdMT0JBTC53b3JsZC5zdGFnZVRvV29ybGQoIHRoaXMuZ2V0WCgpLHRoaXMuZ2V0WSgpICk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHg6IGFpbV94MSwgeTogYWltX3kxIH0gPSBHTE9CQUwud29ybGQudGlsZUNlbnRlclRvV29ybGQoIHB0eCxwdHkgKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IFtyLHR4LHR5LGN4LGN5XSA9IEdMT0JBTC53b3JsZC5tYXAudmlzaWJpbGl0eVRpbGVDaGVja2VyLnRyYWNlUmF5KCBhaW1feDEsYWltX3kxLHgyLHkyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENPTkZJRy5Xb3JsZC50aWxlV2lkdGgsIENPTkZJRy5Xb3JsZC50aWxlSGVpZ2h0LEdhbWVNYXAuQkxPQ0tfVklTSU9OIHwgR2FtZU1hcC5CTE9DS19BUlJPVyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIHgseSApID0+IEdMT0JBTC53b3JsZC5lbnRpdHlNYW5hZ2VyLmdldEVudGl0eSggeCx5ICkgKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgU2hhcGUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzLnNldExpbmVTdHlsZSggMSwweGZmZmZmZiwwLjUgKTtcclxuICAgICAgICAgICAgICAgIHMubW92ZVRvKCBhaW1feDEgLSBveCxhaW1feTEgLSBveSApO1xyXG4gICAgICAgICAgICAgICAgcy5saW5lVG8oIGN4IC0gb3gsY3kgLSBveSApO1xyXG4gICAgICAgICAgICAgICAgcy5lbmRQYXRoKCk7XHJcbiAgICAgICAgICAgICAgICBzLnNldFNjYWxlKCAxIC8gR0xPQkFMLndvcmxkLnpvb20gKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkQ2hpbGQoIHMgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWltTGluZSA9IHM7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCByID09IFZpc2liaWxpdHlUaWxlLkVNUFRZICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VHlwZSggXCJhaW1cIiApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFR5cGUoIFwiYWltXCIsMHgzMDMwMzAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmICggIXByLnJldmVhbGVkICkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyB4OiBveCwgeTogb3kgfSA9IEdMT0JBTC53b3JsZC5zdGFnZVRvV29ybGQoIHRoaXMuZ2V0WCgpLHRoaXMuZ2V0WSgpICk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHg6IGFpbV94MSwgeTogYWltX3kxIH0gPSBHTE9CQUwud29ybGQudGlsZUNlbnRlclRvV29ybGQoIHB0eCxwdHkgKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IFtyLHR4Mix0eTIsY3gsY3ldID0gR0xPQkFMLndvcmxkLm1hcC52aXNpYmlsaXR5VGlsZUNoZWNrZXIudHJhY2VSYXkoIGFpbV94MSxhaW1feTEseDIseTIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDT05GSUcuV29ybGQudGlsZVdpZHRoLENPTkZJRy5Xb3JsZC50aWxlSGVpZ2h0LEdhbWVNYXAuQkxPQ0tfVklTSU9OIHwgR2FtZU1hcC5CTE9DS19BUlJPVyApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggR0xPQkFMLndvcmxkLmdldFByb3BlcnR5KCB0eDIsdHkyICkuY2hhciA9PSBcIkVcIiApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFR5cGUoIFwiZG9vclwiICk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBTaGFwZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzLnNldExpbmVTdHlsZSggMSwweGZmZmZmZiwwLjUgKTtcclxuICAgICAgICAgICAgICAgICAgICBzLm1vdmVUbyggYWltX3gxIC0gb3gsYWltX3kxIC0gb3kgKTtcclxuICAgICAgICAgICAgICAgICAgICBzLmxpbmVUbyggY3ggLSBveCxjeSAtIG95ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgcy5lbmRQYXRoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcy5zZXRTY2FsZSggMSAvIEdMT0JBTC53b3JsZC56b29tICk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRDaGlsZCggcyApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWltTGluZSA9IHM7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VHlwZSggXCJ0aWxlXCIgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmICggcHIuY2hhciA9PSBcIkVcIiApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VHlwZSggXCJkb29yXCIgKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICggaXNJbnRlcmFjdFRpbGUgJiYgZGlzdEZyb21QbGF5ZXIgPT0gMSApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VHlwZSggXCJpbnRlcmFjdFwiICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFR5cGUoIFwidGlsZVwiICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g7YG066at7Iuc7JeQIOuCmOqwgOuKlCDslaHshZgg67O07Jes7KO86riwXHJcbiAgICBzaG93QXV0b0FjdGlvbigpIHtcclxuICAgICAgICBpZiAoIHRoaXMuYXV0b0FjdGlvblNwcml0ZSAhPSBudWxsICkgdGhpcy5hdXRvQWN0aW9uU3ByaXRlLnJlbW92ZUZyb21QYXJlbnQoKTtcclxuICAgICAgICBpZiAoIHRoaXMuYXV0b0FjdGlvblRhcmdldFNwcml0ZSAhPSBudWxsICkgdGhpcy5hdXRvQWN0aW9uVGFyZ2V0U3ByaXRlLnJlbW92ZUZyb21QYXJlbnQoKTtcclxuICAgICAgICBjb25zdCBbYWN0aW9uLGljb24xLGljb24yLHR4LHR5XSA9IHRoaXMuZ2V0QXV0b0FjdGlvbigpO1xyXG5cclxuICAgICAgICBpZiAoICFhY3Rpb24gfHwgIWljb24xIHx8ICF0eCApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtNZXNofSAqL1xyXG4gICAgICAgIGNvbnN0IG0gPSBnZXRBY3Rpb25Cb3guY2FsbCggdGhpcyxpY29uMSxpY29uMiApO1xyXG5cclxuICAgICAgICB0aGlzLmF1dG9BY3Rpb25TcHJpdGUgPSBtO1xyXG4gICAgICAgIG0uc2V0UG9zaXRpb24oIGFwcGxpY2F0aW9uLmxvZ2ljYWxWaWV3cG9ydC53aWR0aCAvIDIsIGFwcGxpY2F0aW9uLmxvZ2ljYWxWaWV3cG9ydC5oZWlnaHQgLSA0MCApO1xyXG4gICAgICAgIG0uc2V0SW50ZXJhY3RpdmUoIHtcclxuICAgICAgICAgICAgcHJldmVudFJlbGVhc2U6ICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgICBkaXNhYmxlQmFzaWNBbmltYXRpb246IHRydWUsXHJcbiAgICAgICAgICAgIHByZXNzQW5pbWF0aW9uOiAgICAgICAgKCBlLCBpICkgPT4gZS50YXJnZXQubW92ZSggaS5kb3duVGhpc1Bvc2l0aW9uLngsIGkuZG93blRoaXNQb3NpdGlvbi55ICsgMywgNTAgKSxcclxuICAgICAgICAgICAgcmVsZWFzZUFuaW1hdGlvbjogICAgICAoIGUsIGkgKSA9PiBlLnRhcmdldC5tb3ZlKCBpLmRvd25UaGlzUG9zaXRpb24ueCwgaS5kb3duVGhpc1Bvc2l0aW9uLnksIDEwMCApLFxyXG4gICAgICAgICAgICBwcmVzczogICAgICAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsSG9sZCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fX2RyYWcgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kb0F1dG9BY3Rpb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gKTtcclxuICAgICAgICBjb25zdCBiID0gdGhpcy5tZXNoLmNsb25lKCB0eXBlVG9Db2xbXCJ0YXJnZXRcIl0sMSApO1xyXG5cclxuICAgICAgICBiLnNldE92ZXJyaWRlQ29sb3IoIDB4ZmY5MDAwICk7XHJcbiAgICAgICAgYi5zZXRCbGVuZE1vZGUoIFNwcml0ZS5CbGVuZE1vZGVzLkFERCApO1xyXG4gICAgICAgIGNvbnN0IHBvcyA9IEdMT0JBTC53b3JsZC50aWxlQ2VudGVyVG9TdGFnZSggdHgsIHR5ICk7XHJcblxyXG4gICAgICAgIGIuc2V0UG9zaXRpb24oIHBvcy54LHBvcy55ICk7XHJcbiAgICAgICAgY29uc3QgbWMgPSBuZXcgTW92aWVDbGlwKCBbXHJcbiAgICAgICAgICAgIFswLDYwLGIseyBhbHBoYTogWzAsMV0scm90YXRpb246IFswLDM2MCxcIm91dEN1YmljXCJdIH1dLFxyXG4gICAgICAgICAgICBbNjEsIDEyMCwgYiwgeyBhbHBoYTogWzEsIDBdLCByb3RhdGlvbjogWzM2MCwgNzIwLCBcImluQ3ViaWNcIl0gfV0sXHJcbiAgICAgICAgICAgIFsxMjAsXCJnb3RvXCIsMF1cclxuICAgICAgICBdICk7XHJcblxyXG4gICAgICAgIG1jLmFkZEV2ZW50TGlzdGVuZXJPblN0YWdlKCBFdmVudC5FTlRFUl9GUkFNRSwgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB7IHgsIHkgfSA9IEdMT0JBTC53b3JsZC50aWxlQ2VudGVyVG9TdGFnZSggdHgsIHR5ICk7XHJcbiAgICAgICAgICAgIGNvbnN0IHN4ID0gMSAvIEdMT0JBTC53b3JsZC56b29tO1xyXG4gICAgICAgICAgICBjb25zdCBzeSA9IDEgLyBHTE9CQUwud29ybGQuem9vbTtcclxuXHJcbiAgICAgICAgICAgIGIuc2V0U2NhbGUoIHN4LCBzeSApO1xyXG4gICAgICAgICAgICBiLnNldFBvc2l0aW9uKCB4ICogc3gsIHkgKiBzeSApO1xyXG4gICAgICAgIH0gKTtcclxuICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmh1ZExheWVyLm9yaWdpbi5hZGRDaGlsZEF0KCBtYywwICk7XHJcbiAgICAgICAgdGhpcy5hdXRvQWN0aW9uVGFyZ2V0U3ByaXRlID0gbWM7XHJcbiAgICAgICAgR0xPQkFMLmludGVyZmFjZS5odWRMYXllci5vcmlnaW4uYWRkQ2hpbGQoIG0gKTtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlQXV0b0FjdGlvbigpIHtcclxuICAgICAgICBpZiAoIHRoaXMuYXV0b0FjdGlvblNwcml0ZSApIHtcclxuICAgICAgICAgICAgY29uc3Qgc3ByID0gdGhpcy5hdXRvQWN0aW9uU3ByaXRlO1xyXG5cclxuICAgICAgICAgICAgbmV3IFR3ZWVuKCB0aGlzLmF1dG9BY3Rpb25TcHJpdGUsMjAwLHsgYWxwaGE6IDAgfSApXHJcbiAgICAgICAgICAgICAgICAub25Db21wbGV0ZSggKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggc3ByICE9IG51bGwgKSBzcHIucmVtb3ZlRnJvbVBhcmVudCgpO1xyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICB0aGlzLmF1dG9BY3Rpb25TcHJpdGUgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLmF1dG9BY3Rpb25UYXJnZXRTcHJpdGUgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwciA9IHRoaXMuYXV0b0FjdGlvblRhcmdldFNwcml0ZTtcclxuXHJcbiAgICAgICAgICAgIG5ldyBUd2VlbiggdGhpcy5hdXRvQWN0aW9uVGFyZ2V0U3ByaXRlLDIwMCx7IGFscGhhOiAwIH0gKVxyXG4gICAgICAgICAgICAgICAgLm9uQ29tcGxldGUoICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHNwciAhPSBudWxsICkgc3ByLnJlbW92ZUZyb21QYXJlbnQoKTtcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgdGhpcy5hdXRvQWN0aW9uVGFyZ2V0U3ByaXRlID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QXV0b0FjdGlvbiggeCx5ICkge1xyXG4gICAgICAgIGxldCBjO1xyXG4gICAgICAgIGxldCB0eCx0eTtcclxuICAgICAgICBsZXQgbW9kZTtcclxuICAgICAgICBjb25zdCB0ID0gR0xPQkFMLnBsYXllci5nZXROZWFyRW50aXRpZXMoIDUsbnVsbCx4LHkgKTtcclxuICAgICAgICBsZXQgZG9Ob3RoaW5nID0gdHJ1ZTtcclxuICAgICAgICBsZXQgYWN0aW9uO1xyXG4gICAgICAgIGxldCBpY29uMTtcclxuICAgICAgICBsZXQgaWNvbjI7XHJcblxyXG4gICAgICAgIC8vIOq3vOyymOydmCDsmKTruIzsoJ3tirjrpbwg6rKA7Yag7ZWY6rOgIO2VoCDsiJgg7J6I64qUIOydvOydhCDssL7ripTri6RcclxuICAgICAgICBmb3IgKCBjb25zdCBpIGluIHQgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHYgPSB0W2ldO1xyXG5cclxuICAgICAgICAgICAgaWYgKCB2ICYmIHYuaXNNb25zdGVyICYmICF2LmlzUGV0ICYmICF2LmlzTnBjICYmIHYuY2FuQmVTZWVuKClbMF0gKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDrqqzsiqTthLAg67Cc6rKsXHJcbiAgICAgICAgICAgICAgICBjID0gdjtcclxuICAgICAgICAgICAgICAgIFt0eCx0eV0gPSBbYy50aWxlWCxjLnRpbGVZXTtcclxuICAgICAgICAgICAgICAgIFt4LHldID0gR0xPQkFMLndvcmxkLnRpbGVDZW50ZXJUb1dvcmxkKCB0eCx0eSApLnh5O1xyXG4gICAgICAgICAgICAgICAgaWNvbjEgPSBHTE9CQUwucGxheWVyLmdldFdlYXBvbkltYWdlKCk7XHJcbiAgICAgICAgICAgICAgICBpY29uMiA9IGMubWVzaC5jbG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgZG9Ob3RoaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICggdiAmJiB2LmlzUHJvcCAmJiAhdi5wcm9wZXJ0eS5uZWVkUGlja0F4ZSAmJiB2LmNhbkJlU2VlbigpWzBdICkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHYuY2FuQmVTZWVuKClbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgYyA9IHY7XHJcbiAgICAgICAgICAgICAgICBbdHgsdHldID0gW2MudGlsZVgsYy50aWxlWV07XHJcbiAgICAgICAgICAgICAgICBbeCx5XSA9IEdMT0JBTC53b3JsZC50aWxlQ2VudGVyVG9Xb3JsZCggdHgsdHkgKS54eTtcclxuICAgICAgICAgICAgICAgIGljb24xID0gR0xPQkFMLnBsYXllci5nZXRXZWFwb25JbWFnZSgpO1xyXG4gICAgICAgICAgICAgICAgaWNvbjIgPSBjLm1lc2guY2xvbmUoKTtcclxuICAgICAgICAgICAgICAgIGRvTm90aGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIHYgJiYgdi5pc1Byb3AgJiYgdi5wcm9wZXJ0eS5uZWVkUGlja0F4ZSAmJiBHTE9CQUwud29ybGQuZ2V0RGlzdGFuY2VCZXR3ZWVuRW50aXRpZXMoIHYsR0xPQkFMLnBsYXllciApID09IDEgKSB7XHJcbiAgICAgICAgICAgICAgICBpY29uMSA9IEdMT0JBTC5wbGF5ZXIuZ2V0RXF1aXBwZWRJdGVtSW1hZ2UoIFwicGlja2F4ZVwiICkgfHwgR0xPQkFMLnBsYXllci5nZXRXZWFwb25JbWFnZSgpO1xyXG4gICAgICAgICAgICAgICAgYyA9IHY7XHJcbiAgICAgICAgICAgICAgICBbdHgsdHldID0gW2MudGlsZVgsYy50aWxlWV07XHJcbiAgICAgICAgICAgICAgICBbeCx5XSA9IEdMT0JBTC53b3JsZC50aWxlQ2VudGVyVG9Xb3JsZCggdHgsdHkgKS54eTtcclxuICAgICAgICAgICAgICAgIGljb24yID0gYy5tZXNoLmNsb25lKCk7XHJcbiAgICAgICAgICAgICAgICBkb05vdGhpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIGRvTm90aGluZyApIHsgXHJcbiAgICAgICAgICAgIC8vIOq3vOyymOyXkOyEnCDrsJzqsqztlZzqsowg7JeG7J2MLiDslYTrrLTqsoPrj4Qg7JWI7ZWoXHJcbiAgICAgICAgfSBlbHNlIGlmICggR0xPQkFMLndvcmxkLmdldERpc3RhbmNlQmV0d2VlbkVudGl0aWVzKCBjLEdMT0JBTC5wbGF5ZXIgKSA9PSAxICkge1xyXG4gICAgICAgICAgICBpZiAoIGMuaXNQcm9wICkge1xyXG4gICAgICAgICAgICAgICAgYWN0aW9uID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIEdMT0JBTC5wbGF5ZXIuaW50ZXJhY3QoIHR4LHR5LGZhbHNlLHgseSApO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFjdGlvbiA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBHTE9CQUwucGxheWVyLmludGVyYWN0KCB0eCx0eSx0aGlzLm1vZGUgPT0gXCJyYW5nZWRcIix4LHkgKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIHRoaXMubW9kZSA9PSBcInJhbmdlZFwiICkge1xyXG4gICAgICAgICAgICAgICAgYWN0aW9uID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIEdMT0JBTC5wbGF5ZXIuaW50ZXJhY3QoIHR4LHR5LHRydWUseCx5ICk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gW2FjdGlvbixpY29uMSxpY29uMix0eCx0eV07XHJcbiAgICB9XHJcblxyXG4gICAgZG9BdXRvQWN0aW9uKCB4LHkgKSB7XHJcbiAgICAgICAgdGhpcy5oaWRlQXV0b0FjdGlvbigpO1xyXG4gICAgICAgIGNvbnN0IFthY3Rpb24sIGljb24xLCBpY29uMiwgdHgsIHR5XSA9IHRoaXMuZ2V0QXV0b0FjdGlvbiggeCwgeSApO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyggYOyekOuPmeyVoeyFmCDsi6TtlolgICk7XHJcblxyXG4gICAgICAgIGlmICggdHggKSB7XHJcbiAgICAgICAgICAgIGFjdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgVHdlZW4sIGhhbmd1bCwgTWVzaCwgVGV4dEZpZWxkLCBlYXNpbmcsIEJpdG1hcCwgc3RhZ2UsIFNjZW5lTWFuYWdlciwgYXBwbGljYXRpb24sIFNvdW5kLCBSZW5kZXJUYXJnZXQsIFV0aWxzLCBNb3ZpZUNsaXAsIFRleHR1cmUsIFRleHR1cmVCYXNlLCBTcHJpdGUsIEV2ZW50LCBUaW1lciB9IGZyb20gXCJAZW5naW5lL2ZsYXRmYXN0XCI7XHJcblxyXG5pbXBvcnQgR2FtZU1hcCBmcm9tIFwiLi4vd29ybGQvZ2FtZU1hcFwiO1xyXG5pbXBvcnQgQXV0b01hcCBmcm9tIFwiLi9hdXRvTWFwXCI7XHJcbmltcG9ydCBDdXJzb3IgZnJvbSBcIi4vY3Vyc29yXCI7XHJcbmltcG9ydCBJbnRlcmZhY2UgZnJvbSBcIi4vaW50ZXJmYWNlXCI7XHJcbmltcG9ydCBJY29uUGFjayBmcm9tIFwiQGxpYi9pY29uUGFja1wiO1xyXG5pbXBvcnQgQnV0dG9uMiBmcm9tIFwiQGxpYi9idXR0b24yXCI7XHJcbmltcG9ydCBSYW5kb20gZnJvbSBcIkBsaWIvcmFuZG9tXCI7XHJcbmltcG9ydCBDb2xvcnMgZnJvbSBcIkBsaWIvY29sb3JzXCI7XHJcbmltcG9ydCBHcmlkOSBmcm9tIFwiQGxpYi9ncmlkOVwiO1xyXG5pbXBvcnQgUHJvcCBmcm9tIFwiLi4vZW50aXR5L3Byb3BcIjtcclxuaW1wb3J0IE1vbnN0ZXIgZnJvbSBcIi4uL2VudGl0eS9tb25zdGVyXCI7XHJcbmltcG9ydCBOcGMgZnJvbSBcIi4uL2VudGl0eS9ucGNcIjtcclxuaW1wb3J0IEl0ZW0gZnJvbSBcIi4uL2VudGl0eS9pdGVtXCI7XHJcblxyXG5pbXBvcnQgR0xPQkFMIGZyb20gXCIuLi9nbG9iYWxcIjtcclxuaW1wb3J0IENPTkZJRyBmcm9tIFwiLi4vY29uZmlnXCI7XHJcblxyXG4vKlxyXG5cclxu64yA7IOB7J2YIOygleuztOulvCDrqqjri6zroZwg67O07Jes7KSMXHJcblxyXG7snqXruYRcclxuLSDsnqXruYTtlZzri6QgLyDsnqXruYTtlbTsoJxcclxuLSDrsoTrprDri6QgLyDsoJzrrLzroZwg67Cb7Lmc64ukXHJcbi0g642Y7KeE64ukXHJcblxyXG7shozrqqjtkohcclxuLSDsgqzsmqntlZzri6QgLyDrqLnripTri6RcclxuLSDrsoTrprDri6QgLyDsoJzrrLzroZwg67Cb7Lmc64ukXHJcbi0g642Y7KeE64ukXHJcblxyXG7tmZXsnbjrkJjsp4Ag7JWK7J2AIOusvOqxtFxyXG4tIOqwkOygle2VnOuLpFxyXG5cclxuXHJcblxyXG4qL1xyXG5cclxuLyoqXHJcbiAqIEB0aGlzIERldGFpbEluZm9XaW5kb3dcclxuICpcclxuICovXHJcbmZ1bmN0aW9uIHNob3dDb250ZW50KCkge1xyXG4gICAgbGV0IGJhY2sgPSB0aGlzLmJhc2VTcHI7XHJcbiAgICBsZXQgdGFyZ2V0ID0gdGhpcy50YXJnZXQ7XHJcbiAgICBsZXQgeCA9IGFwcGxpY2F0aW9uLmxvZ2ljYWxWaWV3cG9ydC53aWR0aCAvIDI7XHJcbiAgICBsZXQgeSA9ICggYXBwbGljYXRpb24ubG9naWNhbFZpZXdwb3J0LmhlaWdodCAtIHRoaXMuaGVpZ2h0ICkgLyAyICsgMjA7XHJcbiAgICBsZXQgaWNvbiA9IHRhcmdldC5nZXRJY29uKCk7XHJcblxyXG4gICAgaWNvbi5zZXRQb3NpdGlvbiggeCwgeSArIDIzICk7XHJcbiAgICBiYWNrLmFkZENoaWxkKCBpY29uICk7XHJcbiAgICBsZXQgdGYgPSBHTE9CQUwuaW50ZXJmYWNlLmdldEhpcmVzVGV4dEZpZWxkKCB0YXJnZXQubmFtZSApO1xyXG5cclxuICAgIHRmLnNldFRleHRDb2xvciggdGFyZ2V0LmNvbG9yICk7XHJcbiAgICB0Zi5zZXRQb3NpdGlvbiggeCAtIHRmLmdldFdpZHRoKCkgLyAyLCB5ICsgNDQgLSAxMCApO1xyXG4gICAgYmFjay5hZGRDaGlsZCggdGYgKTtcclxuICAgIGxldCB0dyA9IEdMT0JBTC5pbnRlcmZhY2UuZ2V0SGlyZXNUZXh0V3JhcChcclxuICAgICAgICB0YXJnZXQuZ2V0RGVzYygpLFxyXG4gICAgICAgIHRoaXMud2lkdGggLSAyMCwgMTAwLCAxNSwgSW50ZXJmYWNlLnR0ZiwgXCJjZW50ZXJcIiApO1xyXG5cclxuICAgIHR3LnNldEFuY2hvclBvaW50KCAwLjUsIDAgKTtcclxuICAgIHR3LnNldFRleHRDb2xvciggMHhjMGMwYzAgKTtcclxuICAgIHR3LnNldFBvc2l0aW9uKCB4LCB5ICsgNTAgKTtcclxuICAgIGJhY2suYWRkQ2hpbGQoIHR3ICk7XHJcbiAgICBpZiAoIHRhcmdldC5wcm9wZXJ0eS50eXBlID09IFwiaW5zdHJ1bWVudFwiICkge1xyXG4gICAgICAgIGxldCBiID0gbmV3IEJpdG1hcCggbmV3IFRleHR1cmUoIFwiZGV0YWlsQnV0dG9uLnBuZ1wiLCBmYWxzZSwgeyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKSApO1xyXG5cclxuICAgICAgICBiLnNldEFuY2hvclBvaW50KCAwLjUsIDAuNSApO1xyXG4gICAgICAgIGxldCB0ZiA9IEdMT0JBTC5pbnRlcmZhY2UuZ2V0SGlyZXNUZXh0RmllbGQoIFwi7Jew7KO87ZWc64ukXCIsIEdMT0JBTC5pbnRlcmZhY2UudWlUdGYgKTtcclxuXHJcbiAgICAgICAgdGYuc2V0VGV4dENvbG9yKCAweDAwMDAwMCApO1xyXG4gICAgICAgIHRmLnNldFBvc2l0aW9uKCAtdGYuZ2V0V2lkdGgoKSAvIDIgKyA0LCAzIC0gMTAgKTtcclxuICAgICAgICBiLmFkZENoaWxkKCB0ZiApO1xyXG4gICAgICAgIGxldCBpY29uID0gbmV3IEljb25QYWNrKCBuZXcgVGV4dHVyZSggXCJkZXRhaWxCdXR0b25JY29uLnBuZ1wiLCBmYWxzZSwgeyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMSwgMiwgMTYsIDE2LCAweDAwMDAwMCwgMSApO1xyXG5cclxuICAgICAgICBpY29uLnNldFNjYWxlKCAwLjc1ICk7XHJcbiAgICAgICAgaWNvbi5zZXRQb3NpdGlvbiggLXRmLmdldFdpZHRoKCkgLyAyIC0gNCwgMCApO1xyXG4gICAgICAgIGIuYWRkQ2hpbGQoIGljb24gKTtcclxuICAgICAgICBsZXQgYnRuID0gbmV3IEJ1dHRvbjIoIHtcclxuICAgICAgICAgICAgdXA6ICAgeyBpbWFnZTogYiwgdXNlU3ByaXRlQW5jaG9yUG9pbnQ6IHRydWUgfSxcclxuICAgICAgICAgICAgZG93bjogeyB5OiAxIH0sXHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgICAgICBidG4uc2V0UG9zaXRpb24oIHgsIHkgKyB0aGlzLmhlaWdodCAtIDYzICk7XHJcbiAgICAgICAgYmFjay5hZGRDaGlsZCggYnRuICk7XHJcbiAgICAgICAgYnRuLm9uKCBcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICBHTE9CQUwucGxheWVyLmludmVudG9yeS5jbG9zZSggKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IG5vdGUgPSBHTE9CQUwucGxheWVyLmludmVudG9yeS5maW5kRXF1aXBwZWRJdGVtQnlUeXBlKCBcIm5vdGVcIiApWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggbm90ZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBHTE9CQUwucGxheWVyLnBsYXlNdXNpYyggbm90ZS5wcm9wZXJ0eS5tbWwgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgR0xPQkFMLmludGVyZmFjZS5hZGRMb2coIFwi7Jew7KO8IO2VoCDslYXrs7TqsIAg7JeG64ukLlwiICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gKTtcclxuICAgICAgICB9ICk7XHJcbiAgICAgICAgaWYgKCB0YXJnZXQuaXNFcXVpcHBhYmxlKCkgJiYgIXRhcmdldC5lcXVpcHBlZCApIHtcclxuICAgICAgICAgICAgYnRuLnNldEVuYWJsZWQoIGZhbHNlICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHtcclxuICAgICAgICBsZXQgdGV4dCwgY29sO1xyXG5cclxuICAgICAgICBpZiAoIHRhcmdldC5lcXVpcHBlZCApIHtcclxuICAgICAgICAgICAgdGV4dCA9IFwi7J6l67mE7ZW07KCcXCI7XHJcbiAgICAgICAgICAgIGNvbCA9IDI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGV4dCA9IFwi7J6l67mE7ZWc64ukXCI7XHJcbiAgICAgICAgICAgIGNvbCA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBiID0gbmV3IEJpdG1hcCggbmV3IFRleHR1cmUoIFwiZGV0YWlsQnV0dG9uLnBuZ1wiLCBmYWxzZSwgeyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKSApO1xyXG5cclxuICAgICAgICBiLnNldEFuY2hvclBvaW50KCAwLjUsIDAuNSApO1xyXG4gICAgICAgIGxldCB0ZiA9IEdMT0JBTC5pbnRlcmZhY2UuZ2V0SGlyZXNUZXh0RmllbGQoIHRleHQsIEdMT0JBTC5pbnRlcmZhY2UudWlUdGYgKTtcclxuXHJcbiAgICAgICAgdGYuc2V0VGV4dENvbG9yKCAweDAwMDAwMCApO1xyXG4gICAgICAgIHRmLnNldFBvc2l0aW9uKCAtdGYuZ2V0V2lkdGgoKSAvIDIgKyA0LCAzIC0gMTAgKTtcclxuICAgICAgICBiLmFkZENoaWxkKCB0ZiApO1xyXG4gICAgICAgIGxldCBpY29uID0gbmV3IEljb25QYWNrKCBuZXcgVGV4dHVyZSggXCJkZXRhaWxCdXR0b25JY29uLnBuZ1wiLCBmYWxzZSwgeyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sLCAxLCAxNiwgMTYsIDB4MDAwMDAwLCAxICk7XHJcblxyXG4gICAgICAgIGljb24uc2V0U2NhbGUoIDAuNzUgKTtcclxuICAgICAgICBpY29uLnNldFBvc2l0aW9uKCAtdGYuZ2V0V2lkdGgoKSAvIDIgLSA0LCAwICk7XHJcbiAgICAgICAgYi5hZGRDaGlsZCggaWNvbiApO1xyXG4gICAgICAgIGxldCBidG4gPSBuZXcgQnV0dG9uMigge1xyXG4gICAgICAgICAgICB1cDogICB7IGltYWdlOiBiIH0sXHJcbiAgICAgICAgICAgIGRvd246IHsgeTogMSB9LFxyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgYnRuLnNldFBvc2l0aW9uKCB4IC0gMzAsIHkgKyB0aGlzLmhlaWdodCAtIDM4ICk7XHJcbiAgICAgICAgYmFjay5hZGRDaGlsZCggYnRuICk7XHJcbiAgICAgICAgYnRuLm9uKCBcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICBHTE9CQUwucGxheWVyLmludmVudG9yeS50cnlFcXVpcCggdGFyZ2V0ICk7XHJcbiAgICAgICAgfSApO1xyXG4gICAgICAgIGlmICggIXRhcmdldC5pc0VxdWlwcGFibGUoKSApIHtcclxuICAgICAgICAgICAgYnRuLnNldEVuYWJsZWQoIGZhbHNlICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAge1xyXG4gICAgICAgIGxldCBiID0gbmV3IEJpdG1hcCggbmV3IFRleHR1cmUoIFwiZGV0YWlsQnV0dG9uLnBuZ1wiLCBmYWxzZSwgeyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKSApO1xyXG5cclxuICAgICAgICBiLnNldEFuY2hvclBvaW50KCAwLjUsIDAuNSApO1xyXG4gICAgICAgIGxldCB0ZiA9IEdMT0JBTC5pbnRlcmZhY2UuZ2V0SGlyZXNUZXh0RmllbGQoIFwi642Y7KeE64ukXCIsIEdMT0JBTC5pbnRlcmZhY2UudWlUdGYgKTtcclxuXHJcbiAgICAgICAgdGYuc2V0VGV4dENvbG9yKCAweDAwMDAwMCApO1xyXG4gICAgICAgIHRmLnNldFBvc2l0aW9uKCAtdGYuZ2V0V2lkdGgoKSAvIDIgKyA0LCAzIC0gMTAgKTtcclxuICAgICAgICBiLmFkZENoaWxkKCB0ZiApO1xyXG4gICAgICAgIGxldCBpY29uID0gbmV3IEljb25QYWNrKCBuZXcgVGV4dHVyZSggXCJkZXRhaWxCdXR0b25JY29uLnBuZ1wiLCBmYWxzZSwgeyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNywgMSwgMTYsIDE2LCAweDAwMDAwMCwgMSApO1xyXG5cclxuICAgICAgICBpY29uLnNldFNjYWxlKCAwLjc1ICk7XHJcbiAgICAgICAgaWNvbi5zZXRQb3NpdGlvbiggLXRmLmdldFdpZHRoKCkgLyAyIC0gNCwgMCApO1xyXG4gICAgICAgIGIuYWRkQ2hpbGQoIGljb24gKTtcclxuICAgICAgICBsZXQgYnRuID0gbmV3IEJ1dHRvbjIoIHtcclxuICAgICAgICAgICAgdXA6ICAgeyBpbWFnZTogYiB9LFxyXG4gICAgICAgICAgICBkb3duOiB7IHk6IDEgfSxcclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgIGJ0bi5zZXRQb3NpdGlvbiggeCArIDMwLCB5ICsgdGhpcy5oZWlnaHQgLSAzOCApO1xyXG4gICAgICAgIGJ0bi5zZXRFbmFibGVkKCBmYWxzZSApO1xyXG4gICAgICAgIGJhY2suYWRkQ2hpbGQoIGJ0biApO1xyXG4gICAgfVxyXG4gICAge1xyXG4gICAgICAgIGxldCBiID0gbmV3IEJpdG1hcCggbmV3IFRleHR1cmUoIFwiZGV0YWlsQnV0dG9uLnBuZ1wiLCBmYWxzZSwgeyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKSApO1xyXG5cclxuICAgICAgICBiLnNldEFuY2hvclBvaW50KCAwLjUsIDAuNSApO1xyXG4gICAgICAgIGxldCB0ZiA9IEdMT0JBTC5pbnRlcmZhY2UuZ2V0SGlyZXNUZXh0RmllbGQoIFwi6rCQ7KCV7ZWc64ukXCIsIEdMT0JBTC5pbnRlcmZhY2UudWlUdGYgKTtcclxuXHJcbiAgICAgICAgdGYuc2V0VGV4dENvbG9yKCAweDAwMDAwMCApO1xyXG4gICAgICAgIHRmLnNldFBvc2l0aW9uKCAtdGYuZ2V0V2lkdGgoKSAvIDIgKyA0LCAzIC0gMTAgKTtcclxuICAgICAgICBiLmFkZENoaWxkKCB0ZiApO1xyXG4gICAgICAgIGxldCBpY29uID0gbmV3IEljb25QYWNrKCBuZXcgVGV4dHVyZSggXCJkZXRhaWxCdXR0b25JY29uLnBuZ1wiLCBmYWxzZSwgeyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNCwgMSwgMTYsIDE2LCAweDAwMDAwMCwgMSApO1xyXG5cclxuICAgICAgICBpY29uLnNldFNjYWxlKCAwLjc1ICk7XHJcbiAgICAgICAgaWNvbi5zZXRQb3NpdGlvbiggLXRmLmdldFdpZHRoKCkgLyAyIC0gNCwgMCApO1xyXG4gICAgICAgIGIuYWRkQ2hpbGQoIGljb24gKTtcclxuICAgICAgICBsZXQgYnRuID0gbmV3IEJ1dHRvbjIoIHtcclxuICAgICAgICAgICAgdXA6ICAgeyBpbWFnZTogYiB9LFxyXG4gICAgICAgICAgICBkb3duOiB7IHk6IDEgfSxcclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgIGJ0bi5zZXRQb3NpdGlvbiggeCAtIDMwLCB5ICsgdGhpcy5oZWlnaHQgLSAxOCApO1xyXG4gICAgICAgIGJ0bi5zZXRFbmFibGVkKCBmYWxzZSApO1xyXG4gICAgICAgIGJhY2suYWRkQ2hpbGQoIGJ0biApO1xyXG4gICAgfVxyXG4gICAge1xyXG4gICAgICAgIGxldCBiID0gbmV3IEJpdG1hcCggbmV3IFRleHR1cmUoIFwiZGV0YWlsQnV0dG9uLnBuZ1wiLCBmYWxzZSwgeyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKSApO1xyXG5cclxuICAgICAgICBiLnNldEFuY2hvclBvaW50KCAwLjUsIDAuNSApO1xyXG4gICAgICAgIGxldCB0ZiA9IEdMT0JBTC5pbnRlcmZhY2UuZ2V0SGlyZXNUZXh0RmllbGQoIFwi67KE66aw64ukXCIsIEdMT0JBTC5pbnRlcmZhY2UudWlUdGYgKTtcclxuXHJcbiAgICAgICAgdGYuc2V0VGV4dENvbG9yKCAweDAwMDAwMCApO1xyXG4gICAgICAgIHRmLnNldFBvc2l0aW9uKCAtdGYuZ2V0V2lkdGgoKSAvIDIgKyA0LCAzIC0gMTAgKTtcclxuICAgICAgICBiLmFkZENoaWxkKCB0ZiApO1xyXG4gICAgICAgIGxldCBpY29uID0gbmV3IEljb25QYWNrKCBuZXcgVGV4dHVyZSggXCJkZXRhaWxCdXR0b25JY29uLnBuZ1wiLCBmYWxzZSwgeyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMywgMSwgMTYsIDE2LCAweDAwMDAwMCwgMSApO1xyXG5cclxuICAgICAgICBpY29uLnNldFNjYWxlKCAwLjc1ICk7XHJcbiAgICAgICAgaWNvbi5zZXRQb3NpdGlvbiggLXRmLmdldFdpZHRoKCkgLyAyIC0gNCwgMCApO1xyXG4gICAgICAgIGIuYWRkQ2hpbGQoIGljb24gKTtcclxuICAgICAgICBsZXQgYnRuID0gbmV3IEJ1dHRvbjIoIHtcclxuICAgICAgICAgICAgdXA6ICAgeyBpbWFnZTogYiB9LFxyXG4gICAgICAgICAgICBkb3duOiB7IHk6IDEgfSxcclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgIGJ0bi5zZXRQb3NpdGlvbiggeCArIDMwLCB5ICsgdGhpcy5oZWlnaHQgLSAxOCApO1xyXG4gICAgICAgIGJhY2suYWRkQ2hpbGQoIGJ0biApO1xyXG4gICAgICAgIGJ0bi5vbiggXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgR0xPQkFMLnBsYXllci5pbnZlbnRvcnkuZHJvcEl0ZW0oIHRhcmdldCApO1xyXG4gICAgICAgIH0gKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEB0aGlzIERldGFpbEluZm9XaW5kb3dcclxuICpcclxuICogQHBhcmFtIHsqfSBlXHJcbiAqL1xyXG5mdW5jdGlvbiBvblBvaW50ZXJEb3duKCBlICkge1xyXG4gICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEB0aGlzIERldGFpbEluZm9XaW5kb3dcclxuICpcclxuICogQHBhcmFtIHsqfSBlXHJcbiAqL1xyXG5mdW5jdGlvbiBvblBvaW50ZXJEb3duRnJhbWUoIGUgKSB7XHJcbiAgICBpZiAoIHRoaXMud2YuaGl0VGVzdFBvaW50KCBlLngsIGUueSApICkge1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGV0YWlsSW5mb1dpbmRvdyBleHRlbmRzIFNwcml0ZSB7XHJcbiAgICBjb25zdHJ1Y3RvciggdGFyZ2V0ICkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IDE0MDtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IDE4MDtcclxuICAgICAgICBjb25zb2xlLmxvZyggXCLsnpDshLjtlZwg7KCV67O0IOyalOyyrVwiLCB0YXJnZXQubmFtZSApO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgfVxyXG5cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgbGV0IFt4LCB5LCB3LCBoXSA9IGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMueHl3aDtcclxuICAgICAgICBsZXQgYmFjayA9IE1lc2guY3JlYXRlQm94KCB4LCB5LCB3LCBoLCAweDAwMDAwMCwgMC43ICk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkQ2hpbGQoIGJhY2sgKTtcclxuICAgICAgICBiYWNrLm9uKCBFdmVudC5QT0lOVEVSX0RPV04sIG9uUG9pbnRlckRvd24sIHRoaXMgKTtcclxuICAgICAgICBiYWNrLm9uKCBFdmVudC5QT0lOVEVSX1VQLCBvblBvaW50ZXJEb3duLCB0aGlzICk7XHJcbiAgICAgICAgdGhpcy5iYWNrID0gYmFjaztcclxuICAgICAgICBsZXQgd2YgPSBuZXcgR3JpZDkoIG5ldyBUZXh0dXJlKCBcIlJlY3RGcmFtZS5wbmdcIiwgZmFsc2UsIHsgZm9ybWF0OiBUZXh0dXJlQmFzZS5SR0JBNTU1MSB9ICkgKTtcclxuXHJcbiAgICAgICAgdGhpcy5vcGVuUmF0ZSA9IDA7XHJcbiAgICAgICAgYmFjay5hZGRDaGlsZCggd2YgKTtcclxuICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLm1vZGFsTGF5ZXIub3JpZ2luLmFkZENoaWxkKCB0aGlzICk7XHJcbiAgICAgICAgd2Yub24oIEV2ZW50LlBPSU5URVJfRE9XTiwgb25Qb2ludGVyRG93bkZyYW1lLCB0aGlzICk7XHJcbiAgICAgICAgd2Yub24oIEV2ZW50LlBPSU5URVJfVVAsIG9uUG9pbnRlckRvd25GcmFtZSwgdGhpcyApO1xyXG4gICAgICAgIHRoaXMud2YgPSB3ZjtcclxuICAgICAgICB0aGlzLmJhc2VTcHIgPSBuZXcgU3ByaXRlKCk7XHJcbiAgICAgICAgdGhpcy53Zi5hZGRDaGlsZCggdGhpcy5iYXNlU3ByICk7XHJcbiAgICAgICAgc2hvd0NvbnRlbnQuY2FsbCggdGhpcyApO1xyXG4gICAgICAgIG5ldyBUd2VlbiggdGhpcywgMzAwLCB7IG9wZW5SYXRlOiAxLjAgfSwgeyBlYXNlOiBlYXNpbmcub3V0QmFjayB9IClcclxuICAgICAgICAgICAgLm9uQ2hhbmdlKCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB3Zi5zZXRSZWN0KCAoIGFwcGxpY2F0aW9uLmxvZ2ljYWxWaWV3cG9ydC53aWR0aCAtIHRoaXMud2lkdGggKSAvIDIsICggYXBwbGljYXRpb24ubG9naWNhbFZpZXdwb3J0LmhlaWdodCAtIHRoaXMuaGVpZ2h0ICogdGhpcy5vcGVuUmF0ZSApIC8gMiArIDIwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCAqIHRoaXMub3BlblJhdGUgKTtcclxuICAgICAgICAgICAgICAgIC8vd2Yuc2V0Q2xpcCgoYXBwbGljYXRpb24ubG9naWNhbFZpZXdwb3J0LndpZHRoIC0gdGhpcy53aWR0aCkgLyAyLCAoYXBwbGljYXRpb24ubG9naWNhbFZpZXdwb3J0LmhlaWdodCAtIHRoaXMuaGVpZ2h0ICogdGhpcy5vcGVuUmF0ZSkgLyAyICsgMjAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0ICogdGhpcy5vcGVuUmF0ZSk7XHJcbiAgICAgICAgICAgIH0gKTtcclxuICAgICAgICBTb3VuZC5wbGF5U291bmQoIFwic291bmQvdG9wX21lbnVfb3Blbi53YXZcIiApO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIFNvdW5kLnBsYXlTb3VuZCggXCJzb3VuZC90b3BfbWVudV9jbG9zZS53YXZcIiApO1xyXG4gICAgICAgIHRoaXMuYmFjay5yZW1vdmVFdmVudExpc3RlbmVyKCBFdmVudC5QT0lOVEVSX0RPV04sIG9uUG9pbnRlckRvd24sIHRoaXMgKTtcclxuICAgICAgICB0aGlzLmJhY2sucmVtb3ZlRXZlbnRMaXN0ZW5lciggRXZlbnQuUE9JTlRFUl9VUCwgb25Qb2ludGVyRG93biwgdGhpcyApO1xyXG4gICAgICAgIG5ldyBUd2VlbiggdGhpcywgMjAwLCB7IG9wZW5SYXRlOiAwLjAgfSwgeyBlYXNlOiBlYXNpbmcuaW5CYWNrIH0gKVxyXG4gICAgICAgICAgICAub25DaGFuZ2UoICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMud2Yuc2V0UmVjdCggKCBhcHBsaWNhdGlvbi5sb2dpY2FsVmlld3BvcnQud2lkdGggLSB0aGlzLndpZHRoICkgLyAyLCAoIGFwcGxpY2F0aW9uLmxvZ2ljYWxWaWV3cG9ydC5oZWlnaHQgLSB0aGlzLmhlaWdodCAqIHRoaXMub3BlblJhdGUgKSAvIDIgKyAyMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQgKiB0aGlzLm9wZW5SYXRlICk7XHJcbiAgICAgICAgICAgICAgICAvL3RoaXMud2Yuc2V0Q2xpcCgoYXBwbGljYXRpb24ubG9naWNhbFZpZXdwb3J0LndpZHRoIC0gdGhpcy53aWR0aCkgLyAyLCAoYXBwbGljYXRpb24ubG9naWNhbFZpZXdwb3J0LmhlaWdodCAtIHRoaXMuaGVpZ2h0ICogdGhpcy5vcGVuUmF0ZSkgLyAyICsgMjAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0ICogdGhpcy5vcGVuUmF0ZSk7XHJcbiAgICAgICAgICAgIH0gKVxyXG4gICAgICAgICAgICAub25Db21wbGV0ZSggKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgICAgIH0gKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG4iLCJpbXBvcnQgeyBUd2VlbiwgTGF5b3V0LCBGb250LCBQaXhlbCwgaGFuZ3VsLCBNZXNoLFRleHRGaWVsZCwgZWFzaW5nLCBCaXRtYXAsIHN0YWdlLCBTY2VuZU1hbmFnZXIsIGFwcGxpY2F0aW9uLCBTb3VuZCwgUmVuZGVyVGFyZ2V0LCBVdGlscywgTW92aWVDbGlwLCBUZXh0dXJlLCBUZXh0dXJlQmFzZSwgU3ByaXRlLCBFdmVudCwgVGltZXIsIFNoYXBlLCBNc2RmRm9udCwgQml0bWFwRm9udCB9IGZyb20gXCJAZW5naW5lL2ZsYXRmYXN0XCI7XHJcblxyXG5pbXBvcnQgR2FtZU1hcCBmcm9tIFwiLi4vd29ybGQvZ2FtZU1hcFwiO1xyXG5pbXBvcnQgQXV0b01hcCBmcm9tIFwiLi9hdXRvTWFwXCI7XHJcbmltcG9ydCBJY29uUGFjayBmcm9tIFwiQGxpYi9pY29uUGFja1wiO1xyXG5pbXBvcnQgQnV0dG9uMiBmcm9tIFwiQGxpYi9idXR0b24yXCI7XHJcbmltcG9ydCBSYW5kb20gZnJvbSBcIkBsaWIvcmFuZG9tXCI7XHJcbmltcG9ydCBDb2xvcnMgZnJvbSBcIkBsaWIvY29sb3JzXCI7XHJcbmltcG9ydCBHcmlkOSBmcm9tIFwiQGxpYi9ncmlkOVwiO1xyXG5pbXBvcnQgUHJvcCBmcm9tIFwiLi4vZW50aXR5L3Byb3BcIjtcclxuaW1wb3J0IE1vbnN0ZXIgZnJvbSBcIi4uL2VudGl0eS9tb25zdGVyXCI7XHJcbmltcG9ydCBOcGMgZnJvbSBcIi4uL2VudGl0eS9ucGNcIjtcclxuaW1wb3J0IEl0ZW0gZnJvbSBcIi4uL2VudGl0eS9pdGVtXCI7XHJcbmltcG9ydCBUb3BNZW51IGZyb20gXCIuL3RvcE1lbnVcIjtcclxuaW1wb3J0IEN1cnNvciBmcm9tIFwiLi9jdXJzb3JcIjtcclxuaW1wb3J0IEFjdGlvblNlbGVjdG9yIGZyb20gXCIuL2FjdGlvblNlbGVjdG9yXCI7XHJcblxyXG5pbXBvcnQgR0xPQkFMIGZyb20gXCIuLi9nbG9iYWxcIjtcclxuaW1wb3J0IENPTkZJRyBmcm9tIFwiLi4vY29uZmlnXCI7XHJcblxyXG5cclxuY29uc3QgbG9nV2luZG93V2lkdGggPSAyMDA7XHJcbmNvbnN0IGxvZ1dpbmRvd0hlaWdodCA9IDUwO1xyXG5jb25zdCBpbmZvV2luZG93SGVpZ2h0ID0gNjA7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyBvbkVudGVyRnJhbWU7XHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4vKipcclxuICogXHJcbiAqIEB0aGlzIHtJbnRlcmZhY2V9XHJcbiAqL1xyXG5mdW5jdGlvbiBvbkVudGVyRnJhbWUoKSB7XHJcbiAgICBjb25zdCBbaHAwLCBocE1heDAsIG1wMCwgbXBNYXgwLCBsZXZlbDAsIGV4cDAsIGV4cE1heDAsIGdvbGQwXSA9IHRoaXMub2xkVmFsdWU7XHJcbiAgICBjb25zdCBwbCA9IEdMT0JBTC5wbGF5ZXI7XHJcblxyXG4gICAgaWYgKCAhcGwgKSB7XHJcbiAgICAgICAgLy8g7JWE7KeBIO2UjOugiOydtOyWtOqwgCDsl4bripQg6rK97JqwXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggdGhpcy53YWl0aW5nRm9yV29ybGRBbmRQbGF5ZXIgJiYgR0xPQkFMLndvcmxkICYmIHBsICkge1xyXG4gICAgICAgIC8vIOykgOu5hOqwgCDrkJjsl4jsnLzrr4DroZwg7Lyg64ukXHJcbiAgICAgICAgdGhpcy53YWl0aW5nRm9yV29ybGRBbmRQbGF5ZXIgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNob3coKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBbaHAsIGhwTWF4LCBtcCwgbXBNYXgsIGxldmVsLCBleHAsIGV4cE1heCwgZ29sZF0gPSBbcGwuaHAsIHBsLmhwTWF4LCBwbC5tcCwgcGwubXBNYXgsIHBsLmxldmVsLCBwbC5leHAsIHBsLmV4cE1heCwgcGwuZ29sZF07XHJcblxyXG4gICAgaWYgKCBocCAhPSBocDAgKSB7XHJcbiAgICAgICAgaWYgKCB0aGlzLnR3SHAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHdIcC5zdG9wKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnR3SHAgPSBuZXcgVHdlZW4oIHRoaXMsIDMwMCwgeyBocDogaHAgfSwgeyBlYXNlOiBlYXNpbmcub3V0Q3ViaWMgfSApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggaHBNYXggIT0gaHBNYXgwICkge1xyXG4gICAgICAgIGlmICggdGhpcy50d0hwTWF4ICkge1xyXG4gICAgICAgICAgICB0aGlzLnR3SHBNYXguc3RvcCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy50d0hwTWF4ID0gbmV3IFR3ZWVuKCB0aGlzLCAzMDAsIHsgaHBNYXg6IGhwTWF4IH0sIHsgZWFzZTogZWFzaW5nLm91dEN1YmljIH0gKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIG1wICE9IG1wMCApIHtcclxuICAgICAgICBpZiAoIHRoaXMudHdNcCApIHtcclxuICAgICAgICAgICAgdGhpcy50d01wLnN0b3AoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudHdNcCA9IG5ldyBUd2VlbiggdGhpcywgMzAwLCB7IG1wOiBtcCB9LCB7IGVhc2U6IGVhc2luZy5vdXRDdWJpYyB9ICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBtcE1heCAhPSBtcE1heDAgKSB7XHJcbiAgICAgICAgaWYgKCB0aGlzLnR3TXBNYXggKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHdNcE1heC5zdG9wKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnR3TXBNYXggPSBuZXcgVHdlZW4oIHRoaXMsIDMwMCwgeyBtcE1heDogbXBNYXggfSwgeyBlYXNlOiBlYXNpbmcub3V0Q3ViaWMgfSApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggZXhwICE9IGV4cDAgKSB7XHJcbiAgICAgICAgaWYgKCB0aGlzLnR3RXhwICkge1xyXG4gICAgICAgICAgICB0aGlzLnR3RXhwLnN0b3AoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudHdFeHAgPSBuZXcgVHdlZW4oIHRoaXMsIDMwMCwgeyBleHA6IGV4cCB9LCB7IGVhc2U6IGVhc2luZy5vdXRDdWJpYyB9ICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBleHBNYXggIT0gZXhwTWF4MCApIHtcclxuICAgICAgICBpZiAoIHRoaXMudHdFeHBNYXggKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHdFeHBNYXguc3RvcCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy50d0V4cE1heCA9IG5ldyBUd2VlbiggdGhpcywgMzAwLCB7IGV4cE1heDogZXhwTWF4IH0sIHsgZWFzZTogZWFzaW5nLm91dEN1YmljIH0gKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIGdvbGQgIT0gZ29sZDAgKSB7XHJcbiAgICAgICAgaWYgKCB0aGlzLnR3R29sZCApIHtcclxuICAgICAgICAgICAgdGhpcy50d0dvbGQuc3RvcCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy50d0dvbGQgPSBuZXcgVHdlZW4oIHRoaXMsIDMwMCwgeyBnb2xkOiBnb2xkIH0sIHsgZWFzZTogZWFzaW5nLm91dEN1YmljIH0gKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmxldmVsID0gbGV2ZWw7XHJcblxyXG4gICAgaWYgKCB0aGlzLnN0YXR1c0NoYW5naW5nICkge1xyXG4gICAgICAgIHRoaXMuc2V0R2F1Z2UoIHRoaXMuaHAsIHRoaXMuaHBNYXgsIHRoaXMubXAsIHRoaXMubXBNYXgsIHRoaXMubGV2ZWwsIHRoaXMuZXhwLCB0aGlzLmV4cE1heCwgdGhpcy5nb2xkICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCB0aGlzLmhwID09IGhwICYmIHRoaXMuaHBNYXggPT0gaHBNYXggJiZcclxuXHRcdHRoaXMubXAgPT0gbXAgJiYgdGhpcy5tcE1heCA9PSBtcE1heCAmJlxyXG5cdFx0dGhpcy5leHAgPT0gZXhwICYmIHRoaXMuZXhwTWF4ID09IGV4cE1heCAmJlxyXG5cdFx0dGhpcy5nb2xkID09IGdvbGQgKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0dXNDaGFuZ2luZyA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnN0YXR1c0NoYW5naW5nID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm9sZFZhbHVlID0gW2hwLCBocE1heCwgbXAsIG1wTWF4LCBsZXZlbCwgZXhwLCBleHBNYXgsIGdvbGRdO1xyXG5cclxuICAgIC8vIOyYpO2GoOuntVxyXG4gICAgdGhpcy5hdXRvTWFwLnNldFBsYXllclBvc2l0aW9uKCBwbC50aWxlWCwgcGwudGlsZVkgKTtcclxufVxyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8g7LK066Cl65Ox7J2YIOyDge2DnCDtkZzsi5xcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblxyXG4vKipcclxuICpcclxuICogQHRoaXMgSW50ZXJmYWNlXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB2XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhWXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB4XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB5XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB3XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBoXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBjb2xvclxyXG4gKiBAcGFyYW0ge251bWJlcn0gY29sb3IyXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNFeHBcclxuICogQHJldHVybnMge1Nwcml0ZX1cclxuICovXHJcbmZ1bmN0aW9uIG1ha2VNZXNoKCB2LCBtYXhWLCB4LCB5LCB3LCBoLCBjb2xvciwgY29sb3IyLCBpc0V4cCApIHtcclxuICAgIGNvbnN0IG0gPSBuZXcgU3ByaXRlKCk7XHJcblxyXG4gICAgaWYgKCBpc0V4cCApIHtcclxuICAgICAgICBjb25zdCBwID0gbmV3IFBpeGVsKCAwLCAxLCB3ICsgMiwgaCArIDIgKTtcclxuXHJcbiAgICAgICAgcC5zZXRQb3NpdGlvbiggeCAtIDEsIHkgLSAxICk7XHJcbiAgICAgICAgbS5hZGRDaGlsZCggcCApO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBncmlkR2FwO1xyXG5cclxuICAgIGlmICggaXNFeHAgKSB7XHJcbiAgICAgICAgZ3JpZEdhcCA9IG1heFYgLyA0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBncmlkR2FwID0gMTAgKiBNYXRoLmNlaWwoIG1heFYgLyAxMDAgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIG1heFYgPiAwICkge1xyXG4gICAgICAgIGNvbnN0IG51bU9mR3JpZCA9IE1hdGguZmxvb3IoICggbWF4ViAtIDEgKSAvIGdyaWRHYXAgKTtcclxuXHJcbiAgICAgICAgaWYgKCB2ID4gMCApIHtcclxuICAgICAgICAgICAgY29uc3QgcCA9IG5ldyBQaXhlbCggY29sb3IsIDEsIE1hdGgubWluKCAxLCB2IC8gbWF4ViApICogdywgaCApO1xyXG5cclxuICAgICAgICAgICAgcC5zZXRQb3NpdGlvbiggeCwgeSApO1xyXG4gICAgICAgICAgICBtLmFkZENoaWxkKCBwICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKCBsZXQgaSA9IDE7IGkgPD0gbnVtT2ZHcmlkOyBpKysgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdyaWRYID0gaSAqIHcgKiBncmlkR2FwIC8gbWF4VjtcclxuICAgICAgICAgICAgbGV0IGM7XHJcblxyXG4gICAgICAgICAgICBpZiAoIGkgKiBncmlkR2FwIDwgdiApIHtcclxuICAgICAgICAgICAgICAgIGMgPSAweDAwMDAwMDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGMgPSBjb2xvcjI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHAgPSBuZXcgUGl4ZWwoIGMsIDEsIDEsIGggKTtcclxuXHJcbiAgICAgICAgICAgIHAuc2V0UG9zaXRpb24oIHggKyBncmlkWCwgeSApO1xyXG4gICAgICAgICAgICBtLmFkZENoaWxkKCBwICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICggIWlzRXhwICkge1xyXG4gICAgICAgIGNvbnN0IHRmID0gdGhpcy5nZXRCaXRtYXBUZXh0RmllbGQoIE1hdGguZmxvb3IoIHYgKSArIFwiL1wiICsgTWF0aC5mbG9vciggbWF4ViApLnRvU3RyaW5nKCkgKTtcclxuXHJcbiAgICAgICAgdGYuc2V0VGV4dENvbG9yKCBjb2xvciApO1xyXG4gICAgICAgIHRmLnNldFBvc2l0aW9uKCB4LCB5ICsgMTYgLSA4ICk7XHJcbiAgICAgICAgbS5hZGRDaGlsZCggdGYgKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbTtcclxufVxyXG5cclxuXHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyDroZzqt7jtmZTrqbRcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbi8qKlxyXG4gKiBAdGhpcyBJbnRlcmZhY2VcclxuICpcclxuICogQHBhcmFtIHsqfSBkeVxyXG4gKi9cclxuZnVuY3Rpb24gcmVkcmF3TG9nKCBkeSApIHtcclxuICAgIGlmICggZHkgPT0gdGhpcy5sb2dGcmFtZS5sYXN0UG9zICkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBib3R0b21JbmRleCA9IE1hdGguZmxvb3IoIGR5IC8gSW50ZXJmYWNlLkxPR19MSU5FX1NQQUNJTkcgKTtcclxuICAgIGNvbnN0IHRvcEluZGV4ID0gYm90dG9tSW5kZXggKyBNYXRoLmZsb29yKCAoIGxvZ1dpbmRvd0hlaWdodCAtIDE2ICkgLyBJbnRlcmZhY2UuTE9HX0xJTkVfU1BBQ0lORyApICsgMTtcclxuICAgIGNvbnN0IHJlc3QgPSBkeSAlIEludGVyZmFjZS5MT0dfTElORV9TUEFDSU5HO1xyXG5cclxuICAgIHRoaXMubG9nVGV4dExheWVyLmNsZWFyQ2hpbGRyZW4oKTtcclxuXHJcbiAgICBmb3IgKCBsZXQgaSA9IE1hdGgubWluKCB0b3BJbmRleCwgdGhpcy5sb2dUZXh0Lmxlbmd0aCAtIDEgKTsgaSA+PSBib3R0b21JbmRleDsgaS0tICkge1xyXG4gICAgICAgIGxldCB0dztcclxuXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhpLGR5LGJvdHRvbUluZGV4KTtcclxuICAgICAgICBpZiAoIHRoaXMubG9nVGV4dFtpXS50ZXh0V3JhcCApIHtcclxuICAgICAgICAgICAgdHcgPSB0aGlzLmxvZ1RleHRbaV0udGV4dFdyYXA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdHcgPSB0aGlzLmdldEhpcmVzVGV4dFdyYXAoIHRoaXMubG9nVGV4dFtpXS50ZXh0ICk7XHJcbiAgICAgICAgICAgIHRoaXMubG9nVGV4dFtpXS50ZXh0V3JhcCA9IHR3O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy90dy5zZXRUZXh0Q29sb3IoMHhhMGEwYzApO1xyXG4gICAgICAgIGNvbnN0IHkgPSAtMSAtIEludGVyZmFjZS5MT0dfTElORV9TUEFDSU5HICogKCAxICsgaSAtIGJvdHRvbUluZGV4ICkgKyByZXN0O1xyXG5cclxuICAgICAgICB0dy5zZXRQb3NpdGlvbiggMCwgeSApO1xyXG4gICAgICAgIHRoaXMubG9nVGV4dExheWVyLmFkZENoaWxkQXQoIHR3LCAwICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5sb2dGcmFtZS5sYXN0UG9zID0gZHk7XHJcbn1cclxuXHJcblxyXG4vLyDrp4jsmrDsiqQg7ZW465Ok65+sXHJcbi8qKlxyXG4gKiBAdGhpcyBJbnRlcmZhY2VcclxuICpcclxuICogQHBhcmFtIHsqfSBlXHJcbiAqL1xyXG5mdW5jdGlvbiBvbkxvZ1BvaW50ZXJEb3duKCBlICkge1xyXG4gICAgY29uc3QgeyB4OiBleCwgeTogZXkgfSA9IEdMT0JBTC5zdGFnZS5nbG9iYWxUb0xvY2FsKCBlLngsIGUueSApO1xyXG5cclxuICAgIGlmICggdGhpcy5pc1Zpc2libGUoKSAmJiB0aGlzLmxvZ0ZyYW1lLmhpdFRlc3RQb2ludCggZS54LCBlLnkgKSAmJiAhdGhpcy5pc1NpZGVQYW5lbE9wZW5lZCgpICkge1xyXG4gICAgICAgIHRoaXMubG9nRnJhbWUuX19kcmFnID0geyBleDogZXgsIGV5OiBleSwgY2xpY2s6IHRydWUgfTtcclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLmxvZ0ZyYW1lLmlzVmlzaWJsZSgpICYmICF0aGlzLmlzU2lkZVBhbmVsT3BlbmVkKCkgJiYgIXRoaXMuYWN0aW9uU2VsZWN0b3IuaXNPcGVuKCkgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0xvZygpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCB0aGlzLmxvZ0hpZGVUaW1lciApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nSGlkZVRpbWVyLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9nSGlkZVRpbWVyID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCB0aGlzLmxvZ1RleHRMYXllci5nZXROdW1DaGlsZHJlbigpID4gMCAmJiB0aGlzLmxvZ1RleHRMYXllci5nZXRDaGlsZEF0KCAwICkuX3R3ICkge1xyXG4gICAgICAgICAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgdGhpcy5nZXROdW1DaGlsZHJlbigpOyBpKysgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMubG9nVGV4dExheWVyLmdldENoaWxkQXQoIGkgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcy5fdHcudG9FbmQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAdGhpcyBJbnRlcmZhY2VcclxuICpcclxuICogQHBhcmFtIHsqfSBlXHJcbiAqL1xyXG5mdW5jdGlvbiBvbkxvZ1BvaW50ZXJNb3ZlKCBlICkge1xyXG4gICAgY29uc3QgeyB4OiBleCwgeTogZXkgfSA9IEdMT0JBTC5zdGFnZS5nbG9iYWxUb0xvY2FsKCBlLngsIGUueSxzdGFnZSApO1xyXG5cclxuICAgIGlmICggdGhpcy5sb2dGcmFtZS5pc1Zpc2libGUoKSApIHtcclxuICAgICAgICBpZiAoIHRoaXMubG9nRnJhbWUuX19kcmFnICkge1xyXG4gICAgICAgICAgICBpZiAoIHRoaXMubG9nVGV4dC5sZW5ndGggPj0gTWF0aC5mbG9vciggKCBsb2dXaW5kb3dIZWlnaHQgLSAxNiApIC8gSW50ZXJmYWNlLkxPR19MSU5FX1NQQUNJTkcgKSApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGR4ID0gZXggLSB0aGlzLmxvZ0ZyYW1lLl9fZHJhZy5leDtcclxuICAgICAgICAgICAgICAgIGxldCBkeSA9IHRoaXMubG9nU2Nyb2xsUG9zICsgZXkgLSB0aGlzLmxvZ0ZyYW1lLl9fZHJhZy5leTtcclxuXHJcbiAgICAgICAgICAgICAgICBkeSA9IE1hdGgubWF4KCAwLCBNYXRoLm1pbiggSW50ZXJmYWNlLkxPR19MSU5FX1NQQUNJTkcgKiB0aGlzLmxvZ1RleHQubGVuZ3RoIC0gKCBsb2dXaW5kb3dIZWlnaHQgLSAxNiApICsgMSwgZHkgKSApO1xyXG4gICAgICAgICAgICAgICAgcmVkcmF3TG9nLmNhbGwoIHRoaXMsIGR5ICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoIHRoaXMubG9nRnJhbWUuX19kcmFnICkge1xyXG4gICAgICAgICAgICBjb25zdCBkeCA9IGV4IC0gdGhpcy5sb2dGcmFtZS5fX2RyYWcuZXg7XHJcbiAgICAgICAgICAgIGNvbnN0IGR5ID0gTWF0aC5tYXgoIDAsIHRoaXMubG9nU2Nyb2xsUG9zICsgZXkgLSB0aGlzLmxvZ0ZyYW1lLl9fZHJhZy5leSApO1xyXG5cclxuICAgICAgICAgICAgaWYgKCBNYXRoLmFicyggZHggKSA+IDEwIHx8IE1hdGguYWJzKCBkeSApID4gMTAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0ZyYW1lLl9fZHJhZy5jbGljayA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEB0aGlzIEludGVyZmFjZVxyXG4gKlxyXG4gKiBAcGFyYW0geyp9IGVcclxuICovXHJcbmZ1bmN0aW9uIG9uTG9nUG9pbnRlclVwKCBlICkge1xyXG4gICAgaWYgKCB0aGlzLmxvZ0ZyYW1lLmlzVmlzaWJsZSgpICkge1xyXG4gICAgICAgIGlmICggdGhpcy5sb2dGcmFtZS5fX2RyYWcgKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nSGlkZVRpbWVyID0gVGltZXIuZGVsYXllZENhbGwoIDMwMDAsIHRoaXMuaGlkZUxvZywgdGhpcyApO1xyXG5cclxuICAgICAgICAgICAgaWYgKCB0aGlzLmxvZ1RleHQubGVuZ3RoID49IE1hdGguZmxvb3IoICggbG9nV2luZG93SGVpZ2h0IC0gMTYgKSAvIEludGVyZmFjZS5MT0dfTElORV9TUEFDSU5HICkgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHg6IGV4LCB5OiBleSB9ID0gR0xPQkFMLnN0YWdlLmdsb2JhbFRvTG9jYWwoIGUueCwgZS55ICk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZHkgPSBNYXRoLm1heCggMCwgdGhpcy5sb2dTY3JvbGxQb3MgKyBleSAtIHRoaXMubG9nRnJhbWUuX19kcmFnLmV5ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgZHkgPSBNYXRoLm1heCggMCwgTWF0aC5taW4oIEludGVyZmFjZS5MT0dfTElORV9TUEFDSU5HICogdGhpcy5sb2dUZXh0Lmxlbmd0aCAtICggbG9nV2luZG93SGVpZ2h0IC0gMTYgKSArIDEsIGR5ICkgKTtcclxuICAgICAgICAgICAgICAgIHJlZHJhd0xvZy5jYWxsKCB0aGlzLCBkeSApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dTY3JvbGxQb3MgPSBkeTtcclxuICAgICAgICAgICAgICAgIC8vIOyekOuPmeyCrOudvOyngOq4sCDsvKxcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIGlmICghdGhpcy5jdXJzb3IuaG9sZGVkKCkgJiYgdGhpcy5sb2dGcmFtZS5fX2RyYWcgJiYgdGhpcy5sb2dGcmFtZS5fX2RyYWcuY2xpY2spIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5jdXJzb3IuY2FuY2VsSG9sZCgpO1xyXG4gICAgICAgIC8vICAgICB0aGlzLmxvZ1Njcm9sbFBvcyA9IDA7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuc2hvd0xvZygpO1xyXG4gICAgICAgIC8vICAgICAvLyDsnpDrj5nsgqzrnbzsp4DquLAg7LysXHJcbiAgICAgICAgLy8gICAgIHRoaXMubG9nSGlkZVRpbWVyID0gVGltZXIuZGVsYXllZENhbGwoMzAwMCwgdGhpcy5oaWRlTG9nLCB0aGlzKTtcclxuICAgICAgICAvLyAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5sb2dGcmFtZS5fX2RyYWcgPSBudWxsO1xyXG59XHJcblxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEludGVyZmFjZSBleHRlbmRzIFNwcml0ZSB7XHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8g7LSI6riw7ZmUXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHsgeCwgeSB9ID0gR0xPQkFMLndvcmxkLmdldFBvc2l0aW9uKCk7XHJcblxyXG4gICAgICAgIHRoaXMuaHVkTGF5ZXIgPSBMYXlvdXQuZnJvbVJlbmRlclZpZXdwb3J0KCk7XHJcbiAgICAgICAgdGhpcy5hZGRDaGlsZCggdGhpcy5odWRMYXllciApO1xyXG4gICAgICAgIHRoaXMuY3Vyc29yID0gbmV3IEN1cnNvcigpO1xyXG4gICAgICAgIHRoaXMuaHVkTGF5ZXIub3JpZ2luLmFkZENoaWxkKCB0aGlzLmN1cnNvciApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMubG9nV2luZG93TGF5ZXIgPSBMYXlvdXQuZnJvbVJlbmRlclZpZXdwb3J0KCk7XHJcbiAgICAgICAgdGhpcy5tb2RhbExheWVyID0gTGF5b3V0LmZyb21SZW5kZXJWaWV3cG9ydCgpO1xyXG4gICAgICAgIHRoaXMub24oIEV2ZW50LkFEREVEX1RPX1NUQUdFLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHN0YWdlLmFkZENoaWxkKCB0aGlzLmxvZ1dpbmRvd0xheWVyICk7XHJcbiAgICAgICAgICAgIHN0YWdlLmFkZENoaWxkKCB0aGlzLm1vZGFsTGF5ZXIgKTtcclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgIHRoaXMub2xkVmFsdWUgPSBbIDAsIDAsIDAsIDBdO1xyXG4gICAgICAgIHRoaXMuaHAgPSAwO1xyXG4gICAgICAgIHRoaXMuaHBNYXggPSAwO1xyXG4gICAgICAgIHRoaXMubXAgPSAwO1xyXG4gICAgICAgIHRoaXMubXBNYXggPSAwO1xyXG4gICAgICAgIHRoaXMubGV2ZWwgPSAwO1xyXG4gICAgICAgIHRoaXMuZXhwID0gMDtcclxuICAgICAgICB0aGlzLmV4cE1heCA9IDA7XHJcbiAgICAgICAgdGhpcy5nb2xkID0gMDtcclxuICAgICAgICB0aGlzLmxvZ1RleHQgPSBbXTtcclxuXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmF1dG9NYXAgPSBuZXcgQXV0b01hcCgpO1xyXG4gICAgICAgICAgICB0aGlzLmF1dG9NYXAuc2V0UG9zaXRpb24oIC0gQ09ORklHLkludGVyZmFjZS5tYXJnaW4gLSAxMiwgLSA3MCApO1xyXG4gICAgICAgICAgICB0aGlzLmh1ZExheWVyLmJvdHRvbVJpZ2h0LmFkZENoaWxkKCB0aGlzLmF1dG9NYXAgKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHdmID0gbmV3IEdyaWQ5KCBuZXcgVGV4dHVyZSggXCJXaW5kb3dGcmFtZS5wbmdcIiwgZmFsc2UsIHsgZm9ybWF0OiBUZXh0dXJlQmFzZS5SR0JBNTU1MSB9ICkgKTtcclxuICAgICAgICAgICAgbGV0IHgxLCB5MSwgdzEsIGgxO1xyXG4gICAgICAgICAgICBjb25zdCBzID0gbmV3IExheW91dCgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzaXplID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgd2Yuc2V0UmVjdChcclxuICAgICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKCBhcHBsaWNhdGlvbi5sb2dpY2FsUmVuZGVyQm91bmRzLmxlZnQgKyBDT05GSUcuSW50ZXJmYWNlLm1hcmdpbiApLFxyXG4gICAgICAgICAgICAgICAgICAgIDMwLFxyXG4gICAgICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoIGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMud2lkdGggLSBDT05GSUcuSW50ZXJmYWNlLm1hcmdpbiAqIDIgKSxcclxuICAgICAgICAgICAgICAgICAgICBsb2dXaW5kb3dIZWlnaHRcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBbeDEsIHkxXSA9IFthcHBsaWNhdGlvbi5sb2dpY2FsUmVuZGVyQm91bmRzLmxlZnQgKyBDT05GSUcuSW50ZXJmYWNlLm1hcmdpbiArIDksIDMwICsgOF07XHJcbiAgICAgICAgICAgICAgICBbdzEsIGgxXSA9IFthcHBsaWNhdGlvbi5sb2dpY2FsUmVuZGVyQm91bmRzLndpZHRoIC0gKCBDT05GSUcuSW50ZXJmYWNlLm1hcmdpbiArIDkgKSAqIDIsIGxvZ1dpbmRvd0hlaWdodCAtIDE2XTtcclxuICAgICAgICAgICAgICAgIHMuc2V0UmVjdCggeDEsIHkxLCB3MSwgaDEgKTtcclxuICAgICAgICAgICAgICAgIHMuc2V0Q2xpcCggMCwgMCwgdzEsIGgxICk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxvZ0ZyYW1lID0gd2Y7XHJcbiAgICAgICAgICAgIHRoaXMubG9nVGV4dExheWVyID0gbmV3IFNwcml0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmxvZ0ZyYW1lLnNldFZpc2libGUoIGZhbHNlICk7XHJcbiAgICAgICAgICAgIC8vdGhpcy5sb2dUZXh0TGF5ZXIuc2V0Q2xpcCh4MSx5MSx4Mix5Mik7XHJcbiAgICAgICAgICAgIHMuYm90dG9tTGVmdC5hZGRDaGlsZCggdGhpcy5sb2dUZXh0TGF5ZXIgKTtcclxuICAgICAgICAgICAgd2YuYWRkQ2hpbGQoIHMgKTtcclxuICAgICAgICAgICAgdGhpcy5sb2dXaW5kb3dMYXllci5vcmlnaW4uYWRkQ2hpbGQoIHdmICk7XHJcbiAgICAgICAgICAgIHRoaXMubG9nV2luZG93TGF5ZXIub24oIEV2ZW50LlJFU0laRSwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzaXplKCk7XHJcbiAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgcmVzaXplKCk7XHJcbiAgICAgICAgICAgIHdmLm9uKCBFdmVudC5QT0lOVEVSX0RPV04sIG9uTG9nUG9pbnRlckRvd24sIHRoaXMgKVxyXG4gICAgICAgICAgICAgICAgLm9uKCBFdmVudC5QT0lOVEVSX01PVkUsIG9uTG9nUG9pbnRlck1vdmUsIHRoaXMgKVxyXG4gICAgICAgICAgICAgICAgLm9uKCBFdmVudC5QT0lOVEVSX1VQLCBvbkxvZ1BvaW50ZXJVcCwgdGhpcyApO1xyXG4gICAgICAgICAgICB0aGlzLmxvZ1Njcm9sbFBvcyA9IDA7XHJcbiAgICAgICAgICAgIC8vd2Yuc2V0SW50ZXJhY3RpdmUoIHsgZHJhZ1g6IHRydWUsIGRyYWdZOiB0cnVlIH0gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgYiA9IG5ldyBCaXRtYXAoIG5ldyBUZXh0dXJlKCBcIlN0YXR1cy5wbmdcIiwgZmFsc2UsIHsgZm9ybWF0OiBUZXh0dXJlQmFzZS5SR0JBNTU1MSB9ICkgKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzU3ByaXRlID0gYjtcclxuICAgICAgICAgICAgYi5zZXRBbmNob3JQb2ludCggMC41LCAwLjUgKTtcclxuICAgICAgICAgICAgY29uc3QgYnRuMSA9IG5ldyBCdXR0b24yKCB7XHJcbiAgICAgICAgICAgICAgICB1cDogICAgICAgICAgIHsgaW1hZ2U6IGIgfSxcclxuICAgICAgICAgICAgICAgIGRvd246ICAgICAgICAgeyBjb2xvcjogMHhhMGEwYTAsIHk6IDIgfSxcclxuICAgICAgICAgICAgICAgIHBpeGVsUGVyZmVjdDogdHJ1ZSxcclxuICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgYnRuMS5zZXRQb3NpdGlvbiggMCwgQ09ORklHLkludGVyZmFjZS5tYXJnaW4gKyAxMCApO1xyXG4gICAgICAgICAgICBidG4xLmFkZEV2ZW50TGlzdGVuZXIoIFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b3BNZW51Lm9wZW4oKTtcclxuICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICBhcHBsaWNhdGlvbi5hZGRFdmVudExpc3RlbmVyKCBFdmVudC5SRVNJWkUsKCBuICk9PntcclxuICAgICAgICAgICAgICAgIGJ0bjEuc2V0U2NhbGUoIE1hdGgubWluKCAxLGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMud2lkdGggLyBidG4xLmdldFdpZHRoKCkgKSApO1xyXG4gICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgIHRoaXMuaHVkTGF5ZXIudG9wTWlkZGxlLmFkZENoaWxkKCBidG4xICk7XHJcbiAgICAgICAgICAgIHRoaXMudG9wTWVudSA9IG5ldyBUb3BNZW51KCk7XHJcbiAgICAgICAgICAgIHRoaXMuaHVkTGF5ZXIudG9wTWlkZGxlLmFkZENoaWxkKCB0aGlzLnRvcE1lbnUgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgYiA9IG5ldyBCaXRtYXAoIG5ldyBUZXh0dXJlKCBcIkludmVudG9yeUljb24ucG5nXCIsIGZhbHNlLCB7IGZvcm1hdDogVGV4dHVyZUJhc2UuUkdCQTU1NTEgfSApICk7XHJcblxyXG4gICAgICAgICAgICBiLnNldEFuY2hvclBvaW50KCAwLjUsIDAuNSApO1xyXG4gICAgICAgICAgICBjb25zdCBidG4xID0gbmV3IEJ1dHRvbjIoIHtcclxuICAgICAgICAgICAgICAgIHVwOiAgIHsgaW1hZ2U6IGIgfSxcclxuICAgICAgICAgICAgICAgIGRvd246IHsgY29sb3I6IDB4YTBhMGEwLCB5OiAyIH0sXHJcbiAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIGJ0bjEuc2V0UG9zaXRpb24oIC0gQ09ORklHLkludGVyZmFjZS5tYXJnaW4gLSAxMiwgIC0gQ09ORklHLkludGVyZmFjZS5tYXJnaW4gLSAxNiApO1xyXG4gICAgICAgICAgICBidG4xLmFkZEV2ZW50TGlzdGVuZXIoIFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgR0xPQkFMLnBsYXllci5pbnZlbnRvcnkub3BlbigpO1xyXG4gICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgIHRoaXMuaHVkTGF5ZXIuYm90dG9tUmlnaHQuYWRkQ2hpbGQoIGJ0bjEgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8g7J207YCp7LK07J247KCA6rCAIOqwgOyepSDrp4jsp4Drp4nsl5Ag7LaU6rCA65CY7Ja07JW87ZWc64ukLlxyXG4gICAgICAgICAgICBjb25zdCBiID0gbmV3IEljb25QYWNrKCBuZXcgVGV4dHVyZSggXCJJdGVtQmFja2dyb3VuZC5wbmdcIiwgZmFsc2UsIHsgZm9ybWF0OiBUZXh0dXJlQmFzZS5SR0JBNTU1MSB9ICksIDEsIDEsIDQ4LCAzMiApO1xyXG4gICAgICAgICAgICAvL2xldCBpdGVtMSA9IG5ldyBJdGVtKHtpbWFnZUNvbD0yLGltYWdlUm93PTF9KTtcclxuICAgICAgICAgICAgLy9pdGVtMS5zZXRQb3NpdGlvbihiLmdldFdpZHRoKCkvMixiLmdldEhlaWdodCgpLzIpO1xyXG4gICAgICAgICAgICAvL2IuYWRkQ2hpbGQoaXRlbTEpO1xyXG4gICAgICAgICAgICAvL3RoaXMuYWRkQ2hpbGQoYik7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ0bjEgPSBuZXcgQnV0dG9uMigge1xyXG4gICAgICAgICAgICAgICAgdXA6ICAgeyBpbWFnZTogYiwgdXNlU3ByaXRlQW5jaG9yUG9pbnQ6IHRydWUgfSxcclxuICAgICAgICAgICAgICAgIGRvd246IHsgeTogMiB9LFxyXG4gICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICBidG4xLnNldFBvc2l0aW9uKCBDT05GSUcuSW50ZXJmYWNlLm1hcmdpbiArIGIuZ2V0V2lkdGgoKSAvIDIsICAtIGIuZ2V0SGVpZ2h0KCkgLyAyIC0gQ09ORklHLkludGVyZmFjZS5tYXJnaW4gKTtcclxuICAgICAgICAgICAgdGhpcy5odWRMYXllci5ib3R0b21MZWZ0LmFkZENoaWxkKCBidG4xICk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uU2VsZWN0b3IgPSBuZXcgQWN0aW9uU2VsZWN0b3IoIGIgKTtcclxuICAgICAgICAgICAgYnRuMS5hZGRFdmVudExpc3RlbmVyKCBcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uU2VsZWN0b3Iub3BlbigpO1xyXG4gICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDsm5Trk5zrgpgg7ZSM66CI7J207Ja06rCAIOykgOu5hOuQoCDrlYzquYzsp4Ag7Iio6rKo65GU64ukXHJcbiAgICAgICAgdGhpcy53YWl0aW5nRm9yV29ybGRBbmRQbGF5ZXIgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lck9uU3RhZ2UoIEV2ZW50LkVOVEVSX0ZSQU1FLCBvbkVudGVyRnJhbWUsIHRoaXMgKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIOu5hO2KuOuntSDthY3siqTtirgg7Ja77Ja07Jik6riwXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGdldEJpdG1hcFRleHRGaWVsZCggdGV4dCApIHtcclxuICAgICAgICBjb25zdCB0ZiA9IG5ldyBUZXh0RmllbGQoIEludGVyZmFjZS5mb250LCB0ZXh0ICk7XHJcblxyXG4gICAgICAgIC8vdGYuc2NhbGUgPSAxIC8gc3RhZ2UucmVuZGVyVmlld3BvcnRTY2FsZTtcclxuICAgICAgICByZXR1cm4gdGY7XHJcbiAgICB9XHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIOqzoO2VtOyDgeuPhCDthY3siqTtirgg7Ja77Ja07Jik6riwXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGdldEhpcmVzVGV4dEZpZWxkKCB0ZXh0LCB0dGYgKSB7XHJcbiAgICAgICAgY29uc3QgdGYgPSBuZXcgVGV4dEZpZWxkKCB0dGYgfHwgSW50ZXJmYWNlLnR0ZiwgdGV4dCApO1xyXG5cclxuICAgICAgICByZXR1cm4gdGY7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SGlyZXNUZXh0V3JhcCggdGV4dCwgdywgaCwgc3BhY2luZywgdHRmLCBhbGlnbiwgaWdub3JlV29yZFdyYXAgKSB7XHJcbiAgICAgICAgY29uc3QgdHcgPSBUZXh0RmllbGQuZnJvbVRleHRXcmFwKCB0ZXh0LCB3LCBoLCBzcGFjaW5nLCB0dGYgfHwgSW50ZXJmYWNlLnR0ZiwgYWxpZ24sIGlnbm9yZVdvcmRXcmFwICk7XHJcblxyXG4gICAgICAgIHJldHVybiB0dztcclxuICAgIH1cclxuXHJcblxyXG4gICAgc2V0R2F1Z2UoIGhwLCBocE1heCwgbXAsIG1wTWF4LCBsZXZlbCwgZXhwLCBleHBNYXgsIGdvbGQgKSB7XHJcbiAgICAgICAgaWYgKCB0aGlzLnN0YXR1c0hwICkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXR1c0hwLnJlbW92ZUZyb21QYXJlbnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5zdGF0dXNNcCApIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0dXNNcC5yZW1vdmVGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIHRoaXMuc3RhdHVzRXhwICkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXR1c0V4cC5yZW1vdmVGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIHRoaXMuc3RhdHVzR29sZCApIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0dXNHb2xkLnJlbW92ZUZyb21QYXJlbnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IFtveCwgb3ldID0gWzg1LDhdOyAvLyDslbXsu6Ttj6zsnbjtirgg66ee7LaU6riwXHJcbiAgICAgICAgY29uc3QgbTEgPSBtYWtlTWVzaC5jYWxsKCB0aGlzLCBocCwgaHBNYXgsIDE1IC0gb3gsIDIgLSBveSwgNzYsIDExLCAweGZmMDAwMCwgMHg1YTAwMDAgKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0dXNTcHJpdGUuYWRkQ2hpbGQoIG0xICk7XHJcbiAgICAgICAgdGhpcy5zdGF0dXNIcCA9IG0xO1xyXG4gICAgICAgIGNvbnN0IG0yID0gbWFrZU1lc2guY2FsbCggdGhpcywgbXAsIG1wTWF4LCAxMDkgLSBveCwgMiAtIG95LCA1OCwgMTEsIDB4MDBhZWVmLCAweDAwNDE1YSApO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXR1c1Nwcml0ZS5hZGRDaGlsZCggbTIgKTtcclxuICAgICAgICB0aGlzLnN0YXR1c01wID0gbTI7XHJcblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgdGYgPSB0aGlzLmdldEJpdG1hcFRleHRGaWVsZCggXCJMVi5cIiArIGxldmVsLnRvU3RyaW5nKCkgKTtcclxuXHJcbiAgICAgICAgICAgIHRmLnNldFRleHRDb2xvciggMHhmZmZmZmYgKTtcclxuICAgICAgICAgICAgdGYuc2V0UG9zaXRpb24oIDAgLSBveCwgLTIgLSA4IC0gb3kgKTtcclxuICAgICAgICAgICAgY29uc3QgdGYyID0gdGhpcy5nZXRCaXRtYXBUZXh0RmllbGQoIFwiZ1wiICsgTWF0aC5mbG9vciggZ29sZCApLnRvU3RyaW5nKCkgKTtcclxuXHJcbiAgICAgICAgICAgIHRmMi5zZXRUZXh0Q29sb3IoIDB4ZmZkMDAwICk7XHJcbiAgICAgICAgICAgIHRmMi5zZXRQb3NpdGlvbiggMTY4IC0gdGYyLmdldFdpZHRoKCkgLSBveCwgLTIgLSA4IC0gb3kgKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0dXNTcHJpdGUuYWRkQ2hpbGQoIHRmMiApO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXR1c0dvbGQgPSB0ZjI7XHJcbiAgICAgICAgICAgIGNvbnN0IG0zID0gbWFrZU1lc2guY2FsbCggdGhpcywgZXhwLCBleHBNYXgsIHRmLmdldFdpZHRoKCkgKyAzIC0gb3gsIC02IC0gb3ksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0dXNTcHJpdGUuZ2V0V2lkdGgoKSAtIHRmLmdldFdpZHRoKCkgLSA3IC0gdGYyLmdldFdpZHRoKCksIDUsIDB4ZmZmZjAwLCAweDYwNjAwMCwgdHJ1ZSApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zdGF0dXNTcHJpdGUuYWRkQ2hpbGQoIG0zICk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzRXhwID0gbTM7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzRXhwLmFkZENoaWxkKCB0ZiApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhZGRMb2coIC4uLmFyZ3MgKSB7XHJcbiAgICAgICAgdGhpcy5zaG93TG9nKCk7XHJcbiAgICAgICAgY29uc3QgdGV4dCA9IGhhbmd1bC5mb3JtYXQoIC4uLmFyZ3MgKTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coIFwi66Gc6re47Lac66ClXCIsIHRleHQgKTtcclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLmxvZ1RleHRMYXllci5nZXROdW1DaGlsZHJlbigpID4gMCAmJiB0aGlzLmxvZ1RleHRMYXllci5nZXRDaGlsZEF0KCAwICkuX3R3ICkge1xyXG4gICAgICAgICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCB0aGlzLmxvZ1RleHRMYXllci5nZXROdW1DaGlsZHJlbigpOyBpKysgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gdGhpcy5sb2dUZXh0TGF5ZXIuZ2V0Q2hpbGRBdCggaSApO1xyXG5cclxuICAgICAgICAgICAgICAgIHMuX3R3LnRvRW5kKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubG9nVGV4dC51bnNoaWZ0KCB7IHRleHQ6IHRleHQgfSApO1xyXG4gICAgICAgIGlmICggdGhpcy5sb2dUZXh0Lmxlbmd0aCA+IEludGVyZmFjZS5MT0dfTUFYX0xJTkUgKSB0aGlzLmxvZ1RleHQubGVuZ3RoID0gSW50ZXJmYWNlLkxPR19NQVhfTElORTtcclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLmxvZ0ZyYW1lLl9fZHJhZyApIHtcclxuICAgICAgICAgICAgLy/rk5zrnpjqt7jspJFcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmxvZ1Njcm9sbFBvcyk7XHJcbiAgICAgICAgaWYgKCB0aGlzLmxvZ1Njcm9sbFBvcyA9PSAwICkge1xyXG4gICAgICAgICAgICBjb25zdCB0dyA9IHRoaXMuZ2V0SGlyZXNUZXh0V3JhcCggdGV4dCxudWxsLG51bGwsbnVsbCxJbnRlcmZhY2UudHRmICk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxvZ1RleHRbMF0udGV4dFdyYXAgPSB0dztcclxuICAgICAgICAgICAgdHcuc2V0VGV4dENvbG9yKCAweGZmZmZmZiApO1xyXG4gICAgICAgICAgICB0dy5zZXRQb3NpdGlvbiggMCwgLTEgKTtcclxuICAgICAgICAgICAgdGhpcy5sb2dUZXh0TGF5ZXIuYWRkQ2hpbGRBdCggdHcsIDAgKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoIGxldCBpID0gdGhpcy5sb2dUZXh0TGF5ZXIuZ2V0TnVtQ2hpbGRyZW4oKSAtIDE7IGkgPj0gMDsgaS0tICkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMubG9nVGV4dExheWVyLmdldENoaWxkQXQoIGkgKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHkyID0gcy5nZXRZKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCB5MiA8IC1sb2dXaW5kb3dIZWlnaHQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcy5yZW1vdmVGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR3ID0gbmV3IFR3ZWVuKCBzLCAzMDAsIHsgeTogeTIgLSBJbnRlcmZhY2UuTE9HX0xJTkVfU1BBQ0lORyB9LCB7IGVhc2U6IGVhc2luZy5vdXRDdWJpYyB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHMuX3R3ID0gdHc7XHJcbiAgICAgICAgICAgICAgICAgICAgdHcuYWRkRXZlbnRMaXN0ZW5lciggXCJjb21wbGV0ZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHMuX3R3ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvL+uTnOuemOq3uOykkeydtCDslYTri4jrqbQg66as7IWLXHJcbiAgICAgICAgICAgIGNvbnN0IGR5ID0gMDtcclxuXHJcbiAgICAgICAgICAgIHJlZHJhd0xvZy5jYWxsKCB0aGlzLCBkeSApO1xyXG4gICAgICAgICAgICB0aGlzLmxvZ1Njcm9sbFBvcyA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGhpZGVMb2coKSB7XHJcbiAgICAgICAgaWYgKCB0aGlzLmxvZ0hpZGVUaW1lciApIHtcclxuICAgICAgICAgICAgdGhpcy5sb2dIaWRlVGltZXIuc3RvcCgpO1xyXG4gICAgICAgICAgICB0aGlzLmxvZ0hpZGVUaW1lciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIHRoaXMubG9Ud2VlbiApIHtcclxuICAgICAgICAgICAgdGhpcy5sb1R3ZWVuLnN0b3AoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubG9Ud2VlbiA9IG5ldyBUd2VlbiggdGhpcy5sb2dGcmFtZSwgMzAwLCB7IGFscGhhOiAwIH0sIHsgZWFzZTogZWFzaW5nLmxpbmVhciB9IClcclxuICAgICAgICAgICAgLm9uQ29tcGxldGUoICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHRoaXMubG9nVGV4dC5sZW5ndGg7IGkrKyApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gdGhpcy5sb2dUZXh0W2ldLnRleHRXcmFwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzLnNldE92ZXJyaWRlQ29sb3IoIDB4NzA3MDcwICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dGcmFtZS5zZXRWaXNpYmxlKCBmYWxzZSApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb1R3ZWVuID0gbnVsbDtcclxuICAgICAgICAgICAgfSApO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzaG93TG9nKCkge1xyXG4gICAgICAgIGlmICggdGhpcy5sb1R3ZWVuICkge1xyXG4gICAgICAgICAgICB0aGlzLmxvVHdlZW4udG9FbmQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubG9nRnJhbWUuc2V0QWxwaGEoIDEgKTtcclxuICAgICAgICB0aGlzLmxvZ0ZyYW1lLnNldFZpc2libGUoIHRydWUgKTtcclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLmxvZ0hpZGVUaW1lciAhPSBudWxsICkge1xyXG4gICAgICAgICAgICB0aGlzLmxvZ0hpZGVUaW1lci5zdG9wKCk7XHJcbiAgICAgICAgICAgIHRoaXMubG9nSGlkZVRpbWVyID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubG9nSGlkZVRpbWVyID0gVGltZXIuZGVsYXllZENhbGwoIDMwMDAsIHRoaXMuaGlkZUxvZywgdGhpcyApO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8g7J247Y+s7LC9XHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8qXHJcblxyXG5cdGluZm87XHJcblx0dHlwZSA9IGl0ZW0gfCBpbnRlcmFjdDtcclxuXHR0ZXh0ID0gXHJcblxyXG5cdCovXHJcbiAgICBzaG93SW5mbyggaW5mbyApIHtcclxuICAgICAgICBjb25zb2xlLmxvZyggXCLsnITsuZjsl5Ag64yA7ZWcIOygleuztFwiLCBpbmZvLnR5cGUgKTtcclxuICAgICAgICAvKmluZm89IHt9XHJcblx0XHRpbmZvLnR5cGUgPSBcIml0ZW1cIlxyXG5cdFx0aW5mby50ZXh0ID0gXCLslYTsnbTthZzshKTrqoXsnoXri4jri6RcXG48Yy5mZjAwMDA+7JWI64WVPC9jPu2VmOyEuOyalD9cXG7rsJjqsJHsirXri4jri6QuIOyXrOufrOu2hCDslrTrlrvqsowg7KeA64K07Iut64uI6rmMP1xcbuyVhOumrOqwgOuYkFxcbuqzoOyekOydtOuniOyKpFxcbuuehOudvOudvOudvFxcbuudvOudvOuehOudvFwiXHJcblx0XHRpbmZvLm5hbWUgPSBcIuyXkeyhsO2LsSDqsJXtlZzqsJXtlZwg7JmV64+E64G8KzE1XCJcclxuXHRcdGluZm8uYnV0dG9uVHlwZSA9IFwiaW50ZXJhY3RcIlxyXG5cdFx0aW5mby5yYXJpdHkgPSA1O1xyXG5cdFx0Ki9cclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLmluZm9MYXllciApIHtcclxuICAgICAgICAgICAgdGhpcy5pbmZvTGF5ZXIucmVtb3ZlRnJvbVBhcmVudCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5pbmZvTGF5ZXIgPSBuZXcgU3ByaXRlKCk7XHJcbiAgICAgICAgdGhpcy5odWRMYXllci5jZW50ZXIuYWRkQ2hpbGQoIHRoaXMuaW5mb0xheWVyICk7XHJcbiAgICAgICAgbGV0IGZyYW1lV2lkdGgsIGZyYW1lSGVpZ2h0O1xyXG4gICAgICAgIGxldCB0ZXh0TGFiZWw7XHJcbiAgICAgICAgbGV0IGl0ZW1JbWFnZTtcclxuICAgICAgICBsZXQgY29sb3IgPSAweGZmZmZmZjtcclxuICAgICAgICBsZXQgd2luZG93RnJhbWU7XHJcblxyXG4gICAgICAgIGlmICggaW5mby50eXBlID09IFwiaW50ZXJhY3RcIiApIHtcclxuICAgICAgICAgICAgdGV4dExhYmVsID0gdGhpcy5nZXRIaXJlc1RleHRXcmFwKCBpbmZvLnRleHQsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIFwiY2VudGVyXCIgKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coIFwi7J247Y+s7LC9XCIsIGluZm8udGV4dCApO1xyXG4gICAgICAgICAgICB0ZXh0TGFiZWwuc2V0VGV4dENvbG9yKCAweGEwYTBhMCApO1xyXG4gICAgICAgICAgICBmcmFtZVdpZHRoID0gdGV4dExhYmVsLmdldFRleHRXaWR0aCgpICsgMTY7XHJcbiAgICAgICAgICAgIGZyYW1lSGVpZ2h0ID0gdGV4dExhYmVsLmdldEhlaWdodCgpICsgMTg7XHJcbiAgICAgICAgICAgIGNvbnN0IFt0ZXh0WCwgdGV4dFldID0gWzAsIC0gMzYgLSA3XTtcclxuXHJcbiAgICAgICAgICAgIHRleHRMYWJlbC5zZXRQb3NpdGlvbiggdGV4dFgsIHRleHRZICk7XHJcbiAgICAgICAgfSBlbHNlIGlmICggaW5mby50eXBlID09IFwiaXRlbVwiICkge1xyXG4gICAgICAgICAgICBpdGVtSW1hZ2UgPSBuZXcgSXRlbSggaW5mby5pdGVtLl9fa2V5ICk7XHJcbiAgICAgICAgICAgIGNvbG9yID0gaW5mby5pdGVtLmNvbG9yO1xyXG4gICAgICAgICAgICB0ZXh0TGFiZWwgPSB0aGlzLmdldEhpcmVzVGV4dFdyYXAoIGl0ZW1JbWFnZS5uYW1lICk7XHJcbiAgICAgICAgICAgIHRleHRMYWJlbC5zZXRUZXh0Q29sb3IoIGNvbG9yICk7XHJcbiAgICAgICAgICAgIGZyYW1lV2lkdGggPSB0ZXh0TGFiZWwuZ2V0VGV4dFdpZHRoKCkgKyAxNjtcclxuICAgICAgICAgICAgZnJhbWVIZWlnaHQgPSB0ZXh0TGFiZWwuZ2V0SGVpZ2h0KCkgKyAxODtcclxuICAgICAgICAgICAgY29uc3QgW3RleHRYLCB0ZXh0WV0gPSBbICggLWZyYW1lV2lkdGggLSAyMCApIC8gMiArIDE2ICsgMTAsIC0gMzYgLSA3XTtcclxuXHJcbiAgICAgICAgICAgIHRleHRMYWJlbC5zZXRQb3NpdGlvbiggdGV4dFgsIHRleHRZICk7XHJcbiAgICAgICAgICAgIGl0ZW1JbWFnZS5zZXRQb3NpdGlvbiggKCAtZnJhbWVXaWR0aCAtIDIwICkgLyAyICsgMTYsIC0gMzYgKTtcclxuICAgICAgICAgICAgaXRlbUltYWdlLnNldE92ZXJyaWRlQ29sb3IoIGNvbG9yICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aW5kb3dGcmFtZSA9IG5ldyBHcmlkOSggbmV3IFRleHR1cmUoIFwiUmVjdEZyYW1lLnBuZ1wiLCBmYWxzZSwgeyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKSApO1xyXG4gICAgICAgIHdpbmRvd0ZyYW1lLnNldFJlY3QoXHJcbiAgICAgICAgICAgICggLSBmcmFtZVdpZHRoIC0gMjAgKSAvIDIsXHJcbiAgICAgICAgICAgIC0gZnJhbWVIZWlnaHQgLSAyMCxcclxuICAgICAgICAgICAgZnJhbWVXaWR0aCArIDIwLFxyXG4gICAgICAgICAgICBmcmFtZUhlaWdodFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgd2luZG93RnJhbWUuc2V0T3ZlcnJpZGVDb2xvciggKCBjb2xvciA+PiAxICkgJiAweDdmN2Y3ZiApO1xyXG4gICAgICAgIHdpbmRvd0ZyYW1lLnNldEFscGhhKCAxICk7XHJcbiAgICAgICAgdGhpcy5pbmZvRnJhbWUgPSB3aW5kb3dGcmFtZTtcclxuICAgICAgICB0aGlzLmluZm9MYXllci5hZGRDaGlsZEF0KCB3aW5kb3dGcmFtZSwgMCApO1xyXG4gICAgICAgIHRoaXMuaW5mb0xheWVyLmFkZENoaWxkKCB0ZXh0TGFiZWwgKTtcclxuICAgICAgICBpZiAoIGl0ZW1JbWFnZSAhPSBudWxsICkgdGhpcy5pbmZvTGF5ZXIuYWRkQ2hpbGQoIGl0ZW1JbWFnZSApO1xyXG5cclxuICAgICAgICBsZXQgYnRuMSwgYnRuMjtcclxuXHJcbiAgICAgICAgaWYgKCBpbmZvLnR5cGUgPT0gXCJpdGVtXCIgfHwgaW5mby5idXR0b25UeXBlID09IFwicGlja3VwXCIgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGIgPSBuZXcgQml0bWFwKCBuZXcgVGV4dHVyZSggXCJQaWNrVXBCdXR0b24ucG5nXCIsIGZhbHNlLCB7IGZvcm1hdDogVGV4dHVyZUJhc2UuUkdCQTU1NTEgfSApICk7XHJcblxyXG4gICAgICAgICAgICBidG4xID0gbmV3IEJ1dHRvbjIoIHtcclxuICAgICAgICAgICAgICAgIHVwOiAgIHsgaW1hZ2U6IGIsIGNvbG9yOiAweGZmYTAwMCB9LFxyXG4gICAgICAgICAgICAgICAgZG93bjogeyBjb2xvcjogMHg5MDMwMDAsIHk6IDIgfSxcclxuICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgaWYgKCBpbmZvLm5lZWROZXh0ICkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYiA9IG5ldyBCaXRtYXAoIG5ldyBUZXh0dXJlKCBcIk5leHRCdXR0b24ucG5nXCIsIGZhbHNlLCB7IGZvcm1hdDogVGV4dHVyZUJhc2UuUkdCQTU1NTEgfSApICk7XHJcblxyXG4gICAgICAgICAgICAgICAgYnRuMiA9IG5ldyBCdXR0b24yKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXA6ICAgeyBpbWFnZTogYiwgY29sb3I6IDB4YTBhMGEwIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZG93bjogeyBjb2xvcjogMHg2MDYwNjAsIHk6IDIgfSxcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoIGluZm8uYnV0dG9uVHlwZSA9PSBcInllc25vXCIgKSB7XHJcbiAgICAgICAgICAgIGxldCBiID0gbmV3IEJpdG1hcCggbmV3IFRleHR1cmUoIFwiWWVzQnV0dG9uLnBuZ1wiLCBmYWxzZSwgeyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKSApO1xyXG5cclxuICAgICAgICAgICAgYnRuMSA9IG5ldyBCdXR0b24yKCB7XHJcbiAgICAgICAgICAgICAgICB1cDogICB7IGltYWdlOiBiLCBjb2xvcjogMHhmZmEwMDAgfSxcclxuICAgICAgICAgICAgICAgIGRvd246IHsgY29sb3I6IDB4OTAzMDAwLCB5OiAyIH0sXHJcbiAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgYiA9IG5ldyBCaXRtYXAoIG5ldyBUZXh0dXJlKCBcIk5vQnV0dG9uLnBuZ1wiLCBmYWxzZSwgeyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKSApO1xyXG4gICAgICAgICAgICBidG4yID0gbmV3IEJ1dHRvbjIoIHtcclxuICAgICAgICAgICAgICAgIHVwOiAgIHsgaW1hZ2U6IGIsIGNvbG9yOiAweGEwYTBhMCB9LFxyXG4gICAgICAgICAgICAgICAgZG93bjogeyBjb2xvcjogMHg2MDYwNjAsIHk6IDIgfSxcclxuICAgICAgICAgICAgfSApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIGluZm8uYnV0dG9uVHlwZSA9PSBcIm9rY2FuY2VsXCIgKSB7XHJcbiAgICAgICAgICAgIGxldCBiID0gbmV3IEJpdG1hcCggbmV3IFRleHR1cmUoIFwiT2tCdXR0b24ucG5nXCIsIGZhbHNlLCB7IGZvcm1hdDogVGV4dHVyZUJhc2UuUkdCQTU1NTEgfSApICk7XHJcblxyXG4gICAgICAgICAgICBidG4xID0gbmV3IEJ1dHRvbjIoIHtcclxuICAgICAgICAgICAgICAgIHVwOiAgIHsgaW1hZ2U6IGIsIGNvbG9yOiAweGZmYTAwMCB9LFxyXG4gICAgICAgICAgICAgICAgZG93bjogeyBjb2xvcjogMHg5MDMwMDAsIHk6IDIgfSxcclxuICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICBiID0gbmV3IEJpdG1hcCggbmV3IFRleHR1cmUoIFwiTm9CdXR0b24ucG5nXCIsIGZhbHNlLCB7IGZvcm1hdDogVGV4dHVyZUJhc2UuUkdCQTU1NTEgfSApICk7XHJcbiAgICAgICAgICAgIGJ0bjIgPSBuZXcgQnV0dG9uMigge1xyXG4gICAgICAgICAgICAgICAgdXA6ICAgeyBpbWFnZTogYiwgY29sb3I6IDB4YTBhMGEwIH0sXHJcbiAgICAgICAgICAgICAgICBkb3duOiB7IGNvbG9yOiAweDYwNjA2MCwgeTogMiB9LFxyXG4gICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgfSBlbHNlIGlmICggaW5mby5idXR0b25UeXBlID09IFwiaW50ZXJhY3RcIiApIHtcclxuICAgICAgICAgICAgY29uc3QgYiA9IG5ldyBCaXRtYXAoIG5ldyBUZXh0dXJlKCBcIkludGVyYWN0QnV0dG9uLnBuZ1wiLCBmYWxzZSwgeyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKSApO1xyXG5cclxuICAgICAgICAgICAgYnRuMSA9IG5ldyBCdXR0b24yKCB7XHJcbiAgICAgICAgICAgICAgICB1cDogICB7IGltYWdlOiBiLCBjb2xvcjogMHgwMGEwZmYgfSxcclxuICAgICAgICAgICAgICAgIGRvd246IHsgY29sb3I6IDB4OTAzMDAwLCB5OiAyIH0sXHJcbiAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIGlmICggaW5mby5uZWVkTmV4dCApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGIgPSBuZXcgQml0bWFwKCBuZXcgVGV4dHVyZSggXCJOZXh0QnV0dG9uLnBuZ1wiLCBmYWxzZSwgeyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKSApO1xyXG5cclxuICAgICAgICAgICAgICAgIGJ0bjIgPSBuZXcgQnV0dG9uMigge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwOiAgIHsgaW1hZ2U6IGIsIGNvbG9yOiAweGEwYTBhMCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRvd246IHsgY29sb3I6IDB4NjA2MDYwLCB5OiAyIH0sXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggYnRuMiApIHsgLy8g67KE7Yq8MuqwnFxyXG4gICAgICAgICAgICBidG4xLnNldFBvc2l0aW9uKCAtIDIyLCA1NSApO1xyXG4gICAgICAgICAgICAvL2J0bjEuc2NhbGUgPSBzdGFnZS5yZW5kZXJWaWV3cG9ydFNjYWxlO1xyXG4gICAgICAgICAgICB0aGlzLmluZm9MYXllci5hZGRDaGlsZCggYnRuMSApO1xyXG4gICAgICAgICAgICBidG4yLnNldFBvc2l0aW9uKCAyMiwgNTUgKTtcclxuICAgICAgICAgICAgdGhpcy5pbmZvTGF5ZXIuYWRkQ2hpbGQoIGJ0bjIgKTtcclxuICAgICAgICAgICAgYnRuMS5hZGRFdmVudExpc3RlbmVyKCBcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGlkZUluZm8oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIGluZm8uYnV0dG9uMSApIHtcclxuICAgICAgICAgICAgICAgICAgICBpbmZvLmJ1dHRvbjEoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICBidG4yLmFkZEV2ZW50TGlzdGVuZXIoIFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlSW5mbygpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggaW5mby5idXR0b24yICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluZm8uYnV0dG9uMigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgfSBlbHNlIGlmICggYnRuMSApIHsgLy8gMeqwnFxyXG4gICAgICAgICAgICBidG4xLnNldFBvc2l0aW9uKCAwLDU1ICk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5mb0xheWVyLmFkZENoaWxkKCBidG4xICk7XHJcbiAgICAgICAgICAgIGJ0bjEuYWRkRXZlbnRMaXN0ZW5lciggXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVJbmZvKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBpbmZvLmJ1dHRvbjEgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5mby5idXR0b24xKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaGlkZUluZm8oKSB7XHJcbiAgICAgICAgaWYgKCAhdGhpcy5pbmZvTGF5ZXIgKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5pbmZvVHdlZW4gKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5mb1R3ZWVuLnN0b3AoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHR3ID0gbmV3IFR3ZWVuKCB0aGlzLmluZm9MYXllciwgMTAwLCB7IGFscGhhOiAwIH0sIHsgZWFzZTogZWFzaW5nLmxpbmVhciB9ICk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5mb1R3ZWVuID0gdHc7XHJcbiAgICAgICAgLy9UT0RPOiBjb250ZXh0XHJcbiAgICAgICAgdHcuYWRkRXZlbnRMaXN0ZW5lciggXCJjb21wbGV0ZVwiLCAoKT0+e1xyXG4gICAgICAgICAgICB0aGlzLmluZm9MYXllci5yZW1vdmVGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5mb1R3ZWVuID0gbnVsbDtcclxuICAgICAgICB9LCB0aGlzICk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIO2MqOuEkCDsiqzrnbzsnbTrlKlcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgc2xpZGVPcGVuKCBheCwgYXksIGNsb3NpbmdDYWxsYmFjayApIHtcclxuICAgICAgICBpZiAoIHRoaXMuc2xpZGVJbmZvICkge1xyXG4gICAgICAgICAgICAvLyDsnbTrr7gg7Je066C464ukXHJcbiAgICAgICAgICAgIGNvbnN0IFtheCwgYXksIHZpZXdYLCB2aWV3WSwgd29ybGRYLCB3b3JsZFksIHR3LCBtXSA9IHRoaXMuc2xpZGVJbmZvO1xyXG5cclxuICAgICAgICAgICAgdHcuc3RvcCgpO1xyXG4gICAgICAgICAgICBHTE9CQUwud29ybGQuc2V0UG9zaXRpb24oIHdvcmxkWCwgd29ybGRZICk7XHJcbiAgICAgICAgICAgIEdMT0JBTC53b3JsZC5zaWdodE1hbmFnZXIubW92ZVZpZXdUbyggdmlld1ggKyBHTE9CQUwud29ybGQuZ2V0WCgpIC8gMiwgdmlld1kgKyBHTE9CQUwud29ybGQuZ2V0WSgpICk7XHJcbiAgICAgICAgICAgIEdMT0JBTC53b3JsZC5zaWdodE1hbmFnZXIudXBkYXRlU2hhZGVyVmlld0luZm8oKTtcclxuICAgICAgICAgICAgbS5yZW1vdmVGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL3RoaXMuaGlkZUxvZygpO1xyXG4gICAgICAgIHRoaXMuaGlkZUluZm8oKTtcclxuICAgICAgICB0aGlzLmN1cnNvci5oaWRlQXV0b0FjdGlvbigpO1xyXG4gICAgICAgIGNvbnN0IFt2aWV3WCwgdmlld1ldID0gW0dMT0JBTC53b3JsZC52aWV3WCwgR0xPQkFMLndvcmxkLnZpZXdZXTtcclxuICAgICAgICBjb25zdCB7IHg6IHdvcmxkWCwgeTogd29ybGRZIH0gPSBHTE9CQUwud29ybGQuZ2V0UG9zaXRpb24oKTtcclxuXHJcbiAgICAgICAgR0xPQkFMLmludGVyZmFjZS5jdXJzb3IubG9jaygpO1xyXG4gICAgICAgIGNvbnN0IFt4LCB5LCB3LCBoXSA9IGFwcGxpY2F0aW9uLmRldmljZVZpZXdwb3J0Lnh5d2g7XHJcbiAgICAgICAgY29uc3QgbSA9IE1lc2guY3JlYXRlQm94KCB4ICsgYXgsIHkgLSBheSwgdyArIE1hdGguYWJzKCBheCApLCBoICsgTWF0aC5hYnMoIGF5ICksIDB4ZmYwMDAwLCAwLjUgKTtcclxuXHJcbiAgICAgICAgbS5zZXRWaXNpYmxlKCBmYWxzZSApO1xyXG4gICAgICAgIHRoaXMuYWRkQ2hpbGRBdCggbSwwICk7XHJcbiAgICAgICAgY29uc3QgdHcgPSBuZXcgVHdlZW4oIEdMT0JBTC53b3JsZCwgMzAwLCB7IHg6IHdvcmxkWCArIGF4LCB5OiB3b3JsZFkgKyBheSB9LCB7IGVhc2U6IGVhc2luZy5vdXRCYWNrIH0gKVxyXG4gICAgICAgICAgICAub25DaGFuZ2UoICgpID0+IHtcclxuICAgICAgICAgICAgICAgIEdMT0JBTC53b3JsZC5zaWdodE1hbmFnZXIubW92ZVZpZXdUbyggdmlld1ggKyBHTE9CQUwud29ybGQuZ2V0WCgpIC8gMiwgdmlld1kgKyBHTE9CQUwud29ybGQuZ2V0WSgpIC8gMiApO1xyXG4gICAgICAgICAgICAgICAgR0xPQkFMLndvcmxkLnNpZ2h0TWFuYWdlci51cGRhdGVTaGFkZXJWaWV3SW5mbygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2dGcmFtZS5zZXRZKCBHTE9CQUwud29ybGQuZ2V0WSgpICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFBvc2l0aW9uKCAuLi5HTE9CQUwud29ybGQuZ2V0UG9zaXRpb24oKS54eSApO1xyXG4gICAgICAgICAgICB9IClcclxuICAgICAgICAgICAgLm9uQ29tcGxldGUoICgpID0+IHtcclxuICAgICAgICAgICAgICAgIG0uYWRkRXZlbnRMaXN0ZW5lciggRXZlbnQuUE9JTlRFUl9ET1dOLCAoIGUgKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjbG9zaW5nQ2FsbGJhY2sgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NpbmdDYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICB0aGlzLnNsaWRlSW5mbyA9IFtheCwgYXksIHZpZXdYLCB2aWV3WSwgd29ybGRYLCB3b3JsZFksIHR3LCBtIF07XHJcblxyXG4gICAgICAgIHJldHVybiB0dztcclxuICAgIH1cclxuXHJcblxyXG4gICAgc2xpZGVDbG9zZSggY2xvc2VkQ2FsbGJhY2sgKSB7XHJcbiAgICAgICAgaWYgKCB0aGlzLnNsaWRlSW5mbyApIHtcclxuICAgICAgICAgICAgbGV0IFtheCwgYXksIHZpZXdYLCB2aWV3WSwgd29ybGRYLCB3b3JsZFksIHR3LCBtXSA9IHRoaXMuc2xpZGVJbmZvO1xyXG5cclxuICAgICAgICAgICAgdHcuc3RvcCgpO1xyXG4gICAgICAgICAgICB0dyA9IG5ldyBUd2VlbiggR0xPQkFMLndvcmxkLCAzMDAsIHsgeDogd29ybGRYLCB5OiB3b3JsZFkgfSwgeyBlYXNlOiBlYXNpbmcub3V0Q3ViaWMgfSApXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBHTE9CQUwud29ybGQuc2lnaHRNYW5hZ2VyLm1vdmVWaWV3VG8oIHZpZXdYICsgR0xPQkFMLndvcmxkLmdldFgoKSAvIDIsIHZpZXdZICsgR0xPQkFMLndvcmxkLmdldFkoKSAvIDIgKTtcclxuICAgICAgICAgICAgICAgICAgICBHTE9CQUwud29ybGQuc2lnaHRNYW5hZ2VyLnVwZGF0ZVNoYWRlclZpZXdJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dGcmFtZS5zZXRZKCBHTE9CQUwud29ybGQuZ2V0WSgpICk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IEdMT0JBTC53b3JsZC5nZXRQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfSApXHJcbiAgICAgICAgICAgICAgICAub25Db21wbGV0ZSggKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVJbmZvID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBtLnJlbW92ZUZyb21QYXJlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmN1cnNvci51bmxvY2soKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjbG9zZWRDYWxsYmFjayApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VkQ2FsbGJhY2soKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlzU2lkZVBhbmVsT3BlbmVkKCkge1xyXG4gICAgICAgIGlmICggdGhpcy5zbGlkZUluZm8gKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgIGhpZGUoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRWaXNpYmxlKCBmYWxzZSApO1xyXG4gICAgICAgIHRoaXMuaHVkTGF5ZXIuc2V0VmlzaWJsZSggZmFsc2UgKTtcclxuICAgICAgICB0aGlzLmxvZ1dpbmRvd0xheWVyLnNldFZpc2libGUoIGZhbHNlICk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICB0aGlzLnNldFZpc2libGUoIHRydWUgKTtcclxuICAgICAgICB0aGlzLmh1ZExheWVyLnNldFZpc2libGUoIHRydWUgKTtcclxuICAgICAgICB0aGlzLmxvZ1dpbmRvd0xheWVyLnNldFZpc2libGUoIHRydWUgKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5JbnRlcmZhY2UudHRmID0gbmV3IE1zZGZGb250KCBcIm1zZGZfbXRjZ1wiLCAxMiwgeyB5ZWxsb3c6IHsgZmlsbDogMHhmZmZmMDAgfSB9ICk7XHJcbkludGVyZmFjZS51aVR0ZiA9IG5ldyBNc2RmRm9udCggXCJtc2RmX210Y2dfdWlcIiwgMTIsIHt9ICk7XHJcbkludGVyZmFjZS5mb250ID0gbmV3IEJpdG1hcEZvbnQoIFwiZm9udF9iaXRtYXBcIiwgOCApO1xyXG4vLyBJbnRlcmZhY2UudHRmLm9uKCBFdmVudC5MT0FERUQsKCk9PntcclxuLy8gICAgIGNvbnNvbGUubG9nKCBg7Y+w7Yq466Gc65Sp7JmE66OMIG10Y2dgICk7XHJcbi8vICAgICBjb25zb2xlLmxvZyggYO2PsO2KuCDquLjsnbQgJHtJbnRlcmZhY2UudHRmLm1lYXN1cmVUZXh0V2lkdGgoIFwi7JWI64WV7ZWY7IS47JqUP1wiLDIwICl9YCApO1xyXG4vLyB9ICk7XHJcblxyXG4vL0ludGVyZmFjZS5vbGRGb250ID0gbmV3IEZvbnQoXCJmb250X29sZC50eHRcIiwgXCJmb250X29sZC5wbmdcIik7XHJcbkludGVyZmFjZS5MT0dfTElORV9TUEFDSU5HID0gMTI7XHJcbkludGVyZmFjZS5MT0dfTUFYX0xJTkUgPSAzMDsgLy8g64SI66y0IO2BrOuptCDthY3siqTss5Drpbwg66eO7J20IOyalOq1rO2VmOqyjOuQqFxyXG5cclxuIiwiaW1wb3J0IHsgVHdlZW4sIFBpeGVsLCBoYW5ndWwsIE1lc2gsIFRleHRGaWVsZCwgZWFzaW5nLCBCaXRtYXAsIHN0YWdlLCBTY2VuZU1hbmFnZXIsIGFwcGxpY2F0aW9uLCBTb3VuZCwgUmVuZGVyVGFyZ2V0LCBVdGlscywgTW92aWVDbGlwLCBUZXh0dXJlLCBUZXh0dXJlQmFzZSwgU3ByaXRlLCBFdmVudCwgVGltZXIgfSBmcm9tIFwiQGVuZ2luZS9mbGF0ZmFzdFwiO1xyXG5cclxuaW1wb3J0IEdhbWVNYXAgZnJvbSBcIi4uL3dvcmxkL2dhbWVNYXBcIjtcclxuaW1wb3J0IEF1dG9NYXAgZnJvbSBcIi4vYXV0b01hcFwiO1xyXG5pbXBvcnQgQ3Vyc29yIGZyb20gXCIuL2N1cnNvclwiO1xyXG5pbXBvcnQgRGV0YWlsSW5mb1dpbmRvdyBmcm9tIFwiLi9kZXRhaWxJbmZvV2luZG93XCI7XHJcbmltcG9ydCBJY29uUGFjayBmcm9tIFwiQGxpYi9pY29uUGFja1wiO1xyXG5pbXBvcnQgQnV0dG9uMiBmcm9tIFwiQGxpYi9idXR0b24yXCI7XHJcbmltcG9ydCBSYW5kb20gZnJvbSBcIkBsaWIvcmFuZG9tXCI7XHJcbmltcG9ydCBDb2xvcnMgZnJvbSBcIkBsaWIvY29sb3JzXCI7XHJcbmltcG9ydCBMaXN0VmlldyBmcm9tIFwiQGxpYi9saXN0Vmlld1wiO1xyXG5pbXBvcnQgR3JpZDkgZnJvbSBcIkBsaWIvZ3JpZDlcIjtcclxuaW1wb3J0IFByb3AgZnJvbSBcIi4uL2VudGl0eS9wcm9wXCI7XHJcbmltcG9ydCBNb25zdGVyIGZyb20gXCIuLi9lbnRpdHkvbW9uc3RlclwiO1xyXG5pbXBvcnQgTnBjIGZyb20gXCIuLi9lbnRpdHkvbnBjXCI7XHJcbmltcG9ydCBJdGVtIGZyb20gXCIuLi9lbnRpdHkvaXRlbVwiO1xyXG5cclxuaW1wb3J0IEdMT0JBTCBmcm9tIFwiLi4vZ2xvYmFsXCI7XHJcbmltcG9ydCBDT05GSUcgZnJvbSBcIi4uL2NvbmZpZ1wiO1xyXG5cclxuXHJcbmZ1bmN0aW9uIHNwcml0ZUZ1bmMoIGx2LCBsdkl0ZW0sIGluZGV4LCBzZWxmICkge1xyXG4gICAgY29uc3QgaXRlbSA9IGx2SXRlbS5kYXRhLml0ZW07XHJcbiAgICBjb25zdCBzcHIgPSBpdGVtLmdldEludmVudG9yeVNwcml0ZSgpO1xyXG5cclxuICAgIC8vIHNwci5lbmFibGVNb3VzZURyYWcodHJ1ZSwge1xyXG4gICAgLy8gICAgIHZlcnRpY2FsTG9jazogICAgICB0cnVlLFxyXG4gICAgLy8gICAgIG1vdXNlRG93bkNhbGxiYWNrOiAoc3ByLCBlKSA9PiB7XHJcbiAgICAvLyAgICAgICAgIGUuZHJhZy5jYW5jZWwgPSB0cnVlO1xyXG4gICAgLy8gICAgIH0sXHJcbiAgICAvLyAgICAgbW91c2VNb3ZlQ2FsbGJhY2s6IChzcHIsIGUpID0+IHtcclxuICAgIC8vICAgICAgICAgZS5kcmFnLnggPSBNYXRoLm1pbihlLmRyYWcueCwgZS5kcmFnLm94KTtcclxuICAgIC8vICAgICAgICAgaWYgKGUuZHJhZy5keCA8IC0gNjApIHsgLy8g67KE66as6riwXHJcbiAgICAvLyAgICAgICAgICAgICBzcHIuc2V0QWxwaGEoMC41KTtcclxuICAgIC8vICAgICAgICAgfSBlbHNlIHtcclxuICAgIC8vICAgICAgICAgICAgIHNwci5zZXRBbHBoYSgxKTtcclxuICAgIC8vICAgICAgICAgfVxyXG4gICAgLy8gICAgICAgICBlLmRyYWcuY2FuY2VsID0gdHJ1ZTtcclxuICAgIC8vICAgICB9LFxyXG4gICAgLy8gICAgIG1vdXNlVXBDYWxsYmFjazogKHNwciwgZSkgPT4ge1xyXG4gICAgLy8gICAgICAgICBlLmRyYWcueCA9IE1hdGgubWluKGUuZHJhZy54LCBlLmRyYWcub3gpO1xyXG4gICAgLy8gICAgICAgICBpZiAoZS5kcmFnLmR4IDwgLTYwKSB7IC8vIOuyhOumrOq4sFxyXG4gICAgLy8gICAgICAgICAgICAgY29uc29sZS5sb2coc2VsZik7XHJcbiAgICAvLyAgICAgICAgICAgICBzZWxmLmRyb3BJdGVtKGl0ZW0pO1xyXG4gICAgLy8gICAgICAgICB9IGVsc2Uge1xyXG4gICAgLy8gICAgICAgICAgICAgbmV3IFR3ZWVuKHNwciwgMTAwLCB7IHg6IGUuZHJhZy5veCB9LCB7IGVhc2U6IGVhc2luZy5vdXRDdWJpYyB9KTtcclxuICAgIC8vICAgICAgICAgfVxyXG4gICAgLy8gICAgICAgICBlLmRyYWcuY2FuY2VsID0gdHJ1ZTtcclxuICAgIC8vICAgICB9LFxyXG4gICAgLy8gfSk7XHJcbiAgICByZXR1cm4gW3NwciwgbnVsbCwgc3ByLmdldEhlaWdodCgpIC0gM107XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAdGhpcyBJbnZlbnRvcnlcclxuICpcclxuICogQHBhcmFtIHsqfSBlXHJcbiAqL1xyXG5mdW5jdGlvbiBvbkNsaWNrKCBlICkge1xyXG4gICAgLy9sb2coZS5pbmRleCxlLml0ZW0sZS5pdGVtLmRhdGEuaXRlbS5uYW1lKTtcclxuICAgIGNvbnN0IGl0ZW0gPSBlLml0ZW0uZGF0YS5pdGVtO1xyXG5cclxuICAgIGlmICggZS54ID49IDkwICYmICF0aGlzLnRyeVVzZSggaXRlbSApICkge1xyXG4gICAgICAgIHRoaXMudHJ5RXF1aXAoIGl0ZW0gKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8g7JWE7J207YWcIOyEpOuqhSDrs7TquLBcclxuICAgICAgICBjb25zdCBkaXcgPSBuZXcgRGV0YWlsSW5mb1dpbmRvdyggaXRlbSApO1xyXG5cclxuICAgICAgICBkaXcuc2hvdygpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEludmVudG9yeSB7XHJcbiAgICBjb25zdHJ1Y3Rvciggc2l6ZSApIHtcclxuICAgICAgICB0aGlzLml0ZW1zID0gW107XHJcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICBpc0Z1bGwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMubGVuZ3RoID49IHRoaXMuc2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRJdGVtKCBpdGVtICkge1xyXG4gICAgICAgIGlmICggdGhpcy5pdGVtcy5sZW5ndGggPj0gdGhpcy5zaXplICkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLml0ZW1zLnB1c2goIGl0ZW0gKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZW1zLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SW5kZXgoIGl0ZW0gKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMuaW5kZXhPZiggaXRlbSApO1xyXG4gICAgfVxyXG5cclxuICAgIGZpbmRFcXVpcHBlZEl0ZW1CeVR5cGUoIHR5cGUgKSB7XHJcbiAgICAgICAgY29uc3QgdCA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKCBjb25zdCBpIGluIHRoaXMuaXRlbXMgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLml0ZW1zW2ldO1xyXG5cclxuICAgICAgICAgICAgaWYgKCB2LnByb3BlcnR5LnR5cGUgPT0gdHlwZSAmJiB2LmVxdWlwcGVkICkge1xyXG4gICAgICAgICAgICAgICAgdC5wdXNoKCB2ICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG5cclxuICAgIGZpbmRJdGVtQnlUeXBlKCB0eXBlICkge1xyXG4gICAgICAgIGNvbnN0IHQgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yICggY29uc3QgaSBpbiB0aGlzLml0ZW1zICkge1xyXG4gICAgICAgICAgICBjb25zdCB2ID0gdGhpcy5pdGVtc1tpXTtcclxuXHJcbiAgICAgICAgICAgIGlmICggdi5wcm9wZXJ0eS50eXBlID09IHR5cGUgKSB7XHJcbiAgICAgICAgICAgICAgICB0LnB1c2goIHYgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHJlbW92ZUl0ZW0oIGl0ZW0gKSB7XHJcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuZ2V0SW5kZXgoIGl0ZW0gKTtcclxuXHJcbiAgICAgICAgaWYgKCBpICkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVJdGVtQXQoIGkgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlSXRlbUF0KCBpICkge1xyXG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW1zW2ldO1xyXG5cclxuICAgICAgICB0aGlzLml0ZW1zLnNwbGljZSggaSwxICk7XHJcblxyXG4gICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOyduOuypO2GoOumrOulvCDri6vslZjsnYQg65WMIOyLpO2Wie2VoCDtlajsiJjrpbwg7KSEIOyImCDsnojri6RcclxuICAgIGNsb3NlKCBmdW5jLGRhdGEgKSB7XHJcbiAgICAgICAgU291bmQucGxheVNvdW5kKCBcInNvdW5kL2ludmVudG9yeV9jbG9zZS53YXZcIiApO1xyXG4gICAgICAgIGNvbnN0IHR3ID0gR0xPQkFMLmludGVyZmFjZS5zbGlkZUNsb3NlKCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFzZVNwci5yZW1vdmVGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdFZpZXcgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLmJhc2VTcHIgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoIGZ1bmMgKSB7XHJcbiAgICAgICAgICAgICAgICBmdW5jKCBkYXRhICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBHTE9CQUwud29ybGQuc2hvd01hcEluZm8oIEdMT0JBTC5wbGF5ZXIudGlsZVgsIEdMT0JBTC5wbGF5ZXIudGlsZVkgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgdHcub25DaGFuZ2UoICgpID0+IHtcclxuICAgICAgICAgICAgLy90aGlzLmJhc2VTcHIuc2V0WChHTE9CQUwud29ybGQuZ2V0WCgpKTtcclxuICAgICAgICAgICAgLy90aGlzLmxpc3RWaWV3LnVwZGF0ZUNsaXAoKTtcclxuICAgICAgICB9ICk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJvcEl0ZW0oIGl0ZW0gKSB7XHJcbiAgICAgICAgR0xPQkFMLndvcmxkLmFkZExvZyggXCIlc3vsnYR9IOuwlOuLpeyXkCDrsoTroLjri6QuXCIsaXRlbS5uYW1lICk7XHJcbiAgICAgICAgZm9yICggY29uc3QgaSBpbiB0aGlzLmxpc3RWaWV3Lml0ZW1zICkge1xyXG4gICAgICAgICAgICBjb25zdCB2ID0gdGhpcy5saXN0Vmlldy5pdGVtc1tpXTtcclxuXHJcbiAgICAgICAgICAgIGlmICggdi5kYXRhLml0ZW0gPT0gaXRlbSApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGlzdFZpZXcucmVtb3ZlKCB2ICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgR0xPQkFMLnBsYXllci5pbnZlbnRvcnkucmVtb3ZlSXRlbSggaXRlbSApO1xyXG4gICAgICAgIEdMT0JBTC5pbnRlcmZhY2UuYWN0aW9uU2VsZWN0b3IudW5zZWxlY3QoIGl0ZW0gKTtcclxuICAgICAgICBpdGVtLmRyb3AoIEdMT0JBTC5wbGF5ZXIudGlsZVgsR0xPQkFMLnBsYXllci50aWxlWSApO1xyXG4gICAgICAgIGlmICggR0xPQkFMLnBsYXllci5pbnZlbnRvcnkuaXRlbXMubGVuZ3RoID09IDAgKSB7XHJcbiAgICAgICAgICAgIEdMT0JBTC5wbGF5ZXIuaW52ZW50b3J5LnNldExpc3RWaWV3KCBHTE9CQUwucGxheWVyLmludmVudG9yeS5iYXNlU3ByICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldExpc3RWaWV3KCBiYXNlU3ByICkge1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgbnVtT2ZJdGVtID0gMDtcclxuICAgICAgICAgICAgLy9UT0RPOlxyXG4gICAgICAgICAgICBjb25zdCB0ZjEgPSBHTE9CQUwuaW50ZXJmYWNlLmdldEJpdG1hcFRleHRGaWVsZCggVXRpbHMuZm9ybWF0KCBcIiVkLyVkXCIsIHRoaXMuaXRlbXMubGVuZ3RoLHRoaXMuc2l6ZSApICk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIHRoaXMuaXRlbXMubGVuZ3RoID09IHRoaXMuc2l6ZSApIHtcclxuICAgICAgICAgICAgICAgIHRmMS5zZXRUZXh0Q29sb3IoIDB4ZmYwMDAwICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0ZjEuc2V0VGV4dENvbG9yKCAweGZmZmZmZiApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRmMS5zZXRQb3NpdGlvbiggMCwtIDIwICk7XHJcbiAgICAgICAgICAgIGJhc2VTcHIuYWRkQ2hpbGQoIHRmMSApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIHRoaXMuaXRlbXMubGVuZ3RoID09IDAgKSB7XHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgbHZJdGVtcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgZm9yICggY29uc3QgaSBpbiB0aGlzLml0ZW1zICkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMuaXRlbXNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgbHZJdGVtcy5wdXNoKCBbdi5uYW1lLCB7IGl0ZW06IHYgfV0gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBsdiA9IG5ldyBMaXN0VmlldyhcclxuICAgICAgICAgICAgICAgIGx2SXRlbXMsXHJcbiAgICAgICAgICAgICAgICAxMjAsXHJcbiAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbi5sb2dpY2FsUmVuZGVyQm91bmRzLmhlaWdodCAtIDIwLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG93bmVyOiAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICBhbGlnbjogICAgICAgICAgIFwiYm90dG9tXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgLy9jbGlwOiAgICAgICAgICAgIHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgY3V0T2Zmc2V0Qm90dG9tOiAyMCxcclxuICAgICAgICAgICAgICAgICAgICAvL3N0aWNrT25Cb3JkZXIgPSB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNwcml0ZUZ1bmM6ICAgICAgc3ByaXRlRnVuYyxcclxuXHRcdFx0XHRcdFxyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbkZ1bmM6ICggc2VsZiwgc3ByLCBpICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpMiA9IHNlbGYuZ2V0TnVtT2ZJdGVtcygpIC0gaSArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgeCwgeSB9ID0gc3ByLmdldFBvc2l0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcHIuc2V0WCggeCArIDE2MCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgVHdlZW4oIHNwciwgMzAwLCB7IHgsIHkgfSwgeyBkZWxheTogaTIgKiAwLjAyLCBlYXNlOiBlYXNpbmcub3V0Q3ViaWMgfSApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcblx0XHRcdFx0XHRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIC8vbHYuc2V0QW5jaG9yUG9pbnQoIDAsIDAgKTtcclxuICAgICAgICAgICAgbHYuc2V0UG9zaXRpb24oIDAsLWFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMuaGVpZ2h0ICk7XHJcbiAgICAgICAgICAgIGx2LmFkZEV2ZW50TGlzdGVuZXIoIFwiY2xpY2tcIixvbkNsaWNrLHRoaXMgKTtcclxuICAgICAgICAgICAgYmFzZVNwci5hZGRDaGlsZCggbHYgKTtcclxuICAgICAgICAgICAgdGhpcy5saXN0VmlldyA9IGx2O1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RWaWV3LmFkZEV2ZW50TGlzdGVuZXIoIFwiY2xvc2VcIiwgKCkgPT4gdGhpcy5jbG9zZSgpICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBvcGVuKCkge1xyXG4gICAgICAgIGNvbnN0IGJhc2VTcHIgPSBuZXcgU3ByaXRlKCk7XHJcblxyXG4gICAgICAgIFNvdW5kLnBsYXlTb3VuZCggXCJzb3VuZC9pbnZlbnRvcnlfb3Blbi53YXZcIiApO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCBcIuyduOuypO2GoOumrCDrs7TquLBcIiApO1xyXG4gICAgICAgIGZvciAoIGNvbnN0IGkgaW4gdGhpcy5pdGVtcyApIHtcclxuICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMuaXRlbXNbaV07XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyggdi5uYW1lICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB0dyA9IEdMT0JBTC5pbnRlcmZhY2Uuc2xpZGVPcGVuKCAtMTIwLCAwLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgIHR3Lm9uQ2hhbmdlKCAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vYmFzZVNwci5zZXRYKEdMT0JBTC53b3JsZC5nZXRYKCkpO1xyXG4gICAgICAgICAgICAvL3RoaXMubGlzdFZpZXcudXBkYXRlQ2xpcCgpO1xyXG4gICAgICAgIH0gKTtcclxuICAgICAgICB0aGlzLnNldExpc3RWaWV3KCBiYXNlU3ByICk7XHJcbiAgICAgICAgdGhpcy5iYXNlU3ByID0gYmFzZVNwcjtcclxuICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmh1ZExheWVyLmJvdHRvbVJpZ2h0LmFkZENoaWxkKCBiYXNlU3ByICk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHRyeUVxdWlwKCBpdGVtLG5vdFRvZ2dsZSApIHtcclxuICAgICAgICBjb25zdCBpID0gdGhpcy5nZXRJbmRleCggaXRlbSApO1xyXG4gICAgICAgIGNvbnN0IGVxdWlwTWF4ID0gaXRlbS5pc0VxdWlwcGFibGUoKSB8fCAwO1xyXG4gICAgICAgIGNvbnN0IGVxdWlwcGVkSXRlbXMgPSB0aGlzLmZpbmRFcXVpcHBlZEl0ZW1CeVR5cGUoIGl0ZW0ucHJvcGVydHkudHlwZSApO1xyXG4gICAgICAgIGNvbnN0IGVxdWlwQXZhaWxhYmxlID0gZXF1aXBNYXggLSBlcXVpcHBlZEl0ZW1zLmxlbmd0aDtcclxuXHJcbiAgICAgICAgaWYgKCBlcXVpcE1heCAmJiBlcXVpcE1heCA+IDAgKSB7XHJcbiAgICAgICAgICAgIGlmICggZXF1aXBNYXggPT0gMSApIHtcclxuICAgICAgICAgICAgICAgIGlmICggZXF1aXBwZWRJdGVtc1swXSAmJiAhKCBub3RUb2dnbGUgJiYgZXF1aXBwZWRJdGVtc1swXSA9PSBpdGVtICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgR0xPQkFMLndvcmxkLmFkZExvZyggXCIlc3vsnYR9IOyepeu5hO2VtOygnO2WiOuLpC5cIixlcXVpcHBlZEl0ZW1zWzBdLm5hbWUgKTtcclxuICAgICAgICAgICAgICAgICAgICBlcXVpcHBlZEl0ZW1zWzBdLnVuZXF1aXAoKTtcclxuICAgICAgICAgICAgICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmFjdGlvblNlbGVjdG9yLnVuc2VsZWN0KCBlcXVpcHBlZEl0ZW1zWzBdICk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLmxpc3RWaWV3ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsdkl0ZW0gPSB0aGlzLmxpc3RWaWV3LmdldEl0ZW0oIHRoaXMuZ2V0SW5kZXgoIGVxdWlwcGVkSXRlbXNbMF0gKSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbHZJdGVtLnNwcml0ZS51cGRhdGVFcXVpcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBTb3VuZC5wbGF5U291bmQoIFwic291bmQvaW52ZW50b3J5X3VuZXF1aXAud2F2XCIgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICggZXF1aXBwZWRJdGVtc1swXSAhPSBpdGVtICkge1xyXG4gICAgICAgICAgICAgICAgICAgIEdMT0JBTC53b3JsZC5hZGRMb2coIFwiJXN77J2EfSDsnqXruYTtlojri6QuXCIsaXRlbS5uYW1lICk7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5lcXVpcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5saXN0VmlldyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbHZJdGVtID0gdGhpcy5saXN0Vmlldy5nZXRJdGVtKCB0aGlzLmdldEluZGV4KCBpdGVtICkgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGx2SXRlbS5zcHJpdGUudXBkYXRlRXF1aXAoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgU291bmQucGxheVNvdW5kKCBcInNvdW5kL2ludmVudG9yeV9lcXVpcC53YXZcIiApO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggR0xPQkFMLnBsYXllci5nZXRTZWxlY3RlZEFjdGlvbigpLnByb3BlcnR5LnR5cGUgPT0gaXRlbS5wcm9wZXJ0eS50eXBlICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmFjdGlvblNlbGVjdG9yLnNlbGVjdCggaXRlbSApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBHTE9CQUwucGxheWVyLmRvTm90aGluZygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgR0xPQkFMLmludGVyZmFjZS5hY3Rpb25TZWxlY3Rvci5yZWZyZXNoKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyDrkZDqsJzsnbTsg4HsnqXruYTqsIDriqXtlZwg7JWE7J207YWcXHJcbiAgICAgICAgICAgICAgICBpZiAoIGVxdWlwQXZhaWxhYmxlID4gMCApIHtcclxuICAgICAgICAgICAgICAgICAgICBHTE9CQUwud29ybGQuYWRkTG9nKCBcIiVze+ydhH0g7J6l67mE7ZaI64ukLlwiLGl0ZW0ubmFtZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uZXF1aXAoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaXMubGlzdFZpZXcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGx2SXRlbSA9IHRoaXMubGlzdFZpZXcuZ2V0SXRlbSggdGhpcy5nZXRJbmRleCggaXRlbSApICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsdkl0ZW0uc3ByaXRlLnVwZGF0ZUVxdWlwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFNvdW5kLnBsYXlTb3VuZCggXCJzb3VuZC9pbnZlbnRvcnlfZXF1aXAud2F2XCIgKTtcclxuICAgICAgICAgICAgICAgICAgICBHTE9CQUwucGxheWVyLmRvTm90aGluZygpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBHTE9CQUwud29ybGQuYWRkTG9nKCBcIuuLpOuluCDsnqXruYTrpbwg67KX6riwIOyghOyXkOuKlCAlc3vsnYR9IOyepeu5hO2VoCDsiJgg7JeG64ukLlwiLGl0ZW0ubmFtZSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyggXCLsnqXruYTtlaAg7IiYIOyXhuuKlCDslYTsnbTthZzsnYQg7J6l67mE7ZWY66Ck7ZWoXCIgKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5VXNlKCBpdGVtICkge1xyXG4gICAgICAgIGlmICggaXRlbS5wcm9wZXJ0eS50eXBlID09IFwidXNhYmxlXCIgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG4iLCJpbXBvcnQgeyBzdGFnZSxUd2VlbiwgU291bmQsIFJlcmRlclRhcmdldCwgS2V5Q29kZSwgTW92aWVDbGlwLCBTaGFwZSwgVXRpbHMsIFRleHR1cmVCYXNlLCBUZXh0dXJlLCBUaW1lciwgTWVzaCwgVGV4dEZpZWxkLCBlYXNpbmcsIEV2ZW50LCBCaXRtYXAsIFNwcml0ZSB9IGZyb20gXCJAZW5naW5lL2ZsYXRmYXN0XCI7XHJcbmltcG9ydCBHTE9CQUwgZnJvbSBcIi4uL2dsb2JhbFwiO1xyXG5pbXBvcnQgQ09ORklHIGZyb20gXCIuLi9jb25maWdcIjtcclxuaW1wb3J0IEljb25QYWNrIGZyb20gXCJAbGliL2ljb25QYWNrXCI7XHJcbmltcG9ydCBHcmlkOSBmcm9tIFwiQGxpYi9ncmlkOVwiO1xyXG5pbXBvcnQgU2xpZGVWaWV3IGZyb20gXCJAbGliL3NsaWRlVmlld1wiO1xyXG5pbXBvcnQgV29ybGQgZnJvbSBcIi4uL3dvcmxkL3dvcmxkXCI7XHJcbmltcG9ydCBHYW1lTWFwIGZyb20gXCIuLi93b3JsZC9nYW1lTWFwXCI7XHJcbmltcG9ydCBJbnRlcmZhY2UgZnJvbSBcIi4vaW50ZXJmYWNlXCI7XHJcbmltcG9ydCBWaXNpYmlsaXR5VGlsZSBmcm9tIFwiQGxpYi92aXNpYmlsaXR5VGlsZVwiO1xyXG5cclxuXHJcblxyXG5sZXQgZG90NlRleHR1cmUgPSBuZXcgVGV4dHVyZSggXCJkb3Q2LnBuZ1wiLGZhbHNlLHsgZm9ybWF0OiBUZXh0dXJlQmFzZS5SR0JBNTU1MSB9ICk7XHJcbmxldCBkb3QxMFRleHR1cmUgPSBuZXcgVGV4dHVyZSggXCJkb3QxMC5wbmdcIiwgZmFsc2UsIHsgZm9ybWF0OiBUZXh0dXJlQmFzZS5SR0JBNTU1MSB9ICk7XHJcblxyXG5mdW5jdGlvbiBzZXRJbmRleERvdCggc2VsZixpbmRleCxtYXhJbmRleCApIHtcclxuICAgIHNlbGYuaW5kZXhEb3RTcHJpdGUucmVtb3ZlRnJvbVBhcmVudCgpO1xyXG4gICAgbGV0IHMgPSBuZXcgU3ByaXRlKCk7XHJcblxyXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDw9IG1heEluZGV4OyBpKysgKSB7XHJcbiAgICAgICAgbGV0IGI7XHJcblxyXG4gICAgICAgIGlmICggaW5kZXggPT0gaSApIHtcclxuICAgICAgICAgICAgYiA9IG5ldyBCaXRtYXAoIGRvdDEwVGV4dHVyZSApO1xyXG4gICAgICAgICAgICBiLnNldEFuY2hvclBvaW50KCAwLjUsMC41ICk7XHJcbiAgICAgICAgICAgIGIuc2V0QWxwaGEoIDAuOSApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGIgPSBuZXcgQml0bWFwKCBkb3Q2VGV4dHVyZSApO1xyXG4gICAgICAgICAgICBiLnNldEFuY2hvclBvaW50KCAwLjUsMC41ICk7XHJcbiAgICAgICAgICAgIGIuc2V0QWxwaGEoIDAuNSApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBiLnNldFBvc2l0aW9uKCAtbWF4SW5kZXggLyAyICogOCArICggaSAtIDAuNSApICogOCwwICk7XHJcbiAgICAgICAgcy5hZGRDaGlsZCggYiApO1xyXG4gICAgfVxyXG4gICAgcy5zZXRQb3NpdGlvbiggYXBwbGljYXRpb24ubG9naWNhbFZpZXdwb3J0LndpZHRoIC8gMixUb3BNZW51LmhlaWdodCAtIDEwICk7XHJcbiAgICBzZWxmLmluZGV4RG90U3ByaXRlID0gcztcclxuICAgIHNlbGYuYmFzZVNwci5hZGRDaGlsZCggcyApO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVG9wTWVudSBleHRlbmRzIFNwcml0ZSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCBjYWxsYmFjayApIHtcclxuICAgICAgICBTb3VuZC5wbGF5U291bmQoIFwic291bmQvdG9wX21lbnVfY2xvc2Uud2F2XCIgKTtcclxuICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLnNsaWRlQ2xvc2UoICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5iYXNlU3ByLnJlbW92ZUZyb21QYXJlbnQoKTtcclxuICAgICAgICAgICAgR0xPQkFMLndvcmxkLnNob3dNYXBJbmZvKCBHTE9CQUwucGxheWVyLnRpbGVYLEdMT0JBTC5wbGF5ZXIudGlsZVkgKTtcclxuICAgICAgICB9IClcclxuICAgICAgICAgICAgLm9uQ2hhbmdlKCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJhc2VTcHIuc2V0WSggR0xPQkFMLndvcmxkLmdldFkoKSAtIFRvcE1lbnUuaGVpZ2h0ICk7XHJcbiAgICAgICAgICAgIH0gKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKCkge1xyXG4gICAgICAgIGxldCBiYXNlU3ByID0gbmV3IFNwcml0ZSgpO1xyXG5cclxuICAgICAgICBTb3VuZC5wbGF5U291bmQoIFwic291bmQvdG9wX21lbnVfb3Blbi53YXZcIiApO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCBcIu2DkSDrqZTribRcIiApO1xyXG4gICAgICAgIC8vdGhpcy5zZXRMaXN0VmlldyhHTE9CQUwud29ybGQsYmFzZVNwcik7XHJcbiAgICAgICAgdGhpcy5iYXNlU3ByID0gYmFzZVNwcjtcclxuICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmh1ZExheWVyLmFkZENoaWxkKCBiYXNlU3ByICk7XHJcbiAgICAgICAgLy9HTE9CQUwuaW50ZXJmYWNlLmhpcmVzTGF5ZXIuYWRkQ2hpbGQoYmFzZVNwcik7XHJcbiAgICAgICAgbGV0IHBhbmVscyA9IHt9O1xyXG4gICAgICAgIGxldCBbeCx5LHddID0gR0xPQkFMLnN0YWdlLnJlbmRlclZpZXdwb3J0Lnh5d2g7XHJcbiAgICAgICAgbGV0IGggPSBUb3BNZW51LmhlaWdodDtcclxuXHJcbiAgICAgICAgcGFuZWxzWzBdID0gTWVzaC5jcmVhdGVCb3goIHgseSx3LGgsMHgwMDAwMDAgKTtcclxuICAgICAgICBwYW5lbHNbMV0gPSBNZXNoLmNyZWF0ZUJveCggeCx5LHcsaCwweGZmMDAwMCApO1xyXG4gICAgICAgIHBhbmVsc1syXSA9IE1lc2guY3JlYXRlQm94KCB4LHksdyxoLDB4MDAwMGZmICk7XHJcbiAgICAgICAgdGhpcy5tYWtlQ2hhcmFjdGVyUGFuZWwoIHBhbmVsc1swXSApO1xyXG4gICAgICAgIGxldCBzdiA9IG5ldyBTbGlkZVZpZXcoIHcsVG9wTWVudS5oZWlnaHQscGFuZWxzIClcclxuICAgICAgICAgICAgLm9uKCBcImluZGV4Q2hhbmdpbmdcIiwoIGUgKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzZXRJbmRleERvdCggdGhpcyxlLmluZGV4LHBhbmVscy5sZW5ndGggKTtcclxuICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICBiYXNlU3ByLmFkZENoaWxkKCBzdiApO1xyXG4gICAgICAgIEdMT0JBTC5pbnRlcmZhY2Uuc2xpZGVPcGVuKCAwLFRvcE1lbnUuaGVpZ2h0LCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH0gKVxyXG4gICAgICAgICAgICAub25DaGFuZ2UoICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmFzZVNwci5zZXRZKCBHTE9CQUwud29ybGQuZ2V0WSgpIC0gVG9wTWVudS5oZWlnaHQgKTtcclxuICAgICAgICAgICAgfSApO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBtYWtlQ2hhcmFjdGVyUGFuZWwoIHMgKSB7XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgYiA9IG5ldyBCaXRtYXAoIG5ldyBUZXh0dXJlKCBcIm5hbWVGcmFtZS5wbmdcIixmYWxzZSx7IGZvcm1hdDogVGV4dHVyZUJhc2UuUkdCQTQ0NDQgfSApICk7XHJcblxyXG4gICAgICAgICAgICBiLnNldEFuY2hvclBvaW50KCAwLjUsMC41ICk7XHJcbiAgICAgICAgICAgIC8vYi5zZXRPdmVycmlkZUNvbG9yKDB4NTA1MDUwKTtcclxuICAgICAgICAgICAgYi5zZXRQb3NpdGlvbiggYXBwbGljYXRpb24ubG9naWNhbFZpZXdwb3J0LndpZHRoIC8gMiwzMCApO1xyXG4gICAgICAgICAgICBzLmFkZENoaWxkKCBiICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IHRmID0gR0xPQkFMLmludGVyZmFjZS5nZXRIaXJlc1RleHRGaWVsZCggVXRpbHMuZm9ybWF0KCBcIuugiOuyqCVkIOuwlOuwlOumrOyViCDsoITsgqxcIixHTE9CQUwucGxheWVyLmxldmVsICksSW50ZXJmYWNlLnVpVHRmICk7XHJcblxyXG4gICAgICAgICAgICB0Zi5zZXRUZXh0Q29sb3IoIDB4YzBjMGMwICk7XHJcbiAgICAgICAgICAgIHRmLnNldFBvc2l0aW9uKCBhcHBsaWNhdGlvbi5sb2dpY2FsVmlld3BvcnQud2lkdGggLyAyIC0gdGYuZ2V0V2lkdGgoKSAvIDIsNTUgKTtcclxuICAgICAgICAgICAgcy5hZGRDaGlsZCggdGYgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgdGYgPSBHTE9CQUwuaW50ZXJmYWNlLmdldEhpcmVzVGV4dEZpZWxkKCBVdGlscy5mb3JtYXQoIFwi6rmA64KY7YGsXCIsR0xPQkFMLnBsYXllci5sZXZlbCApICk7XHJcblxyXG4gICAgICAgICAgICB0Zi5zZXRUZXh0Q29sb3IoIDB4MDAwMDAwICk7XHJcbiAgICAgICAgICAgIHRmLnNldFBvc2l0aW9uKCBhcHBsaWNhdGlvbi5sb2dpY2FsVmlld3BvcnQud2lkdGggLyAyIC0gdGYuZ2V0V2lkdGgoKSAvIDIsMzIgKTtcclxuICAgICAgICAgICAgcy5hZGRDaGlsZCggdGYgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgYiA9IG5ldyBCaXRtYXAoIG5ldyBUZXh0dXJlKCBcInBhcGVyZG9sbC5wbmdcIixmYWxzZSx7IGZvcm1hdDogVGV4dHVyZUJhc2UuUkdCQTU1NTEgfSApICk7XHJcblxyXG4gICAgICAgICAgICAvL2xldCBiID0gR0xPQkFMLmludGVyZmFjZS5nZXRIaXJlc0JpdG1hcChuZXcgVGV4dHVyZShcInBhcGVyZG9sbC5wbmdcIixmYWxzZSx7Zm9ybWF0OlRleHR1cmVCYXNlLlJHQkE1NTUxfSkpO1xyXG4gICAgICAgICAgICBiLnNldEFuY2hvclBvaW50KCAwLjUsMC41ICk7XHJcbiAgICAgICAgICAgIGIuc2V0UG9zaXRpb24oIGFwcGxpY2F0aW9uLmxvZ2ljYWxWaWV3cG9ydC53aWR0aCAvIDIgLSAyMCwxMTAgKTtcclxuICAgICAgICAgICAgcy5hZGRDaGlsZCggYiApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCB0ZiA9IG5ldyBUZXh0RmllbGQoIEludGVyZmFjZS5mb250LFV0aWxzLmZvcm1hdCggXCJTVFIgJWRcIixHTE9CQUwucGxheWVyLnN0ciApICk7XHJcblxyXG4gICAgICAgICAgICB0Zi5zZXRUZXh0Q29sb3IoIDB4ZmZmZmZmICk7XHJcbiAgICAgICAgICAgIHRmLnNldFBvc2l0aW9uKCBhcHBsaWNhdGlvbi5sb2dpY2FsVmlld3BvcnQud2lkdGggLyAyICsgMTAsMTAwICk7XHJcbiAgICAgICAgICAgIHMuYWRkQ2hpbGQoIHRmICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IHRmID0gbmV3IFRleHRGaWVsZCggSW50ZXJmYWNlLmZvbnQsVXRpbHMuZm9ybWF0KCBcIkRFWCAlZFwiLEdMT0JBTC5wbGF5ZXIuZGV4ICkgKTtcclxuXHJcbiAgICAgICAgICAgIHRmLnNldFRleHRDb2xvciggMHhmZmZmZmYgKTtcclxuICAgICAgICAgICAgdGYuc2V0UG9zaXRpb24oIGFwcGxpY2F0aW9uLmxvZ2ljYWxWaWV3cG9ydC53aWR0aCAvIDIgKyAxMCwxMDAgKyA4ICk7XHJcbiAgICAgICAgICAgIHMuYWRkQ2hpbGQoIHRmICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IHRmID0gbmV3IFRleHRGaWVsZCggSW50ZXJmYWNlLmZvbnQsVXRpbHMuZm9ybWF0KCBcIklOVCAlZFwiLEdMT0JBTC5wbGF5ZXIuaW50ICkgKTtcclxuXHJcbiAgICAgICAgICAgIHRmLnNldFRleHRDb2xvciggMHhmZmZmZmYgKTtcclxuICAgICAgICAgICAgdGYuc2V0UG9zaXRpb24oIGFwcGxpY2F0aW9uLmxvZ2ljYWxWaWV3cG9ydC53aWR0aCAvIDIgKyAxMCwxMDAgKyA4ICogMiApO1xyXG4gICAgICAgICAgICBzLmFkZENoaWxkKCB0ZiApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCB0ZiA9IG5ldyBUZXh0RmllbGQoIEludGVyZmFjZS5mb250LFV0aWxzLmZvcm1hdCggXCJMVUNLICVkXCIsR0xPQkFMLnBsYXllci5sdWNrICkgKTtcclxuXHJcbiAgICAgICAgICAgIHRmLnNldFRleHRDb2xvciggMHhmZmZmZmYgKTtcclxuICAgICAgICAgICAgdGYuc2V0UG9zaXRpb24oIGFwcGxpY2F0aW9uLmxvZ2ljYWxWaWV3cG9ydC53aWR0aCAvIDIgKyAxMCwxMDAgKyA4ICogMyApO1xyXG4gICAgICAgICAgICBzLmFkZENoaWxkKCB0ZiApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCB0ZiA9IEdMT0JBTC5pbnRlcmZhY2UuZ2V0SGlyZXNUZXh0V3JhcChcclxuICAgICAgICAgICAgICAgIFwi67aB7Kq97KeA67Cp7J2YIOuwlOuwlOumrOyViOydgCDtg4Dqs6Drgpwg7KCE7IKs7J2064ukLlxcbuq3uOuTpOydgCDtj4nsg53snYQg7Jqp67OR7J2064KYIOuqqO2XmOqwgOuhnCDsgrTslYTqsIDrqbAg64Gd7JeG64qUIOyghO2IrOulvCDthrXtlbRcXG7snpDsi6DsnYQg7Kad66qF7ZWY6rOgIOuwnO2VoOudvOuhnCDqsIDquLDrpbwg6r+I6r6864ukLlwiLFxyXG4gICAgICAgICAgICAgICAgYXBwbGljYXRpb24ubG9naWNhbFZpZXdwb3J0LndpZHRoIC0gQ09ORklHLkludGVyZmFjZS5tYXJnaW4gKiAyLDQwLDE1LEludGVyZmFjZS51aVR0ZixcImNlbnRlclwiICk7XHJcblxyXG4gICAgICAgICAgICB0Zi5zZXRUZXh0Q29sb3IoIDB4YzBjMGMwICk7XHJcbiAgICAgICAgICAgIHRmLnNldFBvc2l0aW9uKCBhcHBsaWNhdGlvbi5sb2dpY2FsVmlld3BvcnQud2lkdGggLyAyLDE2MCApO1xyXG4gICAgICAgICAgICB0Zi5zZXRTY2FsZSggdGYuZ2V0U2NhbGVYKCkgKiAwLjgsdGYuZ2V0U2NhbGVZKCkgKiAwLjggKTtcclxuICAgICAgICAgICAgcy5hZGRDaGlsZCggdGYgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuVG9wTWVudS5oZWlnaHQgPSAyMjA7XHJcblxyXG5cclxuIiwiY29uc3QgQ3VzdG9tQmxvY2tzID0ge1xyXG4gICAgW1wiY2FtcGZpcmVcIl06IHtcclxuICAgICAgICBtYXA6IFtcclxuICAgICAgICAgICAgXCJNMTExMTExMU1cXG5cIiArXHJcbiAgICAgICAgICAgIFwiMy4uLi4uLi4yXFxuXCIgK1xyXG4gICAgICAgICAgICBcIjMuLi5GLi4uMlxcblwiICtcclxuICAgICAgICAgICAgXCIzLi4uLi4uLjJcXG5cIiArXHJcbiAgICAgICAgICAgIFwiTTQ0NDQ0NDRNXCIsXHJcbiAgICAgICAgXSxcclxuICAgICAgICBkb29yTWluOiAgICAgICAgMixcclxuICAgICAgICBkb29yTWF4OiAgICAgICAgNCxcclxuICAgICAgICBjYW5DbGlwOiAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgbWFyZ2luOiAgICAgICAgIDIsXHJcbiAgICAgICAgd2FsbDogICAgICAgICAgIFwiTVwiLFxyXG4gICAgICAgIGNoYW5jZVRvQXBwZWFyOiAxLFxyXG4gICAgICAgIGFwcGVhckZsb29yOiAgICBbWzIsIDVdXSxcclxuICAgICAgICB3aGl0ZUF0dHJpYjogICAgW1tcImR1bmdlb25cIiwgMV0sIFtcImNhdmVcIiwgMV1dLFxyXG4gICAgICAgIGJsYWNrQXR0cmliOiAgICBbXSxcclxuICAgICAgICBzcGVjaWFsOiAgICAgICAgXCJjYW1wZmlyZVwiLFxyXG4gICAgICAgIG1heFRyeTogICAgICAgICA1LFxyXG4gICAgICAgIG11c3RQbGFjZTogICAgICB0cnVlLFxyXG4gICAgICAgIGxvY2s6ICAgICAgICAgICBcImFsbFwiLFxyXG4gICAgICAgIGZ1bmM6ICAgICAgICAgICBudWxsLFxyXG4gICAgfSxcclxuICAgIFtcInJvb21fMDFcIl06IHtcclxuICAgICAgICBtYXA6IFtcclxuICAgICAgICAgICAgXCJNMTExMTExMTFNXFxuXCIgKyBcclxuICAgICAgICAgICAgXCIzICAgICAgICAyXFxuXCIgKyBcclxuICAgICAgICAgICAgXCIzIH5+fHx+fiAyXFxuXCIgKyBcclxuICAgICAgICAgICAgXCIzIH4gICAgfiAyXFxuXCIgKyBcclxuICAgICAgICAgICAgXCIzIH4gICAgfiAyXFxuXCIgKyBcclxuICAgICAgICAgICAgXCIzIH5+fHx+fiAyXFxuXCIgKyBcclxuICAgICAgICAgICAgXCIzICAgICAgICAyXFxuXCIgKyBcclxuICAgICAgICAgICAgXCJNNDQ0NDQ0NDRNXCIgLFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgXCIwMDAwTTExMTFNMDAwMFxcblwiICsgXHJcbiAgICAgICAgICAgIFwiMDAwME0gICAgTTAwMDBcXG5cIiArIFxyXG4gICAgICAgICAgICBcIjAwMDBNICAgIE0wMDAwXFxuXCIgKyBcclxuICAgICAgICAgICAgXCIwMDAwTSAgICBNMDAwMFxcblwiICsgXHJcbiAgICAgICAgICAgIFwiTU1NTU0gICAgTU1NTU1cXG5cIiArIFxyXG4gICAgICAgICAgICBcIjMgICAgICAgICAgICAyXFxuXCIgKyBcclxuICAgICAgICAgICAgXCIzICAgICAgICAgICAgMlxcblwiICsgXHJcbiAgICAgICAgICAgIFwiMyAgICAgICAgICAgIDJcXG5cIiArIFxyXG4gICAgICAgICAgICBcIk1NTU1NICAgIE1NTU1NXFxuXCIgKyBcclxuICAgICAgICAgICAgXCIwMDAwTSAgICBNMDAwMFxcblwiICsgXHJcbiAgICAgICAgICAgIFwiMDAwME0gICAgTTAwMDBcXG5cIiArIFxyXG4gICAgICAgICAgICBcIjAwMDBNICAgIE0wMDAwXFxuXCIgKyBcclxuICAgICAgICAgICAgXCIwMDAwTTQ0NDRNMDAwMFwiICxcclxuICAgICAgICBdLFxyXG4gICAgICAgIGRvb3JNaW46ICAgICAgICAxLFxyXG4gICAgICAgIGRvb3JNYXg6ICAgICAgICA0LFxyXG4gICAgICAgIGNhbkNsaXA6ICAgICAgICBmYWxzZSxcclxuICAgICAgICBtYXJnaW46ICAgICAgICAgMixcclxuICAgICAgICB3YWxsOiAgICAgICAgICAgXCJNXCIsXHJcbiAgICAgICAgY2hhbmNlVG9BcHBlYXI6IDUsXHJcbiAgICAgICAgYXBwZWFyRmxvb3I6ICAgIG51bGwsLy9bWzIsNV1dLFxyXG4gICAgICAgIHdoaXRlQXR0cmliOiAgICBbW1wiZHVuZ2VvblwiLCAxXV0sXHJcbiAgICAgICAgYmxhY2tBdHRyaWI6ICAgIFtdLFxyXG4gICAgICAgIHNwZWNpYWw6ICAgICAgICBudWxsLFxyXG4gICAgICAgIG1heFRyeTogICAgICAgICAyLFxyXG4gICAgICAgIG11c3RQbGFjZTogICAgICBmYWxzZSxcclxuICAgICAgICBsb2NrOiAgICAgICAgICAgXCJhbGxcIixcclxuICAgICAgICBmdW5jOiAgICAgICAgICAgbnVsbCxcclxuICAgIH0sXHJcbiAgICBbXCJsYXZhXzAxXCJdOiB7XHJcbiAgICAgICAgbWFwOiBbXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBcIjAwMCUlJTAwMFxcblwiICsgXHJcbiAgICAgICAgICAgIFwiMDAlJSUlJTAwXFxuXCIgKyBcclxuICAgICAgICAgICAgXCIlJSUlJSUlJSVcXG5cIiArXHJcbiAgICAgICAgICAgIFwiJSUlJSUlJTAwXFxuXCIgKyBcclxuICAgICAgICAgICAgXCIwMCUlMDAwMDBcIiAsXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBcIiUlJTAwMCUlJVxcblwiICtcclxuICAgICAgICAgICAgXCIlJSUlJSUlJSVcXG5cIiArXHJcbiAgICAgICAgICAgIFwiJSUlJSUlMDAwXFxuXCIgKyBcclxuICAgICAgICAgICAgXCIwMCUlJSUlMDBcXG5cIiArIFxyXG4gICAgICAgICAgICBcIjAwMDAlJSUlJVwiICxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFwiMDAlJSUlJTAwXFxuXCIgKyBcclxuICAgICAgICAgICAgXCIlJSUlJSUlJSVcXG5cIiArXHJcbiAgICAgICAgICAgIFwiJSUlMDAlJSUwXFxuXCIgKyBcclxuICAgICAgICAgICAgXCIlMDAwJSUlMDBcXG5cIiArIFxyXG4gICAgICAgICAgICBcIjAwJSUlJTAwMFwiICwgXHJcblxyXG4gICAgICAgICAgICBcIjAwJSUwMFxcblwiICsgXHJcbiAgICAgICAgICAgIFwiJSUlJSUwXFxuXCIgK1xyXG4gICAgICAgICAgICBcIiUlJSUlMFxcblwiICsgXHJcbiAgICAgICAgICAgIFwiJSUlJSUlXFxuXCIgK1xyXG4gICAgICAgICAgICBcIjAlJSUlJVxcblwiICtcclxuICAgICAgICAgICAgXCIwJSUlJSVcXG5cIiArXHJcbiAgICAgICAgICAgIFwiMDAlJSUwXCIgLCBcclxuXHJcbiAgICAgICAgXSxcclxuICAgICAgICBkb29yTWluOiAgICAgICAgMCxcclxuICAgICAgICBkb29yTWF4OiAgICAgICAgMCxcclxuICAgICAgICBjYW5DbGlwOiAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgbWFyZ2luOiAgICAgICAgIDAsXHJcbiAgICAgICAgd2FsbDogICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgY2hhbmNlVG9BcHBlYXI6IDUsXHJcbiAgICAgICAgYXBwZWFyRmxvb3I6ICAgIFtbNiwgOTk5XV0sXHJcbiAgICAgICAgd2hpdGVBdHRyaWI6ICAgIFtbXCJjYXZlXCIsIDFdXSxcclxuICAgICAgICBibGFja0F0dHJpYjogICAgW10sXHJcbiAgICAgICAgc3BlY2lhbDogICAgICAgIG51bGwsXHJcbiAgICAgICAgbWF4VHJ5OiAgICAgICAgIDEsXHJcbiAgICAgICAgbXVzdFBsYWNlOiAgICAgIGZhbHNlLFxyXG4gICAgICAgIGxvY2s6ICAgICAgICAgICBcImFsbFwiLFxyXG4gICAgICAgIGZ1bmM6ICAgICAgICAgICBudWxsLFxyXG4gICAgfSxcclxuXHJcbn07XHJcblxyXG5cclxuIiwiLypcclxuXHJcbuyngOuPhOulvCDsg53shLHtlaAg65aE64qUIOyhsOq4iOyUqSDrp4zrk6Qg7IiYIOyeiOqyjCDtlbTslbztlahcclxuXHJcbm9wdGlvbnM7XHJcbnNlZWQgPSDrnpzrjaTsi5zrk5xcclxuXHJcbndpZHRoID0ge21pbixtYXh9XHJcbmhlaWdodCA9IHttaW4sbWF4fVxyXG5udW1PZkZsb29yID0ge21pbixtYXh9XHJcblxyXG5udW1PZkJvc3M7XHJcbmNhdmUgPSAwLjB+MS4wICAgMS4w7J2066m0IDHsuLXrtoDthLAg7J6Q7Jew64+Z6rW07J206rOgIDAuNeydtOuptCDspJHqsITrtoDthLAgMC4w7J2066m0IDHsuLXrtoDthLAg7J246rO1XHJcblxyXG5cclxuKi9cclxuXHJcbmltcG9ydCB7IGhhbmd1bCwgTWVzaCwgVGV4dEZpZWxkLCBlYXNpbmcsIEJpdG1hcCwgc3RhZ2UsIFNjZW5lTWFuYWdlciwgYXBwbGljYXRpb24sIFNvdW5kLCBSZW5kZXJUYXJnZXQsIFV0aWxzLCBNb3ZpZUNsaXAsIFRleHR1cmUsIFRleHR1cmVCYXNlLCBTcHJpdGUsIEV2ZW50LCBUaW1lciB9IGZyb20gXCJAZW5naW5lL2ZsYXRmYXN0XCI7XHJcblxyXG5pbXBvcnQgR2FtZU1hcCBmcm9tIFwiLi4vd29ybGQvZ2FtZU1hcFwiO1xyXG5pbXBvcnQgUmFuZG9tIGZyb20gXCJAbGliL3JhbmRvbVwiO1xyXG5pbXBvcnQgQ3VzdG9tQmxvY2tzIGZyb20gXCIuL2N1c3RvbUJsb2Nrc1wiO1xyXG5cclxuaW1wb3J0IFBldCBmcm9tIFwiLi4vZW50aXR5L3BldFwiO1xyXG5pbXBvcnQgTW9uc3RlciBmcm9tIFwiLi4vZW50aXR5L21vbnN0ZXJcIjtcclxuXHJcbmNvbnN0IERFQlVHX0xPRyA9IGZhbHNlO1xyXG5jb25zdCBsb2cgPSBERUJVR19MT0cgPyBjb25zb2xlLmxvZyA6ICgpPT57fTtcclxuXHJcblxyXG4vL19QUkFORE9NIEAgfHRoaXMucmFuZG9tLnJhbmRvbXxcclxuXHJcbi8qKlxyXG4gKiBAdGhpcyBQcm9jZWR1cmFsTWFwXHJcbiAqXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB4XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB5XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5TZWN0b3JcclxuICogQHJldHVybnMgeypbXXxudWxsfVxyXG4gKi9cclxuZnVuY3Rpb24gZmluZE5lYXJlc3RTZWN0b3IoIHgsIHksIG1pblNlY3RvciApIHtcclxuICAgIGxldCB0O1xyXG4gICAgbGV0IHBhdGg7XHJcblxyXG4gICAgbGV0IGNoZWNrU3Vycm91bmRpbmcgPSAoIG5vZGUsIHgsIHkgKSA9PiB7XHJcbiAgICAgICAgaWYgKCBwYXRoW3ggKyBcIixcIiArIHldICkge1xyXG4gICAgICAgICAgICAvL+unie2emFxyXG4gICAgICAgICAgICBpZiAoIGZhaWwgKSB7XHJcbiAgICAgICAgICAgICAgICBsb2coIFwi67O46rKDXCIsIHgsIHkgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYyA9IHRoaXMucmVhZCggeCwgeSApO1xyXG5cclxuICAgICAgICBpZiAoIHR5cGVvZiBjID09IFwibnVtYmVyXCIgJiYgYyA+PSBtaW5TZWN0b3IgKSB7XHJcbiAgICAgICAgICAgIGlmICggZmFpbCApIHtcclxuICAgICAgICAgICAgICAgIGxvZyggXCLrsJzqsqxcIiwgbWluU2VjdG9yICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBbIG5vZGUsIHgsIHksIGMgXTsgLy/ssL7slZjsnYxcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g65297J20IDLqsIAg7JWE64uMIOuyveydgCDrmqvsnYxcclxuICAgICAgICBpZiAoIHRoaXMucmVhZExvY2soIHgsIHkgKSA9PSAyICYmICggdHlwZW9mIGMgIT0gXCJudW1iZXJcIiAmJiAhdGhpcy5pc1NwYWNlKCB4LCB5ICkgKSApIHtcclxuICAgICAgICAgICAgaWYgKCBmYWlsICkge1xyXG4gICAgICAgICAgICAgICAgbG9nKCBcIuudvVwiLCB4LCB5LCBjLCB0eXBlb2YgYyApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggZmFpbCApIHtcclxuICAgICAgICAgICAgbG9nKCBcIuyymOumrFwiLCB4LCB5ICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBuZXdOb2RlID0gW25vZGUsIHgsIHksIGNdO1xyXG5cclxuICAgICAgICBwYXRoW3ggKyBcIixcIiArIHldID0gbmV3Tm9kZTtcclxuICAgICAgICB0LnB1c2goIFtuZXdOb2RlLCB4IC0gMSwgeV0gKTtcclxuICAgICAgICB0LnB1c2goIFtuZXdOb2RlLCB4ICsgMSwgeV0gKTtcclxuICAgICAgICB0LnB1c2goIFtuZXdOb2RlLCB4LCB5IC0gMV0gKTtcclxuICAgICAgICB0LnB1c2goIFtuZXdOb2RlLCB4LCB5ICsgMV0gKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIGxldCBmYWlsO1xyXG5cclxuICAgIGRvIHtcclxuICAgICAgICBsZXQgY3VyU2VjdG9yID0gdGhpcy5yZWFkKCB4LCB5ICk7XHJcblxyXG4gICAgICAgIHBhdGggPSB7fTtcclxuICAgICAgICB0ID0gW1tudWxsLCB4LCB5IF1dO1xyXG5cdFxyXG4gICAgICAgIGxldCByZXN1bHQ7XHJcblxyXG4gICAgICAgIGRvIHtcclxuICAgICAgICAgICAgbGV0IHQxID0gdDtcclxuXHJcbiAgICAgICAgICAgIHQgPSBbXTtcclxuICAgICAgICAgICAgaWYgKCBmYWlsICkge1xyXG4gICAgICAgICAgICAgICAgbG9nKCBcIuyymOumrO2VoCDsoJDsnZgg7IiYXCIsIHQxLmxlbmd0aCApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAoIGxldCBpIGluIHQxICkge1xyXG4gICAgICAgICAgICAgICAgbGV0IFtub2RlLHgseV0gPSB0MVtpXTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBjaGVja1N1cnJvdW5kaW5nKCBub2RlLCB4LCB5ICk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHJlc3VsdCApIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gd2hpbGUgKCByZXN1bHQgPT0gbnVsbCAmJiB0Lmxlbmd0aCAhPSAwICk7XHJcbiAgICAgICAgbGV0IGxhc3ROb2RlID0gcmVzdWx0O1xyXG5cclxuICAgICAgICBpZiAoIGxhc3ROb2RlICkge1xyXG4gICAgICAgICAgICBsZXQgY3VyTm9kZSA9IGxhc3ROb2RlO1xyXG4gICAgICAgICAgICBsZXQgW25vZGUseCx5LHNlY3Rvck51bV0gPSBjdXJOb2RlO1xyXG5cclxuICAgICAgICAgICAgbG9nKCBgJHttaW5TZWN0b3J9IOydtOyDgeydmCDshLnthLDrpbwg7LC+7J2AIOqysOqzvCAke3NlY3Rvck51bX0g67Cc6rKsYCApO1xyXG4gICAgICAgICAgICBsZXQgdDIgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGRvIHtcclxuICAgICAgICAgICAgICAgIFtub2RlLCB4LCB5XSA9IGN1ck5vZGU7XHJcbiAgICAgICAgICAgICAgICB0Mi5wdXNoKCBbeCx5XSApO1xyXG4gICAgICAgICAgICAgICAgY3VyTm9kZSA9IG5vZGU7XHJcbiAgICAgICAgICAgIH0gd2hpbGUgKCBjdXJOb2RlICE9IG51bGwgJiYgISggdHlwZW9mIHNlY3Rvck51bSA9PSBcIm51bWJlclwiICYmIHNlY3Rvck51bSA9PSBjdXJTZWN0b3IgKSApO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHQyO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxvZyggbWluU2VjdG9yLCBcIuyXsOqysCDrjIDsg4HsnYQg66q77LC+7J2MXCIgKTtcclxuICAgICAgICAgICAgaWYgKCBmYWlsICkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5hc3NlcnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmYWlsID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9IHdoaWxlICggZmFpbCApO1xyXG59XHJcblxyXG5cclxuXHJcblxyXG4vLyDshKDquIvquLDtlZjripQg7Jqp64+E656RIOyVveqwhCDri6TrpbTri6QuIOuMgOqwgeyEoOydtOuPme2VoOuVjCDrkZDqurzsm4zsoLjslbwg7ZWoXHJcbi8vIGZvcuyXkOyEnCDsgqzsmqntlZjripQg7J207YSw66CI7J207YSw7J6EXHJcbmZ1bmN0aW9uICpyYXlDYXN0KCB4U3RhcnQsIHlTdGFydCwgeEVuZCwgeUVuZCApIHtcclxuICAgIC8vIGNoYW5nZSBmcm9tIHN0ZXAgdG8gc3RlcDtcclxuICAgIGxldCB0VmFsdWUsIHhHcmlkLCB5R3JpZCwgdEZvck5leHRCb3JkZXJYLCB0Rm9yTmV4dEJvcmRlclk7XHJcbiAgICAvL3ByaW50KFwiaW5wdXRcIix4U3RhcnQsIHlTdGFydCwgeEVuZCwgeUVuZCk7XHJcbiAgICAvLyBjb25zdGFudCB0aHJvdWdob3V0IHJheWNhc3Q7XHJcbiAgICBsZXQgeERpcmVjdGlvbiwgeURpcmVjdGlvbiwgdEZvck9uZVgsIHRGb3JPbmVZLCB4U3RlcCwgeVN0ZXA7XHJcblxyXG4gICAgeERpcmVjdGlvbiA9IHhFbmQgLSB4U3RhcnQ7XHJcbiAgICB5RGlyZWN0aW9uID0geUVuZCAtIHlTdGFydDtcclxuICAgIHRGb3JPbmVYID0gTWF0aC5hYnMoIDEuMCAvICggeERpcmVjdGlvbiArIDAuMDAwMDEgKSApO1xyXG4gICAgdEZvck9uZVkgPSBNYXRoLmFicyggMS4wIC8gKCB5RGlyZWN0aW9uICsgMC4wMDAwMSApICk7XHJcbiAgICB5U3RlcCA9ICggeURpcmVjdGlvbiA+PSAwICkgPyAxIDogLTE7XHJcbiAgICB4U3RlcCA9ICggeERpcmVjdGlvbiA+PSAwICkgPyAxIDogLTE7XHJcbiAgICBsZXQgeFNpZ24gPSAoIHhEaXJlY3Rpb24gPj0gMCApID8gMCA6IDE7XHJcbiAgICBsZXQgeVNpZ24gPSAoIHlEaXJlY3Rpb24gPj0gMCApID8gMCA6IDE7XHJcblxyXG4gICAgdFZhbHVlID0gMDtcclxuICAgIHhHcmlkID0gTWF0aC5mbG9vciggeFN0YXJ0ICk7XHJcbiAgICB5R3JpZCA9IE1hdGguZmxvb3IoIHlTdGFydCApO1xyXG4gICAgbGV0IGZyYWNTdGFydFBvc1ggPSB4U3RhcnQgLSBNYXRoLmZsb29yKCB4U3RhcnQgKTtcclxuXHJcbiAgICBpZiAoIHhEaXJlY3Rpb24gPiAwICkge1xyXG4gICAgICAgIHRGb3JOZXh0Qm9yZGVyWCA9ICggMSAtIGZyYWNTdGFydFBvc1ggKSAqIHRGb3JPbmVYO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0Rm9yTmV4dEJvcmRlclggPSBmcmFjU3RhcnRQb3NYICogdEZvck9uZVg7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGZyYWNTdGFydFBvc1kgPSB5U3RhcnQgLSBNYXRoLmZsb29yKCB5U3RhcnQgKTtcclxuXHJcbiAgICBpZiAoIHlEaXJlY3Rpb24gPiAwICkge1xyXG4gICAgICAgIHRGb3JOZXh0Qm9yZGVyWSA9ICggMSAtIGZyYWNTdGFydFBvc1kgKSAqIHRGb3JPbmVZO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0Rm9yTmV4dEJvcmRlclkgPSBmcmFjU3RhcnRQb3NZICogdEZvck9uZVk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGxldCBpc0xhc3Q7XHJcblxyXG4gICAgd2hpbGUgKCAhaXNMYXN0ICkge1xyXG4gICAgICAgIGlmICggdEZvck5leHRCb3JkZXJYIDw9IHRGb3JOZXh0Qm9yZGVyWSApIHtcclxuICAgICAgICAgICAgLy8gc3RlcCBpbiB4O1xyXG4gICAgICAgICAgICB0VmFsdWUgPSB0Rm9yTmV4dEJvcmRlclg7XHJcbiAgICAgICAgICAgIHRGb3JOZXh0Qm9yZGVyWCA9IHRGb3JOZXh0Qm9yZGVyWCArIHRGb3JPbmVYO1xyXG4gICAgICAgICAgICB4R3JpZCA9IHhHcmlkICsgeFN0ZXA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gc3RlcCBpbiB5O1xyXG4gICAgICAgICAgICB0VmFsdWUgPSB0Rm9yTmV4dEJvcmRlclk7XHJcbiAgICAgICAgICAgIHRGb3JOZXh0Qm9yZGVyWSA9IHRGb3JOZXh0Qm9yZGVyWSArIHRGb3JPbmVZO1xyXG4gICAgICAgICAgICB5R3JpZCA9IHlHcmlkICsgeVN0ZXA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlzTGFzdCA9IHRWYWx1ZSA+IDEuMDtcclxuICAgICAgICB5aWVsZCBbeEdyaWQsIHlHcmlkXTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2NlZHVyYWxNYXAge1xyXG4vL2xldCBsb2cgPSBmdW5jdGlvbiguLi4pIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBQcm9jZWR1cmFsTWFwLlxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnNcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0aW9ucy5mbG9vclxyXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRpb25zLnNlZWRcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHttaW46bnVtYmVyLG1heDpudW1iZXJ9PX0gb3B0aW9ucy53aWR0aFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ8e21pbjpudW1iZXIsbWF4Om51bWJlcn09fSBvcHRpb25zLmhlaWdodFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ8e21pbjpudW1iZXIsbWF4Om51bWJlcn09fSBvcHRpb25zLm51bU9mRmxvb3JcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nW109fSBvcHRpb25zLmF0dHJpYlxyXG4gICAgICogQHBhcmFtIHtcIndpbGRuZXNzXCJ8XCJkdW5nZW9uXCI9fSBvcHRpb25zLnR5cGVcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0aW9ucy5jYXZlIDAuMH4xLjAg7J6Q7JewIOuPmeq1tOydmCDruYTsnKhcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0aW9ucy5udW1PZkJvc3NcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0aW9ucy5udW1PZkNhbXBmaXJlXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG9wdGlvbnMubnVtT2ZTaG9wXHJcbiAgICAgKiBAbWVtYmVyb2YgUHJvY2VkdXJhbE1hcFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvciggb3B0aW9ucyApIHtcclxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgIHRoaXMub3B0aW9ucy5mbG9vciA9IHRoaXMub3B0aW9ucy5mbG9vciAhPSBudWxsID8gdGhpcy5vcHRpb25zLmZsb29yIDogMTtcclxuICAgICAgICBsb2coIFwi656c642k7Iuc65OcXCIsdGhpcy5vcHRpb25zLnNlZWQgKTtcclxuICAgICAgICB0aGlzLnJhbmRvbSA9IG5ldyBSYW5kb20oIHRoaXMub3B0aW9ucy5zZWVkICk7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zLnNlZWQgPSB0aGlzLm9wdGlvbnMuc2VlZCAgIT0gbnVsbCA/IHRoaXMub3B0aW9ucy5zZWVkICA6IHRoaXMucmFuZG9tLnNlZWQ7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zLndpZHRoID0gdGhpcy5vcHRpb25zLndpZHRoICAhPSBudWxsID8gdGhpcy5vcHRpb25zLndpZHRoICA6IHsgbWluOiAyNCxtYXg6IDQwIH07XHJcbiAgICAgICAgdGhpcy5vcHRpb25zLmhlaWdodCA9IHRoaXMub3B0aW9ucy5oZWlnaHQgICE9IG51bGwgPyB0aGlzLm9wdGlvbnMuaGVpZ2h0ICA6IHsgbWluOiAyNCxtYXg6IDQwIH07XHJcbiAgICAgICAgdGhpcy5vcHRpb25zLm51bU9mRmxvb3IgPSB0aGlzLm9wdGlvbnMubnVtT2ZGbG9vciAgIT0gbnVsbCA/IHRoaXMub3B0aW9ucy5udW1PZkZsb29yICA6IHsgbWluOiA1LG1heDogMTAgfTtcclxuXHRcdFxyXG4gICAgICAgIHRoaXMud2lkdGggPSB0eXBlb2YgdGhpcy5vcHRpb25zLndpZHRoID09IFwibnVtYmVyXCIgPyB0aGlzLm9wdGlvbnMud2lkdGggOiB0aGlzLnJhbmRvbS5yYW5kb20oIHRoaXMub3B0aW9ucy53aWR0aC5taW4sdGhpcy5vcHRpb25zLndpZHRoLm1heCApO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gdHlwZW9mIHRoaXMub3B0aW9ucy5oZWlnaHQgPT0gXCJudW1iZXJcIiA/IHRoaXMub3B0aW9ucy5oZWlnaHQgOiB0aGlzLnJhbmRvbS5yYW5kb20oIHRoaXMub3B0aW9ucy5oZWlnaHQubWluLHRoaXMub3B0aW9ucy5oZWlnaHQubWF4ICk7XHJcbiAgICAgICAgLy8g7IOd7ISx7JeQIOywuOqzoO2VmOuKlCDslrTtirjrpqzrt7DtirhcclxuICAgICAgICAvLyDsu6TsiqTthYDruJTroZ3snbQg67Cw7LmY65CgIOuVjCDsnbQg7Ja07Yq466as67ew7Yq466W8IOywuOqzoO2VtOyEnCDrk7HsnqUg7Jes67aA6rCAIOqysOygleuQnOuLpC5cclxuICAgICAgICB0aGlzLmF0dHJpYiA9IFtdO1xyXG4gICAgICAgIGlmICggb3B0aW9ucy5hdHRyaWIgKSB7XHJcbiAgICAgICAgICAgIGZvciAoIGxldCBrIGluIG9wdGlvbnMuYXR0cmliICkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHYgPSBvcHRpb25zLmF0dHJpYltrXTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYltrXSA9IHY7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLy8g7IOd7ISx65CcIOunteydtCDrk6TslrTqsIgg6rOzXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgdGhpcy5tYXAgPSBbXTtcclxuICAgICAgICAvLyDsnb3quLAv7JOw6riwIOygnOyWtFxyXG4gICAgICAgIHRoaXMucmVhZE1hcCA9IHRoaXMubWFwO1xyXG4gICAgICAgIHRoaXMud3JpdGVNYXAgPSB0aGlzLm1hcDtcclxuICAgICAgICAvLyDsi5zsnpHsoJA97Jis65286rCA64qUIOqzhOuLqFxyXG4gICAgICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xyXG4gICAgICAgIHRoaXMuc3RhcnRYID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xyXG4gICAgICAgIHRoaXMuc3RhcnRZID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIC8vIOuBneygkD3rgrTroKTqsIDripQg6rOE64uoICDsm5Trk5zsl5DshJzripQg7JeG64ukXHJcbiAgICAgICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXHJcbiAgICAgICAgdGhpcy5lbmRYID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xyXG4gICAgICAgIHRoaXMuZW5kWSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAvLyBsb2NrTWFw7J2AIOyDneyEsSDspJHsl5Ag66eM65Ok642YIOuCtOyaqeydhCDrja7slrTsk7Dsp4Ag7JWK64+E66GdIOuniOyKpO2Cue2VoCDrlYwg7JO064ukLlxyXG4gICAgICAgIHRoaXMubG9ja01hcCA9IFtdO1xyXG4gICAgICAgIHRoaXMuY2xlYXIoIG51bGwsdGhpcy5sb2NrTWFwICk7XHJcbiAgICAgICAgLy8g652966e1IOuCtOyaqVxyXG4gICAgICAgIC8vIG51bGwgPSDrnb3slYjrkKggICBcclxuICAgICAgICAvLyAxID0g652965CY7Ja0IOy7pOyKpO2FgOu4lOuhneydtCDrqrvsmKzrnbzqsIDsp4Drp4wg6ri47J2AIOuaq+ydhCDsiJgg7J6I7J2MXHJcbiAgICAgICAgLy8gMiA9IOq4uOuPhCDrqrsg65qr7J2MLiDrs4Dqsr3rtojqsIBcclxuXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLy8g7Jik67iM7KCd7Yq4IOuwsOy5mFxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIC8qKiBAdHlwZSB7KltdW119ICovXHJcbiAgICAgICAgdGhpcy5lbnRpdHlNYXAgPSBbXTtcclxuICAgICAgICB0aGlzLmNsZWFyKCBudWxsLHRoaXMuZW50aXR5TWFwICk7XHJcbiAgICAgICAgLy8g7Jik67iM7KCd7Yq466e1IOuCtOyaqVxyXG4gICAgICAgIC8vIG51bGwgPT0g67Cw7LmY7JWI7ZWoXHJcbiAgICAgICAgLy8gdGFibGUgPSB7dHlwZSxjaGFyLG9wdGlvbnN9XHJcblxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIC8vIO2dpeuvuOuPhCDqs4TsgrAg6rKw6rO8IHtzY29yZSAwfjEseCx5fVxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIC8qKiBAdHlwZSB7W251bWJlcixudW1iZXIsbnVtYmVyXVtdfSAqL1xyXG4gICAgICAgIHRoaXMuc2NvcmVMaXN0ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIC8vIOyKpOy9lOyWtCDrgrTsmqlcclxuICAgICAgICAvLyB77KCQ7IiYMH4xLHgseX1cclxuXHJcblxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIC8vIO2DgOyeheyXkCDrlLDrnbwg7IOd7ISxXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgaWYgKCBvcHRpb25zLnR5cGUgPT0gXCJ3aWxkbmVzc1wiICkge1xyXG4gICAgICAgICAgICAvLyDslbzsmbgg7YOA7J6F7Jy866GcIOyDneyEse2VmOuKlCDqsr3smrBcclxuXHJcbiAgICAgICAgICAgIC8vdGhpcy5nZW5lcmF0ZVdpbGRuZXNzKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICAoIG9wdGlvbnMudHlwZSA9PSBcImR1bmdlb25cIiApIHtcclxuICAgICAgICAgICAgLy8g642Y7KCEIO2DgOyeheycvOuhnCDsg53shLFcclxuXHJcbiAgICAgICAgICAgIC8vIOuNmOyghOydmCDsuLUg7IiYXHJcbiAgICAgICAgICAgIHRoaXMubnVtT2ZGbG9vciA9IHR5cGVvZiB0aGlzLm9wdGlvbnMubnVtT2ZGbG9vciA9PSBcIm51bWJlclwiID8gdGhpcy5vcHRpb25zLm51bU9mRmxvb3IgOiB0aGlzLnJhbmRvbS5yYW5kb20oIHRoaXMub3B0aW9ucy5udW1PZkZsb29yLm1pbix0aGlzLm9wdGlvbnMubnVtT2ZGbG9vci5tYXggKTtcclxuICAgICAgICAgICAgLy8g7KeA6riIIOuTpOyWtOqwgOuKlCDsuLVcclxuICAgICAgICAgICAgLy8g6rCZ7J2AIOyLnOuTnOulvCDso7zqs6Ag7Li17J2EIOyYpOqwiCDsiJgg7J6I6rKMIO2VmOq4sCDsnITtlbTshJzsnoRcclxuICAgICAgICAgICAgdGhpcy5mbG9vciA9IHRoaXMub3B0aW9ucy5mbG9vcjtcclxuICAgICAgICAgICAgLy8gY2F2ZSDqsJLsnYAg7J6Q7Jew64+Z6rW07J20IOyWvOuniOuCmCDssKjsp4DtlZjripTqsIDrpbwg7KeA7KCV7ZWoIDAuMCDsnbTrqbQg7KCE7LK0IOy4teydtCDsnbjqs7XsnbTri6QuXHJcbiAgICAgICAgICAgIGxldCBjYXZlID0gdGhpcy5vcHRpb25zLmNhdmUgIT0gbnVsbCA/IHRoaXMub3B0aW9ucy5jYXZlIDogdGhpcy5yYW5kb20ucmFuZG9tKCAwLDEwICkgLyAxMDtcclxuICAgICAgICAgICAgbGV0IGNhdmVSYW5nZSA9IE1hdGgubWluKCBNYXRoLmFicyggMSAtIGNhdmUgKSxNYXRoLmFicyggMCAtIGNhdmUgKSApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jYXZlU3RhcnQgPSB0aGlzLnJhbmRvbS5yYW5kb20oXHJcbiAgICAgICAgICAgICAgICBNYXRoLmZsb29yKCB0aGlzLm51bU9mRmxvb3IgKiAoIDEgLSBjYXZlIC0gY2F2ZVJhbmdlICkgKSxcclxuICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoIHRoaXMubnVtT2ZGbG9vciAqICggMSAtIGNhdmUgKyBjYXZlUmFuZ2UgKSApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIC8vIOuztOyKpOqwgCDsnITsuZjtlZjripQg7Li17J20IOyWtOuUlOyduOyngCDsp4DsoJXtlZzri6RcclxuICAgICAgICAgICAgdGhpcy5ib3NzRmxvb3JzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMubnVtT2ZCb3NzID0gTWF0aC5taW4oIHRoaXMub3B0aW9ucy5udW1PZkJvc3MgICE9IG51bGwgPyB0aGlzLm9wdGlvbnMubnVtT2ZCb3NzICA6IDAgLCB0aGlzLm51bU9mRmxvb3IgKTtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLm51bU9mQm9zcyA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMubnVtT2ZCb3NzID4gMSApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvc3NGbG9vcnMgPSB0aGlzLnJhbmRvbS5waWNrKCAxLCB0aGlzLm51bU9mRmxvb3IgLSAxLCB0aGlzLm51bU9mQm9zcyAtIDEgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g66eI7KeA66eJIOuztOyKpOuKlCDtla3sg4Eg66eoIOyVhOuemOy4teyXkCDsnojri6RcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvc3NGbG9vcnNbdGhpcy5udW1PZkJvc3MgLSAxXSA9IHRoaXMubnVtT2ZGbG9vcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyDsg4HsoJBcclxuICAgICAgICAgICAgdGhpcy5zaG9wRmxvb3JzID0ge307XHJcbiAgICAgICAgICAgIHRoaXMubnVtT2ZTaG9wID0gTWF0aC5taW4oIHRoaXMub3B0aW9ucy5udW1PZlNob3AgICE9IG51bGwgPyB0aGlzLm9wdGlvbnMubnVtT2ZTaG9wICA6IDAgLCB0aGlzLm51bU9mRmxvb3IgKTtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLm51bU9mU2hvcCA+IDEgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3BGbG9vcnMgPSB0aGlzLnJhbmRvbS5waWNrKCAxLCB0aGlzLm51bU9mRmxvb3IgLSAxLCB0aGlzLm51bU9mU2hvcCApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIOy6oO2UhO2MjOydtOyWtFxyXG4gICAgICAgICAgICB0aGlzLmNhbXBmaXJlRmxvb3JzID0ge307XHJcbiAgICAgICAgICAgIHRoaXMubnVtT2ZDYW1wZmlyZSA9IE1hdGgubWluKCB0aGlzLm9wdGlvbnMubnVtT2ZDYW1wZmlyZSAgIT0gbnVsbCA/IHRoaXMub3B0aW9ucy5udW1PZkNhbXBmaXJlICA6IDAgLCB0aGlzLm51bU9mRmxvb3IgKTtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLm51bU9mQ2FtcGZpcmUgPiAxICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW1wZmlyZUZsb29ycyA9IHRoaXMucmFuZG9tLnBpY2soIDEsIHRoaXMubnVtT2ZGbG9vciAtIDEsIHRoaXMubnVtT2ZDYW1wZmlyZSApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgLy/rnpzrjaTrsoTrpqzquLBcclxuICAgICAgICAgICAgZm9yICggbGV0IGkgPSAxOyBpIDw9IHRoaXMuZmxvb3I7IGkrKyApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmFuZG9tLnJhbmRvbSggMCwwICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgICAgICAvLyDsg53shLHtlZjripQg67aA67aEXHJcbiAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0XHRcclxuICAgICAgICAgICAgbGV0IHNlY3RvcjtcclxuXHJcbiAgICAgICAgICAgIGlmICggdGhpcy5mbG9vciA8IHRoaXMuY2F2ZVN0YXJ0ICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdHRyaWIucHVzaCggXCJkdW5nZW9uXCIgKTtcclxuICAgICAgICAgICAgICAgIHNlY3RvciA9IHRoaXMuZ2VuZXJhdGVEdW5nZW9uKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYi5wdXNoKCBcImNhdmVcIiApO1xyXG4gICAgICAgICAgICAgICAgc2VjdG9yID0gdGhpcy5nZW5lcmF0ZUNhdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoICFzZWN0b3IgKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcyA9IHRoaXMuZ2V0TWFwU3RyaW5nKCB0aGlzLm1hcCApO1xyXG5cclxuICAgICAgICAgICAgICAgIGxvZyggcyApO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5hc3NlcnQoIHNlY3RvcixcIuuNmOyghCDsg53shLEg7Iuk7YyoXCIgKTtcclxuICAgICAgICAgICAgfVxyXG5cdFx0XHRcclxuICAgICAgICAgICAgLy8g7Z2l66+464+EIOqzhOyCsCDqsrDqs7zroZwg66e17J2EIOuPjOugpOykjFxyXG4gICAgICAgICAgICAvLyDsnbTrr7jsp4Ag7ZSE66Gc7IS47Iux7J2EIO2VoOq6vOuptCDrp7XsnYQg7JOw66m065Cc64ukLlxyXG4gICAgICAgICAgICAvLyDqt7jsmbjsl5DripQgc2NvcmVMaXN066W8IOyTtOuLpFxyXG4gICAgICAgICAgICB0aGlzLmNvbXB1dGVJbnRlcmVzdGluZ01hcCgpO1xyXG4gICAgICAgICAgICAvLyDtlITrno3rsLDsuZhcclxuICAgICAgICAgICAgdGhpcy5wbGFjZVByb3BzKCk7XHJcbiAgICAgICAgICAgIC8vIOuqrOyKpO2EsOuwsOy5mFxyXG4gICAgICAgICAgICB0aGlzLnBsYWNlTW9uc3RlcnMoKTtcclxuICAgICAgICAgICAgLy8g64K066Ck6rCA64qUIOqzhOuLqCDri6zquLBcclxuICAgICAgICAgICAgaWYgKCB0aGlzLmZsb29yIDwgdGhpcy5udW1PZkZsb29yICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYWtlRG93blN0YWlyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jbG9zZURvb3JzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzZXRSZWFkV3JpdGUoIHJlYWRNYXAsd3JpdGVNYXAgKSB7XHJcbiAgICAgICAgdGhpcy5yZWFkTWFwID0gcmVhZE1hcCB8fCB0aGlzLm1hcDtcclxuICAgICAgICB0aGlzLndyaXRlTWFwID0gd3JpdGVNYXAgfHwgdGhpcy5tYXA7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvbmVNYXAoIG1hcCApIHtcclxuICAgICAgICBtYXAgPSBtYXAgfHwgdGhpcy5yZWFkTWFwO1xyXG4gICAgICAgIGxldCB0ID0gW107XHJcblxyXG4gICAgICAgIGZvciAoIGxldCB5ID0gMDsgeSA8IHRoaXMuaGVpZ2h0OyB5KysgKSB7XHJcbiAgICAgICAgICAgIHRbeV0gPSBbXTtcclxuICAgICAgICAgICAgZm9yICggbGV0IHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrICkge1xyXG4gICAgICAgICAgICAgICAgdFt5XVt4XSA9IG1hcFt5XVt4XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXIoIGMsbWFwICkge1xyXG4gICAgICAgIG1hcCA9IG1hcCB8fCB0aGlzLndyaXRlTWFwO1xyXG4gICAgICAgIG1hcC5sZW5ndGggPSAwO1xyXG4gICAgICAgIGZvciAoIGxldCB5ID0gMDsgeSA8IHRoaXMuaGVpZ2h0OyB5KysgKSB7XHJcbiAgICAgICAgICAgIG1hcFt5XSA9IFtdO1xyXG4gICAgICAgICAgICBpZiAoIGMgIT0gbnVsbCApIHtcclxuICAgICAgICAgICAgICAgIGZvciAoIGxldCB4ID0gMDsgeCA8IHRoaXMud2lkdGg7IHgrKyApIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXBbeV1beF0gPSBjO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldE1hcFN0cmluZyggbWFwICkge1xyXG4gICAgICAgIC8vIOu5oOuluCDrsoTsoIRcclxuICAgICAgICBtYXAgPSBtYXAgfHwgdGhpcy5yZWFkTWFwO1xyXG4gICAgICAgIGxldCBzID0gXCJcIjtcclxuXHJcbiAgICAgICAgZm9yICggbGV0IHkgPSAwOyB5IDwgdGhpcy5oZWlnaHQ7IHkrKyApIHtcclxuICAgICAgICAgICAgcyA9IHMgKyBtYXBbeV0uam9pbiggXCJcIiApO1xyXG4gICAgICAgICAgICBpZiAoIHkgIT0gdGhpcy5oZWlnaHQgLSAxICkgcyArPSBcIlxcblwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHM7XHJcbiAgICB9XHJcblxyXG4gICAgbG9nTWFwU3RyaW5nKCBtYXAgKSB7XHJcbiAgICAgICAgbWFwID0gbWFwIHx8IHRoaXMucmVhZE1hcDtcclxuICAgICAgICBsZXQgcyA9IFwiXCI7XHJcblxyXG4gICAgICAgIGZvciAoIGxldCB5ID0gMDsgeSA8IHRoaXMuaGVpZ2h0OyB5KysgKSB7XHJcbiAgICAgICAgICAgIGZvciAoIGxldCB4ID0gMDsgeCA8IHRoaXMud2lkdGg7IHgrKyApIHtcclxuICAgICAgICAgICAgICAgIGxldCBjID0gbWFwW3ldW3hdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggdHlwZW9mIGMgPT0gXCJvYmplY3RcIiApIHtcclxuICAgICAgICAgICAgICAgICAgICBjID0gY1syXTtcdC8vIG9iamVjdE1hcDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAgKCB0eXBlb2YgYyA9PSBcIm51bWJlclwiICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGMgPSAoIG1hcFt5XVt4XSApLnRvc3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgICggYyA9PSBudWxsICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGMgPSBcIsKwXCI7IC8vIG51bGwg64yA7IugIO2RnOyLnFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcyA9IHMgKyBjLnRvc3RyaW5nKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcyA9IHMgKyBcIlxcblwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsb2coIFwiXFxuXCIgKyBzICk7XHJcblxyXG4gICAgICAgIHJldHVybiBzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEVudGl0eUxpc3QoIG1hcCApIHtcclxuICAgICAgICBtYXAgPSBtYXAgIT0gbnVsbCA/IG1hcCA6IHRoaXMuZW50aXR5TWFwO1xyXG4gICAgICAgIC8vdGhpcy5nZXRNYXBTdHJpbmcobWFwKSAtLSDthYzsiqTtirgg7Lac66ClXHJcbiAgICAgICAgbGV0IHQgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yICggbGV0IHkgPSAwOyB5IDwgdGhpcy5oZWlnaHQ7IHkrKyApIHtcclxuICAgICAgICAgICAgZm9yICggbGV0IHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCBtYXBbeV1beF0gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdC5wdXNoKCB7IHR5cGU6IG1hcFt5XVt4XVswXSwgeDogeCwgeTogeSwgY2hhcjogbWFwW3ldW3hdWzFdLCBvcHRpb25zOiBtYXBbeV1beF1bMl0gfSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIOyYpOu4jOygne2KuCDrsLDsuZgg64+E6rWsXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIGFkZEVudGl0eSggeCx5LHR5cGUsY2hhcixvcHRpb25zICkge1xyXG4gICAgICAgIHRoaXMuZHJhdyggeCx5LFt0eXBlLGNoYXIsb3B0aW9uc10sdGhpcy5lbnRpdHlNYXAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVFbnRpdHkoIHgseSApIHtcclxuICAgICAgICB0aGlzLmRyYXcoIHgseSxudWxsLHRoaXMuZW50aXR5TWFwICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZEVudGl0eSggeCx5ICkge1xyXG4gICAgICAgIGxldCB2ID0gdGhpcy5yZWFkKCB4LHksdGhpcy5lbnRpdHlNYXAgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHYgJiYgdlswXSB8fCBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8g6rOE7IKwIOuPhOq1rFxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgaXNTcGFjZSggeCx5ICkge1xyXG4gICAgICAgIGxldCBjID0gdGhpcy5yZWFkKCB4LHkgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBjID09IFwic3RyaW5nXCIgJiYgKCAoIEdhbWVNYXAudGlsZVN0cmluZ0RhdGFbY10ud2FsbCAmIEdhbWVNYXAuQkxPQ0tfUEFTUyApID09IDAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb3VudFN1cnJvdW5kZWQoIHgseSx0YyApIHtcclxuICAgICAgICBsZXQgY291bnQgPSAwO1xyXG5cclxuICAgICAgICBjb3VudCA9IGNvdW50ICsgKCB0aGlzLnJlYWQoIHggLSAxLHkgLSAxICkgIT0gdGMgPyAwIDogMSApO1xyXG4gICAgICAgIGNvdW50ID0gY291bnQgKyAoIHRoaXMucmVhZCggeCAgLHkgLSAxICkgIT0gdGMgPyAwIDogMSApO1xyXG4gICAgICAgIGNvdW50ID0gY291bnQgKyAoIHRoaXMucmVhZCggeCArIDEseSAtIDEgKSAhPSB0YyA/IDAgOiAxICk7XHJcbiAgICAgICAgY291bnQgPSBjb3VudCArICggdGhpcy5yZWFkKCB4IC0gMSx5ICApICE9IHRjID8gMCA6IDEgKTtcclxuICAgICAgICBjb3VudCA9IGNvdW50ICsgKCB0aGlzLnJlYWQoIHggKyAxLHkgICkgIT0gdGMgPyAwIDogMSApO1xyXG4gICAgICAgIGNvdW50ID0gY291bnQgKyAoIHRoaXMucmVhZCggeCAtIDEseSArIDEgKSAhPSB0YyA/IDAgOiAxICk7XHJcbiAgICAgICAgY291bnQgPSBjb3VudCArICggdGhpcy5yZWFkKCB4ICAseSArIDEgKSAhPSB0YyA/IDAgOiAxICk7XHJcbiAgICAgICAgY291bnQgPSBjb3VudCArICggdGhpcy5yZWFkKCB4ICsgMSx5ICsgMSApICE9IHRjID8gMCA6IDEgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvdW50O1xyXG4gICAgfVxyXG5cclxuICAgIGNvdW50U3Vycm91bmRlZEJsb2NrKCB4LHkgKSB7XHJcbiAgICAgICAgbGV0IGNvdW50ID0gMDtcclxuXHJcbiAgICAgICAgY291bnQgPSBjb3VudCArICggdGhpcy5pc1NwYWNlKCB4IC0gMSx5IC0gMSApID8gMCA6IDEgKTtcclxuICAgICAgICBjb3VudCA9IGNvdW50ICsgKCB0aGlzLmlzU3BhY2UoIHggICx5IC0gMSApID8gMCA6IDEgKTtcclxuICAgICAgICBjb3VudCA9IGNvdW50ICsgKCB0aGlzLmlzU3BhY2UoIHggKyAxLHkgLSAxICkgPyAwIDogMSApO1xyXG4gICAgICAgIGNvdW50ID0gY291bnQgKyAoIHRoaXMuaXNTcGFjZSggeCAtIDEseSAgKSA/IDAgOiAxICk7XHJcbiAgICAgICAgY291bnQgPSBjb3VudCArICggdGhpcy5pc1NwYWNlKCB4ICsgMSx5ICApID8gMCA6IDEgKTtcclxuICAgICAgICBjb3VudCA9IGNvdW50ICsgKCB0aGlzLmlzU3BhY2UoIHggLSAxLHkgKyAxICkgPyAwIDogMSApO1xyXG4gICAgICAgIGNvdW50ID0gY291bnQgKyAoIHRoaXMuaXNTcGFjZSggeCAgLHkgKyAxICkgPyAwIDogMSApO1xyXG4gICAgICAgIGNvdW50ID0gY291bnQgKyAoIHRoaXMuaXNTcGFjZSggeCArIDEseSArIDEgKSA/IDAgOiAxICk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb3VudDtcclxuICAgIH1cclxuXHJcbiAgICBjaGVja0JveCggeDEseTEseDIseTIgKSB7XHJcbiAgICAgICAgZm9yICggbGV0IHkgPSB5MTsgeSA8PSB5MjsgeSsrICkge1xyXG4gICAgICAgICAgICBmb3IgKCBsZXQgeCA9IHgxOyB4IDw9IHgyOyB4KysgKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGMgPSB0aGlzLnJlYWQoIHgseSApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggdGMgIT0gbnVsbCApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGNoZWNrTWFwU3RyaW5nKCB4LHkscyApIHtcclxuICAgICAgICBsZXQgdCA9IHMuc3BsaXQoIFwiXFxuXCIgKTtcclxuICAgICAgICBsZXQgaGVpZ2h0ID0gdC5sZW5ndGg7XHJcbiAgICAgICAgbGV0IHdpZHRoID0gdFswXS5sZW5ndGg7XHJcblxyXG4gICAgICAgIGZvciAoIGxldCB5eSA9IDA7IHl5IDwgaGVpZ2h0OyB5eSsrICkge1xyXG4gICAgICAgICAgICBmb3IgKCBsZXQgeHggPSAwOyB4eCA8IHdpZHRoOyB4eCsrICkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGMgPSB0W3l5XS5zdWJzdHIoIHh4LDEgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIGMgIT0gXCIwXCIgKSB7IC8vIO2IrOuqheyDiVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0YyA9IHRoaXMucmVhZCggeCArIHh4LHkgKyB5eSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHRjICE9IG51bGwgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldE1hcFN0cmluZ1NpemUoIHMgKSB7XHJcbiAgICAgICAgbGV0IHQgPSBzLnNwbGl0KCBcIlxcblwiICk7XHJcbiAgICAgICAgbGV0IGhlaWdodCA9IHQubGVuZ3RoO1xyXG4gICAgICAgIGxldCB3aWR0aCA9IHRbMV0ubGVuZ3RoO1xyXG5cclxuICAgICAgICByZXR1cm4gW3dpZHRoLGhlaWdodCx0XTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTcGFjZVRhYmxlKCB4MSx5MSx4Mix5MiApIHtcclxuICAgICAgICB4MSA9IHgxIHx8IDE7XHJcbiAgICAgICAgeTEgPSB5MSB8fCAxO1xyXG4gICAgICAgIHgyID0geDIgfHwgdGhpcy53aWR0aDtcclxuICAgICAgICB5MiA9IHkyIHx8IHRoaXMuaGVpZ2h0O1xyXG4gICAgICAgIGxldCB0ID0gW107XHJcblxyXG4gICAgICAgIGZvciAoIGxldCB5ID0geTE7IHkgPD0geTI7IHkrKyApIHtcclxuICAgICAgICAgICAgZm9yICggbGV0IHggPSB4MTsgeCA8PSB4MjsgeCsrICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLmlzU3BhY2UoIHgseSApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHQucHVzaCggW3gsIHldICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNhbWVDaGFyVGFibGUoIHgxLHkxLHgyLHkyLHRjICkge1xyXG4gICAgICAgIGxldCB0ID0gW107XHJcblxyXG4gICAgICAgIGZvciAoIGxldCB5ID0geTE7IHkgPD0geTI7IHkrKyApIHtcclxuICAgICAgICAgICAgZm9yICggbGV0IHggPSB4MTsgeCA8PSB4MjsgeCsrICkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGMgPSB0aGlzLnJlYWQoIHgseSApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggYyA9PSB0YyApIHtcclxuICAgICAgICAgICAgICAgICAgICB0LnB1c2goIFt4LCB5XSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQYXNzYWdlcyggeCx5ICkge1xyXG4gICAgICAgIGxldCB0ID0gW107XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5pc1NwYWNlKCB4IC0gMSwgeSApICkge1xyXG4gICAgICAgICAgICB0LnB1c2goIFstMSwgMF0gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCB0aGlzLmlzU3BhY2UoIHggKyAxLCB5ICkgKSB7XHJcbiAgICAgICAgICAgIHQucHVzaCggWzEsIDBdICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggdGhpcy5pc1NwYWNlKCB4LCB5IC0gMSApICkge1xyXG4gICAgICAgICAgICB0LnB1c2goIFswLCAtMV0gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCB0aGlzLmlzU3BhY2UoIHgsIHkgKyAxICkgKSB7XHJcbiAgICAgICAgICAgIHQucHVzaCggWzAsIDFdICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb25uZWN0ZWROZWFyRmxvb3IoIHgseSxjb3VudCwgbG9ja1JlZk1hcCApIHtcclxuICAgICAgICBsZXQgZmFpbDtcclxuICAgICAgICBsZXQgcGF0aCA9IHt9O1xyXG4gICAgICAgIGxldCB0ID0gW1t4LHldXTtcclxuICAgICAgICBsZXQgdDIgPSBbXTtcclxuXHRcdFxyXG4gICAgICAgIGxldCBjaGVja1N1cnJvdW5kaW5nID0gKCB4LCB5ICkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgYyA9IHRoaXMucmVhZCggeCwgeSApO1xyXG5cclxuICAgICAgICAgICAgaWYgKCBwYXRoW3ggKyBcIixcIiArIHldIHx8ICF0aGlzLmlzU3BhY2UoIHgsIHkgKSB8fCBjID09IFwiPFwiICkge1xyXG4gICAgICAgICAgICAgICAgLy8g7LK07YGs7ZWcIOqzs+ydtOqxsOuCmFxyXG4gICAgICAgICAgICAgICAgLy8g67mI6rO16rCE7J20IOyVhOuLiOqxsOuCmFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBhdGhbeCArIFwiLFwiICsgeV0gPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoIGMgIT0gXCJEXCIgJiYgdGhpcy5yZWFkKCB4LCB5LCBsb2NrUmVmTWFwICkgKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDrrLjsnITsl5Ag662U6rCA66W8IOuwsOy5mO2VmOyngCDslYrrj4TroZ0g7ZWY7J6QXHJcbiAgICAgICAgICAgICAgICAvLyDrnb3rpqztjbzrn7DsiqTrp7XsnbQgbnVsbOyduCDqsr3smrDrj4Qg7Iqk7YK1XHJcbiAgICAgICAgICAgICAgICAvLyDslYTsl5Ag66eJ7KeEIOunkOqzoCDrsLDsuZjrp4wg7Iqk7YK1XHJcbiAgICAgICAgICAgICAgICB0Mi5wdXNoKCBbIHgsIHkgXSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICggdDIubGVuZ3RoID49IGNvdW50ICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdC5wdXNoKCBbeCAtIDEsIHldICk7XHJcbiAgICAgICAgICAgIHQucHVzaCggW3ggKyAxLCB5XSApO1xyXG4gICAgICAgICAgICB0LnB1c2goIFt4LCB5IC0gMV0gKTtcclxuICAgICAgICAgICAgdC5wdXNoKCBbeCwgeSArIDFdICk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICBsZXQgdDEgPSB0O1xyXG5cclxuICAgICAgICAgICAgdCA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKCBsZXQgaSBpbiB0MSApIHtcclxuICAgICAgICAgICAgICAgIGxldCBbeCx5XSA9IHQxW2ldO1xyXG5cdFx0XHRcclxuICAgICAgICAgICAgICAgIGlmICggY2hlY2tTdXJyb3VuZGluZyggeCwgeSApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0MjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gd2hpbGUgKCB0Lmxlbmd0aCAhPSAwICk7XHJcblxyXG4gICAgICAgIHJldHVybiB0MjtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyDrp7Ug6re466as6riwIOuPhOq1rFxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfFsqLCosKl19IGNcclxuICAgICAqIEBwYXJhbSB7KltdPX0gbWFwXHJcbiAgICAgKiBAbWVtYmVyb2YgUHJvY2VkdXJhbE1hcFxyXG4gICAgICovXHJcbiAgICBkcmF3KCB4LCB5LCBjLCBtYXAgKSB7XHJcbiAgICAgICAgY29uc29sZS5hc3NlcnQoIGMgIT0gdW5kZWZpbmVkLCBcImPqsIAgdW5kZWZpbmVkXCIgKTtcclxuICAgICAgICBjb25zb2xlLmFzc2VydCggYyAhPSBudWxsLCBcImPqsIAgbnVsbFwiICk7XHJcbiAgICAgICAgaWYgKCB4IDwgMCB8fCB4ID49IHRoaXMud2lkdGggfHwgeSA8IDAgfHwgeSA+PSB0aGlzLmhlaWdodCApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG1hcCA9IG1hcCAhPSBudWxsID8gbWFwIDogdGhpcy53cml0ZU1hcDtcclxuICAgICAgICAgICAgbWFwW3ldW3hdID0gYztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geVxyXG4gICAgICogQHBhcmFtIHsqW109fSBtYXBcclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd8bnVtYmVyfG51bGx8WyosKiwqXX1cclxuICAgICAqIEBtZW1iZXJvZiBQcm9jZWR1cmFsTWFwXHJcbiAgICAgKi9cclxuICAgIHJlYWQoIHgseSxtYXAgKSB7XHJcbiAgICAgICAgaWYgKCB4IDwgMCB8fCB4ID49IHRoaXMud2lkdGggfHwgeSA8IDAgfHwgeSA+PSB0aGlzLmhlaWdodCApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiV1wiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG1hcCA9IG1hcCAhPSBudWxsID8gbWFwIDogdGhpcy5yZWFkTWFwO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG1hcFt5XVt4XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geVxyXG4gICAgICogQHJldHVybnMge251bWJlcn1cclxuICAgICAqIEBtZW1iZXJvZiBQcm9jZWR1cmFsTWFwXHJcbiAgICAgKi9cclxuICAgIHJlYWRMb2NrKCB4LHkgKSB7XHJcbiAgICAgICAgaWYgKCB4IDwgMCB8fCB4ID49IHRoaXMud2lkdGggfHwgeSA8IDAgfHwgeSA+PSB0aGlzLmhlaWdodCApIHtcclxuICAgICAgICAgICAgcmV0dXJuIDI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCB5ID09IG51bGwgfHwgeCA9PSBudWxsIHx8IHRoaXMubG9ja01hcFt5XSA9PSBudWxsICkge1xyXG4gICAgICAgICAgICAgICAgbG9nKCB4LHksdGhpcy5sb2NrTWFwW3ldICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY2tNYXBbeV1beF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geDFcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5MVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHgyXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geTJcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gY1xyXG4gICAgICogQG1lbWJlcm9mIFByb2NlZHVyYWxNYXBcclxuICAgICAqL1xyXG4gICAgZHJhd0JveCggeDEseTEseDIseTIsYyApIHtcclxuICAgICAgICBmb3IgKCBsZXQgeSA9IHkxOyB5IDw9IHkyOyB5KysgKSB7XHJcbiAgICAgICAgICAgIGZvciAoIGxldCB4ID0geDE7IHggPD0geDI7IHgrKyApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhdyggeCx5LGMgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4MVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkxXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geDJcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5MlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRjXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNoZWNrR3JlYXRlckVxdWFsXHJcbiAgICAgKiBAcmV0dXJucyB7KltdfVxyXG4gICAgICogQG1lbWJlcm9mIFByb2NlZHVyYWxNYXBcclxuICAgICAqL1xyXG4gICAgdHJhY2VSYXkoIHgxLHkxLHgyLHkyLHRjLGNoZWNrR3JlYXRlckVxdWFsICkge1xyXG4gICAgICAgIGZvciAoIGxldCBbdHgsdHldIG9mIHJheUNhc3QoIHgxLHkxLHgyLHkyICkgKSB7XHJcbiAgICAgICAgICAgIGxldCByYyA9IHRoaXMucmVhZCggdHgsdHkgKTtcclxuXHJcbiAgICAgICAgICAgIGlmICggY2hlY2tHcmVhdGVyRXF1YWwgJiYgdHlwZW9mIHJjID09IFwibnVtYmVyXCIgJiYgcmMgPj0gdGMgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW3R4LHR5LHJjXTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICAoIHJjID09IHRjICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFt0eCx0eSxyY107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBbeDIseTIsdGNdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geDFcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5MVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHgyXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geTJcclxuICAgICAqIEByZXR1cm5zIHsqW118bnVsbH1cclxuICAgICAqIEBtZW1iZXJvZiBQcm9jZWR1cmFsTWFwXHJcbiAgICAgKi9cclxuICAgIHRyYWNlUmF5VG9TcGFjZSggeDEseTEseDIseTIgKSB7XHJcbiAgICAgICAgZm9yICggbGV0IFt0eCx0eV0gb2YgcmF5Q2FzdCggeDEseTEseDIseTIgKSApIHtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLmlzU3BhY2UoIHR4LHR5ICkgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW3R4LHR5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHgxXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geTFcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4MlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkyXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IGNcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IGJyaWRnZVxyXG4gICAgICogQG1lbWJlcm9mIFByb2NlZHVyYWxNYXBcclxuICAgICAqL1xyXG4gICAgZHJhd0xpbmUoIHgxLHkxLHgyLHkyLGMsYnJpZGdlICkge1xyXG4gICAgICAgIGZvciAoIGxldCBbdHgsdHksY3gsY3ldIG9mIHJheUNhc3QoIHgxLHkxLHgyLHkyICkgKSB7XHJcbiAgICAgICAgICAgIGxldCByYyA9IHRoaXMucmVhZCggdHgsdHkgKTtcclxuXHJcbiAgICAgICAgICAgIGlmICggYnJpZGdlICYmICggcmMgPT0gXCIlXCIgfHwgcmMgPT0gXCJ+XCIgKSApIHtcclxuICAgICAgICAgICAgICAgIC8v7Jqp7JWU7J2064KYIOusvOydtOuptCDri6Trpqzrpbwg642u64qU64ukXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXcoIHR4LHR5LFwifFwiICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXcoIHR4LHR5LGMgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHhcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyPX0gZm9yY2VDaGFyXHJcbiAgICAgKiBAbWVtYmVyb2YgUHJvY2VkdXJhbE1hcFxyXG4gICAgICovXHJcbiAgICBkcmF3TWFwU3RyaW5nKCB4LHkscyxmb3JjZUNoYXIgKSB7XHJcbiAgICAgICAgbGV0IHQgPSBzLnNwbGl0KCBcIlxcblwiICk7XHJcbiAgICAgICAgbGV0IGhlaWdodCA9IHQubGVuZ3RoO1xyXG4gICAgICAgIGxldCB3aWR0aCA9IHRbMF0ubGVuZ3RoO1xyXG5cclxuICAgICAgICBmb3IgKCBsZXQgeXkgPSAwOyB5eSA8IGhlaWdodDsgeXkrKyApIHtcclxuICAgICAgICAgICAgZm9yICggbGV0IHh4ID0gMDsgeHggPCB3aWR0aDsgeHgrKyApIHtcclxuICAgICAgICAgICAgICAgIGxldCBjID0gdFt5eV0uc3Vic3RyKCB4eCwxICk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBjICE9IFwiMFwiICkgeyAvLyDtiKzrqoXsg4lcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoIHggKyB4eCx5ICsgeXksZm9yY2VDaGFyICE9IG51bGwgPyBmb3JjZUNoYXIgOiBjICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIOuRkCDsoJDsnYQg7Jew6rKw7ZWY6riwXHJcbiAgICAvLyDrsr3snYQg7YyM66m07IScIOyXsOqysO2VmOuKlCDqsoPsnbTrr4DroZwg7J6Q7Jew64+Z6rW0IOyDneyEseydmCDstIjquLDsl5Drp4wg7IKs7JqpXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHgxXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geTFcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4MlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkyXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGNcclxuICAgICAqIEBtZW1iZXJvZiBQcm9jZWR1cmFsTWFwXHJcbiAgICAgKi9cclxuICAgIGNvbm5lY3QoIHgxLHkxLHgyLHkyLGMgKSB7XHJcbiAgICAgICAgbGV0IG1ldGhvZCA9IHRoaXMucmFuZG9tLnJhbmRvbSggMSwzICk7XHJcbiAgICAgICAgbGV0IGJyaWRnZTtcclxuXHJcbiAgICAgICAgaWYgKCBtZXRob2QgPT0gMSApIHtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLnJhbmRvbS5yYW5kb20oIDEsMyApID09IDEgKSB7XHJcbiAgICAgICAgICAgICAgICBicmlkZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd0xpbmUoIHgxLHkxLHgyLHkyLGMsYnJpZGdlICk7XHJcbiAgICAgICAgfSBlbHNlIGlmICAoIG1ldGhvZCA9PSAyICkge1xyXG4gICAgICAgICAgICAvL+yImOyngSDrqLzsoIAg7ZWY64qUIOyngeqwgSBcclxuICAgICAgICAgICAgaWYgKCB0aGlzLnJhbmRvbS5yYW5kb20oIDEsNCApID4gMSApIHtcclxuICAgICAgICAgICAgICAgIGJyaWRnZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kcmF3TGluZSggeDEseTIseDIseTIsYyxicmlkZ2UgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvL+yImO2PiSDrqLzsoIAg7ZWY64qUIOyngeqwgSBcclxuICAgICAgICAgICAgaWYgKCB0aGlzLnJhbmRvbS5yYW5kb20oIDEsNCApID4gMSApIHtcclxuICAgICAgICAgICAgICAgIGJyaWRnZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kcmF3TGluZSggeDIseTEseDIseTIsYyxicmlkZ2UgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHlcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gY1xyXG4gICAgICogQHJldHVybnMge0FycmF5LjxudW1iZXIsbnVtYmVyPltdfVxyXG4gICAgICogQG1lbWJlcm9mIFByb2NlZHVyYWxNYXBcclxuICAgICAqL1xyXG4gICAgZmxvb2RGaWxsKCB4LHksYyApIHtcclxuICAgICAgICBsZXQgdCA9IFtdO1xyXG4gICAgICAgIGxldCB0YyA9IHRoaXMucmVhZCggeCx5ICk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUuYXNzZXJ0KCB0YyAhPSBjLFwi7Lmg7ZWgIOqzs+ydtCDqsJnsnLzrqbQg7JWI65CY7KeAXCIgKTtcclxuICAgICAgICBmdW5jdGlvbiBzY2FuKCB4eCx5eSxkaXIgKSB7XHJcbiAgICAgICAgICAgIGxldCBkcmF3bjtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICggdGhpcy5yZWFkKCB4eCx5eSApID09IHRjICkge1xyXG4gICAgICAgICAgICAgICAgZHJhd24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdC5wdXNoKCBbeHgsIHl5XSApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3KCB4eCx5eSxjICk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMucmVhZCggeHgseXkgLSAxICkgPT0gdGMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzY2FuKCB4eCx5eSAtIDEsLTEgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbiggeHggKyAxLHl5IC0gMSwxICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLnJlYWQoIHh4LHl5ICsgMSApID09IHRjICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggc2NhbiggeHgseXkgKyAxLC0xICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYW4oIHh4ICsgMSx5eSArIDEsMSApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHh4ID0geHggKyBkaXI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkcmF3bjtcclxuICAgICAgICB9XHJcblx0XHRcclxuICAgICAgICBpZiAoIHNjYW4oIHgseSwtMSApICkge1xyXG4gICAgICAgICAgICBzY2FuKCB4ICsgMSx5LDEgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHlcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gY1xyXG4gICAgICogQHJldHVybnMge0FycmF5LjxudW1iZXIsbnVtYmVyPltdfVxyXG4gICAgICogQG1lbWJlcm9mIFByb2NlZHVyYWxNYXBcclxuICAgICAqL1xyXG4gICAgZmxvb2RGaWxsU3BhY2UoIHgseSxjICkge1xyXG4gICAgICAgIGxldCB0ID0gW107XHJcblx0XHRcclxuICAgICAgICBsZXQgc2NhbiA9ICggeHgsIHl5LCBkaXIgKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBkcmF3bjtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICggdGhpcy5pc1NwYWNlKCB4eCwgeXkgKSApIHtcclxuICAgICAgICAgICAgICAgIGRyYXduID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHQucHVzaCggW3h4LCB5eV0gKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhdyggeHgsIHl5LCBjICk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMuaXNTcGFjZSggeHgsIHl5IC0gMSApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggc2NhbiggeHgsIHl5IC0gMSwgLTEgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbiggeHggKyAxLCB5eSAtIDEsIDEgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMuaXNTcGFjZSggeHgsIHl5ICsgMSApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggc2NhbiggeHgsIHl5ICsgMSwgLTEgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbiggeHggKyAxLCB5eSArIDEsIDEgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB4eCA9IHh4ICsgZGlyO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZHJhd247XHJcbiAgICAgICAgfTtcclxuXHRcdFxyXG4gICAgICAgIGlmICggc2NhbiggeCx5LC0xICkgKSB7XHJcbiAgICAgICAgICAgIHNjYW4oIHggKyAxLHksMSApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIOuNmOyghCDtlZwg7Li17J2AIO2VmOuCmOydmCDshLnthLDqsIAg65CY7Ja07JW8IO2VnOuLpC5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBtYXJrXHJcbiAgICAgKiBAcmV0dXJucyB7KltdfVxyXG4gICAgICogQG1lbWJlcm9mIFByb2NlZHVyYWxNYXBcclxuICAgICAqL1xyXG4gICAgY291bnRTZWN0b3JzKCBtYXJrICkge1xyXG4gICAgICAgIGxldCBzZWN0b3JzID0gW107XHJcblxyXG4gICAgICAgIGlmICggbWFyayApIHtcclxuICAgICAgICAgICAgLy8g7IS57YSw66W8IOuLpCDsuaDtlaAg6rKD7J2064OQXHJcbiAgICAgICAgICAgIGZvciAoIGxldCB5ID0gMDsgeSA8IHRoaXMuaGVpZ2h0OyB5KysgKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKCBsZXQgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4KysgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLmlzU3BhY2UoIHgsIHkgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VjdG9yTnVtID0gc2VjdG9ycy5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWN0b3JzLnB1c2goIHsgc2VjdG9yTnVtYmVyOiBzZWN0b3JOdW0sIHBvczogdGhpcy5mbG9vZEZpbGxTcGFjZSggeCwgeSwgc2VjdG9yTnVtICkgfSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2coIGDshLnthLAgJHtzZWN0b3JOdW19LCAke3NlY3RvcnNbc2VjdG9yTnVtXS5wb3MubGVuZ3RofeqwnCDsuaDtlaggWyR7eH0sJHt5fV1gICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5yYW5kb20ucmFuZG9tKCAxLCBNYXRoLmZsb29yKCB0aGlzLndpZHRoICogdGhpcy5oZWlnaHQgKiAuMDA1ICkgKSA+IHNlY3RvcnNbc2VjdG9yTnVtXS5wb3MubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdypoICogMC4wMDUg6rCcIOuztOuLpCDsnpHsnYAg7IS57YSw64qUIOyngOyauCDtmZXrpaDsnbQg7J6I7J2MXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2coIGDshLnthLAgJHtzZWN0b3JOdW19LCAke3NlY3RvcnNbc2VjdG9yTnVtXS5wb3MubGVuZ3RofeqwnOudvCDrhIjrrLQg7J6R7JWE7IScIOunieyVhOuyhOumvCBbJHt4fSwke3l9XWAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIGxldCBpIGluIHNlY3RvcnNbc2VjdG9yTnVtXS5wb3MgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IFt4LHldID0gc2VjdG9yc1tzZWN0b3JOdW1dLnBvc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLnJlYWRMb2NrKCB4LHkgKSAhPSAyICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoIHgseSxcIldcIiApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3RvcnMuc3BsaWNlKCBzZWN0b3JOdW0sMSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxvZyggYOy0nSDshLnthLDsiJggJHtzZWN0b3JzLmxlbmd0aH1gICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IG5ld01hcCA9IHRoaXMuY2xvbmVNYXAoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0UmVhZFdyaXRlKCBuZXdNYXAsbmV3TWFwICk7XHJcbiAgICAgICAgICAgIGZvciAoIGxldCB5ID0gMDsgeSA8IHRoaXMuaGVpZ2h0OyB5KysgKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKCBsZXQgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4KysgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLmlzU3BhY2UoIHgseSApICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWN0b3JOdW0gPSBzZWN0b3JzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3RvcnMucHVzaCggeyBzZWN0b3JOdW1iZXI6IHNlY3Rvck51bSwgcG9zOiB0aGlzLmZsb29kRmlsbFNwYWNlKCB4LCB5LCBcIldcIiApIH0gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbG9nKCBg7LSdIOyEue2EsOyImCAke3NlY3RvcnMubGVuZ3RofWAgKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRSZWFkV3JpdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzZWN0b3JzO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbm5lY3RTZWN0b3JzKCkge1xyXG4gICAgICAgIGxldCBuZXdNYXAgPSB0aGlzLmNsb25lTWFwKCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0UmVhZFdyaXRlKCBuZXdNYXAsbmV3TWFwICk7XHJcbiAgICAgICAgbGV0IHNlY3RvcnMgPSB0aGlzLmNvdW50U2VjdG9ycyggdHJ1ZSApO1xyXG4gICAgICAgIC8vdGhpcy5nZXRNYXBTdHJpbmcobmV3TWFwKTtcclxuICAgICAgICBjb25zdCBuZWVkQ291bnQgPSBzZWN0b3JzLmxlbmd0aCAtIDE7XHJcblxyXG4gICAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IG5lZWRDb3VudDsgaSsrICkge1xyXG4gICAgICAgICAgICBsZXQgdHJ5MSA9IDA7XHJcbiAgICAgICAgICAgIGxldCBwYXRoO1xyXG5cclxuICAgICAgICAgICAgbG9nKCBcIi0tLSDshLnthLDsl7DqsrBcIixzZWN0b3JzWzBdLnNlY3Rvck51bWJlciApO1xyXG4gICAgICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgICAgICB0cnkxID0gdHJ5MSArIDE7XHJcbiAgICAgICAgICAgICAgICBsZXQgW3gxLCB5MV0gPSBzZWN0b3JzWzBdLnBvc1t0aGlzLnJhbmRvbS5yYW5kb20oIDAsc2VjdG9yc1swXS5wb3MubGVuZ3RoIC0gMSApXTsgLy8g64K0IOyijO2RnOykkeyXkCDtlZjrgpjsl5DshJxcclxuXHJcbiAgICAgICAgICAgICAgICBsb2coIFwi7Iuc64+E7JyE7LmYXCIsIHgxLCB5MSApO1xyXG4gICAgICAgICAgICAgICAgcGF0aCA9IGZpbmROZWFyZXN0U2VjdG9yLmNhbGwoIHRoaXMsIHgxLCB5MSwgc2VjdG9yc1swXS5zZWN0b3JOdW1iZXIgKyAxICk7XHJcbiAgICAgICAgICAgICAgICBsb2coIGDsi5zrj4TqsrDqs7wg6rK966GcIOq4uOydtCAke3BhdGgubGVuZ3RofWAgKTtcclxuICAgICAgICAgICAgfSB3aGlsZSAoIHBhdGggPT0gbnVsbCAmJiB0cnkxIDw9IE1hdGgubWluKCBzZWN0b3JzWzBdLnBvcy5sZW5ndGgsIDUgKSApO1xyXG4gICAgICAgICAgICBpZiAoIHBhdGggKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKCBsZXQgaSBpbiBwYXRoICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB2ID0gcGF0aFtpXTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgW3gseV0gPSB2O1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjID0gdGhpcy5yZWFkKCB4LHkgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g7Jes6riw7IScIOyEue2EsOydmCDsnKDsnbztlZwg6rOz7J2066m0IOuyiO2YuOulvCDsgq3soJztlbTrsoTrpqzqsowg65Cc64ukLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggcGFyc2VJbnQoIGkgKSA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggYyA9PSBcIiVcIiB8fCBjID09IFwiflwiICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/smqnslZTsnbTrgpgg66y87J2066m0IOuLpOumrFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3KCB4LHksXCJ8XCIgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdyggeCx5LFwiIFwiICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsb2coIFwi64uk66W4IOyEue2EsOyXkCDsl7DqsrDtlaAg7IiYIOyXhuuKlCDshLnthLDri6RcIiApO1xyXG4gICAgICAgICAgICAgICAgZm9yICggbGV0IGkgaW4gc2VjdG9yc1swXS5wb3MgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHYgPSBzZWN0b3JzWzBdLnBvc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgW3gsIHldID0gdjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLnJlYWRMb2NrKCB4LHkgKSAhPSAyICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoIHgseSxcIkJcIiApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWN0b3JzLnNoaWZ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v7J6E7Iuc66GcIOyTtCDtg4Dsnbwg7KCV66asXHJcbiAgICAgICAgdGhpcy5zZXRSZWFkV3JpdGUoIG5ld01hcCApO1xyXG4gICAgICAgIGZvciAoIGxldCB5ID0gMDsgeSA8IHRoaXMuaGVpZ2h0OyB5KysgKSB7XHJcbiAgICAgICAgICAgIGZvciAoIGxldCB4ID0gMDsgeCA8IHRoaXMud2lkdGg7IHgrKyApIHtcclxuICAgICAgICAgICAgICAgIGxldCBjID0gdGhpcy5yZWFkKCB4LHkgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiBjID09IFwic3RyaW5nXCIgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3KCB4LHksYyApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0UmVhZFdyaXRlKCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGRlY29GbG9vcigpIHtcclxuICAgICAgICBsZXQgdGlsZXMgPSBcIlwiO1xyXG5cdFx0XHJcbiAgICAgICAgbGV0IHJlcCA9ICggY2hhciwgZ3JhZCwgc3RhcnQgKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB2ID0gVXRpbHMuY2xhbXAoIHN0YXJ0ICsgKCB0aGlzLmZsb29yIC0gMSApICogZ3JhZCwgMCwgMTAgKTtcclxuXHJcbiAgICAgICAgICAgIGlmICggdiA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aWxlcyA9IHRpbGVzICsgY2hhci5yZXBlYXQoIHYgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJlcCggJ1wiJywgLTQsIDEwICk7IC8vIO2SgFxyXG4gICAgICAgIHJlcCggXCIuXCIsIC0zLCAxMCApOy8vIOqzoOyatO2dmVxyXG4gICAgICAgIHJlcCggXCI7XCIsIC0yLCAxMCApOyAvLyDqsbDsuZztnZlcclxuICAgICAgICByZXAoIFwiLFwiLCAtMSwgMTAgKTsgLy8g7Z2ZXHJcbiAgICAgICAgcmVwKCBcIj9cIiwgMSwgNSApOyAvLyDsnpDqsIhcclxuICAgICAgICByZXAoIFwiKFwiLCAwLjUsIC0xICk7Ly8g64+MXHJcbiAgICAgICAgcmVwKCBcIntcIiwgMSwgLTEgKTsgLy8g7YGwIOuPjFxyXG4gICAgICAgIGxldCByZXBsYWNlV2FsbDtcclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLnJhbmRvbS5yYW5kb20oIDEsdGhpcy5mbG9vciApID4gNSApIHtcclxuICAgICAgICAgICAgcmVwbGFjZVdhbGwgPSBcIlJcIjtcclxuICAgICAgICB9IGVsc2UgaWYgICggdGhpcy5yYW5kb20ucmFuZG9tKCAxLHRoaXMuZmxvb3IgKSA+IDEwICkge1xyXG4gICAgICAgICAgICByZXBsYWNlV2FsbCA9IFwiJlwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKCBsZXQgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrICkge1xyXG4gICAgICAgICAgICBmb3IgKCBsZXQgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4KysgKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYyA9IHRoaXMucmVhZCggeCx5ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBjID09IFwiIFwiICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwaWNrID0gdGhpcy5yYW5kb20ucmFuZG9tKCAwLHRpbGVzLmxlbmd0aCAtIDEgKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmMgPSB0aWxlcy5zdWJzdHIoIHBpY2ssMSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoIHgseSxyYyApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCBjID09IFwiV1wiICYmIHJlcGxhY2VXYWxsICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdyggeCx5LHJlcGxhY2VXYWxsICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGNcclxuICAgICAqIEBtZW1iZXJvZiBQcm9jZWR1cmFsTWFwXHJcbiAgICAgKi9cclxuICAgIG1ha2VSaXZlciggYyApIHtcclxuICAgICAgICBsZXQgW3csaF0gPSBbdGhpcy53aWR0aCx0aGlzLmhlaWdodF07XHJcbiAgICAgICAgbGV0IFt4LHldID0gW3RoaXMucmFuZG9tLnJhbmRvbSggMCx3IC0gMSApLHRoaXMucmFuZG9tLnJhbmRvbSggMCxoIC0gMSApXTtcclxuICAgICAgICBsZXQgYW5nbGUgPSB0aGlzLnJhbmRvbS5yYW5kb20oIDAsMzU5ICk7XHJcblx0XHRcclxuICAgICAgICBjb25zdCBsaW5lID0gKCB4LCB5LCBhbmdsZSApID0+IHtcclxuICAgICAgICAgICAgbGV0IGRpc3QgPSB0aGlzLnJhbmRvbS5yYW5kb20oIDEsNSApO1xyXG4gICAgICAgICAgICBsZXQgeDIseTI7XHJcbiAgICAgICAgICAgIGxldCBzdGVwID0gMTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICggISggeCA8IDAgfHwgeCA+PSB3IHx8IHkgPCAwIHx8IHkgPj0gaCB8fCBzdGVwID4gMTAwICkgKSB7XHJcbiAgICAgICAgICAgICAgICB4MiA9IHggKyBNYXRoLmNvcyggYW5nbGUgKiAxODAgLyBNYXRoLlBJICkgKiBkaXN0O1xyXG4gICAgICAgICAgICAgICAgeTIgPSB5ICsgTWF0aC5zaW4oIGFuZ2xlICogMTgwIC8gTWF0aC5QSSApICogZGlzdDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0xpbmUoIHgseSx4Mix5MixjICk7XHJcbiAgICAgICAgICAgICAgICBbeCx5XSA9IFt4Mix5Ml07XHJcbiAgICAgICAgICAgICAgICBhbmdsZSA9IGFuZ2xlICsgdGhpcy5yYW5kb20ucmFuZG9tKCAtMzAsMzAgKTtcclxuICAgICAgICAgICAgICAgIGRpc3QgPSB0aGlzLnJhbmRvbS5yYW5kb20oIDEsNSApO1xyXG4gICAgICAgICAgICAgICAgc3RlcCA9IHN0ZXAgKyAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHRcdFxyXG4gICAgICAgIGxpbmUoIHgseSxhbmdsZSApO1xyXG4gICAgICAgIGxpbmUoIHgseSwtYW5nbGUgKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIC8qXHJcblxyXG5cdOy7pOyKpO2FgCDruJTroZ3sl5DshJzrp4wg7IKs7Jqp7ZWY64qUIOu4lOuhnVxyXG5cdDAgICDtiKzrqoXsg4lcclxuXHQxfjkg66y47J20IOu2meydhCDsiJgg7J6I64qUIOuyvVxyXG5cclxuXHQqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7W3N0cmluZyxudW1iZXIsYm9vbGVhbl1bXX1cclxuICAgICAqIEBtZW1iZXJvZiBQcm9jZWR1cmFsTWFwXHJcbiAgICAgKi9cclxuICAgIGdldEN1c3RvbUJsb2NrTGlzdCgpIHtcclxuICAgICAgICBsZXQgZmxvb3IgPSB0aGlzLmZsb29yO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8qKiBAdHlwZSB7W3N0cmluZyxudW1iZXIsYm9vbGVhbl1bXX0gKi9cclxuICAgICAgICBsZXQgdCA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNwZWNpYWwgPSB7fTtcclxuXHRcdFxyXG4gICAgICAgIGZvciAoIGxldCBrIGluIEN1c3RvbUJsb2NrcyApIHtcclxuICAgICAgICAgICAgbGV0IHYgPSBDdXN0b21CbG9ja3Nba107XHJcblxyXG4gICAgICAgICAgICBpZiAoIHYuc3BlY2lhbCApIHtcclxuICAgICAgICAgICAgICAgIGlmICggdi5zcGVjaWFsID09IFwiYm9zc1wiICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5ib3NzRmxvb3JzLmluY2x1ZGVzKCB0aGlzLmZsb29yICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwZWNpYWxbXCJib3NzXCJdID0gc3BlY2lhbFtcImJvc3NcIl0gfHwgW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwZWNpYWxbXCJib3NzXCJdLnB1c2goIHYgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIHYuc3BlY2lhbCA9PSBcInNob3BcIiApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaXMuc2hvcEZsb29ycy5pbmNsdWRlcyggdGhpcy5mbG9vciApICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGVjaWFsW1wic2hvcFwiXSA9IHNwZWNpYWxbXCJzaG9wXCJdIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGVjaWFsW1wic2hvcFwiXS5wdXNoKCB2ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCB2LnNwZWNpYWwgPT0gXCJjYW1wZmlyZVwiICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5jYW1wZmlyZUZsb29ycy5pbmNsdWRlcyggdGhpcy5mbG9vciApICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGVjaWFsW1wiY2FtcGZpcmVcIl0gPSBzcGVjaWFsW1wiY2FtcGZpcmVcIl0gfHwgW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwZWNpYWxbXCJjYW1wZmlyZVwiXS5wdXNoKCB2ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNhbkFwcGVhcjtcclxuICAgICAgICAgICAgICAgIGxldCBtdXN0QXBwZWFyO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNoYW5jZSA9IHYuY2hhbmNlVG9BcHBlYXIgfHwgMTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIHYud2hpdGVBdHRyaWIgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICggbGV0IGkgaW4gdi53aGl0ZUF0dHJpYiApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHYyID0gdi53aGl0ZUF0dHJpYltpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGF0dHJpYk5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBfY2hhbmNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB0eXBlb2YgdjIgPT0gXCJzdHJpbmdcIiApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYk5hbWUgPSB2MjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYk5hbWUgPSB2MlsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGFuY2UgPSB2MlsyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaXMuYXR0cmliLmluY2x1ZGVzKCBhdHRyaWJOYW1lICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5BcHBlYXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmNlID0gY2hhbmNlICogKCBfY2hhbmNlIHx8IDEgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICggY2FuQXBwZWFyICYmIHYuYmxhY2tBdHRyaWIgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICggbGV0IGkgaW4gdi5ibGFja0F0dHJpYiApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHYyID0gdi5ibGFja0F0dHJpYltpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGF0dHJpYk5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBfY2hhbmNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB0eXBlb2YgdjIgPT0gXCJzdHJpbmdcIiApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYk5hbWUgPSB2MjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYk5hbWUgPSB2MlsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGFuY2UgPSB2MlsyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaXMuYXR0cmliLmluY2x1ZGVzKCBhdHRyaWJOYW1lICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5BcHBlYXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCBjYW5BcHBlYXIgJiYgdi5hcHBlYXJGbG9vciApIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY2FuQXBwZWFyRmxvb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNoYW5jZUZsb29yID0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICggbGV0IGkgaW4gdi5hcHBlYXJGbG9vciApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHYyID0gdi5hcHBlYXJGbG9vcltpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IFttaW4sbWF4LF9jaGFuY2VdID0gdjI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGZsb29yID49IG1pbiAmJiBmbG9vciA8PSBtYXggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5BcHBlYXJGbG9vciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuY2VGbG9vciA9IF9jaGFuY2UgfHwgMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggY2FuQXBwZWFyRmxvb3IgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5jZSA9IGNoYW5jZSAqIGNoYW5jZUZsb29yO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbkFwcGVhciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICggY2FuQXBwZWFyICYmIHRoaXMucmFuZG9tLnJhbmRvbSggMSxNYXRoLmZsb29yKCBjaGFuY2UgKiAxMDAgKSApIDw9IDEwMCApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDrgpjtg4DrgqAg7ZmV66Wg7J2AIOyGjOyImOygkCAy7J6Q66as6rmM7KeAIO2XiOyaqVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuYW1lLG11c3RQbGFjZSxtYXhUcnk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWUgPSBrO1xyXG4gICAgICAgICAgICAgICAgICAgIG11c3RQbGFjZSA9IHYubXVzdFBsYWNlO1xyXG4gICAgICAgICAgICAgICAgICAgIG1heFRyeSA9IHYubWF4VHJ5O1xyXG4gICAgICAgICAgICAgICAgICAgIHQucHVzaCggW25hbWUsIG1heFRyeSwgbXVzdFBsYWNlXSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAoIGxldCBrIGluIHNwZWNpYWwgKSB7XHJcbiAgICAgICAgICAgIGxldCB2ID0gc3BlY2lhbFtrXTtcclxuICAgICAgICAgICAgbGV0IHBpY2sgPSB0aGlzLnJhbmRvbS5yYW5kb20oIDAsdi5sZW5ndGggLSAxICk7XHJcbiAgICAgICAgICAgIGxldCBuYW1lLG11c3RQbGFjZSxtYXhUcnk7XHJcblxyXG4gICAgICAgICAgICBuYW1lID0gazsvL3ZbcGlja11cclxuICAgICAgICAgICAgbXVzdFBsYWNlID0gdltwaWNrXS5tdXN0UGxhY2U7XHJcbiAgICAgICAgICAgIG1heFRyeSA9IHZbcGlja10ubWF4VHJ5O1xyXG4gICAgICAgICAgICB0LnVuc2hpZnQoIFtuYW1lLCBtYXhUcnksIG11c3RQbGFjZSBdICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1tzdHJpbmcsbnVtYmVyLGJvb2xlYW5dW109fSB0XHJcbiAgICAgKiBAcmV0dXJucyB7QXJyYXkuPG51bWJlcixudW1iZXI+W119XHJcbiAgICAgKiBAbWVtYmVyb2YgUHJvY2VkdXJhbE1hcFxyXG4gICAgICovXHJcbiAgICBwbGFjZUN1c3RvbUJsb2NrcyggdCApIHtcclxuICAgICAgICB0ID0gdCAhPSBudWxsID8gdCA6IHRoaXMuZ2V0Q3VzdG9tQmxvY2tMaXN0KCk7XHJcbiAgICAgICAgbGV0IHNhdmVkTWFwID0gdGhpcy5jbG9uZU1hcCgpO1xyXG4gICAgICAgIGxldCBzYXZlZExvY2tNYXAgPSB0aGlzLmNsb25lTWFwKCB0aGlzLmxvY2tNYXAgKTtcclxuICAgICAgICBsZXQgcG9zVGFibGUgPSBbXTtcclxuICAgICAgICBsZXQgZmFpbDtcclxuXHJcbiAgICAgICAgZm9yICggbGV0IGkgaW4gdCApIHtcclxuICAgICAgICAgICAgbGV0IHYgPSB0W2ldO1xyXG4gICAgICAgICAgICBsZXQgW25hbWUsbWF4VHJ5LG11c3RQbGFjZV0gPSB2O1xyXG4gICAgICAgICAgICBsZXQgW3gseSBdID0gdGhpcy5wbGFjZUN1c3RvbUJsb2NrKCBuYW1lLG1heFRyeSApO1xyXG5cclxuICAgICAgICAgICAgaWYgKCB4ID09IG51bGwgJiYgbXVzdFBsYWNlID09IHRydWUgKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDqvK3rhpTslbzrkJjripQg6rGw66m0IOyLpO2MqFxyXG4gICAgICAgICAgICAgICAgZmFpbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwb3NUYWJsZS5wdXNoKCBbeCwgeV0gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCBmYWlsICkge1xyXG4gICAgICAgICAgICB0aGlzLm1hcCA9IHNhdmVkTWFwO1xyXG4gICAgICAgICAgICB0aGlzLmxvY2tNYXAgPSBzYXZlZExvY2tNYXA7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0UmVhZFdyaXRlKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHBvc1RhYmxlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhUcnlcclxuICAgICAqIEByZXR1cm5zIHtBcnJheS48bnVtYmVyLG51bWJlcj58bnVsbH1cclxuICAgICAqIEBtZW1iZXJvZiBQcm9jZWR1cmFsTWFwXHJcbiAgICAgKi9cclxuICAgIHBsYWNlQ3VzdG9tQmxvY2soIG5hbWUsbWF4VHJ5ICkge1xyXG4gICAgICAgIGxldCBjYiA9IEN1c3RvbUJsb2Nrc1tuYW1lXTtcclxuICAgICAgICBsZXQgbWFwU3RyaW5nID0gY2IubWFwW3RoaXMucmFuZG9tLnJhbmRvbSggMCxjYi5tYXAubGVuZ3RoIC0gMSApXTtcclxuICAgICAgICBsZXQgW2J3LGJoXSA9IHRoaXMuZ2V0TWFwU3RyaW5nU2l6ZSggbWFwU3RyaW5nICk7XHJcbiAgICAgICAgbGV0IFt3LGhdID0gW3RoaXMud2lkdGgsdGhpcy5oZWlnaHRdO1xyXG4gICAgICAgIGxldCBtYXJnaW4gPSBjYi5tYXJnaW47XHJcbiAgICAgICAgbGV0IHgseTtcclxuICAgICAgICBsZXQgdHJ5MSA9IDA7XHJcbiAgICAgICAgbGV0IGlzTG9ja2VkO1xyXG5cclxuICAgICAgICB0aGlzLnNldFJlYWRXcml0ZSggdGhpcy5sb2NrTWFwICk7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICB0cnkxID0gdHJ5MSArIDE7XHJcbiAgICAgICAgICAgIGlmICggdHJ5MSA+ICggbWF4VHJ5IHx8IDEgKSApIHtcclxuICAgICAgICAgICAgICAgIC8vIOyLpO2MqFxyXG4gICAgICAgICAgICAgICAgbG9nKCBcIuy7pOyKpO2FgOu4lOuhnVwiLCBuYW1lLCBcIuydhCDrsLDsuZjtlaAg6rOz7J20IOyXhuuLpFwiICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFJlYWRXcml0ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB4ID0gdGhpcy5yYW5kb20ucmFuZG9tKCBtYXJnaW4sIHcgLSBtYXJnaW4gLSBidyApO1xyXG4gICAgICAgICAgICB5ID0gdGhpcy5yYW5kb20ucmFuZG9tKCBtYXJnaW4sIGggLSBtYXJnaW4gLSBiaCApO1xyXG4gICAgICAgICAgICBpc0xvY2tlZCA9IHRoaXMuY2hlY2tNYXBTdHJpbmcoIHgsIHksIG1hcFN0cmluZyApO1xyXG4gICAgICAgIH0gd2hpbGUgKCBpc0xvY2tlZCApO1xyXG4gICAgICAgIGxvZyggYOy7pOyKpO2FgOu4lOuhnSAke25hbWV967Cw7LmYIOychOy5mOuKlGAseCx5ICk7XHJcbiAgICAgICAgdGhpcy5kcmF3TWFwU3RyaW5nKCB4LHksbWFwU3RyaW5nICk7XHJcbiAgICAgICAgdGhpcy5zZXRSZWFkV3JpdGUoIG51bGwsdGhpcy5sb2NrTWFwICk7XHJcbiAgICAgICAgLy8g66eI7KeEIOunjO2BvCDrhJPqsowg65297J2EIOqxtOuLpFxyXG4gICAgICAgIC8vIOyjvOuzgOydgCAx66GcIOudveydhCDqsbjqs6AgKOq4uOydhCDrgrwg7IiYIOyeiOyngOunjCDri6Trpbgg67iU66Gd7J2AIOuqu+uGk+ydjCk7XHJcbiAgICAgICAgLy8g64K067aA64qUIDLroZwg65297J2EIOqxtOuLpCAo6ri466eMIOuqu+uDhCk7XHJcbiAgICAgICAgaWYgKCBtYXJnaW4gPiAwICkge1xyXG4gICAgICAgICAgICBmb3IgKCBsZXQgeXkgPSB5IC0gbWFyZ2luOyB5eSA8PSB5ICsgbWFyZ2luOyB5eSsrICkge1xyXG4gICAgICAgICAgICAgICAgZm9yICggbGV0IHh4ID0geCAtIG1hcmdpbjsgeHggPD0geCArIG1hcmdpbjsgeHgrKyApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdNYXBTdHJpbmcoIHh4LHl5LG1hcFN0cmluZywxICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kcmF3TWFwU3RyaW5nKCB4LHksbWFwU3RyaW5nLDIgKTtcclxuICAgICAgICB0aGlzLnNldFJlYWRXcml0ZSgpO1xyXG4gICAgICAgIGxldCBudW1PZkRvb3JzID0gdGhpcy5yYW5kb20ucmFuZG9tKCBjYi5kb29yTWluLGNiLmRvb3JNYXggKTtcclxuICAgICAgICBsZXQgcGlja2VkRG9vciA9IFtdO1xyXG4gICAgICAgIGxldCBkb29ycyA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBjYi5kb29yTWF4OyBpKysgKSB7XHJcbiAgICAgICAgICAgIC8vIOusuCDsiKvsnpDripQgMeu2gO2EsCDsi5zsnpFcclxuICAgICAgICAgICAgLy8gMOydgCDtiKzrqoVcclxuICAgICAgICAgICAgZG9vcnMucHVzaCggaSArIDEgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgbnVtT2ZEb29yczsgaSsrICkge1xyXG4gICAgICAgICAgICBsZXQgcGlja2VkID0gdGhpcy5yYW5kb20ucmFuZG9tKCAwLCBkb29ycy5sZW5ndGggLSAxICk7XHJcblxyXG4gICAgICAgICAgICBwaWNrZWREb29yLnB1c2goIGRvb3JzW3BpY2tlZF0gKTtcclxuICAgICAgICAgICAgZG9vcnMuc3BsaWNlKCBwaWNrZWQsIDEgKTtcclxuICAgICAgICB9XHJcblx0XHRcclxuICAgICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBudW1PZkRvb3JzOyBpKysgKSB7XHJcbiAgICAgICAgICAgIGxvZyggXCLrrLjri6zquLDsi5zrj4RcIixwaWNrZWREb29yW2ldICk7XHJcbiAgICAgICAgICAgIGxldCB0ID0gdGhpcy5nZXRTYW1lQ2hhclRhYmxlKCB4LHkseCArIGJ3IC0gMSx5ICsgYmggLSAxLHBpY2tlZERvb3JbaV0udG9TdHJpbmcoKSApO1xyXG4gICAgICAgICAgICBsZXQgZG9vclgsZG9vclk7XHJcbiAgICAgICAgICAgIGxldCBwYXNzYWdlcztcclxuICAgICAgICAgICAgbGV0IHRyeTIgPSAwO1xyXG5cclxuICAgICAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICAgICAgdHJ5MiA9IHRyeTIgKyAxO1xyXG4gICAgICAgICAgICAgICAgW2Rvb3JYLCBkb29yWV0gPSB0W3RoaXMucmFuZG9tLnJhbmRvbSggMCx0Lmxlbmd0aCAtIDEgKV07XHJcbiAgICAgICAgICAgICAgICBwYXNzYWdlcyA9IHRoaXMuZ2V0UGFzc2FnZXMoIGRvb3JYLCBkb29yWSApO1xyXG4gICAgICAgICAgICAgICAgLy8g66y47JeQIOyXsOqysOuQnCDquLjsnbQg65GQIOqwnOuptCDrgpjqsIDshJwg7IS57YSw66GcIOyXsOqysOuQmOuKlOyngCDrs7TrqbTrkJzri6QuXHJcbiAgICAgICAgICAgIH0gd2hpbGUgKCAhKCBwYXNzYWdlcy5sZW5ndGggPT0gMiB8fCB0cnkyID4gNSApICk7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhdyggZG9vclgsZG9vclksXCJEXCIgKTsgLy8g7J2864uoIOusuOydgCDri6zqs6BcclxuICAgICAgICAgICAgaWYgKCBwYXNzYWdlcyAmJiBwYXNzYWdlcy5sZW5ndGggIT0gMiApIHtcclxuICAgICAgICAgICAgICAgIC8vIOyEoO2Dne2VnCDrrLjsl5Ag6ri47J2EIOuLrOyVhOyVvCDtlZjripQg7IOB7ZmpXHJcbiAgICAgICAgICAgICAgICBsb2coIFwi66y4IOyVnuyXkCDquLjsnYQg64us7JWE7JW87ZWc64ukXCIscGFzc2FnZXMubGVuZ3RoICk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmFzc2VydCggcGFzc2FnZXMubGVuZ3RoID09IDEsXCLrrLjsnbQg7ZWc7Kq964+EIOyViOyXtOugpOyeiOycvOuptCDslYjrkJjsnpbslYQuIOu4lOuhneuNsOydtO2EsCDsmKTrpZhcIiApO1xyXG4gICAgICAgICAgICAgICAgbGV0IFtheCxheV0gPSBwYXNzYWdlc1swXTtcclxuXHJcbiAgICAgICAgICAgICAgICBsb2coIFwi64uk64qUIOychOy5mOyZgCDrsKntlqVcIixkb29yWCAtIGF4LGRvb3JZIC0gYXksLWF4LC1heSApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3KCBkb29yWCAtIGF4LGRvb3JZIC0gYXksXCIgXCIgKTtcclxuICAgICAgICAgICAgICAgIC8vdGhpcy5jb25uZWN0QW55d2hlcmUoZG9vclgtYXgsZG9vclktYXksLWF4LC1heSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsb2coIFwi66y47J2EIOq3uOuDpSDri6zquLDrp4wg7ZWY66m065CoXCIsZG9vclgsZG9vclkgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKCBsZXQgeXkgPSB5OyB5eSA8IHkgKyBiaDsgeXkrKyApIHtcclxuICAgICAgICAgICAgZm9yICggbGV0IHh4ID0geDsgeHggPCB4ICsgYnc7IHh4KysgKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYyA9IHRoaXMucmVhZCggeHgsIHl5ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICBpZiAoIFwiMTIzNDU2Nzg5XCIuaW5kZXhPZiggYyApID49IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3KCB4eCx5eSxjYi53YWxsIHx8IFwiTVwiICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbG9nKCBcIuy7pOyKpO2FgOu4lOuhnVwiLG5hbWUsXCLrsLDsuZjsmYTro4xcIiApO1xyXG5cclxuICAgICAgICByZXR1cm4gW3gseV07XHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIO2dpeuvuOuPhCDqs4TsgrBcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLypcclxuXHJcblx07J6F6rWs7JeQ7IScIOupgOuLpCA9IOyeheq1rOyXkOyEnOu2gO2EsCDsuaDtlbTqsIDrqbTshJwg6rWs7ZWoXHJcblx066eJ64uk66W4IOqzs1xyXG5cclxuXHQqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7KltdfVxyXG4gICAgICogQG1lbWJlcm9mIFByb2NlZHVyYWxNYXBcclxuICAgICAqL1xyXG4gICAgY29tcHV0ZUludGVyZXN0aW5nTWFwKCkge1xyXG4gICAgICAgIGxldCBbc3RhcnRYLHN0YXJ0WV0gPSBbdGhpcy5zdGFydFgsdGhpcy5zdGFydFldO1xyXG4gICAgICAgIGxldCBwYXRoID0ge307XHJcbiAgICAgICAgbGV0IHQgPSBbWzAsIHN0YXJ0WCwgc3RhcnRZXV07XHJcblx0XHRcclxuICAgICAgICBsZXQgY2hlY2tTdXJyb3VuZGluZyA9ICggZGlzdCwgeCwgeSApID0+IHtcclxuICAgICAgICAgICAgaWYgKCBwYXRoW3ggKyBcIixcIiArIHldIHx8ICF0aGlzLmlzU3BhY2UoIHgsIHkgKSApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyDsooHsnYDquLjsnYQg65Sw65286rCI7IiY66GdIOqwgOyCsOygkOydhCDspIDri6RcclxuICAgICAgICAgICAgbGV0IGNvdW50ID0gMDtcclxuXHJcbiAgICAgICAgICAgIGNvdW50ID0gY291bnQgKyAoIHRoaXMucmVhZCggeCAtIDEsIHkgKSA9PSAwID8gMSA6IDAgKTtcclxuICAgICAgICAgICAgY291bnQgPSBjb3VudCArICggdGhpcy5yZWFkKCB4ICsgMSwgeSApID09IDAgPyAxIDogMCApO1xyXG4gICAgICAgICAgICBjb3VudCA9IGNvdW50ICsgKCB0aGlzLnJlYWQoIHgsIHkgLSAxICkgPT0gMCA/IDEgOiAwICk7XHJcbiAgICAgICAgICAgIGNvdW50ID0gY291bnQgKyAoIHRoaXMucmVhZCggeCwgeSArIDEgKSA9PSAwID8gMSA6IDAgKTtcclxuICAgICAgICAgICAgZGlzdCA9IGRpc3QgKyBNYXRoLnBvdyggY291bnQsIDQgKTtcclxuICAgICAgICAgICAgbGV0IG5ld05vZGUgPSBbIGRpc3QsIHgsIHkgXTtcclxuXHJcbiAgICAgICAgICAgIHBhdGhbeCArIFwiLFwiICsgeV0gPSBuZXdOb2RlO1xyXG4gICAgICAgICAgICB0LnB1c2goIFtkaXN0ICsgMSwgeCAtIDEsIHldICk7XHJcbiAgICAgICAgICAgIHQucHVzaCggW2Rpc3QgKyAxLCB4ICsgMSwgeV0gKTtcclxuICAgICAgICAgICAgdC5wdXNoKCBbZGlzdCArIDEsIHgsIHkgLSAxXSApO1xyXG4gICAgICAgICAgICB0LnB1c2goIFtkaXN0ICsgMSwgeCwgeSArIDFdICk7XHJcbiAgICAgICAgfTtcclxuXHRcdFxyXG4gICAgICAgIGxldCByZXN1bHQ7XHJcbiAgICAgICAgbGV0IHQxO1xyXG5cclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIHQxID0gdDtcclxuICAgICAgICAgICAgdCA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKCBsZXQgaSBpbiB0MSApIHtcclxuICAgICAgICAgICAgICAgIGxldCBbZGlzdCx4LHldID0gdDFbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgY2hlY2tTdXJyb3VuZGluZyggZGlzdCwgeCwgeSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSB3aGlsZSAoIHQxLmxlbmd0aCAhPSAwICk7XHJcbiAgICAgICAgbGV0IGludE1hcDAgPSBbXTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRSZWFkV3JpdGUoIGludE1hcDAsaW50TWFwMCApO1xyXG4gICAgICAgIHRoaXMuY2xlYXIoIDAgKTtcclxuICAgICAgICBmb3IgKCBsZXQgayBpbiBwYXRoICkge1xyXG4gICAgICAgICAgICBsZXQgW2QsIHgsIHldID0gcGF0aFtrXTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZHJhdyggeCx5LGQgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGludE1hcCA9IHRoaXMuY2xvbmVNYXAoIGludE1hcDAgKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRSZWFkV3JpdGUoIGludE1hcDAsaW50TWFwICk7XHJcbiAgICAgICAgbGV0IG1heFNjb3JlID0gMDtcclxuXHJcbiAgICAgICAgZm9yICggbGV0IGsgaW4gcGF0aCApIHtcclxuICAgICAgICAgICAgbGV0IFssIHgsIHldID0gcGF0aFtrXTtcclxuXHJcbiAgICAgICAgICAgIGlmICggdGhpcy5yZWFkKCB4LHkgKSA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY291bnQgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvdW50ID0gY291bnQgKyAoIHRoaXMucmVhZCggeCAtIDEseSApICE9IDAgJiYgMSB8fCAwICk7XHJcbiAgICAgICAgICAgICAgICBjb3VudCA9IGNvdW50ICsgKCB0aGlzLnJlYWQoIHggKyAxLHkgKSAhPSAwICYmIDEgfHwgMCApO1xyXG4gICAgICAgICAgICAgICAgY291bnQgPSBjb3VudCArICggdGhpcy5yZWFkKCB4LHkgLSAxICkgIT0gMCAmJiAxIHx8IDAgKTtcclxuICAgICAgICAgICAgICAgIGNvdW50ID0gY291bnQgKyAoIHRoaXMucmVhZCggeCx5ICsgMSApICE9IDAgJiYgMSB8fCAwICk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdmFsID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIHZhbCA9IHZhbCArIHRoaXMucmVhZCggeCAtIDEseSApO1xyXG4gICAgICAgICAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICB2YWwgPSB2YWwgKyB0aGlzLnJlYWQoIHggKyAxLCB5ICk7XHJcbiAgICAgICAgICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIHZhbCA9IHZhbCArIHRoaXMucmVhZCggeCwgeSAtIDEgKTtcclxuICAgICAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgdmFsID0gdmFsICsgdGhpcy5yZWFkKCB4LCB5ICsgMSApO1xyXG4gICAgICAgICAgICAgICAgbGV0IGF2ZXJhZ2UgPSB2YWwgLyBjb3VudDtcclxuICAgICAgICAgICAgICAgIC8v7KO867OA7J2YIOuyveyImFxyXG4gICAgICAgICAgICAgICAgLy/rsr3snbQg66eO7Jy866m0IOqwgOyCsOygkFxyXG4gICAgICAgICAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICBsZXQgc2NvcmUgPSBNYXRoLm1heCggMCwgdGhpcy5yZWFkKCB4LCB5LCBpbnRNYXAgKSAqIDIgLSBhdmVyYWdlICk7XHJcblxyXG4gICAgICAgICAgICAgICAgbWF4U2NvcmUgPSBNYXRoLm1heCggbWF4U2NvcmUsc2NvcmUgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhdyggeCx5LHNjb3JlICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRSZWFkV3JpdGUoIGludE1hcCxpbnRNYXAgKTtcclxuICAgICAgICBmb3IgKCBsZXQgayBpbiBwYXRoICkge1xyXG4gICAgICAgICAgICBsZXQgdiA9IHBhdGhba107XHJcbiAgICAgICAgICAgIGxldCBbICx4LHldID0gdjtcclxuICAgICAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGxldCBzY29yZSA9IHRoaXMucmVhZCggeCwgeSApIC8gbWF4U2NvcmU7XHJcblxyXG4gICAgICAgICAgICB2WzBdID0gc2NvcmU7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhdyggeCx5LFN0cmluZy5mcm9tQ2hhckNvZGUoIDY1ICsgc2NvcmUgKiAyNSApICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOyKpOy9lOyWtOqwgCDrhpLsnYAg7Iic7ISc66GcIOygleugrFxyXG4gICAgICAgIGxldCBzY29yZUxpc3QgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yICggbGV0IGsgaW4gcGF0aCApIHtcclxuICAgICAgICAgICAgbGV0IHYgPSBwYXRoW2tdO1xyXG4gICAgICAgICAgICBsZXQgWywgeCwgeV0gPSB2O1xyXG4gICAgICAgICAgICBsZXQgYyA9IHRoaXMucmVhZCggeCx5LHRoaXMubWFwICk7XHJcblxyXG4gICAgICAgICAgICAvL0B0cy1pZ25vcmVcclxuICAgICAgICAgICAgaWYgKCBcIkRFPjxGWUkqXCIuaW5kZXhPZiggYyApIDwgMCApIHtcclxuICAgICAgICAgICAgICAgIHNjb3JlTGlzdC5wdXNoKCB2ICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblx0XHRcclxuICAgICAgICBzY29yZUxpc3Quc29ydCggKCBhLCBiICkgPT4gYlswXSAtIGFbMF0gKTtcclxuICAgICAgICAvLyDtlIzroIjsnbTslrTsmYAg7Y6r7J20IOqzhOuLqOydhCDrgrTroKTqsIgg7JyE7LmY66W8IO2ZleuztO2VmOq4sCDsnITtlbTshJwg65Kk7JeQ7IScIDXqsJzrpbwg7J6Y652864K464ukLlxyXG4gICAgICAgIHNjb3JlTGlzdC5sZW5ndGggLT0gUGV0Lm1heFBldDtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRSZWFkV3JpdGUoKTtcclxuICAgICAgICB0aGlzLnNjb3JlTGlzdCA9IHNjb3JlTGlzdDtcclxuICAgICAgICB0aGlzLmdldE1hcFN0cmluZyggaW50TWFwICk7XHJcblxyXG4gICAgICAgIHJldHVybiBpbnRNYXA7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbnVtXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZW5kUmF0ZVxyXG4gICAgICogQHJldHVybnMge1tudW1iZXIsbnVtYmVyLG51bWJlcl1bXX1cclxuICAgICAqIEBtZW1iZXJvZiBQcm9jZWR1cmFsTWFwXHJcbiAgICAgKi9cclxuICAgIHBpY2tFdmVudHMoIG51bSxlbmRSYXRlICkge1xyXG4gICAgICAgIGNvbnN0IHBvb2wgPSB0aGlzLnNjb3JlTGlzdC5zbGljZSgpO1xyXG4gICAgICAgIC8qKiBAdHlwZSB7W251bWJlcixudW1iZXIsbnVtYmVyXVtdfSAqL1xyXG4gICAgICAgIGNvbnN0IGV2ZW50cyA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBudW07IGkrKyApIHtcclxuICAgICAgICAgICAgY29uc29sZS5hc3NlcnQoIHBvb2wubGVuZ3RoID4gMCApO1xyXG4gICAgICAgICAgICBsZXQgcGlja2VkID0gdGhpcy5yYW5kb20ucmFuZG9tKCAwLHBvb2wubGVuZ3RoIC0gMSApO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5hc3NlcnQoIHBpY2tlZCA+PSAwICk7XHJcbiAgICAgICAgICAgIGZvciAoIGxldCBqID0gMDsgaiA8IGVuZFJhdGU7IGorKyApIHtcclxuICAgICAgICAgICAgICAgIHBpY2tlZCA9IHRoaXMucmFuZG9tLnJhbmRvbSggMCwgcGlja2VkICk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmFzc2VydCggcGlja2VkID49IDAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBldmVudHMucHVzaCggW3Bvb2xbcGlja2VkXVswXSwgcG9vbFtwaWNrZWRdWzFdLCBwb29sW3BpY2tlZF1bMl1dICk7XHJcbiAgICAgICAgICAgIGlmICggcG9vbC5sZW5ndGggPiAxICkge1xyXG4gICAgICAgICAgICAgICAgcG9vbC5zcGxpY2UoIHBpY2tlZCwxICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBldmVudHM7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG51bU1pblxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG51bU1heFxyXG4gICAgICogQHJldHVybnMge1tudW1iZXIsbnVtYmVyLG51bWJlcixudW1iZXJdW119XHJcbiAgICAgKiBAbWVtYmVyb2YgUHJvY2VkdXJhbE1hcFxyXG4gICAgICovXHJcbiAgICBtYWtlUm9vbXMoIG51bU1pbixudW1NYXggKSB7XHJcbiAgICAgICAgLy8gQlNQIOuwqeyLneycvOuhnCDqs7XqsITsnYQg7Kq86rCg64ukXHJcbiAgICAgICAgbGV0IHQgPSBbXTtcclxuXHJcbiAgICAgICAgbGV0IGRpdmlkZSA9ICggZGlyLCB4LCB5LCB3LCBoICkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIGggPCA4ICkge1xyXG4gICAgICAgICAgICAgICAgZGlyID0gMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIHcgPCA4ICkge1xyXG4gICAgICAgICAgICAgICAgZGlyID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIGRpciA9PSAxICYmIGggPiA0ICYmICEoIGggPCAxNSAmJiB0aGlzLnJhbmRvbS5yYW5kb20oIDEsMiApID09IDEgKSApIHtcclxuICAgICAgICAgICAgICAgIGxldCBoMiA9IHRoaXMucmFuZG9tLnJhbmRvbSggMiwgaCAtIDIgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkaXZpZGUoIDMgLSBkaXIsIHgsIHksIHcsIGgyICk7XHJcbiAgICAgICAgICAgICAgICBkaXZpZGUoIDMgLSBkaXIsIHgsIHkgKyBoMiwgdywgaCAtIGgyICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIGRpciA9PSAyICYmIHcgPiA0ICYmICEoIHcgPCAxNSAmJiB0aGlzLnJhbmRvbS5yYW5kb20oIDEsMiApID09IDEgKSApIHtcclxuICAgICAgICAgICAgICAgIGxldCB3MiA9IHRoaXMucmFuZG9tLnJhbmRvbSggMiwgdyAtIDIgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkaXZpZGUoIDMgLSBkaXIsIHgsIHksIHcyLCBoICk7XHJcbiAgICAgICAgICAgICAgICBkaXZpZGUoIDMgLSBkaXIsIHggKyB3MiwgeSwgdyAtIHcyLCBoICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmFzc2VydCggYGRpcuydtCAxLDLqsIAg7JWE64uYYCApO1xyXG4gICAgICAgICAgICAgICAgdC5wdXNoKCBbeCwgeSwgdywgaF0gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGRpdmlkZSggdGhpcy5yYW5kb20ucmFuZG9tKCAxLDIgKSwzLDMsdGhpcy53aWR0aCAtIDUsdGhpcy5oZWlnaHQgLSA1ICk7XHJcbiAgICAgICAgdGhpcy5zZXRSZWFkV3JpdGUoIHRoaXMubG9ja01hcCApO1xyXG4gICAgICAgIGZvciAoIGxldCBpIGluIHQgKSB7XHJcbiAgICAgICAgICAgIGxldCB2ID0gdFtpXTtcclxuICAgICAgICAgICAgbGV0IFt4LHksdyxoXSA9IHY7XHJcblxyXG4gICAgICAgICAgICBpZiAoIHcgPiAzICYmIGggPiAzICkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHgxLHkxLHgyLHkyO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggdGhpcy5yYW5kb20ucmFuZG9tKCAxLDQgKSA9PSAxICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHgxID0gdGhpcy5yYW5kb20ucmFuZG9tKCB4ICsgMSx4ICsgdyAtIDEgLSAyICk7XHJcbiAgICAgICAgICAgICAgICAgICAgeTEgPSB0aGlzLnJhbmRvbS5yYW5kb20oIHkgKyAxLHkgKyBoIC0gMSAtIDIgKTtcclxuICAgICAgICAgICAgICAgICAgICB4MiA9IHRoaXMucmFuZG9tLnJhbmRvbSggeDEgKyAyLHggKyB3IC0gMSApO1xyXG4gICAgICAgICAgICAgICAgICAgIHkyID0gdGhpcy5yYW5kb20ucmFuZG9tKCB5MSArIDIseSArIGggLSAxICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIFt4MSx5MSx4Mix5Ml0gPSBbeCArIDEseSArIDEseCArIHcgLSAxLHkgKyBoIC0gMV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyDsu6TsiqTthYAg67iU66Gd7Jy866GcIOudveuQmOyXiOycvOuptCDslYTrrLQg7LKY66as7ZWY7KeAIOyViuqzoCDrhJjslrTqsITri6RcclxuICAgICAgICAgICAgICAgIGlmICggdGhpcy5jaGVja0JveCggeDEgLSAxLHkxIC0gMSx4MiArIDEseTIgKyAxICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdFtpXSA9IG51bGw7IC8vIOydtCDruJTroZ3snYAg66q77JOw64qUIOu4lOuhneydtOuLpC5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdFtpXSA9IFt4MSwgeTEsIHgyLCB5Ml07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0W2ldID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldFJlYWRXcml0ZSgpO1xyXG4gICAgICAgIC8vIOuwqSDqt7jrpqzquLBcclxuICAgICAgICBsZXQgcm9vbXMgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yICggbGV0IGsgaW4gdCApIHtcclxuICAgICAgICAgICAgbGV0IHYgPSB0W2tdO1xyXG5cclxuICAgICAgICAgICAgaWYgKCB2ICkge1xyXG4gICAgICAgICAgICAgICAgcm9vbXMucHVzaCggdiApO1xyXG4gICAgICAgICAgICAgICAgbGV0IFt4MSx5MSx4Mix5Ml0gPSB2O1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0UmVhZFdyaXRlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdCb3goIHgxIC0gMSx5MSAtIDEseDIgKyAxLHkyICsgMSxcIk1cIiApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3Qm94KCB4MSx5MSx4Mix5MixcIiBcIiApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSZWFkV3JpdGUoIHRoaXMubG9ja01hcCx0aGlzLmxvY2tNYXAgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0JveCggeDEgLSAxLHkxIC0gMSx4MiArIDEseTIgKyAxLDIgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0JveCggeDEseTEseDIseTIsMSApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSZWFkV3JpdGUoKTtcclxuICAgICAgICAgICAgICAgIGxldCBkb29ycyA9IFsxLCAyLCAzLCA0XTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDrrLjsnYQg66qH6rCcIOy2lOqwgFxyXG4gICAgICAgICAgICAgICAgZm9yICggbGV0IGkgPSAxOyBpIDw9IHRoaXMucmFuZG9tLnJhbmRvbSggMCwzICk7IGkrKyApIHtcclxuICAgICAgICAgICAgICAgICAgICBkb29ycy5wdXNoKCB0aGlzLnJhbmRvbS5yYW5kb20oIDEsNCApICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmb3IgKCBsZXQgaSBpbiBkb29ycyApIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdiA9IGRvb3JzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkb29yRGlyID0gdjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBkb29yRGlyID09IDEgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB4ID0gdGhpcy5yYW5kb20ucmFuZG9tKCB4MSx4MiApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLnJlYWQoIHggLSAxLHkxIC0gMSApICE9IFwiRFwiICYmIHRoaXMucmVhZCggeCArIDEseTEgLSAxICkgIT0gXCJEXCIgJiYgdGhpcy5yZWFkKCB4LHkxIC0gMiApICE9IFwiTVwiICkgeyAvL+usuOydtCDrsJTroZwg7J207JuD7ZW07J6I7Jy866m0IOuzhOuhnFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3KCB4LHkxIC0gMSxcIkRcIiApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3KCB4LHkxIC0gMixcIiBcIiApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICAoIGRvb3JEaXIgPT0gMiApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHkgPSB0aGlzLnJhbmRvbS5yYW5kb20oIHkxLHkyICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaXMucmVhZCggeDIgKyAxLHkgLSAxICkgIT0gXCJEXCIgJiYgdGhpcy5yZWFkKCB4MiArIDEseSArIDEgKSAhPSBcIkRcIiAmJiB0aGlzLnJlYWQoIHgyICsgMix5ICkgIT0gXCJNXCIgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoIHgyICsgMSx5LFwiRFwiICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoIHgyICsgMix5LFwiIFwiICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgICggZG9vckRpciA9PSAzICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgeCA9IHRoaXMucmFuZG9tLnJhbmRvbSggeDEseDIgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5yZWFkKCB4IC0gMSx5MiArIDEgKSAhPSBcIkRcIiAmJiB0aGlzLnJlYWQoIHggKyAxLHkyICsgMSApICE9IFwiRFwiICYmIHRoaXMucmVhZCggeCx5MiArIDIgKSAhPSBcIk1cIiApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdyggeCx5MiArIDEsXCJEXCIgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdyggeCx5MiArIDIsXCIgXCIgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAgKCBkb29yRGlyID09IDQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB5ID0gdGhpcy5yYW5kb20ucmFuZG9tKCB5MSx5MiApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLnJlYWQoIHgxIC0gMSx5IC0gMSApICE9IFwiRFwiICYmIHRoaXMucmVhZCggeDEgLSAxLHkgKyAxICkgIT0gXCJEXCIgJiYgdGhpcy5yZWFkKCB4MSAtIDIseSApICE9IFwiTVwiICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3KCB4MSAtIDEseSxcIkRcIiApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3KCB4MSAtIDIseSxcIiBcIiApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDsnbQg64uo6rOE7JeQ7ISc64qUIOyEue2EsOyXsOqysOydtCDslYjrkKAg7IiYIOyeiOuLpC5cclxuICAgICAgICAvLyDrsKnsnbQg7Jq07J20IOuCmOyBmOqyjCBP7J6QIO2Yle2DnOuhnCDsl7DqsrDrkJjqsbDrgpgg7ZWY66m0IOusuOygnOqwgCDrkKhcclxuICAgICAgICByZXR1cm4gcm9vbXM7IC8vIOuNsOy9lOugiOydtOyFmOydhCDsnITtlbTshJwg64SY6ri064ukLiBcclxuICAgIH1cclxuXHJcblxyXG4gICAgZXJhc2VUaW55SGFsbEFuZERvb3IoKSB7XHJcbiAgICAgICAgZm9yICggbGV0IHkgPSAwOyB5IDwgdGhpcy5oZWlnaHQ7IHkrKyApIHtcclxuICAgICAgICAgICAgZm9yICggbGV0IHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLnJlYWQoIHgseSApID09IFwiIFwiICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb3VudCA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ID0gY291bnQgKyAoIHRoaXMuaXNTcGFjZSggeCAtIDEseSAgKSA/IDAgOiAxICk7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQgPSBjb3VudCArICggdGhpcy5pc1NwYWNlKCB4ICAseSAtIDEgKSA/IDAgOiAxICk7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQgPSBjb3VudCArICggdGhpcy5pc1NwYWNlKCB4ICsgMSx5ICApID8gMCA6IDEgKTtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudCA9IGNvdW50ICsgKCB0aGlzLmlzU3BhY2UoIHggICx5ICsgMSApID8gMCA6IDEgKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNvdW50ID09IDMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5yZWFkKCB4IC0gMSx5ICkgPT0gXCJEXCIgfHwgdGhpcy5yZWFkKCB4ICsgMSx5ICkgPT0gXCJEXCIgfHwgdGhpcy5yZWFkKCB4LHkgLSAxICkgPT0gXCJEXCIgfHwgdGhpcy5yZWFkKCB4LHkgKyAxICkgPT0gXCJEXCIgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLzPrqbTsnbQg67K97J206rOgIOuCmOuouOyngOqwgCDrrLjsnbTrqbQg66eJ7JWE7JW87ZWc64ukLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3KCB4LHksXCJXXCIgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKCBsZXQgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrICkge1xyXG4gICAgICAgICAgICBmb3IgKCBsZXQgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4KysgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMucmVhZCggeCx5ICkgPT0gXCJEXCIgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvdW50ID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQgPSBjb3VudCArICggdGhpcy5pc1NwYWNlKCB4IC0gMSx5ICApID8gMCA6IDEgKTtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudCA9IGNvdW50ICsgKCB0aGlzLmlzU3BhY2UoIHggICx5IC0gMSApID8gMCA6IDEgKTtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudCA9IGNvdW50ICsgKCB0aGlzLmlzU3BhY2UoIHggKyAxLHkgICkgPyAwIDogMSApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ID0gY291bnQgKyAoIHRoaXMuaXNTcGFjZSggeCAgLHkgKyAxICkgPyAwIDogMSApO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggY291bnQgPT0gMyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3KCB4LHksXCJNXCIgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5LjxudW1iZXIsbnVtYmVyPltdfSBwb3NcclxuICAgICAqIEBtZW1iZXJvZiBQcm9jZWR1cmFsTWFwXHJcbiAgICAgKi9cclxuICAgIG1ha2VVcFN0YWlyKCBwb3MgKSB7XHJcbiAgICAgICAgbGV0IHgseTtcclxuXHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICBbeCwgeV0gPSBwb3NbdGhpcy5yYW5kb20ucmFuZG9tKCAwLHBvcy5sZW5ndGggLSAxICldO1xyXG4gICAgICAgIH0gd2hpbGUgKCB0aGlzLnJlYWQoIHgsIHkgKSA9PSBcIkRcIiApOyAvLyDrrLjsl5DripQg67Cw7LmY7ZWY66m0IOyViOuPvFxyXG4gICAgICAgIHRoaXMuZHJhdyggeCx5LFwiPFwiICk7XHJcbiAgICAgICAgW3RoaXMuc3RhcnRYLHRoaXMuc3RhcnRZXSA9IFt4LHldO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7QXJyYXkuPG51bWJlcixudW1iZXI+fVxyXG4gICAgICogQG1lbWJlcm9mIFByb2NlZHVyYWxNYXBcclxuICAgICAqL1xyXG4gICAgbWFrZURvd25TdGFpcigpIHtcclxuICAgICAgICAvLyDrgrTroKTqsIDripQg6rOE64uo7J2AIOyLnOyekeygkOyXkOyEnCDrqLwg6rOz7JeQIOuwsOy5mO2VmOqzoCDtnaXrr7jroZzsmrQg7KeA7KCQ7JeQIOuGlOyVvO2VnOuLpC5cclxuICAgICAgICBsZXQgcmFuZ2UgPSAxLjA7XHJcbiAgICAgICAgbGV0IHNjb3JlLHgseTtcclxuICAgICAgICBsZXQgaXNWYWxpZDtcclxuXHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICByYW5nZSA9IHJhbmdlIC0gMC4xO1xyXG4gICAgICAgICAgICBsZXQgZXZlbnRzID0gdGhpcy5waWNrRXZlbnRzKCAxLCByYW5nZSApO1xyXG5cclxuICAgICAgICAgICAgW3Njb3JlLCB4LCB5XSA9IGV2ZW50c1swXTtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLnJlYWQoIHgsIHkgKSAhPSBcIkRcIiApIHtcclxuICAgICAgICAgICAgICAgIGlmICggdGhpcy5pc1NwYWNlKCB4IC0gMSwgeSApICYmIHRoaXMucmVhZCggeCAtIDEsIHkgKSAhPSBcIkRcIiApIHtcclxuICAgICAgICAgICAgICAgICAgICBpc1ZhbGlkID0gLTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMuaXNTcGFjZSggeCArIDEsIHkgKSAmJiB0aGlzLnJlYWQoIHggKyAxLCB5ICkgIT0gXCJEXCIgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNWYWxpZCA9IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IHdoaWxlICggIWlzVmFsaWQgKTtcclxuICAgICAgICB0aGlzLmRyYXcoIHgseSxcIj5cIiApO1xyXG4gICAgICAgIHRoaXMuZHJhdyggeCArIGlzVmFsaWQseSxcIj5cIiApO1xyXG4gICAgICAgIHRoaXMuZW5kWCA9IE1hdGgubWluKCB4LHggKyBpc1ZhbGlkICk7XHJcbiAgICAgICAgdGhpcy5lbmRZID0geTtcclxuXHJcbiAgICAgICAgcmV0dXJuIFt0aGlzLmVuZFgsdGhpcy5lbmRZXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtbbnVtYmVyLG51bWJlcixudW1iZXIsbnVtYmVyXVtdfSByb29tc1xyXG4gICAgICogQG1lbWJlcm9mIFByb2NlZHVyYWxNYXBcclxuICAgICAqL1xyXG4gICAgZGVjb1Jvb21zKCByb29tcyApIHtcclxuICAgICAgICBmb3IgKCBsZXQgaSBpbiByb29tcyApIHtcclxuICAgICAgICAgICAgbGV0IHYgPSByb29tc1tpXTtcclxuICAgICAgICAgICAgbGV0IFt4MSx5MSx4Mix5Ml0gPSB2O1xyXG4gICAgICAgICAgICBsZXQgdyA9IHgyIC0geDEgKyAxO1xyXG4gICAgICAgICAgICBsZXQgaCA9IHkyIC0geTEgKyAxO1xyXG5cclxuICAgICAgICAgICAgLy8g6riw65GlIOuwleq4sFxyXG4gICAgICAgICAgICBpZiAoIHRoaXMucmFuZG9tLnJhbmRvbSggMSw0ICkgPD0gMSArIHcgKiBoIC8gNjAgKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGlsbGFyQ29sID0gMDtcclxuICAgICAgICAgICAgICAgIGxldCBwaWxsYXJSb3cgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggdyA+PSA1ICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBpbGxhckNvbCA9IDEgKyAoIHcgPiA1ICYmIDEgfHwgMCApICsgKCAoIHcgKSAlIDIgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICggaCA+PSA1ICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBpbGxhclJvdyA9IDEgKyAoIGggPiA1ICYmIDEgfHwgMCApICsgKCAoIGggKSAlIDIgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCBwaWxsYXJPZmZzZXRYID0gMDsvL3RoaXMucmFuZG9tLnJhbmRvbSgwLCh3LTEpJTIpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBpbGxhck9mZnNldFkgPSAwOy8vdGhpcy5yYW5kb20ucmFuZG9tKDAsKGgtMSklMik7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICggbGV0IHkgPSAxOyB5IDw9IHBpbGxhclJvdzsgeSsrICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIGxldCB4ID0gMTsgeCA8PSBwaWxsYXJDb2w7IHgrKyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiAodGhpcy5yYW5kb20ucmFuZG9tKDUrTWF0aC5mbG9vcih3KmgvNTApKT09MSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgeHggPSBwaWxsYXJPZmZzZXRYICsgeDEgKyBNYXRoLmZsb29yKCAoIHggLSAxICkgKiAoIHcgLSAyICkgLyAoIHBpbGxhckNvbCAtIDAuOTk5ICkgKSArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB5eSA9IHBpbGxhck9mZnNldFkgKyB5MSArIE1hdGguZmxvb3IoICggeSAtIDEgKSAqICggaCAtIDIgKSAvICggcGlsbGFyUm93IC0gMC45OTkgKSApICsgMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5yZWFkKCB4eCx5eSApID09IFwiIFwiICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3KCB4eCx5eSxcIlVcIiApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL+yhsOuqheuwleq4sFxyXG4gICAgICAgICAgICBsZXQgbnVtT2ZUb3JjaCA9IE1hdGgubWF4KCAwLHRoaXMucmFuZG9tLnJhbmRvbSggMSwzICsgTWF0aC5mbG9vciggdyAqIGggLyAzMCApICkgLSAyICk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKCBsZXQgaSA9IDE7IGkgPD0gbnVtT2ZUb3JjaDsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHh4LHl5O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggdGhpcy5yYW5kb20ucmFuZG9tKCAxLDQgKSA9PSAxICkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOuwqSDqsIDsmrTrjbAgXHJcbiAgICAgICAgICAgICAgICAgICAgeHggPSB0aGlzLnJhbmRvbS5yYW5kb20oIHgxLHgyICk7XHJcbiAgICAgICAgICAgICAgICAgICAgeXkgPSB0aGlzLnJhbmRvbS5yYW5kb20oIHkxLHkyICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOuyveyqveyXkFxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkaXIgPSB0aGlzLnJhbmRvbS5yYW5kb20oIDEsNCApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGRpciA9PSAxICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4eCA9IHRoaXMucmFuZG9tLnJhbmRvbSggeDEseDIgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeXkgPSB5MTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgICggZGlyID09IDIgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHh4ID0geDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHl5ID0gdGhpcy5yYW5kb20ucmFuZG9tKCB5MSx5MiApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAgKCBkaXIgPT0gMyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeHggPSB0aGlzLnJhbmRvbS5yYW5kb20oIHgxLHgyICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHl5ID0geTI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICAoIGRpciA9PSA0ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4eCA9IHgxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5eSA9IHRoaXMucmFuZG9tLnJhbmRvbSggeTEseTIgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMucmVhZCggeHgseXkgKSA9PSBcIiBcIiApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcoIHh4LHl5LFwiSVwiICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8g67CU64ul7YOA7J286rmU6riwXHJcbiAgICAgICAgICAgIGxldCB0aWxlcyA9IFwiWlpaWlo6Ojo6Ojo6KysrKyt8fC4uLi4uLi4uLCwse1wiO1xyXG4gICAgICAgICAgICBsZXQgbnVtT2ZUaWxlcyA9IE1hdGgubWF4KCAxLHRoaXMucmFuZG9tLnJhbmRvbSggMSw2ICkgLSAzICk7XHJcbiAgICAgICAgICAgIGxldCBwaWNrZWRUaWxlcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgZm9yICggbGV0IGkgPSAxOyBpIDw9IG51bU9mVGlsZXM7IGkrKyApIHtcclxuICAgICAgICAgICAgICAgIGxldCBpMiA9IHRoaXMucmFuZG9tLnJhbmRvbSggMCx0aWxlcy5sZW5ndGggLSAxICk7XHJcblxyXG4gICAgICAgICAgICAgICAgcGlja2VkVGlsZXMucHVzaCggdGlsZXMuc3Vic3RyKCBpMiwxICkgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKCBsZXQgeXkgPSB5MTsgeXkgPD0geTI7IHl5KysgKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKCBsZXQgeHggPSB4MTsgeHggPD0geDI7IHh4KysgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLnJlYWQoIHh4LHl5ICkgPT0gXCIgXCIgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdyggeHgseXkscGlja2VkVGlsZXNbdGhpcy5yYW5kb20ucmFuZG9tKCAwLG51bU9mVGlsZXMgLSAxICldICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlRG9vcnMoKSB7XHJcbiAgICAgICAgZm9yICggbGV0IHkgPSAwOyB5IDwgdGhpcy5oZWlnaHQ7IHkrKyApIHtcclxuICAgICAgICAgICAgZm9yICggbGV0IHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLnJlYWQoIHgseSApID09IFwiRFwiICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdyggeCx5LFwiRVwiICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8g7IOd7ISxXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge0FycmF5LjxudW1iZXIsbnVtYmVyPn1cclxuICAgICAqIEBtZW1iZXJvZiBQcm9jZWR1cmFsTWFwXHJcbiAgICAgKi9cclxuICAgIGdlbmVyYXRlQ2F2ZSgpIHtcclxuICAgICAgICB0aGlzLmNsZWFyKCBcIiBcIiApO1xyXG4gICAgICAgIGxldCBbdyxoXSA9IFt0aGlzLndpZHRoLHRoaXMuaGVpZ2h0XTtcclxuICAgICAgICBsZXQgd2FsbFJhdGUgPSB0aGlzLnJhbmRvbS5yYW5kb20oIDMwLDQwICk7XHJcbiAgICAgICAgbGV0IGJpcnRoTGltaXQgPSA0O1xyXG4gICAgICAgIGxldCBkZWF0aExpbWl0ID0gdGhpcy5yYW5kb20ucmFuZG9tKCAyLDMgKTtcclxuICAgICAgICBsZXQgbnVtT2ZHZW5lcmF0aW9uID0gdGhpcy5yYW5kb20ucmFuZG9tKCAzLDUgKTtcclxuXHJcbiAgICAgICAgZm9yICggbGV0IHkgPSAwOyB5IDwgaDsgeSsrICkge1xyXG4gICAgICAgICAgICBmb3IgKCBsZXQgeCA9IDA7IHggPCB3OyB4KysgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMucmFuZG9tLnJhbmRvbSggMSwxMDAgKSA8IHdhbGxSYXRlICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdyggeCx5LFwiV1wiICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICggbGV0IGkgPSAxOyBpIDw9IG51bU9mR2VuZXJhdGlvbjsgaSsrICkge1xyXG4gICAgICAgICAgICBsZXQgbmV3TWFwID0gdGhpcy5jbG9uZU1hcCggdGhpcy5tYXAgKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0UmVhZFdyaXRlKCBuZXdNYXAgKTtcclxuICAgICAgICAgICAgZm9yICggbGV0IHkgPSAwOyB5IDwgaDsgeSsrICkge1xyXG4gICAgICAgICAgICAgICAgZm9yICggbGV0IHggPSAwOyB4IDwgdzsgeCsrICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb3VudCA9IHRoaXMuY291bnRTdXJyb3VuZGVkQmxvY2soIHgseSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNvdW50IDw9IGRlYXRoTGltaXQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdyggeCx5LFwiIFwiICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICAoIGNvdW50ID49IGJpcnRoTGltaXQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdyggeCx5LFwiV1wiICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0UmVhZFdyaXRlKCk7XHJcbiAgICAgICAgLy/rqqjshJzrpqwg66eJ6riwXHJcbiAgICAgICAgZm9yICggbGV0IHkgPSAwOyB5IDwgaDsgeSsrICkge1xyXG4gICAgICAgICAgICB0aGlzLmRyYXcoIDAseSxcIldcIiApO1xyXG4gICAgICAgICAgICB0aGlzLmRyYXcoIHcgLSAxLHksXCJXXCIgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICggbGV0IHggPSAwOyB4IDwgdzsgeCsrICkge1xyXG4gICAgICAgICAgICB0aGlzLmRyYXcoIHgsMCxcIldcIiApO1xyXG4gICAgICAgICAgICB0aGlzLmRyYXcoIHgsaCAtIDEsXCJXXCIgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g7Jqp7JWU6rO8IOusvFxyXG4gICAgICAgIC8vIOyngO2VmOuhnCDqsIjsiJjroZ0g7Jqp7JWUXHJcbiAgICAgICAgbGV0IG51bU9mUml2ZXIgPSB0aGlzLnJhbmRvbS5yYW5kb20oIDAsdGhpcy5mbG9vciA8IHRoaXMucmFuZG9tLnJhbmRvbSggMSwxMCApICYmIDIgfHwgMCApO1xyXG4gICAgICAgIGxldCBudW1PZkxhdmEgPSBNYXRoLm1heCggMCx0aGlzLmZsb29yID4gdGhpcy5yYW5kb20ucmFuZG9tKCA1LDEwICkgJiYgMiB8fCAwICk7XHJcblxyXG4gICAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IG51bU9mUml2ZXI7IGkrKyApIHtcclxuICAgICAgICAgICAgdGhpcy5tYWtlUml2ZXIoIFwiflwiICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IG51bU9mTGF2YTsgaSsrICkge1xyXG4gICAgICAgICAgICB0aGlzLm1ha2VSaXZlciggXCIlXCIgKTtcclxuICAgICAgICB9XHJcblx0XHRcclxuICAgICAgICAvLyDtmoPrtohcclxuICAgICAgICAvLyDsp4DtlZjroZwg6rCI7IiY66GdIOu2iOydtCDsoIHri6RcclxuICAgICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBNYXRoLmZsb29yKCB3ICogaCAvICggNTAgKiAoIDEgKyB0aGlzLmZsb29yIC8gMTAgKSApICk7IGkrKyApIHtcclxuICAgICAgICAgICAgbGV0IFt4LHldID0gW3RoaXMucmFuZG9tLnJhbmRvbSggMCx3IC0gMSApLHRoaXMucmFuZG9tLnJhbmRvbSggMCxoIC0gMSApXTtcclxuXHJcbiAgICAgICAgICAgIGlmICggdGhpcy5yZWFkKCB4LHkgKSA9PSBcIiBcIiAmJiAoIHRoaXMucmVhZCggeCAtIDEseSApID09IFwiV1wiIHx8IHRoaXMucmVhZCggeCArIDEseSApID09IFwiV1wiICkgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXcoIHgseSxcIklcIiApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHRcdFxyXG4gICAgICAgIGxldCB0cnkxID0gMDtcclxuICAgICAgICBsZXQgcmVzdWx0O1xyXG5cclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIHRyeTEgPSB0cnkxICsgMTtcclxuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wbGFjZUN1c3RvbUJsb2NrcygpO1xyXG4gICAgICAgIH0gd2hpbGUgKCAhICggcmVzdWx0IHx8IHRyeTEgPiA1ICkgKTtcclxuICAgICAgICBpZiAoICFyZXN1bHQgKSB7XHJcbiAgICAgICAgICAgIC8v7Iuk7YyoXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb25uZWN0U2VjdG9ycygpO1xyXG4gICAgICAgIHRoaXMuZXJhc2VUaW55SGFsbEFuZERvb3IoKTtcclxuICAgICAgICB0aGlzLmRlY29GbG9vcigpO1xyXG4gICAgICAgIC8v7LWc7KKFIOqygOyCsFxyXG4gICAgICAgIGxldCBzZWN0b3JzID0gdGhpcy5jb3VudFNlY3RvcnMoKTtcclxuXHJcbiAgICAgICAgaWYgKCBzZWN0b3JzLmxlbmd0aCA+IDEgKSB7XHJcbiAgICAgICAgICAgIC8v7Iuk7YyoXHJcbiAgICAgICAgICAgIGNvbnNvbGUuYXNzZXJ0KCBmYWxzZSwgYOyEue2EsOqwgCDrp47ri6QuICR7c2VjdG9ycy5sZW5ndGh9YCApO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDruYjsubjspJEg7ZWY64KY7JeQ7IScIOyLnOyekeygkOydhCDqs6Drpbjri6RcclxuICAgICAgICB0aGlzLm1ha2VVcFN0YWlyKCBzZWN0b3JzWzBdLnBvcyApO1xyXG5cclxuICAgICAgICByZXR1cm4gc2VjdG9yc1swXS5wb3M7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7QXJyYXkuPG51bWJlcixudW1iZXI+fVxyXG4gICAgICogQG1lbWJlcm9mIFByb2NlZHVyYWxNYXBcclxuICAgICAqL1xyXG4gICAgZ2VuZXJhdGVEdW5nZW9uKCkge1xyXG4gICAgICAgIHRoaXMuY2xlYXIoIFwiV1wiICk7XHJcbiAgICAgICAgbGV0IFt3LGhdID0gW3RoaXMud2lkdGgsdGhpcy5oZWlnaHRdO1xyXG4gICAgICAgIGxldCB0cnkxID0gMDtcclxuICAgICAgICBsZXQgcmVzdWx0O1xyXG5cclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIHRyeTEgPSB0cnkxICsgMTtcclxuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wbGFjZUN1c3RvbUJsb2NrcygpO1xyXG4gICAgICAgIH0gd2hpbGUgKCAhKCByZXN1bHQgfHwgdHJ5MSA+IDUgKSApO1xyXG4gICAgICAgIGNvbnNvbGUuYXNzZXJ0KCByZXN1bHQsIFwi7Luk7Iqk7YWAIOu4lOuhneydhCDrsLDsuZjtlZjripQg6rO87KCV7JeQ7IScIOyLpO2MqFwiICk7XHJcbiAgICAgICAgbGV0IHJvb21zID0gdGhpcy5tYWtlUm9vbXMoIDEsMTAgKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb25uZWN0U2VjdG9ycygpO1xyXG4gICAgICAgIHRoaXMuZXJhc2VUaW55SGFsbEFuZERvb3IoKTtcclxuICAgICAgICB0aGlzLmRlY29Sb29tcyggcm9vbXMgKTtcclxuICAgICAgICB0aGlzLmRlY29GbG9vcigpO1xyXG4gICAgICAgIC8v7LWc7KKFIOqygOyCsFxyXG4gICAgICAgIGxldCBzZWN0b3JzID0gdGhpcy5jb3VudFNlY3RvcnMoKTtcclxuXHJcbiAgICAgICAgaWYgKCBzZWN0b3JzLmxlbmd0aCA+IDEgKSB7XHJcbiAgICAgICAgICAgIC8v7Iuk7YyoXHJcbiAgICAgICAgICAgIGxvZyggdGhpcy5nZXRNYXBTdHJpbmcoKSApO1xyXG4gICAgICAgICAgICBjb25zb2xlLmFzc2VydCggZmFsc2UsIGDshLnthLDqsIAg66eO64ukLiAke3NlY3RvcnMubGVuZ3RofWAgKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g67mI7Lm47KSRIO2VmOuCmOyXkOyEnCDsi5zsnpHsoJDsnYQg6rOg66W464ukXHJcbiAgICAgICAgdGhpcy5tYWtlVXBTdGFpciggc2VjdG9yc1swXS5wb3MgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlY3RvcnNbMF0ucG9zO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwbGFjZVByb3BzKCkge1xyXG4gICAgICAgIGZvciAoIGxldCBpIGluIHRoaXMuc2NvcmVMaXN0ICkge1xyXG4gICAgICAgICAgICBsZXQgdiA9IHRoaXMuc2NvcmVMaXN0W2ldO1xyXG4gICAgICAgICAgICBsZXQgW3Njb3JlLHgseV0gPSB2O1xyXG5cclxuICAgICAgICAgICAgaWYgKCB0aGlzLmNvdW50U3Vycm91bmRlZEJsb2NrKCB4LHkgKSA8IDYgJiYgdGhpcy5jb3VudFN1cnJvdW5kZWQoIHgseSxcIkRcIiApID09IDAgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMucmFuZG9tLnJhbmRvbSggMSxNYXRoLm1heCggMSwxMDAgLSBNYXRoLnBvdyggdGhpcy5jb3VudFN1cnJvdW5kZWQoIHgseSxcIk1cIiApICogMywyICkgKSApID09IDEgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRFbnRpdHkoIHgseSxcInByb3BcIixcIkBcIiApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLnJhbmRvbS5yYW5kb20oIDEsTWF0aC5tYXgoIDEsMTAwIC0gTWF0aC5wb3coIHRoaXMuY291bnRTdXJyb3VuZGVkKCB4LHksXCJXXCIgKSAqIDMsMiApICkgKSA9PSAxICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkRW50aXR5KCB4LHksXCJwcm9wXCIsXCImXCIgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICggdGhpcy5yYW5kb20ucmFuZG9tKCAxLE1hdGgubWF4KCAxLDEwMCAtIE1hdGgucG93KCB0aGlzLmNvdW50U3Vycm91bmRlZCggeCx5LFwiTVwiICkgKiAzLDIgKSApICkgPT0gMSApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEVudGl0eSggeCx5LFwicHJvcFwiLFwiI1wiICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHBsYWNlTW9uc3RlcnMoKSB7XHJcbiAgICAgICAgbGV0IHQgPSBNb25zdGVyLnBpY2tNb25zdGVycyggdGhpcy5hdHRyaWIgKTtcclxuXHJcbiAgICAgICAgbG9nKCBcIuuqrOyKpO2EsOuwsOy5mFwiICk7XHJcbiAgICAgICAgbG9nKCB0aGlzLmF0dHJpYiApO1xyXG4gICAgICAgIGxldCBzY29yZU1hcCA9IHt9O1xyXG5cclxuICAgICAgICB0aGlzLnNldFJlYWRXcml0ZSggc2NvcmVNYXAsc2NvcmVNYXAgKTtcclxuICAgICAgICB0aGlzLmNsZWFyKCBudWxsICk7XHJcbiAgICAgICAgZm9yICggbGV0IGkgaW4gdGhpcy5zY29yZUxpc3QgKSB7XHJcbiAgICAgICAgICAgIGxldCB2ID0gdGhpcy5zY29yZUxpc3RbaV07XHJcbiAgICAgICAgICAgIGxldCBbc2NvcmUseCx5XSA9IHY7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRyYXcoIHgseSxzY29yZSA+IDAgJiYgXCJAXCIgfHwgXCIuXCIgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRSZWFkV3JpdGUoKTtcclxuICAgICAgICAvL3RoaXMubG9nTWFwU3RyaW5nKHNjb3JlTWFwKTtcclxuICAgICAgICBmb3IgKCBsZXQgaSA9IDE7IGkgPD0gTWF0aC5mbG9vciggdGhpcy5zY29yZUxpc3QubGVuZ3RoIC8gMTAgKTsgaSsrICkge1xyXG4gICAgICAgICAgICBsZXQgbmFtZSA9IHRbdGhpcy5yYW5kb20ucmFuZG9tKCAwLHQubGVuZ3RoIC0gMSApXTtcclxuICAgICAgICAgICAgbGV0IFtzY29yZSwgeCwgeV0gPSB0aGlzLnNjb3JlTGlzdFt0aGlzLnNjb3JlTGlzdC5sZW5ndGggLSAxXTtcclxuXHJcbiAgICAgICAgICAgIGlmICggIU1vbnN0ZXIucHJvcGVydHlbbmFtZV0ubGlzdCApIHtcclxuICAgICAgICAgICAgICAgIGlmICggdGhpcy5yZWFkRW50aXR5KCB4LHkgKSA9PSBudWxsICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkRW50aXR5KCB4LHksXCJtb25zdGVyXCIsbmFtZSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IFt0LCBtdXN0Q291bnRdID0gTW9uc3Rlci5wYXJzZU1vbnN0ZXJMaXN0KCBNb25zdGVyLnByb3BlcnR5W25hbWVdLmxpc3QgKTtcclxuICAgICAgICAgICAgICAgIGxldCBmbG9vckxpc3QgPSB0aGlzLmdldENvbm5lY3RlZE5lYXJGbG9vciggeCx5LHRoaXMucmFuZG9tLnJhbmRvbSggbXVzdENvdW50LHQubGVuZ3RoICksc2NvcmVNYXAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKCBsZXQgaSBpbiBmbG9vckxpc3QgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IFt4LHldID0gZmxvb3JMaXN0W2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL2xvZyh2WzFdLHZbMl0sXCJtb25zdGVyXCIsdFtpXSxtdXN0Q291bnQsdC5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkRW50aXR5KCB4LHksXCJtb25zdGVyXCIsdFtpXS5uYW1lICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuIiwiaW1wb3J0IHsgU2VyaWFsaXplciwgYXBwbGljYXRpb24sIFN0b3JhZ2UsIGVhc2luZyxSZW5kZXJUYXJnZXQsIFV0aWxzLCBNb3ZpZUNsaXAsIFRleHR1cmUsIFRleHR1cmVCYXNlLCBTcHJpdGUsIEV2ZW50LCBUaW1lciB9IGZyb20gXCJAZW5naW5lL2ZsYXRmYXN0XCI7XHJcblxyXG5cclxuaW1wb3J0IEVudGl0eSBmcm9tIFwiLi9lbnRpdHkvZW50aXR5XCI7XHJcblxyXG5pbXBvcnQgTnBjIGZyb20gXCIuL2VudGl0eS9ucGNcIjtcclxuaW1wb3J0IE1vbnN0ZXIgZnJvbSBcIi4vZW50aXR5L21vbnN0ZXJcIjtcclxuaW1wb3J0IFBsYXllciBmcm9tIFwiLi9lbnRpdHkvcGxheWVyXCI7XHJcbmltcG9ydCBQZXQgZnJvbSBcIi4vZW50aXR5L3BldFwiO1xyXG5pbXBvcnQgUHJvcCBmcm9tIFwiLi9lbnRpdHkvcHJvcFwiO1xyXG5pbXBvcnQgSXRlbSBmcm9tIFwiLi9lbnRpdHkvaXRlbVwiO1xyXG5pbXBvcnQgU2tpbGwgZnJvbSBcIi4vZW50aXR5L3NraWxsXCI7XHJcbmltcG9ydCBXb3JsZCBmcm9tIFwiLi93b3JsZC93b3JsZFwiO1xyXG5pbXBvcnQgRW50aXR5TWFuYWdlciBmcm9tIFwiLi93b3JsZC9lbnRpdHlNYW5hZ2VyXCI7XHJcbmltcG9ydCBJbnZlbnRvcnkgZnJvbSBcIi4vaW50ZXJmYWNlL2ludmVudG9yeVwiO1xyXG5pbXBvcnQgeyBTY2VuZU1hbmFnZXIgfSBmcm9tIFwiQGVuZ2luZS9TY2VuZU1hbmFnZXJcIjtcclxuXHJcbmltcG9ydCBHTE9CQUwgZnJvbSBcIi4vZ2xvYmFsXCI7XHJcblxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNhdmVMb2FkIHtcclxuICAgIGNvbnN0cnVjdG9yKCBwYXRoICkge1xyXG4gICAgICAgIHRoaXMucGF0aCA9IHBhdGggfHwgXCJzYXZlZGF0YV9cIiArIFRpbWVyLmdldFNob3J0RGF0ZSgpICsgXCIuanNvblwiO1xyXG5cclxuICAgICAgICB0aGlzLnN0b3JhZ2UgPSBuZXcgU3RvcmFnZSggXCJzYXZlbG9hZFwiICk7XHJcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gbmV3IFNlcmlhbGl6ZXIoIFtcclxuICAgICAgICAgICAgW1dvcmxkLCB7XHJcbiAgICAgICAgICAgICAgICBkYXRhT25seTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHdoaXRlOiAgICBbXCJ0dXJuXCIsIFwiZGF0ZVRpbWVPcmlnaW5cIiwgXCJwbGFjZXNcIiwgXCJjbGVhckF1dG9NYXBcIiwgXCJ0eXBlXCIsIFwiZW50aXR5TWFuYWdlclwiXVxyXG4gICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgW0VudGl0eU1hbmFnZXIsIHsgZGF0YU9ubHk6IHRydWUsIHdoaXRlOiBbXCJpdGVtc0J5WHlcIixcImVudGl0aWVzQnlYeVwiXSB9XSxcclxuICAgICAgICAgICAgW1BsYXllciwgeyBjb25zdHJ1Y3Q6ICggc3JjICkgPT4gbmV3IFBsYXllciggc3JjLm5hbWUsIHNyYy50aWxlWCwgc3JjLnRpbGVZICksIGtlZXA6IFtcInByb3BlcnR5XCJdIH1dLFxyXG4gICAgICAgICAgICBbUHJvcCwgeyBjb25zdHJ1Y3Q6ICggc3JjICkgPT4gbmV3IFByb3AoIHNyYy5jaGFyLCBzcmMudGlsZVgsIHNyYy50aWxlWSApLCBrZWVwOiBbXCJwcm9wZXJ0eVwiXSB9XSxcclxuICAgICAgICAgICAgW1BldCwgeyBjb25zdHJ1Y3Q6ICggc3JjICkgPT4gbmV3IFBldCggc3JjLm5hbWUsIHNyYy50aWxlWCwgc3JjLnRpbGVZICksIGtlZXA6IFtcInByb3BlcnR5XCJdIH1dLFxyXG4gICAgICAgICAgICBbTW9uc3RlciwgeyBjb25zdHJ1Y3Q6ICggc3JjICkgPT4gbmV3IE1vbnN0ZXIoIHNyYy5uYW1lLCBzcmMudGlsZVgsIHNyYy50aWxlWSApLCBrZWVwOiBbXCJwcm9wZXJ0eVwiXSB9XSxcclxuICAgICAgICAgICAgW0l0ZW0sIHsgY29uc3RydWN0OiAoIHNyYyApID0+IG5ldyBJdGVtKCBzcmMubmFtZSwgc3JjLnRpbGVYLCBzcmMudGlsZVkgKSwga2VlcDogW1wicHJvcGVydHlcIl0gfV0sXHJcbiAgICAgICAgICAgIFtTa2lsbCwgeyBjb25zdHJ1Y3Q6ICggc3JjICkgPT4gbmV3IFNraWxsKCBzcmMubmFtZSwgc3JjLnRpbGVYLCBzcmMudGlsZVkgKSwga2VlcDogW1wicHJvcGVydHlcIl0gfV0sXHJcbiAgICAgICAgICAgIFtJbnZlbnRvcnksIHsgY29uc3RydWN0OiAoIHNyYyApID0+IG5ldyBJbnZlbnRvcnkoIHNyYy5zaXplICkgfV0sXHJcbiAgICAgICAgXSApO1xyXG4gICAgfVxyXG5cclxuICAgIHNhdmUoKSB7XHJcbiAgICAgICAgY29uc3QgdCA9IHt9O1xyXG5cclxuICAgICAgICAvLyDsm5Trk5wg642w7J207YSwIOyggOyepVxyXG4gICAgICAgIHQud29ybGQgPSBHTE9CQUwud29ybGQ7XHJcbiAgICAgICAgdC5wbGF5ZXIgPSBHTE9CQUwucGxheWVyO1xyXG4gICAgICAgIHQud29ybGRPcHRpb25zID0gR0xPQkFMLndvcmxkLm9wdGlvbnM7XHJcbiAgICAgICAgdC5yYW5kb20gPSBHTE9CQUwud29ybGQucmFuZG9tR2VuZXJhdG9yLnNhdmUoKTtcclxuICAgICAgICB0Lm1hcFN0cmluZyA9IEdMT0JBTC53b3JsZC5tYXAuZ2V0TWFwU3RyaW5nKCk7XHJcbiAgICAgICAgdC5tYXBQcm9wZXJ0eSA9IHt9O1xyXG4gICAgICAgIHQubmV4dElkID0gRW50aXR5Lm5leHRJZDtcclxuICAgICAgICBmb3IgKCBjb25zdCBrIGluIEdMT0JBTC53b3JsZC5tYXAucHJvcGVydHlUYWJsZSApIHtcclxuICAgICAgICAgICAgY29uc3QgdiA9IEdMT0JBTC53b3JsZC5tYXAucHJvcGVydHlUYWJsZVtrXTtcclxuICAgICAgICAgICAgY29uc3QgcHIgPSB7fTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoIGNvbnN0IG5hbWUgb2YgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoIHYgKSApIHtcclxuICAgICAgICAgICAgICAgIHByW25hbWVdID0gdltuYW1lXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0Lm1hcFByb3BlcnR5W2tdID0gcHI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOyXmOugiOupmO2DiCDsi5zsiqTthZxcclxuICAgICAgICB0LmVsZW1lbnRhbCA9IFtdO1xyXG4gICAgICAgIGZvciAoIGNvbnN0IGsgaW4gR0xPQkFMLndvcmxkLmVsZW1lbnRhbC5lbGVtZW50YWxzQnlYeSApIHtcclxuICAgICAgICAgICAgY29uc3QgdiA9IEdMT0JBTC53b3JsZC5lbGVtZW50YWwuZWxlbWVudGFsc0J5WHlba107XHJcblxyXG4gICAgICAgICAgICB0LmVsZW1lbnRhbC5wdXNoKCBbdi50eXBlLCB2LnRpbGVYLCB2LnRpbGVZLCB2LmxpZmVdICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnNlcmlhbGl6ZXIuZ2V0U2VyaWFsaXphYmxlT2JqZWN0KCB0ICk7XHJcblxyXG4gICAgICAgIGFwcGxpY2F0aW9uLnNldFBhdXNlZCggdHJ1ZSApO1xyXG4gICAgICAgIGNvbnN0IHQxID0gSlNPTi5zdHJpbmdpZnkoIHMgKTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coIHQxICk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RvcmFnZS53cml0ZSggdGhpcy5wYXRoLCB0MSApLnRoZW4oICgpID0+IHtcclxuICAgICAgICAgICAgYXBwbGljYXRpb24uc2V0UGF1c2VkKCBmYWxzZSApO1xyXG4gICAgICAgIH0gKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgbG9hZCggcGF0aCApIHtcclxuICAgICAgICBHTE9CQUwud29ybGQuZW50aXR5TWFuYWdlci5mb3JjZVN0b3BUdXJuUHJvY2Vzc2luZygpO1xyXG4gICAgICAgIHRoaXMucGF0aCA9IHBhdGggfHwgdGhpcy5wYXRoO1xyXG5cclxuICAgICAgICBhcHBsaWNhdGlvbi5zZXRQYXVzZWQoIHRydWUgKTtcclxuICAgICAgICB0aGlzLnN0b3JhZ2UucmVhZCggdGhpcy5wYXRoICkudGhlbiggKCBzICkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0ID0gSlNPTi5wYXJzZSggcyApO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coIFwi7IS47J2067iM7YyM7J28IOuhnOuTnCDsi5zsnpFcIiwgdGhpcy5wYXRoICk7XHJcbiAgICAgICAgICAgIEdMT0JBTC53b3JsZC5kZXN0cm95KCB0cnVlICk7XHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmxkTG9hZERhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICByYW5kb206ICAgIHQucmFuZG9tLFxyXG4gICAgICAgICAgICAgICAgbWFwU3RyaW5nOiB0Lm1hcFN0cmluZyxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHcgPSBHTE9CQUwud29ybGQgPSBuZXcgV29ybGQoIHsgbG9hZERhdGE6IHdvcmxkTG9hZERhdGEgfSApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zZXJpYWxpemVyLnBhcnNlKCB0ICk7XHJcblxyXG4gICAgICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmF1dG9NYXAuY2xlYXIoKTtcclxuICAgICAgICAgICAgZm9yICggY29uc3QgaSBpbiByZXN1bHQubWFwUHJvcGVydHkgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwciA9IHJlc3VsdC5tYXBQcm9wZXJ0eVtpXTtcclxuXHJcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKCB3Lm1hcC5wcm9wZXJ0eVRhYmxlW2ldLCBwciApO1xyXG4gICAgICAgICAgICAgICAgaWYgKCBwci5yZXZlYWxlZCApIHtcclxuICAgICAgICAgICAgICAgICAgICBHTE9CQUwud29ybGQuc2lnaHRNYW5hZ2VyLnJldmVhbFRpbGUoIHByLngsIHByLnksIHRydWUgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKCBjb25zdCBrIGluIHJlc3VsdC53b3JsZC5lbnRpdHlNYW5hZ2VyLmVudGl0aWVzQnlYeSApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHYgPSByZXN1bHQud29ybGQuZW50aXR5TWFuYWdlci5lbnRpdGllc0J5WHlba107XHJcblxyXG4gICAgICAgICAgICAgICAgdy5lbnRpdHlNYW5hZ2VyLmFkZEVudGl0eSggdiApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIEdMT0JBTC5wbGF5ZXIgPSByZXN1bHQucGxheWVyO1xyXG4gICAgICAgICAgICBFbnRpdHkubmV4dElkID0gdC5uZXh0SWQ7XHJcblxyXG4gICAgICAgICAgICAvLyDroZzrk5wg7ZmU66m0IOyXsOy2nFxyXG4gICAgICAgICAgICBHTE9CQUwuc2NlbmVNYW5hZ2VyLmNoYW5nZVNjZW5lKCBHTE9CQUwud29ybGQsIDEwMDAsIFNjZW5lTWFuYWdlci5jaXJjbGVJbk91dCwgZWFzaW5nLmxpbmVhciApO1xyXG4gICAgICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmFjdGlvblNlbGVjdG9yLmFjdGlvbnMgPSBbXTtcclxuICAgICAgICAgICAgR0xPQkFMLmludGVyZmFjZS5hY3Rpb25TZWxlY3Rvci5zZWxlY3QoIEdMT0JBTC5wbGF5ZXIuc2VsZWN0ZWRBY3Rpb24gKTtcclxuICAgICAgICAgICAgR0xPQkFMLmludGVyZmFjZS5jdXJzb3IubG9jaygpO1xyXG4gICAgICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmN1cnNvci5oaWRlQXV0b0FjdGlvbigpO1xyXG4gICAgICAgICAgICBHTE9CQUwud29ybGQub24oIFwiZW50ZXJFbmRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgR0xPQkFMLmludGVyZmFjZS5jdXJzb3IudW5sb2NrKCk7XHJcbiAgICAgICAgICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmN1cnNvci5yZXNldFNjYWxlKCk7XHJcbiAgICAgICAgICAgICAgICBHTE9CQUwud29ybGQuc2hvd01hcEluZm8oIEdMT0JBTC5wbGF5ZXIudGlsZVgsIEdMT0JBTC5wbGF5ZXIudGlsZVkgKTtcclxuICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyggXCLshLjsnbTruIztjIzsnbwg66Gc65OcIOuBnVwiLCB0aGlzLnBhdGggKTtcclxuICAgICAgICAgICAgYXBwbGljYXRpb24uc2V0UGF1c2VkKCBmYWxzZSApO1xyXG4gICAgICAgIH0gKTtcclxuICAgIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgVHdlZW4sIGVhc2luZywgTWVzaCwgVGV4dHVyZVBhY2ssIFV0aWxzLCBNYXRyaXgsIFNoYXBlLCBUaW1lciwgVGV4dEZpZWxkLCBFdmVudCwgRXZlbnREaXNwYXRjaGVyLFxyXG4gICAgICAgICBTcHJpdGUsIFN0YWdlLCBCaXRtYXAsIFRleHR1cmUsIFRleHR1cmVCYXNlLCBBcHBsaWNhdGlvbiwgYXBwbGljYXRpb24sIHN0YWdlIH0gZnJvbSBcIkBlbmdpbmUvZmxhdGZhc3RcIjtcclxuXHJcbmltcG9ydCBHYW1lTWFwIGZyb20gXCIuL2dhbWVNYXBcIjtcclxuaW1wb3J0IEJ1ZmYgZnJvbSBcIi4uL2VudGl0eS9idWZmXCI7XHJcbmltcG9ydCBSYW5kb20gZnJvbSBcIkBsaWIvcmFuZG9tXCI7XHJcbmltcG9ydCBJY29uUGFjayBmcm9tIFwiQGxpYi9pY29uUGFja1wiO1xyXG5cclxuaW1wb3J0IEdMT0JBTCBmcm9tIFwiLi4vZ2xvYmFsXCI7XHJcbmltcG9ydCBDT05GSUcgZnJvbSBcIi4uL2NvbmZpZ1wiO1xyXG5cclxuLypcclxuXHJcbuuPhS4g7YGs66as7LOQ6rCAIOuPheyXkCDqsbjrprxcclxu66y8LiDslYTsnbTthZzsnbQg65ag64K066Ck6rCQXHJcbuu2iC4g7YGs66as7LOQ6rCAIOu2iOyXkCDrtpnsnYxcclxu7KCE6riwLiDqt7zsspjsnZgg64+E7LK066W8IO2Wpe2VtCDsoITri6xcclxuXHJcbiovXHJcblxyXG5cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbGVtZW50YWwgZXh0ZW5kcyBTcHJpdGUge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmVsZW1lbnRhbHNCeVh5ID0gW107IC8vIFRPRE86d2Vha1xyXG4gICAgICAgIHRoaXMubGF5ZXJzID0ge1xyXG4gICAgICAgICAgICBbRWxlbWVudGFsLkZJUkVdOiAgIG5ldyBTcHJpdGUoKSxcclxuICAgICAgICAgICAgW0VsZW1lbnRhbC5XQVRFUl06ICBuZXcgU3ByaXRlKCksXHJcbiAgICAgICAgICAgIFtFbGVtZW50YWwuUE9JU09OXTogbmV3IFNwcml0ZSgpLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgYWRkRWxlbWVudGFsKCB0eXBlLCB4LCB5LCBsaWZlLCB4MSwgeTEgKSB7XHJcbiAgICAgICAgaWYgKCB0aGlzLmVsZW1lbnRhbHNCeVh5W3ggKyBcIixcIiArIHldICkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUVsZW1lbnRhbCggeCwgeSApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB4MSA9IHgxICE9IG51bGwgPyB4MSA6IHg7XHJcbiAgICAgICAgeTEgPSB5MSAhPSBudWxsID8geTEgOiB5O1xyXG4gICAgICAgIGNvbnN0IHNwciA9IG5ldyBJY29uUGFjayggbmV3IFRleHR1cmUoIFwiZWxlbWVudGFsLnBuZ1wiLCBmYWxzZSwgeyBmb3JtYXQ6IFRleHR1cmVCYXNlLlJHQkE1NTUxIH0gKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnRhbC5kYXRhW3R5cGVdLmNvbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnRhbC5kYXRhW3R5cGVdLnJvdyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDE2LCAyNCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnRhbC5kYXRhW3R5cGVdLmNvbG9yICk7XHJcblxyXG4gICAgICAgIHNwci5zZXRTaGFkZXIoIEdMT0JBTC53b3JsZC5mbG9vclRpbGVNYXAuX3NoYWRlciApO1xyXG4gICAgICAgIHNwci5zZXRCbGVuZE1vZGUoIEVsZW1lbnRhbC5kYXRhW3R5cGVdLmJsZW5kICk7XHJcbiAgICAgICAgc3ByLnRpbGVYID0geDtcclxuICAgICAgICBzcHIudGlsZVkgPSB5O1xyXG4gICAgICAgIHNwci50eXBlID0gdHlwZTtcclxuICAgICAgICBzcHIubGlmZSA9IGxpZmU7XHJcbiAgICAgICAgc3ByLm5ld0xpZmUgPSBsaWZlO1xyXG4gICAgICAgIGxldCB0eCwgdHk7XHJcblxyXG4gICAgICAgIGlmICggeDEgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGEgPSBVdGlscy5jbGFtcCggbGlmZSAvIDIsIDAuNSwgMSApO1xyXG5cclxuICAgICAgICAgICAgaWYgKCBzcHIudHlwZSA9PSBFbGVtZW50YWwuV0FURVIgKSB7XHJcbiAgICAgICAgICAgICAgICBzcHIuc2V0QWxwaGEoIDAgKTtcclxuICAgICAgICAgICAgICAgIHNwci5wb3NpdGlvbiA9IEdMT0JBTC53b3JsZC50aWxlQ2VudGVyVG9Xb3JsZCggeCwgeSApO1xyXG4gICAgICAgICAgICAgICAgbmV3IFR3ZWVuKCBzcHIsIDMwMCwgeyBhbHBoYTogYSB9ICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIHNwci50eXBlID09IEVsZW1lbnRhbC5QT0lTT04gKSB7XHJcbiAgICAgICAgICAgICAgICBzcHIuc2V0QWxwaGEoIDAgKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgeDogdHgsIHk6IHR5IH0gPSBHTE9CQUwud29ybGQudGlsZUNlbnRlclRvV29ybGQoIHgsIHkgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzcHIucG9zaXRpb24gPSBHTE9CQUwud29ybGQudGlsZUNlbnRlclRvV29ybGQoIHgxLCB5MSApO1xyXG4gICAgICAgICAgICAgICAgbmV3IFR3ZWVuKCBzcHIsIDEwMDAsIHsgYWxwaGE6IGEsIHg6IHR4LCB5OiB0eSB9LCB7IGVhc2U6IGVhc2luZy5vdXRDdWJpYyB9ICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzcHIuc2V0QWxwaGEoIDAgKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgeDogdHgsIHk6IHR5IH0gPSBHTE9CQUwud29ybGQudGlsZUNlbnRlclRvV29ybGQoIHgsIHkgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzcHIucG9zaXRpb24gPSBHTE9CQUwud29ybGQudGlsZUNlbnRlclRvV29ybGQoIHgxLCB5MSApO1xyXG4gICAgICAgICAgICAgICAgbmV3IFR3ZWVuKCBzcHIsIDYwMCwgeyBhbHBoYTogYSwgeDogdHgsIHk6IHR5IH0sIHsgZWFzZTogZWFzaW5nLmluT3V0Q3ViaWMgfSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc3ByLnBvc2l0aW9uID0gR0xPQkFMLndvcmxkLnRpbGVDZW50ZXJUb1dvcmxkKCB4LCB5ICk7XHJcbiAgICAgICAgfVxyXG5cdFx0XHJcbiAgICAgICAgdGhpcy5sYXllcnNbdHlwZV0uYWRkQ2hpbGQoIHNwciApO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudGFsc0J5WHlbeCArIFwiLFwiICsgeV0gPSBzcHI7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlRWxlbWVudGFsKCB4LCB5ICkge1xyXG4gICAgICAgIGxldCBlO1xyXG5cclxuICAgICAgICBpZiAoIHR5cGVvZiB4ID09IFwibnVtYmVyXCIgKSB7XHJcbiAgICAgICAgICAgIGUgPSB0aGlzLmVsZW1lbnRhbHNCeVh5W3ggKyBcIixcIiArIHldO1xyXG4gICAgICAgICAgICBlLnJlbW92ZUZyb21QYXJlbnQoKTtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuZWxlbWVudGFsc0J5WHlbeCArIFwiLFwiICsgeV07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZSA9IHg7XHJcbiAgICAgICAgICAgIGUucmVtb3ZlRnJvbVBhcmVudCgpO1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5lbGVtZW50YWxzQnlYeVtlLnRpbGVYICsgXCIsXCIgKyBlLnRpbGVZXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEVsZW1lbnRhbCggeCwgeSApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50YWxzQnlYeVt4ICsgXCIsXCIgKyB5XTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJvY2VzcygpIHtcclxuICAgICAgICBsZXQgZGlyO1xyXG4gICAgICAgIGxldCBheCwgYXk7XHJcbiAgICAgICAgY29uc3QgcHJvY2Vzc1RhYmxlID0gW107XHJcblxyXG4gICAgICAgIGZvciAoIGNvbnN0IGsgaW4gdGhpcy5lbGVtZW50YWxzQnlYeSApIHtcclxuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudGFsc0J5WHlba107XHJcblxyXG4gICAgICAgICAgICBlLmxpZmUgPSBlLm5ld0xpZmU7XHJcbiAgICAgICAgICAgIGlmICggZS50eXBlID09IEVsZW1lbnRhbC5QT0lTT04gKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhID0gVXRpbHMuY2xhbXAoIGUubGlmZSAvIDIsIDAuNCwgMSApO1xyXG5cclxuICAgICAgICAgICAgICAgIGUuc2V0U2NhbGUoIGEgKiAxLjUgKTtcclxuICAgICAgICAgICAgICAgIGUuc2V0QWxwaGEoIGEgKiAwLjkgKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICggZS50eXBlID09IEVsZW1lbnRhbC5GSVJFICkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYSA9IFV0aWxzLmNsYW1wKCBlLmxpZmUgLyAyICsgMC43LCAwLjgsIDEgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBlLnNldEFscGhhKCBhICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBlLnNldEFscGhhKCBVdGlscy5jbGFtcCggZS5saWZlIC8gMiwgMC40LCAxICkgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwcm9jZXNzVGFibGUucHVzaCggZSApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKCBjb25zdCBpIGluIHByb2Nlc3NUYWJsZSApIHtcclxuICAgICAgICAgICAgY29uc3QgZSA9IHByb2Nlc3NUYWJsZVtpXTtcclxuXHRcclxuICAgICAgICAgICAgY29uc3QgbGVmdEVsID0gdGhpcy5nZXRFbGVtZW50YWwoIGUudGlsZVggLSAxLCBlLnRpbGVZICk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0RWwgPSB0aGlzLmdldEVsZW1lbnRhbCggZS50aWxlWCArIDEsIGUudGlsZVkgKTtcclxuICAgICAgICAgICAgY29uc3QgdXBFbCA9IHRoaXMuZ2V0RWxlbWVudGFsKCBlLnRpbGVYLCBlLnRpbGVZIC0gMSApO1xyXG4gICAgICAgICAgICBjb25zdCBkb3duRWwgPSB0aGlzLmdldEVsZW1lbnRhbCggZS50aWxlWCwgZS50aWxlWSArIDEgKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOyDge2YuOyekeyaqVxyXG4gICAgICAgICAgICBpZiAoIGUudHlwZSA9PSBFbGVtZW50YWwuRklSRSApIHtcclxuICAgICAgICAgICAgICAgIC8vIOu2iOydtCDrrLzsnYQg66eM64KY66m0IOq6vOynkFxyXG4gICAgICAgICAgICAgICAgaWYgKCAoIGxlZnRFbCAmJiBsZWZ0RWwudHlwZSA9PSBFbGVtZW50YWwuV0FURVIgKSB8fFxyXG5cdFx0XHRcdFx0KCByaWdodEVsICYmIHJpZ2h0RWwudHlwZSA9PSBFbGVtZW50YWwuV0FURVIgKSB8fFxyXG5cdFx0XHRcdFx0KCB1cEVsICYmIHVwRWwudHlwZSA9PSBFbGVtZW50YWwuV0FURVIgKSB8fFxyXG5cdFx0XHRcdFx0KCBkb3duRWwgJiYgZG93bkVsLnR5cGUgPT0gRWxlbWVudGFsLldBVEVSICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVFbGVtZW50YWwoIGUgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmICggZS50eXBlID09IEVsZW1lbnRhbC5QT0lTT04gKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDrj4XsnbQg67aI7J2EIOunjOuCmOuptCDsgqzrnbzsp5BcclxuICAgICAgICAgICAgICAgIGlmICggKCBsZWZ0RWwgJiYgbGVmdEVsLnR5cGUgPT0gRWxlbWVudGFsLkZJUkUgKSB8fFxyXG5cdFx0XHRcdFx0KCByaWdodEVsICYmIHJpZ2h0RWwudHlwZSA9PSBFbGVtZW50YWwuRklSRSApIHx8XHJcblx0XHRcdFx0XHQoIHVwRWwgJiYgdXBFbC50eXBlID09IEVsZW1lbnRhbC5GSVJFICkgfHxcclxuXHRcdFx0XHRcdCggZG93bkVsICYmIGRvd25FbC50eXBlID09IEVsZW1lbnRhbC5GSVJFICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVFbGVtZW50YWwoIGUgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIGUuZ2V0UGFyZW50KCkgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsZWZ0V2FsbCA9IEdMT0JBTC53b3JsZC5nZXRQcm9wZXJ0eSggZS50aWxlWCAtIDEsIGUudGlsZVkgKS53YWxsICYgR2FtZU1hcC5CTE9DS19QQVNTO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmlnaHRXYWxsID0gR0xPQkFMLndvcmxkLmdldFByb3BlcnR5KCBlLnRpbGVYICsgMSwgZS50aWxlWSApLndhbGwgJiBHYW1lTWFwLkJMT0NLX1BBU1M7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1cFdhbGwgPSBHTE9CQUwud29ybGQuZ2V0UHJvcGVydHkoIGUudGlsZVgsIGUudGlsZVkgLSAxICkud2FsbCAmIEdhbWVNYXAuQkxPQ0tfUEFTUztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRvd25XYWxsID0gR0xPQkFMLndvcmxkLmdldFByb3BlcnR5KCBlLnRpbGVYLCBlLnRpbGVZICsgMSApLndhbGwgJiBHYW1lTWFwLkJMT0NLX1BBU1M7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9CTE9DS19QQVNTIOqwgCAx7J2065286rOgIOqwgOyglVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5hc3NlcnQoIEdhbWVNYXAuQkxPQ0tfUEFTUyA9PSAxICk7XHJcbiAgICAgICAgICAgICAgICBsZXQgW2wsIHIsIHUsIGRdID0gWzAsIDAsIDAsIDBdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggZS5saWZlID4gMCAmJiBlLmxpZmUgPD0gMSApIHtcclxuICAgICAgICAgICAgICAgICAgICBlLm5ld0xpZmUgPSBHTE9CQUwud29ybGQucmFuZG9tKCAwLCAxICkgKiBlLmxpZmUgKiAwLjU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGwgPSAoIGxlZnRFbCAmJiBsZWZ0RWwudHlwZSA9PSBlLnR5cGUgKSA/IGxlZnRFbC5saWZlIDogMDtcclxuICAgICAgICAgICAgICAgICAgICByID0gKCByaWdodEVsICYmIHJpZ2h0RWwudHlwZSA9PSBlLnR5cGUgKSA/IHJpZ2h0RWwubGlmZSA6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdSA9ICggdXBFbCAmJiB1cEVsLnR5cGUgPT0gZS50eXBlICkgPyB1cEVsLmxpZmUgOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGQgPSAoIGRvd25FbCAmJiBkb3duRWwudHlwZSA9PSBlLnR5cGUgKSA/IGRvd25FbC5saWZlIDogMDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdW0gPSAoIE1hdGgubWF4KCByLCBNYXRoLm1heCggbCwgTWF0aC5tYXgoIHUsIGQgKSApICkgKyBlLmxpZmUgKSAvIDIuMjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZS5uZXdMaWZlID0gc3VtO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggc3VtID4gMC41ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGxlZnRXYWxsID09IDAgJiYgIWxlZnRFbCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkRWxlbWVudGFsKCBlLnR5cGUsIGUudGlsZVggLSAxLCBlLnRpbGVZLCAwLCBlLnRpbGVYLCBlLnRpbGVZICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCByaWdodFdhbGwgPT0gMCAmJiAhcmlnaHRFbCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkRWxlbWVudGFsKCBlLnR5cGUsIGUudGlsZVggKyAxLCBlLnRpbGVZLCAwLCBlLnRpbGVYLCBlLnRpbGVZICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB1cFdhbGwgPT0gMCAmJiAhdXBFbCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkRWxlbWVudGFsKCBlLnR5cGUsIGUudGlsZVgsIGUudGlsZVkgLSAxLCAwLCBlLnRpbGVYLCBlLnRpbGVZICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBkb3duV2FsbCA9PSAwICYmICFkb3duRWwgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEVsZW1lbnRhbCggZS50eXBlLCBlLnRpbGVYLCBlLnRpbGVZICsgMSwgMCwgZS50aWxlWCwgZS50aWxlWSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCBlLm5ld0xpZmUgPD0gMCApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUVsZW1lbnRhbCggZSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCBlLnR5cGUgPT0gRWxlbWVudGFsLldBVEVSICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gR0xPQkFMLndvcmxkLmdldEl0ZW1zKCBlLnRpbGVYLCBlLnRpbGVZICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOyVhOydtO2FnCDtnZjrpqzquLBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGl0ZW1zICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmVJdGVtT25XYXRlciggaXRlbXMsIGUsIGwsIHIsIHUsIGQgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBlLnR5cGUgPT0gRWxlbWVudGFsLlBPSVNPTiApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjciA9IEdMT0JBTC53b3JsZC5nZXRFbnRpdHkoIGUudGlsZVgsIGUudGlsZVkgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g64+FXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjciApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3IuYWRkQnVmZiggQnVmZi5QT0lTT04sIDMgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBlLnR5cGUgPT0gRWxlbWVudGFsLkZJUkUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3IgPSBHTE9CQUwud29ybGQuZ2V0RW50aXR5KCBlLnRpbGVYLCBlLnRpbGVZICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOu2iFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggY3IgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyLmFkZEJ1ZmYoIEJ1ZmYuRklSRSwgMyApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBtb3ZlSXRlbU9uV2F0ZXIoIGl0ZW1zLCBlLCBsLCByLCB1LCBkICkge1xyXG4gICAgICAgIGNvbnN0IHQgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKCBlLmxpZmUgPj0gbCAmJiBsID4gMCApIHtcclxuICAgICAgICAgICAgdC5wdXNoKCBbLTEsIDBdICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggZS5saWZlID49IHIgJiYgciA+IDAgKSB7XHJcbiAgICAgICAgICAgIHQucHVzaCggWzEsIDBdICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggZS5saWZlID49IHUgJiYgdSA+IDAgKSB7XHJcbiAgICAgICAgICAgIHQucHVzaCggWzAsIC0xXSApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIGUubGlmZSA+PSBkICYmIGQgPiAwICkge1xyXG4gICAgICAgICAgICB0LnB1c2goIFswLCAxXSApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIHQubGVuZ3RoID4gMCApIHtcclxuICAgICAgICAgICAgY29uc3QgaXRlbSA9IGl0ZW1zW0dMT0JBTC53b3JsZC5yYW5kb20oIGl0ZW1zLmxlbmd0aCApXTtcclxuICAgICAgICAgICAgY29uc3QgeDEgPSBpdGVtLnRpbGVYO1xyXG4gICAgICAgICAgICBjb25zdCB5MSA9IGl0ZW0udGlsZVk7XHJcbiAgICAgICAgICAgIGNvbnN0IFtheCwgYXldID0gdFtHTE9CQUwud29ybGQucmFuZG9tKCB0Lmxlbmd0aCApXTtcclxuICAgICAgICAgICAgY29uc3QgW3gyLCB5Ml0gPSBbZS50aWxlWCArIGF4LCBlLnRpbGVZICsgYXldO1xyXG5cclxuICAgICAgICAgICAgaXRlbS5tb3ZlKCB4MiwgeTIgKTtcclxuICAgICAgICAgICAgR0xPQkFMLndvcmxkLmFkZExvZyggXCIlc3vqsIB9IOusvOyXkCDrlqDrgrTroKTqsJTri6QhXCIsIGl0ZW0ubmFtZSApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuRWxlbWVudGFsLlBPSVNPTiA9IDE7XHJcbkVsZW1lbnRhbC5GSVJFID0gMjtcclxuRWxlbWVudGFsLldBVEVSID0gMztcclxuLy9FbGVtZW50YWwuTElHSFROSU5HID0gNDtcclxuRWxlbWVudGFsLmRhdGEgPSB7XHJcbiAgICBbRWxlbWVudGFsLlBPSVNPTl06IHtcclxuICAgICAgICBjb2w6ICAgMSxcclxuICAgICAgICByb3c6ICAgNCxcclxuICAgICAgICBjb2xvcjogMHg0MDAwODAsXHJcbiAgICAgICAgYmxlbmQ6IFNwcml0ZS5BTFBIQSxcclxuICAgIH0sXHJcbiAgICBbRWxlbWVudGFsLldBVEVSXToge1xyXG4gICAgICAgIGNvbDogICA5LFxyXG4gICAgICAgIHJvdzogICA0LFxyXG4gICAgICAgIGNvbG9yOiAweDAwMzBmZixcclxuICAgICAgICBibGVuZDogU3ByaXRlLkFMUEhBLFxyXG4gICAgfSxcclxuICAgIFtFbGVtZW50YWwuRklSRV06IHtcclxuICAgICAgICBjb2w6ICAgNSxcclxuICAgICAgICByb3c6ICAgNCxcclxuICAgICAgICBjb2xvcjogMHhjMDAwMDAsXHJcbiAgICAgICAgYmxlbmQ6IFNwcml0ZS5BREQsXHJcbiAgICB9LFxyXG59O1xyXG5cclxuXHJcblxyXG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIFJlbmRlclRhcmdldCwgVXRpbHMsIE1vdmllQ2xpcCwgVGV4dHVyZSwgVGV4dHVyZUJhc2UsIFNwcml0ZSwgRXZlbnQsIFRpbWVyIH0gZnJvbSBcIkBlbmdpbmUvZmxhdGZhc3RcIjtcclxuXHJcbmltcG9ydCBFbnRpdHkgZnJvbSBcIi4uL2VudGl0eS9lbnRpdHlcIjtcclxuaW1wb3J0IEdhbWVNYXAgZnJvbSBcIi4vZ2FtZU1hcFwiO1xyXG5pbXBvcnQgR0xPQkFMIGZyb20gXCIuLi9nbG9iYWxcIjtcclxuaW1wb3J0IENPTkZJRyBmcm9tIFwiLi4vY29uZmlnXCI7XHJcbmltcG9ydCBQbGF5ZXIgZnJvbSBcIi4uL2VudGl0eS9wbGF5ZXJcIjtcclxuaW1wb3J0IFdvcmxkIGZyb20gXCIuL3dvcmxkXCI7XHJcbmltcG9ydCBNb25zdGVyIGZyb20gXCIuLi9lbnRpdHkvbW9uc3RlclwiO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vIOyggeydmCDthLQg7LKY66asXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyDsoIHsnZgg7YS07J2YIGRlbGF564qUIOyggeydtCDrp57qs6Ag7JuA7KeB7Jes7JW8IO2VmOuKlCDqsr3smrDsnbTri6QuXHJcbi8vIGRlbGF56rCAIDDsnbTrqbQg7J2064+Z7ZWY64ukIOunnuqxsOuCmCDtlZjqsowg65CoXHJcblxyXG4vKipcclxuICogXHJcbiAqIEB0aGlzIEVudGl0eU1hbmFnZXJcclxuICpcclxuICovXHJcbmZ1bmN0aW9uIHByb2Nlc3MoKSB7XHJcbiAgICBjb25zb2xlLmxvZyggXCLilrfsoIHthLRcIiwgdGhpcy53b3JsZC50dXJuICk7XHJcbiAgICAvLyDsspjrpqwg7Iic7ISc66W8IOygle2VmOuKlCDrsKnrspXsnbQg7J287KCV7ZW07JW87ZWc64ukLlxyXG4gICAgY29uc3QgcHJvY2Vzc09yZGVyID0gW107XHJcblxyXG4gICAgZm9yICggY29uc3QgayBpbiB0aGlzLkFJVGFibGUgKSB7XHJcbiAgICAgICAgY29uc3QgdiA9IHRoaXMuQUlUYWJsZVtrXTtcclxuXHJcbiAgICAgICAgcHJvY2Vzc09yZGVyLnB1c2goIFtNYXRoLmFicyggdi50aWxlWCAtIEdMT0JBTC5wbGF5ZXIudGlsZVggKSArIE1hdGguYWJzKCB2LnRpbGVZIC0gR0xPQkFMLnBsYXllci50aWxlWSApLCB2XSApO1xyXG4gICAgfVxyXG4gICAgcHJvY2Vzc09yZGVyLnNvcnQoICggYSwgYiApID0+IHtcclxuICAgICAgICAvLyDqsbDrpqzqsIAg6rCZ64uk66m0IOqwgOuhnCDshLjroZwg7JyE7LmY66W8IOqzoOugpO2VtOyEnCDsoJXtlahcclxuICAgICAgICBpZiAoIGFbMF0gPT0gYlswXSApIHtcclxuICAgICAgICAgICAgaWYgKCBhWzFdLnRpbGVYID09IGJbMV0udGlsZVggKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYVsxXS50aWxlWSAtIGJbMV0udGlsZVk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYVsxXS50aWxlWCAtIGJbMV0udGlsZVg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gYVswXSAtIGJbMF07XHJcbiAgICAgICAgfVxyXG4gICAgfSApO1xyXG4gICAgZm9yICggY29uc3QgaSBpbiBwcm9jZXNzT3JkZXIgKSB7XHJcbiAgICAgICAgY29uc3QgdiA9IHByb2Nlc3NPcmRlcltpXTtcclxuXHJcbiAgICAgICAgLy9sb2coaSx2WzJdLm5hbWUsdlsxXSx2WzJdLnRpbGVYLHZbMl0udGlsZVkpO1xyXG4gICAgICAgIHZbMV0ucHJvY2Vzc0J1ZmYoKTtcclxuICAgICAgICB2WzFdLnByb2Nlc3NBSSgpO1xyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coIFwiIC0g7KCB7YS064GdXCIsdGhpcy53b3JsZC50dXJuICk7XHJcbiAgICBjb25zb2xlLmxvZyggXCLigLvsl5jrpqzrqZjtg4hcIix0aGlzLndvcmxkLnR1cm4gKTtcclxuICAgIHRoaXMud29ybGQuZWxlbWVudGFsLnByb2Nlc3MoKTtcclxufVxyXG5cclxuXHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8g7JuU65Oc7JeQIENyZWF0dXJlKE1vbnN0ZXIsUGxheWVyKSDrgpgg66y86rG07J2EIOyYrOumrOqzoCDrgrTrprxcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4vKipcclxuICogQHRoaXMgRW50aXR5TWFuYWdlclxyXG4gKlxyXG4gKiBAcGFyYW0ge0VudGl0eVtdfSBpdGVtc1xyXG4gKiBAcGFyYW0ge0VudGl0eX0gaXRlbVxyXG4gKi9cclxuZnVuY3Rpb24gY29sbGFwc2VCdW5kbGUoIGl0ZW1zLCBpdGVtICkge1xyXG4gICAgY29uc3QgYnVuZGxlID0gaXRlbS5wcm9wZXJ0eS5idW5kbGU7XHJcblxyXG4gICAgaWYgKCBidW5kbGUgIT0gbnVsbCAmJiBpdGVtcyAhPSBudWxsICkge1xyXG4gICAgICAgIC8vbG9nKFwi67KI65Ok67Cc6rKsXCIpO1xyXG4gICAgICAgIGxldCBpID0gMDtcclxuXHJcbiAgICAgICAgd2hpbGUgKCBpIDwgaXRlbXMubGVuZ3RoICkge1xyXG4gICAgICAgICAgICBpZiAoIGl0ZW1zW2ldLnByb3BlcnR5LmJ1bmRsZSA9PSBidW5kbGUgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIGl0ZW0ucHJvcGVydHkuYnVuZGxlTWF4ICE9IG51bGwgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVtYWluID0gaXRlbS5wcm9wZXJ0eS5idW5kbGVNYXggLSAoIGl0ZW0uYW1vdW50ICsgaXRlbXNbaV0uYW1vdW50ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggcmVtYWluID4gMCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5hbW91bnQgPSBpdGVtLnByb3BlcnR5LmJ1bmRsZU1heDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXNbaV0uYW1vdW50ID0gcmVtYWluO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uYW1vdW50ID0gaXRlbS5hbW91bnQgKyBpdGVtc1tpXS5hbW91bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zLnNwbGljZSggaSwxICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtc1tpXS5yZW1vdmVGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIFwi6rOo65OcIO2Vqey5mOq4sFwiLGl0ZW0uYW1vdW50LGl0ZW1zW2ldLmFtb3VudCApO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uYW1vdW50ID0gaXRlbS5hbW91bnQgKyBpdGVtc1tpXS5hbW91bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXNbaV0uYW1vdW50ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtcy5zcGxpY2UoIGksIDEgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGkgPSBpICsgMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICggYnVuZGxlID09IFwiZ29sZFwiICkge1xyXG4gICAgICAgIGlmICggaXRlbS5hbW91bnQgPD0gNSApIHtcclxuICAgICAgICAgICAgVGltZXIuZGVsYXllZENhbGwoIDEwMDAsICgpID0+IGl0ZW0uY2hhbmdlSW1hZ2UoIDEsIDE0ICkgKTtcclxuICAgICAgICB9IGVsc2UgaWYgKCBpdGVtLmFtb3VudCA8PSAyMCApIHtcclxuICAgICAgICAgICAgVGltZXIuZGVsYXllZENhbGwoIDEwMDAsICgpID0+IGl0ZW0uY2hhbmdlSW1hZ2UoIDIsIDE0ICkgKTtcclxuICAgICAgICB9IGVsc2UgaWYgKCBpdGVtLmFtb3VudCA8PSAxMDAgKSB7XHJcbiAgICAgICAgICAgIFRpbWVyLmRlbGF5ZWRDYWxsKCAxMDAwLCAoKSA9PiBpdGVtLmNoYW5nZUltYWdlKCAzLCAxNCApICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgVGltZXIuZGVsYXllZENhbGwoIDEwMDAsICgpID0+IGl0ZW0uY2hhbmdlSW1hZ2UoIDQsIDE0ICkgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW50aXR5TWFuYWdlciBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICAvKipcclxuICAgICAqQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBFbnRpdHlNYW5hZ2VyLlxyXG4gICAgICogQHBhcmFtIHtXb3JsZH0gd29ybGRcclxuICAgICAqIEBtZW1iZXJvZiBFbnRpdHlNYW5hZ2VyXHJcbiAgICAgKi9cclxuICAgIG9uQWRkZWQoIHdvcmxkICkge1xyXG4gICAgICAgIHRoaXMud29ybGQgPSB3b3JsZDtcclxuXHJcblxyXG4gICAgICAgIC8vIO2UjOugiOydtOyWtCDsnbTrj5nsi5zsl5Ag7YS07LKY66as7ZWgIENyZWF0dXJlIOuqqeuhnVxyXG4gICAgICAgIC8vdGhpcy5BSVRhYmxlID0ge307ICAvLyBUT0RPOiB3ZWFrIHRhYmxlXHJcbiAgICAgICAgdGhpcy5BSVRhYmxlID0ge307XHJcblxyXG4gICAgICAgIC8vIOy6kOumre2EsCDshJzsuZgg7LC47KGwIOuqqeuhnVxyXG4gICAgICAgIHRoaXMuZW50aXRpZXNCeVh5ID0ge307IC8vIFRPRE86IHdlYWsgdGFibGVcclxuICAgICAgICAvLyDslYTsnbTthZwg7ISc7LmYIOuqqeuhnVxyXG4gICAgICAgIHRoaXMuaXRlbXNCeVh5ID0ge307XHJcblxyXG5cclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIC8vIFJlc2VydmVkIFR1cm4gRnVuYztcclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICAgICB0aGlzLnJlc2VydmVkUGxheWVyVHVybkZ1bmNzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RW50aXR5fSBvYmpcclxuICAgICAqIEBtZW1iZXJvZiBFbnRpdHlNYW5hZ2VyXHJcbiAgICAgKi9cclxuICAgIGFkZEVudGl0eSggb2JqICkge1xyXG4gICAgICAgIG9iai5hZGRlZFRvV29ybGQgPSB0cnVlO1xyXG4gICAgICAgIGlmICggdGhpcy53b3JsZC5tYXAuZ2V0VmlzaWJpbGl0eSggb2JqLnRpbGVYLCBvYmoudGlsZVkgKSA+IDAgKSB7XHJcbiAgICAgICAgICAgIG9iai5zZXRWaXNpYmxlKCBmYWxzZSApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG9iai5zZXRWaXNpYmxlKCB0cnVlICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggb2JqLmlzSXRlbSApIHtcclxuICAgICAgICAgICAgLy8g7JWE7J207YWc7J2EIOyblOuTnOyXkCDsmKzrprDri6RcclxuICAgICAgICAgICAgLy8g7JWE7J207YWc7J2AIO2VnOyekOumrOyXkCDsl6zrn6zqsJzqsIAg7Jis65286rCIIOyImCDsnojri6RcclxuICAgICAgICAgICAgbGV0IGl0ZW1zID0gdGhpcy5pdGVtc0J5WHlbb2JqLnRpbGVYICsgXCIsXCIgKyBvYmoudGlsZVldO1xyXG5cclxuICAgICAgICAgICAgaWYgKCBpdGVtcyA9PSBudWxsICkge1xyXG4gICAgICAgICAgICAgICAgLy8g67mI7Lm47JeQIOyYrOumrOugpOqzoCDtlZjripQg7KSRXHJcbiAgICAgICAgICAgICAgICBpdGVtcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtc0J5WHlbb2JqLnRpbGVYICsgXCIsXCIgKyBvYmoudGlsZVldID0gaXRlbXM7XHJcbiAgICAgICAgICAgICAgICBpdGVtcyA9IHRoaXMuaXRlbXNCeVh5W29iai50aWxlWCArIFwiLFwiICsgb2JqLnRpbGVZXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIGl0ZW1zLmxlbmd0aCA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDrsJTri6Xsl5Ag7JWE7J207YWc7J20IOydtOuvuCDsnojsnYxcclxuICAgICAgICAgICAgICAgIGlmICggb2JqLnByb3BlcnR5LmJ1bmRsZSA9PSBcImdvbGRcIiApIHtcclxuICAgICAgICAgICAgICAgICAgICAvL+qzqOuTnOuKlCDrp6jslYTrnpjroZwg65ao7Ja07KeQXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBvYmouZHJvcEFuaW1hdGlvblRpbWVyICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWxheVJlbWFpbiA9IG9iai5kcm9wQW5pbWF0aW9uVGltZXIuZ2V0RGVsYXkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRpbWVyLmRlbGF5ZWRDYWxsKCBkZWxheVJlbWFpbiArIDEwMDAsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOqzqOuTnCDsmbjsl5Ag64uk66W4IOyVhOydtO2FnOydtCDsnojripQg6rK97JqwIOyIqOq5gFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBpdGVtcy5sZW5ndGggPiAxICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5zZXRWaXNpYmxlKCBmYWxzZSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBpdGVtcy5sZW5ndGggPiAxICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNldFZpc2libGUoIGZhbHNlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBvYmouZHJvcEFuaW1hdGlvblRpbWVyICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlbGF5UmVtYWluID0gb2JqLmRyb3BBbmltYXRpb25UaW1lci5nZXREZWxheSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBUaW1lci5kZWxheWVkQ2FsbCggZGVsYXlSZW1haW4gKyAxMDAwLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlKCBmYWxzZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIGl0ZW1zW2l0ZW1zLmxlbmd0aCAtIDFdICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zW2l0ZW1zLmxlbmd0aCAtIDFdLnNldFZpc2libGUoIGZhbHNlICk7XHQvLyDquLDsobQg66eoIOychCDslYTsnbTthZwg7Iio6riw6riwXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29sbGFwc2VCdW5kbGUuY2FsbCggdGhpcywgaXRlbXMsIG9iaiApO1xyXG4gICAgICAgICAgICBpZiAoIG9iai5wcm9wZXJ0eS5idW5kbGUgPT0gXCJnb2xkXCIgKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtcy51bnNoaWZ0KCBvYmogKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goIG9iaiApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vbG9nKFwi7JWE7J207YWc7LaU6rCAXCIsb2JqLm5hbWUsaXRlbXMubGVuZ3RoLGl0ZW1zWzFdLGl0ZW1zWzJdKTtcclxuICAgICAgICAgICAgdGhpcy53b3JsZC5pdGVtTGF5ZXIuYWRkQ2hpbGQoIG9iaiApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIG9iai5pc0NyZWF0dXJlIHx8IG9iai5pc1Byb3AgKSB7XHJcbiAgICAgICAgICAgIHRoaXMud29ybGQuZW50aXR5TGF5ZXIuYWRkQ2hpbGQoIG9iaiApO1xyXG4gICAgICAgICAgICBpZiAoIG9iai5zaGFkb3dNZXNoICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53b3JsZC5zaGFkb3dMYXllci5hZGRDaGlsZCggb2JqLnNoYWRvd01lc2ggKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIG9iaiBpbnN0YW5jZW9mIE1vbnN0ZXIgJiYgb2JqLkFJICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5BSVRhYmxlW29iai5pZF0gPSBvYmo7XHJcbiAgICAgICAgICAgICAgICAvLyBhcnJheeuhnCDtlZjsp4Ag7JWK7J2AIOydtOycoOuKlCAj7J20IOyemOuqu+uQnCDqsJLsnYQg64+M66Ck7KSEIOyImCDsnojquLAg65WM66y4XHJcbiAgICAgICAgICAgIH1cclxuXHRcdFxyXG4gICAgICAgICAgICBpZiAoIHRoaXMuZW50aXRpZXNCeVh5W29iai50aWxlWCArIFwiLFwiICsgb2JqLnRpbGVZXSApIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciggXCLimJ7imJ7imJ4g7YGs66as7LOQ6rCAIOyeiOuKlCDsnITsuZjsl5Ag65iQIO2BrOumrOyzkOulvCDsg53shLHtlZjroKTtlahcIiApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZW50aXRpZXNCeVh5W29iai50aWxlWCArIFwiLFwiICsgb2JqLnRpbGVZXSA9IG9iajtcclxuICAgICAgICAgICAgaWYgKCBvYmogaW5zdGFuY2VvZiBQbGF5ZXIgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHgsIHkgfSA9IG9iai5nZXRQb3NpdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMud29ybGQuc2lnaHRNYW5hZ2VyLm1vdmVFeWVUbyggeCx5ICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndvcmxkLnNpZ2h0TWFuYWdlci5tb3ZlVmlld1RvKCB4LHkgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMud29ybGQub25FbnRlckZyYW1lKCk7IC8vIOyLnOyVvOqwseyLoFxyXG4gICAgICAgICAgICAgICAgdGhpcy53b3JsZC5zaWdodE1hbmFnZXIucmVmcmVzaEVudGl0eVZpc2liaWxpdHkoKTtcclxuICAgICAgICAgICAgICAgIG9iai5wbGF5UG9zaXRpb25Tb3VuZCggb2JqLnRpbGVYLCBvYmoudGlsZVkgKTsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy9vYmouc2V0VmlzaWJsZSh0aGlzLmNhbkJlU2VlbihvYmoudGlsZVgsb2JqLnRpbGVZLDEpKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVFbnRpdHkoIG9iaiApIHtcclxuICAgICAgICB0aGlzLmRldGFjaEVudGl0eSggb2JqLCB0cnVlICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g66Gc7KeB66eMIOuWvOqzoCDsiqTtlITrnbzsnbTtirjripQg65GU64ukXHJcbiAgICBkZXRhY2hFbnRpdHkoIG9iaiwgcmVtb3ZlU3ByaXRlICkge1xyXG4gICAgICAgIG9iai5hZGRlZFRvV29ybGQgPSBmYWxzZTtcclxuICAgICAgICBpZiAoIHJlbW92ZVNwcml0ZSApIHtcclxuICAgICAgICAgICAgb2JqLnJlbW92ZUZyb21QYXJlbnQoKTtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLmRyb3BBbmltYXRpb25UaW1lciApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJvcEFuaW1hdGlvblRpbWVyLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJvcEFuaW1hdGlvblRpbWVyID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIG9iai5pc0l0ZW0gKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5pdGVtc0J5WHlbb2JqLnRpbGVYICsgXCIsXCIgKyBvYmoudGlsZVldO1xyXG5cclxuICAgICAgICAgICAgaWYgKCBpdGVtcyApIHtcclxuICAgICAgICAgICAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHYgPSBpdGVtc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB2ID09IG9iaiApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlbW92ZUZyb21QYXJlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBpID09IGl0ZW1zLmxlbmd0aCAtIDEgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGkgPiAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zW2kgLSAxXS5zZXRWaXNpYmxlKCB0cnVlICk7IC8vIOq3uCDri6TsnYwg7JWE7J207YWcIOuztOyXrOyjvOq4sFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zLnNwbGljZSggaSwgMSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGl0ZW1zLmxlbmd0aCA9PSAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuaXRlbXNCeVh5W29iai50aWxlWCArIFwiLFwiICsgb2JqLnRpbGVZXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIFwi7JuU65Oc7JeQIOyhtOyerO2VmOyngCDslYrripQg7JWE7J207YWc7J2EIOyblOuTnOyXkOyEnCDsgq3soJztlZjroKTqs6DtlahcIiApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICggb2JqLmlzQ3JlYXR1cmUgfHwgb2JqLmlzUHJvcCApIHtcclxuICAgICAgICAgICAgaWYgKCBvYmouc2hhZG93TWVzaCAmJiByZW1vdmVTcHJpdGUgKSB7XHJcbiAgICAgICAgICAgICAgICBvYmouc2hhZG93TWVzaC5yZW1vdmVGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCBvYmouQUkgKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5BSVRhYmxlW29iai5pZF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCB0aGlzLmVudGl0aWVzQnlYeVtvYmoudGlsZVggKyBcIixcIiArIG9iai50aWxlWV0gPT0gb2JqICkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuZW50aXRpZXNCeVh5W29iai50aWxlWCArIFwiLFwiICsgb2JqLnRpbGVZXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyDqsJzssrTrpbwg7Ja764qUIOycoO2LuOumrO2LsCDtlajsiJhcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdGlsZVhcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0aWxlWVxyXG4gICAgICogQHJldHVybnMge0VudGl0eX1cclxuICAgICAqIEBtZW1iZXJvZiBFbnRpdHlNYW5hZ2VyXHJcbiAgICAgKi9cclxuICAgIGdldEVudGl0eSggdGlsZVgsIHRpbGVZICkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVudGl0aWVzQnlYeVt0aWxlWCArIFwiLFwiICsgdGlsZVldO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6rCc7LK0IOyghOyytOulvCDslrvslrTsmKjri6RcclxuICAgICAqIHBhaXJz64qUIOyInOyEnOulvCDrs7TsnqXtlZjsp4Ag7JWK6riwIOuVjOusuOyXkCDsnbTqsbgg7I2o7JW87ZWoXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge0VudGl0eVtdfVxyXG4gICAgICogQG1lbWJlcm9mIEVudGl0eU1hbmFnZXJcclxuICAgICAqL1xyXG4gICAgZ2V0QWxsRW50aXRpZXMoKSB7XHJcbiAgICAgICAgY29uc3QgdCA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKCBsZXQgeSA9IDA7IHkgPCB0aGlzLndvcmxkLm1hcC5oZWlnaHQ7IHkrKyApIHtcclxuICAgICAgICAgICAgZm9yICggbGV0IHggPSAwOyB4IDwgdGhpcy53b3JsZC5tYXAud2lkdGg7IHgrKyApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLmdldEVudGl0eSggeCwgeSApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggdiApIHtcclxuICAgICAgICAgICAgICAgICAgICB0LnB1c2goIHYgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIOyVhOydtO2FnCDrqqnroZ3snYQg64+M66Ck7KSA64ukXHJcbiAgICBnZXRJdGVtcyggdGlsZVgsIHRpbGVZICkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1zQnlYeVt0aWxlWCArIFwiLFwiICsgdGlsZVldO1xyXG4gICAgfVxyXG5cclxuICAgIGdldE51bU9mSXRlbXMoIHRpbGVYLCB0aWxlWSApIHtcclxuICAgICAgICBjb25zdCBpdGVtcyA9IHRoaXMuaXRlbXNCeVh5W3RpbGVYICsgXCIsXCIgKyB0aWxlWV07XHJcblxyXG4gICAgICAgIHJldHVybiBpdGVtcyA/IGl0ZW1zLmxlbmd0aCA6IDA7XHJcbiAgICB9XHJcblxyXG4gICAgbW92ZVRvcEl0ZW1Ub0JvdHRvbSggdGlsZVgsIHRpbGVZICkge1xyXG4gICAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5nZXRJdGVtcyggdGlsZVgsIHRpbGVZICk7XHJcblxyXG4gICAgICAgIGlmICggaXRlbXMgJiYgaXRlbXMubGVuZ3RoID4gMSApIHtcclxuICAgICAgICAgICAgY29uc3QgdG9wSXRlbSA9IGl0ZW1zW2l0ZW1zLmxlbmd0aF07XHJcblxyXG4gICAgICAgICAgICB0b3BJdGVtLnNldFZpc2libGUoIGZhbHNlICk7XHJcbiAgICAgICAgICAgIGl0ZW1zW2l0ZW1zLmxlbmd0aF0gPSBudWxsO1xyXG4gICAgICAgICAgICBpdGVtcy51bnNoaWZ0KCB0b3BJdGVtICk7XHJcbiAgICAgICAgICAgIGl0ZW1zW2l0ZW1zLmxlbmd0aCAtIDFdLnNldFZpc2libGUoIHRydWUgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RW50aXRpZXNJblJlY3QoIHgxLCB5MSwgeDIsIHkyICkge1xyXG4gICAgICAgIGNvbnN0IHQgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yICggY29uc3QgayBpbiB0aGlzLmVudGl0aWVzQnlYeSApIHtcclxuICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMuZW50aXRpZXNCeVh5W2tdO1xyXG5cclxuICAgICAgICAgICAgaWYgKCB2LnRpbGVYID49IHgxICYmIHYudGlsZVggPD0geDIgJiYgdi50aWxlWSA+PSB5MSAmJiB2LnRpbGVZIDw9IHkyICkge1xyXG4gICAgICAgICAgICAgICAgdC5wdXNoKCB2ICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyTW9uc3Rlck1vb2QoKSB7XHJcbiAgICAgICAgZm9yICggY29uc3QgayBpbiB0aGlzLmVudGl0aWVzQnlYeSApIHtcclxuICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMuZW50aXRpZXNCeVh5W2tdO1xyXG5cclxuICAgICAgICAgICAgaWYgKCB2LnNob3dNb29kICkge1xyXG4gICAgICAgICAgICAgICAgdi5zaG93TW9vZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgZG9FbmVteVR1cm4oIGRlbGF5ICkge1xyXG4gICAgICAgIHRoaXMuZG9EZWxheWVkRW5lbXlUdXJuSWZFeGlzdCggKCkgPT4ge1xyXG4gICAgICAgICAgICAvL2xvZyhcIuyggSDthLTsnYQg7Iuc7J6R7ZWY7J6QXCIsZGVsYXkpO1xyXG4gICAgICAgICAgICB0aGlzLmVuZW15VHVyblRpbWVyID0gVGltZXIuZGVsYXllZENhbGwoIGRlbGF5LCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvL2xvZyhcIuyggSDthLTsnYQg7Iuc7J6R7ZWc64ukXCIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBFdmVudCggXCJlbmVteVR1cm5cIiApO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMud29ybGQuZGlzcGF0Y2hFdmVudCggZSApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbmVteVR1cm5UaW1lciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzLmNhbGwoIHRoaXMgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZG9QbGF5ZXJUdXJuKCk7XHJcbiAgICAgICAgICAgIH0gKTtcclxuICAgICAgICB9ICk7XHJcbiAgICB9XHJcblxyXG4gICAgd2FpdCggZGVsYXksIHVuc3RvcHBhYmxlICkge1xyXG4gICAgICAgIGlmICggdW5zdG9wcGFibGUgKSB7XHJcbiAgICAgICAgICAgIEdMT0JBTC5pbnRlcmZhY2UuY3Vyc29yLmxvY2soKTtcclxuICAgICAgICB9IGVsc2UgaWYgKCB0aGlzLndhaXRTa2lwICkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMud2FpdFRpbWVyID0gVGltZXIuZGVsYXllZENhbGwoIGRlbGF5LCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMud2FpdFRpbWVyID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKCB1bnN0b3BwYWJsZSApIHtcclxuICAgICAgICAgICAgICAgIEdMT0JBTC5pbnRlcmZhY2UuY3Vyc29yLnVubG9jaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSApO1xyXG4gICAgfVxyXG5cclxuICAgIGRvRGVsYXllZEVuZW15VHVybklmRXhpc3QoIGNhbGxiYWNrLCBkYXRhICkge1xyXG4gICAgICAgIGlmICggdGhpcy5lbmVteVR1cm5UaW1lciApIHtcclxuICAgICAgICAgICAgLy/snbTrr7gg64yA6riw7KSR7J24IOyggSDthLTsnbQg7J6I64qUIOqyveyasCDrsJTroZwg7Iuk7ZaJ7ZWc64ukLlxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyggXCLrjIDquLDspJEg7KCBIO2EtOydtCDsnojri6RcIiApO1xyXG4gICAgICAgICAgICB0aGlzLmVuZW15VHVyblRpbWVyLnN0b3AoKTtcclxuICAgICAgICAgICAgdGhpcy5lbmVteVR1cm5UaW1lciA9IG51bGw7XHJcbiAgICAgICAgICAgIHByb2Nlc3MuY2FsbCggdGhpcyApO1xyXG4gICAgICAgICAgICBjYWxsYmFjay5jYWxsKCBkYXRhICk7XHJcbiAgICAgICAgfSBlbHNlIGlmICggdGhpcy53YWl0VGltZXIgKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCBcIuuMgOq4sOykkSB3YWl06rCAIOyeiOuLpFwiICk7XHJcbiAgICAgICAgICAgIHRoaXMud2FpdFRpbWVyLnN0b3AoKTtcclxuICAgICAgICAgICAgdGhpcy53YWl0VGltZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLndhaXRTa2lwID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwi64yA6riw7KSRIOyggSDthLTsnbQg7JeG64ukXCIpO1xyXG4gICAgICAgICAgICBjYWxsYmFjayggZGF0YSApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIO2UjOugiOydtOyWtCDthLQg7LKY66asXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBkb1BsYXllclR1cm4oKSB7XHJcbiAgICAgICAgdGhpcy53b3JsZC5wcm9jZXNzRGF0ZVRpbWUoKTtcclxuICAgICAgICBjb25zdCBlID0gbmV3IEV2ZW50KCBcInBsYXllclR1cm5cIiApO1xyXG5cclxuICAgICAgICB0aGlzLndvcmxkLmRpc3BhdGNoRXZlbnQoIGUgKTtcclxuICAgICAgICB0aGlzLndhaXRTa2lwID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy53b3JsZC5zaWdodE1hbmFnZXIucmVmcmVzaEVudGl0eVZpc2liaWxpdHkoKTtcclxuICAgICAgICAvLyDslYjsoITtlZjqsowg67CA66awIOyekeyXheydhCDtlaAg7IiYIOyeiOuKlCDsi5zqsIRcclxuICAgICAgICBpZiAoIHRoaXMucmVzZXJ2ZWRQbGF5ZXJUdXJuRnVuY3MubGVuZ3RoID4gMCApIHtcclxuICAgICAgICAgICAgR0xPQkFMLmludGVyZmFjZS5oaWRlSW5mbygpO1xyXG4gICAgICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmN1cnNvci5oaWRlQXV0b0FjdGlvbigpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyggXCLsmIjslb3snpHsl4Xsi6TtlolcIiApO1xyXG4gICAgICAgICAgICBmb3IgKCBjb25zdCBpIGluIHRoaXMucmVzZXJ2ZWRQbGF5ZXJUdXJuRnVuY3MgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2ID0gdGhpcy5yZXNlcnZlZFBsYXllclR1cm5GdW5jc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIHZbMF0uY2FsbCggdlsxXSApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXJ2ZWRQbGF5ZXJUdXJuRnVuY3MgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXJ2ZWRQbGF5ZXJUdXJuRnVuY3MgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgR0xPQkFMLmludGVyZmFjZS5jdXJzb3IucHJvY2Vzc1Jlc2VydmVkQ2xpY2soKTtcclxuICAgICAgICBHTE9CQUwucGxheWVyLnByb2Nlc3NBdXRvTW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOyYiOyVvSDsnpHsl4Ug7LaU6rCAXHJcbiAgICAvLyB0cnVlIOumrO2EtO2VmOuptCDsnbTtm4Qg7J6R7JeF7J2AIOyLpO2WieyViO2VqFxyXG4gICAgc2FmZUV4ZWN1dGUoIGZ1bmMsIGRhdGEgKSB7XHJcbiAgICAgICAgaWYgKCB0aGlzLmlzVHVyblByb2Nlc3NpbmcoKSApIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNlcnZlZFBsYXllclR1cm5GdW5jcy5wdXNoKCBbZnVuYywgZGF0YV0gKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmhpZGVJbmZvKCk7XHJcbiAgICAgICAgICAgIEdMT0JBTC5pbnRlcmZhY2UuY3Vyc29yLmhpZGVBdXRvQWN0aW9uKCk7XHJcbiAgICAgICAgICAgIGZ1bmMoIGRhdGEgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyDthLQg6rCV7KCcIOyiheujjFxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgaXNUdXJuUHJvY2Vzc2luZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbmVteVR1cm5UaW1lciAhPSBudWxsIHx8IHRoaXMud2FpdFRpbWVyICE9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yY2VTdG9wVHVyblByb2Nlc3NpbmcoKSB7XHJcbiAgICAgICAgaWYgKCB0aGlzLmVuZW15VHVyblRpbWVyICE9IG51bGwgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5lbXlUdXJuVGltZXIuc3RvcCgpO1xyXG4gICAgICAgICAgICB0aGlzLmVuZW15VHVyblRpbWVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCB0aGlzLndhaXRUaW1lciAhPSBudWxsICkge1xyXG4gICAgICAgICAgICB0aGlzLndhaXRUaW1lci5zdG9wKCk7XHJcbiAgICAgICAgICAgIHRoaXMud2FpdFRpbWVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4iLCJpbXBvcnQgeyBlYXNpbmcsIE1lc2gsIFRleHR1cmVQYWNrLCBVdGlscywgTWF0cml4LCBTaGFwZSwgVGltZXIsIFRleHRGaWVsZCwgRXZlbnQsIEV2ZW50RGlzcGF0Y2hlcixcclxuICAgICAgICAgU3ByaXRlLCBTdGFnZSwgQml0bWFwLCBUZXh0dXJlLCBUZXh0dXJlQmFzZSwgQXBwbGljYXRpb24sIGFwcGxpY2F0aW9uLCBzdGFnZSB9IGZyb20gXCJAZW5naW5lL2ZsYXRmYXN0XCI7XHJcblx0XHJcbmltcG9ydCBDT05GSUcgZnJvbSBcIi4uL2NvbmZpZ1wiO1xyXG5pbXBvcnQgQ3JlYXR1cmUgZnJvbSBcIi4uL2VudGl0eS9jcmVhdHVyZVwiO1xyXG5pbXBvcnQgUmFuZG9tIGZyb20gXCJAbGliL3JhbmRvbVwiO1xyXG5pbXBvcnQgVmlzaWJpbGl0eVRpbGUgZnJvbSBcIkBsaWIvdmlzaWJpbGl0eVRpbGVcIjtcclxuXHJcbi8vIOunteydmCB4LHkg64qUIOuqqOuRkCDtg4Dsnbwg64uo7JyEIOydtOuLpFxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZU1hcCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnJhbmRvbUdlbmVyYXRvciA9IG5ldyBSYW5kb20oIDAgKTtcclxuICAgICAgICB0aGlzLnJhbmRvbSA9IHRoaXMucmFuZG9tR2VuZXJhdG9yLnJhbmRvbS5iaW5kKCB0aGlzLnJhbmRvbUdlbmVyYXRvciApO1xyXG4gICAgICAgIHRoaXMubGlnaHRMaXN0ID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge251bWJlcltdfSAqL1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAvKiogQHR5cGUge251bWJlcn0gKi9cclxuICAgICAgICB0aGlzLndpZHRoID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge29iamVjdFtdfSAqL1xyXG4gICAgICAgIHRoaXMucHJvcGVydHlUYWJsZSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtvYmplY3RbXX0gKi9cclxuICAgICAgICB0aGlzLnRpbGVzID0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGEoIHgsIHkgKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVt5ICogdGhpcy53aWR0aCArIHhdO1xyXG4gICAgfVxyXG5cclxuICAgIHNldERhdGEoIHgsIHksIHYgKSB7XHJcbiAgICAgICAgbGV0IGk7XHJcblxyXG4gICAgICAgIGlmICggdiApIHtcclxuICAgICAgICAgICAgaSA9IHkgKiB0aGlzLndpZHRoICsgeDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpID0geDtcclxuICAgICAgICAgICAgdiA9IHk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGF0YVtpXSA9IHY7XHJcbiAgICAgICAgdGhpcy5wcm9wZXJ0eVRhYmxlW2ldID0gbmV3IFByb3h5KCB7fSx0aGlzLl9fbXQgKTtcclxuICAgICAgICBjb25zdCB0aWxlUHJvcCA9IHRoaXMucHJvcGVydHlUYWJsZVtpXTtcclxuXHJcbiAgICAgICAgLy9UT0RPOiB4LHnrpbwg6riw66Gd7ZWY64qUIOqyg+ydtCDrgq3ruYRcclxuICAgICAgICB0aWxlUHJvcC5pZCA9IHRoaXMudGlsZXNbdl0uaWQ7XHJcbiAgICAgICAgdGlsZVByb3AueCA9IGkgJSB0aGlzLndpZHRoO1xyXG4gICAgICAgIHRpbGVQcm9wLnkgPSBNYXRoLmZsb29yKCBpIC8gdGhpcy53aWR0aCApO1xyXG4gICAgICAgIGlmICggdGlsZVByb3AubGlnaHQgJiYgdGlsZVByb3AubGlnaHQgPT0gMSApIHtcclxuICAgICAgICAgICAgdGhpcy5saWdodExpc3QucHVzaCggeyB4OiB0aWxlUHJvcC54LCB5OiB0aWxlUHJvcC55LCBsaWdodDogdGlsZVByb3AubGlnaHQsIGNvbG9yOiB0aWxlUHJvcC5jb2xvciAhPSBudWxsID8gdGlsZVByb3AuY29sb3IgOiAweGZmZmZmZiB9ICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggdGlsZVByb3AuZW52U291bmQgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW52U291bmRzLnB1c2goIHsgeDogdGlsZVByb3AueCwgeTogdGlsZVByb3AueSwgc291bmQ6IHRpbGVQcm9wLmVudlNvdW5kIH0gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RGF0YUJ5Q2hhciggeCwgeSwgYyApIHtcclxuICAgICAgICB0aGlzLnNldERhdGEoIHgsIHksIEdhbWVNYXAudGlsZVN0cmluZ0RhdGFbY10uaWQgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQcm9wZXJ0eSggeCwgeSApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0eVRhYmxlW3kgKiB0aGlzLndpZHRoICsgeF07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VmlzaWJpbGl0eSggeCwgeSApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52aXNpYmlsaXR5VGlsZUNoZWNrZXIuaXNWaXNpYmxlKCB4LCB5ICk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIO2BrOumrOyzkCBpZCDtmLnsnYAgY29sLHJvdyDroZzrtoDthLAg7IaN7ISx7J2EIOyWu+yWtOyYqOuLpFxyXG4gICAgZ2V0RW50aXR5UHJvcGVydHkoIGNvbCwgcm93ICkge1xyXG4gICAgICAgIGxldCBpZDtcclxuXHJcbiAgICAgICAgaWYgKCByb3cgKSB7XHJcbiAgICAgICAgICAgIGlkID0gKCByb3cgLSAxICkgKiB0aGlzLmNyZWF0dXJlUGVyUm93ICsgY29sO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlkID0gY29sO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXR1cmVQcm9wZXJ0eVRhYmxlW2lkXTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgYnVpbGRMaWdodE1hcCgpIHtcclxuICAgICAgICBjb25zdCBsbSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGxpdCA9IFtdO1xyXG4gICAgICAgIGNvbnN0IFt3LCBoXSA9IFt0aGlzLndpZHRoLHRoaXMuaGVpZ2h0XTtcclxuICAgICAgICAvL+2DgOydvCDrsJ3quLAg6rOE7IKwXHJcbiAgICAgICAgbGV0IGZhc3RNb2RlOyAvLz0gdHJ1ZTtcclxuXHJcbiAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgdyAqIGg7IGkrKyApIHtcclxuICAgICAgICAgICAgbGl0W2ldID0gWzcwLCA3NSwgODBdOyAvLyDslbDruYTslrjtirhcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbWFzayA9IFZpc2liaWxpdHlUaWxlLm1hc2s7XHJcblxyXG4gICAgICAgIGZvciAoIGNvbnN0IGkgaW4gdGhpcy5saWdodExpc3QgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpZ2h0ID0gdGhpcy5saWdodExpc3RbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IHN1bW1lZE1hc2sgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF07XHJcblxyXG4gICAgICAgICAgICBmb3IgKCBsZXQgeSA9IE1hdGgubWF4KCAwLCBsaWdodC55IC0gMTUgKTsgeSA8PSBNYXRoLm1pbiggaCAtIDEsIGxpZ2h0LnkgKyAxNSApOyB5KysgKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKCBsZXQgeCA9IE1hdGgubWF4KCAwLCBsaWdodC54IC0gMTUgKTsgeCA8PSBNYXRoLm1pbiggdyAtIDEsIGxpZ2h0LnggKyAxNSApOyB4KysgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLmdldFByb3BlcnR5KCB4LCB5ICkud2FsbCA+PSAyICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDrp4jsiqTtgazrpbwg66eM65Og64ukXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gKCAoIGxpZ2h0LnkgLSB5ICkgKyAxNiAtIDEgKSAqIDMxICsgKCBsaWdodC54IC0geCApICsgMTYgLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFydEluZGV4ID0gbWFzay5zdGFydEluZGV4W2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2tpcCA9IG1hc2suc2tpcFtpbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gbWFzay5jb3VudFtpbmRleF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHN0YXJ0SW5kZXggPiAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g66eI7Iqk7YGs7J2YIOyyqyDqsJLsnYAgeey2lSDsi5zsnpEg7JyE7LmYLiAx67aA7YSwIOyLnOyeke2VqFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggbGV0IGogPSAwOyBqIDwgY291bnQ7IGorKyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDrp4jsiqTtgawg6rCS7J2EIOuqqOuRkCBPUu2VtOyEnCDtlanss5DrkZTri6RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdW1tZWRNYXNrW3NraXAgKyBqXSB8PSBtYXNrLmRhdGFbc3RhcnRJbmRleCAtIDEgKyBqXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKCBsZXQgeSA9IE1hdGgubWF4KCAwLCBsaWdodC55IC0gMTUgKTsgeSA8PSBNYXRoLm1pbiggaCAtIDEsIGxpZ2h0LnkgKyAxNSApOyB5KysgKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKCBsZXQgeCA9IE1hdGgubWF4KCAwLCBsaWdodC54IC0gMTUgKTsgeCA8PSBNYXRoLm1pbiggdyAtIDEsIGxpZ2h0LnggKyAxNSApOyB4KysgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgW3JlbFgsIHJlbFldID0gW2xpZ2h0LnggLSB4LCBsaWdodC55IC0geV07XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IFtyLCBnLCBiXSA9IFswLCAwLCAwXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAoICggfnN1bW1lZE1hc2tbcmVsWSArIDE1XSApICYgKCAxIDw8ICggcmVsWCArIDE1ICkgKSApICE9IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IFtsciwgbGcsIGxiXSA9IFV0aWxzLmhleDJyZ2JhKCBsaWdodC5jb2xvciApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXN0ID0gKCByZWxYICogcmVsWCArIHJlbFkgKiByZWxZICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDrnbzsnbTtirjripQg6rGw66as7J2YIOygnOqzseyXkCDrsJjruYTroYDtlZzri6QuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBNYXRoLm1pbiggMjU1LGxyIC8gKCBkaXN0ICogMSApICogMjU1ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGcgPSBNYXRoLm1pbiggMjU1LCBsZyAvICggZGlzdCAqIDQgKSAqIDI1NSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiID0gTWF0aC5taW4oIDI1NSwgbGIgLyAoIGRpc3QgKiAyICkgKiAyNTUgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbGl0W3kgICogdyArIHhdWzBdICs9IHI7XHJcbiAgICAgICAgICAgICAgICAgICAgbGl0W3kgICogdyArIHhdWzFdICs9IGc7XHJcbiAgICAgICAgICAgICAgICAgICAgbGl0W3kgICogdyArIHhdWzJdICs9IGI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICggbGV0IHkgPSAwOyB5IDwgdGhpcy5oZWlnaHQ7IHkrKyApIHtcclxuICAgICAgICAgICAgZm9yICggbGV0IHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrICkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHIgPSB0aGlzLmdldFByb3BlcnR5KCB4LCB5ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBwci5pbGx1bSA9PSAxICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB5ICogdGhpcy53aWR0aCArIHg7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgW3IsIGcsIGJdID0gVXRpbHMuaGV4MnJnYmEoIHByLmNvbG9yICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxpdFtpXVswXSA9IHIgKiAyNTU7XHJcbiAgICAgICAgICAgICAgICAgICAgbGl0W2ldWzFdID0gZyAqIDI1NTtcclxuICAgICAgICAgICAgICAgICAgICBsaXRbaV1bMl0gPSBiICogMjU1O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDsvZTrhIjrpbwg7JyE7ZW07IScIDJ4MiDruJTrn6xcclxuICAgICAgICBmb3IgKCBsZXQgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrICkge1xyXG4gICAgICAgICAgICBmb3IgKCBsZXQgeCA9IDA7IHggPCB0aGlzLndpZHRoOyB4KysgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpID0geSAqIHRoaXMud2lkdGggKyB4O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggeCA9PSAwIHx8IHkgPT0gMCApIHtcclxuICAgICAgICAgICAgICAgICAgICBsbVtpXSA9IDA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNyID0gTWF0aC5mbG9vciggTWF0aC5taW4oIDI1NSwgKCBsaXRbaV1bMF0gKyBsaXRbaSAtIDFdWzBdICsgbGl0W2kgLSB3XVswXSArIGxpdFtpIC0gMSAtIHddWzBdICkgLyA0ICkgKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZyA9IE1hdGguZmxvb3IoIE1hdGgubWluKCAyNTUsICggbGl0W2ldWzFdICsgbGl0W2kgLSAxXVsxXSArIGxpdFtpIC0gd11bMV0gKyBsaXRbaSAtIDEgLSB3XVsxXSApIC8gNCApICk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2IgPSBNYXRoLmZsb29yKCBNYXRoLm1pbiggMjU1LCAoIGxpdFtpXVsyXSArIGxpdFtpIC0gMV1bMl0gKyBsaXRbaSAtIHddWzJdICsgbGl0W2kgLSAxIC0gd11bMl0gKSAvIDQgKSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsbVtpXSA9IHNyICogMHgxMDAwMCArIHNnICogMHgxMDAgKyBzYjtcclxuICAgICAgICAgICAgICAgICAgICAvL3Auc2V0T3ZlcnJpZGVDb2xvcihsbVtpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9wLnNldFBvc2l0aW9uKHgtMSx5LTEpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vcnQuZHJhdyhwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5saWdodE1hcCA9IGxtO1xyXG4gICAgICAgIC8vbGV0IGIgPSBuZXcgQml0R2FtZU1hcChydCk7XHJcbiAgICAgICAgLy9iLnNldFNjYWxlKDMpO1xyXG4gICAgICAgIC8vYi5zZXRZKDUwKTtcclxuICAgICAgICAvL19zdGFnZS5hZGRDaGlsZChiKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRMaWdodE1hcCggeCwgeSApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5saWdodE1hcFsoIHkgLSAxICkgKiB0aGlzLndpZHRoICsgeF07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VGlsZUxpZ2h0TWFwKCB4LCB5ICkge1xyXG4gICAgICAgIGNvbnN0IGkgPSAoIHkgLSAxICkgKiB0aGlzLndpZHRoICsgeDtcclxuXHJcbiAgICAgICAgaWYgKCB4ID4gMSAmJiB4IDwgdGhpcy53aWR0aCAmJiB5ID4gMSAmJiB5IDwgdGhpcy5oZWlnaHQgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbdGhpcy5saWdodE1hcFtpXSwgdGhpcy5saWdodE1hcFtpICsgMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saWdodE1hcFtpICsgdGhpcy53aWR0aF0sIHRoaXMubGlnaHRNYXBbaSArIDEgKyB0aGlzLndpZHRoXV07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgYzEgPSAoIHggPiAxICYmIHkgPiAxICkgPyB0aGlzLmxpZ2h0TWFwW2ldIDogMDtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSAoIHggPCB0aGlzLndpZHRoICYmIHkgPiAxICkgPyB0aGlzLmxpZ2h0TWFwW2kgKyAxXSA6IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gKCB4ID4gMSAmJiB5IDwgdGhpcy5oZWlnaHQgKSA/IHRoaXMubGlnaHRNYXBbaSArIHRoaXMud2lkdGhdIDogMDtcclxuICAgICAgICAgICAgY29uc3QgYzQgPSAoIHggPCB0aGlzLndpZHRoICYmIHkgPCB0aGlzLmhlaWdodCApID8gdGhpcy5saWdodE1hcFtpICsgdGhpcy53aWR0aCArIDFdIDogMDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBbYzEsIGMyLCBjMywgYzRdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyDsiqTtirjrp4Eg66Gc642UXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBsb2FkU3RyaW5nKCBzICkge1xyXG4gICAgICAgIGNvbnN0IHQgPSBzLnNwbGl0KCBcIlxcblwiICk7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gdC5sZW5ndGg7XHJcbiAgICAgICAgY29uc3Qgd2lkdGggPSB0WzBdLmxlbmd0aDtcclxuXHJcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMudGlsZVdpZHRoID0gQ09ORklHLldvcmxkLnRpbGVXaWR0aDtcclxuICAgICAgICB0aGlzLnRpbGVIZWlnaHQgPSBDT05GSUcuV29ybGQudGlsZUhlaWdodDtcclxuICAgICAgICB0aGlzLnRpbGVQZXJSb3cgPSBDT05GSUcuV29ybGQudGlsZVBlclJvdztcclxuICAgICAgICB0aGlzLmNyZWF0dXJlUGVyUm93ID0gQ3JlYXR1cmUucGVyUm93O1xyXG4gICAgICAgIHRoaXMuZW52U291bmRzID0gW107XHJcblxyXG4gICAgICAgIHRoaXMudGlsZXMgPSBbXTtcclxuICAgICAgICBmb3IgKCBjb25zdCBrIGluIEdhbWVNYXAudGlsZVN0cmluZ0RhdGEgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHYgPSBHYW1lTWFwLnRpbGVTdHJpbmdEYXRhW2tdO1xyXG5cclxuICAgICAgICAgICAgdi5jaGFyID0gaztcclxuICAgICAgICAgICAgdGhpcy50aWxlc1t2LmlkXSA9IHY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmRhdGEgPSBbXTtcclxuICAgICAgICBmb3IgKCBsZXQgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKyApIHtcclxuICAgICAgICAgICAgLy9sb2codFt5XSk7XHJcbiAgICAgICAgICAgIGZvciAoIGxldCB4ID0gMDsgeCA8IHdpZHRoOyB4KysgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0aWxlID0gR2FtZU1hcC50aWxlU3RyaW5nRGF0YVt0W3ldLnN1YnN0ciggeCwxICldO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggIXRpbGUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIGDsu6jrsoTtjIXtlaAg7IiYIOyXhuuKlCDtg4DsnbwgJHt0aWxlfSDrsJzqsqwgJHt4fSwgJHt5fWAgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW3kgKiB3aWR0aCArIHhdID0gdGlsZS5pZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRhdGEgPSBuZXcgUHJveHkoIHRoaXMuZGF0YSwge1xyXG4gICAgICAgICAgICBnZXQ6ICggdGFyZ2V0LCBuYW1lICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5hbWUgaW4gdGFyZ2V0ID8gdGFyZ2V0W25hbWVdIDogMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gKTtcclxuICAgICAgICAvL3NldG1ldGF0YWJsZSh0aGlzLmRhdGEsIHsgX19pbmRleDogZnVuY3Rpb24gKHQsIGspIHsgcmV0dXJuIDA7IH0gfSk7XHJcbiAgICAgICAgdGhpcy5saWdodExpc3QgPSBbXTtcclxuICAgICAgICAvLyDsho3shLEg7YWM7J2067iU7J2EIFRJTEVEIOuNsOydtO2EsOyXkOyEnCDsnb3slrTshJwgcHJvcGVydHlUYWJsZeyXkCDsoIDsnqXtlZzri6QuXHJcbiAgICAgICAgLy8gcHJvcGVydHlUYWJsZVtHYW1lTWFwSW5kZXhd66GcIOyWu+yWtOyYrCDsiJgg7J6I64ukXHJcblxyXG4gICAgICAgIHRoaXMucHJvcGVydHlUYWJsZSA9IFtdO1xyXG4gICAgICAgIC8vc2V0bWV0YXRhYmxlKHRoaXMucHJvcGVydHlUYWJsZSwgeyBfX2luZGV4OiBmdW5jdGlvbiAodCwgaykgeyByZXR1cm4gR2FtZU1hcC5kZWZhdWx0UHJvcGVydHk7IH0gfSk7XHJcbiAgICAgICAgdGhpcy5wcm9wZXJ0eVRhYmxlID0gbmV3IFByb3h5KCB0aGlzLnByb3BlcnR5VGFibGUsIHtcclxuICAgICAgICAgICAgZ2V0OiAoIHRhcmdldCwgbmFtZSApID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuYW1lIGluIHRhcmdldCA/IHRhcmdldFtuYW1lXSA6IEdhbWVNYXAuZGVmYXVsdFByb3BlcnR5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgICAgICB0aGlzLl9fbXQgPSB7XHJcbiAgICAgICAgICAgIGdldDogKCB0YXJnZXQsIG5hbWUgKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmFtZSBpbiB0YXJnZXQgPyB0YXJnZXRbbmFtZV0gOiAoIHRoaXMudGlsZXNbdGFyZ2V0LmlkXVtuYW1lXSB8fCBHYW1lTWFwLmRlZmF1bHRQcm9wZXJ0eVtuYW1lXSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyDtmZTrqbQg6rWs7ISdIOyymOumrOyaqSDquLDrs7gg7IaN7ISx6rCSXHJcbiAgICAgICAgdGhpcy5fX2RwciA9IEpTT04ucGFyc2UoIEpTT04uc3RyaW5naWZ5KCBHYW1lTWFwLmRlZmF1bHRQcm9wZXJ0eSApICk7XHJcbiAgICAgICAgdGhpcy5fX2Rwci5icmlkZ2UgPSAxOyAvL+2ZlOuptCDqtazshJ0g7LKY66asXHJcbiAgICAgICAgdGhpcy5fX2Rwci5ibG9jayA9IDE7IC8v7ZmU66m0IOq1rOyEnSDsspjrpqxcclxuICAgICAgICB0aGlzLl9fZHByLnJvYWQgPSAxOyAvL+2ZlOuptCDqtazshJ0g7LKY66asXHJcbiAgICAgICAgdGhpcy5fX2Rwci5sYXZhID0gMTsgLy/tmZTrqbQg6rWs7ISdIOyymOumrFxyXG5cclxuICAgICAgICBmb3IgKCBjb25zdCBpIGluIHRoaXMuZGF0YSApIHtcclxuICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMuZGF0YVtpXTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0RGF0YSggaSwgdiApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKCBsZXQgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKyApIHtcclxuICAgICAgICAgICAgZm9yICggbGV0IHggPSAwOyB4IDwgd2lkdGg7IHgrKyApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1ZUeXBlKCB4LCB5ICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIO2BrOumrOyzkCDsho3shLEg7YWM7J2067iU7J2EIFRJTEVE7JeQ7IScIOydveyWtOyEnCBjcmVhdHVyZVByb3BlcnR5VGFibGXsl5Ag7KCA7J6l7ZWc64ukXHJcbiAgICAgICAgLy8gY3JlYXR1cmVQcm9wZXJ0eVRhYmxlW2lkXeuhnCDslrvsnYQg7IiYIOyeiOuLpFxyXG5cclxuICAgICAgICB0aGlzLmNyZWF0dXJlUHJvcGVydHlUYWJsZSA9IHt9O1xyXG4gICAgICAgIC8vc2V0bWV0YXRhYmxlKHRoaXMuY3JlYXR1cmVQcm9wZXJ0eVRhYmxlLCB7IF9faW5kZXg6IGZ1bmN0aW9uICh0LCBrKSB7IEdhbWVNYXAuZGVmYXVsdENyZWF0dXJlUHJvcGVydHk7IH0gfSApO1xyXG4gICAgICAgIHRoaXMuY3JlYXR1cmVQcm9wZXJ0eVRhYmxlID0gbmV3IFByb3h5KCB0aGlzLmNyZWF0dXJlUHJvcGVydHlUYWJsZSwge1xyXG4gICAgICAgICAgICBnZXQ6ICggdGFyZ2V0LCBuYW1lICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5hbWUgaW4gdGFyZ2V0ID8gdGFyZ2V0W25hbWVdIDogR2FtZU1hcC5kZWZhdWx0Q3JlYXR1cmVQcm9wZXJ0eTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gKTtcclxuICAgICAgICAvLyBzcGF3blRhYmxl7JeQIOq4sOuhne2VtOuRkOqzoCBzcGF3buyymOumrOuKlCBXb3JsZOqwgCDtlZzri6QuXHJcbiAgICAgICAgdGhpcy5zcGF3blRhYmxlID0ge307XHJcblxyXG4gICAgICAgIC8vIO2DgOydvCDri6jsnIQg7Iuc7JW87LKY66as6riwXHJcbiAgICAgICAgdGhpcy52aXNpYmlsaXR5VGlsZUNoZWNrZXIgPSBuZXcgVmlzaWJpbGl0eVRpbGUoIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnByb3BlcnR5VGFibGUgKTtcclxuICAgICAgICB0aGlzLmJ1aWxkTGlnaHRNYXAoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJvY2Vzc1ZUeXBlKCB4LCB5ICkge1xyXG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy53aWR0aDtcclxuICAgICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmhlaWdodDtcclxuICAgICAgICBjb25zdCBwdCA9IHRoaXMucHJvcGVydHlUYWJsZTtcclxuICAgICAgICBjb25zdCBkcHIgPSB0aGlzLl9fZHByO1xyXG4gICAgICAgIGNvbnN0IGkgPSB5ICogd2lkdGggKyB4O1xyXG4gICAgICAgIGNvbnN0IHByID0gcHRbaV07XHJcblxyXG4gICAgICAgIGlmICggcHIudnR5cGUgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVsID0gKCB5ID4gMCAmJiB4ID4gMCApIFx0XHRcdD8gcHRbaSAtIHdpZHRoIC0gMV0gOiBkcHI7XHJcbiAgICAgICAgICAgIGNvbnN0IHUgPSAoIHkgPiAwICkgXHRcdFx0XHRcdD8gcHRbaSAtIHdpZHRoXSA6IGRwcjtcclxuICAgICAgICAgICAgY29uc3QgdXIgPSAoIHkgPiAwICYmIHggPCB3aWR0aCAtIDEgKSBcdFx0PyBwdFtpIC0gd2lkdGggKyAxXSA6IGRwcjtcclxuICAgICAgICAgICAgY29uc3QgbCA9ICggeCA+IDAgKSBcdFx0XHRcdFx0PyBwdFtpIC0gMV0gOiBkcHI7XHJcbiAgICAgICAgICAgIGNvbnN0IHIgPSAoIHggPCB3aWR0aCAtIDEgKVx0XHRcdFx0XHQ/IHB0W2kgKyAxXSA6IGRwcjtcclxuICAgICAgICAgICAgY29uc3QgZGwgPSAoIHkgPCBoZWlnaHQgLSAxICYmIHggPiAwIClcdFx0PyBwdFtpICsgd2lkdGggLSAxXSA6IGRwcjtcclxuICAgICAgICAgICAgY29uc3QgZCA9ICggeSA8IGhlaWdodCAtIDEgKVx0XHRcdFx0PyBwdFtpICsgd2lkdGhdIDogZHByO1xyXG4gICAgICAgICAgICBjb25zdCBkciA9ICggeSA8IGhlaWdodCAtIDEgJiYgeCA8IHdpZHRoIC0gMSApIFx0PyBwdFtpICsgd2lkdGggKyAxXSA6IGRwcjtcclxuICAgICAgICAgICAgY29uc3QgbmV3SWQgPSB2dHlwZUZ1bmNbcHIudnR5cGVdKCB0aGlzLCB1bCwgdSwgdXIsIGwsIHByLCByLCBkbCwgZCwgZHIgKTtcclxuXHJcbiAgICAgICAgICAgIGlmICggIW5ld0lkICkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coIFwiSUTrpbwg7Ja77J2EIOyImCDsl4bsnYxcIiwgcHIudnR5cGUsIHgsIHkgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtpXSA9IG5ld0lkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldE1hcFN0cmluZygpIHtcclxuICAgICAgICBsZXQgcyA9IFwiXCI7XHJcblxyXG4gICAgICAgIGZvciAoIGxldCB5ID0gMDsgeSA8IHRoaXMuaGVpZ2h0OyB5KysgKSB7XHJcbiAgICAgICAgICAgIGZvciAoIGxldCB4ID0gMDsgeCA8IHRoaXMud2lkdGg7IHgrKyApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByID0gdGhpcy5nZXRQcm9wZXJ0eSggeCwgeSApO1xyXG5cclxuICAgICAgICAgICAgICAgIHMgPSBzICsgcHIuY2hhcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzID0gcyArIFwiXFxuXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcztcclxuICAgIH1cclxufVxyXG5cclxuXHJcbmNvbnN0IHZ0eXBlRnVuYyA9IHtcclxuICAgIFtcIndhbGxcIl06IGZ1bmN0aW9uICggc2VsZiwgdWwsIHUsIHVyLCBsLCBjLCByLCBkbCwgZCwgZHIgKSB7XHJcbiAgICAgICAgY29uc3QgaWQgPSBjLmlkO1xyXG4gICAgICAgIGxldCBhZGQgPSAwO1xyXG5cclxuICAgICAgICBpZiAoIGQuYmxvY2sgIT0gYy5ibG9jayApIHtcclxuICAgICAgICAgICAgLy/slYTrnpjqsIAg67mIIOqyveyasFxyXG4gICAgICAgICAgICBpZiAoIHUuYmxvY2sgIT0gYy5ibG9jayApIHtcclxuICAgICAgICAgICAgICAgIC8v7JyE6rCAIOu5iCDqsr3smrBcclxuICAgICAgICAgICAgICAgIGlmICggbC5ibG9jayAhPSBjLmJsb2NrICYmIHIuYmxvY2sgIT0gYy5ibG9jayApIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGQgPSAyMjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGwuYmxvY2sgIT0gYy5ibG9jayApIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGQgPSAyMDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHIuYmxvY2sgIT0gYy5ibG9jayApIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGQgPSAyMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkID0gc2VsZi5yYW5kb20oIDE2LCAxNyApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy9pZiAodS5jaGFyPT1jLmNoYXIpIHtcclxuICAgICAgICAgICAgICAgIC8vXHRhZGQ9MTY7XHJcbiAgICAgICAgICAgICAgICAvL30gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhZGQgPSBzZWxmLnJhbmRvbSggMTYsIDE5ICk7XHJcbiAgICAgICAgICAgICAgICAvL31cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICggdS5ibG9jayAhPSBjLmJsb2NrICYmIGwuYmxvY2sgIT0gYy5ibG9jayAmJiByLmJsb2NrICE9IGMuYmxvY2sgKSB7XHJcbiAgICAgICAgICAgICAgICAvL+ychOqwgCDruYgg6rK97JqwXHJcbiAgICAgICAgICAgICAgICBhZGQgPSA0O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCB1LmJsb2NrICE9IGMuYmxvY2sgJiYgbC5ibG9jayAhPSBjLmJsb2NrICkge1xyXG4gICAgICAgICAgICAgICAgYWRkID0gNjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICggdS5ibG9jayAhPSBjLmJsb2NrICYmIHIuYmxvY2sgIT0gYy5ibG9jayApIHtcclxuICAgICAgICAgICAgICAgIGFkZCA9IDU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvL2lmIChsLmJsb2NrIT1jLmJsb2NrICYmIHIuYmxvY2shPWMuYmxvY2spIHtcclxuICAgICAgICAgICAgICAgIGFkZCA9IHNlbGYucmFuZG9tKCAxLCAzICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBpZCArIGFkZDtcclxuICAgIH0sXHJcbiAgICBbXCJ3YXRlclwiXTogZnVuY3Rpb24gKCBzZWxmLCB1bCwgdSwgdXIsIGwsIGMsIHIsIGRsLCBkLCBkciApIHtcclxuICAgICAgICBjb25zdCBhdHQgPSBjLmdsdWU7XHJcbiAgICAgICAgY29uc3QgY2EgPSBjW2F0dF07XHJcbiAgICAgICAgY29uc3QgZmxhZyA9ICggdWxbYXR0XSAhPSBjYSA/IDEgPDwgNyA6IDAgKSB8XHJcbiAgICAgICAgICAgICggdVthdHRdICE9IGNhID8gMSA8PCA2IDogMCApIHxcclxuICAgICAgICAgICAgKCB1clthdHRdICE9IGNhID8gMSA8PCA1IDogMCApIHxcclxuICAgICAgICAgICAgKCBsW2F0dF0gIT0gY2EgPyAxIDw8IDQgOiAwICkgfFxyXG4gICAgICAgICAgICAoIHJbYXR0XSAhPSBjYSA/IDEgPDwgMyA6IDAgKSB8XHJcbiAgICAgICAgICAgICggZGxbYXR0XSAhPSBjYSA/IDEgPDwgMiA6IDAgKSB8XHJcbiAgICAgICAgICAgICggZFthdHRdICE9IGNhID8gMSA8PCAxIDogMCApIHxcclxuICAgICAgICAgICAgKCBkclthdHRdICE9IGNhID8gMSA8PCAwIDogMCApO1xyXG5cclxuICAgICAgICByZXR1cm4gMTEyICsgR2FtZU1hcC50aWxlQmxlbmRUYWJsZVsyNTYgLSBmbGFnXTtcclxuICAgIH0sXHJcblxyXG4gICAgW1wibW91bnRhaW5cIl06IGZ1bmN0aW9uICggc2VsZiwgdWwsIHUsIHVyLCBsLCBjLCByLCBkbCwgZCwgZHIgKSB7XHJcbiAgICAgICAgY29uc3QgaWQgPSBjLmlkO1xyXG5cclxuICAgICAgICBpZiAoIGwuY2hhciAhPSBjLmNoYXIgJiYgci5jaGFyICE9IGMuY2hhciApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlkICsgMztcclxuICAgICAgICB9IGVsc2UgaWYgKCBsLmNoYXIgIT0gYy5jaGFyICkge1xyXG4gICAgICAgICAgICByZXR1cm4gaWQ7XHJcbiAgICAgICAgfSBlbHNlIGlmICggci5jaGFyICE9IGMuY2hhciApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlkICsgMjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gaWQgKyAxO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBbXCJmZW5jZVwiXTogZnVuY3Rpb24gKCBzZWxmLCB1bCwgdSwgdXIsIGwsIGMsIHIsIGRsLCBkLCBkciApIHtcclxuICAgICAgICBjb25zdCBpZCA9IGMuaWQ7XHJcbiAgICAgICAgbGV0IGFkZCA9IDA7XHJcblxyXG4gICAgICAgIGlmICggZC5ibG9jayA9PSBjLmJsb2NrICYmIHUuYmxvY2sgIT0gYy5ibG9jayApIHtcclxuICAgICAgICAgICAgaWYgKCBsLmJsb2NrID09IGMuYmxvY2sgKSB7XHJcbiAgICAgICAgICAgICAgICBhZGQgPSA2O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCByLmJsb2NrID09IGMuYmxvY2sgKSB7XHJcbiAgICAgICAgICAgICAgICBhZGQgPSA3O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCBsLmJsb2NrICE9IGMuYmxvY2sgJiYgci5ibG9jayAhPSBjLmJsb2NrICkge1xyXG4gICAgICAgICAgICAgICAgYWRkID0gc2VsZi5yYW5kb20oIDYsIDcgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFkZCA9IHNlbGYucmFuZG9tKCAwLCAxICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKCB1LmJsb2NrID09IGMuYmxvY2sgJiYgZC5ibG9jayAhPSBjLmJsb2NrICkge1xyXG4gICAgICAgICAgICBpZiAoIGwuYmxvY2sgPT0gYy5ibG9jayApIHtcclxuICAgICAgICAgICAgICAgIGFkZCA9IDQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIHIuYmxvY2sgPT0gYy5ibG9jayApIHtcclxuICAgICAgICAgICAgICAgIGFkZCA9IDU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIGwuYmxvY2sgIT0gYy5ibG9jayAmJiByLmJsb2NrICE9IGMuYmxvY2sgKSB7XHJcbiAgICAgICAgICAgICAgICBhZGQgPSBzZWxmLnJhbmRvbSggNCwgNSApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYWRkID0gc2VsZi5yYW5kb20oIDAsIDEgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoIHUuYmxvY2sgPT0gYy5ibG9jayAmJiBkLmJsb2NrID09IGMuYmxvY2sgKSB7XHJcbiAgICAgICAgICAgIGlmICggbC5ibG9jayA9PSBjLmJsb2NrICkge1xyXG4gICAgICAgICAgICAgICAgYWRkID0gMTA7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIHIuYmxvY2sgPT0gYy5ibG9jayApIHtcclxuICAgICAgICAgICAgICAgIGFkZCA9IDExO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYWRkID0gODtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGlkICsgYWRkO1xyXG4gICAgfSxcclxuICAgIFtcInRvcmNoXCJdOiBmdW5jdGlvbiAoIHNlbGYsIHVsLCB1LCB1ciwgbCwgYywgciwgZGwsIGQsIGRyICkge1xyXG4gICAgICAgIGNvbnN0IGlkID0gYy5pZDtcclxuICAgICAgICBjb25zdCB0ID0gW107XHJcblxyXG4gICAgICAgIGlmICggbC5jaGFyID09IFwiTVwiIHx8IGwuY2hhciA9PSBcIldcIiB8fCBsLmNoYXIgPT0gXCJCXCIgKSB7XHJcbiAgICAgICAgICAgIHQucHVzaCggMjQgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCByLmNoYXIgPT0gXCJNXCIgfHwgci5jaGFyID09IFwiV1wiIHx8IHIuY2hhciA9PSBcIkJcIiApIHtcclxuICAgICAgICAgICAgdC5wdXNoKCAyMCApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIHQubGVuZ3RoID4gMCApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlkICsgdFtzZWxmLnJhbmRvbSggMCwgdC5sZW5ndGggLSAxICldO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpZDtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgW1wiZG9vclwiXTogZnVuY3Rpb24gKCBzZWxmLCB1bCwgdSwgdXIsIGwsIGMsIHIsIGRsLCBkLCBkciApIHtcclxuICAgICAgICBpZiAoIHUuY2hhciA9PSBcIk1cIiB8fCBkLmNoYXIgPT0gXCJNXCIgfHwgbC5jaGFyID09IFwiTVwiIHx8IHIuY2hhciA9PSBcIk1cIiApIHtcclxuICAgICAgICAgICAgcmV0dXJuIDEwMztcclxuICAgICAgICB9IGVsc2UgaWYgKCB1LmNoYXIgPT0gXCJXXCIgfHwgZC5jaGFyID09IFwiV1wiIHx8IGwuY2hhciA9PSBcIldcIiB8fCByLmNoYXIgPT0gXCJXXCIgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiA0NztcclxuICAgICAgICB9IGVsc2UgaWYgKCB1LmNoYXIgPT0gXCIjXCIgfHwgZC5jaGFyID09IFwiI1wiIHx8IGwuY2hhciA9PSBcIiNcIiB8fCByLmNoYXIgPT0gXCIjXCIgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiA1MTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gMzk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIFtcImNkb29yXCJdOiBmdW5jdGlvbiAoIHNlbGYsIHVsLCB1LCB1ciwgbCwgYywgciwgZGwsIGQsIGRyICkge1xyXG4gICAgICAgIGlmICggdS5jaGFyID09IFwiTVwiIHx8IGQuY2hhciA9PSBcIk1cIiB8fCBsLmNoYXIgPT0gXCJNXCIgfHwgci5jaGFyID09IFwiTVwiICkge1xyXG4gICAgICAgICAgICByZXR1cm4gODc7XHJcbiAgICAgICAgfSBlbHNlIGlmICggdS5jaGFyID09IFwiV1wiIHx8IGQuY2hhciA9PSBcIldcIiB8fCBsLmNoYXIgPT0gXCJXXCIgfHwgci5jaGFyID09IFwiV1wiICkge1xyXG4gICAgICAgICAgICByZXR1cm4gMzE7XHJcbiAgICAgICAgfSBlbHNlIGlmICggdS5jaGFyID09IFwiI1wiIHx8IGQuY2hhciA9PSBcIiNcIiB8fCBsLmNoYXIgPT0gXCIjXCIgfHwgci5jaGFyID09IFwiI1wiICkge1xyXG4gICAgICAgICAgICByZXR1cm4gNTA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIDIzO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBbXCJkc3RhaXJcIl06IGZ1bmN0aW9uICggc2VsZiwgdWwsIHUsIHVyLCBsLCBjLCByLCBkbCwgZCwgZHIgKSB7XHJcbiAgICAgICAgaWYgKCBsLmNoYXIgPT0gXCJSXCIgJiYgci5jaGFyID09IFwiUlwiICkge1xyXG4gICAgICAgICAgICBjLnNoYWRvdyA9IDE7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gMTYyO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIGwuY2hhciAhPSBjLmNoYXIgJiYgci5jaGFyICE9IGMuY2hhciApIHtcclxuICAgICAgICAgICAgYy5zaGFkb3cgPSAxO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIDE2MTtcclxuICAgICAgICB9IGVsc2UgaWYgKCBsLmNoYXIgPT0gYy5jaGFyICkge1xyXG4gICAgICAgICAgICByZXR1cm4gNzE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIDcwO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBbXCJjaGFpclwiXTogZnVuY3Rpb24gKCBzZWxmLCB1bCwgdSwgdXIsIGwsIGMsIHIsIGRsLCBkLCBkciApIHtcclxuICAgICAgICBjb25zdCBpZCA9IGMuaWQ7XHJcbiAgICAgICAgY29uc3QgdCA9IFtdO1xyXG5cclxuICAgICAgICBpZiAoIGwuY2hhciA9PSBcIkhcIiB8fCBsLmNoYXIgPT0gXCJaXCIgKSB7XHJcbiAgICAgICAgICAgIHQucHVzaCggMSApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIHIuY2hhciA9PSBcIkhcIiB8fCByLmNoYXIgPT0gXCJaXCIgKSB7XHJcbiAgICAgICAgICAgIHQucHVzaCggMCApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIHUuY2hhciA9PSBcIkhcIiB8fCB1LmNoYXIgPT0gXCJaXCIgKSB7XHJcbiAgICAgICAgICAgIHQucHVzaCggMiApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIGQuY2hhciA9PSBcIkhcIiB8fCBkLmNoYXIgPT0gXCJaXCIgKSB7XHJcbiAgICAgICAgICAgIHQucHVzaCggMyApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIHQubGVuZ3RoID4gMCApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlkICsgdFtzZWxmLnJhbmRvbSggMCwgdC5sZW5ndGggLSAxICldO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpZCArIHNlbGYucmFuZG9tKCAwLCAzICk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIFtcIndicmlkZ2VcIl06IGZ1bmN0aW9uICggc2VsZiwgdWwsIHUsIHVyLCBsLCBjLCByLCBkbCwgZCwgZHIgKSB7XHJcbiAgICAgICAgY29uc3QgdCA9IFtdO1xyXG5cclxuICAgICAgICBpZiAoIGwuY2hhciAhPSBjLmNoYXIgfHwgci5jaGFyICE9IGMuY2hhciApIHtcclxuICAgICAgICAgICAgdC5wdXNoKCA3ICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggdS5jaGFyICE9IGMuY2hhciB8fCBkLmNoYXIgIT0gYy5jaGFyICkge1xyXG4gICAgICAgICAgICB0LnB1c2goIDEwOSApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIHQubGVuZ3RoID4gMCApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRbc2VsZi5yYW5kb20oIDAsIHQubGVuZ3RoIC0gMSApXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5yYW5kb20oIDEsMiApID09IDEgPyA3IDogMTA5O1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG59O1xyXG5cclxuR2FtZU1hcC50aWxlQmxlbmRUYWJsZSA9IG5ldyBVaW50OEFycmF5KCBbXHJcbiAgICAweDJlLCAweDJlLCAweDI4LCAweDI4LCAweDJlLCAweDJlLCAweDI4LCAweDI4LCAweDI5LCAweDI5LCAweDIxLCAweDIwLCAweDI5LCAweDI5LCAweDIxLCAweDIwLFxyXG4gICAgMHgyYSwgMHgyYSwgMHgyMywgMHgyMywgMHgyYSwgMHgyYSwgMHgyMiwgMHgyMiwgMHgyYywgMHgyYywgMHgxMywgMHgxMSwgMHgyYywgMHgyYywgMHgxMiwgMHgxMCxcclxuICAgIDB4MmUsIDB4MmUsIDB4MjgsIDB4MjgsIDB4MmUsIDB4MmUsIDB4MjgsIDB4MjgsIDB4MjksIDB4MjksIDB4MjEsIDB4MjAsIDB4MjksIDB4MjksIDB4MjEsIDB4MjAsXHJcbiAgICAweDJhLCAweDJhLCAweDIzLCAweDIzLCAweDJhLCAweDJhLCAweDIyLCAweDIyLCAweDJjLCAweDJjLCAweDEzLCAweDExLCAweDJjLCAweDJjLCAweDEyLCAweDEwLFxyXG4gICAgMHgyYiwgMHgyYiwgMHgyZCwgMHgyZCwgMHgyYiwgMHgyYiwgMHgyZCwgMHgyZCwgMHgyNSwgMHgyNSwgMHgxZiwgMHgxZCwgMHgyNSwgMHgyNSwgMHgxZiwgMHgxZCxcclxuICAgIDB4MjcsIDB4MjcsIDB4MTcsIDB4MTcsIDB4MjcsIDB4MjcsIDB4MTUsIDB4MTUsIDB4MWIsIDB4MWIsIDB4MGYsIDB4MDcsIDB4MWIsIDB4MWIsIDB4MGIsIDB4MDMsXHJcbiAgICAweDJiLCAweDJiLCAweDJkLCAweDJkLCAweDJiLCAweDJiLCAweDJkLCAweDJkLCAweDI0LCAweDI0LCAweDFlLCAweDFjLCAweDI0LCAweDI0LCAweDFlLCAweDFjLFxyXG4gICAgMHgyNywgMHgyNywgMHgxNywgMHgxNywgMHgyNywgMHgyNywgMHgxNSwgMHgxNSwgMHgxOSwgMHgxOSwgMHgwZCwgMHgwNSwgMHgxOSwgMHgxOSwgMHgwOSwgMHgwMSxcclxuICAgIDB4MmUsIDB4MmUsIDB4MjgsIDB4MjgsIDB4MmUsIDB4MmUsIDB4MjgsIDB4MjgsIDB4MjksIDB4MjksIDB4MjEsIDB4MjAsIDB4MjksIDB4MjksIDB4MjEsIDB4MjAsXHJcbiAgICAweDJhLCAweDJhLCAweDIzLCAweDIzLCAweDJhLCAweDJhLCAweDIyLCAweDIyLCAweDJjLCAweDJjLCAweDEzLCAweDExLCAweDJjLCAweDJjLCAweDEyLCAweDEwLFxyXG4gICAgMHgyZSwgMHgyZSwgMHgyOCwgMHgyOCwgMHgyZSwgMHgyZSwgMHgyOCwgMHgyOCwgMHgyOSwgMHgyOSwgMHgyMSwgMHgyMCwgMHgyOSwgMHgyOSwgMHgyMSwgMHgyMCxcclxuICAgIDB4MmEsIDB4MmEsIDB4MjMsIDB4MjMsIDB4MmEsIDB4MmEsIDB4MjIsIDB4MjIsIDB4MmMsIDB4MmMsIDB4MTMsIDB4MTEsIDB4MmMsIDB4MmMsIDB4MTIsIDB4MTAsXHJcbiAgICAweDJiLCAweDJiLCAweDJkLCAweDJkLCAweDJiLCAweDJiLCAweDJkLCAweDJkLCAweDI1LCAweDI1LCAweDFmLCAweDFkLCAweDI1LCAweDI1LCAweDFmLCAweDFkLFxyXG4gICAgMHgyNiwgMHgyNiwgMHgxNiwgMHgxNiwgMHgyNiwgMHgyNiwgMHgxNCwgMHgxNCwgMHgxYSwgMHgxYSwgMHgwZSwgMHgwNiwgMHgxYSwgMHgxYSwgMHgwYSwgMHgwMixcclxuICAgIDB4MmIsIDB4MmIsIDB4MmQsIDB4MmQsIDB4MmIsIDB4MmIsIDB4MmQsIDB4MmQsIDB4MjQsIDB4MjQsIDB4MWUsIDB4MWMsIDB4MjQsIDB4MjQsIDB4MWUsIDB4MWMsXHJcbiAgICAweDI2LCAweDI2LCAweDE2LCAweDE2LCAweDI2LCAweDI2LCAweDE0LCAweDE0LCAweDE4LCAweDE4LCAweDBjLCAweDA0LCAweDE4LCAweDE4LCAweDA4LCAweDAwLFxyXG5dICk7XHJcblxyXG5cclxuR2FtZU1hcC5kZWZhdWx0UHJvcGVydHkgPSB7IHdhbGw6IDAsIHNoYWRvdzogMCB9O1xyXG5HYW1lTWFwLmRlZmF1bHRDcmVhdHVyZVByb3BlcnR5ID0geyByYWNlOiBcIlwiLCBsZXZlbDogMSB9O1xyXG5HYW1lTWFwLkVNUFRZXHRcdFx0PSAwO1xyXG5HYW1lTWFwLkJMT0NLX1BBU1NcdFx0PSAxO1xyXG5HYW1lTWFwLkJMT0NLX1ZJU0lPTlx0PSAyO1xyXG5HYW1lTWFwLkJMT0NLX0FSUk9XXHRcdD0gNDtcclxuY29uc3QgQlAgPSBHYW1lTWFwLkJMT0NLX1BBU1M7XHJcbmNvbnN0IEJWID0gR2FtZU1hcC5CTE9DS19WSVNJT047XHJcbmNvbnN0IEJBID0gR2FtZU1hcC5CTE9DS19BUlJPVztcclxuXHJcbkdhbWVNYXAudGlsZVN0cmluZ0RhdGEgPSB7XHJcblxyXG4gICAgW1wiflwiXTogeyBpZDogMjcyLCBuYW1lOiBcIuusvFwiLCB3YWxsOiBCUCwgd2F0ZXI6IDEsIHZ0eXBlOiBcIndhdGVyXCIsIGJlbG93OiAyNzIsIGJyaWRnZTogMSwgZ2x1ZTogXCJicmlkZ2VcIiwgaWxsdW06IDEsIGNvbG9yOiAweDAwOTBmZiwgR2FtZU1hcENvbG9yOiAweDMwNTA5MCB9LFxyXG4gICAgW1wiLVwiXTogeyBpZDogMjc2LCBuYW1lOiBcIuq5iuydgCDrrLxcIiwgd2FsbDogQlAsIHdhdGVyOiAyLCB2dHlwZTogXCJ3YXRlclwiLCBiZWxvdzogMjc2LCBicmlkZ2U6IDEsIGdsdWU6IFwiYnJpZGdlXCIsIGlsbHVtOiAxLCBjb2xvcjogMHgwMDkwZmYsIEdhbWVNYXBDb2xvcjogMHgzMDUwOTAgfSxcclxuICAgIFtcIj1cIl06IHsgaWQ6IDI4MCwgbmFtZTogXCLrp6TsmrAg6rmK7J2AIOusvFwiLCB3YWxsOiBCUCwgd2F0ZXI6IDMsIHZ0eXBlOiBcIndhdGVyXCIsIGJlbG93OiAyODAsIGJyaWRnZTogMSwgZ2x1ZTogXCJicmlkZ2VcIiwgaWxsdW06IDEsIGNvbG9yOiAweDAwOTBmZiwgR2FtZU1hcENvbG9yOiAweDMwNTA5MCB9LFxyXG4gICAgW1wiIFwiXTogeyBpZDogMTUsIG5hbWU6IFwi67CU64ulXCIsIHNvdW5kOiAxIH0sXHJcbiAgICBbXCJAXCJdOiB7IGlkOiA2MiwgbmFtZTogXCLquLhcIiwgc291bmQ6IDEsIHZ0eXBlOiBcIndhdGVyXCIsIGJlbG93OiA2Miwgcm9hZDogMSwgZ2x1ZTogXCJyb2FkXCIsIEdhbWVNYXBDb2xvcjogMHg2MDMwMTAgfSxcclxuICAgIFtcIlFcIl06IHsgaWQ6IDE2MCwgbmFtZTogXCLqsbDsuZwg6ri4XCIsIHNvdW5kOiAxLCB2dHlwZTogXCJ3YXRlclwiLCBiZWxvdzogMTYwLCByb2FkOiAxLCBnbHVlOiBcInJvYWRcIiwgR2FtZU1hcENvbG9yOiAweDYwMzAxMCB9LFxyXG4gICAgW1wiLlwiXTogeyBpZDogMTEsIG5hbWU6IFwi6rOg7Jq0IO2dmeuwlOuLpVwiLCBzb3VuZDogMSB9LFxyXG4gICAgW1wiLFwiXTogeyBpZDogMTAsIG5hbWU6IFwi7Z2Z67CU64ulXCIsIHNvdW5kOiAxIH0sXHJcbiAgICBbXCI7XCJdOiB7IGlkOiA5LCBuYW1lOiBcIuqxsOy5nCDtnZnrsJTri6VcIiwgc291bmQ6IDEgfSxcclxuICAgIFtcIj9cIl06IHsgaWQ6IDEyLCBuYW1lOiBcIuyekOqwiOuwrVwiIH0sXHJcbiAgICBbXCJgXCJdOiB7IGlkOiAwLCBuYW1lOiBcIu2SgFwiLCBzb3VuZDogMiB9LFxyXG4gICAgWydcIiddOiB7IGlkOiAxMywgbmFtZTogXCLsnpTrlJRcIiwgc291bmQ6IDIgfSxcclxuICAgIFtcIl5cIl06IHsgaWQ6IDEsIG5hbWU6IFwi7YGwIO2SgFwiLCBzb3VuZDogMiB9LFxyXG4gICAgW1wiVlwiXTogeyBpZDogMywgbmFtZTogXCLrrLTshLHtlZwg7ZKAXCIsIHNvdW5kOiAyIH0sXHJcbiAgICBbXCJHXCJdOiB7IGlkOiAyLCBuYW1lOiBcIuuNpOu2iFwiLCB3YWxsOiBCViwgc291bmQ6IDMsIHNoYWRvdzogMSwgR2FtZU1hcENvbG9yOiAweDAwNDAwMCB9LFxyXG4gICAgW1wiVFwiXTogeyBpZDogNjAsIG5hbWU6IFwi7YGwIOuCmOustFwiLCB3YWxsOiBCViArIEJQLCBzaGFkb3c6IDEsIEdhbWVNYXBDb2xvcjogMHgzMGEwMzAgfSxcclxuICAgIFtcIihcIl06IHsgaWQ6IDE0LCBuYW1lOiBcIuuPjOuwlOuLpVwiIH0sXHJcbiAgICBbXCJ7XCJdOiB7IGlkOiA0LCBuYW1lOiBcIu2BsOuPjOuwlOuLpVwiIH0sXHJcbiAgICBbXCJSXCJdOiB7IGlkOiA2OCwgbmFtZTogXCLrsJTsnIRcIiwgd2FsbDogQlYgfCBCUCB8IEJBLCBzaGFkb3c6IDEsIG5vUmFpbjogMSB9LFxyXG4gICAgW1wiJlwiXTogeyBpZDogNjQsIG5hbWU6IFwi7IKwXCIsIHdhbGw6IEJWIHwgQlAgfCBCQSwgdnR5cGU6IFwibW91bnRhaW5cIiwgc2hhZG93OiAxLCBub1JhaW46IDEgfSxcclxuICAgIFtcIldcIl06IHsgaWQ6IDI0LCBuYW1lOiBcIuuPmeq1tOuyvVwiLCB3YWxsOiBCViB8IEJQLCB2dHlwZTogXCJ3YWxsXCIsIHNoYWRvdzogMSwgYmxvY2s6IDEsIHJvYWQ6IDEsIG5vUmFpbjogMSB9LFxyXG4gICAgW1wiTVwiXTogeyBpZDogODAsIG5hbWU6IFwi64+M67K9XCIsIHdhbGw6IEJWIHwgQlAgfCBCQSwgdnR5cGU6IFwid2FsbFwiLCBzaGFkb3c6IDEsIGJsb2NrOiAxLCByb2FkOiAxLCBub1JhaW46IDEgfSxcclxuICAgIFtcIkJcIl06IHsgaWQ6IDE2LCBuYW1lOiBcIuuyveuPjOuyvVwiLCB3YWxsOiBCViB8IEJQIHwgQkEsIHZ0eXBlOiBcIndhbGxcIiwgc2hhZG93OiAxLCBibG9jazogMSwgcm9hZDogMSwgbm9SYWluOiAxIH0sXHJcbiAgICBbXCIjXCJdOiB7IGlkOiA0OCwgbmFtZTogXCLsmrjtg4DrpqxcIiwgd2FsbDogQlAsIHZ0eXBlOiBcImZlbmNlXCIsIHNoYWRvdzogMSwgYmxvY2s6IDEgfSxcclxuICAgIFtcIkRcIl06IHsgaWQ6IDM5LCBuYW1lOiBcIuusuFwiLCB2dHlwZTogXCJkb29yXCIsIHNoYWRvdzogMSwgYmxvY2s6IDEsIHJvYWQ6IDEsIG5vUmFpbjogMSB9LFxyXG4gICAgW1wiRVwiXTogeyBpZDogMjMsIG5hbWU6IFwi7J6g6ri0IOusuFwiLCB2dHlwZTogXCJjZG9vclwiLCB3YWxsOiBCUCB8IEJWIHwgQkEsIHNoYWRvdzogMSwgYmxvY2s6IDEsIHJvYWQ6IDEsIG5vUmFpbjogMSB9LFxyXG4gICAgW1wifFwiXTogeyBpZDogNywgbmFtZTogXCLrgpjrrLQg67CU64ulXCIsIHZ0eXBlOiBcIndicmlkZ2VcIiwgc291bmQ6IDQsIGJyaWRnZTogMSwgcm9hZDogMSwgbGF2YTogMSwgbm9SYWluOiAxIH0sXHJcbiAgICBbXCIrXCJdOiB7IGlkOiA2LCBuYW1lOiBcIu2DgOydvFwiLCBzb3VuZDogNSwgYnJpZGdlOiAxLCByb2FkOiAxLCBsYXZhOiAxLCBub1JhaW46IDEgfSxcclxuICAgIFtcIjpcIl06IHsgaWQ6IDgsIG5hbWU6IFwi7J6R7J2AIO2DgOydvFwiLCBicmlkZ2U6IDEsIHJvYWQ6IDEsIGxhdmE6IDEgfSxcclxuICAgIFtcIlpcIl06IHsgaWQ6IDUsIG5hbWU6IFwi7Z2ZIO2DgOydvFwiIH0sXHJcbiAgICBbXCJJXCJdOiB7IGlkOiAyODgsIG5hbWU6IFwi7ZqD67aIXCIsIGZpcmU6IDEsIHZ0eXBlOiBcInRvcmNoXCIsIGNvbG9yOiAweGNmNzAxNSwgbGlnaHQ6IDEgfSxcclxuICAgIFtcIipcIl06IHsgaWQ6IDMwMCwgbmFtZTogXCLrsJjrlKfrtohcIiwgY29sb3I6IDB4MDAyMGFmLCBsaWdodDogMSwgc291bmQ6IDcgfSxcclxuICAgIFtcIj5cIl06IHsgaWQ6IDcwLCBuYW1lOiBcIuuCtOugpOqwgOuKlCDqs4Tri6hcIiwgdnR5cGU6IFwiZHN0YWlyXCIsIGlsbHVtOiAxLCBjb2xvcjogMHhhMDkwMDAsIHJvYWQ6IDEsIG5vUmFpbjogMSwgR2FtZU1hcENvbG9yOiAweGZmZmYwMCB9LFxyXG4gICAgW1wiPFwiXTogeyBpZDogNjksIG5hbWU6IFwi7Jis65286rCA64qUIOqzhOuLqFwiLCB3YWxsOiBCViwgc2hhZG93OiAxLCBpbGx1bTogMSwgY29sb3I6IDB4YTA5MDAwLCByb2FkOiAxLCBub1JhaW46IDEsIEdhbWVNYXBDb2xvcjogMHhhMGEwMDAgfSxcclxuICAgIFtcIl9cIl06IHsgaWQ6IDcyLCBuYW1lOiBcIuygnOuLqFwiLCBzb3VuZDogNSB9LFxyXG4gICAgW1wiWVwiXTogeyBpZDogMjk2LCBuYW1lOiBcIuu2hOyImFwiLCB3YWxsOiBCViwgd2F0ZXI6IDEsIGVudlNvdW5kOiBcImZvdW50YWluXCIsIHNoYWRvdzogMSB9LFxyXG4gICAgW1wiT1wiXTogeyBpZDogNzMsIG5hbWU6IFwi66qo66as7JWI7J2YIOyLoOyDgVwiLCB3YWxsOiBCUCB8IEJWIHwgQkEsIHNoYWRvdzogMSwgbm9SYWluOiAxIH0sXHJcbiAgICBbXCJDXCJdOiB7IGlkOiA3NCwgbmFtZTogXCLtgqTtmYDsnZgg7Iug7IOBXCIsIHdhbGw6IEJQIHwgQlYgfCBCQSwgc2hhZG93OiAxLCBub1JhaW46IDEgfSxcclxuICAgIFtcIkxcIl06IHsgaWQ6IDc1LCBuYW1lOiBcIuuniO2VmOydmCDsi6Dsg4FcIiwgd2FsbDogQlAgfCBCViB8IEJBLCBzaGFkb3c6IDEsIG5vUmFpbjogMSB9LFxyXG4gICAgW1wiIVwiXTogeyBpZDogNjEsIG5hbWU6IFwi7ZGv66eQXCIsIHdhbGw6IEJQIHwgQlYgfCBCQSwgc2hhZG93OiAxIH0sXHJcbiAgICBbXCJGXCJdOiB7IGlkOiAyOTIsIG5hbWU6IFwi66qo64ul67aIXCIsIHdhbGw6IEJWLCBmaXJlOiAxLCBlbnZTb3VuZDogXCJjYW1wZmlyZVwiLCBjb2xvcjogMHhmZjQwMDAsIGxpZ2h0OiAxLCBzaGFkb3c6IDEgfSxcclxuICAgIFtcIiVcIl06IHsgaWQ6IDMwNCwgbmFtZTogXCLsmqnslZRcIiwgd2FsbDogQlAsIGZpcmU6IDMsIHZ0eXBlOiBcIndhdGVyXCIsIGNvbG9yOiAweGZmMzAzMCwgYmVsb3c6IDMwNCwgbGF2YTogMSwgaWxsdW06IDEsIGdsdWU6IFwibGF2YVwiIH0sXHJcbiAgICBbXCJIXCJdOiB7IGlkOiA4OCwgbmFtZTogXCLtg4HsnpBcIiwgd2FsbDogQlAsIHZ0eXBlOiBcIm1vdW50YWluXCIsIHNoYWRvdzogMSwgbm9SYWluOiAxIH0sXHJcbiAgICBbXCIpXCJdOiB7IGlkOiA5MiwgbmFtZTogXCLsnZjsnpBcIiwgdnR5cGU6IFwiY2hhaXJcIiwgc291bmQ6IDQsIHNoYWRvdzogMSwgbm9SYWluOiAxIH0sXHJcbiAgICBbXCJ9XCJdOiB7IGlkOiAxMDQsIG5hbWU6IFwi7Lmo64yAXCIsIHNoYWRvdzogMSwgc291bmQ6IDYsIG5vUmFpbjogMSB9LFxyXG4gICAgW1wiU1wiXTogeyBpZDogMTA1LCBuYW1lOiBcIuqwhO2MkFwiLCB3YWxsOiBCUCwgc2hhZG93OiAxLCBpbGx1bTogMSwgY29sb3I6IDB4ZmZmZmZmLCBub1JhaW46IDEgfSxcclxuICAgIFtcIlVcIl06IHsgaWQ6IDE2MywgbmFtZTogXCLquLDrkaVcIiwgd2FsbDogQlAgfCBCViB8IEJBLCBzaGFkb3c6IDEsIG5vUmFpbjogMSB9LFxyXG5cclxuICAgIFtcIjFcIl06IHsgaWQ6IC0xLCBuYW1lOiBcIuusuOychOy5mDFcIiwgd2FsbDogQlAgfCBCViB9LFxyXG4gICAgW1wiMlwiXTogeyBpZDogLTEsIG5hbWU6IFwi66y47JyE7LmYMlwiLCB3YWxsOiBCUCB8IEJWIH0sXHJcbiAgICBbXCIzXCJdOiB7IGlkOiAtMSwgbmFtZTogXCLrrLjsnITsuZgzXCIsIHdhbGw6IEJQIHwgQlYgfSxcclxuICAgIFtcIjRcIl06IHsgaWQ6IC0xLCBuYW1lOiBcIuusuOychOy5mDRcIiwgd2FsbDogQlAgfCBCViB9LFxyXG4gICAgW1wiNVwiXTogeyBpZDogLTEsIG5hbWU6IFwi66y47JyE7LmYNVwiLCB3YWxsOiBCUCB8IEJWIH0sXHJcbiAgICBbXCI2XCJdOiB7IGlkOiAtMSwgbmFtZTogXCLrrLjsnITsuZg2XCIsIHdhbGw6IEJQIHwgQlYgfSxcclxuICAgIFtcIjdcIl06IHsgaWQ6IC0xLCBuYW1lOiBcIuusuOychOy5mDdcIiwgd2FsbDogQlAgfCBCViB9LFxyXG4gICAgW1wiOFwiXTogeyBpZDogLTEsIG5hbWU6IFwi66y47JyE7LmYOFwiLCB3YWxsOiBCUCB8IEJWIH0sXHJcbiAgICBbXCI5XCJdOiB7IGlkOiAtMSwgbmFtZTogXCLrrLjsnITsuZg5XCIsIHdhbGw6IEJQIHwgQlYgfSxcclxuXHJcbn07XHJcblxyXG4vLyDquLDrs7jqsJIg67O07J6lXHJcbmZvciAoIGNvbnN0IGsgaW4gR2FtZU1hcC50aWxlU3RyaW5nRGF0YSApIHtcclxuICAgIGNvbnN0IHYgPSBHYW1lTWFwLnRpbGVTdHJpbmdEYXRhW2tdO1xyXG5cclxuICAgIGZvciAoIGNvbnN0IGsyIGluIEdhbWVNYXAuZGVmYXVsdFByb3BlcnR5ICkge1xyXG4gICAgICAgIGNvbnN0IHYyID0gR2FtZU1hcC5kZWZhdWx0UHJvcGVydHlbazJdO1xyXG5cclxuICAgICAgICBpZiAoICF2W2syXSApIHtcclxuICAgICAgICAgICAgdltrMl0gPSB2MjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbiIsImltcG9ydCB7IENvbXBvbmVudCwgUmVuZGVyVGFyZ2V0LCBVdGlscywgTW92aWVDbGlwLCBUZXh0dXJlLCBUZXh0dXJlQmFzZSwgU3ByaXRlLCBFdmVudCwgVGltZXIgfSBmcm9tIFwiQGVuZ2luZS9mbGF0ZmFzdFwiO1xyXG5cclxuXHJcbmltcG9ydCBHYW1lTWFwIGZyb20gXCIuL2dhbWVNYXBcIjtcclxuaW1wb3J0IGFzdGFyIGZyb20gXCJAbGliL2Etc3RhclwiO1xyXG5pbXBvcnQgV29ybGQgZnJvbSBcIi4vd29ybGRcIjtcclxuXHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8g6ri47LC+6riwXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuLyoqXHJcbiAqXHJcbiAqXHJcbiAqIEBjbGFzcyBwYXRoTWFuYWdlclxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgcGF0aE1hbmFnZXIgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKkNyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgcGF0aE1hbmFnZXIuXHJcbiAgICAgKiBAcGFyYW0ge1dvcmxkfSB3b3JsZFxyXG4gICAgICogQG1lbWJlcm9mIHBhdGhNYW5hZ2VyXHJcbiAgICAgKi9cclxuICAgIG9uQWRkZWQoIHdvcmxkICkge1xyXG4gICAgICAgIHRoaXMud29ybGQgPSB3b3JsZDtcclxuICAgIH1cclxuICAgIFxyXG5cclxuICAgIGZpbmRQYXRoX29sZCggeCwgeSwgeDIsIHkyICkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGlzVmFsaWQoIHgsIHkgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcC5nZXRQcm9wZXJ0eSggeCwgeSApLndhbGwgPT0gMCAmJiAhdGhpcy5nZXRFbnRpdHkoIHgsIHkgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHZhbGlkTm9kZUZ1bmMoIG5vZGUsIG5laWdoYm9yICkge1xyXG4gICAgICAgICAgICBpZiAoIE1hdGguYWJzKCBub2RlLnggLSBuZWlnaGJvci54ICkgKyBNYXRoLmFicyggbm9kZS55IC0gbmVpZ2hib3IueSApIDw9IDEgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHRcclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICAvLyBGbG9vZEZpbGzroZwg6rCIIOyImCDsnojripQg7JiB7Jet7J2EIOq1rO2VnOuLpFxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIGxldCBbbmVhcmVzdE5vZGUsIGZsb29yTGlzdF0gPSB0aGlzLmZpbmROZWFyZXN0Rmxvb3IoIHgsIHksIHgyLCB5MiApO1xyXG4gICAgICAgIGxldCBzdGFydE5vZGUgPSB0aGlzLndvcmxkLmdldFByb3BlcnR5KCB4LCB5ICk7XHJcbiAgICAgICAgbGV0IGVuZE5vZGUgPSB0aGlzLndvcmxkLmdldFByb3BlcnR5KCB4MiwgeTIgKTtcclxuICAgICAgICBsZXQgcGF0aDtcclxuXHJcbiAgICAgICAgaWYgKCAhcGF0aCAmJiBpc1ZhbGlkKCB4MiwgeTIgKSAmJlxyXG4gICAgICAgICAgICB4MiA+PSAxICYmIHgyIDw9IHRoaXMud29ybGQubWFwLndpZHRoICYmXHJcbiAgICAgICAgICAgIHkyID49IDEgJiYgeTIgPD0gdGhpcy53b3JsZC5tYXAuaGVpZ2h0ICYmXHJcbiAgICAgICAgICAgIGZsb29yTGlzdC5pbmNsdWRlcyggZW5kTm9kZSApICkge1xyXG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICAgICAgLy8gQSBzdGFyIOuhnCDquLjsnYQg7LC+64qU64ukXHJcbiAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgICAgICAvL3BhdGggPSBhc3Rhci5wYXRoKHN0YXJ0Tm9kZSxlbmROb2RlLGZsb29yTGlzdCx0cnVlLHZhbGlkTm9kZUZ1bmMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoICFwYXRoICkge1xyXG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgICAgICAvLyDrqqnsoIHsp4Dsl5Ag6rCA7J6lIOqwgOq5jOyatCDsnITsuZjroZwg7J2064+Z7ZWc64ukXHJcbiAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgICAgIHBhdGggPSBhc3Rhci5wYXRoKCBzdGFydE5vZGUsIG5lYXJlc3ROb2RlLCBmbG9vckxpc3QsIHRydWUsIHZhbGlkTm9kZUZ1bmMgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBwYXRoO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHhcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geDJcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5MlxyXG4gICAgICogQHJldHVybnMge1tvYmplY3Qsb2JqZWN0W11dfVxyXG4gICAgICogQG1lbWJlcm9mIHBhdGhNYW5hZ2VyXHJcbiAgICAgKi9cclxuICAgIGZpbmROZWFyZXN0Rmxvb3IoIHgsIHksIHgyLCB5MiApIHtcclxuICAgICAgICAvLyBmbG9vZGZpbGwg67Cp7Iud7Jy866GcIOuPhOuLrO2VoCDsiJgg7J6I64qUIOy5uOydhCDqtaztlahcclxuICAgICAgICAvLyDstZzrjIAg67KU7JyE66W8IOygnO2VnO2VmOqxsOuCmCDsupDsi5zrkJwg7KCV67O066W8IOyTsOuKlCDsi53snLzroZwg7LWc7KCB7ZmU7ZW07JW87ZWc64ukLlxyXG4gICAgICAgIGxldCBjaGVja0xpc3QgPSBbXTtcclxuICAgICAgICBsZXQgZmxvb3IgPSBbXTtcclxuICAgICAgICBsZXQgbWluRGlzdCA9IDk5OTk5OTtcclxuICAgICAgICBsZXQgbmVhcmVzdFByID0gdGhpcy53b3JsZC5tYXAuZ2V0UHJvcGVydHkoIHgsIHkgKTtcclxuXHJcbiAgICAgICAgbGV0IGNoZWNrID0gKCBwciApID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGNoZWNrTGlzdFtwci55ICogdGhpcy53b3JsZC5tYXAud2lkdGggKyBwci54XTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgc2V0Q2hlY2sgPSAoIHByLCB2ICkgPT4ge1xyXG4gICAgICAgICAgICBjaGVja0xpc3RbcHIueSAqIHRoaXMud29ybGQubWFwLndpZHRoICsgcHIueF0gPSB2O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxldCBmbG9vZEZpbGwgPSAoIGN4LCBjeSwgZGlyICkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgcHI7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoIHRydWUgKSB7XHJcbiAgICAgICAgICAgICAgICBwciA9IHRoaXMud29ybGQubWFwLmdldFByb3BlcnR5KCBjeCwgY3kgKTtcclxuICAgICAgICAgICAgICAgIC8vbG9nKHByLndhbGwscHIucmV2ZWFsZWQscHIuX2NoZWNrZWQsdGhpcy5nZXRFbnRpdHkoY3gsY3kpLG1pbkRpc3QpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCBtaW5EaXN0ID09IDk5OTk5OSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICggKCBwci53YWxsICYgR2FtZU1hcC5CTE9DS19QQVNTICkgPT0gMCAmJiBwci5yZXZlYWxlZCAmJiAhY2hlY2soIHByICkgJiYgIXRoaXMud29ybGQuZW50aXR5TWFuYWdlci5nZXRFbnRpdHkoIGN4LCBjeSApICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0Q2hlY2soIHByLCB0cnVlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRpc3QgPSBNYXRoLmFicyggeDIgLSBjeCApICsgTWF0aC5hYnMoIHkyIC0gY3kgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBtaW5EaXN0ID4gZGlzdCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWluRGlzdCA9IGRpc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5lYXJlc3RQciA9IHByO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmbG9vci5wdXNoKCBwciApO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB1cFByID0gdGhpcy53b3JsZC5tYXAuZ2V0UHJvcGVydHkoIGN4LCBjeSAtIDEgKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZG93blByID0gdGhpcy53b3JsZC5tYXAuZ2V0UHJvcGVydHkoIGN4LCBjeSArIDEgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB1cFByLndhbGwgPT0gMCAmJiBwci5yZXZlYWxlZCAmJiAhY2hlY2soIHVwUHIgKSAmJiAhdGhpcy53b3JsZC5lbnRpdHlNYW5hZ2VyLmdldEVudGl0eSggY3gsIGN5IC0gMSApICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9vZEZpbGwoIGN4LCBjeSAtIDEsIC0xICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsb29kRmlsbCggY3ggKyAxLCBjeSAtIDEsIDEgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBkb3duUHIud2FsbCA9PSAwICYmIHByLnJldmVhbGVkICYmICFjaGVjayggZG93blByICkgJiYgIXRoaXMud29ybGQuZW50aXR5TWFuYWdlci5nZXRFbnRpdHkoIGN4LCBjeSArIDEgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxvb2RGaWxsKCBjeCwgY3kgKyAxLCAtMSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9vZEZpbGwoIGN4ICsgMSwgY3kgKyAxLCAxICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGN4ID0gY3ggKyBkaXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmbG9vZEZpbGwoIHgsIHksIC0xICk7XHJcbiAgICAgICAgZmxvb2RGaWxsKCB4ICsgMSwgeSwgMSApO1xyXG5cclxuICAgICAgICByZXR1cm4gW25lYXJlc3RQciwgZmxvb3JdO1xyXG4gICAgfVxyXG5cclxuICAgIC8v6ri47LC+6riwXHJcbiAgICAvL+untSDtlITroZztjbzti7DsnZgg7Ja066CI7J2066W8IOuPjOugpOykjFxyXG4gICAgLy8ueCwueeulvCDsnb3snLzrqbQg65Cc64ukLlxyXG4gICAgLy/rqrvssL7ripQg6rK97JqwIG51bGw7XHJcbiAgICBmaW5kUGF0aCggeCwgeSwgeDIsIHkyLCBpZ25vcmVSZXZlYWwgKSB7XHJcbiAgICAgICAgLy8g7J6Q7LK0IGEgc3RhciDqtaztmIRcclxuICAgICAgICBsZXQgZm9yY2VOZWFyZXN0TW92ZTtcclxuICAgICAgICBsZXQgY2FuUmVhY2hUYXJnZXQ7XHJcbiAgICAgICAgbGV0IHNob3J0ZXN0RGlzdCA9IE1hdGguYWJzKCB4MiAtIHggKSArIE1hdGguYWJzKCB5MiAtIHkgKTtcclxuICAgICAgICBsZXQgbGltaXREaXN0ID0gc2hvcnRlc3REaXN0ICogMztcclxuICAgICAgICAvL+unte2UhOuhnO2NvO2LsFxyXG4gICAgICAgIGxldCBwcjtcclxuICAgICAgICBsZXQgc3RhcnRQciA9IHRoaXMud29ybGQuZ2V0UHJvcGVydHkoIHgsIHkgKTtcclxuICAgICAgICBsZXQgZW5kUHIgPSB0aGlzLndvcmxkLmdldFByb3BlcnR5KCB4MiwgeTIgKTtcclxuXHJcbiAgICAgICAgaWYgKCBzdGFydFByLnggPT0gbnVsbCB8fCBzdGFydFByLnkgPT0gbnVsbCApIHtcclxuICAgICAgICAgICAgLy8g66e17JiB7JetIOuwluyXkOyEnCBmaW5kUGF0aCDsi5zrj4RcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggKCBlbmRQci53YWxsICYgR2FtZU1hcC5CTE9DS19QQVNTICkgPT0gMCAmJiAoIGlnbm9yZVJldmVhbCB8fCBlbmRQci5yZXZlYWxlZCApICYmICF0aGlzLndvcmxkLmVudGl0eU1hbmFnZXIuZ2V0RW50aXR5KCB4MiwgeTIgKSApIHtcclxuICAgICAgICAgICAgLy9cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3JjZU5lYXJlc3RNb3ZlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGRpc3RUb1RhcmdldCA9IE1hdGguYWJzKCB4MiAtIHggKSArIE1hdGguYWJzKCB5MiAtIHkgKTtcclxuXHJcbiAgICAgICAgLy8gMey5uCDsnbTrj5nsnbwg6rK97JqwIO2KueuzhOyymOumrFxyXG4gICAgICAgIGlmICggZGlzdFRvVGFyZ2V0ID09IDEgKSB7XHJcbiAgICAgICAgICAgIC8vbG9nKFwi7ZWc7Lm47J2064+ZXCIpO1xyXG4gICAgICAgICAgICBpZiAoIGZvcmNlTmVhcmVzdE1vdmUgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbIGVuZFByIF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBjaGVja0xpc3QgPSBbXTsvLyDssrTtgaztlZwg7YOA7J287J247KeAIOuniO2Cue2VmOuKlCDrtoDsmrjthYzsnbTruJRcclxuICAgICAgICBsZXQgW2N4LCBjeV0gPSBbeCwgeV07XHJcbiAgICAgICAgbGV0IHN0ZXAgPSAwO1xyXG4gICAgICAgIGxldCBzdGFjayA9IFtdO1xyXG4gICAgICAgIGxldCBmbG9vciA9IFtdO1xyXG4gICAgICAgIGxldCBmbG9vckZyb20gPSBuZXcgTWFwKCk7IC8vIOqyveuhnCDsl63stpTsoIEg7YWM7J2067iUXHJcblxyXG4gICAgICAgIGxldCBtaW5EaXN0ID0gOTk5OTk5O1xyXG4gICAgICAgIGxldCBuZWFyZXN0UHIgPSBudWxsO1xyXG5cclxuICAgICAgICBsZXQgY2hlY2sgPSAoIHByICkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gY2hlY2tMaXN0W3ByLnkgKiB0aGlzLndvcmxkLm1hcC53aWR0aCArIHByLnhdO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxldCBzZXRDaGVjayA9ICggcHIsIHYgKSA9PiB7XHJcbiAgICAgICAgICAgIGNoZWNrTGlzdFtwci55ICogdGhpcy53b3JsZC5tYXAud2lkdGggKyBwci54XSA9IHY7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IHNwcmVhZCA9ICggY3gsIGN5LCBmcm9tUHIsIHN0YWNrICkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgcHIgPSB0aGlzLndvcmxkLmdldFByb3BlcnR5KCBjeCwgY3kgKTtcclxuICAgICAgICAgICAgbGV0IGRpc3QgPSBNYXRoLmFicyggeDIgLSBjeCApICsgTWF0aC5hYnMoIHkyIC0gY3kgKTtcclxuXHJcbiAgICAgICAgICAgIGlmICggbWluRGlzdCA+IGRpc3QgKSB7XHJcbiAgICAgICAgICAgICAgICBtaW5EaXN0ID0gZGlzdDtcclxuICAgICAgICAgICAgICAgIG5lYXJlc3RQciA9IHByO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCBkaXN0ID4gbGltaXREaXN0ICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCBmb3JjZU5lYXJlc3RNb3ZlICkge1xyXG4gICAgICAgICAgICAgICAgLy8g6re87LKY6rmM7KeAIOydtOuPme2VtOyVvCDtlZjripTrjbAg642UIOupgOumrOqwgOuKlCDrqqnsoIHsp4DripQg6rKA7IOJ7ZWgIO2VhOyalCDsl4bsnYxcclxuICAgICAgICAgICAgICAgIC8vbG9nKFwi6rCA6rmM7Jq0IOuqqeyggeyngOydtOuvgOuhnCDrqYjstqRcIixtaW5EaXN0LGRpc3QpO1xyXG4gICAgICAgICAgICAgICAgLy9yZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmxvb3IucHVzaCggcHIgKTtcclxuICAgICAgICAgICAgZmxvb3JGcm9tLnNldCggcHIsIGZyb21QciApO1xyXG4gICAgICAgICAgICBpZiAoIGN4ID09IHgyICYmIGN5ID09IHkyICkgeyAvLyDrqqnsoIHsp4Drj4TssKlcclxuICAgICAgICAgICAgICAgIGNhblJlYWNoVGFyZ2V0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cdFx0XHJcbiAgICAgICAgICAgIGxldCBwcjEgPSB0aGlzLndvcmxkLmdldFByb3BlcnR5KCBjeCwgY3kgLSAxICk7XHJcbiAgICAgICAgICAgIGxldCBwcjIgPSB0aGlzLndvcmxkLmdldFByb3BlcnR5KCBjeCArIDEsIGN5ICk7XHJcbiAgICAgICAgICAgIGxldCBwcjMgPSB0aGlzLndvcmxkLmdldFByb3BlcnR5KCBjeCwgY3kgKyAxICk7XHJcbiAgICAgICAgICAgIGxldCBwcjQgPSB0aGlzLndvcmxkLmdldFByb3BlcnR5KCBjeCAtIDEsIGN5ICk7XHJcblxyXG4gICAgICAgICAgICAvL2xvZyhjaGVja0xpc3RbcHIxXSxjaGVja0xpc3RbcHIyXSxjaGVja0xpc3RbcHIzXSxjaGVja0xpc3RbcHI0XSk7XHJcbiAgICAgICAgICAgIGlmICggKCBwcjEud2FsbCAmIEdhbWVNYXAuQkxPQ0tfUEFTUyApID09IDAgJiYgKCBpZ25vcmVSZXZlYWwgfHwgcHIxLnJldmVhbGVkICkgJiYgIWNoZWNrKCBwcjEgKSAmJiAhdGhpcy53b3JsZC5lbnRpdHlNYW5hZ2VyLmdldEVudGl0eSggY3gsIGN5IC0gMSApICkge1xyXG4gICAgICAgICAgICAgICAgc2V0Q2hlY2soIHByMSwgdHJ1ZSApO1xyXG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaCggW2N4LCBjeSAtIDEsIHByXSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICggKCBwcjIud2FsbCAmIEdhbWVNYXAuQkxPQ0tfUEFTUyApID09IDAgJiYgKCBpZ25vcmVSZXZlYWwgfHwgcHIyLnJldmVhbGVkICkgJiYgIWNoZWNrKCBwcjIgKSAmJiAhdGhpcy53b3JsZC5lbnRpdHlNYW5hZ2VyLmdldEVudGl0eSggY3ggKyAxLCBjeSApICkge1xyXG4gICAgICAgICAgICAgICAgc2V0Q2hlY2soIHByMiwgdHJ1ZSApO1xyXG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaCggW2N4ICsgMSwgY3ksIHByXSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICggKCBwcjMud2FsbCAmIEdhbWVNYXAuQkxPQ0tfUEFTUyApID09IDAgJiYgKCBpZ25vcmVSZXZlYWwgfHwgcHIzLnJldmVhbGVkICkgJiYgIWNoZWNrKCBwcjMgKSAmJiAhdGhpcy53b3JsZC5lbnRpdHlNYW5hZ2VyLmdldEVudGl0eSggY3gsIGN5ICsgMSApICkge1xyXG4gICAgICAgICAgICAgICAgc2V0Q2hlY2soIHByMywgdHJ1ZSApO1xyXG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaCggW2N4LCBjeSArIDEsIHByXSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICggKCBwcjQud2FsbCAmIEdhbWVNYXAuQkxPQ0tfUEFTUyApID09IDAgJiYgKCBpZ25vcmVSZXZlYWwgfHwgcHI0LnJldmVhbGVkICkgJiYgIWNoZWNrKCBwcjQgKSAmJiAhdGhpcy53b3JsZC5lbnRpdHlNYW5hZ2VyLmdldEVudGl0eSggY3ggLSAxLCBjeSApICkge1xyXG4gICAgICAgICAgICAgICAgc2V0Q2hlY2soIHByNCwgdHJ1ZSApO1xyXG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaCggW2N4IC0gMSwgY3ksIHByXSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHRcclxuICAgICAgICAvLyDsi5zsnpHsubjsnYQg7LK07YGs7ZWY6rOgIOyLnOyeke2VnOuLpFxyXG4gICAgICAgIHNldENoZWNrKCBzdGFydFByLCB0cnVlICk7XHJcbiAgICAgICAgc3ByZWFkKCB4LCB5LCBudWxsLCBzdGFjayApO1xyXG4gICAgICAgIC8vbG9nKFwiLS0tLS0tLS0tLS0t6rKA7IOJ7Iuc7J6RLS0tLS0tLS0tLS0tLS0tXCIpO1xyXG4gICAgICAgIGxldCBmb3JjZVN0b3A7XHJcblxyXG4gICAgICAgIHdoaWxlICggIWZvcmNlU3RvcCAmJiAhY2FuUmVhY2hUYXJnZXQgJiYgc3RhY2subGVuZ3RoID4gMCApIHtcclxuICAgICAgICAgICAgc3RlcCA9IHN0ZXAgKyAxO1xyXG4gICAgICAgICAgICAvL2xvZyhcIuuLqOqzhFwiLHN0ZXApO1xyXG4gICAgICAgICAgICBsZXQgb2xkU3RhY2sgPSBzdGFjaztcclxuXHJcbiAgICAgICAgICAgIHN0YWNrID0gW107XHJcbiAgICAgICAgICAgIGZvciAoIGxldCBpIGluIG9sZFN0YWNrICkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHYgPSBvbGRTdGFja1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIHNwcmVhZCggdlswXSwgdlsxXSwgdlsyXSwgc3RhY2sgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL2xvZyhcIuuLqOqzhOqysOqzvFwiLHN0YWNrLmxlbmd0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDsiqTthZ3snYQg7Jet7Jy866GcIOy2lOygge2VnOuLpFxyXG4gICAgICAgIGxldCBbcGF0aCwgcGF0aDJdID0gW1tdLCBbXV07XHJcblxyXG4gICAgICAgIGlmICggY2FuUmVhY2hUYXJnZXQgKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCBcIuqzqOyduCDqsIDriqVcIiApO1xyXG4gICAgICAgICAgICBwciA9IGVuZFByO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHByID0gbmVhcmVzdFByO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyggXCLqs6jsnbgg67aI6rCA64qlXCIscHIueCxwci55ICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCBcIuyKpO2DreydmCDstZzsooXqsrDqs7xcIixzdGVwICk7XHJcbiAgICAgICAgY29uc29sZS5sb2coIHByLngscHIueSApO1xyXG4gICAgICAgIHBhdGgyLnB1c2goIHByICk7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICBwciA9IGZsb29yRnJvbS5nZXQoIHByICk7XHJcbiAgICAgICAgICAgIHBhdGgyLnB1c2goIHByICk7XHJcbiAgICAgICAgfSB3aGlsZSAoICEoIHByID09IG51bGwgfHwgKCBwci54ID09IHggJiYgcHIueSA9PSB5ICkgKSApO1xyXG4gICAgICAgIC8v7YWM7J2067iUIOuSpOynkeq4sFxyXG4gICAgICAgIC8vbG9nKHBhdGgyLmxlbmd0aCxwYXRoMls0XSk7XHJcbiAgICAgICAgZm9yICggbGV0IGkgPSBwYXRoMi5sZW5ndGggLSAyOyBpID49IDA7IGktLSApIHtcclxuICAgICAgICAgICAgcGF0aC5wdXNoKCBwYXRoMltpXSApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9sb2coXCLquLjssL7quLAg6rKw6rO8XCIpO1xyXG4gICAgICAgIC8vZm9yIChsZXQgaSBpbiBwYXRoKSB7XHJcbiAgICAgICAgLy9sZXQgdiA9IHBhdGhbaV07XHJcbiAgICAgICAgLy9sb2codi54LHYueSk7XHJcbiAgICAgICAgLy99XHJcbiAgICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIO2dqeu/jOumtCDsnITsuZgg6rWs7ZWY6riwXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBnZXRTcGxhc2hGbG9vciggeCwgeSwgbnVtT2ZTcGxhc2ggKSB7XHJcbiAgICAgICAgbGV0IHNwbGFzaExpc3QgPSBbXTtcclxuICAgICAgICBsZXQgWywgZmxvb3JdID0gdGhpcy5maW5kTmVhcmVzdEZsb29yKCB4LCB5LCB4LCB5ICk7XHJcbiAgICAgICAgbGV0IHNvcnRlZEZsb29yID0gW107XHJcblxyXG4gICAgICAgIGZvciAoIGxldCBpIGluIGZsb29yICkge1xyXG4gICAgICAgICAgICBsZXQgdiA9IGZsb29yW2ldO1xyXG4gICAgICAgICAgICBsZXQgZGlzdCA9IE1hdGguYWJzKCB2LnggLSB4ICkgKyBNYXRoLmFicyggdi55IC0geSApO1xyXG5cclxuICAgICAgICAgICAgc29ydGVkRmxvb3IucHVzaCggW2Rpc3QsIHZdICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNvcnRlZEZsb29yLnNvcnQoICggYSwgYiApID0+IGFbMF0gLSBiWzBdICk7XHJcbiAgICAgICAgLy9sb2coXCLtnanrv4zrprQg7JyE7LmYIOywvuq4sFwiLHgseSk7XHJcbiAgICAgICAgZm9yICggbGV0IGkgaW4gc29ydGVkRmxvb3IgKSB7XHJcbiAgICAgICAgICAgIGxldCB2ID0gc29ydGVkRmxvb3JbaV07XHJcblxyXG4gICAgICAgICAgICAvLyDqsIDquYzsmrQg6rGw66as7JeQ7ISc67aA7YSwXHJcbiAgICAgICAgICAgIGlmICggdGhpcy53b3JsZC5tYXAudmlzaWJpbGl0eVRpbGVDaGVja2VyLmNhbkJlU2VlbiggeCwgeSwgdlsxXS54LCB2WzFdLnksIDEgKVswXSA9PSAwICkge1xyXG4gICAgICAgICAgICAgICAgc3BsYXNoTGlzdC5wdXNoKCB2WzFdICk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIHNwbGFzaExpc3QubGVuZ3RoID49IG51bU9mU3BsYXNoICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy9sb2coXCLqsbDrpqxcIix2WzFdLHZbMl0ueCx2WzJdLnkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOu/jOumtOyekOumrOqwgCDrqqjsnpDrnbzrqbQg7J6Q6riwIOyekOumrFxyXG4gICAgICAgIGlmICggc3BsYXNoTGlzdC5sZW5ndGggPCBudW1PZlNwbGFzaCApIHtcclxuICAgICAgICAgICAgZm9yICggbGV0IGkgPSAxOyBpIDw9IG51bU9mU3BsYXNoOyBpKysgKSB7XHJcbiAgICAgICAgICAgICAgICBzcGxhc2hMaXN0LnB1c2goIHNvcnRlZEZsb29yWzBdWzFdICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzcGxhc2hMaXN0O1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyDshoztmZjtlaAg7JyE7LmYIOq1rO2VmOq4sFxyXG4gICAgLy8g7J6Q66as6rCAIOu2gOyhse2VoCDsiJgg7J6I64uk64qUIOqyg+yXkCDso7zsnZhcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGdldFN1bW1vbkZsb29yKCB4LCB5LCBudW1PZlN1bW1vbiApIHtcclxuICAgICAgICBsZXQgc3BsYXNoTGlzdCA9IFtdO1xyXG4gICAgICAgIGxldCBbLCBmbG9vcl0gPSB0aGlzLmZpbmROZWFyZXN0Rmxvb3IoIHgsIHksIHgsIHkgKTtcclxuICAgICAgICBsZXQgc29ydGVkRmxvb3IgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yICggbGV0IGkgaW4gZmxvb3IgKSB7XHJcbiAgICAgICAgICAgIGxldCB2ID0gZmxvb3JbaV07XHJcbiAgICAgICAgICAgIGxldCBkaXN0ID0gTWF0aC5hYnMoIHYueCAtIHggKSArIE1hdGguYWJzKCB2LnkgLSB5ICk7XHJcblxyXG4gICAgICAgICAgICBzb3J0ZWRGbG9vci5wdXNoKCBbZGlzdCwgdl0gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc29ydGVkRmxvb3Iuc29ydCggKCBhLCBiICkgPT4gYVswXSAtIGJbMF0gKTtcclxuICAgICAgICBmb3IgKCBsZXQgaSBpbiBzb3J0ZWRGbG9vciApIHtcclxuICAgICAgICAgICAgbGV0IHYgPSBzb3J0ZWRGbG9vcltpXTtcclxuXHJcbiAgICAgICAgICAgIC8vIOqwgOq5jOyatCDqsbDrpqzsl5DshJzrtoDthLBcclxuICAgICAgICAgICAgaWYgKCAhdGhpcy53b3JsZC5lbnRpdHlNYW5hZ2VyLmdldEVudGl0eSggdlsxXS54LCB2WzFdLnkgKSApIHtcclxuICAgICAgICAgICAgICAgIHNwbGFzaExpc3QucHVzaCggdlsxXSApO1xyXG4gICAgICAgICAgICAgICAgaWYgKCBzcGxhc2hMaXN0Lmxlbmd0aCA+PSBudW1PZlN1bW1vbiApIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHNwbGFzaExpc3Q7XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IENvbXBvbmVudCwgVHdlZW4sIGVhc2luZywgc3RhZ2UsIGFwcGxpY2F0aW9uLCBCaXRtYXAsTWVzaCxSZW5kZXJUYXJnZXQsIFV0aWxzLCBNb3ZpZUNsaXAsIFRleHR1cmUsIFRleHR1cmVCYXNlLCBTcHJpdGUsIEV2ZW50LCBUaW1lciB9IGZyb20gXCJAZW5naW5lL2ZsYXRmYXN0XCI7XHJcblxyXG5pbXBvcnQgVmlzaWJpbGl0eVRpbGUgZnJvbSBcIkBsaWIvdmlzaWJpbGl0eVRpbGVcIjtcclxuaW1wb3J0IHNoYWRlckhlbHBlciBmcm9tIFwiQGxpYi9zaGFkZXJIZWxwZXJcIjtcclxuaW1wb3J0IEdhbWVNYXAgZnJvbSBcIi4vZ2FtZU1hcFwiO1xyXG5pbXBvcnQgR0xPQkFMIGZyb20gXCIuLi9nbG9iYWxcIjtcclxuaW1wb3J0IENPTkZJRyBmcm9tIFwiLi4vY29uZmlnXCI7XHJcbmltcG9ydCBXb3JsZCBmcm9tIFwiLi93b3JsZFwiO1xyXG5cclxuXHJcbi8qXHJcblRpbWVyLmRlbGF5ZWRDYWxsKDAsZnVuY3Rpb24oKTtcclxuXHRXb3JsZC5zaGFkb3dNYXNrVGV4dHVyZSA9IFNoYWRlckhlbHBlci5nZXRVcHNjYWxlZFRleHR1cmUoXCJzaGFkb3dNYXNrLnBuZ1wiLGZhbHNlLHtmb3JtYXQ6VGV4dHVyZUJhc2UuUkdCQTU1NTEsd3JhcDpUZXh0dXJlQmFzZS5SRVBFQVR9KTtcclxuZW5kKTtcclxuKi9cclxuXHJcbmNvbnN0IHNpZ2h0VGV4dHVyZSA9IG5ldyBUZXh0dXJlKCBcInNpZ2h0LnBuZ1wiLGZhbHNlLHsgZm9ybWF0OiBUZXh0dXJlQmFzZS5SR0I1NjUgfSApO1xyXG5cclxuZnVuY3Rpb24gaWRUb1h5KCBpZCApIHtcclxuICAgIGlmICggaWQgIT0gbnVsbCApIHtcclxuICAgICAgICBsZXQgdHgsIHR5O1xyXG5cclxuICAgICAgICB0eCA9IGlkICAlIENPTkZJRy5Xb3JsZC50aWxlUGVyUm93O1xyXG4gICAgICAgIHR5ID0gTWF0aC5mbG9vciggaWQgLyBDT05GSUcuV29ybGQudGlsZVBlclJvdyApO1xyXG5cclxuICAgICAgICByZXR1cm4gW3R4LHR5XTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8g7Iuc7JW8IOyymOumrFxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8g7JuQ67O466mU7IucIDEyMzQg7ZmV64yA7ZWcIO2DgOydvCA1Njc47J206rOgIOuwqe2WpeyXkCDrlLDrnbwg7KGw7ZWp7ZWc64ukXHJcblxyXG5jb25zdCBpZHhTZXQgPSBbXTtcclxuXHJcbmlkeFNldFsxXSA9IFswLCA0LCAyLCA0LCA2LCAyM107XHJcbmlkeFNldFsyXSA9IFs1LCAxLCA3LCAxLCAzLCA3XTtcclxuaWR4U2V0WzRdID0gWzAsIDEsIDQsIDEsIDUsIDRdO1xyXG5pZHhTZXRbOF0gPSBbNiwgNywgMiwgNywgMywgMl07XHJcbmlkeFNldFsxICsgNF0gPSBbMCwgMSwgMiwgMSwgNSwgMiwgMiwgNSwgNiwgNSwgNywgNl07XHJcbmlkeFNldFsxICsgOF0gPSBbMCwgMywgMiwgMCwgNCwgNywgMCwgNywgMywgNCwgNSwgN107XHJcbmlkeFNldFsyICsgNF0gPSBbNiwgNCwgNywgNCwgMCwgMywgNCwgMywgNywgMCwgMSwgM107XHJcbmlkeFNldFsyICsgOF0gPSBbNCwgNSwgNiwgNiwgNSwgMSwgNiwgMSwgMiwgMSwgMywgMl07XHJcblxyXG5cclxuLyoqXHJcbiAqIFxyXG4gKiBAdGhpcyBTaWdodE1hbmFnZXJcclxuICpcclxuICovXHJcbmZ1bmN0aW9uIGluaXRTaGFkZXJzKCkge1xyXG4gICAgY29uc3QgbWFza1RleHR1cmUgPSBuZXcgVGV4dHVyZSggQ09ORklHLldvcmxkLnNoYWRvd01hc2tUZXh0dXJlTmFtZSApO1xyXG4gICAgY29uc3QgYmFzZVRleHR1cmUgPSBuZXcgVGV4dHVyZSggQ09ORklHLldvcmxkLnRpbGVUZXh0dXJlTmFtZSApO1xyXG4gICAgY29uc3QgZm9nVGV4dHVyZSA9IHRoaXMudmlzaWJpbGl0eVRleHR1cmU7XHJcbiAgICBjb25zdCBsaWdodFRleHR1cmUgPSBuZXcgVGV4dHVyZSggXCJMaWdodC5wbmdcIiwgZmFsc2UsIHsgZm9ybWF0OiBUZXh0dXJlQmFzZS5SR0JBNTU1MSB9ICk7XHJcblxyXG4gICAgc2hhZGVySGVscGVyLmdldFNoYWRlciggXCJtYXNrXCIgKVxyXG4gICAgICAgIC5zZXRUZXh0dXJlKCBcIm1hc2tTYW1wbGVyXCIsIG1hc2tUZXh0dXJlIClcclxuICAgICAgICAuc2V0VGV4dHVyZSggXCJiYXNlU2FtcGxlclwiLCBiYXNlVGV4dHVyZSApXHJcbiAgICAgICAgLnNldENvbnN0YW50KCBcInRleFNpemVcIiwgYmFzZVRleHR1cmUuc2l6ZSApO1xyXG4gICAgc2hhZGVySGVscGVyLmdldFNoYWRlciggXCJ0aWxlTWFwXCIgKVxyXG4gICAgICAgIC5zZXRUZXh0dXJlKCBcImJhc2VTYW1wbGVyXCIsIGJhc2VUZXh0dXJlIClcclxuICAgICAgICAuc2V0VGV4dHVyZSggXCJmb2dTYW1wbGVyXCIsIGZvZ1RleHR1cmUgKVxyXG4gICAgICAgIC5zZXRDb25zdGFudCggXCJ0ZXhTaXplXCIsIGJhc2VUZXh0dXJlLnNpemUgKTtcclxuICAgIHNoYWRlckhlbHBlci5nZXRTaGFkZXIoIFwibGlnaHRcIiApXHJcbiAgICAgICAgLnNldFRleHR1cmUoIFwiYmFzZVNhbXBsZXJcIiwgbGlnaHRUZXh0dXJlIClcclxuICAgICAgICAuc2V0VGV4dHVyZSggXCJmb2dTYW1wbGVyXCIsIGZvZ1RleHR1cmUgKTtcclxuXHJcbiAgICBtYXNrVGV4dHVyZS53YWl0RXZlbnRzKCBbRXZlbnQuTE9BREVELFtFdmVudC5MT0FERUQsYmFzZVRleHR1cmVdXSwgKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCBcIu2FjeyKpOyzkCDrqqjrkZAg66Gc65Sp7ZaI7J2MXCIgKTtcclxuICAgICAgICB0aGlzLmludmFsaWRhdGVFeWUoKTtcclxuICAgIH0gKTtcclxuICAgIG1hc2tUZXh0dXJlLmV2ZW50VG9Qcm9taXNlKCBFdmVudC5MT0FERUQgKS50aGVuKCAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coIFwi7J2065+w7Iud7Jy866GcIOydtOuypO2KuOulvC4uLlwiICk7XHJcbiAgICB9ICk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTaWdodE1hbmFnZXIgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKkNyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgU2lnaHRNYW5hZ2VyLlxyXG4gICAgICogQHBhcmFtIHtXb3JsZH0gd29ybGRcclxuICAgICAqIEBtZW1iZXJvZiBTaWdodE1hbmFnZXJcclxuICAgICAqL1xyXG4gICAgb25BZGRlZCggd29ybGQgKSB7XHJcbiAgICAgICAgdGhpcy53b3JsZCA9IHdvcmxkO1xyXG4gICAgICAgIHRoaXMuX19yZXZlYWxDYWNoZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnZpc2liaWxpdHlUZXh0dXJlID0gbmV3IFJlbmRlclRhcmdldCggQ09ORklHLldvcmxkLnNoYWRvd1dpZHRoLCBDT05GSUcuV29ybGQuc2hhZG93SGVpZ2h0ICk7XHJcbiAgICAgICAgaW5pdFNoYWRlcnMuY2FsbCggdGhpcyApO1xyXG4gICAgfVxyXG5cclxuICAgIGNhY2hlUmV2ZWFsMiggeCwgeSwgdiApIHtcclxuICAgICAgICAvLyA3IDYgNVxyXG4gICAgICAgIC8vIDQgICAzXHJcbiAgICAgICAgLy8gMiAxIDBcclxuICAgICAgICBjb25zdCByYyA9IHRoaXMuX19yZXZlYWxDYWNoZVt4ICsgXCIsXCIgKyB5XTtcclxuXHJcbiAgICAgICAgdGhpcy5fX3JldmVhbENhY2hlW3ggKyBcIixcIiArIHldID0gKCByYyAhPSBudWxsID8gcmMgOiAwICkgfCB2O1xyXG4gICAgfVxyXG5cclxuICAgIGNhY2hlUmV2ZWFsMyggeCwgeSApIHtcclxuICAgICAgICBjb25zdCBjID0gdGhpcy5fX3JldmVhbENhY2hlO1xyXG5cclxuICAgICAgICBjW3ggKyBcIixcIiArIHldID0gKFxyXG4gICAgICAgICAgICAoIGNbKCB4IC0gMSApICsgXCIsXCIgKyAoIHkgLSAxICldIDw8IDAgPyAxIDw8IDcgOiAwICkgfFxyXG4gICAgICAgICAgICAoIGNbeCArIFwiLFwiICsgKCB5IC0gMSApXSA8PCAxID8gMSA8PCA2IDogMCApIHxcclxuICAgICAgICAgICAgKCBjWyggeCArIDEgKSArIFwiLFwiICsgKCB5IC0gMSApXSA8PCAyID8gMSA8PCA1IDogMCApIHxcclxuICAgICAgICAgICAgKCBjWyggeCAtIDEgKSArIFwiLFwiICsgeV0gPDwgMyA/IDEgPDwgNCA6IDAgKSB8XHJcbiAgICAgICAgICAgICggY1soIHggKyAxICkgKyBcIixcIiArIHldIDw8IDQgPyAxIDw8IDMgOiAwICkgfFxyXG4gICAgICAgICAgICAoIGNbKCB4IC0gMSApICsgXCIsXCIgKyAoIHkgKyAxICldIDw8IDUgPyAxIDw8IDIgOiAwICkgfFxyXG4gICAgICAgICAgICAoIGNbeCArIFwiLFwiICsgKCB5ICsgMSApXSA8PCA2ID8gMSA8PCAxIDogMCApIHxcclxuICAgICAgICAgICAgKCBjWyggeCArIDEgKSArIFwiLFwiICsgKCB5ICsgMSApXSA8PCA3ID8gMSA8PCAwIDogMCApICk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIOyDiOuhreqyjCDrgpjtg4Drgpwg7YOA7J28XHJcbiAgICByZXZlYWxUaWxlKCB4LCB5LCBmb3JjZVJldmVhbCApIHtcclxuICAgICAgICBjb25zdCBwciA9IHRoaXMud29ybGQuZ2V0UHJvcGVydHkoIHgsIHkgKTtcclxuXHJcbiAgICAgICAgaWYgKCAoIGZvcmNlUmV2ZWFsID09IHRydWUgfHwgIXByLnJldmVhbGVkICkgJiYgeCA+PSAwICYmIHggPCB0aGlzLndvcmxkLm1hcC53aWR0aCAmJiB5ID49IDAgJiYgeSA8IHRoaXMud29ybGQubWFwLmhlaWdodCApIHtcclxuICAgICAgICAgICAgaWYgKCBwci5yZXZlYWxlZCA9PSBmYWxzZSApIHRoaXMuY2FjaGVSZXZlYWwzKCB4LCB5ICk7XHJcbiAgICAgICAgICAgIHByLnJldmVhbGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy90aGlzLl9fcmV2ZWFsQ2FjaGVbeCArIFwiLFwiICsgeV0gPSAweGZmO1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlUmV2ZWFsMiggeCAtIDEsIHkgLSAxLDEgPDwgMCApO1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlUmV2ZWFsMiggeCwgeSAtIDEsIDEgPDwgMCB8IDEgPDwgMSB8IDEgPDwgMiApO1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlUmV2ZWFsMiggeCArIDEsIHkgLSAxLDEgPDwgMiApO1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlUmV2ZWFsMiggeCAtIDEsIHksMSA8PCAzIHwgMSA8PCAwIHwgMSA8PCA1ICk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVSZXZlYWwyKCB4ICsgMSwgeSwxIDw8IDQgfCAxIDw8IDcgfCAxIDw8IDIgKTtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZVJldmVhbDIoIHggLSAxLCB5ICsgMSwxIDw8IDIgKTtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZVJldmVhbDIoIHgsIHkgKyAxLDEgPDwgNiB8IDEgPDwgNyB8IDEgPDwgNSApO1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlUmV2ZWFsMiggeCArIDEsIHkgKyAxLDEgPDwgNSApO1xyXG4gICAgICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmF1dG9NYXAuZHJhd1RpbGUoIHgsIHkgKTtcclxuICAgICAgICAgICAgY29uc3QgW3R4LCB0eV0gPSBpZFRvWHkoIHRoaXMud29ybGQubWFwLmdldERhdGEoIHgsIHkgKSApO1xyXG4gICAgICAgICAgICBsZXQgdHgyLCB0eTI7XHJcblxyXG4gICAgICAgICAgICBpZiAoIHByLmJlbG93ICkge1xyXG4gICAgICAgICAgICAgICAgW3R4MiwgdHkyXSA9IGlkVG9YeSggcHIuYmVsb3cgKyAxICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBbYzEsIGMyLCBjMywgYzRdID0gdGhpcy53b3JsZC5tYXAuZ2V0VGlsZUxpZ2h0TWFwKCB4LCB5ICk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIHByLnNoYWRvdyA9PSAwICkge1xyXG4gICAgICAgICAgICAgICAgLy8gQU8g7LKY66asXHJcbiAgICAgICAgICAgICAgICBjb25zdCBfVUwgPSB0aGlzLndvcmxkLmdldFByb3BlcnR5KCB4IC0gMSwgeSAtIDEgKS5zaGFkb3c7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfVSA9IHRoaXMud29ybGQuZ2V0UHJvcGVydHkoIHgsIHkgLSAxICkuc2hhZG93O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgX1VSID0gdGhpcy53b3JsZC5nZXRQcm9wZXJ0eSggeCArIDEsIHkgLSAxICkuc2hhZG93O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgX0wgPSB0aGlzLndvcmxkLmdldFByb3BlcnR5KCB4IC0gMSwgeSApLnNoYWRvdztcclxuICAgICAgICAgICAgICAgIGNvbnN0IF9SID0gdGhpcy53b3JsZC5nZXRQcm9wZXJ0eSggeCArIDEsIHkgKS5zaGFkb3c7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfREwgPSB0aGlzLndvcmxkLmdldFByb3BlcnR5KCB4IC0gMSwgeSArIDEgKS5zaGFkb3c7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfRCA9IHRoaXMud29ybGQuZ2V0UHJvcGVydHkoIHgsIHkgKyAxICkuc2hhZG93O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgX0RSID0gdGhpcy53b3JsZC5nZXRQcm9wZXJ0eSggeCArIDEsIHkgKyAxICkuc2hhZG93O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggX1VMID4gMCB8fCBfVSA+IDAgfHwgX0wgPiAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGMxID0gKCBjMSA+PiAxICkgJiAweDdmN2Y3ZjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIF9VUiA+IDAgfHwgX1UgPiAwIHx8IF9SID4gMCApIHtcclxuICAgICAgICAgICAgICAgICAgICBjMiA9ICggYzIgPj4gMSApICYgMHg3ZjdmN2Y7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBfREwgPiAwIHx8IF9EID4gMCB8fCBfTCA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYzMgPSAoIGMzID4+IDEgKSAmIDB4N2Y3ZjdmO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICggX0RSID4gMCB8fCBfRCA+IDAgfHwgX1IgPiAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGM0ID0gKCBjNCA+PiAxICkgJiAweDdmN2Y3ZjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAgICBpZiAoX1U+MCkgeyBcclxuICAgICAgICAgICAgICAgICAgICBjMT0oYzE+PjMpJjB4MWYxZjFmO1xyXG4gICAgICAgICAgICAgICAgICAgIGMyPShjMj4+MykmMHgxZjFmMWY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL2MxID0gMHhmZmZmZmY7XHJcbiAgICAgICAgICAgIC8vIGMyID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKCBwci5iZWxvdyApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud29ybGQuYmVsb3dUaWxlTWFwLnNldFRpbGUoIHgsIHksIHR4MiwgdHkyLCBudWxsLCBjMSwgMSwgYzIsIDEsIGMzLCAxLCBjNCwgMSApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIHByLnNoYWRvdyA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndvcmxkLndhbGxUaWxlTWFwLnNldFRpbGUoIHgsIHksIHR4LCB0eSwgbnVsbCwgYzEsIDEsIGMyLCAxLCBjMywgMSwgYzQsIDEgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud29ybGQuZmxvb3JUaWxlTWFwLnNldFRpbGUoIHgsIHksIHR4LCB0eSwgbnVsbCwgYzEsIDEsIGMyLCAxLCBjMywgMSwgYzQsIDEgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yICggY29uc3QgaSBpbiB0aGlzLndvcmxkLm1hcC5saWdodExpc3QgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2ID0gdGhpcy53b3JsZC5tYXAubGlnaHRMaXN0W2ldO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggdi54ID09IHggJiYgdi55ID09IHkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbSA9IG5ldyBNZXNoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9sZXQgW3csIGhdID0gW3RleC53aWR0aCwgdGV4LmhlaWdodF07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IDYwO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGMgPSB2LmNvbG9yO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSAwLjU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG0uc2V0VmVydGV4QXJyYXkoIFstciwgLXIsIHIsIC1yLCAtciwgciwgciwgcl0gKTtcclxuICAgICAgICAgICAgICAgICAgICBtLnNldFRleHR1cmVDb29yZGluYXRlQXJyYXkoIFswLCAwLCAxLCAwLCAwLCAxLCAxLCAxXSApO1xyXG4gICAgICAgICAgICAgICAgICAgIG0uc2V0SW5kZXhBcnJheSggWzAsIDEsIDIsIDEsIDMsIDJdICk7XHJcbiAgICAgICAgICAgICAgICAgICAgbS5zZXRDb2xvckFycmF5KCBbYywgYSwgYywgYSwgYywgYSwgYywgYV0gKTtcclxuICAgICAgICAgICAgICAgICAgICBtLnBvc2l0aW9uID0gdGhpcy53b3JsZC50aWxlQ2VudGVyVG9Xb3JsZCggdi54LCB2LnkgKTtcclxuICAgICAgICAgICAgICAgICAgICBtLnNldFNoYWRlciggc2hhZGVySGVscGVyLmdldFNoYWRlciggXCJsaWdodFwiICkgKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmxkLmxpZ2h0TGF5ZXIuYWRkQ2hpbGQoIG0gKTtcclxuICAgICAgICAgICAgICAgICAgICBtLnNldEJsZW5kTW9kZSggU3ByaXRlLkJsZW5kTW9kZXMuQUREICk7XHJcbiAgICAgICAgICAgICAgICAgICAgbS5tb3Rpb25CbHVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdi5tZXNoID0gbTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8gZXllWCxleWVZ7JeQIOq0keybkOydtCDsnojri6Tqs6Ag67O06rOgIOq3uOumvOyekCDrqZTsi5zrpbwg6rWs7ZW064K464ukLlxyXG4gICAgLy8g7Iuc7JW87LKY66as7JeQIOyCrOyaqe2VqFxyXG4gICAgLy8gZXllWCxleWVZ64qUIHdvcmxk7KKM7ZGc7J6ELiDrgpjrqLjsp4DripQg7YOA7J287KKM7ZGcXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBleWVYXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZXllWVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1c1xyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbj19IGNoZWNrRnVuY1xyXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gc2tpcFRhYmxlXHJcbiAgICAgKiBAcmV0dXJucyB7e21lc2g6TWVzaCx2aXNpYmxlVGlsZUxpc3Q6Kn19XHJcbiAgICAgKiBAbWVtYmVyb2YgU2lnaHRNYW5hZ2VyXHJcbiAgICAgKi9cclxuICAgIGdldFNoYWRvd01lc2goIGV5ZVgsIGV5ZVksIHJhZGl1cywgY2hlY2tGdW5jID0gbnVsbCwgc2tpcFRhYmxlID0gZmFsc2UgKSB7XHJcbiAgICAgICAgY29uc3QgY3VzdG9tID0gW107XHJcbiAgICAgICAgY29uc3QgaWR4ID0gW107XHJcbiAgICAgICAgY29uc3QgdmlzaWJsZVRpbGVMaXN0ID0gW107XHJcbiAgICAgICAgY29uc3QgW3csIGhdID0gW2FwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMud2lkdGgsIGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMuaGVpZ2h0XTtcclxuICAgICAgICBjb25zdCBbdHcsIHRoXSA9IFtDT05GSUcuV29ybGQudGlsZVdpZHRoLCBDT05GSUcuV29ybGQudGlsZUhlaWdodF07XHJcbiAgICAgICAgLy8gbGV0IHN4ID0gMSAvIHRoaXMud29ybGQuem9vbTsgLy8g7ZWA7LmY7KSMXHJcbiAgICAgICAgLy8gbGV0IHN5ID0gMSAvIHRoaXMud29ybGQuem9vbTtcclxuICAgICAgICBjb25zdCBleWVUaWxlWCA9IE1hdGguZmxvb3IoIGV5ZVggLyBDT05GSUcuV29ybGQudGlsZVdpZHRoICk7XHJcbiAgICAgICAgY29uc3QgZXllVGlsZVkgPSBNYXRoLmZsb29yKCBleWVZIC8gQ09ORklHLldvcmxkLnRpbGVIZWlnaHQgKTtcclxuICAgICAgICBjb25zdCByID0gTWF0aC5mbG9vciggcmFkaXVzICsgMSApO1xyXG4gICAgICAgIGNvbnN0IHsgeDogdmlld1gxLCB5OiB2aWV3WTEgfSA9IHRoaXMud29ybGQud29ybGRUb1RpbGUoIHRoaXMud29ybGQudmlld1ggLSB3IC8gMiAqIHRoaXMud29ybGQuem9vbSwgdGhpcy53b3JsZC52aWV3WSAtIGggLyAyICogdGhpcy53b3JsZC56b29tICk7XHJcbiAgICAgICAgY29uc3QgW3ZpZXdYMiwgdmlld1kyXSA9IFt2aWV3WDEgKyBNYXRoLmZsb29yKCB3ICogdGhpcy53b3JsZC56b29tIC8gdHcgKSArIDEsIHZpZXdZMSArIE1hdGguZmxvb3IoIGggKiB0aGlzLndvcmxkLnpvb20gLyB0aCApICsgMV07XHJcbiAgICAgICAgY29uc3Qgc2lnaHRYMSA9IE1hdGgubWF4KCAwLCBNYXRoLm1heCggdmlld1gxLCBleWVUaWxlWCAtIHIgKSApO1xyXG4gICAgICAgIGNvbnN0IHNpZ2h0WDIgPSBNYXRoLm1pbiggdGhpcy53b3JsZC5tYXAud2lkdGggLSAxLCBNYXRoLm1pbiggdmlld1gyLCBleWVUaWxlWCArIHIgKSApO1xyXG4gICAgICAgIGNvbnN0IHNpZ2h0WTEgPSBNYXRoLm1heCggMCwgTWF0aC5tYXgoIHZpZXdZMSwgZXllVGlsZVkgLSByICkgKTtcclxuICAgICAgICBjb25zdCBzaWdodFkyID0gTWF0aC5taW4oIHRoaXMud29ybGQubWFwLmhlaWdodCAtIDEsIE1hdGgubWluKCB2aWV3WTIsIGV5ZVRpbGVZICsgciApICk7XHJcblxyXG4gICAgICAgIGNoZWNrRnVuYyA9IGNoZWNrRnVuYyB8fCB0aGlzLndvcmxkLm1hcC5nZXRWaXNpYmlsaXR5LmJpbmQoIHRoaXMud29ybGQubWFwICk7XHJcblxyXG4gICAgICAgIGZvciAoIGxldCB5ID0gc2lnaHRZMTsgeSA8PSBzaWdodFkyOyB5KysgKSB7XHJcbiAgICAgICAgICAgIGZvciAoIGxldCB4ID0gc2lnaHRYMTsgeCA8PSBzaWdodFgyOyB4KysgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaXN0ID0gKCB4IC0gZXllVGlsZVggKSAqKiAyICsgKCB5IC0gZXllVGlsZVkgKSAqKiAyO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggZGlzdCAhPSAwICYmIGRpc3QgPCByICoqIDIgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdiA9IGNoZWNrRnVuYyggeCwgeSApO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOumrO2EtOqwklxyXG4gICAgICAgICAgICAgICAgICAgIC8vIDAg67O07J206rOgIOqwiOyImCDsnojsnYwgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gMSDrs7TsnbTqs6Ag6re4IOychOy5mOuKlCDrsr0gIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIDIg6rCA66Ck7KC47IScIOuztOydtOyngCDslYrsnYxcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwciA9IHRoaXMud29ybGQuZ2V0UHJvcGVydHkoIHgsIHkgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhc2tpcFRhYmxlICYmIHYgPD0gMSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZVRpbGVMaXN0LnB1c2goIHByICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoICggcHIud2FsbCAmIEdhbWVNYXAuQkxPQ0tfVklTSU9OICkgIT0gMCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgW3R4LCB0eV0gPSBbeCAqIHR3LCB5ICogdGhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiYXNlSW5kZXggPSBjdXN0b20ubGVuZ3RoIC8gMztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbS5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g7JuQ67O4IO2DgOydvCDrsoTthY3siqRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4LCB0eSwgMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4ICsgdHcsIHR5LCAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHgsIHR5ICsgdGgsIDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eCArIHR3LCB0eSArIHRoLCAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g7JuQ67O4IO2DgOydvCDrsoTthY3siqRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4LCB0eSwgMSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eCArIHR3LCB0eSwgMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4LCB0eSArIHRoLCAxLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4ICsgdHcsIHR5ICsgdGgsIDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTsvLzgqMuqwnOyUqVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZHgucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VJbmRleCArIDAsIGJhc2VJbmRleCArIDEsIGJhc2VJbmRleCArIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlSW5kZXggKyAxLCBiYXNlSW5kZXggKyAzLCBiYXNlSW5kZXggKyAyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZUluZGV4ICsgNCwgYmFzZUluZGV4ICsgMSwgYmFzZUluZGV4ICsgMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VJbmRleCArIDQsIGJhc2VJbmRleCArIDUsIGJhc2VJbmRleCArIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlSW5kZXggKyAxLCBiYXNlSW5kZXggKyA1LCBiYXNlSW5kZXggKyA3LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZUluZGV4ICsgMSwgYmFzZUluZGV4ICsgNywgYmFzZUluZGV4ICsgMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VJbmRleCArIDIsIGJhc2VJbmRleCArIDMsIGJhc2VJbmRleCArIDcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlSW5kZXggKyAyLCBiYXNlSW5kZXggKyA3LCBiYXNlSW5kZXggKyA2LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZUluZGV4ICsgNCwgYmFzZUluZGV4ICsgMCwgYmFzZUluZGV4ICsgMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VJbmRleCArIDQsIGJhc2VJbmRleCArIDIsIGJhc2VJbmRleCArIDYsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBtID0gbmV3IE1lc2goKTtcclxuXHJcbiAgICAgICAgLy9tLnNldFZlcnRleEFycmF5KGN1c3RvbSk7XHJcbiAgICAgICAgbS5zZXRJbmRleEFycmF5KCBpZHggKTtcclxuICAgICAgICBtLnNldEdlbmVyaWNBcnJheSggXCJjdXN0b21cIiwgY3VzdG9tLCBNZXNoLkFycmF5VHlwZXMuRkxPQVQzMiwgMywgZmFsc2UgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHsgbWVzaDogbSwgdmlzaWJsZVRpbGVMaXN0OiB2aXNpYmxlVGlsZUxpc3QgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wdXRlVmlzaWJpbGl0eSgpIHsgLy92aWV3WDEsdmlld1kxLHZpZXdYMix2aWV3WTIscmFkaXVzKSB7XHJcbiAgICAgICAgLy8gdmlld1gxLHZpZXdZMSx2aWV3WDIsdmlld1kyIOuztOyXrOyngOuKlCDsmIHsl63snZgg7YOA7J287KKM7ZGcXHJcbiAgICAgICAgLy8gcmFkaXVzIOyLnOyVvCDrspTsnIQuIHZpZXfrspTsnITrs7Tri6Qg7J6R7J2MLiDtg4Dsnbwg64uo7JyEXHJcbiAgICAgICAgY29uc3QgW2V5ZVgsIGV5ZVldID0gW3RoaXMud29ybGQuZXllWCwgdGhpcy53b3JsZC5leWVZXTsgLy8g7Iuc7JW87LKY66asIOykkeyLrOygkFxyXG5cclxuICAgICAgICBpZiAoIGV5ZVggPT0gbnVsbCB8fCBleWVZID09IG51bGwgKSB7XHJcbiAgICAgICAgICAgIC8vIOyVhOyngSDsm5Trk5zqsIAg7KSA67mE6rCAIOyViOuQnCDqsr3smrDsnbTri6RcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB6b29tWCA9IDEgLyB0aGlzLndvcmxkLnpvb207IC8vIO2VgOy5mOykjFxyXG4gICAgICAgIGNvbnN0IHpvb21ZID0gMSAvIHRoaXMud29ybGQuem9vbTtcclxuICAgICAgICBjb25zdCBbdGlsZVdpZHRoLCB0aWxlSGVpZ2h0XSA9IFtDT05GSUcuV29ybGQudGlsZVdpZHRoLCBDT05GSUcuV29ybGQudGlsZUhlaWdodF07XHJcbiAgICAgICAgY29uc3QgZXllVGlsZVggPSBNYXRoLmZsb29yKCBleWVYIC8gQ09ORklHLldvcmxkLnRpbGVXaWR0aCApO1xyXG4gICAgICAgIGNvbnN0IGV5ZVRpbGVZID0gTWF0aC5mbG9vciggZXllWSAvIENPTkZJRy5Xb3JsZC50aWxlSGVpZ2h0ICk7XHJcbiAgICAgICAgY29uc3QgcmFkaXVzID0gTWF0aC5mbG9vciggdGhpcy53b3JsZC52aWV3UmFkaXVzICogMTAwICsgMC4wMDUgKSAvIDEwMDtcclxuICAgICAgICBsZXQgeyB4OiB2aWV3WDEsIHk6IHZpZXdZMSB9ID0gdGhpcy53b3JsZC53b3JsZFRvVGlsZSggdGhpcy53b3JsZC52aWV3WCAtIGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMud2lkdGggLyAyICogdGhpcy53b3JsZC56b29tLCB0aGlzLndvcmxkLnZpZXdZIC0gYXBwbGljYXRpb24ubG9naWNhbFJlbmRlckJvdW5kcy5oZWlnaHQgLyAyICogdGhpcy53b3JsZC56b29tICk7XHJcbiAgICAgICAgbGV0IFt2aWV3WDIsIHZpZXdZMl0gPSBbdmlld1gxICsgTWF0aC5mbG9vciggYXBwbGljYXRpb24ubG9naWNhbFJlbmRlckJvdW5kcy53aWR0aCAqIHRoaXMud29ybGQuem9vbSAvIHRpbGVXaWR0aCApLCB2aWV3WTEgKyBNYXRoLmZsb29yKCBhcHBsaWNhdGlvbi5sb2dpY2FsUmVuZGVyQm91bmRzLmhlaWdodCAqIHRoaXMud29ybGQuem9vbSAvIHRpbGVIZWlnaHQgKV07XHJcblxyXG4gICAgICAgIHZpZXdYMSA9IHZpZXdYMSAtIDE7XHJcbiAgICAgICAgdmlld1kxID0gdmlld1kxIC0gMTtcclxuICAgICAgICB2aWV3WDIgPSB2aWV3WDIgKyAxO1xyXG4gICAgICAgIHZpZXdZMiA9IHZpZXdZMiArIDE7XHJcbiAgICAgICAgY29uc3QgcHJvZmlsZUJlZ2luID0gVGltZXIubm93KCk7XHJcbiAgICAgICAgbGV0IHNoYWRvd01lc2gsIHdhbGxNZXNoLCBmbG9vck1lc2g7XHJcbiAgICAgICAgbGV0IGNhY2hlID0gdGhpcy5fX3Zpc2liaWxpdHlDYWNoZTtcclxuXHJcbiAgICAgICAgaWYgKCBjYWNoZSAmJlxyXG4gICAgICAgICAgICBjYWNoZS5leWVUaWxlWCA9PSBleWVUaWxlWCAmJiBjYWNoZS5leWVUaWxlWSA9PSBleWVUaWxlWSAmJlxyXG4gICAgICAgICAgICBjYWNoZS52aWV3WDEgPT0gdmlld1gxICYmIGNhY2hlLnZpZXdZMSA9PSB2aWV3WTEgJiYgY2FjaGUudmlld1gyID09IHZpZXdYMiAmJiBjYWNoZS52aWV3WTIgPT0gdmlld1kyICYmIGNhY2hlLnJhZGl1cyA9PSBNYXRoLmZsb29yKCByYWRpdXMgKSApIHtcclxuICAgICAgICAgICAgLy8g7KeA64Kc67KI7JeQIOqzhOyCsO2VnCDqsoPqs7wg67KU7JyE7JmAIOyLnOygkOydtCDrqqjrkZAg7J287LmY7ZWoXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCBcIuyZhOyghCDsupDsi5ztnojtirhcIiApO1xyXG4gICAgICAgICAgICB3YWxsTWVzaCA9IGNhY2hlLm1XYWxsO1xyXG4gICAgICAgICAgICBmbG9vck1lc2ggPSBjYWNoZS5tRmxvb3I7XHJcbiAgICAgICAgICAgIHNoYWRvd01lc2ggPSBjYWNoZS5tO1xyXG4gICAgICAgICAgICAvLyAoeyBtZXNoOiBzaGFkb3dNZXNoIH0gPSB0aGlzLmdldFNoYWRvd01lc2goZXllWCwgZXllWSwgcmFkaXVzLCBudWxsLCB0cnVlKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3Qgd2FsbFZ0eCA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCB3YWxsVXYgPSBbXTtcclxuICAgICAgICAgICAgY29uc3Qgd2FsbElkeCA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCB3YWxsVmMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGZsb29yVnR4ID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IGZsb29yVXYgPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgZmxvb3JJZHggPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgZmxvb3JWYyA9IFtdO1xyXG5cdFx0XHJcbiAgICAgICAgICAgIGxldCB1c2VDYWNoZWRWaXNpYmlsaXR5O1xyXG4gICAgICAgICAgICBsZXQgY2FjaGVkVmlzaWJpbGl0eTtcclxuXHJcbiAgICAgICAgICAgIGlmICggY2FjaGUgJiYgY2FjaGUuZXllVGlsZVggPT0gZXllVGlsZVggJiYgY2FjaGUuZXllVGlsZVkgPT0gZXllVGlsZVkgJiYgY2FjaGUucmFkaXVzID09IHJhZGl1cyApIHtcclxuICAgICAgICAgICAgICAgIC8vIOyLnOyVvOyZgCDrspTsnITqsIAg6rCZ7J2AIOqyveyasFxyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIFwi7LqQ7Iuc7Z6I7Yq4XCIsIFRpbWVyLm5vdygpIC0gcHJvZmlsZUJlZ2luICk7XHJcbiAgICAgICAgICAgICAgICB1c2VDYWNoZWRWaXNpYmlsaXR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGNhY2hlZFZpc2liaWxpdHkgPSBjYWNoZS52aXNpYmlsaXR5O1xyXG4gICAgICAgICAgICAgICAgLy8oeyBtZXNoOiBzaGFkb3dNZXNoIH0gPSB0aGlzLmdldFNoYWRvd01lc2goZXllWCwgZXllWSwgcmFkaXVzLCBudWxsLCB0cnVlKSk7XHJcbiAgICAgICAgICAgICAgICBzaGFkb3dNZXNoID0gY2FjaGUubTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldCB2aXNpYmxlVGlsZUxpc3Q7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g7JWE656YIO2WieyXkOyEnCAybXMg7KCV64+EIOqxuOumrOqzoCDsnojsnYxcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCB0aGlzLndvcmxkLm1hcC52aXNpYmlsaXR5VGlsZUNoZWNrZXIucmFkaXVzLHJhZGl1cyApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy53b3JsZC5tYXAudmlzaWJpbGl0eVRpbGVDaGVja2VyLmdldFJlc3VsdCggZXllVGlsZVgsIGV5ZVRpbGVZLCByYWRpdXMgKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCBcIjAtMSDsl6zquLDquYzsp4BcIiwgVGltZXIubm93KCkgLSBwcm9maWxlQmVnaW4gKTtcclxuICAgICAgICAgICAgICAgICggeyBtZXNoOiBzaGFkb3dNZXNoLCB2aXNpYmxlVGlsZUxpc3QgfSA9IHRoaXMuZ2V0U2hhZG93TWVzaCggZXllWCwgZXllWSwgcmFkaXVzICkgKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCBcIjAtMiDsl6zquLDquYzsp4BcIiwgVGltZXIubm93KCkgLSBwcm9maWxlQmVnaW4gKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuYXNzZXJ0KCBzaGFkb3dNZXNoLmluZGljZXMgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKCBjb25zdCBpIGluIHZpc2libGVUaWxlTGlzdCApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwciA9IHZpc2libGVUaWxlTGlzdFtpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXZlYWxUaWxlKCBwci54LCBwci55ICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY2FjaGVkVmlzaWJpbGl0eSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIFwiMC0zIOyXrOq4sOq5jOyngFwiLCBUaW1lci5ub3coKSAtIHByb2ZpbGVCZWdpbiApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyggXCIxIOyXrOq4sOq5jOyngFwiLCBUaW1lci5ub3coKSAtIHByb2ZpbGVCZWdpbiApO1xyXG4gICAgICAgICAgICAvLyDruJTroZ3sl5Ag67iU66CM65SpIO2aqOqzvOulvCDrp4zrk5zripQg67aA67aEXHJcbiAgICAgICAgICAgIC8vIO2ZlOuptOyXkCDrs7TsnbTrqbQg66qo65GQIOyymOumrOulvCDtlbTslbztlZzri6QuXHJcbiAgICAgICAgICAgIHRoaXMud2F0ZXJBbW91bnQgPSAwO1xyXG5cclxuICAgICAgICAgICAgZm9yICggbGV0IHkgPSB2aWV3WTE7IHkgPD0gdmlld1kyOyB5KysgKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKCBsZXQgeCA9IHZpZXdYMTsgeCA8PSB2aWV3WDI7IHgrKyApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwciA9IHRoaXMud29ybGQubWFwLmdldFByb3BlcnR5KCB4LCB5ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggcHIgPT0gbnVsbCApIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHByLndhdGVyICYmICFwci5lbnZTb3VuZCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g66y87IKs7Jq065Oc66W8IOuCtOq4sCDsnITtlbTshJwg66y87J2YIOyImOulvCDsubTsmrTtirjtlahcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzdCA9IEdMT0JBTC53b3JsZC5nZXREaXN0YW5jZSggeCwgeSwgZXllVGlsZVgsIGV5ZVRpbGVZICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndhdGVyQW1vdW50ID0gdGhpcy53YXRlckFtb3VudCArICggMSAvICggZGlzdCAqIGRpc3QgKSApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhIXByLnJldmVhbGVkID09IGZhbHNlICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDslYjquYzsp4Qg7YOA7J287JeQIO2VoCDsnbzsnYAg7JeG64ukXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgW3R4LCB0eV0gPSBbeCAqIHRpbGVXaWR0aCwgeSAqIHRpbGVIZWlnaHRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmlzaW9uQmxlbmQgPSAweDJmO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmV2ZWFsQmxlbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0IF9yYyA9IHRoaXMuX19yZXZlYWxDYWNoZVt4ICsgXCIsXCIgKyB5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV2ZWFsQmxlbmQgPSBfcmMgIT0gbnVsbCA/IF9yYyA6IDB4MmY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IF9yYyA9IHRoaXMuX19yZXZlYWxDYWNoZVt4ICsgXCIsXCIgKyB5XTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldmVhbEJsZW5kID0gR2FtZU1hcC50aWxlQmxlbmRUYWJsZVtfcmMgIT0gbnVsbCA/IF9yYyA6IDB4MDBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGVja0Z1bmMgPSB0aGlzLndvcmxkLm1hcC5nZXRWaXNpYmlsaXR5LmJpbmQoIHRoaXMud29ybGQubWFwICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGNoZWNrRnVuYyggeCwgeSApIDw9IDEgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHVzZUNhY2hlZFZpc2liaWxpdHkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3YgPSBjYWNoZWRWaXNpYmlsaXR5W3ggKyBcIixcIiArIHldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpb25CbGVuZCA9IGN2ICE9IG51bGwgPyBjdiA6IDB4MDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2lvbkJsZW5kID0gR2FtZU1hcC50aWxlQmxlbmRUYWJsZVsoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICggY2hlY2tGdW5jKCB4IC0gMSwgeSAtIDEgKSA8PSAxID8gMSA8PCA3IDogMCApIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCBjaGVja0Z1bmMoIHgsIHkgLSAxICkgPD0gMSA/IDEgPDwgNiA6IDAgKSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICggY2hlY2tGdW5jKCB4ICsgMSwgeSAtIDEgKSA8PSAxID8gMSA8PCA1IDogMCApIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCBjaGVja0Z1bmMoIHggLSAxLCB5ICkgPD0gMSA/IDEgPDwgNCA6IDAgKSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICggY2hlY2tGdW5jKCB4ICsgMSwgeSApIDw9IDEgPyAxIDw8IDMgOiAwICkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIGNoZWNrRnVuYyggeCAtIDEsIHkgKyAxICkgPD0gMSA/IDEgPDwgMiA6IDAgKSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICggY2hlY2tGdW5jKCB4LCB5ICsgMSApIDw9IDEgPyAxIDw8IDEgOiAwICkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIGNoZWNrRnVuYyggeCArIDEsIHkgKyAxICkgPD0gMSA/IDEgPDwgMCA6IDAgKSApXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZWRWaXNpYmlsaXR5W3ggKyBcIixcIiArIHldID0gdmlzaW9uQmxlbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHV2eDEgPSB2aXNpb25CbGVuZCAmIDB4MGY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHV2eTEgPSB2aXNpb25CbGVuZCA+PiA0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1dngyID0gcmV2ZWFsQmxlbmQgJiAweDBmO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1dnkyID0gcmV2ZWFsQmxlbmQgPj4gNDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcHIuc2hhZG93ID4gMCAmJiAoIHJldmVhbEJsZW5kIDwgMHgyZiApICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgWyAsIHRpbGVVdiwgLCBdID0gdGhpcy53b3JsZC53YWxsVGlsZU1hcC5nZXRBcnJheSggeCwgeSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFzZUluZGV4MCA9IHdhbGxWdHgubGVuZ3RoIC8gMjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWxsVnR4LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHgsIHR5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4ICsgdGlsZVdpZHRoLCB0eSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eCwgdHkgKyB0aWxlSGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4ICsgdGlsZVdpZHRoLCB0eSArIHRpbGVIZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FsbFV2LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVV2WzBdLCB0aWxlVXZbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVV2WzJdLCB0aWxlVXZbM10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVV2WzRdLCB0aWxlVXZbNV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVV2WzZdLCB0aWxlVXZbN10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FsbElkeC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VJbmRleDAgKyAwLCBiYXNlSW5kZXgwICsgMSwgYmFzZUluZGV4MCArIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZUluZGV4MCArIDEsIGJhc2VJbmRleDAgKyAzLCBiYXNlSW5kZXgwICsgMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1dngxID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHV2eTEgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXZ4MiA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1dnkyID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZjID0gKCAoIHV2eDEgKiA4ICkgPDwgMjQgKSB8ICggKCB1dnkxICogOCApIDw8IDE2ICkgfCAoICggdXZ4MiAqIDggKSA8PCA4ICkgfCAoIHV2eTIgKiA4ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2FsbFZjLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgdmMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgdmMgKyAoIDggPDwgMjQgKSArICggOCA8PCA4ICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgdmMgKyAoIDggPDwgMTYgKSArIDgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgdmMgKyAoIDggPDwgMjQgKSArICggOCA8PCA4ICkgKyAoIDggPDwgMTYgKSArIDgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2FsbFZjLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgdXZ4MSAqIDggLCB1dnkxICogOCx1dngyICogOCx1dnkyICogOCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB1dngxICogOCArIDgsIHV2eTEgKiA4LHV2eDIgKiA4ICsgOCx1dnkyICogOCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB1dngxICogOCAsIHV2eTEgKiA4ICsgOCx1dngyICogOCx1dnkyICogOCArIDgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgdXZ4MSAqIDggKyA4ICwgdXZ5MSAqIDggKyA4LHV2eDIgKiA4ICsgOCx1dnkyICogOCArIDgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FsbFZjLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZ4MSAqIDE4ICsgMSwgIHV2eTEgKiAyNiArIDEsICB1dngyICogMTggKyAxLCAgdXZ5MiAqIDI2ICsgMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dngxICogMTggKyAxNywgdXZ5MSAqIDI2ICsgMSwgIHV2eDIgKiAxOCArIDE3LCB1dnkyICogMjYgKyAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2eDEgKiAxOCArIDEsICB1dnkxICogMjYgKyAyNSwgdXZ4MiAqIDE4ICsgMSwgIHV2eTIgKiAyNiArIDI1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2eDEgKiAxOCArIDE3LCB1dnkxICogMjYgKyAyNSwgdXZ4MiAqIDE4ICsgMTcsIHV2eTIgKiAyNiArIDI1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0aWxlVXY7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwci5zaGFkb3cgPiAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsgLCB0aWxlVXYsICwgXSA9IHRoaXMud29ybGQud2FsbFRpbGVNYXAuZ2V0QXJyYXkoIHgsIHkgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWyAsIHRpbGVVdiwgLCBdID0gdGhpcy53b3JsZC5mbG9vclRpbGVNYXAuZ2V0QXJyYXkoIHgsIHkgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHRpbGVVdiAhPSBudWxsICYmICggcmV2ZWFsQmxlbmQgPiAweDAwICYmIHJldmVhbEJsZW5kIDwgMHgyZiApICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VJbmRleDAgPSBmbG9vclZ0eC5sZW5ndGggLyAyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9vclZ0eC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eCwgdHksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4ICsgdGlsZVdpZHRoLCB0eSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHgsIHR5ICsgdGlsZUhlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHggKyB0aWxlV2lkdGgsIHR5ICsgdGlsZUhlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb29yVXYucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVV2WzBdLCB0aWxlVXZbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVVdlsyXSwgdGlsZVV2WzNdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlVXZbNF0sIHRpbGVVdls1XSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVV2WzZdLCB0aWxlVXZbN10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9vcklkeC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlSW5kZXgwICsgMCwgYmFzZUluZGV4MCArIDEsIGJhc2VJbmRleDAgKyAyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlSW5kZXgwICsgMSwgYmFzZUluZGV4MCArIDMsIGJhc2VJbmRleDAgKyAyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc3QgdmMgPSAoICggdXZ4MSAqIDggKSA8PCAyNCApIHwgKCAoIHV2eTEgKiA4ICkgPDwgMTYgKSB8ICggKCB1dngyICogOCApIDw8IDggKSB8ICggdXZ5MiAqIDggKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvb3JWYy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dngxICogOCAsIHV2eTEgKiA4LHV2eDIgKiA4LHV2eTIgKiA4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dngxICogOCArIDgsIHV2eTEgKiA4LHV2eDIgKiA4ICsgOCx1dnkyICogOCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZ4MSAqIDggLCB1dnkxICogOCArIDgsdXZ4MiAqIDgsdXZ5MiAqIDggKyA4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dngxICogOCArIDggLCB1dnkxICogOCArIDgsdXZ4MiAqIDggKyA4LHV2eTIgKiA4ICsgOCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB3YWxsTWVzaCA9IG5ldyBNZXNoKCk7XHJcbiAgICAgICAgICAgIC8vIHdhbGxNZXNoLnNldEJsZW5kTW9kZSggU3ByaXRlLk9ORSxTcHJpdGUuWkVSTyApO1xyXG4gICAgICAgICAgICB3YWxsTWVzaC5zZXRWZXJ0ZXhBcnJheSggd2FsbFZ0eCApO1xyXG4gICAgICAgICAgICB3YWxsTWVzaC5zZXRUZXh0dXJlQ29vcmRpbmF0ZUFycmF5KCB3YWxsVXYgKTtcclxuICAgICAgICAgICAgd2FsbE1lc2guc2V0SW5kZXhBcnJheSggd2FsbElkeCApO1xyXG4gICAgICAgICAgICAvL21XYWxsLnNldENvbG9yQXJyYXkodmNXYWxsKTtcclxuICAgICAgICAgICAgd2FsbE1lc2guc2V0R2VuZXJpY0FycmF5KCBcInV2dXZcIiwgd2FsbFZjLCBNZXNoLkFycmF5VHlwZXMuVUlOVDE2LCA0LCBmYWxzZSApO1xyXG4gICAgICAgICAgICBmbG9vck1lc2ggPSBuZXcgTWVzaCgpO1xyXG4gICAgICAgICAgICAvL21GbG9vci5zZXRCbGVuZE1vZGUoU3ByaXRlLk9ORSxTcHJpdGUuWkVSTyk7XHJcbiAgICAgICAgICAgIGZsb29yTWVzaC5zZXRWZXJ0ZXhBcnJheSggZmxvb3JWdHggKTtcclxuICAgICAgICAgICAgZmxvb3JNZXNoLnNldFRleHR1cmVDb29yZGluYXRlQXJyYXkoIGZsb29yVXYgKTtcclxuICAgICAgICAgICAgZmxvb3JNZXNoLnNldEluZGV4QXJyYXkoIGZsb29ySWR4ICk7XHJcbiAgICAgICAgICAgIC8vbUZsb29yLnNldENvbG9yQXJyYXkodmNGbG9vcik7XHJcbiAgICAgICAgICAgIGZsb29yTWVzaC5zZXRHZW5lcmljQXJyYXkoIFwidXZ1dlwiLCBmbG9vclZjLCBNZXNoLkFycmF5VHlwZXMuVUlOVDE2LCA0LCBmYWxzZSApO1xyXG4gICAgICAgICAgICB0aGlzLl9fdmlzaWJpbGl0eUNhY2hlID0ge307XHJcbiAgICAgICAgICAgIGNhY2hlID0gdGhpcy5fX3Zpc2liaWxpdHlDYWNoZTtcclxuICAgICAgICAgICAgY2FjaGUudmlzaWJpbGl0eSA9IGNhY2hlZFZpc2liaWxpdHk7XHJcbiAgICAgICAgICAgIGNhY2hlLmV5ZVRpbGVYID0gZXllVGlsZVg7XHJcbiAgICAgICAgICAgIGNhY2hlLmV5ZVRpbGVZID0gZXllVGlsZVk7XHJcbiAgICAgICAgICAgIGNhY2hlLnZpZXdYMSA9IHZpZXdYMTtcclxuICAgICAgICAgICAgY2FjaGUudmlld1kxID0gdmlld1kxO1xyXG4gICAgICAgICAgICBjYWNoZS52aWV3WDIgPSB2aWV3WDI7XHJcbiAgICAgICAgICAgIGNhY2hlLnZpZXdZMiA9IHZpZXdZMjtcclxuICAgICAgICAgICAgY2FjaGUucmFkaXVzID0gTWF0aC5mbG9vciggcmFkaXVzICk7XHJcbiAgICAgICAgICAgIGNhY2hlLm0gPSBzaGFkb3dNZXNoO1xyXG4gICAgICAgICAgICBjYWNoZS5tV2FsbCA9IHdhbGxNZXNoO1xyXG4gICAgICAgICAgICBjYWNoZS5tRmxvb3IgPSBmbG9vck1lc2g7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCBcIuyLnOyVvOyymOumrOyXkCDqsbjrprAg7Iuc6rCEXCIsICggVGltZXIubm93KCkgLSBwcm9maWxlQmVnaW4gKSApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2hhZG93TWVzaC5zZXRDb2xvck11bHRpcGxpZXIoIDAsIDEsIDEgKTtcclxuICAgICAgICBzaGFkb3dNZXNoLnNldEJsZW5kTW9kZSggU3ByaXRlLkJsZW5kTW9kZXMuTVVMVElQTFkgKTtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgc3gxLCBzeTE7XHJcblxyXG4gICAgICAgIHN4MSA9ICggQ09ORklHLldvcmxkLnNoYWRvd1dpZHRoIC8gYXBwbGljYXRpb24ubG9naWNhbFJlbmRlckJvdW5kcy53aWR0aCAqIHpvb21YICk7XHJcbiAgICAgICAgc3kxID0gKCBDT05GSUcuV29ybGQuc2hhZG93SGVpZ2h0IC8gYXBwbGljYXRpb24ubG9naWNhbFJlbmRlckJvdW5kcy5oZWlnaHQgKiB6b29tWSApO1xyXG4gICAgICAgIGNvbnN0IGF4ID0gKCBDT05GSUcuV29ybGQuc2hhZG93V2lkdGggLyAyIC0gTWF0aC5mbG9vciggdGhpcy53b3JsZC52aWV3WCApICogQ09ORklHLldvcmxkLnNoYWRvd1NjYWxlICk7XHJcbiAgICAgICAgY29uc3QgYXkgPSAoIENPTkZJRy5Xb3JsZC5zaGFkb3dIZWlnaHQgLyAyIC0gTWF0aC5mbG9vciggdGhpcy53b3JsZC52aWV3WSApICogQ09ORklHLldvcmxkLnNoYWRvd1NjYWxlICk7XHJcblxyXG4gICAgICAgIHNoYWRvd01lc2guc2V0U2NhbGUoIENPTkZJRy5Xb3JsZC5zaGFkb3dTY2FsZSApO1xyXG4gICAgICAgIHdhbGxNZXNoLnNldFNjYWxlKCBDT05GSUcuV29ybGQuc2hhZG93U2NhbGUgKTtcclxuICAgICAgICBmbG9vck1lc2guc2V0U2NhbGUoIENPTkZJRy5Xb3JsZC5zaGFkb3dTY2FsZSApO1xyXG4gICAgICAgIHNoYWRvd01lc2guc2V0UG9zaXRpb24oIGF4LCBheSApO1xyXG4gICAgICAgIHdhbGxNZXNoLnNldFBvc2l0aW9uKCBheCwgYXkgKTtcclxuICAgICAgICBmbG9vck1lc2guc2V0UG9zaXRpb24oIGF4LCBheSApO1xyXG4gICAgICAgIGNvbnN0IHJhZGl1c0JpdG1hcCA9IG5ldyBNZXNoKCk7XHJcblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmFkaXVzQml0bWFwLnNldENvbG9yQXJyYXkoIFsweGZmZmZmZiwgMSwgMHhmZmZmZmYsIDEsIDB4ZmZmZmZmLCAxLCAweGZmZmZmZiwgMV0gKTtcclxuICAgICAgICAgICAgcmFkaXVzQml0bWFwLnNldEluZGV4QXJyYXkoIFswLCAxLCAyLCAxLCAzLCAyXSApO1xyXG4gICAgICAgICAgICByYWRpdXNCaXRtYXAuc2V0VGV4dHVyZSggc2lnaHRUZXh0dXJlICk7XHJcbiAgICAgICAgICAgIGNvbnN0IHcgPSBhcHBsaWNhdGlvbi5sb2dpY2FsUmVuZGVyQm91bmRzLndpZHRoIC8gem9vbVg7XHJcbiAgICAgICAgICAgIGNvbnN0IGggPSBhcHBsaWNhdGlvbi5sb2dpY2FsUmVuZGVyQm91bmRzLmhlaWdodCAvIHpvb21ZO1xyXG5cclxuICAgICAgICAgICAgcmFkaXVzQml0bWFwLnNldFZlcnRleEFycmF5KCBbLXcgLyAyLCAtaCAvIDIsIHcgLyAyLCAtaCAvIDIsIC13IC8gMiwgaCAvIDIsIHcgLyAyLCBoIC8gMl0gKTtcclxuICAgICAgICAgICAgLy9yYWRpdXNCaXRtYXAuc2V0QW5jaG9yUG9pbnQoMC41LCAwLjUpO1xyXG4gICAgICAgICAgICByYWRpdXNCaXRtYXAuc2V0U2NhbGUoIENPTkZJRy5Xb3JsZC5zaGFkb3dTY2FsZSApO1xyXG4gICAgICAgICAgICByYWRpdXNCaXRtYXAuc2V0UG9zaXRpb24oIENPTkZJRy5Xb3JsZC5zaGFkb3dXaWR0aCAvIDIsIENPTkZJRy5Xb3JsZC5zaGFkb3dIZWlnaHQgLyAyICk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRzeCA9IENPTkZJRy5Xb3JsZC50aWxlV2lkdGggKiAoIHJhZGl1cyAqIDAuOSAtIDEgKSAvIHNpZ2h0VGV4dHVyZS53aWR0aDtcclxuICAgICAgICAgICAgY29uc3QgdHN5ID0gQ09ORklHLldvcmxkLnRpbGVIZWlnaHQgKiAoIHJhZGl1cyAqIDAuOSAtIDEgKSAvIHNpZ2h0VGV4dHVyZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlQWRqdXN0WCA9IENPTkZJRy5Xb3JsZC50aWxlSGVpZ2h0IC8gQ09ORklHLldvcmxkLnRpbGVXaWR0aCAvIHRzeCAvIDIgLyAyO1xyXG4gICAgICAgICAgICBjb25zdCBzY2FsZUFkanVzdFkgPSBDT05GSUcuV29ybGQudGlsZVdpZHRoIC8gQ09ORklHLldvcmxkLnRpbGVIZWlnaHQgLyB0c3kgLyAyO1xyXG4gICAgICAgICAgICBjb25zdCB0Y3ggPSAoIC10aGlzLndvcmxkLmV5ZVggKyB0aGlzLndvcmxkLnZpZXdYICkgKiBzY2FsZUFkanVzdFggKyAoIHNpZ2h0VGV4dHVyZS53aWR0aCAvIDIgKTtcclxuICAgICAgICAgICAgY29uc3QgdGN5ID0gKCAtdGhpcy53b3JsZC5leWVZICsgdGhpcy53b3JsZC52aWV3WSApICogc2NhbGVBZGp1c3RZICsgKCBzaWdodFRleHR1cmUuaGVpZ2h0IC8gMiApO1xyXG4gICAgICAgICAgICBjb25zdCB0dyA9IHRoaXMud29ybGQudmlld1dpZHRoIC8gdHN4IC8gc3gxICogMjtcclxuICAgICAgICAgICAgY29uc3QgdGggPSB0aGlzLndvcmxkLnZpZXdIZWlnaHQgLyB0c3kgLyBzeTEgKiAyO1xyXG5cclxuICAgICAgICAgICAgcmFkaXVzQml0bWFwLnNldFRleHR1cmVDb29yZGluYXRlQXJyYXkoIFtcclxuICAgICAgICAgICAgICAgIHRjeCAtIHR3IC8gMiwgdGN5IC0gdGggLyAyLCB0Y3ggKyB0dyAvIDIsIHRjeSAtIHRoIC8gMixcclxuICAgICAgICAgICAgICAgIHRjeCAtIHR3IC8gMiwgdGN5ICsgdGggLyAyLCB0Y3ggKyB0dyAvIDIsIHRjeSArIHRoIC8gMixcclxuICAgICAgICAgICAgXSApO1xyXG4gICAgICAgICAgICByYWRpdXNCaXRtYXAuc2V0QmxlbmRNb2RlKCBTcHJpdGUuQmxlbmRNb2Rlcy5NVUxUSVBMWSApO1xyXG4gICAgICAgIH1cclxuXHRcclxuICAgICAgICAvLyBiIOqwkuydhCDrgq7stpTrqbQg7Iuc7JW8IOuylOychOqwgCDsnbzsoJXtlZjqsowg67Cd7JWE7KeE64ukLlxyXG4gICAgICAgIHRoaXMudmlzaWJpbGl0eVRleHR1cmUuY2xlYXIoIDB4ZmZmZmZmLCAxLjAgKTtcclxuICAgICAgICAvLyBtIOydgCB3YWxs7J2EIOyjvOyasSDripjrprAg66mU7Iuc7J2064ukXHJcbiAgICAgICAgLy8g7IOJ7J2AIOu4lOuemVxyXG4gICAgICAgIGZsb29yTWVzaC5zZXRTaGFkZXIoIHNoYWRlckhlbHBlci5nZXRTaGFkZXIoIFwibWFza1wiICkgKTtcclxuICAgICAgICAvLyDrsJTri6XrqZTsi5xcclxuICAgICAgICBzaGFkZXJIZWxwZXIuZ2V0U2hhZGVyKCBcIm1hc2tcIiApLnNldENvbnN0YW50KCBcIm1hc2tcIiwgMS4wICk7XHJcbiAgICAgICAgdGhpcy52aXNpYmlsaXR5VGV4dHVyZS5kcmF3KCBmbG9vck1lc2ggKTtcclxuXHJcbiAgICAgICAgLy9tLnNldFNoYWRlcigpO1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IGV4ID0gKCBleWVYIC0gTWF0aC5mbG9vciggdGhpcy53b3JsZC52aWV3WCApICkgLyBDT05GSUcuV29ybGQuc2hhZG93V2lkdGg7XHJcbiAgICAgICAgICAgIGxldCBleSA9ICggZXllWSAtIE1hdGguZmxvb3IoIHRoaXMud29ybGQudmlld1kgKSApIC8gQ09ORklHLldvcmxkLnNoYWRvd0hlaWdodDtcclxuXHJcbiAgICAgICAgICAgIGV4ID0gZXggKiAyICogQ09ORklHLldvcmxkLnNoYWRvd1NjYWxlO1xyXG4gICAgICAgICAgICBleSA9IGV5ICogMiAqIENPTkZJRy5Xb3JsZC5zaGFkb3dTY2FsZTtcclxuICAgICAgICAgICAgLy9sb2coZXgsZXkpO1xyXG4gICAgICAgICAgICBzaGFkb3dNZXNoLnNldFNoYWRlciggc2hhZGVySGVscGVyLmdldFNoYWRlciggXCJzaGFkb3dcIiApICk7XHJcbiAgICAgICAgICAgIHNoYWRlckhlbHBlci5nZXRTaGFkZXIoIFwic2hhZG93XCIgKS5zZXRDb25zdGFudCggXCJleWVQb3NcIiwgW2V4LCBleSwgMCwgMF0gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8v7Iuc7JW866mU7Iuc66W8IOq3uOumsOuLpFxyXG4gICAgICAgIHRoaXMudmlzaWJpbGl0eVRleHR1cmUuZHJhdyggc2hhZG93TWVzaCApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8v7JuQ7ZiV6rCQ7IeE7J2066+47KeA66W8IOq3uOumsOuLpFxyXG4gICAgICAgIHRoaXMudmlzaWJpbGl0eVRleHR1cmUuZHJhdyggcmFkaXVzQml0bWFwICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc2hhZGVySGVscGVyLmdldFNoYWRlciggXCJtYXNrXCIgKS5zZXRDb25zdGFudCggXCJtYXNrXCIsIDAuMCApO1xyXG5cclxuICAgICAgICAvL+uyveydhCDqt7jrprDri6RcclxuICAgICAgICB3YWxsTWVzaC5zZXRTaGFkZXIoIHNoYWRlckhlbHBlci5nZXRTaGFkZXIoIFwibWFza1wiICkgKTtcclxuICAgICAgICBzaGFkZXJIZWxwZXIuZ2V0U2hhZGVyKCBcIm1hc2tcIiApLnNldFRleHR1cmUoIFwibWFza1NhbXBsZXJcIiwgbmV3IFRleHR1cmUoIENPTkZJRy5Xb3JsZC5zaGFkb3dNYXNrVGV4dHVyZU5hbWUgKSApO1xyXG5cclxuICAgICAgICB0aGlzLnZpc2liaWxpdHlUZXh0dXJlLmRyYXcoIHdhbGxNZXNoICk7XHJcblxyXG4gICAgICAgIC8vIFI97Iuc7JW8IEc96re466a87J6QIEI966eI7Iqk7YK5XHJcbiAgICAgICAgaWYgKCBmYWxzZSApIHtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLmRlYnVnQml0bWFwICE9IG51bGwgKSB0aGlzLmRlYnVnQml0bWFwLnJlbW92ZUZyb21QYXJlbnQoKTtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1Z0JpdG1hcCA9IG5ldyBCaXRtYXAoIHRoaXMudmlzaWJpbGl0eVRleHR1cmUgKTtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1Z0JpdG1hcC5zZXRTY2FsZSggMC4zIC8gQ09ORklHLldvcmxkLnNoYWRvd1NjYWxlICk7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWdCaXRtYXAueHkgPSBbLTIwMCwxMDBdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy53b3JsZC5hZGRDaGlsZCggdGhpcy5kZWJ1Z0JpdG1hcCApO1xyXG4gICAgICAgICAgICAvL20uc2V0U2NhbGUoMC41KTtcclxuICAgICAgICAgICAgLy9tLnNldE92ZXJyaWRlQ29sb3IoMHgwMDAwMDApO1xyXG4gICAgICAgICAgICAvL3RoaXMuZGVidWdCaXRtYXAuYWRkQ2hpbGQobSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgICAgICAgICAgICBcclxuICAgIGludmFsaWRhdGVWaXNpYmlsaXR5KCkge1xyXG4gICAgICAgIHRoaXMuX192aXNpYmlsaXR5Q2FjaGUgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIOyLnOyVvOydmCDsmKTruIzsoJ3tirgg67O07J206riwIOyIqOq4sOq4sCBcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHJlZnJlc2hFbnRpdHlWaXNpYmlsaXR5KCkge1xyXG4gICAgICAgIHRoaXMud29ybGQuZW50aXR5TGF5ZXIuc29ydENoaWxkcmVuKCk7XHJcblxyXG4gICAgICAgIGZvciAoIGNvbnN0IGsgaW4gdGhpcy53b3JsZC5lbnRpdHlNYW5hZ2VyLmVudGl0aWVzQnlYeSApIHtcclxuICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMud29ybGQuZW50aXR5TWFuYWdlci5lbnRpdGllc0J5WHlba107XHJcblxyXG4gICAgICAgICAgICBpZiAoIHYudmlzaWJsZVR3ICkge1xyXG4gICAgICAgICAgICAgICAgdi52aXNpYmxlVHcuc3RvcCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoICggdGhpcy53b3JsZC5tYXAuZ2V0VmlzaWJpbGl0eSggdi50aWxlWCwgdi50aWxlWSApICYgR2FtZU1hcC5CTE9DS19WSVNJT04gKSAhPSAwICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCB2LmlzUGxheWVyICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCBcIu2UjOugiOydtOyWtOqwgCDslYjrs7TsnoRcIiwgdi50aWxlWCwgdi50aWxlWSwgdGhpcy53b3JsZC5tYXAuZ2V0VmlzaWJpbGl0eSggdi50aWxlWCwgdi50aWxlWSApICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdi52aXNpYmxlVHcgPSBuZXcgVHdlZW4oIHYsIDIwMCwgeyBhbHBoYTogMC4wIH0sIHsgZWFzZTogZWFzaW5nLmxpbmVhciB9IClcclxuICAgICAgICAgICAgICAgICAgICAub25Db21wbGV0ZSggKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2LnNldFZpc2libGUoIGZhbHNlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdi5zZXRWaXNpYmxlKCB0cnVlICk7XHJcbiAgICAgICAgICAgICAgICB2LnZpc2libGVUdyA9IG5ldyBUd2VlbiggdiwgMTAwLCB7IGFscGhhOiAxLjAgfSwgeyBlYXNlOiBlYXNpbmcubGluZWFyIH0gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yICggY29uc3QgayBpbiB0aGlzLndvcmxkLmVudGl0eU1hbmFnZXIuaXRlbXNCeVh5ICkge1xyXG4gICAgICAgICAgICBjb25zdCBpdGVtcyA9IHRoaXMud29ybGQuZW50aXR5TWFuYWdlci5pdGVtc0J5WHlba107XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBpdGVtc1tpdGVtcy5sZW5ndGggLSAxXTtcclxuXHJcbiAgICAgICAgICAgIGlmICggaXRlbS52aXNpYmxlVHcgKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLnZpc2libGVUdy5zdG9wKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICggKCB0aGlzLndvcmxkLm1hcC5nZXRWaXNpYmlsaXR5KCBpdGVtLnRpbGVYLCBpdGVtLnRpbGVZICkgJiBHYW1lTWFwLkJMT0NLX1ZJU0lPTiApICE9IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAvL2xvZyhcIuyVhOydtO2FnOyIqOq5gFwiLGl0ZW0udGlsZVgsaXRlbS50aWxlWSk7XHJcbiAgICAgICAgICAgICAgICBpdGVtLnZpc2libGVUdyA9IG5ldyBUd2VlbiggaXRlbSwgMjAwLCB7IGFscGhhOiAwLjAgfSwgeyBlYXNlOiBlYXNpbmcubGluZWFyIH0gKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNvbXBsZXRlKCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uc2V0VmlzaWJsZSggZmFsc2UgKTtcclxuICAgICAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvL2xvZyhcIuyVhOydtO2FnOuztOyehFwiLGl0ZW0udGlsZVgsaXRlbS50aWxlWSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoICFpdGVtLmlzVmlzaWJsZSgpICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uc2V0VmlzaWJsZSggdHJ1ZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0udmlzaWJsZVR3ID0gbmV3IFR3ZWVuKCBpdGVtLCAxMDAsIHsgYWxwaGE6IDEuMCB9LCB7IGVhc2U6IGVhc2luZy5saW5lYXIgfSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDrnbzsnbTtirhcclxuICAgICAgICBmb3IgKCBjb25zdCBpIGluIHRoaXMud29ybGQubWFwLmxpZ2h0TGlzdCApIHtcclxuICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMud29ybGQubWFwLmxpZ2h0TGlzdFtpXTtcclxuXHJcbiAgICAgICAgICAgIGlmICggdi5tZXNoICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCAoIHRoaXMud29ybGQubWFwLmdldFZpc2liaWxpdHkoIHYueCwgdi55ICkgJiBHYW1lTWFwLkJMT0NLX1ZJU0lPTiApICE9IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdi5tZXNoLnJlbW92ZUZyb21QYXJlbnQoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53b3JsZC5saWdodExheWVyLmFkZENoaWxkKCB2Lm1lc2ggKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjYW5CZVNlZW4oIHgsIHksIHdhbGwgKSB7XHJcbiAgICAgICAgY29uc3QgeyB4OiBleWVUaWxlWCwgeTogZXllVGlsZVkgfSA9IHRoaXMud29ybGQud29ybGRUb1RpbGUoIHRoaXMud29ybGQuZXllWCwgdGhpcy53b3JsZC5leWVZICk7XHJcblxyXG4gICAgICAgIGlmICggd2FsbCApIHtcclxuICAgICAgICAgICAgY29uc3QgW3IsIHJ4LCByeV0gPSB0aGlzLndvcmxkLm1hcC52aXNpYmlsaXR5VGlsZUNoZWNrZXIuY2FuQmVTZWVuKCBleWVUaWxlWCwgZXllVGlsZVksIHgsIHksIHdhbGwgKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBbciA9PSBWaXNpYmlsaXR5VGlsZS5FTVBUWSwgciwgcngsIHJ5XTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB3YWxs7J2EIOyngOygle2VmOyngCDslYrsnLzrqbRcclxuICAgICAgICAgICAgLy8g7LqQ7Iuc65CcIOyLnOyVvCDsg4Htg5zrpbwg6rCA7KeA6rOgIOuwlOuhnCDrj4zroKTspIDri6QuXHJcbiAgICAgICAgICAgIC8vIOu2gOygle2Zle2VoCDsiJgg7J6I7J2M7JeQIOycoOydmFxyXG4gICAgICAgICAgICBsZXQgW3IsIHJ4LCByeV0gPSBbdGhpcy53b3JsZC5tYXAuZ2V0VmlzaWJpbGl0eSggeCwgeSApLCB4LCB5XTtcclxuXHJcbiAgICAgICAgICAgIGlmICggciAhPSBWaXNpYmlsaXR5VGlsZS5FTVBUWSApIHtcclxuICAgICAgICAgICAgICAgIFtyLCByeCwgcnldID0gdGhpcy53b3JsZC5tYXAudmlzaWJpbGl0eVRpbGVDaGVja2VyLmNhbkJlU2VlbiggZXllVGlsZVgsIGV5ZVRpbGVZLCB4LCB5LCBHYW1lTWFwLkJMT0NLX1ZJU0lPTiApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gW3IgPT0gVmlzaWJpbGl0eVRpbGUuRU1QVFksIHIsIHJ4LCByeV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNhblNlZSggeDEsIHkxLCB4MiwgeTIsIHdhbGwgKSB7XHJcbiAgICAgICAgY29uc3QgW3IsIHJ4LCByeV0gPSB0aGlzLndvcmxkLm1hcC52aXNpYmlsaXR5VGlsZUNoZWNrZXIuY2FuQmVTZWVuKFxyXG4gICAgICAgICAgICB4MSwgeTEsIHgyLCB5Miwgd2FsbCB8fCBHYW1lTWFwLkJMT0NLX1ZJU0lPTiApO1xyXG5cclxuICAgICAgICByZXR1cm4gW3IgPT0gVmlzaWJpbGl0eVRpbGUuRU1QVFksIHIsIHJ4LCByeV07XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8g7IWw7J20642UIOqwseyLoFxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdXBkYXRlU2hhZGVyVmlld0luZm8oKSB7XHJcbiAgICAgICAgY29uc3Qgc3ggPSAxIC8gdGhpcy53b3JsZC56b29tO1xyXG4gICAgICAgIGNvbnN0IHN5ID0gMSAvIHRoaXMud29ybGQuem9vbTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2hhZG93V2lkdGggPSBDT05GSUcuV29ybGQuc2hhZG93V2lkdGggLyBDT05GSUcuV29ybGQuc2hhZG93U2NhbGU7XHJcbiAgICAgICAgY29uc3Qgc2hhZG93SGVpZ2h0ID0gQ09ORklHLldvcmxkLnNoYWRvd0hlaWdodCAvIENPTkZJRy5Xb3JsZC5zaGFkb3dTY2FsZTtcclxuICAgICAgICBjb25zdCB0ID0ge1xyXG4gICAgICAgICAgICAvLyB2aWV3UG9zLnh5IHZpZXdTaXplLnp3XHJcbiAgICAgICAgICAgIHZpZXdJbmZvOiBbXHJcbiAgICAgICAgICAgICAgICAvLzAuNSAtIChhcHBsaWNhdGlvbi5sb2dpY2FsUmVuZGVyQm91bmRzLndpZHRoIC8gMiAvIHN4IC0gVXRpbHMuZnJhYyhVdGlscy5wcmVjaXNpb24odGhpcy53b3JsZC52aWV3WCwgMykpICsgdGhpcy53b3JsZC54KSAvIENPTkZJRy5Xb3JsZC5zaGFkb3dXaWR0aCAqIENPTkZJRy5Xb3JsZC5zaGFkb3dTY2FsZSxcclxuICAgICAgICAgICAgICAgIC8vMC41IC0gKGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMuaGVpZ2h0IC8gMiAvIHN5ICsgVXRpbHMuZnJhYyhVdGlscy5wcmVjaXNpb24odGhpcy53b3JsZC52aWV3WSwgMykpIC0gdGhpcy53b3JsZC55KSAvIENPTkZJRy5Xb3JsZC5zaGFkb3dIZWlnaHQgKiBDT05GSUcuV29ybGQuc2hhZG93U2NhbGUsXHJcbiAgICAgICAgICAgICAgICAwLjUgLSAoIGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMud2lkdGggLyAyIC8gc3ggICsgdGhpcy53b3JsZC54ICkgLyBzaGFkb3dXaWR0aCxcclxuICAgICAgICAgICAgICAgIDAuNSAtICggYXBwbGljYXRpb24ubG9naWNhbFJlbmRlckJvdW5kcy5oZWlnaHQgLyAyIC8gc3kgIC0gdGhpcy53b3JsZC55ICkgLyBzaGFkb3dIZWlnaHQsXHJcbiAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbi5sb2dpY2FsUmVuZGVyQm91bmRzLndpZHRoIC8gc3ggLyBzaGFkb3dXaWR0aCxcclxuICAgICAgICAgICAgICAgIGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMuaGVpZ2h0IC8gc3kgLyBzaGFkb3dIZWlnaHQsXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIGNvbG9yMTogdGhpcy53b3JsZC5fX2VudkNvbG9yMSxcclxuICAgICAgICAgICAgY29sb3IyOiB0aGlzLndvcmxkLl9fZW52Q29sb3IyLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHQudmlld0luZm9bMV0gPSAtdC52aWV3SW5mb1sxXSArIDE7XHJcbiAgICAgICAgdC52aWV3SW5mb1szXSA9IC10LnZpZXdJbmZvWzNdO1xyXG4gICAgICAgIHNoYWRlckhlbHBlci5nZXRTaGFkZXIoIFwidGlsZU1hcFwiICkuc2V0Q29uc3RhbnRzKCB0ICk7XHJcbiAgICAgICAgc2hhZGVySGVscGVyLmdldFNoYWRlciggXCJsaWdodFwiICkuc2V0Q29uc3RhbnRzKCB0ICk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIO2ZlOuptCDtmZXrjIAg7LaV7IaMXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBzZXRab29tKCB6b29tICkge1xyXG4gICAgICAgIGNvbnN0IHpvb21NYXggPSBNYXRoLm1pbiggQ09ORklHLldvcmxkLnpvb21NYXgsIE1hdGgubWluKFxyXG4gICAgICAgICAgICBDT05GSUcuV29ybGQuc2hhZG93V2lkdGggLyBhcHBsaWNhdGlvbi5sb2dpY2FsUmVuZGVyQm91bmRzLndpZHRoLFxyXG4gICAgICAgICAgICBDT05GSUcuV29ybGQuc2hhZG93SGVpZ2h0IC8gYXBwbGljYXRpb24ubG9naWNhbFJlbmRlckJvdW5kcy5oZWlnaHQgKSApO1xyXG5cclxuICAgICAgICB0aGlzLndvcmxkLnpvb20gPSBVdGlscy5jbGFtcCggem9vbSwgQ09ORklHLldvcmxkLnpvb21NaW4sIHpvb21NYXggKTtcclxuICAgICAgICB0aGlzLndvcmxkLndvcmxkTGF5ZXIuc2V0U2NhbGVYKCAxIC8gdGhpcy53b3JsZC56b29tICk7XHJcbiAgICAgICAgdGhpcy53b3JsZC53b3JsZExheWVyLnNldFNjYWxlWSggMSAvIHRoaXMud29ybGQuem9vbSApO1xyXG5cclxuICAgICAgICB0aGlzLmxhc3RQb3MgPSBbTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXTsvL3RoaXMudmlld1gsdGhpcy52aWV3WSx0aGlzLmV5ZVgsdGhpcy5leWVZfVxyXG4gICAgICAgIHRoaXMubW92ZVZpZXdUbyggdGhpcy53b3JsZC52aWV3WCwgdGhpcy53b3JsZC52aWV3WSApO1xyXG4gICAgICAgIHRoaXMudXBkYXRlU2hhZGVyVmlld0luZm8oKTtcclxuICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmN1cnNvci5yZXNldFNjYWxlKCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLndvcmxkLnpvb207XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Wm9vbSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53b3JsZC56b29tO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIFZpZXcsIEV5ZSDsnbTrj5lcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIG1vdmVWaWV3VG8oIHB4LCBweSApIHtcclxuICAgICAgICAvL3B4PU1hdGguZmxvb3IocHgpO1xyXG4gICAgICAgIC8vcHk9TWF0aC5mbG9vcihweSk7XHJcbiAgICAgICAgY29uc29sZS5hc3NlcnQoICFOdW1iZXIuaXNOYU4oIHB4ICkgKTtcclxuICAgICAgICAvLyB0aGlzLndvcmxkLnZpZXdYID0gTWF0aC5mbG9vciggcHggKTtcclxuICAgICAgICAvLyB0aGlzLndvcmxkLnZpZXdZID0gTWF0aC5mbG9vciggcHkgKTtcclxuICAgICAgICB0aGlzLndvcmxkLnZpZXdYID0gcHg7XHJcbiAgICAgICAgdGhpcy53b3JsZC52aWV3WSA9IHB5O1xyXG4gICAgICAgIGNvbnN0IHN4ID0gMSAvIHRoaXMud29ybGQuem9vbTtcclxuICAgICAgICBjb25zdCBzeSA9IDEgLyB0aGlzLndvcmxkLnpvb207XHJcbiAgICAgICAgY29uc3QgW3gxLCB5MV0gPSBbcHggKiBzeCAtIHRoaXMud29ybGQudmlld1dpZHRoIC8gMiwgcHkgKiBzeSAtIHRoaXMud29ybGQudmlld0hlaWdodCAvIDJdO1xyXG4gICAgICAgIC8qXHJcblx0XHRcdHRoaXMud29ybGRMYXllci5zZXRQb3NpdGlvbihcclxuXHRcdFx0XHQtTWF0aC5mbG9vcih4MSswLjcpLFxyXG5cdFx0XHRcdC1NYXRoLmZsb29yKHkxKzAuNyk7XHJcblx0XHRcdClcclxuXHRcdCovXHJcbiAgICAgICAgY29uc3QgZSA9IG5ldyBFdmVudCggXCJ2aWV3Q2hhbmdlZFwiICk7XHJcblxyXG4gICAgICAgIGUudmlld1ggPSBweDtcclxuICAgICAgICBlLnZpZXdZID0gcHk7XHJcbiAgICAgICAgdGhpcy53b3JsZC5kaXNwYXRjaEV2ZW50KCBlICk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIG1vdmVFeWVUbyggcHgsIHB5ICkge1xyXG4gICAgICAgIC8vIHB4ID0gTWF0aC5mbG9vciggcHggKTtcclxuICAgICAgICAvLyBweSA9IE1hdGguZmxvb3IoIHB5ICk7XHJcblxyXG4gICAgICAgIGlmICggdGhpcy53b3JsZC5leWVYICE9IHB4IHx8IHRoaXMud29ybGQuZXllWSAhPSBweSApIHtcclxuICAgICAgICAgICAgdGhpcy53b3JsZC5leWVYID0gcHg7XHJcbiAgICAgICAgICAgIHRoaXMud29ybGQuZXllWSA9IHB5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZSA9IG5ldyBFdmVudCggXCJleWVDaGFuZ2VkXCIgKTtcclxuXHJcbiAgICAgICAgZS5leWVYID0gcHg7XHJcbiAgICAgICAgZS5leWVZID0gcHk7XHJcbiAgICAgICAgdGhpcy53b3JsZC5kaXNwYXRjaEV2ZW50KCBlICk7XHJcbiAgICB9XHJcblxyXG4gICAgaW52YWxpZGF0ZUV5ZSgpIHtcclxuICAgICAgICB0aGlzLndvcmxkLmxhc3RQb3MgPSBbTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZXTtcclxuICAgICAgICB0aGlzLndvcmxkLm1hcC52aXNpYmlsaXR5VGlsZUNoZWNrZXIuY2xlYXJSZXN1bHQoKTtcclxuICAgICAgICB0aGlzLndvcmxkLm1hcC52aXNpYmlsaXR5VGlsZUNoZWNrZXIuZ2V0UmVzdWx0KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4iLCJpbXBvcnQgeyBUd2VlbiwgaGFuZ3VsLCBQYXJ0aWNsZXMsIHN0YWdlLCBQb2ludCwgUmVjdCwgVGlsZU1hcCwgZWFzaW5nLCBTY2VuZU1hbmFnZXIsIGFwcGxpY2F0aW9uLCBTb3VuZCwgUmVuZGVyVGFyZ2V0LCBVdGlscywgTW92aWVDbGlwLCBUZXh0dXJlLCBUZXh0dXJlQmFzZSwgU3ByaXRlLCBFdmVudCwgVGltZXIgfSBmcm9tIFwiQGVuZ2luZS9mbGF0ZmFzdFwiO1xyXG5cclxuaW1wb3J0IGVudGl0eU1hbmFnZXIgZnJvbSBcIi4vZW50aXR5TWFuYWdlclwiO1xyXG5pbXBvcnQgcGF0aE1hbmFnZXIgZnJvbSBcIi4vcGF0aE1hbmFnZXJcIjtcclxuaW1wb3J0IHNpZ2h0TWFuYWdlciBmcm9tIFwiLi9zaWdodE1hbmFnZXJcIjtcclxuXHJcbmltcG9ydCBHYW1lTWFwIGZyb20gXCIuL2dhbWVNYXBcIjtcclxuaW1wb3J0IFByb2NlZHVyYWxNYXAgZnJvbSBcIi4uL3Byb2NlZHVyYWxNYXAvcHJvY2VkdXJhbE1hcFwiO1xyXG5pbXBvcnQgRWxlbWVudGFsIGZyb20gXCIuL2VsZW1lbnRhbFwiO1xyXG5pbXBvcnQgUmFuZG9tIGZyb20gXCJAbGliL3JhbmRvbVwiO1xyXG5pbXBvcnQgQ29sb3JzIGZyb20gXCJAbGliL2NvbG9yc1wiO1xyXG5pbXBvcnQgUHJvcCBmcm9tIFwiLi4vZW50aXR5L3Byb3BcIjtcclxuaW1wb3J0IE1vbnN0ZXIgZnJvbSBcIi4uL2VudGl0eS9tb25zdGVyXCI7XHJcbmltcG9ydCBOcGMgZnJvbSBcIi4uL2VudGl0eS9ucGNcIjtcclxuaW1wb3J0IEl0ZW0gZnJvbSBcIi4uL2VudGl0eS9pdGVtXCI7XHJcbmltcG9ydCBzaGFkZXJIZWxwZXIgZnJvbSBcIkBsaWIvc2hhZGVySGVscGVyXCI7XHJcblxyXG5pbXBvcnQgR0xPQkFMIGZyb20gXCIuLi9nbG9iYWxcIjtcclxuaW1wb3J0IENPTkZJRyBmcm9tIFwiLi4vY29uZmlnXCI7XHJcblxyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vIFdvcmxkO1xyXG4vLyDqsozsnoTsnZgg7ZW17IusIO2BtOuemOyKpFxyXG4vLyDrjIDrtoDrtoTsnZgg6rKM7J6EIOqwnOyytOuKlCDsm5Trk5zsl5AgYWRkRW50aXR566GcIOy2lOqwgO2VtOyEnCDsspjrpqztlbTslbztlZzri6QuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuXHJcbi8vIOusvOqzvCDqsJnsnYAg7JWg64uI66mU7J207IWYIO2DgOydvOydhCDsspjrpqztlZzri6RcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBAdGhpcyBXb3JsZFxyXG4gKiBcclxuICovXHJcbmZ1bmN0aW9uIG9uVGltZXIoKSB7XHJcbiAgICBpZiAoIHRoaXMuZmxvb3JUaWxlTWFwICE9IG51bGwgKSB7XHJcbiAgICAgICAgdGhpcy5fX2FuaW1hdGlvblRpY2sgPSAoIHRoaXMuX19hbmltYXRpb25UaWNrICsgMSApICUgNDtcclxuICAgICAgICBjb25zdCBveCA9IHRoaXMuX19hbmltYXRpb25UaWNrICogMSAvIDI1NiAqIENPTkZJRy5Xb3JsZC50aWxlV2lkdGg7IC8vIO2DgOydvCDthY3siqTss5DqsIAgMjU27J2065286rOgIOqwgOygle2VmOqzoCDsnojri6RcclxuXHJcbiAgICAgICAgc2hhZGVySGVscGVyLmdldFNoYWRlciggXCJ0aWxlTWFwXCIgKS5zZXRDb25zdGFudCggXCJvZmZzZXRcIixbIG94LCAwLCAwLCAwXSApO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8g66e1IOuhnOuNlFxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbi8qKlxyXG4gKiBAdGhpcyBXb3JsZFxyXG4gKlxyXG4gKiBAcGFyYW0ge0dhbWVNYXB9IG1hcFxyXG4gKi9cclxuZnVuY3Rpb24gc2V0TWFwKCBtYXAgKSB7XHJcbiAgICBjb25zb2xlLmFzc2VydCggdGhpcy5mbG9vclRpbGVNYXAgPT0gbnVsbCwgXCLsm5Trk5zsl5AgbWFw7J2EIOyXrOufrOuyiCDsg53shLHtlZjroKTtlahcIiApO1xyXG4gICAgdGhpcy5tYXAgPSBtYXA7XHJcbiAgICB0aGlzLmJlbG93VGlsZU1hcCA9IG5ldyBUaWxlTWFwKFxyXG4gICAgICAgIHRoaXMubWFwLndpZHRoLFxyXG4gICAgICAgIHRoaXMubWFwLmhlaWdodCxcclxuICAgICAgICBudWxsLFxyXG4gICAgICAgIENPTkZJRy5Xb3JsZC50aWxlV2lkdGgsXHJcbiAgICAgICAgQ09ORklHLldvcmxkLnRpbGVIZWlnaHQsXHJcbiAgICAgICAgMiwgMiwgMSwgMSxcclxuICAgICAgICBDT05GSUcuV29ybGQudGlsZVdpZHRoLFxyXG4gICAgICAgIENPTkZJRy5Xb3JsZC50aWxlSGVpZ2h0ICk7XHJcbiAgICB0aGlzLmZsb29yVGlsZU1hcCA9IG5ldyBUaWxlTWFwKFxyXG4gICAgICAgIHRoaXMubWFwLndpZHRoLFxyXG4gICAgICAgIHRoaXMubWFwLmhlaWdodCxcclxuICAgICAgICBudWxsLFxyXG4gICAgICAgIENPTkZJRy5Xb3JsZC50aWxlV2lkdGgsXHJcbiAgICAgICAgQ09ORklHLldvcmxkLnRpbGVIZWlnaHQsXHJcbiAgICAgICAgMiwgMiwgMSwgMSxcclxuICAgICAgICBDT05GSUcuV29ybGQudGlsZVdpZHRoLFxyXG4gICAgICAgIENPTkZJRy5Xb3JsZC50aWxlSGVpZ2h0ICk7XHJcbiAgICB0aGlzLndhbGxUaWxlTWFwID0gbmV3IFRpbGVNYXAoXHJcbiAgICAgICAgdGhpcy5tYXAud2lkdGgsXHJcbiAgICAgICAgdGhpcy5tYXAuaGVpZ2h0LFxyXG4gICAgICAgIG51bGwsXHJcbiAgICAgICAgQ09ORklHLldvcmxkLnRpbGVXaWR0aCxcclxuICAgICAgICBDT05GSUcuV29ybGQudGlsZUhlaWdodCxcclxuICAgICAgICAyLCAyLCAxLCAxLFxyXG4gICAgICAgIENPTkZJRy5Xb3JsZC50aWxlV2lkdGgsXHJcbiAgICAgICAgQ09ORklHLldvcmxkLnRpbGVIZWlnaHQgKTtcclxuICAgIGZvciAoIGNvbnN0IGkgaW4gdGhpcy5tYXAuc3Bhd25UYWJsZSApIHtcclxuICAgICAgICBjb25zdCB2ID0gdGhpcy5tYXAuc3Bhd25UYWJsZVtpXTtcclxuICAgICAgICBjb25zdCBlMSA9IG5ldyBNb25zdGVyKCB2LngsIHYueSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAgICB2LmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5tYXAuZ2V0RW50aXR5UHJvcGVydHkoIHYuaWQgKS5jb2xvciB8fCAweGZmOTAwMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgdGhpcy5lbnRpdHlNYW5hZ2VyLmFkZEVudGl0eSggZTEgKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmZsb29yTGF5ZXIuYWRkQ2hpbGRBdCggdGhpcy5mbG9vclRpbGVNYXAsIDAgKTtcclxuICAgIHRoaXMuZmxvb3JMYXllci5hZGRDaGlsZEF0KCB0aGlzLmJlbG93VGlsZU1hcCwgMCApO1xyXG4gICAgdGhpcy53YWxsTGF5ZXIuYWRkQ2hpbGRBdCggdGhpcy53YWxsVGlsZU1hcCwgMCApO1xyXG4gICAgXHJcbiAgICB0aGlzLmZsb29yVGlsZU1hcC5zZXRTaGFkZXIoIHNoYWRlckhlbHBlci5nZXRTaGFkZXIoIFwidGlsZU1hcFwiICkgKTtcclxuICAgIHRoaXMuYmVsb3dUaWxlTWFwLnNldFNoYWRlciggc2hhZGVySGVscGVyLmdldFNoYWRlciggXCJ0aWxlTWFwXCIgKSApO1xyXG4gICAgdGhpcy53YWxsVGlsZU1hcC5zZXRTaGFkZXIoIHNoYWRlckhlbHBlci5nZXRTaGFkZXIoIFwidGlsZU1hcFwiICkgKTtcclxuICAgIHRoaXMuZmxvb3JUaWxlTWFwLm1vdGlvbkJsdXIgPSBmYWxzZTtcclxuICAgIHRoaXMuYmVsb3dUaWxlTWFwLm1vdGlvbkJsdXIgPSBmYWxzZTtcclxuICAgIHRoaXMud2FsbFRpbGVNYXAubW90aW9uQmx1ciA9IGZhbHNlO1xyXG5cclxuICAgIHNoYWRlckhlbHBlci5nZXRTaGFkZXIoIFwidGlsZU1hcFwiICkuc2V0Q29uc3RhbnQoXHJcbiAgICAgICAgXCJnbG9zc3lcIiwgWzAsIDAsIENPTkZJRy5Xb3JsZC5zaGFkb3dXaWR0aCAvIENPTkZJRy5Xb3JsZC5zaGFkb3dIZWlnaHQgKiA4IC8gdGhpcy56b29tLCA4IC8gdGhpcy56b29tXVxyXG4gICAgKTtcclxuICAgIHRoaXMuc2lnaHRNYW5hZ2VyLnVwZGF0ZVNoYWRlclZpZXdJbmZvKCk7XHJcbiAgICB0aGlzLnNpZ2h0TWFuYWdlci5fX3JldmVhbENhY2hlID0ge307XHJcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJPblN0YWdlKCBFdmVudC5FTlRFUl9GUkFNRSwgdGhpcy5vbkVudGVyRnJhbWUsIHRoaXMgKTtcclxuXHJcbiAgICAvLyBjb25zb2xlLmxvZyggdGhpcy5tYXAuZ2V0TWFwU3RyaW5nKCkgKTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKlxyXG4gKlxyXG4gKiBAY2xhc3MgV29ybGRcclxuICogQGV4dGVuZHMge1Nwcml0ZX1cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdvcmxkIGV4dGVuZHMgU3ByaXRlIHtcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vIOyblOuTnCDstIjquLDtmZRcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgY29uc3RydWN0b3IoIG9wdGlvbnMgKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICBpZiAoICFHTE9CQUwud29ybGQgKSB7XHJcbiAgICAgICAgICAgIEdMT0JBTC53b3JsZCA9IHRoaXM7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coIFwiR0xPQkFMLndvcmxk6rCAIOyhtOyerO2VmOuKlOuNsCDsm5Trk5zrpbwg7IOd7ISx7KSRXCIgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5lbnRpdHlNYW5hZ2VyID0gdGhpcy5hZGRDb21wb25lbnQoIG5ldyBlbnRpdHlNYW5hZ2VyKCkgKTtcclxuICAgICAgICB0aGlzLnNpZ2h0TWFuYWdlciA9IHRoaXMuYWRkQ29tcG9uZW50KCBuZXcgc2lnaHRNYW5hZ2VyKCkgKTtcclxuICAgICAgICB0aGlzLnBhdGhNYW5hZ2VyID0gdGhpcy5hZGRDb21wb25lbnQoIG5ldyBwYXRoTWFuYWdlcigpICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5hc3NlcnQoIHRoaXMuZW50aXR5TWFuYWdlciAhPSBudWxsICYmIHRoaXMuc2lnaHRNYW5hZ2VyICE9IG51bGwgJiYgdGhpcy5wYXRoTWFuYWdlciAhPSBudWxsLCBgV29ybGTsnZggTWFuYWdlciDstIjquLDtmZTqsIAg7Iuk7Yyo7ZWoLmAgKTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICAgICAgY29uc3QgW3csaF0gPSBbYXBwbGljYXRpb24ubG9naWNhbFZpZXdwb3J0LndpZHRoLGFwcGxpY2F0aW9uLmxvZ2ljYWxWaWV3cG9ydC5oZWlnaHRdO1xyXG5cclxuICAgICAgICB0aGlzLnZpZXdXaWR0aCA9IHc7XHJcbiAgICAgICAgdGhpcy52aWV3SGVpZ2h0ID0gaDtcclxuICAgICAgICAvLyDrlJTrsJTsnbTsiqTsnZgg7ZS87KeA7LusIO2ZlOuptOydhCB2aWV36riw7KSA7Jy866GcIOuzuCDqsoNcclxuICAgICAgICB0aGlzLnpvb20gPSAxLjA7XHJcbiAgICAgICAgdGhpcy52aWV3WCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy52aWV3WSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5leWVYID0gbnVsbDtcclxuICAgICAgICB0aGlzLmV5ZVkgPSBudWxsO1xyXG4gICAgICAgIHRoaXMudmlld1JhZGl1cyA9IDEwO1xyXG4gICAgICAgIHRoaXMubGFzdFBvcyA9IFswLCAwLCAwLCAwXTtcclxuXHJcbiAgICAgICAgdGhpcy5fX2VudkNvbG9yMSA9IFsxLCAxLCAxLCAwLjJdO1xyXG4gICAgICAgIHRoaXMuX19lbnZDb2xvcjIgPSBbMC40LCAwLjUsIDAuNiwgMV07XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7R2FtZU1hcH0gKi8gICAgICAgIFxyXG4gICAgICAgIHRoaXMubWFwID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMudHVybiA9IDE7XHJcbiAgICAgICAgdGhpcy5kYXRlVGltZU9yaWdpbiA9IDA7XHJcbiAgICAgICAgdGhpcy5fX3RpbWUgPSAwO1xyXG4gICAgICAgIHRoaXMuX19yYWluID0gLTE7XHJcbiAgICAgICAgdGhpcy50aW1lID0gMDtcclxuICAgICAgICB0aGlzLnJhaW4gPSAtMTtcclxuICAgICAgICB0aGlzLl9fdGltZXIgPSBuZXcgVGltZXIoIDI1MCwwICk7XHJcbiAgICAgICAgdGhpcy5fX3RpbWVyLnN0YXJ0KCk7XHJcbiAgICAgICAgdGhpcy5fX2FuaW1hdGlvblRpY2sgPSAwO1xyXG4gICAgICAgIHRoaXMuX190aW1lci5hZGRFdmVudExpc3RlbmVyT25TdGFnZSggRXZlbnQuVElNRVIsb25UaW1lcix0aGlzLHRoaXMgKTtcclxuICAgICAgICB0aGlzLnJhbmRvbUdlbmVyYXRvciA9IG5ldyBSYW5kb20oIHRoaXMub3B0aW9ucy5zZWVkICk7XHJcbiAgICAgICAgdGhpcy5yYW5kb20gPSB0aGlzLnJhbmRvbUdlbmVyYXRvci5yYW5kb20uYmluZCggdGhpcy5yYW5kb21HZW5lcmF0b3IgKTtcclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS1cclxuICAgICAgICAvLyBMYXllcnM7XHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgICAgIHRoaXMud29ybGRMYXllciA9IG5ldyBTcHJpdGUoKTtcclxuICAgICAgICB0aGlzLmNsaXBMYXllciA9IG5ldyBTcHJpdGUoKTtcclxuICAgICAgICAvL3RoaXMuY2xpcExheWVyLnNldENsaXAoIGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMubGVmdCwgYXBwbGljYXRpb24ubG9naWNhbFJlbmRlckJvdW5kcy50b3AsIGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMud2lkdGgsIGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMuaGVpZ2h0KTtcclxuICAgICAgICB0aGlzLmZsb29yTGF5ZXIgPSBuZXcgU3ByaXRlKCk7XHJcbiAgICAgICAgdGhpcy5zaGFkb3dMYXllciA9IG5ldyBTcHJpdGUoKTtcclxuICAgICAgICB0aGlzLndhbGxMYXllciA9IG5ldyBTcHJpdGUoKTtcclxuICAgICAgICB0aGlzLml0ZW1MYXllciA9IG5ldyBTcHJpdGUoKTtcclxuICAgICAgICB0aGlzLmVudGl0eUxheWVyID0gbmV3IFNwcml0ZSgpO1xyXG4gICAgICAgIHRoaXMubGlnaHRMYXllciA9IG5ldyBTcHJpdGUoKTtcclxuICAgICAgICAvL3RoaXMubGlnaHRMYXllci5zZXRCbGVuZE1vZGUoU3ByaXRlLkJsZW5kTW9kZXMuQUREKTtcclxuICAgICAgICB0aGlzLmVmZmVjdExheWVyID0gbmV3IFNwcml0ZSgpO1xyXG4gICAgICAgIC8vdGhpcy5saWdodExheWVyLnNldFNoYWRlcihzaGFkZXJIZWxwZXIuZ2V0U2hhZGVyKFwibGlnaHRcIikpO1xyXG4gICAgICAgIC8vdGhpcy5saWdodExheWVyLnNldEJsZW5kTW9kZShTcHJpdGUuQUREKTtcclxuICAgICAgICB0aGlzLmNsaXBMYXllci5hZGRDaGlsZCggdGhpcy53b3JsZExheWVyICk7XHJcbiAgICAgICAgdGhpcy53b3JsZExheWVyLmFkZENoaWxkKCB0aGlzLmZsb29yTGF5ZXIgKTtcclxuICAgICAgICB0aGlzLndvcmxkTGF5ZXIuYWRkQ2hpbGQoIHRoaXMuc2hhZG93TGF5ZXIgKTtcclxuICAgICAgICB0aGlzLndvcmxkTGF5ZXIuYWRkQ2hpbGQoIHRoaXMud2FsbExheWVyICk7XHJcbiAgICAgICAgdGhpcy53b3JsZExheWVyLmFkZENoaWxkKCB0aGlzLmxpZ2h0TGF5ZXIgKTtcclxuICAgICAgICB0aGlzLndvcmxkTGF5ZXIuYWRkQ2hpbGQoIHRoaXMuaXRlbUxheWVyICk7XHJcbiAgICAgICAgdGhpcy53b3JsZExheWVyLmFkZENoaWxkKCB0aGlzLmVudGl0eUxheWVyICk7XHJcbiAgICAgICAgdGhpcy53b3JsZExheWVyLmFkZENoaWxkKCB0aGlzLmVmZmVjdExheWVyICk7XHJcblxyXG4gICAgICAgIHRoaXMuYmVsb3dUaWxlTWFwID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuZmxvb3JUaWxlTWFwID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMud2FsbFRpbGVNYXAgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5hZGRDaGlsZCggdGhpcy5jbGlwTGF5ZXIgKTtcclxuXHJcbiAgICAgICAgLy8gLy8tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLy8gLy8gUGh5c2ljcztcclxuICAgICAgICAvLyAvLy0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICAvLyB0aGlzLmIydyA9IGIyLm5ldyBXb3JsZCgwLDAsdHJ1ZSk7XHJcbiAgICAgICAgLy8gaWYgKGZhbHNlKSB7XHJcbiAgICAgICAgLy8gXHRsZXQgZGVidWdEcmF3ID0gYjIubmV3IERlYnVnRHJhdygpO1xyXG4gICAgICAgIC8vIFx0dGhpcy5iMncuc2V0RGVidWdEcmF3KGRlYnVnRHJhdyk7XHJcbiAgICAgICAgLy8gXHR0aGlzLndvcmxkTGF5ZXIuYWRkQ2hpbGQoZGVidWdEcmF3KTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gdGhpcy5iMnBzID0gdGhpcy5iMncuY3JlYXRlUGFydGljbGVTeXN0ZW0oe3JhZGl1cz01fSkgLy9kZXN0cm95QnlBZ2U9dHJ1ZSxcclxuICAgICAgICAvLyAvL3RoaXMuYjJwcy5zZXRUZXh0dXJlKG5ldyBUZXh0dXJlKFwiQmxvb2QucG5nXCIsZmFsc2Use2Zvcm1hdD1UZXh0dXJlQmFzZS5SR0JBNTU1MX0pKTtcclxuICAgICAgICAvLyB0aGlzLndvcmxkTGF5ZXIuYWRkQ2hpbGQodGhpcy5iMnBzKTtcclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICAvLyBFbGVtZW50YWwgU3lzdGVtO1xyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIHRoaXMuZWxlbWVudGFsID0gbmV3IEVsZW1lbnRhbCgpO1xyXG4gICAgICAgIHRoaXMuZmxvb3JMYXllci5hZGRDaGlsZCggdGhpcy5lbGVtZW50YWwubGF5ZXJzW0VsZW1lbnRhbC5XQVRFUl0gKTtcclxuICAgICAgICB0aGlzLmVmZmVjdExheWVyLmFkZENoaWxkKCB0aGlzLmVsZW1lbnRhbC5sYXllcnNbRWxlbWVudGFsLlBPSVNPTl0gKTtcclxuICAgICAgICB0aGlzLmVmZmVjdExheWVyLmFkZENoaWxkKCB0aGlzLmVsZW1lbnRhbC5sYXllcnNbRWxlbWVudGFsLkZJUkVdICk7XHJcbiAgICAgICAgdGhpcy53YXRlckFtb3VudCA9IDA7IC8vIOusvOyCrOyatOuTnCDrgrTripQg7Jqp64+EXHJcblxyXG4gICAgICAgIHRoaXMuY2xlYXJBdXRvTWFwID0gdHJ1ZTtcclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICAvLyBHYW1lTWFwICBMb2FkZXI7XHJcbiAgICAgICAgLy8gVXJsO1xyXG4gICAgICAgIC8vIFNhdmVEYXRhO1xyXG4gICAgICAgIC8vIFByb2NlZHVyYWxNYXA7XHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgdGhpcy5wbGFjZXMgPSBbXTtcclxuICAgICAgICAvLyDsnqXshozsnbTrpoTsnbQg7YKk7J206rOgIHgseTtcclxuICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy5sb2FkRGF0YSApIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRNYXBTdHJpbmcoIHRoaXMub3B0aW9ucy5sb2FkRGF0YS5tYXBTdHJpbmcgKTtcclxuICAgICAgICAgICAgdGhpcy5yYW5kb21HZW5lcmF0b3IubG9hZCggdGhpcy5vcHRpb25zLmxvYWREYXRhLnJhbmRvbSApO1xyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMubG9hZERhdGEgPSBudWxsO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyggXCLshLjsnbTruIzrjbDsnbTthLDroZzrk5xcIiApO1xyXG4gICAgICAgICAgICB0aGlzLnJlYWR5KCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICggdGhpcy5vcHRpb25zLnVybCApIHtcclxuICAgICAgICAgICAgdGhpcy50eXBlID0gXCJ3aWxkbmVzc1wiO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyggXCJVUkzsl5DshJwg642w7J207YSw66W8IOuwm+yVhOyYqOuLpC5cIix0aGlzLm9wdGlvbnMudXJsICk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TWFwVXJsKCB0aGlzLm9wdGlvbnMudXJsIClcclxuICAgICAgICAgICAgICAgIC5vbiggXCJjb21wbGV0ZVwiLCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlYWR5KCk7XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy51cmwgPSBudWxsO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIHRoaXMub3B0aW9ucy53b3JsZEdlbiApIHtcclxuICAgICAgICAgICAgdGhpcy50eXBlID0gXCJ3aWxkbmVzc1wiO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyggXCJXT1JMRCBHRU5FUkFUT1Ig66W8IO2Gte2VtOyEnCDsg53shLEuXCIgKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRCeVdvcmxkR2VuKCB0aGlzLm9wdGlvbnMud29ybGRHZW4gKTtcclxuICAgICAgICAgICAgdGhpcy5yZWFkeSgpO1xyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMud29ybGRHZW4gPSBudWxsO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICggdGhpcy5vcHRpb25zLnR5cGUgPT0gXCJkdW5nZW9uXCIgfHwgdGhpcy5vcHRpb25zLnR5cGUgPT0gXCJ3aWxkbmVzc1wiICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50eXBlID0gXCJkdW5nZW9uXCI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb2NlZHVyYWxNYXAgPSBuZXcgUHJvY2VkdXJhbE1hcCggdGhpcy5vcHRpb25zICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldE1hcFN0cmluZyggdGhpcy5wcm9jZWR1cmFsTWFwLmdldE1hcFN0cmluZygpICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVudGVyWCA9IHRoaXMucHJvY2VkdXJhbE1hcC5zdGFydFg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVudGVyWSA9IHRoaXMucHJvY2VkdXJhbE1hcC5zdGFydFk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5wcm9jZWR1cmFsTWFwLmdldEVudGl0eUxpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKCBjb25zdCBpIGluIHQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdiA9IHRbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9iajtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB2LnR5cGUgPT0gXCJwcm9wXCIgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IG5ldyBQcm9wKCB2LmNoYXIsdi54LHYueSx2Lm9wdGlvbnMgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCB2LnR5cGUgPT0gXCJtb25zdGVyXCIgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IG5ldyBNb25zdGVyKCB2LmNoYXIsdi54LHYueSx2Lm9wdGlvbnMgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCB2LnR5cGUgPT0gXCJucGNcIiApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gbmV3IE5wYyggdi5jaGFyLHYueCx2Lnksdi5vcHRpb25zICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW50aXR5TWFuYWdlci5hZGRFbnRpdHkoIG9iaiApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucmVhZHkoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2lnaHRNYW5hZ2VyLnVwZGF0ZVNoYWRlclZpZXdJbmZvKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZHkoIGRlbGF5ICkge1xyXG4gICAgICAgIFRpbWVyLmRlbGF5ZWRDYWxsKCBkZWxheSB8fCAwLCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzRGF0ZVRpbWUoKTtcclxuICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBFdmVudCggXCJyZWFkeVwiICk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoIGUgKTtcclxuICAgICAgICB9ICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UHJvcGVydHkoIHRpbGVYLCB0aWxlWSApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYXAuZ2V0UHJvcGVydHkoIHRpbGVYLCB0aWxlWSApO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyDrp6Qg7ZSE66CI7J6EIOq3uOumrOuKlCDrtoDrtoRcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHRoaXMgV29ybGRcclxuICAgICAqXHJcbiAgICAgKiBAbWVtYmVyb2YgV29ybGRcclxuICAgICAqL1xyXG4gICAgb25FbnRlckZyYW1lKCkge1xyXG4gICAgICAgIGNvbnN0IFtsYXN0UmFkaXVzLGxhc3RYLGxhc3RZLGxhc3RFeWVYLGxhc3RFeWVZXSA9IHRoaXMubGFzdFBvcztcclxuICAgICAgICBjb25zdCBzeCA9IDEgLyB0aGlzLnpvb207XHJcbiAgICAgICAgY29uc3Qgc3kgPSAxIC8gdGhpcy56b29tO1xyXG5cclxuICAgICAgICB0aGlzLnNpZ2h0TWFuYWdlci51cGRhdGVTaGFkZXJWaWV3SW5mbygpO1xyXG4gICAgICAgIGNvbnN0IHpvb20gPSAxO1xyXG5cclxuICAgICAgICAvLyBpZiAoQWNjZWxlcm9tZXRlci5pc0F2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgLy8gXHRsZXQgeCx5LHogPSBfYWNjZWxlcm9tZXRlci5nZXRBY2NlbGVyYXRpb24oKTtcclxuICAgICAgICAvLyBcdHRoaXMuX19hY2NlbFggPSAoKHRoaXMuX19hY2NlbFggfHwgMCkqNisgLXgpLzc7XHJcbiAgICAgICAgLy8gXHR0aGlzLl9fYWNjZWxZID0gKCh0aGlzLl9fYWNjZWxZIHx8IDApKjYrICh6KjAuNC15KjAuNikpLzc7XHJcbiAgICAgICAgLy8gXHRzaGFkZXJIZWxwZXIuc2V0Q29uc3RhbnQoXCJ0aWxlTWFwXCIse1xyXG4gICAgICAgIC8vIFx0XHRmR2xvc3N5ID0ge3RoaXMuX19hY2NlbFgqMC44LHRoaXMuX19hY2NlbFkqLTAuNCxcclxuICAgICAgICAvLyBcdFx0XHRcdFx0V29ybGQuc2hhZG93V2lkdGgvV29ybGQuc2hhZG93SGVpZ2h0Knpvb20sXHJcbiAgICAgICAgLy8gXHRcdFx0XHRcdHpvb20sfVxyXG4gICAgICAgIC8vIFx0fSk7XHJcbiAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICBzaGFkZXJIZWxwZXIuZ2V0U2hhZGVyKCBcInRpbGVNYXBcIiApLnNldENvbnN0YW50KFxyXG4gICAgICAgICAgICBcImdsb3NzeVwiLFswLDAsQ09ORklHLldvcmxkLnNoYWRvd1dpZHRoIC8gQ09ORklHLldvcmxkLnNoYWRvd0hlaWdodCAqIHpvb20sem9vbV1cclxuICAgICAgICApO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgLy8g64Kg7JSo7Zqo6rO8IOq3uOumrOq4sFxyXG4gICAgICAgIHRoaXMucmVuZGVyV2hldGhlckVmZmVjdCggdGhpcy52aWV3WCAtICggbGFzdFggfHwgdGhpcy52aWV3WCApLHRoaXMudmlld1kgLSAoIGxhc3RZIHx8IHRoaXMudmlld1kgKSApO1xyXG4gICAgICAgIGlmICggdGhpcy5jbGVhckF1dG9NYXAgKSB7XHJcbiAgICAgICAgICAgIEdMT0JBTC5pbnRlcmZhY2UuYXV0b01hcC5jbGVhcigpO1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyQXV0b01hcCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIGxhc3RSYWRpdXMgIT0gIHRoaXMudmlld1JhZGl1cyB8fCBsYXN0WCAhPSAgdGhpcy52aWV3WCB8fCBsYXN0WSAhPSB0aGlzLnZpZXdZIHx8IGxhc3RFeWVYICE9ICB0aGlzLmV5ZVggfHwgbGFzdEV5ZVkgIT0gIHRoaXMuZXllWSApIHtcclxuICAgICAgICAgICAgY29uc3QgW3gxLHkxXSA9IFt0aGlzLnZpZXdYIC0gdGhpcy52aWV3V2lkdGggLyAyICogdGhpcy56b29tLHRoaXMudmlld1kgLSB0aGlzLnZpZXdIZWlnaHQgLyAyICogdGhpcy56b29tXTtcclxuICAgICAgICAgICAgY29uc3QgW3gyLHkyXSA9IFt0aGlzLnZpZXdYICsgdGhpcy52aWV3V2lkdGggLyAyICogdGhpcy56b29tLHRoaXMudmlld1kgKyB0aGlzLnZpZXdIZWlnaHQgLyAyICogdGhpcy56b29tXTtcclxuICAgICAgICAgICAgbGV0IHZpZXdYMSx2aWV3WTEsdmlld1gyLHZpZXdZMjtcclxuXHJcbiAgICAgICAgICAgIHZpZXdYMSA9IE1hdGguZmxvb3IoIHgxIC8gQ09ORklHLldvcmxkLnRpbGVXaWR0aCApICsgMSAtIDE7XHJcbiAgICAgICAgICAgIHZpZXdZMSA9IE1hdGguZmxvb3IoIHkxIC8gQ09ORklHLldvcmxkLnRpbGVIZWlnaHQgKSArIDEgLSAxO1xyXG4gICAgICAgICAgICB2aWV3WDIgPSBNYXRoLmZsb29yKCB4MiAvIENPTkZJRy5Xb3JsZC50aWxlV2lkdGggKSArIDEgKyAxO1xyXG4gICAgICAgICAgICB2aWV3WTIgPSBNYXRoLmZsb29yKCB5MiAvIENPTkZJRy5Xb3JsZC50aWxlSGVpZ2h0ICkgKyAxICsgMTtcclxuICAgICAgICAgICAgdGhpcy5zaWdodE1hbmFnZXIuY29tcHV0ZVZpc2liaWxpdHkoKTsvL3ZpZXdYMSx2aWV3WTEsdmlld1gyLHZpZXdZMix0aGlzLnZpZXdSYWRpdXMpO1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RQb3MgPSBbdGhpcy52aWV3UmFkaXVzLCB0aGlzLnZpZXdYLCB0aGlzLnZpZXdZLCB0aGlzLmV5ZVgsIHRoaXMuZXllWV07XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLmxpZ2h0TGF5ZXIuZ2V0TnVtQ2hpbGRyZW4oKSA+IDAgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGkgPSBVdGlscy5yYW5kb20oIDAsMjAgKTtcclxuXHJcbiAgICAgICAgICAgIGlmICggaSA8PSB0aGlzLmxpZ2h0TGF5ZXIuZ2V0TnVtQ2hpbGRyZW4oKSApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGIgPSB0aGlzLmxpZ2h0TGF5ZXIuZ2V0Q2hpbGRBdCggVXRpbHMucmFuZG9tKCAwLHRoaXMubGlnaHRMYXllci5nZXROdW1DaGlsZHJlbigpIC0gMSApICk7XHJcblxyXG4gICAgICAgICAgICAgICAgYi5zZXRTY2FsZSggVXRpbHMucmFuZG9tKCAxLDEwICkgKiAwLjAxICsgMC45ICk7XHJcbiAgICAgICAgICAgICAgICBiLnNldEFscGhhKCBVdGlscy5yYW5kb20oIDEsMTAgKSAqIDAuMDMgKyAwLjcgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICB0aGlzLndvcmxkTGF5ZXIuc2V0UG9zaXRpb24oXHJcbiAgICAgICAgICAgIC0oIHRoaXMudmlld1ggKiBzeCAtIHRoaXMudmlld1dpZHRoIC8gMiApLFxyXG4gICAgICAgICAgICAtKCB0aGlzLnZpZXdZICogc3kgLSB0aGlzLnZpZXdIZWlnaHQgLyAyICkgKTtcclxuICAgICAgICAvL3RoaXMuY2xpcExheWVyLnNldFBvc2l0aW9uKE1hdGguZnJhYygxLXRoaXMudmlld1gpLE1hdGguZnJhYygxLXRoaXMudmlld1kpKTtcclxuICAgICAgICAvL3RoaXMuYjJ3LnN0ZXAoMS82MCw4LDMpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzZXRNYXAoIG1hcE5hbWUgKSB7XHJcbiAgICAgICAgY29uc3QgbWFwID0gbmV3IEdhbWVNYXAoKTtcclxuXHJcbiAgICAgICAgLy9UT0RPOiDslYTsp4Eg7JWI66eM65Ok7JeI64KYXHJcbiAgICAgICAgbWFwLmxvYWRGaWxlKCBtYXBOYW1lICk7XHJcbiAgICAgICAgc2V0TWFwLmNhbGwoIHRoaXMsbWFwICk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8g7IOd7ISx65CcIOuntSDroZzrjZRcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHNldE1hcFVybCggdXJsICkge1xyXG4gICAgICAgIGNvbnN0IGxvYWRlciA9IG5ldyBVcmxMb2FkZXIoIHVybCApXHJcbiAgICAgICAgICAgIC5vbiggXCJjb21wbGV0ZVwiLCggZSApID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBlLmRhdGE7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXAgPSBuZXcgR2FtZU1hcCggKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtYXAubG9hZFN0cmluZyggcyApO1xyXG4gICAgICAgICAgICAgICAgc2V0TWFwLmNhbGwoIHRoaXMsbWFwICk7XHJcbiAgICAgICAgICAgIH0gKVxyXG4gICAgICAgICAgICAub24oIFwiZXJyb3JcIiwoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggXCJVcmxMb2FkZXIgRVJST1JcIiApO1xyXG4gICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgIHJldHVybiBsb2FkZXI7XHJcbiAgICB9XHJcblxyXG4gICAgLypcclxuICAgIHNldEJ5V29ybGRHZW4od29ybGRHZW5Db25maWcpIHtcclxuXHJcbiAgICAgICAgbGV0IHdvcmxkR2VuID0gbmV3IFdvcmxkR2VuZXJhdG9yKHdvcmxkR2VuQ29uZmlnLndpZHRoLCB3b3JsZEdlbkNvbmZpZy5oZWlnaHQsIHdvcmxkR2VuQ29uZmlnKTtcclxuICAgICAgICB3b3JsZEdlbi5hZHZhbmNlQWxsU3RlcCgpO1xyXG4gICAgICAgIGxldCB0aWxlTWFwID0gd29ybGRHZW4ubWFrZVRpbGVNYXAoKTtcclxuICAgICAgICBsZXQgd2lkdGggPSB3b3JsZEdlbkNvbmZpZy53aWR0aDtcclxuICAgICAgICBsZXQgaGVpZ2h0ID0gd29ybGRHZW5Db25maWcuaGVpZ2h0O1xyXG4gICAgICAgIGxldCBsaW5lcyA9IHt9O1xyXG4gICAgICAgIGZvciAobGV0IHkgPSAwO3kgPD0gaGVpZ2h0O3krKykge1xyXG4gICAgICAgICAgICBsZXQgbGluZSA9IHt9O1xyXG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDt4IDw9IHdpZHRoO3grKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGMgPSB0aWxlTWFwLmdldFZhbHVlKHgsIHkpO1xyXG4gICAgICAgICAgICAgICAgbGluZVtsaW5lLmxlbmd0aCArIDFdID0gYztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsaW5lcy5wdXNoKGxpbmUuam9pbigpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBzID0gbGluZXMuam9pbihcIlxcblwiKTtcclxuICAgICAgICBsZXQgbWFwID0gbmV3IEdhbWVNYXAoKTtcclxuICAgICAgICBtYXAubG9hZFN0cmluZyhzKTtcclxuICAgICAgICBzZXRNYXAodGhpcyxtYXApO1xyXG5cdH1cclxuXHQqL1xyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8g7Iqk7Yq466eBIOuntSDroZzrjZRcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHNldE1hcFN0cmluZyggcyApIHtcclxuICAgICAgICBjb25zdCBtYXAgPSBuZXcgR2FtZU1hcCggKTtcclxuXHJcbiAgICAgICAgbWFwLmxvYWRTdHJpbmcoIHMgKTtcclxuICAgICAgICBzZXRNYXAuY2FsbCggdGhpcyxtYXAgKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyDsooztkZzqs4Qg67OA7ZmYIO2VqOyImOuTpFxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGlsZVRvV29ybGQoIHRpbGVYLHRpbGVZICkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUG9pbnQoXHJcbiAgICAgICAgICAgIE1hdGguZmxvb3IoIHRpbGVYICkgKiBDT05GSUcuV29ybGQudGlsZVdpZHRoLFxyXG4gICAgICAgICAgICBNYXRoLmZsb29yKCB0aWxlWSApICogQ09ORklHLldvcmxkLnRpbGVIZWlnaHRcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHRpbGVDZW50ZXJUb1dvcmxkKCB0aWxlWCx0aWxlWSApIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBvaW50KFxyXG4gICAgICAgICAgICBNYXRoLmZsb29yKCB0aWxlWCApICogQ09ORklHLldvcmxkLnRpbGVXaWR0aCArIENPTkZJRy5Xb3JsZC50aWxlV2lkdGggKiAwLjUsXHJcbiAgICAgICAgICAgIE1hdGguZmxvb3IoIHRpbGVZICkgKiBDT05GSUcuV29ybGQudGlsZUhlaWdodCArIENPTkZJRy5Xb3JsZC50aWxlSGVpZ2h0ICogMC41XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICB3b3JsZFRvVGlsZSggcHgscHkgKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQb2ludChcclxuICAgICAgICAgICAgTWF0aC5mbG9vciggcHggLyBDT05GSUcuV29ybGQudGlsZVdpZHRoICksXHJcbiAgICAgICAgICAgIE1hdGguZmxvb3IoIHB5IC8gQ09ORklHLldvcmxkLnRpbGVIZWlnaHQgKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhZ2VUb1RpbGUoIHB4LHB5ICkge1xyXG4gICAgICAgIGNvbnN0IHN4ID0gMSAvIHRoaXMuem9vbTtcclxuICAgICAgICBjb25zdCBzeSA9IDEgLyB0aGlzLnpvb207XHJcbiAgICAgICAgY29uc3QgdmN3ID0gdGhpcy52aWV3V2lkdGggLyAyIC8gc3g7XHJcbiAgICAgICAgY29uc3QgdmNoID0gdGhpcy52aWV3SGVpZ2h0IC8gMiAvIHN5O1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFBvaW50KFxyXG4gICAgICAgICAgICBNYXRoLmZsb29yKCAoIHB4IC8gc3ggKyB0aGlzLnZpZXdYIC0gdmN3ICkgLyBDT05GSUcuV29ybGQudGlsZVdpZHRoICksIFxyXG4gICAgICAgICAgICBNYXRoLmZsb29yKCAoIHB5IC8gc3kgKyB0aGlzLnZpZXdZIC0gdmNoICkgLyBDT05GSUcuV29ybGQudGlsZUhlaWdodCApXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGFnZVRvV29ybGQoIHB4LHB5ICkge1xyXG4gICAgICAgIGNvbnN0IHN4ID0gMSAvIHRoaXMuem9vbTtcclxuICAgICAgICBjb25zdCBzeSA9IDEgLyB0aGlzLnpvb207XHJcbiAgICAgICAgY29uc3Qgdmlld0NlbnRlclggPSB0aGlzLnZpZXdXaWR0aCAvIDIgLyBzeDtcclxuICAgICAgICBjb25zdCB2aWV3Q2VudGVyWSA9IHRoaXMudmlld0hlaWdodCAvIDIgLyBzeTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQb2ludChcclxuICAgICAgICAgICAgcHggLyBzeCArIHRoaXMudmlld1ggLSB2aWV3Q2VudGVyWCwgXHJcbiAgICAgICAgICAgIHB5IC8gc3kgKyB0aGlzLnZpZXdZIC0gdmlld0NlbnRlcllcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHdvcmxkVG9TdGFnZSggcHgscHkgKSB7XHJcbiAgICAgICAgY29uc3Qgc3ggPSAxIC8gdGhpcy56b29tO1xyXG4gICAgICAgIGNvbnN0IHN5ID0gMSAvIHRoaXMuem9vbTtcclxuICAgICAgICBjb25zdCB2aWV3Q2VudGVyWCA9IHRoaXMudmlld1dpZHRoIC8gMiAvIHN4O1xyXG4gICAgICAgIGNvbnN0IHZpZXdDZW50ZXJZID0gdGhpcy52aWV3SGVpZ2h0IC8gMiAvIHN5O1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFBvaW50KCBcclxuICAgICAgICAgICAgcHggLSB0aGlzLnZpZXdYICsgdmlld0NlbnRlclgsIFxyXG4gICAgICAgICAgICBweSAtIHRoaXMudmlld1kgKyB2aWV3Q2VudGVyWVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGlsZVRvU3RhZ2UoIHRpbGVYLHRpbGVZICkge1xyXG4gICAgICAgIGNvbnN0IHN4ID0gMSAvIHRoaXMuem9vbTtcclxuICAgICAgICBjb25zdCBzeSA9IDEgLyB0aGlzLnpvb207XHJcbiAgICAgICAgY29uc3QgdmN3ID0gdGhpcy52aWV3V2lkdGggLyAyIC8gc3g7XHJcbiAgICAgICAgY29uc3QgdmNoID0gdGhpcy52aWV3SGVpZ2h0IC8gMiAvIHN5O1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFBvaW50KFxyXG4gICAgICAgICAgICBNYXRoLmZsb29yKCB0aWxlWCAtIDEgKSAqIENPTkZJRy5Xb3JsZC50aWxlV2lkdGggLSB0aGlzLnZpZXdYICsgdmN3LCBcclxuICAgICAgICAgICAgTWF0aC5mbG9vciggdGlsZVkgLSAxICkgKiBDT05GSUcuV29ybGQudGlsZUhlaWdodCAtIHRoaXMudmlld1kgKyB2Y2hcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHRpbGVDZW50ZXJUb1N0YWdlKCB0aWxlWCx0aWxlWSApIHtcclxuICAgICAgICBjb25zdCBzeCA9IDEgLyB0aGlzLnpvb207XHJcbiAgICAgICAgY29uc3Qgc3kgPSAxIC8gdGhpcy56b29tO1xyXG4gICAgICAgIGNvbnN0IHZjdyA9IHRoaXMudmlld1dpZHRoIC8gMiAvIHN4O1xyXG4gICAgICAgIGNvbnN0IHZjaCA9IHRoaXMudmlld0hlaWdodCAvIDIgLyBzeTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQb2ludChcclxuICAgICAgICAgICAgTWF0aC5mbG9vciggdGlsZVggKSAqIENPTkZJRy5Xb3JsZC50aWxlV2lkdGggKyBDT05GSUcuV29ybGQudGlsZVdpZHRoICogMC41IC0gdGhpcy52aWV3WCArIHZjdyxcclxuICAgICAgICAgICAgTWF0aC5mbG9vciggdGlsZVkgKSAqIENPTkZJRy5Xb3JsZC50aWxlSGVpZ2h0ICsgQ09ORklHLldvcmxkLnRpbGVIZWlnaHQgKiAwLjUgLSB0aGlzLnZpZXdZICsgdmNoXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREaXN0YW5jZSggeCx5LHgyLHkyICkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoICggeDIgLSB4ICkgKiAoIHgyIC0geCApICsgKCB5MiAtIHkgKSAqICggeTIgLSB5ICkgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREaXN0YW5jZUJldHdlZW5FbnRpdGllcyggYzEsYzIgKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGlzdGFuY2UoIGMxLnRpbGVYLGMxLnRpbGVZLGMyLnRpbGVYLGMyLnRpbGVZICk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8g7JuU65Oc6rCAIOuMgOyLoCDsspjrpqztlbTso7zripQg7ZWo7IiY65OkXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblxyXG4gICAgYWRkTG9nKCAuLi5hcmdzICkge1xyXG4gICAgICAgIEdMT0JBTC5pbnRlcmZhY2UuYWRkTG9nKCAuLi5hcmdzICk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8g7JuU65OcIOyCreygnFxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyBHTE9CQUwud29ybGQg7JeQIOuMgOyehe2VnOuLpOqzoCDqsIDsoJXtlZjqs6Ag7J6I7J2MXHJcbiAgICAvL1xyXG5cclxuICAgIGRlc3Ryb3koIHJlbWFpblNwcml0ZSApIHtcclxuICAgICAgICBpZiAoIEdMT0JBTC53b3JsZCA9PSB0aGlzICkge1xyXG4gICAgICAgICAgICBHTE9CQUwud29ybGQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBTb3VuZC5zdG9wQWxsU2luZ2xlU291bmQoKTtcclxuICAgICAgICBpZiAoICFyZW1haW5TcHJpdGUgKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRnJvbVBhcmVudCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL2NvbGxlY3RnYXJiYWdlKCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coIFwi7JuU65Oc66W8IOyEseqzteyggeycvOuhnCDtjIzqtLTtlojsirXri4jri6QuXCIgKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8g66e1IOygleuztCwg7J2067Kk7Yq4IOyymOumrFxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgc2hvd01hcEluZm8oIHRpbGVYLHRpbGVZICkge1xyXG4gICAgICAgIGlmICggR0xPQkFMLmludGVyZmFjZS5pc1NpZGVQYW5lbE9wZW5lZCgpICkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBtYXBFdmVudHMgPSBbXTtcclxuICAgICAgICBsZXQgY3VyRXZlbnQ7XHJcblxyXG4gICAgICAgIGNvbnN0IHNob3dFdmVudCA9ICggbnVtICkgPT4ge1xyXG4gICAgICAgICAgICBudW0gPSBudW0gIT0gbnVsbCA/IG51bSA6IGN1ckV2ZW50O1xyXG4gICAgICAgICAgICBjdXJFdmVudCA9IG51bTtcclxuICAgICAgICAgICAgY29uc3QgdCA9IG1hcEV2ZW50c1tudW1dO1xyXG5cclxuICAgICAgICAgICAgdC5idXR0b24yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCBudW0gPiAxICkge1xyXG4gICAgICAgICAgICAgICAgICAgIFRpbWVyLmRlbGF5ZWRDYWxsKCAxMDAsKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93RXZlbnQoIG51bSAtIDEgKTtcclxuICAgICAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmICggbWFwRXZlbnRzLmxlbmd0aCA+IDEgKSB7XHJcbiAgICAgICAgICAgICAgICB0Lm5lZWROZXh0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHQubmVlZE5leHQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLnNob3dJbmZvKCB0ICk7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIGNvbnN0IHByID0gdGhpcy5nZXRQcm9wZXJ0eSggdGlsZVgsdGlsZVkgKTtcclxuXHJcbiAgICAgICAgaWYgKCBwci5jaGFyID09IFwiPlwiICkge1xyXG4gICAgICAgICAgICBtYXBFdmVudHNbbWFwRXZlbnRzLmxlbmd0aF0gPSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAgICAgICBcImludGVyYWN0XCIsXHJcbiAgICAgICAgICAgICAgICBidXR0b25UeXBlOiBcInllc25vXCIsXHJcbiAgICAgICAgICAgICAgICBidXR0b24xOiAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9zaG93QWdhaW4oKTtcclxuICAgICAgICAgICAgICAgICAgICBHTE9CQUwud29ybGQuZW50aXR5TWFuYWdlci5yZW1vdmVFbnRpdHkoIEdMT0JBTC5wbGF5ZXIgKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3koIHRydWUgKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuZmxvb3IgPSB0aGlzLm9wdGlvbnMuZmxvb3IgKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgIEdMT0JBTC53b3JsZCA9IG5ldyBXb3JsZCggdGhpcy5vcHRpb25zICk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9HTE9CQUwuc3RhZ2UuYWRkQ2hpbGRBdChHTE9CQUwud29ybGQsMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgR0xPQkFMLnNjZW5lTWFuYWdlci5jaGFuZ2VTY2VuZSggR0xPQkFMLndvcmxkLDUwMDAsIFNjZW5lTWFuYWdlci5jaXJjbGVJbk91dCxlYXNpbmcubGluZWFyICk7XHJcbiAgICAgICAgICAgICAgICAgICAgR0xPQkFMLnBsYXllci5zZXRUaWxlWHkoIEdMT0JBTC53b3JsZC5lbnRlclgsR0xPQkFMLndvcmxkLmVudGVyWSApO1xyXG4gICAgICAgICAgICAgICAgICAgIEdMT0JBTC5wbGF5ZXIucmVzZXRQb3NpdGlvbkFuZENvbG9yKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgR0xPQkFMLndvcmxkLmVudGl0eU1hbmFnZXIuYWRkRW50aXR5KCBHTE9CQUwucGxheWVyICk7XHJcbiAgICAgICAgICAgICAgICAgICAgR0xPQkFMLmludGVyZmFjZS5hY3Rpb25TZWxlY3Rvci5zZWxlY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmN1cnNvci5sb2NrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgR0xPQkFMLndvcmxkLm9uKCBcImVudGVyRW5kXCIsKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggXCLsnbTrj5nsmYTro4xcIiApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmN1cnNvci51bmxvY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgR0xPQkFMLmludGVyZmFjZS5jdXJzb3IucmVzZXRTY2FsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiB1bmRlZmluZWRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLm9wdGlvbnMudHlwZSA9PSBcImR1bmdlb25cIiApIHtcclxuICAgICAgICAgICAgICAgIG1hcEV2ZW50c1ttYXBFdmVudHMubGVuZ3RoIC0gMV0udGV4dCA9IGhhbmd1bC5mb3JtYXQoIFwi7KeA7ZWYICVk7Li17Jy866GcIOuCtOugpOqwgOqyoOyKteuLiOq5jD9cIix0aGlzLm9wdGlvbnMuZmxvb3IgKyAxICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBtYXBFdmVudHNbbWFwRXZlbnRzLmxlbmd0aCAtIDFdLnRleHQgPSBoYW5ndWwuZm9ybWF0KCBcIiVzIOuNmOyghOyXkCDrk6TslrTqsIDqsqDsirXri4jquYw/XCIsXCLqsJzrsJzspJFcIiApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGRvb3JzID0gW107XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5nZXRQcm9wZXJ0eSggdGlsZVggLSAxLHRpbGVZICkuY2hhciA9PSBcIkVcIiApIHtcclxuICAgICAgICAgICAgZG9vcnMucHVzaCggW1wi7ISc7Kq9XCIsIC0xLCAwXSApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIHRoaXMuZ2V0UHJvcGVydHkoIHRpbGVYLHRpbGVZICsgMSApLmNoYXIgPT0gXCJFXCIgKSB7XHJcbiAgICAgICAgICAgIGRvb3JzLnB1c2goIFtcIuuCqOyqvVwiLCAwLCAxXSApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIHRoaXMuZ2V0UHJvcGVydHkoIHRpbGVYICsgMSx0aWxlWSApLmNoYXIgPT0gXCJFXCIgKSB7XHJcbiAgICAgICAgICAgIGRvb3JzLnB1c2goIFtcIuuPmeyqvVwiLCAxLCAwXSApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIHRoaXMuZ2V0UHJvcGVydHkoIHRpbGVYLHRpbGVZIC0gMSApLmNoYXIgPT0gXCJFXCIgKSB7XHJcbiAgICAgICAgICAgIGRvb3JzLnB1c2goIFtcIuu2geyqvVwiLCAwLCAtMV0gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCBkb29ycy5sZW5ndGggPiAwICkge1xyXG4gICAgICAgICAgICBmb3IgKCBjb25zdCBpIGluIGRvb3JzICkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdiA9IGRvb3JzW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgIG1hcEV2ZW50c1ttYXBFdmVudHMubGVuZ3RoXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAgICAgICBcImludGVyYWN0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogICAgICAgYCR7dlswXX0g67Cp7Zal7J2YIOusuOydhCDsl7TqsqDsirXri4jquYw/YCxcclxuICAgICAgICAgICAgICAgICAgICBidXR0b25UeXBlOiBcInllc25vXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uMTogICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBHTE9CQUwucGxheWVyLm9wZW5Eb29yKCB0aWxlWCArIHZbMV0sdGlsZVkgKyB2WzJdICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCBkb29ycy5sZW5ndGggPT0gMSApIHtcclxuICAgICAgICAgICAgICAgIG1hcEV2ZW50c1swXS50ZXh0ID0gXCLrrLjsnYQg7Je06rKg7Iq164uI6rmMP1wiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cdFx0XHJcbiAgICAgICAgY29uc3QgaXRlbXMgPSB0aGlzLmVudGl0eU1hbmFnZXIuZ2V0SXRlbXMoIHRpbGVYLHRpbGVZICk7XHJcblxyXG4gICAgICAgIGlmICggaXRlbXMgKSB7XHJcbiAgICAgICAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgbWFwRXZlbnRzW21hcEV2ZW50cy5sZW5ndGhdID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICAgIFwiaXRlbVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW06ICAgIGl0ZW1zW2l0ZW1zLmxlbmd0aCAtIDFdLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbjE6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgR0xPQkFMLnBsYXllci5waWNrVXBJdGVtKCBpdGVtc1tpdGVtcy5sZW5ndGggLSAxXSApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggbWFwRXZlbnRzLmxlbmd0aCA+IDAgKSB7XHJcbiAgICAgICAgICAgIHNob3dFdmVudCggbWFwRXZlbnRzLmxlbmd0aCAtIDEgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvL2xvZyhcIu2RnOyLnO2VoCDrp7XsoJXrs7TqsIAg7JeG7J2MXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmN1cnNvci5zaG93QXV0b0FjdGlvbigpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBvcGVuRG9vciggeCx5ICkge1xyXG4gICAgICAgIFNvdW5kLnBsYXlTb3VuZCggXCJzb3VuZC9kb29yX29wZW4ud2F2XCIgKTtcclxuICAgICAgICB0aGlzLm1hcC5zZXREYXRhQnlDaGFyKCB4LHksXCJEXCIgKTtcclxuICAgICAgICB0aGlzLm1hcC5wcm9jZXNzVlR5cGUoIHgseSApO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCBcIuusuOyXtOq4sFwiLHRoaXMubWFwLmdldFByb3BlcnR5KCB4LHkgKS5jaGFyLEdMT0JBTC5wbGF5ZXIudGlsZVgsR0xPQkFMLnBsYXllci50aWxlWSx4LHkgKTtcclxuICAgICAgICAvL3RoaXMubWFwLmdldFByb3BlcnR5KHgseSkucmV2ZWFsZWQ9ZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zaWdodE1hbmFnZXIucmV2ZWFsVGlsZSggeCx5LHRydWUgKTtcclxuICAgICAgICB0aGlzLnNpZ2h0TWFuYWdlci5pbnZhbGlkYXRlRXllKCk7XHJcbiAgICAgICAgdGhpcy5zaWdodE1hbmFnZXIuaW52YWxpZGF0ZVZpc2liaWxpdHkoKTtcclxuICAgICAgICB0aGlzLnNpZ2h0TWFuYWdlci5yZWZyZXNoRW50aXR5VmlzaWJpbGl0eSgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIOyblOuTnCDrgqDsp5wg67CkLOuCrizrgqDslKhcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHByb2Nlc3NEYXRlVGltZSgpIHtcclxuICAgICAgICBjb25zdCBjdXJEYXRlVGltZSA9IHRoaXMuZGF0ZVRpbWVPcmlnaW4gKyB0aGlzLnR1cm47XHJcbiAgICAgICAgY29uc3QgdGltZSA9ICggY3VyRGF0ZVRpbWUgLyBDT05GSUcuV29ybGQudHVyblBlckRheSApICogMjQ7XHJcbiAgICAgICAgY29uc3QgaG91ciA9IE1hdGguZmxvb3IoICggdGltZSAlIDI0ICkgKTtcclxuICAgICAgICBjb25zdCBtaW51dGUgPSBNYXRoLmZsb29yKCAoIHRpbWUgKiA2MCApICUgNjAgKTtcclxuICAgICAgICBjb25zdCByYWluID0gVXRpbHMuY2xhbXAoIHRoaXMucmFpbiArICggVXRpbHMucmFuZG9tKCAtNDAsMzUgKSAvIDEwMCApLC0xLDEuMyApO1xyXG4gICAgICAgIGNvbnN0IHJhaW5EYXRhID0geyByYWRpdXM6IDMsIGMxOiBbMSwgMSwgMSwgMC4yXSwgYzI6IFsxLCAxLCAxLCAwLjVdIH07XHJcblx0XHRcclxuICAgICAgICBpZiAoIHRoaXMudHlwZSAhPSBcIndpbGRuZXNzXCIgKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGltZSA9IHRpbWU7XHJcbiAgICAgICAgICAgIHRoaXMucmFpbiA9IHJhaW47XHJcblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggdGhpcy5yYWluIDw9IDAuMiAmJiByYWluID4gMC4yICkge1xyXG4gICAgICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmFkZExvZyggXCLruYTqsIAg7Jik6riwIOyLnOyeke2VnOuLpC5cIiApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIHRoaXMucmFpbiA+PSAtMC4yICYmIHJhaW4gPCAtMC4yICkge1xyXG4gICAgICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmFkZExvZyggXCLruYTqsIAg6re47LOk64ukLlwiICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggTWF0aC5mbG9vciggKCB0aGlzLnRpbWUgJSAyNCApICkgPCA2ICYmIGhvdXIgPj0gNiApIHtcclxuICAgICAgICAgICAgaWYgKCByYWluIDw9IDAgKSB7XHJcbiAgICAgICAgICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmFkZExvZyggXCLtg5zslpHsnbQg65ag7Jik66W06rOgIOyeiOuLpC5cIiApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgR0xPQkFMLmludGVyZmFjZS5hZGRMb2coIFwi64Kg7J20IOuwneyVmOuLpC5cIiApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggTWF0aC5mbG9vciggKCB0aGlzLnRpbWUgJSAyNCApICkgPCAxOCAmJiBob3VyID49IDE4ICkge1xyXG4gICAgICAgICAgICBpZiAoIHJhaW4gPD0gMCApIHtcclxuICAgICAgICAgICAgICAgIEdMT0JBTC5pbnRlcmZhY2UuYWRkTG9nKCBcIu2DnOyWkeydtCDsp4Dqs6Ag7J6I64ukLlwiICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBHTE9CQUwuaW50ZXJmYWNlLmFkZExvZyggXCLrgqDsnbQg7KCA66y87JeI64ukLlwiICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5fX3R3ZWVuVGltZSApIHtcclxuICAgICAgICAgICAgdGhpcy5fX3R3ZWVuVGltZS5zdG9wKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGltZSA9IHRpbWU7XHJcbiAgICAgICAgdGhpcy5yYWluID0gcmFpbjtcclxuICAgICAgICB0aGlzLl9fdHdlZW5UaW1lID0gbmV3IFR3ZWVuKCB0aGlzLDUwMCx7IF9fdGltZTogdGltZSxfX3JhaW46IHJhaW4gfSApXHJcbiAgICAgICAgICAgIC5vbkNoYW5nZSggKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IHJhdGUsczEsczI7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICggY29uc3QgaSBpbiBDT05GSUcuV29ybGQudGltZVRhYmxlICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHYgPSBDT05GSUcuV29ybGQudGltZVRhYmxlW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHYudGltZSA+ICggdGhpcy5fX3RpbWUgJSAyNCApICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzMSA9IENPTkZJRy5Xb3JsZC50aW1lVGFibGVbcGFyc2VJbnQoIGkgKSAtIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzMiA9IENPTkZJRy5Xb3JsZC50aW1lVGFibGVbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhdGUgPSAoICggdGhpcy5fX3RpbWUgJSAyNCApIC0gczEudGltZSApIC8gKCBzMi50aW1lIC0gczEudGltZSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCByID0gVXRpbHMubGVycCggczEucmFkaXVzLHMyLnJhZGl1cyxyYXRlICk7XHJcbiAgICAgICAgICAgICAgICBsZXQgYzEgPSBbVXRpbHMubGVycCggczEuYzFbMV0sIHMyLmMxWzFdLCByYXRlICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgVXRpbHMubGVycCggczEuYzFbMl0sIHMyLmMxWzJdLCByYXRlICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgVXRpbHMubGVycCggczEuYzFbM10sIHMyLmMxWzNdLCByYXRlICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgVXRpbHMubGVycCggczEuYzFbNF0sIHMyLmMxWzRdLCByYXRlICldO1xyXG4gICAgICAgICAgICAgICAgbGV0IGMyID0gW1V0aWxzLmxlcnAoIHMxLmMyWzFdLCBzMi5jMlsxXSwgcmF0ZSApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFV0aWxzLmxlcnAoIHMxLmMyWzJdLCBzMi5jMlsyXSwgcmF0ZSApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFV0aWxzLmxlcnAoIHMxLmMyWzNdLCBzMi5jMlszXSwgcmF0ZSApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFV0aWxzLmxlcnAoIHMxLmMyWzRdLCBzMi5jMls0XSwgcmF0ZSApXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJhdGUyID0gTWF0aC5taW4oIDEsdGhpcy5fX3JhaW4gKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL3IgPSBVdGlscy5sZXJwKHIscmFpbkRhdGEucmFkaXVzLHJhdGUyKTtcclxuICAgICAgICAgICAgICAgIGMxID0gW1V0aWxzLmxlcnAoIGMxWzFdLCByYWluRGF0YS5jMVsxXSwgcmF0ZTIgKSxcclxuICAgICAgICAgICAgICAgICAgICAgIFV0aWxzLmxlcnAoIGMxWzJdLCByYWluRGF0YS5jMVsyXSwgcmF0ZTIgKSxcclxuICAgICAgICAgICAgICAgICAgICAgIFV0aWxzLmxlcnAoIGMxWzNdLCByYWluRGF0YS5jMVszXSwgcmF0ZTIgKSxcclxuICAgICAgICAgICAgICAgICAgICAgIFV0aWxzLmxlcnAoIGMxWzRdLCByYWluRGF0YS5jMVs0XSwgcmF0ZTIgKV07XHJcbiAgICAgICAgICAgICAgICBjMiA9IFtVdGlscy5sZXJwKCBjMlsxXSwgcmFpbkRhdGEuYzJbMV0sIHJhdGUyICksXHJcbiAgICAgICAgICAgICAgICAgICAgICBVdGlscy5sZXJwKCBjMlsyXSwgcmFpbkRhdGEuYzJbMl0sIHJhdGUyICksXHJcbiAgICAgICAgICAgICAgICAgICAgICBVdGlscy5sZXJwKCBjMlszXSwgcmFpbkRhdGEuYzJbM10sIHJhdGUyICksXHJcbiAgICAgICAgICAgICAgICAgICAgICBVdGlscy5sZXJwKCBjMls0XSwgcmFpbkRhdGEuYzJbNF0sIHJhdGUyICldO1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3UmFkaXVzID0gcjtcclxuICAgICAgICAgICAgICAgIHRoaXMuX19lbnZDb2xvcjEgPSBjMTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX19lbnZDb2xvcjIgPSBjMjtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2lnaHRNYW5hZ2VyLnVwZGF0ZVNoYWRlclZpZXdJbmZvKCk7XHJcbiAgICAgICAgICAgIH0gKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJXaGV0aGVyRWZmZWN0KCBkeCxkeSApIHtcclxuICAgICAgICBjb25zdCBsaWdodG5pbmdEYXRhID0geyByYWRpdXM6IDE1LCBjMTogWzEsIDEsIDEsIDFdLCBjMjogWzEsIDEsIDEsIDFdIH07XHJcblxyXG4gICAgICAgIGlmICggdGhpcy50eXBlID09IFwid2lsZG5lc3NcIiAmJiB0aGlzLl9fcmFpbiA+IDAgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJhaW4gPSBNYXRoLm1pbiggMSx0aGlzLl9fcmFpbiApO1xyXG4gICAgICAgICAgICBjb25zdCBsaWdodG5pbmdSYXRlID0gKCAxMDEgLSAxMDAgKiByYWluICkgKiA4MDtcclxuXHJcbiAgICAgICAgICAgIGlmICggVXRpbHMucmFuZG9tKCBsaWdodG5pbmdSYXRlICkgPT0gMSAmJiB0aGlzLmxpZ2h0bmluZ1RpbWVyICE9IG51bGwgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByID0gdGhpcy52aWV3UmFkaXVzO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYzEgPSB0aGlzLl9fZW52Q29sb3IxO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYzIgPSB0aGlzLl9fZW52Q29sb3IyO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMudmlld1JhZGl1cyA9IGxpZ2h0bmluZ0RhdGEucmFkaXVzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fX2VudkNvbG9yMSA9IGxpZ2h0bmluZ0RhdGEuYzE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9fZW52Q29sb3IyID0gbGlnaHRuaW5nRGF0YS5jMjtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2lnaHRNYW5hZ2VyLnVwZGF0ZVNoYWRlclZpZXdJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpZ2h0bmluZ1RpbWVyID0gVGltZXIuZGVsYXllZENhbGwoIDIwLCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdSYWRpdXMgPSByO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX19lbnZDb2xvcjEgPSBjMTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9fZW52Q29sb3IyID0gYzI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaWdodE1hbmFnZXIudXBkYXRlU2hhZGVyVmlld0luZm8oKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpZ2h0bmluZ1RpbWVyID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIFRpbWVyLmRlbGF5ZWRDYWxsKCBVdGlscy5yYW5kb20oIDMwMDAgKSwoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2MgPSBuZXcgU291bmQoIFwic291bmQvZW52X2xpZ2h0bmluZy53YXZcIiApLnBsYXkoIFV0aWxzLnJhbmRvbSggNTAwMCApICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggc2MgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjLnNldFBpdGNoKCBVdGlscy5yYW5kb20oIDgwLDEwMCApICogMC4wMSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzYy5zZXRWb2x1bWUoIFV0aWxzLnJhbmRvbSggNTAsMTAwICkgKiAwLjAxICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBbeDEseTFdID0gW3RoaXMudmlld1ggLSB0aGlzLnZpZXdXaWR0aCAvIDIgLyAwLjUsdGhpcy52aWV3WSAtIHRoaXMudmlld0hlaWdodCAvIDIgLyAwLjVdO1xyXG4gICAgICAgICAgICBjb25zdCBbeDIseTJdID0gW3RoaXMudmlld1ggKyB0aGlzLnZpZXdXaWR0aCAvIDIgLyAwLjUsdGhpcy52aWV3WSArIHRoaXMudmlld0hlaWdodCAvIDIgLyAwLjVdO1xyXG4gICAgICAgICAgICBsZXQgdmlld1gxLHZpZXdZMSx2aWV3WDIsdmlld1kyO1xyXG5cclxuICAgICAgICAgICAgdmlld1gxID0gTWF0aC5mbG9vciggeDEgLyBDT05GSUcuV29ybGQudGlsZVdpZHRoICkgKyAxO1xyXG4gICAgICAgICAgICB2aWV3WTEgPSBNYXRoLmZsb29yKCB5MSAvIENPTkZJRy5Xb3JsZC50aWxlSGVpZ2h0ICkgKyAxO1xyXG4gICAgICAgICAgICB2aWV3WDIgPSBNYXRoLmZsb29yKCB4MiAvIENPTkZJRy5Xb3JsZC50aWxlV2lkdGggKSArIDE7XHJcbiAgICAgICAgICAgIHZpZXdZMiA9IE1hdGguZmxvb3IoIHkyIC8gQ09ORklHLldvcmxkLnRpbGVIZWlnaHQgKSArIDE7XHJcbiAgICAgICAgICAgIGlmICggIXRoaXMucmFpblNwcml0ZSApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmFpblNwcml0ZSA9IG5ldyBQYXJ0aWNsZXMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmFpblNwcml0ZS5zZXRUZXh0dXJlKCBuZXcgVGV4dHVyZSggXCJyYWluRHJvcC5wbmdcIixmYWxzZSx7IGZvcm1hdDogVGV4dHVyZUJhc2UuUkdCQTQ0NDQgfSApICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVmZmVjdExheWVyLmFkZENoaWxkKCB0aGlzLnJhaW5TcHJpdGUgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBTb3VuZC5wbGF5U2luZ2xlU291bmQoIFwic291bmQvbG9vcF9yYWluLndhdlwiLHRoaXMucmFpbix0cnVlICk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5hdGFuMiggLWR4LDIwICkgKyAoIDkwICogTWF0aC5QSSAvIDE4MCApO1xyXG4gICAgICAgICAgICBjb25zdCBleWVUeCA9IHRoaXMuZXllWCAvIENPTkZJRy5Xb3JsZC50aWxlV2lkdGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGV5ZVR5ID0gdGhpcy5leWVZIC8gQ09ORklHLldvcmxkLnRpbGVIZWlnaHQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHNpemUgPSAxNiAqIHRoaXMuZ2V0U2NhbGVYKCk7Ly8qQ09ORklHLlBBUlRJQ0xFX1NDQUxFO1xyXG4gICAgICAgICAgICBjb25zdCBkcm9wUmF0ZSA9IDEwMSAtIDEwMCAqIE1hdGgucG93KCByYWluLDIgKTtcclxuICAgICAgICAgICAgY29uc3QgcmFpblJhZGl1cyA9IHRoaXMudmlld1JhZGl1cyBeIDI7XHJcblxyXG4gICAgICAgICAgICBmb3IgKCBsZXQgeSA9IHZpZXdZMTsgeSA8PSB2aWV3WTI7IHkrKyApIHtcclxuICAgICAgICAgICAgICAgIGZvciAoIGxldCB4ID0gdmlld1gxOyB4IDw9IHZpZXdYMjsgeCsrICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHh4ID0gKCB4IC0gMSApICogQ09ORklHLldvcmxkLnRpbGVXaWR0aCArIFV0aWxzLnJhbmRvbSggQ09ORklHLldvcmxkLnRpbGVXaWR0aCApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHl5ID0gKCB5IC0gMSApICogQ09ORklHLldvcmxkLnRpbGVIZWlnaHQgKyBVdGlscy5yYW5kb20oIENPTkZJRy5Xb3JsZC50aWxlSGVpZ2h0ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlZWQgPSA4O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByID0gdGhpcy5nZXRQcm9wZXJ0eSggeCx5ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggVXRpbHMucmFuZG9tKCBkcm9wUmF0ZSApID09IDEgJiZcclxuXHRcdFx0XHRcdFx0KCB4IC0gZXllVHggKSAqKiAyICsgKCB5IC0gZXllVHkgKSAqKiAyIDw9IHJhaW5SYWRpdXMgJiZcclxuXHRcdFx0XHRcdFx0cHIucmV2ZWFsZWQgJiYgIXByLm5vUmFpbiApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yYWluU3ByaXRlLmFkZFBhcnRpY2xlcyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt7XHR4OiAgICAgIHh4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogICAgICB5eSAtIDIgKiBzcGVlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6ICAgc2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlOiAgKCBhbmdsZSAvIE1hdGguUEkgKiAxODAgKSArIDkwLC8vK1V0aWxzLnJhbmRvbSgtMTAsMTApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHRsOiAgICAzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlZWRYOiBNYXRoLmNvcyggYW5nbGUgKSAqIHNwZWVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlZWRZOiBNYXRoLnNpbiggYW5nbGUgKSAqIHNwZWVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICAweGZmZmZmZixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFscGhhOiAgMC40LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfV0gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF0ZVRpbWUoKSB7XHJcbiAgICAgICAgY29uc3QgZGF5ID0gTWF0aC5mbG9vciggdGhpcy50aW1lIC8gMjQgKTtcclxuICAgICAgICBjb25zdCBob3VyID0gTWF0aC5mbG9vciggdGhpcy50aW1lICUgMjQgKTtcclxuICAgICAgICBjb25zdCBtaW4gPSBNYXRoLmZsb29yKCAoIHRoaXMudGltZSAqIDYwICkgJSA2MCApO1xyXG4gICAgICAgIGNvbnN0IHNlYyA9IE1hdGguZmxvb3IoICggdGhpcy50aW1lICogNjAgKiA2MCApICUgNjAgKTtcclxuICAgICAgICBjb25zdCB0ID0geyBkYXk6IGRheSwgaG91cjogaG91ciwgbWluOiBtaW4sIHNlYzogc2VjIH07XHJcblxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG5cclxuICAgIGlzUmFpbnkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmFpbiAqIDEwMCA+IDIwO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eVxuICAsIHByZWZpeCA9ICd+JztcblxuLyoqXG4gKiBDb25zdHJ1Y3RvciB0byBjcmVhdGUgYSBzdG9yYWdlIGZvciBvdXIgYEVFYCBvYmplY3RzLlxuICogQW4gYEV2ZW50c2AgaW5zdGFuY2UgaXMgYSBwbGFpbiBvYmplY3Qgd2hvc2UgcHJvcGVydGllcyBhcmUgZXZlbnQgbmFtZXMuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBFdmVudHMoKSB7fVxuXG4vL1xuLy8gV2UgdHJ5IHRvIG5vdCBpbmhlcml0IGZyb20gYE9iamVjdC5wcm90b3R5cGVgLiBJbiBzb21lIGVuZ2luZXMgY3JlYXRpbmcgYW5cbi8vIGluc3RhbmNlIGluIHRoaXMgd2F5IGlzIGZhc3RlciB0aGFuIGNhbGxpbmcgYE9iamVjdC5jcmVhdGUobnVsbClgIGRpcmVjdGx5LlxuLy8gSWYgYE9iamVjdC5jcmVhdGUobnVsbClgIGlzIG5vdCBzdXBwb3J0ZWQgd2UgcHJlZml4IHRoZSBldmVudCBuYW1lcyB3aXRoIGFcbi8vIGNoYXJhY3RlciB0byBtYWtlIHN1cmUgdGhhdCB0aGUgYnVpbHQtaW4gb2JqZWN0IHByb3BlcnRpZXMgYXJlIG5vdFxuLy8gb3ZlcnJpZGRlbiBvciB1c2VkIGFzIGFuIGF0dGFjayB2ZWN0b3IuXG4vL1xuaWYgKE9iamVjdC5jcmVhdGUpIHtcbiAgRXZlbnRzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgLy9cbiAgLy8gVGhpcyBoYWNrIGlzIG5lZWRlZCBiZWNhdXNlIHRoZSBgX19wcm90b19fYCBwcm9wZXJ0eSBpcyBzdGlsbCBpbmhlcml0ZWQgaW5cbiAgLy8gc29tZSBvbGQgYnJvd3NlcnMgbGlrZSBBbmRyb2lkIDQsIGlQaG9uZSA1LjEsIE9wZXJhIDExIGFuZCBTYWZhcmkgNS5cbiAgLy9cbiAgaWYgKCFuZXcgRXZlbnRzKCkuX19wcm90b19fKSBwcmVmaXggPSBmYWxzZTtcbn1cblxuLyoqXG4gKiBSZXByZXNlbnRhdGlvbiBvZiBhIHNpbmdsZSBldmVudCBsaXN0ZW5lci5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IGNvbnRleHQgVGhlIGNvbnRleHQgdG8gaW52b2tlIHRoZSBsaXN0ZW5lciB3aXRoLlxuICogQHBhcmFtIHtCb29sZWFufSBbb25jZT1mYWxzZV0gU3BlY2lmeSBpZiB0aGUgbGlzdGVuZXIgaXMgYSBvbmUtdGltZSBsaXN0ZW5lci5cbiAqIEBjb25zdHJ1Y3RvclxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gRUUoZm4sIGNvbnRleHQsIG9uY2UpIHtcbiAgdGhpcy5mbiA9IGZuO1xuICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICB0aGlzLm9uY2UgPSBvbmNlIHx8IGZhbHNlO1xufVxuXG4vKipcbiAqIEFkZCBhIGxpc3RlbmVyIGZvciBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7RXZlbnRFbWl0dGVyfSBlbWl0dGVyIFJlZmVyZW5jZSB0byB0aGUgYEV2ZW50RW1pdHRlcmAgaW5zdGFuY2UuXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IGNvbnRleHQgVGhlIGNvbnRleHQgdG8gaW52b2tlIHRoZSBsaXN0ZW5lciB3aXRoLlxuICogQHBhcmFtIHtCb29sZWFufSBvbmNlIFNwZWNpZnkgaWYgdGhlIGxpc3RlbmVyIGlzIGEgb25lLXRpbWUgbGlzdGVuZXIuXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gYWRkTGlzdGVuZXIoZW1pdHRlciwgZXZlbnQsIGZuLCBjb250ZXh0LCBvbmNlKSB7XG4gIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gIH1cblxuICB2YXIgbGlzdGVuZXIgPSBuZXcgRUUoZm4sIGNvbnRleHQgfHwgZW1pdHRlciwgb25jZSlcbiAgICAsIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnQ7XG5cbiAgaWYgKCFlbWl0dGVyLl9ldmVudHNbZXZ0XSkgZW1pdHRlci5fZXZlbnRzW2V2dF0gPSBsaXN0ZW5lciwgZW1pdHRlci5fZXZlbnRzQ291bnQrKztcbiAgZWxzZSBpZiAoIWVtaXR0ZXIuX2V2ZW50c1tldnRdLmZuKSBlbWl0dGVyLl9ldmVudHNbZXZ0XS5wdXNoKGxpc3RlbmVyKTtcbiAgZWxzZSBlbWl0dGVyLl9ldmVudHNbZXZ0XSA9IFtlbWl0dGVyLl9ldmVudHNbZXZ0XSwgbGlzdGVuZXJdO1xuXG4gIHJldHVybiBlbWl0dGVyO1xufVxuXG4vKipcbiAqIENsZWFyIGV2ZW50IGJ5IG5hbWUuXG4gKlxuICogQHBhcmFtIHtFdmVudEVtaXR0ZXJ9IGVtaXR0ZXIgUmVmZXJlbmNlIHRvIHRoZSBgRXZlbnRFbWl0dGVyYCBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldnQgVGhlIEV2ZW50IG5hbWUuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjbGVhckV2ZW50KGVtaXR0ZXIsIGV2dCkge1xuICBpZiAoLS1lbWl0dGVyLl9ldmVudHNDb3VudCA9PT0gMCkgZW1pdHRlci5fZXZlbnRzID0gbmV3IEV2ZW50cygpO1xuICBlbHNlIGRlbGV0ZSBlbWl0dGVyLl9ldmVudHNbZXZ0XTtcbn1cblxuLyoqXG4gKiBNaW5pbWFsIGBFdmVudEVtaXR0ZXJgIGludGVyZmFjZSB0aGF0IGlzIG1vbGRlZCBhZ2FpbnN0IHRoZSBOb2RlLmpzXG4gKiBgRXZlbnRFbWl0dGVyYCBpbnRlcmZhY2UuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgdGhpcy5fZXZlbnRzID0gbmV3IEV2ZW50cygpO1xuICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XG59XG5cbi8qKlxuICogUmV0dXJuIGFuIGFycmF5IGxpc3RpbmcgdGhlIGV2ZW50cyBmb3Igd2hpY2ggdGhlIGVtaXR0ZXIgaGFzIHJlZ2lzdGVyZWRcbiAqIGxpc3RlbmVycy5cbiAqXG4gKiBAcmV0dXJucyB7QXJyYXl9XG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZXZlbnROYW1lcyA9IGZ1bmN0aW9uIGV2ZW50TmFtZXMoKSB7XG4gIHZhciBuYW1lcyA9IFtdXG4gICAgLCBldmVudHNcbiAgICAsIG5hbWU7XG5cbiAgaWYgKHRoaXMuX2V2ZW50c0NvdW50ID09PSAwKSByZXR1cm4gbmFtZXM7XG5cbiAgZm9yIChuYW1lIGluIChldmVudHMgPSB0aGlzLl9ldmVudHMpKSB7XG4gICAgaWYgKGhhcy5jYWxsKGV2ZW50cywgbmFtZSkpIG5hbWVzLnB1c2gocHJlZml4ID8gbmFtZS5zbGljZSgxKSA6IG5hbWUpO1xuICB9XG5cbiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcbiAgICByZXR1cm4gbmFtZXMuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZXZlbnRzKSk7XG4gIH1cblxuICByZXR1cm4gbmFtZXM7XG59O1xuXG4vKipcbiAqIFJldHVybiB0aGUgbGlzdGVuZXJzIHJlZ2lzdGVyZWQgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHJldHVybnMge0FycmF5fSBUaGUgcmVnaXN0ZXJlZCBsaXN0ZW5lcnMuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24gbGlzdGVuZXJzKGV2ZW50KSB7XG4gIHZhciBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50XG4gICAgLCBoYW5kbGVycyA9IHRoaXMuX2V2ZW50c1tldnRdO1xuXG4gIGlmICghaGFuZGxlcnMpIHJldHVybiBbXTtcbiAgaWYgKGhhbmRsZXJzLmZuKSByZXR1cm4gW2hhbmRsZXJzLmZuXTtcblxuICBmb3IgKHZhciBpID0gMCwgbCA9IGhhbmRsZXJzLmxlbmd0aCwgZWUgPSBuZXcgQXJyYXkobCk7IGkgPCBsOyBpKyspIHtcbiAgICBlZVtpXSA9IGhhbmRsZXJzW2ldLmZuO1xuICB9XG5cbiAgcmV0dXJuIGVlO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gdGhlIG51bWJlciBvZiBsaXN0ZW5lcnMgbGlzdGVuaW5nIHRvIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHJldHVybnMge051bWJlcn0gVGhlIG51bWJlciBvZiBsaXN0ZW5lcnMuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uIGxpc3RlbmVyQ291bnQoZXZlbnQpIHtcbiAgdmFyIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnRcbiAgICAsIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1tldnRdO1xuXG4gIGlmICghbGlzdGVuZXJzKSByZXR1cm4gMDtcbiAgaWYgKGxpc3RlbmVycy5mbikgcmV0dXJuIDE7XG4gIHJldHVybiBsaXN0ZW5lcnMubGVuZ3RoO1xufTtcblxuLyoqXG4gKiBDYWxscyBlYWNoIG9mIHRoZSBsaXN0ZW5lcnMgcmVnaXN0ZXJlZCBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSBldmVudCBoYWQgbGlzdGVuZXJzLCBlbHNlIGBmYWxzZWAuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQoZXZlbnQsIGExLCBhMiwgYTMsIGE0LCBhNSkge1xuICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcblxuICBpZiAoIXRoaXMuX2V2ZW50c1tldnRdKSByZXR1cm4gZmFsc2U7XG5cbiAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1tldnRdXG4gICAgLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoXG4gICAgLCBhcmdzXG4gICAgLCBpO1xuXG4gIGlmIChsaXN0ZW5lcnMuZm4pIHtcbiAgICBpZiAobGlzdGVuZXJzLm9uY2UpIHRoaXMucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVycy5mbiwgdW5kZWZpbmVkLCB0cnVlKTtcblxuICAgIHN3aXRjaCAobGVuKSB7XG4gICAgICBjYXNlIDE6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCksIHRydWU7XG4gICAgICBjYXNlIDI6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEpLCB0cnVlO1xuICAgICAgY2FzZSAzOiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiksIHRydWU7XG4gICAgICBjYXNlIDQ6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEsIGEyLCBhMyksIHRydWU7XG4gICAgICBjYXNlIDU6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEsIGEyLCBhMywgYTQpLCB0cnVlO1xuICAgICAgY2FzZSA2OiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiwgYTMsIGE0LCBhNSksIHRydWU7XG4gICAgfVxuXG4gICAgZm9yIChpID0gMSwgYXJncyA9IG5ldyBBcnJheShsZW4gLTEpOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgIH1cblxuICAgIGxpc3RlbmVycy5mbi5hcHBseShsaXN0ZW5lcnMuY29udGV4dCwgYXJncyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGxlbmd0aCA9IGxpc3RlbmVycy5sZW5ndGhcbiAgICAgICwgajtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGxpc3RlbmVyc1tpXS5vbmNlKSB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcnNbaV0uZm4sIHVuZGVmaW5lZCwgdHJ1ZSk7XG5cbiAgICAgIHN3aXRjaCAobGVuKSB7XG4gICAgICAgIGNhc2UgMTogbGlzdGVuZXJzW2ldLmZuLmNhbGwobGlzdGVuZXJzW2ldLmNvbnRleHQpOyBicmVhaztcbiAgICAgICAgY2FzZSAyOiBsaXN0ZW5lcnNbaV0uZm4uY2FsbChsaXN0ZW5lcnNbaV0uY29udGV4dCwgYTEpOyBicmVhaztcbiAgICAgICAgY2FzZSAzOiBsaXN0ZW5lcnNbaV0uZm4uY2FsbChsaXN0ZW5lcnNbaV0uY29udGV4dCwgYTEsIGEyKTsgYnJlYWs7XG4gICAgICAgIGNhc2UgNDogbGlzdGVuZXJzW2ldLmZuLmNhbGwobGlzdGVuZXJzW2ldLmNvbnRleHQsIGExLCBhMiwgYTMpOyBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBpZiAoIWFyZ3MpIGZvciAoaiA9IDEsIGFyZ3MgPSBuZXcgQXJyYXkobGVuIC0xKTsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgICBhcmdzW2ogLSAxXSA9IGFyZ3VtZW50c1tqXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsaXN0ZW5lcnNbaV0uZm4uYXBwbHkobGlzdGVuZXJzW2ldLmNvbnRleHQsIGFyZ3MpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuLyoqXG4gKiBBZGQgYSBsaXN0ZW5lciBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IFtjb250ZXh0PXRoaXNdIFRoZSBjb250ZXh0IHRvIGludm9rZSB0aGUgbGlzdGVuZXIgd2l0aC5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IGB0aGlzYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIG9uKGV2ZW50LCBmbiwgY29udGV4dCkge1xuICByZXR1cm4gYWRkTGlzdGVuZXIodGhpcywgZXZlbnQsIGZuLCBjb250ZXh0LCBmYWxzZSk7XG59O1xuXG4vKipcbiAqIEFkZCBhIG9uZS10aW1lIGxpc3RlbmVyIGZvciBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gW2NvbnRleHQ9dGhpc10gVGhlIGNvbnRleHQgdG8gaW52b2tlIHRoZSBsaXN0ZW5lciB3aXRoLlxuICogQHJldHVybnMge0V2ZW50RW1pdHRlcn0gYHRoaXNgLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlKGV2ZW50LCBmbiwgY29udGV4dCkge1xuICByZXR1cm4gYWRkTGlzdGVuZXIodGhpcywgZXZlbnQsIGZuLCBjb250ZXh0LCB0cnVlKTtcbn07XG5cbi8qKlxuICogUmVtb3ZlIHRoZSBsaXN0ZW5lcnMgb2YgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBPbmx5IHJlbW92ZSB0aGUgbGlzdGVuZXJzIHRoYXQgbWF0Y2ggdGhpcyBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gY29udGV4dCBPbmx5IHJlbW92ZSB0aGUgbGlzdGVuZXJzIHRoYXQgaGF2ZSB0aGlzIGNvbnRleHQuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IG9uY2UgT25seSByZW1vdmUgb25lLXRpbWUgbGlzdGVuZXJzLlxuICogQHJldHVybnMge0V2ZW50RW1pdHRlcn0gYHRoaXNgLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGZuLCBjb250ZXh0LCBvbmNlKSB7XG4gIHZhciBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50O1xuXG4gIGlmICghdGhpcy5fZXZlbnRzW2V2dF0pIHJldHVybiB0aGlzO1xuICBpZiAoIWZuKSB7XG4gICAgY2xlYXJFdmVudCh0aGlzLCBldnQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1tldnRdO1xuXG4gIGlmIChsaXN0ZW5lcnMuZm4pIHtcbiAgICBpZiAoXG4gICAgICBsaXN0ZW5lcnMuZm4gPT09IGZuICYmXG4gICAgICAoIW9uY2UgfHwgbGlzdGVuZXJzLm9uY2UpICYmXG4gICAgICAoIWNvbnRleHQgfHwgbGlzdGVuZXJzLmNvbnRleHQgPT09IGNvbnRleHQpXG4gICAgKSB7XG4gICAgICBjbGVhckV2ZW50KHRoaXMsIGV2dCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGZvciAodmFyIGkgPSAwLCBldmVudHMgPSBbXSwgbGVuZ3RoID0gbGlzdGVuZXJzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGxpc3RlbmVyc1tpXS5mbiAhPT0gZm4gfHxcbiAgICAgICAgKG9uY2UgJiYgIWxpc3RlbmVyc1tpXS5vbmNlKSB8fFxuICAgICAgICAoY29udGV4dCAmJiBsaXN0ZW5lcnNbaV0uY29udGV4dCAhPT0gY29udGV4dClcbiAgICAgICkge1xuICAgICAgICBldmVudHMucHVzaChsaXN0ZW5lcnNbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vXG4gICAgLy8gUmVzZXQgdGhlIGFycmF5LCBvciByZW1vdmUgaXQgY29tcGxldGVseSBpZiB3ZSBoYXZlIG5vIG1vcmUgbGlzdGVuZXJzLlxuICAgIC8vXG4gICAgaWYgKGV2ZW50cy5sZW5ndGgpIHRoaXMuX2V2ZW50c1tldnRdID0gZXZlbnRzLmxlbmd0aCA9PT0gMSA/IGV2ZW50c1swXSA6IGV2ZW50cztcbiAgICBlbHNlIGNsZWFyRXZlbnQodGhpcywgZXZ0KTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYWxsIGxpc3RlbmVycywgb3IgdGhvc2Ugb2YgdGhlIHNwZWNpZmllZCBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gW2V2ZW50XSBUaGUgZXZlbnQgbmFtZS5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IGB0aGlzYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbiByZW1vdmVBbGxMaXN0ZW5lcnMoZXZlbnQpIHtcbiAgdmFyIGV2dDtcblxuICBpZiAoZXZlbnQpIHtcbiAgICBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50O1xuICAgIGlmICh0aGlzLl9ldmVudHNbZXZ0XSkgY2xlYXJFdmVudCh0aGlzLCBldnQpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuX2V2ZW50cyA9IG5ldyBFdmVudHMoKTtcbiAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vXG4vLyBBbGlhcyBtZXRob2RzIG5hbWVzIGJlY2F1c2UgcGVvcGxlIHJvbGwgbGlrZSB0aGF0LlxuLy9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcjtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uO1xuXG4vL1xuLy8gRXhwb3NlIHRoZSBwcmVmaXguXG4vL1xuRXZlbnRFbWl0dGVyLnByZWZpeGVkID0gcHJlZml4O1xuXG4vL1xuLy8gQWxsb3cgYEV2ZW50RW1pdHRlcmAgdG8gYmUgaW1wb3J0ZWQgYXMgbW9kdWxlIG5hbWVzcGFjZS5cbi8vXG5FdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyO1xuXG4vL1xuLy8gRXhwb3NlIHRoZSBtb2R1bGUuXG4vL1xuaWYgKCd1bmRlZmluZWQnICE9PSB0eXBlb2YgbW9kdWxlKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xufVxuIiwiLyogQGxpY2Vuc2UgdHdnbC5qcyA0LjIxLjIgQ29weXJpZ2h0IChjKSAyMDE1LCBHcmVnZyBUYXZhcmVzIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG5BdmFpbGFibGUgdmlhIHRoZSBNSVQgbGljZW5zZS5cbnNlZTogaHR0cDovL2dpdGh1Yi5jb20vZ3JlZ2dtYW4vdHdnbC5qcyBmb3IgZGV0YWlscyAqL1xuLypcbiAqIENvcHlyaWdodCAyMDE5IEdyZWdnIFRhdmFyZXNcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLFxuICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvblxuICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsXG4gKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcbiAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMXG4gKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbiAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVJcbiAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG4vKipcbiAqXG4gKiBWZWMzIG1hdGggbWF0aCBmdW5jdGlvbnMuXG4gKlxuICogQWxtb3N0IGFsbCBmdW5jdGlvbnMgdGFrZSBhbiBvcHRpb25hbCBgZHN0YCBhcmd1bWVudC4gSWYgaXQgaXMgbm90IHBhc3NlZCBpbiB0aGVcbiAqIGZ1bmN0aW9ucyB3aWxsIGNyZWF0ZSBhIG5ldyBWZWMzLiBJbiBvdGhlciB3b3JkcyB5b3UgY2FuIGRvIHRoaXNcbiAqXG4gKiAgICAgdmFyIHYgPSB2My5jcm9zcyh2MSwgdjIpOyAgLy8gQ3JlYXRlcyBhIG5ldyBWZWMzIHdpdGggdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdjEgeCB2Mi5cbiAqXG4gKiBvclxuICpcbiAqICAgICB2YXIgdiA9IHYzLmNyZWF0ZSgpO1xuICogICAgIHYzLmNyb3NzKHYxLCB2Miwgdik7ICAvLyBQdXRzIHRoZSBjcm9zcyBwcm9kdWN0IG9mIHYxIHggdjIgaW4gdlxuICpcbiAqIFRoZSBmaXJzdCBzdHlsZSBpcyBvZnRlbiBlYXNpZXIgYnV0IGRlcGVuZGluZyBvbiB3aGVyZSBpdCdzIHVzZWQgaXQgZ2VuZXJhdGVzIGdhcmJhZ2Ugd2hlcmVcbiAqIGFzIHRoZXJlIGlzIGFsbW9zdCBuZXZlciBhbGxvY2F0aW9uIHdpdGggdGhlIHNlY29uZCBzdHlsZS5cbiAqXG4gKiBJdCBpcyBhbHdheXMgc2F2ZSB0byBwYXNzIGFueSB2ZWN0b3IgYXMgdGhlIGRlc3RpbmF0aW9uLiBTbyBmb3IgZXhhbXBsZVxuICpcbiAqICAgICB2My5jcm9zcyh2MSwgdjIsIHYxKTsgIC8vIFB1dHMgdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdjEgeCB2MiBpbiB2MVxuICpcbiAqIEBtb2R1bGUgdHdnbC92M1xuICovXG5cbmxldCBWZWNUeXBlID0gRmxvYXQzMkFycmF5O1xuXG4vKipcbiAqIEEgSmF2YVNjcmlwdCBhcnJheSB3aXRoIDMgdmFsdWVzIG9yIGEgRmxvYXQzMkFycmF5IHdpdGggMyB2YWx1ZXMuXG4gKiBXaGVuIGNyZWF0ZWQgYnkgdGhlIGxpYnJhcnkgd2lsbCBjcmVhdGUgdGhlIGRlZmF1bHQgdHlwZSB3aGljaCBpcyBgRmxvYXQzMkFycmF5YFxuICogYnV0IGNhbiBiZSBzZXQgYnkgY2FsbGluZyB7QGxpbmsgbW9kdWxlOnR3Z2wvdjMuc2V0RGVmYXVsdFR5cGV9LlxuICogQHR5cGVkZWYgeyhudW1iZXJbXXxGbG9hdDMyQXJyYXkpfSBWZWMzXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdjNcbiAqL1xuXG4vKipcbiAqIFNldHMgdGhlIHR5cGUgdGhpcyBsaWJyYXJ5IGNyZWF0ZXMgZm9yIGEgVmVjM1xuICogQHBhcmFtIHtjb25zdHJ1Y3Rvcn0gY3RvciB0aGUgY29uc3RydWN0b3IgZm9yIHRoZSB0eXBlLiBFaXRoZXIgYEZsb2F0MzJBcnJheWAgb3IgYEFycmF5YFxuICogQHJldHVybiB7Y29uc3RydWN0b3J9IHByZXZpb3VzIGNvbnN0cnVjdG9yIGZvciBWZWMzXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdjNcbiAqL1xuZnVuY3Rpb24gc2V0RGVmYXVsdFR5cGUoY3Rvcikge1xuICBjb25zdCBvbGRUeXBlID0gVmVjVHlwZTtcbiAgVmVjVHlwZSA9IGN0b3I7XG4gIHJldHVybiBvbGRUeXBlO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB2ZWMzOyBtYXkgYmUgY2FsbGVkIHdpdGggeCwgeSwgeiB0byBzZXQgaW5pdGlhbCB2YWx1ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gW3hdIEluaXRpYWwgeCB2YWx1ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbeV0gSW5pdGlhbCB5IHZhbHVlLlxuICogQHBhcmFtIHtudW1iZXJ9IFt6XSBJbml0aWFsIHogdmFsdWUuXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC92My5WZWMzfSB0aGUgY3JlYXRlZCB2ZWN0b3JcbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC92M1xuICovXG5mdW5jdGlvbiBjcmVhdGUoeCwgeSwgeikge1xuICBjb25zdCBkc3QgPSBuZXcgVmVjVHlwZSgzKTtcbiAgaWYgKHgpIHtcbiAgICBkc3RbMF0gPSB4O1xuICB9XG4gIGlmICh5KSB7XG4gICAgZHN0WzFdID0geTtcbiAgfVxuICBpZiAoeikge1xuICAgIGRzdFsyXSA9IHo7XG4gIH1cbiAgcmV0dXJuIGRzdDtcbn1cblxuLyoqXG4gKiBBZGRzIHR3byB2ZWN0b3JzOyBhc3N1bWVzIGEgYW5kIGIgaGF2ZSB0aGUgc2FtZSBkaW1lbnNpb24uXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IGEgT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IGIgT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IFtkc3RdIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm4ge21vZHVsZTp0d2dsL3YzLlZlYzN9IEEgdmVjdG9yIHRoYSB0aXMgdGhlIHN1bSBvZiBhIGFuZCBiLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3YzXG4gKi9cbmZ1bmN0aW9uIGFkZChhLCBiLCBkc3QpIHtcbiAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDMpO1xuXG4gIGRzdFswXSA9IGFbMF0gKyBiWzBdO1xuICBkc3RbMV0gPSBhWzFdICsgYlsxXTtcbiAgZHN0WzJdID0gYVsyXSArIGJbMl07XG5cbiAgcmV0dXJuIGRzdDtcbn1cblxuLyoqXG4gKiBTdWJ0cmFjdHMgdHdvIHZlY3RvcnMuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IGEgT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IGIgT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IFtkc3RdIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm4ge21vZHVsZTp0d2dsL3YzLlZlYzN9IEEgdmVjdG9yIHRoYXQgaXMgdGhlIGRpZmZlcmVuY2Ugb2YgYSBhbmQgYi5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC92M1xuICovXG5mdW5jdGlvbiBzdWJ0cmFjdChhLCBiLCBkc3QpIHtcbiAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDMpO1xuXG4gIGRzdFswXSA9IGFbMF0gLSBiWzBdO1xuICBkc3RbMV0gPSBhWzFdIC0gYlsxXTtcbiAgZHN0WzJdID0gYVsyXSAtIGJbMl07XG5cbiAgcmV0dXJuIGRzdDtcbn1cblxuLyoqXG4gKiBQZXJmb3JtcyBsaW5lYXIgaW50ZXJwb2xhdGlvbiBvbiB0d28gdmVjdG9ycy5cbiAqIEdpdmVuIHZlY3RvcnMgYSBhbmQgYiBhbmQgaW50ZXJwb2xhdGlvbiBjb2VmZmljaWVudCB0LCByZXR1cm5zXG4gKiBhICsgdCAqIChiIC0gYSkuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IGEgT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IGIgT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0ge251bWJlcn0gdCBJbnRlcnBvbGF0aW9uIGNvZWZmaWNpZW50LlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSBbZHN0XSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC92My5WZWMzfSBUaGUgbGluZWFyIGludGVycG9sYXRlZCByZXN1bHQuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdjNcbiAqL1xuZnVuY3Rpb24gbGVycChhLCBiLCB0LCBkc3QpIHtcbiAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDMpO1xuXG4gIGRzdFswXSA9IGFbMF0gKyB0ICogKGJbMF0gLSBhWzBdKTtcbiAgZHN0WzFdID0gYVsxXSArIHQgKiAoYlsxXSAtIGFbMV0pO1xuICBkc3RbMl0gPSBhWzJdICsgdCAqIChiWzJdIC0gYVsyXSk7XG5cbiAgcmV0dXJuIGRzdDtcbn1cblxuLyoqXG4gKiBQZXJmb3JtcyBsaW5lYXIgaW50ZXJwb2xhdGlvbiBvbiB0d28gdmVjdG9ycy5cbiAqIEdpdmVuIHZlY3RvcnMgYSBhbmQgYiBhbmQgaW50ZXJwb2xhdGlvbiBjb2VmZmljaWVudCB2ZWN0b3IgdCwgcmV0dXJuc1xuICogYSArIHQgKiAoYiAtIGEpLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSBhIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSBiIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSB0IEludGVycG9sYXRpb24gY29lZmZpY2llbnRzIHZlY3Rvci5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvdjMuVmVjM30gW2RzdF0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wvdjMuVmVjM30gdGhlIGxpbmVhciBpbnRlcnBvbGF0ZWQgcmVzdWx0LlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3YzXG4gKi9cbmZ1bmN0aW9uIGxlcnBWKGEsIGIsIHQsIGRzdCkge1xuICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUoMyk7XG5cbiAgZHN0WzBdID0gYVswXSArIHRbMF0gKiAoYlswXSAtIGFbMF0pO1xuICBkc3RbMV0gPSBhWzFdICsgdFsxXSAqIChiWzFdIC0gYVsxXSk7XG4gIGRzdFsyXSA9IGFbMl0gKyB0WzJdICogKGJbMl0gLSBhWzJdKTtcblxuICByZXR1cm4gZHN0O1xufVxuXG4vKipcbiAqIFJldHVybiBtYXggdmFsdWVzIG9mIHR3byB2ZWN0b3JzLlxuICogR2l2ZW4gdmVjdG9ycyBhIGFuZCBiIHJldHVybnNcbiAqIFttYXgoYVswXSwgYlswXSksIG1heChhWzFdLCBiWzFdKSwgbWF4KGFbMl0sIGJbMl0pXS5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvdjMuVmVjM30gYSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvdjMuVmVjM30gYiBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvdjMuVmVjM30gW2RzdF0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wvdjMuVmVjM30gVGhlIG1heCBjb21wb25lbnRzIHZlY3Rvci5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC92M1xuICovXG5mdW5jdGlvbiBtYXgoYSwgYiwgZHN0KSB7XG4gIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSgzKTtcblxuICBkc3RbMF0gPSBNYXRoLm1heChhWzBdLCBiWzBdKTtcbiAgZHN0WzFdID0gTWF0aC5tYXgoYVsxXSwgYlsxXSk7XG4gIGRzdFsyXSA9IE1hdGgubWF4KGFbMl0sIGJbMl0pO1xuXG4gIHJldHVybiBkc3Q7XG59XG5cbi8qKlxuICogUmV0dXJuIG1pbiB2YWx1ZXMgb2YgdHdvIHZlY3RvcnMuXG4gKiBHaXZlbiB2ZWN0b3JzIGEgYW5kIGIgcmV0dXJuc1xuICogW21pbihhWzBdLCBiWzBdKSwgbWluKGFbMV0sIGJbMV0pLCBtaW4oYVsyXSwgYlsyXSldLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSBhIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSBiIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSBbZHN0XSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC92My5WZWMzfSBUaGUgbWluIGNvbXBvbmVudHMgdmVjdG9yLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3YzXG4gKi9cbmZ1bmN0aW9uIG1pbihhLCBiLCBkc3QpIHtcbiAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDMpO1xuXG4gIGRzdFswXSA9IE1hdGgubWluKGFbMF0sIGJbMF0pO1xuICBkc3RbMV0gPSBNYXRoLm1pbihhWzFdLCBiWzFdKTtcbiAgZHN0WzJdID0gTWF0aC5taW4oYVsyXSwgYlsyXSk7XG5cbiAgcmV0dXJuIGRzdDtcbn1cblxuLyoqXG4gKiBNdWx0aXBsaWVzIGEgdmVjdG9yIGJ5IGEgc2NhbGFyLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSB2IFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0ge251bWJlcn0gayBUaGUgc2NhbGFyLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSBbZHN0XSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC92My5WZWMzfSBUaGUgc2NhbGVkIHZlY3Rvci5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC92M1xuICovXG5mdW5jdGlvbiBtdWxTY2FsYXIodiwgaywgZHN0KSB7XG4gIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSgzKTtcblxuICBkc3RbMF0gPSB2WzBdICogaztcbiAgZHN0WzFdID0gdlsxXSAqIGs7XG4gIGRzdFsyXSA9IHZbMl0gKiBrO1xuXG4gIHJldHVybiBkc3Q7XG59XG5cbi8qKlxuICogRGl2aWRlcyBhIHZlY3RvciBieSBhIHNjYWxhci5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvdjMuVmVjM30gdiBUaGUgdmVjdG9yLlxuICogQHBhcmFtIHtudW1iZXJ9IGsgVGhlIHNjYWxhci5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvdjMuVmVjM30gW2RzdF0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wvdjMuVmVjM30gVGhlIHNjYWxlZCB2ZWN0b3IuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdjNcbiAqL1xuZnVuY3Rpb24gZGl2U2NhbGFyKHYsIGssIGRzdCkge1xuICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUoMyk7XG5cbiAgZHN0WzBdID0gdlswXSAvIGs7XG4gIGRzdFsxXSA9IHZbMV0gLyBrO1xuICBkc3RbMl0gPSB2WzJdIC8gaztcblxuICByZXR1cm4gZHN0O1xufVxuXG4vKipcbiAqIENvbXB1dGVzIHRoZSBjcm9zcyBwcm9kdWN0IG9mIHR3byB2ZWN0b3JzOyBhc3N1bWVzIGJvdGggdmVjdG9ycyBoYXZlXG4gKiB0aHJlZSBlbnRyaWVzLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSBhIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSBiIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSBbZHN0XSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC92My5WZWMzfSBUaGUgdmVjdG9yIG9mIGEgY3Jvc3MgYi5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC92M1xuICovXG5mdW5jdGlvbiBjcm9zcyhhLCBiLCBkc3QpIHtcbiAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDMpO1xuXG4gIGNvbnN0IHQxID0gYVsyXSAqIGJbMF0gLSBhWzBdICogYlsyXTtcbiAgY29uc3QgdDIgPSBhWzBdICogYlsxXSAtIGFbMV0gKiBiWzBdO1xuICBkc3RbMF0gPSBhWzFdICogYlsyXSAtIGFbMl0gKiBiWzFdO1xuICBkc3RbMV0gPSB0MTtcbiAgZHN0WzJdID0gdDI7XG5cbiAgcmV0dXJuIGRzdDtcbn1cblxuLyoqXG4gKiBDb21wdXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHZlY3RvcnM7IGFzc3VtZXMgYm90aCB2ZWN0b3JzIGhhdmVcbiAqIHRocmVlIGVudHJpZXMuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IGEgT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IGIgT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IGRvdCBwcm9kdWN0XG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdjNcbiAqL1xuZnVuY3Rpb24gZG90KGEsIGIpIHtcbiAgcmV0dXJuIChhWzBdICogYlswXSkgKyAoYVsxXSAqIGJbMV0pICsgKGFbMl0gKiBiWzJdKTtcbn1cblxuLyoqXG4gKiBDb21wdXRlcyB0aGUgbGVuZ3RoIG9mIHZlY3RvclxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSB2IHZlY3Rvci5cbiAqIEByZXR1cm4ge251bWJlcn0gbGVuZ3RoIG9mIHZlY3Rvci5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC92M1xuICovXG5mdW5jdGlvbiBsZW5ndGgkMSh2KSB7XG4gIHJldHVybiBNYXRoLnNxcnQodlswXSAqIHZbMF0gKyB2WzFdICogdlsxXSArIHZbMl0gKiB2WzJdKTtcbn1cblxuLyoqXG4gKiBDb21wdXRlcyB0aGUgc3F1YXJlIG9mIHRoZSBsZW5ndGggb2YgdmVjdG9yXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IHYgdmVjdG9yLlxuICogQHJldHVybiB7bnVtYmVyfSBzcXVhcmUgb2YgdGhlIGxlbmd0aCBvZiB2ZWN0b3IuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdjNcbiAqL1xuZnVuY3Rpb24gbGVuZ3RoU3Eodikge1xuICByZXR1cm4gdlswXSAqIHZbMF0gKyB2WzFdICogdlsxXSArIHZbMl0gKiB2WzJdO1xufVxuXG4vKipcbiAqIENvbXB1dGVzIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIDIgcG9pbnRzXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IGEgdmVjdG9yLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSBiIHZlY3Rvci5cbiAqIEByZXR1cm4ge251bWJlcn0gZGlzdGFuY2UgYmV0d2VlbiBhIGFuZCBiXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdjNcbiAqL1xuZnVuY3Rpb24gZGlzdGFuY2UoYSwgYikge1xuICBjb25zdCBkeCA9IGFbMF0gLSBiWzBdO1xuICBjb25zdCBkeSA9IGFbMV0gLSBiWzFdO1xuICBjb25zdCBkeiA9IGFbMl0gLSBiWzJdO1xuICByZXR1cm4gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5ICsgZHogKiBkeik7XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgdGhlIHNxdWFyZSBvZiB0aGUgZGlzdGFuY2UgYmV0d2VlbiAyIHBvaW50c1xuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSBhIHZlY3Rvci5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvdjMuVmVjM30gYiB2ZWN0b3IuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IHNxdWFyZSBvZiB0aGUgZGlzdGFuY2UgYmV0d2VlbiBhIGFuZCBiXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdjNcbiAqL1xuZnVuY3Rpb24gZGlzdGFuY2VTcShhLCBiKSB7XG4gIGNvbnN0IGR4ID0gYVswXSAtIGJbMF07XG4gIGNvbnN0IGR5ID0gYVsxXSAtIGJbMV07XG4gIGNvbnN0IGR6ID0gYVsyXSAtIGJbMl07XG4gIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeSArIGR6ICogZHo7XG59XG5cbi8qKlxuICogRGl2aWRlcyBhIHZlY3RvciBieSBpdHMgRXVjbGlkZWFuIGxlbmd0aCBhbmQgcmV0dXJucyB0aGUgcXVvdGllbnQuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IGEgVGhlIHZlY3Rvci5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvdjMuVmVjM30gW2RzdF0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wvdjMuVmVjM30gVGhlIG5vcm1hbGl6ZWQgdmVjdG9yLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3YzXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZShhLCBkc3QpIHtcbiAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDMpO1xuXG4gIGNvbnN0IGxlblNxID0gYVswXSAqIGFbMF0gKyBhWzFdICogYVsxXSArIGFbMl0gKiBhWzJdO1xuICBjb25zdCBsZW4gPSBNYXRoLnNxcnQobGVuU3EpO1xuICBpZiAobGVuID4gMC4wMDAwMSkge1xuICAgIGRzdFswXSA9IGFbMF0gLyBsZW47XG4gICAgZHN0WzFdID0gYVsxXSAvIGxlbjtcbiAgICBkc3RbMl0gPSBhWzJdIC8gbGVuO1xuICB9IGVsc2Uge1xuICAgIGRzdFswXSA9IDA7XG4gICAgZHN0WzFdID0gMDtcbiAgICBkc3RbMl0gPSAwO1xuICB9XG5cbiAgcmV0dXJuIGRzdDtcbn1cblxuLyoqXG4gKiBOZWdhdGVzIGEgdmVjdG9yLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSB2IFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IFtkc3RdIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm4ge21vZHVsZTp0d2dsL3YzLlZlYzN9IC12LlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3YzXG4gKi9cbmZ1bmN0aW9uIG5lZ2F0ZSh2LCBkc3QpIHtcbiAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDMpO1xuXG4gIGRzdFswXSA9IC12WzBdO1xuICBkc3RbMV0gPSAtdlsxXTtcbiAgZHN0WzJdID0gLXZbMl07XG5cbiAgcmV0dXJuIGRzdDtcbn1cblxuLyoqXG4gKiBDb3BpZXMgYSB2ZWN0b3IuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IHYgVGhlIHZlY3Rvci5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvdjMuVmVjM30gW2RzdF0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wvdjMuVmVjM30gQSBjb3B5IG9mIHYuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdjNcbiAqL1xuZnVuY3Rpb24gY29weSh2LCBkc3QpIHtcbiAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDMpO1xuXG4gIGRzdFswXSA9IHZbMF07XG4gIGRzdFsxXSA9IHZbMV07XG4gIGRzdFsyXSA9IHZbMl07XG5cbiAgcmV0dXJuIGRzdDtcbn1cblxuLyoqXG4gKiBNdWx0aXBsaWVzIGEgdmVjdG9yIGJ5IGFub3RoZXIgdmVjdG9yIChjb21wb25lbnQtd2lzZSk7IGFzc3VtZXMgYSBhbmRcbiAqIGIgaGF2ZSB0aGUgc2FtZSBsZW5ndGguXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IGEgT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IGIgT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IFtkc3RdIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm4ge21vZHVsZTp0d2dsL3YzLlZlYzN9IFRoZSB2ZWN0b3Igb2YgcHJvZHVjdHMgb2YgZW50cmllcyBvZiBhIGFuZFxuICogICAgIGIuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdjNcbiAqL1xuZnVuY3Rpb24gbXVsdGlwbHkoYSwgYiwgZHN0KSB7XG4gIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSgzKTtcblxuICBkc3RbMF0gPSBhWzBdICogYlswXTtcbiAgZHN0WzFdID0gYVsxXSAqIGJbMV07XG4gIGRzdFsyXSA9IGFbMl0gKiBiWzJdO1xuXG4gIHJldHVybiBkc3Q7XG59XG5cbi8qKlxuICogRGl2aWRlcyBhIHZlY3RvciBieSBhbm90aGVyIHZlY3RvciAoY29tcG9uZW50LXdpc2UpOyBhc3N1bWVzIGEgYW5kXG4gKiBiIGhhdmUgdGhlIHNhbWUgbGVuZ3RoLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSBhIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSBiIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSBbZHN0XSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC92My5WZWMzfSBUaGUgdmVjdG9yIG9mIHF1b3RpZW50cyBvZiBlbnRyaWVzIG9mIGEgYW5kXG4gKiAgICAgYi5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC92M1xuICovXG5mdW5jdGlvbiBkaXZpZGUoYSwgYiwgZHN0KSB7XG4gIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSgzKTtcblxuICBkc3RbMF0gPSBhWzBdIC8gYlswXTtcbiAgZHN0WzFdID0gYVsxXSAvIGJbMV07XG4gIGRzdFsyXSA9IGFbMl0gLyBiWzJdO1xuXG4gIHJldHVybiBkc3Q7XG59XG5cbnZhciB2MyA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgX19wcm90b19fOiBudWxsLFxuICBhZGQ6IGFkZCxcbiAgY29weTogY29weSxcbiAgY3JlYXRlOiBjcmVhdGUsXG4gIGNyb3NzOiBjcm9zcyxcbiAgZGlzdGFuY2U6IGRpc3RhbmNlLFxuICBkaXN0YW5jZVNxOiBkaXN0YW5jZVNxLFxuICBkaXZpZGU6IGRpdmlkZSxcbiAgZGl2U2NhbGFyOiBkaXZTY2FsYXIsXG4gIGRvdDogZG90LFxuICBsZXJwOiBsZXJwLFxuICBsZXJwVjogbGVycFYsXG4gIGxlbmd0aDogbGVuZ3RoJDEsXG4gIGxlbmd0aFNxOiBsZW5ndGhTcSxcbiAgbWF4OiBtYXgsXG4gIG1pbjogbWluLFxuICBtdWxTY2FsYXI6IG11bFNjYWxhcixcbiAgbXVsdGlwbHk6IG11bHRpcGx5LFxuICBuZWdhdGU6IG5lZ2F0ZSxcbiAgbm9ybWFsaXplOiBub3JtYWxpemUsXG4gIHNldERlZmF1bHRUeXBlOiBzZXREZWZhdWx0VHlwZSxcbiAgc3VidHJhY3Q6IHN1YnRyYWN0XG59KTtcblxuLypcbiAqIENvcHlyaWdodCAyMDE5IEdyZWdnIFRhdmFyZXNcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLFxuICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvblxuICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsXG4gKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcbiAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMXG4gKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbiAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVJcbiAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG4vKipcbiAqIDR4NCBNYXRyaXggbWF0aCBtYXRoIGZ1bmN0aW9ucy5cbiAqXG4gKiBBbG1vc3QgYWxsIGZ1bmN0aW9ucyB0YWtlIGFuIG9wdGlvbmFsIGBkc3RgIGFyZ3VtZW50LiBJZiBpdCBpcyBub3QgcGFzc2VkIGluIHRoZVxuICogZnVuY3Rpb25zIHdpbGwgY3JlYXRlIGEgbmV3IG1hdHJpeC4gSW4gb3RoZXIgd29yZHMgeW91IGNhbiBkbyB0aGlzXG4gKlxuICogICAgIGNvbnN0IG1hdCA9IG00LnRyYW5zbGF0aW9uKFsxLCAyLCAzXSk7ICAvLyBDcmVhdGVzIGEgbmV3IHRyYW5zbGF0aW9uIG1hdHJpeFxuICpcbiAqIG9yXG4gKlxuICogICAgIGNvbnN0IG1hdCA9IG00LmNyZWF0ZSgpO1xuICogICAgIG00LnRyYW5zbGF0aW9uKFsxLCAyLCAzXSwgbWF0KTsgIC8vIFB1dHMgdHJhbnNsYXRpb24gbWF0cml4IGluIG1hdC5cbiAqXG4gKiBUaGUgZmlyc3Qgc3R5bGUgaXMgb2Z0ZW4gZWFzaWVyIGJ1dCBkZXBlbmRpbmcgb24gd2hlcmUgaXQncyB1c2VkIGl0IGdlbmVyYXRlcyBnYXJiYWdlIHdoZXJlXG4gKiBhcyB0aGVyZSBpcyBhbG1vc3QgbmV2ZXIgYWxsb2NhdGlvbiB3aXRoIHRoZSBzZWNvbmQgc3R5bGUuXG4gKlxuICogSXQgaXMgYWx3YXlzIHNhdmUgdG8gcGFzcyBhbnkgbWF0cml4IGFzIHRoZSBkZXN0aW5hdGlvbi4gU28gZm9yIGV4YW1wbGVcbiAqXG4gKiAgICAgY29uc3QgbWF0ID0gbTQuaWRlbnRpdHkoKTtcbiAqICAgICBjb25zdCB0cmFucyA9IG00LnRyYW5zbGF0aW9uKFsxLCAyLCAzXSk7XG4gKiAgICAgbTQubXVsdGlwbHkobWF0LCB0cmFucywgbWF0KTsgIC8vIE11bHRpcGxpZXMgbWF0ICogdHJhbnMgYW5kIHB1dHMgcmVzdWx0IGluIG1hdC5cbiAqXG4gKiBAbW9kdWxlIHR3Z2wvbTRcbiAqL1xubGV0IE1hdFR5cGUgPSBGbG9hdDMyQXJyYXk7XG5cbi8qKlxuICogQSBKYXZhU2NyaXB0IGFycmF5IHdpdGggMTYgdmFsdWVzIG9yIGEgRmxvYXQzMkFycmF5IHdpdGggMTYgdmFsdWVzLlxuICogV2hlbiBjcmVhdGVkIGJ5IHRoZSBsaWJyYXJ5IHdpbGwgY3JlYXRlIHRoZSBkZWZhdWx0IHR5cGUgd2hpY2ggaXMgYEZsb2F0MzJBcnJheWBcbiAqIGJ1dCBjYW4gYmUgc2V0IGJ5IGNhbGxpbmcge0BsaW5rIG1vZHVsZTp0d2dsL200LnNldERlZmF1bHRUeXBlfS5cbiAqIEB0eXBlZGVmIHsobnVtYmVyW118RmxvYXQzMkFycmF5KX0gTWF0NFxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL200XG4gKi9cblxuLyoqXG4gKiBTZXRzIHRoZSB0eXBlIHRoaXMgbGlicmFyeSBjcmVhdGVzIGZvciBhIE1hdDRcbiAqIEBwYXJhbSB7Y29uc3RydWN0b3J9IGN0b3IgdGhlIGNvbnN0cnVjdG9yIGZvciB0aGUgdHlwZS4gRWl0aGVyIGBGbG9hdDMyQXJyYXlgIG9yIGBBcnJheWBcbiAqIEByZXR1cm4ge2NvbnN0cnVjdG9yfSBwcmV2aW91cyBjb25zdHJ1Y3RvciBmb3IgTWF0NFxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL200XG4gKi9cbmZ1bmN0aW9uIHNldERlZmF1bHRUeXBlJDEoY3Rvcikge1xuICBjb25zdCBvbGRUeXBlID0gTWF0VHlwZTtcbiAgTWF0VHlwZSA9IGN0b3I7XG4gIHJldHVybiBvbGRUeXBlO1xufVxuXG4vKipcbiAqIE5lZ2F0ZXMgYSBtYXRyaXguXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL200Lk1hdDR9IG0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gW2RzdF0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gLW0uXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvbTRcbiAqL1xuZnVuY3Rpb24gbmVnYXRlJDEobSwgZHN0KSB7XG4gIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG5cbiAgZHN0WyAwXSA9IC1tWyAwXTtcbiAgZHN0WyAxXSA9IC1tWyAxXTtcbiAgZHN0WyAyXSA9IC1tWyAyXTtcbiAgZHN0WyAzXSA9IC1tWyAzXTtcbiAgZHN0WyA0XSA9IC1tWyA0XTtcbiAgZHN0WyA1XSA9IC1tWyA1XTtcbiAgZHN0WyA2XSA9IC1tWyA2XTtcbiAgZHN0WyA3XSA9IC1tWyA3XTtcbiAgZHN0WyA4XSA9IC1tWyA4XTtcbiAgZHN0WyA5XSA9IC1tWyA5XTtcbiAgZHN0WzEwXSA9IC1tWzEwXTtcbiAgZHN0WzExXSA9IC1tWzExXTtcbiAgZHN0WzEyXSA9IC1tWzEyXTtcbiAgZHN0WzEzXSA9IC1tWzEzXTtcbiAgZHN0WzE0XSA9IC1tWzE0XTtcbiAgZHN0WzE1XSA9IC1tWzE1XTtcblxuICByZXR1cm4gZHN0O1xufVxuXG4vKipcbiAqIENvcGllcyBhIG1hdHJpeC5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gbSBUaGUgbWF0cml4LlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC9tNC5NYXQ0fSBbZHN0XSBUaGUgbWF0cml4LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gQSBjb3B5IG9mIG0uXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvbTRcbiAqL1xuZnVuY3Rpb24gY29weSQxKG0sIGRzdCkge1xuICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuXG4gIGRzdFsgMF0gPSBtWyAwXTtcbiAgZHN0WyAxXSA9IG1bIDFdO1xuICBkc3RbIDJdID0gbVsgMl07XG4gIGRzdFsgM10gPSBtWyAzXTtcbiAgZHN0WyA0XSA9IG1bIDRdO1xuICBkc3RbIDVdID0gbVsgNV07XG4gIGRzdFsgNl0gPSBtWyA2XTtcbiAgZHN0WyA3XSA9IG1bIDddO1xuICBkc3RbIDhdID0gbVsgOF07XG4gIGRzdFsgOV0gPSBtWyA5XTtcbiAgZHN0WzEwXSA9IG1bMTBdO1xuICBkc3RbMTFdID0gbVsxMV07XG4gIGRzdFsxMl0gPSBtWzEyXTtcbiAgZHN0WzEzXSA9IG1bMTNdO1xuICBkc3RbMTRdID0gbVsxNF07XG4gIGRzdFsxNV0gPSBtWzE1XTtcblxuICByZXR1cm4gZHN0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gbi1ieS1uIGlkZW50aXR5IG1hdHJpeC5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL200Lk1hdDR9IFtkc3RdIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm4ge21vZHVsZTp0d2dsL200Lk1hdDR9IEFuIG4tYnktbiBpZGVudGl0eSBtYXRyaXguXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvbTRcbiAqL1xuZnVuY3Rpb24gaWRlbnRpdHkoZHN0KSB7XG4gIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG5cbiAgZHN0WyAwXSA9IDE7XG4gIGRzdFsgMV0gPSAwO1xuICBkc3RbIDJdID0gMDtcbiAgZHN0WyAzXSA9IDA7XG4gIGRzdFsgNF0gPSAwO1xuICBkc3RbIDVdID0gMTtcbiAgZHN0WyA2XSA9IDA7XG4gIGRzdFsgN10gPSAwO1xuICBkc3RbIDhdID0gMDtcbiAgZHN0WyA5XSA9IDA7XG4gIGRzdFsxMF0gPSAxO1xuICBkc3RbMTFdID0gMDtcbiAgZHN0WzEyXSA9IDA7XG4gIGRzdFsxM10gPSAwO1xuICBkc3RbMTRdID0gMDtcbiAgZHN0WzE1XSA9IDE7XG5cbiAgcmV0dXJuIGRzdDtcbn1cblxuLyoqXG4gKiBUYWtlcyB0aGUgdHJhbnNwb3NlIG9mIGEgbWF0cml4LlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC9tNC5NYXQ0fSBtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL200Lk1hdDR9IFtkc3RdIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm4ge21vZHVsZTp0d2dsL200Lk1hdDR9IFRoZSB0cmFuc3Bvc2Ugb2YgbS5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9tNFxuICovXG4gZnVuY3Rpb24gdHJhbnNwb3NlKG0sIGRzdCkge1xuICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuICBpZiAoZHN0ID09PSBtKSB7XG4gICAgbGV0IHQ7XG5cbiAgICB0ID0gbVsxXTtcbiAgICBtWzFdID0gbVs0XTtcbiAgICBtWzRdID0gdDtcblxuICAgIHQgPSBtWzJdO1xuICAgIG1bMl0gPSBtWzhdO1xuICAgIG1bOF0gPSB0O1xuXG4gICAgdCA9IG1bM107XG4gICAgbVszXSA9IG1bMTJdO1xuICAgIG1bMTJdID0gdDtcblxuICAgIHQgPSBtWzZdO1xuICAgIG1bNl0gPSBtWzldO1xuICAgIG1bOV0gPSB0O1xuXG4gICAgdCA9IG1bN107XG4gICAgbVs3XSA9IG1bMTNdO1xuICAgIG1bMTNdID0gdDtcblxuICAgIHQgPSBtWzExXTtcbiAgICBtWzExXSA9IG1bMTRdO1xuICAgIG1bMTRdID0gdDtcbiAgICByZXR1cm4gZHN0O1xuICB9XG5cbiAgY29uc3QgbTAwID0gbVswICogNCArIDBdO1xuICBjb25zdCBtMDEgPSBtWzAgKiA0ICsgMV07XG4gIGNvbnN0IG0wMiA9IG1bMCAqIDQgKyAyXTtcbiAgY29uc3QgbTAzID0gbVswICogNCArIDNdO1xuICBjb25zdCBtMTAgPSBtWzEgKiA0ICsgMF07XG4gIGNvbnN0IG0xMSA9IG1bMSAqIDQgKyAxXTtcbiAgY29uc3QgbTEyID0gbVsxICogNCArIDJdO1xuICBjb25zdCBtMTMgPSBtWzEgKiA0ICsgM107XG4gIGNvbnN0IG0yMCA9IG1bMiAqIDQgKyAwXTtcbiAgY29uc3QgbTIxID0gbVsyICogNCArIDFdO1xuICBjb25zdCBtMjIgPSBtWzIgKiA0ICsgMl07XG4gIGNvbnN0IG0yMyA9IG1bMiAqIDQgKyAzXTtcbiAgY29uc3QgbTMwID0gbVszICogNCArIDBdO1xuICBjb25zdCBtMzEgPSBtWzMgKiA0ICsgMV07XG4gIGNvbnN0IG0zMiA9IG1bMyAqIDQgKyAyXTtcbiAgY29uc3QgbTMzID0gbVszICogNCArIDNdO1xuXG4gIGRzdFsgMF0gPSBtMDA7XG4gIGRzdFsgMV0gPSBtMTA7XG4gIGRzdFsgMl0gPSBtMjA7XG4gIGRzdFsgM10gPSBtMzA7XG4gIGRzdFsgNF0gPSBtMDE7XG4gIGRzdFsgNV0gPSBtMTE7XG4gIGRzdFsgNl0gPSBtMjE7XG4gIGRzdFsgN10gPSBtMzE7XG4gIGRzdFsgOF0gPSBtMDI7XG4gIGRzdFsgOV0gPSBtMTI7XG4gIGRzdFsxMF0gPSBtMjI7XG4gIGRzdFsxMV0gPSBtMzI7XG4gIGRzdFsxMl0gPSBtMDM7XG4gIGRzdFsxM10gPSBtMTM7XG4gIGRzdFsxNF0gPSBtMjM7XG4gIGRzdFsxNV0gPSBtMzM7XG5cbiAgcmV0dXJuIGRzdDtcbn1cblxuLyoqXG4gKiBDb21wdXRlcyB0aGUgaW52ZXJzZSBvZiBhIDQtYnktNCBtYXRyaXguXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL200Lk1hdDR9IG0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gW2RzdF0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gVGhlIGludmVyc2Ugb2YgbS5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9tNFxuICovXG5mdW5jdGlvbiBpbnZlcnNlKG0sIGRzdCkge1xuICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuXG4gIGNvbnN0IG0wMCA9IG1bMCAqIDQgKyAwXTtcbiAgY29uc3QgbTAxID0gbVswICogNCArIDFdO1xuICBjb25zdCBtMDIgPSBtWzAgKiA0ICsgMl07XG4gIGNvbnN0IG0wMyA9IG1bMCAqIDQgKyAzXTtcbiAgY29uc3QgbTEwID0gbVsxICogNCArIDBdO1xuICBjb25zdCBtMTEgPSBtWzEgKiA0ICsgMV07XG4gIGNvbnN0IG0xMiA9IG1bMSAqIDQgKyAyXTtcbiAgY29uc3QgbTEzID0gbVsxICogNCArIDNdO1xuICBjb25zdCBtMjAgPSBtWzIgKiA0ICsgMF07XG4gIGNvbnN0IG0yMSA9IG1bMiAqIDQgKyAxXTtcbiAgY29uc3QgbTIyID0gbVsyICogNCArIDJdO1xuICBjb25zdCBtMjMgPSBtWzIgKiA0ICsgM107XG4gIGNvbnN0IG0zMCA9IG1bMyAqIDQgKyAwXTtcbiAgY29uc3QgbTMxID0gbVszICogNCArIDFdO1xuICBjb25zdCBtMzIgPSBtWzMgKiA0ICsgMl07XG4gIGNvbnN0IG0zMyA9IG1bMyAqIDQgKyAzXTtcbiAgY29uc3QgdG1wXzAgID0gbTIyICogbTMzO1xuICBjb25zdCB0bXBfMSAgPSBtMzIgKiBtMjM7XG4gIGNvbnN0IHRtcF8yICA9IG0xMiAqIG0zMztcbiAgY29uc3QgdG1wXzMgID0gbTMyICogbTEzO1xuICBjb25zdCB0bXBfNCAgPSBtMTIgKiBtMjM7XG4gIGNvbnN0IHRtcF81ICA9IG0yMiAqIG0xMztcbiAgY29uc3QgdG1wXzYgID0gbTAyICogbTMzO1xuICBjb25zdCB0bXBfNyAgPSBtMzIgKiBtMDM7XG4gIGNvbnN0IHRtcF84ICA9IG0wMiAqIG0yMztcbiAgY29uc3QgdG1wXzkgID0gbTIyICogbTAzO1xuICBjb25zdCB0bXBfMTAgPSBtMDIgKiBtMTM7XG4gIGNvbnN0IHRtcF8xMSA9IG0xMiAqIG0wMztcbiAgY29uc3QgdG1wXzEyID0gbTIwICogbTMxO1xuICBjb25zdCB0bXBfMTMgPSBtMzAgKiBtMjE7XG4gIGNvbnN0IHRtcF8xNCA9IG0xMCAqIG0zMTtcbiAgY29uc3QgdG1wXzE1ID0gbTMwICogbTExO1xuICBjb25zdCB0bXBfMTYgPSBtMTAgKiBtMjE7XG4gIGNvbnN0IHRtcF8xNyA9IG0yMCAqIG0xMTtcbiAgY29uc3QgdG1wXzE4ID0gbTAwICogbTMxO1xuICBjb25zdCB0bXBfMTkgPSBtMzAgKiBtMDE7XG4gIGNvbnN0IHRtcF8yMCA9IG0wMCAqIG0yMTtcbiAgY29uc3QgdG1wXzIxID0gbTIwICogbTAxO1xuICBjb25zdCB0bXBfMjIgPSBtMDAgKiBtMTE7XG4gIGNvbnN0IHRtcF8yMyA9IG0xMCAqIG0wMTtcblxuICBjb25zdCB0MCA9ICh0bXBfMCAqIG0xMSArIHRtcF8zICogbTIxICsgdG1wXzQgKiBtMzEpIC1cbiAgICAgICh0bXBfMSAqIG0xMSArIHRtcF8yICogbTIxICsgdG1wXzUgKiBtMzEpO1xuICBjb25zdCB0MSA9ICh0bXBfMSAqIG0wMSArIHRtcF82ICogbTIxICsgdG1wXzkgKiBtMzEpIC1cbiAgICAgICh0bXBfMCAqIG0wMSArIHRtcF83ICogbTIxICsgdG1wXzggKiBtMzEpO1xuICBjb25zdCB0MiA9ICh0bXBfMiAqIG0wMSArIHRtcF83ICogbTExICsgdG1wXzEwICogbTMxKSAtXG4gICAgICAodG1wXzMgKiBtMDEgKyB0bXBfNiAqIG0xMSArIHRtcF8xMSAqIG0zMSk7XG4gIGNvbnN0IHQzID0gKHRtcF81ICogbTAxICsgdG1wXzggKiBtMTEgKyB0bXBfMTEgKiBtMjEpIC1cbiAgICAgICh0bXBfNCAqIG0wMSArIHRtcF85ICogbTExICsgdG1wXzEwICogbTIxKTtcblxuICBjb25zdCBkID0gMS4wIC8gKG0wMCAqIHQwICsgbTEwICogdDEgKyBtMjAgKiB0MiArIG0zMCAqIHQzKTtcblxuICBkc3RbIDBdID0gZCAqIHQwO1xuICBkc3RbIDFdID0gZCAqIHQxO1xuICBkc3RbIDJdID0gZCAqIHQyO1xuICBkc3RbIDNdID0gZCAqIHQzO1xuICBkc3RbIDRdID0gZCAqICgodG1wXzEgKiBtMTAgKyB0bXBfMiAqIG0yMCArIHRtcF81ICogbTMwKSAtXG4gICAgICAgICAgKHRtcF8wICogbTEwICsgdG1wXzMgKiBtMjAgKyB0bXBfNCAqIG0zMCkpO1xuICBkc3RbIDVdID0gZCAqICgodG1wXzAgKiBtMDAgKyB0bXBfNyAqIG0yMCArIHRtcF84ICogbTMwKSAtXG4gICAgICAgICAgKHRtcF8xICogbTAwICsgdG1wXzYgKiBtMjAgKyB0bXBfOSAqIG0zMCkpO1xuICBkc3RbIDZdID0gZCAqICgodG1wXzMgKiBtMDAgKyB0bXBfNiAqIG0xMCArIHRtcF8xMSAqIG0zMCkgLVxuICAgICAgICAgICh0bXBfMiAqIG0wMCArIHRtcF83ICogbTEwICsgdG1wXzEwICogbTMwKSk7XG4gIGRzdFsgN10gPSBkICogKCh0bXBfNCAqIG0wMCArIHRtcF85ICogbTEwICsgdG1wXzEwICogbTIwKSAtXG4gICAgICAgICAgKHRtcF81ICogbTAwICsgdG1wXzggKiBtMTAgKyB0bXBfMTEgKiBtMjApKTtcbiAgZHN0WyA4XSA9IGQgKiAoKHRtcF8xMiAqIG0xMyArIHRtcF8xNSAqIG0yMyArIHRtcF8xNiAqIG0zMykgLVxuICAgICAgICAgICh0bXBfMTMgKiBtMTMgKyB0bXBfMTQgKiBtMjMgKyB0bXBfMTcgKiBtMzMpKTtcbiAgZHN0WyA5XSA9IGQgKiAoKHRtcF8xMyAqIG0wMyArIHRtcF8xOCAqIG0yMyArIHRtcF8yMSAqIG0zMykgLVxuICAgICAgICAgICh0bXBfMTIgKiBtMDMgKyB0bXBfMTkgKiBtMjMgKyB0bXBfMjAgKiBtMzMpKTtcbiAgZHN0WzEwXSA9IGQgKiAoKHRtcF8xNCAqIG0wMyArIHRtcF8xOSAqIG0xMyArIHRtcF8yMiAqIG0zMykgLVxuICAgICAgICAgICh0bXBfMTUgKiBtMDMgKyB0bXBfMTggKiBtMTMgKyB0bXBfMjMgKiBtMzMpKTtcbiAgZHN0WzExXSA9IGQgKiAoKHRtcF8xNyAqIG0wMyArIHRtcF8yMCAqIG0xMyArIHRtcF8yMyAqIG0yMykgLVxuICAgICAgICAgICh0bXBfMTYgKiBtMDMgKyB0bXBfMjEgKiBtMTMgKyB0bXBfMjIgKiBtMjMpKTtcbiAgZHN0WzEyXSA9IGQgKiAoKHRtcF8xNCAqIG0yMiArIHRtcF8xNyAqIG0zMiArIHRtcF8xMyAqIG0xMikgLVxuICAgICAgICAgICh0bXBfMTYgKiBtMzIgKyB0bXBfMTIgKiBtMTIgKyB0bXBfMTUgKiBtMjIpKTtcbiAgZHN0WzEzXSA9IGQgKiAoKHRtcF8yMCAqIG0zMiArIHRtcF8xMiAqIG0wMiArIHRtcF8xOSAqIG0yMikgLVxuICAgICAgICAgICh0bXBfMTggKiBtMjIgKyB0bXBfMjEgKiBtMzIgKyB0bXBfMTMgKiBtMDIpKTtcbiAgZHN0WzE0XSA9IGQgKiAoKHRtcF8xOCAqIG0xMiArIHRtcF8yMyAqIG0zMiArIHRtcF8xNSAqIG0wMikgLVxuICAgICAgICAgICh0bXBfMjIgKiBtMzIgKyB0bXBfMTQgKiBtMDIgKyB0bXBfMTkgKiBtMTIpKTtcbiAgZHN0WzE1XSA9IGQgKiAoKHRtcF8yMiAqIG0yMiArIHRtcF8xNiAqIG0wMiArIHRtcF8yMSAqIG0xMikgLVxuICAgICAgICAgICh0bXBfMjAgKiBtMTIgKyB0bXBfMjMgKiBtMjIgKyB0bXBfMTcgKiBtMDIpKTtcblxuICByZXR1cm4gZHN0O1xufVxuXG4vKipcbiAqIE11bHRpcGxpZXMgdHdvIDQtYnktNCBtYXRyaWNlcyB3aXRoIGEgb24gdGhlIGxlZnQgYW5kIGIgb24gdGhlIHJpZ2h0XG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL200Lk1hdDR9IGEgVGhlIG1hdHJpeCBvbiB0aGUgbGVmdC5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gYiBUaGUgbWF0cml4IG9uIHRoZSByaWdodC5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gW2RzdF0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gVGhlIG1hdHJpeCBwcm9kdWN0IG9mIGEgYW5kIGIuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvbTRcbiAqL1xuZnVuY3Rpb24gbXVsdGlwbHkkMShhLCBiLCBkc3QpIHtcbiAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcblxuICBjb25zdCBhMDAgPSBhWzBdO1xuICBjb25zdCBhMDEgPSBhWzFdO1xuICBjb25zdCBhMDIgPSBhWzJdO1xuICBjb25zdCBhMDMgPSBhWzNdO1xuICBjb25zdCBhMTAgPSBhWyA0ICsgMF07XG4gIGNvbnN0IGExMSA9IGFbIDQgKyAxXTtcbiAgY29uc3QgYTEyID0gYVsgNCArIDJdO1xuICBjb25zdCBhMTMgPSBhWyA0ICsgM107XG4gIGNvbnN0IGEyMCA9IGFbIDggKyAwXTtcbiAgY29uc3QgYTIxID0gYVsgOCArIDFdO1xuICBjb25zdCBhMjIgPSBhWyA4ICsgMl07XG4gIGNvbnN0IGEyMyA9IGFbIDggKyAzXTtcbiAgY29uc3QgYTMwID0gYVsxMiArIDBdO1xuICBjb25zdCBhMzEgPSBhWzEyICsgMV07XG4gIGNvbnN0IGEzMiA9IGFbMTIgKyAyXTtcbiAgY29uc3QgYTMzID0gYVsxMiArIDNdO1xuICBjb25zdCBiMDAgPSBiWzBdO1xuICBjb25zdCBiMDEgPSBiWzFdO1xuICBjb25zdCBiMDIgPSBiWzJdO1xuICBjb25zdCBiMDMgPSBiWzNdO1xuICBjb25zdCBiMTAgPSBiWyA0ICsgMF07XG4gIGNvbnN0IGIxMSA9IGJbIDQgKyAxXTtcbiAgY29uc3QgYjEyID0gYlsgNCArIDJdO1xuICBjb25zdCBiMTMgPSBiWyA0ICsgM107XG4gIGNvbnN0IGIyMCA9IGJbIDggKyAwXTtcbiAgY29uc3QgYjIxID0gYlsgOCArIDFdO1xuICBjb25zdCBiMjIgPSBiWyA4ICsgMl07XG4gIGNvbnN0IGIyMyA9IGJbIDggKyAzXTtcbiAgY29uc3QgYjMwID0gYlsxMiArIDBdO1xuICBjb25zdCBiMzEgPSBiWzEyICsgMV07XG4gIGNvbnN0IGIzMiA9IGJbMTIgKyAyXTtcbiAgY29uc3QgYjMzID0gYlsxMiArIDNdO1xuXG4gIGRzdFsgMF0gPSBhMDAgKiBiMDAgKyBhMTAgKiBiMDEgKyBhMjAgKiBiMDIgKyBhMzAgKiBiMDM7XG4gIGRzdFsgMV0gPSBhMDEgKiBiMDAgKyBhMTEgKiBiMDEgKyBhMjEgKiBiMDIgKyBhMzEgKiBiMDM7XG4gIGRzdFsgMl0gPSBhMDIgKiBiMDAgKyBhMTIgKiBiMDEgKyBhMjIgKiBiMDIgKyBhMzIgKiBiMDM7XG4gIGRzdFsgM10gPSBhMDMgKiBiMDAgKyBhMTMgKiBiMDEgKyBhMjMgKiBiMDIgKyBhMzMgKiBiMDM7XG4gIGRzdFsgNF0gPSBhMDAgKiBiMTAgKyBhMTAgKiBiMTEgKyBhMjAgKiBiMTIgKyBhMzAgKiBiMTM7XG4gIGRzdFsgNV0gPSBhMDEgKiBiMTAgKyBhMTEgKiBiMTEgKyBhMjEgKiBiMTIgKyBhMzEgKiBiMTM7XG4gIGRzdFsgNl0gPSBhMDIgKiBiMTAgKyBhMTIgKiBiMTEgKyBhMjIgKiBiMTIgKyBhMzIgKiBiMTM7XG4gIGRzdFsgN10gPSBhMDMgKiBiMTAgKyBhMTMgKiBiMTEgKyBhMjMgKiBiMTIgKyBhMzMgKiBiMTM7XG4gIGRzdFsgOF0gPSBhMDAgKiBiMjAgKyBhMTAgKiBiMjEgKyBhMjAgKiBiMjIgKyBhMzAgKiBiMjM7XG4gIGRzdFsgOV0gPSBhMDEgKiBiMjAgKyBhMTEgKiBiMjEgKyBhMjEgKiBiMjIgKyBhMzEgKiBiMjM7XG4gIGRzdFsxMF0gPSBhMDIgKiBiMjAgKyBhMTIgKiBiMjEgKyBhMjIgKiBiMjIgKyBhMzIgKiBiMjM7XG4gIGRzdFsxMV0gPSBhMDMgKiBiMjAgKyBhMTMgKiBiMjEgKyBhMjMgKiBiMjIgKyBhMzMgKiBiMjM7XG4gIGRzdFsxMl0gPSBhMDAgKiBiMzAgKyBhMTAgKiBiMzEgKyBhMjAgKiBiMzIgKyBhMzAgKiBiMzM7XG4gIGRzdFsxM10gPSBhMDEgKiBiMzAgKyBhMTEgKiBiMzEgKyBhMjEgKiBiMzIgKyBhMzEgKiBiMzM7XG4gIGRzdFsxNF0gPSBhMDIgKiBiMzAgKyBhMTIgKiBiMzEgKyBhMjIgKiBiMzIgKyBhMzIgKiBiMzM7XG4gIGRzdFsxNV0gPSBhMDMgKiBiMzAgKyBhMTMgKiBiMzEgKyBhMjMgKiBiMzIgKyBhMzMgKiBiMzM7XG5cbiAgcmV0dXJuIGRzdDtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSB0cmFuc2xhdGlvbiBjb21wb25lbnQgb2YgYSA0LWJ5LTQgbWF0cml4IHRvIHRoZSBnaXZlblxuICogdmVjdG9yLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC9tNC5NYXQ0fSBhIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IHYgVGhlIHZlY3Rvci5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gW2RzdF0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gVGhlIG1hdHJpeCB3aXRoIHRyYW5zbGF0aW9uIHNldC5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9tNFxuICovXG5mdW5jdGlvbiBzZXRUcmFuc2xhdGlvbihhLCB2LCBkc3QpIHtcbiAgZHN0ID0gZHN0IHx8IGlkZW50aXR5KCk7XG4gIGlmIChhICE9PSBkc3QpIHtcbiAgICBkc3RbIDBdID0gYVsgMF07XG4gICAgZHN0WyAxXSA9IGFbIDFdO1xuICAgIGRzdFsgMl0gPSBhWyAyXTtcbiAgICBkc3RbIDNdID0gYVsgM107XG4gICAgZHN0WyA0XSA9IGFbIDRdO1xuICAgIGRzdFsgNV0gPSBhWyA1XTtcbiAgICBkc3RbIDZdID0gYVsgNl07XG4gICAgZHN0WyA3XSA9IGFbIDddO1xuICAgIGRzdFsgOF0gPSBhWyA4XTtcbiAgICBkc3RbIDldID0gYVsgOV07XG4gICAgZHN0WzEwXSA9IGFbMTBdO1xuICAgIGRzdFsxMV0gPSBhWzExXTtcbiAgfVxuICBkc3RbMTJdID0gdlswXTtcbiAgZHN0WzEzXSA9IHZbMV07XG4gIGRzdFsxNF0gPSB2WzJdO1xuICBkc3RbMTVdID0gMTtcbiAgcmV0dXJuIGRzdDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB0cmFuc2xhdGlvbiBjb21wb25lbnQgb2YgYSA0LWJ5LTQgbWF0cml4IGFzIGEgdmVjdG9yIHdpdGggM1xuICogZW50cmllcy5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gbSBUaGUgbWF0cml4LlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSBbZHN0XSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC92My5WZWMzfSBUaGUgdHJhbnNsYXRpb24gY29tcG9uZW50IG9mIG0uXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvbTRcbiAqL1xuZnVuY3Rpb24gZ2V0VHJhbnNsYXRpb24obSwgZHN0KSB7XG4gIGRzdCA9IGRzdCB8fCBjcmVhdGUoKTtcbiAgZHN0WzBdID0gbVsxMl07XG4gIGRzdFsxXSA9IG1bMTNdO1xuICBkc3RbMl0gPSBtWzE0XTtcbiAgcmV0dXJuIGRzdDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIGF4aXMgb2YgYSA0eDQgbWF0cml4IGFzIGEgdmVjdG9yIHdpdGggMyBlbnRyaWVzXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL200Lk1hdDR9IG0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBheGlzIFRoZSBheGlzIDAgPSB4LCAxID0geSwgMiA9IHo7XG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC92My5WZWMzfSBbZHN0XSB2ZWN0b3IuXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC92My5WZWMzfSBUaGUgYXhpcyBjb21wb25lbnQgb2YgbS5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9tNFxuICovXG5mdW5jdGlvbiBnZXRBeGlzKG0sIGF4aXMsIGRzdCkge1xuICBkc3QgPSBkc3QgfHwgY3JlYXRlKCk7XG4gIGNvbnN0IG9mZiA9IGF4aXMgKiA0O1xuICBkc3RbMF0gPSBtW29mZiArIDBdO1xuICBkc3RbMV0gPSBtW29mZiArIDFdO1xuICBkc3RbMl0gPSBtW29mZiArIDJdO1xuICByZXR1cm4gZHN0O1xufVxuXG4vKipcbiAqIFNldHMgYW4gYXhpcyBvZiBhIDR4NCBtYXRyaXggYXMgYSB2ZWN0b3Igd2l0aCAzIGVudHJpZXNcbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gbSBUaGUgbWF0cml4LlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSB2IHRoZSBheGlzIHZlY3RvclxuICogQHBhcmFtIHtudW1iZXJ9IGF4aXMgVGhlIGF4aXMgIDAgPSB4LCAxID0geSwgMiA9IHo7XG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL200Lk1hdDR9IFtkc3RdIFRoZSBtYXRyaXggdG8gc2V0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gVGhlIG1hdHJpeCB3aXRoIGF4aXMgc2V0LlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL200XG4gKi9cbmZ1bmN0aW9uIHNldEF4aXMoYSwgdiwgYXhpcywgZHN0KSB7XG4gIGlmIChkc3QgIT09IGEpIHtcbiAgICBkc3QgPSBjb3B5JDEoYSwgZHN0KTtcbiAgfVxuICBjb25zdCBvZmYgPSBheGlzICogNDtcbiAgZHN0W29mZiArIDBdID0gdlswXTtcbiAgZHN0W29mZiArIDFdID0gdlsxXTtcbiAgZHN0W29mZiArIDJdID0gdlsyXTtcbiAgcmV0dXJuIGRzdDtcbn1cblxuLyoqXG4gKiBDb21wdXRlcyBhIDQtYnktNCBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm1hdGlvbiBtYXRyaXggZ2l2ZW4gdGhlIGFuZ3VsYXIgaGVpZ2h0XG4gKiBvZiB0aGUgZnJ1c3R1bSwgdGhlIGFzcGVjdCByYXRpbywgYW5kIHRoZSBuZWFyIGFuZCBmYXIgY2xpcHBpbmcgcGxhbmVzLiAgVGhlXG4gKiBhcmd1bWVudHMgZGVmaW5lIGEgZnJ1c3R1bSBleHRlbmRpbmcgaW4gdGhlIG5lZ2F0aXZlIHogZGlyZWN0aW9uLiAgVGhlIGdpdmVuXG4gKiBhbmdsZSBpcyB0aGUgdmVydGljYWwgYW5nbGUgb2YgdGhlIGZydXN0dW0sIGFuZCB0aGUgaG9yaXpvbnRhbCBhbmdsZSBpc1xuICogZGV0ZXJtaW5lZCB0byBwcm9kdWNlIHRoZSBnaXZlbiBhc3BlY3QgcmF0aW8uICBUaGUgYXJndW1lbnRzIG5lYXIgYW5kIGZhciBhcmVcbiAqIHRoZSBkaXN0YW5jZXMgdG8gdGhlIG5lYXIgYW5kIGZhciBjbGlwcGluZyBwbGFuZXMuICBOb3RlIHRoYXQgbmVhciBhbmQgZmFyXG4gKiBhcmUgbm90IHogY29vcmRpbmF0ZXMsIGJ1dCByYXRoZXIgdGhleSBhcmUgZGlzdGFuY2VzIGFsb25nIHRoZSBuZWdhdGl2ZVxuICogei1heGlzLiAgVGhlIG1hdHJpeCBnZW5lcmF0ZWQgc2VuZHMgdGhlIHZpZXdpbmcgZnJ1c3R1bSB0byB0aGUgdW5pdCBib3guXG4gKiBXZSBhc3N1bWUgYSB1bml0IGJveCBleHRlbmRpbmcgZnJvbSAtMSB0byAxIGluIHRoZSB4IGFuZCB5IGRpbWVuc2lvbnMgYW5kXG4gKiBmcm9tIDAgdG8gMSBpbiB0aGUgeiBkaW1lbnNpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gZmllbGRPZlZpZXdZSW5SYWRpYW5zIFRoZSBjYW1lcmEgYW5nbGUgZnJvbSB0b3AgdG8gYm90dG9tIChpbiByYWRpYW5zKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBhc3BlY3QgVGhlIGFzcGVjdCByYXRpbyB3aWR0aCAvIGhlaWdodC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB6TmVhciBUaGUgZGVwdGggKG5lZ2F0aXZlIHogY29vcmRpbmF0ZSlcbiAqICAgICBvZiB0aGUgbmVhciBjbGlwcGluZyBwbGFuZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB6RmFyIFRoZSBkZXB0aCAobmVnYXRpdmUgeiBjb29yZGluYXRlKVxuICogICAgIG9mIHRoZSBmYXIgY2xpcHBpbmcgcGxhbmUuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL200Lk1hdDR9IFtkc3RdIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm4ge21vZHVsZTp0d2dsL200Lk1hdDR9IFRoZSBwZXJzcGVjdGl2ZSBtYXRyaXguXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvbTRcbiAqL1xuZnVuY3Rpb24gcGVyc3BlY3RpdmUoZmllbGRPZlZpZXdZSW5SYWRpYW5zLCBhc3BlY3QsIHpOZWFyLCB6RmFyLCBkc3QpIHtcbiAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcblxuICBjb25zdCBmID0gTWF0aC50YW4oTWF0aC5QSSAqIDAuNSAtIDAuNSAqIGZpZWxkT2ZWaWV3WUluUmFkaWFucyk7XG4gIGNvbnN0IHJhbmdlSW52ID0gMS4wIC8gKHpOZWFyIC0gekZhcik7XG5cbiAgZHN0WzBdICA9IGYgLyBhc3BlY3Q7XG4gIGRzdFsxXSAgPSAwO1xuICBkc3RbMl0gID0gMDtcbiAgZHN0WzNdICA9IDA7XG5cbiAgZHN0WzRdICA9IDA7XG4gIGRzdFs1XSAgPSBmO1xuICBkc3RbNl0gID0gMDtcbiAgZHN0WzddICA9IDA7XG5cbiAgZHN0WzhdICA9IDA7XG4gIGRzdFs5XSAgPSAwO1xuICBkc3RbMTBdID0gKHpOZWFyICsgekZhcikgKiByYW5nZUludjtcbiAgZHN0WzExXSA9IC0xO1xuXG4gIGRzdFsxMl0gPSAwO1xuICBkc3RbMTNdID0gMDtcbiAgZHN0WzE0XSA9IHpOZWFyICogekZhciAqIHJhbmdlSW52ICogMjtcbiAgZHN0WzE1XSA9IDA7XG5cbiAgcmV0dXJuIGRzdDtcbn1cblxuLyoqXG4gKiBDb21wdXRlcyBhIDQtYnktNCBvcnRob2dvbmFsIHRyYW5zZm9ybWF0aW9uIG1hdHJpeCBnaXZlbiB0aGUgbGVmdCwgcmlnaHQsXG4gKiBib3R0b20sIGFuZCB0b3AgZGltZW5zaW9ucyBvZiB0aGUgbmVhciBjbGlwcGluZyBwbGFuZSBhcyB3ZWxsIGFzIHRoZVxuICogbmVhciBhbmQgZmFyIGNsaXBwaW5nIHBsYW5lIGRpc3RhbmNlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBsZWZ0IExlZnQgc2lkZSBvZiB0aGUgbmVhciBjbGlwcGluZyBwbGFuZSB2aWV3cG9ydC5cbiAqIEBwYXJhbSB7bnVtYmVyfSByaWdodCBSaWdodCBzaWRlIG9mIHRoZSBuZWFyIGNsaXBwaW5nIHBsYW5lIHZpZXdwb3J0LlxuICogQHBhcmFtIHtudW1iZXJ9IGJvdHRvbSBCb3R0b20gb2YgdGhlIG5lYXIgY2xpcHBpbmcgcGxhbmUgdmlld3BvcnQuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9wIFRvcCBvZiB0aGUgbmVhciBjbGlwcGluZyBwbGFuZSB2aWV3cG9ydC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBuZWFyIFRoZSBkZXB0aCAobmVnYXRpdmUgeiBjb29yZGluYXRlKVxuICogICAgIG9mIHRoZSBuZWFyIGNsaXBwaW5nIHBsYW5lLlxuICogQHBhcmFtIHtudW1iZXJ9IGZhciBUaGUgZGVwdGggKG5lZ2F0aXZlIHogY29vcmRpbmF0ZSlcbiAqICAgICBvZiB0aGUgZmFyIGNsaXBwaW5nIHBsYW5lLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC9tNC5NYXQ0fSBbZHN0XSBPdXRwdXQgbWF0cml4LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gVGhlIHBlcnNwZWN0aXZlIG1hdHJpeC5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9tNFxuICovXG5mdW5jdGlvbiBvcnRobyhsZWZ0LCByaWdodCwgYm90dG9tLCB0b3AsIG5lYXIsIGZhciwgZHN0KSB7XG4gIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG5cbiAgZHN0WzBdICA9IDIgLyAocmlnaHQgLSBsZWZ0KTtcbiAgZHN0WzFdICA9IDA7XG4gIGRzdFsyXSAgPSAwO1xuICBkc3RbM10gID0gMDtcblxuICBkc3RbNF0gID0gMDtcbiAgZHN0WzVdICA9IDIgLyAodG9wIC0gYm90dG9tKTtcbiAgZHN0WzZdICA9IDA7XG4gIGRzdFs3XSAgPSAwO1xuXG4gIGRzdFs4XSAgPSAwO1xuICBkc3RbOV0gID0gMDtcbiAgZHN0WzEwXSA9IDIgLyAobmVhciAtIGZhcik7XG4gIGRzdFsxMV0gPSAwO1xuXG4gIGRzdFsxMl0gPSAocmlnaHQgKyBsZWZ0KSAvIChsZWZ0IC0gcmlnaHQpO1xuICBkc3RbMTNdID0gKHRvcCArIGJvdHRvbSkgLyAoYm90dG9tIC0gdG9wKTtcbiAgZHN0WzE0XSA9IChmYXIgKyBuZWFyKSAvIChuZWFyIC0gZmFyKTtcbiAgZHN0WzE1XSA9IDE7XG5cbiAgcmV0dXJuIGRzdDtcbn1cblxuLyoqXG4gKiBDb21wdXRlcyBhIDQtYnktNCBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm1hdGlvbiBtYXRyaXggZ2l2ZW4gdGhlIGxlZnQsIHJpZ2h0LFxuICogdG9wLCBib3R0b20sIG5lYXIgYW5kIGZhciBjbGlwcGluZyBwbGFuZXMuIFRoZSBhcmd1bWVudHMgZGVmaW5lIGEgZnJ1c3R1bVxuICogZXh0ZW5kaW5nIGluIHRoZSBuZWdhdGl2ZSB6IGRpcmVjdGlvbi4gVGhlIGFyZ3VtZW50cyBuZWFyIGFuZCBmYXIgYXJlIHRoZVxuICogZGlzdGFuY2VzIHRvIHRoZSBuZWFyIGFuZCBmYXIgY2xpcHBpbmcgcGxhbmVzLiBOb3RlIHRoYXQgbmVhciBhbmQgZmFyIGFyZSBub3RcbiAqIHogY29vcmRpbmF0ZXMsIGJ1dCByYXRoZXIgdGhleSBhcmUgZGlzdGFuY2VzIGFsb25nIHRoZSBuZWdhdGl2ZSB6LWF4aXMuIFRoZVxuICogbWF0cml4IGdlbmVyYXRlZCBzZW5kcyB0aGUgdmlld2luZyBmcnVzdHVtIHRvIHRoZSB1bml0IGJveC4gV2UgYXNzdW1lIGEgdW5pdFxuICogYm94IGV4dGVuZGluZyBmcm9tIC0xIHRvIDEgaW4gdGhlIHggYW5kIHkgZGltZW5zaW9ucyBhbmQgZnJvbSAwIHRvIDEgaW4gdGhlIHpcbiAqIGRpbWVuc2lvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBsZWZ0IFRoZSB4IGNvb3JkaW5hdGUgb2YgdGhlIGxlZnQgcGxhbmUgb2YgdGhlIGJveC5cbiAqIEBwYXJhbSB7bnVtYmVyfSByaWdodCBUaGUgeCBjb29yZGluYXRlIG9mIHRoZSByaWdodCBwbGFuZSBvZiB0aGUgYm94LlxuICogQHBhcmFtIHtudW1iZXJ9IGJvdHRvbSBUaGUgeSBjb29yZGluYXRlIG9mIHRoZSBib3R0b20gcGxhbmUgb2YgdGhlIGJveC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b3AgVGhlIHkgY29vcmRpbmF0ZSBvZiB0aGUgcmlnaHQgcGxhbmUgb2YgdGhlIGJveC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBuZWFyIFRoZSBuZWdhdGl2ZSB6IGNvb3JkaW5hdGUgb2YgdGhlIG5lYXIgcGxhbmUgb2YgdGhlIGJveC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBmYXIgVGhlIG5lZ2F0aXZlIHogY29vcmRpbmF0ZSBvZiB0aGUgZmFyIHBsYW5lIG9mIHRoZSBib3guXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL200Lk1hdDR9IFtkc3RdIE91dHB1dCBtYXRyaXguIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC9tNC5NYXQ0fSBUaGUgcGVyc3BlY3RpdmUgcHJvamVjdGlvbiBtYXRyaXguXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvbTRcbiAqL1xuZnVuY3Rpb24gZnJ1c3R1bShsZWZ0LCByaWdodCwgYm90dG9tLCB0b3AsIG5lYXIsIGZhciwgZHN0KSB7XG4gIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG5cbiAgY29uc3QgZHggPSAocmlnaHQgLSBsZWZ0KTtcbiAgY29uc3QgZHkgPSAodG9wIC0gYm90dG9tKTtcbiAgY29uc3QgZHogPSAobmVhciAtIGZhcik7XG5cbiAgZHN0WyAwXSA9IDIgKiBuZWFyIC8gZHg7XG4gIGRzdFsgMV0gPSAwO1xuICBkc3RbIDJdID0gMDtcbiAgZHN0WyAzXSA9IDA7XG4gIGRzdFsgNF0gPSAwO1xuICBkc3RbIDVdID0gMiAqIG5lYXIgLyBkeTtcbiAgZHN0WyA2XSA9IDA7XG4gIGRzdFsgN10gPSAwO1xuICBkc3RbIDhdID0gKGxlZnQgKyByaWdodCkgLyBkeDtcbiAgZHN0WyA5XSA9ICh0b3AgKyBib3R0b20pIC8gZHk7XG4gIGRzdFsxMF0gPSBmYXIgLyBkejtcbiAgZHN0WzExXSA9IC0xO1xuICBkc3RbMTJdID0gMDtcbiAgZHN0WzEzXSA9IDA7XG4gIGRzdFsxNF0gPSBuZWFyICogZmFyIC8gZHo7XG4gIGRzdFsxNV0gPSAwO1xuXG4gIHJldHVybiBkc3Q7XG59XG5cbmxldCB4QXhpcztcbmxldCB5QXhpcztcbmxldCB6QXhpcztcblxuLyoqXG4gKiBDb21wdXRlcyBhIDQtYnktNCBsb29rLWF0IHRyYW5zZm9ybWF0aW9uLlxuICpcbiAqIFRoaXMgaXMgYSBtYXRyaXggd2hpY2ggcG9zaXRpb25zIHRoZSBjYW1lcmEgaXRzZWxmLiBJZiB5b3Ugd2FudFxuICogYSB2aWV3IG1hdHJpeCAoYSBtYXRyaXggd2hpY2ggbW92ZXMgdGhpbmdzIGluIGZyb250IG9mIHRoZSBjYW1lcmEpXG4gKiB0YWtlIHRoZSBpbnZlcnNlIG9mIHRoaXMuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSBleWUgVGhlIHBvc2l0aW9uIG9mIHRoZSBleWUuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IHRhcmdldCBUaGUgcG9zaXRpb24gbWVhbnQgdG8gYmUgdmlld2VkLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSB1cCBBIHZlY3RvciBwb2ludGluZyB1cC5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gW2RzdF0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gVGhlIGxvb2stYXQgbWF0cml4LlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL200XG4gKi9cbmZ1bmN0aW9uIGxvb2tBdChleWUsIHRhcmdldCwgdXAsIGRzdCkge1xuICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuXG4gIHhBeGlzID0geEF4aXMgfHwgY3JlYXRlKCk7XG4gIHlBeGlzID0geUF4aXMgfHwgY3JlYXRlKCk7XG4gIHpBeGlzID0gekF4aXMgfHwgY3JlYXRlKCk7XG5cbiAgbm9ybWFsaXplKFxuICAgICAgc3VidHJhY3QoZXllLCB0YXJnZXQsIHpBeGlzKSwgekF4aXMpO1xuICBub3JtYWxpemUoY3Jvc3ModXAsIHpBeGlzLCB4QXhpcyksIHhBeGlzKTtcbiAgbm9ybWFsaXplKGNyb3NzKHpBeGlzLCB4QXhpcywgeUF4aXMpLCB5QXhpcyk7XG5cbiAgZHN0WyAwXSA9IHhBeGlzWzBdO1xuICBkc3RbIDFdID0geEF4aXNbMV07XG4gIGRzdFsgMl0gPSB4QXhpc1syXTtcbiAgZHN0WyAzXSA9IDA7XG4gIGRzdFsgNF0gPSB5QXhpc1swXTtcbiAgZHN0WyA1XSA9IHlBeGlzWzFdO1xuICBkc3RbIDZdID0geUF4aXNbMl07XG4gIGRzdFsgN10gPSAwO1xuICBkc3RbIDhdID0gekF4aXNbMF07XG4gIGRzdFsgOV0gPSB6QXhpc1sxXTtcbiAgZHN0WzEwXSA9IHpBeGlzWzJdO1xuICBkc3RbMTFdID0gMDtcbiAgZHN0WzEyXSA9IGV5ZVswXTtcbiAgZHN0WzEzXSA9IGV5ZVsxXTtcbiAgZHN0WzE0XSA9IGV5ZVsyXTtcbiAgZHN0WzE1XSA9IDE7XG5cbiAgcmV0dXJuIGRzdDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgNC1ieS00IG1hdHJpeCB3aGljaCB0cmFuc2xhdGVzIGJ5IHRoZSBnaXZlbiB2ZWN0b3Igdi5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvdjMuVmVjM30gdiBUaGUgdmVjdG9yIGJ5XG4gKiAgICAgd2hpY2ggdG8gdHJhbnNsYXRlLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC9tNC5NYXQ0fSBbZHN0XSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC9tNC5NYXQ0fSBUaGUgdHJhbnNsYXRpb24gbWF0cml4LlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL200XG4gKi9cbmZ1bmN0aW9uIHRyYW5zbGF0aW9uKHYsIGRzdCkge1xuICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuXG4gIGRzdFsgMF0gPSAxO1xuICBkc3RbIDFdID0gMDtcbiAgZHN0WyAyXSA9IDA7XG4gIGRzdFsgM10gPSAwO1xuICBkc3RbIDRdID0gMDtcbiAgZHN0WyA1XSA9IDE7XG4gIGRzdFsgNl0gPSAwO1xuICBkc3RbIDddID0gMDtcbiAgZHN0WyA4XSA9IDA7XG4gIGRzdFsgOV0gPSAwO1xuICBkc3RbMTBdID0gMTtcbiAgZHN0WzExXSA9IDA7XG4gIGRzdFsxMl0gPSB2WzBdO1xuICBkc3RbMTNdID0gdlsxXTtcbiAgZHN0WzE0XSA9IHZbMl07XG4gIGRzdFsxNV0gPSAxO1xuICByZXR1cm4gZHN0O1xufVxuXG4vKipcbiAqIFRyYW5zbGF0ZXMgdGhlIGdpdmVuIDQtYnktNCBtYXRyaXggYnkgdGhlIGdpdmVuIHZlY3RvciB2LlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC9tNC5NYXQ0fSBtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IHYgVGhlIHZlY3RvciBieVxuICogICAgIHdoaWNoIHRvIHRyYW5zbGF0ZS5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gW2RzdF0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gVGhlIHRyYW5zbGF0ZWQgbWF0cml4LlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL200XG4gKi9cbmZ1bmN0aW9uIHRyYW5zbGF0ZShtLCB2LCBkc3QpIHtcbiAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcblxuICBjb25zdCB2MCA9IHZbMF07XG4gIGNvbnN0IHYxID0gdlsxXTtcbiAgY29uc3QgdjIgPSB2WzJdO1xuICBjb25zdCBtMDAgPSBtWzBdO1xuICBjb25zdCBtMDEgPSBtWzFdO1xuICBjb25zdCBtMDIgPSBtWzJdO1xuICBjb25zdCBtMDMgPSBtWzNdO1xuICBjb25zdCBtMTAgPSBtWzEgKiA0ICsgMF07XG4gIGNvbnN0IG0xMSA9IG1bMSAqIDQgKyAxXTtcbiAgY29uc3QgbTEyID0gbVsxICogNCArIDJdO1xuICBjb25zdCBtMTMgPSBtWzEgKiA0ICsgM107XG4gIGNvbnN0IG0yMCA9IG1bMiAqIDQgKyAwXTtcbiAgY29uc3QgbTIxID0gbVsyICogNCArIDFdO1xuICBjb25zdCBtMjIgPSBtWzIgKiA0ICsgMl07XG4gIGNvbnN0IG0yMyA9IG1bMiAqIDQgKyAzXTtcbiAgY29uc3QgbTMwID0gbVszICogNCArIDBdO1xuICBjb25zdCBtMzEgPSBtWzMgKiA0ICsgMV07XG4gIGNvbnN0IG0zMiA9IG1bMyAqIDQgKyAyXTtcbiAgY29uc3QgbTMzID0gbVszICogNCArIDNdO1xuXG4gIGlmIChtICE9PSBkc3QpIHtcbiAgICBkc3RbIDBdID0gbTAwO1xuICAgIGRzdFsgMV0gPSBtMDE7XG4gICAgZHN0WyAyXSA9IG0wMjtcbiAgICBkc3RbIDNdID0gbTAzO1xuICAgIGRzdFsgNF0gPSBtMTA7XG4gICAgZHN0WyA1XSA9IG0xMTtcbiAgICBkc3RbIDZdID0gbTEyO1xuICAgIGRzdFsgN10gPSBtMTM7XG4gICAgZHN0WyA4XSA9IG0yMDtcbiAgICBkc3RbIDldID0gbTIxO1xuICAgIGRzdFsxMF0gPSBtMjI7XG4gICAgZHN0WzExXSA9IG0yMztcbiAgfVxuXG4gIGRzdFsxMl0gPSBtMDAgKiB2MCArIG0xMCAqIHYxICsgbTIwICogdjIgKyBtMzA7XG4gIGRzdFsxM10gPSBtMDEgKiB2MCArIG0xMSAqIHYxICsgbTIxICogdjIgKyBtMzE7XG4gIGRzdFsxNF0gPSBtMDIgKiB2MCArIG0xMiAqIHYxICsgbTIyICogdjIgKyBtMzI7XG4gIGRzdFsxNV0gPSBtMDMgKiB2MCArIG0xMyAqIHYxICsgbTIzICogdjIgKyBtMzM7XG5cbiAgcmV0dXJuIGRzdDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgNC1ieS00IG1hdHJpeCB3aGljaCByb3RhdGVzIGFyb3VuZCB0aGUgeC1heGlzIGJ5IHRoZSBnaXZlbiBhbmdsZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZUluUmFkaWFucyBUaGUgYW5nbGUgYnkgd2hpY2ggdG8gcm90YXRlIChpbiByYWRpYW5zKS5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gW2RzdF0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gVGhlIHJvdGF0aW9uIG1hdHJpeC5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9tNFxuICovXG5mdW5jdGlvbiByb3RhdGlvblgoYW5nbGVJblJhZGlhbnMsIGRzdCkge1xuICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuXG4gIGNvbnN0IGMgPSBNYXRoLmNvcyhhbmdsZUluUmFkaWFucyk7XG4gIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZUluUmFkaWFucyk7XG5cbiAgZHN0WyAwXSA9IDE7XG4gIGRzdFsgMV0gPSAwO1xuICBkc3RbIDJdID0gMDtcbiAgZHN0WyAzXSA9IDA7XG4gIGRzdFsgNF0gPSAwO1xuICBkc3RbIDVdID0gYztcbiAgZHN0WyA2XSA9IHM7XG4gIGRzdFsgN10gPSAwO1xuICBkc3RbIDhdID0gMDtcbiAgZHN0WyA5XSA9IC1zO1xuICBkc3RbMTBdID0gYztcbiAgZHN0WzExXSA9IDA7XG4gIGRzdFsxMl0gPSAwO1xuICBkc3RbMTNdID0gMDtcbiAgZHN0WzE0XSA9IDA7XG4gIGRzdFsxNV0gPSAxO1xuXG4gIHJldHVybiBkc3Q7XG59XG5cbi8qKlxuICogUm90YXRlcyB0aGUgZ2l2ZW4gNC1ieS00IG1hdHJpeCBhcm91bmQgdGhlIHgtYXhpcyBieSB0aGUgZ2l2ZW5cbiAqIGFuZ2xlLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC9tNC5NYXQ0fSBtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGVJblJhZGlhbnMgVGhlIGFuZ2xlIGJ5IHdoaWNoIHRvIHJvdGF0ZSAoaW4gcmFkaWFucykuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL200Lk1hdDR9IFtkc3RdIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm4ge21vZHVsZTp0d2dsL200Lk1hdDR9IFRoZSByb3RhdGVkIG1hdHJpeC5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9tNFxuICovXG5mdW5jdGlvbiByb3RhdGVYKG0sIGFuZ2xlSW5SYWRpYW5zLCBkc3QpIHtcbiAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcblxuICBjb25zdCBtMTAgPSBtWzRdO1xuICBjb25zdCBtMTEgPSBtWzVdO1xuICBjb25zdCBtMTIgPSBtWzZdO1xuICBjb25zdCBtMTMgPSBtWzddO1xuICBjb25zdCBtMjAgPSBtWzhdO1xuICBjb25zdCBtMjEgPSBtWzldO1xuICBjb25zdCBtMjIgPSBtWzEwXTtcbiAgY29uc3QgbTIzID0gbVsxMV07XG4gIGNvbnN0IGMgPSBNYXRoLmNvcyhhbmdsZUluUmFkaWFucyk7XG4gIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZUluUmFkaWFucyk7XG5cbiAgZHN0WzRdICA9IGMgKiBtMTAgKyBzICogbTIwO1xuICBkc3RbNV0gID0gYyAqIG0xMSArIHMgKiBtMjE7XG4gIGRzdFs2XSAgPSBjICogbTEyICsgcyAqIG0yMjtcbiAgZHN0WzddICA9IGMgKiBtMTMgKyBzICogbTIzO1xuICBkc3RbOF0gID0gYyAqIG0yMCAtIHMgKiBtMTA7XG4gIGRzdFs5XSAgPSBjICogbTIxIC0gcyAqIG0xMTtcbiAgZHN0WzEwXSA9IGMgKiBtMjIgLSBzICogbTEyO1xuICBkc3RbMTFdID0gYyAqIG0yMyAtIHMgKiBtMTM7XG5cbiAgaWYgKG0gIT09IGRzdCkge1xuICAgIGRzdFsgMF0gPSBtWyAwXTtcbiAgICBkc3RbIDFdID0gbVsgMV07XG4gICAgZHN0WyAyXSA9IG1bIDJdO1xuICAgIGRzdFsgM10gPSBtWyAzXTtcbiAgICBkc3RbMTJdID0gbVsxMl07XG4gICAgZHN0WzEzXSA9IG1bMTNdO1xuICAgIGRzdFsxNF0gPSBtWzE0XTtcbiAgICBkc3RbMTVdID0gbVsxNV07XG4gIH1cblxuICByZXR1cm4gZHN0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSA0LWJ5LTQgbWF0cml4IHdoaWNoIHJvdGF0ZXMgYXJvdW5kIHRoZSB5LWF4aXMgYnkgdGhlIGdpdmVuIGFuZ2xlLlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlSW5SYWRpYW5zIFRoZSBhbmdsZSBieSB3aGljaCB0byByb3RhdGUgKGluIHJhZGlhbnMpLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC9tNC5NYXQ0fSBbZHN0XSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC9tNC5NYXQ0fSBUaGUgcm90YXRpb24gbWF0cml4LlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL200XG4gKi9cbmZ1bmN0aW9uIHJvdGF0aW9uWShhbmdsZUluUmFkaWFucywgZHN0KSB7XG4gIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG5cbiAgY29uc3QgYyA9IE1hdGguY29zKGFuZ2xlSW5SYWRpYW5zKTtcbiAgY29uc3QgcyA9IE1hdGguc2luKGFuZ2xlSW5SYWRpYW5zKTtcblxuICBkc3RbIDBdID0gYztcbiAgZHN0WyAxXSA9IDA7XG4gIGRzdFsgMl0gPSAtcztcbiAgZHN0WyAzXSA9IDA7XG4gIGRzdFsgNF0gPSAwO1xuICBkc3RbIDVdID0gMTtcbiAgZHN0WyA2XSA9IDA7XG4gIGRzdFsgN10gPSAwO1xuICBkc3RbIDhdID0gcztcbiAgZHN0WyA5XSA9IDA7XG4gIGRzdFsxMF0gPSBjO1xuICBkc3RbMTFdID0gMDtcbiAgZHN0WzEyXSA9IDA7XG4gIGRzdFsxM10gPSAwO1xuICBkc3RbMTRdID0gMDtcbiAgZHN0WzE1XSA9IDE7XG5cbiAgcmV0dXJuIGRzdDtcbn1cblxuLyoqXG4gKiBSb3RhdGVzIHRoZSBnaXZlbiA0LWJ5LTQgbWF0cml4IGFyb3VuZCB0aGUgeS1heGlzIGJ5IHRoZSBnaXZlblxuICogYW5nbGUuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL200Lk1hdDR9IG0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZUluUmFkaWFucyBUaGUgYW5nbGUgYnkgd2hpY2ggdG8gcm90YXRlIChpbiByYWRpYW5zKS5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gW2RzdF0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gVGhlIHJvdGF0ZWQgbWF0cml4LlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL200XG4gKi9cbmZ1bmN0aW9uIHJvdGF0ZVkobSwgYW5nbGVJblJhZGlhbnMsIGRzdCkge1xuICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuXG4gIGNvbnN0IG0wMCA9IG1bMCAqIDQgKyAwXTtcbiAgY29uc3QgbTAxID0gbVswICogNCArIDFdO1xuICBjb25zdCBtMDIgPSBtWzAgKiA0ICsgMl07XG4gIGNvbnN0IG0wMyA9IG1bMCAqIDQgKyAzXTtcbiAgY29uc3QgbTIwID0gbVsyICogNCArIDBdO1xuICBjb25zdCBtMjEgPSBtWzIgKiA0ICsgMV07XG4gIGNvbnN0IG0yMiA9IG1bMiAqIDQgKyAyXTtcbiAgY29uc3QgbTIzID0gbVsyICogNCArIDNdO1xuICBjb25zdCBjID0gTWF0aC5jb3MoYW5nbGVJblJhZGlhbnMpO1xuICBjb25zdCBzID0gTWF0aC5zaW4oYW5nbGVJblJhZGlhbnMpO1xuXG4gIGRzdFsgMF0gPSBjICogbTAwIC0gcyAqIG0yMDtcbiAgZHN0WyAxXSA9IGMgKiBtMDEgLSBzICogbTIxO1xuICBkc3RbIDJdID0gYyAqIG0wMiAtIHMgKiBtMjI7XG4gIGRzdFsgM10gPSBjICogbTAzIC0gcyAqIG0yMztcbiAgZHN0WyA4XSA9IGMgKiBtMjAgKyBzICogbTAwO1xuICBkc3RbIDldID0gYyAqIG0yMSArIHMgKiBtMDE7XG4gIGRzdFsxMF0gPSBjICogbTIyICsgcyAqIG0wMjtcbiAgZHN0WzExXSA9IGMgKiBtMjMgKyBzICogbTAzO1xuXG4gIGlmIChtICE9PSBkc3QpIHtcbiAgICBkc3RbIDRdID0gbVsgNF07XG4gICAgZHN0WyA1XSA9IG1bIDVdO1xuICAgIGRzdFsgNl0gPSBtWyA2XTtcbiAgICBkc3RbIDddID0gbVsgN107XG4gICAgZHN0WzEyXSA9IG1bMTJdO1xuICAgIGRzdFsxM10gPSBtWzEzXTtcbiAgICBkc3RbMTRdID0gbVsxNF07XG4gICAgZHN0WzE1XSA9IG1bMTVdO1xuICB9XG5cbiAgcmV0dXJuIGRzdDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgNC1ieS00IG1hdHJpeCB3aGljaCByb3RhdGVzIGFyb3VuZCB0aGUgei1heGlzIGJ5IHRoZSBnaXZlbiBhbmdsZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZUluUmFkaWFucyBUaGUgYW5nbGUgYnkgd2hpY2ggdG8gcm90YXRlIChpbiByYWRpYW5zKS5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gW2RzdF0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gVGhlIHJvdGF0aW9uIG1hdHJpeC5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9tNFxuICovXG5mdW5jdGlvbiByb3RhdGlvblooYW5nbGVJblJhZGlhbnMsIGRzdCkge1xuICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuXG4gIGNvbnN0IGMgPSBNYXRoLmNvcyhhbmdsZUluUmFkaWFucyk7XG4gIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZUluUmFkaWFucyk7XG5cbiAgZHN0WyAwXSA9IGM7XG4gIGRzdFsgMV0gPSBzO1xuICBkc3RbIDJdID0gMDtcbiAgZHN0WyAzXSA9IDA7XG4gIGRzdFsgNF0gPSAtcztcbiAgZHN0WyA1XSA9IGM7XG4gIGRzdFsgNl0gPSAwO1xuICBkc3RbIDddID0gMDtcbiAgZHN0WyA4XSA9IDA7XG4gIGRzdFsgOV0gPSAwO1xuICBkc3RbMTBdID0gMTtcbiAgZHN0WzExXSA9IDA7XG4gIGRzdFsxMl0gPSAwO1xuICBkc3RbMTNdID0gMDtcbiAgZHN0WzE0XSA9IDA7XG4gIGRzdFsxNV0gPSAxO1xuXG4gIHJldHVybiBkc3Q7XG59XG5cbi8qKlxuICogUm90YXRlcyB0aGUgZ2l2ZW4gNC1ieS00IG1hdHJpeCBhcm91bmQgdGhlIHotYXhpcyBieSB0aGUgZ2l2ZW5cbiAqIGFuZ2xlLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC9tNC5NYXQ0fSBtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGVJblJhZGlhbnMgVGhlIGFuZ2xlIGJ5IHdoaWNoIHRvIHJvdGF0ZSAoaW4gcmFkaWFucykuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL200Lk1hdDR9IFtkc3RdIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm4ge21vZHVsZTp0d2dsL200Lk1hdDR9IFRoZSByb3RhdGVkIG1hdHJpeC5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9tNFxuICovXG5mdW5jdGlvbiByb3RhdGVaKG0sIGFuZ2xlSW5SYWRpYW5zLCBkc3QpIHtcbiAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcblxuICBjb25zdCBtMDAgPSBtWzAgKiA0ICsgMF07XG4gIGNvbnN0IG0wMSA9IG1bMCAqIDQgKyAxXTtcbiAgY29uc3QgbTAyID0gbVswICogNCArIDJdO1xuICBjb25zdCBtMDMgPSBtWzAgKiA0ICsgM107XG4gIGNvbnN0IG0xMCA9IG1bMSAqIDQgKyAwXTtcbiAgY29uc3QgbTExID0gbVsxICogNCArIDFdO1xuICBjb25zdCBtMTIgPSBtWzEgKiA0ICsgMl07XG4gIGNvbnN0IG0xMyA9IG1bMSAqIDQgKyAzXTtcbiAgY29uc3QgYyA9IE1hdGguY29zKGFuZ2xlSW5SYWRpYW5zKTtcbiAgY29uc3QgcyA9IE1hdGguc2luKGFuZ2xlSW5SYWRpYW5zKTtcblxuICBkc3RbIDBdID0gYyAqIG0wMCArIHMgKiBtMTA7XG4gIGRzdFsgMV0gPSBjICogbTAxICsgcyAqIG0xMTtcbiAgZHN0WyAyXSA9IGMgKiBtMDIgKyBzICogbTEyO1xuICBkc3RbIDNdID0gYyAqIG0wMyArIHMgKiBtMTM7XG4gIGRzdFsgNF0gPSBjICogbTEwIC0gcyAqIG0wMDtcbiAgZHN0WyA1XSA9IGMgKiBtMTEgLSBzICogbTAxO1xuICBkc3RbIDZdID0gYyAqIG0xMiAtIHMgKiBtMDI7XG4gIGRzdFsgN10gPSBjICogbTEzIC0gcyAqIG0wMztcblxuICBpZiAobSAhPT0gZHN0KSB7XG4gICAgZHN0WyA4XSA9IG1bIDhdO1xuICAgIGRzdFsgOV0gPSBtWyA5XTtcbiAgICBkc3RbMTBdID0gbVsxMF07XG4gICAgZHN0WzExXSA9IG1bMTFdO1xuICAgIGRzdFsxMl0gPSBtWzEyXTtcbiAgICBkc3RbMTNdID0gbVsxM107XG4gICAgZHN0WzE0XSA9IG1bMTRdO1xuICAgIGRzdFsxNV0gPSBtWzE1XTtcbiAgfVxuXG4gIHJldHVybiBkc3Q7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIDQtYnktNCBtYXRyaXggd2hpY2ggcm90YXRlcyBhcm91bmQgdGhlIGdpdmVuIGF4aXMgYnkgdGhlIGdpdmVuXG4gKiBhbmdsZS5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvdjMuVmVjM30gYXhpcyBUaGUgYXhpc1xuICogICAgIGFib3V0IHdoaWNoIHRvIHJvdGF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZUluUmFkaWFucyBUaGUgYW5nbGUgYnkgd2hpY2ggdG8gcm90YXRlIChpbiByYWRpYW5zKS5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gW2RzdF0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gQSBtYXRyaXggd2hpY2ggcm90YXRlcyBhbmdsZSByYWRpYW5zXG4gKiAgICAgYXJvdW5kIHRoZSBheGlzLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL200XG4gKi9cbmZ1bmN0aW9uIGF4aXNSb3RhdGlvbihheGlzLCBhbmdsZUluUmFkaWFucywgZHN0KSB7XG4gIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG5cbiAgbGV0IHggPSBheGlzWzBdO1xuICBsZXQgeSA9IGF4aXNbMV07XG4gIGxldCB6ID0gYXhpc1syXTtcbiAgY29uc3QgbiA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5ICsgeiAqIHopO1xuICB4IC89IG47XG4gIHkgLz0gbjtcbiAgeiAvPSBuO1xuICBjb25zdCB4eCA9IHggKiB4O1xuICBjb25zdCB5eSA9IHkgKiB5O1xuICBjb25zdCB6eiA9IHogKiB6O1xuICBjb25zdCBjID0gTWF0aC5jb3MoYW5nbGVJblJhZGlhbnMpO1xuICBjb25zdCBzID0gTWF0aC5zaW4oYW5nbGVJblJhZGlhbnMpO1xuICBjb25zdCBvbmVNaW51c0Nvc2luZSA9IDEgLSBjO1xuXG4gIGRzdFsgMF0gPSB4eCArICgxIC0geHgpICogYztcbiAgZHN0WyAxXSA9IHggKiB5ICogb25lTWludXNDb3NpbmUgKyB6ICogcztcbiAgZHN0WyAyXSA9IHggKiB6ICogb25lTWludXNDb3NpbmUgLSB5ICogcztcbiAgZHN0WyAzXSA9IDA7XG4gIGRzdFsgNF0gPSB4ICogeSAqIG9uZU1pbnVzQ29zaW5lIC0geiAqIHM7XG4gIGRzdFsgNV0gPSB5eSArICgxIC0geXkpICogYztcbiAgZHN0WyA2XSA9IHkgKiB6ICogb25lTWludXNDb3NpbmUgKyB4ICogcztcbiAgZHN0WyA3XSA9IDA7XG4gIGRzdFsgOF0gPSB4ICogeiAqIG9uZU1pbnVzQ29zaW5lICsgeSAqIHM7XG4gIGRzdFsgOV0gPSB5ICogeiAqIG9uZU1pbnVzQ29zaW5lIC0geCAqIHM7XG4gIGRzdFsxMF0gPSB6eiArICgxIC0genopICogYztcbiAgZHN0WzExXSA9IDA7XG4gIGRzdFsxMl0gPSAwO1xuICBkc3RbMTNdID0gMDtcbiAgZHN0WzE0XSA9IDA7XG4gIGRzdFsxNV0gPSAxO1xuXG4gIHJldHVybiBkc3Q7XG59XG5cbi8qKlxuICogUm90YXRlcyB0aGUgZ2l2ZW4gNC1ieS00IG1hdHJpeCBhcm91bmQgdGhlIGdpdmVuIGF4aXMgYnkgdGhlXG4gKiBnaXZlbiBhbmdsZS5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gbSBUaGUgbWF0cml4LlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSBheGlzIFRoZSBheGlzXG4gKiAgICAgYWJvdXQgd2hpY2ggdG8gcm90YXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlSW5SYWRpYW5zIFRoZSBhbmdsZSBieSB3aGljaCB0byByb3RhdGUgKGluIHJhZGlhbnMpLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC9tNC5NYXQ0fSBbZHN0XSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC9tNC5NYXQ0fSBUaGUgcm90YXRlZCBtYXRyaXguXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvbTRcbiAqL1xuZnVuY3Rpb24gYXhpc1JvdGF0ZShtLCBheGlzLCBhbmdsZUluUmFkaWFucywgZHN0KSB7XG4gIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG5cbiAgbGV0IHggPSBheGlzWzBdO1xuICBsZXQgeSA9IGF4aXNbMV07XG4gIGxldCB6ID0gYXhpc1syXTtcbiAgY29uc3QgbiA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5ICsgeiAqIHopO1xuICB4IC89IG47XG4gIHkgLz0gbjtcbiAgeiAvPSBuO1xuICBjb25zdCB4eCA9IHggKiB4O1xuICBjb25zdCB5eSA9IHkgKiB5O1xuICBjb25zdCB6eiA9IHogKiB6O1xuICBjb25zdCBjID0gTWF0aC5jb3MoYW5nbGVJblJhZGlhbnMpO1xuICBjb25zdCBzID0gTWF0aC5zaW4oYW5nbGVJblJhZGlhbnMpO1xuICBjb25zdCBvbmVNaW51c0Nvc2luZSA9IDEgLSBjO1xuXG4gIGNvbnN0IHIwMCA9IHh4ICsgKDEgLSB4eCkgKiBjO1xuICBjb25zdCByMDEgPSB4ICogeSAqIG9uZU1pbnVzQ29zaW5lICsgeiAqIHM7XG4gIGNvbnN0IHIwMiA9IHggKiB6ICogb25lTWludXNDb3NpbmUgLSB5ICogcztcbiAgY29uc3QgcjEwID0geCAqIHkgKiBvbmVNaW51c0Nvc2luZSAtIHogKiBzO1xuICBjb25zdCByMTEgPSB5eSArICgxIC0geXkpICogYztcbiAgY29uc3QgcjEyID0geSAqIHogKiBvbmVNaW51c0Nvc2luZSArIHggKiBzO1xuICBjb25zdCByMjAgPSB4ICogeiAqIG9uZU1pbnVzQ29zaW5lICsgeSAqIHM7XG4gIGNvbnN0IHIyMSA9IHkgKiB6ICogb25lTWludXNDb3NpbmUgLSB4ICogcztcbiAgY29uc3QgcjIyID0genogKyAoMSAtIHp6KSAqIGM7XG5cbiAgY29uc3QgbTAwID0gbVswXTtcbiAgY29uc3QgbTAxID0gbVsxXTtcbiAgY29uc3QgbTAyID0gbVsyXTtcbiAgY29uc3QgbTAzID0gbVszXTtcbiAgY29uc3QgbTEwID0gbVs0XTtcbiAgY29uc3QgbTExID0gbVs1XTtcbiAgY29uc3QgbTEyID0gbVs2XTtcbiAgY29uc3QgbTEzID0gbVs3XTtcbiAgY29uc3QgbTIwID0gbVs4XTtcbiAgY29uc3QgbTIxID0gbVs5XTtcbiAgY29uc3QgbTIyID0gbVsxMF07XG4gIGNvbnN0IG0yMyA9IG1bMTFdO1xuXG4gIGRzdFsgMF0gPSByMDAgKiBtMDAgKyByMDEgKiBtMTAgKyByMDIgKiBtMjA7XG4gIGRzdFsgMV0gPSByMDAgKiBtMDEgKyByMDEgKiBtMTEgKyByMDIgKiBtMjE7XG4gIGRzdFsgMl0gPSByMDAgKiBtMDIgKyByMDEgKiBtMTIgKyByMDIgKiBtMjI7XG4gIGRzdFsgM10gPSByMDAgKiBtMDMgKyByMDEgKiBtMTMgKyByMDIgKiBtMjM7XG4gIGRzdFsgNF0gPSByMTAgKiBtMDAgKyByMTEgKiBtMTAgKyByMTIgKiBtMjA7XG4gIGRzdFsgNV0gPSByMTAgKiBtMDEgKyByMTEgKiBtMTEgKyByMTIgKiBtMjE7XG4gIGRzdFsgNl0gPSByMTAgKiBtMDIgKyByMTEgKiBtMTIgKyByMTIgKiBtMjI7XG4gIGRzdFsgN10gPSByMTAgKiBtMDMgKyByMTEgKiBtMTMgKyByMTIgKiBtMjM7XG4gIGRzdFsgOF0gPSByMjAgKiBtMDAgKyByMjEgKiBtMTAgKyByMjIgKiBtMjA7XG4gIGRzdFsgOV0gPSByMjAgKiBtMDEgKyByMjEgKiBtMTEgKyByMjIgKiBtMjE7XG4gIGRzdFsxMF0gPSByMjAgKiBtMDIgKyByMjEgKiBtMTIgKyByMjIgKiBtMjI7XG4gIGRzdFsxMV0gPSByMjAgKiBtMDMgKyByMjEgKiBtMTMgKyByMjIgKiBtMjM7XG5cbiAgaWYgKG0gIT09IGRzdCkge1xuICAgIGRzdFsxMl0gPSBtWzEyXTtcbiAgICBkc3RbMTNdID0gbVsxM107XG4gICAgZHN0WzE0XSA9IG1bMTRdO1xuICAgIGRzdFsxNV0gPSBtWzE1XTtcbiAgfVxuXG4gIHJldHVybiBkc3Q7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIDQtYnktNCBtYXRyaXggd2hpY2ggc2NhbGVzIGluIGVhY2ggZGltZW5zaW9uIGJ5IGFuIGFtb3VudCBnaXZlbiBieVxuICogdGhlIGNvcnJlc3BvbmRpbmcgZW50cnkgaW4gdGhlIGdpdmVuIHZlY3RvcjsgYXNzdW1lcyB0aGUgdmVjdG9yIGhhcyB0aHJlZVxuICogZW50cmllcy5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvdjMuVmVjM30gdiBBIHZlY3RvciBvZlxuICogICAgIHRocmVlIGVudHJpZXMgc3BlY2lmeWluZyB0aGUgZmFjdG9yIGJ5IHdoaWNoIHRvIHNjYWxlIGluIGVhY2ggZGltZW5zaW9uLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC9tNC5NYXQ0fSBbZHN0XSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC9tNC5NYXQ0fSBUaGUgc2NhbGluZyBtYXRyaXguXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvbTRcbiAqL1xuZnVuY3Rpb24gc2NhbGluZyh2LCBkc3QpIHtcbiAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcblxuICBkc3RbIDBdID0gdlswXTtcbiAgZHN0WyAxXSA9IDA7XG4gIGRzdFsgMl0gPSAwO1xuICBkc3RbIDNdID0gMDtcbiAgZHN0WyA0XSA9IDA7XG4gIGRzdFsgNV0gPSB2WzFdO1xuICBkc3RbIDZdID0gMDtcbiAgZHN0WyA3XSA9IDA7XG4gIGRzdFsgOF0gPSAwO1xuICBkc3RbIDldID0gMDtcbiAgZHN0WzEwXSA9IHZbMl07XG4gIGRzdFsxMV0gPSAwO1xuICBkc3RbMTJdID0gMDtcbiAgZHN0WzEzXSA9IDA7XG4gIGRzdFsxNF0gPSAwO1xuICBkc3RbMTVdID0gMTtcblxuICByZXR1cm4gZHN0O1xufVxuXG4vKipcbiAqIFNjYWxlcyB0aGUgZ2l2ZW4gNC1ieS00IG1hdHJpeCBpbiBlYWNoIGRpbWVuc2lvbiBieSBhbiBhbW91bnRcbiAqIGdpdmVuIGJ5IHRoZSBjb3JyZXNwb25kaW5nIGVudHJ5IGluIHRoZSBnaXZlbiB2ZWN0b3I7IGFzc3VtZXMgdGhlIHZlY3RvciBoYXNcbiAqIHRocmVlIGVudHJpZXMuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL200Lk1hdDR9IG0gVGhlIG1hdHJpeCB0byBiZSBtb2RpZmllZC5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvdjMuVmVjM30gdiBBIHZlY3RvciBvZiB0aHJlZSBlbnRyaWVzIHNwZWNpZnlpbmcgdGhlXG4gKiAgICAgZmFjdG9yIGJ5IHdoaWNoIHRvIHNjYWxlIGluIGVhY2ggZGltZW5zaW9uLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC9tNC5NYXQ0fSBbZHN0XSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC9tNC5NYXQ0fSBUaGUgc2NhbGVkIG1hdHJpeC5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9tNFxuICovXG5mdW5jdGlvbiBzY2FsZShtLCB2LCBkc3QpIHtcbiAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcblxuICBjb25zdCB2MCA9IHZbMF07XG4gIGNvbnN0IHYxID0gdlsxXTtcbiAgY29uc3QgdjIgPSB2WzJdO1xuXG4gIGRzdFsgMF0gPSB2MCAqIG1bMCAqIDQgKyAwXTtcbiAgZHN0WyAxXSA9IHYwICogbVswICogNCArIDFdO1xuICBkc3RbIDJdID0gdjAgKiBtWzAgKiA0ICsgMl07XG4gIGRzdFsgM10gPSB2MCAqIG1bMCAqIDQgKyAzXTtcbiAgZHN0WyA0XSA9IHYxICogbVsxICogNCArIDBdO1xuICBkc3RbIDVdID0gdjEgKiBtWzEgKiA0ICsgMV07XG4gIGRzdFsgNl0gPSB2MSAqIG1bMSAqIDQgKyAyXTtcbiAgZHN0WyA3XSA9IHYxICogbVsxICogNCArIDNdO1xuICBkc3RbIDhdID0gdjIgKiBtWzIgKiA0ICsgMF07XG4gIGRzdFsgOV0gPSB2MiAqIG1bMiAqIDQgKyAxXTtcbiAgZHN0WzEwXSA9IHYyICogbVsyICogNCArIDJdO1xuICBkc3RbMTFdID0gdjIgKiBtWzIgKiA0ICsgM107XG5cbiAgaWYgKG0gIT09IGRzdCkge1xuICAgIGRzdFsxMl0gPSBtWzEyXTtcbiAgICBkc3RbMTNdID0gbVsxM107XG4gICAgZHN0WzE0XSA9IG1bMTRdO1xuICAgIGRzdFsxNV0gPSBtWzE1XTtcbiAgfVxuXG4gIHJldHVybiBkc3Q7XG59XG5cbi8qKlxuICogVGFrZXMgYSA0LWJ5LTQgbWF0cml4IGFuZCBhIHZlY3RvciB3aXRoIDMgZW50cmllcyxcbiAqIGludGVycHJldHMgdGhlIHZlY3RvciBhcyBhIHBvaW50LCB0cmFuc2Zvcm1zIHRoYXQgcG9pbnQgYnkgdGhlIG1hdHJpeCwgYW5kXG4gKiByZXR1cm5zIHRoZSByZXN1bHQgYXMgYSB2ZWN0b3Igd2l0aCAzIGVudHJpZXMuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL200Lk1hdDR9IG0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvdjMuVmVjM30gdiBUaGUgcG9pbnQuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IFtkc3RdIG9wdGlvbmFsIHZlYzMgdG8gc3RvcmUgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wvdjMuVmVjM30gVGhlIHRyYW5zZm9ybWVkIHBvaW50LlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL200XG4gKi9cbmZ1bmN0aW9uIHRyYW5zZm9ybVBvaW50KG0sIHYsIGRzdCkge1xuICBkc3QgPSBkc3QgfHwgY3JlYXRlKCk7XG4gIGNvbnN0IHYwID0gdlswXTtcbiAgY29uc3QgdjEgPSB2WzFdO1xuICBjb25zdCB2MiA9IHZbMl07XG4gIGNvbnN0IGQgPSB2MCAqIG1bMCAqIDQgKyAzXSArIHYxICogbVsxICogNCArIDNdICsgdjIgKiBtWzIgKiA0ICsgM10gKyBtWzMgKiA0ICsgM107XG5cbiAgZHN0WzBdID0gKHYwICogbVswICogNCArIDBdICsgdjEgKiBtWzEgKiA0ICsgMF0gKyB2MiAqIG1bMiAqIDQgKyAwXSArIG1bMyAqIDQgKyAwXSkgLyBkO1xuICBkc3RbMV0gPSAodjAgKiBtWzAgKiA0ICsgMV0gKyB2MSAqIG1bMSAqIDQgKyAxXSArIHYyICogbVsyICogNCArIDFdICsgbVszICogNCArIDFdKSAvIGQ7XG4gIGRzdFsyXSA9ICh2MCAqIG1bMCAqIDQgKyAyXSArIHYxICogbVsxICogNCArIDJdICsgdjIgKiBtWzIgKiA0ICsgMl0gKyBtWzMgKiA0ICsgMl0pIC8gZDtcblxuICByZXR1cm4gZHN0O1xufVxuXG4vKipcbiAqIFRha2VzIGEgNC1ieS00IG1hdHJpeCBhbmQgYSB2ZWN0b3Igd2l0aCAzIGVudHJpZXMsIGludGVycHJldHMgdGhlIHZlY3RvciBhcyBhXG4gKiBkaXJlY3Rpb24sIHRyYW5zZm9ybXMgdGhhdCBkaXJlY3Rpb24gYnkgdGhlIG1hdHJpeCwgYW5kIHJldHVybnMgdGhlIHJlc3VsdDtcbiAqIGFzc3VtZXMgdGhlIHRyYW5zZm9ybWF0aW9uIG9mIDMtZGltZW5zaW9uYWwgc3BhY2UgcmVwcmVzZW50ZWQgYnkgdGhlIG1hdHJpeFxuICogaXMgcGFyYWxsZWwtcHJlc2VydmluZywgaS5lLiBhbnkgY29tYmluYXRpb24gb2Ygcm90YXRpb24sIHNjYWxpbmcgYW5kXG4gKiB0cmFuc2xhdGlvbiwgYnV0IG5vdCBhIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIFJldHVybnMgYSB2ZWN0b3Igd2l0aCAzXG4gKiBlbnRyaWVzLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC9tNC5NYXQ0fSBtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IHYgVGhlIGRpcmVjdGlvbi5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvdjMuVmVjM30gW2RzdF0gb3B0aW9uYWwgVmVjMyB0byBzdG9yZSByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC92My5WZWMzfSBUaGUgdHJhbnNmb3JtZWQgZGlyZWN0aW9uLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL200XG4gKi9cbmZ1bmN0aW9uIHRyYW5zZm9ybURpcmVjdGlvbihtLCB2LCBkc3QpIHtcbiAgZHN0ID0gZHN0IHx8IGNyZWF0ZSgpO1xuXG4gIGNvbnN0IHYwID0gdlswXTtcbiAgY29uc3QgdjEgPSB2WzFdO1xuICBjb25zdCB2MiA9IHZbMl07XG5cbiAgZHN0WzBdID0gdjAgKiBtWzAgKiA0ICsgMF0gKyB2MSAqIG1bMSAqIDQgKyAwXSArIHYyICogbVsyICogNCArIDBdO1xuICBkc3RbMV0gPSB2MCAqIG1bMCAqIDQgKyAxXSArIHYxICogbVsxICogNCArIDFdICsgdjIgKiBtWzIgKiA0ICsgMV07XG4gIGRzdFsyXSA9IHYwICogbVswICogNCArIDJdICsgdjEgKiBtWzEgKiA0ICsgMl0gKyB2MiAqIG1bMiAqIDQgKyAyXTtcblxuICByZXR1cm4gZHN0O1xufVxuXG4vKipcbiAqIFRha2VzIGEgNC1ieS00IG1hdHJpeCBtIGFuZCBhIHZlY3RvciB2IHdpdGggMyBlbnRyaWVzLCBpbnRlcnByZXRzIHRoZSB2ZWN0b3JcbiAqIGFzIGEgbm9ybWFsIHRvIGEgc3VyZmFjZSwgYW5kIGNvbXB1dGVzIGEgdmVjdG9yIHdoaWNoIGlzIG5vcm1hbCB1cG9uXG4gKiB0cmFuc2Zvcm1pbmcgdGhhdCBzdXJmYWNlIGJ5IHRoZSBtYXRyaXguIFRoZSBlZmZlY3Qgb2YgdGhpcyBmdW5jdGlvbiBpcyB0aGVcbiAqIHNhbWUgYXMgdHJhbnNmb3JtaW5nIHYgKGFzIGEgZGlyZWN0aW9uKSBieSB0aGUgaW52ZXJzZS10cmFuc3Bvc2Ugb2YgbS4gIFRoaXNcbiAqIGZ1bmN0aW9uIGFzc3VtZXMgdGhlIHRyYW5zZm9ybWF0aW9uIG9mIDMtZGltZW5zaW9uYWwgc3BhY2UgcmVwcmVzZW50ZWQgYnkgdGhlXG4gKiBtYXRyaXggaXMgcGFyYWxsZWwtcHJlc2VydmluZywgaS5lLiBhbnkgY29tYmluYXRpb24gb2Ygcm90YXRpb24sIHNjYWxpbmcgYW5kXG4gKiB0cmFuc2xhdGlvbiwgYnV0IG5vdCBhIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uICBSZXR1cm5zIGEgdmVjdG9yIHdpdGggM1xuICogZW50cmllcy5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gbSBUaGUgbWF0cml4LlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC92My5WZWMzfSB2IFRoZSBub3JtYWwuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3YzLlZlYzN9IFtkc3RdIFRoZSBkaXJlY3Rpb24uIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC92My5WZWMzfSBUaGUgdHJhbnNmb3JtZWQgbm9ybWFsLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL200XG4gKi9cbmZ1bmN0aW9uIHRyYW5zZm9ybU5vcm1hbChtLCB2LCBkc3QpIHtcbiAgZHN0ID0gZHN0IHx8IGNyZWF0ZSgpO1xuICBjb25zdCBtaSA9IGludmVyc2UobSk7XG4gIGNvbnN0IHYwID0gdlswXTtcbiAgY29uc3QgdjEgPSB2WzFdO1xuICBjb25zdCB2MiA9IHZbMl07XG5cbiAgZHN0WzBdID0gdjAgKiBtaVswICogNCArIDBdICsgdjEgKiBtaVswICogNCArIDFdICsgdjIgKiBtaVswICogNCArIDJdO1xuICBkc3RbMV0gPSB2MCAqIG1pWzEgKiA0ICsgMF0gKyB2MSAqIG1pWzEgKiA0ICsgMV0gKyB2MiAqIG1pWzEgKiA0ICsgMl07XG4gIGRzdFsyXSA9IHYwICogbWlbMiAqIDQgKyAwXSArIHYxICogbWlbMiAqIDQgKyAxXSArIHYyICogbWlbMiAqIDQgKyAyXTtcblxuICByZXR1cm4gZHN0O1xufVxuXG52YXIgbTQgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgYXhpc1JvdGF0ZTogYXhpc1JvdGF0ZSxcbiAgYXhpc1JvdGF0aW9uOiBheGlzUm90YXRpb24sXG4gIGNvcHk6IGNvcHkkMSxcbiAgZnJ1c3R1bTogZnJ1c3R1bSxcbiAgZ2V0QXhpczogZ2V0QXhpcyxcbiAgZ2V0VHJhbnNsYXRpb246IGdldFRyYW5zbGF0aW9uLFxuICBpZGVudGl0eTogaWRlbnRpdHksXG4gIGludmVyc2U6IGludmVyc2UsXG4gIGxvb2tBdDogbG9va0F0LFxuICBtdWx0aXBseTogbXVsdGlwbHkkMSxcbiAgbmVnYXRlOiBuZWdhdGUkMSxcbiAgb3J0aG86IG9ydGhvLFxuICBwZXJzcGVjdGl2ZTogcGVyc3BlY3RpdmUsXG4gIHJvdGF0ZVg6IHJvdGF0ZVgsXG4gIHJvdGF0ZVk6IHJvdGF0ZVksXG4gIHJvdGF0ZVo6IHJvdGF0ZVosXG4gIHJvdGF0aW9uWDogcm90YXRpb25YLFxuICByb3RhdGlvblk6IHJvdGF0aW9uWSxcbiAgcm90YXRpb25aOiByb3RhdGlvblosXG4gIHNjYWxlOiBzY2FsZSxcbiAgc2NhbGluZzogc2NhbGluZyxcbiAgc2V0QXhpczogc2V0QXhpcyxcbiAgc2V0RGVmYXVsdFR5cGU6IHNldERlZmF1bHRUeXBlJDEsXG4gIHNldFRyYW5zbGF0aW9uOiBzZXRUcmFuc2xhdGlvbixcbiAgdHJhbnNmb3JtRGlyZWN0aW9uOiB0cmFuc2Zvcm1EaXJlY3Rpb24sXG4gIHRyYW5zZm9ybU5vcm1hbDogdHJhbnNmb3JtTm9ybWFsLFxuICB0cmFuc2Zvcm1Qb2ludDogdHJhbnNmb3JtUG9pbnQsXG4gIHRyYW5zbGF0ZTogdHJhbnNsYXRlLFxuICB0cmFuc2xhdGlvbjogdHJhbnNsYXRpb24sXG4gIHRyYW5zcG9zZTogdHJhbnNwb3NlXG59KTtcblxuLypcbiAqIENvcHlyaWdodCAyMDE5IEdyZWdnIFRhdmFyZXNcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLFxuICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvblxuICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsXG4gKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcbiAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMXG4gKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbiAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVJcbiAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG4vKiBEYXRhVHlwZSAqL1xuY29uc3QgQllURSAgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxNDAwO1xuY29uc3QgVU5TSUdORURfQllURSAgICAgICAgICAgICAgICAgID0gMHgxNDAxO1xuY29uc3QgU0hPUlQgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxNDAyO1xuY29uc3QgVU5TSUdORURfU0hPUlQgICAgICAgICAgICAgICAgID0gMHgxNDAzO1xuY29uc3QgSU5UICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxNDA0O1xuY29uc3QgVU5TSUdORURfSU5UICAgICAgICAgICAgICAgICAgID0gMHgxNDA1O1xuY29uc3QgRkxPQVQgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxNDA2O1xuY29uc3QgVU5TSUdORURfU0hPUlRfNF80XzRfNCAgICAgICA9IDB4ODAzMztcbmNvbnN0IFVOU0lHTkVEX1NIT1JUXzVfNV81XzEgICAgICAgPSAweDgwMzQ7XG5jb25zdCBVTlNJR05FRF9TSE9SVF81XzZfNSAgICAgICAgID0gMHg4MzYzO1xuY29uc3QgSEFMRl9GTE9BVCAgICAgICAgICAgICAgICAgICA9IDB4MTQwQjtcbmNvbnN0IFVOU0lHTkVEX0lOVF8yXzEwXzEwXzEwX1JFViAgPSAweDgzNjg7XG5jb25zdCBVTlNJR05FRF9JTlRfMTBGXzExRl8xMUZfUkVWID0gMHg4QzNCO1xuY29uc3QgVU5TSUdORURfSU5UXzVfOV85XzlfUkVWICAgICA9IDB4OEMzRTtcbmNvbnN0IEZMT0FUXzMyX1VOU0lHTkVEX0lOVF8yNF84X1JFViA9IDB4OERBRDtcbmNvbnN0IFVOU0lHTkVEX0lOVF8yNF84ICAgICAgICAgICAgPSAweDg0RkE7XG5cbmNvbnN0IGdsVHlwZVRvVHlwZWRBcnJheSA9IHt9O1xue1xuICBjb25zdCB0dCA9IGdsVHlwZVRvVHlwZWRBcnJheTtcbiAgdHRbQllURV0gICAgICAgICAgICAgICAgICAgICAgICAgICA9IEludDhBcnJheTtcbiAgdHRbVU5TSUdORURfQllURV0gICAgICAgICAgICAgICAgICA9IFVpbnQ4QXJyYXk7XG4gIHR0W1NIT1JUXSAgICAgICAgICAgICAgICAgICAgICAgICAgPSBJbnQxNkFycmF5O1xuICB0dFtVTlNJR05FRF9TSE9SVF0gICAgICAgICAgICAgICAgID0gVWludDE2QXJyYXk7XG4gIHR0W0lOVF0gICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBJbnQzMkFycmF5O1xuICB0dFtVTlNJR05FRF9JTlRdICAgICAgICAgICAgICAgICAgID0gVWludDMyQXJyYXk7XG4gIHR0W0ZMT0FUXSAgICAgICAgICAgICAgICAgICAgICAgICAgPSBGbG9hdDMyQXJyYXk7XG4gIHR0W1VOU0lHTkVEX1NIT1JUXzRfNF80XzRdICAgICAgICAgPSBVaW50MTZBcnJheTtcbiAgdHRbVU5TSUdORURfU0hPUlRfNV81XzVfMV0gICAgICAgICA9IFVpbnQxNkFycmF5O1xuICB0dFtVTlNJR05FRF9TSE9SVF81XzZfNV0gICAgICAgICAgID0gVWludDE2QXJyYXk7XG4gIHR0W0hBTEZfRkxPQVRdICAgICAgICAgICAgICAgICAgICAgPSBVaW50MTZBcnJheTtcbiAgdHRbVU5TSUdORURfSU5UXzJfMTBfMTBfMTBfUkVWXSAgICA9IFVpbnQzMkFycmF5O1xuICB0dFtVTlNJR05FRF9JTlRfMTBGXzExRl8xMUZfUkVWXSAgID0gVWludDMyQXJyYXk7XG4gIHR0W1VOU0lHTkVEX0lOVF81XzlfOV85X1JFVl0gICAgICAgPSBVaW50MzJBcnJheTtcbiAgdHRbRkxPQVRfMzJfVU5TSUdORURfSU5UXzI0XzhfUkVWXSA9IFVpbnQzMkFycmF5O1xuICB0dFtVTlNJR05FRF9JTlRfMjRfOF0gICAgICAgICAgICAgID0gVWludDMyQXJyYXk7XG59XG5cbi8qKlxuICogR2V0IHRoZSBHTCB0eXBlIGZvciBhIHR5cGVkQXJyYXlcbiAqIEBwYXJhbSB7QXJyYXlCdWZmZXJWaWV3fSB0eXBlZEFycmF5IGEgdHlwZWRBcnJheVxuICogQHJldHVybiB7bnVtYmVyfSB0aGUgR0wgdHlwZSBmb3IgYXJyYXkuIEZvciBleGFtcGxlIHBhc3MgaW4gYW4gYEludDhBcnJheWAgYW5kIGBnbC5CWVRFYCB3aWxsXG4gKiAgIGJlIHJldHVybmVkLiBQYXNzIGluIGEgYFVpbnQzMkFycmF5YCBhbmQgYGdsLlVOU0lHTkVEX0lOVGAgd2lsbCBiZSByZXR1cm5lZFxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3R5cGVkQXJyYXlcbiAqL1xuZnVuY3Rpb24gZ2V0R0xUeXBlRm9yVHlwZWRBcnJheSh0eXBlZEFycmF5KSB7XG4gIGlmICh0eXBlZEFycmF5IGluc3RhbmNlb2YgSW50OEFycmF5KSAgICAgICAgIHsgcmV0dXJuIEJZVEU7IH0gICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgaWYgKHR5cGVkQXJyYXkgaW5zdGFuY2VvZiBVaW50OEFycmF5KSAgICAgICAgeyByZXR1cm4gVU5TSUdORURfQllURTsgfSAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICBpZiAodHlwZWRBcnJheSBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5KSB7IHJldHVybiBVTlNJR05FRF9CWVRFOyB9ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIGlmICh0eXBlZEFycmF5IGluc3RhbmNlb2YgSW50MTZBcnJheSkgICAgICAgIHsgcmV0dXJuIFNIT1JUOyB9ICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgaWYgKHR5cGVkQXJyYXkgaW5zdGFuY2VvZiBVaW50MTZBcnJheSkgICAgICAgeyByZXR1cm4gVU5TSUdORURfU0hPUlQ7IH0gLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICBpZiAodHlwZWRBcnJheSBpbnN0YW5jZW9mIEludDMyQXJyYXkpICAgICAgICB7IHJldHVybiBJTlQ7IH0gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIGlmICh0eXBlZEFycmF5IGluc3RhbmNlb2YgVWludDMyQXJyYXkpICAgICAgIHsgcmV0dXJuIFVOU0lHTkVEX0lOVDsgfSAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgaWYgKHR5cGVkQXJyYXkgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkpICAgICAgeyByZXR1cm4gRkxPQVQ7IH0gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICB0aHJvdyBuZXcgRXJyb3IoJ3Vuc3VwcG9ydGVkIHR5cGVkIGFycmF5IHR5cGUnKTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIEdMIHR5cGUgZm9yIGEgdHlwZWRBcnJheSB0eXBlXG4gKiBAcGFyYW0ge0FycmF5QnVmZmVyVmlld30gdHlwZWRBcnJheVR5cGUgYSB0eXBlZEFycmF5IGNvbnN0cnVjdG9yXG4gKiBAcmV0dXJuIHtudW1iZXJ9IHRoZSBHTCB0eXBlIGZvciB0eXBlLiBGb3IgZXhhbXBsZSBwYXNzIGluIGBJbnQ4QXJyYXlgIGFuZCBgZ2wuQllURWAgd2lsbFxuICogICBiZSByZXR1cm5lZC4gUGFzcyBpbiBgVWludDMyQXJyYXlgIGFuZCBgZ2wuVU5TSUdORURfSU5UYCB3aWxsIGJlIHJldHVybmVkXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdHlwZWRBcnJheVxuICovXG5mdW5jdGlvbiBnZXRHTFR5cGVGb3JUeXBlZEFycmF5VHlwZSh0eXBlZEFycmF5VHlwZSkge1xuICBpZiAodHlwZWRBcnJheVR5cGUgPT09IEludDhBcnJheSkgICAgICAgICB7IHJldHVybiBCWVRFOyB9ICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIGlmICh0eXBlZEFycmF5VHlwZSA9PT0gVWludDhBcnJheSkgICAgICAgIHsgcmV0dXJuIFVOU0lHTkVEX0JZVEU7IH0gIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgaWYgKHR5cGVkQXJyYXlUeXBlID09PSBVaW50OENsYW1wZWRBcnJheSkgeyByZXR1cm4gVU5TSUdORURfQllURTsgfSAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICBpZiAodHlwZWRBcnJheVR5cGUgPT09IEludDE2QXJyYXkpICAgICAgICB7IHJldHVybiBTSE9SVDsgfSAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIGlmICh0eXBlZEFycmF5VHlwZSA9PT0gVWludDE2QXJyYXkpICAgICAgIHsgcmV0dXJuIFVOU0lHTkVEX1NIT1JUOyB9IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgaWYgKHR5cGVkQXJyYXlUeXBlID09PSBJbnQzMkFycmF5KSAgICAgICAgeyByZXR1cm4gSU5UOyB9ICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICBpZiAodHlwZWRBcnJheVR5cGUgPT09IFVpbnQzMkFycmF5KSAgICAgICB7IHJldHVybiBVTlNJR05FRF9JTlQ7IH0gICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIGlmICh0eXBlZEFycmF5VHlwZSA9PT0gRmxvYXQzMkFycmF5KSAgICAgIHsgcmV0dXJuIEZMT0FUOyB9ICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgdGhyb3cgbmV3IEVycm9yKCd1bnN1cHBvcnRlZCB0eXBlZCBhcnJheSB0eXBlJyk7XG59XG5cbi8qKlxuICogR2V0IHRoZSB0eXBlZCBhcnJheSBjb25zdHJ1Y3RvciBmb3IgYSBnaXZlbiBHTCB0eXBlXG4gKiBAcGFyYW0ge251bWJlcn0gdHlwZSB0aGUgR0wgdHlwZS4gKGVnOiBgZ2wuVU5TSUdORURfSU5UYClcbiAqIEByZXR1cm4ge2Z1bmN0aW9ufSB0aGUgY29uc3RydWN0b3IgZm9yIGEgdGhlIGNvcnJlc3BvbmRpbmcgdHlwZWQgYXJyYXkuIChlZy4gYFVpbnQzMkFycmF5YCkuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdHlwZWRBcnJheVxuICovXG5mdW5jdGlvbiBnZXRUeXBlZEFycmF5VHlwZUZvckdMVHlwZSh0eXBlKSB7XG4gIGNvbnN0IENUT1IgPSBnbFR5cGVUb1R5cGVkQXJyYXlbdHlwZV07XG4gIGlmICghQ1RPUikge1xuICAgIHRocm93IG5ldyBFcnJvcigndW5rbm93biBnbCB0eXBlJyk7XG4gIH1cbiAgcmV0dXJuIENUT1I7XG59XG5cbmNvbnN0IGlzQXJyYXlCdWZmZXIgPSB0eXBlb2YgU2hhcmVkQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnXG4gID8gZnVuY3Rpb24gaXNBcnJheUJ1ZmZlck9yU2hhcmVkQXJyYXlCdWZmZXIoYSkge1xuICAgIHJldHVybiBhICYmIGEuYnVmZmVyICYmIChhLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyIHx8IGEuYnVmZmVyIGluc3RhbmNlb2YgU2hhcmVkQXJyYXlCdWZmZXIpO1xuICB9XG4gIDogZnVuY3Rpb24gaXNBcnJheUJ1ZmZlcihhKSB7XG4gICAgcmV0dXJuIGEgJiYgYS5idWZmZXIgJiYgYS5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcjtcbiAgfTtcblxudmFyIHR5cGVkYXJyYXlzID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIGdldEdMVHlwZUZvclR5cGVkQXJyYXk6IGdldEdMVHlwZUZvclR5cGVkQXJyYXksXG4gIGdldEdMVHlwZUZvclR5cGVkQXJyYXlUeXBlOiBnZXRHTFR5cGVGb3JUeXBlZEFycmF5VHlwZSxcbiAgZ2V0VHlwZWRBcnJheVR5cGVGb3JHTFR5cGU6IGdldFR5cGVkQXJyYXlUeXBlRm9yR0xUeXBlLFxuICBpc0FycmF5QnVmZmVyOiBpc0FycmF5QnVmZmVyXG59KTtcblxuLypcbiAqIENvcHlyaWdodCAyMDE5IEdyZWdnIFRhdmFyZXNcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLFxuICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvblxuICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsXG4gKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcbiAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMXG4gKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbiAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVJcbiAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG4vKiBlc2xpbnQgbm8tY29uc29sZTogXCJvZmZcIiAqL1xuXG4vKipcbiAqIENvcHkgbmFtZWQgcHJvcGVydGllc1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nW119IG5hbWVzIG5hbWVzIG9mIHByb3BlcnRpZXMgdG8gY29weVxuICogQHBhcmFtIHtvYmplY3R9IHNyYyBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIGZyb21cbiAqIEBwYXJhbSB7b2JqZWN0fSBkc3Qgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyB0b1xuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY29weU5hbWVkUHJvcGVydGllcyhuYW1lcywgc3JjLCBkc3QpIHtcbiAgbmFtZXMuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gICAgY29uc3QgdmFsdWUgPSBzcmNbbmFtZV07XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGRzdFtuYW1lXSA9IHZhbHVlO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogQ29waWVzIHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgdG8gZGVzdCBvbmx5IGlmIGEgbWF0Y2hpbmcga2V5IGlzIGluIGRlc3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCA/Pn0gc3JjIHRoZSBzb3VyY2VcbiAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsID8+fSBkc3QgdGhlIGRlc3RcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNvcHlFeGlzdGluZ1Byb3BlcnRpZXMoc3JjLCBkc3QpIHtcbiAgT2JqZWN0LmtleXMoZHN0KS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgIGlmIChkc3QuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBzcmMuaGFzT3duUHJvcGVydHkoa2V5KSkgeyAgLyogZXNsaW50IG5vLXByb3RvdHlwZS1idWlsdGluczogMCAqL1xuICAgICAgZHN0W2tleV0gPSBzcmNba2V5XTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBlcnJvciguLi5hcmdzKSB7XG4gIGNvbnNvbGUuZXJyb3IoLi4uYXJncyk7XG59XG5cbmZ1bmN0aW9uIHdhcm4oLi4uYXJncykge1xuICBjb25zb2xlLndhcm4oLi4uYXJncyk7XG59XG5cbmZ1bmN0aW9uIGlzQnVmZmVyKGdsLCB0KSB7XG4gIHJldHVybiB0eXBlb2YgV2ViR0xCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHQgaW5zdGFuY2VvZiBXZWJHTEJ1ZmZlcjtcbn1cblxuZnVuY3Rpb24gaXNSZW5kZXJidWZmZXIoZ2wsIHQpIHtcbiAgcmV0dXJuIHR5cGVvZiBXZWJHTFJlbmRlcmJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdCBpbnN0YW5jZW9mIFdlYkdMUmVuZGVyYnVmZmVyO1xufVxuXG5mdW5jdGlvbiBpc1NoYWRlcihnbCwgdCkge1xuICByZXR1cm4gdHlwZW9mIFdlYkdMU2hhZGVyICE9PSAndW5kZWZpbmVkJyAmJiB0IGluc3RhbmNlb2YgV2ViR0xTaGFkZXI7XG59XG5cbmZ1bmN0aW9uIGlzVGV4dHVyZShnbCwgdCkge1xuICByZXR1cm4gdHlwZW9mIFdlYkdMVGV4dHVyZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdCBpbnN0YW5jZW9mIFdlYkdMVGV4dHVyZTtcbn1cblxuZnVuY3Rpb24gaXNTYW1wbGVyKGdsLCB0KSB7XG4gIHJldHVybiB0eXBlb2YgV2ViR0xTYW1wbGVyICE9PSAndW5kZWZpbmVkJyAmJiB0IGluc3RhbmNlb2YgV2ViR0xTYW1wbGVyO1xufVxuXG4vKlxuICogQ29weXJpZ2h0IDIwMTkgR3JlZ2cgVGF2YXJlc1xuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4gKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksXG4gKiB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uXG4gKiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSxcbiAqIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZVxuICogU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuICogYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hBTExcbiAqIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4gKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lOR1xuICogRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUlxuICogREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cbmNvbnN0IFNUQVRJQ19EUkFXICAgICAgICAgICAgICAgICAgPSAweDg4ZTQ7XG5jb25zdCBBUlJBWV9CVUZGRVIgICAgICAgICAgICAgICAgID0gMHg4ODkyO1xuY29uc3QgRUxFTUVOVF9BUlJBWV9CVUZGRVIgICAgICAgICA9IDB4ODg5MztcbmNvbnN0IEJVRkZFUl9TSVpFICAgICAgICAgICAgICAgICAgPSAweDg3NjQ7XG5cbmNvbnN0IEJZVEUkMSAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4MTQwMDtcbmNvbnN0IFVOU0lHTkVEX0JZVEUkMSAgICAgICAgICAgICAgICA9IDB4MTQwMTtcbmNvbnN0IFNIT1JUJDEgICAgICAgICAgICAgICAgICAgICAgICA9IDB4MTQwMjtcbmNvbnN0IFVOU0lHTkVEX1NIT1JUJDEgICAgICAgICAgICAgICA9IDB4MTQwMztcbmNvbnN0IElOVCQxICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4MTQwNDtcbmNvbnN0IFVOU0lHTkVEX0lOVCQxICAgICAgICAgICAgICAgICA9IDB4MTQwNTtcbmNvbnN0IEZMT0FUJDEgICAgICAgICAgICAgICAgICAgICAgICA9IDB4MTQwNjtcbmNvbnN0IGRlZmF1bHRzID0ge1xuICBhdHRyaWJQcmVmaXg6IFwiXCIsXG59O1xuXG4vKipcbiAqIFNldHMgdGhlIGRlZmF1bHQgYXR0cmliIHByZWZpeFxuICpcbiAqIFdoZW4gd3JpdGluZyBzaGFkZXJzIEkgcHJlZmVyIHRvIG5hbWUgYXR0cmlidXRlcyB3aXRoIGBhX2AsIHVuaWZvcm1zIHdpdGggYHVfYCBhbmQgdmFyeWluZ3Mgd2l0aCBgdl9gXG4gKiBhcyBpdCBtYWtlcyBpdCBjbGVhciB3aGVyZSB0aGV5IGNhbWUgZnJvbS4gQnV0LCB3aGVuIGJ1aWxkaW5nIGdlb21ldHJ5IEkgcHJlZmVyIHVzaW5nIHVuLXByZWZpeGVkIG5hbWVzLlxuICpcbiAqIEluIG90aGVyIHdvcmRzIEknbGwgY3JlYXRlIGFycmF5cyBvZiBnZW9tZXRyeSBsaWtlIHRoaXNcbiAqXG4gKiAgICAgdmFyIGFycmF5cyA9IHtcbiAqICAgICAgIHBvc2l0aW9uOiAuLi5cbiAqICAgICAgIG5vcm1hbDogLi4uXG4gKiAgICAgICB0ZXhjb29yZDogLi4uXG4gKiAgICAgfTtcbiAqXG4gKiBCdXQgbmVlZCB0aG9zZSBtYXBwZWQgdG8gYXR0cmlidXRlcyBhbmQgbXkgYXR0cmlidXRlcyBzdGFydCB3aXRoIGBhX2AuXG4gKlxuICogQGRlcHJlY2F0ZWQgc2VlIHtAbGluayBtb2R1bGU6dHdnbC5zZXREZWZhdWx0c31cbiAqIEBwYXJhbSB7c3RyaW5nfSBwcmVmaXggcHJlZml4IGZvciBhdHRyaWJzXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvYXR0cmlidXRlc1xuICovXG5mdW5jdGlvbiBzZXRBdHRyaWJ1dGVQcmVmaXgocHJlZml4KSB7XG4gIGRlZmF1bHRzLmF0dHJpYlByZWZpeCA9IHByZWZpeDtcbn1cblxuZnVuY3Rpb24gc2V0RGVmYXVsdHMobmV3RGVmYXVsdHMpIHtcbiAgY29weUV4aXN0aW5nUHJvcGVydGllcyhuZXdEZWZhdWx0cywgZGVmYXVsdHMpO1xufVxuXG5mdW5jdGlvbiBzZXRCdWZmZXJGcm9tVHlwZWRBcnJheShnbCwgdHlwZSwgYnVmZmVyLCBhcnJheSwgZHJhd1R5cGUpIHtcbiAgZ2wuYmluZEJ1ZmZlcih0eXBlLCBidWZmZXIpO1xuICBnbC5idWZmZXJEYXRhKHR5cGUsIGFycmF5LCBkcmF3VHlwZSB8fCBTVEFUSUNfRFJBVyk7XG59XG5cbi8qKlxuICogR2l2ZW4gdHlwZWQgYXJyYXkgY3JlYXRlcyBhIFdlYkdMQnVmZmVyIGFuZCBjb3BpZXMgdGhlIHR5cGVkIGFycmF5XG4gKiBpbnRvIGl0LlxuICpcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBBIFdlYkdMUmVuZGVyaW5nQ29udGV4dFxuICogQHBhcmFtIHtBcnJheUJ1ZmZlcnxTaGFyZWRBcnJheUJ1ZmZlcnxBcnJheUJ1ZmZlclZpZXd8V2ViR0xCdWZmZXJ9IHR5cGVkQXJyYXkgdGhlIHR5cGVkIGFycmF5LiBOb3RlOiBJZiBhIFdlYkdMQnVmZmVyIGlzIHBhc3NlZCBpbiBpdCB3aWxsIGp1c3QgYmUgcmV0dXJuZWQuIE5vIGFjdGlvbiB3aWxsIGJlIHRha2VuXG4gKiBAcGFyYW0ge251bWJlcn0gW3R5cGVdIHRoZSBHTCBiaW5kIHR5cGUgZm9yIHRoZSBidWZmZXIuIERlZmF1bHQgPSBgZ2wuQVJSQVlfQlVGRkVSYC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbZHJhd1R5cGVdIHRoZSBHTCBkcmF3IHR5cGUgZm9yIHRoZSBidWZmZXIuIERlZmF1bHQgPSAnZ2wuU1RBVElDX0RSQVdgLlxuICogQHJldHVybiB7V2ViR0xCdWZmZXJ9IHRoZSBjcmVhdGVkIFdlYkdMQnVmZmVyXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvYXR0cmlidXRlc1xuICovXG5mdW5jdGlvbiBjcmVhdGVCdWZmZXJGcm9tVHlwZWRBcnJheShnbCwgdHlwZWRBcnJheSwgdHlwZSwgZHJhd1R5cGUpIHtcbiAgaWYgKGlzQnVmZmVyKGdsLCB0eXBlZEFycmF5KSkge1xuICAgIHJldHVybiB0eXBlZEFycmF5O1xuICB9XG4gIHR5cGUgPSB0eXBlIHx8IEFSUkFZX0JVRkZFUjtcbiAgY29uc3QgYnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gIHNldEJ1ZmZlckZyb21UeXBlZEFycmF5KGdsLCB0eXBlLCBidWZmZXIsIHR5cGVkQXJyYXksIGRyYXdUeXBlKTtcbiAgcmV0dXJuIGJ1ZmZlcjtcbn1cblxuZnVuY3Rpb24gaXNJbmRpY2VzKG5hbWUpIHtcbiAgcmV0dXJuIG5hbWUgPT09IFwiaW5kaWNlc1wiO1xufVxuXG4vLyBUaGlzIGlzIHJlYWxseSBqdXN0IGEgZ3Vlc3MuIFRob3VnaCBJIGNhbid0IHJlYWxseSBpbWFnaW5lIHVzaW5nXG4vLyBhbnl0aGluZyBlbHNlPyBNYXliZSBmb3Igc29tZSBjb21wcmVzc2lvbj9cbmZ1bmN0aW9uIGdldE5vcm1hbGl6YXRpb25Gb3JUeXBlZEFycmF5KHR5cGVkQXJyYXkpIHtcbiAgaWYgKHR5cGVkQXJyYXkgaW5zdGFuY2VvZiBJbnQ4QXJyYXkpICAgIHsgcmV0dXJuIHRydWU7IH0gIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgaWYgKHR5cGVkQXJyYXkgaW5zdGFuY2VvZiBVaW50OEFycmF5KSAgIHsgcmV0dXJuIHRydWU7IH0gIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vLyBUaGlzIGlzIHJlYWxseSBqdXN0IGEgZ3Vlc3MuIFRob3VnaCBJIGNhbid0IHJlYWxseSBpbWFnaW5lIHVzaW5nXG4vLyBhbnl0aGluZyBlbHNlPyBNYXliZSBmb3Igc29tZSBjb21wcmVzc2lvbj9cbmZ1bmN0aW9uIGdldE5vcm1hbGl6YXRpb25Gb3JUeXBlZEFycmF5VHlwZSh0eXBlZEFycmF5VHlwZSkge1xuICBpZiAodHlwZWRBcnJheVR5cGUgPT09IEludDhBcnJheSkgICAgeyByZXR1cm4gdHJ1ZTsgfSAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICBpZiAodHlwZWRBcnJheVR5cGUgPT09IFVpbnQ4QXJyYXkpICAgeyByZXR1cm4gdHJ1ZTsgfSAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGdldEFycmF5KGFycmF5KSB7XG4gIHJldHVybiBhcnJheS5sZW5ndGggPyBhcnJheSA6IGFycmF5LmRhdGE7XG59XG5cbmNvbnN0IHRleGNvb3JkUkUgPSAvY29vcmR8dGV4dHVyZS9pO1xuY29uc3QgY29sb3JSRSA9IC9jb2xvcnxjb2xvdXIvaTtcblxuZnVuY3Rpb24gZ3Vlc3NOdW1Db21wb25lbnRzRnJvbU5hbWUobmFtZSwgbGVuZ3RoKSB7XG4gIGxldCBudW1Db21wb25lbnRzO1xuICBpZiAodGV4Y29vcmRSRS50ZXN0KG5hbWUpKSB7XG4gICAgbnVtQ29tcG9uZW50cyA9IDI7XG4gIH0gZWxzZSBpZiAoY29sb3JSRS50ZXN0KG5hbWUpKSB7XG4gICAgbnVtQ29tcG9uZW50cyA9IDQ7XG4gIH0gZWxzZSB7XG4gICAgbnVtQ29tcG9uZW50cyA9IDM7ICAvLyBwb3NpdGlvbiwgbm9ybWFscywgaW5kaWNlcyAuLi5cbiAgfVxuXG4gIGlmIChsZW5ndGggJSBudW1Db21wb25lbnRzID4gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2FuIG5vdCBndWVzcyBudW1Db21wb25lbnRzIGZvciBhdHRyaWJ1dGUgJyR7bmFtZX0nLiBUcmllZCAke251bUNvbXBvbmVudHN9IGJ1dCAke2xlbmd0aH0gdmFsdWVzIGlzIG5vdCBldmVubHkgZGl2aXNpYmxlIGJ5ICR7bnVtQ29tcG9uZW50c30uIFlvdSBzaG91bGQgc3BlY2lmeSBpdC5gKTtcbiAgfVxuXG4gIHJldHVybiBudW1Db21wb25lbnRzO1xufVxuXG5mdW5jdGlvbiBnZXROdW1Db21wb25lbnRzKGFycmF5LCBhcnJheU5hbWUpIHtcbiAgcmV0dXJuIGFycmF5Lm51bUNvbXBvbmVudHMgfHwgYXJyYXkuc2l6ZSB8fCBndWVzc051bUNvbXBvbmVudHNGcm9tTmFtZShhcnJheU5hbWUsIGdldEFycmF5KGFycmF5KS5sZW5ndGgpO1xufVxuXG5mdW5jdGlvbiBtYWtlVHlwZWRBcnJheShhcnJheSwgbmFtZSkge1xuICBpZiAoaXNBcnJheUJ1ZmZlcihhcnJheSkpIHtcbiAgICByZXR1cm4gYXJyYXk7XG4gIH1cblxuICBpZiAoaXNBcnJheUJ1ZmZlcihhcnJheS5kYXRhKSkge1xuICAgIHJldHVybiBhcnJheS5kYXRhO1xuICB9XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyYXkpKSB7XG4gICAgYXJyYXkgPSB7XG4gICAgICBkYXRhOiBhcnJheSxcbiAgICB9O1xuICB9XG5cbiAgbGV0IFR5cGUgPSBhcnJheS50eXBlO1xuICBpZiAoIVR5cGUpIHtcbiAgICBpZiAoaXNJbmRpY2VzKG5hbWUpKSB7XG4gICAgICBUeXBlID0gVWludDE2QXJyYXk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFR5cGUgPSBGbG9hdDMyQXJyYXk7XG4gICAgfVxuICB9XG4gIHJldHVybiBuZXcgVHlwZShhcnJheS5kYXRhKTtcbn1cblxuLyoqXG4gKiBUaGUgaW5mbyBmb3IgYW4gYXR0cmlidXRlLiBUaGlzIGlzIGVmZmVjdGl2ZWx5IGp1c3QgdGhlIGFyZ3VtZW50cyB0byBgZ2wudmVydGV4QXR0cmliUG9pbnRlcmAgcGx1cyB0aGUgV2ViR0xCdWZmZXJcbiAqIGZvciB0aGUgYXR0cmlidXRlLlxuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEF0dHJpYkluZm9cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyW118QXJyYXlCdWZmZXJWaWV3fSBbdmFsdWVdIGEgY29uc3RhbnQgdmFsdWUgZm9yIHRoZSBhdHRyaWJ1dGUuIE5vdGU6IGlmIHRoaXMgaXMgc2V0IHRoZSBhdHRyaWJ1dGUgd2lsbCBiZVxuICogICAgZGlzYWJsZWQgYW5kIHNldCB0byB0aGlzIGNvbnN0YW50IHZhbHVlIGFuZCBhbGwgb3RoZXIgdmFsdWVzIHdpbGwgYmUgaWdub3JlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbnVtQ29tcG9uZW50c10gdGhlIG51bWJlciBvZiBjb21wb25lbnRzIGZvciB0aGlzIGF0dHJpYnV0ZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbc2l6ZV0gc3lub255bSBmb3IgYG51bUNvbXBvbmVudHNgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0eXBlXSB0aGUgdHlwZSBvZiB0aGUgYXR0cmlidXRlIChlZy4gYGdsLkZMT0FUYCwgYGdsLlVOU0lHTkVEX0JZVEVgLCBldGMuLi4pIERlZmF1bHQgPSBgZ2wuRkxPQVRgXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtub3JtYWxpemVdIHdoZXRoZXIgb3Igbm90IHRvIG5vcm1hbGl6ZSB0aGUgZGF0YS4gRGVmYXVsdCA9IGZhbHNlXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29mZnNldF0gb2Zmc2V0IGludG8gYnVmZmVyIGluIGJ5dGVzLiBEZWZhdWx0ID0gMFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtzdHJpZGVdIHRoZSBzdHJpZGUgaW4gYnl0ZXMgcGVyIGVsZW1lbnQuIERlZmF1bHQgPSAwXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2Rpdmlzb3JdIHRoZSBkaXZpc29yIGluIGluc3RhbmNlcy4gRGVmYXVsdCA9IHVuZGVmaW5lZC4gTm90ZTogdW5kZWZpbmVkID0gZG9uJ3QgY2FsbCBnbC52ZXJ0ZXhBdHRyaWJEaXZpc29yXG4gKiAgICB3aGVyZSBhcyBhbnl0aGluZyBlbHNlID0gZG8gY2FsbCBpdCB3aXRoIHRoaXMgdmFsdWVcbiAqIEBwcm9wZXJ0eSB7V2ViR0xCdWZmZXJ9IGJ1ZmZlciB0aGUgYnVmZmVyIHRoYXQgY29udGFpbnMgdGhlIGRhdGEgZm9yIHRoaXMgYXR0cmlidXRlXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2RyYXdUeXBlXSB0aGUgZHJhdyB0eXBlIHBhc3NlZCB0byBnbC5idWZmZXJEYXRhLiBEZWZhdWx0ID0gZ2wuU1RBVElDX0RSQVdcbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbFxuICovXG5cbi8qKlxuICogVXNlIHRoaXMgdHlwZSBvZiBhcnJheSBzcGVjIHdoZW4gVFdHTCBjYW4ndCBndWVzcyB0aGUgdHlwZSBvciBudW1iZXIgb2YgY29tcG9uZW50cyBvZiBhbiBhcnJheVxuICogQHR5cGVkZWYge09iamVjdH0gRnVsbEFycmF5U3BlY1xuICogQHByb3BlcnR5IHtudW1iZXJbXXxBcnJheUJ1ZmZlclZpZXd9IFt2YWx1ZV0gYSBjb25zdGFudCB2YWx1ZSBmb3IgdGhlIGF0dHJpYnV0ZS4gTm90ZTogaWYgdGhpcyBpcyBzZXQgdGhlIGF0dHJpYnV0ZSB3aWxsIGJlXG4gKiAgICBkaXNhYmxlZCBhbmQgc2V0IHRvIHRoaXMgY29uc3RhbnQgdmFsdWUgYW5kIGFsbCBvdGhlciB2YWx1ZXMgd2lsbCBiZSBpZ25vcmVkLlxuICogQHByb3BlcnR5IHsobnVtYmVyfG51bWJlcltdfEFycmF5QnVmZmVyVmlldyl9IGRhdGEgVGhlIGRhdGEgb2YgdGhlIGFycmF5LiBBIG51bWJlciBhbG9uZSBiZWNvbWVzIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgb2YgdHlwZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbnVtQ29tcG9uZW50c10gbnVtYmVyIG9mIGNvbXBvbmVudHMgZm9yIGB2ZXJ0ZXhBdHRyaWJQb2ludGVyYC4gRGVmYXVsdCBpcyBiYXNlZCBvbiB0aGUgbmFtZSBvZiB0aGUgYXJyYXkuXG4gKiAgICBJZiBgY29vcmRgIGlzIGluIHRoZSBuYW1lIGFzc3VtZXMgYG51bUNvbXBvbmVudHMgPSAyYC5cbiAqICAgIElmIGBjb2xvcmAgaXMgaW4gdGhlIG5hbWUgYXNzdW1lcyBgbnVtQ29tcG9uZW50cyA9IDRgLlxuICogICAgb3RoZXJ3aXNlIGFzc3VtZXMgYG51bUNvbXBvbmVudHMgPSAzYFxuICogQHByb3BlcnR5IHtjb25zdHJ1Y3Rvcn0gW3R5cGVdIHR5cGUuIFRoaXMgaXMgb25seSB1c2VkIGlmIGBkYXRhYCBpcyBhIEphdmFTY3JpcHQgYXJyYXkuIEl0IGlzIHRoZSBjb25zdHJ1Y3RvciBmb3IgdGhlIHR5cGVkYXJyYXkuIChlZy4gYFVpbnQ4QXJyYXlgKS5cbiAqIEZvciBleGFtcGxlIGlmIHlvdSB3YW50IGNvbG9ycyBpbiBhIGBVaW50OEFycmF5YCB5b3UgbWlnaHQgaGF2ZSBhIGBGdWxsQXJyYXlTcGVjYCBsaWtlIGB7IHR5cGU6IFVpbnQ4QXJyYXksIGRhdGE6IFsyNTUsMCwyNTUsMjU1LCAuLi5dLCB9YC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbc2l6ZV0gc3lub255bSBmb3IgYG51bUNvbXBvbmVudHNgLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbbm9ybWFsaXplXSBub3JtYWxpemUgZm9yIGB2ZXJ0ZXhBdHRyaWJQb2ludGVyYC4gRGVmYXVsdCBpcyB0cnVlIGlmIHR5cGUgaXMgYEludDhBcnJheWAgb3IgYFVpbnQ4QXJyYXlgIG90aGVyd2lzZSBmYWxzZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbc3RyaWRlXSBzdHJpZGUgZm9yIGB2ZXJ0ZXhBdHRyaWJQb2ludGVyYC4gRGVmYXVsdCA9IDBcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb2Zmc2V0XSBvZmZzZXQgZm9yIGB2ZXJ0ZXhBdHRyaWJQb2ludGVyYC4gRGVmYXVsdCA9IDBcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZGl2aXNvcl0gZGl2aXNvciBmb3IgYHZlcnRleEF0dHJpYkRpdmlzb3JgLiBEZWZhdWx0ID0gdW5kZWZpbmVkLiBOb3RlOiB1bmRlZmluZWQgPSBkb24ndCBjYWxsIGdsLnZlcnRleEF0dHJpYkRpdmlzb3JcbiAqICAgIHdoZXJlIGFzIGFueXRoaW5nIGVsc2UgPSBkbyBjYWxsIGl0IHdpdGggdGhpcyB2YWx1ZVxuICogQHByb3BlcnR5IHtzdHJpbmd9IFthdHRyaWJdIG5hbWUgb2YgYXR0cmlidXRlIHRoaXMgYXJyYXkgbWFwcyB0by4gRGVmYXVsdHMgdG8gc2FtZSBuYW1lIGFzIGFycmF5IHByZWZpeGVkIGJ5IHRoZSBkZWZhdWx0IGF0dHJpYlByZWZpeC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbmFtZV0gc3lub255bSBmb3IgYGF0dHJpYmAuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2F0dHJpYk5hbWVdIHN5bm9ueW0gZm9yIGBhdHRyaWJgLlxuICogQHByb3BlcnR5IHtXZWJHTEJ1ZmZlcn0gW2J1ZmZlcl0gQnVmZmVyIHRvIHVzZSBmb3IgdGhpcyBhdHRyaWJ1dGUuIFRoaXMgbGV0cyB5b3UgdXNlIHlvdXIgb3duIGJ1ZmZlclxuICogICAgYnV0IHlvdSB3aWxsIG5lZWQgdG8gc3VwcGx5IGBudW1Db21wb25lbnRzYCBhbmQgYHR5cGVgLiBZb3UgY2FuIGVmZmVjdGl2ZWx5IHBhc3MgYW4gYEF0dHJpYkluZm9gXG4gKiAgICB0byBwcm92aWRlIHRoaXMuIEV4YW1wbGU6XG4gKlxuICogICAgICAgICBjb25zdCBidWZmZXJJbmZvMSA9IHR3Z2wuY3JlYXRlQnVmZmVySW5mb0Zyb21BcnJheXMoZ2wsIHtcbiAqICAgICAgICAgICBwb3NpdGlvbjogWzEsIDIsIDMsIC4uLiBdLFxuICogICAgICAgICB9KTtcbiAqICAgICAgICAgY29uc3QgYnVmZmVySW5mbzIgPSB0d2dsLmNyZWF0ZUJ1ZmZlckluZm9Gcm9tQXJyYXlzKGdsLCB7XG4gKiAgICAgICAgICAgcG9zaXRpb246IGJ1ZmZlckluZm8xLmF0dHJpYnMucG9zaXRpb24sICAvLyB1c2UgdGhlIHNhbWUgYnVmZmVyIGZyb20gYnVmZmVySW5mbzFcbiAqICAgICAgICAgfSk7XG4gKlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsXG4gKi9cblxuLyoqXG4gKiBBbiBpbmRpdmlkdWFsIGFycmF5IGluIHtAbGluayBtb2R1bGU6dHdnbC5BcnJheXN9XG4gKlxuICogV2hlbiBwYXNzZWQgdG8ge0BsaW5rIG1vZHVsZTp0d2dsLmNyZWF0ZUJ1ZmZlckluZm9Gcm9tQXJyYXlzfSBpZiBhbiBBcnJheVNwZWMgaXMgYG51bWJlcltdYCBvciBgQXJyYXlCdWZmZXJWaWV3YFxuICogdGhlIHR5cGVzIHdpbGwgYmUgZ3Vlc3NlZCBiYXNlZCBvbiB0aGUgbmFtZS4gYGluZGljZXNgIHdpbGwgYmUgYFVpbnQxNkFycmF5YCwgZXZlcnl0aGluZyBlbHNlIHdpbGxcbiAqIGJlIGBGbG9hdDMyQXJyYXlgLiBJZiBhbiBBcnJheVNwZWMgaXMgYSBudW1iZXIgaXQncyB0aGUgbnVtYmVyIG9mIGZsb2F0cyBmb3IgYW4gZW1wdHkgKHplcm9lZCkgYnVmZmVyLlxuICpcbiAqIEB0eXBlZGVmIHsobnVtYmVyfG51bWJlcltdfEFycmF5QnVmZmVyVmlld3xtb2R1bGU6dHdnbC5GdWxsQXJyYXlTcGVjKX0gQXJyYXlTcGVjXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2xcbiAqL1xuXG4vKipcbiAqIFRoaXMgaXMgYSBKYXZhU2NyaXB0IG9iamVjdCBvZiBhcnJheXMgYnkgbmFtZS4gVGhlIG5hbWVzIHNob3VsZCBtYXRjaCB5b3VyIHNoYWRlcidzIGF0dHJpYnV0ZXMuIElmIHlvdXJcbiAqIGF0dHJpYnV0ZXMgaGF2ZSBhIGNvbW1vbiBwcmVmaXggeW91IGNhbiBzcGVjaWZ5IGl0IGJ5IGNhbGxpbmcge0BsaW5rIG1vZHVsZTp0d2dsLnNldEF0dHJpYnV0ZVByZWZpeH0uXG4gKlxuICogICAgIEJhcmUgSmF2YVNjcmlwdCBBcnJheXNcbiAqXG4gKiAgICAgICAgIHZhciBhcnJheXMgPSB7XG4gKiAgICAgICAgICAgIHBvc2l0aW9uOiBbLTEsIDEsIDBdLFxuICogICAgICAgICAgICBub3JtYWw6IFswLCAxLCAwXSxcbiAqICAgICAgICAgICAgLi4uXG4gKiAgICAgICAgIH1cbiAqXG4gKiAgICAgQmFyZSBUeXBlZEFycmF5c1xuICpcbiAqICAgICAgICAgdmFyIGFycmF5cyA9IHtcbiAqICAgICAgICAgICAgcG9zaXRpb246IG5ldyBGbG9hdDMyQXJyYXkoWy0xLCAxLCAwXSksXG4gKiAgICAgICAgICAgIGNvbG9yOiBuZXcgVWludDhBcnJheShbMjU1LCAxMjgsIDY0LCAyNTVdKSxcbiAqICAgICAgICAgICAgLi4uXG4gKiAgICAgICAgIH1cbiAqXG4gKiAqICAgV2lsbCBndWVzcyBhdCBgbnVtQ29tcG9uZW50c2AgaWYgbm90IHNwZWNpZmllZCBiYXNlZCBvbiBuYW1lLlxuICpcbiAqICAgICBJZiBgY29vcmRgIGlzIGluIHRoZSBuYW1lIGFzc3VtZXMgYG51bUNvbXBvbmVudHMgPSAyYFxuICpcbiAqICAgICBJZiBgY29sb3JgIGlzIGluIHRoZSBuYW1lIGFzc3VtZXMgYG51bUNvbXBvbmVudHMgPSA0YFxuICpcbiAqICAgICBvdGhlcndpc2UgYXNzdW1lcyBgbnVtQ29tcG9uZW50cyA9IDNgXG4gKlxuICogT2JqZWN0cyB3aXRoIHZhcmlvdXMgZmllbGRzLiBTZWUge0BsaW5rIG1vZHVsZTp0d2dsLkZ1bGxBcnJheVNwZWN9LlxuICpcbiAqICAgICB2YXIgYXJyYXlzID0ge1xuICogICAgICAgcG9zaXRpb246IHsgbnVtQ29tcG9uZW50czogMywgZGF0YTogWzAsIDAsIDAsIDEwLCAwLCAwLCAwLCAxMCwgMCwgMTAsIDEwLCAwXSwgfSxcbiAqICAgICAgIHRleGNvb3JkOiB7IG51bUNvbXBvbmVudHM6IDIsIGRhdGE6IFswLCAwLCAwLCAxLCAxLCAwLCAxLCAxXSwgICAgICAgICAgICAgICAgIH0sXG4gKiAgICAgICBub3JtYWw6ICAgeyBudW1Db21wb25lbnRzOiAzLCBkYXRhOiBbMCwgMCwgMSwgMCwgMCwgMSwgMCwgMCwgMSwgMCwgMCwgMV0sICAgICB9LFxuICogICAgICAgaW5kaWNlczogIHsgbnVtQ29tcG9uZW50czogMywgZGF0YTogWzAsIDEsIDIsIDEsIDIsIDNdLCAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAqICAgICB9O1xuICpcbiAqIEB0eXBlZGVmIHtPYmplY3QuPHN0cmluZywgbW9kdWxlOnR3Z2wuQXJyYXlTcGVjPn0gQXJyYXlzXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2xcbiAqL1xuXG5cbi8qKlxuICogQ3JlYXRlcyBhIHNldCBvZiBhdHRyaWJ1dGUgZGF0YSBhbmQgV2ViR0xCdWZmZXJzIGZyb20gc2V0IG9mIGFycmF5c1xuICpcbiAqIEdpdmVuXG4gKlxuICogICAgICB2YXIgYXJyYXlzID0ge1xuICogICAgICAgIHBvc2l0aW9uOiB7IG51bUNvbXBvbmVudHM6IDMsIGRhdGE6IFswLCAwLCAwLCAxMCwgMCwgMCwgMCwgMTAsIDAsIDEwLCAxMCwgMF0sIH0sXG4gKiAgICAgICAgdGV4Y29vcmQ6IHsgbnVtQ29tcG9uZW50czogMiwgZGF0YTogWzAsIDAsIDAsIDEsIDEsIDAsIDEsIDFdLCAgICAgICAgICAgICAgICAgfSxcbiAqICAgICAgICBub3JtYWw6ICAgeyBudW1Db21wb25lbnRzOiAzLCBkYXRhOiBbMCwgMCwgMSwgMCwgMCwgMSwgMCwgMCwgMSwgMCwgMCwgMV0sICAgICB9LFxuICogICAgICAgIGNvbG9yOiAgICB7IG51bUNvbXBvbmVudHM6IDQsIGRhdGE6IFsyNTUsIDI1NSwgMjU1LCAyNTUsIDI1NSwgMCwgMCwgMjU1LCAwLCAwLCAyNTUsIDI1NV0sIHR5cGU6IFVpbnQ4QXJyYXksIH0sXG4gKiAgICAgICAgaW5kaWNlczogIHsgbnVtQ29tcG9uZW50czogMywgZGF0YTogWzAsIDEsIDIsIDEsIDIsIDNdLCAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAqICAgICAgfTtcbiAqXG4gKiByZXR1cm5zIHNvbWV0aGluZyBsaWtlXG4gKlxuICogICAgICB2YXIgYXR0cmlicyA9IHtcbiAqICAgICAgICBwb3NpdGlvbjogeyBudW1Db21wb25lbnRzOiAzLCB0eXBlOiBnbC5GTE9BVCwgICAgICAgICBub3JtYWxpemU6IGZhbHNlLCBidWZmZXI6IFdlYkdMQnVmZmVyLCB9LFxuICogICAgICAgIHRleGNvb3JkOiB7IG51bUNvbXBvbmVudHM6IDIsIHR5cGU6IGdsLkZMT0FULCAgICAgICAgIG5vcm1hbGl6ZTogZmFsc2UsIGJ1ZmZlcjogV2ViR0xCdWZmZXIsIH0sXG4gKiAgICAgICAgbm9ybWFsOiAgIHsgbnVtQ29tcG9uZW50czogMywgdHlwZTogZ2wuRkxPQVQsICAgICAgICAgbm9ybWFsaXplOiBmYWxzZSwgYnVmZmVyOiBXZWJHTEJ1ZmZlciwgfSxcbiAqICAgICAgICBjb2xvcjogICAgeyBudW1Db21wb25lbnRzOiA0LCB0eXBlOiBnbC5VTlNJR05FRF9CWVRFLCBub3JtYWxpemU6IHRydWUsICBidWZmZXI6IFdlYkdMQnVmZmVyLCB9LFxuICogICAgICB9O1xuICpcbiAqIG5vdGVzOlxuICpcbiAqICogICBBcnJheXMgY2FuIHRha2UgdmFyaW91cyBmb3Jtc1xuICpcbiAqICAgICBCYXJlIEphdmFTY3JpcHQgQXJyYXlzXG4gKlxuICogICAgICAgICB2YXIgYXJyYXlzID0ge1xuICogICAgICAgICAgICBwb3NpdGlvbjogWy0xLCAxLCAwXSxcbiAqICAgICAgICAgICAgbm9ybWFsOiBbMCwgMSwgMF0sXG4gKiAgICAgICAgICAgIC4uLlxuICogICAgICAgICB9XG4gKlxuICogICAgIEJhcmUgVHlwZWRBcnJheXNcbiAqXG4gKiAgICAgICAgIHZhciBhcnJheXMgPSB7XG4gKiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgRmxvYXQzMkFycmF5KFstMSwgMSwgMF0pLFxuICogICAgICAgICAgICBjb2xvcjogbmV3IFVpbnQ4QXJyYXkoWzI1NSwgMTI4LCA2NCwgMjU1XSksXG4gKiAgICAgICAgICAgIC4uLlxuICogICAgICAgICB9XG4gKlxuICogKiAgIFdpbGwgZ3Vlc3MgYXQgYG51bUNvbXBvbmVudHNgIGlmIG5vdCBzcGVjaWZpZWQgYmFzZWQgb24gbmFtZS5cbiAqXG4gKiAgICAgSWYgYGNvb3JkYCBpcyBpbiB0aGUgbmFtZSBhc3N1bWVzIGBudW1Db21wb25lbnRzID0gMmBcbiAqXG4gKiAgICAgSWYgYGNvbG9yYCBpcyBpbiB0aGUgbmFtZSBhc3N1bWVzIGBudW1Db21wb25lbnRzID0gNGBcbiAqXG4gKiAgICAgb3RoZXJ3aXNlIGFzc3VtZXMgYG51bUNvbXBvbmVudHMgPSAzYFxuICpcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgd2ViZ2wgcmVuZGVyaW5nIGNvbnRleHQuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsLkFycmF5c30gYXJyYXlzIFRoZSBhcnJheXNcbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuQnVmZmVySW5mb30gW3NyY0J1ZmZlckluZm9dIGEgQnVmZmVySW5mbyB0byBjb3B5IGZyb21cbiAqICAgVGhpcyBsZXRzIHlvdSBzaGFyZSBidWZmZXJzLiBBbnkgYXJyYXlzIHlvdSBzdXBwbHkgd2lsbCBvdmVycmlkZVxuICogICB0aGUgYnVmZmVycyBmcm9tIHNyY0J1ZmZlckluZm8uXG4gKiBAcmV0dXJuIHtPYmplY3QuPHN0cmluZywgbW9kdWxlOnR3Z2wuQXR0cmliSW5mbz59IHRoZSBhdHRyaWJzXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvYXR0cmlidXRlc1xuICovXG5mdW5jdGlvbiBjcmVhdGVBdHRyaWJzRnJvbUFycmF5cyhnbCwgYXJyYXlzKSB7XG4gIGNvbnN0IGF0dHJpYnMgPSB7fTtcbiAgT2JqZWN0LmtleXMoYXJyYXlzKS5mb3JFYWNoKGZ1bmN0aW9uKGFycmF5TmFtZSkge1xuICAgIGlmICghaXNJbmRpY2VzKGFycmF5TmFtZSkpIHtcbiAgICAgIGNvbnN0IGFycmF5ID0gYXJyYXlzW2FycmF5TmFtZV07XG4gICAgICBjb25zdCBhdHRyaWJOYW1lID0gYXJyYXkuYXR0cmliIHx8IGFycmF5Lm5hbWUgfHwgYXJyYXkuYXR0cmliTmFtZSB8fCAoZGVmYXVsdHMuYXR0cmliUHJlZml4ICsgYXJyYXlOYW1lKTtcbiAgICAgIGlmIChhcnJheS52YWx1ZSkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyYXkudmFsdWUpICYmICFpc0FycmF5QnVmZmVyKGFycmF5LnZhbHVlKSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignYXJyYXkudmFsdWUgaXMgbm90IGFycmF5IG9yIHR5cGVkYXJyYXknKTtcbiAgICAgICAgfVxuICAgICAgICBhdHRyaWJzW2F0dHJpYk5hbWVdID0ge1xuICAgICAgICAgIHZhbHVlOiBhcnJheS52YWx1ZSxcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBidWZmZXI7XG4gICAgICAgIGxldCB0eXBlO1xuICAgICAgICBsZXQgbm9ybWFsaXphdGlvbjtcbiAgICAgICAgbGV0IG51bUNvbXBvbmVudHM7XG4gICAgICAgIGlmIChhcnJheS5idWZmZXIgJiYgYXJyYXkuYnVmZmVyIGluc3RhbmNlb2YgV2ViR0xCdWZmZXIpIHtcbiAgICAgICAgICBidWZmZXIgPSBhcnJheS5idWZmZXI7XG4gICAgICAgICAgbnVtQ29tcG9uZW50cyA9IGFycmF5Lm51bUNvbXBvbmVudHMgfHwgYXJyYXkuc2l6ZTtcbiAgICAgICAgICB0eXBlID0gYXJyYXkudHlwZTtcbiAgICAgICAgICBub3JtYWxpemF0aW9uID0gYXJyYXkubm9ybWFsaXplO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcnJheSA9PT0gXCJudW1iZXJcIiB8fCB0eXBlb2YgYXJyYXkuZGF0YSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgIGNvbnN0IG51bVZhbHVlcyA9IGFycmF5LmRhdGEgfHwgYXJyYXk7XG4gICAgICAgICAgY29uc3QgYXJyYXlUeXBlID0gYXJyYXkudHlwZSB8fCBGbG9hdDMyQXJyYXk7XG4gICAgICAgICAgY29uc3QgbnVtQnl0ZXMgPSBudW1WYWx1ZXMgKiBhcnJheVR5cGUuQllURVNfUEVSX0VMRU1FTlQ7XG4gICAgICAgICAgdHlwZSA9IGdldEdMVHlwZUZvclR5cGVkQXJyYXlUeXBlKGFycmF5VHlwZSk7XG4gICAgICAgICAgbm9ybWFsaXphdGlvbiA9IGFycmF5Lm5vcm1hbGl6ZSAhPT0gdW5kZWZpbmVkID8gYXJyYXkubm9ybWFsaXplIDogZ2V0Tm9ybWFsaXphdGlvbkZvclR5cGVkQXJyYXlUeXBlKGFycmF5VHlwZSk7XG4gICAgICAgICAgbnVtQ29tcG9uZW50cyA9IGFycmF5Lm51bUNvbXBvbmVudHMgfHwgYXJyYXkuc2l6ZSB8fCBndWVzc051bUNvbXBvbmVudHNGcm9tTmFtZShhcnJheU5hbWUsIG51bVZhbHVlcyk7XG4gICAgICAgICAgYnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgICAgICAgZ2wuYmluZEJ1ZmZlcihBUlJBWV9CVUZGRVIsIGJ1ZmZlcik7XG4gICAgICAgICAgZ2wuYnVmZmVyRGF0YShBUlJBWV9CVUZGRVIsIG51bUJ5dGVzLCBhcnJheS5kcmF3VHlwZSB8fCBTVEFUSUNfRFJBVyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgdHlwZWRBcnJheSA9IG1ha2VUeXBlZEFycmF5KGFycmF5LCBhcnJheU5hbWUpO1xuICAgICAgICAgIGJ1ZmZlciA9IGNyZWF0ZUJ1ZmZlckZyb21UeXBlZEFycmF5KGdsLCB0eXBlZEFycmF5LCB1bmRlZmluZWQsIGFycmF5LmRyYXdUeXBlKTtcbiAgICAgICAgICB0eXBlID0gZ2V0R0xUeXBlRm9yVHlwZWRBcnJheSh0eXBlZEFycmF5KTtcbiAgICAgICAgICBub3JtYWxpemF0aW9uID0gYXJyYXkubm9ybWFsaXplICE9PSB1bmRlZmluZWQgPyBhcnJheS5ub3JtYWxpemUgOiBnZXROb3JtYWxpemF0aW9uRm9yVHlwZWRBcnJheSh0eXBlZEFycmF5KTtcbiAgICAgICAgICBudW1Db21wb25lbnRzID0gZ2V0TnVtQ29tcG9uZW50cyhhcnJheSwgYXJyYXlOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBhdHRyaWJzW2F0dHJpYk5hbWVdID0ge1xuICAgICAgICAgIGJ1ZmZlcjogICAgICAgIGJ1ZmZlcixcbiAgICAgICAgICBudW1Db21wb25lbnRzOiBudW1Db21wb25lbnRzLFxuICAgICAgICAgIHR5cGU6ICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgbm9ybWFsaXplOiAgICAgbm9ybWFsaXphdGlvbixcbiAgICAgICAgICBzdHJpZGU6ICAgICAgICBhcnJheS5zdHJpZGUgfHwgMCxcbiAgICAgICAgICBvZmZzZXQ6ICAgICAgICBhcnJheS5vZmZzZXQgfHwgMCxcbiAgICAgICAgICBkaXZpc29yOiAgICAgICBhcnJheS5kaXZpc29yID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBhcnJheS5kaXZpc29yLFxuICAgICAgICAgIGRyYXdUeXBlOiAgICAgIGFycmF5LmRyYXdUeXBlLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIGdsLmJpbmRCdWZmZXIoQVJSQVlfQlVGRkVSLCBudWxsKTtcbiAgcmV0dXJuIGF0dHJpYnM7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgY29udGVudHMgb2YgYSBidWZmZXIgYXR0YWNoZWQgdG8gYW4gYXR0cmliSW5mb1xuICpcbiAqIFRoaXMgaXMgaGVscGVyIGZ1bmN0aW9uIHRvIGR5bmFtaWNhbGx5IHVwZGF0ZSBhIGJ1ZmZlci5cbiAqXG4gKiBMZXQncyBzYXkgeW91IG1ha2UgYSBidWZmZXJJbmZvXG4gKlxuICogICAgIHZhciBhcnJheXMgPSB7XG4gKiAgICAgICAgcG9zaXRpb246IG5ldyBGbG9hdDMyQXJyYXkoWzAsIDAsIDAsIDEwLCAwLCAwLCAwLCAxMCwgMCwgMTAsIDEwLCAwXSksXG4gKiAgICAgICAgdGV4Y29vcmQ6IG5ldyBGbG9hdDMyQXJyYXkoWzAsIDAsIDAsIDEsIDEsIDAsIDEsIDFdKSxcbiAqICAgICAgICBub3JtYWw6ICAgbmV3IEZsb2F0MzJBcnJheShbMCwgMCwgMSwgMCwgMCwgMSwgMCwgMCwgMSwgMCwgMCwgMV0pLFxuICogICAgICAgIGluZGljZXM6ICBuZXcgVWludDE2QXJyYXkoWzAsIDEsIDIsIDEsIDIsIDNdKSxcbiAqICAgICB9O1xuICogICAgIHZhciBidWZmZXJJbmZvID0gdHdnbC5jcmVhdGVCdWZmZXJJbmZvRnJvbUFycmF5cyhnbCwgYXJyYXlzKTtcbiAqXG4gKiAgQW5kIHlvdSB3YW50IHRvIGR5bmFtaWNhbGx5IHVwZGF0ZSB0aGUgcG9zaXRpb25zLiBZb3UgY291bGQgZG8gdGhpc1xuICpcbiAqICAgICAvLyBhc3N1bWluZyBhcnJheXMucG9zaXRpb24gaGFzIGFscmVhZHkgYmVlbiB1cGRhdGVkIHdpdGggbmV3IGRhdGEuXG4gKiAgICAgdHdnbC5zZXRBdHRyaWJJbmZvQnVmZmVyRnJvbUFycmF5KGdsLCBidWZmZXJJbmZvLmF0dHJpYnMucG9zaXRpb24sIGFycmF5cy5wb3NpdGlvbik7XG4gKlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsXG4gKiBAcGFyYW0ge0F0dHJpYkluZm99IGF0dHJpYkluZm8gVGhlIGF0dHJpYkluZm8gd2hvJ3MgYnVmZmVyIGNvbnRlbnRzIHRvIHNldC4gTk9URTogSWYgeW91IGhhdmUgYW4gYXR0cmlidXRlIHByZWZpeFxuICogICB0aGUgbmFtZSBvZiB0aGUgYXR0cmlidXRlIHdpbGwgaW5jbHVkZSB0aGUgcHJlZml4LlxuICogQHBhcmFtIHtBcnJheVNwZWN9IGFycmF5IE5vdGU6IGl0IGlzIGFyZ3VhYmx5IGluZWZmaWNpZW50IHRvIHBhc3MgaW4gYW55dGhpbmcgYnV0IGEgdHlwZWQgYXJyYXkgYmVjYXVzZSBhbnl0aGluZ1xuICogICAgZWxzZSB3aWxsIGhhdmUgdG8gYmUgY29udmVydGVkIHRvIGEgdHlwZWQgYXJyYXkgYmVmb3JlIGl0IGNhbiBiZSB1c2VkIGJ5IFdlYkdMLiBEdXJpbmcgaW5pdCB0aW1lIHRoYXRcbiAqICAgIGluZWZmaWNpZW5jeSBpcyB1c3VhbGx5IG5vdCBpbXBvcnRhbnQgYnV0IGlmIHlvdSdyZSB1cGRhdGluZyBkYXRhIGR5bmFtaWNhbGx5IGJlc3QgdG8gYmUgZWZmaWNpZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IFtvZmZzZXRdIGFuIG9wdGlvbmFsIG9mZnNldCBpbnRvIHRoZSBidWZmZXIuIFRoaXMgaXMgb25seSBhbiBvZmZzZXQgaW50byB0aGUgV2ViR0wgYnVmZmVyXG4gKiAgICBub3QgdGhlIGFycmF5LiBUbyBwYXNzIGluIGFuIG9mZnNldCBpbnRvIHRoZSBhcnJheSBpdHNlbGYgdXNlIGEgdHlwZWQgYXJyYXkgYW5kIGNyZWF0ZSBhbiBgQXJyYXlCdWZmZXJWaWV3YFxuICogICAgZm9yIHRoZSBwb3J0aW9uIG9mIHRoZSBhcnJheSB5b3Ugd2FudCB0byB1c2UuXG4gKlxuICogICAgICAgIHZhciBzb21lQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDEwMDApOyAvLyBhbiBhcnJheSB3aXRoIDEwMDAgZmxvYXRzXG4gKiAgICAgICAgdmFyIHNvbWVTdWJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoc29tZUFycmF5LmJ1ZmZlciwgb2Zmc2V0SW5CeXRlcywgc2l6ZUluVW5pdHMpOyAvLyBhIHZpZXcgaW50byBzb21lQXJyYXlcbiAqXG4gKiAgICBOb3cgeW91IGNhbiBwYXNzIGBzb21lU3ViQXJyYXlgIGludG8gc2V0QXR0cmliSW5mb0J1ZmZlckZyb21BcnJheWBcbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9hdHRyaWJ1dGVzXG4gKi9cbmZ1bmN0aW9uIHNldEF0dHJpYkluZm9CdWZmZXJGcm9tQXJyYXkoZ2wsIGF0dHJpYkluZm8sIGFycmF5LCBvZmZzZXQpIHtcbiAgYXJyYXkgPSBtYWtlVHlwZWRBcnJheShhcnJheSk7XG4gIGlmIChvZmZzZXQgIT09IHVuZGVmaW5lZCkge1xuICAgIGdsLmJpbmRCdWZmZXIoQVJSQVlfQlVGRkVSLCBhdHRyaWJJbmZvLmJ1ZmZlcik7XG4gICAgZ2wuYnVmZmVyU3ViRGF0YShBUlJBWV9CVUZGRVIsIG9mZnNldCwgYXJyYXkpO1xuICB9IGVsc2Uge1xuICAgIHNldEJ1ZmZlckZyb21UeXBlZEFycmF5KGdsLCBBUlJBWV9CVUZGRVIsIGF0dHJpYkluZm8uYnVmZmVyLCBhcnJheSwgYXR0cmliSW5mby5kcmF3VHlwZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0Qnl0ZXNQZXJWYWx1ZUZvckdMVHlwZShnbCwgdHlwZSkge1xuICBpZiAodHlwZSA9PT0gQllURSQxKSAgICAgICAgICAgcmV0dXJuIDE7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIGlmICh0eXBlID09PSBVTlNJR05FRF9CWVRFJDEpICByZXR1cm4gMTsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgaWYgKHR5cGUgPT09IFNIT1JUJDEpICAgICAgICAgIHJldHVybiAyOyAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICBpZiAodHlwZSA9PT0gVU5TSUdORURfU0hPUlQkMSkgcmV0dXJuIDI7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIGlmICh0eXBlID09PSBJTlQkMSkgICAgICAgICAgICByZXR1cm4gNDsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgaWYgKHR5cGUgPT09IFVOU0lHTkVEX0lOVCQxKSAgIHJldHVybiA0OyAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICBpZiAodHlwZSA9PT0gRkxPQVQkMSkgICAgICAgICAgcmV0dXJuIDQ7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIHJldHVybiAwO1xufVxuXG4vLyBUcmllcyB0byBnZXQgdGhlIG51bWJlciBvZiBlbGVtZW50cyBmcm9tIGEgc2V0IG9mIGFycmF5cy5cbmNvbnN0IHBvc2l0aW9uS2V5cyA9IFsncG9zaXRpb24nLCAncG9zaXRpb25zJywgJ2FfcG9zaXRpb24nXTtcbmZ1bmN0aW9uIGdldE51bUVsZW1lbnRzRnJvbU5vbkluZGV4ZWRBcnJheXMoYXJyYXlzKSB7XG4gIGxldCBrZXk7XG4gIGxldCBpaTtcbiAgZm9yIChpaSA9IDA7IGlpIDwgcG9zaXRpb25LZXlzLmxlbmd0aDsgKytpaSkge1xuICAgIGtleSA9IHBvc2l0aW9uS2V5c1tpaV07XG4gICAgaWYgKGtleSBpbiBhcnJheXMpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBpZiAoaWkgPT09IHBvc2l0aW9uS2V5cy5sZW5ndGgpIHtcbiAgICBrZXkgPSBPYmplY3Qua2V5cyhhcnJheXMpWzBdO1xuICB9XG4gIGNvbnN0IGFycmF5ID0gYXJyYXlzW2tleV07XG4gIGNvbnN0IGxlbmd0aCA9IGdldEFycmF5KGFycmF5KS5sZW5ndGg7XG4gIGNvbnN0IG51bUNvbXBvbmVudHMgPSBnZXROdW1Db21wb25lbnRzKGFycmF5LCBrZXkpO1xuICBjb25zdCBudW1FbGVtZW50cyA9IGxlbmd0aCAvIG51bUNvbXBvbmVudHM7XG4gIGlmIChsZW5ndGggJSBudW1Db21wb25lbnRzID4gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgbnVtQ29tcG9uZW50cyAke251bUNvbXBvbmVudHN9IG5vdCBjb3JyZWN0IGZvciBsZW5ndGggJHtsZW5ndGh9YCk7XG4gIH1cbiAgcmV0dXJuIG51bUVsZW1lbnRzO1xufVxuXG5mdW5jdGlvbiBnZXROdW1FbGVtZW50c0Zyb21BdHRyaWJ1dGVzKGdsLCBhdHRyaWJzKSB7XG4gIGxldCBrZXk7XG4gIGxldCBpaTtcbiAgZm9yIChpaSA9IDA7IGlpIDwgcG9zaXRpb25LZXlzLmxlbmd0aDsgKytpaSkge1xuICAgIGtleSA9IHBvc2l0aW9uS2V5c1tpaV07XG4gICAgaWYgKGtleSBpbiBhdHRyaWJzKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAga2V5ID0gZGVmYXVsdHMuYXR0cmliUHJlZml4ICsga2V5O1xuICAgIGlmIChrZXkgaW4gYXR0cmlicykge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIGlmIChpaSA9PT0gcG9zaXRpb25LZXlzLmxlbmd0aCkge1xuICAgIGtleSA9IE9iamVjdC5rZXlzKGF0dHJpYnMpWzBdO1xuICB9XG4gIGNvbnN0IGF0dHJpYiA9IGF0dHJpYnNba2V5XTtcbiAgZ2wuYmluZEJ1ZmZlcihBUlJBWV9CVUZGRVIsIGF0dHJpYi5idWZmZXIpO1xuICBjb25zdCBudW1CeXRlcyA9IGdsLmdldEJ1ZmZlclBhcmFtZXRlcihBUlJBWV9CVUZGRVIsIEJVRkZFUl9TSVpFKTtcbiAgZ2wuYmluZEJ1ZmZlcihBUlJBWV9CVUZGRVIsIG51bGwpO1xuXG4gIGNvbnN0IGJ5dGVzUGVyVmFsdWUgPSBnZXRCeXRlc1BlclZhbHVlRm9yR0xUeXBlKGdsLCBhdHRyaWIudHlwZSk7XG4gIGNvbnN0IHRvdGFsRWxlbWVudHMgPSBudW1CeXRlcyAvIGJ5dGVzUGVyVmFsdWU7XG4gIGNvbnN0IG51bUNvbXBvbmVudHMgPSBhdHRyaWIubnVtQ29tcG9uZW50cyB8fCBhdHRyaWIuc2l6ZTtcbiAgLy8gVE9ETzogY2hlY2sgc3RyaWRlXG4gIGNvbnN0IG51bUVsZW1lbnRzID0gdG90YWxFbGVtZW50cyAvIG51bUNvbXBvbmVudHM7XG4gIGlmIChudW1FbGVtZW50cyAlIDEgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYG51bUNvbXBvbmVudHMgJHtudW1Db21wb25lbnRzfSBub3QgY29ycmVjdCBmb3IgbGVuZ3RoICR7bGVuZ3RofWApO1xuICB9XG4gIHJldHVybiBudW1FbGVtZW50cztcbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBCdWZmZXJJbmZvXG4gKiBAcHJvcGVydHkge251bWJlcn0gbnVtRWxlbWVudHMgVGhlIG51bWJlciBvZiBlbGVtZW50cyB0byBwYXNzIHRvIGBnbC5kcmF3QXJyYXlzYCBvciBgZ2wuZHJhd0VsZW1lbnRzYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZWxlbWVudFR5cGVdIFRoZSB0eXBlIG9mIGluZGljZXMgYFVOU0lHTkVEX0JZVEVgLCBgVU5TSUdORURfU0hPUlRgIGV0Yy4uXG4gKiBAcHJvcGVydHkge1dlYkdMQnVmZmVyfSBbaW5kaWNlc10gVGhlIGluZGljZXMgYEVMRU1FTlRfQVJSQVlfQlVGRkVSYCBpZiBhbnkgaW5kaWNlcyBleGlzdC5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0LjxzdHJpbmcsIG1vZHVsZTp0d2dsLkF0dHJpYkluZm8+fSBbYXR0cmlic10gVGhlIGF0dHJpYnMgYXBwcm9wcmlhdGUgdG8gY2FsbCBgc2V0QXR0cmlidXRlc2BcbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbFxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIEJ1ZmZlckluZm8gZnJvbSBhbiBvYmplY3Qgb2YgYXJyYXlzLlxuICpcbiAqIFRoaXMgY2FuIGJlIHBhc3NlZCB0byB7QGxpbmsgbW9kdWxlOnR3Z2wuc2V0QnVmZmVyc0FuZEF0dHJpYnV0ZXN9IGFuZCB0b1xuICoge0BsaW5rIG1vZHVsZTp0d2dsOmRyYXdCdWZmZXJJbmZvfS5cbiAqXG4gKiBHaXZlbiBhbiBvYmplY3QgbGlrZVxuICpcbiAqICAgICB2YXIgYXJyYXlzID0ge1xuICogICAgICAgcG9zaXRpb246IHsgbnVtQ29tcG9uZW50czogMywgZGF0YTogWzAsIDAsIDAsIDEwLCAwLCAwLCAwLCAxMCwgMCwgMTAsIDEwLCAwXSwgfSxcbiAqICAgICAgIHRleGNvb3JkOiB7IG51bUNvbXBvbmVudHM6IDIsIGRhdGE6IFswLCAwLCAwLCAxLCAxLCAwLCAxLCAxXSwgICAgICAgICAgICAgICAgIH0sXG4gKiAgICAgICBub3JtYWw6ICAgeyBudW1Db21wb25lbnRzOiAzLCBkYXRhOiBbMCwgMCwgMSwgMCwgMCwgMSwgMCwgMCwgMSwgMCwgMCwgMV0sICAgICB9LFxuICogICAgICAgaW5kaWNlczogIHsgbnVtQ29tcG9uZW50czogMywgZGF0YTogWzAsIDEsIDIsIDEsIDIsIDNdLCAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAqICAgICB9O1xuICpcbiAqICBDcmVhdGVzIGFuIEJ1ZmZlckluZm8gbGlrZSB0aGlzXG4gKlxuICogICAgIGJ1ZmZlckluZm8gPSB7XG4gKiAgICAgICBudW1FbGVtZW50czogNCwgICAgICAgIC8vIG9yIHdoYXRldmVyIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgaXNcbiAqICAgICAgIGluZGljZXM6IFdlYkdMQnVmZmVyLCAgLy8gdGhpcyBwcm9wZXJ0eSB3aWxsIG5vdCBleGlzdCBpZiB0aGVyZSBhcmUgbm8gaW5kaWNlc1xuICogICAgICAgYXR0cmliczoge1xuICogICAgICAgICBwb3NpdGlvbjogeyBidWZmZXI6IFdlYkdMQnVmZmVyLCBudW1Db21wb25lbnRzOiAzLCB9LFxuICogICAgICAgICBub3JtYWw6ICAgeyBidWZmZXI6IFdlYkdMQnVmZmVyLCBudW1Db21wb25lbnRzOiAzLCB9LFxuICogICAgICAgICB0ZXhjb29yZDogeyBidWZmZXI6IFdlYkdMQnVmZmVyLCBudW1Db21wb25lbnRzOiAyLCB9LFxuICogICAgICAgfSxcbiAqICAgICB9O1xuICpcbiAqICBUaGUgcHJvcGVydGllcyBvZiBhcnJheXMgY2FuIGJlIEphdmFTY3JpcHQgYXJyYXlzIGluIHdoaWNoIGNhc2UgdGhlIG51bWJlciBvZiBjb21wb25lbnRzXG4gKiAgd2lsbCBiZSBndWVzc2VkLlxuICpcbiAqICAgICB2YXIgYXJyYXlzID0ge1xuICogICAgICAgIHBvc2l0aW9uOiBbMCwgMCwgMCwgMTAsIDAsIDAsIDAsIDEwLCAwLCAxMCwgMTAsIDBdLFxuICogICAgICAgIHRleGNvb3JkOiBbMCwgMCwgMCwgMSwgMSwgMCwgMSwgMV0sXG4gKiAgICAgICAgbm9ybWFsOiAgIFswLCAwLCAxLCAwLCAwLCAxLCAwLCAwLCAxLCAwLCAwLCAxXSxcbiAqICAgICAgICBpbmRpY2VzOiAgWzAsIDEsIDIsIDEsIDIsIDNdLFxuICogICAgIH07XG4gKlxuICogIFRoZXkgY2FuIGFsc28gYmUgVHlwZWRBcnJheXNcbiAqXG4gKiAgICAgdmFyIGFycmF5cyA9IHtcbiAqICAgICAgICBwb3NpdGlvbjogbmV3IEZsb2F0MzJBcnJheShbMCwgMCwgMCwgMTAsIDAsIDAsIDAsIDEwLCAwLCAxMCwgMTAsIDBdKSxcbiAqICAgICAgICB0ZXhjb29yZDogbmV3IEZsb2F0MzJBcnJheShbMCwgMCwgMCwgMSwgMSwgMCwgMSwgMV0pLFxuICogICAgICAgIG5vcm1hbDogICBuZXcgRmxvYXQzMkFycmF5KFswLCAwLCAxLCAwLCAwLCAxLCAwLCAwLCAxLCAwLCAwLCAxXSksXG4gKiAgICAgICAgaW5kaWNlczogIG5ldyBVaW50MTZBcnJheShbMCwgMSwgMiwgMSwgMiwgM10pLFxuICogICAgIH07XG4gKlxuICogIE9yIEF1Z21lbnRlZFR5cGVkQXJyYXlzXG4gKlxuICogICAgIHZhciBwb3NpdGlvbnMgPSBjcmVhdGVBdWdtZW50ZWRUeXBlZEFycmF5KDMsIDQpO1xuICogICAgIHZhciB0ZXhjb29yZHMgPSBjcmVhdGVBdWdtZW50ZWRUeXBlZEFycmF5KDIsIDQpO1xuICogICAgIHZhciBub3JtYWxzICAgPSBjcmVhdGVBdWdtZW50ZWRUeXBlZEFycmF5KDMsIDQpO1xuICogICAgIHZhciBpbmRpY2VzICAgPSBjcmVhdGVBdWdtZW50ZWRUeXBlZEFycmF5KDMsIDIsIFVpbnQxNkFycmF5KTtcbiAqXG4gKiAgICAgcG9zaXRpb25zLnB1c2goWzAsIDAsIDAsIDEwLCAwLCAwLCAwLCAxMCwgMCwgMTAsIDEwLCAwXSk7XG4gKiAgICAgdGV4Y29vcmRzLnB1c2goWzAsIDAsIDAsIDEsIDEsIDAsIDEsIDFdKTtcbiAqICAgICBub3JtYWxzLnB1c2goWzAsIDAsIDEsIDAsIDAsIDEsIDAsIDAsIDEsIDAsIDAsIDFdKTtcbiAqICAgICBpbmRpY2VzLnB1c2goWzAsIDEsIDIsIDEsIDIsIDNdKTtcbiAqXG4gKiAgICAgdmFyIGFycmF5cyA9IHtcbiAqICAgICAgICBwb3NpdGlvbjogcG9zaXRpb25zLFxuICogICAgICAgIHRleGNvb3JkOiB0ZXhjb29yZHMsXG4gKiAgICAgICAgbm9ybWFsOiAgIG5vcm1hbHMsXG4gKiAgICAgICAgaW5kaWNlczogIGluZGljZXMsXG4gKiAgICAgfTtcbiAqXG4gKiBGb3IgdGhlIGxhc3QgZXhhbXBsZSBpdCBpcyBlcXVpdmFsZW50IHRvXG4gKlxuICogICAgIHZhciBidWZmZXJJbmZvID0ge1xuICogICAgICAgYXR0cmliczoge1xuICogICAgICAgICBwb3NpdGlvbjogeyBudW1Db21wb25lbnRzOiAzLCBidWZmZXI6IGdsLmNyZWF0ZUJ1ZmZlcigpLCB9LFxuICogICAgICAgICB0ZXhjb29yZDogeyBudW1Db21wb25lbnRzOiAyLCBidWZmZXI6IGdsLmNyZWF0ZUJ1ZmZlcigpLCB9LFxuICogICAgICAgICBub3JtYWw6IHsgbnVtQ29tcG9uZW50czogMywgYnVmZmVyOiBnbC5jcmVhdGVCdWZmZXIoKSwgfSxcbiAqICAgICAgIH0sXG4gKiAgICAgICBpbmRpY2VzOiBnbC5jcmVhdGVCdWZmZXIoKSxcbiAqICAgICAgIG51bUVsZW1lbnRzOiA2LFxuICogICAgIH07XG4gKlxuICogICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBidWZmZXJJbmZvLmF0dHJpYnMucG9zaXRpb24uYnVmZmVyKTtcbiAqICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgYXJyYXlzLnBvc2l0aW9uLCBnbC5TVEFUSUNfRFJBVyk7XG4gKiAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGJ1ZmZlckluZm8uYXR0cmlicy50ZXhjb29yZC5idWZmZXIpO1xuICogICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBhcnJheXMudGV4Y29vcmQsIGdsLlNUQVRJQ19EUkFXKTtcbiAqICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgYnVmZmVySW5mby5hdHRyaWJzLm5vcm1hbC5idWZmZXIpO1xuICogICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBhcnJheXMubm9ybWFsLCBnbC5TVEFUSUNfRFJBVyk7XG4gKiAgICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgYnVmZmVySW5mby5pbmRpY2VzKTtcbiAqICAgICBnbC5idWZmZXJEYXRhKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBhcnJheXMuaW5kaWNlcywgZ2wuU1RBVElDX0RSQVcpO1xuICpcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBBIFdlYkdMUmVuZGVyaW5nQ29udGV4dFxuICogQHBhcmFtIHttb2R1bGU6dHdnbC5BcnJheXN9IGFycmF5cyBZb3VyIGRhdGFcbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuQnVmZmVySW5mb30gW3NyY0J1ZmZlckluZm9dIEFuIGV4aXN0aW5nXG4gKiAgICAgICAgYnVmZmVyIGluZm8gdG8gc3RhcnQgZnJvbS4gV2ViR0xCdWZmZXJzIGV0YyBzcGVjaWZpZWRcbiAqICAgICAgICBpbiB0aGUgc3JjQnVmZmVySW5mbyB3aWxsIGJlIHVzZWQgaW4gYSBuZXcgQnVmZmVySW5mb1xuICogICAgICAgIHdpdGggYW55IGFycmF5cyBzcGVjaWZpZWQgb3ZlcnJpZGluZyB0aGUgb25lcyBpblxuICogICAgICAgIHNyY0J1ZmZlckluZm8uXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC5CdWZmZXJJbmZvfSBBIEJ1ZmZlckluZm9cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9hdHRyaWJ1dGVzXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJ1ZmZlckluZm9Gcm9tQXJyYXlzKGdsLCBhcnJheXMsIHNyY0J1ZmZlckluZm8pIHtcbiAgY29uc3QgbmV3QXR0cmlicyA9IGNyZWF0ZUF0dHJpYnNGcm9tQXJyYXlzKGdsLCBhcnJheXMpO1xuICBjb25zdCBidWZmZXJJbmZvID0gT2JqZWN0LmFzc2lnbih7fSwgc3JjQnVmZmVySW5mbyA/IHNyY0J1ZmZlckluZm8gOiB7fSk7XG4gIGJ1ZmZlckluZm8uYXR0cmlicyA9IE9iamVjdC5hc3NpZ24oe30sIHNyY0J1ZmZlckluZm8gPyBzcmNCdWZmZXJJbmZvLmF0dHJpYnMgOiB7fSwgbmV3QXR0cmlicyk7XG4gIGNvbnN0IGluZGljZXMgPSBhcnJheXMuaW5kaWNlcztcbiAgaWYgKGluZGljZXMpIHtcbiAgICBjb25zdCBuZXdJbmRpY2VzID0gbWFrZVR5cGVkQXJyYXkoaW5kaWNlcywgXCJpbmRpY2VzXCIpO1xuICAgIGJ1ZmZlckluZm8uaW5kaWNlcyA9IGNyZWF0ZUJ1ZmZlckZyb21UeXBlZEFycmF5KGdsLCBuZXdJbmRpY2VzLCBFTEVNRU5UX0FSUkFZX0JVRkZFUik7XG4gICAgYnVmZmVySW5mby5udW1FbGVtZW50cyA9IG5ld0luZGljZXMubGVuZ3RoO1xuICAgIGJ1ZmZlckluZm8uZWxlbWVudFR5cGUgPSBnZXRHTFR5cGVGb3JUeXBlZEFycmF5KG5ld0luZGljZXMpO1xuICB9IGVsc2UgaWYgKCFidWZmZXJJbmZvLm51bUVsZW1lbnRzKSB7XG4gICAgYnVmZmVySW5mby5udW1FbGVtZW50cyA9IGdldE51bUVsZW1lbnRzRnJvbUF0dHJpYnV0ZXMoZ2wsIGJ1ZmZlckluZm8uYXR0cmlicyk7XG4gIH1cblxuICByZXR1cm4gYnVmZmVySW5mbztcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgYnVmZmVyIGZyb20gYW4gYXJyYXksIHR5cGVkIGFycmF5LCBvciBhcnJheSBzcGVjXG4gKlxuICogR2l2ZW4gc29tZXRoaW5nIGxpa2UgdGhpc1xuICpcbiAqICAgICBbMSwgMiwgM10sXG4gKlxuICogb3JcbiAqXG4gKiAgICAgbmV3IFVpbnQxNkFycmF5KFsxLDIsM10pO1xuICpcbiAqIG9yXG4gKlxuICogICAgIHtcbiAqICAgICAgICBkYXRhOiBbMSwgMiwgM10sXG4gKiAgICAgICAgdHlwZTogVWludDhBcnJheSxcbiAqICAgICB9XG4gKlxuICogcmV0dXJucyBhIFdlYkdMQnVmZmVyIHRoYXQgY29udGFpbnMgdGhlIGdpdmVuIGRhdGEuXG4gKlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIEEgV2ViR0xSZW5kZXJpbmdDb250ZXh0LlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC5BcnJheVNwZWN9IGFycmF5IGFuIGFycmF5LCB0eXBlZCBhcnJheSwgb3IgYXJyYXkgc3BlYy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBhcnJheU5hbWUgbmFtZSBvZiBhcnJheS4gVXNlZCB0byBndWVzcyB0aGUgdHlwZSBpZiB0eXBlIGNhbiBub3QgYmUgZGVyaXZlZCBvdGhlcndpc2UuXG4gKiBAcmV0dXJuIHtXZWJHTEJ1ZmZlcn0gYSBXZWJHTEJ1ZmZlciBjb250YWluaW5nIHRoZSBkYXRhIGluIGFycmF5LlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL2F0dHJpYnV0ZXNcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQnVmZmVyRnJvbUFycmF5KGdsLCBhcnJheSwgYXJyYXlOYW1lKSB7XG4gIGNvbnN0IHR5cGUgPSBhcnJheU5hbWUgPT09IFwiaW5kaWNlc1wiID8gRUxFTUVOVF9BUlJBWV9CVUZGRVIgOiBBUlJBWV9CVUZGRVI7XG4gIGNvbnN0IHR5cGVkQXJyYXkgPSBtYWtlVHlwZWRBcnJheShhcnJheSwgYXJyYXlOYW1lKTtcbiAgcmV0dXJuIGNyZWF0ZUJ1ZmZlckZyb21UeXBlZEFycmF5KGdsLCB0eXBlZEFycmF5LCB0eXBlKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGJ1ZmZlcnMgZnJvbSBhcnJheXMgb3IgdHlwZWQgYXJyYXlzXG4gKlxuICogR2l2ZW4gc29tZXRoaW5nIGxpa2UgdGhpc1xuICpcbiAqICAgICB2YXIgYXJyYXlzID0ge1xuICogICAgICAgIHBvc2l0aW9uczogWzEsIDIsIDNdLFxuICogICAgICAgIG5vcm1hbHM6IFswLCAwLCAxXSxcbiAqICAgICB9XG4gKlxuICogcmV0dXJucyBzb21ldGhpbmcgbGlrZVxuICpcbiAqICAgICBidWZmZXJzID0ge1xuICogICAgICAgcG9zaXRpb25zOiBXZWJHTEJ1ZmZlcixcbiAqICAgICAgIG5vcm1hbHM6IFdlYkdMQnVmZmVyLFxuICogICAgIH1cbiAqXG4gKiBJZiB0aGUgYnVmZmVyIGlzIG5hbWVkICdpbmRpY2VzJyBpdCB3aWxsIGJlIG1hZGUgYW4gRUxFTUVOVF9BUlJBWV9CVUZGRVIuXG4gKlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIEEgV2ViR0xSZW5kZXJpbmdDb250ZXh0LlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC5BcnJheXN9IGFycmF5c1xuICogQHJldHVybiB7T2JqZWN0PHN0cmluZywgV2ViR0xCdWZmZXI+fSByZXR1cm5zIGFuIG9iamVjdCB3aXRoIG9uZSBXZWJHTEJ1ZmZlciBwZXIgYXJyYXlcbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9hdHRyaWJ1dGVzXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJ1ZmZlcnNGcm9tQXJyYXlzKGdsLCBhcnJheXMpIHtcbiAgY29uc3QgYnVmZmVycyA9IHsgfTtcbiAgT2JqZWN0LmtleXMoYXJyYXlzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgIGJ1ZmZlcnNba2V5XSA9IGNyZWF0ZUJ1ZmZlckZyb21BcnJheShnbCwgYXJyYXlzW2tleV0sIGtleSk7XG4gIH0pO1xuXG4gIC8vIFVnaCFcbiAgaWYgKGFycmF5cy5pbmRpY2VzKSB7XG4gICAgYnVmZmVycy5udW1FbGVtZW50cyA9IGFycmF5cy5pbmRpY2VzLmxlbmd0aDtcbiAgICBidWZmZXJzLmVsZW1lbnRUeXBlID0gZ2V0R0xUeXBlRm9yVHlwZWRBcnJheShtYWtlVHlwZWRBcnJheShhcnJheXMuaW5kaWNlcykpO1xuICB9IGVsc2Uge1xuICAgIGJ1ZmZlcnMubnVtRWxlbWVudHMgPSBnZXROdW1FbGVtZW50c0Zyb21Ob25JbmRleGVkQXJyYXlzKGFycmF5cyk7XG4gIH1cblxuICByZXR1cm4gYnVmZmVycztcbn1cblxudmFyIGF0dHJpYnV0ZXMgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgY3JlYXRlQXR0cmlic0Zyb21BcnJheXM6IGNyZWF0ZUF0dHJpYnNGcm9tQXJyYXlzLFxuICBjcmVhdGVCdWZmZXJzRnJvbUFycmF5czogY3JlYXRlQnVmZmVyc0Zyb21BcnJheXMsXG4gIGNyZWF0ZUJ1ZmZlckZyb21BcnJheTogY3JlYXRlQnVmZmVyRnJvbUFycmF5LFxuICBjcmVhdGVCdWZmZXJGcm9tVHlwZWRBcnJheTogY3JlYXRlQnVmZmVyRnJvbVR5cGVkQXJyYXksXG4gIGNyZWF0ZUJ1ZmZlckluZm9Gcm9tQXJyYXlzOiBjcmVhdGVCdWZmZXJJbmZvRnJvbUFycmF5cyxcbiAgc2V0QXR0cmliSW5mb0J1ZmZlckZyb21BcnJheTogc2V0QXR0cmliSW5mb0J1ZmZlckZyb21BcnJheSxcbiAgc2V0QXR0cmlidXRlUHJlZml4OiBzZXRBdHRyaWJ1dGVQcmVmaXgsXG4gIHNldEF0dHJpYnV0ZURlZmF1bHRzXzogc2V0RGVmYXVsdHMsXG4gIGdldE51bUNvbXBvbmVudHNfOiBnZXROdW1Db21wb25lbnRzLFxuICBnZXRBcnJheV86IGdldEFycmF5XG59KTtcblxuLypcbiAqIENvcHlyaWdodCAyMDE5IEdyZWdnIFRhdmFyZXNcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLFxuICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvblxuICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsXG4gKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcbiAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMXG4gKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbiAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVJcbiAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG5jb25zdCBnZXRBcnJheSQxID0gZ2V0QXJyYXk7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5jb25zdCBnZXROdW1Db21wb25lbnRzJDEgPSBnZXROdW1Db21wb25lbnRzOyAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4vKipcbiAqIEB0eXBlZGVmIHsoSW50OEFycmF5fFVpbnQ4QXJyYXl8SW50MTZBcnJheXxVaW50MTZBcnJheXxJbnQzMkFycmF5fFVpbnQzMkFycmF5fEZsb2F0MzJBcnJheSl9IFR5cGVkQXJyYXlcbiAqL1xuXG4vKipcbiAqIEFkZCBgcHVzaGAgdG8gYSB0eXBlZCBhcnJheS4gSXQganVzdCBrZWVwcyBhICdjdXJzb3InXG4gKiBhbmQgYWxsb3dzIHVzZSB0byBgcHVzaGAgdmFsdWVzIGludG8gdGhlIGFycmF5IHNvIHdlXG4gKiBkb24ndCBoYXZlIHRvIG1hbnVhbGx5IGNvbXB1dGUgb2Zmc2V0c1xuICogQHBhcmFtIHtUeXBlZEFycmF5fSB0eXBlZEFycmF5IFR5cGVkQXJyYXkgdG8gYXVnbWVudFxuICogQHBhcmFtIHtudW1iZXJ9IG51bUNvbXBvbmVudHMgbnVtYmVyIG9mIGNvbXBvbmVudHMuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBhdWdtZW50VHlwZWRBcnJheSh0eXBlZEFycmF5LCBudW1Db21wb25lbnRzKSB7XG4gIGxldCBjdXJzb3IgPSAwO1xuICB0eXBlZEFycmF5LnB1c2ggPSBmdW5jdGlvbigpIHtcbiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgYXJndW1lbnRzLmxlbmd0aDsgKytpaSkge1xuICAgICAgY29uc3QgdmFsdWUgPSBhcmd1bWVudHNbaWldO1xuICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXkgfHwgaXNBcnJheUJ1ZmZlcih2YWx1ZSkpIHtcbiAgICAgICAgZm9yIChsZXQgamogPSAwOyBqaiA8IHZhbHVlLmxlbmd0aDsgKytqaikge1xuICAgICAgICAgIHR5cGVkQXJyYXlbY3Vyc29yKytdID0gdmFsdWVbampdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0eXBlZEFycmF5W2N1cnNvcisrXSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgdHlwZWRBcnJheS5yZXNldCA9IGZ1bmN0aW9uKG9wdF9pbmRleCkge1xuICAgIGN1cnNvciA9IG9wdF9pbmRleCB8fCAwO1xuICB9O1xuICB0eXBlZEFycmF5Lm51bUNvbXBvbmVudHMgPSBudW1Db21wb25lbnRzO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZWRBcnJheSwgJ251bUVsZW1lbnRzJywge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5sZW5ndGggLyB0aGlzLm51bUNvbXBvbmVudHMgfCAwO1xuICAgIH0sXG4gIH0pO1xuICByZXR1cm4gdHlwZWRBcnJheTtcbn1cblxuLyoqXG4gKiBjcmVhdGVzIGEgdHlwZWQgYXJyYXkgd2l0aCBhIGBwdXNoYCBmdW5jdGlvbiBhdHRhY2hlZFxuICogc28gdGhhdCB5b3UgY2FuIGVhc2lseSAqcHVzaCogdmFsdWVzLlxuICpcbiAqIGBwdXNoYCBjYW4gdGFrZSBtdWx0aXBsZSBhcmd1bWVudHMuIElmIGFuIGFyZ3VtZW50IGlzIGFuIGFycmF5IGVhY2ggZWxlbWVudFxuICogb2YgdGhlIGFycmF5IHdpbGwgYmUgYWRkZWQgdG8gdGhlIHR5cGVkIGFycmF5LlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgIGNvbnN0IGFycmF5ID0gY3JlYXRlQXVnbWVudGVkVHlwZWRBcnJheSgzLCAyKTsgIC8vIGNyZWF0ZXMgYSBGbG9hdDMyQXJyYXkgd2l0aCA2IHZhbHVlc1xuICogICAgIGFycmF5LnB1c2goMSwgMiwgMyk7XG4gKiAgICAgYXJyYXkucHVzaChbNCwgNSwgNl0pO1xuICogICAgIC8vIGFycmF5IG5vdyBjb250YWlucyBbMSwgMiwgMywgNCwgNSwgNl1cbiAqXG4gKiBBbHNvIGhhcyBgbnVtQ29tcG9uZW50c2AgYW5kIGBudW1FbGVtZW50c2AgcHJvcGVydGllcy5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gbnVtQ29tcG9uZW50cyBudW1iZXIgb2YgY29tcG9uZW50c1xuICogQHBhcmFtIHtudW1iZXJ9IG51bUVsZW1lbnRzIG51bWJlciBvZiBlbGVtZW50cy4gVGhlIHRvdGFsIHNpemUgb2YgdGhlIGFycmF5IHdpbGwgYmUgYG51bUNvbXBvbmVudHMgKiBudW1FbGVtZW50c2AuXG4gKiBAcGFyYW0ge2NvbnN0cnVjdG9yfSBvcHRfdHlwZSBBIGNvbnN0cnVjdG9yIGZvciB0aGUgdHlwZS4gRGVmYXVsdCA9IGBGbG9hdDMyQXJyYXlgLlxuICogQHJldHVybiB7QXJyYXlCdWZmZXJWaWV3fSBBIHR5cGVkIGFycmF5LlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3ByaW1pdGl2ZXNcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQXVnbWVudGVkVHlwZWRBcnJheShudW1Db21wb25lbnRzLCBudW1FbGVtZW50cywgb3B0X3R5cGUpIHtcbiAgY29uc3QgVHlwZSA9IG9wdF90eXBlIHx8IEZsb2F0MzJBcnJheTtcbiAgcmV0dXJuIGF1Z21lbnRUeXBlZEFycmF5KG5ldyBUeXBlKG51bUNvbXBvbmVudHMgKiBudW1FbGVtZW50cyksIG51bUNvbXBvbmVudHMpO1xufVxuXG5mdW5jdGlvbiBhbGxCdXRJbmRpY2VzKG5hbWUpIHtcbiAgcmV0dXJuIG5hbWUgIT09IFwiaW5kaWNlc1wiO1xufVxuXG4vKipcbiAqIEdpdmVuIGluZGV4ZWQgdmVydGljZXMgY3JlYXRlcyBhIG5ldyBzZXQgb2YgdmVydGljZXMgdW4taW5kZXhlZCBieSBleHBhbmRpbmcgdGhlIGluZGV4ZWQgdmVydGljZXMuXG4gKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCBUeXBlZEFycmF5Pn0gdmVydGljZXMgVGhlIGluZGV4ZWQgdmVydGljZXMgdG8gZGVpbmRleFxuICogQHJldHVybiB7T2JqZWN0LjxzdHJpbmcsIFR5cGVkQXJyYXk+fSBUaGUgZGVpbmRleGVkIHZlcnRpY2VzXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJpbWl0aXZlc1xuICovXG5mdW5jdGlvbiBkZWluZGV4VmVydGljZXModmVydGljZXMpIHtcbiAgY29uc3QgaW5kaWNlcyA9IHZlcnRpY2VzLmluZGljZXM7XG4gIGNvbnN0IG5ld1ZlcnRpY2VzID0ge307XG4gIGNvbnN0IG51bUVsZW1lbnRzID0gaW5kaWNlcy5sZW5ndGg7XG5cbiAgZnVuY3Rpb24gZXhwYW5kVG9VbmluZGV4ZWQoY2hhbm5lbCkge1xuICAgIGNvbnN0IHNyY0J1ZmZlciA9IHZlcnRpY2VzW2NoYW5uZWxdO1xuICAgIGNvbnN0IG51bUNvbXBvbmVudHMgPSBzcmNCdWZmZXIubnVtQ29tcG9uZW50cztcbiAgICBjb25zdCBkc3RCdWZmZXIgPSBjcmVhdGVBdWdtZW50ZWRUeXBlZEFycmF5KG51bUNvbXBvbmVudHMsIG51bUVsZW1lbnRzLCBzcmNCdWZmZXIuY29uc3RydWN0b3IpO1xuICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBudW1FbGVtZW50czsgKytpaSkge1xuICAgICAgY29uc3QgbmR4ID0gaW5kaWNlc1tpaV07XG4gICAgICBjb25zdCBvZmZzZXQgPSBuZHggKiBudW1Db21wb25lbnRzO1xuICAgICAgZm9yIChsZXQgamogPSAwOyBqaiA8IG51bUNvbXBvbmVudHM7ICsramopIHtcbiAgICAgICAgZHN0QnVmZmVyLnB1c2goc3JjQnVmZmVyW29mZnNldCArIGpqXSk7XG4gICAgICB9XG4gICAgfVxuICAgIG5ld1ZlcnRpY2VzW2NoYW5uZWxdID0gZHN0QnVmZmVyO1xuICB9XG5cbiAgT2JqZWN0LmtleXModmVydGljZXMpLmZpbHRlcihhbGxCdXRJbmRpY2VzKS5mb3JFYWNoKGV4cGFuZFRvVW5pbmRleGVkKTtcblxuICByZXR1cm4gbmV3VmVydGljZXM7XG59XG5cbi8qKlxuICogZmxhdHRlbnMgdGhlIG5vcm1hbHMgb2YgZGVpbmRleGVkIHZlcnRpY2VzIGluIHBsYWNlLlxuICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywgVHlwZWRBcnJheT59IHZlcnRpY2VzIFRoZSBkZWluZGV4ZWQgdmVydGljZXMgd2hvJ3Mgbm9ybWFscyB0byBmbGF0dGVuXG4gKiBAcmV0dXJuIHtPYmplY3QuPHN0cmluZywgVHlwZWRBcnJheT59IFRoZSBmbGF0dGVuZWQgdmVydGljZXMgKHNhbWUgYXMgd2FzIHBhc3NlZCBpbilcbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcmltaXRpdmVzXG4gKi9cbmZ1bmN0aW9uIGZsYXR0ZW5Ob3JtYWxzKHZlcnRpY2VzKSB7XG4gIGlmICh2ZXJ0aWNlcy5pbmRpY2VzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjYW4gbm90IGZsYXR0ZW4gbm9ybWFscyBvZiBpbmRleGVkIHZlcnRpY2VzLiBkZWluZGV4IHRoZW0gZmlyc3QnKTtcbiAgfVxuXG4gIGNvbnN0IG5vcm1hbHMgPSB2ZXJ0aWNlcy5ub3JtYWw7XG4gIGNvbnN0IG51bU5vcm1hbHMgPSBub3JtYWxzLmxlbmd0aDtcbiAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IG51bU5vcm1hbHM7IGlpICs9IDkpIHtcbiAgICAvLyBwdWxsIG91dCB0aGUgMyBub3JtYWxzIGZvciB0aGlzIHRyaWFuZ2xlXG4gICAgY29uc3QgbmF4ID0gbm9ybWFsc1tpaSArIDBdO1xuICAgIGNvbnN0IG5heSA9IG5vcm1hbHNbaWkgKyAxXTtcbiAgICBjb25zdCBuYXogPSBub3JtYWxzW2lpICsgMl07XG5cbiAgICBjb25zdCBuYnggPSBub3JtYWxzW2lpICsgM107XG4gICAgY29uc3QgbmJ5ID0gbm9ybWFsc1tpaSArIDRdO1xuICAgIGNvbnN0IG5ieiA9IG5vcm1hbHNbaWkgKyA1XTtcblxuICAgIGNvbnN0IG5jeCA9IG5vcm1hbHNbaWkgKyA2XTtcbiAgICBjb25zdCBuY3kgPSBub3JtYWxzW2lpICsgN107XG4gICAgY29uc3QgbmN6ID0gbm9ybWFsc1tpaSArIDhdO1xuXG4gICAgLy8gYWRkIHRoZW1cbiAgICBsZXQgbnggPSBuYXggKyBuYnggKyBuY3g7XG4gICAgbGV0IG55ID0gbmF5ICsgbmJ5ICsgbmN5O1xuICAgIGxldCBueiA9IG5heiArIG5ieiArIG5jejtcblxuICAgIC8vIG5vcm1hbGl6ZSB0aGVtXG4gICAgY29uc3QgbGVuZ3RoID0gTWF0aC5zcXJ0KG54ICogbnggKyBueSAqIG55ICsgbnogKiBueik7XG5cbiAgICBueCAvPSBsZW5ndGg7XG4gICAgbnkgLz0gbGVuZ3RoO1xuICAgIG56IC89IGxlbmd0aDtcblxuICAgIC8vIGNvcHkgdGhlbSBiYWNrIGluXG4gICAgbm9ybWFsc1tpaSArIDBdID0gbng7XG4gICAgbm9ybWFsc1tpaSArIDFdID0gbnk7XG4gICAgbm9ybWFsc1tpaSArIDJdID0gbno7XG5cbiAgICBub3JtYWxzW2lpICsgM10gPSBueDtcbiAgICBub3JtYWxzW2lpICsgNF0gPSBueTtcbiAgICBub3JtYWxzW2lpICsgNV0gPSBuejtcblxuICAgIG5vcm1hbHNbaWkgKyA2XSA9IG54O1xuICAgIG5vcm1hbHNbaWkgKyA3XSA9IG55O1xuICAgIG5vcm1hbHNbaWkgKyA4XSA9IG56O1xuICB9XG5cbiAgcmV0dXJuIHZlcnRpY2VzO1xufVxuXG5mdW5jdGlvbiBhcHBseUZ1bmNUb1YzQXJyYXkoYXJyYXksIG1hdHJpeCwgZm4pIHtcbiAgY29uc3QgbGVuID0gYXJyYXkubGVuZ3RoO1xuICBjb25zdCB0bXAgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgbGVuOyBpaSArPSAzKSB7XG4gICAgZm4obWF0cml4LCBbYXJyYXlbaWldLCBhcnJheVtpaSArIDFdLCBhcnJheVtpaSArIDJdXSwgdG1wKTtcbiAgICBhcnJheVtpaSAgICBdID0gdG1wWzBdO1xuICAgIGFycmF5W2lpICsgMV0gPSB0bXBbMV07XG4gICAgYXJyYXlbaWkgKyAyXSA9IHRtcFsyXTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1Ob3JtYWwkMShtaSwgdiwgZHN0KSB7XG4gIGRzdCA9IGRzdCB8fCBjcmVhdGUoKTtcbiAgY29uc3QgdjAgPSB2WzBdO1xuICBjb25zdCB2MSA9IHZbMV07XG4gIGNvbnN0IHYyID0gdlsyXTtcblxuICBkc3RbMF0gPSB2MCAqIG1pWzAgKiA0ICsgMF0gKyB2MSAqIG1pWzAgKiA0ICsgMV0gKyB2MiAqIG1pWzAgKiA0ICsgMl07XG4gIGRzdFsxXSA9IHYwICogbWlbMSAqIDQgKyAwXSArIHYxICogbWlbMSAqIDQgKyAxXSArIHYyICogbWlbMSAqIDQgKyAyXTtcbiAgZHN0WzJdID0gdjAgKiBtaVsyICogNCArIDBdICsgdjEgKiBtaVsyICogNCArIDFdICsgdjIgKiBtaVsyICogNCArIDJdO1xuXG4gIHJldHVybiBkc3Q7XG59XG5cbi8qKlxuICogUmVvcmllbnRzIGRpcmVjdGlvbnMgYnkgdGhlIGdpdmVuIG1hdHJpeC4uXG4gKiBAcGFyYW0geyhudW1iZXJbXXxUeXBlZEFycmF5KX0gYXJyYXkgVGhlIGFycmF5LiBBc3N1bWVzIHZhbHVlIGZsb2F0cyBwZXIgZWxlbWVudC5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gbWF0cml4IEEgbWF0cml4IHRvIG11bHRpcGx5IGJ5LlxuICogQHJldHVybiB7KG51bWJlcltdfFR5cGVkQXJyYXkpfSB0aGUgc2FtZSBhcnJheSB0aGF0IHdhcyBwYXNzZWQgaW5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcmltaXRpdmVzXG4gKi9cbmZ1bmN0aW9uIHJlb3JpZW50RGlyZWN0aW9ucyhhcnJheSwgbWF0cml4KSB7XG4gIGFwcGx5RnVuY1RvVjNBcnJheShhcnJheSwgbWF0cml4LCB0cmFuc2Zvcm1EaXJlY3Rpb24pO1xuICByZXR1cm4gYXJyYXk7XG59XG5cbi8qKlxuICogUmVvcmllbnRzIG5vcm1hbHMgYnkgdGhlIGludmVyc2UtdHJhbnNwb3NlIG9mIHRoZSBnaXZlblxuICogbWF0cml4Li5cbiAqIEBwYXJhbSB7KG51bWJlcltdfFR5cGVkQXJyYXkpfSBhcnJheSBUaGUgYXJyYXkuIEFzc3VtZXMgdmFsdWUgZmxvYXRzIHBlciBlbGVtZW50LlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC9tNC5NYXQ0fSBtYXRyaXggQSBtYXRyaXggdG8gbXVsdGlwbHkgYnkuXG4gKiBAcmV0dXJuIHsobnVtYmVyW118VHlwZWRBcnJheSl9IHRoZSBzYW1lIGFycmF5IHRoYXQgd2FzIHBhc3NlZCBpblxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3ByaW1pdGl2ZXNcbiAqL1xuZnVuY3Rpb24gcmVvcmllbnROb3JtYWxzKGFycmF5LCBtYXRyaXgpIHtcbiAgYXBwbHlGdW5jVG9WM0FycmF5KGFycmF5LCBpbnZlcnNlKG1hdHJpeCksIHRyYW5zZm9ybU5vcm1hbCQxKTtcbiAgcmV0dXJuIGFycmF5O1xufVxuXG4vKipcbiAqIFJlb3JpZW50cyBwb3NpdGlvbnMgYnkgdGhlIGdpdmVuIG1hdHJpeC4gSW4gb3RoZXIgd29yZHMsIGl0XG4gKiBtdWx0aXBsaWVzIGVhY2ggdmVydGV4IGJ5IHRoZSBnaXZlbiBtYXRyaXguXG4gKiBAcGFyYW0geyhudW1iZXJbXXxUeXBlZEFycmF5KX0gYXJyYXkgVGhlIGFycmF5LiBBc3N1bWVzIHZhbHVlIGZsb2F0cyBwZXIgZWxlbWVudC5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wvbTQuTWF0NH0gbWF0cml4IEEgbWF0cml4IHRvIG11bHRpcGx5IGJ5LlxuICogQHJldHVybiB7KG51bWJlcltdfFR5cGVkQXJyYXkpfSB0aGUgc2FtZSBhcnJheSB0aGF0IHdhcyBwYXNzZWQgaW5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcmltaXRpdmVzXG4gKi9cbmZ1bmN0aW9uIHJlb3JpZW50UG9zaXRpb25zKGFycmF5LCBtYXRyaXgpIHtcbiAgYXBwbHlGdW5jVG9WM0FycmF5KGFycmF5LCBtYXRyaXgsIHRyYW5zZm9ybVBvaW50KTtcbiAgcmV0dXJuIGFycmF5O1xufVxuXG4vKipcbiAqIEB0eXBlZGVmIHsobnVtYmVyW118VHlwZWRBcnJheSl9IE5hdGl2ZUFycmF5T3JUeXBlZEFycmF5XG4gKi9cblxuLyoqXG4gKiBSZW9yaWVudHMgYXJyYXlzIGJ5IHRoZSBnaXZlbiBtYXRyaXguIEFzc3VtZXMgYXJyYXlzIGhhdmVcbiAqIG5hbWVzIHRoYXQgY29udGFpbnMgJ3BvcycgY291bGQgYmUgcmVvcmllbnRlZCBhcyBwb3NpdGlvbnMsXG4gKiAnYmlub3JtJyBvciAndGFuJyBhcyBkaXJlY3Rpb25zLCBhbmQgJ25vcm0nIGFzIG5vcm1hbHMuXG4gKlxuICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywgTmF0aXZlQXJyYXlPclR5cGVkQXJyYXk+fSBhcnJheXMgVGhlIHZlcnRpY2VzIHRvIHJlb3JpZW50XG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL200Lk1hdDR9IG1hdHJpeCBtYXRyaXggdG8gcmVvcmllbnQgYnkuXG4gKiBAcmV0dXJuIHtPYmplY3QuPHN0cmluZywgTmF0aXZlQXJyYXlPclR5cGVkQXJyYXk+fSBzYW1lIGFycmF5cyB0aGF0IHdlcmUgcGFzc2VkIGluLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3ByaW1pdGl2ZXNcbiAqL1xuZnVuY3Rpb24gcmVvcmllbnRWZXJ0aWNlcyhhcnJheXMsIG1hdHJpeCkge1xuICBPYmplY3Qua2V5cyhhcnJheXMpLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuICAgIGNvbnN0IGFycmF5ID0gYXJyYXlzW25hbWVdO1xuICAgIGlmIChuYW1lLmluZGV4T2YoXCJwb3NcIikgPj0gMCkge1xuICAgICAgcmVvcmllbnRQb3NpdGlvbnMoYXJyYXksIG1hdHJpeCk7XG4gICAgfSBlbHNlIGlmIChuYW1lLmluZGV4T2YoXCJ0YW5cIikgPj0gMCB8fCBuYW1lLmluZGV4T2YoXCJiaW5vcm1cIikgPj0gMCkge1xuICAgICAgcmVvcmllbnREaXJlY3Rpb25zKGFycmF5LCBtYXRyaXgpO1xuICAgIH0gZWxzZSBpZiAobmFtZS5pbmRleE9mKFwibm9ybVwiKSA+PSAwKSB7XG4gICAgICByZW9yaWVudE5vcm1hbHMoYXJyYXksIG1hdHJpeCk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGFycmF5cztcbn1cblxuLyoqXG4gKiBDcmVhdGVzIFhZIHF1YWQgQnVmZmVySW5mb1xuICpcbiAqIFRoZSBkZWZhdWx0IHdpdGggbm8gcGFyYW1ldGVycyB3aWxsIHJldHVybiBhIDJ4MiBxdWFkIHdpdGggdmFsdWVzIGZyb20gLTEgdG8gKzEuXG4gKiBJZiB5b3Ugd2FudCBhIHVuaXQgcXVhZCB3aXRoIHRoYXQgZ29lcyBmcm9tIDAgdG8gMSB5b3UnZCBjYWxsIGl0IHdpdGhcbiAqXG4gKiAgICAgdHdnbC5wcmltaXRpdmVzLmNyZWF0ZVhZUXVhZEJ1ZmZlckluZm8oZ2wsIDEsIDAuNSwgMC41KTtcbiAqXG4gKiBJZiB5b3Ugd2FudCBhIHVuaXQgcXVhZCBjZW50ZXJlZCBhYm92ZSAwLDAgeW91J2QgY2FsbCBpdCB3aXRoXG4gKlxuICogICAgIHR3Z2wucHJpbWl0aXZlcy5jcmVhdGVYWVF1YWRCdWZmZXJJbmZvKGdsLCAxLCAwLCAwLjUpO1xuICpcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0LlxuICogQHBhcmFtIHtudW1iZXJ9IFtzaXplXSB0aGUgc2l6ZSBhY3Jvc3MgdGhlIHF1YWQuIERlZmF1bHRzIHRvIDIgd2hpY2ggbWVhbnMgdmVydGljZXMgd2lsbCBnbyBmcm9tIC0xIHRvICsxXG4gKiBAcGFyYW0ge251bWJlcn0gW3hPZmZzZXRdIHRoZSBhbW91bnQgdG8gb2Zmc2V0IHRoZSBxdWFkIGluIFhcbiAqIEBwYXJhbSB7bnVtYmVyfSBbeU9mZnNldF0gdGhlIGFtb3VudCB0byBvZmZzZXQgdGhlIHF1YWQgaW4gWVxuICogQHJldHVybiB7T2JqZWN0LjxzdHJpbmcsIFdlYkdMQnVmZmVyPn0gdGhlIGNyZWF0ZWQgWFkgUXVhZCBCdWZmZXJJbmZvXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJpbWl0aXZlc1xuICogQGZ1bmN0aW9uIGNyZWF0ZVhZUXVhZEJ1ZmZlcnNcbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgWFkgcXVhZCBCdWZmZXJzXG4gKlxuICogVGhlIGRlZmF1bHQgd2l0aCBubyBwYXJhbWV0ZXJzIHdpbGwgcmV0dXJuIGEgMngyIHF1YWQgd2l0aCB2YWx1ZXMgZnJvbSAtMSB0byArMS5cbiAqIElmIHlvdSB3YW50IGEgdW5pdCBxdWFkIHdpdGggdGhhdCBnb2VzIGZyb20gMCB0byAxIHlvdSdkIGNhbGwgaXQgd2l0aFxuICpcbiAqICAgICB0d2dsLnByaW1pdGl2ZXMuY3JlYXRlWFlRdWFkQnVmZmVySW5mbyhnbCwgMSwgMC41LCAwLjUpO1xuICpcbiAqIElmIHlvdSB3YW50IGEgdW5pdCBxdWFkIGNlbnRlcmVkIGFib3ZlIDAsMCB5b3UnZCBjYWxsIGl0IHdpdGhcbiAqXG4gKiAgICAgdHdnbC5wcmltaXRpdmVzLmNyZWF0ZVhZUXVhZEJ1ZmZlckluZm8oZ2wsIDEsIDAsIDAuNSk7XG4gKlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIFRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHQuXG4gKiBAcGFyYW0ge251bWJlcn0gW3NpemVdIHRoZSBzaXplIGFjcm9zcyB0aGUgcXVhZC4gRGVmYXVsdHMgdG8gMiB3aGljaCBtZWFucyB2ZXJ0aWNlcyB3aWxsIGdvIGZyb20gLTEgdG8gKzFcbiAqIEBwYXJhbSB7bnVtYmVyfSBbeE9mZnNldF0gdGhlIGFtb3VudCB0byBvZmZzZXQgdGhlIHF1YWQgaW4gWFxuICogQHBhcmFtIHtudW1iZXJ9IFt5T2Zmc2V0XSB0aGUgYW1vdW50IHRvIG9mZnNldCB0aGUgcXVhZCBpbiBZXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC5CdWZmZXJJbmZvfSB0aGUgY3JlYXRlZCBYWSBRdWFkIGJ1ZmZlcnNcbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcmltaXRpdmVzXG4gKiBAZnVuY3Rpb24gY3JlYXRlWFlRdWFkQnVmZmVySW5mb1xuICovXG5cbi8qKlxuICogQ3JlYXRlcyBYWSBxdWFkIHZlcnRpY2VzXG4gKlxuICogVGhlIGRlZmF1bHQgd2l0aCBubyBwYXJhbWV0ZXJzIHdpbGwgcmV0dXJuIGEgMngyIHF1YWQgd2l0aCB2YWx1ZXMgZnJvbSAtMSB0byArMS5cbiAqIElmIHlvdSB3YW50IGEgdW5pdCBxdWFkIHdpdGggdGhhdCBnb2VzIGZyb20gMCB0byAxIHlvdSdkIGNhbGwgaXQgd2l0aFxuICpcbiAqICAgICB0d2dsLnByaW1pdGl2ZXMuY3JlYXRlWFlRdWFkVmVydGljZXMoMSwgMC41LCAwLjUpO1xuICpcbiAqIElmIHlvdSB3YW50IGEgdW5pdCBxdWFkIGNlbnRlcmVkIGFib3ZlIDAsMCB5b3UnZCBjYWxsIGl0IHdpdGhcbiAqXG4gKiAgICAgdHdnbC5wcmltaXRpdmVzLmNyZWF0ZVhZUXVhZFZlcnRpY2VzKDEsIDAsIDAuNSk7XG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IFtzaXplXSB0aGUgc2l6ZSBhY3Jvc3MgdGhlIHF1YWQuIERlZmF1bHRzIHRvIDIgd2hpY2ggbWVhbnMgdmVydGljZXMgd2lsbCBnbyBmcm9tIC0xIHRvICsxXG4gKiBAcGFyYW0ge251bWJlcn0gW3hPZmZzZXRdIHRoZSBhbW91bnQgdG8gb2Zmc2V0IHRoZSBxdWFkIGluIFhcbiAqIEBwYXJhbSB7bnVtYmVyfSBbeU9mZnNldF0gdGhlIGFtb3VudCB0byBvZmZzZXQgdGhlIHF1YWQgaW4gWVxuICogQHJldHVybiB7T2JqZWN0LjxzdHJpbmcsIFR5cGVkQXJyYXk+fSB0aGUgY3JlYXRlZCBYWSBRdWFkIHZlcnRpY2VzXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJpbWl0aXZlc1xuICovXG5mdW5jdGlvbiBjcmVhdGVYWVF1YWRWZXJ0aWNlcyhzaXplLCB4T2Zmc2V0LCB5T2Zmc2V0KSB7XG4gIHNpemUgPSBzaXplIHx8IDI7XG4gIHhPZmZzZXQgPSB4T2Zmc2V0IHx8IDA7XG4gIHlPZmZzZXQgPSB5T2Zmc2V0IHx8IDA7XG4gIHNpemUgKj0gMC41O1xuICByZXR1cm4ge1xuICAgIHBvc2l0aW9uOiB7XG4gICAgICBudW1Db21wb25lbnRzOiAyLFxuICAgICAgZGF0YTogW1xuICAgICAgICB4T2Zmc2V0ICsgLTEgKiBzaXplLCB5T2Zmc2V0ICsgLTEgKiBzaXplLFxuICAgICAgICB4T2Zmc2V0ICsgIDEgKiBzaXplLCB5T2Zmc2V0ICsgLTEgKiBzaXplLFxuICAgICAgICB4T2Zmc2V0ICsgLTEgKiBzaXplLCB5T2Zmc2V0ICsgIDEgKiBzaXplLFxuICAgICAgICB4T2Zmc2V0ICsgIDEgKiBzaXplLCB5T2Zmc2V0ICsgIDEgKiBzaXplLFxuICAgICAgXSxcbiAgICB9LFxuICAgIG5vcm1hbDogW1xuICAgICAgMCwgMCwgMSxcbiAgICAgIDAsIDAsIDEsXG4gICAgICAwLCAwLCAxLFxuICAgICAgMCwgMCwgMSxcbiAgICBdLFxuICAgIHRleGNvb3JkOiBbXG4gICAgICAwLCAwLFxuICAgICAgMSwgMCxcbiAgICAgIDAsIDEsXG4gICAgICAxLCAxLFxuICAgIF0sXG4gICAgaW5kaWNlczogWyAwLCAxLCAyLCAyLCAxLCAzIF0sXG4gIH07XG59XG5cbi8qKlxuICogQ3JlYXRlcyBYWiBwbGFuZSBCdWZmZXJJbmZvLlxuICpcbiAqIFRoZSBjcmVhdGVkIHBsYW5lIGhhcyBwb3NpdGlvbiwgbm9ybWFsLCBhbmQgdGV4Y29vcmQgZGF0YVxuICpcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0LlxuICogQHBhcmFtIHtudW1iZXJ9IFt3aWR0aF0gV2lkdGggb2YgdGhlIHBsYW5lLiBEZWZhdWx0ID0gMVxuICogQHBhcmFtIHtudW1iZXJ9IFtkZXB0aF0gRGVwdGggb2YgdGhlIHBsYW5lLiBEZWZhdWx0ID0gMVxuICogQHBhcmFtIHtudW1iZXJ9IFtzdWJkaXZpc2lvbnNXaWR0aF0gTnVtYmVyIG9mIHN0ZXBzIGFjcm9zcyB0aGUgcGxhbmUuIERlZmF1bHQgPSAxXG4gKiBAcGFyYW0ge251bWJlcn0gW3N1YmRpdmlzaW9uc0RlcHRoXSBOdW1iZXIgb2Ygc3RlcHMgZG93biB0aGUgcGxhbmUuIERlZmF1bHQgPSAxXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL200Lk1hdDR9IFttYXRyaXhdIEEgbWF0cml4IGJ5IHdoaWNoIHRvIG11bHRpcGx5IGFsbCB0aGUgdmVydGljZXMuXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC5CdWZmZXJJbmZvfSBUaGUgY3JlYXRlZCBwbGFuZSBCdWZmZXJJbmZvLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3ByaW1pdGl2ZXNcbiAqIEBmdW5jdGlvbiBjcmVhdGVQbGFuZUJ1ZmZlckluZm9cbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgWFogcGxhbmUgYnVmZmVycy5cbiAqXG4gKiBUaGUgY3JlYXRlZCBwbGFuZSBoYXMgcG9zaXRpb24sIG5vcm1hbCwgYW5kIHRleGNvb3JkIGRhdGFcbiAqXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgVGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2lkdGhdIFdpZHRoIG9mIHRoZSBwbGFuZS4gRGVmYXVsdCA9IDFcbiAqIEBwYXJhbSB7bnVtYmVyfSBbZGVwdGhdIERlcHRoIG9mIHRoZSBwbGFuZS4gRGVmYXVsdCA9IDFcbiAqIEBwYXJhbSB7bnVtYmVyfSBbc3ViZGl2aXNpb25zV2lkdGhdIE51bWJlciBvZiBzdGVwcyBhY3Jvc3MgdGhlIHBsYW5lLiBEZWZhdWx0ID0gMVxuICogQHBhcmFtIHtudW1iZXJ9IFtzdWJkaXZpc2lvbnNEZXB0aF0gTnVtYmVyIG9mIHN0ZXBzIGRvd24gdGhlIHBsYW5lLiBEZWZhdWx0ID0gMVxuICogQHBhcmFtIHttb2R1bGU6dHdnbC9tNC5NYXQ0fSBbbWF0cml4XSBBIG1hdHJpeCBieSB3aGljaCB0byBtdWx0aXBseSBhbGwgdGhlIHZlcnRpY2VzLlxuICogQHJldHVybiB7T2JqZWN0LjxzdHJpbmcsIFdlYkdMQnVmZmVyPn0gVGhlIGNyZWF0ZWQgcGxhbmUgYnVmZmVycy5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcmltaXRpdmVzXG4gKiBAZnVuY3Rpb24gY3JlYXRlUGxhbmVCdWZmZXJzXG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIFhaIHBsYW5lIHZlcnRpY2VzLlxuICpcbiAqIFRoZSBjcmVhdGVkIHBsYW5lIGhhcyBwb3NpdGlvbiwgbm9ybWFsLCBhbmQgdGV4Y29vcmQgZGF0YVxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2lkdGhdIFdpZHRoIG9mIHRoZSBwbGFuZS4gRGVmYXVsdCA9IDFcbiAqIEBwYXJhbSB7bnVtYmVyfSBbZGVwdGhdIERlcHRoIG9mIHRoZSBwbGFuZS4gRGVmYXVsdCA9IDFcbiAqIEBwYXJhbSB7bnVtYmVyfSBbc3ViZGl2aXNpb25zV2lkdGhdIE51bWJlciBvZiBzdGVwcyBhY3Jvc3MgdGhlIHBsYW5lLiBEZWZhdWx0ID0gMVxuICogQHBhcmFtIHtudW1iZXJ9IFtzdWJkaXZpc2lvbnNEZXB0aF0gTnVtYmVyIG9mIHN0ZXBzIGRvd24gdGhlIHBsYW5lLiBEZWZhdWx0ID0gMVxuICogQHBhcmFtIHttb2R1bGU6dHdnbC9tNC5NYXQ0fSBbbWF0cml4XSBBIG1hdHJpeCBieSB3aGljaCB0byBtdWx0aXBseSBhbGwgdGhlIHZlcnRpY2VzLlxuICogQHJldHVybiB7T2JqZWN0LjxzdHJpbmcsIFR5cGVkQXJyYXk+fSBUaGUgY3JlYXRlZCBwbGFuZSB2ZXJ0aWNlcy5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcmltaXRpdmVzXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVBsYW5lVmVydGljZXMoXG4gICAgd2lkdGgsXG4gICAgZGVwdGgsXG4gICAgc3ViZGl2aXNpb25zV2lkdGgsXG4gICAgc3ViZGl2aXNpb25zRGVwdGgsXG4gICAgbWF0cml4KSB7XG4gIHdpZHRoID0gd2lkdGggfHwgMTtcbiAgZGVwdGggPSBkZXB0aCB8fCAxO1xuICBzdWJkaXZpc2lvbnNXaWR0aCA9IHN1YmRpdmlzaW9uc1dpZHRoIHx8IDE7XG4gIHN1YmRpdmlzaW9uc0RlcHRoID0gc3ViZGl2aXNpb25zRGVwdGggfHwgMTtcbiAgbWF0cml4ID0gbWF0cml4IHx8IGlkZW50aXR5KCk7XG5cbiAgY29uc3QgbnVtVmVydGljZXMgPSAoc3ViZGl2aXNpb25zV2lkdGggKyAxKSAqIChzdWJkaXZpc2lvbnNEZXB0aCArIDEpO1xuICBjb25zdCBwb3NpdGlvbnMgPSBjcmVhdGVBdWdtZW50ZWRUeXBlZEFycmF5KDMsIG51bVZlcnRpY2VzKTtcbiAgY29uc3Qgbm9ybWFscyA9IGNyZWF0ZUF1Z21lbnRlZFR5cGVkQXJyYXkoMywgbnVtVmVydGljZXMpO1xuICBjb25zdCB0ZXhjb29yZHMgPSBjcmVhdGVBdWdtZW50ZWRUeXBlZEFycmF5KDIsIG51bVZlcnRpY2VzKTtcblxuICBmb3IgKGxldCB6ID0gMDsgeiA8PSBzdWJkaXZpc2lvbnNEZXB0aDsgeisrKSB7XG4gICAgZm9yIChsZXQgeCA9IDA7IHggPD0gc3ViZGl2aXNpb25zV2lkdGg7IHgrKykge1xuICAgICAgY29uc3QgdSA9IHggLyBzdWJkaXZpc2lvbnNXaWR0aDtcbiAgICAgIGNvbnN0IHYgPSB6IC8gc3ViZGl2aXNpb25zRGVwdGg7XG4gICAgICBwb3NpdGlvbnMucHVzaChcbiAgICAgICAgICB3aWR0aCAqIHUgLSB3aWR0aCAqIDAuNSxcbiAgICAgICAgICAwLFxuICAgICAgICAgIGRlcHRoICogdiAtIGRlcHRoICogMC41KTtcbiAgICAgIG5vcm1hbHMucHVzaCgwLCAxLCAwKTtcbiAgICAgIHRleGNvb3Jkcy5wdXNoKHUsIHYpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IG51bVZlcnRzQWNyb3NzID0gc3ViZGl2aXNpb25zV2lkdGggKyAxO1xuICBjb25zdCBpbmRpY2VzID0gY3JlYXRlQXVnbWVudGVkVHlwZWRBcnJheShcbiAgICAgIDMsIHN1YmRpdmlzaW9uc1dpZHRoICogc3ViZGl2aXNpb25zRGVwdGggKiAyLCBVaW50MTZBcnJheSk7XG5cbiAgZm9yIChsZXQgeiA9IDA7IHogPCBzdWJkaXZpc2lvbnNEZXB0aDsgeisrKSB7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgZm9yIChsZXQgeCA9IDA7IHggPCBzdWJkaXZpc2lvbnNXaWR0aDsgeCsrKSB7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICAvLyBNYWtlIHRyaWFuZ2xlIDEgb2YgcXVhZC5cbiAgICAgIGluZGljZXMucHVzaChcbiAgICAgICAgICAoeiArIDApICogbnVtVmVydHNBY3Jvc3MgKyB4LFxuICAgICAgICAgICh6ICsgMSkgKiBudW1WZXJ0c0Fjcm9zcyArIHgsXG4gICAgICAgICAgKHogKyAwKSAqIG51bVZlcnRzQWNyb3NzICsgeCArIDEpO1xuXG4gICAgICAvLyBNYWtlIHRyaWFuZ2xlIDIgb2YgcXVhZC5cbiAgICAgIGluZGljZXMucHVzaChcbiAgICAgICAgICAoeiArIDEpICogbnVtVmVydHNBY3Jvc3MgKyB4LFxuICAgICAgICAgICh6ICsgMSkgKiBudW1WZXJ0c0Fjcm9zcyArIHggKyAxLFxuICAgICAgICAgICh6ICsgMCkgKiBudW1WZXJ0c0Fjcm9zcyArIHggKyAxKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBhcnJheXMgPSByZW9yaWVudFZlcnRpY2VzKHtcbiAgICBwb3NpdGlvbjogcG9zaXRpb25zLFxuICAgIG5vcm1hbDogbm9ybWFscyxcbiAgICB0ZXhjb29yZDogdGV4Y29vcmRzLFxuICAgIGluZGljZXM6IGluZGljZXMsXG4gIH0sIG1hdHJpeCk7XG4gIHJldHVybiBhcnJheXM7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBzcGhlcmUgQnVmZmVySW5mby5cbiAqXG4gKiBUaGUgY3JlYXRlZCBzcGhlcmUgaGFzIHBvc2l0aW9uLCBub3JtYWwsIGFuZCB0ZXhjb29yZCBkYXRhXG4gKlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIFRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHQuXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIHJhZGl1cyBvZiB0aGUgc3BoZXJlLlxuICogQHBhcmFtIHtudW1iZXJ9IHN1YmRpdmlzaW9uc0F4aXMgbnVtYmVyIG9mIHN0ZXBzIGFyb3VuZCB0aGUgc3BoZXJlLlxuICogQHBhcmFtIHtudW1iZXJ9IHN1YmRpdmlzaW9uc0hlaWdodCBudW1iZXIgb2YgdmVydGljYWxseSBvbiB0aGUgc3BoZXJlLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfc3RhcnRMYXRpdHVkZUluUmFkaWFuc10gd2hlcmUgdG8gc3RhcnQgdGhlXG4gKiAgICAgdG9wIG9mIHRoZSBzcGhlcmUuIERlZmF1bHQgPSAwLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZW5kTGF0aXR1ZGVJblJhZGlhbnNdIFdoZXJlIHRvIGVuZCB0aGVcbiAqICAgICBib3R0b20gb2YgdGhlIHNwaGVyZS4gRGVmYXVsdCA9IE1hdGguUEkuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9zdGFydExvbmdpdHVkZUluUmFkaWFuc10gd2hlcmUgdG8gc3RhcnRcbiAqICAgICB3cmFwcGluZyB0aGUgc3BoZXJlLiBEZWZhdWx0ID0gMC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2VuZExvbmdpdHVkZUluUmFkaWFuc10gd2hlcmUgdG8gZW5kXG4gKiAgICAgd3JhcHBpbmcgdGhlIHNwaGVyZS4gRGVmYXVsdCA9IDIgKiBNYXRoLlBJLlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wuQnVmZmVySW5mb30gVGhlIGNyZWF0ZWQgc3BoZXJlIEJ1ZmZlckluZm8uXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJpbWl0aXZlc1xuICogQGZ1bmN0aW9uIGNyZWF0ZVNwaGVyZUJ1ZmZlckluZm9cbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgc3BoZXJlIGJ1ZmZlcnMuXG4gKlxuICogVGhlIGNyZWF0ZWQgc3BoZXJlIGhhcyBwb3NpdGlvbiwgbm9ybWFsLCBhbmQgdGV4Y29vcmQgZGF0YVxuICpcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0LlxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyByYWRpdXMgb2YgdGhlIHNwaGVyZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdWJkaXZpc2lvbnNBeGlzIG51bWJlciBvZiBzdGVwcyBhcm91bmQgdGhlIHNwaGVyZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdWJkaXZpc2lvbnNIZWlnaHQgbnVtYmVyIG9mIHZlcnRpY2FsbHkgb24gdGhlIHNwaGVyZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3N0YXJ0TGF0aXR1ZGVJblJhZGlhbnNdIHdoZXJlIHRvIHN0YXJ0IHRoZVxuICogICAgIHRvcCBvZiB0aGUgc3BoZXJlLiBEZWZhdWx0ID0gMC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2VuZExhdGl0dWRlSW5SYWRpYW5zXSBXaGVyZSB0byBlbmQgdGhlXG4gKiAgICAgYm90dG9tIG9mIHRoZSBzcGhlcmUuIERlZmF1bHQgPSBNYXRoLlBJLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfc3RhcnRMb25naXR1ZGVJblJhZGlhbnNdIHdoZXJlIHRvIHN0YXJ0XG4gKiAgICAgd3JhcHBpbmcgdGhlIHNwaGVyZS4gRGVmYXVsdCA9IDAuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9lbmRMb25naXR1ZGVJblJhZGlhbnNdIHdoZXJlIHRvIGVuZFxuICogICAgIHdyYXBwaW5nIHRoZSBzcGhlcmUuIERlZmF1bHQgPSAyICogTWF0aC5QSS5cbiAqIEByZXR1cm4ge09iamVjdC48c3RyaW5nLCBXZWJHTEJ1ZmZlcj59IFRoZSBjcmVhdGVkIHNwaGVyZSBidWZmZXJzLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3ByaW1pdGl2ZXNcbiAqIEBmdW5jdGlvbiBjcmVhdGVTcGhlcmVCdWZmZXJzXG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIHNwaGVyZSB2ZXJ0aWNlcy5cbiAqXG4gKiBUaGUgY3JlYXRlZCBzcGhlcmUgaGFzIHBvc2l0aW9uLCBub3JtYWwsIGFuZCB0ZXhjb29yZCBkYXRhXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyByYWRpdXMgb2YgdGhlIHNwaGVyZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdWJkaXZpc2lvbnNBeGlzIG51bWJlciBvZiBzdGVwcyBhcm91bmQgdGhlIHNwaGVyZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdWJkaXZpc2lvbnNIZWlnaHQgbnVtYmVyIG9mIHZlcnRpY2FsbHkgb24gdGhlIHNwaGVyZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3N0YXJ0TGF0aXR1ZGVJblJhZGlhbnNdIHdoZXJlIHRvIHN0YXJ0IHRoZVxuICogICAgIHRvcCBvZiB0aGUgc3BoZXJlLiBEZWZhdWx0ID0gMC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2VuZExhdGl0dWRlSW5SYWRpYW5zXSBXaGVyZSB0byBlbmQgdGhlXG4gKiAgICAgYm90dG9tIG9mIHRoZSBzcGhlcmUuIERlZmF1bHQgPSBNYXRoLlBJLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfc3RhcnRMb25naXR1ZGVJblJhZGlhbnNdIHdoZXJlIHRvIHN0YXJ0XG4gKiAgICAgd3JhcHBpbmcgdGhlIHNwaGVyZS4gRGVmYXVsdCA9IDAuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9lbmRMb25naXR1ZGVJblJhZGlhbnNdIHdoZXJlIHRvIGVuZFxuICogICAgIHdyYXBwaW5nIHRoZSBzcGhlcmUuIERlZmF1bHQgPSAyICogTWF0aC5QSS5cbiAqIEByZXR1cm4ge09iamVjdC48c3RyaW5nLCBUeXBlZEFycmF5Pn0gVGhlIGNyZWF0ZWQgc3BoZXJlIHZlcnRpY2VzLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3ByaW1pdGl2ZXNcbiAqL1xuZnVuY3Rpb24gY3JlYXRlU3BoZXJlVmVydGljZXMoXG4gICAgcmFkaXVzLFxuICAgIHN1YmRpdmlzaW9uc0F4aXMsXG4gICAgc3ViZGl2aXNpb25zSGVpZ2h0LFxuICAgIG9wdF9zdGFydExhdGl0dWRlSW5SYWRpYW5zLFxuICAgIG9wdF9lbmRMYXRpdHVkZUluUmFkaWFucyxcbiAgICBvcHRfc3RhcnRMb25naXR1ZGVJblJhZGlhbnMsXG4gICAgb3B0X2VuZExvbmdpdHVkZUluUmFkaWFucykge1xuICBpZiAoc3ViZGl2aXNpb25zQXhpcyA8PSAwIHx8IHN1YmRpdmlzaW9uc0hlaWdodCA8PSAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzdWJkaXZpc2lvbkF4aXMgYW5kIHN1YmRpdmlzaW9uSGVpZ2h0IG11c3QgYmUgPiAwJyk7XG4gIH1cblxuICBvcHRfc3RhcnRMYXRpdHVkZUluUmFkaWFucyA9IG9wdF9zdGFydExhdGl0dWRlSW5SYWRpYW5zIHx8IDA7XG4gIG9wdF9lbmRMYXRpdHVkZUluUmFkaWFucyA9IG9wdF9lbmRMYXRpdHVkZUluUmFkaWFucyB8fCBNYXRoLlBJO1xuICBvcHRfc3RhcnRMb25naXR1ZGVJblJhZGlhbnMgPSBvcHRfc3RhcnRMb25naXR1ZGVJblJhZGlhbnMgfHwgMDtcbiAgb3B0X2VuZExvbmdpdHVkZUluUmFkaWFucyA9IG9wdF9lbmRMb25naXR1ZGVJblJhZGlhbnMgfHwgKE1hdGguUEkgKiAyKTtcblxuICBjb25zdCBsYXRSYW5nZSA9IG9wdF9lbmRMYXRpdHVkZUluUmFkaWFucyAtIG9wdF9zdGFydExhdGl0dWRlSW5SYWRpYW5zO1xuICBjb25zdCBsb25nUmFuZ2UgPSBvcHRfZW5kTG9uZ2l0dWRlSW5SYWRpYW5zIC0gb3B0X3N0YXJ0TG9uZ2l0dWRlSW5SYWRpYW5zO1xuXG4gIC8vIFdlIGFyZSBnb2luZyB0byBnZW5lcmF0ZSBvdXIgc3BoZXJlIGJ5IGl0ZXJhdGluZyB0aHJvdWdoIGl0c1xuICAvLyBzcGhlcmljYWwgY29vcmRpbmF0ZXMgYW5kIGdlbmVyYXRpbmcgMiB0cmlhbmdsZXMgZm9yIGVhY2ggcXVhZCBvbiBhXG4gIC8vIHJpbmcgb2YgdGhlIHNwaGVyZS5cbiAgY29uc3QgbnVtVmVydGljZXMgPSAoc3ViZGl2aXNpb25zQXhpcyArIDEpICogKHN1YmRpdmlzaW9uc0hlaWdodCArIDEpO1xuICBjb25zdCBwb3NpdGlvbnMgPSBjcmVhdGVBdWdtZW50ZWRUeXBlZEFycmF5KDMsIG51bVZlcnRpY2VzKTtcbiAgY29uc3Qgbm9ybWFscyAgID0gY3JlYXRlQXVnbWVudGVkVHlwZWRBcnJheSgzLCBudW1WZXJ0aWNlcyk7XG4gIGNvbnN0IHRleGNvb3JkcyA9IGNyZWF0ZUF1Z21lbnRlZFR5cGVkQXJyYXkoMiwgbnVtVmVydGljZXMpO1xuXG4gIC8vIEdlbmVyYXRlIHRoZSBpbmRpdmlkdWFsIHZlcnRpY2VzIGluIG91ciB2ZXJ0ZXggYnVmZmVyLlxuICBmb3IgKGxldCB5ID0gMDsgeSA8PSBzdWJkaXZpc2lvbnNIZWlnaHQ7IHkrKykge1xuICAgIGZvciAobGV0IHggPSAwOyB4IDw9IHN1YmRpdmlzaW9uc0F4aXM7IHgrKykge1xuICAgICAgLy8gR2VuZXJhdGUgYSB2ZXJ0ZXggYmFzZWQgb24gaXRzIHNwaGVyaWNhbCBjb29yZGluYXRlc1xuICAgICAgY29uc3QgdSA9IHggLyBzdWJkaXZpc2lvbnNBeGlzO1xuICAgICAgY29uc3QgdiA9IHkgLyBzdWJkaXZpc2lvbnNIZWlnaHQ7XG4gICAgICBjb25zdCB0aGV0YSA9IGxvbmdSYW5nZSAqIHUgKyBvcHRfc3RhcnRMb25naXR1ZGVJblJhZGlhbnM7XG4gICAgICBjb25zdCBwaGkgPSBsYXRSYW5nZSAqIHYgKyBvcHRfc3RhcnRMYXRpdHVkZUluUmFkaWFucztcbiAgICAgIGNvbnN0IHNpblRoZXRhID0gTWF0aC5zaW4odGhldGEpO1xuICAgICAgY29uc3QgY29zVGhldGEgPSBNYXRoLmNvcyh0aGV0YSk7XG4gICAgICBjb25zdCBzaW5QaGkgPSBNYXRoLnNpbihwaGkpO1xuICAgICAgY29uc3QgY29zUGhpID0gTWF0aC5jb3MocGhpKTtcbiAgICAgIGNvbnN0IHV4ID0gY29zVGhldGEgKiBzaW5QaGk7XG4gICAgICBjb25zdCB1eSA9IGNvc1BoaTtcbiAgICAgIGNvbnN0IHV6ID0gc2luVGhldGEgKiBzaW5QaGk7XG4gICAgICBwb3NpdGlvbnMucHVzaChyYWRpdXMgKiB1eCwgcmFkaXVzICogdXksIHJhZGl1cyAqIHV6KTtcbiAgICAgIG5vcm1hbHMucHVzaCh1eCwgdXksIHV6KTtcbiAgICAgIHRleGNvb3Jkcy5wdXNoKDEgLSB1LCB2KTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBudW1WZXJ0c0Fyb3VuZCA9IHN1YmRpdmlzaW9uc0F4aXMgKyAxO1xuICBjb25zdCBpbmRpY2VzID0gY3JlYXRlQXVnbWVudGVkVHlwZWRBcnJheSgzLCBzdWJkaXZpc2lvbnNBeGlzICogc3ViZGl2aXNpb25zSGVpZ2h0ICogMiwgVWludDE2QXJyYXkpO1xuICBmb3IgKGxldCB4ID0gMDsgeCA8IHN1YmRpdmlzaW9uc0F4aXM7IHgrKykgeyAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgIGZvciAobGV0IHkgPSAwOyB5IDwgc3ViZGl2aXNpb25zSGVpZ2h0OyB5KyspIHsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgIC8vIE1ha2UgdHJpYW5nbGUgMSBvZiBxdWFkLlxuICAgICAgaW5kaWNlcy5wdXNoKFxuICAgICAgICAgICh5ICsgMCkgKiBudW1WZXJ0c0Fyb3VuZCArIHgsXG4gICAgICAgICAgKHkgKyAwKSAqIG51bVZlcnRzQXJvdW5kICsgeCArIDEsXG4gICAgICAgICAgKHkgKyAxKSAqIG51bVZlcnRzQXJvdW5kICsgeCk7XG5cbiAgICAgIC8vIE1ha2UgdHJpYW5nbGUgMiBvZiBxdWFkLlxuICAgICAgaW5kaWNlcy5wdXNoKFxuICAgICAgICAgICh5ICsgMSkgKiBudW1WZXJ0c0Fyb3VuZCArIHgsXG4gICAgICAgICAgKHkgKyAwKSAqIG51bVZlcnRzQXJvdW5kICsgeCArIDEsXG4gICAgICAgICAgKHkgKyAxKSAqIG51bVZlcnRzQXJvdW5kICsgeCArIDEpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcG9zaXRpb246IHBvc2l0aW9ucyxcbiAgICBub3JtYWw6IG5vcm1hbHMsXG4gICAgdGV4Y29vcmQ6IHRleGNvb3JkcyxcbiAgICBpbmRpY2VzOiBpbmRpY2VzLFxuICB9O1xufVxuXG4vKipcbiAqIEFycmF5IG9mIHRoZSBpbmRpY2VzIG9mIGNvcm5lcnMgb2YgZWFjaCBmYWNlIG9mIGEgY3ViZS5cbiAqIEB0eXBlIHtBcnJheS48bnVtYmVyW10+fVxuICogQHByaXZhdGVcbiAqL1xuY29uc3QgQ1VCRV9GQUNFX0lORElDRVMgPSBbXG4gIFszLCA3LCA1LCAxXSwgIC8vIHJpZ2h0XG4gIFs2LCAyLCAwLCA0XSwgIC8vIGxlZnRcbiAgWzYsIDcsIDMsIDJdLCAgLy8gPz9cbiAgWzAsIDEsIDUsIDRdLCAgLy8gPz9cbiAgWzcsIDYsIDQsIDVdLCAgLy8gZnJvbnRcbiAgWzIsIDMsIDEsIDBdLCAgLy8gYmFja1xuXTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgQnVmZmVySW5mbyBmb3IgYSBjdWJlLlxuICpcbiAqIFRoZSBjdWJlIGlzIGNyZWF0ZWQgYXJvdW5kIHRoZSBvcmlnaW4uICgtc2l6ZSAvIDIsIHNpemUgLyAyKS5cbiAqXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgVGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbc2l6ZV0gd2lkdGgsIGhlaWdodCBhbmQgZGVwdGggb2YgdGhlIGN1YmUuXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC5CdWZmZXJJbmZvfSBUaGUgY3JlYXRlZCBCdWZmZXJJbmZvLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3ByaW1pdGl2ZXNcbiAqIEBmdW5jdGlvbiBjcmVhdGVDdWJlQnVmZmVySW5mb1xuICovXG5cbi8qKlxuICogQ3JlYXRlcyB0aGUgYnVmZmVycyBhbmQgaW5kaWNlcyBmb3IgYSBjdWJlLlxuICpcbiAqIFRoZSBjdWJlIGlzIGNyZWF0ZWQgYXJvdW5kIHRoZSBvcmlnaW4uICgtc2l6ZSAvIDIsIHNpemUgLyAyKS5cbiAqXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgVGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbc2l6ZV0gd2lkdGgsIGhlaWdodCBhbmQgZGVwdGggb2YgdGhlIGN1YmUuXG4gKiBAcmV0dXJuIHtPYmplY3QuPHN0cmluZywgV2ViR0xCdWZmZXI+fSBUaGUgY3JlYXRlZCBidWZmZXJzLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3ByaW1pdGl2ZXNcbiAqIEBmdW5jdGlvbiBjcmVhdGVDdWJlQnVmZmVyc1xuICovXG5cbi8qKlxuICogQ3JlYXRlcyB0aGUgdmVydGljZXMgYW5kIGluZGljZXMgZm9yIGEgY3ViZS5cbiAqXG4gKiBUaGUgY3ViZSBpcyBjcmVhdGVkIGFyb3VuZCB0aGUgb3JpZ2luLiAoLXNpemUgLyAyLCBzaXplIC8gMikuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IFtzaXplXSB3aWR0aCwgaGVpZ2h0IGFuZCBkZXB0aCBvZiB0aGUgY3ViZS5cbiAqIEByZXR1cm4ge09iamVjdC48c3RyaW5nLCBUeXBlZEFycmF5Pn0gVGhlIGNyZWF0ZWQgdmVydGljZXMuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJpbWl0aXZlc1xuICovXG5mdW5jdGlvbiBjcmVhdGVDdWJlVmVydGljZXMoc2l6ZSkge1xuICBzaXplID0gc2l6ZSB8fCAxO1xuICBjb25zdCBrID0gc2l6ZSAvIDI7XG5cbiAgY29uc3QgY29ybmVyVmVydGljZXMgPSBbXG4gICAgWy1rLCAtaywgLWtdLFxuICAgIFsraywgLWssIC1rXSxcbiAgICBbLWssICtrLCAta10sXG4gICAgWytrLCAraywgLWtdLFxuICAgIFstaywgLWssICtrXSxcbiAgICBbK2ssIC1rLCAra10sXG4gICAgWy1rLCAraywgK2tdLFxuICAgIFsraywgK2ssICtrXSxcbiAgXTtcblxuICBjb25zdCBmYWNlTm9ybWFscyA9IFtcbiAgICBbKzEsICswLCArMF0sXG4gICAgWy0xLCArMCwgKzBdLFxuICAgIFsrMCwgKzEsICswXSxcbiAgICBbKzAsIC0xLCArMF0sXG4gICAgWyswLCArMCwgKzFdLFxuICAgIFsrMCwgKzAsIC0xXSxcbiAgXTtcblxuICBjb25zdCB1dkNvb3JkcyA9IFtcbiAgICBbMSwgMF0sXG4gICAgWzAsIDBdLFxuICAgIFswLCAxXSxcbiAgICBbMSwgMV0sXG4gIF07XG5cbiAgY29uc3QgbnVtVmVydGljZXMgPSA2ICogNDtcbiAgY29uc3QgcG9zaXRpb25zID0gY3JlYXRlQXVnbWVudGVkVHlwZWRBcnJheSgzLCBudW1WZXJ0aWNlcyk7XG4gIGNvbnN0IG5vcm1hbHMgICA9IGNyZWF0ZUF1Z21lbnRlZFR5cGVkQXJyYXkoMywgbnVtVmVydGljZXMpO1xuICBjb25zdCB0ZXhjb29yZHMgPSBjcmVhdGVBdWdtZW50ZWRUeXBlZEFycmF5KDIgLCBudW1WZXJ0aWNlcyk7XG4gIGNvbnN0IGluZGljZXMgICA9IGNyZWF0ZUF1Z21lbnRlZFR5cGVkQXJyYXkoMywgNiAqIDIsIFVpbnQxNkFycmF5KTtcblxuICBmb3IgKGxldCBmID0gMDsgZiA8IDY7ICsrZikge1xuICAgIGNvbnN0IGZhY2VJbmRpY2VzID0gQ1VCRV9GQUNFX0lORElDRVNbZl07XG4gICAgZm9yIChsZXQgdiA9IDA7IHYgPCA0OyArK3YpIHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gY29ybmVyVmVydGljZXNbZmFjZUluZGljZXNbdl1dO1xuICAgICAgY29uc3Qgbm9ybWFsID0gZmFjZU5vcm1hbHNbZl07XG4gICAgICBjb25zdCB1diA9IHV2Q29vcmRzW3ZdO1xuXG4gICAgICAvLyBFYWNoIGZhY2UgbmVlZHMgYWxsIGZvdXIgdmVydGljZXMgYmVjYXVzZSB0aGUgbm9ybWFscyBhbmQgdGV4dHVyZVxuICAgICAgLy8gY29vcmRpbmF0ZXMgYXJlIG5vdCBhbGwgdGhlIHNhbWUuXG4gICAgICBwb3NpdGlvbnMucHVzaChwb3NpdGlvbik7XG4gICAgICBub3JtYWxzLnB1c2gobm9ybWFsKTtcbiAgICAgIHRleGNvb3Jkcy5wdXNoKHV2KTtcblxuICAgIH1cbiAgICAvLyBUd28gdHJpYW5nbGVzIG1ha2UgYSBzcXVhcmUgZmFjZS5cbiAgICBjb25zdCBvZmZzZXQgPSA0ICogZjtcbiAgICBpbmRpY2VzLnB1c2gob2Zmc2V0ICsgMCwgb2Zmc2V0ICsgMSwgb2Zmc2V0ICsgMik7XG4gICAgaW5kaWNlcy5wdXNoKG9mZnNldCArIDAsIG9mZnNldCArIDIsIG9mZnNldCArIDMpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBwb3NpdGlvbjogcG9zaXRpb25zLFxuICAgIG5vcm1hbDogbm9ybWFscyxcbiAgICB0ZXhjb29yZDogdGV4Y29vcmRzLFxuICAgIGluZGljZXM6IGluZGljZXMsXG4gIH07XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIEJ1ZmZlckluZm8gZm9yIGEgdHJ1bmNhdGVkIGNvbmUsIHdoaWNoIGlzIGxpa2UgYSBjeWxpbmRlclxuICogZXhjZXB0IHRoYXQgaXQgaGFzIGRpZmZlcmVudCB0b3AgYW5kIGJvdHRvbSByYWRpaS4gQSB0cnVuY2F0ZWQgY29uZVxuICogY2FuIGFsc28gYmUgdXNlZCB0byBjcmVhdGUgY3lsaW5kZXJzIGFuZCByZWd1bGFyIGNvbmVzLiBUaGVcbiAqIHRydW5jYXRlZCBjb25lIHdpbGwgYmUgY3JlYXRlZCBjZW50ZXJlZCBhYm91dCB0aGUgb3JpZ2luLCB3aXRoIHRoZVxuICogeSBheGlzIGFzIGl0cyB2ZXJ0aWNhbCBheGlzLlxuICpcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0LlxuICogQHBhcmFtIHtudW1iZXJ9IGJvdHRvbVJhZGl1cyBCb3R0b20gcmFkaXVzIG9mIHRydW5jYXRlZCBjb25lLlxuICogQHBhcmFtIHtudW1iZXJ9IHRvcFJhZGl1cyBUb3AgcmFkaXVzIG9mIHRydW5jYXRlZCBjb25lLlxuICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCBIZWlnaHQgb2YgdHJ1bmNhdGVkIGNvbmUuXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaWFsU3ViZGl2aXNpb25zIFRoZSBudW1iZXIgb2Ygc3ViZGl2aXNpb25zIGFyb3VuZCB0aGVcbiAqICAgICB0cnVuY2F0ZWQgY29uZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2ZXJ0aWNhbFN1YmRpdmlzaW9ucyBUaGUgbnVtYmVyIG9mIHN1YmRpdmlzaW9ucyBkb3duIHRoZVxuICogICAgIHRydW5jYXRlZCBjb25lLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3RvcENhcF0gQ3JlYXRlIHRvcCBjYXAuIERlZmF1bHQgPSB0cnVlLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X2JvdHRvbUNhcF0gQ3JlYXRlIGJvdHRvbSBjYXAuIERlZmF1bHQgPSB0cnVlLlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wuQnVmZmVySW5mb30gVGhlIGNyZWF0ZWQgY29uZSBCdWZmZXJJbmZvLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3ByaW1pdGl2ZXNcbiAqIEBmdW5jdGlvbiBjcmVhdGVUcnVuY2F0ZWRDb25lQnVmZmVySW5mb1xuICovXG5cbi8qKlxuICogQ3JlYXRlcyBidWZmZXJzIGZvciBhIHRydW5jYXRlZCBjb25lLCB3aGljaCBpcyBsaWtlIGEgY3lsaW5kZXJcbiAqIGV4Y2VwdCB0aGF0IGl0IGhhcyBkaWZmZXJlbnQgdG9wIGFuZCBib3R0b20gcmFkaWkuIEEgdHJ1bmNhdGVkIGNvbmVcbiAqIGNhbiBhbHNvIGJlIHVzZWQgdG8gY3JlYXRlIGN5bGluZGVycyBhbmQgcmVndWxhciBjb25lcy4gVGhlXG4gKiB0cnVuY2F0ZWQgY29uZSB3aWxsIGJlIGNyZWF0ZWQgY2VudGVyZWQgYWJvdXQgdGhlIG9yaWdpbiwgd2l0aCB0aGVcbiAqIHkgYXhpcyBhcyBpdHMgdmVydGljYWwgYXhpcy5cbiAqXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgVGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBib3R0b21SYWRpdXMgQm90dG9tIHJhZGl1cyBvZiB0cnVuY2F0ZWQgY29uZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b3BSYWRpdXMgVG9wIHJhZGl1cyBvZiB0cnVuY2F0ZWQgY29uZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgSGVpZ2h0IG9mIHRydW5jYXRlZCBjb25lLlxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGlhbFN1YmRpdmlzaW9ucyBUaGUgbnVtYmVyIG9mIHN1YmRpdmlzaW9ucyBhcm91bmQgdGhlXG4gKiAgICAgdHJ1bmNhdGVkIGNvbmUuXG4gKiBAcGFyYW0ge251bWJlcn0gdmVydGljYWxTdWJkaXZpc2lvbnMgVGhlIG51bWJlciBvZiBzdWJkaXZpc2lvbnMgZG93biB0aGVcbiAqICAgICB0cnVuY2F0ZWQgY29uZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF90b3BDYXBdIENyZWF0ZSB0b3AgY2FwLiBEZWZhdWx0ID0gdHJ1ZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9ib3R0b21DYXBdIENyZWF0ZSBib3R0b20gY2FwLiBEZWZhdWx0ID0gdHJ1ZS5cbiAqIEByZXR1cm4ge09iamVjdC48c3RyaW5nLCBXZWJHTEJ1ZmZlcj59IFRoZSBjcmVhdGVkIGNvbmUgYnVmZmVycy5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcmltaXRpdmVzXG4gKiBAZnVuY3Rpb24gY3JlYXRlVHJ1bmNhdGVkQ29uZUJ1ZmZlcnNcbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgdmVydGljZXMgZm9yIGEgdHJ1bmNhdGVkIGNvbmUsIHdoaWNoIGlzIGxpa2UgYSBjeWxpbmRlclxuICogZXhjZXB0IHRoYXQgaXQgaGFzIGRpZmZlcmVudCB0b3AgYW5kIGJvdHRvbSByYWRpaS4gQSB0cnVuY2F0ZWQgY29uZVxuICogY2FuIGFsc28gYmUgdXNlZCB0byBjcmVhdGUgY3lsaW5kZXJzIGFuZCByZWd1bGFyIGNvbmVzLiBUaGVcbiAqIHRydW5jYXRlZCBjb25lIHdpbGwgYmUgY3JlYXRlZCBjZW50ZXJlZCBhYm91dCB0aGUgb3JpZ2luLCB3aXRoIHRoZVxuICogeSBheGlzIGFzIGl0cyB2ZXJ0aWNhbCBheGlzLiAuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGJvdHRvbVJhZGl1cyBCb3R0b20gcmFkaXVzIG9mIHRydW5jYXRlZCBjb25lLlxuICogQHBhcmFtIHtudW1iZXJ9IHRvcFJhZGl1cyBUb3AgcmFkaXVzIG9mIHRydW5jYXRlZCBjb25lLlxuICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCBIZWlnaHQgb2YgdHJ1bmNhdGVkIGNvbmUuXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaWFsU3ViZGl2aXNpb25zIFRoZSBudW1iZXIgb2Ygc3ViZGl2aXNpb25zIGFyb3VuZCB0aGVcbiAqICAgICB0cnVuY2F0ZWQgY29uZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2ZXJ0aWNhbFN1YmRpdmlzaW9ucyBUaGUgbnVtYmVyIG9mIHN1YmRpdmlzaW9ucyBkb3duIHRoZVxuICogICAgIHRydW5jYXRlZCBjb25lLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3RvcENhcF0gQ3JlYXRlIHRvcCBjYXAuIERlZmF1bHQgPSB0cnVlLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X2JvdHRvbUNhcF0gQ3JlYXRlIGJvdHRvbSBjYXAuIERlZmF1bHQgPSB0cnVlLlxuICogQHJldHVybiB7T2JqZWN0LjxzdHJpbmcsIFR5cGVkQXJyYXk+fSBUaGUgY3JlYXRlZCBjb25lIHZlcnRpY2VzLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3ByaW1pdGl2ZXNcbiAqL1xuZnVuY3Rpb24gY3JlYXRlVHJ1bmNhdGVkQ29uZVZlcnRpY2VzKFxuICAgIGJvdHRvbVJhZGl1cyxcbiAgICB0b3BSYWRpdXMsXG4gICAgaGVpZ2h0LFxuICAgIHJhZGlhbFN1YmRpdmlzaW9ucyxcbiAgICB2ZXJ0aWNhbFN1YmRpdmlzaW9ucyxcbiAgICBvcHRfdG9wQ2FwLFxuICAgIG9wdF9ib3R0b21DYXApIHtcbiAgaWYgKHJhZGlhbFN1YmRpdmlzaW9ucyA8IDMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3JhZGlhbFN1YmRpdmlzaW9ucyBtdXN0IGJlIDMgb3IgZ3JlYXRlcicpO1xuICB9XG5cbiAgaWYgKHZlcnRpY2FsU3ViZGl2aXNpb25zIDwgMSkge1xuICAgIHRocm93IG5ldyBFcnJvcigndmVydGljYWxTdWJkaXZpc2lvbnMgbXVzdCBiZSAxIG9yIGdyZWF0ZXInKTtcbiAgfVxuXG4gIGNvbnN0IHRvcENhcCA9IChvcHRfdG9wQ2FwID09PSB1bmRlZmluZWQpID8gdHJ1ZSA6IG9wdF90b3BDYXA7XG4gIGNvbnN0IGJvdHRvbUNhcCA9IChvcHRfYm90dG9tQ2FwID09PSB1bmRlZmluZWQpID8gdHJ1ZSA6IG9wdF9ib3R0b21DYXA7XG5cbiAgY29uc3QgZXh0cmEgPSAodG9wQ2FwID8gMiA6IDApICsgKGJvdHRvbUNhcCA/IDIgOiAwKTtcblxuICBjb25zdCBudW1WZXJ0aWNlcyA9IChyYWRpYWxTdWJkaXZpc2lvbnMgKyAxKSAqICh2ZXJ0aWNhbFN1YmRpdmlzaW9ucyArIDEgKyBleHRyYSk7XG4gIGNvbnN0IHBvc2l0aW9ucyA9IGNyZWF0ZUF1Z21lbnRlZFR5cGVkQXJyYXkoMywgbnVtVmVydGljZXMpO1xuICBjb25zdCBub3JtYWxzICAgPSBjcmVhdGVBdWdtZW50ZWRUeXBlZEFycmF5KDMsIG51bVZlcnRpY2VzKTtcbiAgY29uc3QgdGV4Y29vcmRzID0gY3JlYXRlQXVnbWVudGVkVHlwZWRBcnJheSgyLCBudW1WZXJ0aWNlcyk7XG4gIGNvbnN0IGluZGljZXMgICA9IGNyZWF0ZUF1Z21lbnRlZFR5cGVkQXJyYXkoMywgcmFkaWFsU3ViZGl2aXNpb25zICogKHZlcnRpY2FsU3ViZGl2aXNpb25zICsgZXh0cmEgLyAyKSAqIDIsIFVpbnQxNkFycmF5KTtcblxuICBjb25zdCB2ZXJ0c0Fyb3VuZEVkZ2UgPSByYWRpYWxTdWJkaXZpc2lvbnMgKyAxO1xuXG4gIC8vIFRoZSBzbGFudCBvZiB0aGUgY29uZSBpcyBjb25zdGFudCBhY3Jvc3MgaXRzIHN1cmZhY2VcbiAgY29uc3Qgc2xhbnQgPSBNYXRoLmF0YW4yKGJvdHRvbVJhZGl1cyAtIHRvcFJhZGl1cywgaGVpZ2h0KTtcbiAgY29uc3QgY29zU2xhbnQgPSBNYXRoLmNvcyhzbGFudCk7XG4gIGNvbnN0IHNpblNsYW50ID0gTWF0aC5zaW4oc2xhbnQpO1xuXG4gIGNvbnN0IHN0YXJ0ID0gdG9wQ2FwID8gLTIgOiAwO1xuICBjb25zdCBlbmQgPSB2ZXJ0aWNhbFN1YmRpdmlzaW9ucyArIChib3R0b21DYXAgPyAyIDogMCk7XG5cbiAgZm9yIChsZXQgeXkgPSBzdGFydDsgeXkgPD0gZW5kOyArK3l5KSB7XG4gICAgbGV0IHYgPSB5eSAvIHZlcnRpY2FsU3ViZGl2aXNpb25zO1xuICAgIGxldCB5ID0gaGVpZ2h0ICogdjtcbiAgICBsZXQgcmluZ1JhZGl1cztcbiAgICBpZiAoeXkgPCAwKSB7XG4gICAgICB5ID0gMDtcbiAgICAgIHYgPSAxO1xuICAgICAgcmluZ1JhZGl1cyA9IGJvdHRvbVJhZGl1cztcbiAgICB9IGVsc2UgaWYgKHl5ID4gdmVydGljYWxTdWJkaXZpc2lvbnMpIHtcbiAgICAgIHkgPSBoZWlnaHQ7XG4gICAgICB2ID0gMTtcbiAgICAgIHJpbmdSYWRpdXMgPSB0b3BSYWRpdXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJpbmdSYWRpdXMgPSBib3R0b21SYWRpdXMgK1xuICAgICAgICAodG9wUmFkaXVzIC0gYm90dG9tUmFkaXVzKSAqICh5eSAvIHZlcnRpY2FsU3ViZGl2aXNpb25zKTtcbiAgICB9XG4gICAgaWYgKHl5ID09PSAtMiB8fCB5eSA9PT0gdmVydGljYWxTdWJkaXZpc2lvbnMgKyAyKSB7XG4gICAgICByaW5nUmFkaXVzID0gMDtcbiAgICAgIHYgPSAwO1xuICAgIH1cbiAgICB5IC09IGhlaWdodCAvIDI7XG4gICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IHZlcnRzQXJvdW5kRWRnZTsgKytpaSkge1xuICAgICAgY29uc3Qgc2luID0gTWF0aC5zaW4oaWkgKiBNYXRoLlBJICogMiAvIHJhZGlhbFN1YmRpdmlzaW9ucyk7XG4gICAgICBjb25zdCBjb3MgPSBNYXRoLmNvcyhpaSAqIE1hdGguUEkgKiAyIC8gcmFkaWFsU3ViZGl2aXNpb25zKTtcbiAgICAgIHBvc2l0aW9ucy5wdXNoKHNpbiAqIHJpbmdSYWRpdXMsIHksIGNvcyAqIHJpbmdSYWRpdXMpO1xuICAgICAgaWYgKHl5IDwgMCkge1xuICAgICAgICBub3JtYWxzLnB1c2goMCwgLTEsIDApO1xuICAgICAgfSBlbHNlIGlmICh5eSA+IHZlcnRpY2FsU3ViZGl2aXNpb25zKSB7XG4gICAgICAgIG5vcm1hbHMucHVzaCgwLCAxLCAwKTtcbiAgICAgIH0gZWxzZSBpZiAocmluZ1JhZGl1cyA9PT0gMC4wKSB7XG4gICAgICAgIG5vcm1hbHMucHVzaCgwLCAwLCAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vcm1hbHMucHVzaChzaW4gKiBjb3NTbGFudCwgc2luU2xhbnQsIGNvcyAqIGNvc1NsYW50KTtcbiAgICAgIH1cbiAgICAgIHRleGNvb3Jkcy5wdXNoKChpaSAvIHJhZGlhbFN1YmRpdmlzaW9ucyksIDEgLSB2KTtcbiAgICB9XG4gIH1cblxuICBmb3IgKGxldCB5eSA9IDA7IHl5IDwgdmVydGljYWxTdWJkaXZpc2lvbnMgKyBleHRyYTsgKyt5eSkgeyAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgIGlmICh5eSA9PT0gMSAmJiB0b3BDYXAgfHwgeXkgPT09IHZlcnRpY2FsU3ViZGl2aXNpb25zICsgZXh0cmEgLSAyICYmIGJvdHRvbUNhcCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCByYWRpYWxTdWJkaXZpc2lvbnM7ICsraWkpIHsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgIGluZGljZXMucHVzaCh2ZXJ0c0Fyb3VuZEVkZ2UgKiAoeXkgKyAwKSArIDAgKyBpaSxcbiAgICAgICAgICAgICAgICAgICB2ZXJ0c0Fyb3VuZEVkZ2UgKiAoeXkgKyAwKSArIDEgKyBpaSxcbiAgICAgICAgICAgICAgICAgICB2ZXJ0c0Fyb3VuZEVkZ2UgKiAoeXkgKyAxKSArIDEgKyBpaSk7XG4gICAgICBpbmRpY2VzLnB1c2godmVydHNBcm91bmRFZGdlICogKHl5ICsgMCkgKyAwICsgaWksXG4gICAgICAgICAgICAgICAgICAgdmVydHNBcm91bmRFZGdlICogKHl5ICsgMSkgKyAxICsgaWksXG4gICAgICAgICAgICAgICAgICAgdmVydHNBcm91bmRFZGdlICogKHl5ICsgMSkgKyAwICsgaWkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcG9zaXRpb246IHBvc2l0aW9ucyxcbiAgICBub3JtYWw6IG5vcm1hbHMsXG4gICAgdGV4Y29vcmQ6IHRleGNvb3JkcyxcbiAgICBpbmRpY2VzOiBpbmRpY2VzLFxuICB9O1xufVxuXG4vKipcbiAqIEV4cGFuZHMgUkxFIGRhdGFcbiAqIEBwYXJhbSB7bnVtYmVyW119IHJsZURhdGEgZGF0YSBpbiBmb3JtYXQgb2YgcnVuLWxlbmd0aCwgeCwgeSwgeiwgcnVuLWxlbmd0aCwgeCwgeSwgelxuICogQHBhcmFtIHtudW1iZXJbXX0gW3BhZGRpbmddIHZhbHVlIHRvIGFkZCBlYWNoIGVudHJ5IHdpdGguXG4gKiBAcmV0dXJuIHtudW1iZXJbXX0gdGhlIGV4cGFuZGVkIHJsZURhdGFcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGV4cGFuZFJMRURhdGEocmxlRGF0YSwgcGFkZGluZykge1xuICBwYWRkaW5nID0gcGFkZGluZyB8fCBbXTtcbiAgY29uc3QgZGF0YSA9IFtdO1xuICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgcmxlRGF0YS5sZW5ndGg7IGlpICs9IDQpIHtcbiAgICBjb25zdCBydW5MZW5ndGggPSBybGVEYXRhW2lpXTtcbiAgICBjb25zdCBlbGVtZW50ID0gcmxlRGF0YS5zbGljZShpaSArIDEsIGlpICsgNCk7XG4gICAgZWxlbWVudC5wdXNoLmFwcGx5KGVsZW1lbnQsIHBhZGRpbmcpO1xuICAgIGZvciAobGV0IGpqID0gMDsgamogPCBydW5MZW5ndGg7ICsramopIHtcbiAgICAgIGRhdGEucHVzaC5hcHBseShkYXRhLCBlbGVtZW50KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbi8qKlxuICogQ3JlYXRlcyAzRCAnRicgQnVmZmVySW5mby5cbiAqIEFuICdGJyBpcyB1c2VmdWwgYmVjYXVzZSB5b3UgY2FuIGVhc2lseSB0ZWxsIHdoaWNoIHdheSBpdCBpcyBvcmllbnRlZC5cbiAqIFRoZSBjcmVhdGVkICdGJyBoYXMgcG9zaXRpb24sIG5vcm1hbCwgdGV4Y29vcmQsIGFuZCBjb2xvciBidWZmZXJzLlxuICpcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0LlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wuQnVmZmVySW5mb30gVGhlIGNyZWF0ZWQgQnVmZmVySW5mby5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcmltaXRpdmVzXG4gKiBAZnVuY3Rpb24gY3JlYXRlM0RGQnVmZmVySW5mb1xuICovXG5cbi8qKlxuICogQ3JlYXRlcyAzRCAnRicgYnVmZmVycy5cbiAqIEFuICdGJyBpcyB1c2VmdWwgYmVjYXVzZSB5b3UgY2FuIGVhc2lseSB0ZWxsIHdoaWNoIHdheSBpdCBpcyBvcmllbnRlZC5cbiAqIFRoZSBjcmVhdGVkICdGJyBoYXMgcG9zaXRpb24sIG5vcm1hbCwgdGV4Y29vcmQsIGFuZCBjb2xvciBidWZmZXJzLlxuICpcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0LlxuICogQHJldHVybiB7T2JqZWN0LjxzdHJpbmcsIFdlYkdMQnVmZmVyPn0gVGhlIGNyZWF0ZWQgYnVmZmVycy5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcmltaXRpdmVzXG4gKiBAZnVuY3Rpb24gY3JlYXRlM0RGQnVmZmVyc1xuICovXG5cbi8qKlxuICogQ3JlYXRlcyAzRCAnRicgdmVydGljZXMuXG4gKiBBbiAnRicgaXMgdXNlZnVsIGJlY2F1c2UgeW91IGNhbiBlYXNpbHkgdGVsbCB3aGljaCB3YXkgaXQgaXMgb3JpZW50ZWQuXG4gKiBUaGUgY3JlYXRlZCAnRicgaGFzIHBvc2l0aW9uLCBub3JtYWwsIHRleGNvb3JkLCBhbmQgY29sb3IgYXJyYXlzLlxuICpcbiAqIEByZXR1cm4ge09iamVjdC48c3RyaW5nLCBUeXBlZEFycmF5Pn0gVGhlIGNyZWF0ZWQgdmVydGljZXMuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJpbWl0aXZlc1xuICovXG5mdW5jdGlvbiBjcmVhdGUzREZWZXJ0aWNlcygpIHtcblxuICBjb25zdCBwb3NpdGlvbnMgPSBbXG4gICAgLy8gbGVmdCBjb2x1bW4gZnJvbnRcbiAgICAwLCAgIDAsICAwLFxuICAgIDAsIDE1MCwgIDAsXG4gICAgMzAsICAgMCwgIDAsXG4gICAgMCwgMTUwLCAgMCxcbiAgICAzMCwgMTUwLCAgMCxcbiAgICAzMCwgICAwLCAgMCxcblxuICAgIC8vIHRvcCBydW5nIGZyb250XG4gICAgMzAsICAgMCwgIDAsXG4gICAgMzAsICAzMCwgIDAsXG4gICAgMTAwLCAgIDAsICAwLFxuICAgIDMwLCAgMzAsICAwLFxuICAgIDEwMCwgIDMwLCAgMCxcbiAgICAxMDAsICAgMCwgIDAsXG5cbiAgICAvLyBtaWRkbGUgcnVuZyBmcm9udFxuICAgIDMwLCAgNjAsICAwLFxuICAgIDMwLCAgOTAsICAwLFxuICAgIDY3LCAgNjAsICAwLFxuICAgIDMwLCAgOTAsICAwLFxuICAgIDY3LCAgOTAsICAwLFxuICAgIDY3LCAgNjAsICAwLFxuXG4gICAgLy8gbGVmdCBjb2x1bW4gYmFja1xuICAgICAgMCwgICAwLCAgMzAsXG4gICAgIDMwLCAgIDAsICAzMCxcbiAgICAgIDAsIDE1MCwgIDMwLFxuICAgICAgMCwgMTUwLCAgMzAsXG4gICAgIDMwLCAgIDAsICAzMCxcbiAgICAgMzAsIDE1MCwgIDMwLFxuXG4gICAgLy8gdG9wIHJ1bmcgYmFja1xuICAgICAzMCwgICAwLCAgMzAsXG4gICAgMTAwLCAgIDAsICAzMCxcbiAgICAgMzAsICAzMCwgIDMwLFxuICAgICAzMCwgIDMwLCAgMzAsXG4gICAgMTAwLCAgIDAsICAzMCxcbiAgICAxMDAsICAzMCwgIDMwLFxuXG4gICAgLy8gbWlkZGxlIHJ1bmcgYmFja1xuICAgICAzMCwgIDYwLCAgMzAsXG4gICAgIDY3LCAgNjAsICAzMCxcbiAgICAgMzAsICA5MCwgIDMwLFxuICAgICAzMCwgIDkwLCAgMzAsXG4gICAgIDY3LCAgNjAsICAzMCxcbiAgICAgNjcsICA5MCwgIDMwLFxuXG4gICAgLy8gdG9wXG4gICAgICAwLCAgIDAsICAgMCxcbiAgICAxMDAsICAgMCwgICAwLFxuICAgIDEwMCwgICAwLCAgMzAsXG4gICAgICAwLCAgIDAsICAgMCxcbiAgICAxMDAsICAgMCwgIDMwLFxuICAgICAgMCwgICAwLCAgMzAsXG5cbiAgICAvLyB0b3AgcnVuZyBmcm9udFxuICAgIDEwMCwgICAwLCAgIDAsXG4gICAgMTAwLCAgMzAsICAgMCxcbiAgICAxMDAsICAzMCwgIDMwLFxuICAgIDEwMCwgICAwLCAgIDAsXG4gICAgMTAwLCAgMzAsICAzMCxcbiAgICAxMDAsICAgMCwgIDMwLFxuXG4gICAgLy8gdW5kZXIgdG9wIHJ1bmdcbiAgICAzMCwgICAzMCwgICAwLFxuICAgIDMwLCAgIDMwLCAgMzAsXG4gICAgMTAwLCAgMzAsICAzMCxcbiAgICAzMCwgICAzMCwgICAwLFxuICAgIDEwMCwgIDMwLCAgMzAsXG4gICAgMTAwLCAgMzAsICAgMCxcblxuICAgIC8vIGJldHdlZW4gdG9wIHJ1bmcgYW5kIG1pZGRsZVxuICAgIDMwLCAgIDMwLCAgIDAsXG4gICAgMzAsICAgNjAsICAzMCxcbiAgICAzMCwgICAzMCwgIDMwLFxuICAgIDMwLCAgIDMwLCAgIDAsXG4gICAgMzAsICAgNjAsICAgMCxcbiAgICAzMCwgICA2MCwgIDMwLFxuXG4gICAgLy8gdG9wIG9mIG1pZGRsZSBydW5nXG4gICAgMzAsICAgNjAsICAgMCxcbiAgICA2NywgICA2MCwgIDMwLFxuICAgIDMwLCAgIDYwLCAgMzAsXG4gICAgMzAsICAgNjAsICAgMCxcbiAgICA2NywgICA2MCwgICAwLFxuICAgIDY3LCAgIDYwLCAgMzAsXG5cbiAgICAvLyBmcm9udCBvZiBtaWRkbGUgcnVuZ1xuICAgIDY3LCAgIDYwLCAgIDAsXG4gICAgNjcsICAgOTAsICAzMCxcbiAgICA2NywgICA2MCwgIDMwLFxuICAgIDY3LCAgIDYwLCAgIDAsXG4gICAgNjcsICAgOTAsICAgMCxcbiAgICA2NywgICA5MCwgIDMwLFxuXG4gICAgLy8gYm90dG9tIG9mIG1pZGRsZSBydW5nLlxuICAgIDMwLCAgIDkwLCAgIDAsXG4gICAgMzAsICAgOTAsICAzMCxcbiAgICA2NywgICA5MCwgIDMwLFxuICAgIDMwLCAgIDkwLCAgIDAsXG4gICAgNjcsICAgOTAsICAzMCxcbiAgICA2NywgICA5MCwgICAwLFxuXG4gICAgLy8gZnJvbnQgb2YgYm90dG9tXG4gICAgMzAsICAgOTAsICAgMCxcbiAgICAzMCwgIDE1MCwgIDMwLFxuICAgIDMwLCAgIDkwLCAgMzAsXG4gICAgMzAsICAgOTAsICAgMCxcbiAgICAzMCwgIDE1MCwgICAwLFxuICAgIDMwLCAgMTUwLCAgMzAsXG5cbiAgICAvLyBib3R0b21cbiAgICAwLCAgIDE1MCwgICAwLFxuICAgIDAsICAgMTUwLCAgMzAsXG4gICAgMzAsICAxNTAsICAzMCxcbiAgICAwLCAgIDE1MCwgICAwLFxuICAgIDMwLCAgMTUwLCAgMzAsXG4gICAgMzAsICAxNTAsICAgMCxcblxuICAgIC8vIGxlZnQgc2lkZVxuICAgIDAsICAgMCwgICAwLFxuICAgIDAsICAgMCwgIDMwLFxuICAgIDAsIDE1MCwgIDMwLFxuICAgIDAsICAgMCwgICAwLFxuICAgIDAsIDE1MCwgIDMwLFxuICAgIDAsIDE1MCwgICAwLFxuICBdO1xuXG4gIGNvbnN0IHRleGNvb3JkcyA9IFtcbiAgICAvLyBsZWZ0IGNvbHVtbiBmcm9udFxuICAgIDAuMjIsIDAuMTksXG4gICAgMC4yMiwgMC43OSxcbiAgICAwLjM0LCAwLjE5LFxuICAgIDAuMjIsIDAuNzksXG4gICAgMC4zNCwgMC43OSxcbiAgICAwLjM0LCAwLjE5LFxuXG4gICAgLy8gdG9wIHJ1bmcgZnJvbnRcbiAgICAwLjM0LCAwLjE5LFxuICAgIDAuMzQsIDAuMzEsXG4gICAgMC42MiwgMC4xOSxcbiAgICAwLjM0LCAwLjMxLFxuICAgIDAuNjIsIDAuMzEsXG4gICAgMC42MiwgMC4xOSxcblxuICAgIC8vIG1pZGRsZSBydW5nIGZyb250XG4gICAgMC4zNCwgMC40MyxcbiAgICAwLjM0LCAwLjU1LFxuICAgIDAuNDksIDAuNDMsXG4gICAgMC4zNCwgMC41NSxcbiAgICAwLjQ5LCAwLjU1LFxuICAgIDAuNDksIDAuNDMsXG5cbiAgICAvLyBsZWZ0IGNvbHVtbiBiYWNrXG4gICAgMCwgMCxcbiAgICAxLCAwLFxuICAgIDAsIDEsXG4gICAgMCwgMSxcbiAgICAxLCAwLFxuICAgIDEsIDEsXG5cbiAgICAvLyB0b3AgcnVuZyBiYWNrXG4gICAgMCwgMCxcbiAgICAxLCAwLFxuICAgIDAsIDEsXG4gICAgMCwgMSxcbiAgICAxLCAwLFxuICAgIDEsIDEsXG5cbiAgICAvLyBtaWRkbGUgcnVuZyBiYWNrXG4gICAgMCwgMCxcbiAgICAxLCAwLFxuICAgIDAsIDEsXG4gICAgMCwgMSxcbiAgICAxLCAwLFxuICAgIDEsIDEsXG5cbiAgICAvLyB0b3BcbiAgICAwLCAwLFxuICAgIDEsIDAsXG4gICAgMSwgMSxcbiAgICAwLCAwLFxuICAgIDEsIDEsXG4gICAgMCwgMSxcblxuICAgIC8vIHRvcCBydW5nIGZyb250XG4gICAgMCwgMCxcbiAgICAxLCAwLFxuICAgIDEsIDEsXG4gICAgMCwgMCxcbiAgICAxLCAxLFxuICAgIDAsIDEsXG5cbiAgICAvLyB1bmRlciB0b3AgcnVuZ1xuICAgIDAsIDAsXG4gICAgMCwgMSxcbiAgICAxLCAxLFxuICAgIDAsIDAsXG4gICAgMSwgMSxcbiAgICAxLCAwLFxuXG4gICAgLy8gYmV0d2VlbiB0b3AgcnVuZyBhbmQgbWlkZGxlXG4gICAgMCwgMCxcbiAgICAxLCAxLFxuICAgIDAsIDEsXG4gICAgMCwgMCxcbiAgICAxLCAwLFxuICAgIDEsIDEsXG5cbiAgICAvLyB0b3Agb2YgbWlkZGxlIHJ1bmdcbiAgICAwLCAwLFxuICAgIDEsIDEsXG4gICAgMCwgMSxcbiAgICAwLCAwLFxuICAgIDEsIDAsXG4gICAgMSwgMSxcblxuICAgIC8vIGZyb250IG9mIG1pZGRsZSBydW5nXG4gICAgMCwgMCxcbiAgICAxLCAxLFxuICAgIDAsIDEsXG4gICAgMCwgMCxcbiAgICAxLCAwLFxuICAgIDEsIDEsXG5cbiAgICAvLyBib3R0b20gb2YgbWlkZGxlIHJ1bmcuXG4gICAgMCwgMCxcbiAgICAwLCAxLFxuICAgIDEsIDEsXG4gICAgMCwgMCxcbiAgICAxLCAxLFxuICAgIDEsIDAsXG5cbiAgICAvLyBmcm9udCBvZiBib3R0b21cbiAgICAwLCAwLFxuICAgIDEsIDEsXG4gICAgMCwgMSxcbiAgICAwLCAwLFxuICAgIDEsIDAsXG4gICAgMSwgMSxcblxuICAgIC8vIGJvdHRvbVxuICAgIDAsIDAsXG4gICAgMCwgMSxcbiAgICAxLCAxLFxuICAgIDAsIDAsXG4gICAgMSwgMSxcbiAgICAxLCAwLFxuXG4gICAgLy8gbGVmdCBzaWRlXG4gICAgMCwgMCxcbiAgICAwLCAxLFxuICAgIDEsIDEsXG4gICAgMCwgMCxcbiAgICAxLCAxLFxuICAgIDEsIDAsXG4gIF07XG5cbiAgY29uc3Qgbm9ybWFscyA9IGV4cGFuZFJMRURhdGEoW1xuICAgIC8vIGxlZnQgY29sdW1uIGZyb250XG4gICAgLy8gdG9wIHJ1bmcgZnJvbnRcbiAgICAvLyBtaWRkbGUgcnVuZyBmcm9udFxuICAgIDE4LCAwLCAwLCAxLFxuXG4gICAgLy8gbGVmdCBjb2x1bW4gYmFja1xuICAgIC8vIHRvcCBydW5nIGJhY2tcbiAgICAvLyBtaWRkbGUgcnVuZyBiYWNrXG4gICAgMTgsIDAsIDAsIC0xLFxuXG4gICAgLy8gdG9wXG4gICAgNiwgMCwgMSwgMCxcblxuICAgIC8vIHRvcCBydW5nIGZyb250XG4gICAgNiwgMSwgMCwgMCxcblxuICAgIC8vIHVuZGVyIHRvcCBydW5nXG4gICAgNiwgMCwgLTEsIDAsXG5cbiAgICAvLyBiZXR3ZWVuIHRvcCBydW5nIGFuZCBtaWRkbGVcbiAgICA2LCAxLCAwLCAwLFxuXG4gICAgLy8gdG9wIG9mIG1pZGRsZSBydW5nXG4gICAgNiwgMCwgMSwgMCxcblxuICAgIC8vIGZyb250IG9mIG1pZGRsZSBydW5nXG4gICAgNiwgMSwgMCwgMCxcblxuICAgIC8vIGJvdHRvbSBvZiBtaWRkbGUgcnVuZy5cbiAgICA2LCAwLCAtMSwgMCxcblxuICAgIC8vIGZyb250IG9mIGJvdHRvbVxuICAgIDYsIDEsIDAsIDAsXG5cbiAgICAvLyBib3R0b21cbiAgICA2LCAwLCAtMSwgMCxcblxuICAgIC8vIGxlZnQgc2lkZVxuICAgIDYsIC0xLCAwLCAwLFxuICBdKTtcblxuICBjb25zdCBjb2xvcnMgPSBleHBhbmRSTEVEYXRhKFtcbiAgICAgICAgLy8gbGVmdCBjb2x1bW4gZnJvbnRcbiAgICAgICAgLy8gdG9wIHJ1bmcgZnJvbnRcbiAgICAgICAgLy8gbWlkZGxlIHJ1bmcgZnJvbnRcbiAgICAgIDE4LCAyMDAsICA3MCwgMTIwLFxuXG4gICAgICAgIC8vIGxlZnQgY29sdW1uIGJhY2tcbiAgICAgICAgLy8gdG9wIHJ1bmcgYmFja1xuICAgICAgICAvLyBtaWRkbGUgcnVuZyBiYWNrXG4gICAgICAxOCwgODAsIDcwLCAyMDAsXG5cbiAgICAgICAgLy8gdG9wXG4gICAgICA2LCA3MCwgMjAwLCAyMTAsXG5cbiAgICAgICAgLy8gdG9wIHJ1bmcgZnJvbnRcbiAgICAgIDYsIDIwMCwgMjAwLCA3MCxcblxuICAgICAgICAvLyB1bmRlciB0b3AgcnVuZ1xuICAgICAgNiwgMjEwLCAxMDAsIDcwLFxuXG4gICAgICAgIC8vIGJldHdlZW4gdG9wIHJ1bmcgYW5kIG1pZGRsZVxuICAgICAgNiwgMjEwLCAxNjAsIDcwLFxuXG4gICAgICAgIC8vIHRvcCBvZiBtaWRkbGUgcnVuZ1xuICAgICAgNiwgNzAsIDE4MCwgMjEwLFxuXG4gICAgICAgIC8vIGZyb250IG9mIG1pZGRsZSBydW5nXG4gICAgICA2LCAxMDAsIDcwLCAyMTAsXG5cbiAgICAgICAgLy8gYm90dG9tIG9mIG1pZGRsZSBydW5nLlxuICAgICAgNiwgNzYsIDIxMCwgMTAwLFxuXG4gICAgICAgIC8vIGZyb250IG9mIGJvdHRvbVxuICAgICAgNiwgMTQwLCAyMTAsIDgwLFxuXG4gICAgICAgIC8vIGJvdHRvbVxuICAgICAgNiwgOTAsIDEzMCwgMTEwLFxuXG4gICAgICAgIC8vIGxlZnQgc2lkZVxuICAgICAgNiwgMTYwLCAxNjAsIDIyMCxcbiAgXSwgWzI1NV0pO1xuXG4gIGNvbnN0IG51bVZlcnRzID0gcG9zaXRpb25zLmxlbmd0aCAvIDM7XG5cbiAgY29uc3QgYXJyYXlzID0ge1xuICAgIHBvc2l0aW9uOiBjcmVhdGVBdWdtZW50ZWRUeXBlZEFycmF5KDMsIG51bVZlcnRzKSxcbiAgICB0ZXhjb29yZDogY3JlYXRlQXVnbWVudGVkVHlwZWRBcnJheSgyLCAgbnVtVmVydHMpLFxuICAgIG5vcm1hbDogY3JlYXRlQXVnbWVudGVkVHlwZWRBcnJheSgzLCBudW1WZXJ0cyksXG4gICAgY29sb3I6IGNyZWF0ZUF1Z21lbnRlZFR5cGVkQXJyYXkoNCwgbnVtVmVydHMsIFVpbnQ4QXJyYXkpLFxuICAgIGluZGljZXM6IGNyZWF0ZUF1Z21lbnRlZFR5cGVkQXJyYXkoMywgbnVtVmVydHMgLyAzLCBVaW50MTZBcnJheSksXG4gIH07XG5cbiAgYXJyYXlzLnBvc2l0aW9uLnB1c2gocG9zaXRpb25zKTtcbiAgYXJyYXlzLnRleGNvb3JkLnB1c2godGV4Y29vcmRzKTtcbiAgYXJyYXlzLm5vcm1hbC5wdXNoKG5vcm1hbHMpO1xuICBhcnJheXMuY29sb3IucHVzaChjb2xvcnMpO1xuXG4gIGZvciAobGV0IGlpID0gMDsgaWkgPCBudW1WZXJ0czsgKytpaSkge1xuICAgIGFycmF5cy5pbmRpY2VzLnB1c2goaWkpO1xuICB9XG5cbiAgcmV0dXJuIGFycmF5cztcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGNyZXNjZW50IEJ1ZmZlckluZm8uXG4gKlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIFRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHQuXG4gKiBAcGFyYW0ge251bWJlcn0gdmVydGljYWxSYWRpdXMgVGhlIHZlcnRpY2FsIHJhZGl1cyBvZiB0aGUgY3Jlc2NlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gb3V0ZXJSYWRpdXMgVGhlIG91dGVyIHJhZGl1cyBvZiB0aGUgY3Jlc2NlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gaW5uZXJSYWRpdXMgVGhlIGlubmVyIHJhZGl1cyBvZiB0aGUgY3Jlc2NlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gdGhpY2tuZXNzIFRoZSB0aGlja25lc3Mgb2YgdGhlIGNyZXNjZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHN1YmRpdmlzaW9uc0Rvd24gbnVtYmVyIG9mIHN0ZXBzIGFyb3VuZCB0aGUgY3Jlc2NlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0T2Zmc2V0XSBXaGVyZSB0byBzdGFydCBhcmMuIERlZmF1bHQgMC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbZW5kT2Zmc2V0XSBXaGVyZSB0byBlbmQgYXJnLiBEZWZhdWx0IDEuXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC5CdWZmZXJJbmZvfSBUaGUgY3JlYXRlZCBCdWZmZXJJbmZvLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3ByaW1pdGl2ZXNcbiAqIEBmdW5jdGlvbiBjcmVhdGVDcmVzZW50QnVmZmVySW5mb1xuICovXG5cbi8qKlxuICogQ3JlYXRlcyBjcmVzY2VudCBidWZmZXJzLlxuICpcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0LlxuICogQHBhcmFtIHtudW1iZXJ9IHZlcnRpY2FsUmFkaXVzIFRoZSB2ZXJ0aWNhbCByYWRpdXMgb2YgdGhlIGNyZXNjZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG91dGVyUmFkaXVzIFRoZSBvdXRlciByYWRpdXMgb2YgdGhlIGNyZXNjZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IGlubmVyUmFkaXVzIFRoZSBpbm5lciByYWRpdXMgb2YgdGhlIGNyZXNjZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHRoaWNrbmVzcyBUaGUgdGhpY2tuZXNzIG9mIHRoZSBjcmVzY2VudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdWJkaXZpc2lvbnNEb3duIG51bWJlciBvZiBzdGVwcyBhcm91bmQgdGhlIGNyZXNjZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydE9mZnNldF0gV2hlcmUgdG8gc3RhcnQgYXJjLiBEZWZhdWx0IDAuXG4gKiBAcGFyYW0ge251bWJlcn0gW2VuZE9mZnNldF0gV2hlcmUgdG8gZW5kIGFyZy4gRGVmYXVsdCAxLlxuICogQHJldHVybiB7T2JqZWN0LjxzdHJpbmcsIFdlYkdMQnVmZmVyPn0gVGhlIGNyZWF0ZWQgYnVmZmVycy5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcmltaXRpdmVzXG4gKiBAZnVuY3Rpb24gY3JlYXRlQ3Jlc2VudEJ1ZmZlcnNcbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgY3Jlc2NlbnQgdmVydGljZXMuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHZlcnRpY2FsUmFkaXVzIFRoZSB2ZXJ0aWNhbCByYWRpdXMgb2YgdGhlIGNyZXNjZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG91dGVyUmFkaXVzIFRoZSBvdXRlciByYWRpdXMgb2YgdGhlIGNyZXNjZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IGlubmVyUmFkaXVzIFRoZSBpbm5lciByYWRpdXMgb2YgdGhlIGNyZXNjZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHRoaWNrbmVzcyBUaGUgdGhpY2tuZXNzIG9mIHRoZSBjcmVzY2VudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdWJkaXZpc2lvbnNEb3duIG51bWJlciBvZiBzdGVwcyBhcm91bmQgdGhlIGNyZXNjZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydE9mZnNldF0gV2hlcmUgdG8gc3RhcnQgYXJjLiBEZWZhdWx0IDAuXG4gKiBAcGFyYW0ge251bWJlcn0gW2VuZE9mZnNldF0gV2hlcmUgdG8gZW5kIGFyZy4gRGVmYXVsdCAxLlxuICogQHJldHVybiB7T2JqZWN0LjxzdHJpbmcsIFR5cGVkQXJyYXk+fSBUaGUgY3JlYXRlZCB2ZXJ0aWNlcy5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcmltaXRpdmVzXG4gKiBAZnVuY3Rpb24gY3JlYXRlQ3Jlc2VudEJ1ZmZlcnNcbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgY3Jlc2NlbnQgQnVmZmVySW5mby5cbiAqXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgVGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2ZXJ0aWNhbFJhZGl1cyBUaGUgdmVydGljYWwgcmFkaXVzIG9mIHRoZSBjcmVzY2VudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvdXRlclJhZGl1cyBUaGUgb3V0ZXIgcmFkaXVzIG9mIHRoZSBjcmVzY2VudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBpbm5lclJhZGl1cyBUaGUgaW5uZXIgcmFkaXVzIG9mIHRoZSBjcmVzY2VudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0aGlja25lc3MgVGhlIHRoaWNrbmVzcyBvZiB0aGUgY3Jlc2NlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3ViZGl2aXNpb25zRG93biBudW1iZXIgb2Ygc3RlcHMgYXJvdW5kIHRoZSBjcmVzY2VudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnRPZmZzZXRdIFdoZXJlIHRvIHN0YXJ0IGFyYy4gRGVmYXVsdCAwLlxuICogQHBhcmFtIHtudW1iZXJ9IFtlbmRPZmZzZXRdIFdoZXJlIHRvIGVuZCBhcmcuIERlZmF1bHQgMS5cbiAqIEByZXR1cm4ge21vZHVsZTp0d2dsLkJ1ZmZlckluZm99IFRoZSBjcmVhdGVkIEJ1ZmZlckluZm8uXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJpbWl0aXZlc1xuICogQGZ1bmN0aW9uIGNyZWF0ZUNyZXNjZW50QnVmZmVySW5mb1xuICovXG5cbi8qKlxuICogQ3JlYXRlcyBjcmVzY2VudCBidWZmZXJzLlxuICpcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0LlxuICogQHBhcmFtIHtudW1iZXJ9IHZlcnRpY2FsUmFkaXVzIFRoZSB2ZXJ0aWNhbCByYWRpdXMgb2YgdGhlIGNyZXNjZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG91dGVyUmFkaXVzIFRoZSBvdXRlciByYWRpdXMgb2YgdGhlIGNyZXNjZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IGlubmVyUmFkaXVzIFRoZSBpbm5lciByYWRpdXMgb2YgdGhlIGNyZXNjZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHRoaWNrbmVzcyBUaGUgdGhpY2tuZXNzIG9mIHRoZSBjcmVzY2VudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdWJkaXZpc2lvbnNEb3duIG51bWJlciBvZiBzdGVwcyBhcm91bmQgdGhlIGNyZXNjZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydE9mZnNldF0gV2hlcmUgdG8gc3RhcnQgYXJjLiBEZWZhdWx0IDAuXG4gKiBAcGFyYW0ge251bWJlcn0gW2VuZE9mZnNldF0gV2hlcmUgdG8gZW5kIGFyZy4gRGVmYXVsdCAxLlxuICogQHJldHVybiB7T2JqZWN0LjxzdHJpbmcsIFdlYkdMQnVmZmVyPn0gVGhlIGNyZWF0ZWQgYnVmZmVycy5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcmltaXRpdmVzXG4gKiBAZnVuY3Rpb24gY3JlYXRlQ3Jlc2NlbnRCdWZmZXJzXG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGNyZXNjZW50IHZlcnRpY2VzLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB2ZXJ0aWNhbFJhZGl1cyBUaGUgdmVydGljYWwgcmFkaXVzIG9mIHRoZSBjcmVzY2VudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvdXRlclJhZGl1cyBUaGUgb3V0ZXIgcmFkaXVzIG9mIHRoZSBjcmVzY2VudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBpbm5lclJhZGl1cyBUaGUgaW5uZXIgcmFkaXVzIG9mIHRoZSBjcmVzY2VudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0aGlja25lc3MgVGhlIHRoaWNrbmVzcyBvZiB0aGUgY3Jlc2NlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3ViZGl2aXNpb25zRG93biBudW1iZXIgb2Ygc3RlcHMgYXJvdW5kIHRoZSBjcmVzY2VudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnRPZmZzZXRdIFdoZXJlIHRvIHN0YXJ0IGFyYy4gRGVmYXVsdCAwLlxuICogQHBhcmFtIHtudW1iZXJ9IFtlbmRPZmZzZXRdIFdoZXJlIHRvIGVuZCBhcmcuIERlZmF1bHQgMS5cbiAqIEByZXR1cm4ge09iamVjdC48c3RyaW5nLCBUeXBlZEFycmF5Pn0gVGhlIGNyZWF0ZWQgdmVydGljZXMuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJpbWl0aXZlc1xuICovXG4gZnVuY3Rpb24gY3JlYXRlQ3Jlc2NlbnRWZXJ0aWNlcyhcbiAgICB2ZXJ0aWNhbFJhZGl1cyxcbiAgICBvdXRlclJhZGl1cyxcbiAgICBpbm5lclJhZGl1cyxcbiAgICB0aGlja25lc3MsXG4gICAgc3ViZGl2aXNpb25zRG93bixcbiAgICBzdGFydE9mZnNldCxcbiAgICBlbmRPZmZzZXQpIHtcbiAgaWYgKHN1YmRpdmlzaW9uc0Rvd24gPD0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc3ViZGl2aXNpb25Eb3duIG11c3QgYmUgPiAwJyk7XG4gIH1cblxuICBzdGFydE9mZnNldCA9IHN0YXJ0T2Zmc2V0IHx8IDA7XG4gIGVuZE9mZnNldCAgID0gZW5kT2Zmc2V0IHx8IDE7XG5cbiAgY29uc3Qgc3ViZGl2aXNpb25zVGhpY2sgPSAyO1xuXG4gIGNvbnN0IG9mZnNldFJhbmdlID0gZW5kT2Zmc2V0IC0gc3RhcnRPZmZzZXQ7XG4gIGNvbnN0IG51bVZlcnRpY2VzID0gKHN1YmRpdmlzaW9uc0Rvd24gKyAxKSAqIDIgKiAoMiArIHN1YmRpdmlzaW9uc1RoaWNrKTtcbiAgY29uc3QgcG9zaXRpb25zICAgPSBjcmVhdGVBdWdtZW50ZWRUeXBlZEFycmF5KDMsIG51bVZlcnRpY2VzKTtcbiAgY29uc3Qgbm9ybWFscyAgICAgPSBjcmVhdGVBdWdtZW50ZWRUeXBlZEFycmF5KDMsIG51bVZlcnRpY2VzKTtcbiAgY29uc3QgdGV4Y29vcmRzICAgPSBjcmVhdGVBdWdtZW50ZWRUeXBlZEFycmF5KDIsIG51bVZlcnRpY2VzKTtcblxuICBmdW5jdGlvbiBsZXJwKGEsIGIsIHMpIHtcbiAgICByZXR1cm4gYSArIChiIC0gYSkgKiBzO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlQXJjKGFyY1JhZGl1cywgeCwgbm9ybWFsTXVsdCwgbm9ybWFsQWRkLCB1TXVsdCwgdUFkZCkge1xuICAgIGZvciAobGV0IHogPSAwOyB6IDw9IHN1YmRpdmlzaW9uc0Rvd247IHorKykge1xuICAgICAgY29uc3QgdUJhY2sgPSB4IC8gKHN1YmRpdmlzaW9uc1RoaWNrIC0gMSk7XG4gICAgICBjb25zdCB2ID0geiAvIHN1YmRpdmlzaW9uc0Rvd247XG4gICAgICBjb25zdCB4QmFjayA9ICh1QmFjayAtIDAuNSkgKiAyO1xuICAgICAgY29uc3QgYW5nbGUgPSAoc3RhcnRPZmZzZXQgKyAodiAqIG9mZnNldFJhbmdlKSkgKiBNYXRoLlBJO1xuICAgICAgY29uc3QgcyA9IE1hdGguc2luKGFuZ2xlKTtcbiAgICAgIGNvbnN0IGMgPSBNYXRoLmNvcyhhbmdsZSk7XG4gICAgICBjb25zdCByYWRpdXMgPSBsZXJwKHZlcnRpY2FsUmFkaXVzLCBhcmNSYWRpdXMsIHMpO1xuICAgICAgY29uc3QgcHggPSB4QmFjayAqIHRoaWNrbmVzcztcbiAgICAgIGNvbnN0IHB5ID0gYyAqIHZlcnRpY2FsUmFkaXVzO1xuICAgICAgY29uc3QgcHogPSBzICogcmFkaXVzO1xuICAgICAgcG9zaXRpb25zLnB1c2gocHgsIHB5LCBweik7XG4gICAgICBjb25zdCBuID0gYWRkKG11bHRpcGx5KFswLCBzLCBjXSwgbm9ybWFsTXVsdCksIG5vcm1hbEFkZCk7XG4gICAgICBub3JtYWxzLnB1c2gobik7XG4gICAgICB0ZXhjb29yZHMucHVzaCh1QmFjayAqIHVNdWx0ICsgdUFkZCwgdik7XG4gICAgfVxuICB9XG5cbiAgLy8gR2VuZXJhdGUgdGhlIGluZGl2aWR1YWwgdmVydGljZXMgaW4gb3VyIHZlcnRleCBidWZmZXIuXG4gIGZvciAobGV0IHggPSAwOyB4IDwgc3ViZGl2aXNpb25zVGhpY2s7IHgrKykge1xuICAgIGNvbnN0IHVCYWNrID0gKHggLyAoc3ViZGl2aXNpb25zVGhpY2sgLSAxKSAtIDAuNSkgKiAyO1xuICAgIGNyZWF0ZUFyYyhvdXRlclJhZGl1cywgeCwgWzEsIDEsIDFdLCBbMCwgICAgIDAsIDBdLCAxLCAwKTtcbiAgICBjcmVhdGVBcmMob3V0ZXJSYWRpdXMsIHgsIFswLCAwLCAwXSwgW3VCYWNrLCAwLCAwXSwgMCwgMCk7XG4gICAgY3JlYXRlQXJjKGlubmVyUmFkaXVzLCB4LCBbMSwgMSwgMV0sIFswLCAgICAgMCwgMF0sIDEsIDApO1xuICAgIGNyZWF0ZUFyYyhpbm5lclJhZGl1cywgeCwgWzAsIDAsIDBdLCBbdUJhY2ssIDAsIDBdLCAwLCAxKTtcbiAgfVxuXG4gIC8vIERvIG91dGVyIHN1cmZhY2UuXG4gIGNvbnN0IGluZGljZXMgPSBjcmVhdGVBdWdtZW50ZWRUeXBlZEFycmF5KDMsIChzdWJkaXZpc2lvbnNEb3duICogMikgKiAoMiArIHN1YmRpdmlzaW9uc1RoaWNrKSwgVWludDE2QXJyYXkpO1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZVN1cmZhY2UobGVmdEFyY09mZnNldCwgcmlnaHRBcmNPZmZzZXQpIHtcbiAgICBmb3IgKGxldCB6ID0gMDsgeiA8IHN1YmRpdmlzaW9uc0Rvd247ICsreikge1xuICAgICAgLy8gTWFrZSB0cmlhbmdsZSAxIG9mIHF1YWQuXG4gICAgICBpbmRpY2VzLnB1c2goXG4gICAgICAgICAgbGVmdEFyY09mZnNldCArIHogKyAwLFxuICAgICAgICAgIGxlZnRBcmNPZmZzZXQgKyB6ICsgMSxcbiAgICAgICAgICByaWdodEFyY09mZnNldCArIHogKyAwKTtcblxuICAgICAgLy8gTWFrZSB0cmlhbmdsZSAyIG9mIHF1YWQuXG4gICAgICBpbmRpY2VzLnB1c2goXG4gICAgICAgICAgbGVmdEFyY09mZnNldCArIHogKyAxLFxuICAgICAgICAgIHJpZ2h0QXJjT2Zmc2V0ICsgeiArIDEsXG4gICAgICAgICAgcmlnaHRBcmNPZmZzZXQgKyB6ICsgMCk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgbnVtVmVydGljZXNEb3duID0gc3ViZGl2aXNpb25zRG93biArIDE7XG4gIC8vIGZyb250XG4gIGNyZWF0ZVN1cmZhY2UobnVtVmVydGljZXNEb3duICogMCwgbnVtVmVydGljZXNEb3duICogNCk7XG4gIC8vIHJpZ2h0XG4gIGNyZWF0ZVN1cmZhY2UobnVtVmVydGljZXNEb3duICogNSwgbnVtVmVydGljZXNEb3duICogNyk7XG4gIC8vIGJhY2tcbiAgY3JlYXRlU3VyZmFjZShudW1WZXJ0aWNlc0Rvd24gKiA2LCBudW1WZXJ0aWNlc0Rvd24gKiAyKTtcbiAgLy8gbGVmdFxuICBjcmVhdGVTdXJmYWNlKG51bVZlcnRpY2VzRG93biAqIDMsIG51bVZlcnRpY2VzRG93biAqIDEpO1xuXG4gIHJldHVybiB7XG4gICAgcG9zaXRpb246IHBvc2l0aW9ucyxcbiAgICBub3JtYWw6ICAgbm9ybWFscyxcbiAgICB0ZXhjb29yZDogdGV4Y29vcmRzLFxuICAgIGluZGljZXM6ICBpbmRpY2VzLFxuICB9O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgY3lsaW5kZXIgQnVmZmVySW5mby4gVGhlIGN5bGluZGVyIHdpbGwgYmUgY3JlYXRlZCBhcm91bmQgdGhlIG9yaWdpblxuICogYWxvbmcgdGhlIHktYXhpcy5cbiAqXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgVGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgUmFkaXVzIG9mIGN5bGluZGVyLlxuICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCBIZWlnaHQgb2YgY3lsaW5kZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaWFsU3ViZGl2aXNpb25zIFRoZSBudW1iZXIgb2Ygc3ViZGl2aXNpb25zIGFyb3VuZCB0aGUgY3lsaW5kZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gdmVydGljYWxTdWJkaXZpc2lvbnMgVGhlIG51bWJlciBvZiBzdWJkaXZpc2lvbnMgZG93biB0aGUgY3lsaW5kZXIuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFt0b3BDYXBdIENyZWF0ZSB0b3AgY2FwLiBEZWZhdWx0ID0gdHJ1ZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2JvdHRvbUNhcF0gQ3JlYXRlIGJvdHRvbSBjYXAuIERlZmF1bHQgPSB0cnVlLlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wuQnVmZmVySW5mb30gVGhlIGNyZWF0ZWQgQnVmZmVySW5mby5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcmltaXRpdmVzXG4gKiBAZnVuY3Rpb24gY3JlYXRlQ3lsaW5kZXJCdWZmZXJJbmZvXG4gKi9cblxuIC8qKlxuICAqIENyZWF0ZXMgY3lsaW5kZXIgYnVmZmVycy4gVGhlIGN5bGluZGVyIHdpbGwgYmUgY3JlYXRlZCBhcm91bmQgdGhlIG9yaWdpblxuICAqIGFsb25nIHRoZSB5LWF4aXMuXG4gICpcbiAgKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgVGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dC5cbiAgKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIFJhZGl1cyBvZiBjeWxpbmRlci5cbiAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IEhlaWdodCBvZiBjeWxpbmRlci5cbiAgKiBAcGFyYW0ge251bWJlcn0gcmFkaWFsU3ViZGl2aXNpb25zIFRoZSBudW1iZXIgb2Ygc3ViZGl2aXNpb25zIGFyb3VuZCB0aGUgY3lsaW5kZXIuXG4gICogQHBhcmFtIHtudW1iZXJ9IHZlcnRpY2FsU3ViZGl2aXNpb25zIFRoZSBudW1iZXIgb2Ygc3ViZGl2aXNpb25zIGRvd24gdGhlIGN5bGluZGVyLlxuICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3RvcENhcF0gQ3JlYXRlIHRvcCBjYXAuIERlZmF1bHQgPSB0cnVlLlxuICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2JvdHRvbUNhcF0gQ3JlYXRlIGJvdHRvbSBjYXAuIERlZmF1bHQgPSB0cnVlLlxuICAqIEByZXR1cm4ge09iamVjdC48c3RyaW5nLCBXZWJHTEJ1ZmZlcj59IFRoZSBjcmVhdGVkIGJ1ZmZlcnMuXG4gICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3ByaW1pdGl2ZXNcbiAgKiBAZnVuY3Rpb24gY3JlYXRlQ3lsaW5kZXJCdWZmZXJzXG4gICovXG5cbiAvKipcbiAgKiBDcmVhdGVzIGN5bGluZGVyIHZlcnRpY2VzLiBUaGUgY3lsaW5kZXIgd2lsbCBiZSBjcmVhdGVkIGFyb3VuZCB0aGUgb3JpZ2luXG4gICogYWxvbmcgdGhlIHktYXhpcy5cbiAgKlxuICAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgUmFkaXVzIG9mIGN5bGluZGVyLlxuICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgSGVpZ2h0IG9mIGN5bGluZGVyLlxuICAqIEBwYXJhbSB7bnVtYmVyfSByYWRpYWxTdWJkaXZpc2lvbnMgVGhlIG51bWJlciBvZiBzdWJkaXZpc2lvbnMgYXJvdW5kIHRoZSBjeWxpbmRlci5cbiAgKiBAcGFyYW0ge251bWJlcn0gdmVydGljYWxTdWJkaXZpc2lvbnMgVGhlIG51bWJlciBvZiBzdWJkaXZpc2lvbnMgZG93biB0aGUgY3lsaW5kZXIuXG4gICogQHBhcmFtIHtib29sZWFufSBbdG9wQ2FwXSBDcmVhdGUgdG9wIGNhcC4gRGVmYXVsdCA9IHRydWUuXG4gICogQHBhcmFtIHtib29sZWFufSBbYm90dG9tQ2FwXSBDcmVhdGUgYm90dG9tIGNhcC4gRGVmYXVsdCA9IHRydWUuXG4gICogQHJldHVybiB7T2JqZWN0LjxzdHJpbmcsIFR5cGVkQXJyYXk+fSBUaGUgY3JlYXRlZCB2ZXJ0aWNlcy5cbiAgKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJpbWl0aXZlc1xuICAqL1xuZnVuY3Rpb24gY3JlYXRlQ3lsaW5kZXJWZXJ0aWNlcyhcbiAgICByYWRpdXMsXG4gICAgaGVpZ2h0LFxuICAgIHJhZGlhbFN1YmRpdmlzaW9ucyxcbiAgICB2ZXJ0aWNhbFN1YmRpdmlzaW9ucyxcbiAgICB0b3BDYXAsXG4gICAgYm90dG9tQ2FwKSB7XG4gIHJldHVybiBjcmVhdGVUcnVuY2F0ZWRDb25lVmVydGljZXMoXG4gICAgICByYWRpdXMsXG4gICAgICByYWRpdXMsXG4gICAgICBoZWlnaHQsXG4gICAgICByYWRpYWxTdWJkaXZpc2lvbnMsXG4gICAgICB2ZXJ0aWNhbFN1YmRpdmlzaW9ucyxcbiAgICAgIHRvcENhcCxcbiAgICAgIGJvdHRvbUNhcCk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBCdWZmZXJJbmZvIGZvciBhIHRvcnVzXG4gKlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIFRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHQuXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIHJhZGl1cyBvZiBjZW50ZXIgb2YgdG9ydXMgY2lyY2xlLlxuICogQHBhcmFtIHtudW1iZXJ9IHRoaWNrbmVzcyByYWRpdXMgb2YgdG9ydXMgcmluZy5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpYWxTdWJkaXZpc2lvbnMgVGhlIG51bWJlciBvZiBzdWJkaXZpc2lvbnMgYXJvdW5kIHRoZSB0b3J1cy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBib2R5U3ViZGl2aXNpb25zIFRoZSBudW1iZXIgb2Ygc3ViZGl2aXNpb25zIGFyb3VuZCB0aGUgYm9keSB0b3J1cy5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3N0YXJ0QW5nbGVdIHN0YXJ0IGFuZ2xlIGluIHJhZGlhbnMuIERlZmF1bHQgPSAwLlxuICogQHBhcmFtIHtib29sZWFufSBbZW5kQW5nbGVdIGVuZCBhbmdsZSBpbiByYWRpYW5zLiBEZWZhdWx0ID0gTWF0aC5QSSAqIDIuXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC5CdWZmZXJJbmZvfSBUaGUgY3JlYXRlZCBCdWZmZXJJbmZvLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3ByaW1pdGl2ZXNcbiAqIEBmdW5jdGlvbiBjcmVhdGVUb3J1c0J1ZmZlckluZm9cbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgYnVmZmVycyBmb3IgYSB0b3J1c1xuICpcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0LlxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyByYWRpdXMgb2YgY2VudGVyIG9mIHRvcnVzIGNpcmNsZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0aGlja25lc3MgcmFkaXVzIG9mIHRvcnVzIHJpbmcuXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaWFsU3ViZGl2aXNpb25zIFRoZSBudW1iZXIgb2Ygc3ViZGl2aXNpb25zIGFyb3VuZCB0aGUgdG9ydXMuXG4gKiBAcGFyYW0ge251bWJlcn0gYm9keVN1YmRpdmlzaW9ucyBUaGUgbnVtYmVyIG9mIHN1YmRpdmlzaW9ucyBhcm91bmQgdGhlIGJvZHkgdG9ydXMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtzdGFydEFuZ2xlXSBzdGFydCBhbmdsZSBpbiByYWRpYW5zLiBEZWZhdWx0ID0gMC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2VuZEFuZ2xlXSBlbmQgYW5nbGUgaW4gcmFkaWFucy4gRGVmYXVsdCA9IE1hdGguUEkgKiAyLlxuICogQHJldHVybiB7T2JqZWN0LjxzdHJpbmcsIFdlYkdMQnVmZmVyPn0gVGhlIGNyZWF0ZWQgYnVmZmVycy5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcmltaXRpdmVzXG4gKiBAZnVuY3Rpb24gY3JlYXRlVG9ydXNCdWZmZXJzXG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIHZlcnRpY2VzIGZvciBhIHRvcnVzXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyByYWRpdXMgb2YgY2VudGVyIG9mIHRvcnVzIGNpcmNsZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0aGlja25lc3MgcmFkaXVzIG9mIHRvcnVzIHJpbmcuXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaWFsU3ViZGl2aXNpb25zIFRoZSBudW1iZXIgb2Ygc3ViZGl2aXNpb25zIGFyb3VuZCB0aGUgdG9ydXMuXG4gKiBAcGFyYW0ge251bWJlcn0gYm9keVN1YmRpdmlzaW9ucyBUaGUgbnVtYmVyIG9mIHN1YmRpdmlzaW9ucyBhcm91bmQgdGhlIGJvZHkgdG9ydXMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtzdGFydEFuZ2xlXSBzdGFydCBhbmdsZSBpbiByYWRpYW5zLiBEZWZhdWx0ID0gMC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2VuZEFuZ2xlXSBlbmQgYW5nbGUgaW4gcmFkaWFucy4gRGVmYXVsdCA9IE1hdGguUEkgKiAyLlxuICogQHJldHVybiB7T2JqZWN0LjxzdHJpbmcsIFR5cGVkQXJyYXk+fSBUaGUgY3JlYXRlZCB2ZXJ0aWNlcy5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcmltaXRpdmVzXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVRvcnVzVmVydGljZXMoXG4gICAgcmFkaXVzLFxuICAgIHRoaWNrbmVzcyxcbiAgICByYWRpYWxTdWJkaXZpc2lvbnMsXG4gICAgYm9keVN1YmRpdmlzaW9ucyxcbiAgICBzdGFydEFuZ2xlLFxuICAgIGVuZEFuZ2xlKSB7XG4gIGlmIChyYWRpYWxTdWJkaXZpc2lvbnMgPCAzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdyYWRpYWxTdWJkaXZpc2lvbnMgbXVzdCBiZSAzIG9yIGdyZWF0ZXInKTtcbiAgfVxuXG4gIGlmIChib2R5U3ViZGl2aXNpb25zIDwgMykge1xuICAgIHRocm93IG5ldyBFcnJvcigndmVydGljYWxTdWJkaXZpc2lvbnMgbXVzdCBiZSAzIG9yIGdyZWF0ZXInKTtcbiAgfVxuXG4gIHN0YXJ0QW5nbGUgPSBzdGFydEFuZ2xlIHx8IDA7XG4gIGVuZEFuZ2xlID0gZW5kQW5nbGUgfHwgTWF0aC5QSSAqIDI7XG4gIGNvbnN0IHJhbmdlID0gZW5kQW5nbGUgLSBzdGFydEFuZ2xlO1xuXG4gIGNvbnN0IHJhZGlhbFBhcnRzID0gcmFkaWFsU3ViZGl2aXNpb25zICsgMTtcbiAgY29uc3QgYm9keVBhcnRzICAgPSBib2R5U3ViZGl2aXNpb25zICsgMTtcbiAgY29uc3QgbnVtVmVydGljZXMgPSByYWRpYWxQYXJ0cyAqIGJvZHlQYXJ0cztcbiAgY29uc3QgcG9zaXRpb25zICAgPSBjcmVhdGVBdWdtZW50ZWRUeXBlZEFycmF5KDMsIG51bVZlcnRpY2VzKTtcbiAgY29uc3Qgbm9ybWFscyAgICAgPSBjcmVhdGVBdWdtZW50ZWRUeXBlZEFycmF5KDMsIG51bVZlcnRpY2VzKTtcbiAgY29uc3QgdGV4Y29vcmRzICAgPSBjcmVhdGVBdWdtZW50ZWRUeXBlZEFycmF5KDIsIG51bVZlcnRpY2VzKTtcbiAgY29uc3QgaW5kaWNlcyAgICAgPSBjcmVhdGVBdWdtZW50ZWRUeXBlZEFycmF5KDMsIChyYWRpYWxTdWJkaXZpc2lvbnMpICogKGJvZHlTdWJkaXZpc2lvbnMpICogMiwgVWludDE2QXJyYXkpO1xuXG4gIGZvciAobGV0IHNsaWNlID0gMDsgc2xpY2UgPCBib2R5UGFydHM7ICsrc2xpY2UpIHtcbiAgICBjb25zdCB2ID0gc2xpY2UgLyBib2R5U3ViZGl2aXNpb25zO1xuICAgIGNvbnN0IHNsaWNlQW5nbGUgPSB2ICogTWF0aC5QSSAqIDI7XG4gICAgY29uc3Qgc2xpY2VTaW4gPSBNYXRoLnNpbihzbGljZUFuZ2xlKTtcbiAgICBjb25zdCByaW5nUmFkaXVzID0gcmFkaXVzICsgc2xpY2VTaW4gKiB0aGlja25lc3M7XG4gICAgY29uc3QgbnkgPSBNYXRoLmNvcyhzbGljZUFuZ2xlKTtcbiAgICBjb25zdCB5ID0gbnkgKiB0aGlja25lc3M7XG4gICAgZm9yIChsZXQgcmluZyA9IDA7IHJpbmcgPCByYWRpYWxQYXJ0czsgKytyaW5nKSB7XG4gICAgICBjb25zdCB1ID0gcmluZyAvIHJhZGlhbFN1YmRpdmlzaW9ucztcbiAgICAgIGNvbnN0IHJpbmdBbmdsZSA9IHN0YXJ0QW5nbGUgKyB1ICogcmFuZ2U7XG4gICAgICBjb25zdCB4U2luID0gTWF0aC5zaW4ocmluZ0FuZ2xlKTtcbiAgICAgIGNvbnN0IHpDb3MgPSBNYXRoLmNvcyhyaW5nQW5nbGUpO1xuICAgICAgY29uc3QgeCA9IHhTaW4gKiByaW5nUmFkaXVzO1xuICAgICAgY29uc3QgeiA9IHpDb3MgKiByaW5nUmFkaXVzO1xuICAgICAgY29uc3QgbnggPSB4U2luICogc2xpY2VTaW47XG4gICAgICBjb25zdCBueiA9IHpDb3MgKiBzbGljZVNpbjtcbiAgICAgIHBvc2l0aW9ucy5wdXNoKHgsIHksIHopO1xuICAgICAgbm9ybWFscy5wdXNoKG54LCBueSwgbnopO1xuICAgICAgdGV4Y29vcmRzLnB1c2godSwgMSAtIHYpO1xuICAgIH1cbiAgfVxuXG4gIGZvciAobGV0IHNsaWNlID0gMDsgc2xpY2UgPCBib2R5U3ViZGl2aXNpb25zOyArK3NsaWNlKSB7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgZm9yIChsZXQgcmluZyA9IDA7IHJpbmcgPCByYWRpYWxTdWJkaXZpc2lvbnM7ICsrcmluZykgeyAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgY29uc3QgbmV4dFJpbmdJbmRleCAgPSAxICsgcmluZztcbiAgICAgIGNvbnN0IG5leHRTbGljZUluZGV4ID0gMSArIHNsaWNlO1xuICAgICAgaW5kaWNlcy5wdXNoKHJhZGlhbFBhcnRzICogc2xpY2UgICAgICAgICAgKyByaW5nLFxuICAgICAgICAgICAgICAgICAgIHJhZGlhbFBhcnRzICogbmV4dFNsaWNlSW5kZXggKyByaW5nLFxuICAgICAgICAgICAgICAgICAgIHJhZGlhbFBhcnRzICogc2xpY2UgICAgICAgICAgKyBuZXh0UmluZ0luZGV4KTtcbiAgICAgIGluZGljZXMucHVzaChyYWRpYWxQYXJ0cyAqIG5leHRTbGljZUluZGV4ICsgcmluZyxcbiAgICAgICAgICAgICAgICAgICByYWRpYWxQYXJ0cyAqIG5leHRTbGljZUluZGV4ICsgbmV4dFJpbmdJbmRleCxcbiAgICAgICAgICAgICAgICAgICByYWRpYWxQYXJ0cyAqIHNsaWNlICAgICAgICAgICsgbmV4dFJpbmdJbmRleCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBwb3NpdGlvbjogcG9zaXRpb25zLFxuICAgIG5vcm1hbDogICBub3JtYWxzLFxuICAgIHRleGNvb3JkOiB0ZXhjb29yZHMsXG4gICAgaW5kaWNlczogIGluZGljZXMsXG4gIH07XG59XG5cblxuLyoqXG4gKiBDcmVhdGVzIGEgZGlzYyBCdWZmZXJJbmZvLiBUaGUgZGlzYyB3aWxsIGJlIGluIHRoZSB4eiBwbGFuZSwgY2VudGVyZWQgYXRcbiAqIHRoZSBvcmlnaW4uIFdoZW4gY3JlYXRpbmcsIGF0IGxlYXN0IDMgZGl2aXNpb25zLCBvciBwaWVcbiAqIHBpZWNlcywgbmVlZCB0byBiZSBzcGVjaWZpZWQsIG90aGVyd2lzZSB0aGUgdHJpYW5nbGVzIG1ha2luZ1xuICogdXAgdGhlIGRpc2Mgd2lsbCBiZSBkZWdlbmVyYXRlLiBZb3UgY2FuIGFsc28gc3BlY2lmeSB0aGVcbiAqIG51bWJlciBvZiByYWRpYWwgcGllY2VzIGBzdGFja3NgLiBBIHZhbHVlIG9mIDEgZm9yXG4gKiBzdGFja3Mgd2lsbCBnaXZlIHlvdSBhIHNpbXBsZSBkaXNjIG9mIHBpZSBwaWVjZXMuICBJZiB5b3VcbiAqIHdhbnQgdG8gY3JlYXRlIGFuIGFubnVsdXMgeW91IGNhbiBzZXQgYGlubmVyUmFkaXVzYCB0byBhXG4gKiB2YWx1ZSA+IDAuIEZpbmFsbHksIGBzdGFja1Bvd2VyYCBhbGxvd3MgeW91IHRvIGhhdmUgdGhlIHdpZHRoc1xuICogaW5jcmVhc2Ugb3IgZGVjcmVhc2UgYXMgeW91IG1vdmUgYXdheSBmcm9tIHRoZSBjZW50ZXIuIFRoaXNcbiAqIGlzIHBhcnRpY3VsYXJseSB1c2VmdWwgd2hlbiB1c2luZyB0aGUgZGlzYyBhcyBhIGdyb3VuZCBwbGFuZVxuICogd2l0aCBhIGZpeGVkIGNhbWVyYSBzdWNoIHRoYXQgeW91IGRvbid0IG5lZWQgdGhlIHJlc29sdXRpb25cbiAqIG9mIHNtYWxsIHRyaWFuZ2xlcyBuZWFyIHRoZSBwZXJpbWV0ZXIuIEZvciBleGFtcGxlLCBhIHZhbHVlXG4gKiBvZiAyIHdpbGwgcHJvZHVjZSBzdGFja3Mgd2hvc2Ugb3V0c2lkZSByYWRpdXMgaW5jcmVhc2VzIHdpdGhcbiAqIHRoZSBzcXVhcmUgb2YgdGhlIHN0YWNrIGluZGV4LiBBIHZhbHVlIG9mIDEgd2lsbCBnaXZlIHVuaWZvcm1cbiAqIHN0YWNrcy5cbiAqXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgVGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgUmFkaXVzIG9mIHRoZSBncm91bmQgcGxhbmUuXG4gKiBAcGFyYW0ge251bWJlcn0gZGl2aXNpb25zIE51bWJlciBvZiB0cmlhbmdsZXMgaW4gdGhlIGdyb3VuZCBwbGFuZSAoYXQgbGVhc3QgMykuXG4gKiBAcGFyYW0ge251bWJlcn0gW3N0YWNrc10gTnVtYmVyIG9mIHJhZGlhbCBkaXZpc2lvbnMgKGRlZmF1bHQ9MSkuXG4gKiBAcGFyYW0ge251bWJlcn0gW2lubmVyUmFkaXVzXSBEZWZhdWx0IDAuXG4gKiBAcGFyYW0ge251bWJlcn0gW3N0YWNrUG93ZXJdIFBvd2VyIHRvIHJhaXNlIHN0YWNrIHNpemUgdG8gZm9yIGRlY3JlYXNpbmcgd2lkdGguXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC5CdWZmZXJJbmZvfSBUaGUgY3JlYXRlZCBCdWZmZXJJbmZvLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3ByaW1pdGl2ZXNcbiAqIEBmdW5jdGlvbiBjcmVhdGVEaXNjQnVmZmVySW5mb1xuICovXG5cbi8qKlxuICogQ3JlYXRlcyBkaXNjIGJ1ZmZlcnMuIFRoZSBkaXNjIHdpbGwgYmUgaW4gdGhlIHh6IHBsYW5lLCBjZW50ZXJlZCBhdFxuICogdGhlIG9yaWdpbi4gV2hlbiBjcmVhdGluZywgYXQgbGVhc3QgMyBkaXZpc2lvbnMsIG9yIHBpZVxuICogcGllY2VzLCBuZWVkIHRvIGJlIHNwZWNpZmllZCwgb3RoZXJ3aXNlIHRoZSB0cmlhbmdsZXMgbWFraW5nXG4gKiB1cCB0aGUgZGlzYyB3aWxsIGJlIGRlZ2VuZXJhdGUuIFlvdSBjYW4gYWxzbyBzcGVjaWZ5IHRoZVxuICogbnVtYmVyIG9mIHJhZGlhbCBwaWVjZXMgYHN0YWNrc2AuIEEgdmFsdWUgb2YgMSBmb3JcbiAqIHN0YWNrcyB3aWxsIGdpdmUgeW91IGEgc2ltcGxlIGRpc2Mgb2YgcGllIHBpZWNlcy4gIElmIHlvdVxuICogd2FudCB0byBjcmVhdGUgYW4gYW5udWx1cyB5b3UgY2FuIHNldCBgaW5uZXJSYWRpdXNgIHRvIGFcbiAqIHZhbHVlID4gMC4gRmluYWxseSwgYHN0YWNrUG93ZXJgIGFsbG93cyB5b3UgdG8gaGF2ZSB0aGUgd2lkdGhzXG4gKiBpbmNyZWFzZSBvciBkZWNyZWFzZSBhcyB5b3UgbW92ZSBhd2F5IGZyb20gdGhlIGNlbnRlci4gVGhpc1xuICogaXMgcGFydGljdWxhcmx5IHVzZWZ1bCB3aGVuIHVzaW5nIHRoZSBkaXNjIGFzIGEgZ3JvdW5kIHBsYW5lXG4gKiB3aXRoIGEgZml4ZWQgY2FtZXJhIHN1Y2ggdGhhdCB5b3UgZG9uJ3QgbmVlZCB0aGUgcmVzb2x1dGlvblxuICogb2Ygc21hbGwgdHJpYW5nbGVzIG5lYXIgdGhlIHBlcmltZXRlci4gRm9yIGV4YW1wbGUsIGEgdmFsdWVcbiAqIG9mIDIgd2lsbCBwcm9kdWNlIHN0YWNrcyB3aG9zZSBvdXRzaWRlIHJhZGl1cyBpbmNyZWFzZXMgd2l0aFxuICogdGhlIHNxdWFyZSBvZiB0aGUgc3RhY2sgaW5kZXguIEEgdmFsdWUgb2YgMSB3aWxsIGdpdmUgdW5pZm9ybVxuICogc3RhY2tzLlxuICpcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0LlxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyBSYWRpdXMgb2YgdGhlIGdyb3VuZCBwbGFuZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkaXZpc2lvbnMgTnVtYmVyIG9mIHRyaWFuZ2xlcyBpbiB0aGUgZ3JvdW5kIHBsYW5lIChhdCBsZWFzdCAzKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhY2tzXSBOdW1iZXIgb2YgcmFkaWFsIGRpdmlzaW9ucyAoZGVmYXVsdD0xKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbaW5uZXJSYWRpdXNdIERlZmF1bHQgMC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhY2tQb3dlcl0gUG93ZXIgdG8gcmFpc2Ugc3RhY2sgc2l6ZSB0byBmb3IgZGVjcmVhc2luZyB3aWR0aC5cbiAqIEByZXR1cm4ge09iamVjdC48c3RyaW5nLCBXZWJHTEJ1ZmZlcj59IFRoZSBjcmVhdGVkIGJ1ZmZlcnMuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJpbWl0aXZlc1xuICogQGZ1bmN0aW9uIGNyZWF0ZURpc2NCdWZmZXJzXG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGRpc2MgdmVydGljZXMuIFRoZSBkaXNjIHdpbGwgYmUgaW4gdGhlIHh6IHBsYW5lLCBjZW50ZXJlZCBhdFxuICogdGhlIG9yaWdpbi4gV2hlbiBjcmVhdGluZywgYXQgbGVhc3QgMyBkaXZpc2lvbnMsIG9yIHBpZVxuICogcGllY2VzLCBuZWVkIHRvIGJlIHNwZWNpZmllZCwgb3RoZXJ3aXNlIHRoZSB0cmlhbmdsZXMgbWFraW5nXG4gKiB1cCB0aGUgZGlzYyB3aWxsIGJlIGRlZ2VuZXJhdGUuIFlvdSBjYW4gYWxzbyBzcGVjaWZ5IHRoZVxuICogbnVtYmVyIG9mIHJhZGlhbCBwaWVjZXMgYHN0YWNrc2AuIEEgdmFsdWUgb2YgMSBmb3JcbiAqIHN0YWNrcyB3aWxsIGdpdmUgeW91IGEgc2ltcGxlIGRpc2Mgb2YgcGllIHBpZWNlcy4gIElmIHlvdVxuICogd2FudCB0byBjcmVhdGUgYW4gYW5udWx1cyB5b3UgY2FuIHNldCBgaW5uZXJSYWRpdXNgIHRvIGFcbiAqIHZhbHVlID4gMC4gRmluYWxseSwgYHN0YWNrUG93ZXJgIGFsbG93cyB5b3UgdG8gaGF2ZSB0aGUgd2lkdGhzXG4gKiBpbmNyZWFzZSBvciBkZWNyZWFzZSBhcyB5b3UgbW92ZSBhd2F5IGZyb20gdGhlIGNlbnRlci4gVGhpc1xuICogaXMgcGFydGljdWxhcmx5IHVzZWZ1bCB3aGVuIHVzaW5nIHRoZSBkaXNjIGFzIGEgZ3JvdW5kIHBsYW5lXG4gKiB3aXRoIGEgZml4ZWQgY2FtZXJhIHN1Y2ggdGhhdCB5b3UgZG9uJ3QgbmVlZCB0aGUgcmVzb2x1dGlvblxuICogb2Ygc21hbGwgdHJpYW5nbGVzIG5lYXIgdGhlIHBlcmltZXRlci4gRm9yIGV4YW1wbGUsIGEgdmFsdWVcbiAqIG9mIDIgd2lsbCBwcm9kdWNlIHN0YWNrcyB3aG9zZSBvdXRzaWRlIHJhZGl1cyBpbmNyZWFzZXMgd2l0aFxuICogdGhlIHNxdWFyZSBvZiB0aGUgc3RhY2sgaW5kZXguIEEgdmFsdWUgb2YgMSB3aWxsIGdpdmUgdW5pZm9ybVxuICogc3RhY2tzLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgUmFkaXVzIG9mIHRoZSBncm91bmQgcGxhbmUuXG4gKiBAcGFyYW0ge251bWJlcn0gZGl2aXNpb25zIE51bWJlciBvZiB0cmlhbmdsZXMgaW4gdGhlIGdyb3VuZCBwbGFuZSAoYXQgbGVhc3QgMykuXG4gKiBAcGFyYW0ge251bWJlcn0gW3N0YWNrc10gTnVtYmVyIG9mIHJhZGlhbCBkaXZpc2lvbnMgKGRlZmF1bHQ9MSkuXG4gKiBAcGFyYW0ge251bWJlcn0gW2lubmVyUmFkaXVzXSBEZWZhdWx0IDAuXG4gKiBAcGFyYW0ge251bWJlcn0gW3N0YWNrUG93ZXJdIFBvd2VyIHRvIHJhaXNlIHN0YWNrIHNpemUgdG8gZm9yIGRlY3JlYXNpbmcgd2lkdGguXG4gKiBAcmV0dXJuIHtPYmplY3QuPHN0cmluZywgVHlwZWRBcnJheT59IFRoZSBjcmVhdGVkIHZlcnRpY2VzLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3ByaW1pdGl2ZXNcbiAqL1xuZnVuY3Rpb24gY3JlYXRlRGlzY1ZlcnRpY2VzKFxuICAgIHJhZGl1cyxcbiAgICBkaXZpc2lvbnMsXG4gICAgc3RhY2tzLFxuICAgIGlubmVyUmFkaXVzLFxuICAgIHN0YWNrUG93ZXIpIHtcbiAgaWYgKGRpdmlzaW9ucyA8IDMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2RpdmlzaW9ucyBtdXN0IGJlIGF0IGxlYXN0IDMnKTtcbiAgfVxuXG4gIHN0YWNrcyA9IHN0YWNrcyA/IHN0YWNrcyA6IDE7XG4gIHN0YWNrUG93ZXIgPSBzdGFja1Bvd2VyID8gc3RhY2tQb3dlciA6IDE7XG4gIGlubmVyUmFkaXVzID0gaW5uZXJSYWRpdXMgPyBpbm5lclJhZGl1cyA6IDA7XG5cbiAgLy8gTm90ZTogV2UgZG9uJ3Qgc2hhcmUgdGhlIGNlbnRlciB2ZXJ0ZXggYmVjYXVzZSB0aGF0IHdvdWxkXG4gIC8vIG1lc3MgdXAgdGV4dHVyZSBjb29yZGluYXRlcy5cbiAgY29uc3QgbnVtVmVydGljZXMgPSAoZGl2aXNpb25zICsgMSkgKiAoc3RhY2tzICsgMSk7XG5cbiAgY29uc3QgcG9zaXRpb25zID0gY3JlYXRlQXVnbWVudGVkVHlwZWRBcnJheSgzLCBudW1WZXJ0aWNlcyk7XG4gIGNvbnN0IG5vcm1hbHMgICA9IGNyZWF0ZUF1Z21lbnRlZFR5cGVkQXJyYXkoMywgbnVtVmVydGljZXMpO1xuICBjb25zdCB0ZXhjb29yZHMgPSBjcmVhdGVBdWdtZW50ZWRUeXBlZEFycmF5KDIsIG51bVZlcnRpY2VzKTtcbiAgY29uc3QgaW5kaWNlcyAgID0gY3JlYXRlQXVnbWVudGVkVHlwZWRBcnJheSgzLCBzdGFja3MgKiBkaXZpc2lvbnMgKiAyLCBVaW50MTZBcnJheSk7XG5cbiAgbGV0IGZpcnN0SW5kZXggPSAwO1xuICBjb25zdCByYWRpdXNTcGFuID0gcmFkaXVzIC0gaW5uZXJSYWRpdXM7XG4gIGNvbnN0IHBvaW50c1BlclN0YWNrID0gZGl2aXNpb25zICsgMTtcblxuICAvLyBCdWlsZCB0aGUgZGlzayBvbmUgc3RhY2sgYXQgYSB0aW1lLlxuICBmb3IgKGxldCBzdGFjayA9IDA7IHN0YWNrIDw9IHN0YWNrczsgKytzdGFjaykge1xuICAgIGNvbnN0IHN0YWNrUmFkaXVzID0gaW5uZXJSYWRpdXMgKyByYWRpdXNTcGFuICogTWF0aC5wb3coc3RhY2sgLyBzdGFja3MsIHN0YWNrUG93ZXIpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gZGl2aXNpb25zOyArK2kpIHtcbiAgICAgIGNvbnN0IHRoZXRhID0gMi4wICogTWF0aC5QSSAqIGkgLyBkaXZpc2lvbnM7XG4gICAgICBjb25zdCB4ID0gc3RhY2tSYWRpdXMgKiBNYXRoLmNvcyh0aGV0YSk7XG4gICAgICBjb25zdCB6ID0gc3RhY2tSYWRpdXMgKiBNYXRoLnNpbih0aGV0YSk7XG5cbiAgICAgIHBvc2l0aW9ucy5wdXNoKHgsIDAsIHopO1xuICAgICAgbm9ybWFscy5wdXNoKDAsIDEsIDApO1xuICAgICAgdGV4Y29vcmRzLnB1c2goMSAtIChpIC8gZGl2aXNpb25zKSwgc3RhY2sgLyBzdGFja3MpO1xuICAgICAgaWYgKHN0YWNrID4gMCAmJiBpICE9PSBkaXZpc2lvbnMpIHtcbiAgICAgICAgLy8gYSwgYiwgYyBhbmQgZCBhcmUgdGhlIGluZGljZXMgb2YgdGhlIHZlcnRpY2VzIG9mIGEgcXVhZC4gIHVubGVzc1xuICAgICAgICAvLyB0aGUgY3VycmVudCBzdGFjayBpcyB0aGUgb25lIGNsb3Nlc3QgdG8gdGhlIGNlbnRlciwgaW4gd2hpY2ggY2FzZVxuICAgICAgICAvLyB0aGUgdmVydGljZXMgYSBhbmQgYiBjb25uZWN0IHRvIHRoZSBjZW50ZXIgdmVydGV4LlxuICAgICAgICBjb25zdCBhID0gZmlyc3RJbmRleCArIChpICsgMSk7XG4gICAgICAgIGNvbnN0IGIgPSBmaXJzdEluZGV4ICsgaTtcbiAgICAgICAgY29uc3QgYyA9IGZpcnN0SW5kZXggKyBpIC0gcG9pbnRzUGVyU3RhY2s7XG4gICAgICAgIGNvbnN0IGQgPSBmaXJzdEluZGV4ICsgKGkgKyAxKSAtIHBvaW50c1BlclN0YWNrO1xuXG4gICAgICAgIC8vIE1ha2UgYSBxdWFkIG9mIHRoZSB2ZXJ0aWNlcyBhLCBiLCBjLCBkLlxuICAgICAgICBpbmRpY2VzLnB1c2goYSwgYiwgYyk7XG4gICAgICAgIGluZGljZXMucHVzaChhLCBjLCBkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmaXJzdEluZGV4ICs9IGRpdmlzaW9ucyArIDE7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHBvc2l0aW9uOiBwb3NpdGlvbnMsXG4gICAgbm9ybWFsOiBub3JtYWxzLFxuICAgIHRleGNvb3JkOiB0ZXhjb29yZHMsXG4gICAgaW5kaWNlczogaW5kaWNlcyxcbiAgfTtcbn1cblxuLyoqXG4gKiBjcmVhdGVzIGEgcmFuZG9tIGludGVnZXIgYmV0d2VlbiAwIGFuZCByYW5nZSAtIDEgaW5jbHVzaXZlLlxuICogQHBhcmFtIHtudW1iZXJ9IHJhbmdlXG4gKiBAcmV0dXJuIHtudW1iZXJ9IHJhbmRvbSB2YWx1ZSBiZXR3ZWVuIDAgYW5kIHJhbmdlIC0gMSBpbmNsdXNpdmUuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByYW5kSW50KHJhbmdlKSB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpICogcmFuZ2UgfCAwO1xufVxuXG4vKipcbiAqIFVzZWQgdG8gc3VwcGx5IHJhbmRvbSBjb2xvcnNcbiAqIEBjYWxsYmFjayBSYW5kb21Db2xvckZ1bmNcbiAqIEBwYXJhbSB7bnVtYmVyfSBuZHggaW5kZXggb2YgdHJpYW5nbGUvcXVhZCBpZiB1bmluZGV4ZWQgb3IgaW5kZXggb2YgdmVydGV4IGlmIGluZGV4ZWRcbiAqIEBwYXJhbSB7bnVtYmVyfSBjaGFubmVsIDAgPSByZWQsIDEgPSBncmVlbiwgMiA9IGJsdWUsIDMgPSBhbHBoYVxuICogQHJldHVybiB7bnVtYmVyfSBhIG51bWJlciBmcm9tIDAgdG8gMjU1XG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJpbWl0aXZlc1xuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gUmFuZG9tVmVydGljZXNPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3ZlcnRzUGVyQ29sb3JdIERlZmF1bHRzIHRvIDMgZm9yIG5vbi1pbmRleGVkIHZlcnRpY2VzXG4gKiBAcHJvcGVydHkge21vZHVsZTp0d2dsL3ByaW1pdGl2ZXMuUmFuZG9tQ29sb3JGdW5jfSBbcmFuZF0gQSBmdW5jdGlvbiB0byBnZW5lcmF0ZSByYW5kb20gbnVtYmVyc1xuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3ByaW1pdGl2ZXNcbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXVnbWVudGVkVHlwZWRBcnJheSBvZiByYW5kb20gdmVydGV4IGNvbG9ycy5cbiAqIElmIHRoZSB2ZXJ0aWNlcyBhcmUgaW5kZXhlZCAoaGF2ZSBhbiBpbmRpY2VzIGFycmF5KSB0aGVuIHdpbGxcbiAqIGp1c3QgbWFrZSByYW5kb20gY29sb3JzLiBPdGhlcndpc2UgYXNzdW1lcyB0aGV5IGFyZSB0cmlhbmdsZXNcbiAqIGFuZCBtYWtlcyBvbmUgcmFuZG9tIGNvbG9yIGZvciBldmVyeSAzIHZlcnRpY2VzLlxuICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywgQXVnbWVudGVkVHlwZWRBcnJheT59IHZlcnRpY2VzIFZlcnRpY2VzIGFzIHJldHVybmVkIGZyb20gb25lIG9mIHRoZSBjcmVhdGVYWFhWZXJ0aWNlcyBmdW5jdGlvbnMuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsL3ByaW1pdGl2ZXMuUmFuZG9tVmVydGljZXNPcHRpb25zfSBbb3B0aW9uc10gb3B0aW9ucy5cbiAqIEByZXR1cm4ge09iamVjdC48c3RyaW5nLCBBdWdtZW50ZWRUeXBlZEFycmF5Pn0gc2FtZSB2ZXJ0aWNlcyBhcyBwYXNzZWQgaW4gd2l0aCBgY29sb3JgIGFkZGVkLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3ByaW1pdGl2ZXNcbiAqL1xuZnVuY3Rpb24gbWFrZVJhbmRvbVZlcnRleENvbG9ycyh2ZXJ0aWNlcywgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgY29uc3QgbnVtRWxlbWVudHMgPSB2ZXJ0aWNlcy5wb3NpdGlvbi5udW1FbGVtZW50cztcbiAgY29uc3QgdkNvbG9ycyA9IGNyZWF0ZUF1Z21lbnRlZFR5cGVkQXJyYXkoNCwgbnVtRWxlbWVudHMsIFVpbnQ4QXJyYXkpO1xuICBjb25zdCByYW5kID0gb3B0aW9ucy5yYW5kIHx8IGZ1bmN0aW9uKG5keCwgY2hhbm5lbCkge1xuICAgIHJldHVybiBjaGFubmVsIDwgMyA/IHJhbmRJbnQoMjU2KSA6IDI1NTtcbiAgfTtcbiAgdmVydGljZXMuY29sb3IgPSB2Q29sb3JzO1xuICBpZiAodmVydGljZXMuaW5kaWNlcykge1xuICAgIC8vIGp1c3QgbWFrZSByYW5kb20gY29sb3JzIGlmIGluZGV4XG4gICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IG51bUVsZW1lbnRzOyArK2lpKSB7XG4gICAgICB2Q29sb3JzLnB1c2gocmFuZChpaSwgMCksIHJhbmQoaWksIDEpLCByYW5kKGlpLCAyKSwgcmFuZChpaSwgMykpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBtYWtlIHJhbmRvbSBjb2xvcnMgcGVyIHRyaWFuZ2xlXG4gICAgY29uc3QgbnVtVmVydHNQZXJDb2xvciA9IG9wdGlvbnMudmVydHNQZXJDb2xvciB8fCAzO1xuICAgIGNvbnN0IG51bVNldHMgPSBudW1FbGVtZW50cyAvIG51bVZlcnRzUGVyQ29sb3I7XG4gICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IG51bVNldHM7ICsraWkpIHsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgIGNvbnN0IGNvbG9yID0gW3JhbmQoaWksIDApLCByYW5kKGlpLCAxKSwgcmFuZChpaSwgMiksIHJhbmQoaWksIDMpXTtcbiAgICAgIGZvciAobGV0IGpqID0gMDsgamogPCBudW1WZXJ0c1BlckNvbG9yOyArK2pqKSB7XG4gICAgICAgIHZDb2xvcnMucHVzaChjb2xvcik7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB2ZXJ0aWNlcztcbn1cblxuLyoqXG4gKiBjcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBjYWxscyBmbiB0byBjcmVhdGUgdmVydGljZXMgYW5kIHRoZW5cbiAqIGNyZWF0ZXMgYSBidWZmZXJzIGZvciB0aGVtXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjcmVhdGVCdWZmZXJGdW5jKGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbihnbCkge1xuICAgIGNvbnN0IGFycmF5cyA9IGZuLmFwcGx5KHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgIHJldHVybiBjcmVhdGVCdWZmZXJzRnJvbUFycmF5cyhnbCwgYXJyYXlzKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBjcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBjYWxscyBmbiB0byBjcmVhdGUgdmVydGljZXMgYW5kIHRoZW5cbiAqIGNyZWF0ZXMgYSBidWZmZXJJbmZvIG9iamVjdCBmb3IgdGhlbVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQnVmZmVySW5mb0Z1bmMoZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGdsKSB7XG4gICAgY29uc3QgYXJyYXlzID0gZm4uYXBwbHkobnVsbCwgIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgIHJldHVybiBjcmVhdGVCdWZmZXJJbmZvRnJvbUFycmF5cyhnbCwgYXJyYXlzKTtcbiAgfTtcbn1cblxuY29uc3QgYXJyYXlTcGVjUHJvcGVydHlOYW1lcyA9IFtcbiAgXCJudW1Db21wb25lbnRzXCIsXG4gIFwic2l6ZVwiLFxuICBcInR5cGVcIixcbiAgXCJub3JtYWxpemVcIixcbiAgXCJzdHJpZGVcIixcbiAgXCJvZmZzZXRcIixcbiAgXCJhdHRyaWJcIixcbiAgXCJuYW1lXCIsXG4gIFwiYXR0cmliTmFtZVwiLFxuXTtcblxuLyoqXG4gKiBDb3B5IGVsZW1lbnRzIGZyb20gb25lIGFycmF5IHRvIGFub3RoZXJcbiAqXG4gKiBAcGFyYW0ge0FycmF5fFR5cGVkQXJyYXl9IHNyYyBzb3VyY2UgYXJyYXlcbiAqIEBwYXJhbSB7QXJyYXl8VHlwZWRBcnJheX0gZHN0IGRlc3QgYXJyYXlcbiAqIEBwYXJhbSB7bnVtYmVyfSBkc3ROZHggaW5kZXggaW4gZGVzdCB0byBjb3B5IHNyY1xuICogQHBhcmFtIHtudW1iZXJ9IFtvZmZzZXRdIG9mZnNldCB0byBhZGQgdG8gY29waWVkIHZhbHVlc1xuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY29weUVsZW1lbnRzKHNyYywgZHN0LCBkc3ROZHgsIG9mZnNldCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcbiAgY29uc3QgbGVuZ3RoID0gc3JjLmxlbmd0aDtcbiAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IGxlbmd0aDsgKytpaSkge1xuICAgIGRzdFtkc3ROZHggKyBpaV0gPSBzcmNbaWldICsgb2Zmc2V0O1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgc2FtZSB0aW1lXG4gKlxuICogQHBhcmFtIHsobnVtYmVyW118QXJyYXlCdWZmZXJWaWV3fG1vZHVsZTp0d2dsLkZ1bGxBcnJheVNwZWMpfSBzcmNBcnJheSBhcnJheSB3aG8ncyB0eXBlIHRvIGNvcHlcbiAqIEBwYXJhbSB7bnVtYmVyfSBsZW5ndGggc2l6ZSBvZiBuZXcgYXJyYXlcbiAqIEByZXR1cm4geyhudW1iZXJbXXxBcnJheUJ1ZmZlclZpZXd8bW9kdWxlOnR3Z2wuRnVsbEFycmF5U3BlYyl9IGFycmF5IHdpdGggc2FtZSB0eXBlIGFzIHNyY0FycmF5XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjcmVhdGVBcnJheU9mU2FtZVR5cGUoc3JjQXJyYXksIGxlbmd0aCkge1xuICBjb25zdCBhcnJheVNyYyA9IGdldEFycmF5JDEoc3JjQXJyYXkpO1xuICBjb25zdCBuZXdBcnJheSA9IG5ldyBhcnJheVNyYy5jb25zdHJ1Y3RvcihsZW5ndGgpO1xuICBsZXQgbmV3QXJyYXlTcGVjID0gbmV3QXJyYXk7XG4gIC8vIElmIGl0IGFwcGVhcnMgdG8gaGF2ZSBiZWVuIGF1Z21lbnRlZCBtYWtlIG5ldyBvbmUgYXVnbWVudGVkXG4gIGlmIChhcnJheVNyYy5udW1Db21wb25lbnRzICYmIGFycmF5U3JjLm51bUVsZW1lbnRzKSB7XG4gICAgYXVnbWVudFR5cGVkQXJyYXkobmV3QXJyYXksIGFycmF5U3JjLm51bUNvbXBvbmVudHMpO1xuICB9XG4gIC8vIElmIGl0IHdhcyBhIGZ1bGwgc3BlYyBtYWtlIG5ldyBvbmUgYSBmdWxsIHNwZWNcbiAgaWYgKHNyY0FycmF5LmRhdGEpIHtcbiAgICBuZXdBcnJheVNwZWMgPSB7XG4gICAgICBkYXRhOiBuZXdBcnJheSxcbiAgICB9O1xuICAgIGNvcHlOYW1lZFByb3BlcnRpZXMoYXJyYXlTcGVjUHJvcGVydHlOYW1lcywgc3JjQXJyYXksIG5ld0FycmF5U3BlYyk7XG4gIH1cbiAgcmV0dXJuIG5ld0FycmF5U3BlYztcbn1cblxuLyoqXG4gKiBDb25jYXRlbmF0ZXMgc2V0cyBvZiB2ZXJ0aWNlc1xuICpcbiAqIEFzc3VtZXMgdGhlIHZlcnRpY2VzIG1hdGNoIGluIGNvbXBvc2l0aW9uLiBGb3IgZXhhbXBsZVxuICogaWYgb25lIHNldCBvZiB2ZXJ0aWNlcyBoYXMgcG9zaXRpb25zLCBub3JtYWxzLCBhbmQgaW5kaWNlc1xuICogYWxsIHNldHMgb2YgdmVydGljZXMgbXVzdCBoYXZlIHBvc2l0aW9ucywgbm9ybWFscywgYW5kIGluZGljZXNcbiAqIGFuZCBvZiB0aGUgc2FtZSB0eXBlLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgICBjb25zdCBjdWJlVmVydGljZXMgPSB0d2dsLnByaW1pdGl2ZXMuY3JlYXRlQ3ViZVZlcnRpY2VzKDIpO1xuICogICAgICBjb25zdCBzcGhlcmVWZXJ0aWNlcyA9IHR3Z2wucHJpbWl0aXZlcy5jcmVhdGVTcGhlcmVWZXJ0aWNlcygxLCAxMCwgMTApO1xuICogICAgICAvLyBtb3ZlIHRoZSBzcGhlcmUgMiB1bml0cyB1cFxuICogICAgICB0d2dsLnByaW1pdGl2ZXMucmVvcmllbnRWZXJ0aWNlcyhcbiAqICAgICAgICAgIHNwaGVyZVZlcnRpY2VzLCB0d2dsLm00LnRyYW5zbGF0aW9uKFswLCAyLCAwXSkpO1xuICogICAgICAvLyBtZXJnZSB0aGUgc3BoZXJlIHdpdGggdGhlIGN1YmVcbiAqICAgICAgY29uc3QgY3ViZVNwaGVyZVZlcnRpY2VzID0gdHdnbC5wcmltaXRpdmVzLmNvbmNhdFZlcnRpY2VzKFxuICogICAgICAgICAgW2N1YmVWZXJ0aWNlcywgc3BoZXJlVmVydGljZXNdKTtcbiAqICAgICAgLy8gdHVybiB0aGVtIGludG8gV2ViR0wgYnVmZmVycyBhbmQgYXR0cmliIGRhdGFcbiAqICAgICAgY29uc3QgYnVmZmVySW5mbyA9IHR3Z2wuY3JlYXRlQnVmZmVySW5mb0Zyb21BcnJheXMoZ2wsIGN1YmVTcGhlcmVWZXJ0aWNlcyk7XG4gKlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC5BcnJheXNbXX0gYXJyYXlzIEFycmF5IG9mIGFycmF5cyBvZiB2ZXJ0aWNlc1xuICogQHJldHVybiB7bW9kdWxlOnR3Z2wuQXJyYXlzfSBUaGUgY29uY2F0ZW5hdGVkIHZlcnRpY2VzLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3ByaW1pdGl2ZXNcbiAqL1xuZnVuY3Rpb24gY29uY2F0VmVydGljZXMoYXJyYXlPZkFycmF5cykge1xuICBjb25zdCBuYW1lcyA9IHt9O1xuICBsZXQgYmFzZU5hbWU7XG4gIC8vIGdldCBuYW1lcyBvZiBhbGwgYXJyYXlzLlxuICAvLyBhbmQgbnVtRWxlbWVudHMgZm9yIGVhY2ggc2V0IG9mIHZlcnRpY2VzXG4gIGZvciAobGV0IGlpID0gMDsgaWkgPCBhcnJheU9mQXJyYXlzLmxlbmd0aDsgKytpaSkge1xuICAgIGNvbnN0IGFycmF5cyA9IGFycmF5T2ZBcnJheXNbaWldO1xuICAgIE9iamVjdC5rZXlzKGFycmF5cykuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7ICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICBpZiAoIW5hbWVzW25hbWVdKSB7XG4gICAgICAgIG5hbWVzW25hbWVdID0gW107XG4gICAgICB9XG4gICAgICBpZiAoIWJhc2VOYW1lICYmIG5hbWUgIT09ICdpbmRpY2VzJykge1xuICAgICAgICBiYXNlTmFtZSA9IG5hbWU7XG4gICAgICB9XG4gICAgICBjb25zdCBhcnJheUluZm8gPSBhcnJheXNbbmFtZV07XG4gICAgICBjb25zdCBudW1Db21wb25lbnRzID0gZ2V0TnVtQ29tcG9uZW50cyQxKGFycmF5SW5mbywgbmFtZSk7XG4gICAgICBjb25zdCBhcnJheSA9IGdldEFycmF5JDEoYXJyYXlJbmZvKTtcbiAgICAgIGNvbnN0IG51bUVsZW1lbnRzID0gYXJyYXkubGVuZ3RoIC8gbnVtQ29tcG9uZW50cztcbiAgICAgIG5hbWVzW25hbWVdLnB1c2gobnVtRWxlbWVudHMpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gY29tcHV0ZSBsZW5ndGggb2YgY29tYmluZWQgYXJyYXlcbiAgLy8gYW5kIHJldHVybiBvbmUgZm9yIHJlZmVyZW5jZVxuICBmdW5jdGlvbiBnZXRMZW5ndGhPZkNvbWJpbmVkQXJyYXlzKG5hbWUpIHtcbiAgICBsZXQgbGVuZ3RoID0gMDtcbiAgICBsZXQgYXJyYXlTcGVjO1xuICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBhcnJheU9mQXJyYXlzLmxlbmd0aDsgKytpaSkge1xuICAgICAgY29uc3QgYXJyYXlzID0gYXJyYXlPZkFycmF5c1tpaV07XG4gICAgICBjb25zdCBhcnJheUluZm8gPSBhcnJheXNbbmFtZV07XG4gICAgICBjb25zdCBhcnJheSA9IGdldEFycmF5JDEoYXJyYXlJbmZvKTtcbiAgICAgIGxlbmd0aCArPSBhcnJheS5sZW5ndGg7XG4gICAgICBpZiAoIWFycmF5U3BlYyB8fCBhcnJheUluZm8uZGF0YSkge1xuICAgICAgICBhcnJheVNwZWMgPSBhcnJheUluZm87XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBsZW5ndGg6IGxlbmd0aCxcbiAgICAgIHNwZWM6IGFycmF5U3BlYyxcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gY29weUFycmF5c1RvTmV3QXJyYXkobmFtZSwgYmFzZSwgbmV3QXJyYXkpIHtcbiAgICBsZXQgYmFzZUluZGV4ID0gMDtcbiAgICBsZXQgb2Zmc2V0ID0gMDtcbiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgYXJyYXlPZkFycmF5cy5sZW5ndGg7ICsraWkpIHtcbiAgICAgIGNvbnN0IGFycmF5cyA9IGFycmF5T2ZBcnJheXNbaWldO1xuICAgICAgY29uc3QgYXJyYXlJbmZvID0gYXJyYXlzW25hbWVdO1xuICAgICAgY29uc3QgYXJyYXkgPSBnZXRBcnJheSQxKGFycmF5SW5mbyk7XG4gICAgICBpZiAobmFtZSA9PT0gJ2luZGljZXMnKSB7XG4gICAgICAgIGNvcHlFbGVtZW50cyhhcnJheSwgbmV3QXJyYXksIG9mZnNldCwgYmFzZUluZGV4KTtcbiAgICAgICAgYmFzZUluZGV4ICs9IGJhc2VbaWldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29weUVsZW1lbnRzKGFycmF5LCBuZXdBcnJheSwgb2Zmc2V0KTtcbiAgICAgIH1cbiAgICAgIG9mZnNldCArPSBhcnJheS5sZW5ndGg7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgYmFzZSA9IG5hbWVzW2Jhc2VOYW1lXTtcblxuICBjb25zdCBuZXdBcnJheXMgPSB7fTtcbiAgT2JqZWN0LmtleXMobmFtZXMpLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuICAgIGNvbnN0IGluZm8gPSBnZXRMZW5ndGhPZkNvbWJpbmVkQXJyYXlzKG5hbWUpO1xuICAgIGNvbnN0IG5ld0FycmF5U3BlYyA9IGNyZWF0ZUFycmF5T2ZTYW1lVHlwZShpbmZvLnNwZWMsIGluZm8ubGVuZ3RoKTtcbiAgICBjb3B5QXJyYXlzVG9OZXdBcnJheShuYW1lLCBiYXNlLCBnZXRBcnJheSQxKG5ld0FycmF5U3BlYykpO1xuICAgIG5ld0FycmF5c1tuYW1lXSA9IG5ld0FycmF5U3BlYztcbiAgfSk7XG4gIHJldHVybiBuZXdBcnJheXM7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGR1cGxpY2F0ZSBzZXQgb2YgdmVydGljZXNcbiAqXG4gKiBUaGlzIGlzIHVzZWZ1bCBmb3IgY2FsbGluZyByZW9yaWVudFZlcnRpY2VzIHdoZW4geW91XG4gKiBhbHNvIHdhbnQgdG8ga2VlcCB0aGUgb3JpZ2luYWwgYXZhaWxhYmxlXG4gKlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC5BcnJheXN9IGFycmF5cyBvZiB2ZXJ0aWNlc1xuICogQHJldHVybiB7bW9kdWxlOnR3Z2wuQXJyYXlzfSBUaGUgZHVwbGljYXRlZCB2ZXJ0aWNlcy5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcmltaXRpdmVzXG4gKi9cbmZ1bmN0aW9uIGR1cGxpY2F0ZVZlcnRpY2VzKGFycmF5cykge1xuICBjb25zdCBuZXdBcnJheXMgPSB7fTtcbiAgT2JqZWN0LmtleXMoYXJyYXlzKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBjb25zdCBhcnJheVNwZWMgPSBhcnJheXNbbmFtZV07XG4gICAgY29uc3Qgc3JjQXJyYXkgPSBnZXRBcnJheSQxKGFycmF5U3BlYyk7XG4gICAgY29uc3QgbmV3QXJyYXlTcGVjID0gY3JlYXRlQXJyYXlPZlNhbWVUeXBlKGFycmF5U3BlYywgc3JjQXJyYXkubGVuZ3RoKTtcbiAgICBjb3B5RWxlbWVudHMoc3JjQXJyYXksIGdldEFycmF5JDEobmV3QXJyYXlTcGVjKSwgMCk7XG4gICAgbmV3QXJyYXlzW25hbWVdID0gbmV3QXJyYXlTcGVjO1xuICB9KTtcbiAgcmV0dXJuIG5ld0FycmF5cztcbn1cblxuY29uc3QgY3JlYXRlM0RGQnVmZmVySW5mbyA9IGNyZWF0ZUJ1ZmZlckluZm9GdW5jKGNyZWF0ZTNERlZlcnRpY2VzKTtcbmNvbnN0IGNyZWF0ZTNERkJ1ZmZlcnMgPSBjcmVhdGVCdWZmZXJGdW5jKGNyZWF0ZTNERlZlcnRpY2VzKTtcbmNvbnN0IGNyZWF0ZUN1YmVCdWZmZXJJbmZvID0gY3JlYXRlQnVmZmVySW5mb0Z1bmMoY3JlYXRlQ3ViZVZlcnRpY2VzKTtcbmNvbnN0IGNyZWF0ZUN1YmVCdWZmZXJzID0gY3JlYXRlQnVmZmVyRnVuYyhjcmVhdGVDdWJlVmVydGljZXMpO1xuY29uc3QgY3JlYXRlUGxhbmVCdWZmZXJJbmZvID0gY3JlYXRlQnVmZmVySW5mb0Z1bmMoY3JlYXRlUGxhbmVWZXJ0aWNlcyk7XG5jb25zdCBjcmVhdGVQbGFuZUJ1ZmZlcnMgPSBjcmVhdGVCdWZmZXJGdW5jKGNyZWF0ZVBsYW5lVmVydGljZXMpO1xuY29uc3QgY3JlYXRlU3BoZXJlQnVmZmVySW5mbyA9IGNyZWF0ZUJ1ZmZlckluZm9GdW5jKGNyZWF0ZVNwaGVyZVZlcnRpY2VzKTtcbmNvbnN0IGNyZWF0ZVNwaGVyZUJ1ZmZlcnMgPSBjcmVhdGVCdWZmZXJGdW5jKGNyZWF0ZVNwaGVyZVZlcnRpY2VzKTtcbmNvbnN0IGNyZWF0ZVRydW5jYXRlZENvbmVCdWZmZXJJbmZvID0gY3JlYXRlQnVmZmVySW5mb0Z1bmMoY3JlYXRlVHJ1bmNhdGVkQ29uZVZlcnRpY2VzKTtcbmNvbnN0IGNyZWF0ZVRydW5jYXRlZENvbmVCdWZmZXJzID0gY3JlYXRlQnVmZmVyRnVuYyhjcmVhdGVUcnVuY2F0ZWRDb25lVmVydGljZXMpO1xuY29uc3QgY3JlYXRlWFlRdWFkQnVmZmVySW5mbyA9IGNyZWF0ZUJ1ZmZlckluZm9GdW5jKGNyZWF0ZVhZUXVhZFZlcnRpY2VzKTtcbmNvbnN0IGNyZWF0ZVhZUXVhZEJ1ZmZlcnMgPSBjcmVhdGVCdWZmZXJGdW5jKGNyZWF0ZVhZUXVhZFZlcnRpY2VzKTtcbmNvbnN0IGNyZWF0ZUNyZXNjZW50QnVmZmVySW5mbyA9IGNyZWF0ZUJ1ZmZlckluZm9GdW5jKGNyZWF0ZUNyZXNjZW50VmVydGljZXMpO1xuY29uc3QgY3JlYXRlQ3Jlc2NlbnRCdWZmZXJzID0gY3JlYXRlQnVmZmVyRnVuYyhjcmVhdGVDcmVzY2VudFZlcnRpY2VzKTtcbmNvbnN0IGNyZWF0ZUN5bGluZGVyQnVmZmVySW5mbyA9IGNyZWF0ZUJ1ZmZlckluZm9GdW5jKGNyZWF0ZUN5bGluZGVyVmVydGljZXMpO1xuY29uc3QgY3JlYXRlQ3lsaW5kZXJCdWZmZXJzID0gY3JlYXRlQnVmZmVyRnVuYyhjcmVhdGVDeWxpbmRlclZlcnRpY2VzKTtcbmNvbnN0IGNyZWF0ZVRvcnVzQnVmZmVySW5mbyA9IGNyZWF0ZUJ1ZmZlckluZm9GdW5jKGNyZWF0ZVRvcnVzVmVydGljZXMpO1xuY29uc3QgY3JlYXRlVG9ydXNCdWZmZXJzID0gY3JlYXRlQnVmZmVyRnVuYyhjcmVhdGVUb3J1c1ZlcnRpY2VzKTtcbmNvbnN0IGNyZWF0ZURpc2NCdWZmZXJJbmZvID0gY3JlYXRlQnVmZmVySW5mb0Z1bmMoY3JlYXRlRGlzY1ZlcnRpY2VzKTtcbmNvbnN0IGNyZWF0ZURpc2NCdWZmZXJzID0gY3JlYXRlQnVmZmVyRnVuYyhjcmVhdGVEaXNjVmVydGljZXMpO1xuXG4vLyB0aGVzZSB3ZXJlIG1pcy1zcGVsbGVkIHVudGlsIDQuMTJcbmNvbnN0IGNyZWF0ZUNyZXNlbnRCdWZmZXJJbmZvID0gY3JlYXRlQ3Jlc2NlbnRCdWZmZXJJbmZvO1xuY29uc3QgY3JlYXRlQ3Jlc2VudEJ1ZmZlcnMgPSBjcmVhdGVDcmVzY2VudEJ1ZmZlcnM7XG5jb25zdCBjcmVhdGVDcmVzZW50VmVydGljZXMgPSBjcmVhdGVDcmVzY2VudFZlcnRpY2VzO1xuXG52YXIgcHJpbWl0aXZlcyA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgX19wcm90b19fOiBudWxsLFxuICBjcmVhdGUzREZCdWZmZXJJbmZvOiBjcmVhdGUzREZCdWZmZXJJbmZvLFxuICBjcmVhdGUzREZCdWZmZXJzOiBjcmVhdGUzREZCdWZmZXJzLFxuICBjcmVhdGUzREZWZXJ0aWNlczogY3JlYXRlM0RGVmVydGljZXMsXG4gIGNyZWF0ZUF1Z21lbnRlZFR5cGVkQXJyYXk6IGNyZWF0ZUF1Z21lbnRlZFR5cGVkQXJyYXksXG4gIGNyZWF0ZUN1YmVCdWZmZXJJbmZvOiBjcmVhdGVDdWJlQnVmZmVySW5mbyxcbiAgY3JlYXRlQ3ViZUJ1ZmZlcnM6IGNyZWF0ZUN1YmVCdWZmZXJzLFxuICBjcmVhdGVDdWJlVmVydGljZXM6IGNyZWF0ZUN1YmVWZXJ0aWNlcyxcbiAgY3JlYXRlUGxhbmVCdWZmZXJJbmZvOiBjcmVhdGVQbGFuZUJ1ZmZlckluZm8sXG4gIGNyZWF0ZVBsYW5lQnVmZmVyczogY3JlYXRlUGxhbmVCdWZmZXJzLFxuICBjcmVhdGVQbGFuZVZlcnRpY2VzOiBjcmVhdGVQbGFuZVZlcnRpY2VzLFxuICBjcmVhdGVTcGhlcmVCdWZmZXJJbmZvOiBjcmVhdGVTcGhlcmVCdWZmZXJJbmZvLFxuICBjcmVhdGVTcGhlcmVCdWZmZXJzOiBjcmVhdGVTcGhlcmVCdWZmZXJzLFxuICBjcmVhdGVTcGhlcmVWZXJ0aWNlczogY3JlYXRlU3BoZXJlVmVydGljZXMsXG4gIGNyZWF0ZVRydW5jYXRlZENvbmVCdWZmZXJJbmZvOiBjcmVhdGVUcnVuY2F0ZWRDb25lQnVmZmVySW5mbyxcbiAgY3JlYXRlVHJ1bmNhdGVkQ29uZUJ1ZmZlcnM6IGNyZWF0ZVRydW5jYXRlZENvbmVCdWZmZXJzLFxuICBjcmVhdGVUcnVuY2F0ZWRDb25lVmVydGljZXM6IGNyZWF0ZVRydW5jYXRlZENvbmVWZXJ0aWNlcyxcbiAgY3JlYXRlWFlRdWFkQnVmZmVySW5mbzogY3JlYXRlWFlRdWFkQnVmZmVySW5mbyxcbiAgY3JlYXRlWFlRdWFkQnVmZmVyczogY3JlYXRlWFlRdWFkQnVmZmVycyxcbiAgY3JlYXRlWFlRdWFkVmVydGljZXM6IGNyZWF0ZVhZUXVhZFZlcnRpY2VzLFxuICBjcmVhdGVDcmVzZW50QnVmZmVySW5mbzogY3JlYXRlQ3Jlc2VudEJ1ZmZlckluZm8sXG4gIGNyZWF0ZUNyZXNlbnRCdWZmZXJzOiBjcmVhdGVDcmVzZW50QnVmZmVycyxcbiAgY3JlYXRlQ3Jlc2VudFZlcnRpY2VzOiBjcmVhdGVDcmVzZW50VmVydGljZXMsXG4gIGNyZWF0ZUNyZXNjZW50QnVmZmVySW5mbzogY3JlYXRlQ3Jlc2NlbnRCdWZmZXJJbmZvLFxuICBjcmVhdGVDcmVzY2VudEJ1ZmZlcnM6IGNyZWF0ZUNyZXNjZW50QnVmZmVycyxcbiAgY3JlYXRlQ3Jlc2NlbnRWZXJ0aWNlczogY3JlYXRlQ3Jlc2NlbnRWZXJ0aWNlcyxcbiAgY3JlYXRlQ3lsaW5kZXJCdWZmZXJJbmZvOiBjcmVhdGVDeWxpbmRlckJ1ZmZlckluZm8sXG4gIGNyZWF0ZUN5bGluZGVyQnVmZmVyczogY3JlYXRlQ3lsaW5kZXJCdWZmZXJzLFxuICBjcmVhdGVDeWxpbmRlclZlcnRpY2VzOiBjcmVhdGVDeWxpbmRlclZlcnRpY2VzLFxuICBjcmVhdGVUb3J1c0J1ZmZlckluZm86IGNyZWF0ZVRvcnVzQnVmZmVySW5mbyxcbiAgY3JlYXRlVG9ydXNCdWZmZXJzOiBjcmVhdGVUb3J1c0J1ZmZlcnMsXG4gIGNyZWF0ZVRvcnVzVmVydGljZXM6IGNyZWF0ZVRvcnVzVmVydGljZXMsXG4gIGNyZWF0ZURpc2NCdWZmZXJJbmZvOiBjcmVhdGVEaXNjQnVmZmVySW5mbyxcbiAgY3JlYXRlRGlzY0J1ZmZlcnM6IGNyZWF0ZURpc2NCdWZmZXJzLFxuICBjcmVhdGVEaXNjVmVydGljZXM6IGNyZWF0ZURpc2NWZXJ0aWNlcyxcbiAgZGVpbmRleFZlcnRpY2VzOiBkZWluZGV4VmVydGljZXMsXG4gIGZsYXR0ZW5Ob3JtYWxzOiBmbGF0dGVuTm9ybWFscyxcbiAgbWFrZVJhbmRvbVZlcnRleENvbG9yczogbWFrZVJhbmRvbVZlcnRleENvbG9ycyxcbiAgcmVvcmllbnREaXJlY3Rpb25zOiByZW9yaWVudERpcmVjdGlvbnMsXG4gIHJlb3JpZW50Tm9ybWFsczogcmVvcmllbnROb3JtYWxzLFxuICByZW9yaWVudFBvc2l0aW9uczogcmVvcmllbnRQb3NpdGlvbnMsXG4gIHJlb3JpZW50VmVydGljZXM6IHJlb3JpZW50VmVydGljZXMsXG4gIGNvbmNhdFZlcnRpY2VzOiBjb25jYXRWZXJ0aWNlcyxcbiAgZHVwbGljYXRlVmVydGljZXM6IGR1cGxpY2F0ZVZlcnRpY2VzXG59KTtcblxuLypcbiAqIENvcHlyaWdodCAyMDE5IEdyZWdnIFRhdmFyZXNcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLFxuICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvblxuICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsXG4gKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcbiAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMXG4gKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbiAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVJcbiAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG4vKipcbiAqIEdldHMgdGhlIGdsIHZlcnNpb24gYXMgYSBudW1iZXJcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBBIFdlYkdMUmVuZGVyaW5nQ29udGV4dFxuICogQHJldHVybiB7bnVtYmVyfSB2ZXJzaW9uIG9mIGdsXG4gKiBAcHJpdmF0ZVxuICovXG4vL2Z1bmN0aW9uIGdldFZlcnNpb25Bc051bWJlcihnbCkge1xuLy8gIHJldHVybiBwYXJzZUZsb2F0KGdsLmdldFBhcmFtZXRlcihnbC5WRVJTSU9OKS5zdWJzdHIoNikpO1xuLy99XG5cbi8qKlxuICogQ2hlY2sgaWYgY29udGV4dCBpcyBXZWJHTCAyLjBcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBBIFdlYkdMUmVuZGVyaW5nQ29udGV4dFxuICogQHJldHVybiB7Ym9vbH0gdHJ1ZSBpZiBpdCdzIFdlYkdMIDIuMFxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsXG4gKi9cbmZ1bmN0aW9uIGlzV2ViR0wyKGdsKSB7XG4gIC8vIFRoaXMgaXMgdGhlIGNvcnJlY3QgY2hlY2sgYnV0IGl0J3Mgc2xvd1xuICAvLyAgcmV0dXJuIGdsLmdldFBhcmFtZXRlcihnbC5WRVJTSU9OKS5pbmRleE9mKFwiV2ViR0wgMi4wXCIpID09PSAwO1xuICAvLyBUaGlzIG1pZ2h0IGFsc28gYmUgdGhlIGNvcnJlY3QgY2hlY2sgYnV0IEknbSBhc3N1bWluZyBpdCdzIHNsb3ctaXNoXG4gIC8vIHJldHVybiBnbCBpbnN0YW5jZW9mIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQ7XG4gIHJldHVybiAhIWdsLnRleFN0b3JhZ2UyRDtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBjb250ZXh0IGlzIFdlYkdMIDEuMFxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIEEgV2ViR0xSZW5kZXJpbmdDb250ZXh0XG4gKiBAcmV0dXJuIHtib29sfSB0cnVlIGlmIGl0J3MgV2ViR0wgMS4wXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2xcbiAqL1xuZnVuY3Rpb24gaXNXZWJHTDEoZ2wpIHtcbiAgLy8gVGhpcyBpcyB0aGUgY29ycmVjdCBjaGVjayBidXQgaXQncyBzbG93XG4gIC8vIGNvbnN0IHZlcnNpb24gPSBnZXRWZXJzaW9uQXNOdW1iZXIoZ2wpO1xuICAvLyByZXR1cm4gdmVyc2lvbiA8PSAxLjAgJiYgdmVyc2lvbiA+IDAuMDsgIC8vIGJlY2F1c2UgYXMgb2YgMjAxNi81IEVkZ2UgcmV0dXJucyAwLjk2XG4gIC8vIFRoaXMgbWlnaHQgYWxzbyBiZSB0aGUgY29ycmVjdCBjaGVjayBidXQgSSdtIGFzc3VtaW5nIGl0J3Mgc2xvdy1pc2hcbiAgLy8gcmV0dXJuIGdsIGluc3RhbmNlb2YgV2ViR0xSZW5kZXJpbmdDb250ZXh0O1xuICByZXR1cm4gIWdsLnRleFN0b3JhZ2UyRDtcbn1cblxuLyoqXG4gKiBHZXRzIGEgc3RyaW5nIGZvciBXZWJHTCBlbnVtXG4gKlxuICogTm90ZTogU2V2ZXJhbCBlbnVtcyBhcmUgdGhlIHNhbWUuIFdpdGhvdXQgbW9yZVxuICogY29udGV4dCAod2hpY2ggZnVuY3Rpb24pIGl0J3MgaW1wb3NzaWJsZSB0byBhbHdheXNcbiAqIGdpdmUgdGhlIGNvcnJlY3QgZW51bS4gQXMgaXQgaXMsIGZvciBtYXRjaGluZyB2YWx1ZXNcbiAqIGl0IGdpdmVzIGFsbCBlbnVtcy4gQ2hlY2tpbmcgdGhlIFdlYkdMMlJlbmRlcmluZ0NvbnRleHRcbiAqIHRoYXQgbWVhbnNcbiAqXG4gKiAgICAgIDAgICAgID0gWkVSTyB8IFBPSU5UIHwgTk9ORSB8IE5PX0VSUk9SXG4gKiAgICAgIDEgICAgID0gT05FIHwgTElORVMgfCBTWU5DX0ZMVVNIX0NPTU1BTkRTX0JJVFxuICogICAgICAzMjc3NyA9IEJMRU5EX0VRVUFUSU9OX1JHQiB8IEJMRU5EX0VRVUFUSU9OX1JHQlxuICogICAgICAzNjY2MiA9IENPUFlfUkVBRF9CVUZGRVIgfCBDT1BZX1JFQURfQlVGRkVSX0JJTkRJTkdcbiAqICAgICAgMzY2NjMgPSBDT1BZX1dSSVRFX0JVRkZFUiB8IENPUFlfV1JJVEVfQlVGRkVSX0JJTkRJTkdcbiAqICAgICAgMzYwMDYgPSBGUkFNRUJVRkZFUl9CSU5ESU5HIHwgRFJBV19GUkFNRUJVRkZFUl9CSU5ESU5HXG4gKlxuICogSXQncyBhbHNvIG5vdCB1c2VmdWwgZm9yIGJpdHMgcmVhbGx5IHVubGVzcyB5b3UgcGFzcyBpbiBpbmRpdmlkdWFsIGJpdHMuXG4gKiBJbiBvdGhlciB3b3Jkc1xuICpcbiAqICAgICBjb25zdCBiaXRzID0gZ2wuQ09MT1JfQlVGRkVSX0JJVCB8IGdsLkRFUFRIX0JVRkZFUl9CSVQ7XG4gKiAgICAgdHdnbC5nbEVudW1Ub1N0cmluZyhnbCwgYml0cyk7ICAvLyBub3QgZ29pbmcgdG8gd29ya1xuICpcbiAqIE5vdGUgdGhhdCBzb21lIGVudW1zIG9ubHkgZXhpc3Qgb24gZXh0ZW5zaW9ucy4gSWYgeW91XG4gKiB3YW50IHRoZW0gdG8gc2hvdyB1cCB5b3UgbmVlZCB0byBwYXNzIHRoZSBleHRlbnNpb24gYXQgbGVhc3RcbiAqIG9uY2UuIEZvciBleGFtcGxlXG4gKlxuICogICAgIGNvbnN0IGV4dCA9IGdsLmdldEV4dGVuc2lvbignV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGMnKTtcbiAqICAgICBpZiAoZXh0KSB7XG4gKiAgICAgICAgdHdnbC5nbEVudW1Ub1N0cmluZyhleHQsIDApOyAgLy8ganVzdCBwcmltZSB0aGUgZnVuY3Rpb25cbiAqXG4gKiAgICAgICAgLi5sYXRlci4uXG4gKlxuICogICAgICAgIGNvbnN0IGludGVybmFsRm9ybWF0ID0gZXh0LkNPTVBSRVNTRURfUkdCX1MzVENfRFhUMV9FWFQ7XG4gKiAgICAgICAgY29uc29sZS5sb2codHdnbC5nbEVudW1Ub1N0cmluZyhnbCwgaW50ZXJuYWxGb3JtYXQpKTtcbiAqXG4gKiBOb3RpY2UgSSBkaWRuJ3QgaGF2ZSB0byBwYXNzIHRoZSBleHRlbnNpb24gdGhlIHNlY29uZCB0aW1lLiBUaGlzIG1lYW5zXG4gKiB5b3UgY2FuIGhhdmUgcGxhY2UgdGhhdCBnZW5lcmljYWxseSBnZXRzIGFuIGVudW0gZm9yIHRleHR1cmUgZm9ybWF0cyBmb3IgZXhhbXBsZS5cbiAqIGFuZCBhcyBsb25nIGFzIHlvdSBwcmltZWQgdGhlIGZ1bmN0aW9uIHdpdGggdGhlIGV4dGVuc2lvbnNcbiAqXG4gKiBJZiB5b3UncmUgdXNpbmcgYHR3Z2wuYWRkRXh0ZW5zaW9uc1RvQ29udGV4dGAgdG8gZW5hYmxlIHlvdXIgZXh0ZW5zaW9uc1xuICogdGhlbiB0d2dsIHdpbGwgYXV0b21hdGljYWxseSBnZXQgdGhlIGV4dGVuc2lvbidzIGVudW1zLlxuICpcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBBIFdlYkdMUmVuZGVyaW5nQ29udGV4dCBvciBhbnkgZXh0ZW5zaW9uIG9iamVjdFxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIHRoZSB2YWx1ZSBvZiB0aGUgZW51bSB5b3Ugd2FudCB0byBsb29rIHVwLlxuICogQHJldHVybiB7c3RyaW5nfSBlbnVtIHN0cmluZyBvciBoZXggdmFsdWVcbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbFxuICogQGZ1bmN0aW9uIGdsRW51bVRvU3RyaW5nXG4gKi9cbmNvbnN0IGdsRW51bVRvU3RyaW5nID0gKGZ1bmN0aW9uKCkge1xuICBjb25zdCBoYXZlRW51bXNGb3JUeXBlID0ge307XG4gIGNvbnN0IGVudW1zID0ge307XG5cbiAgZnVuY3Rpb24gYWRkRW51bXMoZ2wpIHtcbiAgICBjb25zdCB0eXBlID0gZ2wuY29uc3RydWN0b3IubmFtZTtcbiAgICBpZiAoIWhhdmVFbnVtc0ZvclR5cGVbdHlwZV0pIHtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIGdsKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZ2xba2V5XSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICBjb25zdCBleGlzdGluZyA9IGVudW1zW2dsW2tleV1dO1xuICAgICAgICAgIGVudW1zW2dsW2tleV1dID0gZXhpc3RpbmcgPyBgJHtleGlzdGluZ30gfCAke2tleX1gIDoga2V5O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBoYXZlRW51bXNGb3JUeXBlW3R5cGVdID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gZ2xFbnVtVG9TdHJpbmcoZ2wsIHZhbHVlKSB7XG4gICAgYWRkRW51bXMoZ2wpO1xuICAgIHJldHVybiBlbnVtc1t2YWx1ZV0gfHwgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgPyBgMHgke3ZhbHVlLnRvU3RyaW5nKDE2KX1gIDogdmFsdWUpO1xuICB9O1xufSgpKTtcblxudmFyIHV0aWxzID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIGdsRW51bVRvU3RyaW5nOiBnbEVudW1Ub1N0cmluZyxcbiAgaXNXZWJHTDE6IGlzV2ViR0wxLFxuICBpc1dlYkdMMjogaXNXZWJHTDJcbn0pO1xuXG4vKlxuICogQ29weXJpZ2h0IDIwMTkgR3JlZ2cgVGF2YXJlc1xuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4gKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksXG4gKiB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uXG4gKiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSxcbiAqIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZVxuICogU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuICogYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hBTExcbiAqIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4gKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lOR1xuICogRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUlxuICogREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5jb25zdCBkZWZhdWx0cyQxID0ge1xuICB0ZXh0dXJlQ29sb3I6IG5ldyBVaW50OEFycmF5KFsxMjgsIDE5MiwgMjU1LCAyNTVdKSxcbiAgdGV4dHVyZU9wdGlvbnM6IHt9LFxuICBjcm9zc09yaWdpbjogdW5kZWZpbmVkLFxufTtcbmNvbnN0IGlzQXJyYXlCdWZmZXIkMSA9IGlzQXJyYXlCdWZmZXI7XG5cbi8vIFNob3VsZCB3ZSBtYWtlIHRoaXMgb24gZGVtYW5kP1xuY29uc3QgZ2V0U2hhcmVkMkRDb250ZXh0ID0gZnVuY3Rpb24oKSB7XG4gIGxldCBzX2N0eDtcbiAgcmV0dXJuIGZ1bmN0aW9uIGdldFNoYXJlZDJEQ29udGV4dCgpIHtcbiAgICBzX2N0eCA9IHNfY3R4IHx8XG4gICAgICAgICgodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KVxuICAgICAgICAgID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKS5nZXRDb250ZXh0KFwiMmRcIilcbiAgICAgICAgICA6IG51bGwpO1xuICAgIHJldHVybiBzX2N0eDtcbiAgfTtcbn0oKTtcblxuLy8gTk9URTogQ2hyb21lIHN1cHBvcnRzIDJEIGNhbnZhcyBpbiBhIFdvcmtlciAoYmVoaW5kIGZsYWcgYXMgb2YgdjY0IGJ1dFxuLy8gICAgICAgbm90IG9ubHkgZG9lcyBGaXJlZm94IE5PVCBzdXBwb3J0IGl0IGJ1dCBGaXJlZm94IGZyZWV6ZXMgaW1tZWRpYXRlbHlcbi8vICAgICAgIGlmIHlvdSB0cnkgdG8gY3JlYXRlIG9uZSBpbnN0ZWFkIG9mIGp1c3QgcmV0dXJuaW5nIG51bGwgYW5kIGNvbnRpbnVpbmcuXG4vLyAgOiAoZ2xvYmFsLk9mZnNjcmVlbkNhbnZhcyAmJiAobmV3IGdsb2JhbC5PZmZzY3JlZW5DYW52YXMoMSwgMSkpLmdldENvbnRleHQoXCIyZFwiKSk7ICAvLyBPZmZzY3JlZW5DYW52YXMgbWF5IG5vdCBzdXBwb3J0IDJkXG5cbi8vIE5PVEU6IFdlIGNhbiBtYXliZSByZW1vdmUgc29tZSBvZiB0aGUgbmVlZCBmb3IgdGhlIDJkIGNhbnZhcy4gSW4gV2ViR0wyXG4vLyB3ZSBjYW4gdXNlIHRoZSB2YXJpb3VzIHVucGFjayBzZXR0aW5ncy4gT3RoZXJ3aXNlIHdlIGNvdWxkIHRyeSB1c2luZ1xuLy8gdGhlIGFiaWxpdHkgb2YgYW4gSW1hZ2VCaXRtYXAgdG8gYmUgY3V0LiBVbmZvcnR1bmF0ZWx5IGN1dHRpbmcgYW4gSW1hZ2VCaXRtYXBcbi8vIGlzIGFzeW5jIGFuZCB0aGUgY3VycmVudCBUV0dMIGNvZGUgZXhwZWN0cyBhIG5vbi1Bc3luYyByZXN1bHQgdGhvdWdoIHRoYXRcbi8vIG1pZ2h0IG5vdCBiZSBhIHByb2JsZW0uIEltYWdlQml0bWFwIHRob3VnaCBpcyBub3QgYXZhaWxhYmxlIGluIEVkZ2Ugb3IgU2FmYXJpXG4vLyBhcyBvZiAyMDE4LTAxLTAyXG5cbi8qIFBpeGVsRm9ybWF0ICovXG5jb25zdCBBTFBIQSAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDE5MDY7XG5jb25zdCBSR0IgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDE5MDc7XG5jb25zdCBSR0JBICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDE5MDg7XG5jb25zdCBMVU1JTkFOQ0UgICAgICAgICAgICAgICAgICAgICAgPSAweDE5MDk7XG5jb25zdCBMVU1JTkFOQ0VfQUxQSEEgICAgICAgICAgICAgICAgPSAweDE5MEE7XG5jb25zdCBERVBUSF9DT01QT05FTlQgICAgICAgICAgICAgICAgPSAweDE5MDI7XG5jb25zdCBERVBUSF9TVEVOQ0lMICAgICAgICAgICAgICAgICAgPSAweDg0Rjk7XG5cbi8qIFRleHR1cmVXcmFwTW9kZSAqL1xuLy8gY29uc3QgUkVQRUFUICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgyOTAxO1xuLy8gY29uc3QgTUlSUk9SRURfUkVQRUFUICAgICAgICAgICAgICAgID0gMHg4MzcwO1xuY29uc3QgQ0xBTVBfVE9fRURHRSAgICAgICAgICAgICAgICAgID0gMHg4MTJmO1xuXG4vKiBUZXh0dXJlTWFnRmlsdGVyICovXG5jb25zdCBORUFSRVNUICAgICAgICAgICAgICAgICAgICAgICAgPSAweDI2MDA7XG5jb25zdCBMSU5FQVIgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDI2MDE7XG5cbi8qIFRleHR1cmVNaW5GaWx0ZXIgKi9cbi8vIGNvbnN0IE5FQVJFU1RfTUlQTUFQX05FQVJFU1QgICAgICAgICA9IDB4MjcwMDtcbi8vIGNvbnN0IExJTkVBUl9NSVBNQVBfTkVBUkVTVCAgICAgICAgICA9IDB4MjcwMTtcbi8vIGNvbnN0IE5FQVJFU1RfTUlQTUFQX0xJTkVBUiAgICAgICAgICA9IDB4MjcwMjtcbi8vIGNvbnN0IExJTkVBUl9NSVBNQVBfTElORUFSICAgICAgICAgICA9IDB4MjcwMztcblxuLyogVGV4dHVyZSBUYXJnZXQgKi9cbmNvbnN0IFRFWFRVUkVfMkQgICAgICAgICAgICAgICAgICAgICA9IDB4MGRlMTtcbmNvbnN0IFRFWFRVUkVfQ1VCRV9NQVAgICAgICAgICAgICAgICA9IDB4ODUxMztcbmNvbnN0IFRFWFRVUkVfM0QgICAgICAgICAgICAgICAgICAgICA9IDB4ODA2ZjtcbmNvbnN0IFRFWFRVUkVfMkRfQVJSQVkgICAgICAgICAgICAgICA9IDB4OGMxYTtcblxuLyogQ3ViZW1hcCBUYXJnZXRzICovXG5jb25zdCBURVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1ggICAgPSAweDg1MTU7XG5jb25zdCBURVhUVVJFX0NVQkVfTUFQX05FR0FUSVZFX1ggICAgPSAweDg1MTY7XG5jb25zdCBURVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1kgICAgPSAweDg1MTc7XG5jb25zdCBURVhUVVJFX0NVQkVfTUFQX05FR0FUSVZFX1kgICAgPSAweDg1MTg7XG5jb25zdCBURVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1ogICAgPSAweDg1MTk7XG5jb25zdCBURVhUVVJFX0NVQkVfTUFQX05FR0FUSVZFX1ogICAgPSAweDg1MWE7XG5cbi8qIFRleHR1cmUgUGFyYW1ldGVycyAqL1xuY29uc3QgVEVYVFVSRV9NSU5fRklMVEVSICAgICAgICAgICAgID0gMHgyODAxO1xuY29uc3QgVEVYVFVSRV9NQUdfRklMVEVSICAgICAgICAgICAgID0gMHgyODAwO1xuY29uc3QgVEVYVFVSRV9XUkFQX1MgICAgICAgICAgICAgICAgID0gMHgyODAyO1xuY29uc3QgVEVYVFVSRV9XUkFQX1QgICAgICAgICAgICAgICAgID0gMHgyODAzO1xuY29uc3QgVEVYVFVSRV9XUkFQX1IgICAgICAgICAgICAgICAgID0gMHg4MDcyO1xuY29uc3QgVEVYVFVSRV9NSU5fTE9EICAgICAgICAgICAgICAgID0gMHg4MTNhO1xuY29uc3QgVEVYVFVSRV9NQVhfTE9EICAgICAgICAgICAgICAgID0gMHg4MTNiO1xuY29uc3QgVEVYVFVSRV9CQVNFX0xFVkVMICAgICAgICAgICAgID0gMHg4MTNjO1xuY29uc3QgVEVYVFVSRV9NQVhfTEVWRUwgICAgICAgICAgICAgID0gMHg4MTNkO1xuXG5cbi8qIFBpeGVsIHN0b3JlICovXG5jb25zdCBVTlBBQ0tfQUxJR05NRU5UICAgICAgICAgICAgICAgICAgID0gMHgwY2Y1O1xuY29uc3QgVU5QQUNLX1JPV19MRU5HVEggICAgICAgICAgICAgICAgICA9IDB4MGNmMjtcbmNvbnN0IFVOUEFDS19JTUFHRV9IRUlHSFQgICAgICAgICAgICAgICAgPSAweDgwNmU7XG5jb25zdCBVTlBBQ0tfU0tJUF9QSVhFTFMgICAgICAgICAgICAgICAgID0gMHgwY2Y0O1xuY29uc3QgVU5QQUNLX1NLSVBfUk9XUyAgICAgICAgICAgICAgICAgICA9IDB4MGNmMztcbmNvbnN0IFVOUEFDS19TS0lQX0lNQUdFUyAgICAgICAgICAgICAgICAgPSAweDgwNmQ7XG5jb25zdCBVTlBBQ0tfQ09MT1JTUEFDRV9DT05WRVJTSU9OX1dFQkdMID0gMHg5MjQzO1xuY29uc3QgVU5QQUNLX1BSRU1VTFRJUExZX0FMUEhBX1dFQkdMICAgICA9IDB4OTI0MTtcbmNvbnN0IFVOUEFDS19GTElQX1lfV0VCR0wgICAgICAgICAgICAgICAgPSAweDkyNDA7XG5cbmNvbnN0IFI4ICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDgyMjk7XG5jb25zdCBSOF9TTk9STSAgICAgICAgICAgICAgICAgICAgID0gMHg4Rjk0O1xuY29uc3QgUjE2RiAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODIyRDtcbmNvbnN0IFIzMkYgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDgyMkU7XG5jb25zdCBSOFVJICAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MjMyO1xuY29uc3QgUjhJICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODIzMTtcbmNvbnN0IFJHMTZVSSAgICAgICAgICAgICAgICAgICAgICAgPSAweDgyM0E7XG5jb25zdCBSRzE2SSAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MjM5O1xuY29uc3QgUkczMlVJICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODIzQztcbmNvbnN0IFJHMzJJICAgICAgICAgICAgICAgICAgICAgICAgPSAweDgyM0I7XG5jb25zdCBSRzggICAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MjJCO1xuY29uc3QgUkc4X1NOT1JNICAgICAgICAgICAgICAgICAgICA9IDB4OEY5NTtcbmNvbnN0IFJHMTZGICAgICAgICAgICAgICAgICAgICAgICAgPSAweDgyMkY7XG5jb25zdCBSRzMyRiAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MjMwO1xuY29uc3QgUkc4VUkgICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODIzODtcbmNvbnN0IFJHOEkgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDgyMzc7XG5jb25zdCBSMTZVSSAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MjM0O1xuY29uc3QgUjE2SSAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODIzMztcbmNvbnN0IFIzMlVJICAgICAgICAgICAgICAgICAgICAgICAgPSAweDgyMzY7XG5jb25zdCBSMzJJICAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MjM1O1xuY29uc3QgUkdCOCAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODA1MTtcbmNvbnN0IFNSR0I4ICAgICAgICAgICAgICAgICAgICAgICAgPSAweDhDNDE7XG5jb25zdCBSR0I1NjUgICAgICAgICAgICAgICAgICAgICAgID0gMHg4RDYyO1xuY29uc3QgUkdCOF9TTk9STSAgICAgICAgICAgICAgICAgICA9IDB4OEY5NjtcbmNvbnN0IFIxMUZfRzExRl9CMTBGICAgICAgICAgICAgICAgPSAweDhDM0E7XG5jb25zdCBSR0I5X0U1ICAgICAgICAgICAgICAgICAgICAgID0gMHg4QzNEO1xuY29uc3QgUkdCMTZGICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODgxQjtcbmNvbnN0IFJHQjMyRiAgICAgICAgICAgICAgICAgICAgICAgPSAweDg4MTU7XG5jb25zdCBSR0I4VUkgICAgICAgICAgICAgICAgICAgICAgID0gMHg4RDdEO1xuY29uc3QgUkdCOEkgICAgICAgICAgICAgICAgICAgICAgICA9IDB4OEQ4RjtcbmNvbnN0IFJHQjE2VUkgICAgICAgICAgICAgICAgICAgICAgPSAweDhENzc7XG5jb25zdCBSR0IxNkkgICAgICAgICAgICAgICAgICAgICAgID0gMHg4RDg5O1xuY29uc3QgUkdCMzJVSSAgICAgICAgICAgICAgICAgICAgICA9IDB4OEQ3MTtcbmNvbnN0IFJHQjMySSAgICAgICAgICAgICAgICAgICAgICAgPSAweDhEODM7XG5jb25zdCBSR0JBOCAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MDU4O1xuY29uc3QgU1JHQjhfQUxQSEE4ICAgICAgICAgICAgICAgICA9IDB4OEM0MztcbmNvbnN0IFJHQkE4X1NOT1JNICAgICAgICAgICAgICAgICAgPSAweDhGOTc7XG5jb25zdCBSR0I1X0ExICAgICAgICAgICAgICAgICAgICAgID0gMHg4MDU3O1xuY29uc3QgUkdCQTQgICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODA1NjtcbmNvbnN0IFJHQjEwX0EyICAgICAgICAgICAgICAgICAgICAgPSAweDgwNTk7XG5jb25zdCBSR0JBMTZGICAgICAgICAgICAgICAgICAgICAgID0gMHg4ODFBO1xuY29uc3QgUkdCQTMyRiAgICAgICAgICAgICAgICAgICAgICA9IDB4ODgxNDtcbmNvbnN0IFJHQkE4VUkgICAgICAgICAgICAgICAgICAgICAgPSAweDhEN0M7XG5jb25zdCBSR0JBOEkgICAgICAgICAgICAgICAgICAgICAgID0gMHg4RDhFO1xuY29uc3QgUkdCMTBfQTJVSSAgICAgICAgICAgICAgICAgICA9IDB4OTA2RjtcbmNvbnN0IFJHQkExNlVJICAgICAgICAgICAgICAgICAgICAgPSAweDhENzY7XG5jb25zdCBSR0JBMTZJICAgICAgICAgICAgICAgICAgICAgID0gMHg4RDg4O1xuY29uc3QgUkdCQTMySSAgICAgICAgICAgICAgICAgICAgICA9IDB4OEQ4MjtcbmNvbnN0IFJHQkEzMlVJICAgICAgICAgICAgICAgICAgICAgPSAweDhENzA7XG5cbmNvbnN0IERFUFRIX0NPTVBPTkVOVDE2ICAgICAgICAgICAgPSAweDgxQTU7XG5jb25zdCBERVBUSF9DT01QT05FTlQyNCAgICAgICAgICAgID0gMHg4MUE2O1xuY29uc3QgREVQVEhfQ09NUE9ORU5UMzJGICAgICAgICAgICA9IDB4OENBQztcbmNvbnN0IERFUFRIMzJGX1NURU5DSUw4ICAgICAgICAgICAgPSAweDhDQUQ7XG5jb25zdCBERVBUSDI0X1NURU5DSUw4ICAgICAgICAgICAgID0gMHg4OEYwO1xuXG4vKiBEYXRhVHlwZSAqL1xuY29uc3QgQllURSQyICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxNDAwO1xuY29uc3QgVU5TSUdORURfQllURSQyICAgICAgICAgICAgICAgID0gMHgxNDAxO1xuY29uc3QgU0hPUlQkMiAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxNDAyO1xuY29uc3QgVU5TSUdORURfU0hPUlQkMiAgICAgICAgICAgICAgID0gMHgxNDAzO1xuY29uc3QgSU5UJDIgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxNDA0O1xuY29uc3QgVU5TSUdORURfSU5UJDIgICAgICAgICAgICAgICAgID0gMHgxNDA1O1xuY29uc3QgRkxPQVQkMiAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxNDA2O1xuY29uc3QgVU5TSUdORURfU0hPUlRfNF80XzRfNCQxICAgICAgID0gMHg4MDMzO1xuY29uc3QgVU5TSUdORURfU0hPUlRfNV81XzVfMSQxICAgICAgID0gMHg4MDM0O1xuY29uc3QgVU5TSUdORURfU0hPUlRfNV82XzUkMSAgICAgICAgID0gMHg4MzYzO1xuY29uc3QgSEFMRl9GTE9BVCQxICAgICAgICAgICAgICAgICAgID0gMHgxNDBCO1xuY29uc3QgSEFMRl9GTE9BVF9PRVMgICAgICAgICAgICAgICA9IDB4OEQ2MTsgIC8vIFRoYW5rcyBLaHJvbm9zIGZvciBtYWtpbmcgdGhpcyBkaWZmZXJlbnQgPjooXG5jb25zdCBVTlNJR05FRF9JTlRfMl8xMF8xMF8xMF9SRVYkMSAgPSAweDgzNjg7XG5jb25zdCBVTlNJR05FRF9JTlRfMTBGXzExRl8xMUZfUkVWJDEgPSAweDhDM0I7XG5jb25zdCBVTlNJR05FRF9JTlRfNV85XzlfOV9SRVYkMSAgICAgPSAweDhDM0U7XG5jb25zdCBGTE9BVF8zMl9VTlNJR05FRF9JTlRfMjRfOF9SRVYkMSA9IDB4OERBRDtcbmNvbnN0IFVOU0lHTkVEX0lOVF8yNF84JDEgICAgICAgICAgICA9IDB4ODRGQTtcblxuY29uc3QgUkcgICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODIyNztcbmNvbnN0IFJHX0lOVEVHRVIgICAgICAgICAgICAgICAgICAgPSAweDgyMjg7XG5jb25zdCBSRUQgICAgICAgICAgICAgICAgICAgICAgICAgID0gMHgxOTAzO1xuY29uc3QgUkVEX0lOVEVHRVIgICAgICAgICAgICAgICAgICA9IDB4OEQ5NDtcbmNvbnN0IFJHQl9JTlRFR0VSICAgICAgICAgICAgICAgICAgPSAweDhEOTg7XG5jb25zdCBSR0JBX0lOVEVHRVIgICAgICAgICAgICAgICAgID0gMHg4RDk5O1xuXG5jb25zdCBmb3JtYXRJbmZvID0ge307XG57XG4gIC8vIE5PVEU6IHRoaXMgaXMgbmFtZWQgYG51bUNvbG9yQ29tcG9uZW50c2AgdnMgYG51bUNvbXBvbmVudHNgIHNvIHdlIGNhbiBsZXQgVWdsaWZ5IG1hbmdsZVxuICAvLyB0aGUgbmFtZS5cbiAgY29uc3QgZiA9IGZvcm1hdEluZm87XG4gIGZbQUxQSEFdICAgICAgICAgICA9IHsgbnVtQ29sb3JDb21wb25lbnRzOiAxLCB9O1xuICBmW0xVTUlOQU5DRV0gICAgICAgPSB7IG51bUNvbG9yQ29tcG9uZW50czogMSwgfTtcbiAgZltMVU1JTkFOQ0VfQUxQSEFdID0geyBudW1Db2xvckNvbXBvbmVudHM6IDIsIH07XG4gIGZbUkdCXSAgICAgICAgICAgICA9IHsgbnVtQ29sb3JDb21wb25lbnRzOiAzLCB9O1xuICBmW1JHQkFdICAgICAgICAgICAgPSB7IG51bUNvbG9yQ29tcG9uZW50czogNCwgfTtcbiAgZltSRURdICAgICAgICAgICAgID0geyBudW1Db2xvckNvbXBvbmVudHM6IDEsIH07XG4gIGZbUkVEX0lOVEVHRVJdICAgICA9IHsgbnVtQ29sb3JDb21wb25lbnRzOiAxLCB9O1xuICBmW1JHXSAgICAgICAgICAgICAgPSB7IG51bUNvbG9yQ29tcG9uZW50czogMiwgfTtcbiAgZltSR19JTlRFR0VSXSAgICAgID0geyBudW1Db2xvckNvbXBvbmVudHM6IDIsIH07XG4gIGZbUkdCXSAgICAgICAgICAgICA9IHsgbnVtQ29sb3JDb21wb25lbnRzOiAzLCB9O1xuICBmW1JHQl9JTlRFR0VSXSAgICAgPSB7IG51bUNvbG9yQ29tcG9uZW50czogMywgfTtcbiAgZltSR0JBXSAgICAgICAgICAgID0geyBudW1Db2xvckNvbXBvbmVudHM6IDQsIH07XG4gIGZbUkdCQV9JTlRFR0VSXSAgICA9IHsgbnVtQ29sb3JDb21wb25lbnRzOiA0LCB9O1xuICBmW0RFUFRIX0NPTVBPTkVOVF0gPSB7IG51bUNvbG9yQ29tcG9uZW50czogMSwgfTtcbiAgZltERVBUSF9TVEVOQ0lMXSAgID0geyBudW1Db2xvckNvbXBvbmVudHM6IDIsIH07XG59XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gVGV4dHVyZUZvcm1hdERldGFpbHNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0ZXh0dXJlRm9ybWF0IGZvcm1hdCB0byBwYXNzIHRleEltYWdlMkQgYW5kIHNpbWlsYXIgZnVuY3Rpb25zLlxuICogQHByb3BlcnR5IHtib29sZWFufSBjb2xvclJlbmRlcmFibGUgdHJ1ZSBpZiB5b3UgY2FuIHJlbmRlciB0byB0aGlzIGZvcm1hdCBvZiB0ZXh0dXJlLlxuICogQHByb3BlcnR5IHtib29sZWFufSB0ZXh0dXJlRmlsdGVyYWJsZSB0cnVlIGlmIHlvdSBjYW4gZmlsdGVyIHRoZSB0ZXh0dXJlLCBmYWxzZSBpZiB5b3UgY2FuIG9ueSB1c2UgYE5FQVJFU1RgLlxuICogQHByb3BlcnR5IHtudW1iZXJbXX0gdHlwZSBBcnJheSBvZiBwb3NzaWJsZSB0eXBlcyB5b3UgY2FuIHBhc3MgdG8gdGV4SW1hZ2UyRCBhbmQgc2ltaWxhciBmdW5jdGlvblxuICogQHByb3BlcnR5IHtPYmplY3QuPG51bWJlcixudW1iZXI+fSBieXRlc1BlckVsZW1lbnRNYXAgQSBtYXAgb2YgdHlwZXMgdG8gYnl0ZXMgcGVyIGVsZW1lbnRcbiAqIEBwcml2YXRlXG4gKi9cblxubGV0IHNfdGV4dHVyZUludGVybmFsRm9ybWF0SW5mbztcbmZ1bmN0aW9uIGdldFRleHR1cmVJbnRlcm5hbEZvcm1hdEluZm8oaW50ZXJuYWxGb3JtYXQpIHtcbiAgaWYgKCFzX3RleHR1cmVJbnRlcm5hbEZvcm1hdEluZm8pIHtcbiAgICAvLyBOT1RFOiB0aGVzZSBwcm9wZXJ0aWVzIG5lZWQgdW5pcXVlIG5hbWVzIHNvIHdlIGNhbiBsZXQgVWdsaWZ5IG1hbmdsZSB0aGUgbmFtZS5cbiAgICBjb25zdCB0ID0ge307XG4gICAgLy8gdW5zaXplZCBmb3JtYXRzXG4gICAgdFtBTFBIQV0gICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBBTFBIQSwgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbMSwgMiwgMiwgNF0sICAgICAgICB0eXBlOiBbVU5TSUdORURfQllURSQyLCBIQUxGX0ZMT0FUJDEsIEhBTEZfRkxPQVRfT0VTLCBGTE9BVCQyXSwgfTtcbiAgICB0W0xVTUlOQU5DRV0gICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IExVTUlOQU5DRSwgICAgICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IHRydWUsICBieXRlc1BlckVsZW1lbnQ6IFsxLCAyLCAyLCA0XSwgICAgICAgIHR5cGU6IFtVTlNJR05FRF9CWVRFJDIsIEhBTEZfRkxPQVQkMSwgSEFMRl9GTE9BVF9PRVMsIEZMT0FUJDJdLCB9O1xuICAgIHRbTFVNSU5BTkNFX0FMUEhBXSAgICA9IHsgdGV4dHVyZUZvcm1hdDogTFVNSU5BTkNFX0FMUEhBLCBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzIsIDQsIDQsIDhdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX0JZVEUkMiwgSEFMRl9GTE9BVCQxLCBIQUxGX0ZMT0FUX09FUywgRkxPQVQkMl0sIH07XG4gICAgdFtSR0JdICAgICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0IsICAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbMywgNiwgNiwgMTIsIDJdLCAgICB0eXBlOiBbVU5TSUdORURfQllURSQyLCBIQUxGX0ZMT0FUJDEsIEhBTEZfRkxPQVRfT0VTLCBGTE9BVCQyLCBVTlNJR05FRF9TSE9SVF81XzZfNSQxXSwgfTtcbiAgICB0W1JHQkFdICAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQkEsICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IHRydWUsICBieXRlc1BlckVsZW1lbnQ6IFs0LCA4LCA4LCAxNiwgMiwgMl0sIHR5cGU6IFtVTlNJR05FRF9CWVRFJDIsIEhBTEZfRkxPQVQkMSwgSEFMRl9GTE9BVF9PRVMsIEZMT0FUJDIsIFVOU0lHTkVEX1NIT1JUXzRfNF80XzQkMSwgVU5TSUdORURfU0hPUlRfNV81XzVfMSQxXSwgfTtcbiAgICB0W0RFUFRIX0NPTVBPTkVOVF0gICAgPSB7IHRleHR1cmVGb3JtYXQ6IERFUFRIX0NPTVBPTkVOVCwgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFsyLCA0XSwgICAgICAgICAgICAgIHR5cGU6IFtVTlNJR05FRF9JTlQkMiwgVU5TSUdORURfU0hPUlQkMl0sIH07XG5cbiAgICAvLyBzaXplZCBmb3JtYXRzXG4gICAgdFtSOF0gICAgICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSRUQsICAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbMV0sICAgICAgICB0eXBlOiBbVU5TSUdORURfQllURSQyXSwgfTtcbiAgICB0W1I4X1NOT1JNXSAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJFRCwgICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IHRydWUsICBieXRlc1BlckVsZW1lbnQ6IFsxXSwgICAgICAgIHR5cGU6IFtCWVRFJDJdLCB9O1xuICAgIHRbUjE2Rl0gICAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkVELCAgICAgICAgICAgICBjb2xvclJlbmRlcmFibGU6IGZhbHNlLCB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzQsIDJdLCAgICAgdHlwZTogW0ZMT0FUJDIsIEhBTEZfRkxPQVQkMV0sIH07XG4gICAgdFtSMzJGXSAgICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSRUQsICAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogZmFsc2UsIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbNF0sICAgICAgICB0eXBlOiBbRkxPQVQkMl0sIH07XG4gICAgdFtSOFVJXSAgICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSRURfSU5URUdFUiwgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbMV0sICAgICAgICB0eXBlOiBbVU5TSUdORURfQllURSQyXSwgfTtcbiAgICB0W1I4SV0gICAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJFRF9JTlRFR0VSLCAgICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFsxXSwgICAgICAgIHR5cGU6IFtCWVRFJDJdLCB9O1xuICAgIHRbUjE2VUldICAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkVEX0lOVEVHRVIsICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzJdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX1NIT1JUJDJdLCB9O1xuICAgIHRbUjE2SV0gICAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkVEX0lOVEVHRVIsICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzJdLCAgICAgICAgdHlwZTogW1NIT1JUJDJdLCB9O1xuICAgIHRbUjMyVUldICAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkVEX0lOVEVHRVIsICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzRdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX0lOVCQyXSwgfTtcbiAgICB0W1IzMkldICAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJFRF9JTlRFR0VSLCAgICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFs0XSwgICAgICAgIHR5cGU6IFtJTlQkMl0sIH07XG4gICAgdFtSRzhdICAgICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSRywgICAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbMl0sICAgICAgICB0eXBlOiBbVU5TSUdORURfQllURSQyXSwgfTtcbiAgICB0W1JHOF9TTk9STV0gICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHLCAgICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IHRydWUsICBieXRlc1BlckVsZW1lbnQ6IFsyXSwgICAgICAgIHR5cGU6IFtCWVRFJDJdLCB9O1xuICAgIHRbUkcxNkZdICAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkcsICAgICAgICAgICAgICBjb2xvclJlbmRlcmFibGU6IGZhbHNlLCB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzgsIDRdLCAgICAgdHlwZTogW0ZMT0FUJDIsIEhBTEZfRkxPQVQkMV0sIH07XG4gICAgdFtSRzMyRl0gICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSRywgICAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogZmFsc2UsIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbOF0sICAgICAgICB0eXBlOiBbRkxPQVQkMl0sIH07XG4gICAgdFtSRzhVSV0gICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR19JTlRFR0VSLCAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbMl0sICAgICAgICB0eXBlOiBbVU5TSUdORURfQllURSQyXSwgfTtcbiAgICB0W1JHOEldICAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHX0lOVEVHRVIsICAgICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFsyXSwgICAgICAgIHR5cGU6IFtCWVRFJDJdLCB9O1xuICAgIHRbUkcxNlVJXSAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdfSU5URUdFUiwgICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzRdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX1NIT1JUJDJdLCB9O1xuICAgIHRbUkcxNkldICAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdfSU5URUdFUiwgICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzRdLCAgICAgICAgdHlwZTogW1NIT1JUJDJdLCB9O1xuICAgIHRbUkczMlVJXSAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdfSU5URUdFUiwgICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzhdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX0lOVCQyXSwgfTtcbiAgICB0W1JHMzJJXSAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHX0lOVEVHRVIsICAgICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFs4XSwgICAgICAgIHR5cGU6IFtJTlQkMl0sIH07XG4gICAgdFtSR0I4XSAgICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0IsICAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbM10sICAgICAgICB0eXBlOiBbVU5TSUdORURfQllURSQyXSwgfTtcbiAgICB0W1NSR0I4XSAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQiwgICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IHRydWUsICBieXRlc1BlckVsZW1lbnQ6IFszXSwgICAgICAgIHR5cGU6IFtVTlNJR05FRF9CWVRFJDJdLCB9O1xuICAgIHRbUkdCNTY1XSAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCLCAgICAgICAgICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzMsIDJdLCAgICAgdHlwZTogW1VOU0lHTkVEX0JZVEUkMiwgVU5TSUdORURfU0hPUlRfNV82XzUkMV0sIH07XG4gICAgdFtSR0I4X1NOT1JNXSAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0IsICAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogZmFsc2UsIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbM10sICAgICAgICB0eXBlOiBbQllURSQyXSwgfTtcbiAgICB0W1IxMUZfRzExRl9CMTBGXSAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQiwgICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IHRydWUsICBieXRlc1BlckVsZW1lbnQ6IFsxMiwgNiwgNF0sIHR5cGU6IFtGTE9BVCQyLCBIQUxGX0ZMT0FUJDEsIFVOU0lHTkVEX0lOVF8xMEZfMTFGXzExRl9SRVYkMV0sIH07XG4gICAgdFtSR0I5X0U1XSAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0IsICAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogZmFsc2UsIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbMTIsIDYsIDRdLCB0eXBlOiBbRkxPQVQkMiwgSEFMRl9GTE9BVCQxLCBVTlNJR05FRF9JTlRfNV85XzlfOV9SRVYkMV0sIH07XG4gICAgdFtSR0IxNkZdICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0IsICAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogZmFsc2UsIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbMTIsIDZdLCAgICB0eXBlOiBbRkxPQVQkMiwgSEFMRl9GTE9BVCQxXSwgfTtcbiAgICB0W1JHQjMyRl0gICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQiwgICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFsxMl0sICAgICAgIHR5cGU6IFtGTE9BVCQyXSwgfTtcbiAgICB0W1JHQjhVSV0gICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQl9JTlRFR0VSLCAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFszXSwgICAgICAgIHR5cGU6IFtVTlNJR05FRF9CWVRFJDJdLCB9O1xuICAgIHRbUkdCOEldICAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCX0lOVEVHRVIsICAgICBjb2xvclJlbmRlcmFibGU6IGZhbHNlLCB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzNdLCAgICAgICAgdHlwZTogW0JZVEUkMl0sIH07XG4gICAgdFtSR0IxNlVJXSAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JfSU5URUdFUiwgICAgIGNvbG9yUmVuZGVyYWJsZTogZmFsc2UsIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbNl0sICAgICAgICB0eXBlOiBbVU5TSUdORURfU0hPUlQkMl0sIH07XG4gICAgdFtSR0IxNkldICAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JfSU5URUdFUiwgICAgIGNvbG9yUmVuZGVyYWJsZTogZmFsc2UsIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbNl0sICAgICAgICB0eXBlOiBbU0hPUlQkMl0sIH07XG4gICAgdFtSR0IzMlVJXSAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JfSU5URUdFUiwgICAgIGNvbG9yUmVuZGVyYWJsZTogZmFsc2UsIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbMTJdLCAgICAgICB0eXBlOiBbVU5TSUdORURfSU5UJDJdLCB9O1xuICAgIHRbUkdCMzJJXSAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCX0lOVEVHRVIsICAgICBjb2xvclJlbmRlcmFibGU6IGZhbHNlLCB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzEyXSwgICAgICAgdHlwZTogW0lOVCQyXSwgfTtcbiAgICB0W1JHQkE4XSAgICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQkEsICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IHRydWUsICBieXRlc1BlckVsZW1lbnQ6IFs0XSwgICAgICAgIHR5cGU6IFtVTlNJR05FRF9CWVRFJDJdLCB9O1xuICAgIHRbU1JHQjhfQUxQSEE4XSAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCQSwgICAgICAgICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzRdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX0JZVEUkMl0sIH07XG4gICAgdFtSR0JBOF9TTk9STV0gICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JBLCAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogZmFsc2UsIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbNF0sICAgICAgICB0eXBlOiBbQllURSQyXSwgfTtcbiAgICB0W1JHQjVfQTFdICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQkEsICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IHRydWUsICBieXRlc1BlckVsZW1lbnQ6IFs0LCAyLCA0XSwgIHR5cGU6IFtVTlNJR05FRF9CWVRFJDIsIFVOU0lHTkVEX1NIT1JUXzVfNV81XzEkMSwgVU5TSUdORURfSU5UXzJfMTBfMTBfMTBfUkVWJDFdLCB9O1xuICAgIHRbUkdCQTRdICAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCQSwgICAgICAgICAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogdHJ1ZSwgIGJ5dGVzUGVyRWxlbWVudDogWzQsIDJdLCAgICAgdHlwZTogW1VOU0lHTkVEX0JZVEUkMiwgVU5TSUdORURfU0hPUlRfNF80XzRfNCQxXSwgfTtcbiAgICB0W1JHQjEwX0EyXSAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQkEsICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IHRydWUsICBieXRlc1BlckVsZW1lbnQ6IFs0XSwgICAgICAgIHR5cGU6IFtVTlNJR05FRF9JTlRfMl8xMF8xMF8xMF9SRVYkMV0sIH07XG4gICAgdFtSR0JBMTZGXSAgICAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JBLCAgICAgICAgICAgIGNvbG9yUmVuZGVyYWJsZTogZmFsc2UsIHRleHR1cmVGaWx0ZXJhYmxlOiB0cnVlLCAgYnl0ZXNQZXJFbGVtZW50OiBbMTYsIDhdLCAgICB0eXBlOiBbRkxPQVQkMiwgSEFMRl9GTE9BVCQxXSwgfTtcbiAgICB0W1JHQkEzMkZdICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQkEsICAgICAgICAgICAgY29sb3JSZW5kZXJhYmxlOiBmYWxzZSwgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFsxNl0sICAgICAgIHR5cGU6IFtGTE9BVCQyXSwgfTtcbiAgICB0W1JHQkE4VUldICAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQkFfSU5URUdFUiwgICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFs0XSwgICAgICAgIHR5cGU6IFtVTlNJR05FRF9CWVRFJDJdLCB9O1xuICAgIHRbUkdCQThJXSAgICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCQV9JTlRFR0VSLCAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzRdLCAgICAgICAgdHlwZTogW0JZVEUkMl0sIH07XG4gICAgdFtSR0IxMF9BMlVJXSAgICAgICAgID0geyB0ZXh0dXJlRm9ybWF0OiBSR0JBX0lOVEVHRVIsICAgIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbNF0sICAgICAgICB0eXBlOiBbVU5TSUdORURfSU5UXzJfMTBfMTBfMTBfUkVWJDFdLCB9O1xuICAgIHRbUkdCQTE2VUldICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCQV9JTlRFR0VSLCAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzhdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX1NIT1JUJDJdLCB9O1xuICAgIHRbUkdCQTE2SV0gICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCQV9JTlRFR0VSLCAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzhdLCAgICAgICAgdHlwZTogW1NIT1JUJDJdLCB9O1xuICAgIHRbUkdCQTMySV0gICAgICAgICAgICA9IHsgdGV4dHVyZUZvcm1hdDogUkdCQV9JTlRFR0VSLCAgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzE2XSwgICAgICAgdHlwZTogW0lOVCQyXSwgfTtcbiAgICB0W1JHQkEzMlVJXSAgICAgICAgICAgPSB7IHRleHR1cmVGb3JtYXQ6IFJHQkFfSU5URUdFUiwgICAgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFsxNl0sICAgICAgIHR5cGU6IFtVTlNJR05FRF9JTlQkMl0sIH07XG4gICAgLy8gU2l6ZWQgSW50ZXJuYWxcbiAgICB0W0RFUFRIX0NPTVBPTkVOVDE2XSAgPSB7IHRleHR1cmVGb3JtYXQ6IERFUFRIX0NPTVBPTkVOVCwgY29sb3JSZW5kZXJhYmxlOiB0cnVlLCAgdGV4dHVyZUZpbHRlcmFibGU6IGZhbHNlLCBieXRlc1BlckVsZW1lbnQ6IFsyLCA0XSwgICAgIHR5cGU6IFtVTlNJR05FRF9TSE9SVCQyLCBVTlNJR05FRF9JTlQkMl0sIH07XG4gICAgdFtERVBUSF9DT01QT05FTlQyNF0gID0geyB0ZXh0dXJlRm9ybWF0OiBERVBUSF9DT01QT05FTlQsIGNvbG9yUmVuZGVyYWJsZTogdHJ1ZSwgIHRleHR1cmVGaWx0ZXJhYmxlOiBmYWxzZSwgYnl0ZXNQZXJFbGVtZW50OiBbNF0sICAgICAgICB0eXBlOiBbVU5TSUdORURfSU5UJDJdLCB9O1xuICAgIHRbREVQVEhfQ09NUE9ORU5UMzJGXSA9IHsgdGV4dHVyZUZvcm1hdDogREVQVEhfQ09NUE9ORU5ULCBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzRdLCAgICAgICAgdHlwZTogW0ZMT0FUJDJdLCB9O1xuICAgIHRbREVQVEgyNF9TVEVOQ0lMOF0gICA9IHsgdGV4dHVyZUZvcm1hdDogREVQVEhfU1RFTkNJTCwgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzRdLCAgICAgICAgdHlwZTogW1VOU0lHTkVEX0lOVF8yNF84JDFdLCB9O1xuICAgIHRbREVQVEgzMkZfU1RFTkNJTDhdICA9IHsgdGV4dHVyZUZvcm1hdDogREVQVEhfU1RFTkNJTCwgICBjb2xvclJlbmRlcmFibGU6IHRydWUsICB0ZXh0dXJlRmlsdGVyYWJsZTogZmFsc2UsIGJ5dGVzUGVyRWxlbWVudDogWzRdLCAgICAgICAgdHlwZTogW0ZMT0FUXzMyX1VOU0lHTkVEX0lOVF8yNF84X1JFViQxXSwgfTtcblxuICAgIE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24oaW50ZXJuYWxGb3JtYXQpIHtcbiAgICAgIGNvbnN0IGluZm8gPSB0W2ludGVybmFsRm9ybWF0XTtcbiAgICAgIGluZm8uYnl0ZXNQZXJFbGVtZW50TWFwID0ge307XG4gICAgICBpbmZvLmJ5dGVzUGVyRWxlbWVudC5mb3JFYWNoKGZ1bmN0aW9uKGJ5dGVzUGVyRWxlbWVudCwgbmR4KSB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSBpbmZvLnR5cGVbbmR4XTtcbiAgICAgICAgaW5mby5ieXRlc1BlckVsZW1lbnRNYXBbdHlwZV0gPSBieXRlc1BlckVsZW1lbnQ7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBzX3RleHR1cmVJbnRlcm5hbEZvcm1hdEluZm8gPSB0O1xuICB9XG4gIHJldHVybiBzX3RleHR1cmVJbnRlcm5hbEZvcm1hdEluZm9baW50ZXJuYWxGb3JtYXRdO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIG51bWJlciBvZiBieXRlcyBwZXIgZWxlbWVudCBmb3IgYSBnaXZlbiBpbnRlcm5hbEZvcm1hdCAvIHR5cGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBpbnRlcm5hbEZvcm1hdCBUaGUgaW50ZXJuYWxGb3JtYXQgcGFyYW1ldGVyIGZyb20gdGV4SW1hZ2UyRCBldGMuLlxuICogQHBhcmFtIHtudW1iZXJ9IHR5cGUgVGhlIHR5cGUgcGFyYW1ldGVyIGZvciB0ZXhJbWFnZTJEIGV0Yy4uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IHRoZSBudW1iZXIgb2YgYnl0ZXMgcGVyIGVsZW1lbnQgZm9yIHRoZSBnaXZlbiBpbnRlcm5hbEZvcm1hdCwgdHlwZSBjb21ib1xuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3RleHR1cmVzXG4gKi9cbmZ1bmN0aW9uIGdldEJ5dGVzUGVyRWxlbWVudEZvckludGVybmFsRm9ybWF0KGludGVybmFsRm9ybWF0LCB0eXBlKSB7XG4gIGNvbnN0IGluZm8gPSBnZXRUZXh0dXJlSW50ZXJuYWxGb3JtYXRJbmZvKGludGVybmFsRm9ybWF0KTtcbiAgaWYgKCFpbmZvKSB7XG4gICAgdGhyb3cgXCJ1bmtub3duIGludGVybmFsIGZvcm1hdFwiO1xuICB9XG4gIGNvbnN0IGJ5dGVzUGVyRWxlbWVudCA9IGluZm8uYnl0ZXNQZXJFbGVtZW50TWFwW3R5cGVdO1xuICBpZiAoYnl0ZXNQZXJFbGVtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBcInVua25vd24gaW50ZXJuYWwgZm9ybWF0XCI7XG4gIH1cbiAgcmV0dXJuIGJ5dGVzUGVyRWxlbWVudDtcbn1cblxuLyoqXG4gKiBJbmZvIHJlbGF0ZWQgdG8gYSBzcGVjaWZpYyB0ZXh0dXJlIGludGVybmFsRm9ybWF0IGFzIHJldHVybmVkXG4gKiBmcm9tIHtAbGluayBtb2R1bGU6dHdnbC90ZXh0dXJlcy5nZXRGb3JtYXRBbmRUeXBlRm9ySW50ZXJuYWxGb3JtYXR9LlxuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFRleHR1cmVGb3JtYXRJbmZvXG4gKiBAcHJvcGVydHkge251bWJlcn0gZm9ybWF0IEZvcm1hdCB0byBwYXNzIHRvIHRleEltYWdlMkQgYW5kIHJlbGF0ZWQgZnVuY3Rpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gdHlwZSBUeXBlIHRvIHBhc3MgdG8gdGV4SW1hZ2UyRCBhbmQgcmVsYXRlZCBmdW5jdGlvbnNcbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90ZXh0dXJlc1xuICovXG5cbi8qKlxuICogR2V0cyB0aGUgZm9ybWF0IGFuZCB0eXBlIGZvciBhIGdpdmVuIGludGVybmFsRm9ybWF0XG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGludGVybmFsRm9ybWF0IFRoZSBpbnRlcm5hbCBmb3JtYXRcbiAqIEByZXR1cm4ge21vZHVsZTp0d2dsL3RleHR1cmVzLlRleHR1cmVGb3JtYXRJbmZvfSB0aGUgY29ycmVzcG9uZGluZyBmb3JtYXQgYW5kIHR5cGUsXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdGV4dHVyZXNcbiAqL1xuZnVuY3Rpb24gZ2V0Rm9ybWF0QW5kVHlwZUZvckludGVybmFsRm9ybWF0KGludGVybmFsRm9ybWF0KSB7XG4gIGNvbnN0IGluZm8gPSBnZXRUZXh0dXJlSW50ZXJuYWxGb3JtYXRJbmZvKGludGVybmFsRm9ybWF0KTtcbiAgaWYgKCFpbmZvKSB7XG4gICAgdGhyb3cgXCJ1bmtub3duIGludGVybmFsIGZvcm1hdFwiO1xuICB9XG4gIHJldHVybiB7XG4gICAgZm9ybWF0OiBpbmZvLnRleHR1cmVGb3JtYXQsXG4gICAgdHlwZTogaW5mby50eXBlWzBdLFxuICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB2YWx1ZSBpcyBwb3dlciBvZiAyXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgbnVtYmVyIHRvIGNoZWNrLlxuICogQHJldHVybiB0cnVlIGlmIHZhbHVlIGlzIHBvd2VyIG9mIDJcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGlzUG93ZXJPZjIodmFsdWUpIHtcbiAgcmV0dXJuICh2YWx1ZSAmICh2YWx1ZSAtIDEpKSA9PT0gMDtcbn1cblxuLyoqXG4gKiBHZXRzIHdoZXRoZXIgb3Igbm90IHdlIGNhbiBnZW5lcmF0ZSBtaXBzIGZvciB0aGUgZ2l2ZW5cbiAqIGludGVybmFsIGZvcm1hdC5cbiAqXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dFxuICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIFRoZSB3aWR0aCBwYXJhbWV0ZXIgZnJvbSB0ZXhJbWFnZTJEIGV0Yy4uXG4gKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IFRoZSBoZWlnaHQgcGFyYW1ldGVyIGZyb20gdGV4SW1hZ2UyRCBldGMuLlxuICogQHBhcmFtIHtudW1iZXJ9IGludGVybmFsRm9ybWF0IFRoZSBpbnRlcm5hbEZvcm1hdCBwYXJhbWV0ZXIgZnJvbSB0ZXhJbWFnZTJEIGV0Yy4uXG4gKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHdlIGNhbiBnZW5lcmF0ZSBtaXBzXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdGV4dHVyZXNcbiAqL1xuZnVuY3Rpb24gY2FuR2VuZXJhdGVNaXBtYXAoZ2wsIHdpZHRoLCBoZWlnaHQsIGludGVybmFsRm9ybWF0KSB7XG4gIGlmICghaXNXZWJHTDIoZ2wpKSB7XG4gICAgcmV0dXJuIGlzUG93ZXJPZjIod2lkdGgpICYmIGlzUG93ZXJPZjIoaGVpZ2h0KTtcbiAgfVxuICBjb25zdCBpbmZvID0gZ2V0VGV4dHVyZUludGVybmFsRm9ybWF0SW5mbyhpbnRlcm5hbEZvcm1hdCk7XG4gIGlmICghaW5mbykge1xuICAgIHRocm93IFwidW5rbm93biBpbnRlcm5hbCBmb3JtYXRcIjtcbiAgfVxuICByZXR1cm4gaW5mby5jb2xvclJlbmRlcmFibGUgJiYgaW5mby50ZXh0dXJlRmlsdGVyYWJsZTtcbn1cblxuLyoqXG4gKiBHZXRzIHdoZXRoZXIgb3Igbm90IHdlIGNhbiBnZW5lcmF0ZSBtaXBzIGZvciB0aGUgZ2l2ZW4gZm9ybWF0XG4gKiBAcGFyYW0ge251bWJlcn0gaW50ZXJuYWxGb3JtYXQgVGhlIGludGVybmFsRm9ybWF0IHBhcmFtZXRlciBmcm9tIHRleEltYWdlMkQgZXRjLi5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgd2UgY2FuIGdlbmVyYXRlIG1pcHNcbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90ZXh0dXJlc1xuICovXG5mdW5jdGlvbiBjYW5GaWx0ZXIoaW50ZXJuYWxGb3JtYXQpIHtcbiAgY29uc3QgaW5mbyA9IGdldFRleHR1cmVJbnRlcm5hbEZvcm1hdEluZm8oaW50ZXJuYWxGb3JtYXQpO1xuICBpZiAoIWluZm8pIHtcbiAgICB0aHJvdyBcInVua25vd24gaW50ZXJuYWwgZm9ybWF0XCI7XG4gIH1cbiAgcmV0dXJuIGluZm8udGV4dHVyZUZpbHRlcmFibGU7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbnVtYmVyIG9mIGNvbXBvbmVudHMgZm9yIGEgZ2l2ZW4gaW1hZ2UgZm9ybWF0LlxuICogQHBhcmFtIHtudW1iZXJ9IGZvcm1hdCB0aGUgZm9ybWF0LlxuICogQHJldHVybiB7bnVtYmVyfSB0aGUgbnVtYmVyIG9mIGNvbXBvbmVudHMgZm9yIHRoZSBmb3JtYXQuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdGV4dHVyZXNcbiAqL1xuZnVuY3Rpb24gZ2V0TnVtQ29tcG9uZW50c0ZvckZvcm1hdChmb3JtYXQpIHtcbiAgY29uc3QgaW5mbyA9IGZvcm1hdEluZm9bZm9ybWF0XTtcbiAgaWYgKCFpbmZvKSB7XG4gICAgdGhyb3cgXCJ1bmtub3duIGZvcm1hdDogXCIgKyBmb3JtYXQ7XG4gIH1cbiAgcmV0dXJuIGluZm8ubnVtQ29sb3JDb21wb25lbnRzO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIHRleHR1cmUgdHlwZSBmb3IgYSBnaXZlbiBhcnJheSB0eXBlLlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIHRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHRcbiAqIEByZXR1cm4ge251bWJlcn0gdGhlIGdsIHRleHR1cmUgdHlwZVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZ2V0VGV4dHVyZVR5cGVGb3JBcnJheVR5cGUoZ2wsIHNyYywgZGVmYXVsdFR5cGUpIHtcbiAgaWYgKGlzQXJyYXlCdWZmZXIkMShzcmMpKSB7XG4gICAgcmV0dXJuIGdldEdMVHlwZUZvclR5cGVkQXJyYXkoc3JjKTtcbiAgfVxuICByZXR1cm4gZGVmYXVsdFR5cGUgfHwgVU5TSUdORURfQllURSQyO1xufVxuXG5mdW5jdGlvbiBndWVzc0RpbWVuc2lvbnMoZ2wsIHRhcmdldCwgd2lkdGgsIGhlaWdodCwgbnVtRWxlbWVudHMpIHtcbiAgaWYgKG51bUVsZW1lbnRzICUgMSAhPT0gMCkge1xuICAgIHRocm93IFwiY2FuJ3QgZ3Vlc3MgZGltZW5zaW9uc1wiO1xuICB9XG4gIGlmICghd2lkdGggJiYgIWhlaWdodCkge1xuICAgIGNvbnN0IHNpemUgPSBNYXRoLnNxcnQobnVtRWxlbWVudHMgLyAodGFyZ2V0ID09PSBURVhUVVJFX0NVQkVfTUFQID8gNiA6IDEpKTtcbiAgICBpZiAoc2l6ZSAlIDEgPT09IDApIHtcbiAgICAgIHdpZHRoID0gc2l6ZTtcbiAgICAgIGhlaWdodCA9IHNpemU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpZHRoID0gbnVtRWxlbWVudHM7XG4gICAgICBoZWlnaHQgPSAxO1xuICAgIH1cbiAgfSBlbHNlIGlmICghaGVpZ2h0KSB7XG4gICAgaGVpZ2h0ID0gbnVtRWxlbWVudHMgLyB3aWR0aDtcbiAgICBpZiAoaGVpZ2h0ICUgMSkge1xuICAgICAgdGhyb3cgXCJjYW4ndCBndWVzcyBkaW1lbnNpb25zXCI7XG4gICAgfVxuICB9IGVsc2UgaWYgKCF3aWR0aCkge1xuICAgIHdpZHRoID0gbnVtRWxlbWVudHMgLyBoZWlnaHQ7XG4gICAgaWYgKHdpZHRoICUgMSkge1xuICAgICAgdGhyb3cgXCJjYW4ndCBndWVzcyBkaW1lbnNpb25zXCI7XG4gICAgfVxuICB9XG4gIHJldHVybiB7XG4gICAgd2lkdGg6IHdpZHRoLFxuICAgIGhlaWdodDogaGVpZ2h0LFxuICB9O1xufVxuXG4vKipcbiAqIFNldHMgdGhlIGRlZmF1bHQgdGV4dHVyZSBjb2xvci5cbiAqXG4gKiBUaGUgZGVmYXVsdCB0ZXh0dXJlIGNvbG9yIGlzIHVzZWQgd2hlbiBsb2FkaW5nIHRleHR1cmVzIGZyb21cbiAqIHVybHMuIEJlY2F1c2UgdGhlIFVSTCB3aWxsIGJlIGxvYWRlZCBhc3luYyB3ZSdkIGxpa2UgdG8gYmVcbiAqIGFibGUgdG8gdXNlIHRoZSB0ZXh0dXJlIGltbWVkaWF0ZWx5LiBCeSBwdXR0aW5nIGEgMXgxIHBpeGVsXG4gKiBjb2xvciBpbiB0aGUgdGV4dHVyZSB3ZSBjYW4gc3RhcnQgdXNpbmcgdGhlIHRleHR1cmUgYmVmb3JlXG4gKiB0aGUgVVJMIGhhcyBsb2FkZWQuXG4gKlxuICogQHBhcmFtIHtudW1iZXJbXX0gY29sb3IgQXJyYXkgb2YgNCB2YWx1ZXMgaW4gdGhlIHJhbmdlIDAgdG8gMVxuICogQGRlcHJlY2F0ZWQgc2VlIHtAbGluayBtb2R1bGU6dHdnbC5zZXREZWZhdWx0c31cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90ZXh0dXJlc1xuICovXG5mdW5jdGlvbiBzZXREZWZhdWx0VGV4dHVyZUNvbG9yKGNvbG9yKSB7XG4gIGRlZmF1bHRzJDEudGV4dHVyZUNvbG9yID0gbmV3IFVpbnQ4QXJyYXkoW2NvbG9yWzBdICogMjU1LCBjb2xvclsxXSAqIDI1NSwgY29sb3JbMl0gKiAyNTUsIGNvbG9yWzNdICogMjU1XSk7XG59XG5cbmZ1bmN0aW9uIHNldERlZmF1bHRzJDEobmV3RGVmYXVsdHMpIHtcbiAgY29weUV4aXN0aW5nUHJvcGVydGllcyhuZXdEZWZhdWx0cywgZGVmYXVsdHMkMSk7XG4gIGlmIChuZXdEZWZhdWx0cy50ZXh0dXJlQ29sb3IpIHtcbiAgICBzZXREZWZhdWx0VGV4dHVyZUNvbG9yKG5ld0RlZmF1bHRzLnRleHR1cmVDb2xvcik7XG4gIH1cbn1cblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHRoZSBzb3VyY2UgZm9yIGEgdGV4dHVyZS5cbiAqIEBjYWxsYmFjayBUZXh0dXJlRnVuY1xuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIEEgV2ViR0xSZW5kZXJpbmdDb250ZXh0XG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsLlRleHR1cmVPcHRpb25zfSBvcHRpb25zIHRoZSB0ZXh0dXJlIG9wdGlvbnNcbiAqIEByZXR1cm4geyp9IFJldHVybnMgYW55IG9mIHRoZSB0aGluZ3MgZG9jdW1lbnRlZCBmb3IgYHNyY2AgZm9yIHtAbGluayBtb2R1bGU6dHdnbC5UZXh0dXJlT3B0aW9uc30uXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2xcbiAqL1xuXG4vKipcbiAqIFRleHR1cmUgb3B0aW9ucyBwYXNzZWQgdG8gbW9zdCB0ZXh0dXJlIGZ1bmN0aW9ucy4gRWFjaCBmdW5jdGlvbiB3aWxsIHVzZSB3aGF0ZXZlciBvcHRpb25zXG4gKiBhcmUgYXBwcm9wcmlhdGUgZm9yIGl0cyBuZWVkcy4gVGhpcyBsZXRzIHlvdSBwYXNzIHRoZSBzYW1lIG9wdGlvbnMgdG8gYWxsIGZ1bmN0aW9ucy5cbiAqXG4gKiBOb3RlOiBBIGBUZXhJbWFnZVNvdXJjZWAgaXMgZGVmaW5lZCBpbiB0aGUgV2ViR0wgc3BlYyBhcyBhIGBIVE1MSW1hZ2VFbGVtZW50YCwgYEhUTUxWaWRlb0VsZW1lbnRgLFxuICogYEhUTUxDYW52YXNFbGVtZW50YCwgYEltYWdlQml0bWFwYCwgb3IgYEltYWdlRGF0YWAuXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gVGV4dHVyZU9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGFyZ2V0XSB0aGUgdHlwZSBvZiB0ZXh0dXJlIGBnbC5URVhUVVJFXzJEYCBvciBgZ2wuVEVYVFVSRV9DVUJFX01BUGAuIERlZmF1bHRzIHRvIGBnbC5URVhUVVJFXzJEYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbGV2ZWxdIHRoZSBtaXAgbGV2ZWwgdG8gYWZmZWN0LiBEZWZhdWx0cyB0byAwLiBOb3RlLCBpZiBzZXQgYXV0byB3aWxsIGJlIGNvbnNpZGVyZWQgZmFsc2UgdW5sZXNzIGV4cGxpY2l0bHkgc2V0IHRvIHRydWUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3dpZHRoXSB0aGUgd2lkdGggb2YgdGhlIHRleHR1cmUuIE9ubHkgdXNlZCBpZiBzcmMgaXMgYW4gYXJyYXkgb3IgdHlwZWQgYXJyYXkgb3IgbnVsbC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbaGVpZ2h0XSB0aGUgaGVpZ2h0IG9mIGEgdGV4dHVyZS4gT25seSB1c2VkIGlmIHNyYyBpcyBhbiBhcnJheSBvciB0eXBlZCBhcnJheSBvciBudWxsLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkZXB0aF0gdGhlIGRlcHRoIG9mIGEgdGV4dHVyZS4gT25seSB1c2VkIGlmIHNyYyBpcyBhbiBhcnJheSBvciB0eXBlIGFycmF5IG9yIG51bGwgYW5kIHRhcmdldCBpcyBgVEVYVFVSRV8zRGAgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5dIHRoZSBtaW4gZmlsdGVyIHNldHRpbmcgKGVnLiBgZ2wuTElORUFSYCkuIERlZmF1bHRzIHRvIGBnbC5ORUFSRVNUX01JUE1BUF9MSU5FQVJgXG4gKiAgICAgb3IgaWYgdGV4dHVyZSBpcyBub3QgYSBwb3dlciBvZiAyIG9uIGJvdGggZGltZW5zaW9ucyB0aGVuIGRlZmF1bHRzIHRvIGBnbC5MSU5FQVJgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYWddIHRoZSBtYWcgZmlsdGVyIHNldHRpbmcgKGVnLiBgZ2wuTElORUFSYCkuIERlZmF1bHRzIHRvIGBnbC5MSU5FQVJgXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pbk1hZ10gYm90aCB0aGUgbWluIGFuZCBtYWcgZmlsdGVyIHNldHRpbmdzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtpbnRlcm5hbEZvcm1hdF0gaW50ZXJuYWwgZm9ybWF0IGZvciB0ZXh0dXJlLiBEZWZhdWx0cyB0byBgZ2wuUkdCQWBcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZm9ybWF0XSBmb3JtYXQgZm9yIHRleHR1cmUuIERlZmF1bHRzIHRvIGBnbC5SR0JBYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHlwZV0gdHlwZSBmb3IgdGV4dHVyZS4gRGVmYXVsdHMgdG8gYGdsLlVOU0lHTkVEX0JZVEVgIHVubGVzcyBgc3JjYCBpcyBBcnJheUJ1ZmZlclZpZXcuIElmIGBzcmNgXG4gKiAgICAgaXMgQXJyYXlCdWZmZXJWaWV3IGRlZmF1bHRzIHRvIHR5cGUgdGhhdCBtYXRjaGVzIEFycmF5QnVmZmVyVmlldyB0eXBlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt3cmFwXSBUZXh0dXJlIHdyYXBwaW5nIGZvciBib3RoIFMgYW5kIFQgKGFuZCBSIGlmIFRFWFRVUkVfM0Qgb3IgV2ViR0xTYW1wbGVyKS4gRGVmYXVsdHMgdG8gYGdsLlJFUEVBVGAgZm9yIDJEIHVubGVzcyBzcmMgaXMgV2ViR0wxIGFuZCBzcmMgbm90IG5wb3QgYW5kIGBnbC5DTEFNUF9UT19FREdFYCBmb3IgY3ViZVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt3cmFwU10gVGV4dHVyZSB3cmFwcGluZyBmb3IgUy4gRGVmYXVsdHMgdG8gYGdsLlJFUEVBVGAgYW5kIGBnbC5DTEFNUF9UT19FREdFYCBmb3IgY3ViZS4gSWYgc2V0IHRha2VzIHByZWNlZGVuY2Ugb3ZlciBgd3JhcGAuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3dyYXBUXSBUZXh0dXJlIHdyYXBwaW5nIGZvciBULiBEZWZhdWx0cyB0byBgZ2wuUkVQRUFUYCBhbmQgYGdsLkNMQU1QX1RPX0VER0VgIGZvciBjdWJlLiBJZiBzZXQgdGFrZXMgcHJlY2VkZW5jZSBvdmVyIGB3cmFwYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbd3JhcFJdIFRleHR1cmUgd3JhcHBpbmcgZm9yIFIuIERlZmF1bHRzIHRvIGBnbC5SRVBFQVRgIGFuZCBgZ2wuQ0xBTVBfVE9fRURHRWAgZm9yIGN1YmUuIElmIHNldCB0YWtlcyBwcmVjZWRlbmNlIG92ZXIgYHdyYXBgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5Mb2RdIFRFWFRVUkVfTUlOX0xPRCBzZXR0aW5nXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heExvZF0gVEVYVFVSRV9NQVhfTE9EIHNldHRpbmdcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbYmFzZUxldmVsXSBURVhUVVJFX0JBU0VfTEVWRUwgc2V0dGluZ1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhMZXZlbF0gVEVYVFVSRV9NQVhfTEVWRUwgc2V0dGluZ1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFt1bnBhY2tBbGlnbm1lbnRdIFRoZSBgZ2wuVU5QQUNLX0FMSUdOTUVOVGAgdXNlZCB3aGVuIHVwbG9hZGluZyBhbiBhcnJheS4gRGVmYXVsdHMgdG8gMS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyW118QXJyYXlCdWZmZXJWaWV3fSBbY29sb3JdIENvbG9yIHRvIGluaXRpYWxpemUgdGhpcyB0ZXh0dXJlIHdpdGggaWYgbG9hZGluZyBhbiBpbWFnZSBhc3luY2hyb25vdXNseS5cbiAqICAgICBUaGUgZGVmYXVsdCB1c2UgYSBibHVlIDF4MSBwaXhlbCB0ZXh0dXJlLiBZb3UgY2FuIHNldCBhbm90aGVyIGRlZmF1bHQgYnkgY2FsbGluZyBgdHdnbC5zZXREZWZhdWx0c2BcbiAqICAgICBvciB5b3UgY2FuIHNldCBhbiBpbmRpdmlkdWFsIHRleHR1cmUncyBpbml0aWFsIGNvbG9yIGJ5IHNldHRpbmcgdGhpcyBwcm9wZXJ0eS4gRXhhbXBsZTogYFsxLCAuNSwgLjUsIDFdYCA9IHBpbmtcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcHJlbXVsdGlwbHlBbHBoYV0gV2hldGhlciBvciBub3QgdG8gcHJlbXVsdGlwbHkgYWxwaGEuIERlZmF1bHRzIHRvIHdoYXRldmVyIHRoZSBjdXJyZW50IHNldHRpbmcgaXMuXG4gKiAgICAgVGhpcyBsZXRzIHlvdSBzZXQgaXQgb25jZSBiZWZvcmUgY2FsbGluZyBgdHdnbC5jcmVhdGVUZXh0dXJlYCBvciBgdHdnbC5jcmVhdGVUZXh0dXJlc2AgYW5kIG9ubHkgb3ZlcnJpZGVcbiAqICAgICB0aGUgY3VycmVudCBzZXR0aW5nIGZvciBzcGVjaWZpYyB0ZXh0dXJlcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZmxpcFldIFdoZXRoZXIgb3Igbm90IHRvIGZsaXAgdGhlIHRleHR1cmUgdmVydGljYWxseSBvbiB1cGxvYWQuIERlZmF1bHRzIHRvIHdoYXRldmVyIHRoZSBjdXJyZW50IHNldHRpbmcgaXMuXG4gKiAgICAgVGhpcyBsZXRzIHlvdSBzZXQgaXQgb25jZSBiZWZvcmUgY2FsbGluZyBgdHdnbC5jcmVhdGVUZXh0dXJlYCBvciBgdHdnbC5jcmVhdGVUZXh0dXJlc2AgYW5kIG9ubHkgb3ZlcnJpZGVcbiAqICAgICB0aGUgY3VycmVudCBzZXR0aW5nIGZvciBzcGVjaWZpYyB0ZXh0dXJlcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY29sb3JzcGFjZUNvbnZlcnNpb25dIFdoZXRoZXIgb3Igbm90IHRvIGxldCB0aGUgYnJvd3NlciBkbyBjb2xvcnNwYWNlIGNvbnZlcnNpb24gb2YgdGhlIHRleHR1cmUgb24gdXBsb2FkLiBEZWZhdWx0cyB0byB3aGF0ZXZlciB0aGUgY3VycmVudCBzZXR0aW5nIGlzLlxuICogICAgIFRoaXMgbGV0cyB5b3Ugc2V0IGl0IG9uY2UgYmVmb3JlIGNhbGxpbmcgYHR3Z2wuY3JlYXRlVGV4dHVyZWAgb3IgYHR3Z2wuY3JlYXRlVGV4dHVyZXNgIGFuZCBvbmx5IG92ZXJyaWRlXG4gKiAgICAgdGhlIGN1cnJlbnQgc2V0dGluZyBmb3Igc3BlY2lmaWMgdGV4dHVyZXMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdXRvXSBJZiBgdW5kZWZpbmVkYCBvciBgdHJ1ZWAsIGluIFdlYkdMMSwgdGV4dHVyZSBmaWx0ZXJpbmcgaXMgc2V0IGF1dG9tYXRpY2FsbHkgZm9yIG5vbi1wb3dlciBvZiAyIGltYWdlcyBhbmRcbiAqICAgIG1pcHMgYXJlIGdlbmVyYXRlZCBmb3IgcG93ZXIgb2YgMiBpbWFnZXMuIEluIFdlYkdMMiBtaXBzIGFyZSBnZW5lcmF0ZWQgaWYgdGhleSBjYW4gYmUuIE5vdGU6IGlmIGBsZXZlbGAgaXMgc2V0IGFib3ZlXG4gKiAgICB0aGVuIHRoZW4gYGF1dG9gIGlzIGFzc3VtZWQgdG8gYmUgYGZhbHNlYCB1bmxlc3MgZXhwbGljaXR5IHNldCB0byBgdHJ1ZWAuXG4gKiBAcHJvcGVydHkge251bWJlcltdfSBbY3ViZUZhY2VPcmRlcl0gVGhlIG9yZGVyIHRoYXQgY3ViZSBmYWNlcyBhcmUgcHVsbGVkIG91dCBvZiBhbiBpbWcgb3Igc2V0IG9mIGltYWdlcy4gVGhlIGRlZmF1bHQgaXNcbiAqXG4gKiAgICAgW2dsLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCxcbiAqICAgICAgZ2wuVEVYVFVSRV9DVUJFX01BUF9ORUdBVElWRV9YLFxuICogICAgICBnbC5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1ksXG4gKiAgICAgIGdsLlRFWFRVUkVfQ1VCRV9NQVBfTkVHQVRJVkVfWSxcbiAqICAgICAgZ2wuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9aLFxuICogICAgICBnbC5URVhUVVJFX0NVQkVfTUFQX05FR0FUSVZFX1pdXG4gKlxuICogQHByb3BlcnR5IHsobnVtYmVyW118QXJyYXlCdWZmZXJWaWV3fFRleEltYWdlU291cmNlfFRleEltYWdlU291cmNlW118c3RyaW5nfHN0cmluZ1tdfG1vZHVsZTp0d2dsLlRleHR1cmVGdW5jKX0gW3NyY10gc291cmNlIGZvciB0ZXh0dXJlXG4gKlxuICogICAgSWYgYHN0cmluZ2AgdGhlbiBpdCdzIGFzc3VtZWQgdG8gYmUgYSBVUkwgdG8gYW4gaW1hZ2UuIFRoZSBpbWFnZSB3aWxsIGJlIGRvd25sb2FkZWQgYXN5bmMuIEEgdXNhYmxlXG4gKiAgICAxeDEgcGl4ZWwgdGV4dHVyZSB3aWxsIGJlIHJldHVybmVkIGltbWVkaWF0ZWx5LiBUaGUgdGV4dHVyZSB3aWxsIGJlIHVwZGF0ZWQgb25jZSB0aGUgaW1hZ2UgaGFzIGRvd25sb2FkZWQuXG4gKiAgICBJZiBgdGFyZ2V0YCBpcyBgZ2wuVEVYVFVSRV9DVUJFX01BUGAgd2lsbCBhdHRlbXB0IHRvIGRpdmlkZSBpbWFnZSBpbnRvIDYgc3F1YXJlIHBpZWNlcy4gMXg2LCA2eDEsIDN4MiwgMngzLlxuICogICAgVGhlIHBpZWNlcyB3aWxsIGJlIHVwbG9hZGVkIGluIGBjdWJlRmFjZU9yZGVyYFxuICpcbiAqICAgIElmIGBzdHJpbmdbXWAgb3IgYFRleEltYWdlU291cmNlW11gIGFuZCB0YXJnZXQgaXMgYGdsLlRFWFRVUkVfQ1VCRV9NQVBgIHRoZW4gaXQgbXVzdCBoYXZlIDYgZW50cmllcywgb25lIGZvciBlYWNoIGZhY2Ugb2YgYSBjdWJlIG1hcC5cbiAqXG4gKiAgICBJZiBgc3RyaW5nW11gIG9yIGBUZXhJbWFnZVNvdXJjZVtdYCBhbmQgdGFyZ2V0IGlzIGBnbC5URVhUVVJFXzJEX0FSUkFZYCB0aGVuIGVhY2ggZW50cnkgaXMgYSBzbGljZSBvZiB0aGUgYSAyZCBhcnJheSB0ZXh0dXJlXG4gKiAgICBhbmQgd2lsbCBiZSBzY2FsZWQgdG8gdGhlIHNwZWNpZmllZCB3aWR0aCBhbmQgaGVpZ2h0IE9SIHRvIHRoZSBzaXplIG9mIHRoZSBmaXJzdCBpbWFnZSB0aGF0IGxvYWRzLlxuICpcbiAqICAgIElmIGBUZXhJbWFnZVNvdXJjZWAgdGhlbiBpdCB3aWwgYmUgdXNlZCBpbW1lZGlhdGVseSB0byBjcmVhdGUgdGhlIGNvbnRlbnRzIG9mIHRoZSB0ZXh0dXJlLiBFeGFtcGxlcyBgSFRNTEltYWdlRWxlbWVudGAsXG4gKiAgICBgSFRNTENhbnZhc0VsZW1lbnRgLCBgSFRNTFZpZGVvRWxlbWVudGAuXG4gKlxuICogICAgSWYgYG51bWJlcltdYCBvciBgQXJyYXlCdWZmZXJWaWV3YCBpdCdzIGFzc3VtZWQgdG8gYmUgZGF0YSBmb3IgYSB0ZXh0dXJlLiBJZiBgd2lkdGhgIG9yIGBoZWlnaHRgIGlzXG4gKiAgICBub3Qgc3BlY2lmaWVkIGl0IGlzIGd1ZXNzZWQgYXMgZm9sbG93cy4gRmlyc3QgdGhlIG51bWJlciBvZiBlbGVtZW50cyBpcyBjb21wdXRlZCBieSBgc3JjLmxlbmd0aCAvIG51bUNvbXBvbmVudHNgXG4gKiAgICB3aGVyZSBgbnVtQ29tcG9uZW50c2AgaXMgZGVyaXZlZCBmcm9tIGBmb3JtYXRgLiBJZiBgdGFyZ2V0YCBpcyBgZ2wuVEVYVFVSRV9DVUJFX01BUGAgdGhlbiBgbnVtRWxlbWVudHNgIGlzIGRpdmlkZWRcbiAqICAgIGJ5IDYuIFRoZW5cbiAqXG4gKiAgICAqICAgSWYgbmVpdGhlciBgd2lkdGhgIG5vciBgaGVpZ2h0YCBhcmUgc3BlY2lmaWVkIGFuZCBgc3FydChudW1FbGVtZW50cylgIGlzIGFuIGludGVnZXIgdGhlbiB3aWR0aCBhbmQgaGVpZ2h0XG4gKiAgICAgICAgYXJlIHNldCB0byBgc3FydChudW1FbGVtZW50cylgLiBPdGhlcndpc2UgYHdpZHRoID0gbnVtRWxlbWVudHNgIGFuZCBgaGVpZ2h0ID0gMWAuXG4gKlxuICogICAgKiAgIElmIG9ubHkgb25lIG9mIGB3aWR0aGAgb3IgYGhlaWdodGAgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIG90aGVyIGVxdWFscyBgbnVtRWxlbWVudHMgLyBzcGVjaWZpZWREaW1lbnNpb25gLlxuICpcbiAqIElmIGBudW1iZXJbXWAgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYHR5cGVgLlxuICpcbiAqIElmIGBzcmNgIGlzIGEgZnVuY3Rpb24gaXQgd2lsbCBiZSBjYWxsZWQgd2l0aCBhIGBXZWJHTFJlbmRlcmluZ0NvbnRleHRgIGFuZCB0aGVzZSBvcHRpb25zLlxuICogV2hhdGV2ZXIgaXQgcmV0dXJucyBpcyBzdWJqZWN0IHRvIHRoZXNlIHJ1bGVzLiBTbyBpdCBjYW4gcmV0dXJuIGEgc3RyaW5nIHVybCwgYW4gYEhUTUxFbGVtZW50YFxuICogYW4gYXJyYXkgZXRjLi4uXG4gKlxuICogSWYgYHNyY2AgaXMgdW5kZWZpbmVkIHRoZW4gYW4gZW1wdHkgdGV4dHVyZSB3aWxsIGJlIGNyZWF0ZWQgb2Ygc2l6ZSBgd2lkdGhgIGJ5IGBoZWlnaHRgLlxuICpcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY3Jvc3NPcmlnaW5dIFdoYXQgdG8gc2V0IHRoZSBjcm9zc09yaWdpbiBwcm9wZXJ0eSBvZiBpbWFnZXMgd2hlbiB0aGV5IGFyZSBkb3dubG9hZGVkLlxuICogICAgZGVmYXVsdDogdW5kZWZpbmVkLiBBbHNvIHNlZSB7QGxpbmsgbW9kdWxlOnR3Z2wuc2V0RGVmYXVsdHN9LlxuICpcbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbFxuICovXG5cbi8qKlxuICogU2V0cyBhbnkgcGFja2luZyBzdGF0ZSB0aGF0IHdpbGwgYmUgc2V0IGJhc2VkIG9uIHRoZSBvcHRpb25zLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC5UZXh0dXJlT3B0aW9uc30gb3B0aW9ucyBBIFRleHR1cmVPcHRpb25zIG9iamVjdCB3aXRoIHdoYXRldmVyIHBhcmFtZXRlcnMgeW91IHdhbnQgc2V0LlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIHRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHRcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHNldFBhY2tTdGF0ZShnbCwgb3B0aW9ucykge1xuICBpZiAob3B0aW9ucy5jb2xvcnNwYWNlQ29udmVyc2lvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZ2wucGl4ZWxTdG9yZWkoVU5QQUNLX0NPTE9SU1BBQ0VfQ09OVkVSU0lPTl9XRUJHTCwgb3B0aW9ucy5jb2xvcnNwYWNlQ29udmVyc2lvbik7XG4gIH1cbiAgaWYgKG9wdGlvbnMucHJlbXVsdGlwbHlBbHBoYSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZ2wucGl4ZWxTdG9yZWkoVU5QQUNLX1BSRU1VTFRJUExZX0FMUEhBX1dFQkdMLCBvcHRpb25zLnByZW11bHRpcGx5QWxwaGEpO1xuICB9XG4gIGlmIChvcHRpb25zLmZsaXBZICE9PSB1bmRlZmluZWQpIHtcbiAgICBnbC5waXhlbFN0b3JlaShVTlBBQ0tfRkxJUF9ZX1dFQkdMLCBvcHRpb25zLmZsaXBZKTtcbiAgfVxufVxuXG4vKipcbiAqIFNldCBza2lwIHN0YXRlIHRvIGRlZmF1bHRzXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc2V0U2tpcFN0YXRlVG9EZWZhdWx0KGdsKSB7XG4gIGdsLnBpeGVsU3RvcmVpKFVOUEFDS19BTElHTk1FTlQsIDQpO1xuICBpZiAoaXNXZWJHTDIoZ2wpKSB7XG4gICAgZ2wucGl4ZWxTdG9yZWkoVU5QQUNLX1JPV19MRU5HVEgsIDApO1xuICAgIGdsLnBpeGVsU3RvcmVpKFVOUEFDS19JTUFHRV9IRUlHSFQsIDApO1xuICAgIGdsLnBpeGVsU3RvcmVpKFVOUEFDS19TS0lQX1BJWEVMUywgMCk7XG4gICAgZ2wucGl4ZWxTdG9yZWkoVU5QQUNLX1NLSVBfUk9XUywgMCk7XG4gICAgZ2wucGl4ZWxTdG9yZWkoVU5QQUNLX1NLSVBfSU1BR0VTLCAwKTtcbiAgfVxufVxuXG4vKipcbiAqIFNldHMgdGhlIHBhcmFtZXRlcnMgb2YgYSB0ZXh0dXJlIG9yIHNhbXBsZXJcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0XG4gKiBAcGFyYW0ge251bWJlcnxXZWJHTFNhbXBsZXJ9IHRhcmdldCB0ZXh0dXJlIHRhcmdldCBvciBzYW1wbGVyXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IHBhcmFtZXRlcmlGbiB0ZXhQYXJhbWV0ZXJpIG9yIHNhbXBsZXJQYXJhbWV0ZXJpIGZuXG4gKiBAcGFyYW0ge1dlYkdMVGV4dHVyZX0gdGV4IHRoZSBXZWJHTFRleHR1cmUgdG8gc2V0IHBhcmFtZXRlcnMgZm9yXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsLlRleHR1cmVPcHRpb25zfSBvcHRpb25zIEEgVGV4dHVyZU9wdGlvbnMgb2JqZWN0IHdpdGggd2hhdGV2ZXIgcGFyYW1ldGVycyB5b3Ugd2FudCBzZXQuXG4gKiAgIFRoaXMgaXMgb2Z0ZW4gdGhlIHNhbWUgb3B0aW9ucyB5b3UgcGFzc2VkIGluIHdoZW4geW91IGNyZWF0ZWQgdGhlIHRleHR1cmUuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzZXRUZXh0dXJlU2FtcGxlclBhcmFtZXRlcnMoZ2wsIHRhcmdldCwgcGFyYW1ldGVyaUZuLCBvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zLm1pbk1hZykge1xuICAgIHBhcmFtZXRlcmlGbi5jYWxsKGdsLCB0YXJnZXQsIFRFWFRVUkVfTUlOX0ZJTFRFUiwgb3B0aW9ucy5taW5NYWcpO1xuICAgIHBhcmFtZXRlcmlGbi5jYWxsKGdsLCB0YXJnZXQsIFRFWFRVUkVfTUFHX0ZJTFRFUiwgb3B0aW9ucy5taW5NYWcpO1xuICB9XG4gIGlmIChvcHRpb25zLm1pbikge1xuICAgIHBhcmFtZXRlcmlGbi5jYWxsKGdsLCB0YXJnZXQsIFRFWFRVUkVfTUlOX0ZJTFRFUiwgb3B0aW9ucy5taW4pO1xuICB9XG4gIGlmIChvcHRpb25zLm1hZykge1xuICAgIHBhcmFtZXRlcmlGbi5jYWxsKGdsLCB0YXJnZXQsIFRFWFRVUkVfTUFHX0ZJTFRFUiwgb3B0aW9ucy5tYWcpO1xuICB9XG4gIGlmIChvcHRpb25zLndyYXApIHtcbiAgICBwYXJhbWV0ZXJpRm4uY2FsbChnbCwgdGFyZ2V0LCBURVhUVVJFX1dSQVBfUywgb3B0aW9ucy53cmFwKTtcbiAgICBwYXJhbWV0ZXJpRm4uY2FsbChnbCwgdGFyZ2V0LCBURVhUVVJFX1dSQVBfVCwgb3B0aW9ucy53cmFwKTtcbiAgICBpZiAodGFyZ2V0ID09PSBURVhUVVJFXzNEIHx8IGlzU2FtcGxlcihnbCwgdGFyZ2V0KSkge1xuICAgICAgcGFyYW1ldGVyaUZuLmNhbGwoZ2wsIHRhcmdldCwgVEVYVFVSRV9XUkFQX1IsIG9wdGlvbnMud3JhcCk7XG4gICAgfVxuICB9XG4gIGlmIChvcHRpb25zLndyYXBSKSB7XG4gICAgcGFyYW1ldGVyaUZuLmNhbGwoZ2wsIHRhcmdldCwgVEVYVFVSRV9XUkFQX1IsIG9wdGlvbnMud3JhcFIpO1xuICB9XG4gIGlmIChvcHRpb25zLndyYXBTKSB7XG4gICAgcGFyYW1ldGVyaUZuLmNhbGwoZ2wsIHRhcmdldCwgVEVYVFVSRV9XUkFQX1MsIG9wdGlvbnMud3JhcFMpO1xuICB9XG4gIGlmIChvcHRpb25zLndyYXBUKSB7XG4gICAgcGFyYW1ldGVyaUZuLmNhbGwoZ2wsIHRhcmdldCwgVEVYVFVSRV9XUkFQX1QsIG9wdGlvbnMud3JhcFQpO1xuICB9XG4gIGlmIChvcHRpb25zLm1pbkxvZCkge1xuICAgIHBhcmFtZXRlcmlGbi5jYWxsKGdsLCB0YXJnZXQsIFRFWFRVUkVfTUlOX0xPRCwgb3B0aW9ucy5taW5Mb2QpO1xuICB9XG4gIGlmIChvcHRpb25zLm1heExvZCkge1xuICAgIHBhcmFtZXRlcmlGbi5jYWxsKGdsLCB0YXJnZXQsIFRFWFRVUkVfTUFYX0xPRCwgb3B0aW9ucy5tYXhMb2QpO1xuICB9XG4gIGlmIChvcHRpb25zLmJhc2VMZXZlbCkge1xuICAgIHBhcmFtZXRlcmlGbi5jYWxsKGdsLCB0YXJnZXQsIFRFWFRVUkVfQkFTRV9MRVZFTCwgb3B0aW9ucy5iYXNlTGV2ZWwpO1xuICB9XG4gIGlmIChvcHRpb25zLm1heExldmVsKSB7XG4gICAgcGFyYW1ldGVyaUZuLmNhbGwoZ2wsIHRhcmdldCwgVEVYVFVSRV9NQVhfTEVWRUwsIG9wdGlvbnMubWF4TGV2ZWwpO1xuICB9XG59XG5cbi8qKlxuICogU2V0cyB0aGUgdGV4dHVyZSBwYXJhbWV0ZXJzIG9mIGEgdGV4dHVyZS5cbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0XG4gKiBAcGFyYW0ge1dlYkdMVGV4dHVyZX0gdGV4IHRoZSBXZWJHTFRleHR1cmUgdG8gc2V0IHBhcmFtZXRlcnMgZm9yXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsLlRleHR1cmVPcHRpb25zfSBvcHRpb25zIEEgVGV4dHVyZU9wdGlvbnMgb2JqZWN0IHdpdGggd2hhdGV2ZXIgcGFyYW1ldGVycyB5b3Ugd2FudCBzZXQuXG4gKiAgIFRoaXMgaXMgb2Z0ZW4gdGhlIHNhbWUgb3B0aW9ucyB5b3UgcGFzc2VkIGluIHdoZW4geW91IGNyZWF0ZWQgdGhlIHRleHR1cmUuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdGV4dHVyZXNcbiAqL1xuZnVuY3Rpb24gc2V0VGV4dHVyZVBhcmFtZXRlcnMoZ2wsIHRleCwgb3B0aW9ucykge1xuICBjb25zdCB0YXJnZXQgPSBvcHRpb25zLnRhcmdldCB8fCBURVhUVVJFXzJEO1xuICBnbC5iaW5kVGV4dHVyZSh0YXJnZXQsIHRleCk7XG4gIHNldFRleHR1cmVTYW1wbGVyUGFyYW1ldGVycyhnbCwgdGFyZ2V0LCBnbC50ZXhQYXJhbWV0ZXJpLCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBzYW1wbGVyIHBhcmFtZXRlcnMgb2YgYSBzYW1wbGVyLlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIHRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHRcbiAqIEBwYXJhbSB7V2ViR0xTYW1wbGVyfSBzYW1wbGVyIHRoZSBXZWJHTFNhbXBsZXIgdG8gc2V0IHBhcmFtZXRlcnMgZm9yXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsLlRleHR1cmVPcHRpb25zfSBvcHRpb25zIEEgVGV4dHVyZU9wdGlvbnMgb2JqZWN0IHdpdGggd2hhdGV2ZXIgcGFyYW1ldGVycyB5b3Ugd2FudCBzZXQuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdGV4dHVyZXNcbiAqL1xuZnVuY3Rpb24gc2V0U2FtcGxlclBhcmFtZXRlcnMoZ2wsIHNhbXBsZXIsIG9wdGlvbnMpIHtcbiAgc2V0VGV4dHVyZVNhbXBsZXJQYXJhbWV0ZXJzKGdsLCBzYW1wbGVyLCBnbC5zYW1wbGVyUGFyYW1ldGVyaSwgb3B0aW9ucyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBzYW1wbGVyIG9iamVjdCBhbmQgc2V0cyBwYXJhbWV0ZXJzLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgICBjb25zdCBzYW1wbGVyID0gdHdnbC5jcmVhdGVTYW1wbGVyKGdsLCB7XG4gKiAgICAgICAgbWluTWFnOiBnbC5ORUFSRVNULCAgICAgICAgIC8vIHNldHMgYm90aCBURVhUVVJFX01JTl9GSUxURVIgYW5kIFRFWFRVUkVfTUFHX0ZJTFRFUlxuICogICAgICAgIHdyYXA6IGdsLkNMQU1QX1RPX05FQVJFU1QsICAvLyBzZXRzIGJvdGggVEVYVFVSRV9XUkFQX1MgYW5kIFRFWFRVUkVfV1JBUF9UIGFuZCBURVhUVVJFX1dSQVBfUlxuICogICAgICB9KTtcbiAqXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dFxuICogQHBhcmFtIHtPYmplY3QuPHN0cmluZyxtb2R1bGU6dHdnbC5UZXh0dXJlT3B0aW9ucz59IG9wdGlvbnMgQSBvYmplY3Qgb2YgVGV4dHVyZU9wdGlvbnMgb25lIHBlciBzYW1wbGVyLlxuICogQHJldHVybiB7T2JqZWN0LjxzdHJpbmcsV2ViR0xTYW1wbGVyPn0gdGhlIGNyZWF0ZWQgc2FtcGxlcnMgYnkgbmFtZVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlU2FtcGxlcihnbCwgb3B0aW9ucykge1xuICBjb25zdCBzYW1wbGVyID0gZ2wuY3JlYXRlU2FtcGxlcigpO1xuICBzZXRTYW1wbGVyUGFyYW1ldGVycyhnbCwgc2FtcGxlciwgb3B0aW9ucyk7XG4gIHJldHVybiBzYW1wbGVyO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBtdWx0aXBsZSBzYW1wbGVyIG9iamVjdHMgYW5kIHNldHMgcGFyYW1ldGVycyBvbiBlYWNoLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgICBjb25zdCBzYW1wbGVycyA9IHR3Z2wuY3JlYXRlU2FtcGxlcnMoZ2wsIHtcbiAqICAgICAgICBuZWFyZXN0OiB7XG4gKiAgICAgICAgICBtaW5NYWc6IGdsLk5FQVJFU1QsXG4gKiAgICAgICAgfSxcbiAqICAgICAgICBuZWFyZXN0Q2xhbXBTOiB7XG4gKiAgICAgICAgICBtaW5NYWc6IGdsLk5FQVJFU1QsXG4gKiAgICAgICAgICB3cmFwUzogZ2wuQ0xBTVBfVE9fTkVBUkVTVCxcbiAqICAgICAgICB9LFxuICogICAgICAgIGxpbmVhcjoge1xuICogICAgICAgICAgbWluTWFnOiBnbC5MSU5FQVIsXG4gKiAgICAgICAgfSxcbiAqICAgICAgICBuZWFyZXN0Q2xhbXA6IHtcbiAqICAgICAgICAgIG1pbk1hZzogZ2wuTkVBUkVTVCxcbiAqICAgICAgICAgIHdyYXA6IGdsLkNMQU1QX1RPX0VER0UsXG4gKiAgICAgICAgfSxcbiAqICAgICAgICBsaW5lYXJDbGFtcDoge1xuICogICAgICAgICAgbWluTWFnOiBnbC5MSU5FQVIsXG4gKiAgICAgICAgICB3cmFwOiBnbC5DTEFNUF9UT19FREdFLFxuICogICAgICAgIH0sXG4gKiAgICAgICAgbGluZWFyQ2xhbXBUOiB7XG4gKiAgICAgICAgICBtaW5NYWc6IGdsLkxJTkVBUixcbiAqICAgICAgICAgIHdyYXBUOiBnbC5DTEFNUF9UT19FREdFLFxuICogICAgICAgIH0sXG4gKiAgICAgIH0pO1xuICpcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0XG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsLlRleHR1cmVPcHRpb25zfSBbb3B0aW9uc10gQSBUZXh0dXJlT3B0aW9ucyBvYmplY3Qgd2l0aCB3aGF0ZXZlciBwYXJhbWV0ZXJzIHlvdSB3YW50IHNldCBvbiB0aGUgc2FtcGxlclxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlU2FtcGxlcnMoZ2wsIHNhbXBsZXJPcHRpb25zKSB7XG4gIGNvbnN0IHNhbXBsZXJzID0ge307XG4gIE9iamVjdC5rZXlzKHNhbXBsZXJPcHRpb25zKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBzYW1wbGVyc1tuYW1lXSA9IGNyZWF0ZVNhbXBsZXIoZ2wsIHNhbXBsZXJPcHRpb25zW25hbWVdKTtcbiAgfSk7XG4gIHJldHVybiBzYW1wbGVycztcbn1cblxuLyoqXG4gKiBNYWtlcyBhIDF4MSBwaXhlbFxuICogSWYgbm8gY29sb3IgaXMgcGFzc2VkIGluIHVzZXMgdGhlIGRlZmF1bHQgY29sb3Igd2hpY2ggY2FuIGJlIHNldCBieSBjYWxsaW5nIGBzZXREZWZhdWx0VGV4dHVyZUNvbG9yYC5cbiAqIEBwYXJhbSB7KG51bWJlcltdfEFycmF5QnVmZmVyVmlldyl9IFtjb2xvcl0gVGhlIGNvbG9yIHVzaW5nIDAtMSB2YWx1ZXNcbiAqIEByZXR1cm4ge1VpbnQ4QXJyYXl9IFVuaXQ4QXJyYXkgd2l0aCBjb2xvci5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIG1ha2UxUGl4ZWwoY29sb3IpIHtcbiAgY29sb3IgPSBjb2xvciB8fCBkZWZhdWx0cyQxLnRleHR1cmVDb2xvcjtcbiAgaWYgKGlzQXJyYXlCdWZmZXIkMShjb2xvcikpIHtcbiAgICByZXR1cm4gY29sb3I7XG4gIH1cbiAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFtjb2xvclswXSAqIDI1NSwgY29sb3JbMV0gKiAyNTUsIGNvbG9yWzJdICogMjU1LCBjb2xvclszXSAqIDI1NV0pO1xufVxuXG4vKipcbiAqIFNldHMgZmlsdGVyaW5nIG9yIGdlbmVyYXRlcyBtaXBzIGZvciB0ZXh0dXJlIGJhc2VkIG9uIHdpZHRoIG9yIGhlaWdodFxuICogSWYgd2lkdGggb3IgaGVpZ2h0IGlzIG5vdCBwYXNzZWQgaW4gdXNlcyBgb3B0aW9ucy53aWR0aGAgYW5kLy9vciBgb3B0aW9ucy5oZWlnaHRgXG4gKlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIHRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHRcbiAqIEBwYXJhbSB7V2ViR0xUZXh0dXJlfSB0ZXggdGhlIFdlYkdMVGV4dHVyZSB0byBzZXQgcGFyYW1ldGVycyBmb3JcbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IFtvcHRpb25zXSBBIFRleHR1cmVPcHRpb25zIG9iamVjdCB3aXRoIHdoYXRldmVyIHBhcmFtZXRlcnMgeW91IHdhbnQgc2V0LlxuICogICBUaGlzIGlzIG9mdGVuIHRoZSBzYW1lIG9wdGlvbnMgeW91IHBhc3NlZCBpbiB3aGVuIHlvdSBjcmVhdGVkIHRoZSB0ZXh0dXJlLlxuICogQHBhcmFtIHtudW1iZXJ9IFt3aWR0aF0gd2lkdGggb2YgdGV4dHVyZVxuICogQHBhcmFtIHtudW1iZXJ9IFtoZWlnaHRdIGhlaWdodCBvZiB0ZXh0dXJlXG4gKiBAcGFyYW0ge251bWJlcn0gW2ludGVybmFsRm9ybWF0XSBUaGUgaW50ZXJuYWxGb3JtYXQgcGFyYW1ldGVyIGZyb20gdGV4SW1hZ2UyRCBldGMuLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3RleHR1cmVzXG4gKi9cbmZ1bmN0aW9uIHNldFRleHR1cmVGaWx0ZXJpbmdGb3JTaXplKGdsLCB0ZXgsIG9wdGlvbnMsIHdpZHRoLCBoZWlnaHQsIGludGVybmFsRm9ybWF0KSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IGRlZmF1bHRzJDEudGV4dHVyZU9wdGlvbnM7XG4gIGludGVybmFsRm9ybWF0ID0gaW50ZXJuYWxGb3JtYXQgfHwgUkdCQTtcbiAgY29uc3QgdGFyZ2V0ID0gb3B0aW9ucy50YXJnZXQgfHwgVEVYVFVSRV8yRDtcbiAgd2lkdGggPSB3aWR0aCB8fCBvcHRpb25zLndpZHRoO1xuICBoZWlnaHQgPSBoZWlnaHQgfHwgb3B0aW9ucy5oZWlnaHQ7XG4gIGdsLmJpbmRUZXh0dXJlKHRhcmdldCwgdGV4KTtcbiAgaWYgKGNhbkdlbmVyYXRlTWlwbWFwKGdsLCB3aWR0aCwgaGVpZ2h0LCBpbnRlcm5hbEZvcm1hdCkpIHtcbiAgICBnbC5nZW5lcmF0ZU1pcG1hcCh0YXJnZXQpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGZpbHRlcmluZyA9IGNhbkZpbHRlcihpbnRlcm5hbEZvcm1hdCkgPyBMSU5FQVIgOiBORUFSRVNUO1xuICAgIGdsLnRleFBhcmFtZXRlcmkodGFyZ2V0LCBURVhUVVJFX01JTl9GSUxURVIsIGZpbHRlcmluZyk7XG4gICAgZ2wudGV4UGFyYW1ldGVyaSh0YXJnZXQsIFRFWFRVUkVfTUFHX0ZJTFRFUiwgZmlsdGVyaW5nKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKHRhcmdldCwgVEVYVFVSRV9XUkFQX1MsIENMQU1QX1RPX0VER0UpO1xuICAgIGdsLnRleFBhcmFtZXRlcmkodGFyZ2V0LCBURVhUVVJFX1dSQVBfVCwgQ0xBTVBfVE9fRURHRSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2hvdWxkQXV0b21hdGljYWxseVNldFRleHR1cmVGaWx0ZXJpbmdGb3JTaXplKG9wdGlvbnMpIHtcbiAgcmV0dXJuIG9wdGlvbnMuYXV0byA9PT0gdHJ1ZSB8fCAob3B0aW9ucy5hdXRvID09PSB1bmRlZmluZWQgJiYgb3B0aW9ucy5sZXZlbCA9PT0gdW5kZWZpbmVkKTtcbn1cblxuLyoqXG4gKiBHZXRzIGFuIGFycmF5IG9mIGN1YmVtYXAgZmFjZSBlbnVtc1xuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIHRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHRcbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IG9wdGlvbnMgQSBUZXh0dXJlT3B0aW9ucyBvYmplY3Qgd2l0aCB3aGF0ZXZlciBwYXJhbWV0ZXJzIHlvdSB3YW50IHNldC5cbiAqICAgVGhpcyBpcyBvZnRlbiB0aGUgc2FtZSBvcHRpb25zIHlvdSBwYXNzZWQgaW4gd2hlbiB5b3UgY3JlYXRlZCB0aGUgdGV4dHVyZS5cbiAqIEByZXR1cm4ge251bWJlcltdfSBjdWJlbWFwIGZhY2UgZW51bXNcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGdldEN1YmVGYWNlT3JkZXIoZ2wsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHJldHVybiBvcHRpb25zLmN1YmVGYWNlT3JkZXIgfHwgW1xuICAgICAgVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YLFxuICAgICAgVEVYVFVSRV9DVUJFX01BUF9ORUdBVElWRV9YLFxuICAgICAgVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9ZLFxuICAgICAgVEVYVFVSRV9DVUJFX01BUF9ORUdBVElWRV9ZLFxuICAgICAgVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9aLFxuICAgICAgVEVYVFVSRV9DVUJFX01BUF9ORUdBVElWRV9aLFxuICAgIF07XG59XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRmFjZUluZm9cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBmYWNlIGdsIGVudW0gZm9yIHRleEltYWdlMkRcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBuZHggZmFjZSBpbmRleCAoMCAtIDUpIGludG8gc291cmNlIGRhdGFcbiAqIEBpZ25vcmVcbiAqL1xuXG4vKipcbiAqIEdldHMgYW4gYXJyYXkgb2YgRmFjZUluZm9zXG4gKiBUaGVyZSdzIGEgYnVnIGluIHNvbWUgTlZpZGlhIGRyaXZlcnMgdGhhdCB3aWxsIGNyYXNoIHRoZSBkcml2ZXIgaWZcbiAqIGBnbC5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1hgIGlzIG5vdCB1cGxvYWRlZCBmaXJzdC4gU28sIHdlIHRha2VcbiAqIHRoZSB1c2VyJ3MgZGVzaXJlZCBvcmRlciBmcm9tIGhpcyBmYWNlcyB0byBXZWJHTCBhbmQgbWFrZSBzdXJlIHdlXG4gKiBkbyB0aGUgZmFjZXMgaW4gV2ViR0wgb3JkZXJcbiAqXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dFxuICogQHBhcmFtIHttb2R1bGU6dHdnbC5UZXh0dXJlT3B0aW9uc30gb3B0aW9ucyBBIFRleHR1cmVPcHRpb25zIG9iamVjdCB3aXRoIHdoYXRldmVyIHBhcmFtZXRlcnMgeW91IHdhbnQgc2V0LlxuICogQHJldHVybiB7RmFjZUluZm9bXX0gY3ViZW1hcCBmYWNlIGluZm9zLiBBcmd1YWJseSB0aGUgYGZhY2VgIHByb3BlcnR5IG9mIGVhY2ggZWxlbWVudCBpcyByZWR1bmRhbnQgYnV0XG4gKiAgICBpdCdzIG5lZWRlZCBpbnRlcm5hbGx5IHRvIHNvcnQgdGhlIGFycmF5IG9mIGBuZHhgIHByb3BlcnRpZXMgYnkgYGZhY2VgLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZ2V0Q3ViZUZhY2VzV2l0aE5keChnbCwgb3B0aW9ucykge1xuICBjb25zdCBmYWNlcyA9IGdldEN1YmVGYWNlT3JkZXIoZ2wsIG9wdGlvbnMpO1xuICAvLyB3b3JrIGFyb3VuZCBidWcgaW4gTlZpZGlhIGRyaXZlcnMuIFdlIGhhdmUgdG8gdXBsb2FkIHRoZSBmaXJzdCBmYWNlIGZpcnN0IGVsc2UgdGhlIGRyaXZlciBjcmFzaGVzIDooXG4gIGNvbnN0IGZhY2VzV2l0aE5keCA9IGZhY2VzLm1hcChmdW5jdGlvbihmYWNlLCBuZHgpIHtcbiAgICByZXR1cm4geyBmYWNlOiBmYWNlLCBuZHg6IG5keCB9O1xuICB9KTtcbiAgZmFjZXNXaXRoTmR4LnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBhLmZhY2UgLSBiLmZhY2U7XG4gIH0pO1xuICByZXR1cm4gZmFjZXNXaXRoTmR4O1xufVxuXG4vKipcbiAqIFNldCBhIHRleHR1cmUgZnJvbSB0aGUgY29udGVudHMgb2YgYW4gZWxlbWVudC4gV2lsbCBhbHNvIHNldFxuICogdGV4dHVyZSBmaWx0ZXJpbmcgb3IgZ2VuZXJhdGUgbWlwcyBiYXNlZCBvbiB0aGUgZGltZW5zaW9ucyBvZiB0aGUgZWxlbWVudFxuICogdW5sZXNzIGBvcHRpb25zLmF1dG8gPT09IGZhbHNlYC4gSWYgYHRhcmdldCA9PT0gZ2wuVEVYVFVSRV9DVUJFX01BUGAgd2lsbFxuICogYXR0ZW1wdCB0byBzbGljZSBpbWFnZSBpbnRvIDF4NiwgMngzLCAzeDIsIG9yIDZ4MSBpbWFnZXMsIG9uZSBmb3IgZWFjaCBmYWNlLlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIHRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHRcbiAqIEBwYXJhbSB7V2ViR0xUZXh0dXJlfSB0ZXggdGhlIFdlYkdMVGV4dHVyZSB0byBzZXQgcGFyYW1ldGVycyBmb3JcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgYSBjYW52YXMsIGltZywgb3IgdmlkZW8gZWxlbWVudC5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IFtvcHRpb25zXSBBIFRleHR1cmVPcHRpb25zIG9iamVjdCB3aXRoIHdoYXRldmVyIHBhcmFtZXRlcnMgeW91IHdhbnQgc2V0LlxuICogICBUaGlzIGlzIG9mdGVuIHRoZSBzYW1lIG9wdGlvbnMgeW91IHBhc3NlZCBpbiB3aGVuIHlvdSBjcmVhdGVkIHRoZSB0ZXh0dXJlLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3RleHR1cmVzXG4gKiBAa2luZCBmdW5jdGlvblxuICovXG5mdW5jdGlvbiBzZXRUZXh0dXJlRnJvbUVsZW1lbnQoZ2wsIHRleCwgZWxlbWVudCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCBkZWZhdWx0cyQxLnRleHR1cmVPcHRpb25zO1xuICBjb25zdCB0YXJnZXQgPSBvcHRpb25zLnRhcmdldCB8fCBURVhUVVJFXzJEO1xuICBjb25zdCBsZXZlbCA9IG9wdGlvbnMubGV2ZWwgfHwgMDtcbiAgbGV0IHdpZHRoID0gZWxlbWVudC53aWR0aDtcbiAgbGV0IGhlaWdodCA9IGVsZW1lbnQuaGVpZ2h0O1xuICBjb25zdCBpbnRlcm5hbEZvcm1hdCA9IG9wdGlvbnMuaW50ZXJuYWxGb3JtYXQgfHwgb3B0aW9ucy5mb3JtYXQgfHwgUkdCQTtcbiAgY29uc3QgZm9ybWF0VHlwZSA9IGdldEZvcm1hdEFuZFR5cGVGb3JJbnRlcm5hbEZvcm1hdChpbnRlcm5hbEZvcm1hdCk7XG4gIGNvbnN0IGZvcm1hdCA9IG9wdGlvbnMuZm9ybWF0IHx8IGZvcm1hdFR5cGUuZm9ybWF0O1xuICBjb25zdCB0eXBlID0gb3B0aW9ucy50eXBlIHx8IGZvcm1hdFR5cGUudHlwZTtcbiAgc2V0UGFja1N0YXRlKGdsLCBvcHRpb25zKTtcbiAgZ2wuYmluZFRleHR1cmUodGFyZ2V0LCB0ZXgpO1xuICBpZiAodGFyZ2V0ID09PSBURVhUVVJFX0NVQkVfTUFQKSB7XG4gICAgLy8gZ3Vlc3MgdGhlIHBhcnRzXG4gICAgY29uc3QgaW1nV2lkdGggID0gZWxlbWVudC53aWR0aDtcbiAgICBjb25zdCBpbWdIZWlnaHQgPSBlbGVtZW50LmhlaWdodDtcbiAgICBsZXQgc2l6ZTtcbiAgICBsZXQgc2xpY2VzO1xuICAgIGlmIChpbWdXaWR0aCAvIDYgPT09IGltZ0hlaWdodCkge1xuICAgICAgLy8gSXQncyA2eDFcbiAgICAgIHNpemUgPSBpbWdIZWlnaHQ7XG4gICAgICBzbGljZXMgPSBbMCwgMCwgMSwgMCwgMiwgMCwgMywgMCwgNCwgMCwgNSwgMF07XG4gICAgfSBlbHNlIGlmIChpbWdIZWlnaHQgLyA2ID09PSBpbWdXaWR0aCkge1xuICAgICAgLy8gSXQncyAxeDZcbiAgICAgIHNpemUgPSBpbWdXaWR0aDtcbiAgICAgIHNsaWNlcyA9IFswLCAwLCAwLCAxLCAwLCAyLCAwLCAzLCAwLCA0LCAwLCA1XTtcbiAgICB9IGVsc2UgaWYgKGltZ1dpZHRoIC8gMyA9PT0gaW1nSGVpZ2h0IC8gMikge1xuICAgICAgLy8gSXQncyAzeDJcbiAgICAgIHNpemUgPSBpbWdXaWR0aCAvIDM7XG4gICAgICBzbGljZXMgPSBbMCwgMCwgMSwgMCwgMiwgMCwgMCwgMSwgMSwgMSwgMiwgMV07XG4gICAgfSBlbHNlIGlmIChpbWdXaWR0aCAvIDIgPT09IGltZ0hlaWdodCAvIDMpIHtcbiAgICAgIC8vIEl0J3MgMngzXG4gICAgICBzaXplID0gaW1nV2lkdGggLyAyO1xuICAgICAgc2xpY2VzID0gWzAsIDAsIDEsIDAsIDAsIDEsIDEsIDEsIDAsIDIsIDEsIDJdO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBcImNhbid0IGZpZ3VyZSBvdXQgY3ViZSBtYXAgZnJvbSBlbGVtZW50OiBcIiArIChlbGVtZW50LnNyYyA/IGVsZW1lbnQuc3JjIDogZWxlbWVudC5ub2RlTmFtZSk7XG4gICAgfVxuICAgIGNvbnN0IGN0eCA9IGdldFNoYXJlZDJEQ29udGV4dCgpO1xuICAgIGlmIChjdHgpIHtcbiAgICAgIGN0eC5jYW52YXMud2lkdGggPSBzaXplO1xuICAgICAgY3R4LmNhbnZhcy5oZWlnaHQgPSBzaXplO1xuICAgICAgd2lkdGggPSBzaXplO1xuICAgICAgaGVpZ2h0ID0gc2l6ZTtcbiAgICAgIGdldEN1YmVGYWNlc1dpdGhOZHgoZ2wsIG9wdGlvbnMpLmZvckVhY2goZnVuY3Rpb24oZikge1xuICAgICAgICBjb25zdCB4T2Zmc2V0ID0gc2xpY2VzW2YubmR4ICogMiArIDBdICogc2l6ZTtcbiAgICAgICAgY29uc3QgeU9mZnNldCA9IHNsaWNlc1tmLm5keCAqIDIgKyAxXSAqIHNpemU7XG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoZWxlbWVudCwgeE9mZnNldCwgeU9mZnNldCwgc2l6ZSwgc2l6ZSwgMCwgMCwgc2l6ZSwgc2l6ZSk7XG4gICAgICAgIGdsLnRleEltYWdlMkQoZi5mYWNlLCBsZXZlbCwgaW50ZXJuYWxGb3JtYXQsIGZvcm1hdCwgdHlwZSwgY3R4LmNhbnZhcyk7XG4gICAgICB9KTtcbiAgICAgIC8vIEZyZWUgdXAgdGhlIGNhbnZhcyBtZW1vcnlcbiAgICAgIGN0eC5jYW52YXMud2lkdGggPSAxO1xuICAgICAgY3R4LmNhbnZhcy5oZWlnaHQgPSAxO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGNyZWF0ZUltYWdlQml0bWFwICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gTk9URTogSXQgc2VlbXMgbGlrZSB3ZSBzaG91bGQgcHJlZmVyIEltYWdlQml0bWFwIGJlY2F1c2UgdW5saWtlIGNhbnZhcyBpdCdzXG4gICAgICAvLyBub3RlIGxvc3N5PyAoYWxwaGEgaXMgbm90IHByZW11bHRpcGxpZWQ/IGFsdGhvdWdoIEknbSBub3Qgc3VyZSB3aGF0XG4gICAgICB3aWR0aCA9IHNpemU7XG4gICAgICBoZWlnaHQgPSBzaXplO1xuICAgICAgZ2V0Q3ViZUZhY2VzV2l0aE5keChnbCwgb3B0aW9ucykuZm9yRWFjaChmdW5jdGlvbihmKSB7XG4gICAgICAgIGNvbnN0IHhPZmZzZXQgPSBzbGljZXNbZi5uZHggKiAyICsgMF0gKiBzaXplO1xuICAgICAgICBjb25zdCB5T2Zmc2V0ID0gc2xpY2VzW2YubmR4ICogMiArIDFdICogc2l6ZTtcbiAgICAgICAgLy8gV2UgY2FuJ3QgZWFzaWx5IHVzZSBhIGRlZmF1bHQgdGV4dHVyZSBjb2xvciBoZXJlIGFzIGl0IHdvdWxkIGhhdmUgdG8gbWF0Y2hcbiAgICAgICAgLy8gdGhlIHR5cGUgYWNyb3NzIGFsbCBmYWNlcyB3aGVyZSBhcyB3aXRoIGEgMkQgb25lIHRoZXJlJ3Mgb25seSBvbmUgZmFjZVxuICAgICAgICAvLyBzbyB3ZSdyZSByZXBsYWNpbmcgZXZlcnl0aGluZyBhbGwgYXQgb25jZS4gSXQgYWxzbyBoYXMgdG8gYmUgdGhlIGNvcnJlY3Qgc2l6ZS5cbiAgICAgICAgLy8gT24gdGhlIG90aGVyIGhhbmQgd2UgbmVlZCBhbGwgZmFjZXMgdG8gYmUgdGhlIHNhbWUgc2l6ZSBzbyBhcyBvbmUgZmFjZSBsb2Fkc1xuICAgICAgICAvLyB0aGUgcmVzdCBtYXRjaCBlbHNlIHRoZSB0ZXh0dXJlIHdpbGwgYmUgdW4tcmVuZGVyYWJsZS5cbiAgICAgICAgZ2wudGV4SW1hZ2UyRChmLmZhY2UsIGxldmVsLCBpbnRlcm5hbEZvcm1hdCwgc2l6ZSwgc2l6ZSwgMCwgZm9ybWF0LCB0eXBlLCBudWxsKTtcbiAgICAgICAgY3JlYXRlSW1hZ2VCaXRtYXAoZWxlbWVudCwgeE9mZnNldCwgeU9mZnNldCwgc2l6ZSwgc2l6ZSwge1xuICAgICAgICAgIHByZW11bHRpcGx5QWxwaGE6ICdub25lJyxcbiAgICAgICAgICBjb2xvclNwYWNlQ29udmVyc2lvbjogJ25vbmUnLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbihpbWFnZUJpdG1hcCkge1xuICAgICAgICAgIHNldFBhY2tTdGF0ZShnbCwgb3B0aW9ucyk7XG4gICAgICAgICAgZ2wuYmluZFRleHR1cmUodGFyZ2V0LCB0ZXgpO1xuICAgICAgICAgIGdsLnRleEltYWdlMkQoZi5mYWNlLCBsZXZlbCwgaW50ZXJuYWxGb3JtYXQsIGZvcm1hdCwgdHlwZSwgaW1hZ2VCaXRtYXApO1xuICAgICAgICAgIGlmIChzaG91bGRBdXRvbWF0aWNhbGx5U2V0VGV4dHVyZUZpbHRlcmluZ0ZvclNpemUob3B0aW9ucykpIHtcbiAgICAgICAgICAgIHNldFRleHR1cmVGaWx0ZXJpbmdGb3JTaXplKGdsLCB0ZXgsIG9wdGlvbnMsIHdpZHRoLCBoZWlnaHQsIGludGVybmFsRm9ybWF0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHRhcmdldCA9PT0gVEVYVFVSRV8zRCB8fCB0YXJnZXQgPT09IFRFWFRVUkVfMkRfQVJSQVkpIHtcbiAgICBjb25zdCBzbWFsbGVzdCA9IE1hdGgubWluKGVsZW1lbnQud2lkdGgsIGVsZW1lbnQuaGVpZ2h0KTtcbiAgICBjb25zdCBsYXJnZXN0ID0gTWF0aC5tYXgoZWxlbWVudC53aWR0aCwgZWxlbWVudC5oZWlnaHQpO1xuICAgIGNvbnN0IGRlcHRoID0gbGFyZ2VzdCAvIHNtYWxsZXN0O1xuICAgIGlmIChkZXB0aCAlIDEgIT09IDApIHtcbiAgICAgIHRocm93IFwiY2FuIG5vdCBjb21wdXRlIDNEIGRpbWVuc2lvbnMgb2YgZWxlbWVudFwiO1xuICAgIH1cbiAgICBjb25zdCB4TXVsdCA9IGVsZW1lbnQud2lkdGggID09PSBsYXJnZXN0ID8gMSA6IDA7XG4gICAgY29uc3QgeU11bHQgPSBlbGVtZW50LmhlaWdodCA9PT0gbGFyZ2VzdCA/IDEgOiAwO1xuICAgIGdsLnBpeGVsU3RvcmVpKFVOUEFDS19BTElHTk1FTlQsIDEpO1xuICAgIGdsLnBpeGVsU3RvcmVpKFVOUEFDS19ST1dfTEVOR1RILCBlbGVtZW50LndpZHRoKTtcbiAgICBnbC5waXhlbFN0b3JlaShVTlBBQ0tfSU1BR0VfSEVJR0hULCAwKTtcbiAgICBnbC5waXhlbFN0b3JlaShVTlBBQ0tfU0tJUF9JTUFHRVMsIDApO1xuICAgIGdsLnRleEltYWdlM0QodGFyZ2V0LCBsZXZlbCwgaW50ZXJuYWxGb3JtYXQsIHNtYWxsZXN0LCBzbWFsbGVzdCwgc21hbGxlc3QsIDAsIGZvcm1hdCwgdHlwZSwgbnVsbCk7XG4gICAgZm9yIChsZXQgZCA9IDA7IGQgPCBkZXB0aDsgKytkKSB7XG4gICAgICBjb25zdCBzcmNYID0gZCAqIHNtYWxsZXN0ICogeE11bHQ7XG4gICAgICBjb25zdCBzcmNZID0gZCAqIHNtYWxsZXN0ICogeU11bHQ7XG4gICAgICBnbC5waXhlbFN0b3JlaShVTlBBQ0tfU0tJUF9QSVhFTFMsIHNyY1gpO1xuICAgICAgZ2wucGl4ZWxTdG9yZWkoVU5QQUNLX1NLSVBfUk9XUywgc3JjWSk7XG4gICAgICBnbC50ZXhTdWJJbWFnZTNEKHRhcmdldCwgbGV2ZWwsIDAsIDAsIGQsIHNtYWxsZXN0LCBzbWFsbGVzdCwgMSwgZm9ybWF0LCB0eXBlLCBlbGVtZW50KTtcbiAgICB9XG4gICAgc2V0U2tpcFN0YXRlVG9EZWZhdWx0KGdsKTtcbiAgfSBlbHNlIHtcbiAgICBnbC50ZXhJbWFnZTJEKHRhcmdldCwgbGV2ZWwsIGludGVybmFsRm9ybWF0LCBmb3JtYXQsIHR5cGUsIGVsZW1lbnQpO1xuICB9XG4gIGlmIChzaG91bGRBdXRvbWF0aWNhbGx5U2V0VGV4dHVyZUZpbHRlcmluZ0ZvclNpemUob3B0aW9ucykpIHtcbiAgICBzZXRUZXh0dXJlRmlsdGVyaW5nRm9yU2l6ZShnbCwgdGV4LCBvcHRpb25zLCB3aWR0aCwgaGVpZ2h0LCBpbnRlcm5hbEZvcm1hdCk7XG4gIH1cbiAgc2V0VGV4dHVyZVBhcmFtZXRlcnMoZ2wsIHRleCwgb3B0aW9ucyk7XG59XG5cbmZ1bmN0aW9uIG5vb3AoKSB7XG59XG5cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgdGhlIHVybCdzIG9yaWdpbiBpcyB0aGUgc2FtZSBzbyB0aGF0IHdlIGNhbiBzZXQgdGhlIGBjcm9zc09yaWdpbmBcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgdXJsIHRvIGltYWdlXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgd2luZG93J3Mgb3JpZ2luIGlzIHRoZSBzYW1lIGFzIGltYWdlJ3MgdXJsXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiB1cmxJc1NhbWVPcmlnaW4odXJsKSB7XG4gIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gZm9yIElFIHJlYWxseVxuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgYS5ocmVmID0gdXJsO1xuICAgIHJldHVybiBhLmhvc3RuYW1lID09PSBsb2NhdGlvbi5ob3N0bmFtZSAmJlxuICAgICAgICAgICBhLnBvcnQgICAgID09PSBsb2NhdGlvbi5wb3J0ICYmXG4gICAgICAgICAgIGEucHJvdG9jb2wgPT09IGxvY2F0aW9uLnByb3RvY29sO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGxvY2FsT3JpZ2luID0gKG5ldyBVUkwobG9jYXRpb24uaHJlZikpLm9yaWdpbjtcbiAgICBjb25zdCB1cmxPcmlnaW4gPSAobmV3IFVSTCh1cmwsIGxvY2F0aW9uLmhyZWYpKS5vcmlnaW47XG4gICAgcmV0dXJuIHVybE9yaWdpbiA9PT0gbG9jYWxPcmlnaW47XG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0VG9Bbm9ueW1vdXNJZlVuZGVmaW5lZEFuZFVSTElzTm90U2FtZU9yaWdpbih1cmwsIGNyb3NzT3JpZ2luKSB7XG4gIHJldHVybiBjcm9zc09yaWdpbiA9PT0gdW5kZWZpbmVkICYmICF1cmxJc1NhbWVPcmlnaW4odXJsKVxuICAgICA/ICdhbm9ueW1vdXMnXG4gICAgIDogY3Jvc3NPcmlnaW47XG59XG5cbi8qKlxuICogTG9hZHMgYW4gaW1hZ2VcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgdXJsIHRvIGltYWdlXG4gKiBAcGFyYW0ge3N0cmluZ30gY3Jvc3NPcmlnaW5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oZXJyLCBpbWcpfSBbY2FsbGJhY2tdIGEgY2FsbGJhY2sgdGhhdCdzIHBhc3NlZCBhbiBlcnJvciBhbmQgdGhlIGltYWdlLiBUaGUgZXJyb3Igd2lsbCBiZSBub24tbnVsbFxuICogICAgIGlmIHRoZXJlIHdhcyBhbiBlcnJvclxuICogQHJldHVybiB7SFRNTEltYWdlRWxlbWVudH0gdGhlIGltYWdlIGJlaW5nIGxvYWRlZC5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGxvYWRJbWFnZSh1cmwsIGNyb3NzT3JpZ2luLCBjYWxsYmFjaykge1xuICBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IG5vb3A7XG4gIGxldCBpbWc7XG4gIGNyb3NzT3JpZ2luID0gY3Jvc3NPcmlnaW4gIT09IHVuZGVmaW5lZCA/IGNyb3NzT3JpZ2luIDogZGVmYXVsdHMkMS5jcm9zc09yaWdpbjtcbiAgY3Jvc3NPcmlnaW4gPSBzZXRUb0Fub255bW91c0lmVW5kZWZpbmVkQW5kVVJMSXNOb3RTYW1lT3JpZ2luKHVybCwgY3Jvc3NPcmlnaW4pO1xuICBpZiAodHlwZW9mIEltYWdlICE9PSAndW5kZWZpbmVkJykge1xuICAgIGltZyA9IG5ldyBJbWFnZSgpO1xuICAgIGlmIChjcm9zc09yaWdpbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpbWcuY3Jvc3NPcmlnaW4gPSBjcm9zc09yaWdpbjtcbiAgICB9XG5cbiAgICBjb25zdCBjbGVhckV2ZW50SGFuZGxlcnMgPSBmdW5jdGlvbiBjbGVhckV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICBpbWcucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBvbkVycm9yKTsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgIGltZy5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkJywgb25Mb2FkKTsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgIGltZyA9IG51bGw7XG4gICAgfTtcblxuICAgIGNvbnN0IG9uRXJyb3IgPSBmdW5jdGlvbiBvbkVycm9yKCkge1xuICAgICAgY29uc3QgbXNnID0gXCJjb3VsZG4ndCBsb2FkIGltYWdlOiBcIiArIHVybDtcbiAgICAgIGVycm9yKG1zZyk7XG4gICAgICBjYWxsYmFjayhtc2csIGltZyk7XG4gICAgICBjbGVhckV2ZW50SGFuZGxlcnMoKTtcbiAgICB9O1xuXG4gICAgY29uc3Qgb25Mb2FkID0gZnVuY3Rpb24gb25Mb2FkKCkge1xuICAgICAgY2FsbGJhY2sobnVsbCwgaW1nKTtcbiAgICAgIGNsZWFyRXZlbnRIYW5kbGVycygpO1xuICAgIH07XG5cbiAgICBpbWcuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBvbkVycm9yKTtcbiAgICBpbWcuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIG9uTG9hZCk7XG4gICAgaW1nLnNyYyA9IHVybDtcbiAgICByZXR1cm4gaW1nO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBJbWFnZUJpdG1hcCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBsZXQgZXJyO1xuICAgIGxldCBibTtcbiAgICBjb25zdCBjYiA9IGZ1bmN0aW9uIGNiKCkge1xuICAgICAgY2FsbGJhY2soZXJyLCBibSk7XG4gICAgfTtcblxuICAgIGNvbnN0IG9wdGlvbnMgPSB7fTtcbiAgICBpZiAoY3Jvc3NPcmlnaW4pIHtcbiAgICAgIG9wdGlvbnMubW9kZSA9ICdjb3JzJzsgLy8gVE9ETzogbm90IHN1cmUgaG93IHRvIHRyYW5zbGF0ZSBpbWFnZS5jcm9zc09yaWdpblxuICAgIH1cbiAgICBmZXRjaCh1cmwsIG9wdGlvbnMpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgcmVzcG9uc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzcG9uc2UuYmxvYigpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24oYmxvYikge1xuICAgICAgcmV0dXJuIGNyZWF0ZUltYWdlQml0bWFwKGJsb2IsIHtcbiAgICAgICAgcHJlbXVsdGlwbHlBbHBoYTogJ25vbmUnLFxuICAgICAgICBjb2xvclNwYWNlQ29udmVyc2lvbjogJ25vbmUnLFxuICAgICAgfSk7XG4gICAgfSkudGhlbihmdW5jdGlvbihiaXRtYXApIHtcbiAgICAgIC8vIG5vdCBzdXJlIGlmIHRoaXMgd29ya3MuIFdlIGRvbid0IHdhbnRcbiAgICAgIC8vIHRvIGNhdGNoIHRoZSB1c2VyJ3MgZXJyb3IuIFNvLCBjYWxsXG4gICAgICAvLyB0aGUgY2FsbGJhY2sgaW4gYSB0aW1lb3V0IHNvIHdlJ3JlXG4gICAgICAvLyBub3QgaW4gdGhpcyBzY29wZSBpbnNpZGUgdGhlIHByb21pc2UuXG4gICAgICBibSA9IGJpdG1hcDtcbiAgICAgIHNldFRpbWVvdXQoY2IpO1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGUpIHtcbiAgICAgIGVyciA9IGU7XG4gICAgICBzZXRUaW1lb3V0KGNiKTtcbiAgICB9KTtcbiAgICBpbWcgPSBudWxsO1xuICB9XG4gIHJldHVybiBpbWc7XG59XG5cbi8qKlxuICogY2hlY2sgaWYgb2JqZWN0IGlzIGEgVGV4SW1hZ2VTb3VyY2VcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIE9iamVjdCB0byB0ZXN0XG4gKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIG9iamVjdCBpcyBhIFRleEltYWdlU291cmNlXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBpc1RleEltYWdlU291cmNlKG9iaikge1xuICByZXR1cm4gKHR5cGVvZiBJbWFnZUJpdG1hcCAhPT0gJ3VuZGVmaW5lZCcgJiYgb2JqIGluc3RhbmNlb2YgSW1hZ2VCaXRtYXApIHx8XG4gICAgICAgICAodHlwZW9mIEltYWdlRGF0YSAhPT0gJ3VuZGVmaW5lZCcgICYmIG9iaiBpbnN0YW5jZW9mIEltYWdlRGF0YSkgfHxcbiAgICAgICAgICh0eXBlb2YgSFRNTEVsZW1lbnQgIT09ICd1bmRlZmluZWQnICAmJiBvYmogaW5zdGFuY2VvZiBIVE1MRWxlbWVudCk7XG59XG5cbi8qKlxuICogaWYgb2JqIGlzIGFuIFRleEltYWdlU291cmNlIHRoZW4ganVzdFxuICogdXNlcyBpdCBvdGhlcndpc2UgaWYgb2JqIGlzIGEgc3RyaW5nXG4gKiB0aGVuIGxvYWQgaXQgZmlyc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8VGV4SW1hZ2VTb3VyY2V9IG9ialxuICogQHBhcmFtIHtzdHJpbmd9IGNyb3NzT3JpZ2luXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGVyciwgaW1nKX0gW2NhbGxiYWNrXSBhIGNhbGxiYWNrIHRoYXQncyBwYXNzZWQgYW4gZXJyb3IgYW5kIHRoZSBpbWFnZS4gVGhlIGVycm9yIHdpbGwgYmUgbm9uLW51bGxcbiAqICAgICBpZiB0aGVyZSB3YXMgYW4gZXJyb3JcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGxvYWRBbmRVc2VJbWFnZShvYmosIGNyb3NzT3JpZ2luLCBjYWxsYmFjaykge1xuICBpZiAoaXNUZXhJbWFnZVNvdXJjZShvYmopKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGNhbGxiYWNrKG51bGwsIG9iaik7XG4gICAgfSk7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuXG4gIHJldHVybiBsb2FkSW1hZ2Uob2JqLCBjcm9zc09yaWdpbiwgY2FsbGJhY2spO1xufVxuXG4vKipcbiAqIFNldHMgYSB0ZXh0dXJlIHRvIGEgMXgxIHBpeGVsIGNvbG9yLiBJZiBgb3B0aW9ucy5jb2xvciA9PT0gZmFsc2VgIGlzIG5vdGhpbmcgaGFwcGVucy4gSWYgaXQncyBub3Qgc2V0XG4gKiB0aGUgZGVmYXVsdCB0ZXh0dXJlIGNvbG9yIGlzIHVzZWQgd2hpY2ggY2FuIGJlIHNldCBieSBjYWxsaW5nIGBzZXREZWZhdWx0VGV4dHVyZUNvbG9yYC5cbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0XG4gKiBAcGFyYW0ge1dlYkdMVGV4dHVyZX0gdGV4IHRoZSBXZWJHTFRleHR1cmUgdG8gc2V0IHBhcmFtZXRlcnMgZm9yXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsLlRleHR1cmVPcHRpb25zfSBbb3B0aW9uc10gQSBUZXh0dXJlT3B0aW9ucyBvYmplY3Qgd2l0aCB3aGF0ZXZlciBwYXJhbWV0ZXJzIHlvdSB3YW50IHNldC5cbiAqICAgVGhpcyBpcyBvZnRlbiB0aGUgc2FtZSBvcHRpb25zIHlvdSBwYXNzZWQgaW4gd2hlbiB5b3UgY3JlYXRlZCB0aGUgdGV4dHVyZS5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90ZXh0dXJlc1xuICovXG5mdW5jdGlvbiBzZXRUZXh0dXJlVG8xUGl4ZWxDb2xvcihnbCwgdGV4LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IGRlZmF1bHRzJDEudGV4dHVyZU9wdGlvbnM7XG4gIGNvbnN0IHRhcmdldCA9IG9wdGlvbnMudGFyZ2V0IHx8IFRFWFRVUkVfMkQ7XG4gIGdsLmJpbmRUZXh0dXJlKHRhcmdldCwgdGV4KTtcbiAgaWYgKG9wdGlvbnMuY29sb3IgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIEFzc3VtZSBpdCdzIGEgVVJMXG4gIC8vIFB1dCAxeDEgcGl4ZWxzIGluIHRleHR1cmUuIFRoYXQgbWFrZXMgaXQgcmVuZGVyYWJsZSBpbW1lZGlhdGVseSByZWdhcmRsZXNzIG9mIGZpbHRlcmluZy5cbiAgY29uc3QgY29sb3IgPSBtYWtlMVBpeGVsKG9wdGlvbnMuY29sb3IpO1xuICBpZiAodGFyZ2V0ID09PSBURVhUVVJFX0NVQkVfTUFQKSB7XG4gICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IDY7ICsraWkpIHtcbiAgICAgIGdsLnRleEltYWdlMkQoVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YICsgaWksIDAsIFJHQkEsIDEsIDEsIDAsIFJHQkEsIFVOU0lHTkVEX0JZVEUkMiwgY29sb3IpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfM0QgfHwgdGFyZ2V0ID09PSBURVhUVVJFXzJEX0FSUkFZKSB7XG4gICAgZ2wudGV4SW1hZ2UzRCh0YXJnZXQsIDAsIFJHQkEsIDEsIDEsIDEsIDAsIFJHQkEsIFVOU0lHTkVEX0JZVEUkMiwgY29sb3IpO1xuICB9IGVsc2Uge1xuICAgIGdsLnRleEltYWdlMkQodGFyZ2V0LCAwLCBSR0JBLCAxLCAxLCAwLCBSR0JBLCBVTlNJR05FRF9CWVRFJDIsIGNvbG9yKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoZSBzcmMgaW1hZ2UocykgdXNlZCB0byBjcmVhdGUgYSB0ZXh0dXJlLlxuICpcbiAqIFdoZW4geW91IGNhbGwge0BsaW5rIG1vZHVsZTp0d2dsLmNyZWF0ZVRleHR1cmV9IG9yIHtAbGluayBtb2R1bGU6dHdnbC5jcmVhdGVUZXh0dXJlc31cbiAqIHlvdSBjYW4gcGFzcyBpbiB1cmxzIGZvciBpbWFnZXMgdG8gbG9hZCBpbnRvIHRoZSB0ZXh0dXJlcy4gSWYgaXQncyBhIHNpbmdsZSB1cmxcbiAqIHRoZW4gdGhpcyB3aWxsIGJlIGEgc2luZ2xlIEhUTUxJbWFnZUVsZW1lbnQuIElmIGl0J3MgYW4gYXJyYXkgb2YgdXJscyB1c2VkIGZvciBhIGN1YmVtYXBcbiAqIHRoaXMgd2lsbCBiZSBhIGNvcnJlc3BvbmRpbmcgYXJyYXkgb2YgaW1hZ2VzIGZvciB0aGUgY3ViZW1hcC5cbiAqXG4gKiBAdHlwZWRlZiB7SFRNTEltYWdlRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50W119IFRleHR1cmVTcmNcbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbFxuICovXG5cbi8qKlxuICogQSBjYWxsYmFjayBmb3Igd2hlbiBhbiBpbWFnZSBmaW5pc2hlZCBkb3dubG9hZGluZyBhbmQgYmVlbiB1cGxvYWRlZCBpbnRvIGEgdGV4dHVyZVxuICogQGNhbGxiYWNrIFRleHR1cmVSZWFkeUNhbGxiYWNrXG4gKiBAcGFyYW0geyp9IGVyciBJZiB0cnV0aHkgdGhlcmUgd2FzIGFuIGVycm9yLlxuICogQHBhcmFtIHtXZWJHTFRleHR1cmV9IHRleHR1cmUgdGhlIHRleHR1cmUuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsLlRleHR1cmVTcmN9IHNvdXJjZSBpbWFnZShzKSB1c2VkIHRvIGFzIHRoZSBzcmMgZm9yIHRoZSB0ZXh0dXJlXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2xcbiAqL1xuXG4vKipcbiAqIEEgY2FsbGJhY2sgZm9yIHdoZW4gYWxsIGltYWdlcyBoYXZlIGZpbmlzaGVkIGRvd25sb2FkaW5nIGFuZCBiZWVuIHVwbG9hZGVkIGludG8gdGhlaXIgcmVzcGVjdGl2ZSB0ZXh0dXJlc1xuICogQGNhbGxiYWNrIFRleHR1cmVzUmVhZHlDYWxsYmFja1xuICogQHBhcmFtIHsqfSBlcnIgSWYgdHJ1dGh5IHRoZXJlIHdhcyBhbiBlcnJvci5cbiAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsIFdlYkdMVGV4dHVyZT59IHRleHR1cmVzIHRoZSBjcmVhdGVkIHRleHR1cmVzIGJ5IG5hbWUuIFNhbWUgYXMgcmV0dXJuZWQgYnkge0BsaW5rIG1vZHVsZTp0d2dsLmNyZWF0ZVRleHR1cmVzfS5cbiAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsIG1vZHVsZTp0d2dsLlRleHR1cmVTcmM+fSBzb3VyY2VzIHRoZSBpbWFnZShzKSB1c2VkIGZvciB0aGUgdGV4dHVyZSBieSBuYW1lLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsXG4gKi9cblxuLyoqXG4gKiBBIGNhbGxiYWNrIGZvciB3aGVuIGFuIGltYWdlIGZpbmlzaGVkIGRvd25sb2FkaW5nIGFuZCBiZWVuIHVwbG9hZGVkIGludG8gYSB0ZXh0dXJlXG4gKiBAY2FsbGJhY2sgQ3ViZW1hcFJlYWR5Q2FsbGJhY2tcbiAqIEBwYXJhbSB7Kn0gZXJyIElmIHRydXRoeSB0aGVyZSB3YXMgYW4gZXJyb3IuXG4gKiBAcGFyYW0ge1dlYkdMVGV4dHVyZX0gdGV4IHRoZSB0ZXh0dXJlLlxuICogQHBhcmFtIHtIVE1MSW1hZ2VFbGVtZW50W119IGltZ3MgdGhlIGltYWdlcyBmb3IgZWFjaCBmYWNlLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsXG4gKi9cblxuLyoqXG4gKiBBIGNhbGxiYWNrIGZvciB3aGVuIGFuIGltYWdlIGZpbmlzaGVkIGRvd25sb2FkaW5nIGFuZCBiZWVuIHVwbG9hZGVkIGludG8gYSB0ZXh0dXJlXG4gKiBAY2FsbGJhY2sgVGhyZWVEUmVhZHlDYWxsYmFja1xuICogQHBhcmFtIHsqfSBlcnIgSWYgdHJ1dGh5IHRoZXJlIHdhcyBhbiBlcnJvci5cbiAqIEBwYXJhbSB7V2ViR0xUZXh0dXJlfSB0ZXggdGhlIHRleHR1cmUuXG4gKiBAcGFyYW0ge0hUTUxJbWFnZUVsZW1lbnRbXX0gaW1ncyB0aGUgaW1hZ2VzIGZvciBlYWNoIHNsaWNlLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsXG4gKi9cblxuLyoqXG4gKiBMb2FkcyBhIHRleHR1cmUgZnJvbSBhbiBpbWFnZSBmcm9tIGEgVXJsIGFzIHNwZWNpZmllZCBpbiBgb3B0aW9ucy5zcmNgXG4gKiBJZiBgb3B0aW9ucy5jb2xvciAhPT0gZmFsc2VgIHdpbGwgc2V0IHRoZSB0ZXh0dXJlIHRvIGEgMXgxIHBpeGVsIGNvbG9yIHNvIHRoYXQgdGhlIHRleHR1cmUgaXNcbiAqIGltbWVkaWF0ZWx5IHVzZWFibGUuIEl0IHdpbGwgYmUgdXBkYXRlZCB3aXRoIHRoZSBjb250ZW50cyBvZiB0aGUgaW1hZ2Ugb25jZSB0aGUgaW1hZ2UgaGFzIGZpbmlzaGVkXG4gKiBkb3dubG9hZGluZy4gRmlsdGVyaW5nIG9wdGlvbnMgd2lsbCBiZSBzZXQgYXMgYXBwcm9wcmlhdGUgZm9yIGltYWdlIHVubGVzcyBgb3B0aW9ucy5hdXRvID09PSBmYWxzZWAuXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dFxuICogQHBhcmFtIHtXZWJHTFRleHR1cmV9IHRleCB0aGUgV2ViR0xUZXh0dXJlIHRvIHNldCBwYXJhbWV0ZXJzIGZvclxuICogQHBhcmFtIHttb2R1bGU6dHdnbC5UZXh0dXJlT3B0aW9uc30gW29wdGlvbnNdIEEgVGV4dHVyZU9wdGlvbnMgb2JqZWN0IHdpdGggd2hhdGV2ZXIgcGFyYW1ldGVycyB5b3Ugd2FudCBzZXQuXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsLlRleHR1cmVSZWFkeUNhbGxiYWNrfSBbY2FsbGJhY2tdIEEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIGltYWdlIGhhcyBmaW5pc2hlZCBsb2FkaW5nLiBlcnIgd2lsbFxuICogICAgYmUgbm9uIG51bGwgaWYgdGhlcmUgd2FzIGFuIGVycm9yLlxuICogQHJldHVybiB7SFRNTEltYWdlRWxlbWVudH0gdGhlIGltYWdlIGJlaW5nIGRvd25sb2FkZWQuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdGV4dHVyZXNcbiAqL1xuZnVuY3Rpb24gbG9hZFRleHR1cmVGcm9tVXJsKGdsLCB0ZXgsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgbm9vcDtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgZGVmYXVsdHMkMS50ZXh0dXJlT3B0aW9ucztcbiAgc2V0VGV4dHVyZVRvMVBpeGVsQ29sb3IoZ2wsIHRleCwgb3B0aW9ucyk7XG4gIC8vIEJlY2F1c2UgaXQncyBhc3luYyB3ZSBuZWVkIHRvIGNvcHkgdGhlIG9wdGlvbnMuXG4gIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgY29uc3QgaW1nID0gbG9hZEFuZFVzZUltYWdlKG9wdGlvbnMuc3JjLCBvcHRpb25zLmNyb3NzT3JpZ2luLCBmdW5jdGlvbihlcnIsIGltZykge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIGNhbGxiYWNrKGVyciwgdGV4LCBpbWcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRUZXh0dXJlRnJvbUVsZW1lbnQoZ2wsIHRleCwgaW1nLCBvcHRpb25zKTtcbiAgICAgIGNhbGxiYWNrKG51bGwsIHRleCwgaW1nKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gaW1nO1xufVxuXG4vKipcbiAqIExvYWRzIGEgY3ViZW1hcCBmcm9tIDYgdXJscyBvciBUZXhJbWFnZVNvdXJjZXMgYXMgc3BlY2lmaWVkIGluIGBvcHRpb25zLnNyY2AuIFdpbGwgc2V0IHRoZSBjdWJlbWFwIHRvIGEgMXgxIHBpeGVsIGNvbG9yXG4gKiBzbyB0aGF0IGl0IGlzIHVzYWJsZSBpbW1lZGlhdGVseSB1bmxlc3MgYG9wdGlvbi5jb2xvciA9PT0gZmFsc2VgLlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIHRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHRcbiAqIEBwYXJhbSB7V2ViR0xUZXh0dXJlfSB0ZXggdGhlIFdlYkdMVGV4dHVyZSB0byBzZXQgcGFyYW1ldGVycyBmb3JcbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IG9wdGlvbnMgQSBUZXh0dXJlT3B0aW9ucyBvYmplY3Qgd2l0aCB3aGF0ZXZlciBwYXJhbWV0ZXJzIHlvdSB3YW50IHNldC5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuQ3ViZW1hcFJlYWR5Q2FsbGJhY2t9IFtjYWxsYmFja10gQSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiBhbGwgdGhlIGltYWdlcyBoYXZlIGZpbmlzaGVkIGxvYWRpbmcuIGVyciB3aWxsXG4gKiAgICBiZSBub24gbnVsbCBpZiB0aGVyZSB3YXMgYW4gZXJyb3IuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdGV4dHVyZXNcbiAqL1xuZnVuY3Rpb24gbG9hZEN1YmVtYXBGcm9tVXJscyhnbCwgdGV4LCBvcHRpb25zLCBjYWxsYmFjaykge1xuICBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IG5vb3A7XG4gIGNvbnN0IHVybHMgPSBvcHRpb25zLnNyYztcbiAgaWYgKHVybHMubGVuZ3RoICE9PSA2KSB7XG4gICAgdGhyb3cgXCJ0aGVyZSBtdXN0IGJlIDYgdXJscyBmb3IgYSBjdWJlbWFwXCI7XG4gIH1cbiAgY29uc3QgbGV2ZWwgPSBvcHRpb25zLmxldmVsIHx8IDA7XG4gIGNvbnN0IGludGVybmFsRm9ybWF0ID0gb3B0aW9ucy5pbnRlcm5hbEZvcm1hdCB8fCBvcHRpb25zLmZvcm1hdCB8fCBSR0JBO1xuICBjb25zdCBmb3JtYXRUeXBlID0gZ2V0Rm9ybWF0QW5kVHlwZUZvckludGVybmFsRm9ybWF0KGludGVybmFsRm9ybWF0KTtcbiAgY29uc3QgZm9ybWF0ID0gb3B0aW9ucy5mb3JtYXQgfHwgZm9ybWF0VHlwZS5mb3JtYXQ7XG4gIGNvbnN0IHR5cGUgPSBvcHRpb25zLnR5cGUgfHwgVU5TSUdORURfQllURSQyO1xuICBjb25zdCB0YXJnZXQgPSBvcHRpb25zLnRhcmdldCB8fCBURVhUVVJFXzJEO1xuICBpZiAodGFyZ2V0ICE9PSBURVhUVVJFX0NVQkVfTUFQKSB7XG4gICAgdGhyb3cgXCJ0YXJnZXQgbXVzdCBiZSBURVhUVVJFX0NVQkVfTUFQXCI7XG4gIH1cbiAgc2V0VGV4dHVyZVRvMVBpeGVsQ29sb3IoZ2wsIHRleCwgb3B0aW9ucyk7XG4gIC8vIEJlY2F1c2UgaXQncyBhc3luYyB3ZSBuZWVkIHRvIGNvcHkgdGhlIG9wdGlvbnMuXG4gIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgbGV0IG51bVRvTG9hZCA9IDY7XG4gIGNvbnN0IGVycm9ycyA9IFtdO1xuICBjb25zdCBmYWNlcyA9IGdldEN1YmVGYWNlT3JkZXIoZ2wsIG9wdGlvbnMpO1xuICBsZXQgaW1nczsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICBmdW5jdGlvbiB1cGxvYWRJbWcoZmFjZVRhcmdldCkge1xuICAgIHJldHVybiBmdW5jdGlvbihlcnIsIGltZykge1xuICAgICAgLS1udW1Ub0xvYWQ7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGVycik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaW1nLndpZHRoICE9PSBpbWcuaGVpZ2h0KSB7XG4gICAgICAgICAgZXJyb3JzLnB1c2goXCJjdWJlbWFwIGZhY2UgaW1nIGlzIG5vdCBhIHNxdWFyZTogXCIgKyBpbWcuc3JjKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXRQYWNrU3RhdGUoZ2wsIG9wdGlvbnMpO1xuICAgICAgICAgIGdsLmJpbmRUZXh0dXJlKHRhcmdldCwgdGV4KTtcblxuICAgICAgICAgIC8vIFNvIGFzc3VtaW5nIHRoaXMgaXMgdGhlIGZpcnN0IGltYWdlIHdlIG5vdyBoYXZlIG9uZSBmYWNlIHRoYXQncyBpbWcgc2l6ZWRcbiAgICAgICAgICAvLyBhbmQgNSBmYWNlcyB0aGF0IGFyZSAxeDEgcGl4ZWwgc28gc2l6ZSB0aGUgb3RoZXIgZmFjZXNcbiAgICAgICAgICBpZiAobnVtVG9Mb2FkID09PSA1KSB7XG4gICAgICAgICAgICAvLyB1c2UgdGhlIGRlZmF1bHQgb3JkZXJcbiAgICAgICAgICAgIGdldEN1YmVGYWNlT3JkZXIoKS5mb3JFYWNoKGZ1bmN0aW9uKG90aGVyVGFyZ2V0KSB7XG4gICAgICAgICAgICAgIC8vIFNob3VsZCB3ZSByZS11c2UgdGhlIHNhbWUgZmFjZSBvciBhIGNvbG9yP1xuICAgICAgICAgICAgICBnbC50ZXhJbWFnZTJEKG90aGVyVGFyZ2V0LCBsZXZlbCwgaW50ZXJuYWxGb3JtYXQsIGZvcm1hdCwgdHlwZSwgaW1nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnbC50ZXhJbWFnZTJEKGZhY2VUYXJnZXQsIGxldmVsLCBpbnRlcm5hbEZvcm1hdCwgZm9ybWF0LCB0eXBlLCBpbWcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzaG91bGRBdXRvbWF0aWNhbGx5U2V0VGV4dHVyZUZpbHRlcmluZ0ZvclNpemUob3B0aW9ucykpIHtcbiAgICAgICAgICAgIGdsLmdlbmVyYXRlTWlwbWFwKHRhcmdldCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChudW1Ub0xvYWQgPT09IDApIHtcbiAgICAgICAgY2FsbGJhY2soZXJyb3JzLmxlbmd0aCA/IGVycm9ycyA6IHVuZGVmaW5lZCwgdGV4LCBpbWdzKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgaW1ncyA9IHVybHMubWFwKGZ1bmN0aW9uKHVybCwgbmR4KSB7XG4gICAgcmV0dXJuIGxvYWRBbmRVc2VJbWFnZSh1cmwsIG9wdGlvbnMuY3Jvc3NPcmlnaW4sIHVwbG9hZEltZyhmYWNlc1tuZHhdKSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIExvYWRzIGEgMmQgYXJyYXkgb3IgM2QgdGV4dHVyZSBmcm9tIHVybHMgT1IgVGV4SW1hZ2VTb3VyY2VzIGFzIHNwZWNpZmllZCBpbiBgb3B0aW9ucy5zcmNgLlxuICogV2lsbCBzZXQgdGhlIHRleHR1cmUgdG8gYSAxeDEgcGl4ZWwgY29sb3JcbiAqIHNvIHRoYXQgaXQgaXMgdXNhYmxlIGltbWVkaWF0ZWx5IHVubGVzcyBgb3B0aW9uLmNvbG9yID09PSBmYWxzZWAuXG4gKlxuICogSWYgdGhlIHdpZHRoIGFuZCBoZWlnaHQgaXMgbm90IHNwZWNpZmllZCB0aGUgd2lkdGggYW5kIGhlaWdodCBvZiB0aGUgZmlyc3RcbiAqIGltYWdlIGxvYWRlZCB3aWxsIGJlIHVzZWQuIE5vdGUgdGhhdCBzaW5jZSBpbWFnZXMgYXJlIGxvYWRlZCBhc3luY1xuICogd2hpY2ggaW1hZ2UgZG93bmxvYWRzIGZpcnN0IGlzIHVua25vd24uXG4gKlxuICogSWYgYW4gaW1hZ2UgaXMgbm90IHRoZSBzYW1lIHNpemUgYXMgdGhlIHdpZHRoIGFuZCBoZWlnaHQgaXQgd2lsbCBiZSBzY2FsZWRcbiAqIHRvIHRoYXQgd2lkdGggYW5kIGhlaWdodC5cbiAqXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dFxuICogQHBhcmFtIHtXZWJHTFRleHR1cmV9IHRleCB0aGUgV2ViR0xUZXh0dXJlIHRvIHNldCBwYXJhbWV0ZXJzIGZvclxuICogQHBhcmFtIHttb2R1bGU6dHdnbC5UZXh0dXJlT3B0aW9uc30gb3B0aW9ucyBBIFRleHR1cmVPcHRpb25zIG9iamVjdCB3aXRoIHdoYXRldmVyIHBhcmFtZXRlcnMgeW91IHdhbnQgc2V0LlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC5UaHJlZURSZWFkeUNhbGxiYWNrfSBbY2FsbGJhY2tdIEEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gYWxsIHRoZSBpbWFnZXMgaGF2ZSBmaW5pc2hlZCBsb2FkaW5nLiBlcnIgd2lsbFxuICogICAgYmUgbm9uIG51bGwgaWYgdGhlcmUgd2FzIGFuIGVycm9yLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3RleHR1cmVzXG4gKi9cbmZ1bmN0aW9uIGxvYWRTbGljZXNGcm9tVXJscyhnbCwgdGV4LCBvcHRpb25zLCBjYWxsYmFjaykge1xuICBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IG5vb3A7XG4gIGNvbnN0IHVybHMgPSBvcHRpb25zLnNyYztcbiAgY29uc3QgaW50ZXJuYWxGb3JtYXQgPSBvcHRpb25zLmludGVybmFsRm9ybWF0IHx8IG9wdGlvbnMuZm9ybWF0IHx8IFJHQkE7XG4gIGNvbnN0IGZvcm1hdFR5cGUgPSBnZXRGb3JtYXRBbmRUeXBlRm9ySW50ZXJuYWxGb3JtYXQoaW50ZXJuYWxGb3JtYXQpO1xuICBjb25zdCBmb3JtYXQgPSBvcHRpb25zLmZvcm1hdCB8fCBmb3JtYXRUeXBlLmZvcm1hdDtcbiAgY29uc3QgdHlwZSA9IG9wdGlvbnMudHlwZSB8fCBVTlNJR05FRF9CWVRFJDI7XG4gIGNvbnN0IHRhcmdldCA9IG9wdGlvbnMudGFyZ2V0IHx8IFRFWFRVUkVfMkRfQVJSQVk7XG4gIGlmICh0YXJnZXQgIT09IFRFWFRVUkVfM0QgJiYgdGFyZ2V0ICE9PSBURVhUVVJFXzJEX0FSUkFZKSB7XG4gICAgdGhyb3cgXCJ0YXJnZXQgbXVzdCBiZSBURVhUVVJFXzNEIG9yIFRFWFRVUkVfMkRfQVJSQVlcIjtcbiAgfVxuICBzZXRUZXh0dXJlVG8xUGl4ZWxDb2xvcihnbCwgdGV4LCBvcHRpb25zKTtcbiAgLy8gQmVjYXVzZSBpdCdzIGFzeW5jIHdlIG5lZWQgdG8gY29weSB0aGUgb3B0aW9ucy5cbiAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xuICBsZXQgbnVtVG9Mb2FkID0gdXJscy5sZW5ndGg7XG4gIGNvbnN0IGVycm9ycyA9IFtdO1xuICBsZXQgaW1nczsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgY29uc3QgbGV2ZWwgPSBvcHRpb25zLmxldmVsIHx8IDA7XG4gIGxldCB3aWR0aCA9IG9wdGlvbnMud2lkdGg7XG4gIGxldCBoZWlnaHQgPSBvcHRpb25zLmhlaWdodDtcbiAgY29uc3QgZGVwdGggPSB1cmxzLmxlbmd0aDtcbiAgbGV0IGZpcnN0SW1hZ2UgPSB0cnVlO1xuXG4gIGZ1bmN0aW9uIHVwbG9hZEltZyhzbGljZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihlcnIsIGltZykge1xuICAgICAgLS1udW1Ub0xvYWQ7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGVycik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRQYWNrU3RhdGUoZ2wsIG9wdGlvbnMpO1xuICAgICAgICBnbC5iaW5kVGV4dHVyZSh0YXJnZXQsIHRleCk7XG5cbiAgICAgICAgaWYgKGZpcnN0SW1hZ2UpIHtcbiAgICAgICAgICBmaXJzdEltYWdlID0gZmFsc2U7XG4gICAgICAgICAgd2lkdGggPSBvcHRpb25zLndpZHRoIHx8IGltZy53aWR0aDtcbiAgICAgICAgICBoZWlnaHQgPSBvcHRpb25zLmhlaWdodCB8fCBpbWcuaGVpZ2h0O1xuICAgICAgICAgIGdsLnRleEltYWdlM0QodGFyZ2V0LCBsZXZlbCwgaW50ZXJuYWxGb3JtYXQsIHdpZHRoLCBoZWlnaHQsIGRlcHRoLCAwLCBmb3JtYXQsIHR5cGUsIG51bGwpO1xuXG4gICAgICAgICAgLy8gcHV0IGl0IGluIGV2ZXJ5IHNsaWNlIG90aGVyd2lzZSBzb21lIHNsaWNlcyB3aWxsIGJlIDAsMCwwLDBcbiAgICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IGRlcHRoOyArK3MpIHtcbiAgICAgICAgICAgIGdsLnRleFN1YkltYWdlM0QodGFyZ2V0LCBsZXZlbCwgMCwgMCwgcywgd2lkdGgsIGhlaWdodCwgMSwgZm9ybWF0LCB0eXBlLCBpbWcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZXQgc3JjID0gaW1nO1xuICAgICAgICAgIGxldCBjdHg7XG4gICAgICAgICAgaWYgKGltZy53aWR0aCAhPT0gd2lkdGggfHwgaW1nLmhlaWdodCAhPT0gaGVpZ2h0KSB7XG4gICAgICAgICAgICAvLyBTaXplIHRoZSBpbWFnZSB0byBmaXhcbiAgICAgICAgICAgIGN0eCA9IGdldFNoYXJlZDJEQ29udGV4dCgpO1xuICAgICAgICAgICAgc3JjID0gY3R4LmNhbnZhcztcbiAgICAgICAgICAgIGN0eC5jYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIGN0eC5jYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGdsLnRleFN1YkltYWdlM0QodGFyZ2V0LCBsZXZlbCwgMCwgMCwgc2xpY2UsIHdpZHRoLCBoZWlnaHQsIDEsIGZvcm1hdCwgdHlwZSwgc3JjKTtcblxuICAgICAgICAgIC8vIGZyZWUgdGhlIGNhbnZhcyBtZW1vcnlcbiAgICAgICAgICBpZiAoY3R4ICYmIHNyYyA9PT0gY3R4LmNhbnZhcykge1xuICAgICAgICAgICAgY3R4LmNhbnZhcy53aWR0aCA9IDA7XG4gICAgICAgICAgICBjdHguY2FudmFzLmhlaWdodCA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNob3VsZEF1dG9tYXRpY2FsbHlTZXRUZXh0dXJlRmlsdGVyaW5nRm9yU2l6ZShvcHRpb25zKSkge1xuICAgICAgICAgIGdsLmdlbmVyYXRlTWlwbWFwKHRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKG51bVRvTG9hZCA9PT0gMCkge1xuICAgICAgICBjYWxsYmFjayhlcnJvcnMubGVuZ3RoID8gZXJyb3JzIDogdW5kZWZpbmVkLCB0ZXgsIGltZ3MpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBpbWdzID0gdXJscy5tYXAoZnVuY3Rpb24odXJsLCBuZHgpIHtcbiAgICByZXR1cm4gbG9hZEFuZFVzZUltYWdlKHVybCwgb3B0aW9ucy5jcm9zc09yaWdpbiwgdXBsb2FkSW1nKG5keCkpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBTZXRzIGEgdGV4dHVyZSBmcm9tIGFuIGFycmF5IG9yIHR5cGVkIGFycmF5LiBJZiB0aGUgd2lkdGggb3IgaGVpZ2h0IGlzIG5vdCBwcm92aWRlZCB3aWxsIGF0dGVtcHQgdG9cbiAqIGd1ZXNzIHRoZSBzaXplLiBTZWUge0BsaW5rIG1vZHVsZTp0d2dsLlRleHR1cmVPcHRpb25zfS5cbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0XG4gKiBAcGFyYW0ge1dlYkdMVGV4dHVyZX0gdGV4IHRoZSBXZWJHTFRleHR1cmUgdG8gc2V0IHBhcmFtZXRlcnMgZm9yXG4gKiBAcGFyYW0geyhudW1iZXJbXXxBcnJheUJ1ZmZlclZpZXcpfSBzcmMgQW4gYXJyYXkgb3IgdHlwZWQgYXJyeSB3aXRoIHRleHR1cmUgZGF0YS5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IFtvcHRpb25zXSBBIFRleHR1cmVPcHRpb25zIG9iamVjdCB3aXRoIHdoYXRldmVyIHBhcmFtZXRlcnMgeW91IHdhbnQgc2V0LlxuICogICBUaGlzIGlzIG9mdGVuIHRoZSBzYW1lIG9wdGlvbnMgeW91IHBhc3NlZCBpbiB3aGVuIHlvdSBjcmVhdGVkIHRoZSB0ZXh0dXJlLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3RleHR1cmVzXG4gKi9cbmZ1bmN0aW9uIHNldFRleHR1cmVGcm9tQXJyYXkoZ2wsIHRleCwgc3JjLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IGRlZmF1bHRzJDEudGV4dHVyZU9wdGlvbnM7XG4gIGNvbnN0IHRhcmdldCA9IG9wdGlvbnMudGFyZ2V0IHx8IFRFWFRVUkVfMkQ7XG4gIGdsLmJpbmRUZXh0dXJlKHRhcmdldCwgdGV4KTtcbiAgbGV0IHdpZHRoID0gb3B0aW9ucy53aWR0aDtcbiAgbGV0IGhlaWdodCA9IG9wdGlvbnMuaGVpZ2h0O1xuICBsZXQgZGVwdGggPSBvcHRpb25zLmRlcHRoO1xuICBjb25zdCBsZXZlbCA9IG9wdGlvbnMubGV2ZWwgfHwgMDtcbiAgY29uc3QgaW50ZXJuYWxGb3JtYXQgPSBvcHRpb25zLmludGVybmFsRm9ybWF0IHx8IG9wdGlvbnMuZm9ybWF0IHx8IFJHQkE7XG4gIGNvbnN0IGZvcm1hdFR5cGUgPSBnZXRGb3JtYXRBbmRUeXBlRm9ySW50ZXJuYWxGb3JtYXQoaW50ZXJuYWxGb3JtYXQpO1xuICBjb25zdCBmb3JtYXQgPSBvcHRpb25zLmZvcm1hdCB8fCBmb3JtYXRUeXBlLmZvcm1hdDtcbiAgY29uc3QgdHlwZSA9IG9wdGlvbnMudHlwZSB8fCBnZXRUZXh0dXJlVHlwZUZvckFycmF5VHlwZShnbCwgc3JjLCBmb3JtYXRUeXBlLnR5cGUpO1xuICBpZiAoIWlzQXJyYXlCdWZmZXIkMShzcmMpKSB7XG4gICAgY29uc3QgVHlwZSA9IGdldFR5cGVkQXJyYXlUeXBlRm9yR0xUeXBlKHR5cGUpO1xuICAgIHNyYyA9IG5ldyBUeXBlKHNyYyk7XG4gIH0gZWxzZSBpZiAoc3JjIGluc3RhbmNlb2YgVWludDhDbGFtcGVkQXJyYXkpIHtcbiAgICBzcmMgPSBuZXcgVWludDhBcnJheShzcmMuYnVmZmVyKTtcbiAgfVxuXG4gIGNvbnN0IGJ5dGVzUGVyRWxlbWVudCA9IGdldEJ5dGVzUGVyRWxlbWVudEZvckludGVybmFsRm9ybWF0KGludGVybmFsRm9ybWF0LCB0eXBlKTtcbiAgY29uc3QgbnVtRWxlbWVudHMgPSBzcmMuYnl0ZUxlbmd0aCAvIGJ5dGVzUGVyRWxlbWVudDsgIC8vIFRPRE86IGNoZWNrIFVOUEFDS19BTElHTk1FTlQ/XG4gIGlmIChudW1FbGVtZW50cyAlIDEpIHtcbiAgICB0aHJvdyBcImxlbmd0aCB3cm9uZyBzaXplIGZvciBmb3JtYXQ6IFwiICsgZ2xFbnVtVG9TdHJpbmcoZ2wsIGZvcm1hdCk7XG4gIH1cbiAgbGV0IGRpbWVuc2lvbnM7XG4gIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfM0QgfHwgdGFyZ2V0ID09PSBURVhUVVJFXzJEX0FSUkFZKSB7XG4gICAgaWYgKCF3aWR0aCAmJiAhaGVpZ2h0ICYmICFkZXB0aCkge1xuICAgICAgY29uc3Qgc2l6ZSA9IE1hdGguY2JydChudW1FbGVtZW50cyk7XG4gICAgICBpZiAoc2l6ZSAlIDEgIT09IDApIHtcbiAgICAgICAgdGhyb3cgXCJjYW4ndCBndWVzcyBjdWJlIHNpemUgb2YgYXJyYXkgb2YgbnVtRWxlbWVudHM6IFwiICsgbnVtRWxlbWVudHM7XG4gICAgICB9XG4gICAgICB3aWR0aCA9IHNpemU7XG4gICAgICBoZWlnaHQgPSBzaXplO1xuICAgICAgZGVwdGggPSBzaXplO1xuICAgIH0gZWxzZSBpZiAod2lkdGggJiYgKCFoZWlnaHQgfHwgIWRlcHRoKSkge1xuICAgICAgZGltZW5zaW9ucyA9IGd1ZXNzRGltZW5zaW9ucyhnbCwgdGFyZ2V0LCBoZWlnaHQsIGRlcHRoLCBudW1FbGVtZW50cyAvIHdpZHRoKTtcbiAgICAgIGhlaWdodCA9IGRpbWVuc2lvbnMud2lkdGg7XG4gICAgICBkZXB0aCA9IGRpbWVuc2lvbnMuaGVpZ2h0O1xuICAgIH0gZWxzZSBpZiAoaGVpZ2h0ICYmICghd2lkdGggfHwgIWRlcHRoKSkge1xuICAgICAgZGltZW5zaW9ucyA9IGd1ZXNzRGltZW5zaW9ucyhnbCwgdGFyZ2V0LCB3aWR0aCwgZGVwdGgsIG51bUVsZW1lbnRzIC8gaGVpZ2h0KTtcbiAgICAgIHdpZHRoID0gZGltZW5zaW9ucy53aWR0aDtcbiAgICAgIGRlcHRoID0gZGltZW5zaW9ucy5oZWlnaHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRpbWVuc2lvbnMgPSBndWVzc0RpbWVuc2lvbnMoZ2wsIHRhcmdldCwgd2lkdGgsIGhlaWdodCwgbnVtRWxlbWVudHMgLyBkZXB0aCk7XG4gICAgICB3aWR0aCA9IGRpbWVuc2lvbnMud2lkdGg7XG4gICAgICBoZWlnaHQgPSBkaW1lbnNpb25zLmhlaWdodDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZGltZW5zaW9ucyA9IGd1ZXNzRGltZW5zaW9ucyhnbCwgdGFyZ2V0LCB3aWR0aCwgaGVpZ2h0LCBudW1FbGVtZW50cyk7XG4gICAgd2lkdGggPSBkaW1lbnNpb25zLndpZHRoO1xuICAgIGhlaWdodCA9IGRpbWVuc2lvbnMuaGVpZ2h0O1xuICB9XG4gIHNldFNraXBTdGF0ZVRvRGVmYXVsdChnbCk7XG4gIGdsLnBpeGVsU3RvcmVpKFVOUEFDS19BTElHTk1FTlQsIG9wdGlvbnMudW5wYWNrQWxpZ25tZW50IHx8IDEpO1xuICBzZXRQYWNrU3RhdGUoZ2wsIG9wdGlvbnMpO1xuICBpZiAodGFyZ2V0ID09PSBURVhUVVJFX0NVQkVfTUFQKSB7XG4gICAgY29uc3QgZWxlbWVudHNQZXJFbGVtZW50ID0gYnl0ZXNQZXJFbGVtZW50IC8gc3JjLkJZVEVTX1BFUl9FTEVNRU5UO1xuICAgIGNvbnN0IGZhY2VTaXplID0gbnVtRWxlbWVudHMgLyA2ICogZWxlbWVudHNQZXJFbGVtZW50O1xuXG4gICAgZ2V0Q3ViZUZhY2VzV2l0aE5keChnbCwgb3B0aW9ucykuZm9yRWFjaChmID0+IHtcbiAgICAgIGNvbnN0IG9mZnNldCA9IGZhY2VTaXplICogZi5uZHg7XG4gICAgICBjb25zdCBkYXRhID0gc3JjLnN1YmFycmF5KG9mZnNldCwgb2Zmc2V0ICsgZmFjZVNpemUpO1xuICAgICAgZ2wudGV4SW1hZ2UyRChmLmZhY2UsIGxldmVsLCBpbnRlcm5hbEZvcm1hdCwgd2lkdGgsIGhlaWdodCwgMCwgZm9ybWF0LCB0eXBlLCBkYXRhKTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfM0QgfHwgdGFyZ2V0ID09PSBURVhUVVJFXzJEX0FSUkFZKSB7XG4gICAgZ2wudGV4SW1hZ2UzRCh0YXJnZXQsIGxldmVsLCBpbnRlcm5hbEZvcm1hdCwgd2lkdGgsIGhlaWdodCwgZGVwdGgsIDAsIGZvcm1hdCwgdHlwZSwgc3JjKTtcbiAgfSBlbHNlIHtcbiAgICBnbC50ZXhJbWFnZTJEKHRhcmdldCwgbGV2ZWwsIGludGVybmFsRm9ybWF0LCB3aWR0aCwgaGVpZ2h0LCAwLCBmb3JtYXQsIHR5cGUsIHNyYyk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogd2lkdGgsXG4gICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgZGVwdGg6IGRlcHRoLFxuICAgIHR5cGU6IHR5cGUsXG4gIH07XG59XG5cbi8qKlxuICogU2V0cyBhIHRleHR1cmUgd2l0aCBubyBjb250ZW50cyBvZiBhIGNlcnRhaW4gc2l6ZS4gSW4gb3RoZXIgd29yZHMgY2FsbHMgYGdsLnRleEltYWdlMkRgIHdpdGggYG51bGxgLlxuICogWW91IG11c3Qgc2V0IGBvcHRpb25zLndpZHRoYCBhbmQgYG9wdGlvbnMuaGVpZ2h0YC5cbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCB0aGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0XG4gKiBAcGFyYW0ge1dlYkdMVGV4dHVyZX0gdGV4IHRoZSBXZWJHTFRleHR1cmUgdG8gc2V0IHBhcmFtZXRlcnMgZm9yXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsLlRleHR1cmVPcHRpb25zfSBvcHRpb25zIEEgVGV4dHVyZU9wdGlvbnMgb2JqZWN0IHdpdGggd2hhdGV2ZXIgcGFyYW1ldGVycyB5b3Ugd2FudCBzZXQuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdGV4dHVyZXNcbiAqL1xuZnVuY3Rpb24gc2V0RW1wdHlUZXh0dXJlKGdsLCB0ZXgsIG9wdGlvbnMpIHtcbiAgY29uc3QgdGFyZ2V0ID0gb3B0aW9ucy50YXJnZXQgfHwgVEVYVFVSRV8yRDtcbiAgZ2wuYmluZFRleHR1cmUodGFyZ2V0LCB0ZXgpO1xuICBjb25zdCBsZXZlbCA9IG9wdGlvbnMubGV2ZWwgfHwgMDtcbiAgY29uc3QgaW50ZXJuYWxGb3JtYXQgPSBvcHRpb25zLmludGVybmFsRm9ybWF0IHx8IG9wdGlvbnMuZm9ybWF0IHx8IFJHQkE7XG4gIGNvbnN0IGZvcm1hdFR5cGUgPSBnZXRGb3JtYXRBbmRUeXBlRm9ySW50ZXJuYWxGb3JtYXQoaW50ZXJuYWxGb3JtYXQpO1xuICBjb25zdCBmb3JtYXQgPSBvcHRpb25zLmZvcm1hdCB8fCBmb3JtYXRUeXBlLmZvcm1hdDtcbiAgY29uc3QgdHlwZSA9IG9wdGlvbnMudHlwZSB8fCBmb3JtYXRUeXBlLnR5cGU7XG4gIHNldFBhY2tTdGF0ZShnbCwgb3B0aW9ucyk7XG4gIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfQ1VCRV9NQVApIHtcbiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgNjsgKytpaSkge1xuICAgICAgZ2wudGV4SW1hZ2UyRChURVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1ggKyBpaSwgbGV2ZWwsIGludGVybmFsRm9ybWF0LCBvcHRpb25zLndpZHRoLCBvcHRpb25zLmhlaWdodCwgMCwgZm9ybWF0LCB0eXBlLCBudWxsKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAodGFyZ2V0ID09PSBURVhUVVJFXzNEIHx8IHRhcmdldCA9PT0gVEVYVFVSRV8yRF9BUlJBWSkge1xuICAgIGdsLnRleEltYWdlM0QodGFyZ2V0LCBsZXZlbCwgaW50ZXJuYWxGb3JtYXQsIG9wdGlvbnMud2lkdGgsIG9wdGlvbnMuaGVpZ2h0LCBvcHRpb25zLmRlcHRoLCAwLCBmb3JtYXQsIHR5cGUsIG51bGwpO1xuICB9IGVsc2Uge1xuICAgIGdsLnRleEltYWdlMkQodGFyZ2V0LCBsZXZlbCwgaW50ZXJuYWxGb3JtYXQsIG9wdGlvbnMud2lkdGgsIG9wdGlvbnMuaGVpZ2h0LCAwLCBmb3JtYXQsIHR5cGUsIG51bGwpO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHRleHR1cmUgYmFzZWQgb24gdGhlIG9wdGlvbnMgcGFzc2VkIGluLlxuICpcbiAqIE5vdGU6IG1heSByZXNldCBVTlBBQ0tfQUxJR05NRU5ULCBVTlBBQ0tfUk9XX0xFTkdUSCwgVU5QQUNLX0lNQUdFX0hFSUdIVCwgVU5QQUNLX1NLSVBfSU1BR0VTXG4gKiBVTlBBQ0tfU0tJUF9QSVhFTFMsIGFuZCBVTlBBQ0tfU0tJUF9ST1dTXG4gKlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIHRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHRcbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IFtvcHRpb25zXSBBIFRleHR1cmVPcHRpb25zIG9iamVjdCB3aXRoIHdoYXRldmVyIHBhcmFtZXRlcnMgeW91IHdhbnQgc2V0LlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC5UZXh0dXJlUmVhZHlDYWxsYmFja30gW2NhbGxiYWNrXSBBIGNhbGxiYWNrIGNhbGxlZCB3aGVuIGFuIGltYWdlIGhhcyBiZWVuIGRvd25sb2FkZWQgYW5kIHVwbG9hZGVkIHRvIHRoZSB0ZXh0dXJlLlxuICogQHJldHVybiB7V2ViR0xUZXh0dXJlfSB0aGUgY3JlYXRlZCB0ZXh0dXJlLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3RleHR1cmVzXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVRleHR1cmUoZ2wsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgbm9vcDtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgZGVmYXVsdHMkMS50ZXh0dXJlT3B0aW9ucztcbiAgY29uc3QgdGV4ID0gZ2wuY3JlYXRlVGV4dHVyZSgpO1xuICBjb25zdCB0YXJnZXQgPSBvcHRpb25zLnRhcmdldCB8fCBURVhUVVJFXzJEO1xuICBsZXQgd2lkdGggID0gb3B0aW9ucy53aWR0aCAgfHwgMTtcbiAgbGV0IGhlaWdodCA9IG9wdGlvbnMuaGVpZ2h0IHx8IDE7XG4gIGNvbnN0IGludGVybmFsRm9ybWF0ID0gb3B0aW9ucy5pbnRlcm5hbEZvcm1hdCB8fCBSR0JBO1xuICBnbC5iaW5kVGV4dHVyZSh0YXJnZXQsIHRleCk7XG4gIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfQ1VCRV9NQVApIHtcbiAgICAvLyB0aGlzIHNob3VsZCBoYXZlIGJlZW4gdGhlIGRlZmF1bHQgZm9yIGN1YmVtYXBzIDooXG4gICAgZ2wudGV4UGFyYW1ldGVyaSh0YXJnZXQsIFRFWFRVUkVfV1JBUF9TLCBDTEFNUF9UT19FREdFKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKHRhcmdldCwgVEVYVFVSRV9XUkFQX1QsIENMQU1QX1RPX0VER0UpO1xuICB9XG4gIGxldCBzcmMgPSBvcHRpb25zLnNyYztcbiAgaWYgKHNyYykge1xuICAgIGlmICh0eXBlb2Ygc3JjID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHNyYyA9IHNyYyhnbCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgKHNyYykgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGxvYWRUZXh0dXJlRnJvbVVybChnbCwgdGV4LCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5QnVmZmVyJDEoc3JjKSB8fFxuICAgICAgICAgICAgICAgKEFycmF5LmlzQXJyYXkoc3JjKSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiBzcmNbMF0gPT09ICdudW1iZXInIHx8XG4gICAgICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkoc3JjWzBdKSB8fFxuICAgICAgICAgICAgICAgICAgICBpc0FycmF5QnVmZmVyJDEoc3JjWzBdKSlcbiAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKSB7XG4gICAgICBjb25zdCBkaW1lbnNpb25zID0gc2V0VGV4dHVyZUZyb21BcnJheShnbCwgdGV4LCBzcmMsIG9wdGlvbnMpO1xuICAgICAgd2lkdGggID0gZGltZW5zaW9ucy53aWR0aDtcbiAgICAgIGhlaWdodCA9IGRpbWVuc2lvbnMuaGVpZ2h0O1xuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShzcmMpICYmICh0eXBlb2YgKHNyY1swXSkgPT09ICdzdHJpbmcnIHx8IGlzVGV4SW1hZ2VTb3VyY2Uoc3JjWzBdKSkpIHtcbiAgICAgIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfQ1VCRV9NQVApIHtcbiAgICAgICAgbG9hZEN1YmVtYXBGcm9tVXJscyhnbCwgdGV4LCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2FkU2xpY2VzRnJvbVVybHMoZ2wsIHRleCwgb3B0aW9ucywgY2FsbGJhY2spO1xuICAgICAgfVxuICAgIH0gZWxzZSB7IC8vIGlmIChpc1RleEltYWdlU291cmNlKHNyYykpXG4gICAgICBzZXRUZXh0dXJlRnJvbUVsZW1lbnQoZ2wsIHRleCwgc3JjLCBvcHRpb25zKTtcbiAgICAgIHdpZHRoICA9IHNyYy53aWR0aDtcbiAgICAgIGhlaWdodCA9IHNyYy5oZWlnaHQ7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHNldEVtcHR5VGV4dHVyZShnbCwgdGV4LCBvcHRpb25zKTtcbiAgfVxuICBpZiAoc2hvdWxkQXV0b21hdGljYWxseVNldFRleHR1cmVGaWx0ZXJpbmdGb3JTaXplKG9wdGlvbnMpKSB7XG4gICAgc2V0VGV4dHVyZUZpbHRlcmluZ0ZvclNpemUoZ2wsIHRleCwgb3B0aW9ucywgd2lkdGgsIGhlaWdodCwgaW50ZXJuYWxGb3JtYXQpO1xuICB9XG4gIHNldFRleHR1cmVQYXJhbWV0ZXJzKGdsLCB0ZXgsIG9wdGlvbnMpO1xuICByZXR1cm4gdGV4O1xufVxuXG4vKipcbiAqIFJlc2l6ZXMgYSB0ZXh0dXJlIGJhc2VkIG9uIHRoZSBvcHRpb25zIHBhc3NlZCBpbi5cbiAqXG4gKiBOb3RlOiBUaGlzIGlzIG5vdCBhIGdlbmVyaWMgcmVzaXplIGFueXRoaW5nIGZ1bmN0aW9uLlxuICogSXQncyBtb3N0bHkgdXNlZCBieSB7QGxpbmsgbW9kdWxlOnR3Z2wucmVzaXplRnJhbWVidWZmZXJJbmZvfVxuICogSXQgd2lsbCB1c2UgYG9wdGlvbnMuc3JjYCBpZiBpdCBleGlzdHMgdG8gdHJ5IHRvIGRldGVybWluZSBhIGB0eXBlYFxuICogb3RoZXJ3aXNlIGl0IHdpbGwgYXNzdW1lIGBnbC5VTlNJR05FRF9CWVRFYC4gTm8gZGF0YSBpcyBwcm92aWRlZFxuICogZm9yIHRoZSB0ZXh0dXJlLiBUZXh0dXJlIHBhcmFtZXRlcnMgd2lsbCBiZSBzZXQgYWNjb3JkaW5nbHlcbiAqXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dFxuICogQHBhcmFtIHtXZWJHTFRleHR1cmV9IHRleCB0aGUgdGV4dHVyZSB0byByZXNpemVcbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9IG9wdGlvbnMgQSBUZXh0dXJlT3B0aW9ucyBvYmplY3Qgd2l0aCB3aGF0ZXZlciBwYXJhbWV0ZXJzIHlvdSB3YW50IHNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2lkdGhdIHRoZSBuZXcgd2lkdGguIElmIG5vdCBwYXNzZWQgaW4gd2lsbCB1c2UgYG9wdGlvbnMud2lkdGhgXG4gKiBAcGFyYW0ge251bWJlcn0gW2hlaWdodF0gdGhlIG5ldyBoZWlnaHQuIElmIG5vdCBwYXNzZWQgaW4gd2lsbCB1c2UgYG9wdGlvbnMuaGVpZ2h0YFxuICogQHBhcmFtIHtudW1iZXJ9IFtkZXB0aF0gdGhlIG5ldyBkZXB0aC4gSWYgbm90IHBhc3NlZCBpbiB3aWxsIHVzZSBgb3B0aW9ucy5kZXB0aGBcbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC90ZXh0dXJlc1xuICovXG5mdW5jdGlvbiByZXNpemVUZXh0dXJlKGdsLCB0ZXgsIG9wdGlvbnMsIHdpZHRoLCBoZWlnaHQsIGRlcHRoKSB7XG4gIHdpZHRoID0gd2lkdGggfHwgb3B0aW9ucy53aWR0aDtcbiAgaGVpZ2h0ID0gaGVpZ2h0IHx8IG9wdGlvbnMuaGVpZ2h0O1xuICBkZXB0aCA9IGRlcHRoIHx8IG9wdGlvbnMuZGVwdGg7XG4gIGNvbnN0IHRhcmdldCA9IG9wdGlvbnMudGFyZ2V0IHx8IFRFWFRVUkVfMkQ7XG4gIGdsLmJpbmRUZXh0dXJlKHRhcmdldCwgdGV4KTtcbiAgY29uc3QgbGV2ZWwgPSBvcHRpb25zLmxldmVsIHx8IDA7XG4gIGNvbnN0IGludGVybmFsRm9ybWF0ID0gb3B0aW9ucy5pbnRlcm5hbEZvcm1hdCB8fCBvcHRpb25zLmZvcm1hdCB8fCBSR0JBO1xuICBjb25zdCBmb3JtYXRUeXBlID0gZ2V0Rm9ybWF0QW5kVHlwZUZvckludGVybmFsRm9ybWF0KGludGVybmFsRm9ybWF0KTtcbiAgY29uc3QgZm9ybWF0ID0gb3B0aW9ucy5mb3JtYXQgfHwgZm9ybWF0VHlwZS5mb3JtYXQ7XG4gIGxldCB0eXBlO1xuICBjb25zdCBzcmMgPSBvcHRpb25zLnNyYztcbiAgaWYgKCFzcmMpIHtcbiAgICB0eXBlID0gb3B0aW9ucy50eXBlIHx8IGZvcm1hdFR5cGUudHlwZTtcbiAgfSBlbHNlIGlmIChpc0FycmF5QnVmZmVyJDEoc3JjKSB8fCAoQXJyYXkuaXNBcnJheShzcmMpICYmIHR5cGVvZiAoc3JjWzBdKSA9PT0gJ251bWJlcicpKSB7XG4gICAgdHlwZSA9IG9wdGlvbnMudHlwZSB8fCBnZXRUZXh0dXJlVHlwZUZvckFycmF5VHlwZShnbCwgc3JjLCBmb3JtYXRUeXBlLnR5cGUpO1xuICB9IGVsc2Uge1xuICAgIHR5cGUgPSBvcHRpb25zLnR5cGUgfHwgZm9ybWF0VHlwZS50eXBlO1xuICB9XG4gIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfQ1VCRV9NQVApIHtcbiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgNjsgKytpaSkge1xuICAgICAgZ2wudGV4SW1hZ2UyRChURVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1ggKyBpaSwgbGV2ZWwsIGludGVybmFsRm9ybWF0LCB3aWR0aCwgaGVpZ2h0LCAwLCBmb3JtYXQsIHR5cGUsIG51bGwpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0YXJnZXQgPT09IFRFWFRVUkVfM0QgfHwgdGFyZ2V0ID09PSBURVhUVVJFXzJEX0FSUkFZKSB7XG4gICAgZ2wudGV4SW1hZ2UzRCh0YXJnZXQsIGxldmVsLCBpbnRlcm5hbEZvcm1hdCwgd2lkdGgsIGhlaWdodCwgZGVwdGgsIDAsIGZvcm1hdCwgdHlwZSwgbnVsbCk7XG4gIH0gZWxzZSB7XG4gICAgZ2wudGV4SW1hZ2UyRCh0YXJnZXQsIGxldmVsLCBpbnRlcm5hbEZvcm1hdCwgd2lkdGgsIGhlaWdodCwgMCwgZm9ybWF0LCB0eXBlLCBudWxsKTtcbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgc3JjIGlzIGFuIGFzeW5jIHJlcXVlc3QuXG4gKiBpZiBzcmMgaXMgYSBzdHJpbmcgd2UncmUgZ29pbmcgdG8gZG93bmxvYWQgYW4gaW1hZ2VcbiAqIGlmIHNyYyBpcyBhbiBhcnJheSBvZiBzdHJpbmdzIHdlJ3JlIGdvaW5nIHRvIGRvd25sb2FkIGN1YmVtYXAgaW1hZ2VzXG4gKiBAcGFyYW0geyp9IHNyYyBUaGUgc3JjIGZyb20gYSBUZXh0dXJlT3B0aW9uc1xuICogQHJldHVybnMge2Jvb2x9IHRydWUgaWYgc3JjIGlzIGFzeW5jLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gaXNBc3luY1NyYyhzcmMpIHtcbiAgcmV0dXJuIHR5cGVvZiBzcmMgPT09ICdzdHJpbmcnIHx8XG4gICAgICAgICAoQXJyYXkuaXNBcnJheShzcmMpICYmIHR5cGVvZiBzcmNbMF0gPT09ICdzdHJpbmcnKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgYnVuY2ggb2YgdGV4dHVyZXMgYmFzZWQgb24gdGhlIHBhc3NlZCBpbiBvcHRpb25zLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgIGNvbnN0IHRleHR1cmVzID0gdHdnbC5jcmVhdGVUZXh0dXJlcyhnbCwge1xuICogICAgICAgLy8gYSBwb3dlciBvZiAyIGltYWdlXG4gKiAgICAgICBoZnRJY29uOiB7IHNyYzogXCJpbWFnZXMvaGZ0LWljb24tMTYucG5nXCIsIG1hZzogZ2wuTkVBUkVTVCB9LFxuICogICAgICAgLy8gYSBub24tcG93ZXIgb2YgMiBpbWFnZVxuICogICAgICAgY2xvdmVyOiB7IHNyYzogXCJpbWFnZXMvY2xvdmVyLmpwZ1wiIH0sXG4gKiAgICAgICAvLyBGcm9tIGEgY2FudmFzXG4gKiAgICAgICBmcm9tQ2FudmFzOiB7IHNyYzogY3R4LmNhbnZhcyB9LFxuICogICAgICAgLy8gQSBjdWJlbWFwIGZyb20gNiBpbWFnZXNcbiAqICAgICAgIHlva29oYW1hOiB7XG4gKiAgICAgICAgIHRhcmdldDogZ2wuVEVYVFVSRV9DVUJFX01BUCxcbiAqICAgICAgICAgc3JjOiBbXG4gKiAgICAgICAgICAgJ2ltYWdlcy95b2tvaGFtYS9wb3N4LmpwZycsXG4gKiAgICAgICAgICAgJ2ltYWdlcy95b2tvaGFtYS9uZWd4LmpwZycsXG4gKiAgICAgICAgICAgJ2ltYWdlcy95b2tvaGFtYS9wb3N5LmpwZycsXG4gKiAgICAgICAgICAgJ2ltYWdlcy95b2tvaGFtYS9uZWd5LmpwZycsXG4gKiAgICAgICAgICAgJ2ltYWdlcy95b2tvaGFtYS9wb3N6LmpwZycsXG4gKiAgICAgICAgICAgJ2ltYWdlcy95b2tvaGFtYS9uZWd6LmpwZycsXG4gKiAgICAgICAgIF0sXG4gKiAgICAgICB9LFxuICogICAgICAgLy8gQSBjdWJlbWFwIGZyb20gMSBpbWFnZSAoY2FuIGJlIDF4NiwgMngzLCAzeDIsIDZ4MSlcbiAqICAgICAgIGdvbGRlbmdhdGU6IHtcbiAqICAgICAgICAgdGFyZ2V0OiBnbC5URVhUVVJFX0NVQkVfTUFQLFxuICogICAgICAgICBzcmM6ICdpbWFnZXMvZ29sZGVuZ2F0ZS5qcGcnLFxuICogICAgICAgfSxcbiAqICAgICAgIC8vIEEgMngyIHBpeGVsIHRleHR1cmUgZnJvbSBhIEphdmFTY3JpcHQgYXJyYXlcbiAqICAgICAgIGNoZWNrZXI6IHtcbiAqICAgICAgICAgbWFnOiBnbC5ORUFSRVNULFxuICogICAgICAgICBtaW46IGdsLkxJTkVBUixcbiAqICAgICAgICAgc3JjOiBbXG4gKiAgICAgICAgICAgMjU1LDI1NSwyNTUsMjU1LFxuICogICAgICAgICAgIDE5MiwxOTIsMTkyLDI1NSxcbiAqICAgICAgICAgICAxOTIsMTkyLDE5MiwyNTUsXG4gKiAgICAgICAgICAgMjU1LDI1NSwyNTUsMjU1LFxuICogICAgICAgICBdLFxuICogICAgICAgfSxcbiAqICAgICAgIC8vIGEgMXgyIHBpeGVsIHRleHR1cmUgZnJvbSBhIHR5cGVkIGFycmF5LlxuICogICAgICAgc3RyaXBlOiB7XG4gKiAgICAgICAgIG1hZzogZ2wuTkVBUkVTVCxcbiAqICAgICAgICAgbWluOiBnbC5MSU5FQVIsXG4gKiAgICAgICAgIGZvcm1hdDogZ2wuTFVNSU5BTkNFLFxuICogICAgICAgICBzcmM6IG5ldyBVaW50OEFycmF5KFtcbiAqICAgICAgICAgICAyNTUsXG4gKiAgICAgICAgICAgMTI4LFxuICogICAgICAgICAgIDI1NSxcbiAqICAgICAgICAgICAxMjgsXG4gKiAgICAgICAgICAgMjU1LFxuICogICAgICAgICAgIDEyOCxcbiAqICAgICAgICAgICAyNTUsXG4gKiAgICAgICAgICAgMTI4LFxuICogICAgICAgICBdKSxcbiAqICAgICAgICAgd2lkdGg6IDEsXG4gKiAgICAgICB9LFxuICogICAgIH0pO1xuICpcbiAqIE5vd1xuICpcbiAqICogICBgdGV4dHVyZXMuaGZ0SWNvbmAgd2lsbCBiZSBhIDJkIHRleHR1cmVcbiAqICogICBgdGV4dHVyZXMuY2xvdmVyYCB3aWxsIGJlIGEgMmQgdGV4dHVyZVxuICogKiAgIGB0ZXh0dXJlcy5mcm9tQ2FudmFzYCB3aWxsIGJlIGEgMmQgdGV4dHVyZVxuICogKiAgIGB0ZXh0dXJlcy55b2hvaGFtYWAgd2lsbCBiZSBhIGN1YmVtYXAgdGV4dHVyZVxuICogKiAgIGB0ZXh0dXJlcy5nb2xkZW5nYXRlYCB3aWxsIGJlIGEgY3ViZW1hcCB0ZXh0dXJlXG4gKiAqICAgYHRleHR1cmVzLmNoZWNrZXJgIHdpbGwgYmUgYSAyZCB0ZXh0dXJlXG4gKiAqICAgYHRleHR1cmVzLnN0cmlwZWAgd2lsbCBiZSBhIDJkIHRleHR1cmVcbiAqXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dFxuICogQHBhcmFtIHtPYmplY3QuPHN0cmluZyxtb2R1bGU6dHdnbC5UZXh0dXJlT3B0aW9ucz59IG9wdGlvbnMgQSBvYmplY3Qgb2YgVGV4dHVyZU9wdGlvbnMgb25lIHBlciB0ZXh0dXJlLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC5UZXh0dXJlc1JlYWR5Q2FsbGJhY2t9IFtjYWxsYmFja10gQSBjYWxsYmFjayBjYWxsZWQgd2hlbiBhbGwgdGV4dHVyZXMgaGF2ZSBiZWVuIGRvd25sb2FkZWQuXG4gKiBAcmV0dXJuIHtPYmplY3QuPHN0cmluZyxXZWJHTFRleHR1cmU+fSB0aGUgY3JlYXRlZCB0ZXh0dXJlcyBieSBuYW1lXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdGV4dHVyZXNcbiAqL1xuZnVuY3Rpb24gY3JlYXRlVGV4dHVyZXMoZ2wsIHRleHR1cmVPcHRpb25zLCBjYWxsYmFjaykge1xuICBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IG5vb3A7XG4gIGxldCBudW1Eb3dubG9hZGluZyA9IDA7XG4gIGNvbnN0IGVycm9ycyA9IFtdO1xuICBjb25zdCB0ZXh0dXJlcyA9IHt9O1xuICBjb25zdCBpbWFnZXMgPSB7fTtcblxuICBmdW5jdGlvbiBjYWxsQ2FsbGJhY2tJZlJlYWR5KCkge1xuICAgIGlmIChudW1Eb3dubG9hZGluZyA9PT0gMCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgY2FsbGJhY2soZXJyb3JzLmxlbmd0aCA/IGVycm9ycyA6IHVuZGVmaW5lZCwgdGV4dHVyZXMsIGltYWdlcyk7XG4gICAgICB9LCAwKTtcbiAgICB9XG4gIH1cblxuICBPYmplY3Qua2V5cyh0ZXh0dXJlT3B0aW9ucykuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRleHR1cmVPcHRpb25zW25hbWVdO1xuICAgIGxldCBvbkxvYWRGbjtcbiAgICBpZiAoaXNBc3luY1NyYyhvcHRpb25zLnNyYykpIHtcbiAgICAgIG9uTG9hZEZuID0gZnVuY3Rpb24oZXJyLCB0ZXgsIGltZykge1xuICAgICAgICBpbWFnZXNbbmFtZV0gPSBpbWc7XG4gICAgICAgIC0tbnVtRG93bmxvYWRpbmc7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBlcnJvcnMucHVzaChlcnIpO1xuICAgICAgICB9XG4gICAgICAgIGNhbGxDYWxsYmFja0lmUmVhZHkoKTtcbiAgICAgIH07XG4gICAgICArK251bURvd25sb2FkaW5nO1xuICAgIH1cbiAgICB0ZXh0dXJlc1tuYW1lXSA9IGNyZWF0ZVRleHR1cmUoZ2wsIG9wdGlvbnMsIG9uTG9hZEZuKTtcbiAgfSk7XG5cbiAgLy8gcXVldWUgdGhlIGNhbGxiYWNrIGlmIHRoZXJlIGFyZSBubyBpbWFnZXMgdG8gZG93bmxvYWQuXG4gIC8vIFdlIGRvIHRoaXMgYmVjYXVzZSBpZiB5b3VyIGNvZGUgaXMgc3RydWN0dXJlZCB0byB3YWl0IGZvclxuICAvLyBpbWFnZXMgdG8gZG93bmxvYWQgYnV0IHRoZW4geW91IGNvbW1lbnQgb3V0IGFsbCB0aGUgYXN5bmNcbiAgLy8gaW1hZ2VzIHlvdXIgY29kZSB3b3VsZCBicmVhay5cbiAgY2FsbENhbGxiYWNrSWZSZWFkeSgpO1xuXG4gIHJldHVybiB0ZXh0dXJlcztcbn1cblxudmFyIHRleHR1cmVzID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIHNldFRleHR1cmVEZWZhdWx0c186IHNldERlZmF1bHRzJDEsXG4gIGNyZWF0ZVNhbXBsZXI6IGNyZWF0ZVNhbXBsZXIsXG4gIGNyZWF0ZVNhbXBsZXJzOiBjcmVhdGVTYW1wbGVycyxcbiAgc2V0U2FtcGxlclBhcmFtZXRlcnM6IHNldFNhbXBsZXJQYXJhbWV0ZXJzLFxuICBjcmVhdGVUZXh0dXJlOiBjcmVhdGVUZXh0dXJlLFxuICBzZXRFbXB0eVRleHR1cmU6IHNldEVtcHR5VGV4dHVyZSxcbiAgc2V0VGV4dHVyZUZyb21BcnJheTogc2V0VGV4dHVyZUZyb21BcnJheSxcbiAgbG9hZFRleHR1cmVGcm9tVXJsOiBsb2FkVGV4dHVyZUZyb21VcmwsXG4gIHNldFRleHR1cmVGcm9tRWxlbWVudDogc2V0VGV4dHVyZUZyb21FbGVtZW50LFxuICBzZXRUZXh0dXJlRmlsdGVyaW5nRm9yU2l6ZTogc2V0VGV4dHVyZUZpbHRlcmluZ0ZvclNpemUsXG4gIHNldFRleHR1cmVQYXJhbWV0ZXJzOiBzZXRUZXh0dXJlUGFyYW1ldGVycyxcbiAgc2V0RGVmYXVsdFRleHR1cmVDb2xvcjogc2V0RGVmYXVsdFRleHR1cmVDb2xvcixcbiAgY3JlYXRlVGV4dHVyZXM6IGNyZWF0ZVRleHR1cmVzLFxuICByZXNpemVUZXh0dXJlOiByZXNpemVUZXh0dXJlLFxuICBjYW5HZW5lcmF0ZU1pcG1hcDogY2FuR2VuZXJhdGVNaXBtYXAsXG4gIGNhbkZpbHRlcjogY2FuRmlsdGVyLFxuICBnZXROdW1Db21wb25lbnRzRm9yRm9ybWF0OiBnZXROdW1Db21wb25lbnRzRm9yRm9ybWF0LFxuICBnZXRCeXRlc1BlckVsZW1lbnRGb3JJbnRlcm5hbEZvcm1hdDogZ2V0Qnl0ZXNQZXJFbGVtZW50Rm9ySW50ZXJuYWxGb3JtYXQsXG4gIGdldEZvcm1hdEFuZFR5cGVGb3JJbnRlcm5hbEZvcm1hdDogZ2V0Rm9ybWF0QW5kVHlwZUZvckludGVybmFsRm9ybWF0XG59KTtcblxuLypcbiAqIENvcHlyaWdodCAyMDE5IEdyZWdnIFRhdmFyZXNcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLFxuICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvblxuICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsXG4gKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcbiAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMXG4gKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbiAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVJcbiAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG4vKipcbiAqIExvdyBsZXZlbCBzaGFkZXIgcHJvZ3JhbSByZWxhdGVkIGZ1bmN0aW9uc1xuICpcbiAqIFlvdSBzaG91bGQgZ2VuZXJhbGx5IG5vdCBuZWVkIHRvIHVzZSB0aGVzZSBmdW5jdGlvbnMuIFRoZXkgYXJlIHByb3ZpZGVkXG4gKiBmb3IgdGhvc2UgY2FzZXMgd2hlcmUgeW91J3JlIGRvaW5nIHNvbWV0aGluZyBvdXQgb2YgdGhlIG9yZGluYXJ5XG4gKiBhbmQgeW91IG5lZWQgbG93ZXIgbGV2ZWwgYWNjZXNzLlxuICpcbiAqIEZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IHRoZXkgYXJlIGF2YWlsYWJsZSBhdCBib3RoIGB0d2dsLnByb2dyYW1zYCBhbmQgYHR3Z2xgXG4gKiBpdHNlbGZcbiAqXG4gKiBTZWUge0BsaW5rIG1vZHVsZTp0d2dsfSBmb3IgY29yZSBmdW5jdGlvbnNcbiAqXG4gKiBAbW9kdWxlIHR3Z2wvcHJvZ3JhbXNcbiAqL1xuXG5jb25zdCBlcnJvciQxID0gZXJyb3I7XG5jb25zdCB3YXJuJDEgPSB3YXJuO1xuZnVuY3Rpb24gZ2V0RWxlbWVudEJ5SWQoaWQpIHtcbiAgcmV0dXJuICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKVxuICAgICAgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZClcbiAgICAgIDogbnVsbDtcbn1cblxuY29uc3QgVEVYVFVSRTAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4NGMwO1xuY29uc3QgRFlOQU1JQ19EUkFXICAgICAgICAgICAgICAgICAgID0gMHg4OGU4O1xuXG5jb25zdCBBUlJBWV9CVUZGRVIkMSAgICAgICAgICAgICAgICAgICA9IDB4ODg5MjtcbmNvbnN0IEVMRU1FTlRfQVJSQVlfQlVGRkVSJDEgICAgICAgICAgID0gMHg4ODkzO1xuY29uc3QgVU5JRk9STV9CVUZGRVIgICAgICAgICAgICAgICAgID0gMHg4YTExO1xuY29uc3QgVFJBTlNGT1JNX0ZFRURCQUNLX0JVRkZFUiAgICAgID0gMHg4YzhlO1xuXG5jb25zdCBUUkFOU0ZPUk1fRkVFREJBQ0sgICAgICAgICAgICAgPSAweDhlMjI7XG5cbmNvbnN0IENPTVBJTEVfU1RBVFVTICAgICAgICAgICAgICAgICA9IDB4OGI4MTtcbmNvbnN0IExJTktfU1RBVFVTICAgICAgICAgICAgICAgICAgICA9IDB4OGI4MjtcbmNvbnN0IEZSQUdNRU5UX1NIQURFUiAgICAgICAgICAgICAgICA9IDB4OGIzMDtcbmNvbnN0IFZFUlRFWF9TSEFERVIgICAgICAgICAgICAgICAgICA9IDB4OGIzMTtcbmNvbnN0IFNFUEFSQVRFX0FUVFJJQlMgICAgICAgICAgICAgICA9IDB4OGM4ZDtcblxuY29uc3QgQUNUSVZFX1VOSUZPUk1TICAgICAgICAgICAgICAgID0gMHg4Yjg2O1xuY29uc3QgQUNUSVZFX0FUVFJJQlVURVMgICAgICAgICAgICAgID0gMHg4Yjg5O1xuY29uc3QgVFJBTlNGT1JNX0ZFRURCQUNLX1ZBUllJTkdTICAgID0gMHg4YzgzO1xuY29uc3QgQUNUSVZFX1VOSUZPUk1fQkxPQ0tTICAgICAgICAgID0gMHg4YTM2O1xuY29uc3QgVU5JRk9STV9CTE9DS19SRUZFUkVOQ0VEX0JZX1ZFUlRFWF9TSEFERVIgICA9IDB4OGE0NDtcbmNvbnN0IFVOSUZPUk1fQkxPQ0tfUkVGRVJFTkNFRF9CWV9GUkFHTUVOVF9TSEFERVIgPSAweDhhNDY7XG5jb25zdCBVTklGT1JNX0JMT0NLX0RBVEFfU0laRSAgICAgICAgICAgICAgICAgICAgID0gMHg4YTQwO1xuY29uc3QgVU5JRk9STV9CTE9DS19BQ1RJVkVfVU5JRk9STV9JTkRJQ0VTICAgICAgICA9IDB4OGE0MztcblxuY29uc3QgRkxPQVQkMyAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4MTQwNjtcbmNvbnN0IEZMT0FUX1ZFQzIgICAgICAgICAgICAgICAgICAgID0gMHg4QjUwO1xuY29uc3QgRkxPQVRfVkVDMyAgICAgICAgICAgICAgICAgICAgPSAweDhCNTE7XG5jb25zdCBGTE9BVF9WRUM0ICAgICAgICAgICAgICAgICAgICA9IDB4OEI1MjtcbmNvbnN0IElOVCQzICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDE0MDQ7XG5jb25zdCBJTlRfVkVDMiAgICAgICAgICAgICAgICAgICAgICA9IDB4OEI1MztcbmNvbnN0IElOVF9WRUMzICAgICAgICAgICAgICAgICAgICAgID0gMHg4QjU0O1xuY29uc3QgSU5UX1ZFQzQgICAgICAgICAgICAgICAgICAgICAgPSAweDhCNTU7XG5jb25zdCBCT09MICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4OEI1NjtcbmNvbnN0IEJPT0xfVkVDMiAgICAgICAgICAgICAgICAgICAgID0gMHg4QjU3O1xuY29uc3QgQk9PTF9WRUMzICAgICAgICAgICAgICAgICAgICAgPSAweDhCNTg7XG5jb25zdCBCT09MX1ZFQzQgICAgICAgICAgICAgICAgICAgICA9IDB4OEI1OTtcbmNvbnN0IEZMT0FUX01BVDIgICAgICAgICAgICAgICAgICAgID0gMHg4QjVBO1xuY29uc3QgRkxPQVRfTUFUMyAgICAgICAgICAgICAgICAgICAgPSAweDhCNUI7XG5jb25zdCBGTE9BVF9NQVQ0ICAgICAgICAgICAgICAgICAgICA9IDB4OEI1QztcbmNvbnN0IFNBTVBMRVJfMkQgICAgICAgICAgICAgICAgICAgID0gMHg4QjVFO1xuY29uc3QgU0FNUExFUl9DVUJFICAgICAgICAgICAgICAgICAgPSAweDhCNjA7XG5jb25zdCBTQU1QTEVSXzNEICAgICAgICAgICAgICAgICAgICA9IDB4OEI1RjtcbmNvbnN0IFNBTVBMRVJfMkRfU0hBRE9XICAgICAgICAgICAgID0gMHg4QjYyO1xuY29uc3QgRkxPQVRfTUFUMngzICAgICAgICAgICAgICAgICAgPSAweDhCNjU7XG5jb25zdCBGTE9BVF9NQVQyeDQgICAgICAgICAgICAgICAgICA9IDB4OEI2NjtcbmNvbnN0IEZMT0FUX01BVDN4MiAgICAgICAgICAgICAgICAgID0gMHg4QjY3O1xuY29uc3QgRkxPQVRfTUFUM3g0ICAgICAgICAgICAgICAgICAgPSAweDhCNjg7XG5jb25zdCBGTE9BVF9NQVQ0eDIgICAgICAgICAgICAgICAgICA9IDB4OEI2OTtcbmNvbnN0IEZMT0FUX01BVDR4MyAgICAgICAgICAgICAgICAgID0gMHg4QjZBO1xuY29uc3QgU0FNUExFUl8yRF9BUlJBWSAgICAgICAgICAgICAgPSAweDhEQzE7XG5jb25zdCBTQU1QTEVSXzJEX0FSUkFZX1NIQURPVyAgICAgICA9IDB4OERDNDtcbmNvbnN0IFNBTVBMRVJfQ1VCRV9TSEFET1cgICAgICAgICAgID0gMHg4REM1O1xuY29uc3QgVU5TSUdORURfSU5UJDMgICAgICAgICAgICAgICAgICA9IDB4MTQwNTtcbmNvbnN0IFVOU0lHTkVEX0lOVF9WRUMyICAgICAgICAgICAgID0gMHg4REM2O1xuY29uc3QgVU5TSUdORURfSU5UX1ZFQzMgICAgICAgICAgICAgPSAweDhEQzc7XG5jb25zdCBVTlNJR05FRF9JTlRfVkVDNCAgICAgICAgICAgICA9IDB4OERDODtcbmNvbnN0IElOVF9TQU1QTEVSXzJEICAgICAgICAgICAgICAgID0gMHg4RENBO1xuY29uc3QgSU5UX1NBTVBMRVJfM0QgICAgICAgICAgICAgICAgPSAweDhEQ0I7XG5jb25zdCBJTlRfU0FNUExFUl9DVUJFICAgICAgICAgICAgICA9IDB4OERDQztcbmNvbnN0IElOVF9TQU1QTEVSXzJEX0FSUkFZICAgICAgICAgID0gMHg4RENGO1xuY29uc3QgVU5TSUdORURfSU5UX1NBTVBMRVJfMkQgICAgICAgPSAweDhERDI7XG5jb25zdCBVTlNJR05FRF9JTlRfU0FNUExFUl8zRCAgICAgICA9IDB4OEREMztcbmNvbnN0IFVOU0lHTkVEX0lOVF9TQU1QTEVSX0NVQkUgICAgID0gMHg4REQ0O1xuY29uc3QgVU5TSUdORURfSU5UX1NBTVBMRVJfMkRfQVJSQVkgPSAweDhERDc7XG5cbmNvbnN0IFRFWFRVUkVfMkQkMSAgICAgICAgICAgICAgICAgICAgPSAweDBERTE7XG5jb25zdCBURVhUVVJFX0NVQkVfTUFQJDEgICAgICAgICAgICAgID0gMHg4NTEzO1xuY29uc3QgVEVYVFVSRV8zRCQxICAgICAgICAgICAgICAgICAgICA9IDB4ODA2RjtcbmNvbnN0IFRFWFRVUkVfMkRfQVJSQVkkMSAgICAgICAgICAgICAgPSAweDhDMUE7XG5cbmNvbnN0IHR5cGVNYXAgPSB7fTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIGJpbmQgcG9pbnQgZm9yIGEgZ2l2ZW4gc2FtcGxlciB0eXBlXG4gKi9cbmZ1bmN0aW9uIGdldEJpbmRQb2ludEZvclNhbXBsZXJUeXBlKGdsLCB0eXBlKSB7XG4gIHJldHVybiB0eXBlTWFwW3R5cGVdLmJpbmRQb2ludDtcbn1cblxuLy8gVGhpcyBraW5kIG9mIHN1Y2tzISBJZiB5b3UgY291bGQgY29tcG9zZSBmdW5jdGlvbnMgYXMgaW4gYHZhciBmbiA9IGdsW25hbWVdO2Bcbi8vIHRoaXMgY29kZSBjb3VsZCBiZSBhIGxvdCBzbWFsbGVyIGJ1dCB0aGF0IGlzIHNhZGx5IHJlYWxseSBzbG93IChUX1QpXG5cbmZ1bmN0aW9uIGZsb2F0U2V0dGVyKGdsLCBsb2NhdGlvbikge1xuICByZXR1cm4gZnVuY3Rpb24odikge1xuICAgIGdsLnVuaWZvcm0xZihsb2NhdGlvbiwgdik7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGZsb2F0QXJyYXlTZXR0ZXIoZ2wsIGxvY2F0aW9uKSB7XG4gIHJldHVybiBmdW5jdGlvbih2KSB7XG4gICAgZ2wudW5pZm9ybTFmdihsb2NhdGlvbiwgdik7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGZsb2F0VmVjMlNldHRlcihnbCwgbG9jYXRpb24pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHYpIHtcbiAgICBnbC51bmlmb3JtMmZ2KGxvY2F0aW9uLCB2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZmxvYXRWZWMzU2V0dGVyKGdsLCBsb2NhdGlvbikge1xuICByZXR1cm4gZnVuY3Rpb24odikge1xuICAgIGdsLnVuaWZvcm0zZnYobG9jYXRpb24sIHYpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBmbG9hdFZlYzRTZXR0ZXIoZ2wsIGxvY2F0aW9uKSB7XG4gIHJldHVybiBmdW5jdGlvbih2KSB7XG4gICAgZ2wudW5pZm9ybTRmdihsb2NhdGlvbiwgdik7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGludFNldHRlcihnbCwgbG9jYXRpb24pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHYpIHtcbiAgICBnbC51bmlmb3JtMWkobG9jYXRpb24sIHYpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBpbnRBcnJheVNldHRlcihnbCwgbG9jYXRpb24pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHYpIHtcbiAgICBnbC51bmlmb3JtMWl2KGxvY2F0aW9uLCB2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gaW50VmVjMlNldHRlcihnbCwgbG9jYXRpb24pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHYpIHtcbiAgICBnbC51bmlmb3JtMml2KGxvY2F0aW9uLCB2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gaW50VmVjM1NldHRlcihnbCwgbG9jYXRpb24pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHYpIHtcbiAgICBnbC51bmlmb3JtM2l2KGxvY2F0aW9uLCB2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gaW50VmVjNFNldHRlcihnbCwgbG9jYXRpb24pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHYpIHtcbiAgICBnbC51bmlmb3JtNGl2KGxvY2F0aW9uLCB2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdWludFNldHRlcihnbCwgbG9jYXRpb24pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHYpIHtcbiAgICBnbC51bmlmb3JtMXVpKGxvY2F0aW9uLCB2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdWludEFycmF5U2V0dGVyKGdsLCBsb2NhdGlvbikge1xuICByZXR1cm4gZnVuY3Rpb24odikge1xuICAgIGdsLnVuaWZvcm0xdWl2KGxvY2F0aW9uLCB2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdWludFZlYzJTZXR0ZXIoZ2wsIGxvY2F0aW9uKSB7XG4gIHJldHVybiBmdW5jdGlvbih2KSB7XG4gICAgZ2wudW5pZm9ybTJ1aXYobG9jYXRpb24sIHYpO1xuICB9O1xufVxuXG5mdW5jdGlvbiB1aW50VmVjM1NldHRlcihnbCwgbG9jYXRpb24pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHYpIHtcbiAgICBnbC51bmlmb3JtM3Vpdihsb2NhdGlvbiwgdik7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHVpbnRWZWM0U2V0dGVyKGdsLCBsb2NhdGlvbikge1xuICByZXR1cm4gZnVuY3Rpb24odikge1xuICAgIGdsLnVuaWZvcm00dWl2KGxvY2F0aW9uLCB2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZmxvYXRNYXQyU2V0dGVyKGdsLCBsb2NhdGlvbikge1xuICByZXR1cm4gZnVuY3Rpb24odikge1xuICAgIGdsLnVuaWZvcm1NYXRyaXgyZnYobG9jYXRpb24sIGZhbHNlLCB2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZmxvYXRNYXQzU2V0dGVyKGdsLCBsb2NhdGlvbikge1xuICByZXR1cm4gZnVuY3Rpb24odikge1xuICAgIGdsLnVuaWZvcm1NYXRyaXgzZnYobG9jYXRpb24sIGZhbHNlLCB2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZmxvYXRNYXQ0U2V0dGVyKGdsLCBsb2NhdGlvbikge1xuICByZXR1cm4gZnVuY3Rpb24odikge1xuICAgIGdsLnVuaWZvcm1NYXRyaXg0ZnYobG9jYXRpb24sIGZhbHNlLCB2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZmxvYXRNYXQyM1NldHRlcihnbCwgbG9jYXRpb24pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHYpIHtcbiAgICBnbC51bmlmb3JtTWF0cml4MngzZnYobG9jYXRpb24sIGZhbHNlLCB2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZmxvYXRNYXQzMlNldHRlcihnbCwgbG9jYXRpb24pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHYpIHtcbiAgICBnbC51bmlmb3JtTWF0cml4M3gyZnYobG9jYXRpb24sIGZhbHNlLCB2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZmxvYXRNYXQyNFNldHRlcihnbCwgbG9jYXRpb24pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHYpIHtcbiAgICBnbC51bmlmb3JtTWF0cml4Mng0ZnYobG9jYXRpb24sIGZhbHNlLCB2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZmxvYXRNYXQ0MlNldHRlcihnbCwgbG9jYXRpb24pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHYpIHtcbiAgICBnbC51bmlmb3JtTWF0cml4NHgyZnYobG9jYXRpb24sIGZhbHNlLCB2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZmxvYXRNYXQzNFNldHRlcihnbCwgbG9jYXRpb24pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHYpIHtcbiAgICBnbC51bmlmb3JtTWF0cml4M3g0ZnYobG9jYXRpb24sIGZhbHNlLCB2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZmxvYXRNYXQ0M1NldHRlcihnbCwgbG9jYXRpb24pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHYpIHtcbiAgICBnbC51bmlmb3JtTWF0cml4NHgzZnYobG9jYXRpb24sIGZhbHNlLCB2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc2FtcGxlclNldHRlcihnbCwgdHlwZSwgdW5pdCwgbG9jYXRpb24pIHtcbiAgY29uc3QgYmluZFBvaW50ID0gZ2V0QmluZFBvaW50Rm9yU2FtcGxlclR5cGUoZ2wsIHR5cGUpO1xuICByZXR1cm4gaXNXZWJHTDIoZ2wpID8gZnVuY3Rpb24odGV4dHVyZU9yUGFpcikge1xuICAgIGxldCB0ZXh0dXJlO1xuICAgIGxldCBzYW1wbGVyO1xuICAgIGlmIChpc1RleHR1cmUoZ2wsIHRleHR1cmVPclBhaXIpKSB7XG4gICAgICB0ZXh0dXJlID0gdGV4dHVyZU9yUGFpcjtcbiAgICAgIHNhbXBsZXIgPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICB0ZXh0dXJlID0gdGV4dHVyZU9yUGFpci50ZXh0dXJlO1xuICAgICAgc2FtcGxlciA9IHRleHR1cmVPclBhaXIuc2FtcGxlcjtcbiAgICB9XG4gICAgZ2wudW5pZm9ybTFpKGxvY2F0aW9uLCB1bml0KTtcbiAgICBnbC5hY3RpdmVUZXh0dXJlKFRFWFRVUkUwICsgdW5pdCk7XG4gICAgZ2wuYmluZFRleHR1cmUoYmluZFBvaW50LCB0ZXh0dXJlKTtcbiAgICBnbC5iaW5kU2FtcGxlcih1bml0LCBzYW1wbGVyKTtcbiAgfSA6IGZ1bmN0aW9uKHRleHR1cmUpIHtcbiAgICBnbC51bmlmb3JtMWkobG9jYXRpb24sIHVuaXQpO1xuICAgIGdsLmFjdGl2ZVRleHR1cmUoVEVYVFVSRTAgKyB1bml0KTtcbiAgICBnbC5iaW5kVGV4dHVyZShiaW5kUG9pbnQsIHRleHR1cmUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBzYW1wbGVyQXJyYXlTZXR0ZXIoZ2wsIHR5cGUsIHVuaXQsIGxvY2F0aW9uLCBzaXplKSB7XG4gIGNvbnN0IGJpbmRQb2ludCA9IGdldEJpbmRQb2ludEZvclNhbXBsZXJUeXBlKGdsLCB0eXBlKTtcbiAgY29uc3QgdW5pdHMgPSBuZXcgSW50MzJBcnJheShzaXplKTtcbiAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IHNpemU7ICsraWkpIHtcbiAgICB1bml0c1tpaV0gPSB1bml0ICsgaWk7XG4gIH1cblxuICByZXR1cm4gaXNXZWJHTDIoZ2wpID8gZnVuY3Rpb24odGV4dHVyZXMpIHtcbiAgICBnbC51bmlmb3JtMWl2KGxvY2F0aW9uLCB1bml0cyk7XG4gICAgdGV4dHVyZXMuZm9yRWFjaChmdW5jdGlvbih0ZXh0dXJlT3JQYWlyLCBpbmRleCkge1xuICAgICAgZ2wuYWN0aXZlVGV4dHVyZShURVhUVVJFMCArIHVuaXRzW2luZGV4XSk7XG4gICAgICBsZXQgdGV4dHVyZTtcbiAgICAgIGxldCBzYW1wbGVyO1xuICAgICAgaWYgKGlzVGV4dHVyZShnbCwgdGV4dHVyZU9yUGFpcikpIHtcbiAgICAgICAgdGV4dHVyZSA9IHRleHR1cmVPclBhaXI7XG4gICAgICAgIHNhbXBsZXIgPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGV4dHVyZSA9IHRleHR1cmVPclBhaXIudGV4dHVyZTtcbiAgICAgICAgc2FtcGxlciA9IHRleHR1cmVPclBhaXIuc2FtcGxlcjtcbiAgICAgIH1cbiAgICAgIGdsLmJpbmRTYW1wbGVyKHVuaXQsIHNhbXBsZXIpO1xuICAgICAgZ2wuYmluZFRleHR1cmUoYmluZFBvaW50LCB0ZXh0dXJlKTtcbiAgICB9KTtcbiAgfSA6IGZ1bmN0aW9uKHRleHR1cmVzKSB7XG4gICAgZ2wudW5pZm9ybTFpdihsb2NhdGlvbiwgdW5pdHMpO1xuICAgIHRleHR1cmVzLmZvckVhY2goZnVuY3Rpb24odGV4dHVyZSwgaW5kZXgpIHtcbiAgICAgIGdsLmFjdGl2ZVRleHR1cmUoVEVYVFVSRTAgKyB1bml0c1tpbmRleF0pO1xuICAgICAgZ2wuYmluZFRleHR1cmUoYmluZFBvaW50LCB0ZXh0dXJlKTtcbiAgICB9KTtcbiAgfTtcbn1cblxudHlwZU1hcFtGTE9BVCQzXSAgICAgICAgICAgICAgICAgICAgICAgICA9IHsgVHlwZTogRmxvYXQzMkFycmF5LCBzaXplOiAgNCwgc2V0dGVyOiBmbG9hdFNldHRlciwgICAgICBhcnJheVNldHRlcjogZmxvYXRBcnJheVNldHRlciwgfTtcbnR5cGVNYXBbRkxPQVRfVkVDMl0gICAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBGbG9hdDMyQXJyYXksIHNpemU6ICA4LCBzZXR0ZXI6IGZsb2F0VmVjMlNldHRlciwgIGNvbHM6IDIsIH07XG50eXBlTWFwW0ZMT0FUX1ZFQzNdICAgICAgICAgICAgICAgICAgICA9IHsgVHlwZTogRmxvYXQzMkFycmF5LCBzaXplOiAxMiwgc2V0dGVyOiBmbG9hdFZlYzNTZXR0ZXIsICBjb2xzOiAzLCB9O1xudHlwZU1hcFtGTE9BVF9WRUM0XSAgICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IEZsb2F0MzJBcnJheSwgc2l6ZTogMTYsIHNldHRlcjogZmxvYXRWZWM0U2V0dGVyLCAgY29sczogNCwgfTtcbnR5cGVNYXBbSU5UJDNdICAgICAgICAgICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IEludDMyQXJyYXksICAgc2l6ZTogIDQsIHNldHRlcjogaW50U2V0dGVyLCAgICAgICAgYXJyYXlTZXR0ZXI6IGludEFycmF5U2V0dGVyLCB9O1xudHlwZU1hcFtJTlRfVkVDMl0gICAgICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IEludDMyQXJyYXksICAgc2l6ZTogIDgsIHNldHRlcjogaW50VmVjMlNldHRlciwgICAgY29sczogMiwgfTtcbnR5cGVNYXBbSU5UX1ZFQzNdICAgICAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBJbnQzMkFycmF5LCAgIHNpemU6IDEyLCBzZXR0ZXI6IGludFZlYzNTZXR0ZXIsICAgIGNvbHM6IDMsIH07XG50eXBlTWFwW0lOVF9WRUM0XSAgICAgICAgICAgICAgICAgICAgICA9IHsgVHlwZTogSW50MzJBcnJheSwgICBzaXplOiAxNiwgc2V0dGVyOiBpbnRWZWM0U2V0dGVyLCAgICBjb2xzOiA0LCB9O1xudHlwZU1hcFtVTlNJR05FRF9JTlQkM10gICAgICAgICAgICAgICAgICA9IHsgVHlwZTogVWludDMyQXJyYXksICBzaXplOiAgNCwgc2V0dGVyOiB1aW50U2V0dGVyLCAgICAgICBhcnJheVNldHRlcjogdWludEFycmF5U2V0dGVyLCB9O1xudHlwZU1hcFtVTlNJR05FRF9JTlRfVkVDMl0gICAgICAgICAgICAgPSB7IFR5cGU6IFVpbnQzMkFycmF5LCAgc2l6ZTogIDgsIHNldHRlcjogdWludFZlYzJTZXR0ZXIsICAgY29sczogMiwgfTtcbnR5cGVNYXBbVU5TSUdORURfSU5UX1ZFQzNdICAgICAgICAgICAgID0geyBUeXBlOiBVaW50MzJBcnJheSwgIHNpemU6IDEyLCBzZXR0ZXI6IHVpbnRWZWMzU2V0dGVyLCAgIGNvbHM6IDMsIH07XG50eXBlTWFwW1VOU0lHTkVEX0lOVF9WRUM0XSAgICAgICAgICAgICA9IHsgVHlwZTogVWludDMyQXJyYXksICBzaXplOiAxNiwgc2V0dGVyOiB1aW50VmVjNFNldHRlciwgICBjb2xzOiA0LCB9O1xudHlwZU1hcFtCT09MXSAgICAgICAgICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IFVpbnQzMkFycmF5LCAgc2l6ZTogIDQsIHNldHRlcjogaW50U2V0dGVyLCAgICAgICAgYXJyYXlTZXR0ZXI6IGludEFycmF5U2V0dGVyLCB9O1xudHlwZU1hcFtCT09MX1ZFQzJdICAgICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IFVpbnQzMkFycmF5LCAgc2l6ZTogIDgsIHNldHRlcjogaW50VmVjMlNldHRlciwgICAgY29sczogMiwgfTtcbnR5cGVNYXBbQk9PTF9WRUMzXSAgICAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBVaW50MzJBcnJheSwgIHNpemU6IDEyLCBzZXR0ZXI6IGludFZlYzNTZXR0ZXIsICAgIGNvbHM6IDMsIH07XG50eXBlTWFwW0JPT0xfVkVDNF0gICAgICAgICAgICAgICAgICAgICA9IHsgVHlwZTogVWludDMyQXJyYXksICBzaXplOiAxNiwgc2V0dGVyOiBpbnRWZWM0U2V0dGVyLCAgICBjb2xzOiA0LCB9O1xudHlwZU1hcFtGTE9BVF9NQVQyXSAgICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IEZsb2F0MzJBcnJheSwgc2l6ZTogMzIsIHNldHRlcjogZmxvYXRNYXQyU2V0dGVyLCAgcm93czogMiwgY29sczogMiwgfTtcbnR5cGVNYXBbRkxPQVRfTUFUM10gICAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBGbG9hdDMyQXJyYXksIHNpemU6IDQ4LCBzZXR0ZXI6IGZsb2F0TWF0M1NldHRlciwgIHJvd3M6IDMsIGNvbHM6IDMsIH07XG50eXBlTWFwW0ZMT0FUX01BVDRdICAgICAgICAgICAgICAgICAgICA9IHsgVHlwZTogRmxvYXQzMkFycmF5LCBzaXplOiA2NCwgc2V0dGVyOiBmbG9hdE1hdDRTZXR0ZXIsICByb3dzOiA0LCBjb2xzOiA0LCB9O1xudHlwZU1hcFtGTE9BVF9NQVQyeDNdICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IEZsb2F0MzJBcnJheSwgc2l6ZTogMzIsIHNldHRlcjogZmxvYXRNYXQyM1NldHRlciwgcm93czogMiwgY29sczogMywgfTtcbnR5cGVNYXBbRkxPQVRfTUFUMng0XSAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBGbG9hdDMyQXJyYXksIHNpemU6IDMyLCBzZXR0ZXI6IGZsb2F0TWF0MjRTZXR0ZXIsIHJvd3M6IDIsIGNvbHM6IDQsIH07XG50eXBlTWFwW0ZMT0FUX01BVDN4Ml0gICAgICAgICAgICAgICAgICA9IHsgVHlwZTogRmxvYXQzMkFycmF5LCBzaXplOiA0OCwgc2V0dGVyOiBmbG9hdE1hdDMyU2V0dGVyLCByb3dzOiAzLCBjb2xzOiAyLCB9O1xudHlwZU1hcFtGTE9BVF9NQVQzeDRdICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IEZsb2F0MzJBcnJheSwgc2l6ZTogNDgsIHNldHRlcjogZmxvYXRNYXQzNFNldHRlciwgcm93czogMywgY29sczogNCwgfTtcbnR5cGVNYXBbRkxPQVRfTUFUNHgyXSAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBGbG9hdDMyQXJyYXksIHNpemU6IDY0LCBzZXR0ZXI6IGZsb2F0TWF0NDJTZXR0ZXIsIHJvd3M6IDQsIGNvbHM6IDIsIH07XG50eXBlTWFwW0ZMT0FUX01BVDR4M10gICAgICAgICAgICAgICAgICA9IHsgVHlwZTogRmxvYXQzMkFycmF5LCBzaXplOiA2NCwgc2V0dGVyOiBmbG9hdE1hdDQzU2V0dGVyLCByb3dzOiA0LCBjb2xzOiAzLCB9O1xudHlwZU1hcFtTQU1QTEVSXzJEXSAgICAgICAgICAgICAgICAgICAgPSB7IFR5cGU6IG51bGwsICAgICAgICAgc2l6ZTogIDAsIHNldHRlcjogc2FtcGxlclNldHRlciwgICAgYXJyYXlTZXR0ZXI6IHNhbXBsZXJBcnJheVNldHRlciwgYmluZFBvaW50OiBURVhUVVJFXzJEJDEsICAgICAgIH07XG50eXBlTWFwW1NBTVBMRVJfQ1VCRV0gICAgICAgICAgICAgICAgICA9IHsgVHlwZTogbnVsbCwgICAgICAgICBzaXplOiAgMCwgc2V0dGVyOiBzYW1wbGVyU2V0dGVyLCAgICBhcnJheVNldHRlcjogc2FtcGxlckFycmF5U2V0dGVyLCBiaW5kUG9pbnQ6IFRFWFRVUkVfQ1VCRV9NQVAkMSwgfTtcbnR5cGVNYXBbU0FNUExFUl8zRF0gICAgICAgICAgICAgICAgICAgID0geyBUeXBlOiBudWxsLCAgICAgICAgIHNpemU6ICAwLCBzZXR0ZXI6IHNhbXBsZXJTZXR0ZXIsICAgIGFycmF5U2V0dGVyOiBzYW1wbGVyQXJyYXlTZXR0ZXIsIGJpbmRQb2ludDogVEVYVFVSRV8zRCQxLCAgICAgICB9O1xudHlwZU1hcFtTQU1QTEVSXzJEX1NIQURPV10gICAgICAgICAgICAgPSB7IFR5cGU6IG51bGwsICAgICAgICAgc2l6ZTogIDAsIHNldHRlcjogc2FtcGxlclNldHRlciwgICAgYXJyYXlTZXR0ZXI6IHNhbXBsZXJBcnJheVNldHRlciwgYmluZFBvaW50OiBURVhUVVJFXzJEJDEsICAgICAgIH07XG50eXBlTWFwW1NBTVBMRVJfMkRfQVJSQVldICAgICAgICAgICAgICA9IHsgVHlwZTogbnVsbCwgICAgICAgICBzaXplOiAgMCwgc2V0dGVyOiBzYW1wbGVyU2V0dGVyLCAgICBhcnJheVNldHRlcjogc2FtcGxlckFycmF5U2V0dGVyLCBiaW5kUG9pbnQ6IFRFWFRVUkVfMkRfQVJSQVkkMSwgfTtcbnR5cGVNYXBbU0FNUExFUl8yRF9BUlJBWV9TSEFET1ddICAgICAgID0geyBUeXBlOiBudWxsLCAgICAgICAgIHNpemU6ICAwLCBzZXR0ZXI6IHNhbXBsZXJTZXR0ZXIsICAgIGFycmF5U2V0dGVyOiBzYW1wbGVyQXJyYXlTZXR0ZXIsIGJpbmRQb2ludDogVEVYVFVSRV8yRF9BUlJBWSQxLCB9O1xudHlwZU1hcFtTQU1QTEVSX0NVQkVfU0hBRE9XXSAgICAgICAgICAgPSB7IFR5cGU6IG51bGwsICAgICAgICAgc2l6ZTogIDAsIHNldHRlcjogc2FtcGxlclNldHRlciwgICAgYXJyYXlTZXR0ZXI6IHNhbXBsZXJBcnJheVNldHRlciwgYmluZFBvaW50OiBURVhUVVJFX0NVQkVfTUFQJDEsIH07XG50eXBlTWFwW0lOVF9TQU1QTEVSXzJEXSAgICAgICAgICAgICAgICA9IHsgVHlwZTogbnVsbCwgICAgICAgICBzaXplOiAgMCwgc2V0dGVyOiBzYW1wbGVyU2V0dGVyLCAgICBhcnJheVNldHRlcjogc2FtcGxlckFycmF5U2V0dGVyLCBiaW5kUG9pbnQ6IFRFWFRVUkVfMkQkMSwgICAgICAgfTtcbnR5cGVNYXBbSU5UX1NBTVBMRVJfM0RdICAgICAgICAgICAgICAgID0geyBUeXBlOiBudWxsLCAgICAgICAgIHNpemU6ICAwLCBzZXR0ZXI6IHNhbXBsZXJTZXR0ZXIsICAgIGFycmF5U2V0dGVyOiBzYW1wbGVyQXJyYXlTZXR0ZXIsIGJpbmRQb2ludDogVEVYVFVSRV8zRCQxLCAgICAgICB9O1xudHlwZU1hcFtJTlRfU0FNUExFUl9DVUJFXSAgICAgICAgICAgICAgPSB7IFR5cGU6IG51bGwsICAgICAgICAgc2l6ZTogIDAsIHNldHRlcjogc2FtcGxlclNldHRlciwgICAgYXJyYXlTZXR0ZXI6IHNhbXBsZXJBcnJheVNldHRlciwgYmluZFBvaW50OiBURVhUVVJFX0NVQkVfTUFQJDEsIH07XG50eXBlTWFwW0lOVF9TQU1QTEVSXzJEX0FSUkFZXSAgICAgICAgICA9IHsgVHlwZTogbnVsbCwgICAgICAgICBzaXplOiAgMCwgc2V0dGVyOiBzYW1wbGVyU2V0dGVyLCAgICBhcnJheVNldHRlcjogc2FtcGxlckFycmF5U2V0dGVyLCBiaW5kUG9pbnQ6IFRFWFRVUkVfMkRfQVJSQVkkMSwgfTtcbnR5cGVNYXBbVU5TSUdORURfSU5UX1NBTVBMRVJfMkRdICAgICAgID0geyBUeXBlOiBudWxsLCAgICAgICAgIHNpemU6ICAwLCBzZXR0ZXI6IHNhbXBsZXJTZXR0ZXIsICAgIGFycmF5U2V0dGVyOiBzYW1wbGVyQXJyYXlTZXR0ZXIsIGJpbmRQb2ludDogVEVYVFVSRV8yRCQxLCAgICAgICB9O1xudHlwZU1hcFtVTlNJR05FRF9JTlRfU0FNUExFUl8zRF0gICAgICAgPSB7IFR5cGU6IG51bGwsICAgICAgICAgc2l6ZTogIDAsIHNldHRlcjogc2FtcGxlclNldHRlciwgICAgYXJyYXlTZXR0ZXI6IHNhbXBsZXJBcnJheVNldHRlciwgYmluZFBvaW50OiBURVhUVVJFXzNEJDEsICAgICAgIH07XG50eXBlTWFwW1VOU0lHTkVEX0lOVF9TQU1QTEVSX0NVQkVdICAgICA9IHsgVHlwZTogbnVsbCwgICAgICAgICBzaXplOiAgMCwgc2V0dGVyOiBzYW1wbGVyU2V0dGVyLCAgICBhcnJheVNldHRlcjogc2FtcGxlckFycmF5U2V0dGVyLCBiaW5kUG9pbnQ6IFRFWFRVUkVfQ1VCRV9NQVAkMSwgfTtcbnR5cGVNYXBbVU5TSUdORURfSU5UX1NBTVBMRVJfMkRfQVJSQVldID0geyBUeXBlOiBudWxsLCAgICAgICAgIHNpemU6ICAwLCBzZXR0ZXI6IHNhbXBsZXJTZXR0ZXIsICAgIGFycmF5U2V0dGVyOiBzYW1wbGVyQXJyYXlTZXR0ZXIsIGJpbmRQb2ludDogVEVYVFVSRV8yRF9BUlJBWSQxLCB9O1xuXG5mdW5jdGlvbiBmbG9hdEF0dHJpYlNldHRlcihnbCwgaW5kZXgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGIpIHtcbiAgICBpZiAoYi52YWx1ZSkge1xuICAgICAgZ2wuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KGluZGV4KTtcbiAgICAgIHN3aXRjaCAoYi52YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIGdsLnZlcnRleEF0dHJpYjRmdihpbmRleCwgYi52YWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBnbC52ZXJ0ZXhBdHRyaWIzZnYoaW5kZXgsIGIudmFsdWUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgZ2wudmVydGV4QXR0cmliMmZ2KGluZGV4LCBiLnZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGdsLnZlcnRleEF0dHJpYjFmdihpbmRleCwgYi52YWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd0aGUgbGVuZ3RoIG9mIGEgZmxvYXQgY29uc3RhbnQgdmFsdWUgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDQhJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGdsLmJpbmRCdWZmZXIoQVJSQVlfQlVGRkVSJDEsIGIuYnVmZmVyKTtcbiAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGluZGV4KTtcbiAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoXG4gICAgICAgICAgaW5kZXgsIGIubnVtQ29tcG9uZW50cyB8fCBiLnNpemUsIGIudHlwZSB8fCBGTE9BVCQzLCBiLm5vcm1hbGl6ZSB8fCBmYWxzZSwgYi5zdHJpZGUgfHwgMCwgYi5vZmZzZXQgfHwgMCk7XG4gICAgICBpZiAoYi5kaXZpc29yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZ2wudmVydGV4QXR0cmliRGl2aXNvcihpbmRleCwgYi5kaXZpc29yKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGludEF0dHJpYlNldHRlcihnbCwgaW5kZXgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGIpIHtcbiAgICBpZiAoYi52YWx1ZSkge1xuICAgICAgZ2wuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KGluZGV4KTtcbiAgICAgIGlmIChiLnZhbHVlLmxlbmd0aCA9PT0gNCkge1xuICAgICAgICBnbC52ZXJ0ZXhBdHRyaWI0aXYoaW5kZXgsIGIudmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgbGVuZ3RoIG9mIGFuIGludGVnZXIgY29uc3RhbnQgdmFsdWUgbXVzdCBiZSA0IScpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBnbC5iaW5kQnVmZmVyKEFSUkFZX0JVRkZFUiQxLCBiLmJ1ZmZlcik7XG4gICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShpbmRleCk7XG4gICAgICBnbC52ZXJ0ZXhBdHRyaWJJUG9pbnRlcihcbiAgICAgICAgICBpbmRleCwgYi5udW1Db21wb25lbnRzIHx8IGIuc2l6ZSwgYi50eXBlIHx8IElOVCQzLCBiLnN0cmlkZSB8fCAwLCBiLm9mZnNldCB8fCAwKTtcbiAgICAgIGlmIChiLmRpdmlzb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJEaXZpc29yKGluZGV4LCBiLmRpdmlzb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gdWludEF0dHJpYlNldHRlcihnbCwgaW5kZXgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGIpIHtcbiAgICBpZiAoYi52YWx1ZSkge1xuICAgICAgZ2wuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KGluZGV4KTtcbiAgICAgIGlmIChiLnZhbHVlLmxlbmd0aCA9PT0gNCkge1xuICAgICAgICBnbC52ZXJ0ZXhBdHRyaWI0dWl2KGluZGV4LCBiLnZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGxlbmd0aCBvZiBhbiB1bnNpZ25lZCBpbnRlZ2VyIGNvbnN0YW50IHZhbHVlIG11c3QgYmUgNCEnKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZ2wuYmluZEJ1ZmZlcihBUlJBWV9CVUZGRVIkMSwgYi5idWZmZXIpO1xuICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoaW5kZXgpO1xuICAgICAgZ2wudmVydGV4QXR0cmliSVBvaW50ZXIoXG4gICAgICAgICAgaW5kZXgsIGIubnVtQ29tcG9uZW50cyB8fCBiLnNpemUsIGIudHlwZSB8fCBVTlNJR05FRF9JTlQkMywgYi5zdHJpZGUgfHwgMCwgYi5vZmZzZXQgfHwgMCk7XG4gICAgICBpZiAoYi5kaXZpc29yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZ2wudmVydGV4QXR0cmliRGl2aXNvcihpbmRleCwgYi5kaXZpc29yKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIG1hdEF0dHJpYlNldHRlcihnbCwgaW5kZXgsIHR5cGVJbmZvKSB7XG4gIGNvbnN0IGRlZmF1bHRTaXplID0gdHlwZUluZm8uc2l6ZTtcbiAgY29uc3QgY291bnQgPSB0eXBlSW5mby5jb3VudDtcblxuICByZXR1cm4gZnVuY3Rpb24oYikge1xuICAgIGdsLmJpbmRCdWZmZXIoQVJSQVlfQlVGRkVSJDEsIGIuYnVmZmVyKTtcbiAgICBjb25zdCBudW1Db21wb25lbnRzID0gYi5zaXplIHx8IGIubnVtQ29tcG9uZW50cyB8fCBkZWZhdWx0U2l6ZTtcbiAgICBjb25zdCBzaXplID0gbnVtQ29tcG9uZW50cyAvIGNvdW50O1xuICAgIGNvbnN0IHR5cGUgPSBiLnR5cGUgfHwgRkxPQVQkMztcbiAgICBjb25zdCB0eXBlSW5mbyA9IHR5cGVNYXBbdHlwZV07XG4gICAgY29uc3Qgc3RyaWRlID0gdHlwZUluZm8uc2l6ZSAqIG51bUNvbXBvbmVudHM7XG4gICAgY29uc3Qgbm9ybWFsaXplID0gYi5ub3JtYWxpemUgfHwgZmFsc2U7XG4gICAgY29uc3Qgb2Zmc2V0ID0gYi5vZmZzZXQgfHwgMDtcbiAgICBjb25zdCByb3dPZmZzZXQgPSBzdHJpZGUgLyBjb3VudDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGluZGV4ICsgaSk7XG4gICAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKFxuICAgICAgICAgIGluZGV4ICsgaSwgc2l6ZSwgdHlwZSwgbm9ybWFsaXplLCBzdHJpZGUsIG9mZnNldCArIHJvd09mZnNldCAqIGkpO1xuICAgICAgaWYgKGIuZGl2aXNvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGdsLnZlcnRleEF0dHJpYkRpdmlzb3IoaW5kZXggKyBpLCBiLmRpdmlzb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuXG5cbmNvbnN0IGF0dHJUeXBlTWFwID0ge307XG5hdHRyVHlwZU1hcFtGTE9BVCQzXSAgICAgICAgICAgICA9IHsgc2l6ZTogIDQsIHNldHRlcjogZmxvYXRBdHRyaWJTZXR0ZXIsIH07XG5hdHRyVHlwZU1hcFtGTE9BVF9WRUMyXSAgICAgICAgPSB7IHNpemU6ICA4LCBzZXR0ZXI6IGZsb2F0QXR0cmliU2V0dGVyLCB9O1xuYXR0clR5cGVNYXBbRkxPQVRfVkVDM10gICAgICAgID0geyBzaXplOiAxMiwgc2V0dGVyOiBmbG9hdEF0dHJpYlNldHRlciwgfTtcbmF0dHJUeXBlTWFwW0ZMT0FUX1ZFQzRdICAgICAgICA9IHsgc2l6ZTogMTYsIHNldHRlcjogZmxvYXRBdHRyaWJTZXR0ZXIsIH07XG5hdHRyVHlwZU1hcFtJTlQkM10gICAgICAgICAgICAgICA9IHsgc2l6ZTogIDQsIHNldHRlcjogaW50QXR0cmliU2V0dGVyLCAgIH07XG5hdHRyVHlwZU1hcFtJTlRfVkVDMl0gICAgICAgICAgPSB7IHNpemU6ICA4LCBzZXR0ZXI6IGludEF0dHJpYlNldHRlciwgICB9O1xuYXR0clR5cGVNYXBbSU5UX1ZFQzNdICAgICAgICAgID0geyBzaXplOiAxMiwgc2V0dGVyOiBpbnRBdHRyaWJTZXR0ZXIsICAgfTtcbmF0dHJUeXBlTWFwW0lOVF9WRUM0XSAgICAgICAgICA9IHsgc2l6ZTogMTYsIHNldHRlcjogaW50QXR0cmliU2V0dGVyLCAgIH07XG5hdHRyVHlwZU1hcFtVTlNJR05FRF9JTlQkM10gICAgICA9IHsgc2l6ZTogIDQsIHNldHRlcjogdWludEF0dHJpYlNldHRlciwgIH07XG5hdHRyVHlwZU1hcFtVTlNJR05FRF9JTlRfVkVDMl0gPSB7IHNpemU6ICA4LCBzZXR0ZXI6IHVpbnRBdHRyaWJTZXR0ZXIsICB9O1xuYXR0clR5cGVNYXBbVU5TSUdORURfSU5UX1ZFQzNdID0geyBzaXplOiAxMiwgc2V0dGVyOiB1aW50QXR0cmliU2V0dGVyLCAgfTtcbmF0dHJUeXBlTWFwW1VOU0lHTkVEX0lOVF9WRUM0XSA9IHsgc2l6ZTogMTYsIHNldHRlcjogdWludEF0dHJpYlNldHRlciwgIH07XG5hdHRyVHlwZU1hcFtCT09MXSAgICAgICAgICAgICAgPSB7IHNpemU6ICA0LCBzZXR0ZXI6IGludEF0dHJpYlNldHRlciwgICB9O1xuYXR0clR5cGVNYXBbQk9PTF9WRUMyXSAgICAgICAgID0geyBzaXplOiAgOCwgc2V0dGVyOiBpbnRBdHRyaWJTZXR0ZXIsICAgfTtcbmF0dHJUeXBlTWFwW0JPT0xfVkVDM10gICAgICAgICA9IHsgc2l6ZTogMTIsIHNldHRlcjogaW50QXR0cmliU2V0dGVyLCAgIH07XG5hdHRyVHlwZU1hcFtCT09MX1ZFQzRdICAgICAgICAgPSB7IHNpemU6IDE2LCBzZXR0ZXI6IGludEF0dHJpYlNldHRlciwgICB9O1xuYXR0clR5cGVNYXBbRkxPQVRfTUFUMl0gICAgICAgID0geyBzaXplOiAgNCwgc2V0dGVyOiBtYXRBdHRyaWJTZXR0ZXIsICAgY291bnQ6IDIsIH07XG5hdHRyVHlwZU1hcFtGTE9BVF9NQVQzXSAgICAgICAgPSB7IHNpemU6ICA5LCBzZXR0ZXI6IG1hdEF0dHJpYlNldHRlciwgICBjb3VudDogMywgfTtcbmF0dHJUeXBlTWFwW0ZMT0FUX01BVDRdICAgICAgICA9IHsgc2l6ZTogMTYsIHNldHRlcjogbWF0QXR0cmliU2V0dGVyLCAgIGNvdW50OiA0LCB9O1xuXG5jb25zdCBlcnJvclJFID0gL0VSUk9SOlxccypcXGQrOihcXGQrKS9naTtcbmZ1bmN0aW9uIGFkZExpbmVOdW1iZXJzV2l0aEVycm9yKHNyYywgbG9nID0gJycsIGxpbmVPZmZzZXQgPSAwKSB7XG4gIC8vIE5vdGU6IEVycm9yIG1lc3NhZ2UgZm9ybWF0cyBhcmUgbm90IGRlZmluZWQgYnkgYW55IHNwZWMgc28gdGhpcyBtYXkgb3IgbWF5IG5vdCB3b3JrLlxuICBjb25zdCBtYXRjaGVzID0gWy4uLmxvZy5tYXRjaEFsbChlcnJvclJFKV07XG4gIGNvbnN0IGxpbmVOb1RvRXJyb3JNYXAgPSBuZXcgTWFwKG1hdGNoZXMubWFwKChtLCBuZHgpID0+IHtcbiAgICBjb25zdCBsaW5lTm8gPSBwYXJzZUludChtWzFdKTtcbiAgICBjb25zdCBuZXh0ID0gbWF0Y2hlc1tuZHggKyAxXTtcbiAgICBjb25zdCBlbmQgPSBuZXh0ID8gbmV4dC5pbmRleCA6IGxvZy5sZW5ndGg7XG4gICAgY29uc3QgbXNnID0gbG9nLnN1YnN0cmluZyhtLmluZGV4LCBlbmQpO1xuICAgIHJldHVybiBbbGluZU5vIC0gMSwgbXNnXTtcbiAgfSkpO1xuICByZXR1cm4gc3JjLnNwbGl0KCdcXG4nKS5tYXAoKGxpbmUsIGxpbmVObykgPT4ge1xuICAgIGNvbnN0IGVyciA9IGxpbmVOb1RvRXJyb3JNYXAuZ2V0KGxpbmVObyk7XG4gICAgcmV0dXJuIGAke2xpbmVObyArIDEgKyBsaW5lT2Zmc2V0fTogJHtsaW5lfSR7ZXJyID8gYFxcblxcbl5eXiAke2Vycn1gIDogJyd9YDtcbiAgfSkuam9pbignXFxuJyk7XG59XG5cbi8qKlxuICogRXJyb3IgQ2FsbGJhY2tcbiAqIEBjYWxsYmFjayBFcnJvckNhbGxiYWNrXG4gKiBAcGFyYW0ge3N0cmluZ30gbXNnIGVycm9yIG1lc3NhZ2UuXG4gKiBAcGFyYW0ge251bWJlcn0gW2xpbmVPZmZzZXRdIGFtb3VudCB0byBhZGQgdG8gbGluZSBudW1iZXJcbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbFxuICovXG5cbmNvbnN0IHNwYWNlUkUgPSAvXlsgXFx0XSpcXG4vO1xuXG4vKipcbiAqIExvYWRzIGEgc2hhZGVyLlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIFRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHQgdG8gdXNlLlxuICogQHBhcmFtIHtzdHJpbmd9IHNoYWRlclNvdXJjZSBUaGUgc2hhZGVyIHNvdXJjZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaGFkZXJUeXBlIFRoZSB0eXBlIG9mIHNoYWRlci5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuRXJyb3JDYWxsYmFja30gb3B0X2Vycm9yQ2FsbGJhY2sgY2FsbGJhY2sgZm9yIGVycm9ycy5cbiAqIEByZXR1cm4ge1dlYkdMU2hhZGVyfSBUaGUgY3JlYXRlZCBzaGFkZXIuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBsb2FkU2hhZGVyKGdsLCBzaGFkZXJTb3VyY2UsIHNoYWRlclR5cGUsIG9wdF9lcnJvckNhbGxiYWNrKSB7XG4gIGNvbnN0IGVyckZuID0gb3B0X2Vycm9yQ2FsbGJhY2sgfHwgZXJyb3IkMTtcbiAgLy8gQ3JlYXRlIHRoZSBzaGFkZXIgb2JqZWN0XG4gIGNvbnN0IHNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcihzaGFkZXJUeXBlKTtcblxuICAvLyBSZW1vdmUgdGhlIGZpcnN0IGVuZCBvZiBsaW5lIGJlY2F1c2UgV2ViR0wgMi4wIHJlcXVpcmVzXG4gIC8vICN2ZXJzaW9uIDMwMCBlc1xuICAvLyBhcyB0aGUgZmlyc3QgbGluZS4gTm8gd2hpdGVzcGFjZSBhbGxvd2VkIGJlZm9yZSB0aGF0IGxpbmVcbiAgLy8gc29cbiAgLy9cbiAgLy8gPHNjcmlwdD5cbiAgLy8gI3ZlcnNpb24gMzAwIGVzXG4gIC8vIDwvc2NyaXB0PlxuICAvL1xuICAvLyBIYXMgb25lIGxpbmUgYmVmb3JlIGl0IHdoaWNoIGlzIGludmFsaWQgYWNjb3JkaW5nIHRvIEdMU0wgRVMgMy4wMFxuICAvL1xuICBsZXQgbGluZU9mZnNldCA9IDA7XG4gIGlmIChzcGFjZVJFLnRlc3Qoc2hhZGVyU291cmNlKSkge1xuICAgIGxpbmVPZmZzZXQgPSAxO1xuICAgIHNoYWRlclNvdXJjZSA9IHNoYWRlclNvdXJjZS5yZXBsYWNlKHNwYWNlUkUsICcnKTtcbiAgfVxuXG4gIC8vIExvYWQgdGhlIHNoYWRlciBzb3VyY2VcbiAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc2hhZGVyU291cmNlKTtcblxuICAvLyBDb21waWxlIHRoZSBzaGFkZXJcbiAgZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xuXG4gIC8vIENoZWNrIHRoZSBjb21waWxlIHN0YXR1c1xuICBjb25zdCBjb21waWxlZCA9IGdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIENPTVBJTEVfU1RBVFVTKTtcbiAgaWYgKCFjb21waWxlZCkge1xuICAgIC8vIFNvbWV0aGluZyB3ZW50IHdyb25nIGR1cmluZyBjb21waWxhdGlvbjsgZ2V0IHRoZSBlcnJvclxuICAgIGNvbnN0IGxhc3RFcnJvciA9IGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKTtcbiAgICBlcnJGbihgJHthZGRMaW5lTnVtYmVyc1dpdGhFcnJvcihzaGFkZXJTb3VyY2UsIGxhc3RFcnJvciwgbGluZU9mZnNldCl9XFxuRXJyb3IgY29tcGlsaW5nICR7Z2xFbnVtVG9TdHJpbmcoZ2wsIHNoYWRlclR5cGUpfTogJHtsYXN0RXJyb3J9YCk7XG4gICAgZ2wuZGVsZXRlU2hhZGVyKHNoYWRlcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4gc2hhZGVyO1xufVxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFByb2dyYW1PcHRpb25zXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKHN0cmluZyl9IFtlcnJvckNhbGxiYWNrXSBjYWxsYmFjayBmb3IgZXJyb3JzXG4gKiBAcHJvcGVydHkge09iamVjdC48c3RyaW5nLG51bWJlcj59IFthdHRyaWJMb2NhdGlvbnNdIGEgYXR0cmlidXRlIG5hbWUgdG8gbG9jYXRpb24gbWFwXG4gKiBAcHJvcGVydHkgeyhtb2R1bGU6dHdnbC5CdWZmZXJJbmZvfE9iamVjdC48c3RyaW5nLG1vZHVsZTp0d2dsLkF0dHJpYkluZm8+fHN0cmluZ1tdKX0gW3RyYW5zZm9ybUZlZWRiYWNrVmFyeWluZ3NdIElmIHBhc3NlZFxuICogICBhIEJ1ZmZlckluZm8gd2lsbCB1c2UgdGhlIGF0dHJpYnMgbmFtZXMgaW5zaWRlLiBJZiBwYXNzZWQgYW4gb2JqZWN0IG9mIEF0dHJpYkluZm9zIHdpbGwgdXNlIHRoZSBuYW1lcyBmcm9tIHRoYXQgb2JqZWN0LiBPdGhlcndpc2VcbiAqICAgeW91IGNhbiBwYXNzIGFuIGFycmF5IG9mIG5hbWVzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0cmFuc2Zvcm1GZWVkYmFja01vZGVdIHRoZSBtb2RlIHRvIHBhc3MgYGdsLnRyYW5zZm9ybUZlZWRiYWNrVmFyeWluZ3NgLiBEZWZhdWx0cyB0byBgU0VQQVJBVEVfQVRUUklCU2AuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2xcbiAqL1xuXG4vKipcbiAqIEdldHMgdGhlIHByb2dyYW0gb3B0aW9ucyBiYXNlZCBvbiBhbGwgdGhlc2Ugb3B0aW9uYWwgYXJndW1lbnRzXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsLlByb2dyYW1PcHRpb25zfHN0cmluZ1tdfSBbb3B0X2F0dHJpYnNdIE9wdGlvbnMgZm9yIHRoZSBwcm9ncmFtIG9yIGFuIGFycmF5IG9mIGF0dHJpYnMgbmFtZXMuIExvY2F0aW9ucyB3aWxsIGJlIGFzc2lnbmVkIGJ5IGluZGV4IGlmIG5vdCBwYXNzZWQgaW5cbiAqIEBwYXJhbSB7bnVtYmVyW119IFtvcHRfbG9jYXRpb25zXSBUaGUgbG9jYXRpb25zIGZvciB0aGUuIEEgcGFyYWxsZWwgYXJyYXkgdG8gb3B0X2F0dHJpYnMgbGV0dGluZyB5b3UgYXNzaWduIGxvY2F0aW9ucy5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuRXJyb3JDYWxsYmFja30gW29wdF9lcnJvckNhbGxiYWNrXSBjYWxsYmFjayBmb3IgZXJyb3JzLiBCeSBkZWZhdWx0IGl0IGp1c3QgcHJpbnRzIGFuIGVycm9yIHRvIHRoZSBjb25zb2xlXG4gKiAgICAgICAgb24gZXJyb3IuIElmIHlvdSB3YW50IHNvbWV0aGluZyBlbHNlIHBhc3MgYW4gY2FsbGJhY2suIEl0J3MgcGFzc2VkIGFuIGVycm9yIG1lc3NhZ2UuXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC5Qcm9ncmFtT3B0aW9uc30gYW4gaW5zdGFuY2Ugb2YgUHJvZ3JhbU9wdGlvbnMgYmFzZWQgb24gdGhlIGFyZ3VtZW50cyBwYXNzZWQgaW5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGdldFByb2dyYW1PcHRpb25zKG9wdF9hdHRyaWJzLCBvcHRfbG9jYXRpb25zLCBvcHRfZXJyb3JDYWxsYmFjaykge1xuICBsZXQgdHJhbnNmb3JtRmVlZGJhY2tWYXJ5aW5ncztcbiAgbGV0IHRyYW5zZm9ybUZlZWRiYWNrTW9kZTtcbiAgaWYgKHR5cGVvZiBvcHRfbG9jYXRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgb3B0X2Vycm9yQ2FsbGJhY2sgPSBvcHRfbG9jYXRpb25zO1xuICAgIG9wdF9sb2NhdGlvbnMgPSB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKHR5cGVvZiBvcHRfYXR0cmlicyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG9wdF9lcnJvckNhbGxiYWNrID0gb3B0X2F0dHJpYnM7XG4gICAgb3B0X2F0dHJpYnMgPSB1bmRlZmluZWQ7XG4gIH0gZWxzZSBpZiAob3B0X2F0dHJpYnMgJiYgIUFycmF5LmlzQXJyYXkob3B0X2F0dHJpYnMpKSB7XG4gICAgLy8gSWYgd2UgaGF2ZSBhbiBlcnJvckNhbGxiYWNrIHdlIGNhbiBqdXN0IHJldHVybiB0aGlzIG9iamVjdFxuICAgIC8vIE90aGVyd2lzZSB3ZSBuZWVkIHRvIGNvbnN0cnVjdCBvbmUgd2l0aCBkZWZhdWx0IGVycm9yQ2FsbGJhY2tcbiAgICBpZiAob3B0X2F0dHJpYnMuZXJyb3JDYWxsYmFjaykge1xuICAgICAgcmV0dXJuIG9wdF9hdHRyaWJzO1xuICAgIH1cbiAgICBjb25zdCBvcHQgPSBvcHRfYXR0cmlicztcbiAgICBvcHRfZXJyb3JDYWxsYmFjayA9IG9wdC5lcnJvckNhbGxiYWNrO1xuICAgIG9wdF9hdHRyaWJzID0gb3B0LmF0dHJpYkxvY2F0aW9ucztcbiAgICB0cmFuc2Zvcm1GZWVkYmFja1ZhcnlpbmdzID0gb3B0LnRyYW5zZm9ybUZlZWRiYWNrVmFyeWluZ3M7XG4gICAgdHJhbnNmb3JtRmVlZGJhY2tNb2RlID0gb3B0LnRyYW5zZm9ybUZlZWRiYWNrTW9kZTtcbiAgfVxuXG4gIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgZXJyb3JDYWxsYmFjazogb3B0X2Vycm9yQ2FsbGJhY2sgfHwgZXJyb3IkMSxcbiAgICB0cmFuc2Zvcm1GZWVkYmFja1ZhcnlpbmdzOiB0cmFuc2Zvcm1GZWVkYmFja1ZhcnlpbmdzLFxuICAgIHRyYW5zZm9ybUZlZWRiYWNrTW9kZTogdHJhbnNmb3JtRmVlZGJhY2tNb2RlLFxuICB9O1xuXG4gIGlmIChvcHRfYXR0cmlicykge1xuICAgIGxldCBhdHRyaWJMb2NhdGlvbnMgPSB7fTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRfYXR0cmlicykpIHtcbiAgICAgIG9wdF9hdHRyaWJzLmZvckVhY2goZnVuY3Rpb24oYXR0cmliLCAgbmR4KSB7XG4gICAgICAgIGF0dHJpYkxvY2F0aW9uc1thdHRyaWJdID0gb3B0X2xvY2F0aW9ucyA/IG9wdF9sb2NhdGlvbnNbbmR4XSA6IG5keDtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBhdHRyaWJMb2NhdGlvbnMgPSBvcHRfYXR0cmlicztcbiAgICB9XG4gICAgb3B0aW9ucy5hdHRyaWJMb2NhdGlvbnMgPSBhdHRyaWJMb2NhdGlvbnM7XG4gIH1cblxuICByZXR1cm4gb3B0aW9ucztcbn1cblxuY29uc3QgZGVmYXVsdFNoYWRlclR5cGUgPSBbXG4gIFwiVkVSVEVYX1NIQURFUlwiLFxuICBcIkZSQUdNRU5UX1NIQURFUlwiLFxuXTtcblxuZnVuY3Rpb24gZ2V0U2hhZGVyVHlwZUZyb21TY3JpcHRUeXBlKGdsLCBzY3JpcHRUeXBlKSB7XG4gIGlmIChzY3JpcHRUeXBlLmluZGV4T2YoXCJmcmFnXCIpID49IDApIHtcbiAgICByZXR1cm4gRlJBR01FTlRfU0hBREVSO1xuICB9IGVsc2UgaWYgKHNjcmlwdFR5cGUuaW5kZXhPZihcInZlcnRcIikgPj0gMCkge1xuICAgIHJldHVybiBWRVJURVhfU0hBREVSO1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZVNoYWRlcnMoZ2wsIHNoYWRlcnMpIHtcbiAgc2hhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHNoYWRlcikge1xuICAgIGdsLmRlbGV0ZVNoYWRlcihzaGFkZXIpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgcHJvZ3JhbSwgYXR0YWNoZXMgKGFuZC9vciBjb21waWxlcykgc2hhZGVycywgYmluZHMgYXR0cmliIGxvY2F0aW9ucywgbGlua3MgdGhlXG4gKiBwcm9ncmFtIGFuZCBjYWxscyB1c2VQcm9ncmFtLlxuICpcbiAqIE5PVEU6IFRoZXJlIGFyZSA0IHNpZ25hdHVyZXMgZm9yIHRoaXMgZnVuY3Rpb25cbiAqXG4gKiAgICAgdHdnbC5jcmVhdGVQcm9ncmFtKGdsLCBbdnMsIGZzXSwgb3B0aW9ucyk7XG4gKiAgICAgdHdnbC5jcmVhdGVQcm9ncmFtKGdsLCBbdnMsIGZzXSwgb3B0X2VyckZ1bmMpO1xuICogICAgIHR3Z2wuY3JlYXRlUHJvZ3JhbShnbCwgW3ZzLCBmc10sIG9wdF9hdHRyaWJzLCBvcHRfZXJyRnVuYyk7XG4gKiAgICAgdHdnbC5jcmVhdGVQcm9ncmFtKGdsLCBbdnMsIGZzXSwgb3B0X2F0dHJpYnMsIG9wdF9sb2NhdGlvbnMsIG9wdF9lcnJGdW5jKTtcbiAqXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgVGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dCB0byB1c2UuXG4gKiBAcGFyYW0ge1dlYkdMU2hhZGVyW118c3RyaW5nW119IHNoYWRlcnMgVGhlIHNoYWRlcnMgdG8gYXR0YWNoLCBvciBlbGVtZW50IGlkcyBmb3IgdGhlaXIgc291cmNlLCBvciBzdHJpbmdzIHRoYXQgY29udGFpbiB0aGVpciBzb3VyY2VcbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuUHJvZ3JhbU9wdGlvbnN8c3RyaW5nW118bW9kdWxlOnR3Z2wuRXJyb3JDYWxsYmFja30gW29wdF9hdHRyaWJzXSBPcHRpb25zIGZvciB0aGUgcHJvZ3JhbSBvciBhbiBhcnJheSBvZiBhdHRyaWJzIG5hbWVzIG9yIGFuIGVycm9yIGNhbGxiYWNrLiBMb2NhdGlvbnMgd2lsbCBiZSBhc3NpZ25lZCBieSBpbmRleCBpZiBub3QgcGFzc2VkIGluXG4gKiBAcGFyYW0ge251bWJlcltdfSBbb3B0X2xvY2F0aW9uc3xtb2R1bGU6dHdnbC5FcnJvckNhbGxiYWNrXSBUaGUgbG9jYXRpb25zIGZvciB0aGUuIEEgcGFyYWxsZWwgYXJyYXkgdG8gb3B0X2F0dHJpYnMgbGV0dGluZyB5b3UgYXNzaWduIGxvY2F0aW9ucyBvciBhbiBlcnJvciBjYWxsYmFjay5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuRXJyb3JDYWxsYmFja30gW29wdF9lcnJvckNhbGxiYWNrXSBjYWxsYmFjayBmb3IgZXJyb3JzLiBCeSBkZWZhdWx0IGl0IGp1c3QgcHJpbnRzIGFuIGVycm9yIHRvIHRoZSBjb25zb2xlXG4gKiAgICAgICAgb24gZXJyb3IuIElmIHlvdSB3YW50IHNvbWV0aGluZyBlbHNlIHBhc3MgYW4gY2FsbGJhY2suIEl0J3MgcGFzc2VkIGFuIGVycm9yIG1lc3NhZ2UuXG4gKiBAcmV0dXJuIHtXZWJHTFByb2dyYW0/fSB0aGUgY3JlYXRlZCBwcm9ncmFtIG9yIG51bGwgaWYgZXJyb3IuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJvZ3JhbXNcbiAqL1xuZnVuY3Rpb24gY3JlYXRlUHJvZ3JhbShcbiAgICBnbCwgc2hhZGVycywgb3B0X2F0dHJpYnMsIG9wdF9sb2NhdGlvbnMsIG9wdF9lcnJvckNhbGxiYWNrKSB7XG4gIGNvbnN0IHByb2dPcHRpb25zID0gZ2V0UHJvZ3JhbU9wdGlvbnMob3B0X2F0dHJpYnMsIG9wdF9sb2NhdGlvbnMsIG9wdF9lcnJvckNhbGxiYWNrKTtcbiAgY29uc3QgcmVhbFNoYWRlcnMgPSBbXTtcbiAgY29uc3QgbmV3U2hhZGVycyA9IFtdO1xuICBmb3IgKGxldCBuZHggPSAwOyBuZHggPCBzaGFkZXJzLmxlbmd0aDsgKytuZHgpIHtcbiAgICBsZXQgc2hhZGVyID0gc2hhZGVyc1tuZHhdO1xuICAgIGlmICh0eXBlb2YgKHNoYWRlcikgPT09ICdzdHJpbmcnKSB7XG4gICAgICBjb25zdCBlbGVtID0gZ2V0RWxlbWVudEJ5SWQoc2hhZGVyKTtcbiAgICAgIGNvbnN0IHNyYyA9IGVsZW0gPyBlbGVtLnRleHQgOiBzaGFkZXI7XG4gICAgICBsZXQgdHlwZSA9IGdsW2RlZmF1bHRTaGFkZXJUeXBlW25keF1dO1xuICAgICAgaWYgKGVsZW0gJiYgZWxlbS50eXBlKSB7XG4gICAgICAgIHR5cGUgPSBnZXRTaGFkZXJUeXBlRnJvbVNjcmlwdFR5cGUoZ2wsIGVsZW0udHlwZSkgfHwgdHlwZTtcbiAgICAgIH1cbiAgICAgIHNoYWRlciA9IGxvYWRTaGFkZXIoZ2wsIHNyYywgdHlwZSwgcHJvZ09wdGlvbnMuZXJyb3JDYWxsYmFjayk7XG4gICAgICBuZXdTaGFkZXJzLnB1c2goc2hhZGVyKTtcbiAgICB9XG4gICAgaWYgKGlzU2hhZGVyKGdsLCBzaGFkZXIpKSB7XG4gICAgICByZWFsU2hhZGVycy5wdXNoKHNoYWRlcik7XG4gICAgfVxuICB9XG5cbiAgaWYgKHJlYWxTaGFkZXJzLmxlbmd0aCAhPT0gc2hhZGVycy5sZW5ndGgpIHtcbiAgICBwcm9nT3B0aW9ucy5lcnJvckNhbGxiYWNrKFwibm90IGVub3VnaCBzaGFkZXJzIGZvciBwcm9ncmFtXCIpO1xuICAgIGRlbGV0ZVNoYWRlcnMoZ2wsIG5ld1NoYWRlcnMpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgcHJvZ3JhbSA9IGdsLmNyZWF0ZVByb2dyYW0oKTtcbiAgcmVhbFNoYWRlcnMuZm9yRWFjaChmdW5jdGlvbihzaGFkZXIpIHtcbiAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgc2hhZGVyKTtcbiAgfSk7XG4gIGlmIChwcm9nT3B0aW9ucy5hdHRyaWJMb2NhdGlvbnMpIHtcbiAgICBPYmplY3Qua2V5cyhwcm9nT3B0aW9ucy5hdHRyaWJMb2NhdGlvbnMpLmZvckVhY2goZnVuY3Rpb24oYXR0cmliKSB7XG4gICAgICBnbC5iaW5kQXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgcHJvZ09wdGlvbnMuYXR0cmliTG9jYXRpb25zW2F0dHJpYl0sIGF0dHJpYik7XG4gICAgfSk7XG4gIH1cbiAgbGV0IHZhcnlpbmdzID0gcHJvZ09wdGlvbnMudHJhbnNmb3JtRmVlZGJhY2tWYXJ5aW5ncztcbiAgaWYgKHZhcnlpbmdzKSB7XG4gICAgaWYgKHZhcnlpbmdzLmF0dHJpYnMpIHtcbiAgICAgIHZhcnlpbmdzID0gdmFyeWluZ3MuYXR0cmlicztcbiAgICB9XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHZhcnlpbmdzKSkge1xuICAgICAgdmFyeWluZ3MgPSBPYmplY3Qua2V5cyh2YXJ5aW5ncyk7XG4gICAgfVxuICAgIGdsLnRyYW5zZm9ybUZlZWRiYWNrVmFyeWluZ3MocHJvZ3JhbSwgdmFyeWluZ3MsIHByb2dPcHRpb25zLnRyYW5zZm9ybUZlZWRiYWNrTW9kZSB8fCBTRVBBUkFURV9BVFRSSUJTKTtcbiAgfVxuICBnbC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcblxuICAvLyBDaGVjayB0aGUgbGluayBzdGF0dXNcbiAgY29uc3QgbGlua2VkID0gZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBMSU5LX1NUQVRVUyk7XG4gIGlmICghbGlua2VkKSB7XG4gICAgLy8gc29tZXRoaW5nIHdlbnQgd3Jvbmcgd2l0aCB0aGUgbGlua1xuICAgIGNvbnN0IGxhc3RFcnJvciA9IGdsLmdldFByb2dyYW1JbmZvTG9nKHByb2dyYW0pO1xuICAgIHByb2dPcHRpb25zLmVycm9yQ2FsbGJhY2soYCR7XG4gICAgICByZWFsU2hhZGVycy5tYXAoc2hhZGVyID0+IHtcbiAgICAgICAgY29uc3Qgc3JjID0gYWRkTGluZU51bWJlcnNXaXRoRXJyb3IoZ2wuZ2V0U2hhZGVyU291cmNlKHNoYWRlciksICcnLCAwKTtcbiAgICAgICAgY29uc3QgdHlwZSA9IGdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGdsLlNIQURFUl9UWVBFKTtcbiAgICAgICAgcmV0dXJuIGAke2dsRW51bVRvU3RyaW5nKGdsLCB0eXBlKX1cXG4ke3NyY319YDtcbiAgICAgIH0pLmpvaW4oJ1xcbicpXG4gICAgfVxcbkVycm9yIGluIHByb2dyYW0gbGlua2luZzogJHtsYXN0RXJyb3J9YCk7XG5cbiAgICBnbC5kZWxldGVQcm9ncmFtKHByb2dyYW0pO1xuICAgIGRlbGV0ZVNoYWRlcnMoZ2wsIG5ld1NoYWRlcnMpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBwcm9ncmFtO1xufVxuXG4vKipcbiAqIExvYWRzIGEgc2hhZGVyIGZyb20gYSBzY3JpcHQgdGFnLlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIFRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHQgdG8gdXNlLlxuICogQHBhcmFtIHtzdHJpbmd9IHNjcmlwdElkIFRoZSBpZCBvZiB0aGUgc2NyaXB0IHRhZy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3NoYWRlclR5cGVdIFRoZSB0eXBlIG9mIHNoYWRlci4gSWYgbm90IHBhc3NlZCBpbiBpdCB3aWxsXG4gKiAgICAgYmUgZGVyaXZlZCBmcm9tIHRoZSB0eXBlIG9mIHRoZSBzY3JpcHQgdGFnLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC5FcnJvckNhbGxiYWNrfSBbb3B0X2Vycm9yQ2FsbGJhY2tdIGNhbGxiYWNrIGZvciBlcnJvcnMuXG4gKiBAcmV0dXJuIHtXZWJHTFNoYWRlcj99IFRoZSBjcmVhdGVkIHNoYWRlciBvciBudWxsIGlmIGVycm9yLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlU2hhZGVyRnJvbVNjcmlwdChcbiAgICBnbCwgc2NyaXB0SWQsIG9wdF9zaGFkZXJUeXBlLCBvcHRfZXJyb3JDYWxsYmFjaykge1xuICBsZXQgc2hhZGVyU291cmNlID0gXCJcIjtcbiAgY29uc3Qgc2hhZGVyU2NyaXB0ID0gZ2V0RWxlbWVudEJ5SWQoc2NyaXB0SWQpO1xuICBpZiAoIXNoYWRlclNjcmlwdCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgdW5rbm93biBzY3JpcHQgZWxlbWVudDogJHtzY3JpcHRJZH1gKTtcbiAgfVxuICBzaGFkZXJTb3VyY2UgPSBzaGFkZXJTY3JpcHQudGV4dDtcblxuICBjb25zdCBzaGFkZXJUeXBlID0gb3B0X3NoYWRlclR5cGUgfHwgZ2V0U2hhZGVyVHlwZUZyb21TY3JpcHRUeXBlKGdsLCBzaGFkZXJTY3JpcHQudHlwZSk7XG4gIGlmICghc2hhZGVyVHlwZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigndW5rbm93biBzaGFkZXIgdHlwZScpO1xuICB9XG5cbiAgcmV0dXJuIGxvYWRTaGFkZXIoZ2wsIHNoYWRlclNvdXJjZSwgc2hhZGVyVHlwZSwgb3B0X2Vycm9yQ2FsbGJhY2spO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBwcm9ncmFtIGZyb20gMiBzY3JpcHQgdGFncy5cbiAqXG4gKiBOT1RFOiBUaGVyZSBhcmUgNCBzaWduYXR1cmVzIGZvciB0aGlzIGZ1bmN0aW9uXG4gKlxuICogICAgIHR3Z2wuY3JlYXRlUHJvZ3JhbUZyb21TY3JpcHRzKGdsLCBbdnMsIGZzXSwgb3B0X29wdGlvbnMpO1xuICogICAgIHR3Z2wuY3JlYXRlUHJvZ3JhbUZyb21TY3JpcHRzKGdsLCBbdnMsIGZzXSwgb3B0X2VyckZ1bmMpO1xuICogICAgIHR3Z2wuY3JlYXRlUHJvZ3JhbUZyb21TY3JpcHRzKGdsLCBbdnMsIGZzXSwgb3B0X2F0dHJpYnMsIG9wdF9lcnJGdW5jKTtcbiAqICAgICB0d2dsLmNyZWF0ZVByb2dyYW1Gcm9tU2NyaXB0cyhnbCwgW3ZzLCBmc10sIG9wdF9hdHRyaWJzLCBvcHRfbG9jYXRpb25zLCBvcHRfZXJyRnVuYyk7XG4gKlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIFRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHRcbiAqICAgICAgICB0byB1c2UuXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSBzaGFkZXJTY3JpcHRJZHMgQXJyYXkgb2YgaWRzIG9mIHRoZSBzY3JpcHRcbiAqICAgICAgICB0YWdzIGZvciB0aGUgc2hhZGVycy4gVGhlIGZpcnN0IGlzIGFzc3VtZWQgdG8gYmUgdGhlXG4gKiAgICAgICAgdmVydGV4IHNoYWRlciwgdGhlIHNlY29uZCB0aGUgZnJhZ21lbnQgc2hhZGVyLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC5Qcm9ncmFtT3B0aW9uc3xzdHJpbmdbXXxtb2R1bGU6dHdnbC5FcnJvckNhbGxiYWNrfSBbb3B0X2F0dHJpYnNdIE9wdGlvbnMgZm9yIHRoZSBwcm9ncmFtIG9yIGFuIGFycmF5IG9mIGF0dHJpYnMgbmFtZXMgb3IgYW4gZXJyb3IgY2FsbGJhY2suIExvY2F0aW9ucyB3aWxsIGJlIGFzc2lnbmVkIGJ5IGluZGV4IGlmIG5vdCBwYXNzZWQgaW5cbiAqIEBwYXJhbSB7bnVtYmVyW119IFtvcHRfbG9jYXRpb25zfG1vZHVsZTp0d2dsLkVycm9yQ2FsbGJhY2tdIFRoZSBsb2NhdGlvbnMgZm9yIHRoZS4gQSBwYXJhbGxlbCBhcnJheSB0byBvcHRfYXR0cmlicyBsZXR0aW5nIHlvdSBhc3NpZ24gbG9jYXRpb25zIG9yIGFuIGVycm9yIGNhbGxiYWNrLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC5FcnJvckNhbGxiYWNrfSBbb3B0X2Vycm9yQ2FsbGJhY2tdIGNhbGxiYWNrIGZvciBlcnJvcnMuIEJ5IGRlZmF1bHQgaXQganVzdCBwcmludHMgYW4gZXJyb3IgdG8gdGhlIGNvbnNvbGVcbiAqICAgICAgICBvbiBlcnJvci4gSWYgeW91IHdhbnQgc29tZXRoaW5nIGVsc2UgcGFzcyBhbiBjYWxsYmFjay4gSXQncyBwYXNzZWQgYW4gZXJyb3IgbWVzc2FnZS5cbiAqIEByZXR1cm4ge1dlYkdMUHJvZ3JhbT99IHRoZSBjcmVhdGVkIHByb2dyYW0gb3IgbnVsbCBpZiBlcnJvci5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcm9ncmFtc1xuICovXG5mdW5jdGlvbiBjcmVhdGVQcm9ncmFtRnJvbVNjcmlwdHMoXG4gICAgZ2wsIHNoYWRlclNjcmlwdElkcywgb3B0X2F0dHJpYnMsIG9wdF9sb2NhdGlvbnMsIG9wdF9lcnJvckNhbGxiYWNrKSB7XG4gIGNvbnN0IHByb2dPcHRpb25zID0gZ2V0UHJvZ3JhbU9wdGlvbnMob3B0X2F0dHJpYnMsIG9wdF9sb2NhdGlvbnMsIG9wdF9lcnJvckNhbGxiYWNrKTtcbiAgY29uc3Qgc2hhZGVycyA9IFtdO1xuICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgc2hhZGVyU2NyaXB0SWRzLmxlbmd0aDsgKytpaSkge1xuICAgIGNvbnN0IHNoYWRlciA9IGNyZWF0ZVNoYWRlckZyb21TY3JpcHQoXG4gICAgICAgIGdsLCBzaGFkZXJTY3JpcHRJZHNbaWldLCBnbFtkZWZhdWx0U2hhZGVyVHlwZVtpaV1dLCBwcm9nT3B0aW9ucy5lcnJvckNhbGxiYWNrKTtcbiAgICBpZiAoIXNoYWRlcikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHNoYWRlcnMucHVzaChzaGFkZXIpO1xuICB9XG4gIHJldHVybiBjcmVhdGVQcm9ncmFtKGdsLCBzaGFkZXJzLCBwcm9nT3B0aW9ucyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHByb2dyYW0gZnJvbSAyIHNvdXJjZXMuXG4gKlxuICogTk9URTogVGhlcmUgYXJlIDQgc2lnbmF0dXJlcyBmb3IgdGhpcyBmdW5jdGlvblxuICpcbiAqICAgICB0d2dsLmNyZWF0ZVByb2dyYW1Gcm9tU291cmNlKGdsLCBbdnMsIGZzXSwgb3B0X29wdGlvbnMpO1xuICogICAgIHR3Z2wuY3JlYXRlUHJvZ3JhbUZyb21Tb3VyY2UoZ2wsIFt2cywgZnNdLCBvcHRfZXJyRnVuYyk7XG4gKiAgICAgdHdnbC5jcmVhdGVQcm9ncmFtRnJvbVNvdXJjZShnbCwgW3ZzLCBmc10sIG9wdF9hdHRyaWJzLCBvcHRfZXJyRnVuYyk7XG4gKiAgICAgdHdnbC5jcmVhdGVQcm9ncmFtRnJvbVNvdXJjZShnbCwgW3ZzLCBmc10sIG9wdF9hdHRyaWJzLCBvcHRfbG9jYXRpb25zLCBvcHRfZXJyRnVuYyk7XG4gKlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIFRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHRcbiAqICAgICAgICB0byB1c2UuXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSBzaGFkZXJTb3VyY2VzIEFycmF5IG9mIHNvdXJjZXMgZm9yIHRoZVxuICogICAgICAgIHNoYWRlcnMuIFRoZSBmaXJzdCBpcyBhc3N1bWVkIHRvIGJlIHRoZSB2ZXJ0ZXggc2hhZGVyLFxuICogICAgICAgIHRoZSBzZWNvbmQgdGhlIGZyYWdtZW50IHNoYWRlci5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuUHJvZ3JhbU9wdGlvbnN8c3RyaW5nW118bW9kdWxlOnR3Z2wuRXJyb3JDYWxsYmFja30gW29wdF9hdHRyaWJzXSBPcHRpb25zIGZvciB0aGUgcHJvZ3JhbSBvciBhbiBhcnJheSBvZiBhdHRyaWJzIG5hbWVzIG9yIGFuIGVycm9yIGNhbGxiYWNrLiBMb2NhdGlvbnMgd2lsbCBiZSBhc3NpZ25lZCBieSBpbmRleCBpZiBub3QgcGFzc2VkIGluXG4gKiBAcGFyYW0ge251bWJlcltdfSBbb3B0X2xvY2F0aW9uc3xtb2R1bGU6dHdnbC5FcnJvckNhbGxiYWNrXSBUaGUgbG9jYXRpb25zIGZvciB0aGUuIEEgcGFyYWxsZWwgYXJyYXkgdG8gb3B0X2F0dHJpYnMgbGV0dGluZyB5b3UgYXNzaWduIGxvY2F0aW9ucyBvciBhbiBlcnJvciBjYWxsYmFjay5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuRXJyb3JDYWxsYmFja30gW29wdF9lcnJvckNhbGxiYWNrXSBjYWxsYmFjayBmb3IgZXJyb3JzLiBCeSBkZWZhdWx0IGl0IGp1c3QgcHJpbnRzIGFuIGVycm9yIHRvIHRoZSBjb25zb2xlXG4gKiAgICAgICAgb24gZXJyb3IuIElmIHlvdSB3YW50IHNvbWV0aGluZyBlbHNlIHBhc3MgYW4gY2FsbGJhY2suIEl0J3MgcGFzc2VkIGFuIGVycm9yIG1lc3NhZ2UuXG4gKiBAcmV0dXJuIHtXZWJHTFByb2dyYW0/fSB0aGUgY3JlYXRlZCBwcm9ncmFtIG9yIG51bGwgaWYgZXJyb3IuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJvZ3JhbXNcbiAqL1xuZnVuY3Rpb24gY3JlYXRlUHJvZ3JhbUZyb21Tb3VyY2VzKFxuICAgIGdsLCBzaGFkZXJTb3VyY2VzLCBvcHRfYXR0cmlicywgb3B0X2xvY2F0aW9ucywgb3B0X2Vycm9yQ2FsbGJhY2spIHtcbiAgY29uc3QgcHJvZ09wdGlvbnMgPSBnZXRQcm9ncmFtT3B0aW9ucyhvcHRfYXR0cmlicywgb3B0X2xvY2F0aW9ucywgb3B0X2Vycm9yQ2FsbGJhY2spO1xuICBjb25zdCBzaGFkZXJzID0gW107XG4gIGZvciAobGV0IGlpID0gMDsgaWkgPCBzaGFkZXJTb3VyY2VzLmxlbmd0aDsgKytpaSkge1xuICAgIGNvbnN0IHNoYWRlciA9IGxvYWRTaGFkZXIoXG4gICAgICAgIGdsLCBzaGFkZXJTb3VyY2VzW2lpXSwgZ2xbZGVmYXVsdFNoYWRlclR5cGVbaWldXSwgcHJvZ09wdGlvbnMuZXJyb3JDYWxsYmFjayk7XG4gICAgaWYgKCFzaGFkZXIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBzaGFkZXJzLnB1c2goc2hhZGVyKTtcbiAgfVxuICByZXR1cm4gY3JlYXRlUHJvZ3JhbShnbCwgc2hhZGVycywgcHJvZ09wdGlvbnMpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBhdHRyaWJ1dGUvdW5pZm9ybSBpcyBhIHJlc2VydmVkL2J1aWx0IGluXG4gKlxuICogSXQgbWFrZXMgbm8gc2Vuc2UgdG8gbWUgd2h5IEdMIHJldHVybnMgdGhlc2UgYmVjYXVzZSBpdCdzXG4gKiBpbGxlZ2FsIHRvIGNhbGwgYGdsLmdldFVuaWZvcm1Mb2NhdGlvbmAgYW5kIGBnbC5nZXRBdHRyaWJMb2NhdGlvbmBcbiAqIHdpdGggbmFtZXMgdGhhdCBzdGFydCB3aXRoIGBnbF9gIChhbmQgYHdlYmdsX2AgaW4gV2ViR0wpXG4gKlxuICogSSBjYW4gb25seSBhc3N1bWUgdGhleSBhcmUgdGhlcmUgYmVjYXVzZSB0aGV5IG1pZ2h0IGNvdW50XG4gKiB3aGVuIGNvbXB1dGluZyB0aGUgbnVtYmVyIG9mIHVuaWZvcm1zL2F0dHJpYnV0ZXMgdXNlZCB3aGVuIHlvdSB3YW50IHRvXG4gKiBrbm93IGlmIHlvdSBhcmUgbmVhciB0aGUgbGltaXQuIFRoYXQgZG9lc24ndCByZWFsbHkgbWFrZSBzZW5zZVxuICogdG8gbWUgYnV0IHRoZSBmYWN0IHRoYXQgdGhlc2UgZ2V0IHJldHVybmVkIGFyZSBpbiB0aGUgc3BlYy5cbiAqXG4gKiBAcGFyYW0ge1dlYkdMQWN0aXZlSW5mb30gaW5mbyBBcyByZXR1cm5lZCBmcm9tIGBnbC5nZXRBY3RpdmVVbmlmb3JtYCBvclxuICogICAgYGdsLmdldEFjdGl2ZUF0dHJpYmAuXG4gKiBAcmV0dXJuIHtib29sfSB0cnVlIGlmIGl0J3MgcmVzZXJ2ZWRcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGlzQnVpbHRJbihpbmZvKSB7XG4gIGNvbnN0IG5hbWUgPSBpbmZvLm5hbWU7XG4gIHJldHVybiBuYW1lLnN0YXJ0c1dpdGgoXCJnbF9cIikgfHwgbmFtZS5zdGFydHNXaXRoKFwid2ViZ2xfXCIpO1xufVxuXG5jb25zdCB0b2tlblJFID0gLyhcXC58XFxbfF18XFx3KykvZztcbmNvbnN0IGlzRGlnaXQgPSBzID0+IHMgPj0gJzAnICYmIHMgPD0gJzknO1xuZnVuY3Rpb24gYWRkU2V0dGVyVG9Vbmlmb3JtVHJlZShmdWxsUGF0aCwgc2V0dGVyLCBub2RlLCB1bmlmb3JtU2V0dGVycykge1xuICBjb25zdCB0b2tlbnMgPSBmdWxsUGF0aC5zcGxpdCh0b2tlblJFKS5maWx0ZXIocyA9PiBzICE9PSAnJyk7XG4gIGxldCB0b2tlbk5keCA9IDA7XG4gIGxldCBwYXRoID0gJyc7XG5cbiAgZm9yICg7Oykge1xuICAgIGNvbnN0IHRva2VuID0gdG9rZW5zW3Rva2VuTmR4KytdOyAgLy8gaGFzIHRvIGJlIG5hbWUgb3IgbnVtYmVyXG4gICAgcGF0aCArPSB0b2tlbjtcbiAgICBjb25zdCBpc0FycmF5SW5kZXggPSBpc0RpZ2l0KHRva2VuWzBdKTtcbiAgICBjb25zdCBhY2Nlc3NvciA9IGlzQXJyYXlJbmRleFxuICAgICAgICA/IHBhcnNlSW50KHRva2VuKVxuICAgICAgICA6IHRva2VuO1xuICAgIGlmIChpc0FycmF5SW5kZXgpIHtcbiAgICAgIHBhdGggKz0gdG9rZW5zW3Rva2VuTmR4KytdOyAgLy8gc2tpcCAnXSdcbiAgICB9XG4gICAgY29uc3QgaXNMYXN0VG9rZW4gPSB0b2tlbk5keCA9PT0gdG9rZW5zLmxlbmd0aDtcbiAgICBpZiAoaXNMYXN0VG9rZW4pIHtcbiAgICAgIG5vZGVbYWNjZXNzb3JdID0gc2V0dGVyO1xuICAgICAgYnJlYWs7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHRva2VuID0gdG9rZW5zW3Rva2VuTmR4KytdOyAgLy8gaGFzIHRvIGJlIC4gb3IgW1xuICAgICAgY29uc3QgaXNBcnJheSA9IHRva2VuID09PSAnWyc7XG4gICAgICBjb25zdCBjaGlsZCA9IG5vZGVbYWNjZXNzb3JdIHx8IChpc0FycmF5ID8gW10gOiB7fSk7XG4gICAgICBub2RlW2FjY2Vzc29yXSA9IGNoaWxkO1xuICAgICAgbm9kZSA9IGNoaWxkO1xuICAgICAgdW5pZm9ybVNldHRlcnNbcGF0aF0gPSB1bmlmb3JtU2V0dGVyc1twYXRoXSB8fCBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIHNldFVuaWZvcm1UcmVlKG5vZGUsIHZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgIH0oY2hpbGQpO1xuICAgICAgcGF0aCArPSB0b2tlbjtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIHNldHRlciBmdW5jdGlvbnMgZm9yIGFsbCB1bmlmb3JtcyBvZiBhIHNoYWRlclxuICogcHJvZ3JhbS5cbiAqXG4gKiBAc2VlIHtAbGluayBtb2R1bGU6dHdnbC5zZXRVbmlmb3Jtc31cbiAqXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgVGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dCB0byB1c2UuXG4gKiBAcGFyYW0ge1dlYkdMUHJvZ3JhbX0gcHJvZ3JhbSB0aGUgcHJvZ3JhbSB0byBjcmVhdGUgc2V0dGVycyBmb3IuXG4gKiBAcmV0dXJucyB7T2JqZWN0LjxzdHJpbmcsIGZ1bmN0aW9uPn0gYW4gb2JqZWN0IHdpdGggYSBzZXR0ZXIgYnkgbmFtZSBmb3IgZWFjaCB1bmlmb3JtXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJvZ3JhbXNcbiAqL1xuZnVuY3Rpb24gY3JlYXRlVW5pZm9ybVNldHRlcnMoZ2wsIHByb2dyYW0pIHtcbiAgbGV0IHRleHR1cmVVbml0ID0gMDtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHNldHRlciBmb3IgYSB1bmlmb3JtIG9mIHRoZSBnaXZlbiBwcm9ncmFtIHdpdGggaXQnc1xuICAgKiBsb2NhdGlvbiBlbWJlZGRlZCBpbiB0aGUgc2V0dGVyLlxuICAgKiBAcGFyYW0ge1dlYkdMUHJvZ3JhbX0gcHJvZ3JhbVxuICAgKiBAcGFyYW0ge1dlYkdMVW5pZm9ybUluZm99IHVuaWZvcm1JbmZvXG4gICAqIEByZXR1cm5zIHtmdW5jdGlvbn0gdGhlIGNyZWF0ZWQgc2V0dGVyLlxuICAgKi9cbiAgZnVuY3Rpb24gY3JlYXRlVW5pZm9ybVNldHRlcihwcm9ncmFtLCB1bmlmb3JtSW5mbywgbG9jYXRpb24pIHtcbiAgICBjb25zdCBpc0FycmF5ID0gdW5pZm9ybUluZm8ubmFtZS5lbmRzV2l0aChcIlswXVwiKTtcbiAgICBjb25zdCB0eXBlID0gdW5pZm9ybUluZm8udHlwZTtcbiAgICBjb25zdCB0eXBlSW5mbyA9IHR5cGVNYXBbdHlwZV07XG4gICAgaWYgKCF0eXBlSW5mbykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGB1bmtub3duIHR5cGU6IDB4JHt0eXBlLnRvU3RyaW5nKDE2KX1gKTsgLy8gd2Ugc2hvdWxkIG5ldmVyIGdldCBoZXJlLlxuICAgIH1cbiAgICBsZXQgc2V0dGVyO1xuICAgIGlmICh0eXBlSW5mby5iaW5kUG9pbnQpIHtcbiAgICAgIC8vIGl0J3MgYSBzYW1wbGVyXG4gICAgICBjb25zdCB1bml0ID0gdGV4dHVyZVVuaXQ7XG4gICAgICB0ZXh0dXJlVW5pdCArPSB1bmlmb3JtSW5mby5zaXplO1xuICAgICAgaWYgKGlzQXJyYXkpIHtcbiAgICAgICAgc2V0dGVyID0gdHlwZUluZm8uYXJyYXlTZXR0ZXIoZ2wsIHR5cGUsIHVuaXQsIGxvY2F0aW9uLCB1bmlmb3JtSW5mby5zaXplKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldHRlciA9IHR5cGVJbmZvLnNldHRlcihnbCwgdHlwZSwgdW5pdCwgbG9jYXRpb24sIHVuaWZvcm1JbmZvLnNpemUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZUluZm8uYXJyYXlTZXR0ZXIgJiYgaXNBcnJheSkge1xuICAgICAgICBzZXR0ZXIgPSB0eXBlSW5mby5hcnJheVNldHRlcihnbCwgbG9jYXRpb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0dGVyID0gdHlwZUluZm8uc2V0dGVyKGdsLCBsb2NhdGlvbik7XG4gICAgICB9XG4gICAgfVxuICAgIHNldHRlci5sb2NhdGlvbiA9IGxvY2F0aW9uO1xuICAgIHJldHVybiBzZXR0ZXI7XG4gIH1cblxuICBjb25zdCB1bmlmb3JtU2V0dGVycyA9IHt9O1xuICBjb25zdCB1bmlmb3JtVHJlZSA9IHt9O1xuICBjb25zdCBudW1Vbmlmb3JtcyA9IGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgQUNUSVZFX1VOSUZPUk1TKTtcblxuICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgbnVtVW5pZm9ybXM7ICsraWkpIHtcbiAgICBjb25zdCB1bmlmb3JtSW5mbyA9IGdsLmdldEFjdGl2ZVVuaWZvcm0ocHJvZ3JhbSwgaWkpO1xuICAgIGlmIChpc0J1aWx0SW4odW5pZm9ybUluZm8pKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgbGV0IG5hbWUgPSB1bmlmb3JtSW5mby5uYW1lO1xuICAgIC8vIHJlbW92ZSB0aGUgYXJyYXkgc3VmZml4LlxuICAgIGlmIChuYW1lLmVuZHNXaXRoKFwiWzBdXCIpKSB7XG4gICAgICBuYW1lID0gbmFtZS5zdWJzdHIoMCwgbmFtZS5sZW5ndGggLSAzKTtcbiAgICB9XG4gICAgY29uc3QgbG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdW5pZm9ybUluZm8ubmFtZSk7XG4gICAgLy8gdGhlIHVuaWZvcm0gd2lsbCBoYXZlIG5vIGxvY2F0aW9uIGlmIGl0J3MgaW4gYSB1bmlmb3JtIGJsb2NrXG4gICAgaWYgKGxvY2F0aW9uKSB7XG4gICAgICBjb25zdCBzZXR0ZXIgPSBjcmVhdGVVbmlmb3JtU2V0dGVyKHByb2dyYW0sIHVuaWZvcm1JbmZvLCBsb2NhdGlvbik7XG4gICAgICB1bmlmb3JtU2V0dGVyc1tuYW1lXSA9IHNldHRlcjtcbiAgICAgIGFkZFNldHRlclRvVW5pZm9ybVRyZWUobmFtZSwgc2V0dGVyLCB1bmlmb3JtVHJlZSwgdW5pZm9ybVNldHRlcnMpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB1bmlmb3JtU2V0dGVycztcbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUcmFuc2Zvcm1GZWVkYmFja0luZm9cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBpbmRleCBpbmRleCBvZiB0cmFuc2Zvcm0gZmVlZGJhY2tcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0eXBlIEdMIHR5cGVcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBzaXplIDEgLSA0XG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2xcbiAqL1xuXG4vKipcbiAqIENyZWF0ZSBUcmFuc2Zvcm1GZWVkYmFja0luZm8gZm9yIHBhc3NpbmcgdG8gYmluZFRyYW5zZm9ybUZlZWRiYWNrSW5mby5cbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0IHRvIHVzZS5cbiAqIEBwYXJhbSB7V2ViR0xQcm9ncmFtfSBwcm9ncmFtIGFuIGV4aXN0aW5nIFdlYkdMUHJvZ3JhbS5cbiAqIEByZXR1cm4ge09iamVjdDxzdHJpbmcsIG1vZHVsZTp0d2dsLlRyYW5zZm9ybUZlZWRiYWNrSW5mbz59XG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2xcbiAqL1xuZnVuY3Rpb24gY3JlYXRlVHJhbnNmb3JtRmVlZGJhY2tJbmZvKGdsLCBwcm9ncmFtKSB7XG4gIGNvbnN0IGluZm8gPSB7fTtcbiAgY29uc3QgbnVtVmFyeWluZ3MgPSBnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIFRSQU5TRk9STV9GRUVEQkFDS19WQVJZSU5HUyk7XG4gIGZvciAobGV0IGlpID0gMDsgaWkgPCBudW1WYXJ5aW5nczsgKytpaSkge1xuICAgIGNvbnN0IHZhcnlpbmcgPSBnbC5nZXRUcmFuc2Zvcm1GZWVkYmFja1ZhcnlpbmcocHJvZ3JhbSwgaWkpO1xuICAgIGluZm9bdmFyeWluZy5uYW1lXSA9IHtcbiAgICAgIGluZGV4OiBpaSxcbiAgICAgIHR5cGU6IHZhcnlpbmcudHlwZSxcbiAgICAgIHNpemU6IHZhcnlpbmcuc2l6ZSxcbiAgICB9O1xuICB9XG4gIHJldHVybiBpbmZvO1xufVxuXG4vKipcbiAqIEJpbmRzIGJ1ZmZlcnMgZm9yIHRyYW5zZm9ybSBmZWVkYmFjay5cbiAqXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgVGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dCB0byB1c2UuXG4gKiBAcGFyYW0geyhtb2R1bGU6dHdnbC5Qcm9ncmFtSW5mb3xPYmplY3Q8c3RyaW5nLCBtb2R1bGU6dHdnbC5UcmFuc2Zvcm1GZWVkYmFja0luZm8+KX0gdHJhbnNmb3JtRmVlZGJhY2tJbmZvIEEgUHJvZ3JhbUluZm8gb3IgVHJhbnNmb3JtRmVlZGJhY2tJbmZvLlxuICogQHBhcmFtIHsobW9kdWxlOnR3Z2wuQnVmZmVySW5mb3xPYmplY3Q8c3RyaW5nLCBtb2R1bGU6dHdnbC5BdHRyaWJJbmZvPil9IFtidWZmZXJJbmZvXSBBIEJ1ZmZlckluZm8gb3Igc2V0IG9mIEF0dHJpYkluZm9zLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsXG4gKi9cbmZ1bmN0aW9uIGJpbmRUcmFuc2Zvcm1GZWVkYmFja0luZm8oZ2wsIHRyYW5zZm9ybUZlZWRiYWNrSW5mbywgYnVmZmVySW5mbykge1xuICBpZiAodHJhbnNmb3JtRmVlZGJhY2tJbmZvLnRyYW5zZm9ybUZlZWRiYWNrSW5mbykge1xuICAgIHRyYW5zZm9ybUZlZWRiYWNrSW5mbyA9IHRyYW5zZm9ybUZlZWRiYWNrSW5mby50cmFuc2Zvcm1GZWVkYmFja0luZm87XG4gIH1cbiAgaWYgKGJ1ZmZlckluZm8uYXR0cmlicykge1xuICAgIGJ1ZmZlckluZm8gPSBidWZmZXJJbmZvLmF0dHJpYnM7XG4gIH1cbiAgZm9yIChjb25zdCBuYW1lIGluIGJ1ZmZlckluZm8pIHtcbiAgICBjb25zdCB2YXJ5aW5nID0gdHJhbnNmb3JtRmVlZGJhY2tJbmZvW25hbWVdO1xuICAgIGlmICh2YXJ5aW5nKSB7XG4gICAgICBjb25zdCBidWYgPSBidWZmZXJJbmZvW25hbWVdO1xuICAgICAgaWYgKGJ1Zi5vZmZzZXQpIHtcbiAgICAgICAgZ2wuYmluZEJ1ZmZlclJhbmdlKFRSQU5TRk9STV9GRUVEQkFDS19CVUZGRVIsIHZhcnlpbmcuaW5kZXgsIGJ1Zi5idWZmZXIsIGJ1Zi5vZmZzZXQsIGJ1Zi5zaXplKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdsLmJpbmRCdWZmZXJCYXNlKFRSQU5TRk9STV9GRUVEQkFDS19CVUZGRVIsIHZhcnlpbmcuaW5kZXgsIGJ1Zi5idWZmZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB0cmFuc2Zvcm0gZmVlZGJhY2sgYW5kIHNldHMgdGhlIGJ1ZmZlcnNcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0IHRvIHVzZS5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuUHJvZ3JhbUluZm99IHByb2dyYW1JbmZvIEEgUHJvZ3JhbUluZm8gYXMgcmV0dXJuZWQgZnJvbSB7QGxpbmsgbW9kdWxlOnR3Z2wuY3JlYXRlUHJvZ3JhbUluZm99XG4gKiBAcGFyYW0geyhtb2R1bGU6dHdnbC5CdWZmZXJJbmZvfE9iamVjdDxzdHJpbmcsIG1vZHVsZTp0d2dsLkF0dHJpYkluZm8+KX0gW2J1ZmZlckluZm9dIEEgQnVmZmVySW5mbyBvciBzZXQgb2YgQXR0cmliSW5mb3MuXG4gKiBAcmV0dXJuIHtXZWJHTFRyYW5zZm9ybUZlZWRiYWNrfSB0aGUgY3JlYXRlZCB0cmFuc2Zvcm0gZmVlZGJhY2tcbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbFxuICovXG5mdW5jdGlvbiBjcmVhdGVUcmFuc2Zvcm1GZWVkYmFjayhnbCwgcHJvZ3JhbUluZm8sIGJ1ZmZlckluZm8pIHtcbiAgY29uc3QgdGYgPSBnbC5jcmVhdGVUcmFuc2Zvcm1GZWVkYmFjaygpO1xuICBnbC5iaW5kVHJhbnNmb3JtRmVlZGJhY2soVFJBTlNGT1JNX0ZFRURCQUNLLCB0Zik7XG4gIGdsLnVzZVByb2dyYW0ocHJvZ3JhbUluZm8ucHJvZ3JhbSk7XG4gIGJpbmRUcmFuc2Zvcm1GZWVkYmFja0luZm8oZ2wsIHByb2dyYW1JbmZvLCBidWZmZXJJbmZvKTtcbiAgZ2wuYmluZFRyYW5zZm9ybUZlZWRiYWNrKFRSQU5TRk9STV9GRUVEQkFDSywgbnVsbCk7XG4gIHJldHVybiB0Zjtcbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBVbmlmb3JtRGF0YVxuICogQHByb3BlcnR5IHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIHVuaWZvcm1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0eXBlIFRoZSBXZWJHTCB0eXBlIGVudW0gZm9yIHRoaXMgdW5pZm9ybVxuICogQHByb3BlcnR5IHtudW1iZXJ9IHNpemUgVGhlIG51bWJlciBvZiBlbGVtZW50cyBmb3IgdGhpcyB1bmlmb3JtXG4gKiBAcHJvcGVydHkge251bWJlcn0gYmxvY2tOZHggVGhlIGJsb2NrIGluZGV4IHRoaXMgdW5pZm9ybSBhcHBlYXJzIGluXG4gKiBAcHJvcGVydHkge251bWJlcn0gb2Zmc2V0IFRoZSBieXRlIG9mZnNldCBpbiB0aGUgYmxvY2sgZm9yIHRoaXMgdW5pZm9ybSdzIHZhbHVlXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2xcbiAqL1xuXG4vKipcbiAqIFRoZSBzcGVjaWZpY2F0aW9uIGZvciBvbmUgVW5pZm9ybUJsb2NrT2JqZWN0XG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gQmxvY2tTcGVjXG4gKiBAcHJvcGVydHkge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBibG9jay5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBzaXplIFRoZSBzaXplIGluIGJ5dGVzIG5lZWRlZCBmb3IgdGhlIGJsb2NrXG4gKiBAcHJvcGVydHkge251bWJlcltdfSB1bmlmb3JtSW5kaWNlcyBUaGUgaW5kaWNlcyBvZiB0aGUgdW5pZm9ybXMgdXNlZCBieSB0aGUgYmxvY2suIFRoZXNlIGluZGljZXNcbiAqICAgIGNvcnJlc3BvbmQgdG8gZW50cmllcyBpbiBhIFVuaWZvcm1EYXRhIGFycmF5IGluIHRoZSB7QGxpbmsgbW9kdWxlOnR3Z2wuVW5pZm9ybUJsb2NrU3BlY30uXG4gKiBAcHJvcGVydHkge2Jvb2x9IHVzZWRCeVZlcnRleFNoYWRlciBTZWxmIGV4cGxhbmF0b3J5XG4gKiBAcHJvcGVydHkge2Jvb2x9IHVzZWRCeUZyYWdtZW50U2hhZGVyIFNlbGYgZXhwbGFuYXRvcnlcbiAqIEBwcm9wZXJ0eSB7Ym9vbH0gdXNlZCBTZWxmIGV4cGxhbmF0b3J5XG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2xcbiAqL1xuXG4vKipcbiAqIEEgYFVuaWZvcm1CbG9ja1NwZWNgIHJlcHJlc2VudHMgdGhlIGRhdGEgbmVlZGVkIHRvIGNyZWF0ZSBhbmQgYmluZFxuICogVW5pZm9ybUJsb2NrT2JqZWN0cyBmb3IgYSBnaXZlbiBwcm9ncmFtXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gVW5pZm9ybUJsb2NrU3BlY1xuICogQHByb3BlcnR5IHtPYmplY3QuPHN0cmluZywgbW9kdWxlOnR3Z2wuQmxvY2tTcGVjPn0gYmxvY2tTcGVjcyBUaGUgQmxvY2tTcGVjIGZvciBlYWNoIGJsb2NrIGJ5IGJsb2NrIG5hbWVcbiAqIEBwcm9wZXJ0eSB7VW5pZm9ybURhdGFbXX0gdW5pZm9ybURhdGEgQW4gYXJyYXkgb2YgZGF0YSBmb3IgZWFjaCB1bmlmb3JtIGJ5IHVuaWZvcm0gaW5kZXguXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2xcbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBVbmlmb3JtQmxvY2tTcGVjIGZvciB0aGUgZ2l2ZW4gcHJvZ3JhbS5cbiAqXG4gKiBBIFVuaWZvcm1CbG9ja1NwZWMgcmVwcmVzZW50cyB0aGUgZGF0YSBuZWVkZWQgdG8gY3JlYXRlIGFuZCBiaW5kXG4gKiBVbmlmb3JtQmxvY2tPYmplY3RzXG4gKlxuICogQHBhcmFtIHtXZWJHTDJSZW5kZXJpbmdDb250ZXh0fSBnbCBBIFdlYkdMMiBSZW5kZXJpbmcgQ29udGV4dFxuICogQHBhcmFtIHtXZWJHTFByb2dyYW19IHByb2dyYW0gQSBXZWJHTFByb2dyYW0gZm9yIGEgc3VjY2Vzc2Z1bGx5IGxpbmtlZCBwcm9ncmFtXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC5Vbmlmb3JtQmxvY2tTcGVjfSBUaGUgY3JlYXRlZCBVbmlmb3JtQmxvY2tTcGVjXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJvZ3JhbXNcbiAqL1xuZnVuY3Rpb24gY3JlYXRlVW5pZm9ybUJsb2NrU3BlY0Zyb21Qcm9ncmFtKGdsLCBwcm9ncmFtKSB7XG4gIGNvbnN0IG51bVVuaWZvcm1zID0gZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBBQ1RJVkVfVU5JRk9STVMpO1xuICBjb25zdCB1bmlmb3JtRGF0YSA9IFtdO1xuICBjb25zdCB1bmlmb3JtSW5kaWNlcyA9IFtdO1xuXG4gIGZvciAobGV0IGlpID0gMDsgaWkgPCBudW1Vbmlmb3JtczsgKytpaSkge1xuICAgIHVuaWZvcm1JbmRpY2VzLnB1c2goaWkpO1xuICAgIHVuaWZvcm1EYXRhLnB1c2goe30pO1xuICAgIGNvbnN0IHVuaWZvcm1JbmZvID0gZ2wuZ2V0QWN0aXZlVW5pZm9ybShwcm9ncmFtLCBpaSk7XG4gICAgdW5pZm9ybURhdGFbaWldLm5hbWUgPSB1bmlmb3JtSW5mby5uYW1lO1xuICB9XG5cbiAgW1xuICAgIFsgXCJVTklGT1JNX1RZUEVcIiwgXCJ0eXBlXCIgXSxcbiAgICBbIFwiVU5JRk9STV9TSVpFXCIsIFwic2l6ZVwiIF0sICAvLyBudW0gZWxlbWVudHNcbiAgICBbIFwiVU5JRk9STV9CTE9DS19JTkRFWFwiLCBcImJsb2NrTmR4XCIgXSxcbiAgICBbIFwiVU5JRk9STV9PRkZTRVRcIiwgXCJvZmZzZXRcIiwgXSxcbiAgXS5mb3JFYWNoKGZ1bmN0aW9uKHBhaXIpIHtcbiAgICBjb25zdCBwbmFtZSA9IHBhaXJbMF07XG4gICAgY29uc3Qga2V5ID0gcGFpclsxXTtcbiAgICBnbC5nZXRBY3RpdmVVbmlmb3Jtcyhwcm9ncmFtLCB1bmlmb3JtSW5kaWNlcywgZ2xbcG5hbWVdKS5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuZHgpIHtcbiAgICAgIHVuaWZvcm1EYXRhW25keF1ba2V5XSA9IHZhbHVlO1xuICAgIH0pO1xuICB9KTtcblxuICBjb25zdCBibG9ja1NwZWNzID0ge307XG5cbiAgY29uc3QgbnVtVW5pZm9ybUJsb2NrcyA9IGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgQUNUSVZFX1VOSUZPUk1fQkxPQ0tTKTtcbiAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IG51bVVuaWZvcm1CbG9ja3M7ICsraWkpIHtcbiAgICBjb25zdCBuYW1lID0gZ2wuZ2V0QWN0aXZlVW5pZm9ybUJsb2NrTmFtZShwcm9ncmFtLCBpaSk7XG4gICAgY29uc3QgYmxvY2tTcGVjID0ge1xuICAgICAgaW5kZXg6IGdsLmdldFVuaWZvcm1CbG9ja0luZGV4KHByb2dyYW0sIG5hbWUpLFxuICAgICAgdXNlZEJ5VmVydGV4U2hhZGVyOiBnbC5nZXRBY3RpdmVVbmlmb3JtQmxvY2tQYXJhbWV0ZXIocHJvZ3JhbSwgaWksIFVOSUZPUk1fQkxPQ0tfUkVGRVJFTkNFRF9CWV9WRVJURVhfU0hBREVSKSxcbiAgICAgIHVzZWRCeUZyYWdtZW50U2hhZGVyOiBnbC5nZXRBY3RpdmVVbmlmb3JtQmxvY2tQYXJhbWV0ZXIocHJvZ3JhbSwgaWksIFVOSUZPUk1fQkxPQ0tfUkVGRVJFTkNFRF9CWV9GUkFHTUVOVF9TSEFERVIpLFxuICAgICAgc2l6ZTogZ2wuZ2V0QWN0aXZlVW5pZm9ybUJsb2NrUGFyYW1ldGVyKHByb2dyYW0sIGlpLCBVTklGT1JNX0JMT0NLX0RBVEFfU0laRSksXG4gICAgICB1bmlmb3JtSW5kaWNlczogZ2wuZ2V0QWN0aXZlVW5pZm9ybUJsb2NrUGFyYW1ldGVyKHByb2dyYW0sIGlpLCBVTklGT1JNX0JMT0NLX0FDVElWRV9VTklGT1JNX0lORElDRVMpLFxuICAgIH07XG4gICAgYmxvY2tTcGVjLnVzZWQgPSBibG9ja1NwZWMudXNlZEJ5VmVydGV4U2hhZGVyIHx8IGJsb2NrU3BlYy51c2VkQnlGcmFnbWVudFNoYWRlcjtcbiAgICBibG9ja1NwZWNzW25hbWVdID0gYmxvY2tTcGVjO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBibG9ja1NwZWNzOiBibG9ja1NwZWNzLFxuICAgIHVuaWZvcm1EYXRhOiB1bmlmb3JtRGF0YSxcbiAgfTtcbn1cblxuY29uc3QgYXJyYXlTdWZmaXhSRSA9IC9cXFtcXGQrXFxdXFwuJC87ICAvLyBiZXR0ZXIgd2F5IHRvIGNoZWNrP1xuXG5jb25zdCBwYWQgPSAodiwgcGFkZGluZykgPT4gKCh2ICsgKHBhZGRpbmcgLSAxKSkgLyBwYWRkaW5nIHwgMCkgKiBwYWRkaW5nO1xuXG5mdW5jdGlvbiBjcmVhdGVVbmlmb3JtQmxvY2tVbmlmb3JtU2V0dGVyKHZpZXcsIGlzQXJyYXksIHJvd3MsIGNvbHMpIHtcbiAgaWYgKGlzQXJyYXkgfHwgcm93cykge1xuICAgIGNvbHMgPSBjb2xzIHx8IDE7XG4gICAgY29uc3QgbnVtRWxlbWVudHMgPSB2aWV3Lmxlbmd0aDtcbiAgICBjb25zdCB0b3RhbFJvd3MgPSBudW1FbGVtZW50cyAvIDQ7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBsZXQgZHN0ID0gMDtcbiAgICAgIGxldCBzcmMgPSAwO1xuICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgdG90YWxSb3dzOyArK3Jvdykge1xuICAgICAgICBmb3IgKGxldCBjb2wgPSAwOyBjb2wgPCBjb2xzOyArK2NvbCkge1xuICAgICAgICAgIHZpZXdbZHN0KytdID0gdmFsdWVbc3JjKytdO1xuICAgICAgICB9XG4gICAgICAgIGRzdCArPSA0IC0gY29scztcbiAgICAgIH1cbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlLmxlbmd0aCkge1xuICAgICAgICB2aWV3LnNldCh2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2aWV3WzBdID0gdmFsdWU7XG4gICAgICB9XG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBVbmlmb3JtQmxvY2tPYmplY3QgaW5jbHVkaW5nIGFuIEFycmF5QnVmZmVyIHdpdGggYWxsIHRoZSB1bmlmb3JtIHZhbHVlc1xuICogYW5kIGEgY29ycmVzcG9uZGluZyBXZWJHTEJ1ZmZlciB0byBob2xkIHRob3NlIHZhbHVlcyBvbiB0aGUgR1BVXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gVW5pZm9ybUJsb2NrSW5mb1xuICogQHByb3BlcnR5IHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGJsb2NrXG4gKiBAcHJvcGVydHkge0FycmF5QnVmZmVyfSBhcnJheSBUaGUgYXJyYXkgYnVmZmVyIHRoYXQgY29udGFpbnMgdGhlIHVuaWZvcm0gdmFsdWVzXG4gKiBAcHJvcGVydHkge0Zsb2F0MzJBcnJheX0gYXNGbG9hdCBBIGZsb2F0IHZpZXcgb24gdGhlIGFycmF5IGJ1ZmZlci4gVGhpcyBpcyB1c2VmdWxcbiAqICAgIGluc3BlY3RpbmcgdGhlIGNvbnRlbnRzIG9mIHRoZSBidWZmZXIgaW4gdGhlIGRlYnVnZ2VyLlxuICogQHByb3BlcnR5IHtXZWJHTEJ1ZmZlcn0gYnVmZmVyIEEgV2ViR0wgYnVmZmVyIHRoYXQgd2lsbCBob2xkIGEgY29weSBvZiB0aGUgdW5pZm9ybSB2YWx1ZXMgZm9yIHJlbmRlcmluZy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb2Zmc2V0XSBvZmZzZXQgaW50byBidWZmZXJcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgQXJyYXlCdWZmZXJWaWV3Pn0gdW5pZm9ybXMgQSB1bmlmb3JtIG5hbWUgdG8gQXJyYXlCdWZmZXJWaWV3IG1hcC5cbiAqICAgZWFjaCBVbmlmb3JtIGhhcyBhIGNvcnJlY3RseSB0eXBlZCBgQXJyYXlCdWZmZXJWaWV3YCBpbnRvIGFycmF5IGF0IHRoZSBjb3JyZWN0IG9mZnNldFxuICogICBhbmQgbGVuZ3RoIG9mIHRoYXQgdW5pZm9ybS4gU28gZm9yIGV4YW1wbGUgYSBmbG9hdCB1bmlmb3JtIHdvdWxkIGhhdmUgYSAxIGZsb2F0IGBGbG9hdDMyQXJyYXlgXG4gKiAgIHZpZXcuIEEgc2luZ2xlIG1hdDQgd291bGQgaGF2ZSBhIDE2IGVsZW1lbnQgYEZsb2F0MzJBcnJheWAgdmlldy4gQW4gaXZlYzIgd291bGQgaGF2ZSBhblxuICogICBgSW50MzJBcnJheWAgdmlldywgZXRjLlxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCBmdW5jdGlvbj59IHNldHRlcnMgQSBzZXR0ZXIgZm9yIHRoaXMgdW5pZm9ybS5cbiAqICAgVGhlIHJlYXNvbiB0byB1c2Ugc2V0dGVycyBpcyBlbGVtZW50cyBvZiBhcnJheXMgYXJlIHBhZGRlZCB0byB2ZWM0IHNpemVzIHdoaWNoXG4gKiAgIG1lYW5zIGlmIHlvdSB3YW50IHRvIHNldCBhbiBhcnJheSBvZiA0IGZsb2F0cyB5b3UnZCBuZWVkIHRvIHNldCAxNiB2YWx1ZXNcbiAqICAgKG9yIHNldCBlbGVtZW50cyAwLCA0LCA4LCAxMikuIEluIG90aGVyIHdvcmRzXG4gKiAgIGBzb21lQmxvY2tJbmZvLnVuaWZvcm1zLnNvbWU0RmxvYXRBcnJheVVuaWZvcm0uc2V0KFswLCAsICwgLCAxLCAsICwgLCAyLCAsICwgLCAzXSlgXG4gKiAgIHdoZXJlIGFzIHRoZSBzZXR0ZXIgaGFuZGxlcyBqdXN0IHBhc3NpbmcgaW4gWzAsIDEsIDIsIDNdIGVpdGhlciBkaXJlY3RseSBhcyBpblxuICogICBgc29tZUJsb2NrSW5mby5zZXR0ZXIuc29tZTRGbG9hdEFycmF5VW5pZm9ybS5zZXQoWzAsIDEsIDIsIDNdKWAgKG5vdCByZWNvbW1lbmRlZClcbiAqICAgb3IgdmlhIHtAbGluayBtb2R1bGU6dHdnbC5zZXRCbG9ja1VuaWZvcm1zfVxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsXG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgYFVuaWZvcm1CbG9ja0luZm9gIGZvciB0aGUgc3BlY2lmaWVkIGJsb2NrXG4gKlxuICogTm90ZTogKipJZiB0aGUgYmxvY2tOYW1lIG1hdGNoZXMgbm8gZXhpc3RpbmcgYmxvY2tzIGEgd2FybmluZyBpcyBwcmludGVkIHRvIHRoZSBjb25zb2xlIGFuZCBhIGR1bW15XG4gKiBgVW5pZm9ybUJsb2NrSW5mb2AgaXMgcmV0dXJuZWQqKi4gVGhpcyBpcyBiZWNhdXNlIHdoZW4gZGVidWdnaW5nIEdMU0xcbiAqIGl0IGlzIGNvbW1vbiB0byBjb21tZW50IG91dCBsYXJnZSBwb3J0aW9ucyBvZiBhIHNoYWRlciBvciBmb3IgZXhhbXBsZSBzZXRcbiAqIHRoZSBmaW5hbCBvdXRwdXQgdG8gYSBjb25zdGFudC4gV2hlbiB0aGF0IGhhcHBlbnMgYmxvY2tzIGdldCBvcHRpbWl6ZWQgb3V0LlxuICogSWYgdGhpcyBmdW5jdGlvbiBkaWQgbm90IGNyZWF0ZSBkdW1teSBibG9ja3MgeW91ciBjb2RlIHdvdWxkIGNyYXNoIHdoZW4gZGVidWdnaW5nLlxuICpcbiAqIEBwYXJhbSB7V2ViR0wyUmVuZGVyaW5nQ29udGV4dH0gZ2wgQSBXZWJHTDJSZW5kZXJpbmdDb250ZXh0XG4gKiBAcGFyYW0ge1dlYkdMUHJvZ3JhbX0gcHJvZ3JhbSBBIFdlYkdMUHJvZ3JhbVxuICogQHBhcmFtIHttb2R1bGU6dHdnbC5Vbmlmb3JtQmxvY2tTcGVjfSB1bmlmb3JtQmxvY2tTcGVjLiBBIFVuaWZvcm1CbG9ja1NwZWMgYXMgcmV0dXJuZWRcbiAqICAgICBmcm9tIHtAbGluayBtb2R1bGU6dHdnbC5jcmVhdGVVbmlmb3JtQmxvY2tTcGVjRnJvbVByb2dyYW19LlxuICogQHBhcmFtIHtzdHJpbmd9IGJsb2NrTmFtZSBUaGUgbmFtZSBvZiB0aGUgYmxvY2suXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC5Vbmlmb3JtQmxvY2tJbmZvfSBUaGUgY3JlYXRlZCBVbmlmb3JtQmxvY2tJbmZvXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJvZ3JhbXNcbiAqL1xuZnVuY3Rpb24gY3JlYXRlVW5pZm9ybUJsb2NrSW5mb0Zyb21Qcm9ncmFtKGdsLCBwcm9ncmFtLCB1bmlmb3JtQmxvY2tTcGVjLCBibG9ja05hbWUpIHtcbiAgY29uc3QgYmxvY2tTcGVjcyA9IHVuaWZvcm1CbG9ja1NwZWMuYmxvY2tTcGVjcztcbiAgY29uc3QgdW5pZm9ybURhdGEgPSB1bmlmb3JtQmxvY2tTcGVjLnVuaWZvcm1EYXRhO1xuICBjb25zdCBibG9ja1NwZWMgPSBibG9ja1NwZWNzW2Jsb2NrTmFtZV07XG4gIGlmICghYmxvY2tTcGVjKSB7XG4gICAgd2FybiQxKFwibm8gdW5pZm9ybSBibG9jayBvYmplY3QgbmFtZWQ6XCIsIGJsb2NrTmFtZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IGJsb2NrTmFtZSxcbiAgICAgIHVuaWZvcm1zOiB7fSxcbiAgICB9O1xuICB9XG4gIGNvbnN0IGFycmF5ID0gbmV3IEFycmF5QnVmZmVyKGJsb2NrU3BlYy5zaXplKTtcbiAgY29uc3QgYnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gIGNvbnN0IHVuaWZvcm1CdWZmZXJJbmRleCA9IGJsb2NrU3BlYy5pbmRleDtcbiAgZ2wuYmluZEJ1ZmZlcihVTklGT1JNX0JVRkZFUiwgYnVmZmVyKTtcbiAgZ2wudW5pZm9ybUJsb2NrQmluZGluZyhwcm9ncmFtLCBibG9ja1NwZWMuaW5kZXgsIHVuaWZvcm1CdWZmZXJJbmRleCk7XG5cbiAgbGV0IHByZWZpeCA9IGJsb2NrTmFtZSArIFwiLlwiO1xuICBpZiAoYXJyYXlTdWZmaXhSRS50ZXN0KHByZWZpeCkpIHtcbiAgICBwcmVmaXggPSBwcmVmaXgucmVwbGFjZShhcnJheVN1ZmZpeFJFLCBcIi5cIik7XG4gIH1cbiAgY29uc3QgdW5pZm9ybXMgPSB7fTtcbiAgY29uc3Qgc2V0dGVycyA9IHt9O1xuICBjb25zdCBzZXR0ZXJUcmVlID0ge307XG4gIGJsb2NrU3BlYy51bmlmb3JtSW5kaWNlcy5mb3JFYWNoKGZ1bmN0aW9uKHVuaWZvcm1OZHgpIHtcbiAgICBjb25zdCBkYXRhID0gdW5pZm9ybURhdGFbdW5pZm9ybU5keF07XG4gICAgbGV0IG5hbWUgPSBkYXRhLm5hbWU7XG4gICAgaWYgKG5hbWUuc3RhcnRzV2l0aChwcmVmaXgpKSB7XG4gICAgICBuYW1lID0gbmFtZS5zdWJzdHIocHJlZml4Lmxlbmd0aCk7XG4gICAgfVxuICAgIGNvbnN0IGlzQXJyYXkgPSBuYW1lLmVuZHNXaXRoKCdbMF0nKTtcbiAgICBpZiAoaXNBcnJheSkge1xuICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKDAsIG5hbWUubGVuZ3RoIC0gMyk7XG4gICAgfVxuICAgIGNvbnN0IHR5cGVJbmZvID0gdHlwZU1hcFtkYXRhLnR5cGVdO1xuICAgIGNvbnN0IFR5cGUgPSB0eXBlSW5mby5UeXBlO1xuICAgIGNvbnN0IGJ5dGVMZW5ndGggPSBpc0FycmF5XG4gICAgICAgID8gcGFkKHR5cGVJbmZvLnNpemUsIDE2KSAqIGRhdGEuc2l6ZVxuICAgICAgICA6IHR5cGVJbmZvLnNpemUgKiBkYXRhLnNpemU7XG4gICAgY29uc3QgdW5pZm9ybVZpZXcgPSBuZXcgVHlwZShhcnJheSwgZGF0YS5vZmZzZXQsIGJ5dGVMZW5ndGggLyBUeXBlLkJZVEVTX1BFUl9FTEVNRU5UKTtcbiAgICB1bmlmb3Jtc1tuYW1lXSA9IHVuaWZvcm1WaWV3O1xuICAgIC8vIE5vdGU6IEknbSBub3Qgc3VyZSB3aGF0IHRvIGRvIGhlcmUuIFRoZSBvcmlnaW5hbFxuICAgIC8vIGlkZWEgd2FzIHRvIGNyZWF0ZSBUeXBlZEFycmF5IHZpZXdzIGludG8gZWFjaCBwYXJ0XG4gICAgLy8gb2YgdGhlIGJsb2NrLiBUaGlzIGlzIHVzZWZ1bCwgZm9yIGV4YW1wbGUgaWYgeW91IGhhdmVcbiAgICAvLyBhIGJsb2NrIHdpdGggeyBtYXQ0OiBtb2RlbDsgbWF0NCB2aWV3OyBtYXQ0IHByb2plY3Rpb247IH1cbiAgICAvLyB5b3UnbGwgZ2V0IGEgRmxvYXQzMkFycmF5IGZvciBlYWNoIG9uZSBzdWl0YWJsZSBmb3JcbiAgICAvLyBwYXNzaW5nIHRvIG1vc3QgSlMgbWF0aCBsaWJyYXJpZXMgaW5jbHVkaW5nIHR3Z2wncyBhbmQgZ2xNYXRyaXguanMuXG4gICAgLy9cbiAgICAvLyBCdXQsIGlmIHlvdSBoYXZlIGEgYW4gYXJyYXkgb2Ygc3RydWN0dXJlcywgZXNwZWNpYWxseSBpZiB0aGF0XG4gICAgLy8gYXJyYXkgaXMgbGFyZ2UsIHlvdSBnZXQgYSB3aG9sZSBidW5jaCBvZiBUeXBlZEFycmF5IHZpZXdzLlxuICAgIC8vIEV2ZXJ5IG9uZSBvZiB0aGVtIGhhcyBvdmVyaGVhZCBhbmQgc3dpdGNoaW5nIGJldHdlZW4gdGhlbSBhbGxcbiAgICAvLyBpcyBwcm9iYWJseSBhIGNhY2hlIG1pc3MuIEluIHRoYXQgY2FzZSBpdCB3b3VsZCByZWFsbHkgYmUgYmV0dGVyXG4gICAgLy8gdG8ganVzdCBoYXZlIG9uZSB2aWV3IChhc0Zsb2F0KSBhbmQgaGF2ZSBhbGwgdGhlIHNldHRlcnNcbiAgICAvLyBqdXN0IHJlZmVyZW5jZSB0aGUgY29ycmVjdCBwb3J0aW9uLiBCdXQsIHRoZW4geW91IGNhbid0IGVhc2lseVxuICAgIC8vIHRyZWF0IGEgbWF0cml4LCBvciBhIHZlYzQsIGFzIGEgc3RhbmRhbG9uZSB0aGluZyBsaWtlIHlvdSBjYW5cbiAgICAvLyB3aXRoIGFsbCB0aGUgdmlld3MuXG4gICAgLy9cbiAgICAvLyBBbm90aGVyIHByb2JsZW0gd2l0aCB0aGUgdmlld3MgaXMgdGhleSBhcmUgbm90IHNoYXJlZC4gV2l0aFxuICAgIC8vIHVuaWZvcm1zIHlvdSBoYXZlIG9uZSBzZXQgb2Ygc2V0dGVycy4gV2l0aCBVbmlmb3JtQmxvY2tJbmZvXG4gICAgLy8geW91IGhhdmUgYSBzZXQgb2Ygc2V0dGVycyAqcHJlIGJsb2NrIGluc3RhbmNlKi4gVGhhdCdzIGJlY2F1c2VcbiAgICAvLyBUeXBlZEFycmF5IHZpZXdzIGNhbid0IGJlIG1hcHBlZCB0byBkaWZmZXJlbnQgYnVmZmVycy5cbiAgICAvL1xuICAgIC8vIE15IGd1dCByaWdodCBub3cgaXMgaWYgeW91IHJlYWxseSB3YW50IHRoZSBzcGVlZCBhbmQgY29tcGFjdG5lc3NcbiAgICAvLyB0aGVuIHlvdSBzaG91bGQgcHJvYmFibHkgcm9sbCB5b3VyIG93biBzb2x1dGlvbi4gVFdHTCdzIGdvYWxcbiAgICAvLyBoZXJlIGlzIGVhc2Ugb2YgdXNlIGFzIEFGQUlDVCB0aGVyZSBpcyBubyBzaW1wbGUgZ2VuZXJpYyBlZmZpY2llbnRcbiAgICAvLyBzb2x1dGlvbi5cbiAgICBjb25zdCBzZXR0ZXIgPSBjcmVhdGVVbmlmb3JtQmxvY2tVbmlmb3JtU2V0dGVyKHVuaWZvcm1WaWV3LCBpc0FycmF5LCB0eXBlSW5mby5yb3dzLCB0eXBlSW5mby5jb2xzKTtcbiAgICBzZXR0ZXJzW25hbWVdID0gc2V0dGVyO1xuICAgIGFkZFNldHRlclRvVW5pZm9ybVRyZWUobmFtZSwgc2V0dGVyLCBzZXR0ZXJUcmVlLCBzZXR0ZXJzKTtcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgbmFtZTogYmxvY2tOYW1lLFxuICAgIGFycmF5LFxuICAgIGFzRmxvYXQ6IG5ldyBGbG9hdDMyQXJyYXkoYXJyYXkpLCAgLy8gZm9yIGRlYnVnZ2luZ1xuICAgIGJ1ZmZlcixcbiAgICB1bmlmb3JtcyxcbiAgICBzZXR0ZXJzLFxuICB9O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBgVW5pZm9ybUJsb2NrSW5mb2AgZm9yIHRoZSBzcGVjaWZpZWQgYmxvY2tcbiAqXG4gKiBOb3RlOiAqKklmIHRoZSBibG9ja05hbWUgbWF0Y2hlcyBubyBleGlzdGluZyBibG9ja3MgYSB3YXJuaW5nIGlzIHByaW50ZWQgdG8gdGhlIGNvbnNvbGUgYW5kIGEgZHVtbXlcbiAqIGBVbmlmb3JtQmxvY2tJbmZvYCBpcyByZXR1cm5lZCoqLiBUaGlzIGlzIGJlY2F1c2Ugd2hlbiBkZWJ1Z2dpbmcgR0xTTFxuICogaXQgaXMgY29tbW9uIHRvIGNvbW1lbnQgb3V0IGxhcmdlIHBvcnRpb25zIG9mIGEgc2hhZGVyIG9yIGZvciBleGFtcGxlIHNldFxuICogdGhlIGZpbmFsIG91dHB1dCB0byBhIGNvbnN0YW50LiBXaGVuIHRoYXQgaGFwcGVucyBibG9ja3MgZ2V0IG9wdGltaXplZCBvdXQuXG4gKiBJZiB0aGlzIGZ1bmN0aW9uIGRpZCBub3QgY3JlYXRlIGR1bW15IGJsb2NrcyB5b3VyIGNvZGUgd291bGQgY3Jhc2ggd2hlbiBkZWJ1Z2dpbmcuXG4gKlxuICogQHBhcmFtIHtXZWJHTDJSZW5kZXJpbmdDb250ZXh0fSBnbCBBIFdlYkdMMlJlbmRlcmluZ0NvbnRleHRcbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuUHJvZ3JhbUluZm99IHByb2dyYW1JbmZvIGEgYFByb2dyYW1JbmZvYFxuICogICAgIGFzIHJldHVybmVkIGZyb20ge0BsaW5rIG1vZHVsZTp0d2dsLmNyZWF0ZVByb2dyYW1JbmZvfVxuICogQHBhcmFtIHtzdHJpbmd9IGJsb2NrTmFtZSBUaGUgbmFtZSBvZiB0aGUgYmxvY2suXG4gKiBAcmV0dXJuIHttb2R1bGU6dHdnbC5Vbmlmb3JtQmxvY2tJbmZvfSBUaGUgY3JlYXRlZCBVbmlmb3JtQmxvY2tJbmZvXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJvZ3JhbXNcbiAqL1xuZnVuY3Rpb24gY3JlYXRlVW5pZm9ybUJsb2NrSW5mbyhnbCwgcHJvZ3JhbUluZm8sIGJsb2NrTmFtZSkge1xuICByZXR1cm4gY3JlYXRlVW5pZm9ybUJsb2NrSW5mb0Zyb21Qcm9ncmFtKGdsLCBwcm9ncmFtSW5mby5wcm9ncmFtLCBwcm9ncmFtSW5mby51bmlmb3JtQmxvY2tTcGVjLCBibG9ja05hbWUpO1xufVxuXG4vKipcbiAqIEJpbmRzIGEgdW5pZm9ybSBibG9jayB0byB0aGUgbWF0Y2hpbmcgdW5pZm9ybSBibG9jayBwb2ludC5cbiAqIE1hdGNoZXMgYnkgYmxvY2tzIGJ5IG5hbWUgc28gYmxvY2tzIG11c3QgaGF2ZSB0aGUgc2FtZSBuYW1lIG5vdCBqdXN0IHRoZSBzYW1lXG4gKiBzdHJ1Y3R1cmUuXG4gKlxuICogSWYgeW91IGhhdmUgY2hhbmdlZCBhbnkgdmFsdWVzIGFuZCB5b3UgdXBsb2FkIHRoZSB2YWx1ZXMgaW50byB0aGUgY29ycmVzcG9uZGluZyBXZWJHTEJ1ZmZlclxuICogY2FsbCB7QGxpbmsgbW9kdWxlOnR3Z2wuc2V0VW5pZm9ybUJsb2NrfSBpbnN0ZWFkLlxuICpcbiAqIEBwYXJhbSB7V2ViR0wyUmVuZGVyaW5nQ29udGV4dH0gZ2wgQSBXZWJHTCAyIHJlbmRlcmluZyBjb250ZXh0LlxuICogQHBhcmFtIHsobW9kdWxlOnR3Z2wuUHJvZ3JhbUluZm98bW9kdWxlOnR3Z2wuVW5pZm9ybUJsb2NrU3BlYyl9IHByb2dyYW1JbmZvIGEgYFByb2dyYW1JbmZvYFxuICogICAgIGFzIHJldHVybmVkIGZyb20ge0BsaW5rIG1vZHVsZTp0d2dsLmNyZWF0ZVByb2dyYW1JbmZvfSBvciBvciBgVW5pZm9ybUJsb2NrU3BlY2AgYXNcbiAqICAgICByZXR1cm5lZCBmcm9tIHtAbGluayBtb2R1bGU6dHdnbC5jcmVhdGVVbmlmb3JtQmxvY2tTcGVjRnJvbVByb2dyYW19LlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC5Vbmlmb3JtQmxvY2tJbmZvfSB1bmlmb3JtQmxvY2tJbmZvIGEgYFVuaWZvcm1CbG9ja0luZm9gIGFzIHJldHVybmVkIGZyb21cbiAqICAgICB7QGxpbmsgbW9kdWxlOnR3Z2wuY3JlYXRlVW5pZm9ybUJsb2NrSW5mb30uXG4gKiBAcmV0dXJuIHtib29sfSB0cnVlIGlmIGJ1ZmZlciB3YXMgYm91bmQuIElmIHRoZSBwcm9ncmFtSW5mbyBoYXMgbm8gYmxvY2sgd2l0aCB0aGUgc2FtZSBibG9jayBuYW1lXG4gKiAgICAgbm8gYnVmZmVyIGlzIGJvdW5kLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3Byb2dyYW1zXG4gKi9cbmZ1bmN0aW9uIGJpbmRVbmlmb3JtQmxvY2soZ2wsIHByb2dyYW1JbmZvLCB1bmlmb3JtQmxvY2tJbmZvKSB7XG4gIGNvbnN0IHVuaWZvcm1CbG9ja1NwZWMgPSBwcm9ncmFtSW5mby51bmlmb3JtQmxvY2tTcGVjIHx8IHByb2dyYW1JbmZvO1xuICBjb25zdCBibG9ja1NwZWMgPSB1bmlmb3JtQmxvY2tTcGVjLmJsb2NrU3BlY3NbdW5pZm9ybUJsb2NrSW5mby5uYW1lXTtcbiAgaWYgKGJsb2NrU3BlYykge1xuICAgIGNvbnN0IGJ1ZmZlckJpbmRJbmRleCA9IGJsb2NrU3BlYy5pbmRleDtcbiAgICBnbC5iaW5kQnVmZmVyUmFuZ2UoVU5JRk9STV9CVUZGRVIsIGJ1ZmZlckJpbmRJbmRleCwgdW5pZm9ybUJsb2NrSW5mby5idWZmZXIsIHVuaWZvcm1CbG9ja0luZm8ub2Zmc2V0IHx8IDAsIHVuaWZvcm1CbG9ja0luZm8uYXJyYXkuYnl0ZUxlbmd0aCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFVwbG9hZHMgdGhlIGN1cnJlbnQgdW5pZm9ybSB2YWx1ZXMgdG8gdGhlIGNvcnJlc3BvbmRpbmcgV2ViR0xCdWZmZXJcbiAqIGFuZCBiaW5kcyB0aGF0IGJ1ZmZlciB0byB0aGUgcHJvZ3JhbSdzIGNvcnJlc3BvbmRpbmcgYmluZCBwb2ludCBmb3IgdGhlIHVuaWZvcm0gYmxvY2sgb2JqZWN0LlxuICpcbiAqIElmIHlvdSBoYXZlbid0IGNoYW5nZWQgYW55IHZhbHVlcyBhbmQgeW91IG9ubHkgbmVlZCB0byBiaW5kIHRoZSB1bmlmb3JtIGJsb2NrIG9iamVjdFxuICogY2FsbCB7QGxpbmsgbW9kdWxlOnR3Z2wuYmluZFVuaWZvcm1CbG9ja30gaW5zdGVhZC5cbiAqXG4gKiBAcGFyYW0ge1dlYkdMMlJlbmRlcmluZ0NvbnRleHR9IGdsIEEgV2ViR0wgMiByZW5kZXJpbmcgY29udGV4dC5cbiAqIEBwYXJhbSB7KG1vZHVsZTp0d2dsLlByb2dyYW1JbmZvfG1vZHVsZTp0d2dsLlVuaWZvcm1CbG9ja1NwZWMpfSBwcm9ncmFtSW5mbyBhIGBQcm9ncmFtSW5mb2BcbiAqICAgICBhcyByZXR1cm5lZCBmcm9tIHtAbGluayBtb2R1bGU6dHdnbC5jcmVhdGVQcm9ncmFtSW5mb30gb3Igb3IgYFVuaWZvcm1CbG9ja1NwZWNgIGFzXG4gKiAgICAgcmV0dXJuZWQgZnJvbSB7QGxpbmsgbW9kdWxlOnR3Z2wuY3JlYXRlVW5pZm9ybUJsb2NrU3BlY0Zyb21Qcm9ncmFtfS5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuVW5pZm9ybUJsb2NrSW5mb30gdW5pZm9ybUJsb2NrSW5mbyBhIGBVbmlmb3JtQmxvY2tJbmZvYCBhcyByZXR1cm5lZCBmcm9tXG4gKiAgICAge0BsaW5rIG1vZHVsZTp0d2dsLmNyZWF0ZVVuaWZvcm1CbG9ja0luZm99LlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3Byb2dyYW1zXG4gKi9cbmZ1bmN0aW9uIHNldFVuaWZvcm1CbG9jayhnbCwgcHJvZ3JhbUluZm8sIHVuaWZvcm1CbG9ja0luZm8pIHtcbiAgaWYgKGJpbmRVbmlmb3JtQmxvY2soZ2wsIHByb2dyYW1JbmZvLCB1bmlmb3JtQmxvY2tJbmZvKSkge1xuICAgIGdsLmJ1ZmZlckRhdGEoVU5JRk9STV9CVUZGRVIsIHVuaWZvcm1CbG9ja0luZm8uYXJyYXksIERZTkFNSUNfRFJBVyk7XG4gIH1cbn1cblxuLyoqXG4gKiBTZXRzIHZhbHVlcyBvZiBhIHVuaWZvcm0gYmxvY2sgb2JqZWN0XG4gKlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC5Vbmlmb3JtQmxvY2tJbmZvfSB1bmlmb3JtQmxvY2tJbmZvIEEgVW5pZm9ybUJsb2NrSW5mbyBhcyByZXR1cm5lZCBieSB7QGxpbmsgbW9kdWxlOnR3Z2wuY3JlYXRlVW5pZm9ybUJsb2NrSW5mb30uXG4gKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCA/Pn0gdmFsdWVzIEEgdW5pZm9ybSBuYW1lIHRvIHZhbHVlIG1hcCB3aGVyZSB0aGUgdmFsdWUgaXMgY29ycmVjdCBmb3IgdGhlIGdpdmVuXG4gKiAgICB0eXBlIG9mIHVuaWZvcm0uIFNvIGZvciBleGFtcGxlIGdpdmVuIGEgYmxvY2sgbGlrZVxuICpcbiAqICAgICAgIHVuaWZvcm0gU29tZUJsb2NrIHtcbiAqICAgICAgICAgZmxvYXQgc29tZUZsb2F0O1xuICogICAgICAgICB2ZWMyIHNvbWVWZWMyO1xuICogICAgICAgICB2ZWMzIHNvbWVWZWMzQXJyYXlbMl07XG4gKiAgICAgICAgIGludCBzb21lSW50O1xuICogICAgICAgfVxuICpcbiAqICBZb3UgY2FuIHNldCB0aGUgdmFsdWVzIG9mIHRoZSB1bmlmb3JtIGJsb2NrIHdpdGhcbiAqXG4gKiAgICAgICB0d2dsLnNldEJsb2NrVW5pZm9ybXMoc29tZUJsb2NrSW5mbywge1xuICogICAgICAgICAgc29tZUZsb2F0OiAxMi4zLFxuICogICAgICAgICAgc29tZVZlYzI6IFsxLCAyXSxcbiAqICAgICAgICAgIHNvbWVWZWMzQXJyYXk6IFsxLCAyLCAzLCA0LCA1LCA2XSxcbiAqICAgICAgICAgIHNvbWVJbnQ6IDUsXG4gKiAgICAgICB9XG4gKlxuICogIEFycmF5cyBjYW4gYmUgSmF2YVNjcmlwdCBhcnJheXMgb3IgdHlwZWQgYXJyYXlzXG4gKlxuICogIFlvdSBjYW4gYWxzbyBmaWxsIG91dCBzdHJ1Y3R1cmUgYW5kIGFycmF5IHZhbHVlcyBlaXRoZXIgdmlhXG4gKiAgc2hvcnRjdXQuIEV4YW1wbGVcbiAqXG4gKiAgICAgLy8gLS0gaW4gc2hhZGVyIC0tXG4gKiAgICAgc3RydWN0IExpZ2h0IHtcbiAqICAgICAgIGZsb2F0IGludGVuc2l0eTtcbiAqICAgICAgIHZlYzQgY29sb3I7XG4gKiAgICAgfTtcbiAqICAgICB1bmlmb3JtIExpZ2h0cyB7XG4gKiAgICAgICBMaWdodCBsaWdodHNbMl07XG4gKiAgICAgfTtcbiAqXG4gKiAgICAgLy8gaW4gSmF2YVNjcmlwdFxuICpcbiAqICAgICB0d2dsLnNldEJsb2NrVW5pZm9ybXMoc29tZUJsb2NrSW5mbywge1xuICogICAgICAgbGlnaHRzOiBbXG4gKiAgICAgICAgIHsgaW50ZW5zaXR5OiA1LjAsIGNvbG9yOiBbMSwgMCwgMCwgMV0gfSxcbiAqICAgICAgICAgeyBpbnRlbnNpdHk6IDIuMCwgY29sb3I6IFswLCAwLCAxLCAxXSB9LFxuICogICAgICAgXSxcbiAqICAgICB9KTtcbiAqXG4gKiAgICAgLy8gb3IgdGhlIG1vcmUgdHJhZGl0aW9uYWwgd2F5XG4gKlxuICogICAgIHR3Z2wuc2V0QmxvY2tVbmlmb3Jtcyhzb21lQmxvY2tJbmZvLCB7XG4gKiAgICAgICBcImxpZ2h0c1swXS5pbnRlbnNpdHlcIjogNS4wLFxuICogICAgICAgXCJsaWdodHNbMF0uY29sb3JcIjogWzEsIDAsIDAsIDFdLFxuICogICAgICAgXCJsaWdodHNbMV0uaW50ZW5zaXR5XCI6IDIuMCxcbiAqICAgICAgIFwibGlnaHRzWzFdLmNvbG9yXCI6IFswLCAwLCAxLCAxXSxcbiAqICAgICB9KTtcbiAqXG4gKiAgIFlvdSBjYW4gYWxzbyBzcGVjaWZ5IHBhcnRpYWwgcGF0aHNcbiAqXG4gKiAgICAgdHdnbC5zZXRCbG9ja1VuaWZvcm1zKHNvbWVCbG9ja0luZm8sIHtcbiAqICAgICAgICdsaWdodHNbMV06IHsgaW50ZW5zaXR5OiA1LjAsIGNvbG9yOiBbMSwgMCwgMCwgMV0gfSxcbiAqICAgICB9KTtcbiAqXG4gKiAgIEJ1dCB5b3UgY2FuIG5vdCBzcGVjaWZ5IGxlYWYgYXJyYXkgaW5kaWNlcy5cbiAqXG4gKiAgKipJTVBPUlRBTlQhKiosIHBhY2tpbmcgaW4gYSBVbmlmb3JtQmxvY2sgaXMgdW5pbnR1aXRpdmUuXG4gKiAgRm9yIGV4YW1wbGUgdGhlIGFjdHVhbCBsYXlvdXQgb2YgYHNvbWVWZWMzQXJyYXlgIGFib3ZlIGluIG1lbW9yeVxuICogIGlzIGAxLCAyLCAzLCB1bnVzZWQsIDQsIDUsIDYsIHVudXNlZGAuIHR3Z2wgdGFrZXMgaW4gNiB2YWx1ZXNcbiAqICBhcyBzaG93biBhYm91dCBhbmQgY29waWVzIHRoZW0sIHNraXBwaW5nIHRoZSBwYWRkaW5nLiBUaGlzIG1pZ2h0XG4gKiAgYmUgY29uZnVzaW5nIGlmIHlvdSdyZSBhbHJlYWR5IGZhbWlsaWFyIHdpdGggVW5pZm9ybSBibG9ja3MuXG4gKlxuICogIElmIHlvdSB3YW50IHRvIGRlYWwgd2l0aCB0aGUgcGFkZGluZyB5b3Vyc2VsZiB5b3UgY2FuIGFjY2VzcyB0aGUgYXJyYXlcbiAqICBidWZmZXIgdmlld3MgZGlyZWN0bHkuIGVnOlxuICpcbiAqICAgICAgc29tZUJsb2NrSW5mby5zb21lVmVjM0FycmF5LnNldChbMSwgMiwgMywgMCwgNCwgNSwgNiwgMF0pO1xuICpcbiAqICBBbnkgbmFtZSB0aGF0IGRvZXNuJ3QgbWF0Y2ggd2lsbCBiZSBpZ25vcmVkXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJvZ3JhbXNcbiAqL1xuZnVuY3Rpb24gc2V0QmxvY2tVbmlmb3Jtcyh1bmlmb3JtQmxvY2tJbmZvLCB2YWx1ZXMpIHtcbiAgY29uc3Qgc2V0dGVycyA9IHVuaWZvcm1CbG9ja0luZm8uc2V0dGVycztcbiAgZm9yIChjb25zdCBuYW1lIGluIHZhbHVlcykge1xuICAgIGNvbnN0IHNldHRlciA9IHNldHRlcnNbbmFtZV07XG4gICAgaWYgKHNldHRlcikge1xuICAgICAgY29uc3QgdmFsdWUgPSB2YWx1ZXNbbmFtZV07XG4gICAgICBzZXR0ZXIodmFsdWUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBzZXRVbmlmb3JtVHJlZSh0cmVlLCB2YWx1ZXMpIHtcbiAgZm9yIChjb25zdCBuYW1lIGluIHZhbHVlcykge1xuICAgIGNvbnN0IHByb3AgPSB0cmVlW25hbWVdO1xuICAgIGlmICh0eXBlb2YgcHJvcCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcHJvcCh2YWx1ZXNbbmFtZV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRVbmlmb3JtVHJlZSh0cmVlW25hbWVdLCB2YWx1ZXNbbmFtZV0pO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFNldCB1bmlmb3JtcyBhbmQgYmluZHMgcmVsYXRlZCB0ZXh0dXJlcy5cbiAqXG4gKiBleGFtcGxlOlxuICpcbiAqICAgICBjb25zdCBwcm9ncmFtSW5mbyA9IGNyZWF0ZVByb2dyYW1JbmZvKFxuICogICAgICAgICBnbCwgW1wic29tZS12c1wiLCBcInNvbWUtZnNcIl0pO1xuICpcbiAqICAgICBjb25zdCB0ZXgxID0gZ2wuY3JlYXRlVGV4dHVyZSgpO1xuICogICAgIGNvbnN0IHRleDIgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XG4gKlxuICogICAgIC4uLiBhc3N1bWUgd2Ugc2V0dXAgdGhlIHRleHR1cmVzIHdpdGggZGF0YSAuLi5cbiAqXG4gKiAgICAgY29uc3QgdW5pZm9ybXMgPSB7XG4gKiAgICAgICB1X3NvbWVTYW1wbGVyOiB0ZXgxLFxuICogICAgICAgdV9zb21lT3RoZXJTYW1wbGVyOiB0ZXgyLFxuICogICAgICAgdV9zb21lQ29sb3I6IFsxLDAsMCwxXSxcbiAqICAgICAgIHVfc29tZVBvc2l0aW9uOiBbMCwxLDFdLFxuICogICAgICAgdV9zb21lTWF0cml4OiBbXG4gKiAgICAgICAgIDEsMCwwLDAsXG4gKiAgICAgICAgIDAsMSwwLDAsXG4gKiAgICAgICAgIDAsMCwxLDAsXG4gKiAgICAgICAgIDAsMCwwLDAsXG4gKiAgICAgICBdLFxuICogICAgIH07XG4gKlxuICogICAgIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7XG4gKlxuICogVGhpcyB3aWxsIGF1dG9tYXRpY2FsbHkgYmluZCB0aGUgdGV4dHVyZXMgQU5EIHNldCB0aGVcbiAqIHVuaWZvcm1zLlxuICpcbiAqICAgICB0d2dsLnNldFVuaWZvcm1zKHByb2dyYW1JbmZvLCB1bmlmb3Jtcyk7XG4gKlxuICogRm9yIHRoZSBleGFtcGxlIGFib3ZlIGl0IGlzIGVxdWl2YWxlbnQgdG9cbiAqXG4gKiAgICAgdmFyIHRleFVuaXQgPSAwO1xuICogICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTAgKyB0ZXhVbml0KTtcbiAqICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXgxKTtcbiAqICAgICBnbC51bmlmb3JtMWkodV9zb21lU2FtcGxlckxvY2F0aW9uLCB0ZXhVbml0KyspO1xuICogICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTAgKyB0ZXhVbml0KTtcbiAqICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXgyKTtcbiAqICAgICBnbC51bmlmb3JtMWkodV9zb21lU2FtcGxlckxvY2F0aW9uLCB0ZXhVbml0KyspO1xuICogICAgIGdsLnVuaWZvcm00ZnYodV9zb21lQ29sb3JMb2NhdGlvbiwgWzEsIDAsIDAsIDFdKTtcbiAqICAgICBnbC51bmlmb3JtM2Z2KHVfc29tZVBvc2l0aW9uTG9jYXRpb24sIFswLCAxLCAxXSk7XG4gKiAgICAgZ2wudW5pZm9ybU1hdHJpeDRmdih1X3NvbWVNYXRyaXgsIGZhbHNlLCBbXG4gKiAgICAgICAgIDEsMCwwLDAsXG4gKiAgICAgICAgIDAsMSwwLDAsXG4gKiAgICAgICAgIDAsMCwxLDAsXG4gKiAgICAgICAgIDAsMCwwLDAsXG4gKiAgICAgICBdKTtcbiAqXG4gKiBOb3RlIGl0IGlzIHBlcmZlY3RseSByZWFzb25hYmxlIHRvIGNhbGwgYHNldFVuaWZvcm1zYCBtdWx0aXBsZSB0aW1lcy4gRm9yIGV4YW1wbGVcbiAqXG4gKiAgICAgY29uc3QgdW5pZm9ybXMgPSB7XG4gKiAgICAgICB1X3NvbWVTYW1wbGVyOiB0ZXgxLFxuICogICAgICAgdV9zb21lT3RoZXJTYW1wbGVyOiB0ZXgyLFxuICogICAgIH07XG4gKlxuICogICAgIGNvbnN0IG1vcmVVbmlmb3JtcyB7XG4gKiAgICAgICB1X3NvbWVDb2xvcjogWzEsMCwwLDFdLFxuICogICAgICAgdV9zb21lUG9zaXRpb246IFswLDEsMV0sXG4gKiAgICAgICB1X3NvbWVNYXRyaXg6IFtcbiAqICAgICAgICAgMSwwLDAsMCxcbiAqICAgICAgICAgMCwxLDAsMCxcbiAqICAgICAgICAgMCwwLDEsMCxcbiAqICAgICAgICAgMCwwLDAsMCxcbiAqICAgICAgIF0sXG4gKiAgICAgfTtcbiAqXG4gKiAgICAgdHdnbC5zZXRVbmlmb3Jtcyhwcm9ncmFtSW5mbywgdW5pZm9ybXMpO1xuICogICAgIHR3Z2wuc2V0VW5pZm9ybXMocHJvZ3JhbUluZm8sIG1vcmVVbmlmb3Jtcyk7XG4gKlxuICogWW91IGNhbiBhbHNvIGFkZCBXZWJHTFNhbXBsZXJzIHRvIHVuaWZvcm0gc2FtcGxlcnMgYXMgaW5cbiAqXG4gKiAgICAgY29uc3QgdW5pZm9ybXMgPSB7XG4gKiAgICAgICB1X3NvbWVTYW1wbGVyOiB7XG4gKiAgICAgICAgIHRleHR1cmU6IHNvbWVXZWJHTFRleHR1cmUsXG4gKiAgICAgICAgIHNhbXBsZXI6IHNvbWVXZWJHTFNhbXBsZXIsXG4gKiAgICAgICB9LFxuICogICAgIH07XG4gKlxuICogSW4gd2hpY2ggY2FzZSBib3RoIHRoZSBzYW1wbGVyIGFuZCB0ZXh0dXJlIHdpbGwgYmUgYm91bmQgdG8gdGhlXG4gKiBzYW1lIHVuaXQuXG4gKlxuICogQHBhcmFtIHsobW9kdWxlOnR3Z2wuUHJvZ3JhbUluZm98T2JqZWN0LjxzdHJpbmcsIGZ1bmN0aW9uPil9IHNldHRlcnMgYSBgUHJvZ3JhbUluZm9gIGFzIHJldHVybmVkIGZyb20gYGNyZWF0ZVByb2dyYW1JbmZvYCBvciB0aGUgc2V0dGVycyByZXR1cm5lZCBmcm9tXG4gKiAgICAgICAgYGNyZWF0ZVVuaWZvcm1TZXR0ZXJzYC5cbiAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsID8+fSB2YWx1ZXMgYW4gb2JqZWN0IHdpdGggdmFsdWVzIGZvciB0aGVcbiAqICAgICAgICB1bmlmb3Jtcy5cbiAqICAgWW91IGNhbiBwYXNzIG11bHRpcGxlIG9iamVjdHMgYnkgcHV0dGluZyB0aGVtIGluIGFuIGFycmF5IG9yIGJ5IGNhbGxpbmcgd2l0aCBtb3JlIGFyZ3VtZW50cy5Gb3IgZXhhbXBsZVxuICpcbiAqICAgICBjb25zdCBzaGFyZWRVbmlmb3JtcyA9IHtcbiAqICAgICAgIHVfZm9nTmVhcjogMTAsXG4gKiAgICAgICB1X3Byb2plY3Rpb246IC4uLlxuICogICAgICAgLi4uXG4gKiAgICAgfTtcbiAqXG4gKiAgICAgY29uc3QgbG9jYWxVbmlmb3JtcyA9IHtcbiAqICAgICAgIHVfd29ybGQ6IC4uLlxuICogICAgICAgdV9kaWZmdXNlQ29sb3I6IC4uLlxuICogICAgIH07XG4gKlxuICogICAgIHR3Z2wuc2V0VW5pZm9ybXMocHJvZ3JhbUluZm8sIHNoYXJlZFVuaWZvcm1zLCBsb2NhbFVuaWZvcm1zKTtcbiAqXG4gKiAgICAgLy8gaXMgdGhlIHNhbWUgYXNcbiAqXG4gKiAgICAgdHdnbC5zZXRVbmlmb3Jtcyhwcm9ncmFtSW5mbywgW3NoYXJlZFVuaWZvcm1zLCBsb2NhbFVuaWZvcm1zXSk7XG4gKlxuICogICAgIC8vIGlzIHRoZSBzYW1lIGFzXG4gKlxuICogICAgIHR3Z2wuc2V0VW5pZm9ybXMocHJvZ3JhbUluZm8sIHNoYXJlZFVuaWZvcm1zKTtcbiAqICAgICB0d2dsLnNldFVuaWZvcm1zKHByb2dyYW1JbmZvLCBsb2NhbFVuaWZvcm1zfTtcbiAqXG4gKiAgIFlvdSBjYW4gYWxzbyBmaWxsIG91dCBzdHJ1Y3R1cmUgYW5kIGFycmF5IHZhbHVlcyBlaXRoZXIgdmlhXG4gKiAgIHNob3J0Y3V0LiBFeGFtcGxlXG4gKlxuICogICAgIC8vIC0tIGluIHNoYWRlciAtLVxuICogICAgIHN0cnVjdCBMaWdodCB7XG4gKiAgICAgICBmbG9hdCBpbnRlbnNpdHk7XG4gKiAgICAgICB2ZWM0IGNvbG9yO1xuICogICAgIH07XG4gKiAgICAgdW5pZm9ybSBMaWdodCBsaWdodHNbMl07XG4gKlxuICogICAgIC8vIGluIEphdmFTY3JpcHRcbiAqXG4gKiAgICAgdHdnbC5zZXRVbmlmb3Jtcyhwcm9ncmFtSW5mbywge1xuICogICAgICAgbGlnaHRzOiBbXG4gKiAgICAgICAgIHsgaW50ZW5zaXR5OiA1LjAsIGNvbG9yOiBbMSwgMCwgMCwgMV0gfSxcbiAqICAgICAgICAgeyBpbnRlbnNpdHk6IDIuMCwgY29sb3I6IFswLCAwLCAxLCAxXSB9LFxuICogICAgICAgXSxcbiAqICAgICB9KTtcbiAqXG4gKiAgIG9yIHRoZSBtb3JlIHRyYWRpdGlvbmFsIHdheVxuICpcbiAqICAgICB0d2dsLnNldFVuaWZvcm1zKHByb2dyYW1JbmZvLCB7XG4gKiAgICAgICBcImxpZ2h0c1swXS5pbnRlbnNpdHlcIjogNS4wLFxuICogICAgICAgXCJsaWdodHNbMF0uY29sb3JcIjogWzEsIDAsIDAsIDFdLFxuICogICAgICAgXCJsaWdodHNbMV0uaW50ZW5zaXR5XCI6IDIuMCxcbiAqICAgICAgIFwibGlnaHRzWzFdLmNvbG9yXCI6IFswLCAwLCAxLCAxXSxcbiAqICAgICB9KTtcbiAqXG4gKiAgIFlvdSBjYW4gYWxzbyBzcGVjaWZ5IHBhcnRpYWwgcGF0aHNcbiAqXG4gKiAgICAgdHdnbC5zZXRVbmlmb3Jtcyhwcm9ncmFtSW5mbywge1xuICogICAgICAgJ2xpZ2h0c1sxXTogeyBpbnRlbnNpdHk6IDUuMCwgY29sb3I6IFsxLCAwLCAwLCAxXSB9LFxuICogICAgIH0pO1xuICpcbiAqICAgQnV0IHlvdSBjYW4gbm90IHNwZWNpZnkgbGVhZiBhcnJheSBpbmRpY2VzXG4gKlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3Byb2dyYW1zXG4gKi9cbmZ1bmN0aW9uIHNldFVuaWZvcm1zKHNldHRlcnMsIC4uLmFyZ3MpIHsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgY29uc3QgYWN0dWFsU2V0dGVycyA9IHNldHRlcnMudW5pZm9ybVNldHRlcnMgfHwgc2V0dGVycztcbiAgY29uc3QgbnVtQXJncyA9IGFyZ3MubGVuZ3RoO1xuICBmb3IgKGxldCBhTmR4ID0gMDsgYU5keCA8IG51bUFyZ3M7ICsrYU5keCkge1xuICAgIGNvbnN0IHZhbHVlcyA9IGFyZ3NbYU5keF07XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVzKSkge1xuICAgICAgY29uc3QgbnVtVmFsdWVzID0gdmFsdWVzLmxlbmd0aDtcbiAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBudW1WYWx1ZXM7ICsraWkpIHtcbiAgICAgICAgc2V0VW5pZm9ybXMoYWN0dWFsU2V0dGVycywgdmFsdWVzW2lpXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoY29uc3QgbmFtZSBpbiB2YWx1ZXMpIHtcbiAgICAgICAgY29uc3Qgc2V0dGVyID0gYWN0dWFsU2V0dGVyc1tuYW1lXTtcbiAgICAgICAgaWYgKHNldHRlcikge1xuICAgICAgICAgIHNldHRlcih2YWx1ZXNbbmFtZV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQWxpYXMgZm9yIGBzZXRVbmlmb3Jtc2BcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHsobW9kdWxlOnR3Z2wuUHJvZ3JhbUluZm98T2JqZWN0LjxzdHJpbmcsIGZ1bmN0aW9uPil9IHNldHRlcnMgYSBgUHJvZ3JhbUluZm9gIGFzIHJldHVybmVkIGZyb20gYGNyZWF0ZVByb2dyYW1JbmZvYCBvciB0aGUgc2V0dGVycyByZXR1cm5lZCBmcm9tXG4gKiAgICAgICAgYGNyZWF0ZVVuaWZvcm1TZXR0ZXJzYC5cbiAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsID8+fSB2YWx1ZXMgYW4gb2JqZWN0IHdpdGggdmFsdWVzIGZvciB0aGVcbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcm9ncmFtc1xuICovXG5jb25zdCBzZXRVbmlmb3Jtc0FuZEJpbmRUZXh0dXJlcyA9IHNldFVuaWZvcm1zO1xuXG4vKipcbiAqIENyZWF0ZXMgc2V0dGVyIGZ1bmN0aW9ucyBmb3IgYWxsIGF0dHJpYnV0ZXMgb2YgYSBzaGFkZXJcbiAqIHByb2dyYW0uIFlvdSBjYW4gcGFzcyB0aGlzIHRvIHtAbGluayBtb2R1bGU6dHdnbC5zZXRCdWZmZXJzQW5kQXR0cmlidXRlc30gdG8gc2V0IGFsbCB5b3VyIGJ1ZmZlcnMgYW5kIGF0dHJpYnV0ZXMuXG4gKlxuICogQHNlZSB7QGxpbmsgbW9kdWxlOnR3Z2wuc2V0QXR0cmlidXRlc30gZm9yIGV4YW1wbGVcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0IHRvIHVzZS5cbiAqIEBwYXJhbSB7V2ViR0xQcm9ncmFtfSBwcm9ncmFtIHRoZSBwcm9ncmFtIHRvIGNyZWF0ZSBzZXR0ZXJzIGZvci5cbiAqIEByZXR1cm4ge09iamVjdC48c3RyaW5nLCBmdW5jdGlvbj59IGFuIG9iamVjdCB3aXRoIGEgc2V0dGVyIGZvciBlYWNoIGF0dHJpYnV0ZSBieSBuYW1lLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL3Byb2dyYW1zXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUF0dHJpYnV0ZVNldHRlcnMoZ2wsIHByb2dyYW0pIHtcbiAgY29uc3QgYXR0cmliU2V0dGVycyA9IHtcbiAgfTtcblxuICBjb25zdCBudW1BdHRyaWJzID0gZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBBQ1RJVkVfQVRUUklCVVRFUyk7XG4gIGZvciAobGV0IGlpID0gMDsgaWkgPCBudW1BdHRyaWJzOyArK2lpKSB7XG4gICAgY29uc3QgYXR0cmliSW5mbyA9IGdsLmdldEFjdGl2ZUF0dHJpYihwcm9ncmFtLCBpaSk7XG4gICAgaWYgKGlzQnVpbHRJbihhdHRyaWJJbmZvKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IGluZGV4ID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgYXR0cmliSW5mby5uYW1lKTtcbiAgICBjb25zdCB0eXBlSW5mbyA9IGF0dHJUeXBlTWFwW2F0dHJpYkluZm8udHlwZV07XG4gICAgY29uc3Qgc2V0dGVyID0gdHlwZUluZm8uc2V0dGVyKGdsLCBpbmRleCwgdHlwZUluZm8pO1xuICAgIHNldHRlci5sb2NhdGlvbiA9IGluZGV4O1xuICAgIGF0dHJpYlNldHRlcnNbYXR0cmliSW5mby5uYW1lXSA9IHNldHRlcjtcbiAgfVxuXG4gIHJldHVybiBhdHRyaWJTZXR0ZXJzO1xufVxuXG4vKipcbiAqIFNldHMgYXR0cmlidXRlcyBhbmQgYmluZHMgYnVmZmVycyAoZGVwcmVjYXRlZC4uLiB1c2Uge0BsaW5rIG1vZHVsZTp0d2dsLnNldEJ1ZmZlcnNBbmRBdHRyaWJ1dGVzfSlcbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgICBjb25zdCBwcm9ncmFtID0gY3JlYXRlUHJvZ3JhbUZyb21TY3JpcHRzKFxuICogICAgICAgICBnbCwgW1wic29tZS12c1wiLCBcInNvbWUtZnNcIik7XG4gKlxuICogICAgIGNvbnN0IGF0dHJpYlNldHRlcnMgPSBjcmVhdGVBdHRyaWJ1dGVTZXR0ZXJzKHByb2dyYW0pO1xuICpcbiAqICAgICBjb25zdCBwb3NpdGlvbkJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuICogICAgIGNvbnN0IHRleGNvb3JkQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gKlxuICogICAgIGNvbnN0IGF0dHJpYnMgPSB7XG4gKiAgICAgICBhX3Bvc2l0aW9uOiB7YnVmZmVyOiBwb3NpdGlvbkJ1ZmZlciwgbnVtQ29tcG9uZW50czogM30sXG4gKiAgICAgICBhX3RleGNvb3JkOiB7YnVmZmVyOiB0ZXhjb29yZEJ1ZmZlciwgbnVtQ29tcG9uZW50czogMn0sXG4gKiAgICAgfTtcbiAqXG4gKiAgICAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTtcbiAqXG4gKiBUaGlzIHdpbGwgYXV0b21hdGljYWxseSBiaW5kIHRoZSBidWZmZXJzIEFORCBzZXQgdGhlXG4gKiBhdHRyaWJ1dGVzLlxuICpcbiAqICAgICBzZXRBdHRyaWJ1dGVzKGF0dHJpYlNldHRlcnMsIGF0dHJpYnMpO1xuICpcbiAqIFByb3BlcnRpZXMgb2YgYXR0cmlicy4gRm9yIGVhY2ggYXR0cmliIHlvdSBjYW4gYWRkXG4gKiBwcm9wZXJ0aWVzOlxuICpcbiAqICogICB0eXBlOiB0aGUgdHlwZSBvZiBkYXRhIGluIHRoZSBidWZmZXIuIERlZmF1bHQgPSBnbC5GTE9BVFxuICogKiAgIG5vcm1hbGl6ZTogd2hldGhlciBvciBub3QgdG8gbm9ybWFsaXplIHRoZSBkYXRhLiBEZWZhdWx0ID0gZmFsc2VcbiAqICogICBzdHJpZGU6IHRoZSBzdHJpZGUuIERlZmF1bHQgPSAwXG4gKiAqICAgb2Zmc2V0OiBvZmZzZXQgaW50byB0aGUgYnVmZmVyLiBEZWZhdWx0ID0gMFxuICogKiAgIGRpdmlzb3I6IHRoZSBkaXZpc29yIGZvciBpbnN0YW5jZXMuIERlZmF1bHQgPSB1bmRlZmluZWRcbiAqXG4gKiBGb3IgZXhhbXBsZSBpZiB5b3UgaGFkIDMgdmFsdWUgZmxvYXQgcG9zaXRpb25zLCAyIHZhbHVlXG4gKiBmbG9hdCB0ZXhjb29yZCBhbmQgNCB2YWx1ZSB1aW50OCBjb2xvcnMgeW91J2Qgc2V0dXAgeW91clxuICogYXR0cmlicyBsaWtlIHRoaXNcbiAqXG4gKiAgICAgY29uc3QgYXR0cmlicyA9IHtcbiAqICAgICAgIGFfcG9zaXRpb246IHtidWZmZXI6IHBvc2l0aW9uQnVmZmVyLCBudW1Db21wb25lbnRzOiAzfSxcbiAqICAgICAgIGFfdGV4Y29vcmQ6IHtidWZmZXI6IHRleGNvb3JkQnVmZmVyLCBudW1Db21wb25lbnRzOiAyfSxcbiAqICAgICAgIGFfY29sb3I6IHtcbiAqICAgICAgICAgYnVmZmVyOiBjb2xvckJ1ZmZlcixcbiAqICAgICAgICAgbnVtQ29tcG9uZW50czogNCxcbiAqICAgICAgICAgdHlwZTogZ2wuVU5TSUdORURfQllURSxcbiAqICAgICAgICAgbm9ybWFsaXplOiB0cnVlLFxuICogICAgICAgfSxcbiAqICAgICB9O1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsIGZ1bmN0aW9uPn0gc2V0dGVycyBBdHRyaWJ1dGUgc2V0dGVycyBhcyByZXR1cm5lZCBmcm9tIGNyZWF0ZUF0dHJpYnV0ZVNldHRlcnNcbiAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsIG1vZHVsZTp0d2dsLkF0dHJpYkluZm8+fSBidWZmZXJzIEF0dHJpYkluZm9zIG1hcHBlZCBieSBhdHRyaWJ1dGUgbmFtZS5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcm9ncmFtc1xuICogQGRlcHJlY2F0ZWQgdXNlIHtAbGluayBtb2R1bGU6dHdnbC5zZXRCdWZmZXJzQW5kQXR0cmlidXRlc31cbiAqL1xuZnVuY3Rpb24gc2V0QXR0cmlidXRlcyhzZXR0ZXJzLCBidWZmZXJzKSB7XG4gIGZvciAoY29uc3QgbmFtZSBpbiBidWZmZXJzKSB7XG4gICAgY29uc3Qgc2V0dGVyID0gc2V0dGVyc1tuYW1lXTtcbiAgICBpZiAoc2V0dGVyKSB7XG4gICAgICBzZXR0ZXIoYnVmZmVyc1tuYW1lXSk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogU2V0cyBhdHRyaWJ1dGVzIGFuZCBidWZmZXJzIGluY2x1ZGluZyB0aGUgYEVMRU1FTlRfQVJSQVlfQlVGRkVSYCBpZiBhcHByb3ByaWF0ZVxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgIGNvbnN0IHByb2dyYW1JbmZvID0gY3JlYXRlUHJvZ3JhbUluZm8oXG4gKiAgICAgICAgIGdsLCBbXCJzb21lLXZzXCIsIFwic29tZS1mc1wiKTtcbiAqXG4gKiAgICAgY29uc3QgYXJyYXlzID0ge1xuICogICAgICAgcG9zaXRpb246IHsgbnVtQ29tcG9uZW50czogMywgZGF0YTogWzAsIDAsIDAsIDEwLCAwLCAwLCAwLCAxMCwgMCwgMTAsIDEwLCAwXSwgfSxcbiAqICAgICAgIHRleGNvb3JkOiB7IG51bUNvbXBvbmVudHM6IDIsIGRhdGE6IFswLCAwLCAwLCAxLCAxLCAwLCAxLCAxXSwgICAgICAgICAgICAgICAgIH0sXG4gKiAgICAgfTtcbiAqXG4gKiAgICAgY29uc3QgYnVmZmVySW5mbyA9IGNyZWF0ZUJ1ZmZlckluZm9Gcm9tQXJyYXlzKGdsLCBhcnJheXMpO1xuICpcbiAqICAgICBnbC51c2VQcm9ncmFtKHByb2dyYW1JbmZvLnByb2dyYW0pO1xuICpcbiAqIFRoaXMgd2lsbCBhdXRvbWF0aWNhbGx5IGJpbmQgdGhlIGJ1ZmZlcnMgQU5EIHNldCB0aGVcbiAqIGF0dHJpYnV0ZXMuXG4gKlxuICogICAgIHNldEJ1ZmZlcnNBbmRBdHRyaWJ1dGVzKGdsLCBwcm9ncmFtSW5mbywgYnVmZmVySW5mbyk7XG4gKlxuICogRm9yIHRoZSBleGFtcGxlIGFib3ZlIGl0IGlzIGVxdWl2YWxlbnQgdG9cbiAqXG4gKiAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHBvc2l0aW9uQnVmZmVyKTtcbiAqICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhX3Bvc2l0aW9uTG9jYXRpb24pO1xuICogICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoYV9wb3NpdGlvbkxvY2F0aW9uLCAzLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuICogICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0ZXhjb29yZEJ1ZmZlcik7XG4gKiAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYV90ZXhjb29yZExvY2F0aW9uKTtcbiAqICAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGFfdGV4Y29vcmRMb2NhdGlvbiwgNCwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcbiAqXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgQSBXZWJHTFJlbmRlcmluZ0NvbnRleHQuXG4gKiBAcGFyYW0geyhtb2R1bGU6dHdnbC5Qcm9ncmFtSW5mb3xPYmplY3QuPHN0cmluZywgZnVuY3Rpb24+KX0gc2V0dGVycyBBIGBQcm9ncmFtSW5mb2AgYXMgcmV0dXJuZWQgZnJvbSB7QGxpbmsgbW9kdWxlOnR3Z2wuY3JlYXRlUHJvZ3JhbUluZm99IG9yIEF0dHJpYnV0ZSBzZXR0ZXJzIGFzIHJldHVybmVkIGZyb20ge0BsaW5rIG1vZHVsZTp0d2dsLmNyZWF0ZUF0dHJpYnV0ZVNldHRlcnN9XG4gKiBAcGFyYW0geyhtb2R1bGU6dHdnbC5CdWZmZXJJbmZvfG1vZHVsZTp0d2dsLlZlcnRleEFycmF5SW5mbyl9IGJ1ZmZlcnMgYSBgQnVmZmVySW5mb2AgYXMgcmV0dXJuZWQgZnJvbSB7QGxpbmsgbW9kdWxlOnR3Z2wuY3JlYXRlQnVmZmVySW5mb0Zyb21BcnJheXN9LlxuICogICBvciBhIGBWZXJ0ZXhBcnJheUluZm9gIGFzIHJldHVybmVkIGZyb20ge0BsaW5rIG1vZHVsZTp0d2dsLmNyZWF0ZVZlcnRleEFycmF5SW5mb31cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcm9ncmFtc1xuICovXG5mdW5jdGlvbiBzZXRCdWZmZXJzQW5kQXR0cmlidXRlcyhnbCwgcHJvZ3JhbUluZm8sIGJ1ZmZlcnMpIHtcbiAgaWYgKGJ1ZmZlcnMudmVydGV4QXJyYXlPYmplY3QpIHtcbiAgICBnbC5iaW5kVmVydGV4QXJyYXkoYnVmZmVycy52ZXJ0ZXhBcnJheU9iamVjdCk7XG4gIH0gZWxzZSB7XG4gICAgc2V0QXR0cmlidXRlcyhwcm9ncmFtSW5mby5hdHRyaWJTZXR0ZXJzIHx8IHByb2dyYW1JbmZvLCBidWZmZXJzLmF0dHJpYnMpO1xuICAgIGlmIChidWZmZXJzLmluZGljZXMpIHtcbiAgICAgIGdsLmJpbmRCdWZmZXIoRUxFTUVOVF9BUlJBWV9CVUZGRVIkMSwgYnVmZmVycy5pbmRpY2VzKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBQcm9ncmFtSW5mb1xuICogQHByb3BlcnR5IHtXZWJHTFByb2dyYW19IHByb2dyYW0gQSBzaGFkZXIgcHJvZ3JhbVxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCBmdW5jdGlvbj59IHVuaWZvcm1TZXR0ZXJzIG9iamVjdCBvZiBzZXR0ZXJzIGFzIHJldHVybmVkIGZyb20gY3JlYXRlVW5pZm9ybVNldHRlcnMsXG4gKiBAcHJvcGVydHkge09iamVjdDxzdHJpbmcsIGZ1bmN0aW9uPn0gYXR0cmliU2V0dGVycyBvYmplY3Qgb2Ygc2V0dGVycyBhcyByZXR1cm5lZCBmcm9tIGNyZWF0ZUF0dHJpYlNldHRlcnMsXG4gKiBAcHJvcGVydHkge21vZHVsZTp0d2dsLlVuaWZvcm1CbG9ja1NwZWN9IFt1bmlmb3JtQmxvY2tTcGVjXSBhIHVuaWZvcm0gYmxvY2sgc3BlYyBmb3IgbWFraW5nIFVuaWZvcm1CbG9ja0luZm9zIHdpdGggY3JlYXRlVW5pZm9ybUJsb2NrSW5mbyBldGMuLlxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCBtb2R1bGU6dHdnbC5UcmFuc2Zvcm1GZWVkYmFja0luZm8+fSBbdHJhbnNmb3JtRmVlZGJhY2tJbmZvXSBpbmZvIGZvciB0cmFuc2Zvcm0gZmVlZGJhY2tzXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2xcbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBQcm9ncmFtSW5mbyBmcm9tIGFuIGV4aXN0aW5nIHByb2dyYW0uXG4gKlxuICogQSBQcm9ncmFtSW5mbyBjb250YWluc1xuICpcbiAqICAgICBwcm9ncmFtSW5mbyA9IHtcbiAqICAgICAgICBwcm9ncmFtOiBXZWJHTFByb2dyYW0sXG4gKiAgICAgICAgdW5pZm9ybVNldHRlcnM6IG9iamVjdCBvZiBzZXR0ZXJzIGFzIHJldHVybmVkIGZyb20gY3JlYXRlVW5pZm9ybVNldHRlcnMsXG4gKiAgICAgICAgYXR0cmliU2V0dGVyczogb2JqZWN0IG9mIHNldHRlcnMgYXMgcmV0dXJuZWQgZnJvbSBjcmVhdGVBdHRyaWJTZXR0ZXJzLFxuICogICAgIH1cbiAqXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgVGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dFxuICogICAgICAgIHRvIHVzZS5cbiAqIEBwYXJhbSB7V2ViR0xQcm9ncmFtfSBwcm9ncmFtIGFuIGV4aXN0aW5nIFdlYkdMUHJvZ3JhbS5cbiAqIEByZXR1cm4ge21vZHVsZTp0d2dsLlByb2dyYW1JbmZvfSBUaGUgY3JlYXRlZCBQcm9ncmFtSW5mby5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC9wcm9ncmFtc1xuICovXG5mdW5jdGlvbiBjcmVhdGVQcm9ncmFtSW5mb0Zyb21Qcm9ncmFtKGdsLCBwcm9ncmFtKSB7XG4gIGNvbnN0IHVuaWZvcm1TZXR0ZXJzID0gY3JlYXRlVW5pZm9ybVNldHRlcnMoZ2wsIHByb2dyYW0pO1xuICBjb25zdCBhdHRyaWJTZXR0ZXJzID0gY3JlYXRlQXR0cmlidXRlU2V0dGVycyhnbCwgcHJvZ3JhbSk7XG4gIGNvbnN0IHByb2dyYW1JbmZvID0ge1xuICAgIHByb2dyYW0sXG4gICAgdW5pZm9ybVNldHRlcnMsXG4gICAgYXR0cmliU2V0dGVycyxcbiAgfTtcblxuICBpZiAoaXNXZWJHTDIoZ2wpKSB7XG4gICAgcHJvZ3JhbUluZm8udW5pZm9ybUJsb2NrU3BlYyA9IGNyZWF0ZVVuaWZvcm1CbG9ja1NwZWNGcm9tUHJvZ3JhbShnbCwgcHJvZ3JhbSk7XG4gICAgcHJvZ3JhbUluZm8udHJhbnNmb3JtRmVlZGJhY2tJbmZvID0gY3JlYXRlVHJhbnNmb3JtRmVlZGJhY2tJbmZvKGdsLCBwcm9ncmFtKTtcbiAgfVxuXG4gIHJldHVybiBwcm9ncmFtSW5mbztcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgUHJvZ3JhbUluZm8gZnJvbSAyIHNvdXJjZXMuXG4gKlxuICogQSBQcm9ncmFtSW5mbyBjb250YWluc1xuICpcbiAqICAgICBwcm9ncmFtSW5mbyA9IHtcbiAqICAgICAgICBwcm9ncmFtOiBXZWJHTFByb2dyYW0sXG4gKiAgICAgICAgdW5pZm9ybVNldHRlcnM6IG9iamVjdCBvZiBzZXR0ZXJzIGFzIHJldHVybmVkIGZyb20gY3JlYXRlVW5pZm9ybVNldHRlcnMsXG4gKiAgICAgICAgYXR0cmliU2V0dGVyczogb2JqZWN0IG9mIHNldHRlcnMgYXMgcmV0dXJuZWQgZnJvbSBjcmVhdGVBdHRyaWJTZXR0ZXJzLFxuICogICAgIH1cbiAqXG4gKiBOT1RFOiBUaGVyZSBhcmUgNCBzaWduYXR1cmVzIGZvciB0aGlzIGZ1bmN0aW9uXG4gKlxuICogICAgIHR3Z2wuY3JlYXRlUHJvZ3JhbUluZm8oZ2wsIFt2cywgZnNdLCBvcHRpb25zKTtcbiAqICAgICB0d2dsLmNyZWF0ZVByb2dyYW1JbmZvKGdsLCBbdnMsIGZzXSwgb3B0X2VyckZ1bmMpO1xuICogICAgIHR3Z2wuY3JlYXRlUHJvZ3JhbUluZm8oZ2wsIFt2cywgZnNdLCBvcHRfYXR0cmlicywgb3B0X2VyckZ1bmMpO1xuICogICAgIHR3Z2wuY3JlYXRlUHJvZ3JhbUluZm8oZ2wsIFt2cywgZnNdLCBvcHRfYXR0cmlicywgb3B0X2xvY2F0aW9ucywgb3B0X2VyckZ1bmMpO1xuICpcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBnbCBUaGUgV2ViR0xSZW5kZXJpbmdDb250ZXh0XG4gKiAgICAgICAgdG8gdXNlLlxuICogQHBhcmFtIHtzdHJpbmdbXX0gc2hhZGVyU291cmNlcyBBcnJheSBvZiBzb3VyY2VzIGZvciB0aGVcbiAqICAgICAgICBzaGFkZXJzIG9yIGlkcy4gVGhlIGZpcnN0IGlzIGFzc3VtZWQgdG8gYmUgdGhlIHZlcnRleCBzaGFkZXIsXG4gKiAgICAgICAgdGhlIHNlY29uZCB0aGUgZnJhZ21lbnQgc2hhZGVyLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC5Qcm9ncmFtT3B0aW9uc3xzdHJpbmdbXXxtb2R1bGU6dHdnbC5FcnJvckNhbGxiYWNrfSBbb3B0X2F0dHJpYnNdIE9wdGlvbnMgZm9yIHRoZSBwcm9ncmFtIG9yIGFuIGFycmF5IG9mIGF0dHJpYnMgbmFtZXMgb3IgYW4gZXJyb3IgY2FsbGJhY2suIExvY2F0aW9ucyB3aWxsIGJlIGFzc2lnbmVkIGJ5IGluZGV4IGlmIG5vdCBwYXNzZWQgaW5cbiAqIEBwYXJhbSB7bnVtYmVyW119IFtvcHRfbG9jYXRpb25zfG1vZHVsZTp0d2dsLkVycm9yQ2FsbGJhY2tdIFRoZSBsb2NhdGlvbnMgZm9yIHRoZS4gQSBwYXJhbGxlbCBhcnJheSB0byBvcHRfYXR0cmlicyBsZXR0aW5nIHlvdSBhc3NpZ24gbG9jYXRpb25zIG9yIGFuIGVycm9yIGNhbGxiYWNrLlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC5FcnJvckNhbGxiYWNrfSBbb3B0X2Vycm9yQ2FsbGJhY2tdIGNhbGxiYWNrIGZvciBlcnJvcnMuIEJ5IGRlZmF1bHQgaXQganVzdCBwcmludHMgYW4gZXJyb3IgdG8gdGhlIGNvbnNvbGVcbiAqICAgICAgICBvbiBlcnJvci4gSWYgeW91IHdhbnQgc29tZXRoaW5nIGVsc2UgcGFzcyBhbiBjYWxsYmFjay4gSXQncyBwYXNzZWQgYW4gZXJyb3IgbWVzc2FnZS5cbiAqIEByZXR1cm4ge21vZHVsZTp0d2dsLlByb2dyYW1JbmZvP30gVGhlIGNyZWF0ZWQgUHJvZ3JhbUluZm8gb3IgbnVsbCBpZiBpdCBmYWlsZWQgdG8gbGluayBvciBjb21waWxlXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvcHJvZ3JhbXNcbiAqL1xuZnVuY3Rpb24gY3JlYXRlUHJvZ3JhbUluZm8oXG4gICAgZ2wsIHNoYWRlclNvdXJjZXMsIG9wdF9hdHRyaWJzLCBvcHRfbG9jYXRpb25zLCBvcHRfZXJyb3JDYWxsYmFjaykge1xuICBjb25zdCBwcm9nT3B0aW9ucyA9IGdldFByb2dyYW1PcHRpb25zKG9wdF9hdHRyaWJzLCBvcHRfbG9jYXRpb25zLCBvcHRfZXJyb3JDYWxsYmFjayk7XG4gIGxldCBnb29kID0gdHJ1ZTtcbiAgc2hhZGVyU291cmNlcyA9IHNoYWRlclNvdXJjZXMubWFwKGZ1bmN0aW9uKHNvdXJjZSkge1xuICAgIC8vIExldHMgYXNzdW1lIGlmIHRoZXJlIGlzIG5vIFxcbiBpdCdzIGFuIGlkXG4gICAgaWYgKHNvdXJjZS5pbmRleE9mKFwiXFxuXCIpIDwgMCkge1xuICAgICAgY29uc3Qgc2NyaXB0ID0gZ2V0RWxlbWVudEJ5SWQoc291cmNlKTtcbiAgICAgIGlmICghc2NyaXB0KSB7XG4gICAgICAgIHByb2dPcHRpb25zLmVycm9yQ2FsbGJhY2soXCJubyBlbGVtZW50IHdpdGggaWQ6IFwiICsgc291cmNlKTtcbiAgICAgICAgZ29vZCA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc291cmNlID0gc2NyaXB0LnRleHQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzb3VyY2U7XG4gIH0pO1xuICBpZiAoIWdvb2QpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBwcm9ncmFtID0gY3JlYXRlUHJvZ3JhbUZyb21Tb3VyY2VzKGdsLCBzaGFkZXJTb3VyY2VzLCBwcm9nT3B0aW9ucyk7XG4gIGlmICghcHJvZ3JhbSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBjcmVhdGVQcm9ncmFtSW5mb0Zyb21Qcm9ncmFtKGdsLCBwcm9ncmFtKTtcbn1cblxudmFyIHByb2dyYW1zID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIGNyZWF0ZUF0dHJpYnV0ZVNldHRlcnM6IGNyZWF0ZUF0dHJpYnV0ZVNldHRlcnMsXG4gIGNyZWF0ZVByb2dyYW06IGNyZWF0ZVByb2dyYW0sXG4gIGNyZWF0ZVByb2dyYW1Gcm9tU2NyaXB0czogY3JlYXRlUHJvZ3JhbUZyb21TY3JpcHRzLFxuICBjcmVhdGVQcm9ncmFtRnJvbVNvdXJjZXM6IGNyZWF0ZVByb2dyYW1Gcm9tU291cmNlcyxcbiAgY3JlYXRlUHJvZ3JhbUluZm86IGNyZWF0ZVByb2dyYW1JbmZvLFxuICBjcmVhdGVQcm9ncmFtSW5mb0Zyb21Qcm9ncmFtOiBjcmVhdGVQcm9ncmFtSW5mb0Zyb21Qcm9ncmFtLFxuICBjcmVhdGVVbmlmb3JtU2V0dGVyczogY3JlYXRlVW5pZm9ybVNldHRlcnMsXG4gIGNyZWF0ZVVuaWZvcm1CbG9ja1NwZWNGcm9tUHJvZ3JhbTogY3JlYXRlVW5pZm9ybUJsb2NrU3BlY0Zyb21Qcm9ncmFtLFxuICBjcmVhdGVVbmlmb3JtQmxvY2tJbmZvRnJvbVByb2dyYW06IGNyZWF0ZVVuaWZvcm1CbG9ja0luZm9Gcm9tUHJvZ3JhbSxcbiAgY3JlYXRlVW5pZm9ybUJsb2NrSW5mbzogY3JlYXRlVW5pZm9ybUJsb2NrSW5mbyxcbiAgY3JlYXRlVHJhbnNmb3JtRmVlZGJhY2s6IGNyZWF0ZVRyYW5zZm9ybUZlZWRiYWNrLFxuICBjcmVhdGVUcmFuc2Zvcm1GZWVkYmFja0luZm86IGNyZWF0ZVRyYW5zZm9ybUZlZWRiYWNrSW5mbyxcbiAgYmluZFRyYW5zZm9ybUZlZWRiYWNrSW5mbzogYmluZFRyYW5zZm9ybUZlZWRiYWNrSW5mbyxcbiAgc2V0QXR0cmlidXRlczogc2V0QXR0cmlidXRlcyxcbiAgc2V0QnVmZmVyc0FuZEF0dHJpYnV0ZXM6IHNldEJ1ZmZlcnNBbmRBdHRyaWJ1dGVzLFxuICBzZXRVbmlmb3Jtczogc2V0VW5pZm9ybXMsXG4gIHNldFVuaWZvcm1zQW5kQmluZFRleHR1cmVzOiBzZXRVbmlmb3Jtc0FuZEJpbmRUZXh0dXJlcyxcbiAgc2V0VW5pZm9ybUJsb2NrOiBzZXRVbmlmb3JtQmxvY2ssXG4gIHNldEJsb2NrVW5pZm9ybXM6IHNldEJsb2NrVW5pZm9ybXMsXG4gIGJpbmRVbmlmb3JtQmxvY2s6IGJpbmRVbmlmb3JtQmxvY2tcbn0pO1xuXG4vKlxuICogQ29weXJpZ2h0IDIwMTkgR3JlZ2cgVGF2YXJlc1xuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4gKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksXG4gKiB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uXG4gKiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSxcbiAqIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZVxuICogU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuICogYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hBTExcbiAqIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4gKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lOR1xuICogRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUlxuICogREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cbmNvbnN0IFRSSUFOR0xFUyAgICAgICAgICAgICAgICAgICAgICA9IDB4MDAwNDtcbmNvbnN0IFVOU0lHTkVEX1NIT1JUJDMgICAgICAgICAgICAgICAgID0gMHgxNDAzO1xuXG4vKipcbiAqIERyYXdpbmcgcmVsYXRlZCBmdW5jdGlvbnNcbiAqXG4gKiBGb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSB0aGV5IGFyZSBhdmFpbGFibGUgYXQgYm90aCBgdHdnbC5kcmF3YCBhbmQgYHR3Z2xgXG4gKiBpdHNlbGZcbiAqXG4gKiBTZWUge0BsaW5rIG1vZHVsZTp0d2dsfSBmb3IgY29yZSBmdW5jdGlvbnNcbiAqXG4gKiBAbW9kdWxlIHR3Z2wvZHJhd1xuICovXG5cbi8qKlxuICogQ2FsbHMgYGdsLmRyYXdFbGVtZW50c2Agb3IgYGdsLmRyYXdBcnJheXNgLCB3aGljaGV2ZXIgaXMgYXBwcm9wcmlhdGVcbiAqXG4gKiBub3JtYWxseSB5b3UnZCBjYWxsIGBnbC5kcmF3RWxlbWVudHNgIG9yIGBnbC5kcmF3QXJyYXlzYCB5b3Vyc2VsZlxuICogYnV0IGNhbGxpbmcgdGhpcyBtZWFucyBpZiB5b3Ugc3dpdGNoIGZyb20gaW5kZXhlZCBkYXRhIHRvIG5vbi1pbmRleGVkXG4gKiBkYXRhIHlvdSBkb24ndCBoYXZlIHRvIHJlbWVtYmVyIHRvIHVwZGF0ZSB5b3VyIGRyYXcgY2FsbC5cbiAqXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgQSBXZWJHTFJlbmRlcmluZ0NvbnRleHRcbiAqIEBwYXJhbSB7KG1vZHVsZTp0d2dsLkJ1ZmZlckluZm98bW9kdWxlOnR3Z2wuVmVydGV4QXJyYXlJbmZvKX0gYnVmZmVySW5mbyBBIEJ1ZmZlckluZm8gYXMgcmV0dXJuZWQgZnJvbSB7QGxpbmsgbW9kdWxlOnR3Z2wuY3JlYXRlQnVmZmVySW5mb0Zyb21BcnJheXN9IG9yXG4gKiAgIGEgVmVydGV4QXJyYXlJbmZvIGFzIHJldHVybmVkIGZyb20ge0BsaW5rIG1vZHVsZTp0d2dsLmNyZWF0ZVZlcnRleEFycmF5SW5mb31cbiAqIEBwYXJhbSB7bnVtYmVyfSBbdHlwZV0gZWcgKGdsLlRSSUFOR0xFUywgZ2wuTElORVMsIGdsLlBPSU5UUywgZ2wuVFJJQU5HTEVfU1RSSVAsIC4uLikuIERlZmF1bHRzIHRvIGBnbC5UUklBTkdMRVNgXG4gKiBAcGFyYW0ge251bWJlcn0gW2NvdW50XSBBbiBvcHRpb25hbCBjb3VudC4gRGVmYXVsdHMgdG8gYnVmZmVySW5mby5udW1FbGVtZW50c1xuICogQHBhcmFtIHtudW1iZXJ9IFtvZmZzZXRdIEFuIG9wdGlvbmFsIG9mZnNldC4gRGVmYXVsdHMgdG8gMC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbaW5zdGFuY2VDb3VudF0gQW4gb3B0aW9uYWwgaW5zdGFuY2VDb3VudC4gaWYgc2V0IHRoZW4gYGRyYXdBcnJheXNJbnN0YW5jZWRgIG9yIGBkcmF3RWxlbWVudHNJbnN0YW5jZWRgIHdpbGwgYmUgY2FsbGVkXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvZHJhd1xuICovXG5mdW5jdGlvbiBkcmF3QnVmZmVySW5mbyhnbCwgYnVmZmVySW5mbywgdHlwZSwgY291bnQsIG9mZnNldCwgaW5zdGFuY2VDb3VudCkge1xuICB0eXBlID0gdHlwZSA9PT0gdW5kZWZpbmVkID8gVFJJQU5HTEVTIDogdHlwZTtcbiAgY29uc3QgaW5kaWNlcyA9IGJ1ZmZlckluZm8uaW5kaWNlcztcbiAgY29uc3QgZWxlbWVudFR5cGUgPSBidWZmZXJJbmZvLmVsZW1lbnRUeXBlO1xuICBjb25zdCBudW1FbGVtZW50cyA9IGNvdW50ID09PSB1bmRlZmluZWQgPyBidWZmZXJJbmZvLm51bUVsZW1lbnRzIDogY291bnQ7XG4gIG9mZnNldCA9IG9mZnNldCA9PT0gdW5kZWZpbmVkID8gMCA6IG9mZnNldDtcbiAgaWYgKGVsZW1lbnRUeXBlIHx8IGluZGljZXMpIHtcbiAgICBpZiAoaW5zdGFuY2VDb3VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBnbC5kcmF3RWxlbWVudHNJbnN0YW5jZWQodHlwZSwgbnVtRWxlbWVudHMsIGVsZW1lbnRUeXBlID09PSB1bmRlZmluZWQgPyBVTlNJR05FRF9TSE9SVCQzIDogYnVmZmVySW5mby5lbGVtZW50VHlwZSwgb2Zmc2V0LCBpbnN0YW5jZUNvdW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2wuZHJhd0VsZW1lbnRzKHR5cGUsIG51bUVsZW1lbnRzLCBlbGVtZW50VHlwZSA9PT0gdW5kZWZpbmVkID8gVU5TSUdORURfU0hPUlQkMyA6IGJ1ZmZlckluZm8uZWxlbWVudFR5cGUsIG9mZnNldCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChpbnN0YW5jZUNvdW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGdsLmRyYXdBcnJheXNJbnN0YW5jZWQodHlwZSwgb2Zmc2V0LCBudW1FbGVtZW50cywgaW5zdGFuY2VDb3VudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdsLmRyYXdBcnJheXModHlwZSwgb2Zmc2V0LCBudW1FbGVtZW50cyk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQSBEcmF3T2JqZWN0IGlzIHVzZWZ1bCBmb3IgcHV0dGluZyBvYmplY3RzIGluIHRvIGFuIGFycmF5IGFuZCBwYXNzaW5nIHRoZW0gdG8ge0BsaW5rIG1vZHVsZTp0d2dsLmRyYXdPYmplY3RMaXN0fS5cbiAqXG4gKiBZb3UgbmVlZCBlaXRoZXIgYSBgQnVmZmVySW5mb2Agb3IgYSBgVmVydGV4QXJyYXlJbmZvYC5cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBEcmF3T2JqZWN0XG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthY3RpdmVdIHdoZXRoZXIgb3Igbm90IHRvIGRyYXcuIERlZmF1bHQgPSBgdHJ1ZWAgKG11c3QgYmUgYGZhbHNlYCB0byBiZSBub3QgdHJ1ZSkuIEluIG90aGVyIHdvcmRzIGB1bmRlZmluZWRgID0gYHRydWVgXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3R5cGVdIHR5cGUgdG8gZHJhdyBlZy4gYGdsLlRSSUFOR0xFU2AsIGBnbC5MSU5FU2AsIGV0Yy4uLlxuICogQHByb3BlcnR5IHttb2R1bGU6dHdnbC5Qcm9ncmFtSW5mb30gcHJvZ3JhbUluZm8gQSBQcm9ncmFtSW5mbyBhcyByZXR1cm5lZCBmcm9tIHtAbGluayBtb2R1bGU6dHdnbC5jcmVhdGVQcm9ncmFtSW5mb31cbiAqIEBwcm9wZXJ0eSB7bW9kdWxlOnR3Z2wuQnVmZmVySW5mb30gW2J1ZmZlckluZm9dIEEgQnVmZmVySW5mbyBhcyByZXR1cm5lZCBmcm9tIHtAbGluayBtb2R1bGU6dHdnbC5jcmVhdGVCdWZmZXJJbmZvRnJvbUFycmF5c31cbiAqIEBwcm9wZXJ0eSB7bW9kdWxlOnR3Z2wuVmVydGV4QXJyYXlJbmZvfSBbdmVydGV4QXJyYXlJbmZvXSBBIFZlcnRleEFycmF5SW5mbyBhcyByZXR1cm5lZCBmcm9tIHtAbGluayBtb2R1bGU6dHdnbC5jcmVhdGVWZXJ0ZXhBcnJheUluZm99XG4gKiBAcHJvcGVydHkge09iamVjdDxzdHJpbmcsID8+fSB1bmlmb3JtcyBUaGUgdmFsdWVzIGZvciB0aGUgdW5pZm9ybXMuXG4gKiAgIFlvdSBjYW4gcGFzcyBtdWx0aXBsZSBvYmplY3RzIGJ5IHB1dHRpbmcgdGhlbSBpbiBhbiBhcnJheS4gRm9yIGV4YW1wbGVcbiAqXG4gKiAgICAgdmFyIHNoYXJlZFVuaWZvcm1zID0ge1xuICogICAgICAgdV9mb2dOZWFyOiAxMCxcbiAqICAgICAgIHVfcHJvamVjdGlvbjogLi4uXG4gKiAgICAgICAuLi5cbiAqICAgICB9O1xuICpcbiAqICAgICB2YXIgbG9jYWxVbmlmb3JtcyA9IHtcbiAqICAgICAgIHVfd29ybGQ6IC4uLlxuICogICAgICAgdV9kaWZmdXNlQ29sb3I6IC4uLlxuICogICAgIH07XG4gKlxuICogICAgIHZhciBkcmF3T2JqID0ge1xuICogICAgICAgLi4uXG4gKiAgICAgICB1bmlmb3JtczogW3NoYXJlZFVuaWZvcm1zLCBsb2NhbFVuaWZvcm1zXSxcbiAqICAgICB9O1xuICpcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb2Zmc2V0XSB0aGUgb2Zmc2V0IHRvIHBhc3MgdG8gYGdsLmRyYXdBcnJheXNgIG9yIGBnbC5kcmF3RWxlbWVudHNgLiBEZWZhdWx0cyB0byAwLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjb3VudF0gdGhlIGNvdW50IHRvIHBhc3MgdG8gYGdsLmRyYXdBcnJheXNgIG9yIGBnbC5kcmF3RWxlbWVudHNgLiBEZWZhdWx0cyB0byBidWZmZXJJbmZvLm51bUVsZW1lbnRzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtpbnN0YW5jZUNvdW50XSB0aGUgbnVtYmVyIG9mIGluc3RhbmNlcy4gRGVmYXVsdHMgdG8gdW5kZWZpbmVkLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsXG4gKi9cblxuLyoqXG4gKiBEcmF3cyBhIGxpc3Qgb2Ygb2JqZWN0c1xuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIEEgV2ViR0xSZW5kZXJpbmdDb250ZXh0XG4gKiBAcGFyYW0ge0RyYXdPYmplY3RbXX0gb2JqZWN0c1RvRHJhdyBhbiBhcnJheSBvZiBvYmplY3RzIHRvIGRyYXcuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvZHJhd1xuICovXG5mdW5jdGlvbiBkcmF3T2JqZWN0TGlzdChnbCwgb2JqZWN0c1RvRHJhdykge1xuICBsZXQgbGFzdFVzZWRQcm9ncmFtSW5mbyA9IG51bGw7XG4gIGxldCBsYXN0VXNlZEJ1ZmZlckluZm8gPSBudWxsO1xuXG4gIG9iamVjdHNUb0RyYXcuZm9yRWFjaChmdW5jdGlvbihvYmplY3QpIHtcbiAgICBpZiAob2JqZWN0LmFjdGl2ZSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwcm9ncmFtSW5mbyA9IG9iamVjdC5wcm9ncmFtSW5mbztcbiAgICBjb25zdCBidWZmZXJJbmZvID0gb2JqZWN0LnZlcnRleEFycmF5SW5mbyB8fCBvYmplY3QuYnVmZmVySW5mbztcbiAgICBsZXQgYmluZEJ1ZmZlcnMgPSBmYWxzZTtcbiAgICBjb25zdCB0eXBlID0gb2JqZWN0LnR5cGUgPT09IHVuZGVmaW5lZCA/IFRSSUFOR0xFUyA6IG9iamVjdC50eXBlO1xuXG4gICAgaWYgKHByb2dyYW1JbmZvICE9PSBsYXN0VXNlZFByb2dyYW1JbmZvKSB7XG4gICAgICBsYXN0VXNlZFByb2dyYW1JbmZvID0gcHJvZ3JhbUluZm87XG4gICAgICBnbC51c2VQcm9ncmFtKHByb2dyYW1JbmZvLnByb2dyYW0pO1xuXG4gICAgICAvLyBXZSBoYXZlIHRvIHJlYmluZCBidWZmZXJzIHdoZW4gY2hhbmdpbmcgcHJvZ3JhbXMgYmVjYXVzZSB3ZVxuICAgICAgLy8gb25seSBiaW5kIGJ1ZmZlcnMgdGhlIHByb2dyYW0gdXNlcy4gU28gaWYgMiBwcm9ncmFtcyB1c2UgdGhlIHNhbWVcbiAgICAgIC8vIGJ1ZmZlckluZm8gYnV0IHRoZSAxc3Qgb25lIHVzZXMgb25seSBwb3NpdGlvbnMgdGhlIHdoZW4gdGhlXG4gICAgICAvLyB3ZSBzd2l0Y2ggdG8gdGhlIDJuZCBvbmUgc29tZSBvZiB0aGUgYXR0cmlidXRlcyB3aWxsIG5vdCBiZSBvbi5cbiAgICAgIGJpbmRCdWZmZXJzID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBTZXR1cCBhbGwgdGhlIG5lZWRlZCBhdHRyaWJ1dGVzLlxuICAgIGlmIChiaW5kQnVmZmVycyB8fCBidWZmZXJJbmZvICE9PSBsYXN0VXNlZEJ1ZmZlckluZm8pIHtcbiAgICAgIGlmIChsYXN0VXNlZEJ1ZmZlckluZm8gJiYgbGFzdFVzZWRCdWZmZXJJbmZvLnZlcnRleEFycmF5T2JqZWN0ICYmICFidWZmZXJJbmZvLnZlcnRleEFycmF5T2JqZWN0KSB7XG4gICAgICAgIGdsLmJpbmRWZXJ0ZXhBcnJheShudWxsKTtcbiAgICAgIH1cbiAgICAgIGxhc3RVc2VkQnVmZmVySW5mbyA9IGJ1ZmZlckluZm87XG4gICAgICBzZXRCdWZmZXJzQW5kQXR0cmlidXRlcyhnbCwgcHJvZ3JhbUluZm8sIGJ1ZmZlckluZm8pO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgdW5pZm9ybXMuXG4gICAgc2V0VW5pZm9ybXMocHJvZ3JhbUluZm8sIG9iamVjdC51bmlmb3Jtcyk7XG5cbiAgICAvLyBEcmF3XG4gICAgZHJhd0J1ZmZlckluZm8oZ2wsIGJ1ZmZlckluZm8sIHR5cGUsIG9iamVjdC5jb3VudCwgb2JqZWN0Lm9mZnNldCwgb2JqZWN0Lmluc3RhbmNlQ291bnQpO1xuICB9KTtcblxuICBpZiAobGFzdFVzZWRCdWZmZXJJbmZvICYmIGxhc3RVc2VkQnVmZmVySW5mby52ZXJ0ZXhBcnJheU9iamVjdCkge1xuICAgIGdsLmJpbmRWZXJ0ZXhBcnJheShudWxsKTtcbiAgfVxufVxuXG52YXIgZHJhdyA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgX19wcm90b19fOiBudWxsLFxuICBkcmF3QnVmZmVySW5mbzogZHJhd0J1ZmZlckluZm8sXG4gIGRyYXdPYmplY3RMaXN0OiBkcmF3T2JqZWN0TGlzdFxufSk7XG5cbi8qXG4gKiBDb3B5cmlnaHQgMjAxOSBHcmVnZyBUYXZhcmVzXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbiAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSxcbiAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb25cbiAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLFxuICogYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlXG4gKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4gKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuICBJTiBOTyBFVkVOVCBTSEFMTFxuICogVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HXG4gKiBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSXG4gKiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cblxuY29uc3QgRlJBTUVCVUZGRVIgICAgICAgICAgICAgICAgICAgID0gMHg4ZDQwO1xuY29uc3QgUkVOREVSQlVGRkVSICAgICAgICAgICAgICAgICAgID0gMHg4ZDQxO1xuY29uc3QgVEVYVFVSRV8yRCQyICAgICAgICAgICAgICAgICAgICAgPSAweDBkZTE7XG5cbmNvbnN0IFVOU0lHTkVEX0JZVEUkMyAgICAgICAgICAgICAgICAgID0gMHgxNDAxO1xuXG4vKiBQaXhlbEZvcm1hdCAqL1xuY29uc3QgREVQVEhfQ09NUE9ORU5UJDEgICAgICAgICAgICAgICAgPSAweDE5MDI7XG5jb25zdCBSR0JBJDEgICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4MTkwODtcbmNvbnN0IERFUFRIX0NPTVBPTkVOVDI0JDEgICAgICAgICAgICAgID0gMHg4MWE2O1xuY29uc3QgREVQVEhfQ09NUE9ORU5UMzJGJDEgICAgICAgICAgICAgPSAweDhjYWM7XG5jb25zdCBERVBUSDI0X1NURU5DSUw4JDEgICAgICAgICAgICAgICA9IDB4ODhmMDtcbmNvbnN0IERFUFRIMzJGX1NURU5DSUw4JDEgICAgICAgICAgICAgID0gMHg4Y2FkO1xuXG4vKiBGcmFtZWJ1ZmZlciBPYmplY3QuICovXG5jb25zdCBSR0JBNCQxICAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4ODA1NjtcbmNvbnN0IFJHQjVfQTEkMSAgICAgICAgICAgICAgICAgICAgICAgID0gMHg4MDU3O1xuY29uc3QgUkdCNTY1JDEgICAgICAgICAgICAgICAgICAgICAgICAgPSAweDhENjI7XG5jb25zdCBERVBUSF9DT01QT05FTlQxNiQxICAgICAgICAgICAgICA9IDB4ODFBNTtcbmNvbnN0IFNURU5DSUxfSU5ERVggICAgICAgICAgICAgICAgICA9IDB4MTkwMTtcbmNvbnN0IFNURU5DSUxfSU5ERVg4ICAgICAgICAgICAgICAgICA9IDB4OEQ0ODtcbmNvbnN0IERFUFRIX1NURU5DSUwkMSAgICAgICAgICAgICAgICAgID0gMHg4NEY5O1xuY29uc3QgQ09MT1JfQVRUQUNITUVOVDAgICAgICAgICAgICAgID0gMHg4Q0UwO1xuY29uc3QgREVQVEhfQVRUQUNITUVOVCAgICAgICAgICAgICAgID0gMHg4RDAwO1xuY29uc3QgU1RFTkNJTF9BVFRBQ0hNRU5UICAgICAgICAgICAgID0gMHg4RDIwO1xuY29uc3QgREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5UICAgICAgID0gMHg4MjFBO1xuXG4vKiBUZXh0dXJlV3JhcE1vZGUgKi9cbmNvbnN0IENMQU1QX1RPX0VER0UkMSAgICAgICAgICAgICAgICAgID0gMHg4MTJGO1xuXG4vKiBUZXh0dXJlTWFnRmlsdGVyICovXG5jb25zdCBMSU5FQVIkMSAgICAgICAgICAgICAgICAgICAgICAgICA9IDB4MjYwMTtcblxuLyoqXG4gKiBUaGUgb3B0aW9ucyBmb3IgYSBmcmFtZWJ1ZmZlciBhdHRhY2htZW50LlxuICpcbiAqIE5vdGU6IEZvciBhIGBmb3JtYXRgIHRoYXQgaXMgYSB0ZXh0dXJlIGluY2x1ZGUgYWxsIHRoZSB0ZXh0dXJlXG4gKiBvcHRpb25zIGZyb20ge0BsaW5rIG1vZHVsZTp0d2dsLlRleHR1cmVPcHRpb25zfSBmb3IgZXhhbXBsZVxuICogYG1pbmAsIGBtYWdgLCBgY2xhbXBgLCBldGMuLi4gTm90ZSB0aGF0IHVubGlrZSB7QGxpbmsgbW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9XG4gKiBgYXV0b2AgZGVmYXVsdHMgdG8gYGZhbHNlYCBmb3IgYXR0YWNobWVudCB0ZXh0dXJlcyBidXQgYG1pbmAgYW5kIGBtYWdgIGRlZmF1bHRcbiAqIHRvIGBnbC5MSU5FQVJgIGFuZCBgd3JhcGAgZGVmYXVsdHMgdG8gYENMQU1QX1RPX0VER0VgXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gQXR0YWNobWVudE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbYXR0YWNobWVudFBvaW50XSBUaGUgYXR0YWNobWVudCBwb2ludC4gRGVmYXVsdHNcbiAqICAgdG8gYGdsLkNPTE9SX0FUVEFDSE1FTlQwICsgbmR4YCB1bmxlc3MgdHlwZSBpcyBhIGRlcHRoIG9yIHN0ZW5jaWwgdHlwZVxuICogICB0aGVuIGl0J3MgZ2wuREVQVEhfQVRUQUNITUVOVCBvciBgZ2wuREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5UYCBkZXBlbmRpbmdcbiAqICAgb24gdGhlIGZvcm1hdCBvciBhdHRhY2htZW50IHR5cGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2Zvcm1hdF0gVGhlIGZvcm1hdC4gSWYgb25lIG9mIGBnbC5SR0JBNGAsXG4gKiAgIGBnbC5SR0I1NjVgLCBgZ2wuUkdCNV9BMWAsIGBnbC5ERVBUSF9DT01QT05FTlQxNmAsXG4gKiAgIGBnbC5TVEVOQ0lMX0lOREVYOGAgb3IgYGdsLkRFUFRIX1NURU5DSUxgIHRoZW4gd2lsbCBjcmVhdGUgYVxuICogICByZW5kZXJidWZmZXIuIE90aGVyd2lzZSB3aWxsIGNyZWF0ZSBhIHRleHR1cmUuIERlZmF1bHQgPSBgZ2wuUkdCQWBcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHlwZV0gVGhlIHR5cGUuIFVzZWQgZm9yIHRleHR1cmUuIERlZmF1bHQgPSBgZ2wuVU5TSUdORURfQllURWAuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RhcmdldF0gVGhlIHRleHR1cmUgdGFyZ2V0IGZvciBgZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkRgLlxuICogICBEZWZhdWx0cyB0byBgZ2wuVEVYVFVSRV8yRGAuIFNldCB0byBhcHByb3ByaWF0ZSBmYWNlIGZvciBjdWJlIG1hcHMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2xldmVsXSBsZXZlbCBmb3IgYGdsLmZyYW1lYnVmZmVyVGV4dHVyZTJEYC4gRGVmYXVsdHMgdG8gMC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbGF5ZXJdIGxheWVyIGZvciBgZ2wuZnJhbWVidWZmZXJUZXh0dXJlTGF5ZXJgLiBEZWZhdWx0cyB0byB1bmRlZmluZWQuXG4gKiAgIElmIHNldCB0aGVuIGBnbC5mcmFtZWJ1ZmZlclRleHR1cmVMYXllcmAgaXMgY2FsbGVkLCBpZiBub3QgdGhlbiBgZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkRgXG4gKiBAcHJvcGVydHkgeyhXZWJHTFJlbmRlcmJ1ZmZlciB8IFdlYkdMVGV4dHVyZSl9IFthdHRhY2htZW50XSBBbiBleGlzdGluZyByZW5kZXJidWZmZXIgb3IgdGV4dHVyZS5cbiAqICAgIElmIHByb3ZpZGVkIHdpbGwgYXR0YWNoIHRoaXMgT2JqZWN0LiBUaGlzIGFsbG93cyB5b3UgdG8gc2hhcmVcbiAqICAgIGF0dGFjaG1lbnRzIGFjcm9zcyBmcmFtZWJ1ZmZlcnMuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2xcbiAqIEBtaXhlcyBtb2R1bGU6dHdnbC5UZXh0dXJlT3B0aW9uc1xuICovXG5cbmNvbnN0IGRlZmF1bHRBdHRhY2htZW50cyA9IFtcbiAgeyBmb3JtYXQ6IFJHQkEkMSwgdHlwZTogVU5TSUdORURfQllURSQzLCBtaW46IExJTkVBUiQxLCB3cmFwOiBDTEFNUF9UT19FREdFJDEsIH0sXG4gIHsgZm9ybWF0OiBERVBUSF9TVEVOQ0lMJDEsIH0sXG5dO1xuXG5jb25zdCBhdHRhY2htZW50c0J5Rm9ybWF0ID0ge307XG5hdHRhY2htZW50c0J5Rm9ybWF0W0RFUFRIX1NURU5DSUwkMV0gPSBERVBUSF9TVEVOQ0lMX0FUVEFDSE1FTlQ7XG5hdHRhY2htZW50c0J5Rm9ybWF0W1NURU5DSUxfSU5ERVhdID0gU1RFTkNJTF9BVFRBQ0hNRU5UO1xuYXR0YWNobWVudHNCeUZvcm1hdFtTVEVOQ0lMX0lOREVYOF0gPSBTVEVOQ0lMX0FUVEFDSE1FTlQ7XG5hdHRhY2htZW50c0J5Rm9ybWF0W0RFUFRIX0NPTVBPTkVOVCQxXSA9IERFUFRIX0FUVEFDSE1FTlQ7XG5hdHRhY2htZW50c0J5Rm9ybWF0W0RFUFRIX0NPTVBPTkVOVDE2JDFdID0gREVQVEhfQVRUQUNITUVOVDtcbmF0dGFjaG1lbnRzQnlGb3JtYXRbREVQVEhfQ09NUE9ORU5UMjQkMV0gPSBERVBUSF9BVFRBQ0hNRU5UO1xuYXR0YWNobWVudHNCeUZvcm1hdFtERVBUSF9DT01QT05FTlQzMkYkMV0gPSBERVBUSF9BVFRBQ0hNRU5UO1xuYXR0YWNobWVudHNCeUZvcm1hdFtERVBUSDI0X1NURU5DSUw4JDFdID0gREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5UO1xuYXR0YWNobWVudHNCeUZvcm1hdFtERVBUSDMyRl9TVEVOQ0lMOCQxXSA9IERFUFRIX1NURU5DSUxfQVRUQUNITUVOVDtcblxuZnVuY3Rpb24gZ2V0QXR0YWNobWVudFBvaW50Rm9yRm9ybWF0KGZvcm1hdCwgaW50ZXJuYWxGb3JtYXQpIHtcbiAgcmV0dXJuIGF0dGFjaG1lbnRzQnlGb3JtYXRbZm9ybWF0XSB8fCBhdHRhY2htZW50c0J5Rm9ybWF0W2ludGVybmFsRm9ybWF0XTtcbn1cblxuY29uc3QgcmVuZGVyYnVmZmVyRm9ybWF0cyA9IHt9O1xucmVuZGVyYnVmZmVyRm9ybWF0c1tSR0JBNCQxXSA9IHRydWU7XG5yZW5kZXJidWZmZXJGb3JtYXRzW1JHQjVfQTEkMV0gPSB0cnVlO1xucmVuZGVyYnVmZmVyRm9ybWF0c1tSR0I1NjUkMV0gPSB0cnVlO1xucmVuZGVyYnVmZmVyRm9ybWF0c1tERVBUSF9TVEVOQ0lMJDFdID0gdHJ1ZTtcbnJlbmRlcmJ1ZmZlckZvcm1hdHNbREVQVEhfQ09NUE9ORU5UMTYkMV0gPSB0cnVlO1xucmVuZGVyYnVmZmVyRm9ybWF0c1tTVEVOQ0lMX0lOREVYXSA9IHRydWU7XG5yZW5kZXJidWZmZXJGb3JtYXRzW1NURU5DSUxfSU5ERVg4XSA9IHRydWU7XG5cbmZ1bmN0aW9uIGlzUmVuZGVyYnVmZmVyRm9ybWF0KGZvcm1hdCkge1xuICByZXR1cm4gcmVuZGVyYnVmZmVyRm9ybWF0c1tmb3JtYXRdO1xufVxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEZyYW1lYnVmZmVySW5mb1xuICogQHByb3BlcnR5IHtXZWJHTEZyYW1lYnVmZmVyfSBmcmFtZWJ1ZmZlciBUaGUgV2ViR0xGcmFtZWJ1ZmZlciBmb3IgdGhpcyBmcmFtZWJ1ZmZlckluZm9cbiAqIEBwcm9wZXJ0eSB7QXJyYXkuPChXZWJHTFJlbmRlcmJ1ZmZlciB8IFdlYkdMVGV4dHVyZSk+fSBhdHRhY2htZW50cyBUaGUgY3JlYXRlZCBhdHRhY2htZW50cyBpbiB0aGUgc2FtZSBvcmRlciBhcyBwYXNzZWQgaW4gdG8ge0BsaW5rIG1vZHVsZTp0d2dsLmNyZWF0ZUZyYW1lYnVmZmVySW5mb30uXG4gKiBAcHJvcGVydHkge251bWJlcn0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSBmcmFtZWJ1ZmZlciBhbmQgaXRzIGF0dGFjaG1lbnRzXG4gKiBAcHJvcGVydHkge251bWJlcn0gaGVpZ2h0IFRoZSB3aWR0aCBvZiB0aGUgZnJhbWVidWZmZXIgYW5kIGl0cyBhdHRhY2htZW50c1xuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsXG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgZnJhbWVidWZmZXIgYW5kIGF0dGFjaG1lbnRzLlxuICpcbiAqIFRoaXMgcmV0dXJucyBhIHtAbGluayBtb2R1bGU6dHdnbC5GcmFtZWJ1ZmZlckluZm99IGJlY2F1c2UgaXQgbmVlZHMgdG8gcmV0dXJuIHRoZSBhdHRhY2htZW50cyBhcyB3ZWxsIGFzIHRoZSBmcmFtZWJ1ZmZlci5cbiAqXG4gKiBUaGUgc2ltcGxlc3QgdXNhZ2VcbiAqXG4gKiAgICAgLy8gY3JlYXRlIGFuIFJHQkEvVU5TSUdORURfQllURSB0ZXh0dXJlIGFuZCBERVBUSF9TVEVOQ0lMIHJlbmRlcmJ1ZmZlclxuICogICAgIGNvbnN0IGZiaSA9IHR3Z2wuY3JlYXRlRnJhbWVidWZmZXJJbmZvKGdsKTtcbiAqXG4gKiBNb3JlIGNvbXBsZXggdXNhZ2VcbiAqXG4gKiAgICAgLy8gY3JlYXRlIGFuIFJHQjU2NSByZW5kZXJidWZmZXIgYW5kIGEgU1RFTkNJTF9JTkRFWDggcmVuZGVyYnVmZmVyXG4gKiAgICAgY29uc3QgYXR0YWNobWVudHMgPSBbXG4gKiAgICAgICB7IGZvcm1hdDogUkdCNTY1LCBtYWc6IE5FQVJFU1QgfSxcbiAqICAgICAgIHsgZm9ybWF0OiBTVEVOQ0lMX0lOREVYOCB9LFxuICogICAgIF1cbiAqICAgICBjb25zdCBmYmkgPSB0d2dsLmNyZWF0ZUZyYW1lYnVmZmVySW5mbyhnbCwgYXR0YWNobWVudHMpO1xuICpcbiAqIFBhc3NpbmcgaW4gYSBzcGVjaWZpYyBzaXplXG4gKlxuICogICAgIGNvbnN0IHdpZHRoID0gMjU2O1xuICogICAgIGNvbnN0IGhlaWdodCA9IDI1NjtcbiAqICAgICBjb25zdCBmYmkgPSB0d2dsLmNyZWF0ZUZyYW1lYnVmZmVySW5mbyhnbCwgYXR0YWNobWVudHMsIHdpZHRoLCBoZWlnaHQpO1xuICpcbiAqICoqTm90ZSEhKiogSXQgaXMgdXAgdG8geW91IHRvIGNoZWNrIGlmIHRoZSBmcmFtZWJ1ZmZlciBpcyByZW5kZXJhYmxlIGJ5IGNhbGxpbmcgYGdsLmNoZWNrRnJhbWVidWZmZXJTdGF0dXNgLlxuICogW1dlYkdMMSBvbmx5IGd1YXJhbnRlZXMgMyBjb21iaW5hdGlvbnMgb2YgYXR0YWNobWVudHMgd29ya10oaHR0cHM6Ly93d3cua2hyb25vcy5vcmcvcmVnaXN0cnkvd2ViZ2wvc3BlY3MvbGF0ZXN0LzEuMC8jNi42KS5cbiAqXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dFxuICogQHBhcmFtIHttb2R1bGU6dHdnbC5BdHRhY2htZW50T3B0aW9uc1tdfSBbYXR0YWNobWVudHNdIHdoaWNoIGF0dGFjaG1lbnRzIHRvIGNyZWF0ZS4gSWYgbm90IHByb3ZpZGVkIHRoZSBkZWZhdWx0IGlzIGEgZnJhbWVidWZmZXIgd2l0aCBhblxuICogICAgYFJHQkFgLCBgVU5TSUdORURfQllURWAgdGV4dHVyZSBgQ09MT1JfQVRUQUNITUVOVDBgIGFuZCBhIGBERVBUSF9TVEVOQ0lMYCByZW5kZXJidWZmZXIgYERFUFRIX1NURU5DSUxfQVRUQUNITUVOVGAuXG4gKiBAcGFyYW0ge251bWJlcn0gW3dpZHRoXSB0aGUgd2lkdGggZm9yIHRoZSBhdHRhY2htZW50cy4gRGVmYXVsdCA9IHNpemUgb2YgZHJhd2luZ0J1ZmZlclxuICogQHBhcmFtIHtudW1iZXJ9IFtoZWlnaHRdIHRoZSBoZWlnaHQgZm9yIHRoZSBhdHRhY2htZW50cy4gRGVmYXVsdCA9IHNpemUgb2YgZHJhd2luZ0J1ZmZlclxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wuRnJhbWVidWZmZXJJbmZvfSB0aGUgZnJhbWVidWZmZXIgYW5kIGF0dGFjaG1lbnRzLlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsL2ZyYW1lYnVmZmVyc1xuICovXG5mdW5jdGlvbiBjcmVhdGVGcmFtZWJ1ZmZlckluZm8oZ2wsIGF0dGFjaG1lbnRzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gIGNvbnN0IHRhcmdldCA9IEZSQU1FQlVGRkVSO1xuICBjb25zdCBmYiA9IGdsLmNyZWF0ZUZyYW1lYnVmZmVyKCk7XG4gIGdsLmJpbmRGcmFtZWJ1ZmZlcih0YXJnZXQsIGZiKTtcbiAgd2lkdGggID0gd2lkdGggIHx8IGdsLmRyYXdpbmdCdWZmZXJXaWR0aDtcbiAgaGVpZ2h0ID0gaGVpZ2h0IHx8IGdsLmRyYXdpbmdCdWZmZXJIZWlnaHQ7XG4gIGF0dGFjaG1lbnRzID0gYXR0YWNobWVudHMgfHwgZGVmYXVsdEF0dGFjaG1lbnRzO1xuICBsZXQgY29sb3JBdHRhY2htZW50Q291bnQgPSAwO1xuICBjb25zdCBmcmFtZWJ1ZmZlckluZm8gPSB7XG4gICAgZnJhbWVidWZmZXI6IGZiLFxuICAgIGF0dGFjaG1lbnRzOiBbXSxcbiAgICB3aWR0aDogd2lkdGgsXG4gICAgaGVpZ2h0OiBoZWlnaHQsXG4gIH07XG4gIGF0dGFjaG1lbnRzLmZvckVhY2goZnVuY3Rpb24oYXR0YWNobWVudE9wdGlvbnMpIHtcbiAgICBsZXQgYXR0YWNobWVudCA9IGF0dGFjaG1lbnRPcHRpb25zLmF0dGFjaG1lbnQ7XG4gICAgY29uc3QgZm9ybWF0ID0gYXR0YWNobWVudE9wdGlvbnMuZm9ybWF0O1xuICAgIGxldCBhdHRhY2htZW50UG9pbnQgPSBhdHRhY2htZW50T3B0aW9ucy5hdHRhY2htZW50UG9pbnQgfHwgZ2V0QXR0YWNobWVudFBvaW50Rm9yRm9ybWF0KGZvcm1hdCwgYXR0YWNobWVudE9wdGlvbnMuaW50ZXJuYWxGb3JtYXQpO1xuICAgIGlmICghYXR0YWNobWVudFBvaW50KSB7XG4gICAgICBhdHRhY2htZW50UG9pbnQgPSBDT0xPUl9BVFRBQ0hNRU5UMCArIGNvbG9yQXR0YWNobWVudENvdW50Kys7XG4gICAgfVxuICAgIGlmICghYXR0YWNobWVudCkge1xuICAgICAgaWYgKGlzUmVuZGVyYnVmZmVyRm9ybWF0KGZvcm1hdCkpIHtcbiAgICAgICAgYXR0YWNobWVudCA9IGdsLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpO1xuICAgICAgICBnbC5iaW5kUmVuZGVyYnVmZmVyKFJFTkRFUkJVRkZFUiwgYXR0YWNobWVudCk7XG4gICAgICAgIGdsLnJlbmRlcmJ1ZmZlclN0b3JhZ2UoUkVOREVSQlVGRkVSLCBmb3JtYXQsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdGV4dHVyZU9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBhdHRhY2htZW50T3B0aW9ucyk7XG4gICAgICAgIHRleHR1cmVPcHRpb25zLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRleHR1cmVPcHRpb25zLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgaWYgKHRleHR1cmVPcHRpb25zLmF1dG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRleHR1cmVPcHRpb25zLmF1dG8gPSBmYWxzZTtcbiAgICAgICAgICB0ZXh0dXJlT3B0aW9ucy5taW4gPSB0ZXh0dXJlT3B0aW9ucy5taW4gfHwgdGV4dHVyZU9wdGlvbnMubWluTWFnIHx8IExJTkVBUiQxO1xuICAgICAgICAgIHRleHR1cmVPcHRpb25zLm1hZyA9IHRleHR1cmVPcHRpb25zLm1hZyB8fCB0ZXh0dXJlT3B0aW9ucy5taW5NYWcgfHwgTElORUFSJDE7XG4gICAgICAgICAgdGV4dHVyZU9wdGlvbnMud3JhcFMgPSB0ZXh0dXJlT3B0aW9ucy53cmFwUyB8fCB0ZXh0dXJlT3B0aW9ucy53cmFwIHx8IENMQU1QX1RPX0VER0UkMTtcbiAgICAgICAgICB0ZXh0dXJlT3B0aW9ucy53cmFwVCA9IHRleHR1cmVPcHRpb25zLndyYXBUIHx8IHRleHR1cmVPcHRpb25zLndyYXAgfHwgQ0xBTVBfVE9fRURHRSQxO1xuICAgICAgICB9XG4gICAgICAgIGF0dGFjaG1lbnQgPSBjcmVhdGVUZXh0dXJlKGdsLCB0ZXh0dXJlT3B0aW9ucyk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpc1JlbmRlcmJ1ZmZlcihnbCwgYXR0YWNobWVudCkpIHtcbiAgICAgIGdsLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKHRhcmdldCwgYXR0YWNobWVudFBvaW50LCBSRU5ERVJCVUZGRVIsIGF0dGFjaG1lbnQpO1xuICAgIH0gZWxzZSBpZiAoaXNUZXh0dXJlKGdsLCBhdHRhY2htZW50KSkge1xuICAgICAgaWYgKGF0dGFjaG1lbnRPcHRpb25zLmxheWVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZ2wuZnJhbWVidWZmZXJUZXh0dXJlTGF5ZXIoXG4gICAgICAgICAgdGFyZ2V0LFxuICAgICAgICAgIGF0dGFjaG1lbnRQb2ludCxcbiAgICAgICAgICBhdHRhY2htZW50LFxuICAgICAgICAgIGF0dGFjaG1lbnRPcHRpb25zLmxldmVsIHx8IDAsXG4gICAgICAgICAgYXR0YWNobWVudE9wdGlvbnMubGF5ZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkQoXG4gICAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgICBhdHRhY2htZW50UG9pbnQsXG4gICAgICAgICAgICBhdHRhY2htZW50T3B0aW9ucy50YXJnZXQgfHwgVEVYVFVSRV8yRCQyLFxuICAgICAgICAgICAgYXR0YWNobWVudCxcbiAgICAgICAgICAgIGF0dGFjaG1lbnRPcHRpb25zLmxldmVsIHx8IDApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24gYXR0YWNobWVudCB0eXBlJyk7XG4gICAgfVxuICAgIGZyYW1lYnVmZmVySW5mby5hdHRhY2htZW50cy5wdXNoKGF0dGFjaG1lbnQpO1xuICB9KTtcbiAgcmV0dXJuIGZyYW1lYnVmZmVySW5mbztcbn1cblxuLyoqXG4gKiBSZXNpemVzIHRoZSBhdHRhY2htZW50cyBvZiBhIGZyYW1lYnVmZmVyLlxuICpcbiAqIFlvdSBuZWVkIHRvIHBhc3MgaW4gdGhlIHNhbWUgYGF0dGFjaG1lbnRzYCBhcyB5b3UgcGFzc2VkIGluIHtAbGluayBtb2R1bGU6dHdnbC5jcmVhdGVGcmFtZWJ1ZmZlckluZm99XG4gKiBiZWNhdXNlIFRXR0wgaGFzIG5vIGlkZWEgdGhlIGZvcm1hdC90eXBlIG9mIGVhY2ggYXR0YWNobWVudC5cbiAqXG4gKiBUaGUgc2ltcGxlc3QgdXNhZ2VcbiAqXG4gKiAgICAgLy8gY3JlYXRlIGFuIFJHQkEvVU5TSUdORURfQllURSB0ZXh0dXJlIGFuZCBERVBUSF9TVEVOQ0lMIHJlbmRlcmJ1ZmZlclxuICogICAgIGNvbnN0IGZiaSA9IHR3Z2wuY3JlYXRlRnJhbWVidWZmZXJJbmZvKGdsKTtcbiAqXG4gKiAgICAgLi4uXG4gKlxuICogICAgIGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAqICAgICAgIGlmICh0d2dsLnJlc2l6ZUNhbnZhc1RvRGlzcGxheVNpemUoZ2wuY2FudmFzKSkge1xuICogICAgICAgICAvLyByZXNpemUgdGhlIGF0dGFjaG1lbnRzXG4gKiAgICAgICAgIHR3Z2wucmVzaXplRnJhbWVidWZmZXJJbmZvKGdsLCBmYmkpO1xuICogICAgICAgfVxuICpcbiAqIE1vcmUgY29tcGxleCB1c2FnZVxuICpcbiAqICAgICAvLyBjcmVhdGUgYW4gUkdCNTY1IHJlbmRlcmJ1ZmZlciBhbmQgYSBTVEVOQ0lMX0lOREVYOCByZW5kZXJidWZmZXJcbiAqICAgICBjb25zdCBhdHRhY2htZW50cyA9IFtcbiAqICAgICAgIHsgZm9ybWF0OiBSR0I1NjUsIG1hZzogTkVBUkVTVCB9LFxuICogICAgICAgeyBmb3JtYXQ6IFNURU5DSUxfSU5ERVg4IH0sXG4gKiAgICAgXVxuICogICAgIGNvbnN0IGZiaSA9IHR3Z2wuY3JlYXRlRnJhbWVidWZmZXJJbmZvKGdsLCBhdHRhY2htZW50cyk7XG4gKlxuICogICAgIC4uLlxuICpcbiAqICAgICBmdW5jdGlvbiByZW5kZXIoKSB7XG4gKiAgICAgICBpZiAodHdnbC5yZXNpemVDYW52YXNUb0Rpc3BsYXlTaXplKGdsLmNhbnZhcykpIHtcbiAqICAgICAgICAgLy8gcmVzaXplIHRoZSBhdHRhY2htZW50cyB0byBtYXRjaFxuICogICAgICAgICB0d2dsLnJlc2l6ZUZyYW1lYnVmZmVySW5mbyhnbCwgZmJpLCBhdHRhY2htZW50cyk7XG4gKiAgICAgICB9XG4gKlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIHRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHRcbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuRnJhbWVidWZmZXJJbmZvfSBmcmFtZWJ1ZmZlckluZm8gYSBmcmFtZWJ1ZmZlckluZm8gYXMgcmV0dXJuZWQgZnJvbSB7QGxpbmsgbW9kdWxlOnR3Z2wuY3JlYXRlRnJhbWVidWZmZXJJbmZvfS5cbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuQXR0YWNobWVudE9wdGlvbnNbXX0gW2F0dGFjaG1lbnRzXSB0aGUgc2FtZSBhdHRhY2htZW50cyBvcHRpb25zIGFzIHBhc3NlZCB0byB7QGxpbmsgbW9kdWxlOnR3Z2wuY3JlYXRlRnJhbWVidWZmZXJJbmZvfS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2lkdGhdIHRoZSB3aWR0aCBmb3IgdGhlIGF0dGFjaG1lbnRzLiBEZWZhdWx0ID0gc2l6ZSBvZiBkcmF3aW5nQnVmZmVyXG4gKiBAcGFyYW0ge251bWJlcn0gW2hlaWdodF0gdGhlIGhlaWdodCBmb3IgdGhlIGF0dGFjaG1lbnRzLiBEZWZhdWx0ID0gc2l6ZSBvZiBkcmF3aW5nQnVmZmVyXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvZnJhbWVidWZmZXJzXG4gKi9cbmZ1bmN0aW9uIHJlc2l6ZUZyYW1lYnVmZmVySW5mbyhnbCwgZnJhbWVidWZmZXJJbmZvLCBhdHRhY2htZW50cywgd2lkdGgsIGhlaWdodCkge1xuICB3aWR0aCAgPSB3aWR0aCAgfHwgZ2wuZHJhd2luZ0J1ZmZlcldpZHRoO1xuICBoZWlnaHQgPSBoZWlnaHQgfHwgZ2wuZHJhd2luZ0J1ZmZlckhlaWdodDtcbiAgZnJhbWVidWZmZXJJbmZvLndpZHRoID0gd2lkdGg7XG4gIGZyYW1lYnVmZmVySW5mby5oZWlnaHQgPSBoZWlnaHQ7XG4gIGF0dGFjaG1lbnRzID0gYXR0YWNobWVudHMgfHwgZGVmYXVsdEF0dGFjaG1lbnRzO1xuICBhdHRhY2htZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGF0dGFjaG1lbnRPcHRpb25zLCBuZHgpIHtcbiAgICBjb25zdCBhdHRhY2htZW50ID0gZnJhbWVidWZmZXJJbmZvLmF0dGFjaG1lbnRzW25keF07XG4gICAgY29uc3QgZm9ybWF0ID0gYXR0YWNobWVudE9wdGlvbnMuZm9ybWF0O1xuICAgIGlmIChpc1JlbmRlcmJ1ZmZlcihnbCwgYXR0YWNobWVudCkpIHtcbiAgICAgIGdsLmJpbmRSZW5kZXJidWZmZXIoUkVOREVSQlVGRkVSLCBhdHRhY2htZW50KTtcbiAgICAgIGdsLnJlbmRlcmJ1ZmZlclN0b3JhZ2UoUkVOREVSQlVGRkVSLCBmb3JtYXQsIHdpZHRoLCBoZWlnaHQpO1xuICAgIH0gZWxzZSBpZiAoaXNUZXh0dXJlKGdsLCBhdHRhY2htZW50KSkge1xuICAgICAgcmVzaXplVGV4dHVyZShnbCwgYXR0YWNobWVudCwgYXR0YWNobWVudE9wdGlvbnMsIHdpZHRoLCBoZWlnaHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24gYXR0YWNobWVudCB0eXBlJyk7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBCaW5kcyBhIGZyYW1lYnVmZmVyXG4gKlxuICogVGhpcyBmdW5jdGlvbiBwcmV0dHkgbXVjaCBzb2xlbHkgZXhpc3RzIGJlY2F1c2UgSSBzcGVudCBob3Vyc1xuICogdHJ5aW5nIHRvIGZpZ3VyZSBvdXQgd2h5IHNvbWV0aGluZyBJIHdyb3RlIHdhc24ndCB3b3JraW5nIG9ubHlcbiAqIHRvIHJlYWxpemUgSSBmb3JnZXQgdG8gc2V0IHRoZSB2aWV3cG9ydCBkaW1lbnNpb25zLlxuICogTXkgaG9wZSBpcyB0aGlzIGZ1bmN0aW9uIHdpbGwgZml4IHRoYXQuXG4gKlxuICogSXQgaXMgZWZmZWN0aXZlbHkgdGhlIHNhbWUgYXNcbiAqXG4gKiAgICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBzb21lRnJhbWVidWZmZXJJbmZvLmZyYW1lYnVmZmVyKTtcbiAqICAgICBnbC52aWV3cG9ydCgwLCAwLCBzb21lRnJhbWVidWZmZXJJbmZvLndpZHRoLCBzb21lRnJhbWVidWZmZXJJbmZvLmhlaWdodCk7XG4gKlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIHRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHRcbiAqIEBwYXJhbSB7bW9kdWxlOnR3Z2wuRnJhbWVidWZmZXJJbmZvfG51bGx9IFtmcmFtZWJ1ZmZlckluZm9dIGEgZnJhbWVidWZmZXJJbmZvIGFzIHJldHVybmVkIGZyb20ge0BsaW5rIG1vZHVsZTp0d2dsLmNyZWF0ZUZyYW1lYnVmZmVySW5mb30uXG4gKiAgIElmIGZhbHN5IHdpbGwgYmluZCB0aGUgY2FudmFzLlxuICogQHBhcmFtIHtudW1iZXJ9IFt0YXJnZXRdIFRoZSB0YXJnZXQuIElmIG5vdCBwYXNzZWQgYGdsLkZSQU1FQlVGRkVSYCB3aWxsIGJlIHVzZWQuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvZnJhbWVidWZmZXJzXG4gKi9cblxuZnVuY3Rpb24gYmluZEZyYW1lYnVmZmVySW5mbyhnbCwgZnJhbWVidWZmZXJJbmZvLCB0YXJnZXQpIHtcbiAgdGFyZ2V0ID0gdGFyZ2V0IHx8IEZSQU1FQlVGRkVSO1xuICBpZiAoZnJhbWVidWZmZXJJbmZvKSB7XG4gICAgZ2wuYmluZEZyYW1lYnVmZmVyKHRhcmdldCwgZnJhbWVidWZmZXJJbmZvLmZyYW1lYnVmZmVyKTtcbiAgICBnbC52aWV3cG9ydCgwLCAwLCBmcmFtZWJ1ZmZlckluZm8ud2lkdGgsIGZyYW1lYnVmZmVySW5mby5oZWlnaHQpO1xuICB9IGVsc2Uge1xuICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcih0YXJnZXQsIG51bGwpO1xuICAgIGdsLnZpZXdwb3J0KDAsIDAsIGdsLmRyYXdpbmdCdWZmZXJXaWR0aCwgZ2wuZHJhd2luZ0J1ZmZlckhlaWdodCk7XG4gIH1cbn1cblxudmFyIGZyYW1lYnVmZmVycyA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgX19wcm90b19fOiBudWxsLFxuICBiaW5kRnJhbWVidWZmZXJJbmZvOiBiaW5kRnJhbWVidWZmZXJJbmZvLFxuICBjcmVhdGVGcmFtZWJ1ZmZlckluZm86IGNyZWF0ZUZyYW1lYnVmZmVySW5mbyxcbiAgcmVzaXplRnJhbWVidWZmZXJJbmZvOiByZXNpemVGcmFtZWJ1ZmZlckluZm9cbn0pO1xuXG4vKlxuICogQ29weXJpZ2h0IDIwMTkgR3JlZ2cgVGF2YXJlc1xuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4gKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksXG4gKiB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uXG4gKiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSxcbiAqIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZVxuICogU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuICogYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hBTExcbiAqIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4gKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lOR1xuICogRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUlxuICogREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cbi8qKlxuICogdmVydGV4IGFycmF5IG9iamVjdCByZWxhdGVkIGZ1bmN0aW9uc1xuICpcbiAqIFlvdSBzaG91bGQgZ2VuZXJhbGx5IG5vdCBuZWVkIHRvIHVzZSB0aGVzZSBmdW5jdGlvbnMuIFRoZXkgYXJlIHByb3ZpZGVkXG4gKiBmb3IgdGhvc2UgY2FzZXMgd2hlcmUgeW91J3JlIGRvaW5nIHNvbWV0aGluZyBvdXQgb2YgdGhlIG9yZGluYXJ5XG4gKiBhbmQgeW91IG5lZWQgbG93ZXIgbGV2ZWwgYWNjZXNzLlxuICpcbiAqIEZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IHRoZXkgYXJlIGF2YWlsYWJsZSBhdCBib3RoIGB0d2dsLmF0dHJpYnV0ZXNgIGFuZCBgdHdnbGBcbiAqIGl0c2VsZlxuICpcbiAqIFNlZSB7QGxpbmsgbW9kdWxlOnR3Z2x9IGZvciBjb3JlIGZ1bmN0aW9uc1xuICpcbiAqIEBtb2R1bGUgdHdnbC92ZXJ0ZXhBcnJheXNcbiAqL1xuXG5jb25zdCBFTEVNRU5UX0FSUkFZX0JVRkZFUiQyICAgICAgICAgICA9IDB4ODg5MztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBWZXJ0ZXhBcnJheUluZm9cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBudW1FbGVtZW50cyBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIHBhc3MgdG8gYGdsLmRyYXdBcnJheXNgIG9yIGBnbC5kcmF3RWxlbWVudHNgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtlbGVtZW50VHlwZV0gVGhlIHR5cGUgb2YgaW5kaWNlcyBgVU5TSUdORURfQllURWAsIGBVTlNJR05FRF9TSE9SVGAgZXRjLi5cbiAqIEBwcm9wZXJ0eSB7V2ViR0xWZXJ0ZXhBcnJheU9iamVjdH0gW3ZlcnRleEFycmF5T2JqZWN0XSBhIHZlcnRleCBhcnJheSBvYmplY3RcbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbFxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIFZlcnRleEFycmF5SW5mbyBmcm9tIGEgQnVmZmVySW5mbyBhbmQgb25lIG9yIG1vcmUgUHJvZ3JhbUluZm9zXG4gKlxuICogVGhpcyBjYW4gYmUgcGFzc2VkIHRvIHtAbGluayBtb2R1bGU6dHdnbC5zZXRCdWZmZXJzQW5kQXR0cmlidXRlc30gYW5kIHRvXG4gKiB7QGxpbmsgbW9kdWxlOnR3Z2w6ZHJhd0J1ZmZlckluZm99LlxuICpcbiAqID4gKipJTVBPUlRBTlQ6KiogVmVydGV4IEFycmF5IE9iamVjdHMgYXJlICoqbm90KiogYSBkaXJlY3QgYW5hbG9nIGZvciBhIEJ1ZmZlckluZm8uIFZlcnRleCBBcnJheSBPYmplY3RzXG4gKiAgIGFzc2lnbiBidWZmZXJzIHRvIHNwZWNpZmljIGF0dHJpYnV0ZXMgYXQgY3JlYXRpb24gdGltZS4gVGhhdCBtZWFucyB0aGV5IGNhbiBvbmx5IGJlIHVzZWQgd2l0aCBwcm9ncmFtc1xuICogICB3aG8ncyBhdHRyaWJ1dGVzIHVzZSB0aGUgc2FtZSBhdHRyaWJ1dGUgbG9jYXRpb25zIGZvciB0aGUgc2FtZSBwdXJwb3Nlcy5cbiAqXG4gKiA+IEJpbmQgeW91ciBhdHRyaWJ1dGUgbG9jYXRpb25zIGJ5IHBhc3NpbmcgYW4gYXJyYXkgb2YgYXR0cmlidXRlIG5hbWVzIHRvIHtAbGluayBtb2R1bGU6dHdnbC5jcmVhdGVQcm9ncmFtSW5mb31cbiAqICAgb3IgdXNlIFdlYkdMIDIncyBHTFNMIEVTIDMncyBgbGF5b3V0KGxvY2F0aW9uID0gPG51bT4pYCB0byBtYWtlIHN1cmUgbG9jYXRpb25zIG1hdGNoLlxuICpcbiAqIGFsc29cbiAqXG4gKiA+ICoqSU1QT1JUQU5UOioqIEFmdGVyIGNhbGxpbmcgdHdnbC5zZXRCdWZmZXJzQW5kQXR0cmlidXRlIHdpdGggYSBCdWZmZXJJbmZvIHRoYXQgdXNlcyBhIFZlcnRleCBBcnJheSBPYmplY3RcbiAqICAgdGhhdCBWZXJ0ZXggQXJyYXkgT2JqZWN0IHdpbGwgYmUgYm91bmQuIFRoYXQgbWVhbnMgKipBTlkgTUFOSVBVTEFUSU9OIE9GIEVMRU1FTlRfQVJSQVlfQlVGRkVSIG9yIEFUVFJJQlVURVMqKlxuICogICB3aWxsIGFmZmVjdCB0aGUgVmVydGV4IEFycmF5IE9iamVjdCBzdGF0ZS5cbiAqXG4gKiA+IENhbGwgYGdsLmJpbmRWZXJ0ZXhBcnJheShudWxsKWAgdG8gZ2V0IGJhY2sgbWFuaXB1bGF0aW5nIHRoZSBnbG9iYWwgYXR0cmlidXRlcyBhbmQgRUxFTUVOVF9BUlJBWV9CVUZGRVIuXG4gKlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIEEgV2ViR0xSZW5kZXJpbmdDb250ZXh0XG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsLlByb2dyYW1JbmZvfG1vZHVsZTp0d2dsLlByb2dyYW1JbmZvW119IHByb2dyYW1JbmZvIGEgcHJvZ3JhbUluZm8gb3IgYXJyYXkgb2YgcHJvZ3JhbUluZm9zXG4gKiBAcGFyYW0ge21vZHVsZTp0d2dsLkJ1ZmZlckluZm99IGJ1ZmZlckluZm8gQnVmZmVySW5mbyBhcyByZXR1cm5lZCBmcm9tIGNyZWF0ZUJ1ZmZlckluZm9Gcm9tQXJyYXlzIGV0Yy4uLlxuICpcbiAqICAgIFlvdSBuZWVkIHRvIG1ha2Ugc3VyZSBldmVyeSBhdHRyaWJ1dGUgdGhhdCB3aWxsIGJlIHVzZWQgaXMgYm91bmQuIFNvIGZvciBleGFtcGxlIGFzc3VtZSBzaGFkZXIgMVxuICogICAgdXNlcyBhdHRyaWJ1dGVzIEEsIEIsIEMgYW5kIHNoYWRlciAyIHVzZXMgYXR0cmlidXRlcyBBLCBCLCBELiBJZiB5b3Ugb25seSBwYXNzIGluIHRoZSBwcm9ncmFtSW5mb1xuICogICAgZm9yIHNoYWRlciAxIHRoZW4gb25seSBhdHRyaWJ1dGVzIEEsIEIsIGFuZCBDIHdpbGwgaGF2ZSB0aGVpciBhdHRyaWJ1dGVzIHNldCBiZWNhdXNlIFRXR0wgZG9lc24ndFxuICogICAgbm93IGF0dHJpYnV0ZSBEJ3MgbG9jYXRpb24uXG4gKlxuICogICAgU28sIHlvdSBjYW4gcGFzcyBpbiBib3RoIHNoYWRlciAxIGFuZCBzaGFkZXIgMidzIHByb2dyYW1JbmZvXG4gKlxuICogQHJldHVybiB7bW9kdWxlOnR3Z2wuVmVydGV4QXJyYXlJbmZvfSBUaGUgY3JlYXRlZCBWZXJ0ZXhBcnJheUluZm9cbiAqXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdmVydGV4QXJyYXlzXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVZlcnRleEFycmF5SW5mbyhnbCwgcHJvZ3JhbUluZm9zLCBidWZmZXJJbmZvKSB7XG4gIGNvbnN0IHZhbyA9IGdsLmNyZWF0ZVZlcnRleEFycmF5KCk7XG4gIGdsLmJpbmRWZXJ0ZXhBcnJheSh2YW8pO1xuICBpZiAoIXByb2dyYW1JbmZvcy5sZW5ndGgpIHtcbiAgICBwcm9ncmFtSW5mb3MgPSBbcHJvZ3JhbUluZm9zXTtcbiAgfVxuICBwcm9ncmFtSW5mb3MuZm9yRWFjaChmdW5jdGlvbihwcm9ncmFtSW5mbykge1xuICAgIHNldEJ1ZmZlcnNBbmRBdHRyaWJ1dGVzKGdsLCBwcm9ncmFtSW5mbywgYnVmZmVySW5mbyk7XG4gIH0pO1xuICBnbC5iaW5kVmVydGV4QXJyYXkobnVsbCk7XG4gIHJldHVybiB7XG4gICAgbnVtRWxlbWVudHM6IGJ1ZmZlckluZm8ubnVtRWxlbWVudHMsXG4gICAgZWxlbWVudFR5cGU6IGJ1ZmZlckluZm8uZWxlbWVudFR5cGUsXG4gICAgdmVydGV4QXJyYXlPYmplY3Q6IHZhbyxcbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgdmVydGV4IGFycmF5IG9iamVjdCBhbmQgdGhlbiBzZXRzIHRoZSBhdHRyaWJ1dGVzIG9uIGl0XG4gKlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIFRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHQgdG8gdXNlLlxuICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywgZnVuY3Rpb24+fSBzZXR0ZXJzIEF0dHJpYnV0ZSBzZXR0ZXJzIGFzIHJldHVybmVkIGZyb20gY3JlYXRlQXR0cmlidXRlU2V0dGVyc1xuICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywgbW9kdWxlOnR3Z2wuQXR0cmliSW5mbz59IGF0dHJpYnMgQXR0cmliSW5mb3MgbWFwcGVkIGJ5IGF0dHJpYnV0ZSBuYW1lLlxuICogQHBhcmFtIHtXZWJHTEJ1ZmZlcn0gW2luZGljZXNdIGFuIG9wdGlvbmFsIEVMRU1FTlRfQVJSQVlfQlVGRkVSIG9mIGluZGljZXNcbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbC92ZXJ0ZXhBcnJheXNcbiAqL1xuZnVuY3Rpb24gY3JlYXRlVkFPQW5kU2V0QXR0cmlidXRlcyhnbCwgc2V0dGVycywgYXR0cmlicywgaW5kaWNlcykge1xuICBjb25zdCB2YW8gPSBnbC5jcmVhdGVWZXJ0ZXhBcnJheSgpO1xuICBnbC5iaW5kVmVydGV4QXJyYXkodmFvKTtcbiAgc2V0QXR0cmlidXRlcyhzZXR0ZXJzLCBhdHRyaWJzKTtcbiAgaWYgKGluZGljZXMpIHtcbiAgICBnbC5iaW5kQnVmZmVyKEVMRU1FTlRfQVJSQVlfQlVGRkVSJDIsIGluZGljZXMpO1xuICB9XG4gIC8vIFdlIHVuYmluZCB0aGlzIGJlY2F1c2Ugb3RoZXJ3aXNlIGFueSBjaGFuZ2UgdG8gRUxFTUVOVF9BUlJBWV9CVUZGRVJcbiAgLy8gbGlrZSB3aGVuIGNyZWF0aW5nIGJ1ZmZlcnMgZm9yIG90aGVyIHN0dWZmIHdpbGwgbWVzcyB1cCB0aGlzIFZBTydzIGJpbmRpbmdcbiAgZ2wuYmluZFZlcnRleEFycmF5KG51bGwpO1xuICByZXR1cm4gdmFvO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB2ZXJ0ZXggYXJyYXkgb2JqZWN0IGFuZCB0aGVuIHNldHMgdGhlIGF0dHJpYnV0ZXNcbiAqIG9uIGl0XG4gKlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIFRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHRcbiAqICAgICAgICB0byB1c2UuXG4gKiBAcGFyYW0ge09iamVjdC48c3RyaW5nLCBmdW5jdGlvbj58IG1vZHVsZTp0d2dsLlByb2dyYW1JbmZvfSBwcm9ncmFtSW5mbyBhcyByZXR1cm5lZCBmcm9tIGNyZWF0ZVByb2dyYW1JbmZvIG9yIEF0dHJpYnV0ZSBzZXR0ZXJzIGFzIHJldHVybmVkIGZyb20gY3JlYXRlQXR0cmlidXRlU2V0dGVyc1xuICogQHBhcmFtIHttb2R1bGU6dHdnbC5CdWZmZXJJbmZvfSBidWZmZXJJbmZvIEJ1ZmZlckluZm8gYXMgcmV0dXJuZWQgZnJvbSBjcmVhdGVCdWZmZXJJbmZvRnJvbUFycmF5cyBldGMuLi5cbiAqIEBwYXJhbSB7V2ViR0xCdWZmZXJ9IFtpbmRpY2VzXSBhbiBvcHRpb25hbCBFTEVNRU5UX0FSUkFZX0JVRkZFUiBvZiBpbmRpY2VzXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2wvdmVydGV4QXJyYXlzXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVZBT0Zyb21CdWZmZXJJbmZvKGdsLCBwcm9ncmFtSW5mbywgYnVmZmVySW5mbykge1xuICByZXR1cm4gY3JlYXRlVkFPQW5kU2V0QXR0cmlidXRlcyhnbCwgcHJvZ3JhbUluZm8uYXR0cmliU2V0dGVycyB8fCBwcm9ncmFtSW5mbywgYnVmZmVySW5mby5hdHRyaWJzLCBidWZmZXJJbmZvLmluZGljZXMpO1xufVxuXG52YXIgdmVydGV4QXJyYXlzID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIGNyZWF0ZVZlcnRleEFycmF5SW5mbzogY3JlYXRlVmVydGV4QXJyYXlJbmZvLFxuICBjcmVhdGVWQU9BbmRTZXRBdHRyaWJ1dGVzOiBjcmVhdGVWQU9BbmRTZXRBdHRyaWJ1dGVzLFxuICBjcmVhdGVWQU9Gcm9tQnVmZmVySW5mbzogY3JlYXRlVkFPRnJvbUJ1ZmZlckluZm9cbn0pO1xuXG4vKlxuICogQ29weXJpZ2h0IDIwMTkgR3JlZ2cgVGF2YXJlc1xuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4gKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksXG4gKiB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uXG4gKiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSxcbiAqIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZVxuICogU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuICogYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hBTExcbiAqIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4gKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lOR1xuICogRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUlxuICogREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5jb25zdCBkZWZhdWx0cyQyID0ge1xuICBhZGRFeHRlbnNpb25zVG9Db250ZXh0OiB0cnVlLFxufTtcblxuLyoqXG4gKiBWYXJpb3VzIGRlZmF1bHQgc2V0dGluZ3MgZm9yIHR3Z2wuXG4gKlxuICogTm90ZTogWW91IGNhbiBjYWxsIHRoaXMgYW55IG51bWJlciBvZiB0aW1lcy4gRXhhbXBsZTpcbiAqXG4gKiAgICAgdHdnbC5zZXREZWZhdWx0cyh7IHRleHR1cmVDb2xvcjogWzEsIDAsIDAsIDFdIH0pO1xuICogICAgIHR3Z2wuc2V0RGVmYXVsdHMoeyBhdHRyaWJQcmVmaXg6ICdhXycgfSk7XG4gKlxuICogaXMgZXF1aXZhbGVudCB0b1xuICpcbiAqICAgICB0d2dsLnNldERlZmF1bHRzKHtcbiAqICAgICAgIHRleHR1cmVDb2xvcjogWzEsIDAsIDAsIDFdLFxuICogICAgICAgYXR0cmliUHJlZml4OiAnYV8nLFxuICogICAgIH0pO1xuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IERlZmF1bHRzXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2F0dHJpYlByZWZpeF0gVGhlIHByZWZpeCB0byBzdGljayBvbiBhdHRyaWJ1dGVzXG4gKlxuICogICBXaGVuIHdyaXRpbmcgc2hhZGVycyBJIHByZWZlciB0byBuYW1lIGF0dHJpYnV0ZXMgd2l0aCBgYV9gLCB1bmlmb3JtcyB3aXRoIGB1X2AgYW5kIHZhcnlpbmdzIHdpdGggYHZfYFxuICogICBhcyBpdCBtYWtlcyBpdCBjbGVhciB3aGVyZSB0aGV5IGNhbWUgZnJvbS4gQnV0LCB3aGVuIGJ1aWxkaW5nIGdlb21ldHJ5IEkgcHJlZmVyIHVzaW5nIHVuLXByZWZpeGVkIG5hbWVzLlxuICpcbiAqICAgSW4gb3RoZXIgd29yZHMgSSdsbCBjcmVhdGUgYXJyYXlzIG9mIGdlb21ldHJ5IGxpa2UgdGhpc1xuICpcbiAqICAgICAgIGNvbnN0IGFycmF5cyA9IHtcbiAqICAgICAgICAgcG9zaXRpb246IC4uLlxuICogICAgICAgICBub3JtYWw6IC4uLlxuICogICAgICAgICB0ZXhjb29yZDogLi4uXG4gKiAgICAgICB9O1xuICpcbiAqICAgQnV0IG5lZWQgdGhvc2UgbWFwcGVkIHRvIGF0dHJpYnV0ZXMgYW5kIG15IGF0dHJpYnV0ZXMgc3RhcnQgd2l0aCBgYV9gLlxuICpcbiAqICAgRGVmYXVsdDogYFwiXCJgXG4gKlxuICogQHByb3BlcnR5IHtudW1iZXJbXX0gW3RleHR1cmVDb2xvcl0gQXJyYXkgb2YgNCB2YWx1ZXMgaW4gdGhlIHJhbmdlIDAgdG8gMVxuICpcbiAqICAgVGhlIGRlZmF1bHQgdGV4dHVyZSBjb2xvciBpcyB1c2VkIHdoZW4gbG9hZGluZyB0ZXh0dXJlcyBmcm9tXG4gKiAgIHVybHMuIEJlY2F1c2UgdGhlIFVSTCB3aWxsIGJlIGxvYWRlZCBhc3luYyB3ZSdkIGxpa2UgdG8gYmVcbiAqICAgYWJsZSB0byB1c2UgdGhlIHRleHR1cmUgaW1tZWRpYXRlbHkuIEJ5IHB1dHRpbmcgYSAxeDEgcGl4ZWxcbiAqICAgY29sb3IgaW4gdGhlIHRleHR1cmUgd2UgY2FuIHN0YXJ0IHVzaW5nIHRoZSB0ZXh0dXJlIGJlZm9yZVxuICogICB0aGUgVVJMIGhhcyBsb2FkZWQuXG4gKlxuICogICBEZWZhdWx0OiBgWzAuNSwgMC43NSwgMSwgMV1gXG4gKlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjcm9zc09yaWdpbl1cbiAqXG4gKiAgIElmIG5vdCB1bmRlZmluZWQgc2V0cyB0aGUgY3Jvc3NPcmlnaW4gYXR0cmlidXRlIG9uIGltYWdlc1xuICogICB0aGF0IHR3Z2wgY3JlYXRlcyB3aGVuIGRvd25sb2FkaW5nIGltYWdlcyBmb3IgdGV4dHVyZXMuXG4gKlxuICogICBBbHNvIHNlZSB7QGxpbmsgbW9kdWxlOnR3Z2wuVGV4dHVyZU9wdGlvbnN9LlxuICpcbiAqIEBwcm9wZXJ0eSB7Ym9vbH0gW2FkZEV4dGVuc2lvbnNUb0NvbnRleHRdXG4gKlxuICogICBJZiB0cnVlLCB0aGVuLCB3aGVuIHR3Z2wgd2lsbCB0cnkgdG8gYWRkIGFueSBzdXBwb3J0ZWQgV2ViR0wgZXh0ZW5zaW9uc1xuICogICBkaXJlY3RseSB0byB0aGUgY29udGV4dCB1bmRlciB0aGVpciBub3JtYWwgR0wgbmFtZXMuIEZvciBleGFtcGxlXG4gKiAgIGlmIEFOR0xFX2luc3RhbmNlc19hcnJheXMgZXhpc3RzIHRoZW4gdHdnbCB3b3VsZCBlbmFibGUgaXQsXG4gKiAgIGFkZCB0aGUgZnVuY3Rpb25zIGB2ZXJ0ZXhBdHRyaWJEaXZpc29yYCwgYGRyYXdBcnJheXNJbnN0YW5jZWRgLFxuICogICBgZHJhd0VsZW1lbnRzSW5zdGFuY2VkYCwgYW5kIHRoZSBjb25zdGFudCBgVkVSVEVYX0FUVFJJQl9BUlJBWV9ESVZJU09SYFxuICogICB0byB0aGUgYFdlYkdMUmVuZGVyaW5nQ29udGV4dGAuXG4gKlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsXG4gKi9cblxuLyoqXG4gKiBTZXRzIHZhcmlvdXMgZGVmYXVsdHMgZm9yIHR3Z2wuXG4gKlxuICogSW4gdGhlIGludGVyZXN0IG9mIHRlcnNlbmVzcyB3aGljaCBpcyBraW5kIG9mIHRoZSBwb2ludFxuICogb2YgdHdnbCBJJ3ZlIGludGVncmF0ZWQgYSBmZXcgb2YgdGhlIG9sZGVyIGZ1bmN0aW9ucyBoZXJlXG4gKlxuICogQHBhcmFtIHttb2R1bGU6dHdnbC5EZWZhdWx0c30gbmV3RGVmYXVsdHMgVGhlIGRlZmF1bHQgc2V0dGluZ3MuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2xcbiAqL1xuZnVuY3Rpb24gc2V0RGVmYXVsdHMkMihuZXdEZWZhdWx0cykge1xuICBjb3B5RXhpc3RpbmdQcm9wZXJ0aWVzKG5ld0RlZmF1bHRzLCBkZWZhdWx0cyQyKTtcbiAgc2V0RGVmYXVsdHMobmV3RGVmYXVsdHMpOyAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICBzZXREZWZhdWx0cyQxKG5ld0RlZmF1bHRzKTsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbn1cblxuY29uc3QgcHJlZml4UkUgPSAvXiguKj8pXy87XG5mdW5jdGlvbiBhZGRFeHRlbnNpb25Ub0NvbnRleHQoZ2wsIGV4dGVuc2lvbk5hbWUpIHtcbiAgZ2xFbnVtVG9TdHJpbmcoZ2wsIDApO1xuICBjb25zdCBleHQgPSBnbC5nZXRFeHRlbnNpb24oZXh0ZW5zaW9uTmFtZSk7XG4gIGlmIChleHQpIHtcbiAgICBjb25zdCBlbnVtcyA9IHt9O1xuICAgIGNvbnN0IGZuU3VmZml4ID0gcHJlZml4UkUuZXhlYyhleHRlbnNpb25OYW1lKVsxXTtcbiAgICBjb25zdCBlbnVtU3VmZml4ID0gJ18nICsgZm5TdWZmaXg7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gZXh0KSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGV4dFtrZXldO1xuICAgICAgY29uc3QgaXNGdW5jID0gdHlwZW9mICh2YWx1ZSkgPT09ICdmdW5jdGlvbic7XG4gICAgICBjb25zdCBzdWZmaXggPSBpc0Z1bmMgPyBmblN1ZmZpeCA6IGVudW1TdWZmaXg7XG4gICAgICBsZXQgbmFtZSA9IGtleTtcbiAgICAgIC8vIGV4YW1wbGVzIG9mIHdoZXJlIHRoaXMgaXMgbm90IHRydWUgYXJlIFdFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXG4gICAgICAvLyBhbmQgV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjXG4gICAgICBpZiAoa2V5LmVuZHNXaXRoKHN1ZmZpeCkpIHtcbiAgICAgICAgbmFtZSA9IGtleS5zdWJzdHJpbmcoMCwga2V5Lmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGgpO1xuICAgICAgfVxuICAgICAgaWYgKGdsW25hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKCFpc0Z1bmMgJiYgZ2xbbmFtZV0gIT09IHZhbHVlKSB7XG4gICAgICAgICAgd2FybihuYW1lLCBnbFtuYW1lXSwgdmFsdWUsIGtleSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChpc0Z1bmMpIHtcbiAgICAgICAgICBnbFtuYW1lXSA9IGZ1bmN0aW9uKG9yaWdGbikge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gb3JpZ0ZuLmFwcGx5KGV4dCwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZ2xbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICBlbnVtc1tuYW1lXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIHBhc3MgdGhlIG1vZGlmaWVkIGVudW1zIHRvIGdsRW51bVRvU3RyaW5nXG4gICAgZW51bXMuY29uc3RydWN0b3IgPSB7XG4gICAgICBuYW1lOiBleHQuY29uc3RydWN0b3IubmFtZSxcbiAgICB9O1xuICAgIGdsRW51bVRvU3RyaW5nKGVudW1zLCAwKTtcbiAgfVxuICByZXR1cm4gZXh0O1xufVxuXG4vKlxuICogSWYgeW91J3JlIHdvbmRlcmluZyB3aHkgdGhlIGNvZGUgZG9lc24ndCBqdXN0IGl0ZXJhdGVcbiAqIG92ZXIgYWxsIGV4dGVuc2lvbnMgdXNpbmcgYGdsLmdldEV4dGVuc2lvbnNgIGlzIHRoYXQgaXQncyBwb3NzaWJsZVxuICogc29tZSBmdXR1cmUgZXh0ZW5zaW9uIGlzIGluY29tcGF0aWJsZSB3aXRoIHRoaXMgY29kZS4gUmF0aGVyIHRoYW5cbiAqIGhhdmUgdGhpbmcgc3VkZGVubHkgYnJlYWsgaXQgc2VlbXMgYmV0dGVyIHRvIG1hbnVhbGx5IGFkZCB0byB0aGlzXG4gKiBsaXN0LlxuICpcbiAqL1xuY29uc3Qgc3VwcG9ydGVkRXh0ZW5zaW9ucyA9IFtcbiAgJ0FOR0xFX2luc3RhbmNlZF9hcnJheXMnLFxuICAnRVhUX2JsZW5kX21pbm1heCcsXG4gICdFWFRfY29sb3JfYnVmZmVyX2Zsb2F0JyxcbiAgJ0VYVF9jb2xvcl9idWZmZXJfaGFsZl9mbG9hdCcsXG4gICdFWFRfZGlzam9pbnRfdGltZXJfcXVlcnknLFxuICAnRVhUX2Rpc2pvaW50X3RpbWVyX3F1ZXJ5X3dlYmdsMicsXG4gICdFWFRfZnJhZ19kZXB0aCcsXG4gICdFWFRfc1JHQicsXG4gICdFWFRfc2hhZGVyX3RleHR1cmVfbG9kJyxcbiAgJ0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYycsXG4gICdPRVNfZWxlbWVudF9pbmRleF91aW50JyxcbiAgJ09FU19zdGFuZGFyZF9kZXJpdmF0aXZlcycsXG4gICdPRVNfdGV4dHVyZV9mbG9hdCcsXG4gICdPRVNfdGV4dHVyZV9mbG9hdF9saW5lYXInLFxuICAnT0VTX3RleHR1cmVfaGFsZl9mbG9hdCcsXG4gICdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhcicsXG4gICdPRVNfdmVydGV4X2FycmF5X29iamVjdCcsXG4gICdXRUJHTF9jb2xvcl9idWZmZXJfZmxvYXQnLFxuICAnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2F0YycsXG4gICdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfZXRjMScsXG4gICdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGMnLFxuICAnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGMnLFxuICAnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNfc3JnYicsXG4gICdXRUJHTF9kZXB0aF90ZXh0dXJlJyxcbiAgJ1dFQkdMX2RyYXdfYnVmZmVycycsXG5dO1xuXG4vKipcbiAqIEF0dGVtcHRzIHRvIGVuYWJsZSBhbGwgb2YgdGhlIGZvbGxvd2luZyBleHRlbnNpb25zXG4gKiBhbmQgYWRkIHRoZWlyIGZ1bmN0aW9ucyBhbmQgY29uc3RhbnRzIHRvIHRoZVxuICogYFdlYkdMUmVuZGVyaW5nQ29udGV4dGAgdXNpbmcgdGhlaXIgbm9ybWFsIG5vbi1leHRlbnNpb24gbGlrZSBuYW1lcy5cbiAqXG4gKiAgICAgIEFOR0xFX2luc3RhbmNlZF9hcnJheXNcbiAqICAgICAgRVhUX2JsZW5kX21pbm1heFxuICogICAgICBFWFRfY29sb3JfYnVmZmVyX2Zsb2F0XG4gKiAgICAgIEVYVF9jb2xvcl9idWZmZXJfaGFsZl9mbG9hdFxuICogICAgICBFWFRfZGlzam9pbnRfdGltZXJfcXVlcnlcbiAqICAgICAgRVhUX2Rpc2pvaW50X3RpbWVyX3F1ZXJ5X3dlYmdsMlxuICogICAgICBFWFRfZnJhZ19kZXB0aFxuICogICAgICBFWFRfc1JHQlxuICogICAgICBFWFRfc2hhZGVyX3RleHR1cmVfbG9kXG4gKiAgICAgIEVYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1xuICogICAgICBPRVNfZWxlbWVudF9pbmRleF91aW50XG4gKiAgICAgIE9FU19zdGFuZGFyZF9kZXJpdmF0aXZlc1xuICogICAgICBPRVNfdGV4dHVyZV9mbG9hdFxuICogICAgICBPRVNfdGV4dHVyZV9mbG9hdF9saW5lYXJcbiAqICAgICAgT0VTX3RleHR1cmVfaGFsZl9mbG9hdFxuICogICAgICBPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhclxuICogICAgICBPRVNfdmVydGV4X2FycmF5X29iamVjdFxuICogICAgICBXRUJHTF9jb2xvcl9idWZmZXJfZmxvYXRcbiAqICAgICAgV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2F0Y1xuICogICAgICBXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfZXRjMVxuICogICAgICBXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGNcbiAqICAgICAgV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcbiAqICAgICAgV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNfc3JnYlxuICogICAgICBXRUJHTF9kZXB0aF90ZXh0dXJlXG4gKiAgICAgIFdFQkdMX2RyYXdfYnVmZmVyc1xuICpcbiAqIEZvciBleGFtcGxlIGlmIGBBTkdMRV9pbnN0YW5jZWRfYXJyYXlzYCBleGlzdHMgdGhlbiB0aGUgZnVuY3Rpb25zXG4gKiBgZHJhd0FycmF5c0luc3RhbmNlZGAsIGBkcmF3RWxlbWVudHNJbnN0YW5jZWRgLCBgdmVydGV4QXR0cmliRGl2aXNvcmBcbiAqIGFuZCB0aGUgY29uc3RhbnQgYFZFUlRFWF9BVFRSSUJfQVJSQVlfRElWSVNPUmAgYXJlIGFkZGVkIHRvIHRoZVxuICogYFdlYkdMUmVuZGVyaW5nQ29udGV4dGAuXG4gKlxuICogTm90ZSB0aGF0IGlmIHlvdSB3YW50IHRvIGtub3cgaWYgdGhlIGV4dGVuc2lvbiBleGlzdHMgeW91IHNob3VsZFxuICogcHJvYmFibHkgY2FsbCBgZ2wuZ2V0RXh0ZW5zaW9uYCBmb3IgZWFjaCBleHRlbnNpb24uIEFsdGVybmF0aXZlbHlcbiAqIHlvdSBjYW4gY2hlY2sgZm9yIHRoZSBleGlzdGVuY2Ugb2YgdGhlIGZ1bmN0aW9ucyBvciBjb25zdGFudHMgdGhhdFxuICogYXJlIGV4cGVjdGVkIHRvIGJlIGFkZGVkLiBGb3IgZXhhbXBsZVxuICpcbiAqICAgIGlmIChnbC5kcmF3QnVmZmVycykge1xuICogICAgICAvLyBFaXRoZXIgV0VCR0xfZHJhd19idWZmZXJzIHdhcyBlbmFibGVkIE9SIHlvdSdyZSBydW5uaW5nIGluIFdlYkdMMlxuICogICAgICAuLi4uXG4gKlxuICogQHBhcmFtIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIEEgV2ViR0xSZW5kZXJpbmdDb250ZXh0XG4gKiBAbWVtYmVyT2YgbW9kdWxlOnR3Z2xcbiAqL1xuZnVuY3Rpb24gYWRkRXh0ZW5zaW9uc1RvQ29udGV4dChnbCkge1xuICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgc3VwcG9ydGVkRXh0ZW5zaW9ucy5sZW5ndGg7ICsraWkpIHtcbiAgICBhZGRFeHRlbnNpb25Ub0NvbnRleHQoZ2wsIHN1cHBvcnRlZEV4dGVuc2lvbnNbaWldKTtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB3ZWJnbCBjb250ZXh0LlxuICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudH0gY2FudmFzIFRoZSBjYW52YXMgdGFnIHRvIGdldFxuICogICAgIGNvbnRleHQgZnJvbS4gSWYgb25lIGlzIG5vdCBwYXNzZWQgaW4gb25lIHdpbGwgYmVcbiAqICAgICBjcmVhdGVkLlxuICogQHJldHVybiB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBUaGUgY3JlYXRlZCBjb250ZXh0LlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlM0RDb250ZXh0KGNhbnZhcywgb3B0X2F0dHJpYnMpIHtcbiAgY29uc3QgbmFtZXMgPSBbXCJ3ZWJnbFwiLCBcImV4cGVyaW1lbnRhbC13ZWJnbFwiXTtcbiAgbGV0IGNvbnRleHQgPSBudWxsO1xuICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgbmFtZXMubGVuZ3RoOyArK2lpKSB7XG4gICAgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KG5hbWVzW2lpXSwgb3B0X2F0dHJpYnMpO1xuICAgIGlmIChjb250ZXh0KSB7XG4gICAgICBpZiAoZGVmYXVsdHMkMi5hZGRFeHRlbnNpb25zVG9Db250ZXh0KSB7XG4gICAgICAgIGFkZEV4dGVuc2lvbnNUb0NvbnRleHQoY29udGV4dCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNvbnRleHQ7XG59XG5cbi8qKlxuICogR2V0cyBhIFdlYkdMMSBjb250ZXh0LlxuICpcbiAqIE5vdGU6IFdpbGwgYXR0ZW1wdCB0byBlbmFibGUgVmVydGV4IEFycmF5IE9iamVjdHNcbiAqIGFuZCBhZGQgV2ViR0wyIGVudHJ5IHBvaW50cy4gKHVubGVzcyB5b3UgZmlyc3Qgc2V0IGRlZmF1bHRzIHdpdGhcbiAqIGB0d2dsLnNldERlZmF1bHRzKHtlbmFibGVWZXJ0ZXhBcnJheU9iamVjdHM6IGZhbHNlfSlgO1xuICpcbiAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR9IGNhbnZhcyBhIGNhbnZhcyBlbGVtZW50LlxuICogQHBhcmFtIHtXZWJHTENvbnRleHRBdHRyaWJ1dGVzfSBbb3B0X2F0dHJpYnNdIG9wdGlvbmFsIHdlYmdsIGNvbnRleHQgY3JlYXRpb24gYXR0cmlidXRlc1xuICogQHJldHVybiB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBUaGUgY3JlYXRlZCBjb250ZXh0LlxuICogQG1lbWJlck9mIG1vZHVsZTp0d2dsXG4gKi9cbmZ1bmN0aW9uIGdldFdlYkdMQ29udGV4dChjYW52YXMsIG9wdF9hdHRyaWJzKSB7XG4gIGNvbnN0IGdsID0gY3JlYXRlM0RDb250ZXh0KGNhbnZhcywgb3B0X2F0dHJpYnMpO1xuICByZXR1cm4gZ2w7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHdlYmdsIGNvbnRleHQuXG4gKlxuICogV2lsbCByZXR1cm4gYSBXZWJHTDIgY29udGV4dCBpZiBwb3NzaWJsZS5cbiAqXG4gKiBZb3UgY2FuIGNoZWNrIGlmIGl0J3MgV2ViR0wyIHdpdGhcbiAqXG4gKiAgICAgdHdnbC5pc1dlYkdMMihnbCk7XG4gKlxuICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudH0gY2FudmFzIFRoZSBjYW52YXMgdGFnIHRvIGdldFxuICogICAgIGNvbnRleHQgZnJvbS4gSWYgb25lIGlzIG5vdCBwYXNzZWQgaW4gb25lIHdpbGwgYmVcbiAqICAgICBjcmVhdGVkLlxuICogQHJldHVybiB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBUaGUgY3JlYXRlZCBjb250ZXh0LlxuICovXG5mdW5jdGlvbiBjcmVhdGVDb250ZXh0KGNhbnZhcywgb3B0X2F0dHJpYnMpIHtcbiAgY29uc3QgbmFtZXMgPSBbXCJ3ZWJnbDJcIiwgXCJ3ZWJnbFwiLCBcImV4cGVyaW1lbnRhbC13ZWJnbFwiXTtcbiAgbGV0IGNvbnRleHQgPSBudWxsO1xuICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgbmFtZXMubGVuZ3RoOyArK2lpKSB7XG4gICAgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KG5hbWVzW2lpXSwgb3B0X2F0dHJpYnMpO1xuICAgIGlmIChjb250ZXh0KSB7XG4gICAgICBpZiAoZGVmYXVsdHMkMi5hZGRFeHRlbnNpb25zVG9Db250ZXh0KSB7XG4gICAgICAgIGFkZEV4dGVuc2lvbnNUb0NvbnRleHQoY29udGV4dCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNvbnRleHQ7XG59XG5cbi8qKlxuICogR2V0cyBhIFdlYkdMIGNvbnRleHQuICBXaWxsIGNyZWF0ZSBhIFdlYkdMMiBjb250ZXh0IGlmIHBvc3NpYmxlLlxuICpcbiAqIFlvdSBjYW4gY2hlY2sgaWYgaXQncyBXZWJHTDIgd2l0aFxuICpcbiAqICAgIGZ1bmN0aW9uIGlzV2ViR0wyKGdsKSB7XG4gKiAgICAgIHJldHVybiBnbC5nZXRQYXJhbWV0ZXIoZ2wuVkVSU0lPTikuaW5kZXhPZihcIldlYkdMIDIuMCBcIikgPT0gMDtcbiAqICAgIH1cbiAqXG4gKiBOb3RlOiBGb3IgYSBXZWJHTDEgY29udGV4dCB3aWxsIGF0dGVtcHQgdG8gZW5hYmxlIFZlcnRleCBBcnJheSBPYmplY3RzXG4gKiBhbmQgYWRkIFdlYkdMMiBlbnRyeSBwb2ludHMuICh1bmxlc3MgeW91IGZpcnN0IHNldCBkZWZhdWx0cyB3aXRoXG4gKiBgdHdnbC5zZXREZWZhdWx0cyh7ZW5hYmxlVmVydGV4QXJyYXlPYmplY3RzOiBmYWxzZX0pYDtcbiAqXG4gKiBAcGFyYW0ge0hUTUxDYW52YXNFbGVtZW50fSBjYW52YXMgYSBjYW52YXMgZWxlbWVudC5cbiAqIEBwYXJhbSB7V2ViR0xDb250ZXh0QXR0cmlidXRlc30gW29wdF9hdHRyaWJzXSBvcHRpb25hbCB3ZWJnbCBjb250ZXh0IGNyZWF0aW9uIGF0dHJpYnV0ZXNcbiAqIEByZXR1cm4ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gVGhlIGNyZWF0ZWQgY29udGV4dC5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbFxuICovXG5mdW5jdGlvbiBnZXRDb250ZXh0KGNhbnZhcywgb3B0X2F0dHJpYnMpIHtcbiAgY29uc3QgZ2wgPSBjcmVhdGVDb250ZXh0KGNhbnZhcywgb3B0X2F0dHJpYnMpO1xuICByZXR1cm4gZ2w7XG59XG5cbi8qKlxuICogUmVzaXplIGEgY2FudmFzIHRvIG1hdGNoIHRoZSBzaXplIGl0J3MgZGlzcGxheWVkLlxuICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudH0gY2FudmFzIFRoZSBjYW52YXMgdG8gcmVzaXplLlxuICogQHBhcmFtIHtudW1iZXJ9IFttdWx0aXBsaWVyXSBTbyB5b3UgY2FuIHBhc3MgaW4gYHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvYCBvciBvdGhlciBzY2FsZSB2YWx1ZSBpZiB5b3Ugd2FudCB0by5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgdGhlIGNhbnZhcyB3YXMgcmVzaXplZC5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6dHdnbFxuICovXG5mdW5jdGlvbiByZXNpemVDYW52YXNUb0Rpc3BsYXlTaXplKGNhbnZhcywgbXVsdGlwbGllcikge1xuICBtdWx0aXBsaWVyID0gbXVsdGlwbGllciB8fCAxO1xuICBtdWx0aXBsaWVyID0gTWF0aC5tYXgoMCwgbXVsdGlwbGllcik7XG4gIGNvbnN0IHdpZHRoICA9IGNhbnZhcy5jbGllbnRXaWR0aCAgKiBtdWx0aXBsaWVyIHwgMDtcbiAgY29uc3QgaGVpZ2h0ID0gY2FudmFzLmNsaWVudEhlaWdodCAqIG11bHRpcGxpZXIgfCAwO1xuICBpZiAoY2FudmFzLndpZHRoICE9PSB3aWR0aCB8fCBjYW52YXMuaGVpZ2h0ICE9PSBoZWlnaHQpIHtcbiAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IHsgYWRkRXh0ZW5zaW9uc1RvQ29udGV4dCwgYXR0cmlidXRlcywgYmluZEZyYW1lYnVmZmVySW5mbywgYmluZFRyYW5zZm9ybUZlZWRiYWNrSW5mbywgYmluZFVuaWZvcm1CbG9jaywgY2FuRmlsdGVyLCBjYW5HZW5lcmF0ZU1pcG1hcCwgY3JlYXRlQXR0cmlic0Zyb21BcnJheXMsIGNyZWF0ZUF0dHJpYnV0ZVNldHRlcnMsIGNyZWF0ZUJ1ZmZlckZyb21BcnJheSwgY3JlYXRlQnVmZmVyRnJvbVR5cGVkQXJyYXksIGNyZWF0ZUJ1ZmZlckluZm9Gcm9tQXJyYXlzLCBjcmVhdGVCdWZmZXJzRnJvbUFycmF5cywgY3JlYXRlRnJhbWVidWZmZXJJbmZvLCBjcmVhdGVQcm9ncmFtLCBjcmVhdGVQcm9ncmFtRnJvbVNjcmlwdHMsIGNyZWF0ZVByb2dyYW1Gcm9tU291cmNlcywgY3JlYXRlUHJvZ3JhbUluZm8sIGNyZWF0ZVByb2dyYW1JbmZvRnJvbVByb2dyYW0sIGNyZWF0ZVNhbXBsZXIsIGNyZWF0ZVNhbXBsZXJzLCBjcmVhdGVUZXh0dXJlLCBjcmVhdGVUZXh0dXJlcywgY3JlYXRlVHJhbnNmb3JtRmVlZGJhY2ssIGNyZWF0ZVRyYW5zZm9ybUZlZWRiYWNrSW5mbywgY3JlYXRlVW5pZm9ybUJsb2NrSW5mbywgY3JlYXRlVW5pZm9ybUJsb2NrSW5mb0Zyb21Qcm9ncmFtLCBjcmVhdGVVbmlmb3JtQmxvY2tTcGVjRnJvbVByb2dyYW0sIGNyZWF0ZVVuaWZvcm1TZXR0ZXJzLCBjcmVhdGVWQU9BbmRTZXRBdHRyaWJ1dGVzLCBjcmVhdGVWQU9Gcm9tQnVmZmVySW5mbywgY3JlYXRlVmVydGV4QXJyYXlJbmZvLCBkcmF3LCBkcmF3QnVmZmVySW5mbywgZHJhd09iamVjdExpc3QsIGZyYW1lYnVmZmVycywgZ2V0QXJyYXkgYXMgZ2V0QXJyYXlfLCBnZXRCeXRlc1BlckVsZW1lbnRGb3JJbnRlcm5hbEZvcm1hdCwgZ2V0Q29udGV4dCwgZ2V0Rm9ybWF0QW5kVHlwZUZvckludGVybmFsRm9ybWF0LCBnZXRHTFR5cGVGb3JUeXBlZEFycmF5LCBnZXRHTFR5cGVGb3JUeXBlZEFycmF5VHlwZSwgZ2V0TnVtQ29tcG9uZW50c0ZvckZvcm1hdCwgZ2V0TnVtQ29tcG9uZW50cyBhcyBnZXROdW1Db21wb25lbnRzXywgZ2V0VHlwZWRBcnJheVR5cGVGb3JHTFR5cGUsIGdldFdlYkdMQ29udGV4dCwgZ2xFbnVtVG9TdHJpbmcsIGlzQXJyYXlCdWZmZXIsIGlzV2ViR0wxLCBpc1dlYkdMMiwgbG9hZFRleHR1cmVGcm9tVXJsLCBtNCwgcHJpbWl0aXZlcywgcHJvZ3JhbXMsIHJlc2l6ZUNhbnZhc1RvRGlzcGxheVNpemUsIHJlc2l6ZUZyYW1lYnVmZmVySW5mbywgcmVzaXplVGV4dHVyZSwgc2V0QXR0cmliSW5mb0J1ZmZlckZyb21BcnJheSwgc2V0RGVmYXVsdHMgYXMgc2V0QXR0cmlidXRlRGVmYXVsdHNfLCBzZXRBdHRyaWJ1dGVQcmVmaXgsIHNldEF0dHJpYnV0ZXMsIHNldEJsb2NrVW5pZm9ybXMsIHNldEJ1ZmZlcnNBbmRBdHRyaWJ1dGVzLCBzZXREZWZhdWx0VGV4dHVyZUNvbG9yLCBzZXREZWZhdWx0cyQyIGFzIHNldERlZmF1bHRzLCBzZXRFbXB0eVRleHR1cmUsIHNldFNhbXBsZXJQYXJhbWV0ZXJzLCBzZXREZWZhdWx0cyQxIGFzIHNldFRleHR1cmVEZWZhdWx0c18sIHNldFRleHR1cmVGaWx0ZXJpbmdGb3JTaXplLCBzZXRUZXh0dXJlRnJvbUFycmF5LCBzZXRUZXh0dXJlRnJvbUVsZW1lbnQsIHNldFRleHR1cmVQYXJhbWV0ZXJzLCBzZXRVbmlmb3JtQmxvY2ssIHNldFVuaWZvcm1zLCBzZXRVbmlmb3Jtc0FuZEJpbmRUZXh0dXJlcywgdGV4dHVyZXMsIHR5cGVkYXJyYXlzLCB1dGlscywgdjMsIHZlcnRleEFycmF5cyB9O1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8vZmxhdGZhc3QuaW5pdCgzNjAsIDY0MCk7XHJcbmltcG9ydCB7IFNwaW5lLCBDb21wb25lbnQsIENvbXBvbmVudEhvbGRlciwgU2NlbmVNYW5hZ2VyLCBTZXJpYWxpemVyLCBTdG9yYWdlLCBUd2VlbiwgUG9pbnQsIFJlY3QsIFRpbGVNYXAsTW92aWVDbGlwLFJlbmRlclRhcmdldCwgUGl4ZWwsZWFzaW5nLCBNZXNoLCBUZXh0dXJlUGFjaywgVXRpbHMsIE1hdHJpeCwgU2hhcGUsIFRpbWVyLCBUZXh0RmllbGQsIEV2ZW50LCBFdmVudERpc3BhdGNoZXIsXHJcbiAgICAgICAgIFNwcml0ZSwgU3RhZ2UsIEJpdG1hcCwgVGV4dHVyZSwgVGV4dHVyZUJhc2UsIEFwcGxpY2F0aW9uLCBhcHBsaWNhdGlvbiwgc3RhZ2UgfSBmcm9tIFwiQGVuZ2luZS9mbGF0ZmFzdFwiO1xyXG4vLyBBcHBsaWNhdGlvbi5pbml0KCB7IGxvZ2ljYWxXaWR0aDogMTgwLGxvZ2ljYWxIZWlnaHQ6IDMyMCB9ICk7XHJcbmFwcGxpY2F0aW9uLmluaXQoIDE4MCwzMjAgLDYwLEFwcGxpY2F0aW9uLlNjYWxlTW9kZXMuTEVUVEVSQk9YICk7XHJcblxyXG5cclxuaW1wb3J0IEljb25QYWNrIGZyb20gXCJAbGliL2ljb25QYWNrXCI7ICAgICAgICBcclxuXHJcbmltcG9ydCBDT05GSUcgZnJvbSBcIi4vY29uZmlnXCI7XHJcbmltcG9ydCBHTE9CQUwgZnJvbSBcIi4vZ2xvYmFsXCI7XHJcbmltcG9ydCBXb3JsZCBmcm9tIFwiLi93b3JsZC93b3JsZFwiO1xyXG5pbXBvcnQgR2FtZU1hcCBmcm9tIFwiLi93b3JsZC9nYW1lTWFwXCI7XHJcbmltcG9ydCBQbGF5ZXIgZnJvbSBcIi4vZW50aXR5L3BsYXllclwiO1xyXG5pbXBvcnQgUGV0IGZyb20gXCIuL2VudGl0eS9wZXRcIjtcclxuaW1wb3J0IE5wYyBmcm9tIFwiLi9lbnRpdHkvbnBjXCI7XHJcbmltcG9ydCBJdGVtIGZyb20gXCIuL2VudGl0eS9pdGVtXCI7XHJcbmltcG9ydCBJbnRlcmZhY2UgZnJvbSBcIi4vaW50ZXJmYWNlL2ludGVyZmFjZVwiO1xyXG5pbXBvcnQgU2F2ZUxvYWQgZnJvbSBcIi4vc2F2ZUxvYWRcIjtcclxuaW1wb3J0IFJhbmRvbSBmcm9tIFwiQGxpYi9yYW5kb21cIjtcclxuXHJcblxyXG5cclxuXHJcblxyXG4vLyBndWkuYWRkKCBhcHBsaWNhdGlvbi5sb2dpY2FsVmlld3BvcnQsIFwid2lkdGhcIiApO1xyXG4vLyBndWkuYWRkKCBhcHBsaWNhdGlvbi5sb2dpY2FsVmlld3BvcnQsIFwiaGVpZ2h0XCIgKTtcclxuXHJcblxyXG4vLyBfYWNjZWxlcm9tZXRlciA9IG5ldyBBY2NlbGVyb21ldGVyKCk7XHJcbi8vIF9hY2NlbGVyb21ldGVyLnN0YXJ0KCk7XHJcblxyXG5hcHBsaWNhdGlvbi5zZXRCYWNrZ3JvdW5kQ29sb3IoIDB4MDAwMDAwICk7XHJcbi8vR0xPQkFMLnN0YWdlID0gU2NhbGVkU3RhZ2UubmV3KDcyMCAvIDMuNSwgMTI4MCAvIDMuNSwgdHJ1ZSlcclxuR0xPQkFMLnN0YWdlID0gc3RhZ2U7Ly9uZXcgU2NhbGVkU3RhZ2UoNzUwIC8gNCwgMTMzNCAvIDQpOy8vICwgdHJ1ZSlcclxuLy9HTE9CQUwuc3RhZ2UgPSBTY2FsZWRTdGFnZS5uZXcoNzUwIC8gMiwgMTMzNCAvIDIpLy8gLCB0cnVlKVxyXG4vLyBHTE9CQUwuc3RhZ2Uuc2V0RnVsbFNjcmVlbih0cnVlKTtcclxuLy8gR0xPQkFMLnN0YWdlLmFkZFRvU3RhZ2UoKTtcclxuLy8gR0xPQkFMLnN0YWdlLnNldFNjYW5saW5lKHRydWUpO1xyXG4vL1RPRE86XHJcbi8vR0xPQkFMLmNvbnNvbGUgPSBuZXcgRGVidWdDb25zb2xlKEludGVyZmFjZS51aVR0Zik7XHJcblxyXG4vLyBHTE9CQUwud29ybGQgPSBudWxsO1xyXG4vLyBHTE9CQUwucGxheWVyID0gbnVsbDtcclxuLy8gR0xPQkFMLmludGVyZmFjZSA9IG51bGw7XHJcbi8vIEdMT0JBTC5zYXZlTG9hZCA9IG51bGw7XHJcblxyXG5cclxuLy8gbGV0IHRtID0gbmV3IFRpbGVNYXAoMTAsIDEwLCBuZXcgVGV4dHVyZShcInRpbGUucG5nXCIpLCAxNiwgMjQsIDAsIDAsIDAsIDAsIDE2LCAyNCk7XHJcbi8vIGZvciAobGV0IHkgPSAwOyB5IDwgMTA7IHkrKykge1xyXG4vLyAgICAgZm9yIChsZXQgeCA9IDA7IHggPCAxMDsgeCsrKSB7XHJcbi8vICAgICAgICAgdG0uc2V0VGlsZSh4LCB5LCB4LCB5KTtcclxuLy8gICAgIH1cclxuLy8gfVxyXG4vLyBzdGFnZS5hZGRDaGlsZCh0bSk7XHJcbi8vIGxldCBpcCA9IG5ldyBJY29uUGFjayhuZXcgVGV4dHVyZShcInByb3AucG5nXCIpLCAzLCAyLCAxNiwgMjQsIDB4ZmZmZmZmLCAxLCAwLCAwKTtcclxuLy8gc3RhZ2UuYWRkQ2hpbGQoaXApO1xyXG4vLyBsZXQgdGYgPSBUZXh0RmllbGQuZnJvbVRleHRXcmFwKFwi7JWI64WV7ZWY7Iut64uI6rmMXFxu7JWI64WV7ZWY7Iuc64OQ6rOg7JqUXCIpO1xyXG4vLyB0Zi55ID0gNTA7XHJcbi8vdGYuc2V0VGV4dENvbG9yKDB4ZmYwMDAwKTtcclxuLy8gc3RhZ2UuYWRkQ2hpbGQodGYpO1xyXG4vLyBjb25zb2xlLmxvZyhg7YWN7Iqk7Yq4IOyEuOuhnO2BrOq4sCAke3RmLmdldEhlaWdodCgpfWApO1xyXG4vLyBsZXQgZiA9IG5ldyBGb250KFwiZm9udF9iaXRtYXAuZm50XCIsIFwiZm9udF9iaXRtYXAucG5nXCIpO1xyXG5cclxuaW1wb3J0IHsgUHJvcHMgfSBmcm9tIFwiLi9lbnRpdHkvZW50aXR5Q29tcG9uZW50c1wiO1xyXG4vLyBpbXBvcnQgUmVtb3RlQ29tcG9uZW50IGZyb20gXCJAZW5naW5lL3JlbW90ZUNvbXBvbmVudFwiO1xyXG5cclxuXHJcbi8vIGltcG9ydCBNb3Rpb25CbHVyU3ByaXRlIGZyb20gXCIuL2VuZ2luZS9tb3Rpb25CbHVyU3ByaXRlXCI7XHJcblxyXG5UaW1lci5kZWxheWVkQ2FsbCggMTAwMCwgKCkgPT4ge1xyXG4gICAgLy8gY29uc3QgdCA9IG5ldyBUZXh0dXJlKCBcIldpbmRvd0ZyYW1lLnBuZ1wiICk7XHJcbiAgICAvLyBjb25zdCBiID0gbmV3IE1vdGlvbkJsdXJTcHJpdGUoIHQgKTtcclxuXHJcbiAgICAvLyBzdGFnZS5hZGRDaGlsZCggYiApO1xyXG4gICAgLy8gYi55ID0gNjA7XHJcbiAgICAvLyBiLm1vdmUoIDE1MCwyNTAsNDAwLHsgZWFzZTogXCJpbk91dEN1YmljXCIgLCByZXBlYXRDb3VudDogMCwgcmVmbGVjdDogdHJ1ZSB9ICk7XHJcblxyXG4gICAgLy8gbGV0IHMgPSBuZXcgU3BpbmUoIFwiU3BpbmVzL0h1bWFuU2lkZS9odW1hbl9zaWRlLmpzb25cIiApO1xyXG4gICAgLy8gbGV0IHMgPSBuZXcgU3BpbmUoIFwiU3BpbmVzL2h1bWFuX3NpZGVcIiApO1xyXG5cclxuICAgIC8vIHMub24oIEV2ZW50LlJFQURZLCgpPT57XHJcblxyXG4gICAgLy8gICAgIHMueCA9IDEwMDtcclxuICAgIC8vICAgICBzLnkgPSAyMDA7XHJcbiAgICAvLyAgICAgcy5zY2FsZSA9IDAuMjtcclxuICAgIC8vICAgICAvLyBsZXQgc3MgPSBzLl9fcGl4aS5zcGluZURhdGEuc2tpbnNbIFwibG9kZXJ1bm5lclwiIF07XHJcblxyXG4gICAgLy8gICAgIC8vIHMuX19waXhpLnNrZWxldG9uLnNldFNraW4oIHNzICk7XHJcbiAgICAvLyAgICAgc3RhZ2UuYWRkQ2hpbGQoIHMgKTtcclxuXHJcbiAgICAvLyB9ICk7XHJcblxyXG4gICAgLy8gbGV0IHMgPSBuZXcgU3ByaXRlKCk7XHJcbiAgICAvLyBsZXQgYyA9IG5ldyBSZW1vdGVDb21wb25lbnQoKTtcclxuXHJcbiAgICAvLyBzdGFnZS5hZGRDaGlsZCggcyApO1xyXG4gICAgLy8gcy5hZGRDb21wb25lbnQoIGMgKTtcclxuXHJcbiAgICAvLyBjLmxvY2tlZCA9IDE7XHJcbiAgICAvLyBjb25zb2xlLmxvZyggYOyeoOq4tOqwkiDthYzsiqTtirggJHtjLmxvY2tlZH1gICk7XHJcbiAgICAvLyBsZXQgciA9IGMudGVzdE1ldGhvZCggYyApO1xyXG5cclxuICAgIC8vIHMub24oIEV2ZW50LlVQREFURSwoIGUgKT0+e1xyXG5cclxuICAgIC8vICAgICBjb25zb2xlLmxvZyggYOyeoOq4tOqwkiDthYzsiqTtirgyICR7Yy5sb2NrZWR9YCApO1xyXG4gICAgXHJcbiAgICAvLyB9ICk7XHJcbiAgICAvLyBzLm9uKCBcInRlc3RcIiwoIGUgKT0+e1xyXG5cclxuICAgIC8vICAgICBjb25zb2xlLmxvZyggXCLsnbTrsqTtirjsnqHsnYxcIixlICk7XHJcbiAgICBcclxuICAgIC8vIH0gKTtcclxuICAgIC8vIHMuZGlzcGF0Y2hFdmVudCggXCJoZWxsb1wiICk7XHJcblxyXG4gICAgLy8gY29uc3QgZGQgPSBDb21wb25lbnRIb2xkZXIuZ2V0QWxsQ29tcG9uZW50cyggUmVtb3RlQ29tcG9uZW50ICk7XHJcblxyXG4gICAgLy8gY29uc29sZS5sb2coIFwi7Lu07Y2864SM7Yq47LC+6riwXCIsZGQgKTtcclxuICAgIFxyXG4gICAgLy8gY29uc3QgZGQyID0gQ29tcG9uZW50SG9sZGVyLmdldEFsbENvbXBvbmVudEhvbGRlcnMoIFJlbW90ZUNvbXBvbmVudCApO1xyXG5cclxuICAgIC8vIGNvbnNvbGUubG9nKCBcIu2ZgOuNlOywvuq4sFwiLGRkMiApO1xyXG4gICAgXHJcbiAgICAvLyAvLyBjLnJlcXVlc3RNb2RpZnkoIHRoaXMuX19kaXJ0eUxpc3QgKTtcclxuXHJcbiAgICAvLyByLnRoZW4oICggZSApPT5jb25zb2xlLmxvZyggZSApICk7XHJcblxyXG4gICAgLy8gZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ0ggZXh0ZW5kcyBDb21wb25lbnRIb2xkZXIge1xyXG5cclxuICAgIC8vICAgICBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgICAvLyAgICAgICAgIHN1cGVyKCk7XHJcbiAgICAvLyAgICAgICAgIHRoaXMubGlmZSA9ICB0aGlzLmFkZENvbXBvbmVudCggbmV3IFBhcmFtcyggMTAgKSApO1xyXG4gICAgLy8gICAgICAgICB0aGlzLm1vdGlvbiA9IHRoaXMuYWRkQ29tcG9uZW50KCBuZXcgTW90aW9uKCkgKTtcclxuICAgIC8vICAgICAgICAgdGhpcy5hID0gdGhpcy5jcmVhdGVDb21wb25lbnQoIFByb3BzLHsgYTogOTk5IH0gKTtcclxuICAgIC8vICAgICAgICAgY29uc29sZS5sb2coIFwi7LK07YGsXCIsdGhpcy5oYXNBbGxDb21wb25lbnRzKCBQYXJhbXMsTW90aW9uLFByb3BzICkgKTtcclxuICAgICAgICBcclxuICAgIC8vICAgICB9XHJcblxyXG4gICAgLy8gfVxyXG5cclxuXHJcblxyXG4gICAgLy8gbGV0IGNoID0gbmV3IENIKCk7XHJcbiAgICAvLyBsZXQgW3BdID0gY2guZ2V0Q29tcGF0aWJsZUNvbXBvbmVudHMoIFByb3BzICk7XHJcblxyXG4gICAgLy8gY29uc29sZS5sb2coIHAuYSxwLmIgKTtcclxuICAgIC8vIGNoLmRpc3BhdGNoRXZlbnQoIFwibW90aW9uXCIgKTtcclxuICAgIC8vIGNoLmRpc3BhdGNoRXZlbnQoIFwibW90aW9uXCIgKTtcclxuICAgIC8vIC8vIGNoLnJlbW92ZUNvbXBvbmVudCggY2guZ2V0Q29tcG9uZW50KCBNb3Rpb24gKSApOyAgICBcclxuICAgIC8vIGNoLnJlbW92ZUNvbXBvbmVudCggTW90aW9uICk7ICAgIFxyXG4gICAgLy8gY2guZGlzcGF0Y2hFdmVudCggXCJtb3Rpb25cIiApO1xyXG5cclxuICAgIC8qKiBcclxuICAgICAqIFxyXG4gICAgKi9cclxuICAgIC8vIENvbXBvbmVudC5DID0gQztcclxuICAgIFxyXG5cclxuXHJcbiAgICAvLyBjb25zdCBzeiA9IG5ldyBTZXJpYWxpemVyKCBbW0l0ZW0sIHsgY29uc3RydWN0OiAoIHNyYyApPT5uZXcgSXRlbSggc3JjLm5hbWUsc3JjLnRpbGVYLHNyYy50aWxlWSApIH1dXSApO1xyXG4gICAgXHJcbiAgICAvLyBjb25zdCB0ID0gbmV3IFRleHR1cmUoIFwiV2luZG93RnJhbWUucG5nXCIgKTtcclxuICAgIC8vIGNvbnN0IGIgPSBuZXcgQml0bWFwKCB0ICk7XHJcblxyXG4gICAgLy8gY29uc3QgaTEgPSBuZXcgSXRlbSggXCLqs6HqtK3snbRcIiApO1xyXG4gICAgLy8gY29uc3QgbyA9IHsgaXQ6IGkxLGhlbGxvOiBcIndvcmxkXCIsIHg6IFsxLCAyLCAzLCA0XSwgdDogXCI/XCIgfTtcclxuXHJcbiAgICAvLyBjb25zb2xlLmxvZyggc3oucGFyc2UoIHN6LnN0cmluZ2lmeSggbyApICkgKTtcclxuXHJcblxyXG4gICAgLy8gY29uc3QgcyA9IG5ldyBTcHJpdGUoKS50cmlnZ2VyYWJsZSgpO1xyXG4gICAgLy8gLy9zLmFkZFRyaWdnZXIoXCJhYWFcIiwgeyB4OiB0cnVlIH0sIChvLCBrKSA9PiBvW2tdID4gMSApO1xyXG4gICAgLy8gLy9zLm9uKFwiYWFhXCIsICgpID0+IHsgY29uc29sZS5sb2coXCLsnbTrsqTtirjtirjrpqzqsbBcIikgOyB9ICk7XHJcbiAgICAvLyAvLyBzdGFnZS5hZGRDaGlsZChzKTtcclxuICAgIC8vIC8vIHMubW92ZSgxMDAsIDEwMCwgMTAwMCk7XHJcbiAgICAvLyBjb25zdCBlID0gcy5uZXdFdmVudCggeyBhOiAxMCB9ICk7XHJcblxyXG4gICAgLy8gZS5vbiggZnVuY3Rpb24oIHggKSB7XHJcblxyXG4gICAgLy8gICAgIGNvbnNvbGUubG9nKCBcIuydtOuypO2KuOyZlOuLuVwiLHgsdGhpcyApOyBcclxuXHJcbiAgICAvLyB9ICk7XHJcbiAgICAvLyBlLmRpc3BhdGNoKCk7XHJcblxyXG4gICAgLy8gY29uc3QgdCA9IG5ldyBUZXh0dXJlKCBcIldpbmRvd0ZyYW1lLnBuZ1wiICk7XHJcbiAgICAvLyAvL2IueCArPSAzMDtcclxuICAgIC8vIC8vIGIueSArPSAzMDszXHJcbiAgICAvLyBjb25zdCBiID0gbmV3IEJpdG1hcCggdCApO1xyXG5cclxuICAgIC8vIC8vIGIuc2V0Um90YXRpb24oNDUpO1xyXG4gICAgLy8gLy8gYi54ID0gNTA7XHJcbiAgICAvLyBzdGFnZS5hZGRDaGlsZCggYiApO1xyXG4gICAgLy8gYi53YWl0KCA1MDAsICgpID0+IGNvbnNvbGUubG9nKCBcIuuLpOq4sOuLpOuguOuLpFwiICkgKS5tb3ZlKCAxMDAsIDEwMCwgMTAwMCwgXCJvdXRCb3VuY2VcIiApXHJcbiAgICAvLyAgICAgLndhaXQoIDUwMCApXHJcbiAgICAvLyAgICAgLm1vdmUoIDAsIDIwMCwgMTAwMCApO1xyXG4gICAgLy8gY29uc29sZS5sb2coIGIuaGl0VGVzdFBvaW50KCAyNCwgMjQgKSApO1xyXG5cclxuICAgIC8vIGIuc2V0SW50ZXJhY3RpdmUoIHtcclxuICAgIC8vICAgICBkb3duOiAoIGUsIGkgKSA9PiB7XHJcblxyXG4gICAgLy8gICAgICAgICBjb25zb2xlLmxvZyggZSwgaSApO1xyXG4gICAgICAgIFxyXG4gICAgLy8gICAgIH0sXHJcbiAgICAvLyAgICAgZHJhZ1g6IHRydWUsXHJcbiAgICAvLyAgICAgZHJhZ1k6IHRydWVcclxuICAgIC8vIH0gKTtcclxuICAgIFxyXG4gICAgLy8gY29uc3QgczEgPSBuZXcgU3RvcmFnZSggXCJ4eHhcIiApO1xyXG5cclxuICAgIC8vIHMxLndyaXRlKCBcIjFcIiwgXCLsmYTsoITtnogg7ISx6rO17ZaI7Iq164uI64ukXCIgKS50aGVuKCAoKSA9PiB7XHJcblxyXG4gICAgLy8gICAgIHMxLnJlYWQoIFwiMVwiICkudGhlbiggciA9PiBjb25zb2xlLmxvZyggciApICk7XHJcbiAgICBcclxuICAgIC8vIH0gKTtcclxuXHJcbiAgICAvL2xldCB0ZiA9IG5ldyBUZXh0RmllbGQobnVsbCwgXCJhYmNkZWZnXFxuZGVmZ2RnXCIpO1xyXG5cclxuICAgIC8vIHRmLnggPSA1MDtcclxuICAgIC8vIHRmLnkgPSA1MDtcclxuICAgIC8vIGxldCBmZiA9IFBJWEkuQml0bWFwVGV4dC5mb250c1tcImZvbnRfYml0bWFwLmZudFwiXTtcclxuICAgIC8vc3RhZ2UuYWRkQ2hpbGQodGYpO1xyXG4gICAgLy8gY29uc29sZS5sb2coXCJsb2dpY2FsVmlld3BvcnRcIiwgYXBwbGljYXRpb24ubG9naWNhbFZpZXdwb3J0KTtcclxuICAgIC8vIGNvbnNvbGUubG9nKFwibG9naWNhbFZpZXdwb3J0U2NhbGVcIiwgYXBwbGljYXRpb24ubG9naWNhbFZpZXdwb3J0U2NhbGUpO1xyXG4gICAgLy8gY29uc29sZS5sb2coXCJyZW5kZXJWaWV3cG9ydFwiLCBzdGFnZS5yZW5kZXJWaWV3cG9ydCk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhcInJlbmRlclZpZXdwb3J0U2NhbGVcIiwgc3RhZ2UucmVuZGVyVmlld3BvcnRTY2FsZSk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhcImRldmljZVZpZXdwb3J0XCIsIHN0YWdlLmRldmljZVZpZXdwb3J0KTtcclxuICAgIC8vIGNvbnNvbGUubG9nKFwibG9naWNhbFZpZXdwb3J0T2Zmc2V0XCIsIGFwcGxpY2F0aW9uLmxvZ2ljYWxWaWV3cG9ydE9mZnNldCk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhcImxvZ2ljYWxSZW5kZXJCb3VuZHNcIixhcHBsaWNhdGlvbi5sb2dpY2FsUmVuZGVyQm91bmRzKTtcclxufSApO1xyXG4vL2xldCB0ID0gbmV3IFRleHR1cmUoXCJUaWxlLnBuZ1wiKTtcclxuLy8gbGV0IGIgPSBuZXcgQml0bWFwKHQpO1xyXG4vLyBiLnggPSAwO1xyXG4vLyBiLmFscGhhID0gMC4xO1xyXG4vLyBzdGFnZS5hZGRDaGlsZChiKTtcclxuXHJcblxyXG4vL2IuX19waXhpLnJvdGF0aW9uID0gTWF0aC5QSSAqIDEuOTtcclxuLy9sZXQgZyA9IG5ldyBQSVhJLkdyYXBoaWNzKCk7XHJcbi8vZy5iZWdpbkZpbGwoMHgwMDAwMDAsIDEpO1xyXG4vL2cuZHJhd1JlY3QoMTAwLCAwLCAyMDAsIDEwMCk7XHJcbi8vZy5lbmRGaWxsKCk7XHJcbi8vc3RhZ2UuX19waXhpLmFkZENoaWxkKGcpO1xyXG4vL2IuX19waXhpLm1hc2sgPSBnO1xyXG4vL2Iuc2V0Q2xpcCgwLCAwLCAxMDAsIDEwMCk7XHJcbi8vc3RhZ2UuX19waXhpLmFkZENoaWxkKGIuX19waXhpKTtcclxuLy8gbGV0IHMxID0gbmV3IFNwcml0ZSgpO1xyXG4vLyBzMS5hZGRDaGlsZChiKTtcclxuLy8gczEuc2V0QW5jaG9yUG9pbnQoMCwgMCk7XHJcbi8vIHN0YWdlLmFkZENoaWxkKHMxKTtcclxuLy8gLy9uZXcgVHdlZW4oYiwgMTAwMCwgeyB4OiAxMDAgfSwgeyBlYXNlOiBlYXNpbmcub3V0Q3ViaWMgfSk7XHJcbi8vIG1jLnNldEdvdG9BY3Rpb24oNjAsIDApO1xyXG4vLyBzdGFnZS5hZGRDaGlsZChtYyk7XHJcblxyXG4vL3N0YWdlLmFkZENoaWxkKG5ldyBQaXhlbCgweDAwZmZmZiwgMC41LCAxMCwgMTApKTtcclxuLy8gVGltZXIuZGVsYXllZENhbGwoMTAwMCwgKCkgPT4ge1xyXG4gICAgXHJcbi8vICAgICBjb25zb2xlLmxvZyh0LmdldFdpZHRoKCkpO1xyXG4vLyAgICAgbGV0IGIgPSBuZXcgQml0bWFwKHQpO1xyXG4vLyAgICAgLy9zdGFnZS5hZGRDaGlsZChiKTtcclxuLy8gbGV0IG0gPSBuZXcgTWVzaCgpO1xyXG4vLyBtLnNldEluZGV4QXJyYXkoWzAsIDEsIDIsIDEsIDMsIDJdKTtcclxuLy8gbS5zZXRWZXJ0ZXhBcnJheShbMCwgMCwgMTAwLCAwLCAwLCAxMDAsIDEwMCwgMTAwXSk7XHJcbi8vIG0uc2V0VGV4dHVyZSh0KTtcclxuLy8gbS5zZXRDb2xvckFycmF5KFsweGZmZmZmZiwgMS4wLCAweGZmZmZmZiwgMS4wLCAweGZmZmZmZiwgMSwgMHhmZmZmZmYsIDFdKTtcclxuLy8gbS5zZXRUZXh0dXJlQ29vcmRpbmF0ZUFycmF5KFswLCAwLCAxMDAsIDAsIDAsIDEwMCwgMTAwLCAxMDBdKTtcclxuLy8gLy9tLnNldFRleHR1cmVDb29yZGluYXRlcygwLDEwMCwgMCwgMSwyMDAsIDAsIDIsMTAwLCAxMDAsIDMsMjAwLCAxMDApO1xyXG4vLyAvL20uc2V0VGV4dHVyZUNvb3JkaW5hdGVBcnJheShbMCwgMCwgMSwgMCwgMCwgMSwgMSwgMV0pO1xyXG4vLyBtLmFscGhhID0gMC41O1xyXG4vLyBzdGFnZS5hZGRDaGlsZChtKTtcclxuXHJcbi8vICAgICAvLyBsZXQgcnQgPSBuZXcgUmVuZGVyVGFyZ2V0KGFwcGxpY2F0aW9uLDUxMiwgNTEyKTtcclxuLy8gICAgIC8vIHJ0LmNsZWFyKDB4ZmYwMDAwLCAxKTtcclxuLy8gICAgIC8vIHJ0LmRyYXcoYik7XHJcbi8vICAgICAvLyBsZXQgYjEgPSBuZXcgQml0bWFwKHJ0KTtcclxuLy8gICAgIC8vIHN0YWdlLmFkZENoaWxkKGIxKTtcclxuLy8gICAgIC8vIGIxLnkgPSA1MDtcclxuLy8gfSk7XHJcblxyXG5cclxuLy9hcHBsaWNhdGlvbi5zZXRGdWxsc2NyZWVuKCB0cnVlICk7XHJcblxyXG5jb25zdCBbcHgsIHB5LCBwdywgcGhdID0gWzAsMCxhcHBsaWNhdGlvbi5sb2dpY2FsUmVuZGVyQm91bmRzLndpZHRoLGFwcGxpY2F0aW9uLmxvZ2ljYWxSZW5kZXJCb3VuZHMuaGVpZ2h0XTtcclxuXHJcbkdMT0JBTC5zY2VuZU1hbmFnZXIgPSBuZXcgU2NlbmVNYW5hZ2VyKCBhcHBsaWNhdGlvbiwgcHgsIHB5LCBwdywgcGgsIGFwcGxpY2F0aW9uLmxvZ2ljYWxWaWV3cG9ydC53aWR0aCwgYXBwbGljYXRpb24ubG9naWNhbFZpZXdwb3J0LmhlaWdodCApO1xyXG5HTE9CQUwuc3RhZ2UuYWRkQ2hpbGQoIEdMT0JBTC5zY2VuZU1hbmFnZXIgKTtcclxuXHJcblxyXG5HTE9CQUwud29ybGQgPSBuZXcgV29ybGQoIHtcclxuICAgIHNlZWQ6ICAgICAgICAgIDUsXHJcbiAgICB0eXBlOiAgICAgICAgICBcImR1bmdlb25cIixcclxuICAgIGNhdmU6ICAgICAgICAgIDAuMSxcclxuICAgIG51bU9mRmxvb3I6ICAgIHsgbWluOiAxMCwgbWF4OiAxNSB9LFxyXG4gICAgbnVtT2ZDYW1wZmlyZTogNSxcclxuICAgIGZsb29yOiAgICAgICAgIDEsXHJcbn0gKTtcclxuXHJcbi8qXHJcbiAgICBHTE9CQUwud29ybGQgPSBXb3JsZC5uZXcoe1xyXG4gICAgICAgIHR5cGU9XCJ3aWxkbmVzc1wiLFxyXG4gICAgICAgIHdpZHRoPTUxMixcclxuICAgICAgICBoZWlnaHQ9NTEyLFxyXG4gICAgfSlcclxuKi9cclxuXHJcbi8qXHJcbiAgICBHTE9CQUwud29ybGQgPSBXb3JsZC5uZXcoe1xyXG4gICAgICAgIHVybD1cImh0dHA6Ly9iaXRyaWEyLmhvbWVpcC5uZXQ6ODA4MC93b3JsZGdlbi9nZW4ucGhwP3c9MjAwJmg9MjAwJnJhbmRvbVNlZWQ9M1wiLFxyXG4gICAgfSlcclxuKi9cclxuXHJcblxyXG4vKlxyXG4gICAgR0xPQkFMLndvcmxkID0gV29ybGQubmV3KHtcclxuICAgICAgICB3b3JsZEdlbiA9IHtcclxuICAgICAgICAgICAgc2VlZCA9IDMsXHJcbiAgICAgICAgICAgIHdpZHRoID0gMjAwLFxyXG4gICAgICAgICAgICBoZWlnaHQgPSAyMDAsXHJcblxyXG4gICAgICAgICAgICBtYXhSaXZlckNvdW50ID0gMTI4LFxyXG4gICAgICAgICAgICBzZWFMZXZlbCA9IDAuMzUsXHJcbiAgICAgICAgICAgIHRlbXBlcmF0dXJlWVRvcCA9IDAuMyxcclxuICAgICAgICAgICAgdGVtcGVyYXR1cmVZTWlkID0gMC41LFxyXG4gICAgICAgICAgICB0ZW1wZXJhdHVyZVlCb3R0b20gPSAwLjcsXHJcbiAgICAgICAgICAgIHJhaW5Ob2lzZU9jdGF2ZUNvdW50ID0gOCxcclxuICAgICAgICAgICAgcmFpbk5vaXNlUGVyc2lzdGFuY2UgPSAwLjUsXHJcbiAgICAgICAgICAgIHJhaW5Ob2lzZU1pZEFtcGxpZnkgPSAxLjUsXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuKi9cclxuXHJcblxyXG5HTE9CQUwuc2NlbmVNYW5hZ2VyLmNoYW5nZVNjZW5lKCBHTE9CQUwud29ybGQsIDEwMDAsIFNjZW5lTWFuYWdlci5jaXJjbGVPdXRSVCwgZWFzaW5nLm91dEN1YmljICk7XHJcbi8vR0xPQkFMLnNjZW5lTWFuYWdlci5jaGFuZ2VTY2VuZShHTE9CQUwud29ybGQsIDUwMDAsIFNjZW5lTWFuYWdlci5jaXJjbGVJbk91dCwgZWFzaW5nLm91dEN1YmljKTtcclxuLy9HTE9CQUwuc2NlbmVNYW5hZ2VyLmNoYW5nZVNjZW5lKEdMT0JBTC53b3JsZCwgMTAwMCwgU2NlbmVNYW5hZ2VyLm1vdmVGcm9tVG9wLCBlYXNpbmcub3V0Q3ViaWMpO1xyXG4vKlxyXG4gICAgR0xPQkFMLndvcmxkID0gV29ybGQubmV3KHtcclxuICAgICAgICB0eXBlPVwiZHVuZ2VvblwiLFxyXG4gICAgICAgIGNhdmU9MC41LFxyXG4gICAgICAgIG51bU9mRmxvb3I9eyBtaW49NDAsIG1heD00MCB9LFxyXG4gICAgICAgIGZsb29yPTEsXHJcbiAgICB9KVxyXG4qL1xyXG5cclxuY29uc3QgcyA9XHJcbiAgICBgXHJcbi4uQC4uLi4uLlAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXHJcbi4uQC4uLi4uLi4uLi4qLi5JLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXHJcbi4uQC4uLlAuLi4uLk1NTU1NTU0uLi4uLi4uLi4uQkJCQkJCQkJCQkJCLi4uXHJcbi4uQC4uLi5NTS4uLk18KXx8fE0rKy4uLi4uLi4uQi4uLi4uLi4uLi5CLi4uXHJcbi4uQC4uLi4uLi4uLk1aWlpafE1NTU1NLi4uLi4uQi4uLi4qKysrKytCLi4uXHJcbi4uQC4qLi4uLi4uLk18fHx8fEQrKy5NLi4uLi4uQi4uLi4uKysrKy5CLi4uXHJcbi4uQEBAQEBALi4jI018fHx8fE0rK1dXV1dXV1cuQkJCQkJCQkRCQkJCLi4uXHJcbi4uLi5NTS5ALi4jLk18fHx8fE0rK1d9Li4uKVcuLi4uKysrKysuLi4uLi4uXHJcbi4uLi5NTS5AVC4jLk1NTU1NTU0rK0QuKUhISFcuLi4uKy4uLi4uLi4jLi4uXHJcbi4uLi4uLi5ALi4jLi4uLiMuLkArK1cuLi4pLlcuKysrKy4uLi4qLi4jLi4uXHJcbi4uPj4uLi5ALk1NTSMjIyMuLkAuK1dXV1dXV1cuKy4uLi4uLi4uLi4jIyMjXHJcbi4uLi4uLk1ALi4uTS4uLi4uLkB+KysrOjorKysrKy4uLi4uLi4uLi4jLi4uXHJcbi4uUC4uLlRALi4uLi4uLkkuLkB+Li4rOjouLi5+fi4uIyMjRCMjIyMjLi4uXHJcbi4uLi4uLi5AQEBAQEBAQEBAQEB+Li4uOjoufn5+Li4uIy4jLi4uLi4jLi4uXHJcbi4uLi5QLi5AQEBAQC4uRkBALkB8QEBAOjpAfEBAQEBAIy4uLi4uLi4uLi4uXHJcbi4uLi4uLi4uLi4uQEBAQEBALi5+fn5+Ojp+fi4uLiNAQEBAVC4uLi4qLi4uXHJcbi4uLi4uLi4uLi4uLi4uLi4uLi4ufi4uOjouLi4uLiMuLi4uLi4uLi4uLi4uXHJcbmA7XHJcblxyXG5cclxuLy9HTE9CQUwuc3RhZ2UuYWRkQ2hpbGQoR0xPQkFMLndvcmxkKVxyXG5HTE9CQUwuaW50ZXJmYWNlID0gbmV3IEludGVyZmFjZSgpO1xyXG5HTE9CQUwuc3RhZ2UuYWRkQ2hpbGQoIEdMT0JBTC5pbnRlcmZhY2UgKTtcclxuXHJcblxyXG5HTE9CQUwuc2F2ZUxvYWQgPSBudWxsO1xyXG5cclxuR0xPQkFMLndvcmxkLm9uKCBcInJlYWR5XCIsIGZ1bmN0aW9uICgpIHtcclxuICAgIC8vVE9ETzpcclxuICAgIEdMT0JBTC5zYXZlTG9hZCA9IG5ldyBTYXZlTG9hZCggXCJzYXZlLmpzb25cIiApO1xyXG5cclxuICAgIGxldCBbeCwgeV0gPSBbR0xPQkFMLndvcmxkLmVudGVyWCwgR0xPQkFMLndvcmxkLmVudGVyWV07XHJcblxyXG4gICAgaWYgKCB4ID09IG51bGwgKSB7XHJcbiAgICAgICAgW3gsIHldID0gWzEwMCwgMTk2XTtcclxuICAgIH1cclxuXHJcbiAgICB3aGlsZSAoICggR0xPQkFMLndvcmxkLmdldFByb3BlcnR5KCB4LCB5ICkud2FsbCAmIEdhbWVNYXAuQkxPQ0tfUEFTUyApICE9IDAgKSB7XHJcbiAgICAgICAgeCA9IFV0aWxzLnJhbmRvbSggMSxHTE9CQUwud29ybGQubWFwLndpZHRoICk7XHJcbiAgICAgICAgeSA9IFV0aWxzLnJhbmRvbSggMSxHTE9CQUwud29ybGQubWFwLmhlaWdodCApO1xyXG4gICAgfVxyXG4gICAgR0xPQkFMLnBsYXllciA9IG5ldyBQbGF5ZXIoIG51bGwsIHgsIHkgKTsvLyAsIHsgaW1hZ2VDb2w9MSwgaW1hZ2VSb3c9MyB9KVxyXG4gICAgR0xPQkFMLndvcmxkLmVudGl0eU1hbmFnZXIuYWRkRW50aXR5KCBHTE9CQUwucGxheWVyICk7XHJcblxyXG4gICAgY29uc3QgaXRlbTEgPSBuZXcgSXRlbSggXCLrj4TrgbxcIiApO1xyXG5cclxuICAgIEdMT0JBTC5wbGF5ZXIuaW52ZW50b3J5LmFkZEl0ZW0oIGl0ZW0xICk7XHJcbiAgICBpdGVtMS5lcXVpcCgpO1xyXG5cclxuICAgIGNvbnN0IGl0ZW0yID0gbmV3IEl0ZW0oIFwi7IiP67O07JqwXCIgKTtcclxuXHJcbiAgICBHTE9CQUwucGxheWVyLmludmVudG9yeS5hZGRJdGVtKCBpdGVtMiApO1xyXG5cclxuICAgIGNvbnN0IGl0ZW0zID0gbmV3IEl0ZW0oIFwi64KY7J207ZSEXCIgKTtcclxuXHJcbiAgICBHTE9CQUwucGxheWVyLmludmVudG9yeS5hZGRJdGVtKCBpdGVtMyApO1xyXG4gICAgaXRlbTIuZXF1aXAoKTtcclxuICAgIEdMT0JBTC5wbGF5ZXIuc2VsZWN0QWN0aW9uKCBpdGVtMiApO1xyXG5cclxuICAgIGNvbnN0IGl0ZW00ID0gbmV3IEl0ZW0oIFwi6rOh6rSt7J20XCIgKTtcclxuXHJcbiAgICBHTE9CQUwucGxheWVyLmludmVudG9yeS5hZGRJdGVtKCBpdGVtNCApO1xyXG4gICAgaXRlbTQuZXF1aXAoKTtcclxuXHJcbiAgICBHTE9CQUwucGxheWVyLmludmVudG9yeS5hZGRJdGVtKCBuZXcgSXRlbSggXCLtlZjtlIRcIiApICk7XHJcbiAgICBHTE9CQUwucGxheWVyLmludmVudG9yeS5hZGRJdGVtKCBuZXcgSXRlbSggXCLrp4zrj4zrprBcIiApICk7XHJcbiAgICBHTE9CQUwucGxheWVyLmludmVudG9yeS5hZGRJdGVtKCBuZXcgSXRlbSggXCLroIjtirjroZxNU1hcIiApICk7XHJcbiAgICBHTE9CQUwucGxheWVyLmludmVudG9yeS5hZGRJdGVtKCBuZXcgSXRlbSggXCLroIjtirjroZxBUFBMRVwiICkgKTtcclxuICAgIEdMT0JBTC5wbGF5ZXIuaW52ZW50b3J5LmFkZEl0ZW0oIG5ldyBJdGVtKCBcIuyVheuztDFcIiApICk7XHJcbiAgICBHTE9CQUwucGxheWVyLmludmVudG9yeS5hZGRJdGVtKCBuZXcgSXRlbSggXCLslYXrs7QyXCIgKSApO1xyXG4gICAgR0xPQkFMLnBsYXllci5pbnZlbnRvcnkuYWRkSXRlbSggbmV3IEl0ZW0oIFwi7JWF67O0M1wiICkgKTtcclxuICAgIEdMT0JBTC5wbGF5ZXIuaW52ZW50b3J5LmFkZEl0ZW0oIG5ldyBJdGVtKCBcIuyVheuztDRcIiApICk7XHJcbiAgICBHTE9CQUwucGxheWVyLmludmVudG9yeS5hZGRJdGVtKCBuZXcgSXRlbSggXCLslYXrs7Q1XCIgKSApO1xyXG5cclxuICAgIC8vIGxldCBuYW8gPSBuZXcgTnBjKFwi64KY7JikXCIsIDEwMCwgMTk5KTtcclxuICAgIC8vIG5hby5wbGFjZXNbXCJyb29tXCJdID0geyB4OiAxMDMsIHk6IDE5MyB9O1xyXG4gICAgLy8gbmFvLnBsYWNlc1tcImJlZFwiXSA9IHsgeDogMTAyLCB5OiAxOTEgfTtcclxuICAgIC8vIG5hby5wbGFjZXNbXCJ3b3JrXCJdID0geyB4OiA5NiwgeTogMTk0IH07XHJcbiAgICAvLyBHTE9CQUwud29ybGQuZW50aXR5TWFuYWdlci5hZGRFbnRpdHkobmFvKTtcclxuICAgIGNvbnN0IGNhdCA9IG5ldyBQZXQoIFwi6rOg7JaR7J20XCIgKTtcclxuXHJcbiAgICBHTE9CQUwud29ybGQuZW50aXR5TWFuYWdlci5hZGRFbnRpdHkoIGNhdCApO1xyXG59ICk7XHJcblxyXG5cclxuLypbbG9jYWwgcHJvcDEgPSBQcm9wLm5ldyhcIkBcIiwgeCArIDEsIHkpXHJcbkdMT0JBTC53b3JsZC5hZGRFbnRpdHkocHJvcDEpXHJcbiovXHJcblxyXG4vL0dMT0JBTC5pbnRlcmZhY2UuYXV0b01hcC5kcmF3QWxsKHRydWUpXHJcblxyXG5cclxuLy93LmFkZEVudGl0eShuZXcgSXRlbSh3LCA2LCA2LCB7IGltYWdlQ29sPTIsIGltYWdlUm93PTE0LCBkcm9wPXRydWUsIGRyb3BYPTUsIGRyb3BZPTUgfSkpXHJcblxyXG4vL2hlbHBlci5wbGF5U291bmQoXCJzb3VuZC9iZ21fMS5tcDNcIiwgMC4yLCB0cnVlKVxyXG5cclxuLy9hcHBsaWNhdGlvbi5zZXRLZXlib2FyZFZpc2liaWxpdHkodHJ1ZSlcclxuXHJcbi8vbG9nKFwiLy8vLy8vLy8vLy8vLy8vLy8vLy9cIiwgYXBwbGljYXRpb24uZ2V0TG9naWNhbFNjYWxlWSgpLCBhcHBsaWNhdGlvbi5nZXRTY3JlZW5EZW5zaXR5KCkpXHJcblxyXG4vLyBjb25zb2xlLmxvZyggYXBwbGljYXRpb24ubG9naWNhbFZpZXdwb3J0U2NhbGUgKTtcclxuXHJcblxyXG4vLyBjb25zb2xlLmxvZyggR0xPQkFMICk7XHJcblxyXG5cclxuLy8gbGV0IHQgPSBuZXcgVGV4dHVyZSggXCJzaGFkb3dNYXNrLnBuZ1wiICk7XHJcbi8vIGxldCBiID0gbmV3IEJpdG1hcCggdCApO1xyXG5cclxuLy8gLy8gYi5zZXRCbGVuZE1vZGUoIFNwcml0ZS5CbGVuZE1vZGVzLkFERCApO1xyXG4vLyBzdGFnZS5hZGRDaGlsZCggYiApO1xyXG5cclxuXHJcblxyXG4vLyB7XHJcbi8vICAgICBzdGFnZS5vbiggRXZlbnQuTU9VU0VfRE9XTixlPT57XHJcbi8vICAgICAgICAgbGV0IHAgPSBuZXcgUGl4ZWwoIDB4ZmZmZjAwLDEsNSw1ICk7XHJcblxyXG4vLyAgICAgICAgIHAueHkgPSBzdGFnZS5nbG9iYWxUb0xvY2FsKCBlLngsZS55ICk7XHJcbi8vICAgICAgICAgc3RhZ2UuYWRkQ2hpbGQoIHAgKTtcclxuLy8gICAgIH0gKTsgICAgICBcclxuLy8gfVxyXG5cclxuXHJcbi8vIFRpbWVyLmRlbGF5ZWRDYWxsKCAxMDAsXHJcbi8vICAgICAgICAgICAgICAgICAgICAoKT0+e1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzID0gXCJhYmNkZWY8YWFhPmRkZGRkPC9hYWFnPmRkZGRcIjtcclxuXHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIFRleHRGaWVsZC5zcGxpdFRhZyggcyApICk7XHJcbi8vICAgICAgICAgICAgICAgICAgICB9XHJcbi8vICk7XHJcblxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=